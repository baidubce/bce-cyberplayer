/*! WebPlayer built @2024/5/8 16:07:54 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cyberplayer=t():e.cyberplayer=t()}(window,function(){return n=[function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});const i={WASM_LOAD_FINISH:0,DECODE_FINISH:1,DEOCDE_INIT_FINISH:2,SET_FRAME:3,WASM_POST_RUN:11,DEMUXER_INIT_FINISH:12,POST_DEMUXER_INFO:13,DEMUXER_FINISH:14,DEMUXER_ERROR:20,BATCH_FINISH_FLAG:21,WAMS_ERROR:111},r={INIT_DECODER:0,DECODE_VIDEO:1,RETURN_VIDEO_BUFFER:2,INIT_DEMUXER:11,DEMUXER_BOX:12,GET_DEMUXER_INFO:13,RELEASE_DECODE:14,RELEASE_DEMUXER:15,FINISH_FLAG:16,LOAD_WAMS_JS:111},a={WASM_LOAD_FINISH:0,SNIFF_INIT_FINISH:1,POST_PROBEDATA:2,POST_NALUDATA:3,POST_AACDATA:4,POST_FRAMEDATA:5,POST_NALU_LENGTH:6,WAMS_ERROR:111},o={INIT_DECODER:0,PUSH_SNIFF_DATA:1,GET_SNIFF_PACKET:2,DECODE_VIDEO:3,GET_NALU_LENGTH:4,GET_SNIFF_FLV_PACKE:5,GET_BUFFER_LENGTH:6,PUSH_SNIFF_FLV_PACKET:7,RELEASE_SNIFF:8,LOAD_WAMS_JS:111}},function(e,t,n){n=[n(15),n(2),n(97),n(71),n(33),n(59),n(98),n(99),n(45),n(144),n(145),n(146)],t=function(e,t,n,i,r,a,o,s,l,u,c,h){var d={log:function(){window.console&&console.log},between:function(e,t,n){return Math.max(Math.min(e,n),t)},foreach:function(e,t){for(var n in e)("function"!==d.typeOf(e.hasOwnProperty)||e.hasOwnProperty(n))&&t(n,e[n])}};return d.indexOf=t.indexOf,d.noop=function(){},d.seconds=e.seconds,d.prefix=e.prefix,d.suffix=e.suffix,t.extend(d,a,o,l,n,s,i,r,u,c,h),d}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){function l(e){return null==e?E.identity:E.isFunction(e)?e:E.property(e)}function e(o){return function(n,i,r){var a={};return i=l(i),A(n,function(e,t){t=i.call(r,e,t,n);o(a,t,e)}),a}}function o(){}var s={},r=Array.prototype,t=Object.prototype,n=Function.prototype,u=r.slice,a=r.concat,i=t.toString,c=t.hasOwnProperty,h=r.map,d=r.reduce,f=r.forEach,p=r.filter,m=r.every,g=r.some,_=r.indexOf,t=Array.isArray,y=Object.keys,v=n.bind,E=function(e){return e instanceof E?e:this instanceof E?void 0:new E(e)},A=E.each=E.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e)===s)return}else for(var a=E.keys(e),i=0,r=a.length;i<r;i++)if(t.call(n,e[a[i]],a[i],e)===s)return;return e},b=(E.map=E.collect=function(e,i,r){var a=[];if(null!=e){if(h&&e.map===h)return e.map(i,r);A(e,function(e,t,n){a.push(i.call(r,e,t,n))})}return a},E.reduce=E.foldl=E.inject=function(e,i,r,a){var o=2<arguments.length;if(null==e&&(e=[]),d&&e.reduce===d)return a&&(i=E.bind(i,a)),o?e.reduce(i,r):e.reduce(i);if(A(e,function(e,t,n){o?r=i.call(a,r,e,t,n):(r=e,o=!0)}),o)return r;throw new TypeError("Reduce of empty array with no initial value")},E.find=E.detect=function(e,i,r){var a;return b(e,function(e,t,n){if(i.call(r,e,t,n))return a=e,!0}),a},E.filter=E.select=function(e,i,r){var a=[];if(null!=e){if(p&&e.filter===p)return e.filter(i,r);A(e,function(e,t,n){i.call(r,e,t,n)&&a.push(e)})}return a},E.reject=function(e,i,r){return E.filter(e,function(e,t,n){return!i.call(r,e,t,n)},r)},E.compact=function(e){return E.filter(e,E.identity)},E.every=E.all=function(e,i,r){i=i||E.identity;var a=!0;return null==e?a:m&&e.every===m?e.every(i,r):(A(e,function(e,t,n){if(!(a=a&&i.call(r,e,t,n)))return s}),!!a)},E.some=E.any=function(e,i,r){i=i||E.identity;var a=!1;return null==e?a:g&&e.some===g?e.some(i,r):(A(e,function(e,t,n){if(a=a||i.call(r,e,t,n))return s}),!!a)}),b=(E.size=function(e){return null==e?0:(e.length===+e.length?e:E.keys(e)).length},E.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},E.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},E.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},E.groupBy=e(function(e,t,n){E.has(e,t)?e[t].push(n):e[t]=[n]}),E.indexBy=e(function(e,t,n){e[t]=n}),E.sortedIndex=function(e,t,n,i){for(var r=(n=l(n)).call(i,t),a=0,o=e.length;a<o;){var s=a+o>>>1;n.call(i,e[s])<r?a=1+s:o=s}return a},E.some=E.any=function(e,i,r){i=i||E.identity;var a=!1;return null==e?a:g&&e.some===g?e.some(i,r):(A(e,function(e,t,n){if(a=a||i.call(r,e,t,n))return s}),!!a)}),T=(E.contains=E.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=E.values(e)),0<=E.indexOf(e,t))},E.pluck=function(e,t){return E.map(e,E.property(t))},E.where=function(e,t){return E.filter(e,E.matches(t))},E.findWhere=function(e,t){return E.find(e,E.matches(t))},E.max=function(e,i,r){var a,o;return!i&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535?Math.max.apply(Math,e):(o=a=-1/0,A(e,function(e,t,n){t=i?i.call(r,e,t,n):e;o<t&&(a=e,o=t)}),a)},E.difference=function(e){var t=a.apply(r,u.call(arguments,1));return E.filter(e,function(e){return!E.contains(t,e)})},E.without=function(e){return E.difference(e,u.call(arguments,1))},E.indexOf=function(e,t,n){if(null!=e){var i=0,r=e.length;if(n){if("number"!=typeof n)return e[i=E.sortedIndex(e,t)]===t?i:-1;i=n<0?Math.max(0,r+n):n}if(_&&e.indexOf===_)return e.indexOf(t,n);for(;i<r;i++)if(e[i]===t)return i}return-1},E.bind=function(n,i){var r,a;if(v&&n.bind===v)return v.apply(n,u.call(arguments,1));if(E.isFunction(n))return r=u.call(arguments,2),a=function(){if(!(this instanceof a))return n.apply(i,r.concat(u.call(arguments)));o.prototype=n.prototype;var e=new o,t=(o.prototype=null,n.apply(e,r.concat(u.call(arguments))));return Object(t)===t?t:e};throw new TypeError},E.partial=function(r){var a=u.call(arguments,1);return function(){for(var e=0,t=a.slice(),n=0,i=t.length;n<i;n++)t[n]===E&&(t[n]=arguments[e++]);for(;e<arguments.length;)t.push(arguments[e++]);return r.apply(this,t)}},E.once=E.partial(E.before,2),E.memoize=function(t,n){var i={};return n=n||E.identity,function(){var e=n.apply(this,arguments);return E.has(i,e)?i[e]:i[e]=t.apply(this,arguments)}},E.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(u.call(arguments,1)))},E.throttle=function(n,i,r){function a(){c=!1===r.leading?0:E.now(),u=null,l=n.apply(o,s),o=s=null}var o,s,l,u=null,c=0;r=r||{};return function(){var e=E.now(),t=(c||!1!==r.leading||(c=e),i-(e-c));return o=this,s=arguments,t<=0?(clearTimeout(u),u=null,c=e,l=n.apply(o,s),o=s=null):u||!1===r.trailing||(u=setTimeout(a,t)),l}},E.keys=function(e){if(!E.isObject(e))return[];if(y)return y(e);var t,n=[];for(t in e)E.has(e,t)&&n.push(t);return n},E.invert=function(e){for(var t={},n=E.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},E.defaults=function(n){return A(u.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n},E.extend=function(n){return A(u.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n},E.pick=function(t){var n={},e=a.apply(r,u.call(arguments,1));return A(e,function(e){e in t&&(n[e]=t[e])}),n},E.omit=function(e){var t,n={},i=a.apply(r,u.call(arguments,1));for(t in e)E.contains(i,t)||(n[t]=e[t]);return n},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.isArray=t||function(e){return"[object Array]"==i.call(e)},E.isObject=function(e){return e===Object(e)},A(["Arguments","Function","String","Number","Date","RegExp"],function(t){E["is"+t]=function(e){return i.call(e)=="[object "+t+"]"}}),E.isArguments(arguments)||(E.isArguments=function(e){return!(!e||!E.has(e,"callee"))}),E.isFunction=function(e){return"function"==typeof e},E.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},E.isNaN=function(e){return E.isNumber(e)&&e!=+e},E.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==i.call(e)},E.isNull=function(e){return null===e},E.isUndefined=function(e){return void 0===e},E.has=function(e,t){return c.call(e,t)},E.identity=function(e){return e},E.constant=function(e){return function(){return e}},E.property=function(t){return function(e){return e[t]}},E.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},E.matches=function(n){return function(e){if(e!==n)for(var t in n)if(n[t]!==e[t])return!1;return!0}},E.now=Date.now||function(){return(new Date).getTime()},E.result=function(e,t){if(null!=e)return t=e[t],E.isFunction(t)?t.call(e):t},0);return E.uniqueId=function(e){var t=++T+"";return e?e+t:t},E}.apply(t,[]);void 0!==t&&(e.exports=t)},,function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorTypes",function(){return i}),n.d(t,"ErrorDetails",function(){return r}),n.d(t,"ErrorEvent",function(){return a}),n.d(t,"MsgCode",function(){return o});const i={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},r={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"open context failed",OPEN_MEDIA_FAILED:"failed to open media"},a={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError"},o={DEOCDE_NOT_SUPPORT:4,UNKNOW_ERROR:0,PLAY_ERROR:9,DEMUXER_ERROR:10}},function(e,t){e.exports={H265WEBJS_COMPILE_MULTI_THREAD_SHAREDBUFFER:0,DEFAULT_PLAYERE_LOAD_TIMEOUT:20,DEFAILT_WEBGL_PLAY_ID:"glplayer",PLAYER_IN_TYPE_MP4:"mp4",PLAYER_IN_TYPE_FLV:"flv",PLAYER_IN_TYPE_HTTPFLV:"httpflv",PLAYER_IN_TYPE_RAW_265:"raw265",PLAYER_IN_TYPE_TS:"ts",PLAYER_IN_TYPE_MPEGTS:"mpegts",PLAYER_IN_TYPE_M3U8:"hls",PLAYER_IN_TYPE_M3U8_VOD:"m3u8",PLAYER_IN_TYPE_M3U8_LIVE:"hls",PLAYER_IN_TYPE_RTC:"rtc",PLAYER_IN_TYPE_DASH:"dash",APPEND_TYPE_STREAM:0,APPEND_TYPE_FRAME:1,APPEND_TYPE_SEQUENCE:2,DEFAULT_WIDTH:600,DEFAULT_HEIGHT:600,DEFAULT_FPS:30,DEFAULT_FRAME_DUR:40,DEFAULT_FIXED:!1,DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNELS:2,DEFAULT_CONSU_SAMPLE_LEN:20,PLAYER_MODE_VOD:"vod",PLAYER_MODE_NOTIME_LIVE:"live",AUDIO_MODE_ONCE:"ONCE",AUDIO_MODE_SWAP:"SWAP",DEFAULT_STRING_LIVE:"LIVE",CODEC_H265:0,CODEC_H264:1,CODEC_AV1:2,PLAYER_CORE_TYPE_DEFAULT:0,PLAYER_CORE_TYPE_CNATIVE:1,PLAYER_CNATIVE_VOD_RETRY_MAX:7,URI_PROTOCOL_WEBSOCKET:"ws",URI_PROTOCOL_WEBSOCKET_DESC:"websocket",URI_PROTOCOL_HTTP:"http",URI_PROTOCOL_HTTP_DESC:"http",FETCH_FIRST_MAX_TIMES:5,FETCH_HTTP_FLV_TIMEOUT_MS:7e3,V_CODEC_NAME_AV1:128,V_CODEC_NAME_HEVC:265,V_CODEC_NAME_AVC:264,V_CODEC_NAME_UNKN:500,A_CODEC_NAME_AAC:112,A_CODEC_NAME_MP3:113,A_CODEC_NAME_UNKN:500,CACHE_NO_LOADCACHE:1001,CACHE_WITH_PLAY_SIGN:1002,CACHE_WITH_NOPLAY_SIGN:1003,V_CODEC_AVC_DEFAULT_FPS:25}},function(e,t,n){t=function(){var e={COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_H265WEB_COVERLOADED:"coverImageLoaded",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_SEEK_START:"seekStart",JWPLAYER_MEDIA_SEEK_FINISHED:"seekFinished",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_SCREENSHOT:"screenshot",JWPLAYER_CaptureFrameFinished:"captureFrameFinished",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_CONNECTING:"connecting",JWPLAYER_CONNECT_FAILD:"connectFaild",JWPLAYER_NO_LIVE_STREAM:"noLiveStream",JWPLAYER_ALIVE:"alive",JWPLAYER_VIDEO_SEI:"sei_info",JWPLAYER_LIVE_STOP:"liveStop",JWPLAYER_PLAYBACKRATE:"playbackRate",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick",JWPLAYER_CUEPOINT:"cuepoint",JWPLAYER_SEEK_FORWARD_FORBIDDEN:"seekForwardForbidden",JWPLAYER_PERFORMANCE:"performance",JWPLAYER_RTCEVENT:"rtcEvent",JWPLAYER_HLS_QUALITYLIST_CHANGE:"hls_qualitylist_change",JWPLAYER_LEVEL_UPDATED:"level_updated",JWPLAYER_CHANGE_LANGs:"change_lang",touchEvents:{DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"}};return e}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(h){var r=[].slice,l=/\s+/,d=function(e,t,n,i){if(n){if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(i));return!1}}return!0},a=function(e,t,n){var i,r=-1,a=e.length,o=t[0],s=t[1],l=t[2];switch(t.length){case 0:for(;++r<a;)(i=e[r]).callback.call(i.context||n);return;case 1:for(;++r<a;)(i=e[r]).callback.call(i.context||n,o);return;case 2:for(;++r<a;)(i=e[r]).callback.call(i.context||n,o,s);return;case 3:for(;++r<a;)(i=e[r]).callback.call(i.context||n,o,s,l);return;default:for(;++r<a;)(i=e[r]).callback.apply(i.context||n,t);return}},o=function(e,t,n){for(var i,r=-1,a=e.length;++r<a;)try{(i=e[r]).callback.apply(i.context||n,t)}catch(e){}};return{on:function(e,t,n){return d(this,"on",e,[t,n])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n})),this},once:function(e,t,n){var i,r;return d(this,"once",e,[t,n])&&t?(i=this,(r=h.once(function(){i.off(e,r),t.apply(this,arguments)}))._callback=t,this.on(e,r,n)):this},off:function(e,t,n){var i,r,a,o,s,l,u,c;if(this._events&&d(this,"off",e,[t,n]))if(e||t||n){for(s=0,l=(o=e?[e]:h.keys(this._events)).length;s<l;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}}else this._events=void 0;return this},trigger:function(e){var t,n,i;return this._events&&(t=r.call(arguments,1),d(this,"trigger",e,t))&&(n=this._events[e],i=this._events.all,n&&a(n,t,this),i)&&a(i,arguments,this),this},triggerSafe:function(e){var t,n,i;return this._events&&(t=r.call(arguments,1),d(this,"trigger",e,t))&&(n=this._events[e],i=this._events.all,n&&o(n,t,this),i)&&o(i,arguments,this),this}}}.apply(t,n);void 0!==t&&(e.exports=t)},,,,,function(e,t,n){n=n(5);const r=[{format:"mp4",value:"mp4",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"mov",value:"mp4",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"mkv",value:"mp4",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"flv",value:"flv",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"m3u8",value:"hls",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"m3u",value:"hls",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"ts",value:"ts",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"ps",value:"ts",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"mpegts",value:"ts",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"hevc",value:"raw265",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"h265",value:"raw265",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"265",value:"raw265",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"mp3",value:"mp3",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"aac",value:"aac",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"flac",value:"flac",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"ogg",value:"ogg",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"wav",value:"wav",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"opus",value:"opus",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"mpd",value:"dash",core:n.PLAYER_CORE_TYPE_DEFAULT}],a=[{format:n.URI_PROTOCOL_HTTP,value:n.URI_PROTOCOL_HTTP_DESC},{format:n.URI_PROTOCOL_WEBSOCKET,value:n.URI_PROTOCOL_WEBSOCKET_DESC}];e.exports={frameDataAlignCrop:function(t,n,i,e,r,a,o,s){if(0==t-e)return[a,o,s];var l=e*r,u=l/4,c=new Uint8Array(l),h=new Uint8Array(u),d=new Uint8Array(u),f=e,p=e/2;for(let e=0;e<r;e++)c.set(a.subarray(e*t,f),e*r);for(let e=0;e<r/2;e++)h.set(o.subarray(e*n,p),e*r/2);for(let e=0;e<r/2;e++)d.set(s.subarray(e*i,p),e*r/2);return[c,h,d]},GetUriFormat:function(t){if(null!=t)for(let e=0;e<r.length;e++){var n=r[e],i="."+n.format;if(0<=t.toLocaleLowerCase().indexOf(i))return n.value}return r[0].value},GetFormatPlayCore:function(t){if(null!=t)for(let e=0;e<r.length;e++){var n=r[e];if(n.value===t)return n.core}return r[0].core},GetUriProtocol:function(t){if(null!=t)for(let e=0;e<a.length;e++){var n=a[e],i=n.format+"[s]{0,}://";if(0<=t.search(i))return n.value}return a[0].value},GetMsTime:function(){return(new Date).getTime()},GetScriptPath:function(e){return e=[(e=(e=e.toString()).match(/^\s*function\s*\(\s*\)\s*\{(([\s\S](?!\}$))*[\s\S])/))[1]],window.URL.createObjectURL(new Blob(e,{type:"text/javascript"}))},BrowserJudge:function(){let e=window.document,t=window.navigator,n=t.userAgent.toLowerCase(),i=e.documentMode,r=window.chrome||!1,a={agent:n,isIE:/msie/.test(n),isGecko:0<n.indexOf("gecko")&&n.indexOf("like gecko")<0,isWebkit:0<n.indexOf("webkit"),isStrict:"CSS1Compat"===e.compatMode,supportSubTitle:function(){return"track"in e.createElement("track")},supportScope:function(){return"scoped"in e.createElement("style")},ieVersion:function(){try{return n.match(/msie ([\d.]+)/)[1]||0}catch(e){return i}},operaVersion:function(){try{return window.opera?n.match(/opera.([\d.]+)/)[1]:0<n.indexOf("opr")?n.match(/opr\/([\d.]+)/)[1]:void 0}catch(e){return 0}},versionFilter:function(){if(1!==arguments.length||"string"!=typeof arguments[0])return 1===arguments.length?arguments[0]:0;var e=arguments[0],t=e.indexOf(".");if(0<t){t=e.indexOf(".",t+1);if(-1!==t)return e.substr(0,t)}return e}};try{a.type=a.isIE?"IE":window.opera||0<n.indexOf("opr")?"Opera":0<n.indexOf("chrome")?"Chrome":0<n.indexOf("safari")||window.openDatabase?"Safari":0<n.indexOf("firefox")?"Firefox":"unknow",a.version="IE"===a.type?a.ieVersion():"Firefox"===a.type?n.match(/firefox\/([\d.]+)/)[1]:"Chrome"===a.type?n.match(/chrome\/([\d.]+)/)[1]:"Opera"===a.type?a.operaVersion():"Safari"===a.type?n.match(/version\/([\d.]+)/)[1]:"0",a.shell=function(){var e,t;return 0<n.indexOf("maxthon")?(a.version=n.match(/maxthon\/([\d.]+)/)[1]||a.version,"傲游浏览器"):0<n.indexOf("qqbrowser")?(a.version=n.match(/qqbrowser\/([\d.]+)/)[1]||a.version,"QQ浏览器"):0<n.indexOf("se 2.x")?"搜狗浏览器":r&&"Opera"!==a.type?(t=window.external,e=window.clientInformation.languages,t&&"LiebaoGetVersion"in t?"猎豹浏览器":0<n.indexOf("bidubrowser")?(a.version=n.match(/bidubrowser\/([\d.]+)/)[1]||n.match(/chrome\/([\d.]+)/)[1],"百度浏览器"):a.supportSubTitle()&&void 0===e?(t=Object.keys(r.webstore).length,0 in window,1<t?"360极速浏览器":"360安全浏览器"):"Chrome"):a.type},a.name=a.shell(),a.version=a.versionFilter(a.version)}catch(e){}return[a.type,a.version]},ParseGetMediaURL:function(e,t="http"){if("ws"===(t="http"!==t&&"ws"!==t&&"wss"!==t&&(0<=e.indexOf("ws")||0<=e.indexOf("wss"))?"ws":t)||"wss"===t)return e;let n=e;return n=0<=e.indexOf(t)?e:"/"===e[0]?"/"===e[1]?t+":"+e:window.location.origin+e:":"===e[0]?t+e:(t=window.location.href.split("/"),window.location.href.replace(t[t.length-1],e))},IsSupport265Mse:function(){return MediaSource.isTypeSupported('video/mp4;codecs=hvc1.1.1.L63.B0"')}}},function(e,t,n){e.exports=n(190).default},function(e,t,n){n=[n(7),n(6),n(2),n(1)],t=function(e,y,v,E){var A=!v.isUndefined(window.PointerEvent),t=!A&&E.isMobile(),b=!A&&!t,T=E.isFF()&&E.isOSX();function S(e,t){return(/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]:e)["page"+t]}function w(e,t,n){var i=!E.isPoorIE()&&t instanceof MouseEvent||!t.touches&&!t.changedTouches?t:(t.touches&&t.touches.length?t.touches:t.changedTouches)[0],r=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop;return{type:e,target:t.target||t.srcElement,currentTarget:n,pageX:i.pageX||i.clientX+r,pageY:i.pageY||i.clientY+a}}function R(e){(E.isPoorIE()||e instanceof MouseEvent||e instanceof window.TouchEvent)&&(e.preventManipulation&&e.preventManipulation(),e.cancelable)&&e.preventDefault&&e.preventDefault()}function n(i,r){var a,o,s=i,l=!1,u=0,c=0,h=0,d=300;function e(e){(b||A&&"touch"!==e.pointerType)&&_(y.touchEvents.OVER,e)}function t(e){(b||A&&"touch"!==e.pointerType)&&_(y.touchEvents.MOVE,e)}function n(e){(b||A&&"touch"!==e.pointerType&&!i.contains(document.elementFromPoint(e.x,e.y)))&&_(y.touchEvents.OUT,e)}function f(e){var t,n;a=e.target,u=S(e,"X"),c=S(e,"Y"),n=(t=e)||window.event,(E.isPoorIE()||t instanceof MouseEvent)&&("which"in n?3===n.which:"button"in n&&2===n.button)||(A?e.isPrimary&&(r.preventScrolling&&(o=e.pointerId,i.setPointerCapture(o)),E.addEventListener(i,"pointermove",p),E.addEventListener(i,"pointercancel",m),E.addEventListener(i,"pointerup",m)):b&&(E.addEventListener(document,"mousemove",p),T&&"object"===e.target.nodeName.toLowerCase()?E.addEventListener(i,"click",m):E.addEventListener(document,"mouseup",m)),a&&(E.addEventListener(a,"touchmove",p),E.addEventListener(a,"touchcancel",m),E.addEventListener(a,"touchend",m)))}function p(e){var t,n,i=y.touchEvents;l?_(i.DRAG,e):(n=S(e,"X"),t=S(e,"Y"),36<(n=n-u)*n+(n=t-c)*n&&(_(i.DRAG_START,e),l=!0,_(i.DRAG,e))),r.preventScrolling&&R(e)}function m(e){var t=y.touchEvents;A?(r.preventScrolling&&i.releasePointerCapture(o),E.removeEventListener(i,"pointermove",p),E.removeEventListener(i,"pointercancel",m),E.removeEventListener(i,"pointerup",m)):b&&(E.removeEventListener(document,"mousemove",p),E.removeEventListener(document,"mouseup",m)),a&&(E.removeEventListener(a,"touchmove",p),E.removeEventListener(a,"touchcancel",m),E.removeEventListener(a,"touchend",m)),l?_(t.DRAG_END,e):r.directSelect&&e.target!==i||-1!==e.type.indexOf("cancel")||(A&&e instanceof window.PointerEvent?(e.pointerType,_(t.CLICK,e)):b?_(t.CLICK,e):(_(t.TAP,e),R(e))),a=null,l=!1}r=r||{},A?(E.addEventListener(i,"pointerdown",f),r.useHover&&(E.addEventListener(i,"pointerover",e),E.addEventListener(i,"pointerout",n)),r.useMove&&E.addEventListener(i,"pointermove",t)):b&&(E.addEventListener(i,"mousedown",f),r.useHover&&(E.addEventListener(i,"mouseover",e),E.addEventListener(i,"mouseout",n)),r.useMove)&&E.addEventListener(i,"mousemove",t),E.addEventListener(i,"touchstart",f);var g=this;function _(e,t){var n,i;!r.enableDoubleTap||e!==y.touchEvents.CLICK&&e!==y.touchEvents.TAP||(h=v.now()-h<d?(i=w(n=e===y.touchEvents.CLICK?y.touchEvents.DOUBLE_CLICK:y.touchEvents.DOUBLE_TAP,t,s),g.trigger(n,i),0):v.now()),i=w(e,t,s),g.trigger(e,i)}return this.triggerEvent=_,this.destroy=function(){E.removeEventListener(i,"touchstart",f),E.removeEventListener(i,"mousedown",f),a&&(E.removeEventListener(a,"touchmove",p),E.removeEventListener(a,"touchcancel",m),E.removeEventListener(a,"touchend",m)),A&&(r.preventScrolling&&i.releasePointerCapture(o),E.removeEventListener(i,"pointerover",e),E.removeEventListener(i,"pointerdown",f),E.removeEventListener(i,"pointermove",p),E.removeEventListener(i,"pointermove",t),E.removeEventListener(i,"pointercancel",m),E.removeEventListener(i,"pointerout",n),E.removeEventListener(i,"pointerup",m)),E.removeEventListener(i,"click",m),E.removeEventListener(i,"mouseover",e),E.removeEventListener(i,"mousemove",t),E.removeEventListener(i,"mouseout",n),E.removeEventListener(document,"mousemove",p),E.removeEventListener(document,"mouseup",m)},this}return v.extend(n.prototype,e),n}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(i){function r(e,t,n){for(e=""+e,n=n||"0";e.length<t;)e=n+e;return e}return{trim:function(e){return e.replace(/^\s+|\s+$/g,"")},pad:r,xmlAttribute:function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()===t.toLowerCase())return e.attributes[n].value.toString();return""},extension:function(e){var t;return e&&"rtmp"!==e.substr(0,4)?(t=e,!!/[\(,]format=m3u8-/i.test(t)&&"m3u8"||(-1<(e=e.split("?")[0].split("#")[0]).lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0)):""},hms:function(e){var t=parseInt(e/3600),n=parseInt(e/60)%60,e=e%60;return r(t,2)+":"+r(n,2)+":"+r(e.toFixed(3),6)},seconds:function(e){var t,n;return i.isNumber(e)?e:(t=(e=e.replace(",",".")).split(":"),n=0,"s"===e.slice(-1)?n=parseFloat(e):"m"===e.slice(-1)?n=60*parseFloat(e):"h"===e.slice(-1)?n=3600*parseFloat(e):1<t.length?(n=parseFloat(t[t.length-1]),n+=60*parseFloat(t[t.length-2]),3===t.length&&(n+=3600*parseFloat(t[t.length-3]))):n=parseFloat(e),n)},suffix:function(e,t){return i.map(e,function(e){return e+t})},prefix:function(e,t){return i.map(e,function(e){return t+e})}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"}}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){e.exports=function(){"use strict";function C(){C=function(){return o};var l,o={},e=Object.prototype,u=e.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(l){a=function(e,t,n){return e[t]=n}}function s(e,t,n,i){var r,a,o,s,t=t&&t.prototype instanceof _?t:_,t=Object.create(t.prototype),i=new R(i||[]);return c(t,"_invoke",{value:(r=e,a=n,o=i,s=d,function(e,t){if(s===p)throw new Error("Generator is already running");if(s===m){if("throw"===e)throw t;return{value:l,done:!0}}for(o.method=e,o.arg=t;;){var n=o.delegate;if(n){n=function e(t,n){var i=n.method,r=t.iterator[i];if(r===l)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=l,e(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;r=i.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=l),n.delegate=null,g):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,o);if(n){if(n===g)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===d)throw s=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=p;n=h(r,a,o);if("normal"===n.type){if(s=o.done?m:f,n.arg===g)continue;return{value:n.arg,done:o.done}}"throw"===n.type&&(s=m,o.method="throw",o.arg=n.arg)}})}),t}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function _(){}function y(){}function v(){}var t={},E=(a(t,i,function(){return this}),Object.getPrototypeOf),E=E&&E(E(I([]))),A=(E&&E!==e&&u.call(E,i)&&(t=E),v.prototype=_.prototype=Object.create(t));function b(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function T(o,s){var t;c(this,"_invoke",{value:function(n,i){function e(){return new s(function(e,t){!function t(e,n,i,r){var a,e=h(o[e],o,n);if("throw"!==e.type)return(n=(a=e.arg).value)&&"object"==typeof n&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,i,r)},function(e){t("throw",e,i,r)}):s.resolve(n).then(function(e){a.value=e,i(a)},function(e){return t("throw",e,i,r)});r(e.arg)}(n,i,e,t)})}return t=t?t.then(e,e):e()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n,e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}throw new TypeError(typeof t+" is not iterable")}return c(A,"constructor",{value:y.prototype=v,configurable:!0}),c(v,"constructor",{value:y,configurable:!0}),y.displayName=a(v,r,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,a(e,r,"GeneratorFunction")),e.prototype=Object.create(A),e},o.awrap=function(e){return{__await:e}},b(T.prototype),a(T.prototype,n,function(){return this}),o.AsyncIterator=T,o.async=function(e,t,n,i,r){void 0===r&&(r=Promise);var a=new T(s(e,t,n,i),r);return o.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(A),a(A,r,"Generator"),a(A,i,function(){return this}),a(A,"toString",function(){return"[object Generator]"}),o.keys=function(e){var t,n=Object(e),i=[];for(t in n)i.push(t);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=I,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var i=this;function e(e,t){return a.type="throw",a.arg=n,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var o=u.call(r,"catchLoc"),s=u.call(r,"finallyLoc");if(o&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&u.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}var a=(r=r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc?null:r)?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,i,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(n=r.completion).type&&(i=n.arg,w(r)),i}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=l),g}},o}function N(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function i(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var i=s.apply(e,o);function r(e){N(i,t,n,r,a,"next",e)}function a(e){N(i,t,n,r,a,"throw",e)}r(void 0)})}}function F(e,t){for(var n,i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(n=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(r.key))?n:String(n),r)}}function e(e,t,n){t&&F(e.prototype,t),n&&F(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function t(e,t){e.prototype=Object.create(t.prototype),B(e.prototype.constructor=e,t)}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var U,f,n={exports:{}};function r(){}function j(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function G(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");n=new j(n,i||e,r),i=f?f+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],n]:e._events[i].push(n):(e._events[i]=n,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}M=n,U=Object.prototype.hasOwnProperty,f="~",Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(f=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)U.call(e,t)&&n.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,i=t.length,r=new Array(i);n<i;n++)r[n]=t[n].fn;return r},a.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},a.prototype.emit=function(e,t,n,i,r,a){var o=f?f+e:e;if(!this._events[o])return!1;var s,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,a),!0}for(d=1,s=new Array(u-1);d<u;d++)s[d-1]=arguments[d];l.fn.apply(l.context,s)}else for(var c,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,n);break;case 4:l[d].fn.call(l[d].context,t,n,i);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];l[d].fn.apply(l[d].context,s)}return!0},a.prototype.on=function(e,t,n){return G(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return G(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,i){e=f?f+e:e;if(this._events[e])if(t){var r=this._events[e];if(r.fn)r.fn!==t||i&&!r.once||n&&r.context!==n||l(this,e);else{for(var a=0,o=[],s=r.length;a<s;a++)(r[a].fn!==t||i&&!r[a].once||n&&r[a].context!==n)&&o.push(r[a]);o.length?this._events[e]=1===o.length?o[0]:o:l(this,e)}}else l(this,e);return this},a.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&l(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=f,M.exports=a.EventEmitter=a;var o=(M=n.exports)&&M.__esModule&&Object.prototype.hasOwnProperty.call(M,"default")?M.default:M,p=((n={}).REMOTE_STREAM_ADD="remoteStreamAdd",n.CONNECTION_STATE_CHANGE="connectionStateChange",n.CANDIDATE_ERROR="candidateError",n.ON_DATA_CHANNEL_OPEN="onDataChannelOpen",n.ON_DATA_CHANNEL_MSG="onDataChannelMsg",n.ON_DATA_CHANNEL_ERROR="onDataChannelError",n.ON_DATA_CHANNEL_CLOSE="onDataChannelClose",n.RE_CONNECTING="reConnecting",n.RE_CONNECT_FAILED="reConnectFailed",n.RE_CONNECT_SUCCESS="reConnectSuccess",n.ERROR="error",n.DESTROY="destroy",n),s=((M={}).ON_PLAY="play",M.ON_PAUSE="pause",M.ON_VOLUME_CHANGE="volumechange",M.LOADEDMETADATA="loadedmetadata",M.CANPLAY="canplay",M),c=((n={}).APPENDNALU="appendNalu",n.APPENDADTS="appendAdts",n),h=((M={}).HEVC="hevc",M.CODEC="codec",M.WIDTH="width",M.HEIGHT="height",M.FRAMERATE="framerate",M),d=((n={}).PLAYING="playing",n.PAUSED="paused",n),m=((M={}).RECONNECTING="reconnecting",M.RECONNECT_FAILED="reconnectFailed",M.RECONNECT_SUCCESS="reconnectSuccess",M),g=function(){},_={trace:g,debug:g,log:g,warn:g,info:g,error:g},y=_;function V(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];t.forEach(function(e){var t;y[e]=n[e]?n[e].bind(n):(t=self.console[e])?t.bind(self.console,"["+e+"] >"):g})}var H,Y,z,v=y,E=((n={}).NETWORK_ERROR="networkError",n.CONNECTION_ERROR="connectionError",n.CREATE_PEERCONNECTION_ERROR="createPeerConnectionError",n),W=((M={}).HTTP_LOAD_ERROR="httpLoadError",M),K=((n={})[n.CREATE_PEERCONNECTION_ERROR=100]="CREATE_PEERCONNECTION_ERROR",n),q=(re.prototype.load=function(r,e){return new Promise(function(i){fetch(r,e).then(function(e){return e.json()}).then(function(e){var t=e.code,n=e.msg;i(0!=t?{type:E.NETWORK_ERROR,details:W.HTTP_LOAD_ERROR,code:t,msg:n,url:r}:e)}).catch(function(e){var t=e?e.code||-1:0,e=e?e.message:null;i({type:E.NETWORK_ERROR,details:W.HTTP_LOAD_ERROR,code:t,msg:e,url:r})})})},re),Q=((M=R.prototype).parseData=function(e){var t=this.ReadBig32(e,8),t=(this.pts=t,e[16]),n=(126&t)>>>1;if((31&t)<24&&49!=n)return this.h265data=this.concatUint8(new Uint8Array([0,0,0,1]),new Uint8Array(e.subarray(16))),32==n?void(this.vps=this.h265data):33==n?void(this.sps=this.h265data):34==n?void(this.pps=this.h265data):void this._onDataAvailable({nalu:this.h265data,pps:this.pps,pts:this.pts,iskeyframe:!1,size:this.h265data.byteLength,type:n});this.CombineFrame(e,n)},M.CombineFrame=function(e,t){var n,i=128&e[18],r=64&e[18],a=63&e[18];128==i?(this.h265data=new Uint8Array(0),this.h265data=this.concatUint8(new Uint8Array([a<<1,1]),new Uint8Array(e.subarray(19)))):64==r?(this.h265data=this.concatUint8(new Uint8Array([0,0,0,1]),this.h265data,new Uint8Array(e.subarray(19))),i=this.vps.length,r=this.sps.length,n=this.pps.length,0<i&&0<r&&0<n&&this.isFirseData&&(this.h265data=this.concatUint8(this.vps,this.sps,this.pps,this.h265data),this.isFirseData=!1),this._onDataAvailable({nalu:this.h265data,pps:this.pps,pts:this.pts,iskeyframe:19==a,size:this.h265data.byteLength,type:t}),this.h265data=new Uint8Array(0)):this.h265data=this.concatUint8(this.h265data,new Uint8Array(e.subarray(19)))},M.ReadBig32=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},M.concatUint8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce(function(e,t){return e+t.byteLength},0),r=new Uint8Array(i),a=0;return t.forEach(function(e){r.set(e,a),a+=e.byteLength}),r},M.destroy=function(){this.isFirseData=!0,this.pts=0,this.vps=new Uint8Array(0),this.sps=new Uint8Array(0),this.pps=new Uint8Array(0),this.h265data=new Uint8Array(0),this._onDataAvailable=function(){}},e(R,[{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}},{key:"getVps",get:function(){return{vps:this.vps}}},{key:"getSps",get:function(){return{sps:this.sps}}},{key:"getPps",get:function(){return{pps:this.pps}}}]),R),X={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},J=((n=w.prototype).setAudioInfo=function(e){e&&(e=e.split("/"),this.audioInfo.sample=e[1],this.audioInfo.channel=e[2])},n.parseData=function(e){var t=128&e[5];this.pts=this.ReadBig32(e,8),this.aacData=this.concatUint8(this.aacData,new Uint8Array(e.subarray(20))),128==t&&(e[18],e[19],t=this._build_adts_header(this.audioInfo.sample,this.audioInfo.channel,this.aacData.byteLength),e=this.concatUint8(t,this.aacData),this._onDataAvailable({adts:e,pts:this.pts}),this.aacData=new Uint8Array(0))},n._build_adts_header=function(e,t,n){e=this.sample_req_map[e],n+=7;return new Uint8Array([255,241,64|e<<2,n>>11&3|t<<6,n>>3&255,(7&n)<<5|31,252])},n.ReadBig32=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},n.concatUint8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce(function(e,t){return e+t.byteLength},0),r=new Uint8Array(i),a=0;return t.forEach(function(e){r.set(e,a),a+=e.byteLength}),r},n.destroy=function(){this.pts=0,this.aacData=new Uint8Array(0),this.sample_req_map=X,this._onDataAvailable=function(){}},e(w,[{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}}]),w),Z=(t(S,z=o),(M=S.prototype).addEvent=function(){this.H265Parser.onDataAvailable=this.onDataAvailable.bind(this),this.AACADTSParser.onDataAvailable=this.onAdtsDataAvailable.bind(this)},M.setAudioInfo=function(e){this.AACADTSParser.setAudioInfo(e)},M.appendBuffer=function(e){e=new Uint8Array(e);(96==(127&e[5])?this.H265Parser:this.AACADTSParser).parseData(e)},M.onDataAvailable=function(e){this.emit(c.APPENDNALU,e)},M.onAdtsDataAvailable=function(e){this.emit(c.APPENDADTS,e)},M.destroy=function(){this.hevcData=[],this.H265Parser.destroy(),this.AACADTSParser.destroy()},S),A=((n={})[n.INIT=0]="INIT",n[n.INITED=1]="INITED",n[n.LOADWASMJS=2]="LOADWASMJS",n[n.DECODE=3]="DECODE",n[n.DECODED=4]="DECODED",n[n.RELEASE=5]="RELEASE",n[n.WASMLOADEDED=6]="WASMLOADEDED",n[n.BATCHFINISHFLAG=7]="BATCHFINISHFLAG",n[n.AUDIODECODED=8]="AUDIODECODED",n),n=(t(T,Y=o),(M=T.prototype).init=function(e){this._workerMessageCallback=e,this._initDecoder()},M._initDecoder=function(){throw new Error("need override by children")},M.checkToDecode=function(e){!this._inDecoding&&e<=this.needToDecode&&this.doDecode()},M.doDecode=function(){var t=this,e=this._getFramesToDecode();e&&e.length&&(e.forEach(function(e){t._doDecodeFrame(e)}),this._finishFlag())},M._getFramesToDecode=function(){var e=this.parent._nalQueue;if(this._decoderReady&&e){var t=6;if(!(e.frameLength<t)){for(var n=[];0<t;){var i=e.getNalu();n.push(i),t--}return n}}},M._doDecodeFrame=function(e){throw new Error("need override by children")},M._finishFlag=function(){throw new Error("need override by children")},e(T,[{key:"needToDecode",get:function(){return this._inDecoding?0:this._continueDecodeThreshold}}]),T),$=window.VideoDecoder,ee=window.AudioDecoder,te=window.EncodedVideoChunk,ne=window.EncodedAudioChunk,ie=(t(b,H=n),b.isSupported=function(){return!!window.VideoDecoder},(M=b.prototype)._initDecoder=function(){this._initAudioDecoder(),this._initVideoDecoder(),this._decoderReady=!0},M._initVideoDecoder=function(){var t=this;this.videoDecoder=new $({output:function(e){t._workerMessageCallback({t:A.DECODED,frame:e})},error:function(e){}}),this.videoDecoder.configure({codec:"hvc1.1.6.L120"})},M._initAudioDecoder=function(){var t,n=this,e={output:(t=i(C().mark(function e(t){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.format&&n._workerMessageCallback({t:A.AUDIODECODED,audioData:t});case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),error:function(e){}};this.audioDeocder=new ee(e),this.audioDeocder.configure({codec:"mp4a.40.5",sampleRate:8e3,numberOfChannels:1})},M.decodeVideo=function(e){e=new te({data:e.nalu,timestamp:e.pts,type:e.isKeyframe?"key":"delta"});this.videoDecoder.decode(e)},M._decodeAudio=function(e){e=new ne({data:e.adts,timestamp:e.pts,type:"key"});this.audioDeocder.decode(e)},M._doDecodeFrame=function(e){e=new te({data:e.nalu,timestamp:e.pts,type:e.iskeyframe?"key":"delta"});this.videoDecoder.decode(e)},M._finishFlag=function(){},b);function b(e){var t;return(t=H.call(this)||this).videoDecoder=void 0,t.audioDeocder=void 0,t._continueDecodeThreshold=void 0,t.parent=void 0,t.parent=e,t.videoDecoder,t.audioDeocder,t._continueDecodeThreshold=20,t}function T(e){var t;return(t=Y.call(this)||this)._inDecoding=void 0,t._decoderReady=void 0,t.parent=void 0,t._workerMessageCallback=void 0,t.parent=e,t._inDecoding=!1,t._decoderReady=!1,t._workerMessageCallback=null,t}function S(){(e=z.call(this)||this).log=void 0,e.warn=void 0,e.error=void 0,e.H265Parser=void 0,e.hevcData=void 0,e.AACADTSParser=void 0;var e,t="[rtc-demuxer-rtp]";return e.log=v.log.bind(v,t),e.warn=v.warn.bind(v,t),e.error=v.error.bind(v,t),e.H265Parser=new Q,e.AACADTSParser=new J,e.addEvent(),e.hevcData=[],e}function w(){this.aacData=void 0,this.sample_req_map=void 0,this._onDataAvailable=void 0,this.pts=void 0,this.audioInfo=void 0,this.pts=0,this.aacData=new Uint8Array(0),this.sample_req_map=X,this._onDataAvailable=function(){},this.audioInfo={sample:8e3,channel:1}}function R(){this.isFirseData=void 0,this.pts=void 0,this.vps=void 0,this.sps=void 0,this.pps=void 0,this.h265data=void 0,this._onDataAvailable=void 0,this.isFirseData=!0,this.pts=0,this.vps=new Uint8Array(0),this.sps=new Uint8Array(0),this.pps=new Uint8Array(0),this.h265data=new Uint8Array(0),this._onDataAvailable=function(){}}function re(){}var I,ae,oe=function(e){return I=I||(t=void 0===(t=null)?null:t,i=(n=function(e){var t=atob(a);if(e){for(var n=new Uint8Array(t.length),i=0,r=t.length;i<r;++i)n[i]=t.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return t}(void 0!==(n=!(a="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoKICAgKiBAQXV0aG9yOiBkdWFueXVhbnl1YW4wMSBkdWFueXVhbnl1YW4wMUBiYWlkdS5jb20KICAgKiBARGF0ZTogMjAyMy0wOC0wOSAxOTo1NTo1NQogICAqIEBMYXN0RWRpdG9yczogZHVhbnl1YW55dWFuMDEgZHVhbnl1YW55dWFuMDFAYmFpZHUuY29tCiAgICogQExhc3RFZGl0VGltZTogMjAyNC0wMS0xOCAxNjoxNDo1OAogICAqIEBGaWxlUGF0aDogL3dvcmtlci9iYWlkdS9iY2UtbXVsdGltZWRpYS9ydGNQbGF5ZXIvc3JjL2Jhc2UvY29uZmlnLnRzCiAgICogQERlc2NyaXB0aW9uOiDov5nmmK/pu5jorqTorr7nva4s6K+36K6+572uYGN1c3RvbU1hZGVgLCDmiZPlvIBrb3JvRmlsZUhlYWRlcuafpeeci+mFjee9riDov5vooYzorr7nva46IGh0dHBzOi8vZ2l0aHViLmNvbS9PQktvcm8xL2tvcm8xRmlsZUhlYWRlci93aWtpLyVFOSU4NSU4RCVFNyVCRCVBRQogICAqLwoKICB2YXIgREVDT0RFU1RBVFVTID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChERUNPREVTVEFUVVMpIHsKICAgIERFQ09ERVNUQVRVU1tERUNPREVTVEFUVVNbIklOSVQiXSA9IDBdID0gIklOSVQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siSU5JVEVEIl0gPSAxXSA9ICJJTklURUQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siTE9BRFdBU01KUyJdID0gMl0gPSAiTE9BRFdBU01KUyI7CiAgICBERUNPREVTVEFUVVNbREVDT0RFU1RBVFVTWyJERUNPREUiXSA9IDNdID0gIkRFQ09ERSI7CiAgICBERUNPREVTVEFUVVNbREVDT0RFU1RBVFVTWyJERUNPREVEIl0gPSA0XSA9ICJERUNPREVEIjsKICAgIERFQ09ERVNUQVRVU1tERUNPREVTVEFUVVNbIlJFTEVBU0UiXSA9IDVdID0gIlJFTEVBU0UiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siV0FTTUxPQURFREVEIl0gPSA2XSA9ICJXQVNNTE9BREVERUQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siQkFUQ0hGSU5JU0hGTEFHIl0gPSA3XSA9ICJCQVRDSEZJTklTSEZMQUciOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siQVVESU9ERUNPREVEIl0gPSA4XSA9ICJBVURJT0RFQ09ERUQiOwogICAgcmV0dXJuIERFQ09ERVNUQVRVUzsKICB9KHt9KTsgLy/pn7PpopHop6PnoIHlrozmiJAKCiAgLy8gd2FzbeWKoOi9veWujOaIkAogIHZhciB3YXNtUGF0aCA9ICJodHRwczovL2JjZS1jZG4uYmouYmNlYm9zLmNvbS9qd3BsYXllci80LjMuMC4xLyI7IC8v5Zyw5Z2A5Li657q/5LiK5Zyw5Z2A5ZCO6Z2i5ZKM54mI5pys57uR5a6aCiAgc2VsZi5Nb2R1bGUgPSB7CiAgICBvblJ1bnRpbWVJbml0aWFsaXplZDogZnVuY3Rpb24gb25SdW50aW1lSW5pdGlhbGl6ZWQoKSB7CiAgICAgIG9uV2FzbUxvYWRlZCgpOwogICAgfSwKICAgIGxvY2F0ZUZpbGU6IGZ1bmN0aW9uIGxvY2F0ZUZpbGUodXJsKSB7CiAgICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnaHR0cCcpKSByZXR1cm4gdXJsOwogICAgICByZXR1cm4gd2FzbVBhdGggKyB1cmw7CiAgICB9CiAgfTsKICB2YXIgRGVjb2RlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewogICAgICB0aGlzLndhc21Mb2FkZWQgPSB2b2lkIDA7CiAgICAgIHRoaXMudmlkZW9DYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5wbGF5ZXJEYXRhID0gdm9pZCAwOwogICAgICB0aGlzLnZjb2RlY2VyUHRyID0gdm9pZCAwOwogICAgICB0aGlzLndhc21Mb2FkZWQgPSBmYWxzZTsKICAgICAgdGhpcy52aWRlb0NhbGxiYWNrID0gbnVsbDsKICAgICAgdGhpcy5wbGF5ZXJEYXRhID0gewogICAgICAgIHRva2VuOiAiYmFzZTY0OlFYVjBhRzl5T21Ob1lXNW5lV0Z1Ykc5dVozeHVkVzFpWlhKM2IyeG1MRWRwZEdoMVlqcG9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZiblZ0WW1WeWQyOXNaaXhGYldGcGJEcHdiM0p6WTJobFozUXlNMEJtYjNodFlXbHNMbU52YlN4UlVUbzFNekV6TmpVNE56SXNTRzl0WlZCaFoyVTZhSFIwY0RvdkwzaDJhV1JsYnk1MmFXUmxieXhFYVhOamIzSmtPbTUxYldKbGNuZHZiR1lqT0RZNU5DeDNaV05vWVhJNmJuVnRZbVZ5ZDI5c1pqRXhMRUpsYVdwcGJtY3NWMjl5YTBsdU9rSmhhV1IxIiwKICAgICAgICBwbGF5ZXJWZXJzaW9uOiAiNC4yLjAiLAogICAgICAgIHZpZGVvQ29kZWM6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy52Y29kZWNlclB0ciA9IG51bGw7CiAgICB9CiAgICB2YXIgX3Byb3RvID0gRGVjb2Rlci5wcm90b3R5cGU7CiAgICBfcHJvdG8uaW5pdERlY29kZXIgPSBmdW5jdGlvbiBpbml0RGVjb2RlcigpIHsKICAgICAgdmFyIF90aGlzJHBsYXllckRhdGEgPSB0aGlzLnBsYXllckRhdGEsCiAgICAgICAgdG9rZW4gPSBfdGhpcyRwbGF5ZXJEYXRhLnRva2VuLAogICAgICAgIHBsYXllclZlcnNpb24gPSBfdGhpcyRwbGF5ZXJEYXRhLnBsYXllclZlcnNpb24sCiAgICAgICAgdmlkZW9Db2RlYyA9IF90aGlzJHBsYXllckRhdGEudmlkZW9Db2RlYzsKICAgICAgdGhpcy52Y29kZWNlclB0ciA9IE1vZHVsZS5jd3JhcCgicmVnaXN0ZXJQbGF5ZXIiLCAibnVtYmVyIiwgWyJzdHJpbmciLCAic3RyaW5nIl0pKHRva2VuLCBwbGF5ZXJWZXJzaW9uKTsKICAgICAgLy8g6Kej56CB5oiQ5Yqf5Zue6LCDCiAgICAgIHRoaXMudmlkZW9DYWxsYmFjayA9IE1vZHVsZS5hZGRGdW5jdGlvbihmdW5jdGlvbiAoYWRkcl95LCBhZGRyX3UsIGFkZHJfdiwgc3RyaWRlX3ksIHN0cmlkZV91LCBzdHJpZGVfdiwgd2lkdGgsIGhlaWdodCwgcHRzKSB7CiAgICAgICAgdmFyIHlBcnJheSA9IE1vZHVsZS5IRUFQVTguc3ViYXJyYXkoYWRkcl95LCBhZGRyX3kgKyBzdHJpZGVfeSAqIGhlaWdodCk7CiAgICAgICAgdmFyIHVBcnJheSA9IE1vZHVsZS5IRUFQVTguc3ViYXJyYXkoYWRkcl91LCBhZGRyX3UgKyBzdHJpZGVfdSAqIGhlaWdodCAvIDIpOwogICAgICAgIHZhciB2QXJyYXkgPSBNb2R1bGUuSEVBUFU4LnN1YmFycmF5KGFkZHJfdiwgYWRkcl92ICsgc3RyaWRlX3YgKiBoZWlnaHQgLyAyKTsKICAgICAgICB2YXIgZnJhbWUgPSB7CiAgICAgICAgICB5OiBuZXcgVWludDhBcnJheSh5QXJyYXkpLAogICAgICAgICAgdTogbmV3IFVpbnQ4QXJyYXkodUFycmF5KSwKICAgICAgICAgIHY6IG5ldyBVaW50OEFycmF5KHZBcnJheSksCiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICAgIHdpZHRoOiBzdHJpZGVfeSwKICAgICAgICAgIHB0c1NlYzogcHRzICogMS4wIC8gMTAwMCwKICAgICAgICAgIHN0cmlkZV95OiBzdHJpZGVfeSwKICAgICAgICAgIHN0cmlkZV91OiBzdHJpZGVfdSwKICAgICAgICAgIHN0cmlkZV92OiBzdHJpZGVfdgogICAgICAgIH07CiAgICAgICAgLy8gTW9kdWxlLmFzbS5mcmVlKHlBcnJheSk7CiAgICAgICAgeUFycmF5ID0gbnVsbDsKICAgICAgICAvLyBNb2R1bGUuYXNtLmZyZWUodUFycmF5KTsKICAgICAgICB1QXJyYXkgPSBudWxsOwogICAgICAgIC8vIE1vZHVsZS5hc20uZnJlZSh2QXJyYXkpOyAKICAgICAgICB2QXJyYXkgPSBudWxsOwogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgdDogREVDT0RFU1RBVFVTLkRFQ09ERUQsCiAgICAgICAgICBmcmFtZTogZnJhbWUKICAgICAgICB9LCBbZnJhbWUueS5idWZmZXIsIGZyYW1lLnUuYnVmZmVyLCBmcmFtZS52LmJ1ZmZlcl0pOwogICAgICB9LCAidmlpaWlpaWlpZCIpOwogICAgICBNb2R1bGUuY3dyYXAoInNldENvZGVjVHlwZSIsICJudW1iZXIiLCBbIm51bWJlciIsICJudW1iZXIiLCAibnVtYmVyIl0pKHRoaXMudmNvZGVjZXJQdHIsIHZpZGVvQ29kZWMsIHRoaXMudmlkZW9DYWxsYmFjayk7CiAgICAgIE1vZHVsZS5jd3JhcCgiaW5pdGlhbGl6ZURlY29kZXIiLCAibnVtYmVyIiwgWyJudW1iZXIiXSkodGhpcy52Y29kZWNlclB0cik7CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgIHQ6IERFQ09ERVNUQVRVUy5JTklURUQKICAgICAgfSk7CiAgICB9OwogICAgX3Byb3RvLmRlY29kZVZpZGVvID0gZnVuY3Rpb24gZGVjb2RlVmlkZW8oZGF0YSkgewogICAgICB2YXIgbmFsQnVmID0gZGF0YS5uYWx1LAogICAgICAgIHB0cyA9IGRhdGEucHRzOwogICAgICB2YXIgb2Zmc2V0ID0gTW9kdWxlLmFzbS5tYWxsb2MobmFsQnVmLmxlbmd0aCk7CiAgICAgIE1vZHVsZS5IRUFQOC5zZXQobmFsQnVmLCBvZmZzZXQpOwogICAgICBNb2R1bGUuY3dyYXAoImRlY29kZUNvZGVjQ29udGV4dCIsICJudW1iZXIiLCBbIm51bWJlciIsICJudW1iZXIiLCAibnVtYmVyIiwgIm51bWJlciIsICJudW1iZXIiXSkodGhpcy52Y29kZWNlclB0ciwgb2Zmc2V0LCBuYWxCdWYubGVuZ3RoLCBwdHMsIDApOwogICAgICBNb2R1bGUuYXNtLmZyZWUob2Zmc2V0KTsKICAgICAgb2Zmc2V0ID0gbnVsbDsKICAgIH07CiAgICBfcHJvdG8ubG9hZEpzID0gZnVuY3Rpb24gbG9hZEpzKHVybCkgewogICAgICBzZWxmLmltcG9ydFNjcmlwdHModXJsKTsKICAgIH07CiAgICBfcHJvdG8ucmVsZWFzZSA9IGZ1bmN0aW9uIHJlbGVhc2UoKSB7CiAgICAgIE1vZHVsZS5jd3JhcCgicmVsZWFzZSIsICJudW1iZXIiLCBbIm51bWJlciJdKSh0aGlzLnZjb2RlY2VyUHRyKTsKICAgICAgTW9kdWxlLmN3cmFwKCJleGl0TWlzc2lsZSIsICJudW1iZXIiLCBbIm51bWJlciJdKSh0aGlzLnZjb2RlY2VyUHRyKTsKICAgIH07CiAgICBfcHJvdG8ub25XYXNtTG9hZGVkID0gZnVuY3Rpb24gb25XYXNtTG9hZGVkKCkgewogICAgICBpZiAodGhpcy53YXNtTG9hZGVkKSByZXR1cm47CiAgICAgIHRoaXMud2FzbUxvYWRlZCA9IHRydWU7CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgIHQ6IERFQ09ERVNUQVRVUy5XQVNNTE9BREVERUQKICAgICAgfSk7CiAgICAgIC8vICDliqDovb3lrozmiJDliJ3lp4vljJbop6PnoIHlmagKICAgICAgdGhpcy5pbml0RGVjb2RlcigpOwogICAgfTsKICAgIHJldHVybiBEZWNvZGVyOwogIH0oKTsKICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldnQpIHsKICAgIHZhciBkYXRhID0gZXZ0LmRhdGE7CiAgICBzd2l0Y2ggKGRhdGEudCkgewogICAgICBjYXNlIERFQ09ERVNUQVRVUy5JTklUOgogICAgICAgIC8vIHNlbGYuZGVjb2Rlci5pbml0RGVjb2RlcihkYXRhKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuREVDT0RFOgogICAgICAgIHNlbGYuZGVjb2Rlci5kZWNvZGVWaWRlbyhkYXRhLmZyYW1lKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuTE9BRFdBU01KUzoKICAgICAgICBzZWxmLmRlY29kZXIubG9hZEpzKGRhdGEucGF0aFVybCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgREVDT0RFU1RBVFVTLlJFTEVBU0U6CiAgICAgICAgc2VsZi5kZWNvZGVyLnJlbGVhc2UoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuQkFUQ0hGSU5JU0hGTEFHOgogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgdDogREVDT0RFU1RBVFVTLkJBVENIRklOSVNIRkxBRwogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgfQogIH07CiAgc2VsZi5kZWNvZGVyID0gbmV3IERlY29kZXIoKTsKICBmdW5jdGlvbiBvbldhc21Mb2FkZWQoKSB7CiAgICBpZiAoc2VsZi5kZWNvZGVyKSB7CiAgICAgIHNlbGYuZGVjb2Rlci5vbldhc21Mb2FkZWQoKTsKICAgIH0KICB9Cgp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1oZXZjLXdvcmtlci5qcy5tYXAKCg=="))&&n)).indexOf("\n",10)+1,n=n.substring(i)+(t?"//# sourceMappingURL="+t:""),i=new Blob([n],{type:"application/javascript"}),URL.createObjectURL(i)),new Worker(I,e);var a,t,n,i},se=(t(k,ae=n),(M=k.prototype)._initDecoder=function(){this._bindWorkerEvent(),this.HevcWorker.postMessage({t:A.LOADWASMJS,pathUrl:this.IsSafari?this.wasmUrl:this.simdWasmUrl})},M._doDecodeFrame=function(e){this.HevcWorker.postMessage({t:A.DECODE,frame:e})},M._finishFlag=function(){this.HevcWorker.postMessage({t:A.BATCHFINISHFLAG})},M._bindWorkerEvent=function(){var n=this;this.HevcWorker.onmessage=function(e){var t=e.data;switch(t.t){case A.INITED:n._decoderReady=!0;break;case A.DECODED:n._workerMessageCallback(t),n._inDecoding=!0;break;case A.BATCHFINISHFLAG:if(n._inDecoding=!1,!n._workerMessageCallback)return;n._workerMessageCallback(t)}}},M._offWorkerBind=function(){this.HevcWorker.postMessage({t:A.RELEASE}),this.HevcWorker.onmessage=null,this.HevcWorker.terminate()},M.destroy=function(){this._offWorkerBind()},e(k,[{key:"IsSafari",get:function(){return/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform)}}]),k),le=[],ue=((n=fe.prototype)._bindEvent=function(){this._worker.addEventListener("message",this._doTask)},n.start=function(e){60<(e=(e=parseInt(e))<10?10:e)?e=60:25<e&&(e=25),this._worker.postMessage({type:"START",interval:e})},n.stop=function(){this._worker.postMessage({type:"DESTROY"})},n.destroy=function(){this._worker&&(this._worker.postMessage({type:"DESTROY"}),this._worker.removeEventListener("message",this._doTask),le.push(this._worker),this._worker=null,this._task=null)},fe),ce=((M=D.prototype).append=function(e){this._frames.push(e)},M.shift=function(){return this._frames.shift()},M.destroy=function(){this._frames.forEach(function(e){var t;null!=(t=e.buffer)&&t.close&&e.buffer.close()}),this._frames=[]},e(D,[{key:"length",get:function(){return this._frames.length}},{key:"frames",get:function(){return this._frames}}]),D),he=((n=P.prototype).append=function(e){this.naluList.push(e),this._estimateBitRate()},n._estimateBitRate=function(){},n.getNalu=function(){return this.naluList.shift()},n.destroy=function(){this.naluList=[]},e(P,[{key:"frameLength",get:function(){return this.naluList.length}}]),P),de=((M=L.prototype)._initTrackGenerator=function(){var e=new MediaStreamTrackGenerator({kind:"audio"}),t=new MediaStreamTrackGenerator({kind:"video"}),n=e.writable,n=(this.writerVideo=t.writable.getWriter(),this.writerAudio=n.getWriter(),new MediaStream([e,t]));this.video.srcObject=n},M.render=function(e){this.writerVideo.write(e),e.close()},M.renderAudio=function(e){this.writerAudio.write(e)},M.destroy=function(){this.writerVideo=null,this.writerAudio=null},e(L,[{key:"currentTime",get:function(){return this.video.currentTime}}]),L);function L(e){this.video=void 0,this.writerVideo=void 0,this.writerAudio=void 0,this.video=e,this.writerVideo=null,this.writerAudio=null,this._initTrackGenerator()}function P(e){this.naluList=void 0,this.naluList=[]}function D(){this._frames=void 0,this._frames=[]}function fe(e){var t=this,e=(this._task=void 0,this._worker=void 0,this._doTask=function(){var e;null!=(e=t._task)&&e.call(t)},this._task=e,new Blob(["\n    var timer;\n\n    function initTimer (interval) {\n      destroy()\n      clearInterval(timer);\n      timer = setInterval(() => {\n          self.postMessage({type: 'NEXT_TICK'});\n      }, interval)\n    }\n\n    function destroy () {\n      clearInterval(timer);\n    }\n\n    self.onmessage = function (e) {\n      var {type,interval} = e.data;\n      switch (type) {\n          case 'START':\n            initTimer(interval);\n            break;\n          case 'DESTROY':\n            destroy();\n            break;\n      }\n    }\n"],{type:"application/javascript"}));this._worker=le.pop()||new Worker(URL.createObjectURL(e)),this._bindEvent()}function k(e){var t;return(t=ae.call(this)||this).HevcWorker=void 0,t.simdWasmUrl=void 0,t.wasmUrl=void 0,t._continueDecodeThreshold=void 0,t.parent=void 0,t.parent=e,t.HevcWorker=new oe,t.simdWasmUrl="https://bce-cdn.bj.bcebos.com/jwplayer/4.3.0.1/missile-smid-v20230529.js",t.wasmUrl="https://bce-cdn.bj.bcebos.com/jwplayer/4.3.0.1/missile-v20230529.js",t._continueDecodeThreshold=10,t}function O(e){this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}O.prototype.bind=function(e,t,n){var i=this.gl;i.activeTexture([i.TEXTURE0,i.TEXTURE1,i.TEXTURE2][e]),i.bindTexture(i.TEXTURE_2D,this.texture),i.uniform1i(i.getUniformLocation(t,n),e)},O.prototype.fill=function(e,t,n){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,e,t,0,i.LUMINANCE,i.UNSIGNED_BYTE,n)};var pe,me,ge,_e,M,x={renderFrame:function(e,t,n,i,r,a){var o=e.canvas.width,s=r/a*e.canvas.height;e.viewport((o-s)/2,0,s,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.y.fill(r,a,t),e.u.fill(r>>1,a>>1,n),e.v.fill(r>>1,a>>1,i),e.drawArrays(e.TRIANGLE_STRIP,0,4)},setupCanvas:function(e,t){var n,i,r,a,e=e.getContext("webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0});return e&&(n=e.createProgram(),i=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {"," gl_Position = aVertexPosition;"," vTextureCoord = aTextureCoord;","}"].join("\n"),r=e.createShader(e.VERTEX_SHADER),e.shaderSource(r,i),e.compileShader(r),i=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),a=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(a,i),e.compileShader(a),e.attachShader(n,r),e.attachShader(n,a),e.linkProgram(n),e.useProgram(n),e.getProgramParameter(n,e.LINK_STATUS),i=e.getAttribLocation(n,"aVertexPosition"),e.enableVertexAttribArray(i),r=e.getAttribLocation(n,"aTextureCoord"),e.enableVertexAttribArray(r),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW),e.vertexAttribPointer(i,3,e.FLOAT,!1,0,0),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.y=new O(e),e.u=new O(e),e.v=new O(e),e.y.bind(0,n,"YTexture"),e.u.bind(1,n,"UTexture"),e.v.bind(2,n,"VTexture")),e},releaseContext:function(e){e&&(e.deleteTexture(e.y.texture),e.deleteTexture(e.u.texture),e.deleteTexture(e.v.texture),e.clearColor(0,0,0,0))}},ye=((n=Te.prototype)._initAudioCtx=function(){var e=window.AudioContext||window.webkitAudioContext;this._audioCtx=new e,this._audioCtx&&(this._gainNode=this._audioCtx.createGain(),this._gainNode.gain.value=1,this._gainNode.connect(this._audioCtx.destination),this._audioCanAutoplay="running"===this._audioCtx.state,this._bindAudioCtxEvent())},n._bindAudioCtxEvent=function(){var e=this;this._onStateChange=function(){e._audioCtx&&"running"===e._audioCtx.state&&e._ready},this._audioCtx.addEventListener("statechange",this._onStateChange)},n.decode=function(e){e&&this._sampleQueue.push(e);e=this._sampleQueue.length;this._inDecoding||e<10||this._decodeAACWrapper()},n._decodeAACWrapper=(_e=i(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._inDecoding=!0,t=this._concatAdts(this._sampleQueue.map(function(e){return e.adts}),0),this._sampleQueue=[],e.next=5,this._decodeAAC(t);case 5:this._inDecoding=!1;case 6:case"end":return e.stop()}},e,this)})),function(){return _e.apply(this,arguments)}),n._decodeAAC=function(i){var r=this;return new Promise(function(t,e){var n=r._audioCtx.decodeAudioData(i.buffer,function(e){r._buffers.push(e),r._isRender&&r._isStartPlay||r._startRender(),t()},e);n.catch&&n.catch(e)})},n._onSourceBufferEnded=function(){this._isSourceBufferEnd=!0,this._startRender()},n._startRender=function(){"suspended"===this._audioCtx.state&&this._audioCtx.resume().catch(function(e){}),this._isStartPlay=!0;var e=this._getAudioBuffer();if(e){this._isRender=!0;var t=this._audioCtx.createBufferSource();t.buffer=e,t.loop=!1,(this._source=t).addEventListener("ended",this._onSourceBufferEnded),t.connect(this._gainNode);try{this._isSourceBufferEnd=!1,t.start()}catch(e){}}else this._isRender=!1},n._getAudioBuffer=function(){return this._buffers.shift()},n._concatAdts=function(e,t){void 0===t&&(t=0);for(var n=0,i=0,r=e.length;i<r;i++)t&&i%t==0||(n+=e[i].byteLength);for(var a=new Uint8Array(n),o=0,s=0,l=e.length;s<l;s++)t&&s%t==0||(a.set(e[s],o),o+=e[s].byteLength);return a},n.resume=function(){if(this._audioCtx&&"suspended"===this._audioCtx.state)return this._audioCtx.resume().catch(function(e){})},n.mute=function(e){this._gainNode.gain.value=e?0:1,"running"!=this.audioState&&this.resume()},e(Te,[{key:"currentTime",get:function(){return 0}},{key:"audioCanAutoplay",get:function(){return this._audioCanAutoplay}},{key:"audioState",get:function(){return this._audioCtx.state}}]),Te),ve=((M=be.prototype)._bindEvent=function(){var t=this;this.demuxer.on(c.APPENDNALU,function(e){t.isWebCodecs?t._decodeController._doDecodeFrame(e):t._nalQueue.append(e)}),this.demuxer.on(c.APPENDADTS,function(e){t.isWebCodecs?t._decodeController._decodeAudio(e):t.AudioRender.decode(e)})},M._selectDecoder=function(){this.isWebCodecs?this._decodeController=new ie(this):this._decodeController=new se(this)},M._initDecoder=function(){var e;null!=(e=this._decodeController)&&e.init(this._decoderMessageCallback.bind(this)),this.isWebCodecs||this._startRender()},M._decoderMessageCallback=function(e){var t;switch(e.t){case A.DECODED:this._receiveFrame(e.frame);break;case A.BATCHFINISHFLAG:null!=(t=this._decodeController)&&t._decoderReady&&this._startDecode();break;case A.AUDIODECODED:this._frameRender.renderAudio(e.audioData)}},M._initWebgl=function(){this._createCanvas(),this.gl=x.setupCanvas(this.renderEle,{preserveDrawingBuffer:!1})},M._createCanvas=function(){var e=this.renderEle.parentNode,t=document.createElement("canvas");t.id=this.renderEle.id,t.width=this.renderEle.clientWidth,t.height=this.renderEle.clientHeight,e.appendChild(t),e.removeChild(this.renderEle),this.renderEle=t},M._startRender=function(){this._tickTimer.start(20)},M._render=function(){var e=this._frameQueue.shift();e&&(this.isWebCodecs?this._frameRender.render(e):this.webGlRender(e),this._getFramerate()),this._checkToDecode()},M._getFramerate=function(){this.framerate++,-1==this.oneTime?this.oneTime=(new Date).getTime():1e3<(new Date).getTime()-this.oneTime&&(this.oneTime=(new Date).getTime(),this.renderFramerate=JSON.parse(JSON.stringify(this.framerate)),this.framerate=0)},M.webGlRender=function(e){this._isPaused||(this.VideoInfo[h.WIDTH]||(this.VideoInfo[h.WIDTH]=e.width,this.VideoInfo[h.HEIGHT]=e.height,this.renderEle.width=e.width,this.renderEle.height=e.height,this._addEvent(s.CANPLAY),this._addEvent(s.ON_PLAY)),x.renderFrame(this.gl,e.y,e.u,e.v,e.width,e.height),this.isWebCodecs)||(e.y=null,e.u=null,e.v=null)},M._startDecode=function(){var e;null!=(e=this._decodeController)&&e.doDecode()},M._checkToDecode=function(){var e;null!=(e=this._decodeController)&&e.checkToDecode(this._frameQueue.length)},M._receiveFrame=function(e){this.isWebCodecs&&this._getFramerate(),this.isWebCodecs?this._frameRender.render(e):this._frameQueue.append(e)},M.mute=function(e){this.AudioRender&&this.AudioRender.mute(e)},M.play=function(){this._isPaused=!1,this._addEvent(s.ON_PLAY)},M.pause=function(){this._isPaused=!0,this._addEvent(s.ON_PAUSE)},M.getPlayStatus=function(){return this._isPaused?d.PAUSED:d.PLAYING},M._addEvent=function(e){this.rtcPlayer.trigger(e,{type:e})},M.destroy=function(){var e;null!=(e=this._tickTimer)&&e.destroy(),(this._tickTimer=null)!=x&&x.releaseContext(this.gl),null!=(e=this._nalQueue)&&e.destroy(),null!=(e=this._frameQueue)&&e.destroy(),null!=(e=this._frameRender)&&e.destroy()},e(be,[{key:"renderIsVideo",get:function(){var e;return null==(e=this.renderEle)?void 0:e.tagName.toLocaleLowerCase().includes("video")}},{key:"isWebCodecs",get:function(){return ie.isSupported()}},{key:"videoInfo",get:function(){var e;return u(this.renderIsVideo?((e={})[h.WIDTH]=this.renderEle.videoWidth,e[h.HEIGHT]=this.renderEle.videoHeight,e):this.VideoInfo,((e={})[h.FRAMERATE]=this.renderFramerate,e))}}]),be),Ee=((n=Ae.prototype)._initHevcController=function(){this.isEvs&&this.useDataChannel&&(this.demuxer=new Z,this.HevcController=new ve(this.demuxer,this.ele,this.rtcPlayer))},n._initPeerConnection=function(){try{this.pc=new RTCPeerConnection,this._addEvent()}catch(e){var t={type:p.ERROR,errorTypes:E.CREATE_PEERCONNECTION_ERROR,msg:e,details:e,code:K.CREATE_PEERCONNECTION_ERROR,url:null==(t=this.postMsg)?void 0:t.requsetUrl};this.callBack&&this.callBack(t),this.rtcPlayer.trigger(p.ERROR,t),this.reconnectTimerFunc()}},n._viedeoEventList=function(){return[s.ON_PLAY,s.ON_PAUSE,s.LOADEDMETADATA,s.CANPLAY,s.ON_VOLUME_CHANGE]},n._addVideoEvent=function(){var t=this,n=this.ele;n&&this._viedeoEventList().forEach(function(e){n.addEventListener(e,t._onVideoEvnet.bind(t))})},n._removeVideoEvent=function(){var t=this,n=this.ele;n&&this._viedeoEventList().forEach(function(e){n.removeEventListener(e,t._onVideoEvnet.bind(t))})},n._onVideoEvnet=function(e){e=e.type;this.reconnectStatus!=m.RECONNECT_SUCCESS&&e==s.ON_PLAY||this.rtcPlayer.trigger(e,{type:e})},n._addEvent=function(){var e;this.pc.addEventListener("icecandidate",this._onIceCandidate.bind(this)),this.pc.addEventListener("track",this._onTrack.bind(this)),this.pc.addEventListener("icecandidateerror",this._onIceCandidateError.bind(this)),this.pc.addEventListener("iceconnectionstatechange",this._onConnectionStateChange.bind(this)),this.isEvs&&null!=(e=this.rtcPlayer)&&null!=(e=e.rtcConfig)&&e.usedatachannel&&(this.datachannel=this.pc.createDataChannel("chat"),this.datachannel.binaryType="arraybuffer",this.datachannel.addEventListener("open",this._onDataChannelOpen.bind(this)),this.datachannel.addEventListener("message",this._onDataChannelMsg.bind(this)),this.datachannel.addEventListener("close",this._onDataChannelClose.bind(this)),this.datachannel.addEventListener("error",this._onDataChannelError.bind(this)))},n._onIceCandidate=function(e){},n._onTrack=function(e){!this.isHevcCode&&this.ele instanceof HTMLMediaElement&&(this.ele.srcObject=e.streams[0]),this.isHevcCode||this.rtcPlayer.trigger(p.REMOTE_STREAM_ADD,{MediaStream:e.streams[0]})},n._onIceCandidateError=function(){},n._onConnectionStateChange=function(){this.pc&&("disconnected"===this.pc.iceConnectionState&&(this.reconnectStatus=m.RECONNECTING,this.reConnecting(),this.rtcPlayer.trigger(p.RE_CONNECTING,{type:p.RE_CONNECTING})),this.pc&&"connected"===this.pc.iceConnectionState&&this.reconnectStatus==m.RECONNECTING&&this.reConnectSuccess(),this.rtcPlayer.trigger(p.CONNECTION_STATE_CHANGE,{state:this.pc&&this.pc.iceConnectionState}))},n._onDataChannelOpen=function(){this.rtcPlayer.trigger(p.ON_DATA_CHANNEL_OPEN,{type:p.ON_DATA_CHANNEL_OPEN})},n._onDataChannelMsg=function(e){e=e.data;this.demuxer.appendBuffer(e)},n._onDataChannelClose=function(){this.rtcPlayer.trigger(p.ON_DATA_CHANNEL_CLOSE,{type:p.ON_DATA_CHANNEL_CLOSE})},n._onDataChannelError=function(){this.rtcPlayer.trigger(p.ON_DATA_CHANNEL_ERROR,{type:p.ON_DATA_CHANNEL_ERROR})},n.subscribeLiveStream=(ge=i(C().mark(function e(){var t,u,c,h,d,f=this;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.postMsg,u=t.serverUrl,c=t.requsetUrl,h=t.headers,d=t.isEvsLive,e.abrupt("return",new Promise(function(){var n=i(C().mark(function e(t,n){var i,r,a,o,s,l;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.pc){e.next=2;break}return e.abrupt("return");case 2:return f.pc.addTransceiver("video",{direction:"recvonly",sendEncodings:[]}),f.pc.addTransceiver("audio",{direction:"recvonly",sendEncodings:[]}),e.next=6,f.pc.createOffer();case 6:return i=e.sent,e.next=9,f.pc.setLocalDescription(i);case 9:return a=d?i.sdp:JSON.stringify({streamurl:u,sdp:i.sdp}),e.prev=10,e.next=14,f.fetch.load(c||"",{method:"post",body:a,headers:h});case 14:if(0!=(r=e.sent).code){e.next=40;break}if(a=r.sdp,o={sdp:a,type:"answer"},!a.includes("rtpmap:265 HEVC/90000")){e.next=35;break}f.isHevc=!0,f._initHevcController(),s=a.split("\r\n"),l=0;case 25:if(l<s.length){if(s[l].includes("rtpmap:265 HEVC/90000"))return f.demuxer&&f.demuxer.setAudioInfo(s[l].split("_")[1]),s.splice(l,1),e.abrupt("break",33);e.next=30}else e.next=33;break;case 30:l++,e.next=25;break;case 33:s.push(""),o.sdp=s.join("\r\n");case 35:return e.next=38,f.pc.setRemoteDescription(o);case 38:e.next=41;break;case 40:f.rtcPlayer.trigger(p.ERROR,r);case 41:t(r),e.next=48;break;case 44:e.prev=44,e.t0=e.catch(10),v.warn("subscribeLiveStream fetch: "+e.t0.message),n(e.t0);case 48:case"end":return e.stop()}},e,null,[[10,44]])}));return function(e,t){return n.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)})),function(){return ge.apply(this,arguments)}),n.getStats=(me=i(C().mark(function e(){var r,t,a,n,i,o,s,l=this;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},t=C().mark(function e(){var t,n,i;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.pc.getReceivers()[a],e.next=3,t.getStats();case 3:n=e.sent,i=t.track.kind,n.forEach(function(e){"inbound-rtp"!=e.type&&"codec"!==e.type||(r[i]=r[i]?u(r[i],e):e)});case 6:case"end":return e.stop()}},e)}),a=0;case 3:if(a<this.pc.getReceivers().length)return e.delegateYield(t(),"t0",5);e.next=8;break;case 5:a++,e.next=3;break;case 8:for(i in n={video:{width:"frameWidth",height:"frameHeight",code:"mimeType",frameRate:"framesPerSecond",playStyle:"rtc",demuxStyle:"rtc",bitRate:"bytesReceived"},audio:{sampleRate:"clockRate",code:"mimeType",bitRate:"bytesReceived",channels:"channels"}})for(o in n[i])s=n[i][o],r&&r[i]&&r[i][s]&&(n[i][o]=r[i][s]);return this.isHevc&&(n=this._HevcMediaInfo()),e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)})),function(){return me.apply(this,arguments)}),n._HevcMediaInfo=function(){var e=null==(e=this.HevcController)?void 0:e.videoInfo;return e[h.CODEC]=h.HEVC,{video:e,audio:{}}},n.sendMsg=function(e){try{this.datachannel.send(e)}catch(e){this.rtcPlayer.trigger(p.ERROR,{type:"datachannelSend",err:e})}},n.reConnecting=(pe=i(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reConnectNumber--,this.closeReconnect(),this.reConnectNumber<0)return this.reConnectFailed(),e.abrupt("return");e.next=5;break;case 5:if(this.pc&&"connected"!=this.pc.iceConnectionState||!this.pc)return this.destroyPc(),this._initPeerConnection(),e.next=10,this.subscribeLiveStream();e.next=12;break;case 10:e.next=14;break;case 12:return this.reConnectSuccess(),e.abrupt("return");case 14:this.reconnectTimerFunc();case 15:case"end":return e.stop()}},e,this)})),function(){return pe.apply(this,arguments)}),n.reconnectTimerFunc=function(){var t=this;this.closeReconnect(),this.reconnectStatus==m.RECONNECTING&&(this.reConnectTimer=setTimeout(i(C().mark(function e(){return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t.pc&&"connected"!=t.pc.iceConnectionState||!t.pc)&&t.reConnecting();case 1:case"end":return e.stop()}},e)})),1e3*this.oneReConnectTime))},n.reConnectFailed=function(){this.closeReconnect(),this._removeVideoEvent(),this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reconnectStatus=m.RECONNECT_FAILED,this.rtcPlayer.trigger(p.RE_CONNECT_FAILED,{type:p.RE_CONNECT_FAILED})},n.reConnectSuccess=function(){this.reconnectStatus==m.RECONNECTING&&(this.closeReconnect(),this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reconnectStatus=m.RECONNECT_SUCCESS,this.rtcPlayer.trigger(p.RE_CONNECT_SUCCESS,{type:p.RE_CONNECT_SUCCESS}))},n.closeReconnect=function(){this.reConnectTimer&&(clearTimeout(this.reConnectTime),this.reConnectTimer=null)},n.closeDataChannel=function(){this.datachannel&&(this.datachannel.close&&this.datachannel.close(),this.datachannel=null)},n.setVolume=function(e){"video"===this.eleTagName&&this.ele&&(this.ele,HTMLMediaElement),this.mute(0===e,e)},n.mute=function(e,t){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?(this.ele.muted=e,null!=t&&(this.ele.volume=e?0:t)):this.HevcController&&this.HevcController.mute(e)},n.getAudioStatus=function(){if("video"===this.eleTagName)return this.rtcPlayer.getEelement&&this.rtcPlayer.getEelement.muted?"muted":"unmuted"},n.play=function(){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.play():this.HevcController&&this.HevcController.play()},n.pause=function(){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.pause():this.HevcController&&this.HevcController.pause()},n.getPlayStatus=function(){return"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.paused?d.PAUSED:d.PLAYING:this.HevcController&&this.HevcController.getPlayStatus()},n.destroyPc=function(){this.closeDataChannel(),this.pc&&(this.pc.close(),this.pc=null)},n.destroy=function(){var e;this.destroyPc(),null!=(e=this.demuxer)&&e.destroy(),null!=(e=this.HevcController)&&e.destroy(),this._removeVideoEvent(),this.reConnectTime=-1,this.reConnectNumber=-1,this.reConnectTimer=null,this.reconnectStatus=m.RECONNECT_SUCCESS,this.rtcPlayer.trigger(p.DESTROY,{type:p.DESTROY})},e(Ae,[{key:"eleTagName",get:function(){var e;return null==(e=this.rtcPlayer.getEelement)?void 0:e.tagName.toLocaleLowerCase()}},{key:"ele",get:function(){return this.rtcPlayer.getEelement}},{key:"isEvs",get:function(){var e=this.rtcPlayer.rtcConfig.serverUrl;return null==e?void 0:e.includes(".rtc")}},{key:"isHevcCode",get:function(){return this.isHevc}},{key:"postMsg",get:function(){var e,t,n,i=this.rtcPlayer.rtcConfig.serverUrl,r=null==i?void 0:i.includes(".rtc");return n=r?(t=i,{"Content-Type":"text/plain;charset=utf-8"}):(e=null==i?void 0:i.replace("webrtc://","http://"),e=new URL(e||""),n="http://",t=(n=this.useHttps?"https://":n)+e.host+"/brtc/v3/pullstream",{"Content-Type":"application/json"}),{requsetUrl:t,headers:n,isEvsLive:r,serverUrl:i}}},{key:"useDataChannel",get:function(){var e;return null==(e=this.rtcPlayer)||null==(e=e.rtcConfig)?void 0:e.usedatachannel}},{key:"useHttps",get:function(){var e;return null==(e=this.rtcPlayer)||null==(e=e.rtcConfig)?void 0:e.usehttps}}]),Ae);function Ae(e,t){this.rtcPlayer=void 0,this.pc={},this.datachannel={},this.demuxer=void 0,this.fetch=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this.reConnectTime=void 0,this.reConnectNumber=void 0,this.reConnectTimer=void 0,this.HevcController=void 0,this.isHevc=void 0,this.oneReConnectTime=void 0,this.reconnectStatus=void 0,this.callBack=void 0,this.rtcPlayer=e,this.callBack=t,this.fetch=new q;e="[rtc-peerconnection]";this.log=v.log.bind(v,e),this.warn=v.warn.bind(v,e),this.error=v.error.bind(v,e),this.reConnectTime=this.rtcPlayer.rtcConfig.reConnectTimeOut||30,this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reConnectTimer=null,this.oneReConnectTime=this.reConnectTime/this.reConnectNumber,this.reconnectStatus=m.RECONNECT_SUCCESS,this.isHevc=!1,this.demuxer=null,this.HevcController=null,this._initPeerConnection(),this._addVideoEvent()}function be(e,t,n){this.rtcPlayer=void 0,this.demuxer=void 0,this._decodeController=void 0,this._tickTimer=void 0,this._nalQueue=void 0,this._frameQueue=void 0,this._frameRender=void 0,this.gl=void 0,this.AudioRender=void 0,this.renderEle=void 0,this.VideoInfo=void 0,this._isPaused=void 0,this.framerate=void 0,this.oneTime=void 0,this.renderFramerate=void 0,this.rtcPlayer=n,this.demuxer=e,this.renderEle=t,this._nalQueue=new he(this),this._frameQueue=new ce,this._decodeController=null,this._isPaused=!1,this.VideoInfo={},this._tickTimer=new ue(this._render.bind(this)),this.gl=null,this._frameRender=this.isWebCodecs?new de(this.renderEle):this._initWebgl(),this.AudioRender=new ye,this._selectDecoder(),this._initDecoder(),this._bindEvent(),this.framerate=0,this.oneTime=-1,this.renderFramerate=0}function Te(){this._audioCtx=void 0,this._gainNode=void 0,this._audioCanAutoplay=void 0,this._onStateChange=void 0,this._ready=void 0,this._sampleQueue=void 0,this._inDecoding=void 0,this._isSourceBufferEnd=void 0,this._buffers=void 0,this._source=void 0,this._isStartPlay=void 0,this._isRender=void 0,this._audioCtx,this._gainNode,this._audioCanAutoplay,this._onSourceBufferEnded=this._onSourceBufferEnded.bind(this),this._onStateChange,this._ready=!1,this._inDecoding=!1,this._sampleQueue=[],this._isSourceBufferEnd=!1,this._source,this._initAudioCtx(),this._isStartPlay=!1,this._buffers=[],this._isRender=!1}return(M=Se.prototype).on=function(e,t,n){this._emitter.on(e,t,n=void 0===n?this:n)},M.once=function(e,t,n){this._emitter.once(e,t,n=void 0===n?this:n)},M.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},M.off=function(e,t,n,i){this._emitter.off(e,t,n=void 0===n?this:n,i)},M.listeners=function(e){return this._emitter.listeners(e)},M.emit=function(e,t,n){return this._emitter.emit(e,t,n)},M.trigger=function(e,t){return this.emit(e,e,t)},M.listenerCount=function(e){return this._emitter.listenerCount(e)},M.subscribeLiveStream=function(){this.peerConnection.subscribeLiveStream()},M.sendMsg=function(e){this.peerConnection.sendMsg(e)},M.closeDataChannel=function(){this.peerConnection.closeDataChannel()},M.getStats=function(){return this.peerConnection.getStats()},M.mute=function(e){this.peerConnection.mute(e)},M.setVolume=function(e){this.peerConnection.setVolume(e)},M.getAudioStatus=function(){return this.peerConnection.getAudioStatus()},M.play=function(){return this.peerConnection.play()},M.pause=function(){return this.peerConnection.pause()},M.getPlayStatus=function(){return this.peerConnection.getPlayStatus()},M.destroy=function(){this.peerConnection.destroy()},e(Se,[{key:"getEelement",get:function(){return document.getElementById(this.rtcConfig.id)}}],[{key:"Events",get:function(){return u({},p,s)}}]),Se;function Se(e,t){if(void 0===e&&(e={}),this._emitter=new o,this.rtcConfig=void 0,this.peerConnection=void 0,self.console){V(!0,"debug","log","info","warn","error");try{y.log("Debug logs enabled for 'RTC instance' in rtcplayer.js version 1.0.0")}catch(e){y=_}}else y=_;this.rtcConfig=e,this.peerConnection=new Ee(this,t)}}()},,function(e,t,n){"use strict";n.r(t),n.d(t,"getPlayerPath",function(){return l}),n.d(t,"loadWasm",function(){return i}),n.d(t,"setPerformance",function(){return r});var t=n(117),o=n.n(t),t=n(1),s=n.n(t);const l=(e=0)=>{var t=document.getElementsByTagName("script"),n=null;for(let e=0;e<t.length;e++)if(t[e].src.includes("cyberplayer.js")&&!t[e].src.includes("sdk-player")){n=t[e].src.substring(0,t[e].src.lastIndexOf("/")+1);break}return n},i=e=>{var t=document.getElementsByTagName("html"),n=o.a.simd(),i=l();let r=document.getElementById("cyberplayer-wasm");var a=s.a.isSafari();r&&e(),r||((r=document.createElement("script")).type="text/javascript",r.id="cyberplayer-wasm",r.src=n&&!a?i+"missile-simd.js":i+"missile.js",t[0].appendChild(r)),r.addEventListener("load",()=>{e()})},r=e=>{}},,function(e,t,n){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return a.test(e)?e.replace(r,o):e},t.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,a=/[&<>"'`=]/;function o(e){return i[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString,u=(t.toString=l,function(e){return"function"==typeof e}),c=(u(/x/)&&(t.isFunction=u=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=u,Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)});t.isArray=c},function(e,t,n){"use strict";e.exports=function(t,n,i,r){var a,o=self||window;try{try{try{a=new o.Blob([t])}catch(e){(a=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(t),a=a.getBlob()}var e=o.URL||o.webkitURL,s=e.createObjectURL(a),l=new o[n](s,i);return e.revokeObjectURL(s),l}catch(e){return new o[n]("data:application/javascript,".concat(encodeURIComponent(t)),i)}}catch(e){if(r)return new o[n](r,i);throw Error("Inline worker is not supported")}}},function(N,F,e){"use strict";var l={},p=(e.r(l),e.d(l,"create",function(){return V}),e.d(l,"clone",function(){return H}),e.d(l,"copy",function(){return Y}),e.d(l,"fromValues",function(){return z}),e.d(l,"set",function(){return W}),e.d(l,"identity",function(){return K}),e.d(l,"transpose",function(){return q}),e.d(l,"invert",function(){return Q}),e.d(l,"adjoint",function(){return X}),e.d(l,"determinant",function(){return J}),e.d(l,"multiply",function(){return Z}),e.d(l,"translate",function(){return $}),e.d(l,"scale",function(){return ee}),e.d(l,"rotate",function(){return te}),e.d(l,"rotateX",function(){return ne}),e.d(l,"rotateY",function(){return ie}),e.d(l,"rotateZ",function(){return re}),e.d(l,"fromTranslation",function(){return ae}),e.d(l,"fromScaling",function(){return oe}),e.d(l,"fromRotation",function(){return se}),e.d(l,"fromXRotation",function(){return le}),e.d(l,"fromYRotation",function(){return ue}),e.d(l,"fromZRotation",function(){return ce}),e.d(l,"fromRotationTranslation",function(){return he}),e.d(l,"fromQuat2",function(){return de}),e.d(l,"getTranslation",function(){return fe}),e.d(l,"getScaling",function(){return pe}),e.d(l,"getRotation",function(){return me}),e.d(l,"fromRotationTranslationScale",function(){return ge}),e.d(l,"fromRotationTranslationScaleOrigin",function(){return _e}),e.d(l,"fromQuat",function(){return ye}),e.d(l,"frustum",function(){return ve}),e.d(l,"perspectiveNO",function(){return Ee}),e.d(l,"perspective",function(){return Ae}),e.d(l,"perspectiveZO",function(){return be}),e.d(l,"perspectiveFromFieldOfView",function(){return Te}),e.d(l,"orthoNO",function(){return Se}),e.d(l,"ortho",function(){return we}),e.d(l,"orthoZO",function(){return Re}),e.d(l,"lookAt",function(){return Ie}),e.d(l,"targetTo",function(){return Ce}),e.d(l,"str",function(){return Le}),e.d(l,"frob",function(){return Pe}),e.d(l,"add",function(){return De}),e.d(l,"subtract",function(){return ke}),e.d(l,"multiplyScalar",function(){return Oe}),e.d(l,"multiplyScalarAndAdd",function(){return Me}),e.d(l,"exactEquals",function(){return xe}),e.d(l,"equals",function(){return Ne}),e.d(l,"mul",function(){return Fe}),e.d(l,"sub",function(){return Be}),{}),m=(e.r(p),e.d(p,"create",function(){return Ue}),e.d(p,"clone",function(){return je}),e.d(p,"length",function(){return Ge}),e.d(p,"fromValues",function(){return Ve}),e.d(p,"copy",function(){return He}),e.d(p,"set",function(){return Ye}),e.d(p,"add",function(){return ze}),e.d(p,"subtract",function(){return We}),e.d(p,"multiply",function(){return Ke}),e.d(p,"divide",function(){return qe}),e.d(p,"ceil",function(){return Qe}),e.d(p,"floor",function(){return Xe}),e.d(p,"min",function(){return Je}),e.d(p,"max",function(){return Ze}),e.d(p,"round",function(){return $e}),e.d(p,"scale",function(){return et}),e.d(p,"scaleAndAdd",function(){return tt}),e.d(p,"distance",function(){return nt}),e.d(p,"squaredDistance",function(){return it}),e.d(p,"squaredLength",function(){return rt}),e.d(p,"negate",function(){return at}),e.d(p,"inverse",function(){return ot}),e.d(p,"normalize",function(){return st}),e.d(p,"dot",function(){return lt}),e.d(p,"cross",function(){return ut}),e.d(p,"lerp",function(){return ct}),e.d(p,"hermite",function(){return ht}),e.d(p,"bezier",function(){return dt}),e.d(p,"random",function(){return ft}),e.d(p,"transformMat4",function(){return pt}),e.d(p,"transformMat3",function(){return mt}),e.d(p,"transformQuat",function(){return gt}),e.d(p,"rotateX",function(){return _t}),e.d(p,"rotateY",function(){return yt}),e.d(p,"rotateZ",function(){return vt}),e.d(p,"angle",function(){return Et}),e.d(p,"zero",function(){return At}),e.d(p,"str",function(){return bt}),e.d(p,"exactEquals",function(){return Tt}),e.d(p,"equals",function(){return St}),e.d(p,"sub",function(){return wt}),e.d(p,"mul",function(){return Rt}),e.d(p,"div",function(){return It}),e.d(p,"dist",function(){return Ct}),e.d(p,"sqrDist",function(){return Lt}),e.d(p,"len",function(){return Pt}),e.d(p,"sqrLen",function(){return Dt}),e.d(p,"forEach",function(){return kt}),{}),s=(e.r(m),e.d(m,"create",function(){return xt}),e.d(m,"identity",function(){return Nt}),e.d(m,"setAxisAngle",function(){return Ft}),e.d(m,"getAxisAngle",function(){return Bt}),e.d(m,"getAngle",function(){return Ut}),e.d(m,"multiply",function(){return jt}),e.d(m,"rotateX",function(){return Gt}),e.d(m,"rotateY",function(){return Vt}),e.d(m,"rotateZ",function(){return Ht}),e.d(m,"calculateW",function(){return Yt}),e.d(m,"exp",function(){return zt}),e.d(m,"ln",function(){return Wt}),e.d(m,"pow",function(){return Kt}),e.d(m,"slerp",function(){return qt}),e.d(m,"random",function(){return Qt}),e.d(m,"invert",function(){return Xt}),e.d(m,"conjugate",function(){return Jt}),e.d(m,"fromMat3",function(){return Zt}),e.d(m,"fromEuler",function(){return $t}),e.d(m,"str",function(){return en}),e.d(m,"clone",function(){return on}),e.d(m,"fromValues",function(){return sn}),e.d(m,"copy",function(){return ln}),e.d(m,"set",function(){return un}),e.d(m,"add",function(){return cn}),e.d(m,"mul",function(){return hn}),e.d(m,"scale",function(){return dn}),e.d(m,"dot",function(){return fn}),e.d(m,"lerp",function(){return pn}),e.d(m,"length",function(){return mn}),e.d(m,"len",function(){return gn}),e.d(m,"squaredLength",function(){return _n}),e.d(m,"sqrLen",function(){return yn}),e.d(m,"normalize",function(){return vn}),e.d(m,"exactEquals",function(){return En}),e.d(m,"equals",function(){return An}),e.d(m,"rotationTo",function(){return bn}),e.d(m,"sqlerp",function(){return Tn}),e.d(m,"setAxes",function(){return Sn}),{});function B(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}(arguments[t]));return e}e.r(s),e.d(s,"create",function(){return wn}),e.d(s,"clone",function(){return Rn}),e.d(s,"fromValues",function(){return In}),e.d(s,"copy",function(){return Cn}),e.d(s,"set",function(){return Ln}),e.d(s,"add",function(){return Pn}),e.d(s,"subtract",function(){return Dn}),e.d(s,"multiply",function(){return kn}),e.d(s,"divide",function(){return On}),e.d(s,"ceil",function(){return Mn}),e.d(s,"floor",function(){return xn}),e.d(s,"min",function(){return Nn}),e.d(s,"max",function(){return Fn}),e.d(s,"round",function(){return Bn}),e.d(s,"scale",function(){return Un}),e.d(s,"scaleAndAdd",function(){return jn}),e.d(s,"distance",function(){return Gn}),e.d(s,"squaredDistance",function(){return Vn}),e.d(s,"length",function(){return Hn}),e.d(s,"squaredLength",function(){return Yn}),e.d(s,"negate",function(){return zn}),e.d(s,"inverse",function(){return Wn}),e.d(s,"normalize",function(){return Kn}),e.d(s,"dot",function(){return qn}),e.d(s,"cross",function(){return Qn}),e.d(s,"lerp",function(){return Xn}),e.d(s,"random",function(){return Jn}),e.d(s,"transformMat2",function(){return Zn}),e.d(s,"transformMat2d",function(){return $n}),e.d(s,"transformMat3",function(){return ei}),e.d(s,"transformMat4",function(){return ti}),e.d(s,"rotate",function(){return ni}),e.d(s,"angle",function(){return ii}),e.d(s,"zero",function(){return ri}),e.d(s,"str",function(){return ai}),e.d(s,"exactEquals",function(){return oi}),e.d(s,"equals",function(){return si}),e.d(s,"len",function(){return li}),e.d(s,"sub",function(){return ui}),e.d(s,"mul",function(){return ci}),e.d(s,"div",function(){return hi}),e.d(s,"dist",function(){return di}),e.d(s,"sqrDist",function(){return fi}),e.d(s,"sqrLen",function(){return pi}),e.d(s,"forEach",function(){return mi});function U(e){return void 0===e}var j=function(){function e(e,t){var n,i;if(this._canceled=!1,t)try{for(var r=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&i>=e.length?void 0:e)&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(t)),a=r.next();!a.done;a=r.next()){var o=a.value;this[o]=t[o]}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.eventType=e}var t=e.prototype;return t.stop=function(){this._canceled=!0},t.isCanceled=function(){return this._canceled},e}(),G=j,e=function(){function e(){this._eventHandler={}}var t=e.prototype;return t.trigger=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var i=t instanceof j?t.eventType:t,i=B(this._eventHandler[i]||[]);return i.length<=0||(t instanceof j?(t.currentTarget=this,i.forEach(function(e){e(t)})):i.forEach(function(e){e.apply(void 0,B(n))})),this},t.once=function(n,i){var r,a=this;if("object"==typeof n&&U(i)){var e,t=n;for(e in t)this.once(e,t[e])}else"string"==typeof n&&"function"==typeof i&&(r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.apply(void 0,B(e)),a.off(n,r)},this.on(n,r));return this},t.hasOn=function(e){return!!this._eventHandler[e]},t.on=function(e,t){if("object"==typeof e&&U(t)){var n,i=e;for(n in i)this.on(n,i[n])}else{var r;"string"==typeof e&&"function"==typeof t&&(r=this._eventHandler[e],U(r)&&(this._eventHandler[e]=[],r=this._eventHandler[e]),r.push(t))}return this},t.off=function(e,t){if(U(e))this._eventHandler={};else if(U(t))if("string"==typeof e)delete this._eventHandler[e];else{var n,i=e;for(n in i)this.off(n,i[n])}else{var r=this._eventHandler[e];if(r)for(var a=r.length,o=0;o<a;++o)if(r[o]===t){r.splice(o,1),a<=1&&delete this._eventHandler[e];break}}return this},e.VERSION="3.0.5",e}(),k=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI;function V(){var e=new _(16);return _!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function H(e){var t=new _(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Y(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function z(e,t,n,i,r,a,o,s,l,u,c,h,d,f,p,m){var g=new _(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=r,g[5]=a,g[6]=o,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=h,g[12]=d,g[13]=f,g[14]=p,g[15]=m,g}function W(e,t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=m,e[15]=g,e}function K(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function q(e,t){var n,i,r,a,o,s;return e===t?(n=t[1],i=t[2],r=t[3],a=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=r,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]),e}function Q(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],t=t[15],_=n*s-i*o,y=n*l-r*o,v=n*u-a*o,E=i*l-r*s,A=i*u-a*s,b=r*u-a*l,T=c*m-h*p,S=c*g-d*p,w=c*t-f*p,R=h*g-d*m,I=h*t-f*m,C=d*t-f*g,L=_*C-y*I+v*R+E*w-A*S+b*T;return L?(e[0]=(s*C-l*I+u*R)*(L=1/L),e[1]=(r*I-i*C-a*R)*L,e[2]=(m*b-g*A+t*E)*L,e[3]=(d*A-h*b-f*E)*L,e[4]=(l*w-o*C-u*S)*L,e[5]=(n*C-r*w+a*S)*L,e[6]=(g*v-p*b-t*y)*L,e[7]=(c*b-d*v+f*y)*L,e[8]=(o*I-s*w+u*T)*L,e[9]=(i*w-n*I-a*T)*L,e[10]=(p*A-m*v+t*_)*L,e[11]=(h*v-c*A-f*_)*L,e[12]=(s*S-o*R-l*T)*L,e[13]=(n*R-i*S+r*T)*L,e[14]=(m*y-p*E-g*_)*L,e[15]=(c*E-h*y+d*_)*L,e):null}function X(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],t=t[15];return e[0]=s*(d*t-f*g)-h*(l*t-u*g)+m*(l*f-u*d),e[1]=-(i*(d*t-f*g)-h*(r*t-a*g)+m*(r*f-a*d)),e[2]=i*(l*t-u*g)-s*(r*t-a*g)+m*(r*u-a*l),e[3]=-(i*(l*f-u*d)-s*(r*f-a*d)+h*(r*u-a*l)),e[4]=-(o*(d*t-f*g)-c*(l*t-u*g)+p*(l*f-u*d)),e[5]=n*(d*t-f*g)-c*(r*t-a*g)+p*(r*f-a*d),e[6]=-(n*(l*t-u*g)-o*(r*t-a*g)+p*(r*u-a*l)),e[7]=n*(l*f-u*d)-o*(r*f-a*d)+c*(r*u-a*l),e[8]=o*(h*t-f*m)-c*(s*t-u*m)+p*(s*f-u*h),e[9]=-(n*(h*t-f*m)-c*(i*t-a*m)+p*(i*f-a*h)),e[10]=n*(s*t-u*m)-o*(i*t-a*m)+p*(i*u-a*s),e[11]=-(n*(s*f-u*h)-o*(i*f-a*h)+c*(i*u-a*s)),e[12]=-(o*(h*g-d*m)-c*(s*g-l*m)+p*(s*d-l*h)),e[13]=n*(h*g-d*m)-c*(i*g-r*m)+p*(i*d-r*h),e[14]=-(n*(s*g-l*m)-o*(i*g-r*m)+p*(i*l-r*s)),e[15]=n*(s*d-l*h)-o*(i*d-r*h)+c*(i*l-r*s),e}function J(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],e=e[15];return(t*o-n*a)*(h*e-d*m)-(t*s-i*a)*(c*e-d*p)+(t*l-r*a)*(c*m-h*p)+(n*s-i*o)*(u*e-d*f)-(n*l-r*o)*(u*m-h*f)+(i*l-r*s)*(u*p-c*f)}function Z(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],_=t[14],t=t[15],y=n[0],v=n[1],E=n[2],A=n[3];return e[0]=y*i+v*s+E*h+A*m,e[1]=y*r+v*l+E*d+A*g,e[2]=y*a+v*u+E*f+A*_,e[3]=y*o+v*c+E*p+A*t,y=n[4],v=n[5],E=n[6],A=n[7],e[4]=y*i+v*s+E*h+A*m,e[5]=y*r+v*l+E*d+A*g,e[6]=y*a+v*u+E*f+A*_,e[7]=y*o+v*c+E*p+A*t,y=n[8],v=n[9],E=n[10],A=n[11],e[8]=y*i+v*s+E*h+A*m,e[9]=y*r+v*l+E*d+A*g,e[10]=y*a+v*u+E*f+A*_,e[11]=y*o+v*c+E*p+A*t,y=n[12],v=n[13],E=n[14],A=n[15],e[12]=y*i+v*s+E*h+A*m,e[13]=y*r+v*l+E*d+A*g,e[14]=y*a+v*u+E*f+A*_,e[15]=y*o+v*c+E*p+A*t,e}function $(e,t,n){var i,r,a,o,s,l,u,c,h,d,f,p,m=n[0],g=n[1],n=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*n+t[12],e[13]=t[1]*m+t[5]*g+t[9]*n+t[13],e[14]=t[2]*m+t[6]*g+t[10]*n+t[14],e[15]=t[3]*m+t[7]*g+t[11]*n+t[15]):(i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=i,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=i*m+s*g+h*n+t[12],e[13]=r*m+l*g+d*n+t[13],e[14]=a*m+u*g+f*n+t[14],e[15]=o*m+c*g+p*n+t[15]),e}function ee(e,t,n){var i=n[0],r=n[1],n=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function te(e,t,n,i){var r,a,o,s,l,u,c,h,d,f,p,m,g,_,y,v,E,A,b,T,S=i[0],w=i[1],i=i[2],R=Math.hypot(S,w,i);return R<k?null:(S*=R=1/R,w*=R,i*=R,R=Math.sin(n),n=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7],f=t[8],p=t[9],m=t[10],g=t[11],y=S*w*(r=1-n)-i*R,v=w*w*r+n,E=i*w*r+S*R,A=S*i*r+w*R,b=w*i*r-S*R,T=i*i*r+n,e[0]=a*(n=S*S*r+n)+u*(_=w*S*r+i*R)+f*(i=i*S*r-w*R),e[1]=o*n+c*_+p*i,e[2]=s*n+h*_+m*i,e[3]=l*n+d*_+g*i,e[4]=a*y+u*v+f*E,e[5]=o*y+c*v+p*E,e[6]=s*y+h*v+m*E,e[7]=l*y+d*v+g*E,e[8]=a*A+u*b+f*T,e[9]=o*A+c*b+p*T,e[10]=s*A+h*b+m*T,e[11]=l*A+d*b+g*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ne(e,t,n){var i=Math.sin(n),n=Math.cos(n),r=t[4],a=t[5],o=t[6],s=t[7],l=t[8],u=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*n+l*i,e[5]=a*n+u*i,e[6]=o*n+c*i,e[7]=s*n+h*i,e[8]=l*n-r*i,e[9]=u*n-a*i,e[10]=c*n-o*i,e[11]=h*n-s*i,e}function ie(e,t,n){var i=Math.sin(n),n=Math.cos(n),r=t[0],a=t[1],o=t[2],s=t[3],l=t[8],u=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*n-l*i,e[1]=a*n-u*i,e[2]=o*n-c*i,e[3]=s*n-h*i,e[8]=r*i+l*n,e[9]=a*i+u*n,e[10]=o*i+c*n,e[11]=s*i+h*n,e}function re(e,t,n){var i=Math.sin(n),n=Math.cos(n),r=t[0],a=t[1],o=t[2],s=t[3],l=t[4],u=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*n+l*i,e[1]=a*n+u*i,e[2]=o*n+c*i,e[3]=s*n+h*i,e[4]=l*n-r*i,e[5]=u*n-a*i,e[6]=c*n-o*i,e[7]=h*n-s*i,e}function ae(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function oe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function se(e,t,n){var i,r=n[0],a=n[1],n=n[2],o=Math.hypot(r,a,n);return o<k?null:(r*=o=1/o,a*=o,n*=o,o=Math.sin(t),t=Math.cos(t),e[0]=r*r*(i=1-t)+t,e[1]=a*r*i+n*o,e[2]=n*r*i-a*o,e[3]=0,e[4]=r*a*i-n*o,e[5]=a*a*i+t,e[6]=n*a*i+r*o,e[7]=0,e[8]=r*n*i+a*o,e[9]=a*n*i-r*o,e[10]=n*n*i+t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function le(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ue(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ce(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function he(e,t,n){var i=t[0],r=t[1],a=t[2],t=t[3],o=i+i,s=r+r,l=a+a,u=i*o,c=i*s,i=i*l,h=r*s,r=r*l,a=a*l,o=t*o,s=t*s,t=t*l;return e[0]=1-(h+a),e[1]=c+t,e[2]=i-s,e[3]=0,e[4]=c-t,e[5]=1-(u+a),e[6]=r+o,e[7]=0,e[8]=i+s,e[9]=r-o,e[10]=1-(u+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function de(e,t){var n=new _(3),i=-t[0],r=-t[1],a=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=i*i+r*r+a*a+o*o;return 0<h?(n[0]=2*(s*o+c*i+l*a-u*r)/h,n[1]=2*(l*o+c*r+u*i-s*a)/h,n[2]=2*(u*o+c*a+s*r-l*i)/h):(n[0]=2*(s*o+c*i+l*a-u*r),n[1]=2*(l*o+c*r+u*i-s*a),n[2]=2*(u*o+c*a+s*r-l*i)),he(e,t,n),e}function fe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function pe(e,t){var n=t[0],i=t[1],r=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9],t=t[10];return e[0]=Math.hypot(n,i,r),e[1]=Math.hypot(a,o,s),e[2]=Math.hypot(l,u,t),e}function me(e,t){var n=new _(3),i=(pe(n,t),1/n[0]),r=1/n[1],n=1/n[2],a=t[0]*i,o=t[1]*r,s=t[2]*n,l=t[4]*i,u=t[5]*r,c=t[6]*n,i=t[8]*i,r=t[9]*r,t=t[10]*n,n=a+u+t,h=0;return 0<n?(h=2*Math.sqrt(1+n),e[3]=.25*h,e[0]=(c-r)/h,e[1]=(i-s)/h,e[2]=(o-l)/h):u<a&&t<a?(h=2*Math.sqrt(1+a-u-t),e[3]=(c-r)/h,e[0]=.25*h,e[1]=(o+l)/h,e[2]=(i+s)/h):t<u?(h=2*Math.sqrt(1+u-a-t),e[3]=(i-s)/h,e[0]=(o+l)/h,e[1]=.25*h,e[2]=(c+r)/h):(h=2*Math.sqrt(1+t-a-u),e[3]=(o-l)/h,e[0]=(i+s)/h,e[1]=(c+r)/h,e[2]=.25*h),e}function ge(e,t,n,i){var r=t[0],a=t[1],o=t[2],t=t[3],s=r+r,l=a+a,u=o+o,c=r*s,h=r*l,r=r*u,d=a*l,a=a*u,o=o*u,s=t*s,l=t*l,t=t*u,u=i[0],f=i[1],i=i[2];return e[0]=(1-(d+o))*u,e[1]=(h+t)*u,e[2]=(r-l)*u,e[3]=0,e[4]=(h-t)*f,e[5]=(1-(c+o))*f,e[6]=(a+s)*f,e[7]=0,e[8]=(r+l)*i,e[9]=(a-s)*i,e[10]=(1-(c+d))*i,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function _e(e,t,n,i,r){var a=t[0],o=t[1],s=t[2],t=t[3],l=a+a,u=o+o,c=s+s,h=a*l,d=a*u,a=a*c,f=o*u,o=o*c,s=s*c,l=t*l,u=t*u,t=t*c,c=i[0],p=i[1],i=i[2],m=r[0],g=r[1],r=r[2],_=(1-(f+s))*c,y=(d+t)*c,c=(a-u)*c,d=(d-t)*p,t=(1-(h+s))*p,s=(o+l)*p,p=(a+u)*i,a=(o-l)*i,u=(1-(h+f))*i;return e[0]=_,e[1]=y,e[2]=c,e[3]=0,e[4]=d,e[5]=t,e[6]=s,e[7]=0,e[8]=p,e[9]=a,e[10]=u,e[11]=0,e[12]=n[0]+m-(_*m+d*g+p*r),e[13]=n[1]+g-(y*m+t*g+a*r),e[14]=n[2]+r-(c*m+s*g+u*r),e[15]=1,e}function ye(e,t){var n=t[0],i=t[1],r=t[2],t=t[3],a=n+n,o=i+i,s=r+r,n=n*a,l=i*a,i=i*o,u=r*a,c=r*o,r=r*s,a=t*a,o=t*o,t=t*s;return e[0]=1-i-r,e[1]=l+t,e[2]=u-o,e[3]=0,e[4]=l-t,e[5]=1-n-r,e[6]=c+a,e[7]=0,e[8]=u+o,e[9]=c-a,e[10]=1-n-i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ve(e,t,n,i,r,a,o){var s=1/(n-t),l=1/(r-i),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+i)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}function Ee(e,t,n,i,r){t=1/Math.tan(t/2);return e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+i)*(n=1/(i-r)),e[14]=2*r*i*n):(e[10]=-1,e[14]=-2*i),e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Ae=Ee;function be(e,t,n,i,r){t=1/Math.tan(t/2);return e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=r*(n=1/(i-r)),e[14]=r*i*n):(e[10]=-1,e[14]=-i),e}function Te(e,t,n,i){var r=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),t=Math.tan(t.rightDegrees*Math.PI/180),s=2/(o+t),l=2/(r+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-t)*s*.5,e[9]=(r-a)*l*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e}function Se(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(o+a)*u,e[15]=1,e}var we=Se;function Re(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r),o=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=o,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=a*o,e[15]=1,e}function Ie(e,t,n,i){var r,a,o,s,l=t[0],u=t[1],t=t[2],c=i[0],h=i[1],i=i[2],d=n[0],f=n[1],n=n[2];return Math.abs(l-d)<k&&Math.abs(u-f)<k&&Math.abs(t-n)<k?K(e):(d=l-d,f=u-f,n=t-n,r=h*(n*=s=1/Math.hypot(d,f,n))-i*(f*=s),i=i*(d*=s)-c*n,c=c*f-h*d,(s=Math.hypot(r,i,c))?(r*=s=1/s,i*=s,c*=s):c=i=r=0,h=f*c-n*i,a=n*r-d*c,o=d*i-f*r,(s=Math.hypot(h,a,o))?(h*=s=1/s,a*=s,o*=s):o=a=h=0,e[0]=r,e[1]=h,e[2]=d,e[3]=0,e[4]=i,e[5]=a,e[6]=f,e[7]=0,e[8]=c,e[9]=o,e[10]=n,e[11]=0,e[12]=-(r*l+i*u+c*t),e[13]=-(h*l+a*u+o*t),e[14]=-(d*l+f*u+n*t),e[15]=1,e)}function Ce(e,t,n,i){var r=t[0],a=t[1],t=t[2],o=i[0],s=i[1],i=i[2],l=r-n[0],u=a-n[1],n=t-n[2],c=l*l+u*u+n*n,h=(0<c&&(l*=c=1/Math.sqrt(c),u*=c,n*=c),s*n-i*u),i=i*l-o*n,o=o*u-s*l;return 0<(c=h*h+i*i+o*o)&&(h*=c=1/Math.sqrt(c),i*=c,o*=c),e[0]=h,e[1]=i,e[2]=o,e[3]=0,e[4]=u*o-n*i,e[5]=n*h-l*o,e[6]=l*i-u*h,e[7]=0,e[8]=l,e[9]=u,e[10]=n,e[11]=0,e[12]=r,e[13]=a,e[14]=t,e[15]=1,e}function Le(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Pe(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function De(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function ke(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Oe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Me(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e[9]=t[9]+n[9]*i,e[10]=t[10]+n[10]*i,e[11]=t[11]+n[11]*i,e[12]=t[12]+n[12]*i,e[13]=t[13]+n[13]*i,e[14]=t[14]+n[14]*i,e[15]=t[15]+n[15]*i,e}function xe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ne(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],e=e[15],_=t[0],y=t[1],v=t[2],E=t[3],A=t[4],b=t[5],T=t[6],S=t[7],w=t[8],R=t[9],I=t[10],C=t[11],L=t[12],P=t[13],D=t[14],t=t[15];return Math.abs(n-_)<=k*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-y)<=k*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-v)<=k*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(a-E)<=k*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(o-A)<=k*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(s-b)<=k*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-T)<=k*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-S)<=k*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-w)<=k*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(h-R)<=k*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-I)<=k*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(f-C)<=k*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(p-L)<=k*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(m-P)<=k*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-D)<=k*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(e-t)<=k*Math.max(1,Math.abs(e),Math.abs(t))}var Fe=Z,Be=ke;function Ue(){var e=new _(3);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function je(e){var t=new _(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ge(e){var t=e[0],n=e[1],e=e[2];return Math.hypot(t,n,e)}function Ve(e,t,n){var i=new _(3);return i[0]=e,i[1]=t,i[2]=n,i}function He(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}function ze(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function We(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ke(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function qe(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Qe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Xe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Je(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Ze(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function $e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function et(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function tt(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function nt(e,t){var n=t[0]-e[0],i=t[1]-e[1],t=t[2]-e[2];return Math.hypot(n,i,t)}function it(e,t){var n=t[0]-e[0],i=t[1]-e[1],t=t[2]-e[2];return n*n+i*i+t*t}function rt(e){var t=e[0],n=e[1],e=e[2];return t*t+n*n+e*e}function at(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ot(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function st(e,t){var n=t[0],i=t[1],r=t[2],n=n*n+i*i+r*r;return 0<n&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function lt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ut(e,t,n){var i=t[0],r=t[1],t=t[2],a=n[0],o=n[1],n=n[2];return e[0]=r*n-t*o,e[1]=t*a-i*n,e[2]=i*o-r*a,e}function ct(e,t,n,i){var r=t[0],a=t[1],t=t[2];return e[0]=r+i*(n[0]-r),e[1]=a+i*(n[1]-a),e[2]=t+i*(n[2]-t),e}function ht(e,t,n,i,r,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),o=o*(3-2*a);return e[0]=t[0]*s+n[0]*l+i[0]*u+r[0]*o,e[1]=t[1]*s+n[1]*l+i[1]*u+r[1]*o,e[2]=t[2]*s+n[2]*l+i[2]*u+r[2]*o,e}function dt(e,t,n,i,r,a){var o=1-a,s=o*o,l=a*a,u=s*o,s=3*a*s,o=3*l*o,l=l*a;return e[0]=t[0]*u+n[0]*s+i[0]*o+r[0]*l,e[1]=t[1]*u+n[1]*s+i[1]*o+r[1]*l,e[2]=t[2]*u+n[2]*s+i[2]*o+r[2]*l,e}function ft(e,t){t=t||1;var n=2*a()*Math.PI,i=2*a()-1,r=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e[2]=i*t,e}function pt(e,t,n){var i=t[0],r=t[1],t=t[2],a=n[3]*i+n[7]*r+n[11]*t+n[15];return e[0]=(n[0]*i+n[4]*r+n[8]*t+n[12])/(a=a||1),e[1]=(n[1]*i+n[5]*r+n[9]*t+n[13])/a,e[2]=(n[2]*i+n[6]*r+n[10]*t+n[14])/a,e}function mt(e,t,n){var i=t[0],r=t[1],t=t[2];return e[0]=i*n[0]+r*n[3]+t*n[6],e[1]=i*n[1]+r*n[4]+t*n[7],e[2]=i*n[2]+r*n[5]+t*n[8],e}function gt(e,t,n){var i=n[0],r=n[1],a=n[2],n=n[3],o=t[0],s=t[1],t=t[2],l=r*t-a*s,u=a*o-i*t,c=i*s-r*o,h=r*c-a*u,a=a*l-i*c,i=i*u-r*l,r=2*n;return u*=r,c*=r,a*=2,i*=2,e[0]=o+(l*=r)+(h*=2),e[1]=s+u+a,e[2]=t+c+i,e}function _t(e,t,n,i){var r=[],a=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[0],a[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),a[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function yt(e,t,n,i){var r=[],a=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),a[1]=r[1],a[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function vt(e,t,n,i){var r=[],a=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),a[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),a[2]=r[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Et(e,t){var n=e[0],i=e[1],r=e[2],a=t[0],o=t[1],s=t[2],n=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(a*a+o*o+s*s),i=n&&lt(e,t)/n;return Math.acos(Math.min(Math.max(i,-1),1))}function At(e){return e[0]=0,e[1]=0,e[2]=0,e}function bt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Tt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function St(e,t){var n=e[0],i=e[1],e=e[2],r=t[0],a=t[1],t=t[2];return Math.abs(n-r)<=k*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-a)<=k*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-t)<=k*Math.max(1,Math.abs(e),Math.abs(t))}var u,wt=We,Rt=Ke,It=qe,Ct=nt,Lt=it,Pt=Ge,Dt=rt,kt=(u=Ue(),function(e,t,n,i,r,a){var o,s;for(t=t||3,n=n||0,s=i?Math.min(i*t+n,e.length):e.length,o=n;o<s;o+=t)u[0]=e[o],u[1]=e[o+1],u[2]=e[o+2],r(u,u,a),e[o]=u[0],e[o+1]=u[1],e[o+2]=u[2];return e});function Ot(e){var t=e[0],n=e[1],i=e[2],e=e[3];return Math.hypot(t,n,i,e)}function Mt(e){var t=e[0],n=e[1],i=e[2],e=e[3];return t*t+n*n+i*i+e*e}t=new _(4),_!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0);function xt(){var e=new _(4);return _!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Nt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Ft(e,t,n){n*=.5;var i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function Bt(e,t){var n=2*Math.acos(t[3]),i=Math.sin(n/2);return k<i?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function Ut(e,t){e=fn(e,t);return Math.acos(2*e*e-1)}function jt(e,t,n){var i=t[0],r=t[1],a=t[2],t=t[3],o=n[0],s=n[1],l=n[2],n=n[3];return e[0]=i*n+t*o+r*l-a*s,e[1]=r*n+t*s+a*o-i*l,e[2]=a*n+t*l+i*s-r*o,e[3]=t*n-i*o-r*s-a*l,e}function Gt(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],t=t[3],o=Math.sin(n),n=Math.cos(n);return e[0]=i*n+t*o,e[1]=r*n+a*o,e[2]=a*n-r*o,e[3]=t*n-i*o,e}function Vt(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],t=t[3],o=Math.sin(n),n=Math.cos(n);return e[0]=i*n-a*o,e[1]=r*n+t*o,e[2]=a*n+i*o,e[3]=t*n-r*o,e}function Ht(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],t=t[3],o=Math.sin(n),n=Math.cos(n);return e[0]=i*n+r*o,e[1]=r*n-i*o,e[2]=a*n+t*o,e[3]=t*n-a*o,e}function Yt(e,t){var n=t[0],i=t[1],t=t[2];return e[0]=n,e[1]=i,e[2]=t,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-t*t)),e}function zt(e,t){var n=t[0],i=t[1],r=t[2],t=t[3],a=Math.sqrt(n*n+i*i+r*r),t=Math.exp(t),o=0<a?t*Math.sin(a)/a:0;return e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=t*Math.cos(a),e}function Wt(e,t){var n=t[0],i=t[1],r=t[2],t=t[3],a=Math.sqrt(n*n+i*i+r*r),a=0<a?Math.atan2(a,t)/a:0;return e[0]=n*a,e[1]=i*a,e[2]=r*a,e[3]=.5*Math.log(n*n+i*i+r*r+t*t),e}function Kt(e,t,n){return Wt(e,t),dn(e,e,n),zt(e,e),e}function qt(e,t,n,i){var r,a,o=t[0],s=t[1],l=t[2],t=t[3],u=n[0],c=n[1],h=n[2],n=n[3],d=o*u+s*c+l*h+t*n;return d<0&&(d=-d,u=-u,c=-c,h=-h,n=-n),d=k<1-d?(d=Math.acos(d),r=Math.sin(d),a=Math.sin((1-i)*d)/r,Math.sin(i*d)/r):(a=1-i,i),e[0]=a*o+d*u,e[1]=a*s+d*c,e[2]=a*l+d*h,e[3]=a*t+d*n,e}function Qt(e){var t=a(),n=a(),i=a(),r=Math.sqrt(1-t),t=Math.sqrt(t);return e[0]=r*Math.sin(2*Math.PI*n),e[1]=r*Math.cos(2*Math.PI*n),e[2]=t*Math.sin(2*Math.PI*i),e[3]=t*Math.cos(2*Math.PI*i),e}function Xt(e,t){var n=t[0],i=t[1],r=t[2],t=t[3],a=n*n+i*i+r*r+t*t,a=a?1/a:0;return e[0]=-n*a,e[1]=-i*a,e[2]=-r*a,e[3]=t*a,e}function Jt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Zt(e,t){var n,i,r,a=t[0]+t[4]+t[8];return 0<a?(r=Math.sqrt(a+1),e[3]=.5*r,e[0]=(t[5]-t[7])*(r=.5/r),e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r):(t[4]>t[a=0]&&(a=1),n=((a=t[8]>t[3*a+a]?2:a)+1)%3,i=(a+2)%3,r=Math.sqrt(t[3*a+a]-t[3*n+n]-t[3*i+i]+1),e[a]=.5*r,e[3]=(t[3*n+i]-t[3*i+n])*(r=.5/r),e[n]=(t[3*n+a]+t[3*a+n])*r,e[i]=(t[3*i+a]+t[3*a+i])*r),e}function $t(e,t,n,i){var r=.5*Math.PI/180,r=(t*=r,n*=r,i*=r,Math.sin(t)),t=Math.cos(t),a=Math.sin(n),n=Math.cos(n),o=Math.sin(i),i=Math.cos(i);return e[0]=r*n*i-t*a*o,e[1]=t*a*i+r*n*o,e[2]=t*n*o-r*a*i,e[3]=t*n*i+r*a*o,e}function en(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var r,tn,nn,rn,an,o,on=function(e){var t=new _(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},sn=function(e,t,n,i){var r=new _(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r},ln=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},un=function(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e},cn=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},hn=jt,dn=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},fn=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},pn=function(e,t,n,i){var r=t[0],a=t[1],o=t[2],t=t[3];return e[0]=r+i*(n[0]-r),e[1]=a+i*(n[1]-a),e[2]=o+i*(n[2]-o),e[3]=t+i*(n[3]-t),e},mn=Ot,gn=mn,_n=Mt,yn=_n,vn=function(e,t){var n=t[0],i=t[1],r=t[2],t=t[3],a=n*n+i*i+r*r+t*t;return 0<a&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=i*a,e[2]=r*a,e[3]=t*a,e},En=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},An=function(e,t){var n=e[0],i=e[1],r=e[2],e=e[3],a=t[0],o=t[1],s=t[2],t=t[3];return Math.abs(n-a)<=k*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=k*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-s)<=k*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(e-t)<=k*Math.max(1,Math.abs(e),Math.abs(t))},bn=(r=Ue(),tn=Ve(1,0,0),nn=Ve(0,1,0),function(e,t,n){var i=lt(t,n);return i<-.999999?(ut(r,tn,t),Pt(r)<1e-6&&ut(r,nn,t),st(r,r),Ft(e,r,Math.PI),e):.999999<i?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ut(r,t,n),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=1+i,vn(e,e))}),Tn=(rn=xt(),an=xt(),function(e,t,n,i,r,a){return qt(rn,t,r,a),qt(an,n,i,a),qt(e,rn,an,2*a*(1-a)),e}),Sn=(t=new _(9),_!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,o=t,function(e,t,n,i){return o[0]=n[0],o[3]=n[1],o[6]=n[2],o[1]=i[0],o[4]=i[1],o[7]=i[2],o[2]=-t[0],o[5]=-t[1],o[8]=-t[2],vn(e,Zt(e,o))});function wn(){var e=new _(2);return _!=Float32Array&&(e[0]=0,e[1]=0),e}function Rn(e){var t=new _(2);return t[0]=e[0],t[1]=e[1],t}function In(e,t){var n=new _(2);return n[0]=e,n[1]=t,n}function Cn(e,t){return e[0]=t[0],e[1]=t[1],e}function Ln(e,t,n){return e[0]=t,e[1]=n,e}function Pn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Dn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function kn(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function On(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function Mn(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function xn(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Nn(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Fn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Bn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Un(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function jn(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e}function Gn(e,t){var n=t[0]-e[0],t=t[1]-e[1];return Math.hypot(n,t)}function Vn(e,t){var n=t[0]-e[0],t=t[1]-e[1];return n*n+t*t}function Hn(e){var t=e[0],e=e[1];return Math.hypot(t,e)}function Yn(e){var t=e[0],e=e[1];return t*t+e*e}function zn(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Wn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Kn(e,t){var n=t[0],i=t[1],n=n*n+i*i;return 0<n&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e}function qn(e,t){return e[0]*t[0]+e[1]*t[1]}function Qn(e,t,n){t=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=t,e}function Xn(e,t,n,i){var r=t[0],t=t[1];return e[0]=r+i*(n[0]-r),e[1]=t+i*(n[1]-t),e}function Jn(e,t){t=t||1;var n=2*a()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function Zn(e,t,n){var i=t[0],t=t[1];return e[0]=n[0]*i+n[2]*t,e[1]=n[1]*i+n[3]*t,e}function $n(e,t,n){var i=t[0],t=t[1];return e[0]=n[0]*i+n[2]*t+n[4],e[1]=n[1]*i+n[3]*t+n[5],e}function ei(e,t,n){var i=t[0],t=t[1];return e[0]=n[0]*i+n[3]*t+n[6],e[1]=n[1]*i+n[4]*t+n[7],e}function ti(e,t,n){var i=t[0],t=t[1];return e[0]=n[0]*i+n[4]*t+n[12],e[1]=n[1]*i+n[5]*t+n[13],e}function ni(e,t,n,i){var r=t[0]-n[0],t=t[1]-n[1],a=Math.sin(i),i=Math.cos(i);return e[0]=r*i-t*a+n[0],e[1]=r*a+t*i+n[1],e}function ii(e,t){var n=e[0],e=e[1],i=t[0],t=t[1],r=Math.sqrt(n*n+e*e)*Math.sqrt(i*i+t*t);return Math.acos(Math.min(Math.max(r&&(n*i+e*t)/r,-1),1))}function ri(e){return e[0]=0,e[1]=0,e}function ai(e){return"vec2("+e[0]+", "+e[1]+")"}function oi(e,t){return e[0]===t[0]&&e[1]===t[1]}function si(e,t){var n=e[0],e=e[1],i=t[0],t=t[1];return Math.abs(n-i)<=k*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-t)<=k*Math.max(1,Math.abs(e),Math.abs(t))}var c,li=Hn,ui=Dn,ci=kn,hi=On,di=Gn,fi=Vn,pi=Yn,mi=(c=wn(),function(e,t,n,i,r,a){var o,s;for(t=t||2,n=n||0,s=i?Math.min(i*t+n,e.length):e.length,o=n;o<s;o+=t)c[0]=e[o],c[1]=e[o+1],r(c,c,a),e[o]=c[0],e[o+1]=c[1];return e});var gi=function(e,t){return(gi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}gi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _i=function(){return(_i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function yi(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}var t="undefined"!=typeof window,n=t?window.navigator.userAgent:"",vi=t&&!!("getComputedStyle"in window),Ei=/MSIE|Trident|Windows Phone|Edge/.test(n),Ai=t&&!!("addEventListener"in document),bi="width",Ti="height";function Si(e,t){return e.getAttribute(t)||""}function wi(e){return[].slice.call(e)}function Ri(e,t){return void 0===t&&(t="data-"),"loading"in e&&"lazy"===e.getAttribute("loading")||!!e.getAttribute(t+"lazy")}function Ii(e,t,n){Ai?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function Ci(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function Li(e,t){var n=e["client"+t]||e["offset"+t];return parseFloat(n||(n=e,((vi?window.getComputedStyle(n):n.currentStyle)||{})[t.toLowerCase()]))||0}var Pi=[];function Di(e,t){Pi.length||Ii(window,"resize",Oi),e.__PREFIX__=t,Pi.push(e),ki(e)}function ki(e,t){void 0===t&&(t="data-");var n,t=e.__PREFIX__||t,i=parseInt(Si(e,""+t+bi),10)||0,r=parseInt(Si(e,""+t+Ti),10)||0;Si(e,t+"fixed")===Ti?(n=Li(e,"Height")||r,e.style[bi]=i/r*n+"px"):(n=Li(e,"Width")||i,e.style[Ti]=r/i*n+"px")}function Oi(){Pi.forEach(function(e){ki(e)})}var n=function(r){function e(e,t){void 0===t&&(t={});var n,i=r.call(this)||this,t=(i.isReady=!1,i.isPreReady=!1,i.hasDataSize=!1,i.hasLoading=!1,i.isSkip=!1,i.onCheck=function(e){i.clear(),e&&"error"===e.type&&i.onError(i.element),i.hasLoading&&i.checkElement()||(e=!i.hasDataSize&&!i.hasLoading,i.onReady(e))},i.options=_i({prefix:"data-"},t),i.element=e,i.options.prefix);return i.hasDataSize=(n=t,!!e.getAttribute((n=void 0===t?"data-":n)+"width")),i.isSkip=(n=t,!!e.getAttribute((n=void 0===t?"data-":n)+"skip")),i.hasLoading=Ri(e,t),i}i(e,r);var t=e.prototype;return t.check=function(){return this.isSkip||!this.checkElement()?(this.onAlreadyReady(!0),!1):(this.hasDataSize&&Di(this.element,this.options.prefix),(this.hasDataSize||this.hasLoading)&&this.onAlreadyPreReady(),!0)},t.addEvents=function(){var t=this,n=this.element;this.constructor.EVENTS.forEach(function(e){Ii(n,e,t.onCheck)})},t.clear=function(){var t=this,n=this.element;this.constructor.EVENTS.forEach(function(e){Ci(n,e,t.onCheck)}),this.removeAutoSizer()},t.destroy=function(){this.clear(),this.off()},t.removeAutoSizer=function(){var e,t,n;this.hasDataSize&&(t=this.options.prefix,e=this.element,t=t,(n=Pi.indexOf(e))<0||(t=Si(e,t+"fixed"),delete e.__PREFIX__,e.style[t===Ti?bi:Ti]="",Pi.splice(n,1),Pi.length)||Ci(window,"resize",Oi))},t.onError=function(e){this.trigger("error",{element:this.element,target:e})},t.onPreReady=function(){this.isPreReady||(this.isPreReady=!0,this.trigger("preReady",{element:this.element,hasLoading:this.hasLoading,isSkip:this.isSkip}))},t.onReady=function(e){this.isReady||((e=!this.isPreReady&&e)&&(this.isPreReady=!0),this.removeAutoSizer(),this.isReady=!0,this.trigger("ready",{element:this.element,withPreReady:e,hasLoading:this.hasLoading,isSkip:this.isSkip}))},t.onAlreadyError=function(e){var t=this;setTimeout(function(){t.onError(e)})},t.onAlreadyPreReady=function(){var e=this;setTimeout(function(){e.onPreReady()})},t.onAlreadyReady=function(e){var t=this;setTimeout(function(){t.onReady(e)})},e.EVENTS=[],e}(e),Mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.setHasLoading=function(e){this.hasLoading=e},n.check=function(){return this.isSkip?(this.onAlreadyReady(!0),!1):(this.hasDataSize?(Di(this.element,this.options.prefix),this.onAlreadyPreReady()):this.trigger("requestChildren"),!0)},n.checkElement=function(){return!0},n.destroy=function(){this.clear(),this.trigger("requestDestroy"),this.off()},n.onAlreadyPreReady=function(){e.prototype.onAlreadyPreReady.call(this),this.trigger("reqeustReadyChildren")},t.EVENTS=[],t}(n),t=function(n){function e(e){void 0===e&&(e={});var t=n.call(this)||this;return t.readyCount=0,t.preReadyCount=0,t.totalCount=0,t.totalErrorCount=0,t.isPreReadyOver=!0,t.elementInfos=[],t.options=_i({loaders:{},prefix:"data-"},e),t}i(e,n);var t=e.prototype;return t.check=function(e){var a=this,n=this.options.prefix,e=(this.clear(),this.elementInfos=wi(e).map(function(e,r){var t=a.getLoader(e,{prefix:n});return t.check(),t.on("error",function(e){a.onError(r,e.target)}).on("preReady",function(e){var t=a.elementInfos[r],t=(t.hasLoading=e.hasLoading,t.isSkip=e.isSkip,a.checkPreReady(r));a.onPreReadyElement(r),t&&a.onPreReady()}).on("ready",function(e){var t=e.withPreReady,n=e.hasLoading,e=e.isSkip,i=a.elementInfos[r],n=(i.hasLoading=n,i.isSkip=e,t&&a.checkPreReady(r)),i=a.checkReady(r);t&&a.onPreReadyElement(r),a.onReadyElement(r),n&&a.onPreReady(),i&&a.onReady()}),{loader:t,element:e,hasLoading:!1,hasError:!1,isPreReady:!1,isReady:!1,isSkip:!1}}),this.elementInfos.length);return(this.totalCount=e)||setTimeout(function(){a.onPreReady(),a.onReady()}),this},t.getTotalCount=function(){return this.totalCount},t.isPreReady=function(){return this.elementInfos.every(function(e){return e.isPreReady})},t.isReady=function(){return this.elementInfos.every(function(e){return e.isReady})},t.hasError=function(){return 0<this.totalErrorCount},t.clear=function(){this.isPreReadyOver=!1,this.totalCount=0,this.preReadyCount=0,this.readyCount=0,this.totalErrorCount=0,this.elementInfos.forEach(function(e){e.loader&&e.loader.destroy()}),this.elementInfos=[]},t.destroy=function(){this.clear(),this.off()},t.getLoader=function(r,e){var a,t,o,s,l=this,n=r.tagName.toLowerCase(),i=this.options.loaders,u=e.prefix,c=Object.keys(i);return i[n]?new i[n](r,e):(a=new Mi(r,e),t=wi(r.querySelectorAll(c.join(", "))),a.setHasLoading(t.some(function(e){return Ri(e,u)})),o=!1,s=this.clone().on("error",function(e){a.onError(e.target)}).on("ready",function(){a.onReady(o)}),a.on("requestChildren",function(){i=r,e=c,t=l.options.prefix,n=wi(i.querySelectorAll(yi(["["+t+"skip] ["+t+"width]"],e.map(function(e){return["["+t+"skip] "+e,e+"["+t+"skip]","["+t+"width] "+e].join(", ")})).join(", ")));var e,t,n,i=wi(i.querySelectorAll("["+t+"width], "+e.join(", "))).filter(function(e){return-1===n.indexOf(e)});s.check(i).on("preReady",function(e){(o=e.isReady)||a.onPreReady()})}).on("reqeustReadyChildren",function(){s.check(t)}).on("requestDestroy",function(){s.destroy()}),a)},t.clone=function(){return new e(_i({},this.options))},t.checkPreReady=function(e){return this.elementInfos[e].isPreReady=!0,++this.preReadyCount,!(this.preReadyCount<this.totalCount)},t.checkReady=function(e){return this.elementInfos[e].isReady=!0,++this.readyCount,!(this.readyCount<this.totalCount)},t.onError=function(e,t){var n=this.elementInfos[e];n.hasError=!0,this.trigger(new G("error",{element:n.element,index:e,target:t,errorCount:this.getErrorCount(),totalErrorCount:++this.totalErrorCount}))},t.onPreReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new G("preReadyElement",{element:t.element,index:e,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isSkip:t.isSkip}))},t.onPreReady=function(){this.isPreReadyOver=!0,this.trigger(new G("preReady",{readyCount:this.readyCount,totalCount:this.totalCount,isReady:this.isReady(),hasLoading:this.hasLoading()}))},t.onReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new G("readyElement",{index:e,element:t.element,hasError:t.hasError,errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isPreReadyOver:this.isPreReadyOver,isSkip:t.isSkip}))},t.onReady=function(){this.trigger(new G("ready",{errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,totalCount:this.totalCount}))},t.getErrorCount=function(){return this.elementInfos.filter(function(e){return e.hasError}).length},t.hasLoading=function(){return this.elementInfos.some(function(e){return e.hasLoading})},e}(e),xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.checkElement=function(){var e=this.element,t=e.getAttribute("src");if(e.complete){if(t)return e.naturalWidth||this.onAlreadyError(e),!1;this.onAlreadyPreReady()}return this.addEvents(),Ei&&e.setAttribute("src",t),!0},t.EVENTS=["load","error"],t}(n),Ni=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.checkElement=function(){var e=this.element;return!(1<=e.readyState||(e.error?(this.onAlreadyError(e),1):(this.addEvents(),0)))},t.EVENTS=["loadedmetadata","error"],t}(n),n=function(t){function e(e){return t.call(this,_i({loaders:{img:xi,video:Ni}},e=void 0===e?{}:e))||this}return i(e,t),e}(t),Fi=n;function h(e,o,s,l){return new(s=s||Promise)(function(n,t){function i(e){try{a(l.next(e))}catch(e){t(e)}}function r(e){try{a(l.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,r)}a((l=l.apply(e,o||[])).next())})}class I extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,I.prototype),this.name="View360Error",this.code=t}}var Bi,Ui,ji,C={WRONG_TYPE:0,WRONG_OPTION:1,ELEMENT_NOT_FOUND:2,CANVAS_NOT_FOUND:3,WEBGL_NOT_SUPPORTED:4,FAILED_CREATE_CONTEXT_2D:5,PROVIDE_PROJECTION_FIRST:6,FAILED_LINKING_PROGRAM:7,INSUFFICIENT_ARGS:8},L={WRONG_TYPE:(e,t)=>typeof e+` is not a ${t.map(e=>`"${e}"`).join(" or ")}.`,WRONG_OPTION:(e,t)=>`Bad option: given "${e}" for option "${t}".`,ELEMENT_NOT_FOUND:e=>`Element with selector "${e}" not found.`,CANVAS_NOT_FOUND:"The canvas element was not found inside the given root element.",WEBGL_NOT_SUPPORTED:"WebGL is not supported on this browser.",FAILED_CREATE_CONTEXT_2D:"Failed to create canvas 2D context",PROVIDE_PROJECTION_FIRST:'"projection" should be provided before initialization.',FAILED_LINKING_PROGRAM:(e,t)=>`Failed linking WebGL program - "${e}
Shader compile Log: `+t,INSUFFICIENT_ARGS:(e,t)=>`Insufficient arguments: given "${e}" for "${t}".`};const d={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",WHEEL:"wheel",RESIZE:"resize",CONTEXT_MENU:"contextmenu",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_UP:"pointerup",POINTER_CANCEL:"pointercancel",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",KEY_DOWN:"keydown",KEY_UP:"keyup",LOAD:"load",ERROR:"error",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_CREATE_ERROR:"webglcontextcreationerror",CONTEXT_LOST:"webglcontextlost",CONTEXT_RESTORED:"webglcontextrestored",DEVICE_ORIENTATION:"deviceorientation",DEVICE_MOTION:"devicemotion",ORIENTATION_CHANGE:"orientationchange",VIDEO_PLAY:"play",VIDEO_PAUSE:"pause",VIDEO_LOADED_DATA:"loadeddata",VIDEO_VOLUME_CHANGE:"volumechange",VIDEO_TIME_UPDATE:"timeupdate",VIDEO_DURATION_CHANGE:"durationchange",VIDEO_CAN_PLAYTHROUGH:"canplaythrough",TRANSITION_END:"transitionend",XR_END:"end"},f="div",Gi="button",g=((t=Bi=Bi||{})[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT",{GRAB:"grab",GRABBING:"grabbing",NONE:""}),Vi=["LEFT","UP","RIGHT","DOWN"],Hi=((n=Ui=Ui||{})[n.LEFT=37]="LEFT",n[n.UP=38]="UP",n[n.RIGHT=39]="RIGHT",n[n.DOWN=40]="DOWN",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"}),Yi=["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","webkitCancelFullScreen","mozRequestFullScreen","msRequestFullscreen"],zi=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],Wi=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"],Ki=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],y={CONTAINER:"view360-container",CANVAS:"view360-canvas",CTX_LOST:"view360-ctx-lost",IN_VR:"view360-vr-presenting",HOTSPOT_CONTAINER:"view360-hotspots",HOTSPOT:"view360-hotspot",HOTSPOT_VISIBLE:"view360-hotspot-visible",HOTSPOT_FLIP_X:"view360-hotspot-flip-x",HOTSPOT_FLIP_Y:"view360-hotspot-flip-y"},P={READY:"ready",LOAD_START:"loadStart",LOAD:"load",PROJECTION_CHANGE:"projectionChange",RESIZE:"resize",BEFORE_RENDER:"beforeRender",RENDER:"render",INPUT_START:"inputStart",INPUT_END:"inputEnd",VIEW_CHANGE:"viewChange",STATIC_CLICK:"staticClick",VR_START:"vrStart",VR_END:"vrEnd"},qi=e=>1-Math.pow(1-e,3),Qi={CHANGE:"change",ANIMATION_END:"animationEnd"},Xi={UPDATE:"update"},v={INPUT_START:"inputStart",CHANGE:"change",INPUT_END:"inputEnd",ENABLE:"enable",DISABLE:"disable",STATIC_CLICK:"staticClick"},E=Math.PI/180,A=180/Math.PI,Ji=qi,Zi={min:-1/0,max:1/0},$i={min:-90,max:90},er={min:.6,max:10},b=((t=ji=ji||{})[t.ZERO=0]="ZERO",t[t.CW_90=1]="CW_90",t[t.CCW_90=2]="CCW_90",t[t.CW_180=3]="CW_180","view360videotimechange"),tr="http://www.w3.org/2000/svg",nr="immersive-vr",ir=null!=(n=Number.EPSILON)?n:2220446049250313e-31,rr=e=>"string"==typeof e,T=(e,t=f)=>{t=document.createElement(t);return t.classList.add(e),t},ar=(e,t)=>{let n=null;if(rr(e)){t=(t||document).querySelector(e);if(!t)return null;n=t}else(t=e)&&t.nodeType===Node.ELEMENT_NODE&&(n=e);return n},S=(e,t,n)=>Math.max(Math.min(e,n),t),or=(e,t,n)=>e*(1-n)+t*n,sr=(e,t,n)=>{var i=Math.abs(n-t);return e<t?e=n-(t-e)%i:n<e&&(e=t+(e-n)%i),e},w=e=>"object"==typeof e?e:{},lr=(e,t)=>2*Math.atan(Math.tan(.5*e)/t),ur=()=>{if(document)for(const e of zi)if(document[e])return!0;return!1},cr=()=>{let t=!1;try{t=window.isSecureContext&&DeviceMotionEvent&&!!DeviceMotionEvent&&"requestPermission"in DeviceMotionEvent}catch(e){t=!1}return t},hr=(e,t,n,i)=>{m.identity(e);n=S(n,-89.99,89.99);return m.rotateY(e,e,t*E),m.rotateX(e,e,n*E),m.rotateZ(e,e,i*E),e},dr=e=>{var t=e[0],n=e[1],i=e[2],r=e[3],a=t*t+n*n+i*i+r*r,r=t*r-n*i;let o,s;return s=.499995*a<r?(o=Math.PI/2,2*Math.atan2(n,t)):r<-.499995*a?(o=-Math.PI/2,-2*Math.atan2(n,t)):(i=p.fromValues(0,0,1),r=p.fromValues(0,1,0),p.transformQuat(i,i,e),p.transformQuat(r,r,e),a=Math.sqrt(i[0]*i[0]+i[2]*i[2]),o=Math.atan2(-i[1],a),Math.atan2(i[0],i[2])),{pitch:S(o*A,-90,90),yaw:sr(s*A,0,360)}};class fr{get val(){return this._val}get start(){return this._start}get end(){return this._end}get progress(){return this._progress}get activated(){return this._activated}get duration(){return this._duration}set duration(e){this._duration=e}get loop(){return this._loop}set loop(e){this._loop=e}get range(){return this._range}get easing(){return this._easing}set easing(e){this._easing=e}constructor({duration:e=300,loop:t=!1,range:n={min:0,max:1},easing:i=Ji}={}){this._duration=e,this._loop=t,this._range=n,this._easing=i,this._activated=!1,this.reset(0)}update(e){var t,n,i,r,a;return this._activated?(t=this._start,n=this._end,a=this._duration,i=this._val,r=this._loop,e=this._progress+e/a,this._progress=(r?sr:S)(e,0,1),a=this._easing(this._progress),this._val=or(t,n,a),!r&&1<=this._progress&&(this._activated=!1),this._val-i):(this._val=this._end,0)}reset(e){var t=this._range,e=S(e,t.min,t.max);this._start=e,this._end=e,this._val=e,this._progress=0,this._activated=!1}add(e){var t=this._range;this._start=S(this._start+e,t.min,t.max),this._end=S(this._end+e,t.min,t.max),this._val=S(this._val+e,t.min,t.max)}setNewEndByDelta(e){var t=this._range;this._start=this._val,this._end=S(this._end+e,t.min,t.max),this._progress=0,this._activated=!0}setRange(e,t){this._start=S(this._start,e,t),this._end=S(this._end,e,t),this._range={min:e,max:t}}}class pr{get duration(){return this._motion.duration}set duration(e){this._motion.duration=e}get easing(){return this._motion.easing}set easing(e){this._motion.easing=e}constructor(e,t,n,{duration:i=300,easing:r=Ji}={}){this._camera=e,this._motion=new fr({duration:i,easing:r,range:{min:0,max:1}}),this._from=t,this._to=n,this._finishPromise=new Promise(e=>{this._finish=e}),this._motion.setNewEndByDelta(1)}getFinishPromise(){return this._finishPromise}update(e){var t=this._camera,n=this._from,i=this._to,r=this._motion,e=(r.update(e),r.val),r=m.create(),a=or(n.zoom,i.zoom,e);m.slerp(r,n.rotation,i.rotation,e),t.rotate(r,a),1<=e&&this._finish()}}class mr extends e{get aspect(){return this._aspect}get changed(){return this._changed}get yawRange(){return this._initialYawRange}set yawRange(e){this._initialYawRange=e}get pitchRange(){return this._initialPitchRange}set pitchRange(e){this._initialPitchRange=e}get zoomRange(){return this._initialZoomRange}set zoomRange(e){this._initialZoomRange=e}constructor({initialYaw:e,initialPitch:t,initialZoom:n,yawRange:i,pitchRange:r,zoomRange:a,fov:o}){super(),this.yaw=e,this.pitch=t,this.zoom=n,this.rollOffset=0,this.initialYaw=e,this.initialPitch=t,this.initialZoom=n,this.position=p.create(),this.animation=null,this._up=p.fromValues(0,1,0),this._aspect=1,this._initialYawRange=i,this._initialPitchRange=r,this._initialZoomRange=a,this._yawRange=i,this._pitchRange=r,this._zoomRange=a,this.quaternion=m.create(),this._updateQuaternion(),this.viewMatrix=l.create(),this.projectionMatrix=l.create(),this.fov=o,this._maxRenderHeight=-1}destroy(){this.off()}resize(e,t){var n=this._aspect;this._aspect=e/t,this._aspect!==n&&this.updateMatrix()}lookAt({yaw:e=this.yaw,pitch:t=this.pitch,zoom:n=this.zoom}){var i=m.clone(this.quaternion),r=this.zoom,e=(this.yaw=sr(e,0,360),this.pitch=S(t,-90,90),this.zoom=n,this._updateQuaternion(),Math.abs(n-r));(!m.equals(this.quaternion,i)||e>=10*ir)&&this.updateMatrix()}rotate(e,t=this.zoom){var e=m.normalize(m.create(),e),n=m.equals(this.quaternion,e),i=(m.copy(this.quaternion,e),this.zoom),{yaw:e,pitch:r}=dr(e),e=(this.yaw=e,this.pitch=r,this.zoom=t,Math.abs(t-i));(!n||e>=10*ir)&&this.updateMatrix()}animateTo({yaw:i=this.yaw,pitch:r=this.pitch,zoom:a=this.zoom,duration:o=0,easing:s=Ji}={}){return h(this,void 0,void 0,function*(){if(this.yaw!==i||this.pitch!==r||this.zoom!==a){var e={rotation:m.clone(this.quaternion),zoom:this.zoom},t={rotation:hr(m.create(),i,r,this.rollOffset),zoom:a};const n=new pr(this,e,t,{duration:o,easing:s});e=n.getFinishPromise();return this.animation=n,e.then(()=>{this.animation=null,this.trigger(Qi.ANIMATION_END,{animation:n})}),e}})}restrictYawRange(e,t){this._yawRange={min:e,max:t}}restrictPitchRange(e,t){this._pitchRange={min:e,max:t}}restrictZoomRange(e,t){this._zoomRange={min:e,max:t}}restrictRenderHeight(e){this._maxRenderHeight=e}resetRange(){this._yawRange=this._initialYawRange,this._pitchRange=this._initialPitchRange,this._zoomRange=this._initialZoomRange,this._maxRenderHeight=-1}getYawRange(e){var t=this._yawRange,n=this._maxRenderHeight;if(!t)return Zi;var i,e=.5*this.getHorizontalFov(e);let r=t.min,a=t.max;return 0<n&&(i=lr(e*E,this._aspect),n=.5*n,i=Math.tan(i),n=Math.sqrt((1+n*n)/(1+i*i)),i=Math.atan(Math.tan(e*E)*n)*A,r=t.min+i,a=t.max-i),r>a&&(r=0,a=0),{min:r,max:a}}getPitchRange(e){var t=this._pitchRange,n=this._maxRenderHeight;if(!t)return $i;let i=t.min,r=t.max;return 0<n&&(n=.5*this.getVerticalFov(e),i=t.min+n,r=t.max-n),i>r&&(i=0,r=0),{min:Math.max(i,-90),max:Math.min(r,90)}}getZoomRange(){var e=null!=(e=this._zoomRange)?e:er,t=this.getHorizontalFov(e.max),e=this.getHorizontalFov(e.min),n=this.getHorizontalFov(this.zoom);return{min:Math.max(t,1),max:Math.min(e,180),current:n}}getHorizontalFov(e=this.zoom){return this._getZoomedHorizontalFov(e)*A}getVerticalFov(e=this.zoom){var t=this._aspect,e=this._getZoomedHorizontalFov(e);return lr(e,t)*A}fovToZoom(e){var t=this.fov;return Math.tan(E*t*.5)/Math.tan(E*e*.5)}updateMatrix(){var e=this._up,t=this._aspect,n=this.viewMatrix,i=this.projectionMatrix,r=this.position,a=this.quaternion,o=p.create(),s=p.fromValues(0,0,-1),e=(p.transformQuat(s,s,a),p.transformQuat(o,e,a),this._getZoomedHorizontalFov()),a=lr(e,t);l.lookAt(n,r,s,o),l.perspective(i,a,t,.1,100),this._changed=!0}onFrameRender(){this._changed=!1}_updateQuaternion(){hr(this.quaternion,this.yaw,this.pitch,this.rollOffset)}_getZoomedHorizontalFov(e=this.zoom){return 2*Math.atan(Math.tan(E*this.fov*.5)/e)}}class gr extends e{constructor(){super(),this._onMouseDown=e=>{var t=this._el;t&&e.button===Bi.LEFT&&(e.preventDefault(),(t.focus?t:window).focus(),this._prevPos[0]=e.clientX,this._prevPos[1]=e.clientY,window.addEventListener(d.MOUSE_MOVE,this._onMouseMove,!1),window.addEventListener(d.MOUSE_UP,this._onMouseUp,!1),this.trigger(v.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!1}))},this._onMouseMove=e=>{e.preventDefault();var t=e.clientX,e=e.clientY,n=this._prevPos,i=t-n[0],r=e-n[1];this.trigger(v.CHANGE,{delta:{x:i,y:r},isTouch:!1,isKeyboard:!1}),n[0]=t,n[1]=e},this._onMouseUp=()=>{this._prevPos[0]=0,this._prevPos[1]=0,window.removeEventListener(d.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(d.MOUSE_UP,this._onMouseUp,!1),this.trigger(v.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1})},this._el=null,this._prevPos=[0,0]}enable(e){this._el||(e.addEventListener(d.MOUSE_DOWN,this._onMouseDown),this._el=e)}disable(){var e=this._el;e&&(e.removeEventListener(d.MOUSE_DOWN,this._onMouseDown),window.removeEventListener(d.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(d.MOUSE_UP,this._onMouseUp,!1),this._el=null)}}class _r extends e{get scrollable(){return this._scrollable}set scrollable(e){this._scrollable=e}constructor(){super(),this._onTouchStart=e=>{var t;1<e.touches.length||this._scrolling||(t=e.touches[0],this._isFirstTouch=!0,this._prevPos[0]=t.clientX,this._prevPos[1]=t.clientY,this.trigger(v.INPUT_START,{srcEvent:e,isTouch:!0,isKeyboard:!1}))},this._onTouchMove=e=>{if(!(1<e.touches.length||this._scrolling)){var t=e.touches[0],n=this._scrollable,i=this._prevPos,r=t.clientX,t=t.clientY,a=r-i[0],o=t-i[1];if(this._isFirstTouch){if(n&&!ur()&&Math.abs(o)>Math.abs(a))return void(this._scrolling=!0);this._isFirstTouch=!1}!1!==e.cancelable&&e.preventDefault(),this.trigger(v.CHANGE,{delta:{x:a,y:o},isTouch:!0,isKeyboard:!1}),i[0]=r,i[1]=t}},this._onTouchEnd=e=>{var t,n;0===e.touches.length&&(t=e.touches[0],n=this._prevPos,t?(n[0]=t.clientX,n[1]=t.clientY):(n[0]=0,n[1]=0,this.trigger(v.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:this._scrolling})),!1!==e.cancelable&&e.preventDefault(),this._scrolling=!1)},this._el=null,this._prevPos=[0,0],this._isFirstTouch=!1,this._scrolling=!1,this._scrollable=!1}enable(e){this._el||(e.addEventListener(d.TOUCH_START,this._onTouchStart,{passive:!1}),e.addEventListener(d.TOUCH_MOVE,this._onTouchMove,{passive:!1}),e.addEventListener(d.TOUCH_END,this._onTouchEnd),this._el=e)}disable(){var e=this._el;e&&(e.removeEventListener(d.TOUCH_START,this._onTouchStart),e.removeEventListener(d.TOUCH_MOVE,this._onTouchMove),e.removeEventListener(d.TOUCH_END,this._onTouchEnd),this._el=null)}}class yr extends e{get active(){var e=this._pressed;return e.LEFT||e.UP||e.RIGHT||e.DOWN}constructor(){super(),this._onKeyDown=e=>{var t;e.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD||(this._updateKeyPress(e,!0),(t=this._getPressedKeyCount())<=0)||(e.preventDefault(),1!==t)||e.repeat||this.trigger(v.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!0})},this._onKeyUp=e=>{e.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD||(this._updateKeyPress(e,!1),0<this._getPressedKeyCount())||this.trigger(v.INPUT_END,{isTouch:!1,isKeyboard:!0,scrolling:!1})},this._el=null,this._clearPressedKeys()}enable(e){this._el||(e.addEventListener(d.KEY_DOWN,this._onKeyDown),e.addEventListener(d.KEY_UP,this._onKeyUp),this._el=e,this._clearPressedKeys())}disable(){var e=this._el;e&&(e.removeEventListener(d.KEY_DOWN,this._onKeyDown),e.removeEventListener(d.KEY_UP,this._onKeyUp),this._el=null,this._clearPressedKeys())}update(){var e=this._getDeltaByPressedKeys();0===e.x&&0===e.y||this.trigger(v.CHANGE,{delta:e,isTouch:!1,isKeyboard:!0})}_clearPressedKeys(){this._pressed=Vi.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:!1}),{})}_updateKeyPress(e,t){var n=this._pressed,e=null!=e.keyCode?Ui[e.keyCode]:Hi[e.key];e&&(n[e]=t)}_getPressedKeyCount(){return Vi.filter(e=>this._pressed[e]).length}_getDeltaByPressedKeys(){var e=this._pressed;let t=0,n=0;return e.LEFT&&(t+=1),e.RIGHT&&--t,e.UP&&(n+=1),e.DOWN&&--n,{x:t,y:n}}}class vr extends e{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._keyboardInput.active||this._xMotion.activated||this._yMotion.activated}get yaw(){return this._xMotion}get pitch(){return this._yMotion}get scrollable(){return this._touchInput.scrollable}set scrollable(e){this._touchInput.scrollable=e}get pointerScale(){return this._pointerScale}set pointerScale(e){this._pointerScale=e}get keyboardScale(){return this._keyboardScale}set keyboardScale(e){this._keyboardScale=e}get duration(){return this._duration}set duration(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}get easing(){return this._easing}set easing(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}get disablePitch(){return this._disablePitch}set disablePitch(e){this._disablePitch=e}get disableYaw(){return this._disableYaw}set disableYaw(e){this._disableYaw=e}get disableKeyboard(){return this._disableKeyboard}set disableKeyboard(e){this._disableKeyboard=e}constructor(e,t,{duration:n=300,easing:i=Ji,pointerScale:r=[1,1],keyboardScale:a=[1,1],disablePitch:o=!1,disableYaw:s=!1,disableKeyboard:l=!1}={}){super(),this._onInputStart=e=>{this._changedWhileDragging=!1,this.trigger(v.INPUT_START,Object.assign(Object.assign({},e),{inputType:"rotate"}))},this._onChange=e=>{var t=e.delta,n=1/this._zoomScale,i=this._screenScale,r=this._keyboardScale,a=this._pointerScale;let o;o=e.isKeyboard?[r[0]*n,r[1]*n]:[a[0]*i[0]*n,a[1]*i[1]*n];e=t.x*o[0],r=t.y*o[1];this._xMotion.setNewEndByDelta(e),this._yMotion.setNewEndByDelta(r),this._changedWhileDragging=!0},this._onInputEnd=e=>{this.trigger(v.INPUT_END,Object.assign(Object.assign({},e),{inputType:"rotate"})),this._changedWhileDragging||e.isKeyboard||e.scrolling||this.trigger(v.STATIC_CLICK,{isTouch:e.isTouch}),this._changedWhileDragging=!1},this._controlEl=e,this._pointerScale=r,this._keyboardScale=a,this._duration=n,this._easing=i,this._disablePitch=o,this._disableYaw=s,this._disableKeyboard=l,this._enableBlocked=t,this._mouseInput=new gr,this._touchInput=new _r,this._keyboardInput=new yr,this._xMotion=new fr({duration:n,range:Zi,easing:i}),this._yMotion=new fr({duration:n,range:$i,easing:i}),this._screenScale=[1,1],this._zoomScale=1,this._enabled=!1,this._changedWhileDragging=!1,this._bindInputs()}destroy(){this.disable(),this._mouseInput.off(),this._touchInput.off(),this._keyboardInput.off(),this.off(),this._changedWhileDragging=!1}update(e){var t,n,i;this._enabled&&(t=this._xMotion,n=this._yMotion,i=this._keyboardInput,this._disableKeyboard||i.update(),this._disablePitch||n.update(e),this._disableYaw||t.update(e))}updateRange(e,t){var n=e.getYawRange(t),e=e.getPitchRange(t);this._xMotion.setRange(n.min,n.max),this._yMotion.setRange(e.min,e.max)}setZoomScale(e){this._zoomScale=e}resize(e,t,n,i){t=lr(e*E,t)*A;this._screenScale[0]=e/n,this._screenScale[1]=t/i}enable(){var e;this._enabled||(e=this._controlEl,this._mouseInput.enable(e),this._touchInput.enable(e),this._keyboardInput.enable(e),this._enabled=!0,this._enableBlocked=!1,this.trigger(v.ENABLE,{control:this,updateCursor:!0}))}disable(){this._enabled&&(this._mouseInput.disable(),this._touchInput.disable(),this._keyboardInput.disable(),this._enabled=!1,this.trigger(v.DISABLE,{updateCursor:!0}))}sync(e){this.updateRange(e,e.zoom),this._xMotion.reset(e.yaw),this._yMotion.reset(e.pitch)}_bindInputs(){var e=this._mouseInput,t=this._touchInput,n=this._keyboardInput;e.on(v.INPUT_START,this._onInputStart),e.on(v.CHANGE,this._onChange),e.on(v.INPUT_END,this._onInputEnd),t.on(v.INPUT_START,this._onInputStart),t.on(v.CHANGE,this._onChange),t.on(v.INPUT_END,this._onInputEnd),n.on(v.INPUT_START,this._onInputStart),n.on(v.CHANGE,this._onChange),n.on(v.INPUT_END,this._onInputEnd)}}class Er extends e{get scrollable(){return this._scrollable}set scrollable(e){this._scrollable=e}constructor(){super(),this._onWheel=e=>{var t=this._scrollable;0===e.deltaY||t||(e.preventDefault(),e.stopPropagation(),this._inputTimer<0?this.trigger(v.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!1}):this._clearTimer(),t=this._baseScale*e.deltaY,this.trigger(v.CHANGE,{delta:t,isTouch:!1,isKeyboard:!1}),this._inputTimer=window.setTimeout(()=>{this.trigger(v.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1}),this._inputTimer=-1},300))},this._el=null,this._baseScale=.04,this._scrollable=!1,this._inputTimer=-1}enable(e){this._el||(e.addEventListener(d.WHEEL,this._onWheel,{passive:!1,capture:!1}),this._el=e,this._clearTimer())}disable(){var e=this._el;e&&(e.removeEventListener(d.WHEEL,this._onWheel,!1),this._el=null,this._clearTimer())}_clearTimer(){window.clearTimeout(this._inputTimer),this._inputTimer=-1}}class Ar extends e{constructor(){super(),this._onTouchMove=e=>{var t,n=e.touches;2===n.length&&e.cancelable&&(e.preventDefault(),e.stopPropagation(),t=this._prevDistance,n=[n[0].pageX-n[1].pageX,n[0].pageY-n[1].pageY],n=Math.sqrt(n[0]*n[0]+n[1]*n[1])*this._baseScale,t=this._isFirstTouch?0:n-t,this._isFirstTouch&&this.trigger(v.INPUT_START,{srcEvent:e,isTouch:!0,isKeyboard:!1}),this._prevDistance=n,this._isFirstTouch=!1,this.trigger(v.CHANGE,{delta:t,isTouch:!0,isKeyboard:!1}))},this._onTouchEnd=e=>{0===e.touches.length&&(this._isFirstTouch||this.trigger(v.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:!1}),this._prevDistance=-1,this._isFirstTouch=!0)},this._el=null,this._baseScale=-.2,this._prevDistance=-1,this._isFirstTouch=!0}enable(e){this._el||(e.addEventListener(d.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(d.TOUCH_END,this._onTouchEnd),this._el=e,this._prevDistance=-1,this._isFirstTouch=!0)}disable(){var e=this._el;e&&(e.removeEventListener(d.TOUCH_MOVE,this._onTouchMove,!1),e.removeEventListener(d.TOUCH_END,this._onTouchEnd),this._el=null)}}class br extends e{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._motion.activated}get zoom(){return this._motion.val}get scrollable(){return this._wheelInput.scrollable}set scrollable(e){this._wheelInput.scrollable=e}get range(){return this._motion.range}get scale(){return this._scale}set scale(e){this._scale=e}get duration(){return this._motion.duration}get easing(){return this._motion.easing}constructor(e,t,{scale:n=1,duration:i=300,easing:r=Ji}={}){super(),this._onInputStart=e=>{this.trigger(v.INPUT_START,Object.assign(Object.assign({},e),{inputType:"zoom"}))},this._onChange=({delta:e})=>{var t=this._scale;this._motion.setNewEndByDelta(e*t)},this._onInputEnd=e=>{this.trigger(v.INPUT_END,Object.assign(Object.assign({},e),{inputType:"zoom"}))},this._scale=n,this._controlEl=e,this._enableBlocked=t,this._wheelInput=new Er,this._pinchInput=new Ar,this._motion=new fr({duration:i,easing:r,range:Zi}),this._enabled=!1,this._bindInputs()}destroy(){this.disable(),this._wheelInput.off(),this._pinchInput.off(),this.off()}update(e){this._enabled&&this._motion.update(e)}enable(){var e;this._enabled||(e=this._controlEl,this._wheelInput.enable(e),this._pinchInput.enable(e),this._enabled=!0,this._enableBlocked=!1,this.trigger(v.ENABLE,{control:this,updateCursor:!1}))}disable(){this._enabled&&(this._wheelInput.disable(),this._pinchInput.disable(),this._enabled=!1,this.trigger(v.DISABLE,{updateCursor:!1}))}sync(e){var t=this._motion,e=e.getZoomRange();t.setRange(e.min,e.max),t.reset(e.current)}_bindInputs(){var e=this._wheelInput,t=this._pinchInput;e.on(v.INPUT_START,this._onInputStart),e.on(v.CHANGE,this._onChange),e.on(v.INPUT_END,this._onInputEnd),t.on(v.INPUT_START,this._onInputStart),t.on(v.CHANGE,this._onChange),t.on(v.INPUT_END,this._onInputEnd)}}const R={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};R[R.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},R[R.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},R[R.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]};class Tr extends e{get enabled(){return this._enabled}get orientationUpdated(){return this._orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(e){this._ignoreRoll=e}constructor(){super(),this._onDeviceOrientation=e=>{var t=this._orientation,{alpha:e,beta:n,gamma:i}=e;null!=e&&null!=n&&null!=i&&(t.alpha=e,t.beta=n,t.gamma=i,this._orientationUpdated=!0,this._needsCalibrate)&&(this._needsCalibrate=!1,this._calibrateSensor())},this._updateScreenOrientation=()=>{window.screen&&window.screen.orientation&&void 0!==window.screen.orientation.angle?this._screenOrientation=screen.orientation.angle:void 0!==window.orientation?this._screenOrientation=0<=window.orientation?window.orientation:360+window.orientation:this._screenOrientation=0},this.quaternion=m.create(),this._orientation={alpha:0,beta:90,gamma:0},this._yawOrigin=0,this._yawOffset=0,this._orientationUpdated=!1,this._screenOrientation=0,this._needsCalibrate=!0,this._enabled=!1}enable(){this._enabled||(window.addEventListener(d.DEVICE_ORIENTATION,this._onDeviceOrientation),window.addEventListener(d.ORIENTATION_CHANGE,this._updateScreenOrientation),this._updateScreenOrientation(),this._orientationUpdated=!1,this._needsCalibrate=!0,this._enabled=!0)}disable(){this._enabled&&(window.removeEventListener(d.DEVICE_ORIENTATION,this._onDeviceOrientation),window.removeEventListener(d.ORIENTATION_CHANGE,this._updateScreenOrientation),this._enabled=!1)}update(){this._updateRotation(),this._orientationUpdated=!1}collectDelta(){var e;return this._orientationUpdated?(e=m.clone(this.quaternion),this._updateRotation(),this._orientationUpdated=!1,this._toEulerDelta(e,this.quaternion)):{pitch:0,yaw:0}}setInitialRotation(e){this._yawOrigin=e}_calibrateSensor(){var e=this._yawOrigin,t=this.quaternion,t=(this._yawOffset=0,this._updateRotation(),dr(t))["yaw"];this._yawOffset=t-e,this._updateRotation(),this._needsCalibrate=!1}_updateRotation(){var e=this.quaternion,{alpha:t,beta:n,gamma:i}=this._orientation,t=(m.identity(e),m.rotateY(e,e,(t-this._yawOffset)*E),m.rotateX(e,e,n*E),m.rotateZ(e,e,-i*E),m.create()),n=.5*-this._screenOrientation*E,i=m.fromValues(-Math.sqrt(.5),0,0,Math.sqrt(.5));m.set(t,0,Math.sin(n),0,Math.cos(n)),m.multiply(e,e,t),m.multiply(e,e,i),m.normalize(e,e)}_toEulerDelta(e,t){return{yaw:this._getDeltaYaw(e,t),pitch:this._getDeltaPitch(e,t)}}_getDeltaYaw(e,t){var n=this._getRotationDelta(e,t,R.YAW_DELTA_BY_YAW);return this._getRotationDelta(e,t,R.YAW_DELTA_BY_ROLL)*Math.sin(this._extractPitchFromQuat(t))+n}_getDeltaPitch(e,t){return this._getRotationDelta(e,t,R.PITCH_DELTA)}_getRotationDelta(e,t,n){var i=p.fromValues(R[n].targetAxis[0],R[n].targetAxis[1],R[n].targetAxis[2]),r=R[n].meshPoint,e=m.clone(e),t=m.clone(t),a=(m.normalize(e,e),m.normalize(t,t),p.fromValues(0,0,1)),o=p.fromValues(0,0,1),i=(p.transformQuat(a,a,e),p.transformQuat(o,o,t),p.transformQuat(i,i,t),p.dot(i,p.cross(p.create(),a,o))),i=0<i?1:-1,s=p.fromValues(r[0],r[1],r[2]);let l;l=n!==R.YAW_DELTA_BY_YAW?p.fromValues(0,i,0):p.fromValues(i,0,0),p.transformQuat(s,s,t),p.transformQuat(l,l,t);var u=l,c=p.create(),s=(p.cross(c,s,u),p.normalize(c,c),c[0]),u=c[1],h=c[2],o=p.fromValues(r[0],r[1],r[2]),t=(p.transformQuat(o,o,t),a=p.fromValues(r[0],r[1],r[2]),p.transformQuat(a,a,e),Math.abs(a[0]*s+a[1]*u+a[2]*h)),r=p.create();p.subtract(r,a,p.scale(p.create(),c,t));let d=(r[0]*o[0]+r[1]*o[1]+r[2]*o[2])/(p.length(r)*p.length(o));1<d&&(d=1);e=Math.acos(d),a=p.cross(p.create(),o,r),t=s*a[0]+u*a[1]+h*a[2];let f;return e*(f=n!==R.YAW_DELTA_BY_YAW?0<t?1:-1:t<0?1:-1)*i*A}_extractPitchFromQuat(e){var t=p.fromValues(0,0,1);return p.transformQuat(t,t,e),-1*Math.atan2(t[1],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[2],2)))}}class D extends e{get enabled(){return this._input.enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._input.enabled&&this._input.orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(e){this._ignoreRoll=e}static isAvailable(){return h(this,void 0,void 0,function*(){try{if(!DeviceMotionEvent)return!1}catch(e){return!1}let n;return Promise.race([new Promise(t=>{n=e=>{t(e.rotationRate&&null!=e.rotationRate.alpha)},window.addEventListener(d.DEVICE_MOTION,n)}),new Promise(e=>{setTimeout(()=>e(!1),1e3)})]).then(e=>(window.removeEventListener(d.DEVICE_MOTION,n),e))})}static requestSensorPermission(){return h(this,void 0,void 0,function*(){return!cr()||DeviceMotionEvent.requestPermission().then(e=>"granted"===e).catch(()=>!1)})}constructor(e,{ignoreRoll:t=!0}={}){super(),this._enableBlocked=e,this._ignoreRoll=t,this._input=new Tr}destroy(){this.disable(),this._input.off(),this.off()}update(e,t,n,i){this._ignoreRoll?this._updateYawPitch(e,t,n,i):this._updateQuaternion(e,i)}enable(){this._input.enabled||(this._input.enable(),this._enableBlocked=!1,this.trigger(v.ENABLE,{control:this,updateCursor:!1}))}disable(){this._input.enabled&&(this._input.disable(),this.trigger(v.DISABLE,{updateCursor:!1}))}sync(){}_updateYawPitch(e,t,n,i){var r,a=this._input;a.enabled&&({yaw:a,pitch:r}=a.collectDelta(),t.add(a),n.add(r),e.lookAt({yaw:t.val,pitch:n.val,zoom:i}))}_updateQuaternion(e,t){var n=this._input;n.enabled&&(n.update(),e.rotate(n.quaternion,t))}}class Sr{get useGrabCursor(){return this._useGrabCursor}set useGrabCursor(e){e!==this._useGrabCursor&&((this._useGrabCursor=e)&&this._enabled?this._setCursor(g.GRAB):e||this._setCursor(g.NONE))}get disableContextMenu(){return this._disableContextMenu}set disableContextMenu(e){e!==this._disableContextMenu&&((this._disableContextMenu=e)&&this._enabled?this._blockContextMenu():e||this._restoreContextMenu())}get scrollable(){return this._rotateControl.scrollable}set scrollable(e){this._rotateControl.scrollable=e}get wheelScrollable(){return this._zoomControl.scrollable}set wheelScrollable(e){this._zoomControl.scrollable=e}get ignoreZoomScale(){return this._ignoreZoomScale}set ignoreZoomScale(e){this._ignoreZoomScale=e}get enabled(){return this._enabled}get rotate(){return this._rotateControl}get zoom(){return this._zoomControl}get gyro(){return this._gyroControl}get animating(){return this._rotateControl.animating||this._zoomControl.animating||this._gyroControl.animating}constructor(e,t,{useGrabCursor:n,scrollable:i,wheelScrollable:r,disableContextMenu:a,rotate:o,zoom:s,gyro:l}){this._preventContextMenu=e=>{e.preventDefault()},this._onInputStart=e=>{this._useGrabCursor&&!e.isKeyboard&&this._setCursor(g.GRABBING)},this._onInputEnd=e=>{this._useGrabCursor&&!e.isKeyboard&&this._setCursor(g.GRAB)},this._onEnable=({control:e,updateCursor:t})=>{t&&this._useGrabCursor&&this._setCursor(g.GRAB),e.sync(this._camera)},this._onDisable=({updateCursor:e})=>{e&&this._setCursor(g.NONE)},this._onCameraAnimationEnd=({animation:e})=>{e.getFinishPromise().then(()=>{this.sync()})},this._useGrabCursor=n,this._disableContextMenu=a,this._camera=t,this._controlEl=e,this._ignoreZoomScale=!1,this._enabled=!1,this._rotateControl=new vr(e,!o,w(o)),this._zoomControl=new br(e,!s,w(s)),this._gyroControl=new D(!l,w(l)),this._rotateControl.scrollable=i,this._zoomControl.scrollable=r,this._bindEvents()}destroy(){this.disable(),this._rotateControl.destroy(),this._zoomControl.destroy(),this._setCursor(g.NONE)}resize(e,t){var n=this._camera;this._rotateControl.resize(n.fov,n.aspect,e,t)}enable(){return h(this,void 0,void 0,function*(){this._enabled||(this._rotateControl.enableBlocked||this._rotateControl.enable(),this._zoomControl.enableBlocked||this._zoomControl.enable(),this._gyroControl.enableBlocked||(yield D.isAvailable())&&this._gyroControl.enable(),this.sync(),this._disableContextMenu&&this._blockContextMenu(),this._enabled=!0)})}disable(){this._enabled&&(this._rotateControl.disable(),this._zoomControl.disable(),this._gyroControl.disable(),this._restoreContextMenu(),this._enabled=!1)}update(e){var t=this._camera,n=this._rotateControl,i=this._zoomControl,r=this._gyroControl,a=(i.update(e),a=t.fov,i=i.zoom,Math.tan(E*a*.5)/Math.tan(E*i*.5)),i=this._ignoreZoomScale?1:Math.max(a,1),i=(n.setZoomScale(i),n.updateRange(t,a),n.update(e),n.yaw),e=n.pitch;r.enabled?r.update(t,i,e,a):t.lookAt({yaw:i.val,pitch:e.val,zoom:a})}sync(){var e=this._camera;this._zoomControl.sync(e),this._rotateControl.sync(e)}_blockContextMenu(){this._controlEl.addEventListener(d.CONTEXT_MENU,this._preventContextMenu)}_restoreContextMenu(){this._controlEl.removeEventListener(d.CONTEXT_MENU,this._preventContextMenu)}_setCursor(e){!this._useGrabCursor&&e!==g.NONE||(this._controlEl.style.cursor=e)}_bindEvents(){var e=this._rotateControl,t=this._zoomControl;e.on(v.INPUT_START,this._onInputStart),e.on(v.INPUT_END,this._onInputEnd),e.on(v.ENABLE,this._onEnable),e.on(v.DISABLE,this._onDisable),t.on(v.ENABLE,this._onEnable),t.on(v.DISABLE,this._onDisable),this._camera.on(Qi.ANIMATION_END,this._onCameraAnimationEnd)}}class wr{constructor({width:e,height:t,flipY:n}){this.width=e,this.height=t,this.flipY=n,this.wrapS=WebGLRenderingContext.CLAMP_TO_EDGE,this.wrapT=WebGLRenderingContext.CLAMP_TO_EDGE}destroy(){}isVideo(){return!1}isCube(){return!1}}class Rr extends wr{constructor({source:e,width:t,height:n,flipY:i}){super({width:t,height:n,flipY:i}),this.source=e}}class Ir extends Rr{destroy(){var e=this.source;e.pause(),e.removeAttribute("src"),e.load()}isVideo(){return!0}isPaused(){var e=this.source;return e.paused||e.ended||e.readyState<=2}hasAudio(){var e=this.source;return e.audioTracks?0<e.audioTracks.length:null!=e.webkitAudioDecodedByteCount?0<e.webkitAudioDecodedByteCount:null==e.mozHasAudio||e.mozHasAudio}}class Cr extends wr{constructor({sources:e,width:t,height:n,flipY:i}){super({width:t,height:n,flipY:i}),this.sources=e}isCube(){return!0}}class Lr{constructor(){this._loadChecker=new Fi}load(t,n){return h(this,void 0,void 0,function*(){var e;return n?this.loadVideo(t,w(n)):Array.isArray(t)&&1<t.length?this.loadCubeImage(t):(e=Array.isArray(t)?t[0]:t,this.loadImage(e))})}loadImage(e){return h(this,void 0,void 0,function*(){const n=this._toImageArray(e);return this._load(n,e=>{var t=n[0];e(new Rr({source:t,width:t.naturalWidth,height:t.naturalHeight,flipY:!0}))})})}loadCubeImage(e){return h(this,void 0,void 0,function*(){const t=this._toImageArray(e);return this._load(t,e=>{e(new Cr({sources:t,width:t[0].naturalWidth,height:t[0].naturalHeight,flipY:!1}))})})}loadVideo(e,t){return h(this,void 0,void 0,function*(){const i=Object.assign({autoplay:!0,muted:!0,loop:!1,volume:1},t),r=this._toVideoElement(e,i);return this._load([r],e=>{var{autoplay:t,muted:n}=i;r.currentTime=0,t&&n&&r.play().catch(()=>{}),e(new Ir({source:r,width:r.videoWidth,height:r.videoHeight,flipY:!0}))})})}_load(n,i){const r=this._loadChecker;return new Promise((t,e)=>{r.once("ready",e=>{0<e.errorCount||i(t)}),r.once("error",e),r.check(n)})}_toImageArray(e){return(Array.isArray(e)?e:[e]).map(e=>{var t;return rr(e)?((t=new Image).crossOrigin="anonymous",t.src=e,t):e})}_toVideoElement(e,{muted:t,loop:n,volume:i}){if(e instanceof HTMLVideoElement)return e;const r=document.createElement("video");return r.crossOrigin="anonymous",r.playsInline=!0,r.setAttribute("webkit-playsinline",""),r.muted=t,r.volume=i,r.loop=n,Array.isArray(e)?e.forEach(e=>this._appendSourceElement(r,e)):this._appendSourceElement(r,e),0<r.querySelectorAll("source").length&&r.readyState<1&&r.load(),r}_appendSourceElement(e,t){if(t instanceof HTMLSourceElement)return t;var n=document.createElement("source");n.src=t,e.appendChild(n)}}class Pr{constructor(e,t=window){this.maxDeltaTime=e,this._context=t,this._rafId=-1,this._rafTimer=-1,this._lastUpdateTime=-1}start(r){const a=this._context;if(a&&r&&!(0<=this._rafId||0<=this._rafTimer)){const o=(e,t)=>{var n=Date.now(),i=Math.min(n-this._lastUpdateTime,1e3*this.maxDeltaTime);r(i,t),this._lastUpdateTime=n,this._rafId=a.requestAnimationFrame(o)};this._lastUpdateTime=Date.now(),this._rafId=a.requestAnimationFrame(o)}}stop(){0<=this._rafId&&this._context.cancelAnimationFrame(this._rafId),0<=this._rafTimer&&clearTimeout(this._rafTimer),this._rafId=-1,this._rafTimer=-1}changeContext(e){this.stop(),this._context=e}}class Dr{get useResizeObserver(){return this._useResizeObserver}get enabled(){return this._enabled}constructor(e,t){this._skipFirstResize=(()=>{let e=!0;return()=>{e?e=!1:this._onResize()}})(),this._useResizeObserver=e,this._enabled=!1,this._resizeObserver=null,this._onResize=t}enable(e){var t;return this._enabled&&this.disable(),this._useResizeObserver&&window.ResizeObserver?(t=0!==(t=e.getBoundingClientRect()).width||0!==t.height,(t=new ResizeObserver(t?this._skipFirstResize:this._onResize)).observe(e),this._resizeObserver=t):window.addEventListener(d.RESIZE,this._onResize),this._enabled=!0,this}disable(){var e;return this._enabled&&((e=this._resizeObserver)?(e.disconnect(),this._resizeObserver=null):window.removeEventListener(d.RESIZE,this._onResize),this._enabled=!1),this}}class kr{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get playing(){return this._enabled&&!this._interrupted}get delay(){return this._delay}set delay(e){this._delay=e}get delayOnMouseLeave(){return this._delayOnMouseLeave}set delayOnMouseLeave(e){this._delayOnMouseLeave=e}get speed(){return this._speed}set speed(e){this._speed=e}get pauseOnHover(){return this._pauseOnHover}set pauseOnHover(e){this._pauseOnHover=e}get canInterrupt(){return this._canInterrupt}set canInterrupt(e){this._canInterrupt=e}get disableOnInterrupt(){return this._disableOnInterrupt}set disableOnInterrupt(e){this._disableOnInterrupt=e}constructor(e,t,n){this._onInputStart=()=>{this._canInterrupt&&(this._interrupted=!0,this._clearTimeout())},this._onInputEnd=()=>{this._setUninterruptedAfterDelay(this._delay)},this._onGyroEnable=()=>{this.disable()},this._onMouseEnter=()=>{this._pauseOnHover&&(this._interrupted=!0,this._hovering=!0)},this._onMouseLeave=()=>{this._pauseOnHover&&(this._hovering=!1,this._setUninterruptedAfterDelay(this._delayOnMouseLeave))},this._camera=e.camera,this._control=e.control,this._element=t,this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1;var{delay:e=2e3,delayOnMouseLeave:t=0,speed:i=1,pauseOnHover:r=!1,canInterrupt:a=!0,disableOnInterrupt:o=!1}=w(n);this._enableBlocked=!n,this._delay=e,this._delayOnMouseLeave=t,this._speed=i,this._pauseOnHover=r,this._canInterrupt=a,this._disableOnInterrupt=o}destroy(){this.disable()}update(e){var t;this._enabled&&(this._interrupted?this._disableOnInterrupt&&this.disable():(t=this._camera,e=-this._speed*e/100,t.yaw=sr(t.yaw+e,0,360)))}enable(){var e=this._control,t=this._element;this._enabled||e.gyro.enabled||(e.rotate.on(v.INPUT_START,this._onInputStart),e.rotate.on(v.INPUT_END,this._onInputEnd),e.zoom.on(v.INPUT_START,this._onInputStart),e.zoom.on(v.INPUT_END,this._onInputEnd),e.gyro.on(v.ENABLE,this._onGyroEnable),t.addEventListener(d.MOUSE_ENTER,this._onMouseEnter,!1),t.addEventListener(d.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!0,this._enableBlocked=!1)}enableAfterDelay(){this.enable(),this._interrupted=!0,this._setUninterruptedAfterDelay(this._delay)}disable(){var e,t;this._enabled&&(e=this._control,t=this._element,e.rotate.off(v.INPUT_START,this._onInputStart),e.rotate.off(v.INPUT_END,this._onInputEnd),e.zoom.off(v.INPUT_START,this._onInputStart),e.zoom.off(v.INPUT_END,this._onInputEnd),e.gyro.off(v.ENABLE,this._onGyroEnable),t.removeEventListener(d.MOUSE_ENTER,this._onMouseEnter,!1),t.removeEventListener(d.MOUSE_LEAVE,this._onMouseLeave,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout())}_setUninterruptedAfterDelay(e){this._hovering||(this._clearTimeout(),0<e?this._interruptionTimer=window.setTimeout(()=>{this._interrupted=!1,this._interruptionTimer=-1},e):(this._interrupted=!1,this._interruptionTimer=-1))}_clearTimeout(){0<=this._interruptionTimer&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)}}class Or extends e{constructor(e,t={}){super(),this.destroy=()=>{this.exit(),this.off()},this._onSessionEnd=()=>{this.exit(),this.trigger(P.VR_END)},this._xrSession=null,this._xrRefSpace=null,this._ctx=e,this._options=t}isAvailable(){return h(this,void 0,void 0,function*(){var e=window.navigator.xr;return!!e&&e.isSessionSupported(nr).then(e=>e).catch(()=>!1)})}enter(){return h(this,void 0,void 0,function*(){var e,t=this._ctx,n=window.navigator.xr;n&&(yield D.requestSensorPermission(),e=Object.assign({requiredFeatures:["local"]},this._options),yield t.makeXRCompatible(),n=yield n.requestSession(nr,e),t.bindXRLayer(n),e=yield n.requestReferenceSpace("local"),this._setSession(n,e),this.trigger(P.VR_START,{session:n}))})}exit(){var e=this._xrSession;e&&e.end().catch(()=>{}),this._xrSession=null,this._xrRefSpace=null}canRender(e){var t=this._xrRefSpace;return!!t&&!!e.getViewerPose(t)}getEyeParams(e){var t=e.session,e=e.getViewerPose(this._xrRefSpace);if(!e)return null;const n=t.renderState.baseLayer;return n?e.views.map(e=>{return{viewport:n.getViewport(e),vMatrix:e.transform.inverse.matrix,pMatrix:e.projectionMatrix}}):null}_setSession(e,t){this._xrSession=e,this._xrRefSpace=t,e.addEventListener(d.XR_END,this._onSessionEnd)}}class Mr{constructor(e,t){this.element=e,this.position=t}}class xr{constructor(e,t,{zoom:n=!1}){this._containerEl=ar("."+y.HOTSPOT_CONTAINER,e),this._renderer=t,this._hotspots=[],this._zoom=n}refresh(){var e=this._containerEl;e&&(e=[].slice.apply(e.querySelectorAll("."+y.HOTSPOT)),this._hotspots=e.map(e=>this._parseHotspot(e)))}render(i){var e=this._hotspots;const r=.5*this._renderer.width,a=.5*this._renderer.height;var t=i.zoom;const o=this._zoom?`scale(${t})`:"";e.forEach(e=>{var t=e.position,n=p.create();p.copy(n,t),p.transformMat4(n,n,i.viewMatrix),p.transformMat4(n,n,i.projectionMatrix),1<n[2]||n[2]<0?e.element.classList.remove(y.HOTSPOT_VISIBLE):(t=s.fromValues(n[0]*r+r,-n[1]*a+a),e.element.classList.add(y.HOTSPOT_VISIBLE),e.element.style.transform=["translate(-50%, -50%)",`translate(${t[0]}px, ${t[1]}px)`,o].join(" "))})}_parseHotspot(e){var t=e.dataset.yaw,n=e.dataset.pitch,i=e.dataset.position;if(t||n)return t=t?parseFloat(t):0,n=n?parseFloat(n):0,t=this._yawPitchToVec3(t,n),new Mr(e,t);if(i){n=i.split(" ").map(e=>parseFloat(e));if(n.length<3)throw new I(L.INSUFFICIENT_ARGS(i,'hotspot attribute "data-position"'),C.INSUFFICIENT_ARGS);return new Mr(e,p.fromValues(n[0],n[1],n[2]))}return t=p.fromValues(0,0,-1),new Mr(e,t)}_yawPitchToVec3(e,t){var e=e*E,t=t*E,n=p.create();return n[1]=Math.sin(t),n[2]=Math.cos(t),n[0]=n[2]*Math.sin(-e),n[2]=-n[2]*Math.cos(-e),n}}class Nr{get count(){return this.geometry.indicies.count}constructor(e,t,n){this.obj=e,this.geometry=t,this.buffers=n}}class Fr{get canvas(){return this._canvas}get maxTextureSize(){return this._maxTextureSize}get isWebGL2(){return this._isWebGL2}get supportVAO(){return this._isWebGL2||!!this._extensions.vao}get lost(){return this._contextLost}get debug(){return this._debug}constructor(e,t){this._onContextLost=()=>{this._canvas.classList.add(y.CTX_LOST),this._contextLost=!0},this._onContextRestore=()=>{this._canvas.classList.remove(y.CTX_LOST),this._contextLost=!1},this._canvas=e,this._contextLost=!1,this._debug=t,this._extensions={vao:null,loseContext:null}}init(){var e=this._canvas,{gl:t,isWebGL2:n}=this._getContext(e);this._gl=t,this._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this._isWebGL2=n,this._isWebGL2||(this._extensions.vao=t.getExtension("OES_vertex_array_object")),this._extensions.loseContext=t.getExtension("WEBGL_lose_context"),e.addEventListener(d.CONTEXT_LOST,this._onContextLost),e.addEventListener(d.CONTEXT_RESTORED,this._onContextRestore)}destroy(){var e=this._gl,t=this._canvas;e&&(e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),t.removeEventListener(d.CONTEXT_LOST,this._onContextLost),t.removeEventListener(d.CONTEXT_RESTORED,this._onContextRestore)}forceLoseContext(){var e=this._extensions.loseContext;e&&e.loseContext()}forceRestoreContext(){var e=this._extensions.loseContext;e&&e.restoreContext()}clear(){var e=this._gl;e.clear(e.COLOR_BUFFER_BIT)}resize(){var e=this._gl;e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight)}viewport(e,t,n,i){this._gl.viewport(e,t,n,i)}createVAO(e,t){var n=this._createNativeVAO(),e=new Nr(n,e,{indicies:this._createBuffer(),position:this._createBuffer(),uv:this._createBuffer()});return n&&(this._bindNativeVAO(n),this._supplyGeometryData(e,t),this._bindNativeVAO(null),this._unbindBuffers()),e}draw(e,t){var n=this._gl;e.obj?this._bindNativeVAO(e.obj):this._supplyGeometryData(e,t),n.drawElements(n.TRIANGLES,e.count,n.UNSIGNED_SHORT,0),e.obj?this._bindNativeVAO(null):this._unbindBuffers()}releaseVAO(e){e.obj&&this._deleteNativeVAO(e.obj),this._deleteBuffer(e.buffers.indicies),this._deleteBuffer(e.buffers.position),this._deleteBuffer(e.buffers.uv)}getUniformLocations(n,e){const i=this._gl;e=Object.keys(e).reduce((e,t)=>(e[t]=i.getUniformLocation(n,t),e),{});return Object.assign(Object.assign({},this._getCommonUniformLocations(n)),e)}updateCommonUniforms(e,t,n){var i=this._gl,n=n.uniformLocations,e=e.matrix,r=l.create();l.multiply(r,t.viewMatrix,e),i.uniformMatrix4fv(n.uMVMatrix,!1,r),i.uniformMatrix4fv(n.uPMatrix,!1,t.projectionMatrix)}updateVRUniforms(e,t,n,i){var r=this._gl,e=e.uniformLocations;r.uniformMatrix4fv(e.uMVMatrix,!1,t),r.uniformMatrix4fv(e.uPMatrix,!1,n),e.uEye&&r.uniform1f(e.uEye,i)}updateUniforms(e){var t=this._gl,n=e.uniforms,i=e.uniformLocations;for(const o in n){var r=n[o],a=i[o];r&&r.needsUpdate&&r.update(t,a,this._isWebGL2)}}releaseShaderResources(e){var t=this._gl,n=e.uniforms;for(const r in n){var i=n[r];i&&i.needsUpdate&&i.destroy(t)}t.deleteProgram(e.program)}useProgram(e){this._gl.useProgram(e.program)}createProgram(t,n){var i=this._gl,r=i.createProgram(),t=this._compileShader(i.VERTEX_SHADER,t),n=this._compileShader(i.FRAGMENT_SHADER,n);if(i.attachShader(r,t),i.attachShader(r,n),i.bindAttribLocation(r,0,"position"),i.bindAttribLocation(r,1,"uv"),i.linkProgram(r),!this._debug||i.getProgramParameter(r,i.LINK_STATUS))return i.deleteShader(t),i.deleteShader(n),r;{let e=null;throw i.getShaderParameter(t,i.COMPILE_STATUS)?i.getShaderParameter(n,i.COMPILE_STATUS)||(e=i.getShaderInfoLog(n)):e=i.getShaderInfoLog(t),new I(L.FAILED_LINKING_PROGRAM(i.getProgramInfoLog(r),e),C.FAILED_LINKING_PROGRAM)}}createWebGLTexture(e){var t=this._gl,n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapT),!e.isVideo()&&this._isWebGL2&&t.texStorage2D(t.TEXTURE_2D,1,t.RGBA8,e.width,e.height),n}createWebGLCubeTexture(e,t){var n=this._gl,i=n.createTexture();return n.bindTexture(n.TEXTURE_CUBE_MAP,i),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_S,e.wrapS),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_T,e.wrapT),this._isWebGL2&&n.texStorage2D(n.TEXTURE_CUBE_MAP,1,n.RGBA8,t,t),i}makeXRCompatible(){return h(this,void 0,void 0,function*(){var e=this._gl,t=e.getContextAttributes();t&&!0!==t.xrCompatible&&(yield e.makeXRCompatible())})}bindXRLayer(e){var t=this._gl,t=new XRWebGLLayer(e,t);e.updateRenderState({baseLayer:t})}bindXRFrame(e){var t=this._gl,e=e.session.renderState.baseLayer;t.bindFramebuffer(t.FRAMEBUFFER,e.framebuffer)}useDefaultFrameBuffer(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}_createBuffer(){return this._gl.createBuffer()}_deleteBuffer(e){return this._gl.deleteBuffer(e)}_createNativeVAO(){var e=this._gl;return this._isWebGL2?e.createVertexArray():(null==(e=this._extensions.vao)?void 0:e.createVertexArrayOES())||null}_bindNativeVAO(e){var t=this._gl;this._isWebGL2?t.bindVertexArray(e):null!=(t=this._extensions.vao)&&t.bindVertexArrayOES(e)}_deleteNativeVAO(e){var t=this._gl;this._isWebGL2?t.deleteVertexArray(e):null!=(t=this._extensions.vao)&&t.deleteVertexArrayOES(e)}_supplyGeometryData(e,t){var n=e.geometry;this._supplyIndiciesData(n.indicies,e.buffers.indicies),this._supplyAttributeData(n.vertices,t.program,"position",e.buffers.position),this._supplyAttributeData(n.uvs,t.program,"uv",e.buffers.uv)}_unbindBuffers(){var e=this._gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindBuffer(e.ARRAY_BUFFER,null)}_supplyIndiciesData(e,t){var n=this._gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.data,n.STATIC_DRAW)}_supplyAttributeData(e,t,n,i){var r=this._gl,t=r.getAttribLocation(t,n);t<0||(r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,e.data,r.STATIC_DRAW),r.vertexAttribPointer(t,e.itemSize,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t))}_compileShader(e,t){var n=this._gl,e=n.createShader(e);return n.shaderSource(e,t),n.compileShader(e),e}_getCommonUniformLocations(e){var t=this._gl;return{uMVMatrix:t.getUniformLocation(e,"uMVMatrix"),uPMatrix:t.getUniformLocation(e,"uPMatrix")}}_getContext(e){let t=null,n=!1;var i={preserveDrawingBuffer:!1,antialias:!1},r=e=>e.statusMessage;e.addEventListener(d.CONTEXT_CREATE_ERROR,r);for(const a of["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"]){try{t=e.getContext(a,i),n="webgl2"===a}catch(e){}if(t)break}if(e.removeEventListener(d.CONTEXT_CREATE_ERROR,r),t)return{gl:t,isWebGL2:n};throw new I(L.WEBGL_NOT_SUPPORTED,C.WEBGL_NOT_SUPPORTED)}}class Br{get canvas(){return this._canvas}get width(){return this._elementSize.x}get height(){return this._elementSize.y}get pixelRatio(){return this._pixelRatio}get aspect(){return this._elementSize.x/this._elementSize.y}constructor(e,t){this._canvas=e,this._elementSize={x:0,y:0},this._pixelRatio=1,this.ctx=new Fr(e,t)}destroy(){var e=this._canvas;this.ctx.destroy(),e.width=1,e.height=1}resize(){var e=this._canvas,t=this._elementSize,n=window.devicePixelRatio;t.x=e.clientWidth,t.y=e.clientHeight,e.width=t.x*n,e.height=t.y*n,this._pixelRatio=n,this.ctx.resize()}render(e,t){var n=this.ctx;n.lost||(n.clear(),n.useProgram(e.program),n.updateCommonUniforms(e,t,e.program),e.update({camera:t}),n.updateUniforms(e.program),n.draw(e.vao,e.program))}renderVR(r,e,t){const a=this.ctx;e=e.getEyeParams(t);e&&r&&(a.bindXRFrame(t),a.useProgram(r.program),a.updateUniforms(r.program),e.forEach((e,t)=>{var n=e.viewport,i=l.multiply(l.create(),e.vMatrix,r.matrix);a.viewport(n.x,n.y,n.width,n.height),a.updateVRUniforms(r.program,i,e.pMatrix,t),a.draw(r.vao,r.program)}))}}class Ur extends e{get rootEl(){return this._rootEl}get renderer(){return this._renderer}get camera(){return this._camera}get control(){return this._control}get vr(){return this._vr}get hotspot(){return this._hotspot}get plugins(){return this._plugins}get projection(){return this._projection}set projection(e){this._initialized&&e?this.load(e):this._projection=e}get mesh(){return this._mesh}get initialized(){return this._initialized}get autoplay(){return this._autoplay}get autoInit(){return this._autoInit}get autoResize(){return this._autoResize}get canvasSelector(){return this._canvasSelector}get useResizeObserver(){return this._useResizeObserver}get tabIndex(){return this._tabIndex}set tabIndex(e){var t=this._renderer.canvas;null!=(this._tabIndex=e)?t.tabIndex=e:t.removeAttribute("tabindex")}get maxDeltaTime(){return this._animator.maxDeltaTime}set maxDeltaTime(e){this._animator.maxDeltaTime=e}get debug(){return this._debug}set debug(e){this._debug=e}get initialYaw(){return this._camera.initialYaw}set initialYaw(e){this._camera.initialYaw=e}get initialPitch(){return this._camera.initialPitch}set initialPitch(e){this._camera.initialPitch=e}get initialZoom(){return this._camera.initialZoom}set initialZoom(e){this._camera.initialZoom=e}get yawRange(){return this._camera.yawRange}set yawRange(e){this._camera.yawRange=e,this._projection&&this._projection.updateCamera(this._camera)}get pitchRange(){return this._camera.pitchRange}set pitchRange(e){this._camera.pitchRange=e,this._projection&&this._projection.updateCamera(this._camera)}get zoomRange(){return this._camera.zoomRange}set zoomRange(e){this._camera.zoomRange=e,this._projection&&this._projection.updateCamera(this._camera)}get fov(){return this._camera.fov}set fov(e){var t=this._camera,n=this._control;t.fov=e,t.updateMatrix(),n.sync()}get rotate(){return this._control.rotate}get zoom(){return this._control.zoom}get gyro(){return this._control.gyro}get useGrabCursor(){return this._control.useGrabCursor}set useGrabCursor(e){this._control.useGrabCursor=e}get disableContextMenu(){return this._control.disableContextMenu}set disableContextMenu(e){this._control.disableContextMenu=e}get scrollable(){return this._control.scrollable}set scrollable(e){this._control.scrollable=e}get wheelScrollable(){return this._control.wheelScrollable}set wheelScrollable(e){this._control.wheelScrollable=e}constructor(e,{projection:t=null,initialYaw:n=0,initialPitch:i=0,initialZoom:r=1,yawRange:a=null,pitchRange:o=null,zoomRange:s=null,fov:l=90,useGrabCursor:u=!0,disableContextMenu:c=!1,rotate:h=!0,zoom:d=!0,gyro:f=!1,scrollable:p=!0,wheelScrollable:m=!1,autoplay:g=!1,hotspot:_={},autoInit:y=!0,autoResize:v=!0,canvasSelector:E="canvas",useResizeObserver:A=!0,on:b={},plugins:T=[],maxDeltaTime:S=1/30,tabIndex:w=0,debug:R=!1}={}){super(),this.renderFrame=e=>{var t=this._camera,n=this._renderer,i=this._control,r=this._hotspot,a=this._autoplay,o=this._mesh;o&&(this._emit(P.BEFORE_RENDER),a.playing&&(a.update(e),i.sync()),(t.animation||i).update(e),n.render(o,t),r.render(t),t.changed&&this._emit(P.VIEW_CHANGE,{yaw:t.yaw,pitch:t.pitch,zoom:t.zoom,quaternion:[t.quaternion[0],t.quaternion[1],t.quaternion[2],t.quaternion[3]]}),t.onFrameRender(),this._emit(P.RENDER))},this._renderFrameOnDemand=e=>{var t=this._camera,n=this._control,i=this._autoplay,r=this._mesh,r=null==r?void 0:r.getTexture();this._initialized&&r&&(t.animation||n.animating||i.playing||r.isVideo())&&this.renderFrame(e)},this._renderVRFrame=(e,t)=>{var n=this._vr,i=this._mesh,r=this._renderer;i&&(this._emit(P.BEFORE_RENDER),r.renderVR(i,n,t),this._emit(P.RENDER))},this._rootEl=((e,t)=>{t=ar(e,t);if(t)return t;throw rr(e)?new I(L.ELEMENT_NOT_FOUND(e),C.ELEMENT_NOT_FOUND):new I(L.WRONG_TYPE(e,["HTMLElement","string"]),C.WRONG_TYPE)})(e),this._plugins=T,this._initialized=!1,this._autoInit=y,this._autoResize=v,this._canvasSelector=E,this._useResizeObserver=A,this._tabIndex=w,this._debug=R;e=((e,t)=>{e=e.querySelector(t);if(e)return e;throw new I(L.CANVAS_NOT_FOUND,C.CANVAS_NOT_FOUND)})(this._rootEl,E);this._renderer=new Br(e,R),this._camera=new mr({initialYaw:n,initialPitch:i,initialZoom:r,fov:l,yawRange:a,pitchRange:o,zoomRange:s}),this._control=new Sr(e,this._camera,{useGrabCursor:u,scrollable:p,wheelScrollable:m,disableContextMenu:c,rotate:h,zoom:d,gyro:f}),this._animator=new Pr(S),this._autoplay=new kr(this,e,g),this._projection=t,this._mesh=null,this._autoResizer=new Dr(A,()=>this.resize()),this._vr=new Or(this._renderer.ctx),this._hotspot=new xr(this._rootEl,this._renderer,_),this._addEventHandlers(b),t&&y&&this.init()}destroy(){this._camera.destroy(),this._animator.stop(),this._renderer.destroy(),this._control.destroy(),this._autoResizer.disable(),this._mesh&&(this._mesh.destroy(this._renderer.ctx),this._mesh=null),this._plugins.forEach(e=>e.destroy(this)),this._initialized=!1}init(){return h(this,void 0,void 0,function*(){if(!this._projection)throw new I(L.PROVIDE_PROJECTION_FIRST,C.PROVIDE_PROJECTION_FIRST);var e=this._renderer,t=this._camera,n=this._control,i=this._animator,r=this._hotspot,a=this._projection,o=e.canvas,e=(this._bindComponentEvents(),e.ctx.init(),this._resizeComponents(),t.updateMatrix(),this._autoResize&&this._autoResizer.enable(o),this._autoplay.enableBlocked||this._autoplay.enable(),this._plugins.forEach(e=>{e.init(this)}),yield this._loadTexture(a));this._applyProjection(a,e),r.refresh(),i.start(this._renderFrameOnDemand),yield n.enable(),null==this._tabIndex||o.hasAttribute("tabIndex")||(o.tabIndex=this._tabIndex),this._initialized=!0,this.renderFrame(0),this._emit(P.READY)})}load(t){return h(this,void 0,void 0,function*(){var e;return!!t&&(this._initialized?(e=yield this._loadTexture(t),this._applyProjection(t,e),this.renderFrame(0)):(this._projection=t,this.init()),!0)})}resize(){var e,t;this._initialized&&(this._resizeComponents(),this.renderFrame(0),{width:e,height:t}=this._renderer,this._emit(P.RESIZE,{width:e,height:t}))}addPlugins(...e){this._initialized&&e.forEach(e=>{e.init(this)}),this._plugins.push(...e)}removePlugins(...e){e.forEach(e=>{var t=this._plugins.indexOf(e);t<0||(e.destroy(this),this._plugins.splice(t,1))})}_emit(e,...t){t=t?t[0]:{};this.trigger(e,Object.assign({type:e,target:this},t))}_applyProjection(e,t){var n=this._camera,i=this._control,r=this._renderer,a=this._mesh,a=(a&&a.destroy(r.ctx),e.createMesh(r.ctx,t));e.updateCamera(n),e.updateControl(i),this._mesh=a,this._emit(P.PROJECTION_CHANGE,{projection:e})}_loadTexture(i){return h(this,void 0,void 0,function*(){var e=new Lr,{src:t,video:n}=i,e=(this._emit(P.LOAD_START,{src:t,video:n}),yield e.load(t,n));return this._emit(P.LOAD,{src:t,video:n}),e})}_resizeComponents(){var e=this._renderer,t=this._camera,n=this._control;e.resize(),t.resize(e.width,e.height),n.resize(e.width,e.height)}_addEventHandlers(t){Object.keys(t).forEach(e=>{this.on(e,t[e])})}_bindComponentEvents(){const t=this._rootEl,e=this._control,n=this._animator,i=this._renderer;var r=this._vr;[v.STATIC_CLICK,v.INPUT_START,v.INPUT_END].forEach(t=>{e.rotate.on(t,e=>{this._emit(t,e)}),e.zoom.on(t,e=>{this._emit(t,e)})}),r.on(P.VR_START,e=>{t.classList.add(y.IN_VR),n.changeContext(e.session),n.start(this._renderVRFrame),this._emit(P.VR_START)}),r.on(P.VR_END,()=>{t.classList.remove(y.IN_VR),i.ctx.useDefaultFrameBuffer(),n.changeContext(window),n.start(this._renderFrameOnDemand),this.resize(),this._emit(P.VR_END)})}}Ur.VERSION="4.0.0-beta.7";class jr extends e{constructor(){super(),this.matrix=l.create(),this.rotation=m.create(),this.position=p.fromValues(0,0,0),this.scale=p.fromValues(1,1,1)}updateMatrix(){l.fromRotationTranslationScale(this.matrix,this.rotation,this.position,this.scale)}update(e){this.trigger(Xi.UPDATE,e)}}(class fa{constructor({className:e={}}={}){this._startLoading=({target:e})=>{e.rootEl.appendChild(this._container),e.initialized?e.once(P.LOAD,this._detachElements):e.once(P.READY,this._detachElements)},this._detachElements=({target:e})=>{var t=this._container;t&&t.parentElement===e.rootEl&&e.rootEl.removeChild(t)},this.className=e,this._container=this._createElements()}init(e){e.on(P.LOAD_START,this._startLoading)}destroy(e){e.off(P.LOAD_START,this._startLoading),this._detachElements({target:e})}_createElements(){var e=Object.assign(Object.assign({},this.className),fa.DEFAULT_CLASS),t=T(e.CONTAINER),e=T(e.RING);return t.appendChild(e),t}}).DEFAULT_CLASS={CONTAINER:"view360-spinner",RING:"view360-spinner-ring"};class O{constructor(e){this.position=e.position,this.order=e.order}}const Gr={CONTROLS_ROOT:"view360-controls",CONTROLS_BG:"view360-controls-background",CONTROLS_MAIN:"view360-controls-main",CONTROLS_TOP:"view360-controls-top",CONTROLS_BOTTOM:"view360-controls-bottom",CONTROLS_MID:"view360-controls-mid",CONTROLS_LEFT:"view360-controls-left",CONTROLS_RIGHT:"view360-controls-right",CONTROLS_FLOAT_LEFT:"view360-controls-float-left",CONTROLS_FLOAT_RIGHT:"view360-controls-float-right",CONTROLS_BUTTON:"view360-controls-button",PROGRESS_ROOT:"view360-controls-progress",VOLUME_ROOT:"view360-controls-volume",RANGE_ROOT:"view360-range",RANGE_TRACK:"view360-range-track",RANGE_THUMB:"view360-range-thumb",RANGE_FILLER:"view360-range-filler",PLAY_BUTTON:"view360-controls-play",PAUSE_BUTTON:"view360-controls-pause",UNMUTED_BUTTON:"view360-controls-unmuted",MUTED_BUTTON:"view360-controls-muted",FULLSCREEN_BUTTON:"view360-controls-fullscreen",FULLSCREEN_EXIT_BUTTON:"view360-controls-fullscreen-exit",VR_BUTTON:"view360-controls-vr",GYRO_ENABLED:"view360-controls-gyro-enabled",GYRO_DISABLED:"view360-controls-gyro-disabled",VIDEO_TIME_DISPLAY:"view360-controls-time",PIEVIEW_ROOT:"view360-controls-pie",FIXED:"view360-controls-fixed",UNAVAILABLE:"view360-controls-unavailable",HIDDEN:"view360-controls-hidden"},M={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",MAIN_TOP:"main-top",MAIN_BOTTOM:"main-bottom",MAIN_LEFT:"main-left",MAIN_RIGHT:"main-right"};class Vr extends e{constructor(){super(),this._onHold=({srcEvent:e,isTouch:t})=>{var n=this._bbox;n&&(t=(t?e.touches[0]:e).pageX,e=n.x+(null!=(e=window.scrollX)?e:window.pageXOffset),e=((t=S(t,e,e+n.width))-e)/n.width,this._motion.reset(t),this.thumbEl.classList.add(this._fixedClass),this.trigger(v.INPUT_START,e))},this._onChange=({delta:e})=>{var t=this._motion,n=this._bbox;n&&(t.setNewEndByDelta(e.x),t.update(1),e=n.x+(null!=(e=window.scrollX)?e:window.pageXOffset),t=(S(t.val,e,e+n.width)-e)/n.width,this.trigger(v.CHANGE,t))},this._onRelease=()=>{this._bbox&&(this.thumbEl.classList.remove(this._fixedClass),this.trigger(v.INPUT_END))};var e=document.createElement(f),t=document.createElement(f),n=document.createElement(f),i=document.createElement(f);e.draggable=!1,t.appendChild(i),t.appendChild(n),e.appendChild(t),this.rootEl=e,this.trackEl=t,this.thumbEl=n,this.fillerEl=i,this._mouseInput=new gr,this._touchInput=new _r,this._motion=new fr({duration:1,range:Zi,easing:e=>e}),this._bbox={x:0,y:0,width:0,height:0,left:0,right:0,bottom:0,top:0},this._fixedClass=Gr.FIXED}init(e){var t=this._mouseInput,n=this._touchInput;this.rootEl.classList.add(e.RANGE_ROOT),this.trackEl.classList.add(e.RANGE_TRACK),this.thumbEl.classList.add(e.RANGE_THUMB),this.fillerEl.classList.add(e.RANGE_FILLER),this._fixedClass=e.FIXED,t.on(v.INPUT_START,this._onHold),n.on(v.INPUT_START,this._onHold),t.on(v.INPUT_END,this._onRelease),n.on(v.INPUT_END,this._onRelease),t.on(v.CHANGE,this._onChange),n.on(v.CHANGE,this._onChange),t.enable(this.rootEl),n.enable(this.rootEl),this.resize()}destroy(){var e=this._mouseInput,t=this._touchInput;this.rootEl.className="",this.trackEl.className="",this.thumbEl.className="",this.fillerEl.className="",e.off(),t.off(),e.disable(),t.disable()}resize(){this._bbox=this.trackEl.getBoundingClientRect()}updateStyle(e){var t=this._bbox.width,e=S(e,0,1);this.fillerEl.style.width=100*e+"%",this.thumbEl.style.transform=`translateX(${e*t}px)`}}class Hr extends O{get element(){return this._rangeControl.rootEl}constructor({position:e=M.MAIN_TOP,order:t=9999}={}){super({position:e,order:t}),this._onResize=()=>{this._rangeControl.resize()},this._onTimeUpdate=()=>{var e=this._video;e&&(this._currentTime=e.source.currentTime,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onDurationChange=()=>{var e=this._video;e&&(this._duration=e.source.duration,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onHold=e=>{var t,n=this._video,i=this._controlBar;n&&i&&(t=n.isPaused(),n.source.pause(),e=n.source.duration*e,n.source.currentTime=e,n.source.dispatchEvent(new CustomEvent(b,{detail:{time:e}})),i.rootEl.classList.add(i.className.FIXED),this._wasPaused=!this._playPromise&&t)},this._onControl=e=>{var t=this._video;t&&(e=t.source.duration*e,t.source.currentTime=e,t.source.dispatchEvent(new CustomEvent(b,{detail:{time:e}})))},this._onRelease=()=>{var e=this._video,t=this._controlBar;e&&t&&(this._wasPaused||this._playPromise||(this._playPromise=e.source.play().catch(()=>{}),this._playPromise.then(()=>{this._playPromise=null}),t.rootEl.classList.remove(t.className.FIXED))),this._wasPaused=!1},this.position=e,this.order=t,this._controlBar=null,this._rangeControl=new Vr,this._video=null,this._wasPaused=!1,this._currentTime=0,this._duration=0,this._playPromise=null}init(e,t){var n=null==(n=e.mesh)?void 0:n.getTexture(),i=this.element,r=this._rangeControl,a=t.className.UNAVAILABLE;n&&n.isVideo()?(i.classList.remove(a),i.classList.add(t.className.PROGRESS_ROOT),e.on(P.RESIZE,this._onResize),n.source.addEventListener(d.VIDEO_TIME_UPDATE,this._onTimeUpdate),n.source.addEventListener(d.VIDEO_DURATION_CHANGE,this._onDurationChange),n.source.addEventListener(b,this._onTimeUpdate),r.init(t.className),r.on(v.INPUT_START,this._onHold),r.on(v.CHANGE,this._onControl),r.on(v.INPUT_END,this._onRelease),this._video=n,this._currentTime=n.source.currentTime,this._duration=n.source.duration,this._controlBar=t,r.updateStyle(this._currentTime/this._duration)):i.classList.add(a)}destroy(e){var t=this._video;e.off(P.RESIZE,this._onResize),t&&(t.source.removeEventListener(d.VIDEO_TIME_UPDATE,this._onTimeUpdate),t.source.removeEventListener(d.VIDEO_DURATION_CHANGE,this._onDurationChange),t.source.removeEventListener(b,this._onTimeUpdate)),this._rangeControl.destroy(),this._video=null,this._playPromise=null}}class Yr extends O{constructor({position:e=M.MAIN_LEFT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._video;e&&(this._paused?e.source.play():e.source.pause())},this._onPlay=()=>{var e,t;this._controlBar&&(e=this.element,t=this._controlBar.className,e.classList.add(t.PAUSE_BUTTON),e.classList.remove(t.PLAY_BUTTON),e.title="Pause Video",this._paused=!1)},this._onPause=()=>{var e,t;this._controlBar&&(e=this.element,t=this._controlBar.className,e.classList.add(t.PLAY_BUTTON),e.classList.remove(t.PAUSE_BUTTON),e.title="Play Video",this._paused=!0)},this.element=document.createElement(Gi),this._video=null,this._paused=!0,this._controlBar=null}init(e,t){var n=this.element,e=null==(e=e.mesh)?void 0:e.getTexture(),i=t.className,r=i.UNAVAILABLE;e&&e.isVideo()?(n.classList.add(i.CONTROLS_BUTTON),n.classList.remove(r),i=e.isPaused(),this._video=e,this._paused=i,this._controlBar=t,i?this._onPause():this._onPlay(),n.addEventListener(d.CLICK,this._onClick),e.source.addEventListener(d.VIDEO_PLAY,this._onPlay),e.source.addEventListener(d.VIDEO_PAUSE,this._onPause)):n.classList.add(r)}destroy(){var e=this._video,t=this.element;e&&(t.className="",t.removeEventListener(d.CLICK,this._onClick),e.source.removeEventListener(d.VIDEO_PLAY,this._onPlay),e.source.removeEventListener(d.VIDEO_PAUSE,this._onPause),this._video=null,this._paused=!0,this._controlBar=null)}}class zr extends O{get element(){return this._rootEl}constructor({position:e=M.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onResize=()=>{this._rangeControl.resize(),this._updateDisplay()},this._onClick=()=>{var e=this._video;e&&!this._rootEl.disabled&&(e.source.muted=!e.source.muted)},this._onVolumeChange=()=>{var e=this._buttonEl,t=this._video,n=this._controlBar;t&&n&&(n=n.className,t.source.muted||0===t.source.volume?(e.classList.add(n.MUTED_BUTTON),e.classList.remove(n.UNMUTED_BUTTON)):(e.classList.add(n.UNMUTED_BUTTON),e.classList.remove(n.MUTED_BUTTON)),this._updateDisplay())},this._onHold=e=>{var t,n=this._video,i=this._controlBar;n&&i&&(t=i.className,n.source.volume=e,this._rootEl.classList.add(t.FIXED),i.containerEl.classList.add(t.FIXED),this._updateDisplay())},this._onChange=e=>{var t=this._video;t&&(t.source.volume=e,t.source.muted=!(0<e),this._updateDisplay())},this._onRelease=()=>{var e,t=this._controlBar;t&&(e=t.className,this._rootEl.classList.remove(e.FIXED),t.containerEl.classList.remove(e.FIXED))},this._updateDisplay=()=>{var e=this._video,t=this._rootEl;e&&(e.hasAudio()?(t.disabled=!1,e=e.source.muted?0:e.source.volume,this._rangeControl.updateStyle(e)):t.disabled=!0)},this._controlBar=null,this._rangeControl=new Vr,this._createElements(),this._video=null}init(e,t){var n=null==(n=e.mesh)?void 0:n.getTexture(),i=this._rootEl,r=this._buttonEl,a=this._rangeControl,o=t.className,s=o.UNAVAILABLE;n&&n.isVideo()?(i.classList.remove(s),i.classList.add(o.CONTROLS_BUTTON),i.classList.add(o.VOLUME_ROOT),r.classList.add(o.CONTROLS_BUTTON),n.source.muted?r.classList.add(o.MUTED_BUTTON):r.classList.add(o.UNMUTED_BUTTON),e.on(P.RESIZE,this._onResize),i.addEventListener(d.TRANSITION_END,this._onResize),r.addEventListener(d.CLICK,this._onClick),n.source.addEventListener(d.VIDEO_VOLUME_CHANGE,this._onVolumeChange),n.source.addEventListener(d.VIDEO_LOADED_DATA,this._updateDisplay),n.source.addEventListener(d.VIDEO_CAN_PLAYTHROUGH,this._updateDisplay),a.init(o),a.on(v.INPUT_START,this._onHold),a.on(v.CHANGE,this._onChange),a.on(v.INPUT_END,this._onRelease),this._controlBar=t,this._video=n,this._updateDisplay()):i.classList.add(s)}destroy(e){var t=this._video,n=this._buttonEl,i=this._rootEl;i.className="",n.className="",e.off(P.RESIZE,this._onResize),i.removeEventListener(d.TRANSITION_END,this._onResize),n.removeEventListener(d.CLICK,this._onClick),t&&(t.source.removeEventListener(d.VIDEO_VOLUME_CHANGE,this._onVolumeChange),t.source.removeEventListener(d.VIDEO_LOADED_DATA,this._updateDisplay),t.source.removeEventListener(d.VIDEO_CAN_PLAYTHROUGH,this._updateDisplay)),this._controlBar=null,this._rangeControl.destroy(),this._video=null}_createElements(){var e=document.createElement(Gi),t=document.createElement(f);e.appendChild(this._rangeControl.rootEl),e.appendChild(t),e.title="Toggle Mute",this._rootEl=e,this._buttonEl=t}}class Wr extends O{constructor({position:e=M.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._targetEl;e&&(ur()?this._exitFullscreen():this._requestFullscreen(e))},this._onFullscreenChange=()=>{var e=this.element,t=this._controlBar;t&&(t=t.className,ur()?(e.classList.add(t.FULLSCREEN_EXIT_BUTTON),e.classList.remove(t.FULLSCREEN_BUTTON)):(e.classList.add(t.FULLSCREEN_BUTTON),e.classList.remove(t.FULLSCREEN_EXIT_BUTTON)))},this.element=document.createElement(Gi),this.element.title="Toggle Fullscreen",this._controlBar=null,this._targetEl=null}init(e,t){var n=this.element,i=t.className;this._fullscreenAvailable()?(n.classList.add(i.CONTROLS_BUTTON),n.classList.remove(i.UNAVAILABLE),n.addEventListener(d.CLICK,this._onClick),this._addFullscreenHandlers(),ur()?n.classList.add(i.FULLSCREEN_EXIT_BUTTON):n.classList.add(i.FULLSCREEN_BUTTON),this._controlBar=t,this._targetEl=e.rootEl):n.classList.add(i.UNAVAILABLE)}destroy(){var e=this.element;e.className="",e.removeEventListener(d.CLICK,this._onClick),this._removeFullscreenHandlers(),this._controlBar=null,this._targetEl=null}_fullscreenAvailable(){return Yi.some(e=>!!document[e])}_requestFullscreen(e){for(const n of Yi){var t=e[n];if(t)return void t.call(e)}}_exitFullscreen(){for(const t of Wi){var e=document[t];if(e)return void e.call(document)}}_addFullscreenHandlers(){Ki.forEach(e=>{document.addEventListener(e,this._onFullscreenChange)})}_removeFullscreenHandlers(){Ki.forEach(e=>{document.removeEventListener(e,this._onFullscreenChange)})}}class Kr extends O{constructor({position:e=M.MAIN_LEFT,order:t=9999}={}){super({position:e,order:t}),this._onTimeUpdate=()=>{var e=this._video;e&&(this._currentTime=e.source.currentTime,this._updateDisplay())},this._onDurationChange=()=>{var e=this._video;e&&(this._duration=e.source.duration,this._updateDisplay())},this._onCustomTimeChange=e=>{this._currentTime=e.detail.time,this._updateDisplay()},this.element=document.createElement(f),this._video=null,this._currentTime=0,this._duration=0}init(e,t){var e=null==(e=e.mesh)?void 0:e.getTexture(),n=this.element,t=t.className;e&&e.isVideo()?(n.classList.add(t.VIDEO_TIME_DISPLAY),n.classList.remove(t.UNAVAILABLE),e.source.addEventListener(d.VIDEO_TIME_UPDATE,this._onTimeUpdate),e.source.addEventListener(d.VIDEO_DURATION_CHANGE,this._onDurationChange),e.source.addEventListener(b,this._onCustomTimeChange),this._video=e,this._currentTime=e.source.currentTime,this._duration=e.source.duration,this._updateDisplay()):n.classList.add(t.UNAVAILABLE)}destroy(){var e=this._video;e&&(this.element.className="",e.source.removeEventListener(d.VIDEO_TIME_UPDATE,this._onTimeUpdate),e.source.removeEventListener(d.VIDEO_DURATION_CHANGE,this._onDurationChange),e.source.removeEventListener(b,this._onCustomTimeChange),this._video=null)}_updateDisplay(){var e=this._currentTime,t=Math.floor(e/60),e=Math.floor(e-60*t),e=e<10?"0"+e:e,n=this._duration,i=Math.floor(n/60),n=Math.floor(n-60*i);this.element.innerText=t+`:${e} / ${i}:`+(n<10?"0"+n:n)}}class qr extends O{constructor({resetCamera:e=!0,position:t=M.TOP_RIGHT,order:n=9999}={}){super({position:t,order:n}),this._onClick=()=>{var e,t,n,i=this._viewer,r=this.resetCamera;i&&r&&({yaw:r=i.initialYaw,pitch:e=i.initialPitch,zoom:t=i.initialZoom,duration:n=500}=w(r),i.camera.animateTo({yaw:r,pitch:e,zoom:t,duration:n}))},this._updatePie=({target:e})=>{var t=this._piePathEl,n=this._rangeCircleEl,e=e.camera,i=e.getHorizontalFov(),r=e.getYawRange(e.zoom),a=.5*i,o=24*Math.PI,i=o*i/360,e=o*(e.yaw+a+90)/360;t.setAttribute("stroke-dasharray",i+" "+(o-i)),t.setAttribute("stroke-dashoffset",""+e),isFinite(r.min)&&isFinite(r.max)?(o=45*Math.PI,i=(sr(r.min,-180,180)-a)/360,t=(sr(r.max,-180,180)+a)/360,e=o*Math.abs(t-i),r=-o*(i-.25),n.setAttribute("stroke-dasharray",e+" "+(o-e)),n.setAttribute("stroke-dashoffset",""+r)):(n.setAttribute("stroke-dasharray",""),n.setAttribute("stroke-dashoffset",""))},this.element=document.createElement(f),this.element.title="Reset view",this.resetCamera=e,this._createPieElements(),this._viewer=null}init(e,t){var n=this.element,t=(e.initialized?this._updatePie({target:e}):e.once(P.READY,this._updatePie),t.className.PIEVIEW_ROOT);n.classList.add(t),this.resetCamera&&n.addEventListener(d.CLICK,this._onClick),e.on(P.VIEW_CHANGE,this._updatePie),this._viewer=e}destroy(e){var t=this.element;t.removeEventListener(d.CLICK,this._onClick),t.className="",e.off(P.READY,this._updatePie),e.off(P.VIEW_CHANGE,this._updatePie),this._viewer=null}_createPieElements(){var e=this.element,t=document.createElementNS(tr,"svg"),n=(t.setAttribute("viewBox","0 0 48 48"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),document.createElementNS(tr,"circle")),i=(n.setAttribute("stroke","currentColor"),n.setAttribute("fill","transparent"),n.setAttribute("cx","24"),n.setAttribute("cy","24"),n.setAttribute("r","12"),n.setAttribute("stroke-width","24"),t.appendChild(n),document.createElementNS(tr,"circle"));i.setAttribute("stroke","currentColor"),i.setAttribute("fill","transparent"),i.setAttribute("cx","24"),i.setAttribute("cy","24"),i.setAttribute("r","22.5"),i.setAttribute("stroke-width","3"),t.appendChild(i),e.appendChild(t),this._piePathEl=n,this._rangeCircleEl=i}}class Qr extends O{constructor({position:e=M.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._viewer;e&&e.vr.enter()},this.element=document.createElement(Gi),this.element.title="Enter VR",this._viewer=null}init(e,t){const n=this.element,i=t.className;n.classList.add(i.UNAVAILABLE),n.classList.add(i.VR_BUTTON),n.classList.add(i.CONTROLS_BUTTON),e.vr.isAvailable().then(e=>{e&&n.classList.remove(i.UNAVAILABLE)}),n.addEventListener(d.CLICK,this._onClick),this._viewer=e}destroy(){var e=this.element;e.className="",e.removeEventListener(d.CLICK,this._onClick),this._viewer=null}}class Xr extends O{constructor({position:e=M.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._viewer;const t=this._controlBar;if(e&&t){const n=e.control.gyro;n.enabled?n.disable():D.requestSensorPermission().then(e=>{e?n.enable():this.element.classList.add(t.className.UNAVAILABLE)})}},this._updateStyle=()=>{var e=this.element,t=this._viewer,n=this._controlBar;t&&n&&(t=t.control.gyro,n=n.className,t.enabled?(e.classList.add(n.GYRO_ENABLED),e.classList.remove(n.GYRO_DISABLED)):(e.classList.add(n.GYRO_DISABLED),e.classList.remove(n.GYRO_ENABLED)))},this.element=document.createElement(f),this.element.title="Toggle gyroscope control"}init(e,t){const n=this.element,i=t.className,r=(n.addEventListener(d.CLICK,this._onClick),n.classList.add(i.CONTROLS_BUTTON),n.classList.add(i.UNAVAILABLE),()=>{n.classList.remove(i.UNAVAILABLE),e.control.gyro.on(v.ENABLE,this._updateStyle),e.control.gyro.on(v.DISABLE,this._updateStyle)});cr()?r():D.isAvailable().then(e=>{e&&r()}),this._controlBar=t,this._viewer=e,this._updateStyle()}destroy(e){var t=this.element;e.control.gyro.off(v.ENABLE,this._updateStyle),e.control.gyro.off(v.DISABLE,this._updateStyle),t.removeEventListener(d.CLICK,this._onClick),t.className="",this._controlBar=null,this._viewer=null}}class Jr{get enabled(){return!!this._targetEl}get hidden(){return this._controlBar.containerEl.classList.contains(this._hiddenClass)}get _hiddenClass(){return this._controlBar.className.HIDDEN}get _fixedClass(){return this._controlBar.className.FIXED}constructor(e,{initialDelay:t=3e3,delay:n=0,idleDelay:i=3e3}){this._onMouseEnter=()=>{this._isCursorInside=!0,this.show()},this._onMouseLeave=()=>{this._isCursorInside=!1,this._hideAfterDelay()},this._onMouseMove=()=>{this._isFullscreen&&this.showTemporaliy()},this._onHold=e=>{this._isGrabbing=!0,"mouse"===e.pointerType&&(this._isCursorInside=!0),window.addEventListener(d.MOUSE_UP,this._onRelease),this.show()},this._onRelease=()=>{this._isGrabbing=!1,window.removeEventListener(d.MOUSE_UP,this._onRelease),this._hideAfterDelay()},this._onVideoPlay=()=>{this._targetEl&&this._controlBar.containerEl.classList.remove(this._fixedClass)},this._onVideoPause=()=>{this._targetEl&&this._controlBar.containerEl.classList.add(this._fixedClass)},this._onFullscreenChange=()=>{this._isFullscreen=ur(),this._isFullscreen&&this._hideAfterDelay()},this._controlBar=e,this._initialDelay=t,this._delay=n,this._idleDelay=i,this._timer=-1,this._isCursorInside=!1,this._isGrabbing=!1,this._isFullscreen=!1,this._video=null,this._targetEl=null}enable(e){this._targetEl&&this.disable(e);var t=this._initialDelay,n=e.rootEl,n=(this._targetEl=e.rootEl,this._timer=window.setTimeout(()=>{this.hide()},t),n.addEventListener(d.MOUSE_DOWN,this._onHold),n.addEventListener(d.MOUSE_ENTER,this._onMouseEnter),n.addEventListener(d.MOUSE_MOVE,this._onMouseMove),n.addEventListener(d.MOUSE_LEAVE,this._onMouseLeave),this._addFullscreenHandlers(),null==(t=e.mesh)?void 0:t.getTexture());n&&n.isVideo()&&(n.isPaused()&&this._controlBar.containerEl.classList.add(this._fixedClass),n.source.addEventListener(d.VIDEO_PLAY,this._onVideoPlay),n.source.addEventListener(d.VIDEO_PAUSE,this._onVideoPause),this._video=n)}disable(e){var t,n;this._targetEl&&(t=this._controlBar,e=e.rootEl,n=this._video,e.removeEventListener(d.MOUSE_DOWN,this._onHold),window.removeEventListener(d.MOUSE_UP,this._onRelease),e.removeEventListener(d.MOUSE_ENTER,this._onMouseEnter),e.removeEventListener(d.MOUSE_MOVE,this._onMouseMove),e.removeEventListener(d.MOUSE_LEAVE,this._onMouseLeave),this._removeFullscreenHandlers(),window.clearTimeout(this._timer),t.containerEl.classList.remove(this._fixedClass),n&&(n.source.removeEventListener(d.VIDEO_PLAY,this._onVideoPlay),n.source.removeEventListener(d.VIDEO_PAUSE,this._onVideoPause)),this._isCursorInside=!1,this._isGrabbing=!1,this._video=null,this._targetEl=null)}show(){this._clearHideTimer(),this._controlBar.containerEl.classList.remove(this._hiddenClass)}showTemporaliy(){this.show(),this._hideAfterDelay(this._idleDelay)}hide(){this._clearHideTimer(),this._controlBar.containerEl.classList.add(this._hiddenClass)}_clearHideTimer(){this._timer&&(window.clearTimeout(this._timer),this._timer=-1)}_hideAfterDelay(e=this._delay){this._isGrabbing||!this._isFullscreen&&this._isCursorInside||(this._clearHideTimer(),e<=0?this.hide():this._timer=window.setTimeout(()=>{this.hide()},e))}_addFullscreenHandlers(){Ki.forEach(e=>{document.addEventListener(e,this._onFullscreenChange)})}_removeFullscreenHandlers(){Ki.forEach(e=>{document.removeEventListener(e,this._onFullscreenChange)})}}class Zr{constructor(){this._onKeyDown=e=>{var t=this._video;if(t){e.preventDefault(),e.stopPropagation();var n=t.source,i=null!=e.keyCode?Ui[e.keyCode]:Hi[e.key];switch(i){case"LEFT":case"RIGHT":return this._changeVideoTime(n,"RIGHT"===i);case"UP":case"DOWN":return this._changeVideoVolume(n,"UP"===i)}(32===e.keyCode||" "===e.key)&&this._toggleVideo(t)}}}enable(e,t){this._video=t,e.addEventListener(d.KEY_DOWN,this._onKeyDown,!0)}disable(e){this._video=null,e.removeEventListener(d.KEY_DOWN,this._onKeyDown,!0)}_changeVideoTime(e,t){e.currentTime+=t?5:-5,e.dispatchEvent(new CustomEvent(b,{detail:{time:e.currentTime}}))}_changeVideoVolume(e,t){t=t?.1:-.1;e.muted?e.volume=S(t,0,1):e.volume=S(e.volume+t,0,1),0<e.volume?e.muted=!1:e.muted=!0}_toggleVideo(e){e.isPaused()?e.source.play():e.source.pause()}}class x{get rootEl(){return this._rootEl}get containerEl(){return this._containerEl}get backgroundEl(){return this._bgEl}get items(){return this._items}get customItems(){return this._customItems}constructor({autoHide:e,showBackground:t,clickToPlay:n=!0,keyboardControls:i=!0,progressBar:r=!0,playButton:a=!0,volumeButton:o=!0,fullscreenButton:s=!0,videoTime:l=!0,pieView:u=!0,vrButton:c=!0,gyroButton:h=!0,className:d={},customItems:f=[]}={}){this._onStaticClick=({target:e,isTouch:t})=>{var n=this._autoHider;t?n.enabled&&(n.hidden?n.showTemporaliy():n.hide()):this.clickToPlay&&(n=null==(t=e.mesh)?void 0:t.getTexture())&&n.isVideo()&&(n.isPaused()?n.source.play():n.source.pause())},this._onNewSrcLoad=({target:t})=>{const n=this._items;this._updateBackground(t),this._updateAutoHide(t),this._updateKeyboardHandler(t),Object.keys(n).forEach(e=>{n[e].forEach(e=>{e.destroy(t,this),e.init(t,this)})})},this.autoHide=e,this.showBackground=t,this.clickToPlay=n,this.keyboardControls=i,this.progressBar=r,this.playButton=a,this.volumeButton=o,this.fullscreenButton=s,this.videoTime=l,this.pieView=u,this.vrButton=c,this.gyroButton=h,this.className=Object.assign(Object.assign({},x.DEFAULT_CLASS),d);n=null!=(t=d.CONTROLS_ROOT)?t:x.DEFAULT_CLASS.CONTROLS_ROOT;this._rootEl=T(n),this._createPositionWrappers(),this._items=Object.keys(x.POSITION).reduce((e,t)=>(e[x.POSITION[t]]=[],e),{}),this._customItems=f,this._autoHider=new Jr(this,w(e)),this._videoControl=new Zr,f.forEach(e=>{this._items[e.position].push(e)})}init(e){var t=e.rootEl,n=this._rootEl,i=this._createDefaultItems();this._updateBackground(e),this._updateAutoHide(e),this._updateKeyboardHandler(e),t.appendChild(n),this._addItem(e,i),this._addItem(e,this._customItems),e.on(P.PROJECTION_CHANGE,this._onNewSrcLoad),e.on(P.STATIC_CLICK,this._onStaticClick)}destroy(t){var e=t.rootEl,n=this._rootEl;const i=this._items;n.parentElement===e&&e.removeChild(n),Object.keys(i).forEach(e=>{i[e].forEach(e=>{e.destroy(t,this)}),i[e]=[]}),this._clearItemElements(),this._autoHider.disable(t),this._videoControl.disable(e),t.off(P.PROJECTION_CHANGE,this._onNewSrcLoad),t.off(P.STATIC_CLICK,this._onStaticClick)}_addItem(e,t){for(const o of t){var n,i=this._items[o.position],r=this._wrapperEl[o.position],a=((t,n)=>{for(let e=0;e<t.length;e++)if(n(t[e]))return e;return-1})(i,e=>e.order>o.order);0<=a?(n=i[a].element,i.splice(a,0,o),r.insertBefore(o.element,n)):(i.push(o),r.appendChild(o.element)),o.init(e,this)}}_createPositionWrappers(){var e=Object.assign(Object.assign({},x.DEFAULT_CLASS),this.className),t=this._rootEl,n=T(e.CONTROLS_BG),i=T(e.CONTROLS_FLOAT_LEFT),r=T(e.CONTROLS_FLOAT_RIGHT),a=(t.appendChild(i),t.appendChild(r),T(e.CONTROLS_MAIN)),o=T(e.CONTROLS_TOP),s=T(e.CONTROLS_BOTTOM),l=T(e.CONTROLS_MID),u=T(e.CONTROLS_LEFT),e=T(e.CONTROLS_RIGHT);l.appendChild(u),l.appendChild(e),a.appendChild(n),a.appendChild(o),a.appendChild(l),a.appendChild(s),t.appendChild(a),this._bgEl=n,this._containerEl=a,this._wrapperEl={[x.POSITION.MAIN_TOP]:o,[x.POSITION.MAIN_LEFT]:u,[x.POSITION.MAIN_RIGHT]:e,[x.POSITION.MAIN_BOTTOM]:s,[x.POSITION.TOP_LEFT]:i,[x.POSITION.TOP_RIGHT]:r}}_clearItemElements(){Object.keys(x.POSITION).map(e=>x.POSITION[e]).map(e=>this._wrapperEl[e]).forEach(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})}_updateAutoHide(e){var t=this.autoHide,n=this._autoHider;null!=t?t?n.enable(e):n.disable(e):(t=null==(t=e.mesh)?void 0:t.getTexture())&&t.isVideo()?n.enable(e):n.disable(e)}_updateBackground(e){var t=this._bgEl,n=this.showBackground,i=null!=(i=this.className.HIDDEN)?i:x.DEFAULT_CLASS.HIDDEN;null!=n?n?t.classList.remove(i):t.classList.add(i):(e=null==(n=e.mesh)?void 0:n.getTexture())&&e.isVideo()?t.classList.remove(i):t.classList.add(i)}_updateKeyboardHandler(e){var t=e.rootEl,n=this._videoControl,e=null==(e=e.mesh)?void 0:e.getTexture();this.keyboardControls&&e&&e.isVideo()?n.enable(t,e):n.disable(t)}_createDefaultItems(){var e=[];return this.progressBar&&e.push(new Hr(w(this.progressBar))),this.playButton&&e.push(new Yr(w(this.playButton))),this.volumeButton&&e.push(new zr(w(this.volumeButton))),this.gyroButton&&e.push(new Xr(w(this.gyroButton))),this.vrButton&&e.push(new Qr(w(this.vrButton))),this.fullscreenButton&&e.push(new Wr(w(this.fullscreenButton))),this.videoTime&&e.push(new Kr(w(this.videoTime))),this.pieView&&e.push(new qr(w(this.pieView))),e}}x.DEFAULT_CLASS=Gr,x.POSITION=M;class $r{constructor({src:e,video:t=!1}){this.src=e,this.video=t}updateCamera(e){e.resetRange()}updateControl(e){e.ignoreZoomScale=!1}}class ea{constructor(){this.needsUpdate=!0}destroy(e){}}class ta extends jr{constructor(e,t){super(),this.vao=e,this.program=t}destroy(e){e.releaseVAO(this.vao),e.releaseShaderResources(this.program)}getTexture(){return this.program.uniforms.uTexture.texture}}class na{constructor(e,t,n,i){this.program=e.createProgram(t,n),this.uniforms=i,this.uniformLocations=e.getUniformLocations(this.program,i)}}class ia{constructor(e,t){this.data=e,this.itemSize=t,this.count=e.length/t}}class ra{constructor(e,t,n){this.vertices=new ia(new Float32Array(e),3),this.indicies=new ia(new Uint16Array(t),1),this.uvs=new ia(new Float32Array(n),2)}}class aa extends ea{constructor(e,t){super(),this.texture=t,this._webglTexture=e.createWebGLTexture(t)}destroy(e){this.texture.destroy(),e.deleteTexture(this._webglTexture)}update(e,t,n){var i=this.texture,r=i.isVideo();e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.uniform1i(t,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._webglTexture),!r&&n?e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,i.source):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i.source),r||(this.needsUpdate=!1)}}var oa="#define GLSLIFY 1\nattribute vec3 position;attribute vec2 uv;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying highp vec2 vUV;void main(){vUV=uv;gl_Position=uPMatrix*uMVMatrix*vec4(position,1.0);}",sa="#define GLSLIFY 1\nuniform sampler2D uTexture;varying highp vec2 vUV;void main(){gl_FragColor=texture2D(uTexture,vUV.st);}";class la extends ra{constructor(){var e=-.5*Math.PI,t=[],n=[],i=[];let r,a;for(r=0;r<=60;r++){var o=(r/60-.5)*Math.PI,s=Math.sin(o),l=Math.cos(o);for(a=0;a<=60;a++){var u=2*(a/60-.5)*Math.PI+e,c=Math.sin(u),u=Math.cos(u)*l,h=s,c=c*l,d=a/60,f=r/60;t.push(d,f),n.push(u,h,c),60!==a&&60!==r&&(d=61*r+a,i.push(d,d+1,f=d+60+1,f,d+1,f+1))}}super(n,i,t)}}class ua extends $r{constructor(e){super(e)}createMesh(e,t){var t={uTexture:new aa(e,t)},n=new la,t=new na(e,oa,sa,t),e=e.createVAO(n,t);return new ta(e,t)}}class ca extends ea{constructor(e){super(),this.val=e}update(e,t){e.uniform1f(t,this.val),this.needsUpdate=!1}}class ha extends ea{constructor(e){super(),this.val=e}update(e,t){e.uniform4fv(t,this.val.reduce((e,t)=>[...e,...t],[])),this.needsUpdate=!1}}(class pa extends $r{constructor(e){super(e),this._mode=e.mode}createMesh(e,t){let n,i;i=this._mode===pa.MODE.LEFT_RIGHT?(n=[.5,1,0,0],[.5,1,.5,0]):(n=[1,.5,0,0],[1,.5,0,.5]);var t={uTexture:new aa(e,t),uEye:new ca(0),uTexScaleOffset:new ha([n,i])},r=new la,t=new na(e,"#define GLSLIFY 1\nattribute vec3 position;attribute vec2 uv;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform vec4 uTexScaleOffset[2];uniform float uEye;varying highp vec2 vUV;void main(){vec4 scaleOffset=uTexScaleOffset[int(uEye)];vUV=uv.xy*scaleOffset.xy+scaleOffset.zw;gl_Position=uPMatrix*uMVMatrix*vec4(position,1.0);}",sa,t),e=e.createVAO(r,t);return new ta(e,t)}}).MODE={LEFT_RIGHT:"left_right",TOP_BOTTOM:"top_bottom"};const da={ATTACH_SUCCESS:0,ATTACH_FAILED_NOT_VIDEO_OR_CONTAINER:1,LOAD_AR_FALIED_NOT_CONTAINER:2};F.a=class{constructor(e,t){this.video=e.video,this.viewer=null,this.container=e.container,this.autoPlay=null==e.autoPlay||e.autoPlay,this.viewerContainer=null,this.viewOptions=t||{},this.viewerCanvas=null,this.attachVr()}get vrViewer(){return{animateTo:this.animateTo.bind(this),enterVR:this.enterVR.bind(this),exitVR:this.exitVR.bind(this),gyro:this.gyro.bind(this),vr:this.vr.bind(this)}}attachVr(){return this.video&&this.container?(this._createViewerContainer(),this._loadVr(),da.ATTACH_SUCCESS):da.ATTACH_FAILED_NOT_VIDEO_OR_CONTAINER}_loadVr(){if(!this.viewerContainer)return da.LOAD_AR_FALIED_NOT_CONTAINER;this.container.classList.add("vr-container"),this.viewer=new Ur("#"+this.viewerContainer.id,{...this.viewOptions,gyro:new D(!0),plugins:[new x({autoHide:!1,showBackground:!1,progressBar:!1,playButton:!1,volumeButton:!1,fullscreenButton:!1,videoTime:!1,pieView:{order:0},gyroButton:{position:"top-right",order:1},vrButton:{position:"top-right",order:2}})]})}loadVideo(){this.viewer.load(new ua({src:this.video,video:{autoplay:this.autoPlay}}))}_createViewerContainer(){this.viewerContainer=document.createElement("div"),this.viewerContainer.className="view360-container",this.viewerContainer.id=this.container.id+"_viewer",this.viewerCanvas=document.createElement("canvas"),this.viewerCanvas.className="view360-canvas",this.viewerContainer.appendChild(this.viewerCanvas),this.viewerContainer.appendChild(this.video),this.video.style.zIndex="-1",this.container.insertBefore(this.viewerContainer,this.container.firstChild)}animateTo(e){this.viewer.camera.animateTo(e)}gyro(){return this.viewer.gyro.isAvailable=async()=>D.isAvailable(),this.viewer.gyro.requestSensorPermission=async()=>D.requestSensorPermission(),this.viewer.gyro}vr(){return this.viewer.vr}enterVR(){this.video.style.zIndex="-1",this.viewerContainer.querySelector(".view360-controls").style.display="block",this.container.classList.add("vr-container")}exitVR(){this.video.style.zIndex="1",this.viewerContainer.querySelector(".view360-controls").style.display="none",this.container.classList.remove("vr-container")}destroy(){this.video&&this.video.remove&&this.video.remove(),this.viewerContainer&&this.viewerContainer.removeChild(this.viewerCanvas),this.container&&this.container.removeChild(this.viewerContainer),this.viewer&&this.viewer.destroy(),this.viewer=null,this.viewerContainer=null}}},,,,function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var t=n(22),i=n.n(t);function r(){return i()('/*! WebPlayer built @2024/5/8 16:07:54 */!function(r){var s={};function a(e){var t;return(s[e]||(t=s[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,a),t.l=!0,t)).exports}a.m=r,a.c=s,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2)}([function(e,t){e.exports={DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNEL:1,H264AUD:[0,0,0,1,9,224],H265AUD:[0,0,0,1,70,1,80],DEF_AAC:"aac",DEF_MP3:"mp3",DEF_H265:"h265",DEF_HEVC:"hevc",DEF_H264:"h264",DEF_AVC:"avc",CODEC_OFFSET_TABLE:["hevc","h265","avc","h264","aac","mp3"]}},function(e,t,r){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,r){"use strict";r.r(t);const s={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},a={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"open context failed",OPEN_MEDIA_FAILED:"failed to open media"},n={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError"};const E={WASM_LOAD_FINISH:0,DECODE_FINISH:1,DEOCDE_INIT_FINISH:2,SET_FRAME:3,WASM_POST_RUN:11,DEMUXER_INIT_FINISH:12,POST_DEMUXER_INFO:13,DEMUXER_FINISH:14,DEMUXER_ERROR:20,BATCH_FINISH_FLAG:21,WAMS_ERROR:111},i={INIT_DECODER:0,DECODE_VIDEO:1,RETURN_VIDEO_BUFFER:2,INIT_DEMUXER:11,DEMUXER_BOX:12,GET_DEMUXER_INFO:13,RELEASE_DECODE:14,RELEASE_DEMUXER:15,FINISH_FLAG:16,LOAD_WAMS_JS:111};var t=r(1),o=r.n(t),t=r(0),m=r.n(t);self.Module={onRuntimeInitialized:function(){self.decoder&&self.decoder.onWasmLoaded()},postRun:function(){self.decoder&&self.decoder.onPostRun()},onAbort:function(e){self.postMessage({t:E.WAMS_ERROR,data:{msg:""+a.WASM_ERROR+e,errorType:s.NOT_SUPPORT,event:n.WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}},self.wasmPath=null;self.onmessage=e=>{var t=e["data"];switch(t.t){case i.INIT_DECODER:self.decoder.initDecoder(t.data);break;case i.DECODE_VIDEO:self.decoder.decodeVideo(t);break;case i.RETURN_VIDEO_BUFFER:self.decoder.returnVideoBuffer(t.f);break;case i.INIT_DEMUXER:self.decoder.initDemuxer();break;case i.DEMUXER_BOX:self.decoder.demuxCore(t);break;case i.GET_DEMUXER_INFO:self.decoder.getReadLayer(t);break;case i.RELEASE_DECODE:self.decoder.release();break;case i.RELEASE_DEMUXER:self.decoder.releaseTsDemuxer();case i.LOAD_WAMS_JS:self.decoder.loadJs(t.pathUrl,t.isSafari);break;case i.FINISH_FLAG:self.postMessage({t:E.BATCH_FINISH_FLAG})}},self.decoder=new class{constructor(){this.wasmLoaded=!1,this.videoCallback=null,this.vcodecerPtr=null,this.playerData=null,this.videoFrameBuffer=[],this.time=null,this.decodeTime=null,this.oneScondTime=(new Date).getTime(),this.frameRate=null,this.naluLayer={vps:null,sps:null,pps:null,sei:null},this.vlcLayer={vlc:null},this.offsetDemux=null,this.mediaAttr={},this.extensionInfo={vWidth:0,vHeight:0},this.isReadDemuxData=!1}initDecoder(e){this.playerData=e,this.vcodecerPtr=Module.cwrap("registerPlayer","number",["string","string"])(e.token,e.playerVersion);let d=this;this.videoCallback=Module.addFunction(function(e,t,r,s,a,n,i,o,l){var e=Module.HEAPU8.subarray(e,e+s*o),t=Module.HEAPU8.subarray(t,t+a*o/2),r=Module.HEAPU8.subarray(r,r+n*o/2);0<self.decoder.videoFrameBuffer.length&&self.decoder.videoFrameBuffer[0].y.length<s*o&&(self.decoder.videoFrameBuffer=[]);let u=null;0<self.decoder.videoFrameBuffer.length?((u={t:E.DECODE_FINISH,y:self.decoder.videoFrameBuffer[0].y,u:self.decoder.videoFrameBuffer[0].u,v:self.decoder.videoFrameBuffer[0].v,height:o,width:s,ptsSec:+l/1e3,stride_y:s,stride_u:a,stride_v:n}).y.set(e),u.u.set(t),u.v.set(r),self.decoder.videoFrameBuffer.shift()):u={t:E.DECODE_FINISH,y:new Uint8Array(e),u:new Uint8Array(t),v:new Uint8Array(r),height:o,width:s,ptsSec:+l/1e3,stride_y:s,stride_u:a,stride_v:n},d.frameRate++,d.oneScondTime&&1e3<(new Date).getTime()-d.oneScondTime&&(e=JSON.parse(JSON.stringify(d.frameRate)),d.frameRate=0,d.oneScondTime=(new Date).getTime(),self.postMessage({t:E.SET_FRAME,frameRate:e,decodeTime:parseInt(1e3/e)})),self.postMessage(u,[u.y.buffer,u.u.buffer,u.v.buffer])},"viiiiiiiid"),Module.cwrap("setCodecType","number",["number","number","number"])(this.vcodecerPtr,e.videoCodec,this.videoCallback),Module.cwrap("initializeDecoder","number",["number"])(this.vcodecerPtr),self.postMessage({t:E.DEOCDE_INIT_FINISH})}decodeVideo(e){var{nalBuf:e,pts:t,flushDecoder:r}=e,s=Module._malloc(e.length),t=(Module.HEAP8.set(e,s),parseInt(1e3*t));Module.cwrap("decodeCodecContext","number",["number","number","number","number","number"])(this.vcodecerPtr,s,e.length,t,r),Module._free(s)}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:E.WASM_LOAD_FINISH}))}returnVideoBuffer(e){this.videoFrameBuffer.length<10&&this.videoFrameBuffer.push(e)}loadJs(e,t){var r=o.a.simd(),r=navigator.userAgent.toLocaleLowerCase().includes("iphone")?e+"missile-min.js":r&&!t?e+"missile-simd.js":e+"missile.js";self.wasmPath=e,self.importScripts(r)}onPostRun(){self.postMessage({t:E.WASM_POST_RUN})}initDemuxer(){Module.cwrap("initTsMissile","number",[])(),Module.cwrap("initializeDemuxer","number",[])(),self.postMessage({t:E.DEMUXER_INIT_FINISH})}releaseTsDemuxer(){Module.cwrap("exitTsMissile","number",[])()}releaseOffset(){void 0!==this.offsetDemux&&null!==this.offsetDemux&&(Module._free(this.offsetDemux),this.offsetDemux=null)}demuxBox(e){var{d:e,isLive:t}=e,e=(this.offsetDemux=Module._malloc(e.length),Module.HEAP8.set(e,this.offsetDemux),Module.cwrap("demuxBox","number",["number","number","number"])(this.offsetDemux,e.length,t));0<=e?(this.setMediaInfo(),this.setExtensionInfo(),postMessage({t:E.DEMUXER_FINISH,mediaAttr:this.mediaAttr,extensionInfo:this.extensionInfo})):postMessage({t:E.DEMUXER_ERROR,type:"demux",message:"demux error"}),this.releaseOffset()}setMediaInfo(){var e=Module.cwrap("getMediaInfo","number",[])(),t=Module.HEAPU32[e/4],r=Module.HEAPU32[e/4+1],s=Module.HEAPF64[e/8+1],a=Module.HEAPF64[e/8+1+1],n=Module.HEAPF64[e/8+1+1+1],i=Module.HEAPF64[e/8+1+1+1+1],e=Module.HEAPU32[e/4+2+2+2+2+2],s=(this.mediaAttr.vFps=s,this.mediaAttr.vGop=e,this.mediaAttr.vDuration=a,this.mediaAttr.aDuration=n,this.mediaAttr.duration=i,Module.cwrap("getAudioCodecID","number",[])()),e=(0<=s?(this.mediaAttr.aCodec=m.a.CODEC_OFFSET_TABLE[s],this.mediaAttr.sampleRate=0<t?t:m.a.DEFAULT_SAMPLERATE,this.mediaAttr.sampleChannel=0<=r?r:m.a.DEFAULT_CHANNEL):(this.mediaAttr.sampleRate=0,this.mediaAttr.sampleChannel=0,this.mediaAttr.audioNone=!0),Module.cwrap("getVideoCodecID","number",[])());0<=e&&(this.mediaAttr.vCodec=m.a.CODEC_OFFSET_TABLE[e])}setExtensionInfo(){var e=Module.cwrap("getExtensionInfo","number",[])(),t=Module.HEAPU32[e/4],e=Module.HEAPU32[e/4+1];this.extensionInfo.vWidth=t,this.extensionInfo.vHeight=e}demuxCore(e){this.releaseOffset(),this.refreshDemuxer(),this.demuxBox(e)}refreshDemuxer(){this.releaseTsDemuxer(),this.initDemuxer()}getReadLayer(){var e=Module.cwrap("getPacket","number",[])(),t=Module.HEAPU32[e/4],r=Module.HEAPU32[e/4+1],s=Module.HEAPF64[e/8+1],a=Module.HEAPF64[e/8+1+1],n=Module.HEAPU32[e/4+1+1+2+2];if(0==t||1==t){var e=Module.HEAPU32[e/4+1+1+2+2+1],e=Module.HEAPU8.subarray(e,e+r),i=new Uint8Array(e),o=Module.cwrap("getSPSLen","number",[])(),l=Module.cwrap("getSPS","number",[])();if(!(o<0)){var u,l=Module.HEAPU8.subarray(l,l+o),o=(this.naluLayer.sps=new Uint8Array(o),this.naluLayer.sps.set(l,0),Module.cwrap("getPPSLen","number",[])()),d=Module.cwrap("getPPS","number",[])(),d=Module.HEAPU8.subarray(d,d+o),o=(this.naluLayer.pps=new Uint8Array(o),this.naluLayer.pps.set(d,0),Module.cwrap("getSEILen","number",[])()),c=Module.cwrap("getSEI","number",[])(),c=Module.HEAPU8.subarray(c,c+o),o=(this.naluLayer.sei=new Uint8Array(o),this.naluLayer.sei.set(c,0),Module.cwrap("getVLCLen","number",[])()),f=Module.cwrap("getVLC","number",[])(),f=Module.HEAPU8.subarray(f,f+o);this.vlcLayer.vlc=new Uint8Array(o),this.vlcLayer.vlc.set(f,0),this.mediaAttr.vCodec==m.a.DEF_HEVC||this.mediaAttr.vCodec==m.a.DEF_H265?(o=Module.cwrap("getVPSLen","number",[])(),u=Module.cwrap("getVPS","number",[])(),u=Module.HEAPU8.subarray(u,u+o),this.naluLayer.vps=new Uint8Array(o),this.naluLayer.vps.set(u,0),Module._free(u),u=null):this.mediaAttr.vCodec!=m.a.DEF_AVC&&(this.mediaAttr.vCodec,m.a.DEF_H264);try{postMessage({t:E.POST_DEMUXER_INFO,type:t,size:r,ptime:s,dtime:a,keyframe:n,src:i,layer:{nalu:this.naluLayer,vlc:this.vlcLayer}},[i.buffer,this.vlcLayer.vlc.buffer]),this.getReadLayer()}catch(e){}Module._free(e),Module._free(l),Module._free(d),Module._free(c),Module._free(f)}}}release(){Module.cwrap("release","number",["number"])(this.vcodecerPtr),Module.cwrap("exitMissile","number",["number"])(this.vcodecerPtr),Module.HEAP8&&Module.HEAP8.buffer&&(Module.HEAP8.buffer=null),Module=null}}}]);',"Worker",void 0,n.p+"decoder.worker.worker.js")}},function(e,t){e.exports={PLAYER_VERSION:"4.3.1.0"}},function(e,t,n){const o=n(38);e.exports=()=>{let a={videoBuffer:[],audioBuffer:[],idrIdxBuffer:[],videoptsec:-1,appendFrame:(e,t,n=!0,i=!1)=>{t=new o.BufferFrame(e,i,t,n);let r=parseInt(e);return n?(r==a.videoptsec&&(r+=1),a.videoBuffer.length-1>=r?a.videoBuffer[r].push(t):a.videoBuffer.push([t]),i&&!a.idrIdxBuffer.includes(e)&&a.idrIdxBuffer.push(e)):a.audioBuffer.length-1>=r&&null!=a.audioBuffer[r]&&null!=a.audioBuffer[r]?a.audioBuffer[r]&&a.audioBuffer[r].push(t):a.audioBuffer.push([t]),!0},appendFrameWithDts:(e,t,n,i=!0,r=!1)=>{e=o.ConstructWithDts(e,t,r,n,i),n=parseInt(t);return i?(a.videoBuffer.length-1>=n?a.videoBuffer[n].push(e):a.videoBuffer.push([e]),r&&!a.idrIdxBuffer.includes(t)&&a.idrIdxBuffer.push(t)):a.audioBuffer.length-1>=n&&null!=a.audioBuffer[n]&&null!=a.audioBuffer[n]?a.audioBuffer[n]&&a.audioBuffer[n].push(e):a.audioBuffer.push([e]),!0},appendFrameByBufferFrame:e=>{var t=e.pts,n=parseInt(t);return e.video?(a.videoBuffer.length-1>=n?a.videoBuffer[n].push(e):a.videoBuffer.push([e]),isKey&&!a.idrIdxBuffer.includes(t)&&a.idrIdxBuffer.push(t)):a.audioBuffer.length-1>=n?a.audioBuffer[n].push(e):a.audioBuffer.push([e]),!0},cleanPipeline:()=>{a.videoBuffer.length=0,a.audioBuffer.length=0,a.videoptsec=-1,a.videoBuffer=[],a.audioBuffer=[]},vFrame:(e=-1)=>{if(!(e<0||e>a.videoBuffer.length-1))return a.videoptsec=e,a.videoBuffer[e]},aFrame:(e=-1)=>{if(!(e<0||e>a.audioBuffer.length-1))return a.audioBuffer[e]},seekIDR:(e=-1)=>{if(e<0)return null;if(a.idrIdxBuffer.includes(e))return e;for(let t=0;t<a.idrIdxBuffer.length;t++)if(t===a.idrIdxBuffer.length-1||a.idrIdxBuffer[t]<e&&a.idrIdxBuffer[t+1]>e||0===t&&a.idrIdxBuffer[t]>=e){for(let e=1;0<=e;e--){var n=t-e;if(0<=n)return a.idrIdxBuffer[n]}return a.idrIdxBuffer[t]}},remove:()=>{a.audioBuffer=[],a.videoBuffer=[],a.idrIdxBuffer=[]}};return a}},function(e,t,n){"use strict";t.__esModule=!0;var l=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function u(e,t){for(var t=t&&t.loc,n=void 0,i=void 0,r=void 0,a=void 0,o=(t&&(n=t.start.line,i=t.end.line,r=t.start.column,a=t.end.column,e+=" - "+n+":"+r),Error.prototype.constructor.call(this,e)),s=0;s<l.length;s++)this[l[s]]=o[l[s]];Error.captureStackTrace&&Error.captureStackTrace(this,u);try{t&&(this.lineNumber=n,this.endLineNumber=i,Object.defineProperty?(Object.defineProperty(this,"column",{value:r,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:a,enumerable:!0})):(this.column=r,this.endColumn=a))}catch(e){}}u.prototype=new Error,t.default=u,e.exports=t.default},,function(e,t,n){n=[n(15),n(143)],t=function(s,a){function o(e,t){if(null!=e){void 0===e.length&&(e=[e]);var n,i={};for(n in t)i[n]=function(e,t,n){if(""===t||null==t)return"";n=n?" !important":"";if("string"==typeof t&&isNaN(t))return/png|gif|jpe?g/i.test(t)&&t.indexOf("url")<0?"url("+t+")":t+n;if(0===t||"z-index"===e||"opacity"===e)return t+n;if(/color/i.test(e))return"#"+s.pad(t.toString(16).replace(/^0x/i,""),6)+n;return Math.ceil(t)+"px"+n}(n,t[n]);for(var r=0;r<e.length;r++){var a,o=e[r];if(null!=o)for(n in i)a=function(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}(n),o.style[a]!==i[n]&&(o.style[a]=i[n])}}}return{css:function(e,t,n){n=n||"all-players";var i,r="";"object"==typeof t?(i=document.createElement("div"),o(i,t),r="{"+i.style.cssText+"}"):"string"==typeof t&&(r=t),a.style([[e,e+r]],n)},style:o,clearCss:a.clear,transform:function(e,t){o(e,{transform:t,webkitTransform:t,msTransform:t,mozTransform:t,oTransform:t})},animation:function(e,t){o(e,{animation:t,webkitAnimation:t,msAnimation:t,mozAnimation:t,oAnimation:t})},hexToRgba:function(e,t){var n="rgb",e=(e?3===(e=String(e).replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)):e="000000",[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]);return void 0!==t&&100!==t&&(n+="a",e.push(t/100)),n+"("+e.join(",")+")"}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){return"4.4.2.1"}.apply(t,[]);void 0!==t&&(e.exports=t)},function(t,e,n){!function(e){n(36);e.CACHE_APPEND_STATUS_CODE={FAILED:-1,OVERFLOW:-2,OK:0,NOT_FULL:1,FULL:2,NULL:3},t.exports=(e=60)=>{let n={limit:e,yuvCache:[],appendCacheByCacheYuv:e=>{e.pts;n.yuvCache.push(e)},getState:()=>n.yuvCache.length<=0?CACHE_APPEND_STATUS_CODE.NULL:n.yuvCache.length>=n.limit?CACHE_APPEND_STATUS_CODE.FULL:CACHE_APPEND_STATUS_CODE.NOT_FULL,cleanPipeline:()=>{n.yuvCache.length=0},vYuv:()=>n.yuvCache.length<=0?null:n.yuvCache.shift(),getYuv:()=>n.yuvCache.length<=0?null:n.yuvCache[0],deletePassed:t=>{if(!t)return!1;n.yuvCache=n.yuvCache.filter(e=>{return e.pts>t})}};return n}}.call(this,n(27))},function(e,t){t.CacheYuvStruct=class{constructor(e,t,n,i,r,a){this.pts=e,this.width=t,this.height=n,this.y=i,this.u=r,this.v=a}setYuv(e,t,n,i,r,a){this.pts=e,this.width=t,this.height=n,this.y=i,this.u=r,this.v=a}}},function(e,t,n){n(12);function o(e){this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}o.prototype.bind=function(e,t,n){var i=this.gl;i.activeTexture([i.TEXTURE0,i.TEXTURE1,i.TEXTURE2][e]),i.bindTexture(i.TEXTURE_2D,this.texture),i.uniform1i(i.getUniformLocation(t,n),e)},o.prototype.fill=function(e,t,n){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,e,t,0,i.LUMINANCE,i.UNSIGNED_BYTE,n)},e.exports={renderFrame:function(e,t,n,i,r,a){e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.y.fill(r,a,t),e.u.fill(r>>1,a>>1,n),e.v.fill(r>>1,a>>1,i),e.drawArrays(e.TRIANGLE_STRIP,0,4)},setupCanvas:function(e,t){var n,i,r,a;return(e=e.getContext("webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0}))&&(n=e.createProgram(),i=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {"," gl_Position = aVertexPosition;"," vTextureCoord = aTextureCoord;","}"].join("\n"),r=e.createShader(e.VERTEX_SHADER),e.shaderSource(r,i),e.compileShader(r),i=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),a=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(a,i),e.compileShader(a),e.attachShader(n,r),e.attachShader(n,a),e.linkProgram(n),e.useProgram(n),e.getProgramParameter(n,e.LINK_STATUS),i=e.getAttribLocation(n,"aVertexPosition"),e.enableVertexAttribArray(i),r=e.getAttribLocation(n,"aTextureCoord"),e.enableVertexAttribArray(r),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW),e.vertexAttribPointer(i,3,e.FLOAT,!1,0,0),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.y=new o(e),e.u=new o(e),e.v=new o(e),e.y.bind(0,n,"YTexture"),e.u.bind(1,n,"UTexture"),e.v.bind(2,n,"VTexture")),e},releaseContext:function(e){e.deleteTexture(e.y.texture),e.deleteTexture(e.u.texture),e.deleteTexture(e.v.texture)}}},function(e,t){class a{constructor(e,t,n,i){this.pts=e,this.dts=e,this.isKey=t,this.frameData=n,this.video=i}setFrame(e,t,n,i){this.pts=e,this.isKey=t,this.frameData=n,this.video=i}}t.BufferFrame=a,t.ConstructWithDts=(e,t,n,i,r)=>{e=new a(e,n,i,r);return e.dts=t,e}},function(e,t,n){n=[n(63),n(1)],t=function(e,t){return e.extend({constructor:function(e){var t,n;this.el=document.createElement("div"),this.el.className="jw-icon jw-icon-tooltip "+e+" jw-button-color jw-reset jw-hidden",this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip","jw-icon-hd"===e?((t=document.createElement("span")).className="jw-hd-label",this.el.appendChild(t)):"jw-icon-playrate"===e?((t=document.createElement("span")).className="jw-playrate-label",this.el.appendChild(t)):"jw-icon-cc"===e?((t=document.createElement("span")).className="jw-cc-label",this.el.appendChild(t)):"jw-icon-qualityChange"===e?((n=document.createElement("span")).className="jw-qualityChange-label",this.el.appendChild(n)):"jw-icon-lang"===e&&((n=document.createElement("span")).className="jw-lang-label",this.el.appendChild(n)),this.el.appendChild(this.container)},addContent:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)},removeContent:function(){this.content&&(this.container.removeChild(this.content),this.content=null)},hasContent:function(){return!!this.content},element:function(){return this.el},openTooltip:function(e){this.trigger("open-"+this.componentType,e,{isOpen:!0}),this.isOpen=!0,t.toggleClass(this.el,this.openClass,this.isOpen)},closeTooltip:function(e){this.trigger("close-"+this.componentType,e,{isOpen:!1}),this.isOpen=!1,t.toggleClass(this.el,this.openClass,this.isOpen)},toggleOpenState:function(e){this.isOpen?this.closeTooltip(e):this.openTooltip(e)}})}.apply(t,n);void 0!==t&&(e.exports=t)},,,,,,function(e,t,n){n=[n(2),n(15)],t=function(n,i){var r={exists:function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},isHTTPS:function(){return 0===window.location.href.indexOf("https")},isRtmp:function(e,t){return e&&(0===e.indexOf("rtmp")||"rtmp"===t)},isHls:function(e,t){return e&&("m3u8"===i.extension(e)||"hls"===i.extension(e)||"hls"===t)},isFlv:function(e,t){return e&&("flv"===i.extension(e)||"flv"===t)},isMp4:function(e,t){return e&&("mp4"===i.extension(e)||"mp4"===t)},isMov:function(e,t){return e&&("mov"===i.extension(e)||"mov"===t)},isMpegTs:function(e,t){return e&&("ts"===i.extension(e)||"ts"===t)},isHtml5Flv:function(e,t=""){return r.isFlv(e,t)&&r.isFlvjsSupported()},isFlvjsSupported:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},isMutipleHls:function(e){if(n.isArray(e)&&1<e.length){var t=0;if(n.each(e,function(e){r.isHls(e.file,e.type)&&t++}),t===e.length)return!0}return!1},typeOf:function(e){var t;return null===e?"null":"object"==(t=typeof e)&&n.isArray(e)?"array":t},isMpd:function(e,t){return e&&("mpd"===i.extension(e)||"mpd"===t)},isRtc:function(e){return"rtc"==e},isMpd:function(e,t){return e&&("mpd"===i.extension(e)||"mpd"===t)},isMp3:function(e,t){return e&&("mp3"===i.extension(e)||"mp3"===t)},isAac:function(e,t){return e&&("aac"===i.extension(e)||"aac"===t)},isFlac:function(e,t){return e&&("flac"===i.extension(e)||"flac"===t)},isOgg:function(e,t){var n=document.createElement("audio").canPlayType('audio/ogg;codecs="vorbis"');return e&&("ogg"===i.extension(e)||"ogg"===t)&&n},isWav:function(e,t){return e&&("wav"===i.extension(e)||"wav"===t)},isOpus:function(e,t){return e&&("opus"===i.extension(e)||"opus"===t)}};return r}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){return{repo:"https://bce.bdstatic.com/jwplayer/",SkinsIncluded:["bce"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","seven","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(101),n(102),n(152),n(2)],t=function(i,r,a,o){function n(e){this.providers=r.slice(),this.config=e||{}}return n.registerProvider=function(e){var t=e.getName().name;if(!a[t]){if(!o.find(r,o.matches({name:t}))){if(!o.isFunction(e.supports))throw{message:"Tried to register a provider with an invalid object"};r.unshift({name:t,supports:e.supports})}function n(){}n.prototype=i,e.prototype=new n,a[t]=e}},n.load=function(e){return Promise.all(o.map(e,function(t){return new Promise(function(e){t.name,e()}).then(function(e){e&&n.registerProvider(e)})}))},o.extend(n.prototype,{providerSupports:function(e,t){return e.supports(t)},required:function(r,a){return r=r.slice(),o.compact(o.map(this.providers,function(e){for(var t=!1,n=r.length;n--;){var i=r[n],i=e.supports(i.sources[0],a);i&&r.splice(n,1),t=t||i}if(t)return e}))},choose:function(e){e=o.isObject(e)?e:{};for(var t=this.providers.length,n=0;n<t;n++){var i=this.providers[n];if(this.providerSupports(i,e))return{priority:t-n-1,name:i.name,type:e.type,provider:a[i.name]}}return null}}),n}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){const i=window.AudioContext||window.webkitAudioContext,a=n(5),o=n(12);e.exports=e=>{let r={options:{sampleRate:e.sampleRate||a.DEFAULT_SAMPLERATE,appendType:e.appendType||a.APPEND_TYPE_STREAM,playMode:e.playMode||a.AUDIO_MODE_SWAP},sourceChannel:-1,audioCtx:new i({latencyHint:"interactive",sampleRate:e.sampleRate}),gainNode:null,sourceList:[],startStatus:!1,sampleQueue:[],nextBuffer:null,playTimestamp:0,playStartTime:0,durationMs:-1,isLIVE:!1,voice:1,onLoadCache:null,videoPTS:null,isDecodeError:!1,shifter:null,playbackRate:1,isDestroy:!1,resetStartParam:()=>{r.playTimestamp=0,r.playStartTime=0},setOnLoadCache:e=>{r.onLoadCache=e},setDurationMs:(e=-1)=>{r.durationMs=e},setVoice:(e=1,t)=>{var n;"running"!=r.audioCtx.state&&(r.videoPTS=t,-1<(n=r.sampleQueue.findIndex(e=>e.pts>=t))&&r.sampleQueue.splice(0,n),r.audioCtx.resume()),r.voice=e,r.gainNode.gain.value=e},setPlaybackRate:(e=1)=>{r.playbackRate=e},setVideoPTS:e=>{r.videoPTS&&(r.videoPTS=e)},getAlignVPTS:()=>0===r.playStartTime?0:r.playTimestamp+(o.GetMsTime()-r.playStartTime)/1e3,swapSource:(e=-1,t=-1)=>{if(0==r.startStatus)return null;if(e<0||e>=r.sourceList.length)return null;if(t<0||t>=r.sourceList.length)return null;try{r.sourceChannel===e&&null!==r.sourceList[e]&&(r.sourceList[e].disconnect(r.gainNode),r.sourceList[e]=null)}catch(e){}r.sourceChannel=t;t=r.decodeSample(t,e);return-2==t&&r.isLIVE&&(r.getAlignVPTS()>=r.durationMs/1e3-.04?r.pause():null!==r.onLoadCache&&r.onLoadCache()),t},addSample:(e=null)=>!(null==e||!e||null==e||(0==r.sampleQueue.length&&(r.seekPos=e.pts),r.sampleQueue.push(e),0)),runNextBuffer:()=>{window.setInterval(()=>{if(!(null!=r.nextBuffer||r.sampleQueue.length<a.DEFAULT_CONSU_SAMPLE_LEN)){var t;r.nextBuffer={data:null,pts:-1};for(let e=0;e<a.DEFAULT_CONSU_SAMPLE_LEN;e++){t=r.sampleQueue.shift();let e=null;if(e=r.options.appendType==a.APPEND_TYPE_STREAM?t:t.data,r.nextBuffer.pts<0&&(r.nextBuffer.pts=t.pts),null==r.nextBuffer.data?r.nextBuffer.data=new Uint8Array(e):((t=new Uint8Array(e.length+r.nextBuffer.data.length)).set(r.nextBuffer.data,0),t.set(e,r.nextBuffer.data.length),r.nextBuffer.data=t),r.sampleQueue.length<=0)break;0}}},20)},decodeSample:(t=-1,n=-1)=>{if(t<0||t>=r.sourceList.length)return-1;if(null!=r.sourceList[t]&&null!=r.sourceList[t]&&r.sourceList[t]||(r.sourceList[t]=r.audioCtx.createBufferSource(),r.sourceList[t].onended=function(){var e=r.swapSource(t,n);-2!=e&&1!=e||r.isDestroy||r.play(!0)}),0==r.sampleQueue.length)return r.isLIVE?(r.sourceList[t].connect(r.gainNode),r.sourceList[t].start(),r.sourceList[t].onended=function(){r.swapSource(t,n)},r.sourceList[t].stop(),0):-2;if(r.sourceList[t].buffer)r.swapSource(t,n);else{if(null==r.nextBuffer||r.nextBuffer.data.length<1)return r.sourceList[t].connect(r.gainNode),r.sourceList[t].start(),r.sourceList[t].startState=!0,r.sourceList[t].stop(),1;var e=r.nextBuffer.data.buffer;(!r.videoPTS||r.videoPTS<=r.nextBuffer.pts)&&(r.videoPTS=null,r.playTimestamp=r.nextBuffer.pts,r.playStartTime=o.GetMsTime());try{r.audioCtx.decodeAudioData(e,function(e){null!==r.sourceList[t]&&(r.sourceList[t].playbackRate.value=r.playbackRate,r.sourceList[t].buffer=e,r.sourceList[t].connect(r.gainNode),r.sourceList[t].context.resume(),r.sourceList[t].start(),r.sourceList[t].startState=!0)},function(e){r.isDecodeError=!0})}catch(e){return r.nextBuffer=null,r.isDecodeError=!0,-3}r.nextBuffer=null}return 0},decodeWholeSamples:(t=-1)=>{if((r.sourceChannel=t)<0||t>=r.sourceList.length)return-1;if(null!=r.sourceList[t]&&null!=r.sourceList[t]&&r.sourceList[t]||(r.sourceList[t]=r.audioCtx.createBufferSource(),r.sourceList[t].onended=function(){}),0==r.sampleQueue.length)return-2;let n=null;var i;for(let e=0;e<r.sampleQueue.length;e++){i=r.sampleQueue.shift();let e=null;if(e=r.options.appendType==a.APPEND_TYPE_STREAM?i:i.data,n=null==n?new Uint8Array(e):((i=new Uint8Array(e.length+n.length)).set(n,0),i.set(e,n.length),i),r.sampleQueue.length<=0)break;0}var e=n;if(null==e||e.length<1)return r.sourceList[t].connect(r.gainNode),r.sourceList[t].start(),r.sourceList[t].stop(),1;e=e.buffer;try{r.audioCtx.decodeAudioData(e,function(e){r.sourceList[t].buffer=e,r.sourceList[t].connect(r.gainNode),r.audioCtx.resume(),r.sourceList[t].start(),r.sourceList[t].startState=!0},function(e){e.err})}catch(e){return alert("Crash[brower]! Please refresh your page"),-3}return 0},play:e=>{if(!r.isDecodeError&&(0==r.startStatus||e)){r.startStatus=!0;let e=0;"running"!=r.audioCtx.state&&r.audioCtx.resume(),-2!=(e=r.options.playMode==a.AUDIO_MODE_ONCE?r.decodeWholeSamples(0):r.swapSource(0,1))&&1!=e||r.isDestroy||(r.pause(),setTimeout(()=>{r.play()},50))}},pause:()=>{r.startStatus=!1;for(let e=0;e<r.sourceList.length;e++)if(void 0!==r.sourceList[e]&&null!==r.sourceList[e])try{void 0!==r.sourceList[e].buffer&&null!==r.sourceList[e].buffer&&(r.sourceList[e].stop(),r.sourceList[e].disconnect(r.gainNode)),r.sourceList[e]=null}catch(e){}},stop:()=>{r.pause(),r.cleanQueue(),r.nextBuffer=null,r.sourceChannel=-1,r.isDestroy=!0},cleanQueue:()=>{r.sampleQueue.length=0,r.nextBuffer=null;for(let e=0;e<r.sourceList.length;e++)try{void 0!==r.sourceList[e].buffer&&null!==r.sourceList[e].buffer&&(r.sourceList[e].stop(),r.sourceList[e].disconnect(r.gainNode)),r.sourceList[e]=null}catch(e){}},getLastData:()=>r.sampleQueue.slice(-1)[0],seek:t=>{r.nextBuffer=null,r.sampleQueue=r.sampleQueue.filter(e=>e.pts>=t)}};return r.sourceList.push(r.audioCtx.createBufferSource()),r.sourceList.push(r.audioCtx.createBufferSource()),r.sourceList[0].onended=function(){var e=r.swapSource(0,1);-2!=e&&1!=e||r.isDestroy||r.play(!0)},r.sourceList[1].onended=function(){var e=r.swapSource(1,0);-2!=e&&1!=e||r.isDestroy||r.play(!0)},r.gainNode=r.audioCtx.createGain(),r.gainNode.gain.value=r.voice,r.gainNode.connect(r.audioCtx.destination),"running"!=r.audioCtx.state&&r.audioCtx.resume(),r.runNextBuffer(),r}},function(e,t,n){n=[n(15)],t=function(t){return{localName:function(e){return e&&(e.localName||e.baseName)||""},textContent:function(e){return e?e.textContent?t.trim(e.textContent):e.text?t.trim(e.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t){t.default={zh:{DANMU:{DANMUSETTING:"弹幕设置",RESET:"重置",DANMUOPACITY:"不透明度",DANMUAREA:"显示区域",DANMUSPEED:"弹幕速度",DANMUFONT:"字体大小",INTELLIGENTBLOCKING:"智能挡板",MINIMAL:"极小",MODERATE:"适中",GREAT:"极大",QUARTERSCREEN:"1/4",THREEQUARTERSCREEN:"3/4",HALFSCREEN:"1/2",FULLSCREEN:"1"},PERFORMANCE:{FORMAT:"格式",FPS:"帧率",RESOLUTION:"分辨率",ENCODETYPE:"编码方式",BUFFEREND:"buffer水位线",FIRSETIME:"首帧时间",DECODEEFFICIENCY:"解码效率",DECODECONSUMPTION:"解码消耗"},HLSQUALITYCHANGE:{AUTO:"自动"},ERRORTIPS:{NOTSUPPORT:"音/视频格式不支持，或未找到可用资源"},LICENSE:{NO_APPID:"license验证失败:请在配置文件中填写appid",NO_LICENSE:"license验证失败:请在配置文件中配置licenseUrl",ERROR_LICENSE_URL:"license验证失败:签名校验错误",DOMAIN_FAIL:"license验证失败:证书与域名不匹配",IS_EXPIRED:"license验证失败:证书已过期",FETCH_ERROR:"license验证失败:读取不到证书",BASE_FUNC_NOT_SUPPORT:"该功能不支持,请升级为高级版证书",EXPIRED_COUNT_DOWM:"证书已过期:",DAY:"天"},MEMORYPLAY:{POSITION_TO:"已为您定位至"}},en:{DANMU:{DANMUSETTING:"Barrage settings",RESET:"Reset",DANMUOPACITY:"Opacity",DANMUAREA:"Display  area",DANMUSPEED:"Barrage speed",DANMUFONT:"Font size",INTELLIGENTBLOCKING:"Intelligent blocking",MINIMAL:"Minimal",MODERATE:"Moderate",GREAT:"Great",QUARTERSCREEN:"1/4",THREEQUARTERSCREEN:"3/4",HALFSCREEN:"1/2",FULLSCREEN:"1"},PERFORMANCE:{FORMAT:"format",FPS:"fps",RESOLUTION:"resolution",ENCODETYPE:"encodeType",BUFFEREND:"bufferEnd",FIRSETIME:"firstTime",DECODEEFFICIENCY:"decodeEfficiency",DECODECONSUMPTION:"decodeConsumption"},HLSQUALITYCHANGE:{AUTO:"Auto"},ERRORTIPS:{NOTSUPPORT:"Audio/video is not supported or no playable source found"},LICENSE:{NO_APPID:"license error:Lack appid.",NO_LICENSE:"license error:Lack license url.",ERROR_LICENSE_URL:"license error:License verification failed.",DOMAIN_FAIL:"license error:Domain verification failed.",IS_EXPIRED:"license error:The license has expired.",FETCH_ERROR:"license error:Get license data failed.",BASE_FUNC_NOT_SUPPORT:"This feature is not supported, please upgrade to the advanced version certificate",EXPIRED_COUNT_DOWM:"The license has expired:",DAY:"day"},MEMORYPLAY:{POSITION_TO:"Has located for you to "}}}},,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var t=n(22),i=n.n(t);function r(){return i()('/*! WebPlayer built @2024/5/8 16:07:54 */!function(r){var a={};function n(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}n.m=r,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,r){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,r){"use strict";r.r(t);const a={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},n={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"open context failed",OPEN_MEDIA_FAILED:"failed to open media"},i={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError"};const d={WASM_LOAD_FINISH:0,SNIFF_INIT_FINISH:1,POST_PROBEDATA:2,POST_NALUDATA:3,POST_AACDATA:4,POST_FRAMEDATA:5,POST_NALU_LENGTH:6,WAMS_ERROR:111},s={INIT_DECODER:0,PUSH_SNIFF_DATA:1,GET_SNIFF_PACKET:2,DECODE_VIDEO:3,GET_NALU_LENGTH:4,GET_SNIFF_FLV_PACKE:5,GET_BUFFER_LENGTH:6,PUSH_SNIFF_FLV_PACKET:7,RELEASE_SNIFF:8,LOAD_WAMS_JS:111};var t=r(0),l=r.n(t);self.Module={onRuntimeInitialized:function(){self.decoder&&self.decoder.onWasmLoaded()},onAbort:function(e){self.postMessage({t:d.WAMS_ERROR,data:{msg:""+n.WASM_ERROR+e,errorType:a.NOT_SUPPORT,event:i.WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}};self.onmessage=e=>{var t=e["data"];switch(t.t){case s.INIT_DECODER:self.decoder.initDecoder(t.data);break;case s.PUSH_SNIFF_DATA:self.decoder.pushSniffData(t.d,t.probeSize);break;case s.GET_SNIFF_PACKET:self.decoder.getSniffStreamPacket(t.p);break;case s.DECODE_VIDEO:self.decoder.decodeVideo(t);break;case s.GET_NALU_LENGTH:self.decoder.getNaluListLength();break;case s.GET_SNIFF_FLV_PACKE:self.decoder.getSniffHttpFlvPacket();break;case s.GET_BUFFER_LENGTH:self.decoder.getBufferLengthApi();break;case s.PUSH_SNIFF_FLV_PACKET:self.decoder.pushSniffHttpFlvData(t);break;case s.RELEASE_SNIFF:self.decoder.releaseSniffStream();break;case s.LOAD_WAMS_JS:self.decoder.loadJs(t.pathUrl,t.isSafari)}},self.decoder=new class{constructor(){this.wasmLoaded=!1,this.corePtr=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.time=null}initDecoder(e){let o=this;var{token:e,VersionModule:t,ignoreAudio:r,playModeEnum:a,defaultFps:n,mode:i}=e,e=(this.corePtr=Module.cwrap(1==i?"AVSniffHttpFlvInit":"AVSniffStreamInit","number",["string","string"])(e,t),1==i?"vdiidiiiiii":"vdiidiiiii"),t=(this._ptr_probeCallback=Module.addFunction(function(e,t,r,a,n,i,s,l,o,u=0){e={t:d.POST_PROBEDATA,duration:e,width:t,height:r,fps:a,audioIdx:n,sample_rate:i,channels:s,vcodec_name_id:l,sample_fmt:o,trans_to_gcore:u};self.postMessage(e)},e),this._ptr_frameCallback=Module.addFunction(function(e,t,r,a,n,i,s,l,o,u){e=Module.HEAPU8.subarray(e,e+a*l),t=Module.HEAPU8.subarray(t,t+n*l/2),r=Module.HEAPU8.subarray(r,r+i*l/2),e=new Uint8Array(e),t=new Uint8Array(t),r=new Uint8Array(r),e={t:d.POST_FRAMEDATA,buf_y:e,buf_u:t,buf_v:r,line1:a,line2:n,line3:i,width:s,height:l,pts:o,tag:u};self.postMessage(e,[e.buf_y.buffer,e.buf_u.buffer,e.buf_v.buffer])},"viiiiiiiidi"),1==i?"viiiiidd":"viiiiiddi");this._ptr_naluCallback=Module.addFunction(function(e,t,r,a,n,i,s,l){e=Module.HEAPU8.subarray(e,e+t),e=new Uint8Array(e),e={t:d.POST_NALUDATA,d:e,len:t,isKey:r,width:a,height:n,pts:i,dts:s,isRawStream:l};self.postMessage(e,[e.d.buffer]),o.time,o.time=(new Date).getTime()},t),this._ptr_sampleCallback=Module.addFunction(function(){},"vi"),this._ptr_aacCallback=Module.addFunction(function(e,t,r,a){e=Module.HEAPU8.subarray(e,e+t),e=new Uint8Array(e),e={t:d.POST_AACDATA,d:e,line1:t,channel:r,pts:a};self.postMessage(e,[e.d.buffer])},"viiid"),1==i?Module.cwrap("initializeSniffHttpFlvModule","number",["number","number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_frameCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback,r):Module.cwrap("initializeSniffStreamModuleWithAOpt","number",["number","number","number","number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_frameCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback,r,a,n),self.postMessage({t:d.SNIFF_INIT_FINISH})}pushSniffData(e,t){var e=new Uint8Array(e),r=Module._malloc(e.length);Module.HEAP8.set(e,r),Module.cwrap("pushSniffStreamData","number",["number","number","number","number"])(this.corePtr,r,e.length,t)}getSniffStreamPacket(e){(1==e?Module.cwrap("getSniffStreamPkg","number",["number"]):Module.cwrap("getSniffStreamPkgNoCheckProbe","number",["number"]))(this.corePtr)}getSniffHttpFlvPacket(){Module.cwrap("getSniffHttpFlvPkg","number",["number"])(this.corePtr)}decodeVideo(e){var{d:e,ptsMS:t,dtsMS:r,frameCallTag:a}=e,n=Module._malloc(e.length),n=(Module.HEAP8.set(e,n),Module.cwrap("decodeVideoFrame","number",["number","number","number","number","number"])(this.corePtr,n,e.length,t,r,a));self.postMessage({t:6,l:n})}getNaluListLength(){var e=Module.cwrap("naluLListLength","number",["number"])(this.corePtr);self.postMessage({t:d.POST_NALU_LENGTH,l:e})}getBufferLengthApi(){var e=Module.cwrap("getBufferLengthApi","number",["number"])(this.corePtr);self.postMessage({t:d.POST_NALU_LENGTH,l:e})}pushSniffHttpFlvData(e){var{d:e,probeSize:t}=e,r=Module._malloc(e.length);Module.HEAP8.set(e,r),Module.cwrap("pushSniffHttpFlvData","number",["number","number","number","number"])(this.corePtr,r,e.length,t)}releaseSniffStream(){void 0!==this.corePtr&&null!==this.corePtr&&(Module.cwrap("releaseSniffStream","number",["number"])(this.corePtr),this.corePtr=null)}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:d.WASM_LOAD_FINISH}))}loadJs(e,t){var r=l.a.simd(),r=navigator.userAgent.toLocaleLowerCase().includes("iphone")?e+"missile-min.js":r&&!t?e+"missile-simd.js":e+"missile.js";self.wasmPath=e,self.importScripts(r)}}}]);',"Worker",void 0,n.p+"cNativeCoreDecoder.worker.worker.js")}},,,,,,,function(e,t,n){n=[n(2),n(45)],t=function(t,s){var e={};function n(e){return t.some(e,function(e){return"parsererror"===e.nodeName})}return e.getAbsolutePath=function(e,t){if(s.exists(t)||(t=document.location.href),s.exists(e)){if(/^(?:(?:https?|file)\:)?\/\//.test(e))return e;for(var n,i=t.substring(0,t.indexOf("://")+3),r=t.substring(i.length,t.indexOf("/",i.length+1)),a=(n=0===e.indexOf("/")?e.split("/"):(t=(t=t.split("?")[0]).substring(i.length+r.length+1,t.lastIndexOf("/"))).split("/").concat(e.split("/")),[]),o=0;o<n.length;o++)n[o]&&s.exists(n[o])&&"."!==n[o]&&(".."===n[o]?a.pop():a.push(n[o]));return i+r+"/"+a.join("/")}},e.getScriptPath=t.memoize(function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src;if(i&&0<=i.indexOf(e))return i.substr(0,i.indexOf(e))}return""}),e.parseXML=function(e){var t=null;try{"DOMParser"in window?(n((t=(new window.DOMParser).parseFromString(e,"text/xml")).childNodes)||t.childNodes&&n(t.childNodes[0].childNodes))&&(t=null):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){}return t},e.serialize=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e},e.parseDimension=function(e){return"string"==typeof e?""===e?0:-1<e.lastIndexOf("%")?e:parseInt(e.replace("px",""),10):e},e.timeFormat=function(e,t){return e<=0&&!t?"00:00":(t=e<0?"-":"",e=Math.abs(e),t+((t=Math.floor(e/3600))?t+":":"")+((t=Math.floor((e-3600*t)/60))<10?"0":"")+t+":"+((t=Math.floor(e%60))<10?"0":"")+t)},e.adaptiveType=function(e){if(0!==e){if(e<=-120)return"DVR";if(e<0||e===1/0)return"LIVE"}return"VOD"},e.getUrlParams=function(e){e=e.split("?")[1];if(e){var n={},i=e.split("&");for(let e=0,t=i.length;e<t;e++){var r=i[e].split("=");n[r[0]]=r[1]}return n}},e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){const i=window.AudioContext||window.webkitAudioContext;n(5);const r=n(12);t.AudioPcmPlayer=class{constructor(){this._sample_rate=44100,this._seg_dur=.1,this._channels=1,this._swapStartPlay=!0,this.playStartTime=-1,this.playTimestamp=0,this._now_seg_dur=-1,this._push_start_idx=0,this._playInterval=null,this._pcm_array_buf=null,this._pcm_array_frame=[],this._once_pop_len=parseInt(this._sample_rate*this._seg_dur),this._active_node=null,this._ctx=new i,this._gain=this._ctx.createGain(),this._gain.gain.value=1,this._gain.connect(this._ctx.destination)}setVoice(e){this._gain.gain.value=e}pushBufferFrame(e,t){}pushBuffer(e){e=e.buffer;let n=null;var i=e.byteLength%4;n=0!=i?((i=new Uint8Array(e.byteLength+i)).set(new Uint8Array(e),0),new Float32Array(i.buffer)):new Float32Array(e);let r=null;if(2<=this._channels){i=n.length/2;r=new Float32Array(i);let t=0;for(let e=0;e<n.length;e+=2)r[t]=n[e],t++}else r=new Float32Array(n);null===this._pcm_array_buf?this._pcm_array_buf=new Float32Array(r):((e=new Float32Array(this._pcm_array_buf.length+r.length)).set(this._pcm_array_buf,0),e.set(r,this._pcm_array_buf.length),this._pcm_array_buf=e)}readingLoopWithF32(){if(!(null!==this._pcm_array_buf&&this._pcm_array_buf.length>this._push_start_idx))return-1;{this.playStartTime<0&&(this.playStartTime=r.GetMsTime(),this.playTimestamp=r.GetMsTime()),this._swapStartPlay=!1;let e=this._push_start_idx+this._once_pop_len;e>this._pcm_array_buf.length&&(e=this._pcm_array_buf.length);var t=this._pcm_array_buf.slice(this._push_start_idx,e),n=(this._push_start_idx+=t.length,this._now_seg_dur=+t.length/this._sample_rate*1e3,this._ctx.createBuffer(1,t.length,this._sample_rate));n.copyToChannel(t,0),this._active_node=this._ctx.createBufferSource(),this._active_node.buffer=n,this._active_node.connect(this._gain),this.playStartTime=r.GetMsTime(),this._active_node.start(0),this.playTimestamp+=this._now_seg_dur}return 0}getAlignVPTS(){return this.playTimestamp}pause(){null!==this._playInterval&&(window.clearInterval(this._playInterval),this._playInterval=null)}play(){let e=this;this._playInterval=window.setInterval(()=>{e.readingLoopWithF32()},10)}}},function(e,t,n){n=[n(15)],t=function(i){var e={},r=e.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return e.getPluginPathType=function(e){var t,n;if("string"==typeof e)return 0<(t=(e=e.split("?")[0]).indexOf("://"))?r.ABSOLUTE:(n=e.indexOf("/"),e=i.extension(e),!(t<0&&n<0)||e&&isNaN(e)?r.RELATIVE:r.CDN)},e.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},e.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(63),n(14),n(227),n(1)],t=function(e,n,i,r){return e.extend({constructor:function(e,t,n){this.className=e+" jw-background-color jw-reset",this.orientation=t,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this),this.setup(n)},setup:function(e){var t={default:this.default,className:this.className,orientation:"jw-slider-"+this.orientation};this.el=r.createElement(i(t)),this.elementRail=r.getElementsByClassName("jw-slider-container",this.el)[0],this.elementBuffer=r.getElementsByClassName("jw-buffer",this.el)[0],this.elementProgress=r.getElementsByClassName("jw-progress",this.el)[0],this.elementThumb=r.getElementsByClassName("jw-knob",this.el)[0],this.elementJwRail=r.getElementsByClassName("jw-rail",this.el)[0],this.userInteract=new n(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener),e&&this.addBreakpointElement(e)},dragStart:function(){this.trigger("dragStart"),this.railBounds=r.bounds(this.elementRail)},dragEnd:function(e){this.dragMove(e),this.trigger("dragEnd")},dragMove:function(e){var t=this.railBounds=this.railBounds||r.bounds(this.elementRail),n="horizontal"===this.orientation?(n=e.pageX)<t.left?0:n>t.right?100:100*r.between((n-t.left)/t.width,0,1):(n=e.pageY)>=t.bottom?0:n<=t.top?100:100*r.between((t.height-(n-t.top))/t.height,0,1),t=this.limit(n);return this.render(t),"drag"===e.type&&r.hasClass(e.currentTarget,"jw-slider-time")||this.update(t),!1},tap:function(e){this.railBounds=r.bounds(this.elementRail),this.dragMove(e)},limit:function(e){return e},update:function(e){this.trigger("update",{percentage:e})},render:function(e){e=parseInt(Math.max(0,Math.min(e,100))),"horizontal"===this.orientation?(this.elementThumb.style.left=e+"%",this.elementProgress.style.width=e+"%"):(this.elementThumb.style.bottom=e+"%",this.elementProgress.style.height=e+"%")},updateBuffer:function(e){e&&(this.elementBuffer.style.width=e+"%")},element:function(){return this.el},addBreakpointElement:function(t){var n=parseInt(100/(t+1));for(let e=1;e<t+1;e++){var i=n*e,r=document.createElement("div");r.classList.add("jw-slider-breakpoint"),r.style.left=i-2+"%",this.elementJwRail.appendChild(r)}}})}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(7),n(2)],t=function(e,a){function t(){}return t.extend=function(e,t){function n(){this.constructor=r}var i=this,r=e&&a.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)};a.extend(r,i,t);return n.prototype=i.prototype,r.prototype=new n,e&&a.extend(r.prototype,e),r.__super__=i.prototype,r},a.extend(t.prototype,e),t}.apply(t,n);void 0!==t&&(e.exports=t)},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});const i=n(1);function r(e){i.isWeChat()&&i.isIOS()&&e&&document.addEventListener("WeixinJSBridgeReady",()=>{e.muted=!0,e.play()})}},function(w,e,R){!function(b,T){var S;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.8.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */
!function(){"use strict";function h(e){var t=typeof e;if("string"==t)return[e,!0];if("object"==t&&null!==e){if(u&&e.constructor===ArrayBuffer)return[new Uint8Array(e),!1];if(_(e)||y(e))return[e,!1]}throw new Error(a)}function i(t){return function(e){return new v(!0).update(e)[t]()}}function r(n){return function(e,t){return new E(e,!0).update(t)[n]()}}var e,t,a="input is invalid type",n="object"==typeof window,o=n?window:{},n=!(n=o.JS_MD5_NO_WINDOW?!1:n)&&"object"==typeof self,s=!o.JS_MD5_NO_NODE_JS&&"object"==typeof b&&b.versions&&b.versions.node,n=(s?o=T:n&&(o=self),!o.JS_MD5_NO_COMMON_JS&&"object"==typeof w&&w.exports),l=R(257),u=!o.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,c="0123456789abcdef".split(""),d=[128,32768,8388608,-2147483648],f=[0,8,16,24],p=["hex","array","digest","buffer","arrayBuffer","base64"],m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),g=[],_=(u&&(e=new ArrayBuffer(68),t=new Uint8Array(e),g=new Uint32Array(e)),Array.isArray),y=(!o.JS_MD5_NO_NODE_JS&&_||(_=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),ArrayBuffer.isView);!u||!o.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&y||(y=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});function v(e){e?(g[0]=g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0,this.blocks=g,this.buffer8=t):u?(e=new ArrayBuffer(68),this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}function E(e,t){var n=h(e);if(e=n[0],n[1]){for(var i,r=[],a=e.length,o=0,s=0;s<a;++s)(i=e.charCodeAt(s))<128?r[o++]=i:(i<2048?r[o++]=192|i>>>6:(i<55296||57344<=i?r[o++]=224|i>>>12:(i=65536+((1023&i)<<10|1023&e.charCodeAt(++s)),r[o++]=240|i>>>18,r[o++]=128|i>>>12&63),r[o++]=128|i>>>6&63),r[o++]=128|63&i);e=r}64<e.length&&(e=new v(!0).update(e).array());var l=[],u=[];for(s=0;s<64;++s){var c=e[s]||0;l[s]=92^c,u[s]=54^c}v.call(this,t),this.update(u),this.oKeyPad=l,this.inner=!0,this.sharedMemory=t}v.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");for(var t,n,i=h(e),r=(e=i[0],i[1]),a=0,o=e.length,s=this.blocks,l=this.buffer8;a<o;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),r)if(u)for(n=this.start;a<o&&n<64;++a)(t=e.charCodeAt(a))<128?l[n++]=t:(t<2048?l[n++]=192|t>>>6:(t<55296||57344<=t?l[n++]=224|t>>>12:(t=65536+((1023&t)<<10|1023&e.charCodeAt(++a)),l[n++]=240|t>>>18,l[n++]=128|t>>>12&63),l[n++]=128|t>>>6&63),l[n++]=128|63&t);else for(n=this.start;a<o&&n<64;++a)(t=e.charCodeAt(a))<128?s[n>>>2]|=t<<f[3&n++]:(t<2048?s[n>>>2]|=(192|t>>>6)<<f[3&n++]:(t<55296||57344<=t?s[n>>>2]|=(224|t>>>12)<<f[3&n++]:(t=65536+((1023&t)<<10|1023&e.charCodeAt(++a)),s[n>>>2]|=(240|t>>>18)<<f[3&n++],s[n>>>2]|=(128|t>>>12&63)<<f[3&n++]),s[n>>>2]|=(128|t>>>6&63)<<f[3&n++]),s[n>>>2]|=(128|63&t)<<f[3&n++]);else if(u)for(n=this.start;a<o&&n<64;++a)l[n++]=e[a];else for(n=this.start;a<o&&n<64;++a)s[n>>>2]|=e[a]<<f[3&n++];this.lastByteIndex=n,this.bytes+=n-this.start,64<=n?(this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},v.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,(e=this.blocks)[(t=this.lastByteIndex)>>>2]|=d[3&t],56<=t&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash())},v.prototype.hash=function(){var e,t,n,i,r,a=this.blocks,o=this.first?((o=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879<<0)^(t=((t=(-271733879^(n=((n=(-1732584194^2004318071&e)+a[1]-117830708)<<12|n>>>20)+e<<0)&(-271733879^e))+a[2]-1126478375)<<17|t>>>15)+n<<0)&(n^e))+a[3]-1316259209)<<22|o>>>10)+t<<0:(e=this.h0,o=this.h1,t=this.h2,((o+=((e=((e+=((n=this.h3)^o&(t^n))+a[0]-680876936)<<7|e>>>25)+o<<0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[1]-389564586)<<12|n>>>20)+e<<0)&(e^o))+a[2]+606105819)<<17|t>>>15)+n<<0)&(n^e))+a[3]-1044525330)<<22|o>>>10)+t<<0);o=((o+=((e=((e+=(n^o&(t^n))+a[4]-176418897)<<7|e>>>25)+o<<0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[5]+1200080426)<<12|n>>>20)+e<<0)&(e^o))+a[6]-1473231341)<<17|t>>>15)+n<<0)&(n^e))+a[7]-45705983)<<22|o>>>10)+t<<0,o=((o+=((e=((e+=(n^o&(t^n))+a[8]+1770035416)<<7|e>>>25)+o<<0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[9]-1958414417)<<12|n>>>20)+e<<0)&(e^o))+a[10]-42063)<<17|t>>>15)+n<<0)&(n^e))+a[11]-1990404162)<<22|o>>>10)+t<<0,o=((o+=((e=((e+=(n^o&(t^n))+a[12]+1804603682)<<7|e>>>25)+o<<0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[13]-40341101)<<12|n>>>20)+e<<0)&(e^o))+a[14]-1502002290)<<17|t>>>15)+n<<0)&(n^e))+a[15]+1236535329)<<22|o>>>10)+t<<0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[1]-165796510)<<5|e>>>27)+o<<0)^o))+a[6]-1069501632)<<9|n>>>23)+e<<0)^e&((t=((t+=(e^o&(n^e))+a[11]+643717713)<<14|t>>>18)+n<<0)^n))+a[0]-373897302)<<20|o>>>12)+t<<0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[5]-701558691)<<5|e>>>27)+o<<0)^o))+a[10]+38016083)<<9|n>>>23)+e<<0)^e&((t=((t+=(e^o&(n^e))+a[15]-660478335)<<14|t>>>18)+n<<0)^n))+a[4]-405537848)<<20|o>>>12)+t<<0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[9]+568446438)<<5|e>>>27)+o<<0)^o))+a[14]-1019803690)<<9|n>>>23)+e<<0)^e&((t=((t+=(e^o&(n^e))+a[3]-187363961)<<14|t>>>18)+n<<0)^n))+a[8]+1163531501)<<20|o>>>12)+t<<0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[13]-1444681467)<<5|e>>>27)+o<<0)^o))+a[2]-51403784)<<9|n>>>23)+e<<0)^e&((t=((t+=(e^o&(n^e))+a[7]+1735328473)<<14|t>>>18)+n<<0)^n))+a[12]-1926607734)<<20|o>>>12)+t<<0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[5]-378558)<<4|e>>>28)+o<<0))+a[8]-2022574463)<<11|n>>>21)+e<<0)^e)^(t=((t+=(r^o)+a[11]+1839030562)<<16|t>>>16)+n<<0))+a[14]-35309556)<<23|o>>>9)+t<<0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[1]-1530992060)<<4|e>>>28)+o<<0))+a[4]+1272893353)<<11|n>>>21)+e<<0)^e)^(t=((t+=(r^o)+a[7]-155497632)<<16|t>>>16)+n<<0))+a[10]-1094730640)<<23|o>>>9)+t<<0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[13]+681279174)<<4|e>>>28)+o<<0))+a[0]-358537222)<<11|n>>>21)+e<<0)^e)^(t=((t+=(r^o)+a[3]-722521979)<<16|t>>>16)+n<<0))+a[6]+76029189)<<23|o>>>9)+t<<0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[9]-640364487)<<4|e>>>28)+o<<0))+a[12]-421815835)<<11|n>>>21)+e<<0)^e)^(t=((t+=(r^o)+a[15]+530742520)<<16|t>>>16)+n<<0))+a[2]-995338651)<<23|o>>>9)+t<<0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[0]-198630844)<<6|e>>>26)+o<<0)|~t))+a[7]+1126891415)<<10|n>>>22)+e<<0)^((t=((t+=(e^(n|~o))+a[14]-1416354905)<<15|t>>>17)+n<<0)|~e))+a[5]-57434055)<<21|o>>>11)+t<<0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[12]+1700485571)<<6|e>>>26)+o<<0)|~t))+a[3]-1894986606)<<10|n>>>22)+e<<0)^((t=((t+=(e^(n|~o))+a[10]-1051523)<<15|t>>>17)+n<<0)|~e))+a[1]-2054922799)<<21|o>>>11)+t<<0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[8]+1873313359)<<6|e>>>26)+o<<0)|~t))+a[15]-30611744)<<10|n>>>22)+e<<0)^((t=((t+=(e^(n|~o))+a[6]-1560198380)<<15|t>>>17)+n<<0)|~e))+a[13]+1309151649)<<21|o>>>11)+t<<0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[4]-145523070)<<6|e>>>26)+o<<0)|~t))+a[11]-1120210379)<<10|n>>>22)+e<<0)^((t=((t+=(e^(n|~o))+a[2]+718787259)<<15|t>>>17)+n<<0)|~e))+a[9]-343485551)<<21|o>>>11)+t<<0,this.first?(this.h0=e+1732584193<<0,this.h1=o-271733879<<0,this.h2=t-1732584194<<0,this.h3=n+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+o<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0)},v.prototype.toString=v.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return c[e>>>4&15]+c[15&e]+c[e>>>12&15]+c[e>>>8&15]+c[e>>>20&15]+c[e>>>16&15]+c[e>>>28&15]+c[e>>>24&15]+c[t>>>4&15]+c[15&t]+c[t>>>12&15]+c[t>>>8&15]+c[t>>>20&15]+c[t>>>16&15]+c[t>>>28&15]+c[t>>>24&15]+c[n>>>4&15]+c[15&n]+c[n>>>12&15]+c[n>>>8&15]+c[n>>>20&15]+c[n>>>16&15]+c[n>>>28&15]+c[n>>>24&15]+c[i>>>4&15]+c[15&i]+c[i>>>12&15]+c[i>>>8&15]+c[i>>>20&15]+c[i>>>16&15]+c[i>>>28&15]+c[i>>>24&15]},v.prototype.array=v.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&n,n>>>8&255,n>>>16&255,n>>>24&255,255&i,i>>>8&255,i>>>16&255,i>>>24&255]},v.prototype.buffer=v.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},v.prototype.base64=function(){for(var e,t,n,i="",r=this.array(),a=0;a<15;)e=r[a++],t=r[a++],n=r[a++],i+=m[e>>>2]+m[63&(e<<4|t>>>4)]+m[63&(t<<2|n>>>6)]+m[63&n];return e=r[a],i+=m[e>>>2]+m[e<<4&63]+"=="},(E.prototype=new v).finalize=function(){var e;v.prototype.finalize.call(this),this.inner&&(this.inner=!1,e=this.array(),v.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(e),v.prototype.finalize.call(this))};var A=function(){var t=i("hex");(t=s?function(t){var n=R(258),i=R(259).Buffer,r,e;if(i.from&&!o.JS_MD5_NO_BUFFER_FROM)r=i.from;else r=function(e){return new i(e)};return function(e){if(typeof e==="string")return n.createHash("md5").update(e,"utf8").digest("hex");else if(e===null||e===undefined)throw new Error(a);else if(e.constructor===ArrayBuffer)e=new Uint8Array(e);if(_(e)||y(e)||e.constructor===i)return n.createHash("md5").update(r(e)).digest("hex");else return t(e)}}(t):t).create=function(){return new v},t.update=function(e){return t.create().update(e)};for(var e=0;e<p.length;++e){var n=p[e];t[n]=i(n)}return t}();(A.md5=A).md5.hmac=function(){var n=r("hex");n.create=function(e){return new E(e)},n.update=function(e,t){return n.create(e).update(t)};for(var e=0;e<p.length;++e){var t=p[e];n[t]=r(t)}return n}(),n?w.exports=A:(o.md5=A,l&&void 0!==(S=function(){return A}.call(A,R,A,w))&&(w.exports=S))}()}.call(this,R(74),R(27))},,,function(e,t,n){n=[n(15),n(2),n(141),n(142)],t=function(n,r,e,i){function a(e){return r.isString(e.className)?e.className.split(" "):[]}function o(e,t){t=n.trim(t),e.className!==t&&(e.className=t)}var s={createElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},styleDimension:function(e){return e+(0<e.toString().indexOf("%")?"":"px")}};return s.classList=function(e){return e.classList||a(e)},s.hasClass=e.hasClass,s.addClass=function(e,t){var n=a(e),t=r.isArray(t)?t:t.split(" ");r.each(t,function(e){r.contains(n,e)||n.push(e)}),o(e,n.join(" "))},s.removeClass=function(e,t){var n=a(e),t=r.isArray(t)?t:t.split(" ");o(e,r.difference(n,t).join(" "))},s.replaceClass=function(e,t,n){var i=e.className||"";t.test(i)?i=i.replace(t,n):n&&(i+=" "+n),o(e,i)},s.toggleClass=function(e,t,n){var i=s.hasClass(e,t);(n=r.isBoolean(n)?n:!i)!==i&&(n?s.addClass(e,t):s.removeClass(e,t))},s.emptyElement=function(e){if(e)for(var t=0;0<e.childElementCount-t;){if(e.children[t].hasAttribute("remove-ignore"))if(e.children[t].getAttribute("remove-ignore")===i.DOM_REMOVE_IGNORE){t++;continue}e.removeChild(e.children[t])}},s.addStyleSheet=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},s.empty=function(e){if(e)for(var t=0;0<e.childElementCount-t;){if(e.children[t].hasAttribute("remove-ignore"))if(e.children[t].getAttribute("remove-ignore")===i.DOM_REMOVE_IGNORE){t++;continue}e.removeChild(e.children[t])}},s.bounds=function(e){var t,n,i={left:0,right:0,width:0,height:0,top:0,bottom:0};return e&&document.body.contains(e)&&(e=e.getBoundingClientRect(e),t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,e.width||e.height||e.left||e.top)&&(i.left=e.left+n,i.right=e.right+n,i.top=e.top+t,i.bottom=e.bottom+t,i.width=e.right-e.left,i.height=e.bottom-e.top),i},s}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(16)],t=function(t){function r(e){return e===t.COMPLETE||e===t.ERROR?t.IDLE:e}return function(e,t,n){var i;(t=r(t))!==(n=r(n))&&(t={type:i=t.replace(/(?:ing|d)$/,""),newstate:t,oldstate:n,reason:e.mediaModel.get("state")},"play"===i&&(t.playReason=e.get("playReason")),this.trigger(i,t))}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(47),n(77),n(187),n(2),n(7),n(188),n(6),n(16),n(189)],t=function(l,e,u,c,h,d,t,f,p,m){function n(){var t,r,a,o,n=this,i=l.noop;function s(e,t){var n=h.extend({},t,{type:e});switch(e){case"flashThrottle":var i="resume"!==t.state;this.set("flashThrottle",i),this.set("flashBlocked",i);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":case"mute":return void this.set(e,t[e]);case f.JWPLAYER_MEDIA_TYPE:return void(this.mediaModel.get("mediaType")!==t.mediaType&&(this.mediaModel.set("mediaType",t.mediaType),this.mediaController.trigger(e,n)));case f.JWPLAYER_PLAYER_STATE:return void this.mediaModel.set("state",t.newstate);case f.JWPLAYER_MEDIA_BUFFER:this.set("buffer",t.bufferPercent);case f.JWPLAYER_MEDIA_META:i=t.duration;h.isNumber(i)&&(this.mediaModel.set("duration",i),this.set("duration",i)),t.duration===1/0&&this.trigger("alive");break;case f.JWPLAYER_MEDIA_BUFFER_FULL:this.mediaModel.get("playAttempt")&&this.playVideo(),this.mediaModel.on("change:playAttempt",function(){this.playVideo()},this);break;case f.JWPLAYER_MEDIA_TIME:this.mediaModel.set("position",t.position),this.set("position",t.position),h.isNumber(t.duration)&&(this.mediaModel.set("duration",t.duration),this.set("duration",t.duration),0<t.duration&&this.recordMediaPosition(t.position,t.duration),t.duration===1/0)&&this.trigger("alive"),this.advManage&&this.get("imageAdvs").advs&&this.advManage.refreshProcessAdv(t.position);break;case f.JWPLAYER_PROVIDER_CHANGED:this.set("provider",r.getName());break;case f.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(t.currentQuality,t.levels),this.mediaModel.set("levels",t.levels);break;case f.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(t.currentQuality,t.levels),this.persistQualityLevel(t.currentQuality,t.levels);break;case f.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(t.currentTrack,t.tracks),this.mediaModel.set("audioTracks",t.tracks);break;case f.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(t.currentTrack,t.tracks);break;case f.JWPLAYER_CONNECTING:this.trigger("connecting");break;case f.JWPLAYER_CONNECT_FAILD:this.trigger("connectFaild");break;case f.JWPLAYER_ALIVE:this.trigger("alive");break;case f.JWPLAYER_NO_LIVE_STREAM:this.trigger("noLiveStream");break;case f.JWPLAYER_LIVE_STOP:this.trigger("liveStop");break;case"stop":this.set("duration",0);break;case"subtitlesTrackChanged":this.setVideoSubtitleTrack(t.currentTrack,t.tracks);break;case"visualQuality":i=h.extend({},t);this.mediaModel.set("visualQuality",i);break;case f.JWPLAYER_PLAYBACKRATE:this.set("playbackRate",t.playbackRate),this.mediaModel.set("playbackRate",t.playbackRate);break;case f.JWPLAYER_HLS_QUALITYLIST_CHANGE:this.mediaModel.set("hlsQualityListChange",t.levels)}this.mediaController.trigger(e,n)}this.mediaController=h.extend({},d),this.mediaModel=new g,this.advManage=null,c.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(e){if(o=new u,h.extend(this.attributes,e,{item:0,state:p.IDLE,flashBlocked:!1,fullscreen:!1,compactUI:!1,scrubbing:!1,duration:e.duration||0,position:0,buffer:0}),l.isMobile()&&!e.mobileSdk)try{var t=new AudioContext;t&&("running"!==t.state||l.isWeChat())&&this.set("autostart",!1)}catch(e){this.set("autostart",!1)}return this.get("imageAdvs")&&(this.advManage=new m.default(this.get("imageAdvs"))),this.updateProviders(),this},this.getConfiguration=function(){return h.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){t=new e(this.getConfiguration())},this.recordMediaPosition=function(t,n){var e=a&&a.sources&&a.sources[0],i=this;e&&e.file&&!isNaN(t)&&!isNaN(n)&&0<n&&!1!==isFinite(n)&&h.each(a.sources,function(e){parseInt(t)<parseInt(n)&&2<t?i.mediaModel.get("isMemoryPlay")&&o.setItem("filePostion."+e.file,t):parseInt(t)>=parseInt(n)&&o.clearItem("filePostion."+e.file)})},this.getLastPosition=function(e){var t=0;return t=e&&"array"===l.typeOf(e.sources)&&0<e.sources.length&&o.getItem("filePostion."+e.sources[0].file)?o.getItem("filePostion."+e.sources[0].file):t},this.setQualityLevel=function(e,t){-1<e&&1<t.length&&this.mediaModel.set("currentLevel",parseInt(e))},this.setCurrentQuality=function(e){r.setCurrentQuality(e)},this.persistQualityLevel=function(e,t){t=(t[e]||{}).label;this.set("qualityLabel",t)},this.setCurrentAudioTrack=function(e,t){-1<e&&0<t.length&&e<t.length&&this.mediaModel.set("currentAudioTrack",parseInt(e))},this.onMediaContainer=function(){var e=this.get("mediaContainer");i.setContainer(e)},this.changeVideoProvider=function(e){var t;this.off("change:mediaContainer",this.onMediaContainer),r&&(r.off(null,null,this),r.getContainer())&&r.remove(),e?(i=new e(n.get("id"),n.getConfiguration()),(t=this.get("mediaContainer"))?i.setContainer(t):this.once("change:mediaContainer",this.onMediaContainer),this.once("change:provider",function(){this.setVolume(this.get("volume"))},this),this.set("provider",i.getName()),-1===i.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),(r=i).volume(n.get("volume")),r.mute(n.get("mute")),r.on("all",s,this)):(r=i=e,this.set("provider",void 0))},this.destroy=function(){r&&(r.off(null,null,this),r.destroy())},this.getVideo=function(){return r},this.setFullscreen=function(e){(e=!!e)!==n.get("fullscreen")&&n.set("fullscreen",e)},this.chooseProvider=function(e){return t.choose(e).provider},this.setActiveItem=function(e,t,n){r&&r.extPlayerPTS&&(e.starttime=r.extPlayerPTS,this.set("starttime",e.starttime||0)),this.mediaModel.off(),this.mediaModel=new g,this.set("mediaModel",this.mediaModel);let i=e.starttime||0;n&&n.url&&(i=n.starttime||0,e.starttime=i,this.set("starttime",i),this.set("duration",n.duration||0),this.set("playAttempt",!1)),this.set("position",i),this.set("duration",this.get("duration")?this.get("duration"):e.duration||0),this.setProvider(e,t)},this.setProvider=function(e,t){t=null!=t?Number(t):0;var t=e&&e.sources&&e.sources[t];void 0!==t&&(a=e,t=this.chooseProvider(t),n.changeVideoProvider(t),i)&&(i.init&&i.init(e,this.attributes),this.trigger("itemReady",e))},this.getCurrentItem=function(){return a},this.getProviders=function(){return t},this.resetProvider=function(){i=null},this.setVolume=function(e){e=Math.round(e),e=r&&"html5"===r.getName().name?Math.min(e,100):Math.min(e,500),n.set("volume",e),r&&r.volume(e);e=0===e;e!==n.get("mute")&&n.setMute(e)},this.enableGPU=function(){r.enableGPU()},this.disableGPU=function(){r.disableGPU()},this.setToken=function(e){var t=[];"string"==typeof arguments[0]&&"string"==typeof arguments[1]&&(t[0]={file:arguments[0],tokenText:arguments[1]},e=t),r.setToken&&r.setToken(e)},this.setMute=function(e){l.exists(e)||(e=!this.get("mute")),this.set("mute",e),r&&r.mute(e),e||(e=0==this.get("volume")&&this.attributes.origin_volume?this.attributes.origin_volume:0!=this.get("volume")?this.get("volume"):10,this.setVolume(e))},this.loadVideo=function(e){e||(t=this.get("item"),e=this.get("playlist")[t]),void 0!==this.get("starttime")&&(e.starttime=this.get("starttime"));var t=this.get("isMemoryPlay");t&&(this.mediaModel.set("isMemoryPlay",!0),e.starttime=this.getLastPosition(e)),this.set("position",e.starttime||0),this.set("duration",e.duration||0),this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(f.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),r.load(e)},this.stopVideo=function(){r&&r.stop()},this.playVideo=function(){r.play()},this.prevFrame=function(){return r.prevFrame()},this.nextFrame=function(){return r.nextFrame()},this.snapshot=function(e){return r.snapshot(e)},this.test1=function(){r.test1()},this.persistCaptionsTrack=function(){var e=this.get("captionsTrack");e?this.set("captionLabel",e.label):this.set("captionLabel","Off")},this.setDanmuStatus=function(){var e=JSON.parse(JSON.stringify(n.get("danmaku")));n.set("danmaku",Object.assign(e,{active:!e.active}))},this.setVideoSubtitleTrack=function(e,t){this.set("captionsIndex",e),e&&t&&e<=t.length&&t[e-1].data&&this.set("captionsTrack",t[e-1]),r&&r.setSubtitlesTrack&&r.setSubtitlesTrack(e)},this.persistVideoSubtitleTrack=function(e){this.setVideoSubtitleTrack(e),this.persistCaptionsTrack()},this.setPlaybackRate=function(e){r.setPlaybackRate(e)},this.changeHlsQuality=function(e){r.changeHlsQuality(e)},this.getMediaInfo=function(){return r.getMediaInfo()},this.gobackLive=function(){r.gobackLive()},this.setMaxSeekTime=function(e){r.setMaxSeekTime(e)},this.VR=function(){return r.VR()}}var g=n.MediaModel=function(){this.set("state",p.IDLE)};return h.extend(n.prototype,t),h.extend(g.prototype,t),n}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t){var n,i,e=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var s,l=[],u=!1,c=-1;function h(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length)&&d()}function d(){if(!u){for(var e=o(h),t=(u=!0,l.length);t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,u,c){"use strict";c.r(u),function(t){var e=c(119),n=c(19),i=c(28),r=c(0),a=c(1),o=c.n(a);const s=c(176),l=c(177);u.default={MPEG_JS_Module:class{constructor(e){this.configFormat={},this.isLive=0,this.mediaAttr={sampleRate:0,sampleChannel:0,vFps:0,vGop:0,vDuration:0,aDuration:0,duration:0,aCodec:"",vCodec:"",audioNone:!1},this.extensionInfo={vWidth:0,vHeight:0},this.controller=new AbortController,this.offsetDemux=null,this.wasmState=0,this.naluLayer=null,this.vlcLayer=null,this.onReady=null,this.onDemuxed=null,this.onDemuxedFailed=null,this.aacDec=null,this.demux=null,this.onNalu=null,this.onError=null,this.onWasmError=null}makeWasm(){var e=Object(n.getPlayerPath)();this.demux=new i.a,this.demux.postMessage({t:r.d.LOAD_WAMS_JS,pathUrl:e,isSafari:o.a.isSafari()}),this.demux.onmessage=t=>{var n=t["data"];switch(n.t){case r.c.WASM_LOAD_FINISH:case r.c.WASM_POST_RUN:null!=this.onReady&&0==this.wasmState&&(this.wasmState=1,this.onReady());break;case r.c.DEMUXER_INIT_FINISH:break;case r.c.POST_DEMUXER_INFO:let e=null;e=1==t.data.type&&this.mediaAttr.aCodec==l.DEF_AAC?this.aacDec.sliceAACFrames(t.data.ptime,t.data.src):t.data.src.buffer,t.data.data=e,this.onNalu(t.data);break;case r.c.DEMUXER_FINISH:this.mediaAttr=n.mediaAttr,this.extensionInfo=n.extensionInfo,null==this.aacDec?this.aacDec=new s.AACDecoder(this.mediaAttr):this.aacDec.updateConfig(this.mediaAttr),null!=this.onDemuxed&&this.onDemuxed();break;case r.c.DEMUXER_ERROR:this.onError&&this.onError(n);break;case r.c.WAMS_ERROR:this.onWasmError&&this.onWasmError(n.data)}}}initDemuxer(){let e=this;if(window.WebAssembly)this.makeWasm(),1===t.STATIC_MEM_wasmDecoderState?(e.wasmState=1,e.onReady()):(Module.onRuntimeInitialized=()=>{null!=e.onReady&&0==e.wasmState&&(e.wasmState=1,e.onReady())},Module.postRun=()=>{null!=e.onReady&&0==e.wasmState&&(e.wasmState=1,e.onReady())});else{let e="unsupport WASM!";/iPhone|iPad/.test(window.navigator.userAgent)&&(e+=" ios:min-version 11"),alert(e),alert("Please check your browers, it not support wasm! See:https://www.caniuse.com/#search=wasm")}return this.WorkerFetch(),!0}WorkerFetch(){this.downloaderWorker=new e.a,this.downloaderWorker.onmessage=e=>{this._demuxCore(e.data)}}demuxURL(e){this.downloaderWorker.postMessage({videoURL:e,type:"pushUrl"})}demuxUint8Buf(e){this._demuxCore(e)}_demuxerTsInit(t){let n=this;var e=this.controller.signal;fetch(t,{signal:e}).then(e=>e.arrayBuffer()).then(e=>{e.fileStart=0;e=new Uint8Array(e);null!=e&&n._demuxCore(e)}).catch(e=>{n._releaseOffset(),n.onDemuxedFailed&&n.onDemuxedFailed(e,t)})}_releaseOffset(){void 0!==this.offsetDemux&&null!==this.offsetDemux&&(Module._free(this.offsetDemux),this.offsetDemux=null)}_demuxCore(e){this.demux.postMessage({t:r.d.DEMUXER_BOX,d:e,isLive:this.isLive},[e.buffer])}_setMediaInfo(){var e=Module.cwrap("getMediaInfo","number",[])(),t=Module.HEAPU32[e/4],n=Module.HEAPU32[e/4+1],i=Module.HEAPF64[e/8+1],r=Module.HEAPF64[e/8+1+1],a=Module.HEAPF64[e/8+1+1+1],o=Module.HEAPF64[e/8+1+1+1+1],e=Module.HEAPU32[e/4+2+2+2+2+2],i=(this.mediaAttr.vFps=i,this.mediaAttr.vGop=e,this.mediaAttr.vDuration=r,this.mediaAttr.aDuration=a,this.mediaAttr.duration=o,Module.cwrap("getAudioCodecID","number",[])()),e=(0<=i?(this.mediaAttr.aCodec=l.CODEC_OFFSET_TABLE[i],this.mediaAttr.sampleRate=0<t?t:l.DEFAULT_SAMPLERATE,this.mediaAttr.sampleChannel=0<=n?n:l.DEFAULT_CHANNEL):(this.mediaAttr.sampleRate=0,this.mediaAttr.sampleChannel=0,this.mediaAttr.audioNone=!0),Module.cwrap("getVideoCodecID","number",[])());0<=e&&(this.mediaAttr.vCodec=l.CODEC_OFFSET_TABLE[e]),null==this.aacDec?this.aacDec=new s.AACDecoder(this.mediaAttr):this.aacDec.updateConfig(this.mediaAttr)}_setExtensionInfo(){var e=Module.cwrap("getExtensionInfo","number",[])(),t=Module.HEAPU32[e/4],e=Module.HEAPU32[e/4+1];this.extensionInfo.vWidth=t,this.extensionInfo.vHeight=e}readMediaInfo(){return this.mediaAttr}readExtensionInfo(){return this.extensionInfo}readAudioNone(){return this.mediaAttr.audioNone}_readLayer(){null===this.naluLayer?this.naluLayer={vps:null,sps:null,pps:null,sei:null}:(this.naluLayer.vps=null,this.naluLayer.sps=null,this.naluLayer.pps=null,this.naluLayer.sei=null),null===this.vlcLayer?this.vlcLayer={vlc:null}:this.vlcLayer.vlc=null;var e,t,n,i,r=Module.cwrap("getSPSLen","number",[])(),a=Module.cwrap("getSPS","number",[])();if(!(r<0))return a=Module.HEAPU8.subarray(a,a+r),this.naluLayer.sps=new Uint8Array(r),this.naluLayer.sps.set(a,0),r=Module.cwrap("getPPSLen","number",[])(),e=Module.cwrap("getPPS","number",[])(),e=Module.HEAPU8.subarray(e,e+r),this.naluLayer.pps=new Uint8Array(r),this.naluLayer.pps.set(e,0),r=Module.cwrap("getSEILen","number",[])(),t=Module.cwrap("getSEI","number",[])(),t=Module.HEAPU8.subarray(t,t+r),this.naluLayer.sei=new Uint8Array(r),this.naluLayer.sei.set(t,0),r=Module.cwrap("getVLCLen","number",[])(),n=Module.cwrap("getVLC","number",[])(),n=Module.HEAPU8.subarray(n,n+r),this.vlcLayer.vlc=new Uint8Array(r),this.vlcLayer.vlc.set(n,0),this.mediaAttr.vCodec==l.DEF_HEVC||this.mediaAttr.vCodec==l.DEF_H265?(r=Module.cwrap("getVPSLen","number",[])(),i=Module.cwrap("getVPS","number",[])(),i=Module.HEAPU8.subarray(i,i+r),this.naluLayer.vps=new Uint8Array(r),this.naluLayer.vps.set(i,0),Module._free(i),i=null):this.mediaAttr.vCodec!=l.DEF_AVC&&(this.mediaAttr.vCodec,l.DEF_H264),Module._free(a),a=null,Module._free(e),e=null,Module._free(t),t=null,Module._free(n),n=null,{nalu:this.naluLayer,vlc:this.vlcLayer}}isHEVC(){return this.mediaAttr.vCodec==l.DEF_HEVC||this.mediaAttr.vCodec==l.DEF_H265}readPacket(){return void this.demux.postMessage({t:r.d.GET_DEMUXER_INFO})}_refreshDemuxer(){this.releaseTsDemuxer(),this._initDemuxer()}_initDemuxer(){Module.cwrap("initTsMissile","number",[])(),Module.cwrap("initializeDemuxer","number",[])()}releaseTsDemuxer(){}release(){this.downloaderWorker.postMessage({type:"destory"}),this.downloaderWorker&&this.downloaderWorker.terminate(),this.demux.postMessage({t:r.d.RELEASE_DEMUXER}),this.demux.postMessage({t:r.d.RELEASE_DECODE}),this.demux&&this.demux.terminate()}}}}.call(this,c(27))},function(e,t,n){const i=n(103),r=[i.HEVC_NAL_VPS,i.HEVC_NAL_SPS,i.HEVC_NAL_PPS,i.HEVC_NAL_SEI_PREFIX,i.HEVC_NAL_SEI_SUFFIX];e.exports={IS_HEV_PS_INFO_CHAR:e=>{e=(126&e)>>1;return r.indexOf(e)},GET_NALU_TYPE:e=>{var e=(126&e)>>1;return 1<=e&&e<=9?i.DEFINE_P_FRAME:16<=e&&e<=21?i.DEFINE_KEY_FRAME:0<=(e=r.indexOf(e))?r[e]:i.DEFINE_OTHERS_FRAME},PACK_NALU:e=>{var t=e.nalu,e=e.vlc.vlc,n=(null==t.vps&&(t.vps=new Uint8Array),new Uint8Array(t.vps.length+t.sps.length+t.pps.length+t.sei.length+e.length));return n.set(t.vps,0),n.set(t.sps,t.vps.length),n.set(t.pps,t.vps.length+t.sps.length),n.set(t.sei,t.vps.length+t.sps.length+t.pps.length),n.set(e,t.vps.length+t.sps.length+t.pps.length+t.sei.length),n}}},function(e,t,n){n=[n(2),n(1)],t=function(t,i){var r={getItem:i.noop,setItem:i.noop,removeItem:i.noop};try{r=window.localStorage}catch(e){}function a(e){return("baiducyberplayer."+e).toString()}function o(e,t){try{r[a(e)]=t}catch(e){__DEBUG__}}function e(){this.persistItems=["volume","mute","captionLabel","qualityLabel","playbackRate"]}return t.extend(e.prototype,{getAllItems:function(){return t.reduce(this.persistItems,function(e,t){var n=r[a(t)];return n&&(e[t]=i.serialize(n)),e},{})},track:function(e){t.each(this.persistItems,function(n){e.on("change:"+n,function(e,t){o(n,t)})})},clear:function(){t.each(this.persistItems,function(e){r.removeItem(a(e))})},setItem:o,getItem:function(e){return r[a(e)]},clearItem:function(e){return r.removeItem(a(e))}}),e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(208),n(209),n(108),n(61)],t=function(n,i,a,o){var s={},r={};return{loadPlugins:function(e,t){return r[e]=new n(new i(s),t),r[e]},registerPlugin:function(e,t,n,i){var r=o.getPluginName(e);s[r]||(s[r]=new a(e)),s[r].registerPlugin(e,t,n,i)}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(6),n(7),n(2)],t=function(u,e,n){function t(r,a){var t=n.extend(this,e),o=h.NEW;function s(e){o=h.ERROR,t.trigger(u.ERROR,e)}function l(e){o=h.COMPLETE,t.trigger(u.COMPLETE,e)}this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},this.makeScriptTag=function(e){var t=document.createElement("script");return t.src=e,t},this.makeTag=a?this.makeStyleLink:this.makeScriptTag,this.load=function(){var e,t,n,i;o===h.NEW&&((e=c[r])&&(o=e.getStatus())<2?(e.on(u.ERROR,s),e.on(u.COMPLETE,l)):(t=document.getElementsByTagName("head")[0]||document.documentElement,n=this.makeTag(r),i=!1,n.onload=n.onreadystatechange=function(e){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,l(e),n.onload=n.onreadystatechange=null,t&&n.parentNode&&!a&&t.removeChild(n))},n.onerror=s,t.insertBefore(n,t.firstChild),o=h.LOADING,c[r]=this))},this.getStatus=function(){return o}}var c={},h={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};return t.loaderstatus=h,t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(15)],t=function(e,a){var o=e.seconds;return function(e){var t=[],n=(e=(e=(e=a.trim(e)).replace(/\n\n \n\n/g,"\r\n\r\n")).replace(/\n \n\n/g,"\r\n\r\n")).split("\r\n\r\n");1===n.length&&(n=e.split("\n\n"));for(var i,r=0;r<n.length;r++)"WEBVTT"!==n[r]&&(n[r]=n[r].replace(/\n\n/g,"\r\n"),(i=function(e){var t={},n=e.split("\r\n");1===n.length&&(n=e.split("\n"));e=1;0<n[0].indexOf(" --\x3e ")&&(e=0);{var i,r;n.length>e+1&&n[e+1]&&(i=n[e],0<(r=i.indexOf(" --\x3e ")))&&(t.begin=o(i.substr(0,r)),t.end=o(i.substr(r+5)),t.text=n.slice(e+1).join("<br/>"))}return t}(n[r])).text)&&t.push(i);return t}}.apply(t,n);void 0!==t&&(e.exports=t)},,,,,,,,,,,,,,,,,function(e,t,n){n=[n(2)],t=function(e){var n={},i=e.memoize(function(e){return null!==navigator.userAgent.toLowerCase().match(e)});function t(e){return function(){return i(e)}}var r=n.isInt=function(e){return parseFloat(e)%1==0},a=(n.isFlashSupported=function(){var e=n.flashVersion();return e&&e>=__FLASH_VERSION__},n.isFF=t(/firefox/i),n.isIPod=t(/iP(hone|od)/i),n.isIPad=t(/iPad/i),n.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),n.isOSX=t(/Mac OS X/i),n.isEdge=t(/\sedge\/\d+/i),n.isIETrident=function(e){return!!n.isEdge()||(e?(e=parseFloat(e).toFixed(1),i(new RegExp("trident/.+rv:\\s*"+e,"i"))):i(/trident/i))}),o=n.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),i(new RegExp("msie\\s*"+e,"i"))):i(/msie/i)},s=t(/chrome/i),l=(n.isChrome=function(){return s()&&!n.isEdge()},n.isChrome66=function(){var e=window.navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/);return!!(this.isChrome()&&e&&e[1]&&66<=parseInt(e[1]))},n.isIE=function(e){return e?(11<=(e=parseFloat(e).toFixed(1))?a:o)(e):o()||a()},n.isSafari=function(){return i(/safari/i)&&!i(/chrome/i)&&!i(/chromium/i)&&!i(/android/i)},n.isIOS=function(e){return i(e?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+e+"|.*\\sVersion/"+e+")","i"):/iP(hone|ad|od)/i)}),u=(n.isAndroidNative=function(e){return u(e,!0)},n.isAndroid=function(e,t){return!(t&&i(/chrome\/[123456789]/i)&&!i(/chrome\/18/))&&(e?(r(e)&&!/\./.test(e)&&(e+="."),i(new RegExp("Android\\s*"+e,"i"))):i(/Android/i))});return n.isMobile=function(){return l()||u()},n.isWeChat=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},n.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},n.flashVersion=function(){if(n.isAndroid())return 0;var e,t=navigator.plugins;if(t&&(e=t["Shockwave Flash"])&&e.description)return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if(void 0===window.ActiveXObject)return 0;try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(e){return 0}return e},n.getBrowserInfo=function(){var e,t=window.navigator.userAgent.toLowerCase();return this.isIE()?t.match(/msie ([\d.]+)/)?"IE-"+t.match(/msie ([\d.]+)/)[1]:"IE-unknown":this.isChrome()?(e=t.match(/chrome\/([\d.]+)/))&&1<e.length?"Chrome-"+e[1]:"Chrome-unknown":this.isFF()?"Firefox-"+t.match(/firefox\/([\d.]+)/)[1]:this.isSafari()?"Safari"+((e=t.match(/version\/([\d.]+)/))&&e.length?"-"+t.match(/version\/([\d.]+)/)[1]:""):l()?"ios":u()?"android":"other"},n.isPoorIE=function(){return this.isIE()&&(o(8)||o(7)||o(6)||document.documentMode&&document.documentMode<=8)},n.getChromeVersion=function(){var e=window.navigator.userAgent.toLowerCase();return this.isChrome()&&(e=e.match(/chrome\/([\d.]+)/))&&1<e.length?e[1]:-1},n.browserJudge=function(){let e=window.document;let n=window.navigator.userAgent.toLowerCase(),t=e.documentMode,i=window.chrome||!1,r={agent:n,isIE:/msie/.test(n),isGecko:0<n.indexOf("gecko")&&n.indexOf("like gecko")<0,isWebkit:0<n.indexOf("webkit"),isStrict:"CSS1Compat"===e.compatMode,supportSubTitle:function(){return"track"in e.createElement("track")},supportScope:function(){return"scoped"in e.createElement("style")},ieVersion:function(){try{return n.match(/msie ([\d.]+)/)[1]||0}catch(e){return t}},operaVersion:function(){try{return window.opera?n.match(/opera.([\d.]+)/)[1]:0<n.indexOf("opr")?n.match(/opr\/([\d.]+)/)[1]:void 0}catch(e){return 0}},versionFilter:function(){if(1!==arguments.length||"string"!=typeof arguments[0])return 1===arguments.length?arguments[0]:0;var e=arguments[0],t=e.indexOf(".");if(0<t){t=e.indexOf(".",t+1);if(-1!==t)return e.substr(0,t)}return e}};try{r.type=r.isIE?"IE":window.opera||0<n.indexOf("opr")?"Opera":0<n.indexOf("chrome")?"Chrome":0<n.indexOf("safari")||window.openDatabase?"Safari":0<n.indexOf("firefox")?"Firefox":"unknow",r.version="IE"===r.type?r.ieVersion():"Firefox"===r.type?n.match(/firefox\/([\d.]+)/)[1]:"Chrome"===r.type?n.match(/chrome\/([\d.]+)/)[1]:"Opera"===r.type?r.operaVersion():"Safari"===r.type?n.match(/version\/([\d.]+)/)[1]:"0",r.shell=function(){var e,t;return 0<n.indexOf("maxthon")?(r.version=n.match(/maxthon\/([\d.]+)/)[1]||r.version,"傲游浏览器"):0<n.indexOf("qqbrowser")?(r.version=n.match(/qqbrowser\/([\d.]+)/)[1]||r.version,"QQ浏览器"):0<n.indexOf("se 2.x")?"搜狗浏览器":i&&"Opera"!==r.type?(t=window.external,e=window.clientInformation.languages,t&&"LiebaoGetVersion"in t?"猎豹浏览器":0<n.indexOf("bidubrowser")?(r.version=n.match(/bidubrowser\/([\d.]+)/)[1]||n.match(/chrome\/([\d.]+)/)[1],"百度浏览器"):r.supportSubTitle()&&void 0===e?(t=Object.keys(i.webstore).length,0 in window,1<t?"360极速浏览器":"360安全浏览器"):"Chrome"):r.type},r.name=r.shell(),r.version=r.versionFilter(r.version)}catch(e){}return[r.type,r.version]},n.isSupportWASM=function(){var e=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})();if(!1===e)return!1;if(!0===e){var e=n.browserJudge(),t=e[0],e=e[1];if("Chrome"===t&&e<85)return!1;if(0<=t.indexOf("360"))return!1;if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&13<e)return!1}return!0},n.isPictureInpicture=()=>document.pictureInPictureEnabled,n}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(h){var d={},f={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};return d.utf8ArrayToStr=function(e,t){for(var n,i,r,a="",o=e.length,s=t||0;s<o;)if(0!==(n=e[s++])&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=e[s++],a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e[s++],r=e[s++],a+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&r)<<0)}return a},d.utf16BigEndianArrayToStr=function(e,t){for(var n="",i=e.length-1,r=t||0;r<i;)254===e[r]&&255===e[r+1]||(n+=String.fromCharCode((e[r]<<8)+e[r+1])),r+=2;return n},d.syncSafeInt=function(e){e=d.arrayToInt(e);return 127&e|(32512&e)>>1|(8323072&e)>>2|(2130706432&e)>>3},d.arrayToInt=function(e){for(var t="0x",n=0;n<e.length;n++)t+=e[n].toString(16);return parseInt(t)},d.parseID3=function(e){return h.reduce(e,function(e,t){if(!("value"in t)&&"data"in t&&t.data instanceof ArrayBuffer){for(var n=new Uint8Array(t.data),i=n.length,r=(t={value:{key:"",data:""}},10);r<14&&r<n.length&&0!==n[r];)t.value.key+=String.fromCharCode(n[r]),r++;var a,o=19,s=n[o],l=(3!==s&&0!==s||(s=n[++o],i--),0);if(1!==s&&2!==s)for(var u=o+1;u<i;u++)if(0===n[u]){l=u-o;break}0<l?(s=d.utf8ArrayToStr(n.subarray(o,o+=l),0),"PRIV"===t.value.key?("com.apple.streaming.transportStreamTimestamp"===s?(a=1&d.syncSafeInt(n.subarray(o,o+=4)),c=d.syncSafeInt(n.subarray(o,o+=4)),a&&(c+=4294967296),t.value.data=c):t.value.data=d.utf8ArrayToStr(n,o+1),t.value.info=s):(t.value.info=s,t.value.data=d.utf8ArrayToStr(n,o+1))):(a=n[o],t.value.data=1===a||2===a?d.utf16BigEndianArrayToStr(n,o+1):d.utf8ArrayToStr(n,o+1))}var c;return f.hasOwnProperty(t.value.key)&&(e[f[t.value.key]]=t.value.data),t.value.info?(c=e[t.value.key],h.isObject(c)||(e[t.value.key]=c={}),c[t.value.info]=t.value.data):e[t.value.key]=t.value.data,e},{})},d}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(59)],t=function(u,a){function c(){}function h(e){var t=document.createElement("a"),n=document.createElement("a");t.href=location.href;try{return n.href=e,n.href=n.href,t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(e){}return!0}var d=!1,f=function(e,t,n,i){u.isObject(e)&&(e=(i=e).url);var r,a,o=u.extend({xhr:null,url:e,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:t||c,onerror:n||c,mimeType:i&&!i.responseType?"text/xml":"",requireValidXML:!1,responseType:i&&i.plainText?"text":""},i);if("XDomainRequest"in window&&h(e))(r=o.xhr=new window.XDomainRequest).onload=m(o),r.ontimeout=r.onprogress=c,d=!0;else{if(!("XMLHttpRequest"in window))return void o.onerror("",e);(r=o.xhr=new window.XMLHttpRequest).onreadystatechange=(a=o,function(e){var t,n=e&&e.currentTarget||a.xhr;if(4===n.readyState)return clearTimeout(a.timeoutId),400<=n.status?(t=404===n.status?"File not found":n.status+"("+n.statusText+")",a.onerror(t,a.url,n)):200===n.status?m(a)(e):void 0})}s="文件加载失败",l=o;var s,l,t=function(e){var t,e=e&&e.currentTarget||l.xhr;clearTimeout(l.timeoutId),l.retryWithoutCredentials&&l.xhr.withCredentials?(p(e),t=u.extend({},l,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1}),f(t)):l.onerror(s,l.url,e)};r.onerror=t,"overrideMimeType"in r?o.mimeType&&r.overrideMimeType(o.mimeType):d=!0;try{e=e.replace(/#.*$/,""),r.open("GET",e,!0)}catch(e){return t(e),r}if(o.responseType)try{r.responseType=o.responseType}catch(e){}o.timeout&&(o.timeoutId=setTimeout(function(){p(r),o.onerror("Timeout",e,r)},o.timeout),r.onabort=function(){clearTimeout(o.timeoutId)});try{o.withCredentials&&"withCredentials"in r&&(r.withCredentials=!0),r.send()}catch(e){t(e)}return r};function p(e){e.onload=null,e.onprogress=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()}function m(r){return function(e){e=e&&e.currentTarget||r.xhr;if(clearTimeout(r.timeoutId),r.responseType){if("json"===r.responseType){var t=e,n=r;if(!t.response||u.isString(t.response)&&'"'!==t.responseText.substr(1))try{t=u.extend({},t,{response:JSON.parse(t.responseText)})}catch(e){return void n.onerror("Invalid JSON",n.url,t)}return n.oncomplete(t)}}else{var i,n=e.responseXML;if(n)try{i=n.firstChild}catch(e){}if(n&&i)return o(e,n,r);if(d&&e.responseText&&!n&&(n=a.parseXML(e.responseText))&&n.firstChild)return o(e,n,r);if(r.requireValidXML)return void r.onerror("Invalid XML",r.url,e)}r.oncomplete(e)}}function o(e,t,n){var i=t.documentElement;if(!n.requireValidXML||"parsererror"!==i.nodeName&&!i.getElementsByTagName("parsererror").length)return e.responseXML||(e=u.extend({},e,{responseXML:t})),n.oncomplete(e);n.onerror("Invalid XML",n.url,e)}return{ajax:f,crossdomain:h}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(a){return function(){var n={},i={},t={},r={};return{start:function(e){n[e]=a.now(),t[e]=t[e]+1||1},end:function(e){var t;n[e]&&(t=a.now()-n[e],i[e]=i[e]+t||t)},dump:function(){return{counts:t,sums:i,events:r}},tick:function(e,t){r[e]=t||a.now()},between:function(e,t){return r[t]&&r[e]?r[t]-r[e]:-1}}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(6),n(16),n(2)],t=function(e,n,i,t){e=e.noop,t=t.constant(!1);return{supports:t,prevFrame:e,nextFrame:e,snapshot:e,test1:e,play:e,load:e,stop:e,volume:e,mute:e,seek:e,resize:e,remove:e,destroy:e,setVisibility:e,setFullscreen:t,getFullscreen:e,getContainer:e,setContainer:t,getName:e,getQualityLevels:e,getCurrentQuality:e,setCurrentQuality:e,getAudioTracks:e,getCurrentAudioTrack:e,setCurrentAudioTrack:e,checkComplete:e,setControls:e,attachMedia:e,detachMedia:e,setState:function(e){var t=this.state||i.IDLE;(this.state=e)!==t&&this.trigger(n.JWPLAYER_PLAYER_STATE,{newstate:e})},sendMediaType:function(e){e=e[0].type;this.trigger(n.JWPLAYER_MEDIA_TYPE,{mediaType:"oga"===e||"aac"===e||"mp3"===e||"mpeg"===e||"vorbis"===e?"audio":"video"})}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(2),n(151),n(45)],t=function(e,t,n,i){return[{name:"cybercore",supports:function(e){return!!(i.isHls(e.file,"")||i.isMp4(e.file,"")||i.isMov(e.file,"")||i.isFlv(e.file,"")||i.isMpegTs(e.file,"")||i.isMpd(e.file,"")||i.isRtc(e.type)||i.isMp3(e.file,"")||i.isAac(e.file,"")||i.isFlac(e.file,"")||i.isOgg(e.file,"")||i.isWav(e.file,"")||i.isOpus(e.file,""))&&e.isHEVC}}]}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t){e.exports={HEVC_NAL_TRAIL_N:0,HEVC_NAL_TRAIL_R:1,HEVC_NAL_TSA_N:2,HEVC_NAL_TSA_R:3,HEVC_NAL_STSA_N:4,HEVC_NAL_STSA_R:5,HEVC_NAL_RADL_N:6,HEVC_NAL_RADL_R:7,HEVC_NAL_RASL_N:8,HEVC_NAL_RASL_R:9,HEVC_NAL_VCL_N10:10,HEVC_NAL_VCL_R11:11,HEVC_NAL_VCL_N12:12,HEVC_NAL_VCL_R13:13,HEVC_NAL_VCL_N14:14,HEVC_NAL_VCL_R15:15,HEVC_NAL_BLA_W_LP:16,HEVC_NAL_BLA_W_RADL:17,HEVC_NAL_BLA_N_LP:18,HEVC_NAL_IDR_W_RADL:19,HEVC_NAL_IDR_N_LP:20,HEVC_NAL_CRA_NUT:21,HEVC_NAL_IRAP_VCL22:22,HEVC_NAL_IRAP_VCL23:23,HEVC_NAL_RSV_VCL24:24,HEVC_NAL_RSV_VCL25:25,HEVC_NAL_RSV_VCL26:26,HEVC_NAL_RSV_VCL27:27,HEVC_NAL_RSV_VCL28:28,HEVC_NAL_RSV_VCL29:29,HEVC_NAL_RSV_VCL30:30,HEVC_NAL_RSV_VCL31:31,HEVC_NAL_VPS:32,HEVC_NAL_SPS:33,HEVC_NAL_PPS:34,HEVC_NAL_AUD:35,HEVC_NAL_EOS_NUT:36,HEVC_NAL_EOB_NUT:37,HEVC_NAL_FD_NUT:38,HEVC_NAL_SEI_PREFIX:39,HEVC_NAL_SEI_SUFFIX:40,HEVC_NAL_RSV_NVCL41:41,HEVC_NAL_RSV_NVCL42:42,HEVC_NAL_RSV_NVCL43:43,HEVC_NAL_RSV_NVCL44:44,HEVC_NAL_RSV_NVCL45:45,HEVC_NAL_RSV_NVCL46:46,HEVC_NAL_RSV_NVCL47:47,HEVC_NAL_UNSPEC48:48,HEVC_NAL_UNSPEC49:49,HEVC_NAL_UNSPEC50:50,HEVC_NAL_UNSPEC51:51,HEVC_NAL_UNSPEC52:52,HEVC_NAL_UNSPEC53:53,HEVC_NAL_UNSPEC54:54,HEVC_NAL_UNSPEC55:55,HEVC_NAL_UNSPEC56:56,HEVC_NAL_UNSPEC57:57,HEVC_NAL_UNSPEC58:58,HEVC_NAL_UNSPEC59:59,HEVC_NAL_UNSPEC60:60,HEVC_NAL_UNSPEC61:61,HEVC_NAL_UNSPEC62:62,HEVC_NAL_UNSPEC63:63,SOURCE_CODE_VPS:64,SOURCE_CODE_SPS:66,SOURCE_CODE_PPS:68,SOURCE_CODE_SEI:78,SOURCE_CODE_IDR:38,SOURCE_CODE_P:2,SOURCE_CODE_SEI_END:128,DEFINE_STARTCODE:new Uint8Array([0,0,0,1]),DEFINE_KEY_FRAME:21,DEFINE_P_FRAME:9,DEFINE_OTHERS_FRAME:153}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=h;var r=n(21),a=i(n(31)),o=n(105),s=n(198),l=i(n(106)),u=n(107),c=(t.VERSION="4.7.8",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"},"[object Object]");function h(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(r.toString.call(e)===c){if(t)throw new a.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===c)r.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===c){if(t)throw new a.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};n=l.default.log;t.log=n,t.createFrame=r.createFrame,t.logger=l.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){r.default(e),a.default(e),o.default(e),s.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var r=i(n(191)),a=i(n(192)),o=i(n(193)),s=i(n(194)),l=i(n(195)),u=i(n(196)),c=i(n(197))},function(e,t,n){"use strict";t.__esModule=!0;var i=n(21),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){var t;return e="string"==typeof e?0<=(t=i.indexOf(r.methodMap,e.toLowerCase()))?t:parseInt(e,10):e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){e=r.methodMap[e];console[e]||(e="log");for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null),n=(t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1,Object.create(null));return n.__proto__=!1,{properties:{whitelist:i.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:i.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return o("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(a).forEach(function(e){delete a[e]})};var i=n(200),t=n(106),r=(n=t)&&n.__esModule?n:{default:n},a=Object.create(null);function o(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(!0!==a[e=t]&&(a[e]=!0,r.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1)}},function(e,t,n){n=[n(1),n(61),n(6),n(7),n(79),n(2)],t=function(e,h,d,f,p,m){var g=2;return function(t){var r,a,o,s,l=m.extend(this,f),u=p.loaderstatus.NEW;function n(){switch(h.getPluginPathType(t)){case h.pluginPathType.ABSOLUTE:return t;case h.pluginPathType.RELATIVE:return e.getAbsolutePath(t,window.location.href)}}function i(){m.defer(function(){u=p.loaderstatus.COMPLETE,l.trigger(d.COMPLETE)})}function c(){u=p.loaderstatus.ERROR,l.trigger(d.ERROR,{url:t})}this.load=function(){var e;u===p.loaderstatus.NEW&&(0<t.lastIndexOf(".swf")?(r=t,u=p.loaderstatus.COMPLETE,l.trigger(d.COMPLETE)):h.getPluginPathType(t)===h.pluginPathType.CDN?(u=p.loaderstatus.COMPLETE,l.trigger(d.COMPLETE)):(u=p.loaderstatus.LOADING,(e=new p(n())).on(d.COMPLETE,i),e.on(d.ERROR,c),e.load()))},this.registerPlugin=function(e,t,n,i){s&&(clearTimeout(s),s=void 0),o=t,n&&i?(r=i,a=n):"string"==typeof n?r=n:"function"==typeof n?a=n:n||i||(r=e),u=p.loaderstatus.COMPLETE,l.trigger(d.COMPLETE)},this.getStatus=function(){return u},this.getPluginName=function(){return h.getPluginName(t)},this.getFlashPath=function(){if(r)switch(h.getPluginPathType(r)){case h.pluginPathType.ABSOLUTE:return r;case h.pluginPathType.RELATIVE:return 0<t.lastIndexOf(".swf")?e.getAbsolutePath(r,window.location.href):e.getAbsolutePath(r,n())}return null},this.getJS=function(){return a},this.getTarget=function(){return o},this.getPluginmode=function(){return g},this.getNewInstance=function(e,t,n){return new a(e,t,n)},this.getURL=function(){return t}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(49),n(210),n(1),n(6),n(7),n(2)],t=function(l,u,i,c,e,h){return function(){var o=h.extend(this,e);function t(a){i.tryCatch(function(){var e,t=a.responseXML?a.responseXML.childNodes:null,n="";if(t){for(var i=0;i<t.length&&8===(n=t[i]).nodeType;i++);"xml"===l.localName(n)&&(n=n.nextSibling),"rss"===l.localName(n)&&(e={playlist:u.parse(n)})}if(!e)try{var r=JSON.parse(a.responseText);if(h.isArray(r))e={playlist:r};else{if(!h.isArray(r.playlist))throw null;e=r}}catch(e){return void s("Not a valid RSS/JSON feed")}o.trigger(c.JWPLAYER_PLAYLIST_LOADED,e)})instanceof i.Error&&s()}function n(e){s("Playlist load error: "+e)}function s(e){o.trigger(c.JWPLAYER_ERROR,{message:e||"文件加载失败"})}this.load=function(e){i.ajax(e,t,n)},this.destroy=function(){this.off()}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(111),n(213)],t=function(a,o,s){var l={sources:[],tracks:[]};return function(e){a.isArray((e=e||{}).tracks)||delete e.tracks;var t=a.extend({},l,e);a.isObject(t.sources)&&!a.isArray(t.sources)&&(t.sources=[o(t.sources)]),a.isArray(t.sources)&&0!==t.sources.length||(e.levels?t.sources=e.levels:t.sources=[o(e)]);for(var n=0;n<t.sources.length;n++){var i,r=t.sources[n];r&&(i=r.default,r.default=!!i&&"true"===i.toString(),t.sources[n].label||(t.sources[n].label=n.toString()),t.sources[n]=o(t.sources[n]))}return t.sources=a.compact(t.sources),a.isArray(t.tracks)||(t.tracks=[]),a.isArray(t.captions)&&(t.tracks=t.tracks.concat(t.captions),delete t.captions),t.tracks=a.compact(a.map(t.tracks,s)),t}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(15),n(2)],t=function(t,i,r){var a={default:!1,isHEVC:!1,isNative:!1};return function(e){if(e&&e.file){(t.isRtmp(e.file)||t.isFlv(e.file))&&t.isMobile()&&e.fallbackfile&&t.isHls(e.fallbackfile)&&(e.file=e.fallbackfile),t.isMobile()||t.isFlvjsSupported()||!t.isHls(e.file)&&!t.isFlv(e.file)||!e.fallbackfile||(e.file=e.fallbackfile);var n=r.extend({},a,e),e=(n.file=i.trim(""+n.file),/^[^\/]+\/(?:x-)?([^\/]+)$/);if(t.isRtmp(n.file)?n.type="rtmp":e.test(n.type)?n.type=n.type.replace(e,"$1"):n.type?n.isrtc&&(n.type="rtc"):n.type=i.extension(n.file),n.type){switch(n.type){case"m3u8":case"vnd.apple.mpegurl":n.type="hls";break;case"dash+xml":n.type="dash";break;case"smil":n.type="rtmp";break;case"m4a":n.type="aac"}return r.each(n,function(e,t){""===e&&delete n[t]}),n}}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(63),n(14),n(238),n(1)],t=function(e,t,n,i){return e.extend({constructor:function(e,t){this.defaultStatus=e,this.className=t,this.setup()},setup:function(){this.el=i.createElement(n()),this.el.classList.add(this.className)},addEvent:function(){document.getElementById("onoffswitch").checked=!!this.defaultStatus,document.getElementById("onoffswitch").addEventListener("click",()=>{document.getElementById("onoffswitch").checked?this.trigger("switch",!0):this.trigger("switch",!1)})},element:function(){return this.el}})}.apply(t,n);void 0!==t&&(e.exports=t)},,,,,function(e,t,n){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,n){"use strict";var i="object"==typeof Reflect?Reflect:null,l=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(s,l){return new Promise(function(e,t){function n(e){s.removeListener(l,i),t(e)}function i(){"function"==typeof s.removeListener&&s.removeListener("error",n),e([].slice.call(arguments))}var r,a,o;g(s,l,i,{once:!0}),"error"!==l&&(a=n,o={once:!0},"function"==typeof(r=s).on)&&g(r,"error",a,o)})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,a;return u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=c(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function d(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function f(e,t,n){e=e._events;if(void 0===e)return[];e=e[t];if(void 0===e)return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return m(e,e.length)}function p(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(n,i,r,a){if("function"==typeof n.on)a.once?n.once(i,r):n.on(i,r);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(i,function e(t){a.once&&n.removeEventListener(i,e),r(t)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){if((a=0<t.length?t[0]:a)instanceof Error)throw a;i=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw i.context=a,i}var a=r[e];if(void 0===a)return!1;if("function"==typeof a)l(a,this,t);else for(var o=a.length,s=m(a,o),n=0;n<o;++n)l(s[n],this,t);return!0},o.prototype.on=o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},o.prototype.off=o.prototype.removeListener=function(e,t){var n,i,r,a,o;if(u(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{for(var s=n,l=r;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0!==n)if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var t=n(22),i=n.n(t);function r(){return i()('/*! WebPlayer built @2024/5/8 16:07:54 */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){self.controller=new AbortController,self.onmessage=e=>{var t,e=e["data"];"pushUrl"==e.type?(t=self.controller.signal,fetch(e.videoURL,{signal:t}).then(e=>e.arrayBuffer()).then(e=>{e=new Uint8Array(e);postMessage(e,[e.buffer])}).catch(e=>{})):"destory"==e.type&&self.controller.signal.about()}}]);',"Worker",void 0,n.p+"fetch.worker.worker.js")}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var t=n(17),i=n.n(t),r=n(67),a=n(4);class o{constructor(e,t){this.config=e,this.configFormat=t,this.myPlayer=null,this.playerId=t.playerId,this.myPlayerID=t.playerId+"-rtc",this.duration=1/0,this.loadSuccess=!1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onRtcEvent=null,this.onError=null}makeIt(){let t=this;this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.videoTag.width=this.configFormat.playerW,this.videoTag.height=this.configFormat.playerH,!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",this.videoTag.autoplay="autoplay",window.onclick=document.body.onclick=function(e){t.videoTag.muted=!1});var e=document.querySelector("#"+this.configFormat.playerId);this.config.id=this.myPlayerID,e.insertBefore(this.videoTag,e.firstChild),Object(r.a)(this.videoTag),this.myPlayer=new i.a(this.config,e=>{"error"===e.type&&setTimeout(()=>{this.onRtcEvent&&this.onRtcEvent(e),this.onError({msg:a.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:a.ErrorTypes.NOT_SUPPORT,info:e})})}),this.myPlayer.subscribeLiveStream(),this.myPlayer.on(i.a.Events.RE_CONNECT_SUCCESS,()=>{this.play()}),this.myPlayer.on(i.a.Events.ERROR,(e,t)=>{this.onError&&this.onError(Object.assign({event:e},t))});for(let n in i.a.Events)this.myPlayer.on(i.a.Events[n],(e,t)=>{i.a.Events[n]===i.a.Events.CANPLAY&&this._onLoaded(),i.a.Events[n]===i.a.Events.ON_PLAY&&this.loadSuccess&&this.onPlayState&&this.onPlayState(!0),i.a.Events[n]===i.a.Events.ON_PAUSE&&this.onPlayState&&this.onPlayState(!1),this.onRtcEvent&&this.onRtcEvent(Object.assign({event:e},t))});this.onMakeItReady&&this.onMakeItReady()}async _onLoaded(){!0!==this.loadSuccess&&(this.onLoadFinish&&await this.onLoadFinish(),this.onReadyShowDone&&this.onReadyShowDone(),this.loadSuccess=!0,this.configFormat.autoPlay)&&this.onPlayState&&this.onPlayState(!0)}_refreshVideoTagEvent(){this.videoTag=document.getElementById(this.myPlayerID).querySelector("video")}async getSize(){var e=(await this.myPlayer.getStats())["video"];return{width:this.videoTag.videoWidth||e&&e.width||640,height:this.videoTag.videoHeight||e&&e.height||320}}play(){this.myPlayer&&this.myPlayer.play()}setVoice(e){this.myPlayer&&this.myPlayer.setVolume(e)}pause(){this.myPlayer&&this.myPlayer.pause()}isPlayingState(){return!(!this.myPlayer||"play"!=this.myPlayer.getPlayStatus())}async getMediaInfo(){return this.myPlayer&&await this.myPlayer.getStats()}release(){this.loadSuccess=!1,this.myPlayer.destroy(),this.myPlayerID=null,this.myPlayer=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var t=n(22),i=n.n(t);function r(){return i()('/*! WebPlayer built @2024/5/8 16:07:54 */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){self.onmessage=e=>{var t,o,r,e=e["data"];0==e.type?(self.controller&&self.controller.abort(),self.controller=new AbortController,t=self.controller.signal,o=0,(r=new Headers).append("Range",`bytes=${e.offset}-`),r=e.offset?{signal:t,headers:r}:{signal:t},fetch(e.videoURL,r).then(e=>{function n(r){return r.read().then(function(e){var t;if(!e.done)return e=e.value,t=JSON.parse(JSON.stringify(e.byteLength)),self.postMessage({type:0,fileStart:o,buffer:e.buffer},[e.buffer]),o+=t,n(r);self.postMessage({type:1})})}return self.postMessage({type:2}),n(e.body.getReader())}).catch(e=>{})):1==e.type&&self.controller&&self.controller.abort()}}]);',"Worker",void 0,n.p+"downloader.worker.worker.js")}},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-process-adv jw-reset">\n    <a target="_blank"><img/></a>\n</div>'},useData:!0})},,,,,,,,,,,,,,,,function(e,t,n){n=[n(139),n(264)],t=function(e){return window.__DEBUG__=!1,window.__LOG_API__="https://drm.media.baidubce.com:8888",window.cyberplayer=e.selectPlayer,e.selectPlayer}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(140),n(2),n(47),n(102),n(78)],t=function(i,e,t,n,r){function a(e){var t,n;return e?"string"==typeof e?(t=o(e))||(n=document.getElementById(e)):"number"==typeof e?t=c[e]:e.nodeType&&(t=o((n=e).id)):t=c[0],t||(n?(e=new i(n,s),h++,e.uniqueId=h,c.push(e),e):{registerPlugin:r.registerPlugin})}function o(e){for(var t=0;t<c.length;t++)if(c[t].id===e)return c[t];return null}function s(e){for(var t=c.length;t--;)if(c[t].uniqueId===e.uniqueId){c.splice(t,1);break}}var l,u,c=[],h=0,t={selectPlayer:a,registerProvider:t.registerProvider,availableProviders:n,registerPlugin:r.registerPlugin};a.api=t,_hmt=[];try{navigator.onLine?((l=document.createElement("script")).onerror=function(){_hmt=null},l.src="https://hm.baidu.com/hm.js?20ba3a41aeedac500c94bdef787f57e6",(u=document.getElementsByTagName("script")[0]).parentNode.insertBefore(l,u),_hmt.push(["_setAutoPageview",!1])):_hmt=null}catch(e){_hmt=null}return t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(6),n(16),n(7),n(1),n(100),n(2),n(147),n(260),n(261),n(262),n(263),n(34),n(4),n(50)],t=function(o,s,l,d,u,f,p,m,g,_,e,y,v,E){return function(e,t){function n(){c=new p(e),m(h,c),g(h,c),c.on(o.JWPLAYER_PLAYLIST_ITEM,function(){r={}}),c.on(o.JWPLAYER_MEDIA_META,function(e){f.extend(r,e)}),c.on(o.JWPLAYER_READY,function(e){a.tick("ready"),e.setupTime=a.between("setup","ready")}),c.on("all",h.trigger),c.on(o.JWPLAYER_ERROR,function(e){const{errorType:t,type:n,expireDay:i}=e;var r=h.getConfig()&&h.getConfig().options;let a=r&&r.lang?r.lang:"zh";if("mediaError"===e.type&&d.isMp4(e.videoSrc)&&e.detail&&("DEMUXER_ERROR_COULD_NOT_OPEN: FFmpegDemuxer: open context failed"===e.detail.message||4===e.detail.code))r.primary="justflash",c.setup(r,h);else if(t&&t==v.ErrorTypes.NOT_SUPPORT)c.setupError({message:E.default[a].ERRORTIPS.NOTSUPPORT});else if("linceseError"===t)if("EXPIRED_COUNT_DOWM"!=n)setTimeout(function(){h.remove(),c.setupError({message:E.default[a].LICENSE[n]},"license_error")});else for(var o=E.default[a].LICENSE[n]+""+i+E.default[a].LICENSE.DAY,s=d.getElementsByClassName("jw-warning"),l=0;l<s.length;l++){var u=s[l];u.innerText=o,u.style.display="block"}})}function i(){r={},h.off(),localStorage.setItem("baiducyberplayer.playbackRate",1),localStorage.setItem("baiducyberplayer.mute",!0),c&&c.off(),c&&c.playerDestroy&&c.playerDestroy()}var c,h=this,r={},a=(f.extend(this,l),this.utils=d,this._=f,this.Events=l,this.version=y,this.trigger=function(e,t){return(t=f.isObject(t)?f.extend({},t):{}).type=e,(window.jwplayer&&window.jwplayer.debug?l.trigger:l.triggerSafe).call(h,e,t)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this),n(),_(this),this.id=e.id,this._qoe=new u);a.tick("init");return this.getPlugin=function(e){return h.plugins&&h.plugins[e]},this.addPlugin=function(e,t){this.plugins=this.plugins||{},this.plugins[e]=t,this.onReady(t.addToPlayer),t.resize&&this.onResize(t.resizeHandler)},this.setup=function(e){return a.tick("setup"),i(),n(),d.foreach(e.events,function(e,t){e=h[e];"function"==typeof e&&e.call(h,t)}),e.id=h.id,c.setup(e,this),h},this.qoe=function(){var e=c.getItemQoe();return{setupTime:a.between("setup","ready"),firstFrame:e.between(o.JWPLAYER_MEDIA_PLAY_ATTEMPT,o.JWPLAYER_MEDIA_FIRST_FRAME),player:a.dump(),item:e.dump()}},this.getContainer=function(){return c.getContainer?c.getContainer():e},this.getMeta=this.getItemMeta=function(){return r},this.getPlaylistItem=function(e){var t;return d.exists(e)?(t=h.getPlaylist())?t[e]:null:c._model.get("playlistItem")},this.getRenderingMode=function(){return"html5"},this.load=function(e,t){var n=this.getPlugin("vast")||this.getPlugin("googima");return n&&n.destroy(),c.load(e,t),h},this.prevFrame=function(){return c.prevFrame()},this.nextFrame=function(){return c.nextFrame()},this.snapshot=function(e){return c.snapshot(e)},this.test1=function(){return c.test1(),h},this.play=function(e,t){return t=(t=f.isBoolean(e)?t:e)||{reason:"external"},!0===e?c.play(t):!1===e||(e=h.getState())===s.PLAYING?c.pause():c.play(t),h},this.pause=function(e){return f.isBoolean(e)?this.play(!e):this.play()},this.createInstream=function(){return c.createInstream()},this.castToggle=function(){c&&c.castToggle&&c.castToggle()},this.playAd=this.pauseAd=d.noop,this.remove=function(){return t(h),h.trigger("remove"),i(),h},this}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){return{hasClass:function(e,t){t=" "+t+" ";return 1===e.nodeType&&0<=(" "+e.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(t)}}}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){return{DOM_REMOVE_IGNORE:"dom-remove-ignore"}}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){n=function(e,t,n){var i,r,s={},a={},o=(i=function(){return document.head||document.getElementsByTagName("head")[0]},function(){return r=void 0===r?i.apply(this,arguments):r});function l(e){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-jwplayer-id",e),e=t,o().appendChild(e),t}function u(e,t){var n=a[e],e=(n=n||(a[e]={element:l(e),counter:0})).counter++,n=n.element,i=d.bind(null,n,e,!1),r=d.bind(null,n,e,!0);return i(t),function(e){e?e.css===t.css&&e.media===t.media||i(t=e):r()}}n.exports={style:function(e,t){!function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=(s[e]||{})[i.id];if(r){for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(u(e,i.parts[a]))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(u(e,i.parts[a]));s[e]=s[e]||{},s[e][i.id]={id:i.id,parts:o}}}}(t,function(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],a=r[0],o=r[1],r=r[2],o={css:o,media:r};n[a]?n[a].parts.push(o):t.push(n[a]={id:a,parts:[o]})}return t}(e))},clear:function(e){var t=s[e];if(t){for(var n=Object.keys(t),i=0;i<n.length;i+=1)for(var r=t[n[i]],a=0;a<r.parts.length;a+=1)r.parts[a]();delete s[e]}}};c=[];var c,h=function(e,t){return c[e]=t,c.filter(Boolean).join("\n")};function d(e,t,n,i){var n=n?"":i.css;e.styleSheet?e.styleSheet.cssText=h(t,n):(i=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i))}}.call(t,n,t,e);void 0!==n&&(e.exports=n)},function(e,t,n){n=[n(46),n(2),n(45),n(59),n(34)],t=function(t,e,n,i,r){var a={};return a.repo=e.memoize(function(){var e=r.split("+")[0],e=t.repo+e+"/";return n.isHTTPS()?e.replace(/^http:/,"https:"):e}),a.versionCheck=function(e){var e=("0"+e).split(/\W/),t=r.split(/\W/),n=parseFloat(e[0]),i=parseFloat(t[0]);return!(i<n||n===i&&parseFloat("0"+e[1])>parseFloat(t[1]))},a.loadFrom=function(){return __DEBUG__?i.getScriptPath("cyberplayer.js"):a.repo()},a}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){function i(e,t){this.name=e,this.message=t.message||t.toString(),this.error=t}return{tryCatch:function(t,e,n){if(e=e||this,n=n||[],window.jwplayer&&window.jwplayer.debug)return t.apply(e,n);try{return t.apply(e,n)}catch(e){return new i(t.name,e)}},Error:i}}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){var e={getElementsByClassName:function(e,t,n){if(n=n||"*",(t=t||document).getElementsByClassName)return t.getElementsByClassName(e);for(var i=[],r=t.getElementsByTagName(n),a=r.length,o=new RegExp("(^|\\s)"+e+"(\\s|$)"),s=0;s<a;s++)o.test(r[s].className)&&i.push(r[s]);return i},addEventListener:function(e,t,n,i){i=i||!1,(e=e||document).addEventListener?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n,i){i=i||!1,(e=e||document).removeEventListener?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n)},arrayFilter:function(){Array.prototype.filter||(Array.prototype.filter=function(e){if(null==this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();for(var i,r=[],a=arguments[1],o=0;o<n;o++)o in t&&(i=t[o],e.call(a,i,o,t))&&r.push(i);return r})},funcBind:function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){return i.apply(this instanceof r&&e?this:e||window,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),i=this,r=function(){};return r.prototype=this.prototype,t.prototype=new r,t})}};return e.arrayFilter(),e.funcBind(),e}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(148),n(149),n(2),n(206),n(214),n(73),n(77),n(216),n(109),n(1),n(217),n(47),n(7),n(72),n(16),n(6),n(254),n(256),n(299)],t=function(k,O,M,x,N,t,F,B,U,j,G,V,n,H,Y,z,o,W,K){function e(t){return function(){var e=Array.prototype.slice.call(arguments,0);this._model.getVideo()?this["_"+t].apply(this,e):this.eventsQueue.push([t,e])}}function i(e){this.originalContainer=this.currentContainer=e,this.errorElement=null,this.eventsQueue=[],this.isFirstTriggerPlay=!0,M.extend(this,n),this._model=new t,this.volume=-1,this.mute=-1}return i.prototype={prevFrame:e("prevFrame"),nextFrame:e("nextFrame"),snapshot:e("snapshot"),test1:e("test1"),play:e("play"),pause:e("pause"),setVolume:e("setVolume"),enableGPU:e("enableGPU"),disableGPU:e("disableGPU"),setToken:e("setToken"),setMute:e("setMute"),seek:e("seek"),stop:e("stop"),load:e("load"),playlistNext:e("next"),playlistPrev:e("prev"),playlistItem:e("item"),setFullscreen:e("setFullscreen"),setScreenshot:e("setScreenshot"),setPictInPict:e("setPictInPict"),setCaptureFrameStart:e("setCaptureFrameStart"),setCaptureFrameEnd:e("setCaptureFrameEnd"),setCurrentCaptions:e("setCurrentCaptions"),setCurrentQuality:e("setCurrentQuality"),setDanmuStatus:e("setDanmuStatus"),sendDanmu:e("sendDanmu"),setWatermark:e("setWatermark"),setMirror:e("setMirror"),setMaxSeekTime:e("setMaxSeekTime"),playNext:e("playNext"),setup:function(o,r){!0!==o.autostart||j.isMobile()||(o.origin_volume=o.volume,o.volume=0);var a,e,i,s,l,u=this._model,c=!1,n=!1,h=!0,d=this,f=(this.recording=!1,function(){return u.getVideo()}),t=new F,p=(t.track(u),new k(o,t));function m(){u.mediaModel.on("change:state",function(e,t){"playing"!==t||!j.isChrome66()&&!j.isMobile()||0!==r.getVolume()||u.get("autostart")||u.setVolume(p.originVolume);t=(t=t)===Y.LOADING||t===Y.STALLED?Y.BUFFERING:t;u.set("state",t)})}function g(){d.trigger(z.JWPLAYER_READY,{setupTime:0}),d.trigger(z.JWPLAYER_PLAYLIST_LOADED,{playlist:u.get("playlist")}),d.trigger(z.JWPLAYER_PLAYLIST_ITEM,{index:u.get("item"),item:u.get("playlistItem")}),d.trigger(z.JWPLAYER_CAPTIONS_LIST,{tracks:u.get("captionsList"),track:u.get("captionsIndex")}),u.get("autostart")&&(!j.isPoorIE()&&u.get("imageAdvs")&&u.get("imageAdvs").start?a.beginStartAdv():v({reason:"autostart"})),_()}function _(){for(;0<d.eventsQueue.length;){var e=d.eventsQueue.shift(),t=e[0],e=e[1]||[];d["_"+t].apply(d,e)}}function y(e,t){switch(u.get("state")===Y.ERROR&&u.set("state",Y.IDLE),E(!0),u.get("autostart")&&u.once("itemReady",v),typeof e){case"string":!function(e){var t=new U;t.on(z.JWPLAYER_PLAYLIST_LOADED,function(e){y(e.playlist)}),t.on(z.JWPLAYER_ERROR,function(e){e.message="播放列表加载失败: "+e.message,this.triggerError(e)},this),t.load(e)}(e);break;case"object":var n=B(e),i=u.get("edition"),n=u.getProviders().required(n,i);V.load(n,i).then(function(){d.getProvider()||(u.setProvider(u.get("playlistItem")),_())}),S(e)&&w(0);break;case"number":w(e,t)}}function v(n){var e;if(n&&u.set("playReason",n.reason),u.get("state")!==Y.ERROR){var t=d._instreamAdapter&&d._instreamAdapter.getState();if(M.isString(t))return r.pauseAd(!1);if(u.get("state")===Y.COMPLETE&&(E(!0),w(0)),!c){c=!0;let t=u.getVideo().getCurrentQuality();var i=u.get("playlistItem");let e=!1;if(t<0&&i&&u.get("qualityLabel")){for(let e=0;e<i.sources.length;e++)i.sources[e].label.toString()===u.get("qualityLabel").toString()&&(t=e);"flash"===u.getVideo().getName().name&&(e=!0)}if(t<0&&(t=0),(n&&"interaction"!=n.reason||d.isFirstTriggerPlay)&&(d.isFirstTriggerPlay=!1,d.trigger(z.JWPLAYER_MEDIA_BEFOREPLAY,{file:u.get("file")||u.get("playlistItem").sources[t].file,currentQuality:e?++t:t})),c=!1,l)return l=!1,void(s=null)}if(!0===u.get("hevc"))h=!1,e=j.tryCatch(function(){u.playVideo()});else if(b()){if(h=!1,0===u.get("playlist").length)return!1;!j.isPoorIE()&&u.get("imageAdvs")&&u.get("imageAdvs").start?a.beginStartAdv():e=j.tryCatch(function(){u.loadVideo()})}else if(u.get("state")===Y.PAUSED){if(h&&!u.get("autostart"))return h=!1,void(e=j.tryCatch(function(){u.loadVideo()}));h=!1,e=j.tryCatch(function(){u.playVideo()})}return!(e instanceof j.Error&&(d.triggerError(e),s=null,1))}}function E(e){u.off("itemReady",v);var e=!e,t=(s=null,j.tryCatch(function(){u.stopVideo()},d));return t instanceof j.Error?(d.triggerError(t),!1):(e&&(n=!0),c&&(l=!0),!0)}function A(){s=null;var e=d._instreamAdapter&&d._instreamAdapter.getState();if(M.isString(e))return r.pauseAd(!0);switch(u.get("state")){case Y.ERROR:return!1;case Y.PLAYING:case Y.BUFFERING:var t=j.tryCatch(function(){f().pause()},this);if(t instanceof j.Error)return d.triggerError(t),!1;break;default:c&&(l=!0)}return!0}function b(){var e=u.get("state");return e===Y.IDLE||e===Y.COMPLETE||e===Y.ERROR}function T(e,t,n){E(!0),w(e,null,n),v(t)}function S(e){e=B(e),e=B.filterPlaylist(e,u.getProviders(),u.get("androidhls"),u.get("drm"),u.get("preload"),u.get("feedid"),u.get("withCredentials"),u.get("hevc"),u.get("native"));return u.set("playlist",e),!(!M.isArray(e)||0===e.length)||(d.triggerError({message:"Error loading playlist: No playable sources found"}),!1)}function w(e,t,n){void 0!==_hmt&&null!==_hmt&&_hmt.push(["_trackPageview","/init/playerItem/hevc/"+(!0===u.get("hevc"))]);var i=u.get("playlist");e=((e=parseInt(e,10)||0)+i.length)%i.length,u.set("item",e),null!=t&&i[e].sources&&i[e].sources[t]&&(i[e].file=i[e].sources[t].file),n&&n.url&&u.set("file",n.url),u.set("playlistItem",i[e]),u.setActiveItem(i[e],t,n)}function R(e){T(u.get("item")+1,e||{reason:"external"})}function I(){b()&&(n?n=!1:(s=I,u.get("item")===u.get("playlist").length-1?u.get("repeat")?R({reason:"repeat"}):(u.set("state",Y.COMPLETE),d.trigger(z.JWPLAYER_PLAYLIST_COMPLETE,{})):R({reason:"playlist"})))}function C(){return f()?f().getCurrentQuality():-1}function L(){return f()?f().getQualityLevels():null}function P(){return e.getCurrentIndex()}function D(){return e.getCaptionsList()}u.setup(p,t),u.advManage&&u.advManage.setApi(r),j.isSupportWASM()&&(this._license=new K.default(p.licenseUrl,p.appid),this._license.onMessage=e=>{0!=e.code&&this.trigger(z.JWPLAYER_ERROR,e)},this._license.init()),a=this._view=new G(r,u),new W(r,u),e=new N(r,u),(i=new x(r,u,a,S)).on(z.JWPLAYER_READY,function(){var e=u.get("playlist");var t=e.findIndex(e=>e.default);var n=0;-1!=t&&(u.set("item",t),n=-1==(n=e[t].sources.findIndex(e=>e.default))?0:n);i=null,a.on("all",d.trigger.bind(d)),this.showView(a.element()),w(u.get("item"),n),u.on("change:state",H,this),u.on("change:castState",function(e,t){d.trigger(z.JWPLAYER_CAST_SESSION,t)}),u.on("change:fullscreen",function(e,t){d.trigger(z.JWPLAYER_FULLSCREEN,{fullscreen:t})}),u.on("change:screenshot",function(e,t){d.trigger(z.JWPLAYER_SCREESHOT,{img:t})}),u.on("itemReady",function(){d.trigger(z.JWPLAYER_PLAYLIST_ITEM,{index:u.get("item"),item:u.get("playlistItem")})}),u.on("change:playlist",function(e,t){t.length&&d.trigger(z.JWPLAYER_PLAYLIST_LOADED,{playlist:t})}),u.on("change:volume",function(e,t){d.volume!=t&&(d.volume=t,d.trigger(z.JWPLAYER_MEDIA_VOLUME,{volume:t}))}),u.on("change:mute",function(e,t){d.mute!=t&&(d.mute=t,d.trigger(z.JWPLAYER_MEDIA_MUTE,{mute:t}))}),u.on("change:controls",function(e,t){d.trigger(z.JWPLAYER_CONTROLS,{controls:t})}),u.on("change:scrubbing",function(e,t){(t?A:v)()}),u.on("change:captionsList",function(e,t){d.trigger(z.JWPLAYER_CAPTIONS_LIST,{tracks:t,track:P()})}),u.on("change:danmaku",(e,t)=>{}),u.mediaModel.set("mediaType",null),u.mediaController.on("all",d.trigger.bind(d)),M.defer(g)},this),i.on(z.JWPLAYER_SETUP_ERROR,this.setupError,this),u.mediaController.on(z.JWPLAYER_MEDIA_COMPLETE,function(){M.defer(I)}),u.mediaController.on(z.JWPLAYER_MEDIA_ERROR,this.triggerError,this),u.mediaController.on(z.JWPLAYER_MEDIA_META,e=>{e.formatType&&this._license&&this._license.setMediaData&&this._license.setMediaData(e)}),m(),u.on("change:mediaModel",m),this._prevFrame=function(){return void 0!==u.get("hevc")&&!0===u.get("hevc")&&u.prevFrame()},this._nextFrame=function(){return void 0!==u.get("hevc")&&!0===u.get("hevc")&&u.nextFrame()},this._snapshot=function(e){return!0===u.get("hevc")&&u.snapshot(e)},this._test1=function(){u.test1()},this._play=v,this._pause=A,this._seek=function(e){u.get("state")!==Y.ERROR&&(this.getConfig().disableSeekForward&&e>this._model.get("position")?d.trigger(z.JWPLAYER_SEEK_FORWARD_FORBIDDEN):(u.get("scrubbing")||u.get("state")===Y.PLAYING||v(!0),f().seek(e)))},this._stop=E,this._load=y,this._next=R,this._prev=function(e){T(u.get("item")-1,e||{reason:"external"})},this._item=T,this._setCurrentCaptions=function(e){e=parseInt(e,10)||0,u.persistVideoSubtitleTrack(e),d.trigger(z.JWPLAYER_CAPTIONS_CHANGED,{tracks:D(),track:e})},this._setCurrentQuality=function(e){f()&&(e=parseInt(e,10)||0,f().setCurrentQuality(e))},this._setFullscreen=function(e){M.isBoolean(e)||(e=!u.get("fullscreen")),u.set("fullscreen",!!j.isIOS()||e),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",e)},this._setScreenshot=function(){var e,t,n;void 0!==u.get("hevc")&&!0===u.get("hevc")?(document.getElementById("snapshot-player")&&document.getElementById("snapshot-player").remove(),e=document.createElement("canvas"),document.body.appendChild(e),e.setAttribute("id","snapshot-player"),e.setAttribute("crossOrigin","anonymous"),u.snapshot(e),d.trigger(z.JWPLAYER_SCREENSHOT,e)):((e=document.getElementById(this._model.get("id")).querySelector("video"))||(n=document.getElementById(this._model.get("id")).querySelector("canvas")),(t=document.createElement("img")).setAttribute("crossOrigin","anonymous"),t.src="",n?t.src=n.toDataURL("image/jpg"):(e.setAttribute("crossOrigin","anonymous"),n=document.createElement("canvas"),void 0!==e.videoWidth&&(n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0,n.width,n.height),t.src=n.toDataURL())),d.trigger(z.JWPLAYER_SCREENSHOT,t))},this._setPictInPict=function(e){M.isBoolean(e)||(e=!u.get("pictinpict")),(e=document.querySelector("video"))&&e!==document.pictureInPictureElement?(e.requestPictureInPicture(),u.set("pictinpict",!0)):(document.exitPictureInPicture(),u.set("pictinpict",!1))},this._setCaptureFrameStart=function(){if(!this.recording){let n=z.JWPLAYER_CaptureFrameFinished;this.recording_start=window.performance.now();var e=document.getElementById(this._model.get("id")).querySelector("video");if(e)if(e.captureStream){var e=e.captureStream(),i=e.getVideoTracks()[0],e=e.getAudioTracks()[0],r=new MediaStream;r.addTrack(i),0!==o.volume&&r.addTrack(e);try{var a={mimeType:"video/webm;codecs=vp8"};this.mediaRecorder=new MediaRecorder(r,a)}catch(e){return void this.trigger(n,{recorder_video_url:"",code:-1,error:e})}this.captureFrameData=[];let t=this;this.mediaRecorder.ondataavailable=function(e){e.data&&0<e.data.size&&t.captureFrameData.push(e.data)},this.mediaRecorder.onstop=function(){t.CaptureFrameFinished(),t.mediaRecorder=null},this.mediaRecorder.onerror=function(e){t.trigger(n,{recorder_video_url:"",code:-2,error:e})},this.recording=!this.recording,this.mediaRecorder.start()}else this.trigger(n,{recorder_video_url:"",code:-4,error:"captureStream error"});else this.trigger(n,{recorder_video_url:"",code:-3,error:"playback error"})}},this._setCaptureFrameEnd=function(){if(this.recording){this.recording_end=window.performance.now(),this.recording=!this.recording;let e=this;var t=this.recording_end-this.recording_start;setTimeout(()=>{e.mediaRecorder.stop()},t/2)}},this.CaptureFrameFinished=function(){let n=z.JWPLAYER_CaptureFrameFinished;return new Promise(t=>{setTimeout(()=>{var e=new Blob(this.captureFrameData,{type:"video/webm"});this.videoUrl=window.URL.createObjectURL(e),d.trigger(n,{recorder_video_url:this.videoUrl,blobSize:e.size,code:0}),t()})})},this.detachMedia=function(){var e=u.getVideo();if(e){e=e.detachMedia();if(e instanceof HTMLVideoElement)return e}return null},this.attachMedia=function(){var e=j.tryCatch(function(){u.getVideo().attachMedia()});e instanceof j.Error?j.log("Error calling _attachMedia",e):"function"==typeof s&&s()},this.getCurrentQuality=C,this.getQualityLevels=L,this.setCurrentAudioTrack=function(e){f()&&(e=parseInt(e,10)||0,f().setCurrentAudioTrack(e))},this.getCurrentAudioTrack=function(){return f()?f().getCurrentAudioTrack():-1},this.getAudioTracks=function(){return f()?f().getAudioTracks():null},this.getCurrentCaptions=P,this.getCaptionsList=D,this.getVisualQuality=function(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");if(t=L()){var e=C(),t=t[e];if(t)return{level:M.extend({index:e},t),mode:"",reason:""}}return null},this.getConfig=function(){if(this._model)return this._model.getConfiguration()},this.getState=function(){var e=d._instreamAdapter&&d._instreamAdapter.getState();return M.isString(e)?e:u.get("state")},this.getHlsCurrentLevel=function(){return f()?f().getHlsCurrentLevel():null},this.setMirror=function(){var e=u.get("mirror");u.set("mirror",!e)},this.setVolume=u.setVolume.bind(u),this.setMute=u.setMute.bind(u),this.enableGPU=u.enableGPU,this.disableGPU=u.disableGPU,this.setToken=u.setToken,this.setPlaybackRate=u.setPlaybackRate,this.setDanmuStatus=u.setDanmuStatus,this.setMaxSeekTime=u.setMaxSeekTime,this.playNext=function(e){e&&e.url&&(this.removeError(),T(u.get("item"),{reason:"external"},e))},this.getProvider=function(){return u.get("provider")},this.getWidth=function(){return u.get("containerWidth")},this.getHeight=function(){return u.get("containerHeight")},this.getMediaInfo=function(){return u.getMediaInfo()},this.VR=function(){return u.VR()},this.getContainer=function(){return this.currentContainer},this.resize=a.resize,this.getSafeRegion=a.getSafeRegion,this.setCues=a.addCues,this.setThumbnails=a.addThumbnails,this.setCaptions=a.setCaptions,this.sendDanmu=a.sendDanmu,this.setLang=a.setLang,this.setWatermark=a.setWatermark,this.addButton=function(e,t,n,i,r){e={img:e,tooltip:t,callback:n,id:i,btnClass:r},t=(t=u.get("dock"))?t.slice(0):[];(t=M.reject(t,M.matches({id:e.id}))).push(e),u.set("dock",t)},this.removeButton=function(e){var t=u.get("dock")||[],t=M.reject(t,M.matches({id:e}));u.set("dock",t)},this.checkBeforePlay=function(){return c},this.getItemQoe=function(){return u._qoeItem},this.setControls=function(e){M.isBoolean(e)||(e=!u.get("controls")),u.set("controls",e);var t=u.getVideo();t&&t.setControls(e)},this.setSeekStep=function(e){u.set("seek_step",e)},this.setKeyControls=function(e){u.set("keyControls",e)},this.playerDestroy=function(){this.errorElement=null,this.stop(),this.showView(this.originalContainer),a&&a.destroy(),u&&u.destroy(),i&&(i.destroy(),i=null),this._license&&this._license.destroy&&this._license.destroy()},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return u.getVideo().checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new O(this,u,a),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){d._instreamAdapter&&d._instreamAdapter.destroy()},i.start()},showView:function(e,t){(document.documentElement.contains(this.currentContainer)||(this.currentContainer=document.getElementById(this._model.get("id")),this.currentContainer))&&(this.currentContainer.parentElement&&(t||(this.errorElement&&e.appendChild(this.errorElement),this.currentContainer.parentElement.replaceChild(e,this.currentContainer)),t)?this.currentContainer.appendChild(e):this.currentContainer=e)},triggerError:function(e){this._model.set("errorEvent",e),this._model.set("state",Y.ERROR),this._model.once("change:state",function(){this._model.set("errorEvent",void 0)},this),this.trigger(z.JWPLAYER_ERROR,e)},setupError:function(e,t){var n=e.message,t=j.createElement(o(t||this._model.get("id")+"_error",this._model.get("skin"),n)),i=this._model.get("width"),r=this._model.get("height"),a=(j.style(t,{width:0<i.toString().indexOf("%")?i:i+"px",height:0<r.toString().indexOf("%")?r:r+"px"}),document.getElementById(this._model.get("id")).appendChild(t),this.errorElement=t,this);M.defer(function(){a.trigger(z.JWPLAYER_SETUP_ERROR,{message:n,code:e.code})})},removeError:function(){var e=document.getElementById(this._model.get("id"));try{this.errorElement&&(e.removeChild(this.errorElement),this.errorElement=null)}catch(e){}}},i}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,s){var n=[s(1),s(2)],t=function(i,r){var a={autostart:!1,controls:!0,keyControls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,repeat:!1,castAvailable:!1,skin:"bce",stretching:"uniform",mute:!1,volume:100,width:480,height:270,controlbar:{barLogo:!1,barLogoUrl:"https://cloud.baidu.com/solution/media.html",canDrag:!0},marquee:{show:!1,text:"百度云",fontSize:12,color:"#FFF"},startseek:!0,flashUI:!1,playRate:!0,playbackRate:1,playRateConfig:[{label:"×0.5"},{label:"×1"},{label:"×1.5"},{label:"×2"},{label:"×3"},{label:"×4"},{label:"×5"},{label:"×8"}],isLive:!1,allowDoubleClickFullscreen:!0,allowClickToDisplay:!0,retryCount:0,tokenEncrypt:!1,crossoriginAnonymous:!1,withLog:!0};function o(e){return e=e.slice&&"px"===e.slice(-2)?e.slice(0,-2):e}return function(e,t){e.autoStart&&(e.autostart=!0),"over"!==e.controls&&"none"!==e.controls||(e.controls="over"===e.controls),e.startParam&&(e.startparam=e.startParam);var n,t=t&&t.getAllItems(),t=r.extend({},(window.jwplayer||{}).defaults,t,e),t=(n=t,r.each(n,function(e,t){n[t]=i.serialize(e)}),r.extend({},a,t));return t.options=e,void 0===t.controlbar.canDrag&&(t.controlbar.canDrag=!0),"."===t.base&&(t.base=i.getScriptPath("cyberplayer.js")),t.playRate||(t.playbackRate=1),t.base=(t.base||i.loadFrom()).replace(/\/?$/,"/"),s.p=t.base,t.width=o(t.width),t.height=o(t.height),t.flashplayer=t.flashplayer||i.getScriptPath("cyberplayer.js")+"cyberplayer.flash.swf","http:"===window.location.protocol&&(t.flashplayer=t.flashplayer.replace("https","http")),t.aspectratio=function(e,t){if(-1===t.toString().indexOf("%"))return 0;if("string"!=typeof e||!i.exists(e))return 0;if(/^\d*\.?\d+%$/.test(e))return e;t=e.indexOf(":");if(-1===t)return 0;var n=parseFloat(e.substr(0,t)),e=parseFloat(e.substr(t+1));if(n<=0||e<=0)return 0;return e/n*100+"%"}(t.aspectratio,t.width),r.isObject(t.skin)&&(t.skinUrl=t.skin.url,t.skinColorInactive=t.skin.inactive,t.skinColorActive=t.skin.active,t.skinColorBackground=t.skin.background,t.skin=r.isString(t.skin.name)?t.skin.name:a.skin),r.isString(t.skin)&&0<t.skin.indexOf(".xml")&&(t.skin=t.skin.replace(".xml","")),t.aspectratio||delete t.aspectratio,t.playlist||(!(e=r.pick(t,["title","description","type","mediaid","image","file","sources","tracks","preload","fallbackfile"])).file&&t.RtcPlugin&&(e=Object.assign(e,{file:t.RtcPlugin.serverUrl,isrtc:!0},t.RtcPlugin)),t.playlist=[e]),i.isPoorIE()&&(e=t,(i.isMSIE(7)||i.isMSIE(6))&&(e.flashUI=!0),e.skin="bce",e.startseek=!1,delete e.skinColorInactive,delete e.skinColorActive,delete e.skinColorBackground,t=e),(i.isChrome66()||i.isMobile())&&(t.originVolume=t.volume,t.volume=0),t}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(150),n(205),n(6),n(16),n(1),n(7),n(2)],t=function(g,_,y,v,E,e,A){function t(t,r,n){var a,o,i,s,l,u=new(0<=(r.get("provider").name||"").indexOf("flash")?_:g)(t,r),c=0,h={},e=A.bind(function(e){(e=e||{}).hasControls=!!r.get("controls"),this.trigger(y.JWPLAYER_INSTREAM_CLICK,e),u&&u._adModel&&(u._adModel.get("state")===v.PAUSED?e.hasControls&&u.instreamPlay():u.instreamPause())},this),d=A.bind(function(){u&&u._adModel&&u._adModel.get("state")===v.PAUSED&&r.get("controls")&&(t.setFullscreen(),t.play())},this);function f(e,t){"complete"!==e&&(t=t||{},h.tag&&!t.tag&&(t.tag=h.tag),this.trigger(e,t))}function p(e){u._adModel.set("duration",e.duration),u._adModel.set("position",e.position)}function m(e){var t,n,i={};h.tag&&(i.tag=h.tag),a&&c+1<a.length?(this.trigger(y.JWPLAYER_MEDIA_COMPLETE,i),u._adModel.set("state","buffering"),r.set("skipButton",!1),t=a[++c],o&&(n=o[c]),this.loadItem(t,n)):(e.type===y.JWPLAYER_MEDIA_COMPLETE&&(this.trigger(y.JWPLAYER_MEDIA_COMPLETE,i),this.trigger(y.JWPLAYER_PLAYLIST_COMPLETE,{})),this.destroy())}this.type="instream",this.init=function(){i=r.getVideo(),s=r.get("position"),l=r.get("playlist")[r.get("item")],u.on("all",f,this),u.on(y.JWPLAYER_MEDIA_TIME,p,this),u.on(y.JWPLAYER_MEDIA_COMPLETE,m,this),u.init(),i.detachMedia(),r.mediaModel.set("state",v.BUFFERING),t.checkBeforePlay()||0===s&&!i.checkComplete()?(s=0,r.set("preInstreamState","instream-preroll")):i&&i.checkComplete()||r.get("state")===v.COMPLETE?r.set("preInstreamState","instream-postroll"):r.set("preInstreamState","instream-midroll");var e=r.get("state");return e!==v.PLAYING&&e!==v.BUFFERING||i.pause(),n.setupInstream(u._adModel),u._adModel.set("state",v.BUFFERING),n.clickHandler().setAlternateClickHandlers(E.noop,null),this.setText("Loading ad"),this},this.loadItem=function(e,t){E.isAndroid(2.3)?this.trigger({type:y.JWPLAYER_ERROR,message:"流加载失败：在Android 2.3上不能加载流"}):(A.isArray(e)&&(o=t,e=(a=e)[c],o)&&(t=o[c]),this.trigger(y.JWPLAYER_PLAYLIST_ITEM,{index:c,item:e}),h=A.extend({},b,t),u.load(e),this.addClickHandler(),(t=e.skipoffset||h.skipoffset)&&(u._adModel.set("skipMessage",h.skipMessage),u._adModel.set("skipText",h.skipText),u._adModel.set("skipOffset",t),r.set("skipButton",!0)))},this.applyProviderListeners=function(e){u.applyProviderListeners(e),this.addClickHandler()},this.play=function(){u.instreamPlay()},this.pause=function(){u.instreamPause()},this.hide=function(){u.hide()},this.addClickHandler=function(){n.clickHandler().setAlternateClickHandlers(e,d),u.on(y.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(e){var t=y.JWPLAYER_AD_SKIPPED;this.trigger(t,e),m.call(this,{type:t})},this.metaHandler=function(e){e.width&&e.height&&n.resizeMedia()},this.destroy=function(){if(this.off(),r.set("skipButton",!1),u)switch(n.clickHandler()&&n.clickHandler().revertAlternateClickHandlers(),u.instreamDestroy(),n.destroyInstream(),u=null,t.attachMedia(),r.get("preInstreamState")){case"instream-preroll":case"instream-midroll":var e=A.extend({},l);e.starttime=s,r.loadVideo(e),E.isMobile()&&r.mediaModel.get("state")===v.BUFFERING&&i.setState(v.BUFFERING),i.play();break;case"instream-postroll":case"instream-idle":i.stop()}},this.getState=function(){return!(!u||!u._adModel)&&u._adModel.get("state")},this.setText=function(e){n.setAltText(e||"")},this.hide=function(){n.useExternalControls()}}var b={skipoffset:null,tag:null};return A.extend(t.prototype,e),t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(7),n(72),n(6),n(16),n(73)],t=function(u,c,h,d,f,p){return function(e,t){var n,i,r=u.extend(this,c);function a(e){e=e||n.getVideo();i!==e&&(i=e)&&(e.off(),e.on("all",function(e,t){t=u.extend({},t,{type:e}),this.trigger(e,t)},r),e.on(d.JWPLAYER_MEDIA_BUFFER_FULL,l),e.on(d.JWPLAYER_PLAYER_STATE,o),e.attachMedia(),e.volume(t.get("volume")),e.mute(t.get("mute")),n.on("change:state",h,r))}function o(e){switch(e.newstate){case f.PLAYING:case f.PAUSED:n.set("state",e.newstate)}}function s(e){t.trigger(e.type,e),r.trigger(d.JWPLAYER_FULLSCREEN,{fullscreen:e.jwstate})}function l(){n.getVideo().play()}return e.on(d.JWPLAYER_FULLSCREEN,function(e){this.trigger(d.JWPLAYER_FULLSCREEN,e)},r),this.init=function(){(n=(new p).setup({id:t.get("id"),volume:t.get("volume"),fullscreen:t.get("fullscreen"),mute:t.get("mute")})).on("fullscreenchange",s),this._adModel=n},r.load=function(e){n.set("item",0),n.set("playlistItem",e),n.setActiveItem(e),a(),n.off(d.JWPLAYER_ERROR),n.on(d.JWPLAYER_ERROR,function(e){this.trigger(d.JWPLAYER_ERROR,e)},r),n.loadVideo(e)},r.applyProviderListeners=function(e){a(e),e.off(d.JWPLAYER_ERROR),e.on(d.JWPLAYER_ERROR,function(e){this.trigger(d.JWPLAYER_ERROR,e)},r),t.on("change:volume",function(e,t){i.volume(t)},r),t.on("change:mute",function(e,t){i.mute(t)},r)},this.instreamDestroy=function(){n&&(n.off(),this.off(),i&&(i.detachMedia(),i.off(),n.getVideo())&&i.destroy(),n=null,e.off(null,null,this),e=null)},r.instreamPlay=function(){n.getVideo()&&n.getVideo().play(!0)},r.instreamPause=function(){n.getVideo()&&n.getVideo().pause(!0)},r}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){return document.createElement("video")}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(153)],t=function(e){return{cybercore:e}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n(12);n=[n(33),n(1),n(71),n(2),n(6),n(16),n(101),n(7),n(154),n(45),n(155),n(12)],t=function(x,N,e,F,B,U,j,G,V,t,H,Y){var z=window.clearTimeout,W=N.isIE(),K=(N.isMSIE(),N.isMobile(),N.isFF(),N.isAndroidNative());N.isIOS(7),N.isIOS(8);function n(u,l){let t=l.file,n=l.isMemoryPlay?localStorage.getItem("baiducyberplayer.filePostion."+l.file):l.starttime||null;!t&&l.playlist.length&&(e=l.item||0,t=l.playlist[e].file);var e=l.width,i=l.height;const c=l.autostart;var r=l.repeat,a=l.duration;const h=l.controls;this.isInitSeek=!0;let o=40960,s=0;l.hevcProbe?o=l.hevcProbe:s=.1;var d=this,e={player:u,width:e,height:i,token:"base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1",danmaku:l.danmaku,extInfo:{probeSize:o,coreProbePart:s,moovStartFlag:!0,ignoreAudio:l.audioNone||0,autoPlay:c,repeat:r,duration:a,hevc:!l.native},useSoftDecoding:!!l.useSoftDecoding,RtcPlugin:l.RtcPlugin,openToken:l.openToken,maxBufferLength:l.maxBufferLength,headers:l.headers,timeShift:l.timeShift,enableDecoderDegrade:0!=l.enableDecoderDegrade,startPosition:l.starttime,VRPlugin:l.VRPlugin};function f(){return d.extPlayerMediaInfo&&(void 0===d.extPlayerMediaInfo.meta.size.width||null===d.extPlayerMediaInfo.meta.size.width||0===d.extPlayerMediaInfo.meta.size.width||void 0===d.extPlayerMediaInfo.meta.size.height||null===d.extPlayerMediaInfo.meta.size.height||0===d.extPlayerMediaInfo.meta.size.height||!d.extPlayerGL)}function p(){d.extPlayer.setVoice(d.vol/100);var e={duration:d.extPlayerDur,height:d.extPlayerMediaInfo.meta.size.height,width:d.extPlayerMediaInfo.meta.size.width,videoCodec:d.extPlayerMediaInfo.meta.videoCodec,formatType:d.extPlayerMediaInfo.formatType,isVR:!!l.VRPlugin},e=(!(d.extPlayer&&d.extPlayer.configFormat&&d.extPlayer.configFormat.useSoftDecoding)&&0<n&&n<=d.extPlayerDur&&c?W?(d.pause(),d.setState(U.PLAYING),d.isInitSeek=!1):d.extPlayer.seek(n,null,!0):d.isFirstSeek=!0,d.trigger(B.JWPLAYER_MEDIA_META,e),D(d.extPlayerDur),document.querySelector(".jw-display-icon-container"));if(e&&(e.parentNode.style="pointer-events:none",e.style.display=""),!0===c&&d.isMuted&&(d.mute(!0),d.extPlayer.player.isPlayingState)&&!d.extPlayer.player.isPlayingState()&&d.play(!0),k(),d.extPlayerGL.setAttribute("disableRemotePlayback",""),d.extPlayerGL.setAttribute("x-webkit-airplay","allow"),d.extPlayerGL.setAttribute("webkit-playsinline",""),d.extPlayerGL.setAttribute("playsinline",""),d.extPlayerGL.setAttribute("x5-playsinline",""),d.extPlayerGL.setAttribute("crossOrigin","anonymous"),!0===h&&l.playRate){const a="jw-icon jw-icon-tooltip jw-icon-playrate jw-button-color jw-reset",o="jw-text jw-option jw-item-0 jw-reset";let t=d.extPlayerContainer.querySelector(".jw-icon-playrate"),n=(t.style.display="",t.setAttribute("class","jw-icon jw-icon-tooltip jw-icon-playrate jw-button-color jw-reset"),t.contains(document.querySelector(".jw-menu-playrate"))&&document.querySelector(".jw-menu-playrate").parentElement.removeChild(document.querySelector(".jw-menu-playrate")),t.openShow=!1,t.onclick=function(e){!1===t.openShow?t.setAttribute("class",a+" jw-open"):t.setAttribute("class",a),t.openShow=!t.openShow},d.extPlayerContainer.querySelector(".jw-playrate-label"));n.textContent="x1";var e=t.querySelector("div.jw-overlay"),i=document.createElement("ul"),r=(i.setAttribute("class","jw-menu jw-menu-playrate jw-background-color jw-reset"),e.appendChild(i),l.playRateConfig||[{label:"×0.5"},{label:"×1"},{label:"×2"},{label:"×3"},{label:"×4"},{label:"×8"}]);for(let t=0;t<r.length;t++){const s=r[t].label;let e=document.createElement("li");e.setAttribute("class",o+"jw-active-option"),e.textContent=s,e.onmouseenter=function(){e.setAttribute("class",o+" jw-active-option")},e.onmouseleave=function(){e.setAttribute("class",o)},e.onclick=function(e){n.textContent=s,d.setPlaybackRate(s.slice(1))},i.appendChild(e)}1!=d.playbackRate&&d.setPlaybackRate(JSON.stringify(d.playbackRate))}}this.videoURL=t,this.alreadyMvNode=!1,this.extNeedManualClickBoot=!1,this.extPlayerContainer=null,this.extPlayerPTS=0,this.extPlayerDur=0,this.vol=l.volume||l.options.origin_volume||l.options.volume,this.isMuted=l.mute,this.playbackRate=l.playbackRate,this.extPlayerGL=null,this.extPlayerLoadOK=!1,this.extPlayerMediaInfo=null,this.hlsTokenObj=null,this.isFirstSeek=!1,this.maxSeekTime=-1,this.extPlayer=H.default.createPlayer(t,e),this.extPlayer.onMakeItReady=()=>{var e=document.querySelector("#"+u),t=e.getElementsByTagName("div");d.extPlayerGL=e.getElementsByTagName("video")[0],!1===d.alreadyMvNode&&d.extPlayerGL&&t[0]&&d.extPlayerGL!==t[0]&&(d.alreadyMvNode=!0,d.extPlayerGL.parentNode===e?d.extPlayerGL.parentNode.insertBefore(d.extPlayerGL,t[0]):d.extPlayerGL.parentNode.parentNode.insertBefore(d.extPlayerGL.parentNode,t[0])),!0===c&&d.setState(U.LOADING),l.image&&d.trigger(B.JWPLAYER_H265WEB_COVERLOADED)},this.extPlayer.onPerformance=e=>{this.trigger(B.JWPLAYER_PERFORMANCE,e)},this.extPlayer.onNetworkError=e=>{d.trigger(B.JWPLAYER_MEDIA_ERROR,{message:message,code:"111",detail:"network error",videoSrc:t})},this.extPlayer.onReadyShowDone=()=>{this.extPlayerLoadOK=!0;let n=4;if(f()){let t=window.setInterval(function(){var e;0===n&&(window.clearInterval(t),t=null),f()?(--n,d.extPlayerContainer=document.querySelector("#"+u),l.native||!0!==d.extPlayerMediaInfo.useSoftDecoding?(d.extPlayerGL=d.extPlayerContainer.getElementsByTagName("video")[0],d.extPlayerGL||d.extPlayer.onMakeItReady(),!0===c&&(d.extPlayerGL.muted=!0,d.volume(0)),void 0!==d.extPlayerGL&&null!==d.extPlayerGL&&d.extPlayerGL&&(e=d.extPlayerContainer.getElementsByTagName("div"),!1===d.alreadyMvNode&&d.extPlayerGL!==e[0]&&(d.alreadyMvNode=!0,d.extPlayerGL.parentNode.insertBefore(d.extPlayerGL,e[0])),void 0!==d.extPlayerMediaInfo.meta.size.width&&null!==d.extPlayerMediaInfo.meta.size.width&&0!==d.extPlayerMediaInfo.meta.size.width&&void 0!==d.extPlayerMediaInfo.meta.size.height&&null!==d.extPlayerMediaInfo.meta.size.height&&0!==d.extPlayerMediaInfo.meta.size.height||(d.extPlayerMediaInfo.meta.size.width=d.extPlayerGL.videoWidth,d.extPlayerMediaInfo.meta.size.height=d.extPlayerGL.videoHeight))):(d.extPlayerGL=d.extPlayerContainer.getElementsByTagName("canvas")[0],d.extPlayerGL.setAttribute("crossOrigin","anonymous"))):(window.clearInterval(t),t=null,p())},500)}else p()},this.extPlayer.onLoadFinish=e=>{this.extNeedManualClickBoot=!1;try{this.extPlayerMediaInfo=this.extPlayer.mediaInfo(),this.extPlayerDur=this.extPlayerMediaInfo.meta.durationMs/1e3}catch(e){}if(this.extPlayerContainer=document.querySelector("#"+u),void 0===this.extPlayerGL||null===this.extPlayerGL)if(!0===this.extPlayerMediaInfo.useSoftDecoding)this.extPlayerGL=this.extPlayerContainer.getElementsByTagName("canvas")[0],this.extPlayerGL.setAttribute("crossOrigin","anonymous");else if(this.extPlayerGL=this.extPlayerContainer.getElementsByTagName("video")[0],void 0!==this.extPlayerGL&&null!==this.extPlayerGL&&this.extPlayerGL){var t=this.extPlayerContainer.getElementsByTagName("div");if(!1===this.alreadyMvNode&&this.extPlayerGL!==t[0]){this.alreadyMvNode=!0;try{this.extPlayerGL.parentNode.insertBefore(this.extPlayerGL,t[0])}catch(e){}}void 0!==this.extPlayerMediaInfo.meta.size.width&&null!==this.extPlayerMediaInfo.meta.size.width&&0!==this.extPlayerMediaInfo.meta.size.width&&void 0!==this.extPlayerMediaInfo.meta.size.height&&null!==this.extPlayerMediaInfo.meta.size.height&&0!==this.extPlayerMediaInfo.meta.size.height||(this.extPlayerMediaInfo.meta.size.width=this.extPlayerGL.videoWidth,this.extPlayerMediaInfo.meta.size.height=this.extPlayerGL.videoHeight)}t={duration:this.extPlayerDur,height:this.extPlayerMediaInfo.meta.size.height,width:this.extPlayerMediaInfo.meta.size.width};!1===e?this.setState(U.LOADING):(this.extPlayer.setVoice(this.vol/100),this.mute(0==this.vol),!0===c||l.image||this.extPlayer.isPlaying()||this.setState(U.PAUSED)),this.trigger(B.JWPLAYER_MEDIA_META,t),D(this.extPlayerDur)},this.extPlayer.onLoadCache=()=>{this.setState(U.LOADING)},this.extPlayer.onLoadCacheFinshed=()=>{this.extPlayer.isPlaying()?this.setState(U.PLAYING):this.setState(U.PAUSED)},this.extPlayer.onPlayState=e=>{!0===e?0<n&&n<=d.extPlayerDur&&this.isInitSeek||d.setState(U.PLAYING):d.setState(U.PAUSED)},this.extPlayer.onPlayTime=(e,t,n)=>{this.extPlayerPTS=e;var i=this.extPlayerPTS;_=i=g<0?-(!0-i):i,this.state===U.PLAYING&&this.trigger(B.JWPLAYER_MEDIA_TIME,{position:t?t+e:_,duration:n||(t?t+g:g)})},this.extPlayer.onSeiInfo=e=>{this.state===U.PLAYING&&this.trigger(B.JWPLAYER_VIDEO_SEI,e)},this.extPlayer.onCacheProcess=e=>{var t,n;e=Math.min(+e/g,1),t=this.extPlayerPTS,n=g,e===b&&n===g||(b=e,d.trigger(B.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:n}))},this.extPlayer.onSeekStart=e=>{this.seeking=!0,this.extPlayer.isPlaying()&&this.setState(U.LOADING),this.trigger(B.JWPLAYER_MEDIA_SEEK_START),e||this.mute(!0)},this.extPlayer.onSeekFinish=(e,t)=>{this.seeking=!1,(this.extPlayer.isPlaying()&&e&&!t||0<n&&n<=d.extPlayerDur&&this.isInitSeek&&e&&!t)&&(this.isInitSeek=!1,this.extPlayer.isPlaying())&&this.setState(U.PLAYING),e&&this.mute(!1),this.trigger(B.JWPLAYER_MEDIA_SEEK_FINISHED)},this.extPlayer.onPlayFinish=()=>{z(A),d.setState(U.PAUSED),w=!1,d.trigger(B.JWPLAYER_MEDIA_COMPLETE)},this.extPlayer.onRtcEvent=e=>{this.trigger(B.JWPLAYER_RTCEVENT,e)},this.extPlayer.onLiveShift=()=>{d.isMuted=!1,d.extPlayerGL=null},this.extPlayer.onError=e=>{setTimeout(()=>{this.trigger(B.ERROR,e)})},this.extPlayer.onRender=(e,t,n,i,r)=>{},this.extPlayer.onQualityLevels=e=>{this.trigger(B.JWPLAYER_HLS_QUALITYLIST_CHANGE,{levels:e})},this.extPlayer.onLevelUpdates=e=>{this.trigger(B.JWPLAYER_LEVEL_UPDATED,{data:e})},this.extPlayer.onPause=()=>{this.pause()},this.extPlayer.onPlay=()=>{this.play()},this.cybercorePlay=(e=!1)=>{this.extPlayer&&!this.extPlayer.isPlaying()?("ts"===Y.GetUriFormat(this.videoURL)||n||this.setState(U.PLAYING),this.extPlayer.play(),!0===this.autoPlayWithInterrupt&&(0===this.vol&&(this.vol=l.options.origin_volume),this.volume(this.vol),0<this.vol)&&this.mute(!1)):!1===e?(this.setState(U.PAUSED),this.extPlayer.pause()):(n||this.setState(U.PLAYING),this.extPlayer.play(),!0===this.autoPlayWithInterrupt&&this.volume(this.vol))},this.cybercorePause=()=>{this.extPlayer.pause(),!0===c&&(this.autoPlayWithInterrupt=!0)},this.state=U.IDLE,this.seeking=!1,F.extend(this,G,V),this.trigger=function(e,t){if(T)return G.trigger.call(this,e,t)},this.setState=function(e){return j.setState.call(this,e)},this.setControls=function(e){};var m,g,_,y,v,d=this,E=0,A=-1,b=-1,T=!0,S=-1,i=!!l.sdkplatform,w=!1,R=!1,I=null,C=-1,L={level:{}},P=null,r=document.getElementById(u);function D(e){g=e,E&&e&&e!==1/0&&d.seek(E)}function k(){y||(y=!0,d.trigger(B.JWPLAYER_MEDIA_BUFFER_FULL))}function O(e){S=function(e){var t=Math.max(0,S),n=l.qualityLabel;if(e)for(var i=0;i<e.length;i++)if(e[i].default&&(t=i),n&&e[i].label===n)return i;return L.reason="initial choice",L.level={},t}(v=e);e=M(e);e&&d.trigger(B.JWPLAYER_MEDIA_LEVELS,{levels:e,currentQuality:S})}function M(e){var t;return t="array"===N.typeOf(e)&&0<e.length?F.map(e,function(e,t){return{label:e.label||t}}):t}this.isSDK=i,this.itemTracks=null,this.video=r,this.stop=function(){z(A),T&&(this.setState(U.IDLE),this.extPlayerLoadOK=!1)},this.destroy=function(){this.remove(),this.alreadyMvNode=!1},this.init=function(e,t){T&&(v=e.sources,e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),_=e.starttime||0,g=e.duration||0,L.reason="",this.itemTracks,P=t)},this.load=function(e){var t;T&&(O(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),t=e.starttime||0,e.duration,n=t,!(d.extPlayer&&d.extPlayer.configFormat&&d.extPlayer.configFormat.useSoftDecoding))&&d.isInitSeek&&!c&&n&&0<n&&(!d.extPlayerDur||d.extPlayerDur&&n<d.extPlayerDur)&&d.extPlayer&&d.extPlayer.player&&(d.seek(n),d.isFirstSeek=!0)},this.test1=function(){alert("test1")},this.play=function(e=!0){d.seeking?(d.setState(U.LOADING),d.once(B.JWPLAYER_MEDIA_SEEKED,d.play)):([e=!1]=[e],d.cybercorePlay(e))},this.prevFrame=function(){this.pause(),d.extPlayer.seek(_-.033)},this.nextFrame=function(){d.extPlayer.playNextFrame()},this.snapshot=function(e){return null!=(e=e)&&(d.extPlayer.snapshot(e),!0)},this.pause=function(){z(A),this.cybercorePause(),this.setState(U.PAUSED)},this.seek=function(e){-1!=this.maxSeekTime&&this.maxSeekTime<e?this.trigger(B.JWPLAYER_MEDIA_SEEK,{position:this.extPlayerPTS,offset:e}):(!0===c&&(this.autoPlayWithInterrupt=!0,0===this.vol&&(this.vol=l.options.origin_volume),this.volume(this.vol),this.mute(0===this.vol)),T&&(this.extPlayer.seek(e),this.trigger(B.JWPLAYER_MEDIA_SEEK,{position:this.extPlayerPTS,offset:e})))},this.volume=function(e){this.extPlayerLoadOK&&(e=N.between(e/100,0,1),!0===this.extPlayerLoadOK&&(this.extPlayer.setVoice(e),this.trigger("volume",{volume:Math.round(100*e)})),this.vol=100*e,0===e)&&d.trigger("mute",{mute:!0})},this.enableGPU=function(){throw"只有使用Flash播放才支持开启GPU"},this.disableGPU=function(){throw"只有使用Flash播放才支持开启GPU"},this.mute=function(e){this.extPlayerLoadOK&&!0===this.extPlayerLoadOK&&(!0===e?(this.extPlayer.setVoice(0),this.trigger("volume",{volume:Math.round(0)}),this.trigger("mute",{mute:!0})):(this.extPlayer.setVoice(this.vol/100),this.extPlayer.player.videoTag&&(this.extPlayer.player.videoTag.muted=!1),this.trigger("volume",{volume:this.vol}),this.trigger("mute",{mute:!1})))},this.VR=function(){return this.extPlayer&&this.extPlayer.VR&&this.extPlayer.VR()},this.checkComplete=function(){return w},this.detachMedia=function(){z(A),this.disableTextTrack(),T=!1},this.setContainer=function(e){m=e},this.getContainer=function(){return m},this.remove=function(){z(A),this.extPlayerLoadOK=!1,this.maxSeekTime=-1,null!==this.extPlayer&&(this.extPlayer.pause(),this.extPlayer.release(),this.extPlayer=null,void 0!==this.extPlayerGL&&null!==this.extPlayerGL&&this.extPlayerGL.remove&&this.extPlayerGL.remove(),this.extPlayerGL=null)},this.setVisibility=function(e){(e=!!e)||K?x.style(m,{visibility:"visible",opacity:1}):x.style(m,{visibility:"",opacity:0})},this.resize=function(e,t,n,i){if(null!==this.extPlayerMediaInfo&&null!==this.extPlayerGL){if(!1===this.extPlayerMediaInfo.meta.isHEVC&&this.extPlayerMediaInfo.meta.size.width<=0&&(this.extPlayerMediaInfo.meta.size.width=this.extPlayerGL.videoWidth,this.extPlayerMediaInfo.meta.size.height=this.extPlayerGL.videoHeight),!(e&&t&&this.extPlayerMediaInfo.meta.size.width&&this.extPlayerMediaInfo.meta.size.height))return!1;mediaW=this.extPlayerMediaInfo.meta.size.width,mediaH=this.extPlayerMediaInfo.meta.size.height;var r=document.getElementById(u+"-rtc");r&&"canvas"==r.tagName.toLocaleLowerCase()||!0===this.extPlayerMediaInfo.meta.isHEVC?(r&&(this.extPlayerGL=r),r=e,a=t,o=d.getFullScreen(),s=d.extPlayerContainer.style.transform&&(-1<d.extPlayerContainer.style.transform.indexOf("90deg)")||-1<d.extPlayerContainer.style.transform.indexOf("270deg)")),l=!o&&s?a:r,o=!o&&s?r:a,s=mediaW/l>mediaH/a,r=l/mediaW,a=o/mediaH,s=s?r:a,r=parseInt(mediaW*s,10),a=parseInt(mediaH*s,10),s=[parseInt((o-a)/2,10),parseInt((l-r)/2,10),r,a],this.extPlayerGL.style.marginTop=s[0]+"px",this.extPlayerGL.style.marginLeft=s[1]+"px",this.extPlayerGL.style.width=s[2]+"px",this.extPlayerGL.style.height=s[3]+"px",this.extPlayerGL.style.pointerEvents="none"):(o=0==i?t:e,this.extPlayerGL.style.width=(l=0==i?e:t)+"px",this.extPlayerGL.style.height=o+"px",r=this.extPlayerContainer.clientWidth,this.extPlayerGL.style.marginLeft=r<l?(r-l)/2+"px":"")}var a,o,s,l;return!1},this.getSize=function(e,t){var n=this.extPlayerContainer.clientWidth,i=this.extPlayerContainer.clientHeight;return[e=e<n?e:n,t=t<i?t:i]},this.setFullscreen=function(e){let t=this.extPlayerGL;var n;return(e=!!e)?!(N.tryCatch(function(){var e=t.webkitEnterFullscreen||t.webkitEnterFullScreen;e&&e.apply(t)})instanceof N.Error)&&d.getFullScreen(t):((n=t.webkitExitFullscreen||t.webkitExitFullScreen)&&n.apply(t),e)},d.getFullScreen=function(){var e=this.extPlayerGL,t=-1<d.extPlayerContainer.getAttribute("class").indexOf("jw-flag-fullscreen");return R||e&&!!e.webkitDisplayingFullscreen||t},this.setCurrentQuality=function(e){S!==e&&0<=e&&v&&v.length>e&&(S=e,L.reason="api",L.level={},this.trigger(B.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:M(v),file:v[S].file}),l.qualityLabel=v[e].label)},this.getCurrentQuality=function(){return S},this.getQualityLevels=function(){return M(v)},this.getName=function(){return{name:"cybercore"}},this.setCurrentAudioTrack=function(e){},this.getAudioTracks=function(){return I||[]},this.getCurrentAudioTrack=function(){return C},this.setPlaybackRate=function(e){P.isLive||(!1===this.extPlayer.setPlaybackRate(e)&&this.extPlayerGL&&(this.extPlayerGL.playbackRate=e),this.extPlayerContainer&&(this.extPlayerContainer.querySelector(".jw-playrate-label").innerText="x"+e),this.trigger(B.JWPLAYER_PLAYBACKRATE,{playbackRate:Number(e)}))},this.changeHlsQuality=e=>{this.extPlayer.changeHlsQuality(e)},this.gobackLive=()=>{this.extPlayer&&this.extPlayer.gobackLive&&this.extPlayer.gobackLive()},this.getHlsCurrentLevel=()=>d.extPlayer&&d.extPlayer.player&&d.extPlayer.player.getCurrentLevel(),this.setToken=e=>{if(!this.hlsTokenObj||!this.hlsTokenObj[e[0].file]){this.hlsTokenObj={};for(var t=0;t<e.length;t++)this.hlsTokenObj[e[t].file]=e[t].tokenText;d.extPlayer&&d.extPlayer.release(),d.extPlayer.do(this.hlsTokenObj),d.isMuted=!0}},this.getMediaInfo=()=>d.extPlayer&&d.extPlayer.player&&d.extPlayer.player.getMediaInfo&&d.extPlayer.player.getMediaInfo(),this.setMaxSeekTime=e=>{this.maxSeekTime=e},l.tokenEncrypt||d.extPlayer.do()}function i(){}return i.prototype=j,n.prototype=new i,n.getName=function(){return{name:"cybercore"}},n}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(98),n(1),n(71)],t=function(i,r,a,n){var o=null,s=null,l=-1,u=0;function c(e){var t,n,e=e.currentTarget.activeCues;e&&e.length&&(t=e[e.length-1].startTime,n=[],i.each(e,function(e){e.startTime<t||(e.data?n.push(e):e.text&&this.trigger("meta",{metadataTime:t,metadata:JSON.parse(e.text)}))},this),n.length)&&(e=r.parseID3(n),this.trigger("meta",{metadataTime:t,metadata:e}))}function h(){o=[],s={}}function d(){if(o){for(var e=-1,t=0;t<o.length;t++)if("showing"===o[t].mode){e=t;break}this.setSubtitlesTrack(e+1)}else this.setTextTracks()}function f(){o&&o[l]&&(o[l].mode="disabled")}return{addTracksListener:function(e,t,n){n=n.bind(this),e.addEventListener?e.addEventListener(t,n):e["on"+t]=n},clearTracks:function(){s=o=null,u=0},disableTextTrack:f,getSubtitlesTrack:function(){return l},removeTracksListener:function(e,t,n){e&&(e.removeEventListener?e.removeEventListener(t,n):e["on"+t]=null)},setTextTracks:function(){var e=this.video.textTracks;if(l=-1,e){if(o||h(),e.length){var t=0,n=e.length;for(u=0;t<n;t++){var i,r=e[t];s[t+r.kind]||("metadata"===r.kind?(r.oncuechange=c.bind(this),r.mode="showing","ID3 Metadata"===(s[t+r.kind]=r).label&&u++):"subtitles"!==r.kind&&"captions"!==r.kind||(i=r.mode,r.mode="hidden",!r.cues.length&&"caterpillar"===this.getName().name&&"Unknown CC"===r.label)||(r.mode=i,o.push(r),"Unknown CC"!==(s[t+r.kind]=r).label)||u++)}}this.addTracksListener(e,"change",d),o&&o.length&&this.trigger("subtitlesTracks",{tracks:o})}},setupSideloadedTracks:function(e){var t=a.isChrome()||a.isIOS()||a.isSafari();!this._isSDK&&t&&e&&!function(e){return e===this.itemTracks&&o&&o.length===u+this.itemTracks.length}.call(this,e)&&(f(),n.emptyElement(this.video),o&&(t=i.filter(o,function(e){return"Unknown CC"===e.label||"ID3 Metadata"===e.label}),h(),i.each(t,function(e,t){s[t+e]=e}),o=t),this.itemTracks=e,function(e){if(e){var t=!1;o||h();for(var n=0;n<e.length;n++){var i,r=e[n];/\.(?:web)?vtt(?:\?.*)?$/i.test(r.file)?/subtitles|captions|descriptions|chapters|metadata/i.test(r.kind)&&(t||!this.video.hasAttribute("crossorigin")&&a.crossdomain(r.file)&&(this.video.setAttribute("crossorigin","anonymous"),t=!0),(i=document.createElement("track")).src=r.file,i.kind=r.kind,i.srclang=r.language||"",i.label=r.label,i.mode="disabled",i.id=r.defaulttrack?"default":"",this.video.appendChild(i)):(o.push(r),s[n+r.kind]=i)}}}.call(this,e))},setSubtitlesTrack:function(e){o&&(0===e&&i.each(o,function(e){e.mode="disabled"}),l!==e-1)&&(f(),o[l=e-1]&&(o[l].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:l+1,tracks:o}))},textTrackChangeHandler:d}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,n,i){"use strict";i.r(n),function(e){i.d(n,"default",function(){return t}),i(156);class t{static createPlayer(e,t){return window.newcybercorejs(e,t)}static clear(){e.STATICE_MEM_playerCount=-1,e.STATICE_MEM_playerIndexPtr=0}}}.call(this,i(27))},function(e,R,I){"use strict";I.r(R),function(t){var e=I(120),i=I(121),u=I(4);const n=I(157),c=I(158),d=I(159),r=I(160),o=I(161),s=I(163),a=I(164),l=I(166),h=I(168),f=I(170),p=I(12);I(75);const m=I(178),g=I(180),_=I(181),y=I(5);I(183);const v=I(184);I(35);const E=I(37),A=I(1);var{}=I(185);const b=I(19)["loadWasm"];I(5);const T={moovStartFlag:!0,readyShow:!0,rawFps:24,autoCrop:!1,core:y.PLAYER_CORE_TYPE_DEFAULT,coreProbePart:0,checkProbe:!0,ignoreAudio:0,probeSize:4096,autoPlay:!1,repeat:!1,cacheLength:50,loadTimeout:30,hevc:!0},S=(e,t)=>t-1e3/e;void 0!==t.Module&&null!==t.Module||(t.Module={}),Module.onRuntimeInitialized=()=>{t.STATIC_MEM_wasmDecoderState=1},window.g_players={},window.addEventListener("wasmLoaded",function(){t.STATIC_MEM_wasmDecoderState=1}),t.onWASMLoaded=function(){t.STATIC_MEM_wasmDecoderState=1};class w{constructor(e,n){if(t.STATICE_MEM_playerCount+=1,this.playerIndex=t.STATICE_MEM_playerCount,this.mp4Obj=null,this.mpegTsObj=null,this.hlsObj=null,this.hlsConf={hlsType:y.PLAYER_IN_TYPE_M3U8_VOD},this.snapshotCanvasContext=null,this.snapshotYuvLastFrame={width:0,height:0,luma:null,chromaB:null,chromaR:null},this.videoURL=e,this.sei_maps=[],this.configFormat={playerId:n.player||y.DEFAILT_WEBGL_PLAY_ID,playerW:n.width||y.DEFAULT_WIDTH,playerH:n.height||y.DEFAULT_HEIGHT,type:n.type||p.GetUriFormat(this.videoURL),accurateSeek:n.accurateSeek||!0,playIcon:n.playIcon||"assets/icon-play@300.png",loadIcon:n.loadIcon||"assets/icon-loading.gif",token:n.token||null,danmaku:n.danmaku,repeat:n.repeat,duration:n.duration,audioNone:n.audioNone,extInfo:T,useSoftDecoding:n.useSoftDecoding||!1,RtcPlugin:n.RtcPlugin,openToken:n.openToken,maxBufferLength:n.maxBufferLength,headers:n.headers,timeShift:n.timeShift,enableDecoderDegrade:n.enableDecoderDegrade,startPosition:n.startPosition,VRPlugin:n.VRPlugin},n.RtcPlugin&&(this.configFormat.type="rtc"),this.mediaExtFormat=this.configFormat.type,this.mediaExtProtocol=null,void 0!==this.videoURL&&null!==this.videoURL&&(this.mediaExtProtocol=p.GetUriProtocol(this.videoURL)),n.extInfo.duration&&(this.configFormat.extInfo.duration=n.extInfo.duration),n.extInfo.ignoreAudio&&(this.configFormat.extInfo.ignoreAudio=1),null==this.configFormat.token)alert("请输入TOKEN！Please set token param!");else{for(var i in this.configFormat.extInfo.core=p.GetFormatPlayCore(this.configFormat.type),n.extInfo)i in this.configFormat.extInfo&&(this.configFormat.extInfo[i]=n.extInfo[i]);this.playMode=y.PLAYER_MODE_VOD,this.seekTarget=0,this.playParam=null,this.timerFeed=null,this.player=null,this.volume=1,this.rawModePts=0,this.loadTimeoutInterval=null,this.loadTimeoutSecNow=this.configFormat.extInfo.loadTimeout,this.autoScreenClose=!0,this.feedMP4Data=null,this.workerFetch=null,this.workerParse=null,this.onPlayTime=null,this.onLoadFinish=null,this.onSeekStart=null,this.onSeekFinish=null,this.onRender=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onPlayFinish=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.onOpenFullScreen=null,this.onCloseFullScreen=null,this.onError=null,this.onProbeError=null,this.onMakeItReady=null,this.onPlayState=null,this.onPerformance=null,this._g_init=null,this.onRtcEvent=null,this.onLiveShift=null,this.filterConfigParams();let t=this;document.addEventListener("fullscreenchange",function(e){t._isFullScreen()?t.onOpenFullScreen&&t.onOpenFullScreen():(!0===t.autoScreenClose&&t.closeFullScreen(!0),t.onCloseFullScreen&&t.onCloseFullScreen())}),this.screenW=window.screen.width,this.screenH=window.screen.height,this.controller=null,this.downLoadWorker=null,this.onQualityLevels=null,this.onLevelUpdates=null,this.isCacheLimit=!1,this.init()}}init(){window.onmessage=e=>{var{event:e,handler:t}=e.data;"WeixinJSBridgeReady"===e&&(t&&"WeixinJSBridge"===t?this.play():t&&"iframeOnload"===t&&this.player&&this.player.onLoadFinish())}}filterConfigParams(){void 0!==this.configFormat.extInfo.checkProbe&&null!==this.configFormat.extInfo.checkProbe||(this.configFormat.extInfo.checkProbe=!0),this.configFormat.type===y.PLAYER_IN_TYPE_FLV?(this.configFormat.extInfo.core=y.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=y.PLAYER_IN_TYPE_MP4):this.configFormat.type===y.PLAYER_IN_TYPE_HTTPFLV&&(this.configFormat.extInfo.core=y.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=y.PLAYER_IN_TYPE_MP4,this.playMode=y.PLAYER_MODE_NOTIME_LIVE)}do(e){e&&(this.configFormat=Object.assign(this.configFormat,{authToken:e}));let t=!1;0<this.configFormat.extInfo.ignoreAudio&&(t=!0),this.configFormat.type===y.PLAYER_IN_TYPE_RAW_265&&(t=!0,this.playMode=y.PLAYER_MODE_NOTIME_LIVE),this.playParam={durationMs:0,fps:0,sampleRate:0,size:{width:0,height:0},audioNone:t,videoCodec:null},v.UI.createPlayerRender(this.configFormat.playerId,this.configFormat.playerW,this.configFormat.playerH);this._makeMP4Player(!0)}release(){return window.clearInterval(this.timerFeed),this.timerFeed=null,this.playParam&&this.playParam.videoCodec===y.CODEC_H265&&this.player&&this.configFormat&&this.configFormat.type==y.PLAYER_IN_TYPE_M3U8&&void 0!==this.hlsObj&&null!==this.hlsObj&&this.hlsObj.release(),this.player&&this.player.release(),void 0!==this.snapshotCanvasContext&&null!==this.snapshotCanvasContext&&(E.releaseContext(this.snapshotCanvasContext),this.snapshotCanvasContext=null,void 0!==this.snapshotYuvLastFrame)&&null!==this.snapshotYuvLastFrame&&(this.snapshotYuvLastFrame.luma=null,this.snapshotYuvLastFrame.chromaB=null,this.snapshotYuvLastFrame.chromaR=null,this.snapshotYuvLastFrame.width=0,this.snapshotYuvLastFrame.height=0),void 0!==this.workerFetch&&null!==this.workerFetch&&(this.workerFetch.postMessage({cmd:"stop",params:"",type:this.mediaExtProtocol}),this.workerFetch.onmessage=null),void 0!==this.workerParse&&null!==this.workerParse&&(this.workerParse.postMessage({cmd:"stop",params:""}),this.workerParse.onmessage=null),this.workerFetch=null,this.workerParse=null,this.configFormat.extInfo.readyShow=!0,this.flvDemuxer&&this.flvDemuxer.release(),window.onclick=document.body.onclick=null,window.g_players={},this.mp4Obj&&this.mp4Obj.remove&&this.mp4Obj.remove(),this.downLoadWorker&&(this.downLoadWorker.postMessage({type:1}),this.downLoadWorker.terminate()),this.player=null,!(this.configFormat.extInfo.duration=null)}debugYUV(e){this.player.debugYUV(e)}setPlaybackRate(e=1){return!(e<=0||void 0===this.player||null===this.player)&&this.player.setPlaybackRate(e)}changeHlsQuality(e){this.player&&this.player.changeHlsQuality&&this.player.changeHlsQuality(e),this.player&&this.player.setQuality&&this.player.setQuality(e)}gobackLive(){this.player&&this.player.gobackLive()}getPlaybackRate(){return void 0!==this.player&&null!==this.player&&(this.playParam.videoCodec===y.CODEC_H265?1:this.player.getPlaybackRate())}setRenderScreen(e=!1){return void 0!==this.player&&null!==this.player&&(this.player.setScreen(e),!0)}play(){var e;return void 0!==this.player&&null!==this.player&&(this.configFormat&&this.configFormat.useSoftDecoding?(e={seekPos:this._getSeekTarget(),mode:this.playMode,accurateSeek:this.configFormat.accurateSeek,seekEvent:!1,realPlay:!0},this.player.play(e)):this.player.play(),!0)}pause(){return void 0!==this.player&&null!==this.player&&(this.player.pause(),!0)}isPlaying(){return void 0!==this.player&&null!==this.player&&this.player.isPlayingState()}setVoice(e){return!((e=0<e?e:0)<0||void 0===this.player||null===this.player||(this.volume=e,this.player&&this.player.setVoice(e),0))}getVolume(){return this.volume}mediaInfo(){var e={meta:this.playParam,videoType:this.playMode,formatType:this.configFormat.type,useSoftDecoding:this.configFormat.useSoftDecoding};return e.meta.isHEVC=0===this.playParam.videoCodec,e}VR(){return this.player&&this.player.VR}snapshot(e=null){return null!==e&&(void 0!==this.playParam&&null!==this.playParam)&&(A.isFF()?(this.player.setScreen(!0),e.width=this.snapshotYuvLastFrame.width,e.height=this.snapshotYuvLastFrame.height,void 0!==this.snapshotCanvasContext&&null!==this.snapshotCanvasContext||(this.snapshotCanvasContext=E.setupCanvas(e,{preserveDrawingBuffer:!1})),E.renderFrame(this.snapshotCanvasContext,this.snapshotYuvLastFrame.luma,this.snapshotYuvLastFrame.chromaB,this.snapshotYuvLastFrame.chromaR,this.snapshotYuvLastFrame.width,this.snapshotYuvLastFrame.height)):(e.width=this.playParam.size.width,e.height=this.playParam.size.height,e.getContext("2d").drawImage(this.player.videoTag,0,0,e.width,e.height))),null}_seekHLS(e,t,n){if(void 0===this.player||null===this.player)return!1;setTimeout(function(){t.player.getCachePTS()>e?n():t._seekHLS(e,t,n)},100)}_seek(e,t,n,i){this.hlsObj&&this.hlsObj.toSeek(e,n,i),t()}seek(n,e,t=0){if(void 0===this.player||null===this.player)return!1;let i=this,r=(this.seekTarget=n,this.onSeekStart&&this.onSeekStart(n),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null),this._getSeekTarget());var a;if(!this.configFormat.useSoftDecoding)return a=this.player.seek(n),this.onSeekFinish&&this.onSeekFinish(a,!0),a;if(this.mediaExtFormat===y.PLAYER_IN_TYPE_FLV)this.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},()=>{e&&e()},()=>{this.flvDemuxer&&this.flvDemuxer.limitDownloads(!1)}),this.flvDemuxer&&this.flvDemuxer.limitDownloads(!0),this.flvDemuxer&&this.flvDemuxer.seek(n);else{if(i.configFormat.type!=y.PLAYER_IN_TYPE_MP4){if(this.configFormat.extInfo.core===y.PLAYER_CORE_TYPE_CNATIVE)this.pause(),this._seekHLS(n,this,function(){i.player.seek(()=>{},{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek})});else{if(i.configFormat.type==y.PLAYER_IN_TYPE_M3U8)return void i.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},()=>{e&&e()},()=>{i._seek(n,()=>{},0<i.player.timeShiftData,i.player.durationMs)});if(i.configFormat.type==y.PLAYER_IN_TYPE_TS)return void i.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},()=>{e&&e()},()=>{var e=i.mpegTsObj.seek(n);this._avFeedMP4Data(e,e),this.isCacheLimit=!1});this._seekHLS(n,this,function(){i.player.seek(()=>{i.configFormat.type==y.PLAYER_IN_TYPE_MP4?i.mp4Obj.seek(n):i.configFormat.type==y.PLAYER_IN_TYPE_TS||i.configFormat.type==y.PLAYER_IN_TYPE_MPEGTS?(e=i.mpegTsObj.seek(n),i._avFeedMP4Data(e,e),i.isCacheLimit=!1):i.configFormat.type==y.PLAYER_IN_TYPE_M3U8&&(i.hlsObj.onSamples=null,i.hlsObj.seek(n));var e=function(){let e=0;return e=i.configFormat.accurateSeek?n:i._getBoxBufSeekIDR(),parseInt(e)}(),t=parseInt(i._getBoxBufSeekIDR())||0;i._avFeedMP4Data(t,e)},{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek})})}return!0}i.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},()=>{e&&e()},()=>{var e=i.mp4Obj.seek(n);this._avFeedMP4Data(e,e),this.isCacheLimit=!1})}}fullScreen(){var e,t,n;this.autoScreenClose=!0,this.player.vCodecID===y.V_CODEC_NAME_HEVC?(t=(e=document.querySelector("#"+this.configFormat.playerId)).getElementsByTagName("canvas")[0],e.style.width=this.screenW+"px",e.style.height=this.screenH+"px",n=this._checkScreenDisplaySize(this.screenW,this.screenH,this.playParam.size.width,this.playParam.size.height),t.style.marginTop=n[0]+"px",t.style.marginLeft=n[1]+"px",t.style.width=n[2]+"px",t.style.height=n[3]+"px",this._requestFullScreen(e)):this._requestFullScreen(this.player.videoTag)}closeFullScreen(e=!1){var t,n;!1===e&&(this.autoScreenClose=!1,this._exitFull()),this.player.vCodecID===y.V_CODEC_NAME_HEVC&&(t=(e=document.querySelector("#"+this.configFormat.playerId)).getElementsByTagName("canvas")[0],n=e.style.transform&&(-1<e.style.transform.indexOf("90deg)")||-1<e.style.transform.indexOf("270deg)")),e.style.width=n?this.configFormat.playerH+"px":this.configFormat.playerW+"px",e.style.height=n?this.configFormat.playerW+"px":this.configFormat.playerH+"px",e=this._checkScreenDisplaySize(this.configFormat.playerW,this.configFormat.playerH,this.playParam.size.width,this.playParam.size.height),t.style.marginTop=e[0]+"px",t.style.marginLeft=e[1]+"px",t.style.width=e[2]+"px",t.style.height=e[3]+"px")}playNextFrame(){return this.pause(),void 0!==this.playParam&&null!==this.playParam&&(0===this.playParam.videoCodec?this.player.playYUV():this.player.nativeNextFrame(),!0)}resize(e,t){var n,i,r;if(void 0===this.player||null===this.player)return!1;{if(!(e&&t&&this.playParam.size.width&&this.playParam.size.height))return!1;const u=this.playParam.size.width,c=this.playParam.size.height;var a,o,s=0===this.playParam.videoCodec,l=document.querySelector("#"+this.configFormat.playerId);return l.style.width=e+"px",l.style.height=t+"px",!0==s?(s=l.getElementsByTagName("canvas")[0],n=e,o=t,a=u/n>c/o,i=(n/u).toFixed(2),r=(o/c).toFixed(2),a=a?i:r,i=parseInt(u*a,10),r=parseInt(c*a,10),a=[parseInt((o-r)/2,10),parseInt((n-i)/2,10),i,r],s.style.marginTop=a[0]+"px",s.style.marginLeft=a[1]+"px",s.style.width=a[2]+"px",s.style.height=a[3]+"px"):((o=l.getElementsByTagName("video")[0]).style.width=e+"px",o.style.height=t+"px"),!0}}_checkScreenDisplaySize(e,t,n,i){var r=i/t<n/e,a=(e/n).toFixed(2),o=(t/i).toFixed(2),r=r?a:o,a=this.fixed?e:parseInt(n*r),o=this.fixed?t:parseInt(i*r);return[parseInt((t-o)/2),parseInt((e-a)/2),a,o]}_isFullScreen(){var e=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement;document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled;return null!=e}_requestFullScreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullScreen()}_exitFull(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}_durationText(e){return e<0?"Play":(e=Math.round(e),Math.floor(e/3600)+":"+Math.floor(e%3600/60)+":"+Math.floor(e%60))}_getSeekTarget(){return this.configFormat.accurateSeek?this.seekTarget:this._getBoxBufSeekIDR()}_getBoxBufSeekIDR(){return this.configFormat.type==y.PLAYER_IN_TYPE_MP4?this.mp4Obj.seekPos:this.configFormat.type==y.PLAYER_IN_TYPE_TS||this.configFormat.type==y.PLAYER_IN_TYPE_MPEGTS?this.mpegTsObj.seekPos:this.configFormat.type==y.PLAYER_IN_TYPE_M3U8?this.hlsObj.seekPos:void 0}_playControl(){this.isPlaying()?this.pause():this.play()}_avFeedMP4Data(r=0,a=0,o=null){if(void 0===this.player||null===this.player)return!1;let s=parseInt(this.playParam.durationMs/1e3);this.player.clearAllCache(),this.timerFeed=window.setInterval(()=>{let t=null,n=null,e=!0,i=!0;if(this.configFormat.type==y.PLAYER_IN_TYPE_MP4?(this.isCacheLimit||(t=this.mp4Obj.popBuffer(1,r)),n=this.mp4Obj.audioNone?null:this.mp4Obj.popBuffer(2,a)):this.configFormat.type==y.PLAYER_IN_TYPE_TS||this.configFormat.type==y.PLAYER_IN_TYPE_MPEGTS?(this.isCacheLimit||(t=this.mpegTsObj.popBuffer(1,r)),n=this.mpegTsObj.getAudioNone()?null:this.mpegTsObj.popBuffer(2,a)):this.configFormat.type==y.PLAYER_IN_TYPE_M3U8&&(this.isCacheLimit||(t=this.hlsObj.popBuffer(1,r)),n=this.hlsObj.audioNone?null:this.hlsObj.popBuffer(2,a),r<s-1&&r>=this.hlsObj.getLastIdx()&&(e=!1),a<s-1)&&a>=this.hlsObj.getALastIdx()&&(i=!1),!0===e&&null!==t&&void 0!==t)for(let e=0;e<t.length;e++)t[e].data=structuredClone(t[e].frameData),this.player.appendHevcFrame(t[e]);if(!0===i&&null!==n&&void 0!==n)for(let e=0;e<n.length;e++)n[e].data=structuredClone(n[e].frameData),this.player.appendAACFrame(n[e]);this.playMode!==y.PLAYER_MODE_NOTIME_LIVE&&this.configFormat.type!==y.PLAYER_IN_TYPE_M3U8&&this.onCacheProcess&&this.onCacheProcess(this.player.getCachePTS()),!0===e&&null!==t&&void 0!==t&&(this.configFormat.extInfo.readyShow&&(this.configFormat.type===y.PLAYER_IN_TYPE_M3U8?this.configFormat.extInfo.readyShow=!1:this.configFormat.extInfo.core!==y.PLAYER_CORE_TYPE_CNATIVE&&(this.player.cacheYuvBuf.getState(),CACHE_APPEND_STATUS_CODE.NULL,!0===this.player.playYUV(!0,!0))&&(this.configFormat.extInfo.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone()),r++),!0===i&&null!==n&&void 0!==n&&a++,r>s&&(window.clearInterval(this.timerFeed),(this.timerFeed=null)!=o)&&o()},5)}_isSupportWASM(){window.document;var e=window.navigator,t=e.userAgent.toLowerCase(),n="ipad"==t.match(/ipad/i),i="iphone os"==t.match(/iphone os/i),r="iPad"==t.match(/iPad/i),a="iPhone os"==t.match(/iPhone os/i),o="midp"==t.match(/midp/i),s="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),l="ucweb"==t.match(/ucweb/i),u="android"==t.match(/android/i),c="Android"==t.match(/Android/i),h="windows ce"==t.match(/windows ce/i),t="windows mobile"==t.match(/windows mobile/i);if(n||i||r||a||o||s||l||u||c||h||t)return!1;n=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})();if(!1===n)return!1;if(!0===n){i=p.BrowserJudge(),r=i[0],a=i[1];if("Chrome"===r&&a<85)return!1;if(0<=r.indexOf("360"))return!1;if(/Safari/.test(e.userAgent)&&!/Chrome/.test(e.userAgent)&&13<a)return!1}return!0}_makeMP4Player(e=!1){if(-1!=["mp3","ogg","flac","aac","wav","opus"].indexOf(this.configFormat.type))this._makeNativePlayer();else{if(!1===this._isSupportWASM()||!0===e){if(this.configFormat.type==y.PLAYER_IN_TYPE_MP4)this.mediaExtFormat===y.PLAYER_IN_TYPE_FLV?this.configFormat.useSoftDecoding?this._flvSoftPlayer():this._flvJsPlayer(this.playParam.durationMs,this.playParam.audioNone):this.configFormat.danmaku&&null!=this.configFormat.danmaku.useMask?this._mp4EntryVodStream():this._makeNativePlayer();else if(this.configFormat.type==y.PLAYER_IN_TYPE_TS||this.configFormat.type==y.PLAYER_IN_TYPE_MPEGTS)this.configFormat.extInfo.duration?this._mpegTsNv3rdPlayer(1e3*this.configFormat.extInfo.duration,!1):this._mpegTsEntry();else if(this.configFormat.type==y.PLAYER_IN_TYPE_M3U8)this._m3u8Entry();else{if(this.configFormat.type===y.PLAYER_IN_TYPE_RAW_265)return-1;this.configFormat.type==y.PLAYER_IN_TYPE_RTC?this._rtcPlayer():this.configFormat.type==y.PLAYER_IN_TYPE_DASH&&this._dashJsPlayer()}return 1}this.mediaExtProtocol===y.URI_PROTOCOL_WEBSOCKET_DESC?this.configFormat.type===y.PLAYER_IN_TYPE_RAW_265?this._raw265Entry():this._cWsFLVDecoderEntry():null!=this.configFormat.extInfo.core&&null!==this.configFormat.extInfo.core&&this.configFormat.extInfo.core===y.PLAYER_CORE_TYPE_CNATIVE?this.mediaExtFormat===y.PLAYER_IN_TYPE_MP4?this._mp4EntryVodStream():this._cDemuxDecoderEntry():this.configFormat.type==y.PLAYER_IN_TYPE_MP4?this.configFormat.extInfo.moovStartFlag?this._mp4EntryVodStream():this._mp4Entry():this.configFormat.type==y.PLAYER_IN_TYPE_TS||this.configFormat.type==y.PLAYER_IN_TYPE_MPEGTS?this._mpegTsEntry():this.configFormat.type==y.PLAYER_IN_TYPE_M3U8?this._m3u8Entry():this.configFormat.type===y.PLAYER_IN_TYPE_RAW_265&&this._raw265Entry()}return 0}_makeMP4PlayerViewEvent(i,e,t,n,r=!1,a=null,o){let s=this;var l,u;this.playParam.durationMs=0==i?1/0:i,this.playParam.fps=e,this.playParam.sampleRate=t,this.playParam.size=n,this.playParam.audioNone=r,this.playParam.videoCodec=a||y.CODEC_H265,(this.configFormat.type==y.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==y.PLAYER_IN_TYPE_M3U8_LIVE||this.configFormat.type==y.PLAYER_IN_TYPE_RAW_265)&&(this.playMode=y.PLAYER_MODE_NOTIME_LIVE),s.configFormat.extInfo.autoCrop&&(l=document.querySelector("#"+this.configFormat.playerId),n=n.width/n.height,(u=this.configFormat.playerW/this.configFormat.playerH)<n?l.style.height=this.configFormat.playerW/n+"px":n<u&&(l.style.width=this.configFormat.playerH*n+"px")),this.player.setConfig({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:t,fps:e,appendHevcType:y.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:r,token:this.configFormat.token,videoCodec:a,repeat:this.configFormat.extInfo&&this.configFormat.extInfo.repeat}),this.player.onPlayingTime=(e,t,n)=>{s._durationText(e),s._durationText(i/1e3);null!=s.onPlayTime&&s.onPlayTime(e,t,n)},this.player.onPlayingFinish=e=>{this.pause(),this.seek(0,()=>{e&&e()}),this.configFormat.useSoftDecoding=!0,null!=this.onPlayFinish&&this.onPlayFinish()},this.player.onSeekStart=()=>{var e;null!=s.onSeekStart&&(e=this.player.timeShiftData&&0<this.player.timeShiftData,s.onSeekStart(e))},this.player.onSeekFinish=()=>{null!=s.onSeekFinish&&s.onSeekFinish()},this.player.onRender=(e,t,n,i,r)=>{window.performance.now(),s._g_init;null!=s.onRender&&s.onRender(e,t,n,i,r)},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},s.player.setDurationMs(i),s.player.setFrameRate(e),null!=s.onLoadFinish&&(s.onLoadFinish(),s.configFormat.type!=y.PLAYER_IN_TYPE_M3U8&&s.configFormat.type!=y.PLAYER_IN_TYPE_MP4||s.onReadyShowDone&&s.onReadyShowDone()),this.player.onInitDecodeComplete=()=>{o&&o()}}_makeNativePlayer(r=0,t=0,a=0,o,s=0,l){if(!this.configFormat.useSoftDecoding){let n=this,e=(this.playParam.durationMs=r,this.playParam.fps=t,this.playParam.sampleRate=a,this.playParam.size=o,this.playParam.audioNone=this.configFormat.extInfo.ignoreAudio||s,this.playParam.videoCodec=l||y.CODEC_H264,this.configFormat.type==y.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==y.PLAYER_IN_TYPE_M3U8_LIVE&&(this.playMode=y.PLAYER_MODE_NOTIME_LIVE),this.configFormat.useSoftDecoding=!1,this.player=new c.Mp4Player({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:a,fps:t,appendHevcType:y.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:this.playParam.audioNone,token:this.configFormat.token,videoCodec:l,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,VRPlugin:this.configFormat.VRPlugin}),0),i=window.setInterval(function(){e++,void 0!==n.player&&null!==n.player||(window.clearInterval(i),i=null),e>y.DEFAULT_PLAYERE_LOAD_TIMEOUT&&(n.player.release(),n.onPlayState&&n.onPlayState(!0),n.onError({msg:"reconnect is timeout",event:"timeout",url:n.videoURL,type:"networkError"}),n.player=null,window.clearInterval(i),i=null)},1e3);return this.player.onSeekStart=()=>{null!=n.onSeekStart&&n.onSeekStart()},this.player.onPlayingTime=t=>{var e;n._durationText(t),n._durationText(r/1e3);this.player.sei_maps&&null!=n.onSeiInfo&&(e=this.player.sei_maps.findIndex(e=>e.pts>t),n.onSeiInfo(this.player.sei_maps[e])),null!=n.onPlayTime&&n.onPlayTime(t)},this.player.onSeiTimer=t=>{var e;this.player.sei_maps&&null!=n.onSeiInfo&&(e=this.player.sei_maps.findIndex(e=>e.pts>t),n.onSeiInfo(this.player.sei_maps[e]))},this.player.onSeiInfo=e=>{null!=n.onSeiInfo&&n.onSeiInfo(e)},this.player.onPlayingFinish=()=>{null!=n.onPlayFinish&&n.onPlayFinish()},this.player.onMakeItReady=()=>{null!=n.onMakeItReady&&n.onMakeItReady()},this.player.onLoadFinish=()=>{window.clearInterval(i),i=null,n.playParam.durationMs=1e3*n.player.duration,n.playParam.size=n.player.getSize(),n.onLoadFinish&&n.onLoadFinish(),n.onReadyShowDone&&n.onReadyShowDone(),n.configFormat.useSoftDecoding=!1},this.player.onPlayState=e=>{n.onPlayState&&n.onPlayState(e)},this.player.onCacheProcess=e=>{n.onCacheProcess&&n.onCacheProcess(e)},this.player.onSeekFinish=e=>{n.onSeekFinish&&n.onSeekFinish(e)},this.player.onError=e=>{var t=e.code===u.MsgCode.DEOCDE_NOT_SUPPORT;window.clearInterval(i),this.configFormat.enableDecoderDegrade&&t&&"mp4"===this.configFormat.type?(this.player.release(),this.configFormat.useSoftDecoding=!0,this._mp4EntryVodStream()):n.onError(e)},this.player.makeIt(this.videoURL),this.player}this._mp4EntryVodStream()}_initMp4BoxObject(){this.timerFeed=null,this.mp4Obj=new m,this.mp4Obj.onMp4BoxReady=e=>{var t=this.mp4Obj.getFPS();let n=S(t,this.mp4Obj.getDurationMs()),i;var r=this.mp4Obj.getSampleRate(),a=this.mp4Obj.getSize(),o=this.mp4Obj.getVideoCoder();if(this.configFormat.useSoftDecoding){let e=!1;this.initDecoder(),this._makeMP4PlayerViewEvent(n,t,r,a,this.mp4Obj.audioNone,o,()=>{e||(e=!0,parseInt(n/1e3),this._avFeedMP4Data(0,0))})}else i=this._makeNativePlayer(n,t,r,a,this.mp4Obj.audioNone,o);this.mp4Obj.on("parse_sei",function(e){i&&i.sei_maps.push(e)})}}_mp4Entry(){let t=this;fetch(this.videoURL).then(e=>e.arrayBuffer()).then(e=>{t._initMp4BoxObject(),this.mp4Obj.demux(),this.mp4Obj.appendBufferData(e,0),this.mp4Obj.finishBuffer(),this.mp4Obj.seek(-1)})}_mp4EntryVodStream(){this.timerFeed=null,this.mp4Obj=new m,this._initMp4BoxObject(),this.mp4Obj.demux();this._downLoadeWorker()}_downLoadeWorker(e,n){this.downLoadWorker=new i.a,this.downLoadWorker.postMessage({type:0,videoURL:this.videoURL,offset:e||0}),this.downLoadWorker.onmessage=e=>{var t=e.data["type"];switch(t){case 0:this.mp4Obj.appendBufferData(e.data.buffer,e.data.fileStart,n);break;case 1:this.mp4Obj.finishBuffer(),this.mp4Obj.seek(-1);break;case 2:this.mp4Obj.remove(),n&&n()}}}_downLoader(e){let i=this,r=0;i.controller&&i.controller.abort(),i.controller=new AbortController;var t=i.controller.signal;fetch(this.videoURL,e?{headers:{Range:`bytes=${e}-`},signal:t}:{signal:t}).then(function(e){function n(t){return t.read().then(function(e){if(!e.done)return e=e.value,i.mp4Obj.appendBufferData(e.buffer,r),r+=e.byteLength,n(t);i.mp4Obj.finishBuffer(),i.mp4Obj.seek(-1),window.clearInterval(networkInterval)})}return n(e.body.getReader())}).catch(function(e){})}_cDemuxDecoderEntry(i=0,e=!1){let a=this,r=!1,o=new AbortController,s=o.signal,l={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,token:this.configFormat.token,readyShow:this.configFormat.extInfo.readyShow,checkProbe:this.configFormat.extInfo.checkProbe,ignoreAudio:this.configFormat.extInfo.ignoreAudio,playMode:this.playMode,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,defaultFps:this.configFormat.extInfo.rawFps,cacheLength:this.configFormat.extInfo.cacheLength},u=(this.player=new d.default.CNativeCore(l),window.g_players[this.player.corePtr]=this.player,a.configFormat.useSoftDecoding=!0,this.player.onReadyShowDone=()=>{a.configFormat.extInfo.readyShow=!1,a.onReadyShowDone&&a.onReadyShowDone()},this.player.onRelease=()=>{o&&o.abort()},this.player.onProbeFinish=()=>{r=!0,a.playParam.fps=a.player.config.fps,a.playParam.durationMs=S(a.playParam.fps,1e3*a.player.duration),a.player.duration<0&&(a.playMode=y.PLAYER_MODE_NOTIME_LIVE,a.playParam.durationMs=-1),a.playParam.sampleRate=a.player.config.sampleRate,a.playParam.size={width:a.player.width,height:a.player.height},a.playParam.audioNone=a.player.audioNone,a.player.vCodecID===y.V_CODEC_NAME_HEVC?(a.playParam.videoCodec=y.CODEC_H265,a.playParam.audioIdx<0&&(a.playParam.audioNone=!0),this.configFormat.useSoftDecoding||!0!==p.IsSupport265Mse()||!1!==e||a.mediaExtFormat!==y.PLAYER_IN_TYPE_MP4&&a.mediaExtFormat!==y.PLAYER_IN_TYPE_FLV?a.onLoadFinish&&a.onLoadFinish():(o.abort(),a.player.release(),a.player=null,a.mediaExtFormat===y.PLAYER_IN_TYPE_MP4?a._makeNativePlayer(a.playParam.durationMs,a.playParam.fps,a.playParam.sampleRate,a.playParam.size,!1,a.playParam.videoCodec):a.mediaExtFormat===y.PLAYER_IN_TYPE_FLV&&a._flvJsPlayer(a.playParam.durationMs,a.playParam.audioNone))):(a.playParam.videoCodec=y.CODEC_H264,o.abort(),a.player.release(),a.player=null,a.mediaExtFormat===y.PLAYER_IN_TYPE_MP4?a._makeNativePlayer(a.playParam.durationMs,a.playParam.fps,a.playParam.sampleRate,a.playParam.size,!1,a.playParam.videoCodec):a.mediaExtFormat===y.PLAYER_IN_TYPE_FLV?a._flvJsPlayer(a.playParam.durationMs,a.playParam.audioNone):a.onLoadFinish&&a.onLoadFinish())},this.player.onPlayingTime=e=>{a._durationText(e),a._durationText(a.player.duration);null!=a.onPlayTime&&a.onPlayTime(e)},this.player.onPlayingFinish=()=>{a.pause(),null!=a.onPlayTime&&a.onPlayTime(0),a.onPlayFinish&&a.onPlayFinish(),a.player.reFull=!0,a.seek(0)},this.player.onCacheProcess=e=>{this.onCacheProcess&&this.onCacheProcess(e)},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,t,n,i,r)=>{a.snapshotYuvLastFrame.luma=null,a.snapshotYuvLastFrame.chromaB=null,a.snapshotYuvLastFrame.chromaR=null,a.snapshotYuvLastFrame.width=e,a.snapshotYuvLastFrame.height=t,a.snapshotYuvLastFrame.luma=new Uint8Array(n),a.snapshotYuvLastFrame.chromaB=new Uint8Array(i),a.snapshotYuvLastFrame.chromaR=new Uint8Array(r),null!=a.onRender&&a.onRender(e,t,n,i,r)},this.player.onSeekFinish=()=>{null!=this.onSeekFinish&&this.onSeekFinish()},this.player.onPerformance=e=>{a.onPerformance&&a.onPerformance(e)},!(this.player.onWasmError=e=>{a.onError&&a.onError(e)})),c=!1,h=0;this.player.onWasmFinished=()=>{function n(t){setTimeout(function(){var e;!1===u&&(o.abort(),o=null,s=null,t>=y.FETCH_FIRST_MAX_TIMES?(a.player.release(),a.onPlayState&&a.onPlayState(!0),a.onError&&a.onError({msg:"fetch is timeout",event:"timeout",url:a.videoURL,type:"networkError"})):(o=new AbortController,s=o.signal,e=t+1,n(e)))},y.FETCH_HTTP_FLV_TIMEOUT_MS),fetch(a.videoURL,{signal:s,headers:new Headers(a.configFormat.headers)}).then(function(e){if(!e.ok)return!1;if(u=!0,e.headers.has("Content-Length"))h=e.headers.get("Content-Length"),a.configFormat.extInfo.coreProbePart<=0?a.player&&a.player.setProbeSize(a.configFormat.extInfo.probeSize):a.player&&a.player.setProbeSize(h*a.configFormat.extInfo.coreProbePart);else{if(a.mediaExtFormat===y.PLAYER_IN_TYPE_FLV)return o.abort(),a.player.release(),a.player=null,a._cLiveFLVDecoderEntry(l),!0;a.player&&a.player.setProbeSize(40960)}let n=function(t){return t.read().then(function(e){e.done&&setTimeout(()=>{return!0!==r?(a.player.release(),a.player=null,i<y.PLAYER_CNATIVE_VOD_RETRY_MAX?(i+=1,a._cDemuxDecoderEntry(i),!0):(a._mp4EntryVodStream(),!1)):c=!0},100);e.value.buffer;if(a.player&&a.player.pushBuffer(e.value.buffer)<0)return a.player.release(),a.player=null,i<y.PLAYER_CNATIVE_VOD_RETRY_MAX?(i+=1,a._cDemuxDecoderEntry(i),!0):(a._mp4EntryVodStream(),!1);return n(t)})};return n(e.body.getReader())}).catch(function(e){e.toString().includes("user aborted")})}n(0)}}_cLiveG711DecoderEntry(e){let a=this;e.probeSize=this.configFormat.extInfo.probeSize,this.player=new o.CHttpG711Core(e),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=()=>{a.playParam.fps=a.player.mediaInfo.fps,a.playParam.durationMs=-1,a.playMode=y.PLAYER_MODE_NOTIME_LIVE,a.playParam.sampleRate=a.player.mediaInfo.sampleRate,a.playParam.size={width:a.player.mediaInfo.width,height:a.player.mediaInfo.height},a.playParam.audioNone=a.player.mediaInfo.audioNone,a.player.vCodecID===y.V_CODEC_NAME_HEVC?(a.playParam.audioIdx<0&&(a.playParam.audioNone=!0),a.playParam.videoCodec=y.CODEC_H265,a.onLoadFinish&&a.onLoadFinish()):(a.playParam.videoCodec=y.CODEC_H264,a.player.release(),a.player=null,a._flvJsPlayer(a.playParam.durationMs,a.playParam.audioNone))},this.player.onError=e=>{a.onError&&a.onError(e)},this.player.onReadyShowDone=()=>{a.configFormat.extInfo.readyShow=!1,a.onReadyShowDone&&a.onReadyShowDone()},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,t,n,i,r)=>{a.snapshotYuvLastFrame.luma=null,a.snapshotYuvLastFrame.chromaB=null,a.snapshotYuvLastFrame.chromaR=null,a.snapshotYuvLastFrame.width=e,a.snapshotYuvLastFrame.height=t,a.snapshotYuvLastFrame.luma=new Uint8Array(n),a.snapshotYuvLastFrame.chromaB=new Uint8Array(i),a.snapshotYuvLastFrame.chromaR=new Uint8Array(r),null!=a.onRender&&a.onRender(e,t,n,i,r)},this.player.onPlayState=e=>{a.onPlayState&&a.onPlayState(e)},this.player.start(this.videoURL)}_cLiveFLVDecoderEntry(t){let a=this;t.probeSize=this.configFormat.extInfo.probeSize,this.player=new r.default.CHttpLiveCore(t),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=(e=0)=>{if(1===e)a.player.release(),a.player=null,a._cLiveG711DecoderEntry(t);else if(a.playParam.fps=a.player.mediaInfo.fps,a.playParam.durationMs=-1,a.playMode=y.PLAYER_MODE_NOTIME_LIVE,a.playParam.sampleRate=a.player.mediaInfo.sampleRate,a.playParam.size={width:a.player.mediaInfo.width,height:a.player.mediaInfo.height},a.playParam.audioNone=a.player.mediaInfo.audioNone,a.player.vCodecID===y.V_CODEC_NAME_HEVC)a.playParam.videoCodec=y.CODEC_H265,a.playParam.audioIdx<0&&(a.playParam.audioNone=!0),this.configFormat.useSoftDecoding||!0!==p.IsSupport265Mse()||a.mediaExtFormat!==y.PLAYER_IN_TYPE_FLV?a.onLoadFinish&&a.onLoadFinish():(a.player.release(),a.player=null,a.mediaExtFormat===y.PLAYER_IN_TYPE_FLV&&a._flvJsPlayer(a.playParam.durationMs,a.playParam.audioNone));else{a.playParam.videoCodec=y.CODEC_H264;a.player.release();if(a.player=null,a.mediaExtFormat===y.PLAYER_IN_TYPE_FLV)a._flvJsPlayer(a.playParam.durationMs,a.playParam.audioNone);else{if(a.mediaExtFormat!==y.PLAYER_IN_TYPE_TS&&a.mediaExtFormat!==y.PLAYER_IN_TYPE_MPEGTS)return-1;a._mpegTsNv3rdPlayer(a.playParam.durationMs,a.playParam.audioNone)}}},this.player.onError=e=>{a.onError&&a.onError(e)},this.player.onReadyShowDone=()=>{a.configFormat.extInfo.readyShow=!1,a.onReadyShowDone&&a.onReadyShowDone(),this.configFormat.useSoftDecoding=!0},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,t,n,i,r)=>{a.snapshotYuvLastFrame.luma=null,a.snapshotYuvLastFrame.chromaB=null,a.snapshotYuvLastFrame.chromaR=null,a.snapshotYuvLastFrame.width=e,a.snapshotYuvLastFrame.height=t,a.snapshotYuvLastFrame.luma=new Uint8Array(n),a.snapshotYuvLastFrame.chromaB=new Uint8Array(i),a.snapshotYuvLastFrame.chromaR=new Uint8Array(r),null!=a.onRender&&a.onRender(e,t,n,i,r)},this.player.onPlayState=e=>{a.onPlayState&&a.onPlayState(e)},this.player.start(this.videoURL),this.player.onPerformance=e=>{a.onPerformance&&a.onPerformance(e)}}_cWsFLVDecoderEntry(){let a=this;var e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,token:this.configFormat.token,readyShow:this.configFormat.extInfo.readyShow,checkProbe:this.configFormat.extInfo.checkProbe,ignoreAudio:this.configFormat.extInfo.ignoreAudio,playMode:this.playMode,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat};e.probeSize=this.configFormat.extInfo.probeSize,this.player=new s.CWsLiveCore(e),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=()=>{a.playParam.fps=a.player.mediaInfo.fps,a.playParam.durationMs=-1,a.playMode=y.PLAYER_MODE_NOTIME_LIVE,a.playParam.sampleRate=a.player.mediaInfo.sampleRate,a.playParam.size={width:a.player.mediaInfo.width,height:a.player.mediaInfo.height},a.playParam.audioNone=a.player.mediaInfo.audioNone,a.player.vCodecID===y.V_CODEC_NAME_HEVC?(a.playParam.audioIdx<0&&(a.playParam.audioNone=!0),a.playParam.videoCodec=y.CODEC_H265,!0===p.IsSupport265Mse()&&a.mediaExtFormat===y.PLAYER_IN_TYPE_FLV?(a.player.release(),a.player=null,a._flvJsPlayer(a.playParam.durationMs,a.playParam.audioNone)):a.onLoadFinish&&a.onLoadFinish()):(a.playParam.videoCodec=y.CODEC_H264,a.player.release(),a.player=null,a._flvJsPlayer(a.playParam.durationMs,a.playParam.audioNone))},this.player.onError=e=>{a.onError&&a.onError(e)},this.player.onReadyShowDone=()=>{a.configFormat.extInfo.readyShow=!1,a.onReadyShowDone&&a.onReadyShowDone()},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,t,n,i,r)=>{a.snapshotYuvLastFrame.luma=null,a.snapshotYuvLastFrame.chromaB=null,a.snapshotYuvLastFrame.chromaR=null,a.snapshotYuvLastFrame.width=e,a.snapshotYuvLastFrame.height=t,a.snapshotYuvLastFrame.luma=new Uint8Array(n),a.snapshotYuvLastFrame.chromaB=new Uint8Array(i),a.snapshotYuvLastFrame.chromaR=new Uint8Array(r),null!=a.onRender&&a.onRender(e,t,n,i,r)},this.player.start(this.videoURL)}_mpegTsEntry(){let a=this,t=new AbortController,n=t.signal;this.timerFeed=null,this.mpegTsObj=new g.MpegTs,this.mpegTsObj.bindReady(a),this.mpegTsObj.onDemuxed=this._mpegTsEntryReady.bind(this),this.mpegTsObj.onReady=()=>{let r=null;fetch(a.videoURL,{signal:n,headers:new Headers(this.configFormat.headers)}).then(function(e){if(e.headers.has("Content-Length")){a.onMakeItReady&&a.onMakeItReady();let i=function(n){return n.read().then(function(e){var t;if(!e.done)return e=e.value,null===r?r=e:(e=e,t=r.length+e.length,(t=new Uint8Array(t)).set(r),t.set(e,r.length),r=new Uint8Array(t),t=e=null),i(n);a.mpegTsObj.demux(r)})};return i(e.body.getReader())}t.abort(),n=null,t=null,e={width:a.configFormat.playerW,height:a.configFormat.playerH,playerId:a.configFormat.playerId,token:a.configFormat.token,readyShow:a.configFormat.extInfo.readyShow,checkProbe:a.configFormat.extInfo.checkProbe,ignoreAudio:a.configFormat.extInfo.ignoreAudio,playMode:a.playMode,autoPlay:a.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat},alert("is LIVE ts"),a._cLiveFLVDecoderEntry(e)}).catch(function(e){e.toString().includes("user aborted")})},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.initMPEG()}_mpegTsEntryReady(e){let t=e;t.mpegTsObj.getVCodec();let n=t.mpegTsObj.getACodec(),i=t.mpegTsObj.getDurationMs(),r=t.mpegTsObj.getFPS(),a=t.mpegTsObj.getSampleRate(),o=t.mpegTsObj.getSize();e=this.mpegTsObj.isHEVC();this.configFormat.useSoftDecoding||A.isFF()&&(!A.isFF()||e)?(t.initDecoder(),setTimeout(()=>{t._makeMP4PlayerViewEvent(i,r,a,o,""===n,""),t._avFeedMP4Data(0,0)},1e3)):(this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null,this.playParam.durationMs=i,this.playParam.fps=r,this.playParam.sampleRate=a,this.playParam.size=o,this.playParam.audioNone=""===n,this.playParam.videoCodec=e?0:1,this._mpegTsNv3rdPlayer(this.playParam.durationMs,this.playParam.audioNone))}_m3u8Entry(e=!1){let o=this;if(!this.configFormat.useSoftDecoding||e)return this._HjsJsPlayer();let n=!1,s=0,i;this._g_init=window.performance.now(),this.hlsObj=new _.M3u8({headers:this.configFormat.headers},this.videoURL),this.hlsObj.bindReady(o),this.initDecoder(),this.isHjsJsPlayer=!1,this.hlsObj.onFinished=(e,t)=>{!1===n&&(window.performance.now(),o._g_init,s=o.hlsObj.getDurationMs(),i=s/1e3,o.hlsConf.hlsType=t.type,n=!0)},this.hlsObj.onCacheProcess=e=>{this.playMode!==y.PLAYER_MODE_NOTIME_LIVE&&this.onCacheProcess&&this.onCacheProcess(e)},this.hlsObj.onDemuxed=e=>{if(!this.player||!this.player.config.token){o.hlsObj.isHevcParam;var t=o.hlsObj.getVCodec();if(A.isFF()&&"h264"==t)this.hlsObj.release(),this._m3u8Entry(!0),this.configFormat.useSoftDecoding=!1;else{var t=o.hlsObj.getACodec(),n=o.hlsObj.getFPS(),i=o.hlsObj.getSampleRate(),r=o.hlsObj.getSize(),a=o.hlsObj.getSampleChannel();let e=!1;e=a<=0||""===t;window.performance.now(),o._g_init;o._makeMP4PlayerViewEvent(s,n,i,r,e);window.performance.now();o._g_init}}},this.hlsObj.onSamples=this._hlsOnSamples.bind(this),this.hlsObj.onError=()=>{A.isFF()&&!this.isHjsJsPlayer&&(this.isHjsJsPlayer=!0,this.hlsObj.release(),this._m3u8Entry(!0),this.configFormat.useSoftDecoding=!1)},this.hlsObj.onWasmError=e=>{this.onError&&this.onError(e)},this.hlsObj.demux(this.videoURL);window.performance.now(),this._g_init}_hlsOnSamples(e,t){window.performance.now(),this._g_init;t.data=structuredClone(t.frameData),!0===t.video?this.player&&this.player.appendHevcFrame&&this.player.appendHevcFrame(t):!1===this.hlsObj.audioNone&&this.player&&this.player.appendAACFrame&&this.player.appendAACFrame(t)}_HjsJsPlayer(e=-1){let i=this;e={probeDurationMS:e,width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,playMode:this.playMode,danmaku:this.configFormat.danmaku,authToken:this.configFormat.authToken,openToken:this.configFormat.openToken,maxBufferLength:this.configFormat.maxBufferLength,headers:this.configFormat.headers,timeShift:this.configFormat.timeShift,startPosition:this.configFormat.startPosition,VRPlugin:this.configFormat.VRPlugin};this.player=new a.NvHLSjsCore(e,this.videoURL),this.player.onMakeItReady=()=>{i.onMakeItReady&&i.onMakeItReady()},this.player.onLoadFinish=()=>{i.playParam.size=i.player.getSize(),i.playParam.videoCodec=i.player.videoCodec,i.player.duration===1/0||i.player.duration<0?(i.playParam.durationMs=-1,i.playMode=y.PLAYER_MODE_NOTIME_LIVE):(i.playParam.durationMs=1e3*i.player.duration,i.playMode=y.PLAYER_MODE_VOD),i.onLoadFinish&&i.onLoadFinish()},this.player.onReadyShowDone=()=>{i.onReadyShowDone&&i.onReadyShowDone()},this.player.onPlayingFinish=()=>{i.pause(),i.seek(0),null!=i.onPlayFinish&&i.onPlayFinish()},this.player.onPlayingTime=(e,t,n)=>{i._durationText(e),i._durationText(i.player.duration);null!=i.onPlayTime&&i.onPlayTime(e,t,n)},this.player.onSeekFinish=e=>{i.onSeekFinish&&i.onSeekFinish(e)},this.player.onPlayState=e=>{i.onPlayState&&i.onPlayState(e)},this.player.onCacheProcess=e=>{i.onCacheProcess&&i.onCacheProcess(e)},this.player.onQualityLevels=e=>{i.onQualityLevels&&i.onQualityLevels(e)},this.player.onLevelUpdates=e=>{i.onLevelUpdates&&i.onLevelUpdates(e)},this.player.onError=e=>{var t=e.msg&&"bufferAddCodecError"===e.msg.details&&"video/mp4;codecs=hvc1.1.1.L120.B0"===e.msg.mimeType,n=e.isAppleMpegurl;this.configFormat.enableDecoderDegrade&&t?(this.player.release(),this.configFormat.useSoftDecoding=!0,this._m3u8Entry(!1)):n?this._makeNativePlayer():i.onError&&i.onError(e)},this.player.onLiveShift=e=>{i.onLiveShift&&i.onLiveShift(e)},this.player.makeIt(this.videoURL)}_flvJsPlayer(e=-1,t=!1){let n=this;e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,duration:e,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,audioNone:t,headers:this.configFormat.headers,VRPlugin:this.configFormat.VRPlugin};this.player=new l.NvFlvjsCore(e),this.player.onLoadFinish=()=>{n.playParam.size=n.player.getSize(),n.playParam.videoCodec=n.player.videoCodec,!n.player.duration||NaN===n.player.duration||n.player.duration===1/0||n.player.duration<0?(n.playParam.durationMs=-1,n.playMode=y.PLAYER_MODE_NOTIME_LIVE):(n.playParam.durationMs=1e3*n.player.duration,n.playMode=y.PLAYER_MODE_VOD),n.onLoadFinish&&n.onLoadFinish()},this.player.onReadyShowDone=()=>{n.onReadyShowDone&&n.onReadyShowDone()},this.player.onPlayingTime=(e,t)=>{n._durationText(e),n._durationText(n.player.duration);null!=n.onPlayTime&&n.onPlayTime(e,t)},this.player.onPlayingFinish=()=>{n.pause(),n.seek(0),null!=n.onPlayFinish&&n.onPlayFinish()},this.player.onPlayState=e=>{n.onPlayState&&n.onPlayState(e)},this.player.onCacheProcess=e=>{n.onCacheProcess&&n.onCacheProcess(e)},this.player.onError=e=>{var t=e.msg&&e.msg.code===u.MsgCode.PLAY_ERROR;n.configFormat.enableDecoderDegrade&&t?(n.player.release(),n._flvSoftPlayer()):n.onError&&n.onError(e)},this.player.onSeekFinish=e=>{n.onSeekFinish&&n.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_flvSoftPlayer(e=0,t=!1){t={audioNone:t,headers:this.configFormat.headers,onlyDemux:!0};this.initDecoder(),this.flvDemuxer=new l.NvFlvjsCore(t),this.flvDemuxer.makeIt(this.videoURL);let o=!1;this.flvDemuxer.onMediaInfo=e=>{var{duration:e,fps:t,audiosamplerate:n,width:i,height:r}=e,a=(0==e&&(this.playMode=y.PLAYER_MODE_NOTIME_LIVE),!n);this.flvDemuxer.seek(0),this._makeMP4PlayerViewEvent(1e3*e,t,n,{width:i,height:r},a,y.CODEC_H265,()=>{o||(o=!0,this.flvDemuxer.onDemuxeData(e=>{e.isKey=e.isKeyframe,e.video=!0,e.data=structuredClone(e.videoData),this.player.appendHevcFrame(e)},e=>{e.isKey=!0,e.video=!1,this.player.appendAACFrame(e)}))})}}_mpegTsNv3rdPlayer(e=-1,t=!1){let n=this;e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,duration:e,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,audioNone:t,headers:this.configFormat.headers,VRPlugin:this.configFormat.VRPlugin};this.player=new h.NvMpegTsCore(e),this.player.onLoadFinish=e=>{n.configFormat.useSoftDecoding=!1,n.playParam.size=n.player.getSize(),n.playParam.videoCodec=n.player.videoCodec,!n.player.duration||NaN===n.player.duration||n.player.duration===1/0||n.player.duration<0?(n.playParam.durationMs=-1,n.playMode=y.PLAYER_MODE_NOTIME_LIVE):(n.playParam.durationMs=1e3*n.player.duration,n.playMode=y.PLAYER_MODE_VOD),n.onLoadFinish&&n.onLoadFinish(e)},this.player.onReadyShowDone=()=>{n.onReadyShowDone&&n.onReadyShowDone()},this.player.onMakeItReady=()=>{null!=n.onMakeItReady&&n.onMakeItReady()},this.player.onPlayingTime=e=>{n._durationText(e),n._durationText(n.player.duration);null!=n.onPlayTime&&n.onPlayTime(e)},this.player.onPlayingFinish=()=>{n.pause(),n.seek(0),null!=n.onPlayFinish&&n.onPlayFinish()},this.player.onPlayState=e=>{n.onPlayState&&n.onPlayState(e)},this.player.onCacheProcess=e=>{n.onCacheProcess&&n.onCacheProcess(e)},this.player.onError=e=>{var t=e.msg&&e.msg.code===u.MsgCode.PLAY_ERROR;n.configFormat.enableDecoderDegrade&&t?(n.configFormat.extInfo.duration=null,n.player.release(),n._mpegTsEntry()):(n.player.release(),n.onPlayState&&n.onPlayState(!0),n.onError&&n.onError(e))},this.player.onSeekFinish=e=>{n.onSeekFinish&&n.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_dashJsPlayer(){var e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,headers:this.configFormat.headers,VRPlugin:this.configFormat.VRPlugin};this.player=new f.NvDashJsCore(e),this.player.onLoadFinish=e=>{this.configFormat.useSoftDecoding=!1,this.playParam.videoCodec=this.player.videoCodec,this.playParam.size=this.player.getSize(),!this.player.duration||NaN===this.player.duration||this.player.duration===1/0||this.player.duration<0?(this.playParam.durationMs=-1,this.playMode=y.PLAYER_MODE_NOTIME_LIVE):(this.playParam.durationMs=1e3*this.player.duration,this.playMode=y.PLAYER_MODE_VOD),this.onLoadFinish&&this.onLoadFinish(e)},this.player.onReadyShowDone=()=>{this.onReadyShowDone&&this.onReadyShowDone()},this.player.onMakeItReady=()=>{this.onMakeItReady&&this.onMakeItReady()},this.player.onPlayingTime=e=>{this.onPlayTime&&this.onPlayTime(e)},this.player.onPlayingFinish=()=>{this.pause(),this.seek(0),this.onPlayFinish&&this.onPlayFinish()},this.player.onPlayState=e=>{this.onPlayState&&this.onPlayState(e)},this.player.onCacheProcess=e=>{this.onCacheProcess&&this.onCacheProcess(e)},this.player.onQualityLevels=e=>{this.onQualityLevels&&this.onQualityLevels(e)},this.player.onLevelUpdates=e=>{this.onLevelUpdates&&this.onLevelUpdates(e)},this.player.onError=e=>{this.onPlayState&&this.onPlayState(!0),this.onError&&this.onError(e)},this.player.onSeekFinish=e=>{this.onSeekFinish&&this.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_raw265Entry(){let a=this;let r=function(){setTimeout(()=>{a.workerParse.postMessage({cmd:"get-nalu",data:null,msg:"get-nalu"}),!0===a.workerFetch.onMsgFetchFinished&&!0===a.workerParse.frameListEmpty&&!1===a.workerParse.streamEmpty&&a.workerParse.postMessage({cmd:"last-nalu",data:null,msg:"last-nalu"}),!0===a.workerParse.parseEmpty&&(a.workerParse.stopNaluInterval=!0),!0!==a.workerParse.stopNaluInterval&&r()},1e3)},e=function(){setTimeout(()=>{a.configFormat.extInfo.readyShow&&(a.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL?(a.player.playFrameYUV(!0,!0),a.configFormat.extInfo.readyShow=!1,a.onReadyShowDone&&a.onReadyShowDone()):e())},1e3)};this._makeMP4PlayerViewEvent(-1,this.configFormat.extInfo.rawFps,-1,{width:this.configFormat.playerW,height:this.configFormat.playerH},!0,y.CODEC_H265),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null),a.workerFetch=new Worker(p.GetScriptPath(function(){let r=new AbortController,a=r.signal,o=null;onmessage=e=>{var t=e.data;let n=null;switch(n=void 0===t.cmd||null===t.cmd?"":t.cmd){case"start":var i=t.url;"http"===t.type?fetch(i,{signal:a}).then(function(e){let n=function(t){return t.read().then(function(e){if(!e.done)return e=e.value,postMessage({cmd:"fetch-chunk",data:e,msg:"fetch-chunk"}),n(t);postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})})};return n(e.body.getReader())}).catch(function(e){}):"websocket"===t.type&&(i=i,(o=new WebSocket(i)).binaryType="arraybuffer",o.onopen=function(e){o.send("Hello WebSockets!")},o.onmessage=function(e){e.data instanceof ArrayBuffer&&0<(e=e.data).byteLength&&postMessage({cmd:"fetch-chunk",data:new Uint8Array(e),msg:"fetch-chunk"})},o.onclose=function(e){postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}),postMessage({cmd:"default",data:"WORKER STARTED",msg:"default"});break;case"stop":"http"===t.type?r.abort():"websocket"===t.type&&o&&o.close(),close()}}})),a.workerFetch.onMsgFetchFinished=!1,a.workerFetch.onmessage=function(e){var t=e.data;let n=null;switch(n=void 0===t.cmd||null===t.cmd?"":t.cmd){case"fetch-chunk":var i=t.data;a.workerParse.postMessage({cmd:"append-chunk",data:i,msg:"append-chunk"});break;case"fetch-fin":a.workerFetch.onMsgFetchFinished=!0,r()}},a.workerParse=new Worker(p.GetScriptPath(function(){const s=3;let r=function(){let o=new Object;return o.frameList=[],o.stream=null,o.frameListEmpty=function(){return o.frameList.length<=0},o.streamEmpty=function(){return null===o.stream||o.stream.length<=0},o.checkEmpty=function(){return!0===o.streamEmpty()&&!0===o.frameListEmpty()},o.pushFrameRet=function(e){return!(!e||null==e||(o.frameList&&null!=o.frameList&&null!=o.frameList||(o.frameList=[]),o.frameList.push(e),0))},o.nextFrame=function(){return!o.frameList&&null==o.frameList||null==o.frameList&&o.frameList.length<1?null:o.frameList.shift()},o.clearFrameRet=function(){o.frameList=null},o.setStreamRet=function(e){o.stream=e},o.getStreamRet=function(){return o.stream},o.appendStreamRet=function(e){if(!e||void 0===e||null==e)return!1;if(o.stream&&void 0!==o.stream&&null!=o.stream){var t=o.stream.length,n=e.length,n=new Uint8Array(t+n);n.set(o.stream,0),n.set(e,t),o.stream=n;for(let e=0;e<9999;e++){var i=o.nextNalu();if(!1===i||null==i)break;o.frameList.push(i)}}else o.stream=e;return!0},o.subBuf=function(e,t){e=new Uint8Array(o.stream.subarray(e,t+1));return o.stream=new Uint8Array(o.stream.subarray(t+1)),e},o.lastNalu=function(){var e=o.subBuf(0,o.stream.length);o.frameList.push(e)},o.nextNalu=function(n=1){if(!(null==o.stream||o.stream.length<=4)){let t=-1;for(let e=0;e<o.stream.length;e++){if(e+5>=o.stream.length)return!1;if(0==o.stream[e]&&0==o.stream[e+1]&&1==o.stream[e+2]||0==o.stream[e]&&0==o.stream[e+1]&&0==o.stream[e+2]&&1==o.stream[e+3]){var i=e;if(e+=s,-1==t)t=i;else{if(n<=1)return o.subBuf(t,i-1);--n}}}}return!1},o.nextNalu2=function(i=1){if(!(null==o.stream||o.stream.length<=4)){let t=-1,n=null;for(let e=0;e<o.stream.length;e++){if(e+5>=o.stream.length)return-1!=t&&(n=o.subBuf(t,o.stream.length-1));var r="0 0 1"==o.stream.slice(e,e+3).join(" "),a="0 0 0 1"==o.stream.slice(e,e+4).join(" ");if(r||a){r=e;if(e+=s,-1==t)t=r;else{if(i<=1)return n=o.subBuf(t,r-1);--i}}}}return!1},o}();onmessage=e=>{var t=e.data;let n=null;switch(n=void 0===t.cmd||null===t.cmd?"":t.cmd){case"append-chunk":var i=t.data,i=(r.appendStreamRet(i),r.nextFrame());postMessage({cmd:"return-nalu",data:i,msg:"return-nalu",parseEmpty:r.checkEmpty(),streamEmpty:r.streamEmpty(),frameListEmpty:r.frameListEmpty()});break;case"get-nalu":i=r.nextFrame();postMessage({cmd:"return-nalu",data:i,msg:"return-nalu",parseEmpty:r.checkEmpty(),streamEmpty:r.streamEmpty(),frameListEmpty:r.frameListEmpty()});break;case"last-nalu":i=r.lastNalu();postMessage({cmd:"return-nalu",data:i,msg:"return-nalu",parseEmpty:r.checkEmpty(),streamEmpty:r.streamEmpty(),frameListEmpty:r.frameListEmpty()});break;case"stop":postMessage("parse - WORKER STOPPED: "+t),close()}}})),a.workerParse.stopNaluInterval=!1,a.workerParse.parseEmpty=!1,a.workerParse.streamEmpty=!1,a.workerParse.frameListEmpty=!1,a.workerParse.onmessage=e=>{var t,n,i,e=e.data;let r=null;"return-nalu"===(r=void 0===e.cmd||null===e.cmd?"":e.cmd)&&(t=e.data,n=e.parseEmpty,i=e.streamEmpty,e=e.frameListEmpty,a.workerParse.parseEmpty=n,a.workerParse.streamEmpty=i,a.workerParse.frameListEmpty=e,!1===t||null==t?!0===a.workerFetch.onMsgFetchFinished&&!0===n&&(a.workerParse.stopNaluInterval=!0):(a.append265NaluFrame(t),a.workerParse.postMessage({cmd:"get-nalu",data:null,msg:"get-nalu"})))},this.workerFetch.postMessage({cmd:"start",url:p.ParseGetMediaURL(this.videoURL),type:this.mediaExtProtocol,msg:"start"}),e()}append265NaluFrame(e){e={data:e,pts:this.rawModePts};this.player.appendHevcFrame(e),this.configFormat.extInfo.readyShow&&this.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL&&(this.player.playFrameYUV(!0,!0),this.configFormat.extInfo.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone(),this.rawModePts+=1/this.configFormat.extInfo.rawFps}_rtcPlayer(){let t=this;this.player=new e.a(this.configFormat.RtcPlugin,this.configFormat),this.player.onMakeItReady=()=>{t.onMakeItReady&&t.onMakeItReady()},this.player.onLoadFinish=async()=>{t.playParam.size=await t.player.getSize(),t.playParam.durationMs=t.player.duration,t.playParam.videoCodec=1,t.onLoadFinish&&t.onLoadFinish(),t.onReadyShowDone&&t.onReadyShowDone()},this.player.onReadyShowDone=()=>{t.onReadyShowDone&&t.onReadyShowDone()},this.player.onPlayingFinish=()=>{null!=t.onPlayFinish&&t.onPlayFinish()},this.player.onRtcEvent=e=>{null!=t.onRtcEvent&&t.onRtcEvent(e)},this.player.onPlayState=e=>{t.onPlayState&&t.onPlayState(e)},this.player.onError=e=>{t.onPlayState&&t.onPlayState(!1),t.onError&&t.onError(e)},this.player.makeIt()}initDecoder(){let t=this;this.player=n.default.Player({FormatType:this.mediaExtFormat}),this.player.onPerformance=e=>{t.onPerformance&&t.onPerformance(e)},this.player.onCacheLimit=e=>{this.hlsObj&&this.hlsObj.limitDownloads(e),this.isCacheLimit=e},this.player.onPause=()=>{t.onPause()},this.player.onPlay=()=>{t.onPlay()},this.player.onWasmError=e=>{t.onError&&t.onError(e),t.player.release&&t.player.release()},this.player.onNewSeek=e=>{this.seek(e)},this.configFormat.useSoftDecoding=!0}loadJsWasm(e){b(e)}}R.default={cybercorejs:w},t.newcybercorejs=(e,t)=>{return new w(e,t)}}.call(this,I(27))},function(e,t,n){"use strict";n.r(t);var i=n(19),r=n(28),a=n(0),o=n(1),s=n.n(o);n(5);const l=n(12),u=n(48),c=n(35),h=n(36),d=n(37),f=n(5),p=n(29);t.default={Player:e=>{let o={config:{width:e&&e.width||f.DEFAULT_WIDTH,height:e&&e.height||f.DEFAULT_HEIGHT,fps:e&&e.fps||f.DEFAULT_FPS,fixed:e&&e.fixed||f.DEFAULT_FIXED,sampleRate:e&&e.sampleRate||f.DEFAULT_SAMPLERATE,appendHevcType:e&&e.appendHevcType||f.APPEND_TYPE_STREAM,frameDurMs:e&&e.frameDur||f.DEFAULT_FRAME_DUR,playerId:e&&e.playerId||f.DEFAILT_WEBGL_PLAY_ID,audioNone:e&&e.audioNone||!1,token:e&&e.token||null,videoCodec:e&&e.videoCodec||f.CODEC_H265},vcodecerPtr:null,videoCallback:null,frameList:[],cacheInterval:null,cacheYuvBuf:c(5),nowPacket:null,stream:new Uint8Array,vCodecID:f.V_CODEC_NAME_HEVC,audio:null,liveStartMs:-1,durationMs:-1,videoPTS:0,loop:null,debugYUVSwitch:!1,debugID:null,cacheLoop:null,playParams:{seekPos:-1,mode:f.PLAYER_MODE_VOD,accurateSeek:!0,seekEvent:!1,realPlay:!0},calcuteStartTime:-1,fix_poc_err_skip:0,frameTime:0,frameTimeSec:0,preCostTime:0,realVolume:1,isPlaying:!1,isCaching:f.CACHE_NO_LOADCACHE,isNewSeek:!1,flushDecoder:0,isCheckDisplay:!1,isPlayLoadingFinish:0,vCachePTS:0,aCachePTS:0,showScreen:!1,noCacheFrame:0,onPlayingTime:null,onPlayingFinish:null,onSeekFinish:null,onLoadCache:null,onLoadCacheFinshed:null,onRender:null,resampleFps:0,seekTime:null,isSeekBack:null,appendAudioStatus:0,appendVideoStatus:0,yuvVideoStatus:0,performance:{frameRate:30,buffer:0,broken:[],bitRate:0,seek:[],decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0,decodeTime:null},seekInitTime:0,oneScondTime:(new Date).getTime(),frameRate:0,startPlayTime:0,onPerformance:null,onCacheLimit:null,curDecoderTime:null,onInitDecodeComplete:null,seekFinishCallBack:!1,onWasmError:null,wasmLoadFinish:!1,wasmInitFinshedCallback:null,isAudioSeek:!1,formatType:e.FormatType,isWasmInitFinshed:!1,_inDecoding:!1,_isFirstDecoding:!0,_isPlay:!0,_isSeekKey:!1,_seekIdrArray:[],onNewSeek:null,initPerformance:()=>{o.performance={frameRate:30,buffer:0,broken:[],bitRate:0,seek:[]}},setConfig:e=>{o.config=Object.assign(o.config,e),null==o.config.token?alert("请输入TOKEN！Please set token param!"):(o.config.token&&o.decoder&&o.wasmLoadFinish&&o.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:o.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:o.config.videoCodec}}),o.makeIt(),o.cacheThread())},setScreen:(e=!1)=>{null!==o&&void 0!==o&&(o.showScreen=e)},setSize:(e,t)=>{o.config.width=e||f.DEFAULT_WIDTH,o.config.height=t||f.DEFAULT_HEIGHT},setFrameRate:(e=25)=>{o.config.fps=e,o.config.frameDurMs=1e3/e},setDurationMs:(e=-1)=>{o.durationMs=e,0==o.config.audioNone&&o.audio.setDurationMs(e)},setPlayingCall:e=>{o.onPlayingTime=e},setVoice:e=>{o.realVolume=e,0==o.config.audioNone&&o.audio.setVoice(o.realVolume,o.videoPTS)},setPlaybackRate:(e=1)=>{o.audio.setPlaybackRate(Number(e))},isPlayingState:()=>o.isPlaying||o.isCaching===f.CACHE_WITH_PLAY_SIGN,appendAACFrame:e=>{!0===o.isSeekBack&&(e.pts<o.seekTime&&0==o.appendAudioStatus&&(o.appendAudioStatus=-2),-2==o.appendAudioStatus)&&e.pts>o.seekTime&&(o.appendAudioStatus=-1),o.formatType!=f.PLAYER_IN_TYPE_FLV&&(!1===o.isSeekBack&&e.pts-o.seekTime<0||!0===o.isSeekBack&&-1!=o.appendVideoStatus)||(o.audio.addSample(e),o.aCachePTS=Math.max(e.pts,o.aCachePTS))},appendHevcFrame:e=>{var t;o.config.appendHevcType==f.APPEND_TYPE_STREAM?o.stream=new Uint8Array([...o.stream].concat(...e)):o.config.appendHevcType==f.APPEND_TYPE_FRAME&&(!0===o.isSeekBack&&(e.pts<o.seekTime&&0==o.appendVideoStatus&&(o.appendVideoStatus=-2),-2==o.appendVideoStatus)&&e.pts>o.seekTime&&(o.appendVideoStatus=-1),o.formatType!=f.PLAYER_IN_TYPE_FLV&&!1===o.isSeekBack&&o.seekTime&&e.isKey&&o._seekIdrArray.push(e.pts),o.formatType!=f.PLAYER_IN_TYPE_FLV&&(!1===o.isSeekBack&&e.pts-o.seekTime<0||!0===o.isSeekBack&&-1!=o.appendVideoStatus)||(o.seekTime&&e.isKey&&(o._isSeekKey=!0,o._seekIdrArray=[]),o.formatType!=f.PLAYER_IN_TYPE_FLV&&o.seekTime&&!o._isSeekKey?(t=o.durationMs/1e3,parseInt(e.pts)==parseInt(t)&&0<o._seekIdrArray.length&&(o.onNewSeek&&o.onNewSeek(o._seekIdrArray[o._seekIdrArray.length-1]),o._seekIdrArray=[])):(o.frameList.push(e),o._isFirstDecoding&&8<o.frameList.length&&o.checkToDecode(),o.vCachePTS=Math.max(e.pts,o.vCachePTS))))},checkToDecode:()=>{o._inDecoding||o.doDecode()},doDecode:()=>{if(o._isPlay&&(o.isWasmInitFinshed||o.formatType==f.PLAYER_IN_TYPE_FLV)){var t=o._getFramesToDecode();if(t&&t.length){for(let e=0;e<t.length;e++)o.decodeNalu1Frame(t[e].data,t[e].pts,!0,t[e].isKey);o._inDecoding=!0,o.decoder.postMessage({t:a.d.FINISH_FLAG})}}},_getFramesToDecode:()=>{if(o.frameList.length){let e=8;for(var t=[];0<e;){var n=o.frameList.shift();if(!n)break;t.push(n),e--}return t}},deletePassed:t=>{var e;o.seekTime||-1!=(e=o.frameList.findIndex(e=>e.pts<=t&&e.isKey))&&(o.frameList=o.frameList.slice(e,o.frameList.length))},getCachePTS:()=>Math.max(o.vCachePTS,o.aCachePTS),endAudio:()=>{0==o.config.audioNone&&o.audio&&o.audio.stop()},cleanSample:()=>{0==o.config.audioNone&&o.audio&&o.audio.cleanQueue()},cleanVideoQueue:()=>{o.config.appendHevcType==f.APPEND_TYPE_STREAM?o.stream=new Uint8Array:o.config.appendHevcType==f.APPEND_TYPE_FRAME&&(o.frameList=[],o.frameList.length=0)},cleanCacheYUV:()=>{o.cacheYuvBuf.cleanPipeline()},pause:()=>{o.loop&&window.clearInterval(o.loop),cancelAnimationFrame(o.requestAnimationFrameId),o.loop=null,0==o.config.audioNone&&o.audio&&o.audio.pause(),o.isPlaying=!1,o.isCaching===f.CACHE_WITH_PLAY_SIGN&&(o.isCaching=f.CACHE_WITH_NOPLAY_SIGN)},checkFinished:(e=f.PLAYER_MODE_VOD)=>e==f.PLAYER_MODE_VOD&&o.cacheYuvBuf.yuvCache.length<=0&&Number(o.videoPTS.toFixed(1))>=Number(((o.durationMs-o.config.frameDurMs)/1e3).toFixed(1))&&(null!=o.onPlayingFinish&&o.onPlayingFinish(()=>{o.config&&o.config.repeat?o.onPlay():(o.onCacheLimit&&o.onCacheLimit(!0),o._isPlay=!1)}),!0),clearAllCache:()=>{o.nowPacket=null,o.vCachePTS=0,o.aCachePTS=0,o._inDecoding=!1,o._isFirstDecoding=!0,o.cleanSample(),o.cleanVideoQueue(),o.cleanCacheYUV()},seek:(e,t={},n,i,r)=>{o.frameList=[],o.decoder&&o.decoder.terminate(),o.makeWasm(),r&&r(!0),o.isAudioSeek=!1,o.seekInitTime=(new Date).getTime(),o.performance.seek.push({seekPts:t.seekTime,fromSeekPts:o.videoPTS,time:0});r=o.isPlaying,null!=o.onLoadCache&&o.onLoadCache(),o.pause(),o.stopCacheThread(),o.clearAllCache(),e&&e(),o.isNewSeek=!0,o.flushDecoder=1,o.isSeekBack=o.videoPTS>t.seekTime,o.videoPTS=0,e={seekPos:t.seekTime||-1,mode:t.mode||f.PLAYER_MODE_VOD,accurateSeek:t.accurateSeek||!0,seekEvent:t.seekEvent||!0,realPlay:r};o._isSeekKey=!1,o.seekTime=t.seekTime,i&&(o.wasmInitFinshedCallback=i),o.cacheThread(),o.play(e),n&&(o.seekFinishCallBack=n)},getNalu1Packet:(e=!0)=>{var t=window.performance.now();let n=null,i=-1,r=!1;if(o.config.appendHevcType==f.APPEND_TYPE_STREAM)n=o.nextNalu();else{if(o.config.appendHevcType!=f.APPEND_TYPE_FRAME)return null;var a=o.frameList.shift();if(!a)return null;n=a.data,i=a.pts,r=a.isKey,e&&(o.videoPTS=i)}window.performance.now();return{nalBuf:n,pts:i,isKey:r}},decodeNalu1Frame:(e,t,n=0,i)=>{var r={t:a.d.DECODE_VIDEO,nalBuf:e,pts:t,flushDecoder:o.flushDecoder};o.decoder.postMessage(r,[e.buffer]),o.curDecoderTime=t},cacheThread:()=>{o.stopCacheThread(),o.cacheLoop=window.setInterval(()=>{},10)},stopCacheThread:()=>{null!==o.cacheLoop&&(window.clearInterval(o.cacheLoop),o.cacheLoop=null)},loadCache:()=>{if(!(0<((o.durationMs-o.config.frameDurMs)/1e3-o.videoPTS.toFixed(1)<1))){var e=o.isPlaying;if(o.cacheYuvBuf.yuvCache.length<=3){o.performance.broken.push({start:(new Date).getTime,end:null,time:null}),o.isCaching=e?f.CACHE_WITH_PLAY_SIGN:f.CACHE_WITH_NOPLAY_SIGN;e=o.frameDur;null===o.cacheInterval&&(o.cacheInterval=window.setInterval(()=>{var e,t;5<=o.cacheYuvBuf.yuvCache.length&&(null!=o.onLoadCacheFinshed&&o.onLoadCacheFinshed(),(e=o.performance.broken[o.performance.broken.length-1])&&e.start&&!e.end&&(t=(new Date).getTime(),e.end=t,e.time=t-e.start),window.clearInterval(o.cacheInterval),o.cacheInterval=null,o.isCaching===f.CACHE_WITH_PLAY_SIGN&&o.play(o.playParams),o.isCaching=f.CACHE_NO_LOADCACHE)},e))}}},playFunc:()=>{let t=!1;if(o.playParams.seekEvent||l.GetMsTime()-o.calcuteStartTime>=o.frameTime-o.preCostTime){let e=t=!0;if(o.calcuteStartTime=l.GetMsTime(),o.config.audioNone)o.playFrameYUV(e,o.playParams.accurateSeek);else{0<o.fix_poc_err_skip&&(o.fix_poc_err_skip--,e=!1),o.audio.setVideoPTS(o.videoPTS);var n=o.videoPTS-o.audio.getAlignVPTS();if(0<n)return void(o.playParams.seekEvent&&!o.config.audioNone&&o.audio.setVoice(0));if(e){if(!(e=-1*n<=+o.frameTimeSec)){var i=parseInt(n/o.frameTimeSec);for(let e=0;e<i;e++)o.playFrameYUV(!1,o.playParams.accurateSeek);null!=o.onLoadCacheFinshed&&o.onLoadCacheFinshed(),o.playFrameYUV(!0,o.playParams.accurateSeek)}null!=o.onLoadCacheFinshed&&o.onLoadCacheFinshed(),o.playFrameYUV(e,o.playParams.accurateSeek)}}}return o.playParams.seekEvent&&(o.playParams.seekEvent=!1,o.onSeekFinish(),o.isPlaying||(o.playFrameYUV(!0,o.playParams.accurateSeek),o.pause()),o.config.audioNone||o.audio.setVoice(o.realVolume)),o.checkToDecode(),o.onPlayingTime&&o.onPlayingTime(o.videoPTS),o.checkFinished(o.playParams.mode),t},play:e=>{if(o._isPlay=!0,o.playParams=e,o.calcuteStartTime=l.GetMsTime(),o.noCacheFrame=0,o.isPlaying=o.playParams.realPlay,o.performance.code="hevc",o.performance.playStyle="hls_"+o.playParams.mode,!0===o.config.audioNone&&o.playParams.mode==f.PLAYER_MODE_NOTIME_LIVE){o.liveStartMs=l.GetMsTime(),o.frameTime=Math.floor(1e3/o.config.fps),o.frameTimeSec=o.frameTime/1e3;let e=0;o.loop=window.setInterval(()=>{(l.GetMsTime()-o.liveStartMs)/o.frameTime>=e&&(o.playFrameYUV(!0,o.playParams.accurateSeek),e+=1)},1)}else o.videoPTS>=o.playParams.seekPos&&!o.isNewSeek||0===o.playParams.seekPos||0===o.playParams.seekPos?(o.frameTime=1e3/o.config.fps,o.frameTimeSec=o.frameTime/1e3,o.isPlaying&&0==o.config.audioNone&&o.audio.play(),o.realVolume=o.config.audioNone?0:o.audio.voice,o.playParams.seekEvent&&(o.fix_poc_err_skip=10),cancelAnimationFrame(o.requestAnimationFrameId),o.displayLoop()):(o.loop=window.setInterval(()=>{o.playFrameYUV(!1,o.playParams.accurateSeek),o.checkFinished(o.playParams.mode)?(window.clearInterval(o.loop),o.loop=null):(o.checkToDecode(),o.videoPTS>o.playParams.seekPos&&(window.clearInterval(o.loop),o.loop=null,o.play(o.playParams),o.isSeekBack=null,o.seekTime=null,o.appendAudioStatus=0,o.appendVideoStatus=0,o.yuvVideoStatus=0,o.performance.seek[o.performance.seek.length-1].time=(new Date).getTime()-o.seekInitTime,o.seekFinishCallBack)&&o.seekFinishCallBack())},10),o.isNewSeek=!1)},setIdrSeekTime:e=>{o.seekTime=e,o.playParams.seekPos=e},displayLoop:()=>{var e=l.GetMsTime();o.requestAnimationFrameId=requestAnimationFrame(o.displayLoop.bind(void 0)),o.playFunc(),o.preCostTime=l.GetMsTime()-e},stop:()=>{o.release(),o.stream=new Uint8Array},release:()=>(void 0!==o.yuv&&null!==o.yuv&&(d.releaseContext(o.yuv),o.yuv=null),o.decoder.postMessage({t:a.d.RELEASE_DECODE}),o.endAudio(),o.cacheLoop&&window.clearInterval(o.cacheLoop),o.cacheLoop=null,o.loop&&window.clearInterval(o.loop),o.loop=null,o.pause(),null!==o.videoCallback&&Module.removeFunction(o.videoCallback),o.videoCallback=null,o.stream=null,o.clearAllCache(),o.frameList.length=0,o.durationMs=-1,o.videoPTS=0,o.isPlaying=!1,o.canvas&&o.canvas.remove(),o.canvas=null,o.decoder&&o.decoder.terminate(),!(window.onclick=document.body.onclick=null)),nextNalu:(n=1)=>{if(!(o.stream.length<=4)){let t=-1;for(let e=0;e<o.stream.length;e++){if(e+5>=o.stream.length)return-1!=t&&(i=o.stream.subarray(t),o.stream=new Uint8Array,i);var i="0 0 1"==o.stream.slice(0,3).join(" "),r="0 0 0 1"==o.stream.slice(0,4).join(" ");if(i||r){if(-1==t)t=e;else{if(n<=1)return r=o.stream.subarray(t,e),o.stream=o.stream.subarray(e),r;--n}e+=3}}}return!1},decodeSendPacket:e=>{var t=Module._malloc(e.length),e=(Module.HEAP8.set(e,t),Module.cwrap("decodeSendPacket","number",["number","number","number"])(o.vcodecerPtr,t,e.length));return Module._free(t),e},decodeRecvFrame:()=>{return Module.cwrap("decodeRecv","number",["number"])(o.vcodecerPtr)},playYUV:()=>o.playFrameYUV(!0,!0),playFrameYUV:(e=!1,t=!1)=>{var n=o.cacheYuvBuf.vYuv();if(null==n)return o.noCacheFrame+=1,e&&!o.playParams.seekEvent&&o.loadCache(),!1;80<o.cacheYuvBuf.yuvCache.length||100<o.frameList.length?o.onCacheLimit&&o.onCacheLimit(!0):o.onCacheLimit&&o.onCacheLimit(!1),o.noCacheFrame=0,o.cacheYuvBuf.deletePassed(o.audio&&o.audio.getAlignVPTS()),o.deletePassed(o.audio&&o.audio.getAlignVPTS());var i=n.pts;return o.videoPTS=i,(!e&&t||e)&&e&&(o.onRender(n.width,n.height,n.y,n.u,n.v),o.drawImage(n.width,n.height,n.y,n.u,n.v)),e&&!o.playParams.seekEvent&&o.isPlaying&&o.loadCache(),!0},drawImage:(e,t,n,i,r)=>{window.performance.now();o.canvas.width===e&&o.canvas.height==t||(o.canvas.width=e,o.canvas.height=t),o.showScreen&&null!=o.onRender&&o.onRender(e,t,n,i,r),o.isCheckDisplay||o.checkDisplaySize(e,t),d.renderFrame(o.yuv,n,i,r,e,t),o.frameRate++,-1==o.performance.firstFrameTime&&(o.performance.firstFrameTime=(new Date).getTime()-o.startPlayTime),o.oneScondTime&&1e3<(new Date).getTime()-o.oneScondTime&&(n=JSON.parse(JSON.stringify(o.frameRate)),o.frameRate=0,o.oneScondTime=(new Date).getTime(),o.performance.frameRate=n,0<o.cacheYuvBuf.yuvCache.length&&(o.performance.buffer=o.cacheYuvBuf.yuvCache[o.cacheYuvBuf.yuvCache.length-1].pts-o.cacheYuvBuf.yuvCache[0].pts),o.onPerformance)&&o.onPerformance(o.performance)},debugYUV:e=>{o.debugYUVSwitch=!0,o.debugID=e},checkDisplaySize:(e,t)=>{var n=e/o.config.width>t/o.config.height,i=o.config.width/e,r=o.config.height/t,n=n?i:r,i=o.config.fixed,r=i?o.config.width:parseInt(e*n),e=i?o.config.height:parseInt(t*n);return o.canvas.offsetWidth==r&&o.canvas.offsetHeight==e||(i=parseInt((o.canvasBox.offsetHeight-e)/2),t=parseInt((o.canvasBox.offsetWidth-r)/2),o.canvas.style.marginTop=i+"px",o.canvas.style.marginLeft=t+"px",o.canvas.style.width=r+"px",o.canvas.style.height=e+"px"),o.isCheckDisplay=!0,[r,e]},makeWasm:()=>{o.isWasmInitFinshed=!1;var e=Object(i.getPlayerPath)();o.decoder=new r.a,o.decoder.postMessage({t:a.d.LOAD_WAMS_JS,pathUrl:e,isSafari:s.a.isSafari()}),o.decoder.onmessage=e=>{var t=e["data"];switch(t.t){case a.c.WASM_LOAD_FINISH:o.startPlayTime=(new Date).getTime(),o.wasmLoadFinish=!0,o.config.token&&o.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:o.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:o.config.videoCodec}}),o.checkToDecode();break;case a.c.DECODE_FINISH:!0===o.isSeekBack&&-1!=o.yuvVideoStatus&&(!(t.ptsSec-o.seekTime<0||5<t.ptsSec-o.seekTime||-3==o.yuvVideoStatu)||(o.yuvVideoStatus=-3,t.ptsSec<o.seekTime&&0==o.yuvVideoStatus&&(o.yuvVideoStatus=-2),-2==o.yuvVideoStatus&&streamBytes.pts>o.seekTime))&&(o.yuvVideoStatus=-1),o.decodeFramecount--,o.performance.width||(o.performance.width=t.width,o.performance.height=t.height),o.seekTime&&!o.isAudioSeek&&(o.isAudioSeek=!0,o.audio.seek(t.ptsSec));var n=new h.CacheYuvStruct(t.ptsSec,t.width,t.height,t.y,t.u,t.v);o.cacheYuvBuf.appendCacheByCacheYuv(n),80<o.cacheYuvBuf.yuvCache.length||15<o.curDecoderTime-t.ptsSec||100<o.frameList.length?o.onCacheLimit&&o.onCacheLimit(!0):o.onCacheLimit&&o.onCacheLimit(!1);break;case a.c.DEOCDE_INIT_FINISH:o.isWasmInitFinshed=!0,o.onInitDecodeComplete&&o.onInitDecodeComplete(),o.wasmInitFinshedCallback&&o.wasmInitFinshedCallback();break;case a.c.SET_FRAME:o.performance.decodeFrameRate=t.frameRate,o.performance.decodeTime=t.decodeTime;break;case a.c.WAMS_ERROR:o.onWasmError&&o.onWasmError(t.data);break;case a.c.BATCH_FINISH_FLAG:o._inDecoding=!1}}},makeIt:()=>{var e=document.querySelector("div#"+o.config.playerId),t=document.createElement("canvas");t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.style.top="0px",t.style.left="0px",e.appendChild(t),o.canvasBox=e,o.canvas=t,o.yuv=d.setupCanvas(t,{preserveDrawingBuffer:!1}),0==o.config.audioNone&&(o.audio=u({sampleRate:o.config.sampleRate,appendType:o.config.appendHevcType})),o.isPlayLoadingFinish=1},bindEvents:()=>{document.addEventListener("visibilitychange",o._onVisibilityChange.bind(void 0))},_onVisibilityChange:()=>{"visible"!==document.visibilityState||o.isPlayingState()?o.onPause():o.onPlay()}};return o.makeWasm(),o.bindEvents(),o}}},function(e,t,n){"use strict";n.r(t),n.d(t,"Mp4Player",function(){return a});var o=n(4),i=n(67),s=n(23);const r=n(5);n(1);var a=class{constructor(e){this.configFormat={width:e.width||r.DEFAULT_WIDTH,height:e.height||r.DEFAULT_HEIGHT,fps:e.fps||r.DEFAULT_FPS,fixed:e.fixed||r.DEFAULT_FIXED,sampleRate:e.sampleRate||r.DEFAULT_SAMPLERATE,appendHevcType:e.appendHevcType||r.APPEND_TYPE_STREAM,frameDurMs:e.frameDur||r.DEFAULT_FRAME_DUR,playerId:e.playerId||r.DEFAILT_WEBGL_PLAY_ID,audioNone:e.audioNone||!1,token:e.token||null,videoCodec:e.videoCodec||r.CODEC_H265,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1},this.videoTag=null,this.isPlaying=!1,this.duration=-1,this.bufferInterval=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onPlayState=null,this.onCacheProcess=null,this.onSeekFinish=null,this.onSeiInfo=null,this.sei_maps=[],this.sei_count=0,this.seiTimer=null,this.onSeiTimer=null,this.onSeekStart=null,this.seekResult=null,this.onError=null,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}makeIt(r){let a=this;var e;this.videoTag=null,this.videoTag=document.createElement("video"),this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),this.videoTag.setAttribute("crossOrigin","anonymous"),this.videoTag.setAttribute("webkit-playsinline","true"),this.videoTag.setAttribute("playsinline","true"),!0===this.configFormat.autoPlay&&(this.play(),window.onclick=document.body.onclick=function(e){a.videoTag.muted=!1}),this.configFormat.audioNone&&(this.videoTag.setAttribute("muted","true"),this.videoTag.setAttribute("autoplay","autoplay")),Object(i.a)(this.videoTag),this.VRPlugin?(e=document.querySelector("#"+this.configFormat.playerId),this.VrPlayer=new s.a({video:this.videoTag,container:e,autoPlay:this.configFormat.autoPlay},this.VRPlugin)):this.insertVideo(),this.videoTag.onplay=function(){var e=a.isPlayingState();a.onPlayState&&a.onPlayState(e),a.seiTimer&&(clearInterval(a.seiTimer),a.seiTimer=null),a.seiTimer=setInterval(()=>{a.onSeiTimer&&a.onSeiTimer(a.videoTag.currentTime)},30)},this.videoTag.onpause=function(){var e=a.isPlayingState();a.onPlayState&&a.onPlayState(e)},this.videoTag.ontimeupdate=()=>{a.onPlayingTime&&a.onPlayingTime(a.videoTag.currentTime)},this.videoTag.onended=()=>{a.sei_count=0,a.onPlayingFinish&&a.onPlayingFinish()},this.videoTag.onloadedmetadata=e=>{a.VrPlayer&&a.VrPlayer.loadVideo&&a.VrPlayer.loadVideo(),a.duration=a.videoTag.duration,a.insertVideo(),a.onLoadFinish&&a.onLoadFinish(),null!==a.bufferInterval&&(window.clearInterval(a.bufferInterval),a.bufferInterval=null),a.bufferInterval=window.setInterval(function(){var e,t;a.videoTag.buffered.length&&((e=a.videoTag.buffered.end(a.videoTag.buffered.length-1))>=a.duration-.04&&(a.onCacheProcess&&a.onCacheProcess(a.duration),window.clearInterval(a.bufferInterval)),a.seekReadyPts&&e>a.seekReadyPts&&(t=a.seek(a.seekReadyPts),a.seekResult=t,a.seekReadyPts=null),a.onCacheProcess)&&a.onCacheProcess(e)},200)},this.videoTag.onerror=e=>{var t=e.target.error,n=-1<t.message.toLowerCase().indexOf(o.ErrorDetails.DEMUXER_ERROR),i=!n&&t&&t.code===o.MsgCode.DEOCDE_NOT_SUPPORT;a.onError&&a.onError({msg:i?o.ErrorDetails.NOT_SUPPORT_DETAIL:t,code:n?o.MsgCode.DEMUXER_ERROR:t&&t.code||o.MsgCode.UNKNOW_ERROR,event:e.type,url:r,errorType:i||n?o.ErrorTypes.NOT_SUPPORT:e.type})},this.videoTag.onseeking=()=>{this.onSeekStart&&this.onSeekStart()},this.videoTag.onseeked=()=>{a.onSeekFinish&&a.onSeekFinish(a.seekResult||!0)},this.videoTag.src=r,this.videoTag.style.width="100%",this.videoTag.style.height="100%",this.onMakeItReady&&this.onMakeItReady()}insertVideo(){var e,t=document.querySelector("#"+this.configFormat.playerId);t.getElementsByTagName("video")[0]||(e=t.getElementsByTagName("div"),t.insertBefore(this.videoTag,e[0]))}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.configFormat.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.configFormat.height}}play(){var e=this.videoTag.play();void 0!==e&&e.then(e=>{}).catch(e=>{})}seek(t){try{this.videoTag.currentTime=t}catch(e){return this.videoTag.currentTime=0,this.seekReadyPts=t,this.seekResult=!1}}pause(){this.videoTag&&this.videoTag.pause&&this.videoTag.pause()}setVoice(e){this.videoTag.volume=e,this.videoTag.muted=0==e}isPlayingState(){return this.videoTag&&!this.videoTag.paused}release(){this.VrPlayer&&this.VrPlayer.destroy(),this.videoTag&&(["src","onplay","onpause","ontimeupdate","onended","onloadedmetadata","onerror","onseeking","onseeked"].forEach(e=>{this.videoTag[e]&&(this.videoTag[e]=null)}),this.videoTag.currentTime&&(this.videoTag.currentTime=0),this.pause());var e=document.querySelector("#"+this.configFormat.playerId);if(e)try{e.removeChild(this.videoTag)}catch(e){}this.videoTag&&this.videoTag.remove&&this.videoTag.remove(),this.videoTag=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onPlayState=null,this.sei_maps=[],this.sei_count=0,null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this.seiTimer&&(clearInterval(this.seiTimer),this.seiTimer=null),window.onclick=document.body.onclick=null}nativeNextFrame(){void 0!==this.videoTag&&null!==this.videoTag&&(this.videoTag.currentTime+=1/this.configFormat.fps)}}},function(e,t,n){"use strict";n.r(t);var r=n(52),h=n(0),i=n(28),a=n(19),o=n(1),s=n.n(o);const l=n(38),u=n(30);n(35),n(36);const c=n(37),d=n(12);n(60);const f=n(48),p=n(5),m=n(29);class g{constructor(e,t,n,i,r,a,o,s,l){this.pts=l,this.data_y=e,this.data_u=t,this.data_v=n,this.line1=i,this.line2=r,this.line3=a,this.width=o,this.height=s,this.byteAlignIncr=this.line1-this.width}}t.default={CNativeCore:class{constructor(e){this.config={width:e.width||p.DEFAULT_WIDTH,height:e.height||p.DEFAULT_HEIGHT,fps:e.fps||p.DEFAULT_FPS,sampleRate:e.sampleRate||p.DEFAULT_SAMPLERATE,playerId:e.playerId||p.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,readyShow:e.readyShow||!1,checkProbe:e.checkProbe,ignoreAudio:e.ignoreAudio,playMode:e.playMode||p.PLAYER_MODE_VOD,autoPlay:e.autoPlay||!1,defaultFps:e.defaultFps||-1,cacheLength:e.cacheLength||50,videoCodec:e&&e.videoCodec||p.CODEC_H265},this.config.cacheLength=Math.max(this.config.cacheLength,5),this.probeSize=4524611,this.audioWAudio=null,this.audioVoice=1,this.frameCallTag=0,this.seekTarget=0,this.avSeekVState=!1,this.isNewSeek=!1,this.openFrameCall=!0,this.bufRecvStat=!1,this.bufObject=u(),this.bufLastVDTS=0,this.bufLastADTS=0,this.yuvMaxTime=0,this.loopMs=10,this.isCacheV=p.CACHE_NO_LOADCACHE,this.playVPipe=[],this._videoQueue=[],this._VIDEO_CACHE_LEN=this.config.cacheLength,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.duration=-1,this.channels=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.isCheckDisplay=!1,this.frameTime=1e3/this.config.fps,this.vCodecID=p.V_CODEC_NAME_UNKN,this.audioIdx=-1,this.audioNone=!1,this.frameDur=0,this.canvasBox=null,this.canvas=null,this.yuv=null,this.retryAuSampleNo=0,this.cacheStatus=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.reFull=!1,this.bufOK=!1,this.avRecvInterval=null,this.avFeedVideoInterval=null,this.avFeedAudioInterval=null,this.decVFrameInterval=null,this.playFrameInterval=null,this.onProbeFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.onRelease=null,this.playModeEnum=this.config.playMode===p.PLAYER_MODE_NOTIME_LIVE?1:0,this.decoder=null,this.demuxWorker=null,this.isWasmInit=!1,this.isDemuxWasmInit=!1,this.makeWasm(),this.onWasmFinished=null,this.naluLListLength=0,this.time=0,this.resampleFps=0,this.requestAnimationFrameId=null,this.calcuteStartTime=0,this.nowTimestamp=0,this.playFrameCostTime=0,this.performance={frameRate:30,buffer:0,broken:[],bitRate:0,seek:[],decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0,decodeTime:null},this.seekInitTime=0,this.oneScondTime=(new Date).getTime(),this.frameRate=0,this.startPlayTime=0,this.onPerformance=null,this.onWasmError=null}makeWasm(){var e=Object(a.getPlayerPath)();this.demuxWorker=new r.a,this.demuxWorker.postMessage({t:h.b.LOAD_WAMS_JS,pathUrl:e,isSafari:s.a.isSafari()}),this.demuxWorker.onmessage=e=>{var t=e["data"];switch(t.t){case h.a.WASM_LOAD_FINISH:-1==this.performance.firstFrameTime&&(this.startPlayTime=(new Date).getTime()),this.config.token&&this.demuxWorker.postMessage({t:h.b.INIT_DECODER,data:{token:this.config.token,playerVersion:m.PLAYER_VERSION,ignoreAudio:this.config.ignoreAudio,playModeEnum:this.playModeEnum,defaultFps:this.config.defaultFps}});break;case h.a.SNIFF_INIT_FINISH:this.isDemuxWasmInit=!0,this.isWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case h.a.POST_PROBEDATA:var{duration:n,width:i,height:r,fps:a,audioIdx:o,sample_rate:s,channels:l,vcodec_name_id:u,sample_fmt:c}=t;this._probeFinCallback(n,i,r,a,o,s,l,u,c);break;case h.a.POST_NALUDATA:var{d:n,len:i,isKey:r,pts:a,dts:o,isRawStream:s}=t;this._naluCallback(n,i,r,t.width,t.height,a,o,s);break;case h.a.POST_AACDATA:var{line1:l,channel:u}=t;this._aacFrameCallback(t.d,l,u,t.pts);break;case h.a.POST_FRAMEDATA:this._frameCallback(t.buf_y,t.buf_u,t.buf_v,t.line1,t.line2,t.line3,t.width,t.height,t.pts,t.tag);break;case h.a.POST_NALU_LENGTH:this.naluLListLength=t.l;break;case h.a.WAMS_ERROR:this.onWasmError&&this.onWasmError(t.data)}},this.decoder=new i.a,this.decoder.postMessage({t:h.d.LOAD_WAMS_JS,pathUrl:e,isSafari:s.a.isSafari()}),this.decoder.onmessage=e=>{var t,n=e["data"];switch(n.t){case h.c.WASM_LOAD_FINISH:this.config.token&&this.decoder.postMessage({t:h.d.INIT_DECODER,data:{token:this.config.token,playerVersion:m.PLAYER_VERSION,videoCodec:this.videoCodec}});break;case h.c.DECODE_FINISH:3<this.resampleFps?(this.resampleFps=0,t={t:h.d.RETURN_VIDEO_BUFFER,f:n},this.decoder.postMessage(t,[t.f.y.buffer,t.f.u.buffer,t.f.v.buffer])):(this.performance.width||(this.performance.width=n.width,this.performance.height=n.height),this.resampleFps++,this._frameCallback(n.y,n.u,n.v,n.stride_y,n.stride_u,n.stride_v,n.width,n.height,n.ptsSec,this.frameCallTag));break;case h.c.DEOCDE_INIT_FINISH:this.isWasmInit=!0,this.isDemuxWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case h.c.SET_FRAME:this.performance.decodeFrameRate=n.frameRate,this.performance.decodeTime=n.decodeTime}}}_createWorker1(){let i=this;this.worker1=new r.a("./dist/dc-worker-dist.js"),this.worker1ready=!1,this.worker1decing=!1,this.worker1.onmessage=function(e){var e=e.data,t=e.cmd,n=e.params;switch(t){case"onRuntimeInitialized":i.worker1.postMessage({cmd:"AVSniffStreamInit",params:[i.config.token,m.PLAYER_VERSION]});break;case"onInitDecOK":i.worker1ready=!0;break;case"decodeVideoFrame_Start":i.worker1decing=!0;break;case"decodeVideoFrame_End":i.worker1decing=!1;break;case"_frameCallback":i._handleFrameYUVCallback(n.buf_y,n.buf_u,n.buf_v,n.line1,n.line2,n.line3,n.width,n.height,n.pts,n.tag);break;case"stop_End":i.worker1.onmessage=null,i.worker1=null}}}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){null!==this.playFrameInterval&&(window.clearInterval(this.playFrameInterval),this.playFrameInterval=null),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),this._clearDecInterval(),this._removeBindFuncPtr();return this.demuxWorker.postMessage({t:h.b.RELEASE_SNIFF}),this.demuxWorker&&this.demuxWorker.terminate(),this.decoder.postMessage({t:h.d.RELEASE_DECODE}),this.decoder&&this.decoder.terminate(),this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,this.bufRecvStat=!1,this.bufObject.cleanPipeline(),this.playVPipe.length=0,this.loopMs=10,void 0!==this.yuv&&null!==this.yuv&&(c.releaseContext(this.yuv),this.yuv=null),void 0!==this.canvas&&null!==this.canvas&&(this.canvas.remove(),this.canvas=null),this.config.readyShow=!0,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],this.onRelease&&this.onRelease(),-1}setScreen(e=!1){this.showScreen=e}getCachePTS(){return 1!==this.config.ignoreAudio&&this.audioWAudio?Math.max(this.vCachePTS,this.aCachePTS):this.vCachePTS}getMaxPTS(){return Math.max(this.vCachePTS,this.aCachePTS)}isPlayingState(){return this.isPlaying}_clearDecInterval(){this.decVFrameInterval&&window.clearInterval(this.decVFrameInterval),this.decVFrameInterval=null}_checkPlayFinished(){return!(this.config.playMode!==p.PLAYER_MODE_VOD||!(!0===this.bufRecvStat&&(this.playPTS>=this.bufLastVDTS||this.audioWAudio&&this.playPTS>=this.bufLastADTS)||this.duration-this.playPTS<this.frameDur)||(this.pause(),this._clearDecInterval(),this.onPlayingTime&&this.onPlayingTime(this.duration),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.onPlayingFinish&&this.onPlayingFinish(),this.setPerformanceBrokenEnd(),0))}play(){let t=this;if(this.performance.playStyle="flv_vod",this.performance.code="hevc",this.isCacheV===p.CACHE_WITH_NOPLAY_SIGN&&(this.isCacheV=p.CACHE_WITH_PLAY_SIGN),this.isPlaying=!0,!this.playFrameInterval||null===this.playFrameInterval||null==this.playFrameInterval){let i=0,r=0,a=0;const o=+this.frameTime;this.config.playMode===p.PLAYER_MODE_NOTIME_LIVE?this.playFrameInterval=window.setInterval(()=>{var e;r=d.GetMsTime(),0<t._videoQueue.length&&r-i>=t.frameTime-a&&(e=t._videoQueue.shift(),c.renderFrame(t.yuv,e.data_y,e.data_u,e.data_v,e.line1,e.height),this.setPerformance(),(a=d.GetMsTime()-r)>=t.frameTime&&(a=t.frameTime),i=r)},2):this.playFrameInterval=window.setInterval(()=>{if(r=d.GetMsTime(),0<this._videoQueue.length&&r-i>=this.frameTime-a){var t=this._videoQueue[0].pts;let e=0;if(this.isNewSeek||null===this.audioWAudio||void 0===this.audioWAudio||(e=1e3*(t-this.audioWAudio.getAlignVPTS()),this.playPTS=Math.max(this.audioWAudio.getAlignVPTS(),this.playPTS)),i=r,0<e)return;if(this.playPTS=Math.max(t,this.playPTS),this.isNewSeek&&this.seekTarget-this.frameDur>t)return a=this.frameTime,void this._videoQueue.shift();this.isNewSeek&&(this.audioWAudio&&this.audioWAudio.setVoice(this.audioVoice),this.audioWAudio&&this.audioWAudio.play(),a=0,this.isNewSeek=!1,this.seekTarget=0,this.performance.seek[this.performance.seek.length-1].time=(new Date).getTime()-this.seekInitTime);var n=this._videoQueue.shift();if(this.showScreen&&this.onRender&&this.onRender(n.line1,n.height,n.data_y,n.data_u,n.data_v),c.renderFrame(this.yuv,n.data_y,n.data_u,n.data_v,n.line1,n.height),this.setPerformance(),this.onPlayingTime&&this.onPlayingTime(t),!this.isNewSeek&&this.audioWAudio&&(e<0&&-1*e<=o||0<=e)){if(this.config.playMode===p.PLAYER_MODE_VOD)if(t>=this.duration)this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.onPlayingFinish&&this.onPlayingFinish(),this._clearDecInterval(),this.pause();else if(this._checkPlayFinished())return;a=d.GetMsTime()-r}else!this.isNewSeek&&this.audioWAudio&&(a=(e<0&&(e,o),this.frameTime))}this._checkPlayFinished()},30)}this.isNewSeek||this.audioWAudio&&this.audioWAudio.play()}displayLoop(e){this.playFunc(e),this.requestAnimationFrameId=requestAnimationFrame(this.displayLoop.bind(this))}playFunc(t){if(this.nowTimestamp=d.GetMsTime(),0<this._videoQueue.length&&this.nowTimestamp-this.calcuteStartTime>=this.frameTime-this.playFrameCostTime){var n=this._videoQueue[0].pts;let e=0;if(this.isNewSeek||null===this.audioWAudio||void 0===this.audioWAudio||(e=1e3*(n-this.audioWAudio.getAlignVPTS()),this.playPTS=Math.max(this.audioWAudio.getAlignVPTS(),this.playPTS)),this.calcuteStartTime=this.nowTimestamp,0<e)return;if(this.playPTS=Math.max(n,this.playPTS),this.isNewSeek&&this.seekTarget-this.frameDur>n)return this.playFrameCostTime=this.frameTime,void this._videoQueue.shift();this.isNewSeek&&(this.audioWAudio&&this.audioWAudio.setVoice(this.audioVoice),this.audioWAudio&&this.audioWAudio.play(),this.playFrameCostTime=0,this.isNewSeek=!1,this.seekTarget=0);var i=this._videoQueue.shift();if(this.showScreen&&this.onRender&&this.onRender(i.line1,i.height,i.data_y,i.data_u,i.data_v),c.renderFrame(this.yuv,i.data_y,i.data_u,i.data_v,i.line1,i.height),this.setPerformance(),this.onPlayingTime&&this.onPlayingTime(n),!this.isNewSeek&&this.audioWAudio&&(e<0&&-1*e<=t||0<=e)){if(this.config.playMode===p.PLAYER_MODE_VOD)if(n>=this.duration)this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.onPlayingFinish&&this.onPlayingFinish(),this.setPerformanceBrokenEnd(),this._clearDecInterval(),this.pause();else if(this._checkPlayFinished())return;this.playFrameCostTime=d.GetMsTime()-this.nowTimestamp}else!this.isNewSeek&&this.audioWAudio&&(e<0&&-1*e>t?this.playFrameCostTime=this.frameTime:this.layFrameCostTime=this.frameTime)}this._checkPlayFinished()}pause(){this.isPlaying=!1,this._pause(),this.isCacheV===p.CACHE_WITH_PLAY_SIGN&&(this.isCacheV=p.CACHE_WITH_NOPLAY_SIGN)}_pause(){this.playFrameInterval&&window.clearInterval(this.playFrameInterval),this.playFrameInterval=null,this.audioWAudio&&this.audioWAudio.pause()}seek(e,t={}){this.seekInitTime=(new Date).getTime(),this.performance.seek.push({seekPts:t.seekTime,fromSeekPts:this._videoQueue[0]&&this._videoQueue[0].pts||0,time:0}),this.openFrameCall=!1,this.pause(),this._clearDecInterval(),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),this.yuvMaxTime=0,this.playVPipe.length=0,this._videoQueue.length=0,this.audioWAudio&&this.audioWAudio.stop(),e&&e(),this.isNewSeek=!0,this.avSeekVState=!0,this.seekTarget=t.seekTime,null!==this.audioWAudio&&void 0!==this.audioWAudio&&(this.audioWAudio.setVoice(0),this.audioWAudio.resetStartParam(),this.audioWAudio.stop()),this._avFeedData(t.seekTime),setTimeout(()=>{this.yuvMaxTime=0,this._videoQueue.length=0,this.openFrameCall=!0,this.frameCallTag+=1,this._decVFrameIntervalFunc()},1e3)}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}cacheIsFull(){return this._videoQueue.length>=this._VIDEO_CACHE_LEN}_checkDisplaySize(e,t,n){var e=this.config.width+Math.ceil((t-e)/2),i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2),i=i?r:a,r=this.config.fixed,a=r?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i);return this.canvas.offsetWidth==a&&this.canvas.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.canvas.style.marginTop=(t=t<0?0:t)+"px",this.canvas.style.marginLeft=r+"px",this.canvas.style.width=a+"px",this.canvas.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_createYUVCanvas(){this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.canvas=document.createElement("canvas"),this.canvas.style.width=this.canvasBox.clientWidth+"px",this.canvas.style.height=this.canvasBox.clientHeight+"px",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvasBox.appendChild(this.canvas),this.yuv=c.setupCanvas(this.canvas,{preserveDrawingBuffer:!1})}_avRecvPackets(){this.bufObject.cleanPipeline(),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),!0===this.config.checkProbe?this.avRecvInterval=window.setInterval(()=>{this.demuxWorker.postMessage({t:h.b.GET_SNIFF_PACKET,p:1}),this._avCheckRecvFinish()},5):this.avRecvInterval=window.setInterval(()=>{this.demuxWorker.postMessage({t:h.b.GET_SNIFF_PACKET,p:0}),this._avCheckRecvFinish()},5),this._avFeedData(0,!1)}_avCheckRecvFinish(){this.config.playMode===p.PLAYER_MODE_VOD&&this.duration-this.getMaxPTS()<this.frameDur&&this._avSetRecvFinished()}_avSetRecvFinished(){this.bufRecvStat=!0,null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),this.bufOK=!0}_afterAvFeedSeekToStartWithFinishedBuffer(e){let t=this,n=window.setInterval(()=>{t._videoQueue.length>=t._VIDEO_CACHE_LEN&&(t.onSeekFinish&&t.onSeekFinish(),t.onPlayingTime&&t.onPlayingTime(e),t.play(),window.clearInterval(n),n=null)},10);return!0}_afterAvFeedSeekToStartWithUnFinBuffer(e){let t=this,n=window.setInterval(()=>{t._videoQueue.length>=t._VIDEO_CACHE_LEN&&(t.onSeekFinish&&t.onSeekFinish(),t.onPlayingTime&&t.onPlayingTime(e),!1===t.reFull?t.play():t.reFull=!1,window.clearInterval(n),n=null)},10);return!0}_avFeedData(i){let r=this;if(this.playVPipe.length=0,this.audioWAudio&&this.audioWAudio.cleanQueue(),i<=0&&!1===this.bufOK){let n=0;if(r.avFeedVideoInterval=window.setInterval(()=>{var e=r.bufObject.videoBuffer.length;if(e-1>n||0<r.duration&&r.duration-r.getMaxPTS()<r.frameDur&&e-1==n){var t=r.bufObject.videoBuffer[n].length;if(0<t){for(let e=0;e<t;e++)r.playVPipe.push(l.ConstructWithDts(r.bufObject.videoBuffer[n][e].pts,r.bufObject.videoBuffer[n][e].dts,r.bufObject.videoBuffer[n][e].isKey,r.bufObject.videoBuffer[n][e].data,!0));n+=1}r.config.playMode===p.PLAYER_MODE_VOD&&r.duration-r.getMaxPTS()<r.frameDur&&0<r.playVPipe.length&&r.playVPipe[r.playVPipe.length-1].pts>=r.bufLastVDTS&&(window.clearInterval(r.avFeedVideoInterval),r.avFeedVideoInterval=null)}else r.config.playMode===p.PLAYER_MODE_VOD&&0<r.playVPipe.length&&r.playVPipe[r.playVPipe.length-1].pts>=r.duration&&(window.clearInterval(r.avFeedVideoInterval),r.avFeedVideoInterval=null);r.avSeekVState&&r.config.playMode===p.PLAYER_MODE_VOD&&(r._afterAvFeedSeekToStartWithFinishedBuffer(i),r.avSeekVState=!1)},5),void 0!==r.audioWAudio&&null!==r.audioWAudio&&r.config.ignoreAudio<1){let n=0;r.avFeedAudioInterval=window.setInterval(()=>{var e=r.bufObject.audioBuffer.length;if(e-1>n||r.duration-r.getMaxPTS()<r.frameDur&&e-1==n){var t=r.bufObject.audioBuffer[n].length;for(let e=0;e<t;e++)r.audioWAudio.addSample(new l.BufferFrame(r.bufObject.audioBuffer[n][e].pts,r.bufObject.audioBuffer[n][e].isKey,r.bufObject.audioBuffer[n][e].data,!1));n+=1,r.config.playMode===p.PLAYER_MODE_VOD&&r.duration-r.getMaxPTS()<r.frameDur&&0<r.audioWAudio.sampleQueue.length&&r.audioWAudio.sampleQueue[r.audioWAudio.sampleQueue.length-1].pts>=r.bufLastADTS&&(window.clearInterval(r.avFeedAudioInterval),r.avFeedAudioInterval=null)}else r.config.playMode===p.PLAYER_MODE_VOD&&0<r.audioWAudio.sampleQueue.length&&r.audioWAudio.sampleQueue[r.audioWAudio.sampleQueue.length-1].pts>=r.duration&&(window.clearInterval(r.avFeedAudioInterval),r.avFeedAudioInterval=null)},5)}}else{var e=this.bufObject.seekIDR(i),e=parseInt(e,10);this.playPTS=0;let n=e;if(this.avFeedVideoInterval=window.setInterval(()=>{var e=r.bufObject.videoBuffer.length;if(e-1>n||r.duration-r.getMaxPTS()<r.frameDur&&e-1==n){var t=r.bufObject.videoBuffer[n].length;if(0<t){for(let e=0;e<t;e++)r.playVPipe.push(l.ConstructWithDts(r.bufObject.videoBuffer[n][e].pts,r.bufObject.videoBuffer[n][e].dts,r.bufObject.videoBuffer[n][e].isKey,r.bufObject.videoBuffer[n][e].data,!0));n+=1}r.config.playMode===p.PLAYER_MODE_VOD&&r.duration-r.getMaxPTS()<r.frameDur&&0<r.playVPipe.length&&r.playVPipe[r.playVPipe.length-1].pts>=r.bufLastVDTS&&(window.clearInterval(r.avFeedVideoInterval),r.avFeedVideoInterval=null)}else r.config.playMode===p.PLAYER_MODE_VOD&&0<r.playVPipe.length&&r.playVPipe[r.playVPipe.length-1].pts>=r.duration&&(window.clearInterval(r.avFeedVideoInterval),r.avFeedVideoInterval=null);r.avSeekVState&&r.config.playMode===p.PLAYER_MODE_VOD&&(r._afterAvFeedSeekToStartWithUnFinBuffer(i),r.avSeekVState=!1)},5),this.audioWAudio&&this.config.ignoreAudio<1){let n=parseInt(i,10);this.avFeedAudioInterval=window.setInterval(()=>{var e=r.bufObject.audioBuffer.length;if(e-1>n||r.duration-r.getMaxPTS()<r.frameDur&&e-1==n){var t=r.bufObject.audioBuffer[n].length;for(let e=0;e<t;e++)r.bufObject.audioBuffer[n][e].pts<r.seekTarget||r.audioWAudio.addSample(new l.BufferFrame(r.bufObject.audioBuffer[n][e].pts,r.bufObject.audioBuffer[n][e].isKey,r.bufObject.audioBuffer[n][e].data,!1));n+=1,r.config.playMode===p.PLAYER_MODE_VOD&&r.duration-r.getMaxPTS()<r.frameDur&&0<r.audioWAudio.sampleQueue.length&&r.audioWAudio.sampleQueue[r.audioWAudio.sampleQueue.length-1].pts>=r.bufLastADTS&&(window.clearInterval(r.avFeedAudioInterval),r.avFeedAudioInterval=null)}else r.config.playMode===p.PLAYER_MODE_VOD&&0<r.audioWAudio.sampleQueue.length&&r.audioWAudio.sampleQueue[r.audioWAudio.sampleQueue.length-1].pts>=r.duration&&(window.clearInterval(r.avFeedAudioInterval),r.avFeedAudioInterval=null)},5)}}}_probeFinCallback(e,t,n,i,r,a,o,s,l){let u=this;this._createYUVCanvas(),this.config.fps=+i,this.frameTime=1e3/this.config.fps,this.width=t,this.height=n,this.frameDur=1/this.config.fps,this.duration=e-this.frameDur,this.vCodecID=s,this.config.sampleRate=a,this.channels=o,this.audioIdx=r,this.duration<0&&(this.config.playMode=p.PLAYER_MODE_NOTIME_LIVE),0<=r&&this.config.ignoreAudio<1?this.audioNone=!1:this.audioNone=!0,p.V_CODEC_NAME_HEVC!==this.vCodecID&&p.V_CODEC_NAME_AV1!==this.vCodecID||(!1===this.audioNone&&(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=f({sampleRate:a,appendType:p.APPEND_TYPE_FRAME}),this.audioWAudio.setDurationMs(1e3*e),this.onLoadCache)&&this.audioWAudio.setOnLoadCache(()=>{if(u.retryAuSampleNo<=5){u.pause(),u.onLoadCache&&u.onLoadCache(),u.setPerformanceBrokenStart();let e=window.setInterval(()=>{2<u.audioWAudio.sampleQueue.length?(u.onLoadCacheFinshed&&u.onLoadCacheFinshed(),u.setPerformanceBrokenEnd(),u.play(),u.retryAuSampleNo=0,window.clearInterval(e),e=null):(u.retryAuSampleNo+=1,5<u.retryAuSampleNo&&(u.play(),u.onLoadCacheFinshed&&u.onLoadCacheFinshed(),u.setPerformanceBrokenEnd(),window.clearInterval(e),e=null))},1e3)}}),this._avRecvPackets(),this._decVFrameIntervalFunc()),this.onProbeFinish&&this.onProbeFinish()}_ptsFixed2(e){return Math.ceil(100*e)/100}_naluCallback(e,t,n,i,r,a,o,s){let l=this._ptsFixed2(a);0<s&&(l=a),this.bufObject.appendFrameWithDts(l,o,e,!0,n),this.bufLastVDTS=Math.max(o,this.bufLastVDTS),this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}_samplesCallback(e,t,n,i){}_aacFrameCallback(e,t,n,i){i=this._ptsFixed2(i);this.audioWAudio&&(this.bufObject.appendFrame(i,e,!1,!0),this.bufLastADTS=Math.max(i,this.bufLastADTS),this.aCachePTS=Math.max(i,this.aCachePTS),this.onCacheProcess)&&this.onCacheProcess(this.getCachePTS())}_setLoadCache(){var e;return null===this.avFeedVideoInterval&&null===this.avFeedAudioInterval&&this.playVPipe.length<=0?1:(e=this.isPlaying,this.pause(),this.onLoadCache&&this.onLoadCache(),this.isCacheV=e?p.CACHE_WITH_PLAY_SIGN:p.CACHE_WITH_NOPLAY_SIGN,0)}_setLoadCacheFinished(){this.isCacheV!==p.CACHE_NO_LOADCACHE&&(this.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.isCacheV=p.CACHE_NO_LOADCACHE)}_createDecVframeInterval(e=10){let n=this;null!==this.decVFrameInterval&&(window.clearInterval(this.decVFrameInterval),this.decVFrameInterval=null),this.naluLListLength=0,this.loopMs=e,this.decVFrameInterval=window.setInterval(()=>{var e,t;n._videoQueue.length<1?n._setLoadCache():n._videoQueue.length>=n._VIDEO_CACHE_LEN&&n._setLoadCacheFinished(),n._videoQueue.length<n._VIDEO_CACHE_LEN&&this.naluLListLength<=n._VIDEO_CACHE_LEN&&0<n.playVPipe.length&&(100===n.loopMs&&n._createDecVframeInterval(10),t=(e=n.playVPipe.shift()).data,n.yuvMaxTime=Math.max(e.pts,n.yuvMaxTime),t={t:h.d.DECODE_VIDEO,nalBuf:t,pts:e.pts,flushDecoder:0},this.decoder.postMessage(t))},e)}_decVFrameIntervalFunc(){null==this.decVFrameInterval&&this._createDecVframeInterval(10)}_frameCallback(e,t,n,i,r,a,o,s,l,u){if(this.canvas){if(!1===this.openFrameCall)return-1;if(u!==this.frameCallTag)return-2;if(l>this.yuvMaxTime+this.frameDur)return-3;if(this.isNewSeek&&this.seekTarget-l>3*this.frameDur)return-4;var c=this._videoQueue.length;if(this.canvas.width==i&&this.canvas.height==s||(this.canvas.width=i,this.canvas.height=s,this.isCheckDisplay)||this._checkDisplaySize(o,i,s),this.playPTS>l)return-5;var h=new g(e,t,n,i,r,a,o,s,l);if(c<=0||l>this._videoQueue[c-1].pts)this._videoQueue.push(h);else if(l<this._videoQueue[0].pts)this._videoQueue.splice(0,0,h);else if(l<this._videoQueue[c-1].pts)for(let e=0;e<c;e++)if(l>this._videoQueue[e].pts&&e+1<c&&l<this._videoQueue[e+1].pts){this._videoQueue.splice(e+1,0,h);break}return this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS()),this.config.readyShow&&!0===this.playYUV()&&(this.config.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone(),0}}_handleFrameYUVCallback(e,t,n,i,r,a,o,s,l,u){e=new Uint8Array(e),t=new Uint8Array(t),n=new Uint8Array(n);if(!(!1===this.openFrameCall||u!==this.frameCallTag||l>this.yuvMaxTime+this.frameDur||this.isNewSeek&&this.seekTarget-l>3*this.frameDur)){var c=this._videoQueue.length;if(this.canvas.width==i&&this.canvas.height==s||(this.canvas.width=i,this.canvas.height=s,this.isCheckDisplay)||this._checkDisplaySize(o,i,s),!(this.playPTS>l)){var h=new g(e,t,n,i,r,a,o,s,l);if(c<=0||l>this._videoQueue[c-1].pts)this._videoQueue.push(h);else if(l<this._videoQueue[0].pts)this._videoQueue.splice(0,0,h);else if(l<this._videoQueue[c-1].pts)for(let e=0;e<c;e++)if(l>this._videoQueue[e].pts&&e+1<c&&l<this._videoQueue[e+1].pts){this._videoQueue.splice(e+1,0,h);break}this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS()),this.config.readyShow&&!0===this.playYUV()&&(this.config.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone()}}}playYUV(){var e;return 0<this._videoQueue.length&&(e=this._videoQueue.shift(),this.onRender&&this.onRender(e.line1,e.height,e.data_y,e.data_u,e.data_v),c.renderFrame(this.yuv,e.data_y,e.data_u,e.data_v,e.line1,e.height),!0)}setProbeSize(e){this.probeSize=e}setPerformance(){var e;this.frameRate++,-1==this.performance.firstFrameTime&&(this.performance.firstFrameTime=(new Date).getTime()-this.startPlayTime),this.oneScondTime&&1e3<(new Date).getTime()-this.oneScondTime&&(e=JSON.parse(JSON.stringify(this.frameRate)),this.frameRate=0,this.oneScondTime=(new Date).getTime(),this.performance.frameRate=e,0<this._videoQueue.length&&(this.performance.buffer=this._videoQueue[this._videoQueue.length-1].pts-this._videoQueue[0].pts),this.onPerformance)&&this.onPerformance(this.performance)}setPerformanceBrokenStart(){this.performance.broken.push({start:(new Date).getTime(),end:null,time:null})}setPerformanceBrokenEnd(){var e,t=this.performance.broken[this.performance.broken.length-1];t&&null==t.end&&(e=(new Date).getTime(),t.end=e,t.time=e-t.start)}pushBuffer(e){return this.demuxWorker.postMessage({t:h.b.PUSH_SNIFF_DATA,d:e,probeSize:this.probeSize},[e]),0}}}},function(e,t,n){"use strict";n.r(t);var i=n(118),r=n.n(i),a=n(52),d=n(0),o=n(28),s=n(19),i=n(1),l=n.n(i);n(38),n(30),n(35),n(36);const u=n(37),c=n(12);n(60);const h=n(48),f=n(5),p=n(29);t.default={CHttpLiveCore:class{constructor(e){let t=this;this.config={width:e.width||f.DEFAULT_WIDTH,height:e.height||f.DEFAULT_HEIGHT,fps:e.fps||f.DEFAULT_FPS,sampleRate:e.sampleRate||f.DEFAULT_SAMPLERATE,playerId:e.playerId||f.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},this.mediaInfo={noFPS:!1,fps:f.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=f.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.AVDecodeInterval=null,this.decVFrameInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.isCacheV=f.CACHE_NO_LOADCACHE,this.muted=this.config.autoPlay,!0===this.config.autoPlay&&this.config.ignoreAudio<1&&(window.onclick=document.body.onclick=function(e){t.muted=!1,t._reinitAudioModule(t.mediaInfo.sampleRate),!0===t.isPlayingState()&&(t.pause(),t.play()),window.onclick=document.body.onclick=null}),this.frameTimeSec=1/this.config.fps,this.frameTime=1e3*this.frameTimeSec,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.onPlayState=null,this.decoder=null,this.demuxWorker=null,this.isWasmInit=!1,this.isDemuxWasmInit=!1,this._emitter=new r.a,this.makeWasm(),this.onWasmFinished=null,this.naluLListLength=0,this.time=0,this.resampleFps=0,this.requestAnimationFrameId=null,this.calcuteStartTime=0,this.nowTimestamp=0,this.playFrameCostTime=0,this.performance={frameRate:30,buffer:0,broken:[],bitRate:0,decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0},this.oneScondTime=(new Date).getTime(),this.frameRate=0,this.startPlayTime=0,this.onPerformance=null}makeWasm(){var e=Object(s.getPlayerPath)();this.demuxWorker=new a.a,this.demuxWorker.postMessage({t:d.b.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.demuxWorker.onmessage=e=>{var t=e["data"];switch(t.t){case d.a.WASM_LOAD_FINISH:-1==this.performance.firstFrameTime&&(this.startPlayTime=(new Date).getTime()),this.config.token&&this.demuxWorker.postMessage({t:d.b.INIT_DECODER,data:{token:this.config.token,playerVersion:p.PLAYER_VERSION,ignoreAudio:this.config.ignoreAudio,playModeEnum:this.playModeEnum,defaultFps:this.config.defaultFps,mode:1}});break;case d.a.SNIFF_INIT_FINISH:this.isDemuxWasmInit=!0,this._emitter.emit("isDemuxWasmInit",!0),this.isWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case d.a.POST_PROBEDATA:var{duration:n,width:i,height:r,fps:a,audioIdx:o,sample_rate:s,channels:l,vcodec_name_id:u,sample_fmt:c,trans_to_gcore:h}=t;this._callbackProbe(n,i,r,a,o,s,l,u,c,h);break;case d.a.POST_NALUDATA:var{d:n,len:i,isKey:r,pts:a,dts:o,isRawStream:s}=t;this._callbackNALU(n,i,r,t.width,t.height,a,o,s);break;case d.a.POST_AACDATA:var{line1:l,channel:u}=t;this._callbackAAC(t.d,l,u,t.pts);break;case d.a.POST_FRAMEDATA:this._frameCallback(t.buf_y,t.buf_u,t.buf_v,t.line1,t.line2,t.line3,t.width,t.height,t.pts,t.tag);break;case d.a.POST_NALU_LENGTH:this.naluLListLength=t.l}},this.decoder=new o.a,this.decoder.postMessage({t:d.d.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.decoder.onmessage=e=>{var t,n=e["data"];switch(n.t){case d.c.WASM_LOAD_FINISH:this.config.token&&this.decoder.postMessage({t:d.d.INIT_DECODER,data:{token:this.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:this.videoCodec}});break;case d.c.DECODE_FINISH:3<this.resampleFps?(this.resampleFps=0,t={t:d.d.RETURN_VIDEO_BUFFER,f:n},this.decoder.postMessage(t,[t.f.y.buffer,t.f.u.buffer,t.f.v.buffer])):(this.resampleFps++,this.performance.width||(this.performance.width=n.width,this.performance.height=n.height),this._callbackYUV(n.y,n.u,n.v,n.stride_y,n.stride_u,n.stride_v,n.width,n.height,n.ptsSec,this.frameCallTag));break;case d.c.DEOCDE_INIT_FINISH:this.isWasmInit=!0,this.isDemuxWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case d.c.SET_FRAME:this.performance.decodeFrameRate=n.frameRate}}}_workerFetch_onmessage(e,t){var n=e.data;let i=null;switch(i=void 0===n.cmd||null===n.cmd?"":n.cmd){case"startok":t.getPackageTimeMS=c.GetMsTime(),void 0!==t.AVGetInterval&&null!==t.AVGetInterval||(t.AVGetInterval=window.setInterval(function(){t.demuxWorker.postMessage({t:d.b.GET_BUFFER_LENGTH}),t.naluLListLength>t.config.probeSize?(t.demuxWorker.postMessage({t:d.b.GET_SNIFF_FLV_PACKE}),--t.pushPkg):0<t.getPackageTimeMS&&c.GetMsTime()-t.getPackageTimeMS>=f.FETCH_HTTP_FLV_TIMEOUT_MS&&(t.getPackageTimeMS=c.GetMsTime(),t.workerFetch.postMessage({cmd:"retry",data:null,msg:"retry"}))},5));break;case"fetch-chunk":let e=n.data;t.download_length+=e.length;setTimeout(function(){t.demuxWorker.postMessage({t:d.b.PUSH_SNIFF_FLV_PACKET,d:e,probeSize:t.config.probeSize},[e.buffer])},0),t.totalLen+=e.length,0<e.length&&(t.getPackageTimeMS=c.GetMsTime()),t.pushPkg++;break;case"close":t.AVGetInterval&&clearInterval(t.AVGetInterval),t.AVGetInterval=null;break;case"fetch-fin":break;case"fetch-error":t.onError&&t.onError(n.data)}}_checkDisplaySize(e,t,n){var e=this.config.width+Math.ceil((t-e)/2),i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2),i=i?r:a,r=this.config.fixed,a=r?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i);return this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_reinitAudioModule(e=44100){0<this.config.ignoreAudio||(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=h({sampleRate:e,appendType:f.APPEND_TYPE_FRAME}),this.audioWAudio.isLIVE=!0)}_callbackProbe(e,t,n,i,r,a,o,s,l,u=0){if(1===u)this.onProbeFinish&&this.onProbeFinish(u);else{let e=i;100<i&&(e=f.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=s,this.config.fps=e,this.mediaInfo.fps=e,this.mediaInfo.size.width=t,this.mediaInfo.size.height=n,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+5)),this.chaseFrame=0,this.CanvasObj.width==t&&this.CanvasObj.height==n||(this.CanvasObj.width=t,this.CanvasObj.height=n,this.isCheckDisplay)||this._checkDisplaySize(t,t,n),0<=r&&!1===this.mediaInfo.noFPS?(this.config.sampleRate=a,this.mediaInfo.sampleRate=a,this.config.ignoreAudio<1&&!1===this.muted&&this._reinitAudioModule(this.mediaInfo.sampleRate)):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}}_callbackYUV(e,t,n,i,r,a,o,s,l,u){this.YuvBuf.push({bufY:e,bufU:t,bufV:n,line_y:i,h:s,pts:l}),this.checkCacheState(),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||!0!==this.config.autoPlay||(this.play(),setTimeout(function(){},3e3)))}_callbackNALU(e,t,n,i,r,a,o){if(!1===this.readyKeyFrame){if(n<=0)return;this.readyKeyFrame=!0}this.NaluBuf.push({bufData:e,len:t,isKey:n,w:i,h:r,pts:1e3*a,dts:1e3*o})}_callbackPCM(e){this.config.ignoreAudio}_callbackAAC(e,t,n,i){0<this.config.ignoreAudio||(i=this._ptsFixed2(i),this.audioWAudio&&!1===this.muted&&(this.audioWAudio.addSample({pts:i,data:e}),this.checkCacheState()))}_decode(e=0){let n=this;setTimeout(()=>{var e,t;null!==n.workerFetch&&(null!=(e=n.NaluBuf.shift())&&(t=e.bufData,t={t:d.d.DECODE_VIDEO,nalBuf:t,pts:e.pts,flushDecoder:0},this.decoder.postMessage(t)),n._decode())},1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.muted||0<this.config.ignoreAudio||!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.cache_status=!0),e}setVoice(e){this.config.ignoreAudio<1&&(this.audioWAudio||(this.muted=!1,this._reinitAudioModule(this.mediaInfo.sampleRate)),this.audioVoice=e,this.audioWAudio)&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(u.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.config.ignoreAudio<1&&this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.chaseFrame=0,this.onPlayState&&this.onPlayState(this.isPlayingState())}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),u.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){this.performance.playStyle="flv_live",this.performance.code="hevc";let o=this;if(this.chaseFrame=0,!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout(()=>{this.play()},100),!1;const n=+o.frameTime;if(void 0===this.playInterval||null===this.playInterval){let i=0,r=0,a=0;if(this.config.ignoreAudio<1&&!1===this.mediaInfo.audioNone&&null!=this.audioWAudio&&!1===this.mediaInfo.noFPS)this.playInterval=setInterval(function(){var e,t;r=c.GetMsTime(),o.cache_status?r-i>=o.frameTime-a&&(0<o.YuvBuf[0].pts-1e3*o.audioWAudio.getAlignVPTS()||(null!=(e=o.YuvBuf.shift())&&null!==e&&(t=0,a=null===o.audioWAudio||void 0===o.audioWAudio||(t=1e3*(e.pts-o.audioWAudio.getAlignVPTS()))<0&&-1*t<=n||0<t&&t<=n||0==t||0<t&&t>n?c.GetMsTime()-r+1:(t<0&&n,o.frameTime),o.showScreen&&o.onRender&&o.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),u.renderFrame(o.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),o.setPerformance()),(o.YuvBuf.length<=0||o.audioWAudio&&o.audioWAudio.sampleQueue.length<=0)&&(o.cache_status=!1,o.onLoadCache&&o.onLoadCache(),o.audioWAudio&&o.audioWAudio.pause(),o.setPerformanceBrokenStart()),i=r)):a=o.frameTime},30),this.audioWAudio&&this.audioWAudio.play();else{let n=-1;this.playInterval=setInterval(function(){if(r=c.GetMsTime(),o.cache_status){let e=-1;var t;0<n&&(e=r-i,o.frameTime,a,o.chaseFrame<=0)&&0<a&&(o.chaseFrame=Math.floor(a/o.frameTime)),!(n<=0||e>=o.frameTime||0<o.chaseFrame)||c.GetMsTime()&&c.GetMsTime()<o.YuvBuf[0].pts||(n=1,null!=(t=o.YuvBuf.shift())&&null!==t&&(o.showScreen&&o.onRender&&o.onRender(t.line_y,t.h,t.bufY,t.bufU,t.bufV),u.renderFrame(o.AVGLObj,t.bufY,t.bufU,t.bufV,t.line_y,t.h),o.setPerformance(),a=c.GetMsTime()-r+1),o.YuvBuf.length<=0&&(o.cache_status=!1,o.onLoadCache&&o.onLoadCache(),o.setPerformanceBrokenStart()),i=r,0<o.chaseFrame&&(o.chaseFrame--,0===o.chaseFrame)&&(a=o.frameTime))}else a=o.frameTime,n=-1,o.chaseFrame=0,i=0,r=0,a=0},30)}}this.onPlayState&&this.onPlayState(this.isPlayingState())}isLoad(e){this.isDemuxWasmInit?e():this._emitter.addListener("isDemuxWasmInit",()=>{e()})}start(e){let t=this;this.isLoad(()=>{this.workerFetch=new Worker(c.GetScriptPath(function(){let i=null,r=new AbortController,a=r.signal;self;let o=e=>{fetch(e,{signal:a}).then(function(e){let n=function(t){return t.read().then(function(e){if(!e.done)return e=e.value,self.postMessage({cmd:"fetch-chunk",data:e,msg:"fetch-chunk"}),n(t);self.postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})})};return n(e.body.getReader())}).catch(function(e){e.toString().includes("user aborted")||(e=" httplive request error:"+e+" start to retry",self.postMessage({cmd:"fetch-error",data:e,msg:"fetch-error"}))})};self.onmessage=e=>{var t=e.data;let n=null;switch(n=void 0===t.cmd||null===t.cmd?"":t.cmd){case"start":i=t.data,o(i),self.postMessage({cmd:"startok",data:"WORKER STARTED",msg:"startok"});break;case"stop":r.abort(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"});break;case"retry":r.abort(),r=null,a=null,r=new AbortController,a=r.signal,setTimeout(function(){o(i)},3e3)}}})),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this.AVGLObj=u.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),this._decode()})}setPerformance(){var e;this.frameRate++,-1==this.performance.firstFrameTime&&(this.performance.firstFrameTime=(new Date).getTime()-this.startPlayTime),this.oneScondTime&&1e3<(new Date).getTime()-this.oneScondTime&&(e=JSON.parse(JSON.stringify(this.frameRate)),this.frameRate=0,this.oneScondTime=(new Date).getTime(),this.performance.frameRate=e,0<this.YuvBuf.length&&(this.performance.buffer=(this.YuvBuf[this.YuvBuf.length-1].pts-this.YuvBuf[0].pts)/100),this.onPerformance)&&this.onPerformance(this.performance)}setPerformanceBrokenStart(){this.performance.broken.push({start:(new Date).getTime(),end:null,time:null})}setPerformanceBrokenEnd(){var e,t=this.performance.broken[this.performance.broken.length-1];t&&null==t.end&&(e=(new Date).getTime(),t.end=e,t.time=e-t.start)}}}},function(e,t,n){n(38),n(30),n(35),n(36);const s=n(37),l=n(12);n(60),n(48);const i=n(162),f=n(5);n(29);t.CHttpG711Core=class{constructor(e){let t=this;this.config={width:e.width||f.DEFAULT_WIDTH,height:e.height||f.DEFAULT_HEIGHT,fps:e.fps||f.DEFAULT_FPS,sampleRate:e.sampleRate||f.DEFAULT_SAMPLERATE,playerId:e.playerId||f.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},alert("this.config.probeSize"+this.config.probeSize+" ignoreAudio:"+this.config.ignoreAudio),this.mediaInfo={noFPS:!1,fps:f.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=f.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.muted=this.config.autoPlay,!0===this.config.autoPlay&&this.config.ignoreAudio<1&&(window.onclick=document.body.onclick=function(e){t.muted=!1,t._reinitAudioModule(t.mediaInfo.sampleRate),!0===t.isPlayingState()&&(t.pause(),t.play()),window.onclick=document.body.onclick=null}),this.frameTime=1e3/this.config.fps,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.onPlayState=null,this.corePtr=Module.cwrap("AVSniffHttpG711Init","number",["string","string"])(this.config.token,"0.0.0")}_workerFetch_onmessage(e,i){var r=e.data;let a=null;switch(a=void 0===r.cmd||null===r.cmd?"":r.cmd){case"startok":alert("startok"),i.getPackageTimeMS=l.GetMsTime(),void 0!==i.AVGetInterval&&null!==i.AVGetInterval||(i.AVGetInterval=window.setInterval(function(){Module.cwrap("getG711BufferLengthApi","number",["number"])(i.corePtr)<=i.config.probeSize&&0<i.getPackageTimeMS&&l.GetMsTime()-i.getPackageTimeMS>=f.FETCH_HTTP_FLV_TIMEOUT_MS&&(i.getPackageTimeMS=l.GetMsTime(),i.workerFetch.postMessage({cmd:"retry",data:null,msg:"retry"}))},5));break;case"fetch-chunk":let t=r.data,n=void(i.download_length+=t.length);setTimeout(function(){var e=Module._malloc(t.length);Module.HEAP8.set(t,e),n=Module.cwrap("pushSniffG711FlvData","number",["number","number","number","number"])(i.corePtr,e,t.length,i.config.probeSize),Module._free(e)},0),i.totalLen+=t.length,0<t.length&&(i.getPackageTimeMS=l.GetMsTime()),i.pushPkg++;break;case"close":i.AVGetInterval&&clearInterval(i.AVGetInterval),i.AVGetInterval=null;case"fetch-fin":break;case"fetch-error":i.onError&&i.onError(r.data)}}_checkDisplaySize(e,t,n){var e=this.config.width+Math.ceil((t-e)/2),i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2),i=i?r:a,r=this.config.fixed,a=r?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i);return this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_reinitAudioModule(e=0){void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=i()}_callbackProbe(e,t,n,i,r,a,o,s,l){var u=Module.HEAPU8.subarray(l,l+10);let c="";for(let e=0;e<u.length;e++){var h=String.fromCharCode(u[e]);c+=h}let d=i;100<i&&(d=f.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=s,this.config.fps=d,this.mediaInfo.fps=d,this.mediaInfo.size.width=t,this.mediaInfo.size.height=n,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+2)),this.CanvasObj.width==t&&this.CanvasObj.height==n||(this.CanvasObj.width=t,this.CanvasObj.height=n,this.isCheckDisplay)||this._checkDisplaySize(t,t,n),0<=r&&!1===this.mediaInfo.noFPS?(this.config.sampleRate=a,this.mediaInfo.sampleRate=a,!1===this.muted&&this._reinitAudioModule(this.mediaInfo.sampleRate)):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}_callbackYUV(e,t,n,i,r,a,o,s,l,u){var e=Module.HEAPU8.subarray(e,e+i*s),c=new Uint8Array(e),t=Module.HEAPU8.subarray(t,t+r*s/2),r=new Uint8Array(t),n=Module.HEAPU8.subarray(n,n+a*s/2),a=new Uint8Array(n);this.YuvBuf.push({bufY:c,bufU:r,bufV:a,line_y:i,h:s,pts:l}),this.checkCacheState(),Module._free(e),Module._free(t),Module._free(n),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||!0!==this.config.autoPlay||(this.play(),setTimeout(function(){},3e3)))}_callbackNALU(e,t,n,i,r,a,o){if(!1===this.readyKeyFrame){if(n<=0)return;this.readyKeyFrame=!0}var e=Module.HEAPU8.subarray(e,e+t),s=new Uint8Array(e);this.NaluBuf.push({bufData:s,len:t,isKey:n,w:i,h:r,pts:1e3*a,dts:1e3*o}),Module._free(e)}_callbackPCM(e,t,n,i){e=Module.HEAPU8.subarray(e,e+t),t=new Uint8Array(e).buffer,e=this._ptsFixed2(n);let r=null;n=t.byteLength%4,n={pts:e,data:r=0!=n?((e=new Uint8Array(t.byteLength+n)).set(new Uint8Array(t),0),new Float32Array(e.buffer)):new Float32Array(t)};this.audioWAudio.addSample(n),this.checkCacheState()}_decode(){let e=this;setTimeout(()=>{null!==e.workerFetch&&(Module.cwrap("decodeG711Frame","number",["number"])(e.corePtr),e._decode())},1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.cache_status=!0),e}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),void 0!==this.corePtr&&null!==this.corePtr&&Module.cwrap("releaseG711","number",["number"])(this.corePtr),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(s.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.onPlayState&&this.onPlayState(this.isPlayingState())}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),s.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){let a=this;if(!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout(()=>{a.play()},100),!1;const o=+a.frameTime;if(void 0===this.playInterval||null===this.playInterval){let n=0,i,r=0;!1===this.mediaInfo.audioNone&&this.audioWAudio&&!1===this.mediaInfo.noFPS?(this.playInterval=setInterval(function(){var e,t;i=l.GetMsTime(),a.cache_status?i-n>=a.frameTime-r&&(null!=(e=a.YuvBuf.shift())&&null!==e&&(t=0,r=null===a.audioWAudio||void 0===a.audioWAudio||(t=1e3*(e.pts-a.audioWAudio.getAlignVPTS()))<0&&-1*t<=o||0<t&&t<=o||0==t||0<t&&t>o?l.GetMsTime()-i+1:(t<0&&o,a.frameTime),a.showScreen&&a.onRender&&a.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),s.renderFrame(a.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h)),a.YuvBuf.length<=0&&(a.cache_status=!1,a.onLoadCache&&a.onLoadCache(),a.audioWAudio)&&a.audioWAudio.pause(),n=i):r=a.frameTime},1),this.audioWAudio&&this.audioWAudio.play()):this.playInterval=setInterval(function(){var e=a.YuvBuf.shift();null!=e&&null!==e&&(a.showScreen&&a.onRender&&a.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),s.renderFrame(a.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h)),a.YuvBuf.length<=0&&(a.cache_status=!1)},a.frameTime)}this.onPlayState&&this.onPlayState(this.isPlayingState())}start(e){let t=this;this.workerFetch=new Worker(l.GetScriptPath(function(){let i=null,r=new AbortController,a=r.signal;self;let o=e=>{fetch(e,{signal:a}).then(function(e){let n=function(t){return t.read().then(function(e){if(!e.done)return e=e.value,self.postMessage({cmd:"fetch-chunk",data:e,msg:"fetch-chunk"}),n(t);self.postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})})};return n(e.body.getReader())}).catch(function(e){e.toString().includes("user aborted")||(e=" httplive request error:"+e+" start to retry",self.postMessage({cmd:"fetch-error",data:e,msg:"fetch-error"}))})};self.onmessage=e=>{var t=e.data;let n=null;switch(n=void 0===t.cmd||null===t.cmd?"":t.cmd){case"start":i=t.data,o(i),self.postMessage({cmd:"startok",data:"WORKER STARTED",msg:"startok"});break;case"stop":r.abort(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"});break;case"retry":r.abort(),r=null,a=null,r=new AbortController,a=r.signal,setTimeout(function(){o(i)},3e3)}}})),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this._ptr_probeCallback=Module.addFunction(this._callbackProbe.bind(this),"vdiidiiiiii"),this._ptr_yuvCallback=Module.addFunction(this._callbackYUV.bind(this),"vi"),this._ptr_sampleCallback=Module.addFunction(this._callbackPCM.bind(this),"vi");Module.cwrap("initializeSniffG711Module","number",["number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_yuvCallback,this._ptr_sampleCallback,0,1);this.AVGLObj=s.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),0===f.H265WEBJS_COMPILE_MULTI_THREAD_SHAREDBUFFER&&this._decode()}}},function(e,t,n){const i=window.AudioContext||window.webkitAudioContext,o=n(5),r=n(12);e.exports=()=>{let a={options:{sampleRate:o.DEFAULT_SAMPLERATE,appendType:o.APPEND_TYPE_FRAME,playMode:o.AUDIO_MODE_SWAP},sourceChannel:-1,audioCtx:new i({latencyHint:"interactive",sampleRate:o.DEFAULT_SAMPLERATE}),gainNode:null,sourceList:[],startStatus:!1,sampleQueue:[],nextBuffer:null,playTimestamp:0,playStartTime:0,durationMs:-1,isLIVE:!1,voice:1,onLoadCache:null,resetStartParam:()=>{a.playTimestamp=0,a.playStartTime=0},setOnLoadCache:e=>{a.onLoadCache=e},setDurationMs:(e=-1)=>{a.durationMs=e},setVoice:(e=1)=>{a.voice=e,a.gainNode.gain.value=e},getAlignVPTS:()=>a.playTimestamp+(r.GetMsTime()-a.playStartTime)/1e3,swapSource:(e=-1,t=-1)=>{if(0==a.startStatus)return null;if(e<0||e>=a.sourceList.length)return null;if(t<0||t>=a.sourceList.length)return null;try{a.sourceChannel===e&&null!==a.sourceList[e]&&(a.sourceList[e].disconnect(a.gainNode),a.sourceList[e]=null)}catch(e){}a.sourceChannel=t;t=a.decodeSample(t,e);-2==t&&a.isLIVE&&(a.getAlignVPTS()>=a.durationMs/1e3-.04?a.pause():null!==a.onLoadCache&&a.onLoadCache())},addSample:(e=null)=>!(null==e||!e||null==e||(0==a.sampleQueue.length&&(a.seekPos=e.pts),a.sampleQueue.push(e),0)),runNextBuffer:()=>{window.setInterval(()=>{if(!(null!=a.nextBuffer||a.sampleQueue.length<o.DEFAULT_CONSU_SAMPLE_LEN)){var t;a.nextBuffer={data:null,pts:-1};for(let e=0;e<o.DEFAULT_CONSU_SAMPLE_LEN;e++){t=a.sampleQueue.shift();let e=null;if(e=a.options.appendType==o.APPEND_TYPE_STREAM?t:t.data,a.nextBuffer.pts<0&&(a.nextBuffer.pts=t.pts),null==a.nextBuffer.data?a.nextBuffer.data=new Float32Array(e):((t=new Float32Array(e.length+a.nextBuffer.data.length)).set(a.nextBuffer.data,0),t.set(e,a.nextBuffer.data.length),a.nextBuffer.data=t),a.sampleQueue.length<=0)break;0}a.nextBuffer.data.length}},10)},decodeSample:(e=-1,t=-1)=>{if(e<0||e>=a.sourceList.length)return-1;if(null!=a.sourceList[e]&&null!=a.sourceList[e]&&a.sourceList[e]||(a.sourceList[e]=a.audioCtx.createBufferSource(),a.sourceList[e].onended=function(){a.swapSource(e,t)}),0==a.sampleQueue.length)return a.isLIVE?(a.sourceList[e].connect(a.gainNode),a.sourceList[e].start(),a.sourceList[e].onended=function(){a.swapSource(e,t)},a.sourceList[e].stop(),0):-2;if(a.sourceList[e].buffer)a.swapSource(e,t);else{if(null==a.nextBuffer||a.nextBuffer.data.length<1)return a.sourceList[e].connect(a.gainNode),a.sourceList[e].start(),a.sourceList[e].startState=!0,a.sourceList[e].stop(),1;var n=a.nextBuffer.data;a.playTimestamp=a.nextBuffer.pts,a.playStartTime=r.GetMsTime();try{var i=a.audioCtx.createBuffer(1,n.length,a.options.sampleRate);i.copyToChannel(n,0),null!==a.sourceList[e]&&(a.sourceList[e].buffer=i,a.sourceList[e].connect(a.gainNode),a.sourceList[e].start(),a.sourceList[e].startState=!0)}catch(e){return a.nextBuffer=null,-3}a.nextBuffer=null}return 0},decodeWholeSamples:(e=-1)=>{if((a.sourceChannel=e)<0||e>=a.sourceList.length)return-1;if(null!=a.sourceList[e]&&null!=a.sourceList[e]&&a.sourceList[e]||(a.sourceList[e]=a.audioCtx.createBufferSource(),a.sourceList[e].onended=function(){}),0==a.sampleQueue.length)return-2;let t=null;var n;for(let e=0;e<a.sampleQueue.length;e++){n=a.sampleQueue.shift();let e=null;if(e=a.options.appendType==o.APPEND_TYPE_STREAM?n:n.data,t=null==t?new Uint8Array(e):((n=new Uint8Array(e.length+t.length)).set(t,0),n.set(e,t.length),n),a.sampleQueue.length<=0)break;0}var i=t;if(null==i||i.length<1)return a.sourceList[e].connect(a.gainNode),a.sourceList[e].start(),a.sourceList[e].stop(),1;i=i.buffer;try{var r=a.audioCtx.createBuffer(1,i.byteLength,a.options.sampleRate);r.copyToChannel(i,0),a.sourceList[e].buffer=r,a.sourceList[e].connect(a.gainNode),a.sourceList[e].start(),a.sourceList[e].startState=!0}catch(e){return alert("Crash[brower]! Please refresh your page"),-3}return 0},play:()=>{if(0==a.startStatus){a.startStatus=!0;let e=0;-2==(e=a.options.playMode==o.AUDIO_MODE_ONCE?a.decodeWholeSamples(0):a.swapSource(0,1))&&a.pause()}},pause:()=>{a.startStatus=!1;for(let e=0;e<a.sourceList.length;e++)if(void 0!==a.sourceList[e]&&null!==a.sourceList[e])try{void 0!==a.sourceList[e].buffer&&null!==a.sourceList[e].buffer&&(a.sourceList[e].stop(),a.sourceList[e].disconnect(a.gainNode)),a.sourceList[e]=null}catch(e){}},stop:()=>{a.pause(),a.cleanQueue(),a.nextBuffer=null,a.sourceChannel=-1},cleanQueue:()=>{for(let e=a.sampleQueue.length=0;e<a.sourceList.length;e++)try{void 0!==a.sourceList[e].buffer&&null!==a.sourceList[e].buffer&&(a.sourceList[e].stop(),a.sourceList[e].disconnect(a.gainNode)),a.sourceList[e]=null}catch(e){}}};return a.sourceList.push(a.audioCtx.createBufferSource()),a.sourceList.push(a.audioCtx.createBufferSource()),a.sourceList[0].onended=function(){a.swapSource(0,1)},a.sourceList[1].onended=function(){a.swapSource(1,0)},a.gainNode=a.audioCtx.createGain(),a.gainNode.gain.value=a.voice,a.gainNode.connect(a.audioCtx.destination),a.runNextBuffer(),a}},function(e,t,n){n(38),n(30),n(35),n(36);const a=n(37),o=n(12);n(60);const f=n(48),p=n(5);n(29);t.CWsLiveCore=class{constructor(e){this.config={width:e.width||p.DEFAULT_WIDTH,height:e.height||p.DEFAULT_HEIGHT,fps:e.fps||p.DEFAULT_FPS,sampleRate:e.sampleRate||p.DEFAULT_SAMPLERATE,playerId:e.playerId||p.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},alert("this.config.probeSize"+this.config.probeSize+" ignoreAudio:"+this.config.ignoreAudio),this.mediaInfo={noFPS:!1,fps:p.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=p.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.frameTime=1e3/this.config.fps,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null;this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null;this.corePtr=Module.cwrap("AVSniffHttpFlvInit","number",["string","string"])("base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1","0.0.0")}_workerFetch_onmessage(e,i){var r=e.data;let a=null;switch(a=void 0===r.cmd||null===r.cmd?"":r.cmd){case"fetch-chunk":let t=r.data,n=void(i.download_length+=t.length);setTimeout(function(){var e=Module._malloc(t.length);Module.HEAP8.set(t,e),n=Module.cwrap("pushSniffHttpFlvData","number",["number","number","number","number"])(i.corePtr,e,t.length,i.config.probeSize),Module._free(e)},0),i.totalLen+=t.length,0<t.length&&(i.getPackageTimeMS=o.GetMsTime()),i.pushPkg++,void 0!==i.AVGetInterval&&null!==i.AVGetInterval||(i.AVGetInterval=window.setInterval(function(){Module.cwrap("getBufferLengthApi","number",["number"])(i.corePtr)>i.config.probeSize&&(Module.cwrap("getSniffHttpFlvPkg","number",["number"])(i.corePtr),--i.pushPkg)},5));break;case"close":i.AVGetInterval&&clearInterval(i.AVGetInterval),i.AVGetInterval=null;case"fetch-fin":break;case"fetch-error":i.onError&&i.onError(r.data)}}_checkDisplaySize(e,t,n){var e=this.config.width+Math.ceil((t-e)/2),i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2),i=i?r:a,r=this.config.fixed,a=r?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i);return this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_callbackProbe(e,t,n,i,r,a,o,s,l){var u=Module.HEAPU8.subarray(l,l+10);let c="";for(let e=0;e<u.length;e++){var h=String.fromCharCode(u[e]);c+=h}let d=i;100<i&&(d=p.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=s,this.config.fps=d,this.mediaInfo.fps=d,this.mediaInfo.size.width=t,this.mediaInfo.size.height=n,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+2)),this.CanvasObj.width==t&&this.CanvasObj.height==n||(this.CanvasObj.width=t,this.CanvasObj.height=n,this.isCheckDisplay)||this._checkDisplaySize(t,t,n),0<=r&&!1===this.mediaInfo.noFPS&&this.config.ignoreAudio<1?(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.config.sampleRate=a,this.mediaInfo.sampleRate=a,this.audioWAudio=f({sampleRate:this.mediaInfo.sampleRate,appendType:p.APPEND_TYPE_FRAME}),this.audioWAudio.isLIVE=!0):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}_callbackYUV(e,t,n,i,r,a,o,s,l){var e=Module.HEAPU8.subarray(e,e+i*s),u=new Uint8Array(e),t=Module.HEAPU8.subarray(t,t+r*s/2),r=new Uint8Array(t),n=Module.HEAPU8.subarray(n,n+a*s/2),a=new Uint8Array(n);this.YuvBuf.push({bufY:u,bufU:r,bufV:a,line_y:i,h:s,pts:l}),this.checkCacheState(),Module._free(e),Module._free(t),Module._free(n),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||this.play())}_callbackNALU(e,t,n,i,r,a,o){if(!1===this.readyKeyFrame){if(n<=0)return;this.readyKeyFrame=!0}var e=Module.HEAPU8.subarray(e,e+t),s=new Uint8Array(e);this.NaluBuf.push({bufData:s,len:t,isKey:n,w:i,h:r,pts:1e3*a,dts:1e3*o}),Module._free(e)}_callbackPCM(e){}_callbackAAC(e,t,n,i){i=this._ptsFixed2(i);this.audioWAudio&&(e=Module.HEAPU8.subarray(e,e+t),t=new Uint8Array(e),this.audioWAudio.addSample({pts:i,data:t}),this.checkCacheState())}_decode(){let n=this;setTimeout(()=>{var e,t;null!==n.workerFetch&&(null!=(e=n.NaluBuf.shift())&&(t=Module._malloc(e.bufData.length),Module.HEAP8.set(e.bufData,t),Module.cwrap("decodeHttpFlvVideoFrame","number",["number","number","number","number","number"])(n.corePtr,t,e.bufData.length,e.pts,e.dts,0),Module._free(t),t=null),n._decode())},1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.cache_status=!0),e}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),void 0!==this.corePtr&&null!==this.corePtr&&Module.cwrap("releaseHttpFLV","number",["number"])(this.corePtr),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(a.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),a.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){let r=this;if(!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout(()=>{this.play()},100),!1;if(void 0===this.playInterval||null===this.playInterval){let e=0,n,i=0;!1===this.mediaInfo.audioNone&&this.audioWAudio&&!1===this.mediaInfo.noFPS?(this.playInterval=setInterval(function(){if(n=o.GetMsTime(),r.cache_status){if(n-e>=r.frameTime-i){var t=r.YuvBuf.shift();if(null!=t&&null!==t){let e=0;null!==r.audioWAudio&&void 0!==r.audioWAudio&&(e=1e3*(t.pts-r.audioWAudio.getAlignVPTS())),i=!r.audioWAudio||e<0&&-1*e<=r.frameTime||0<=e?o.GetMsTime()-n+1:r.frameTime,r.showScreen&&r.onRender&&r.onRender(t.line_y,t.h,t.bufY,t.bufU,t.bufV),a.renderFrame(r.AVGLObj,t.bufY,t.bufU,t.bufV,t.line_y,t.h)}(r.YuvBuf.length<=0||r.audioWAudio&&r.audioWAudio.sampleQueue.length<=0)&&(r.cache_status=!1,r.onLoadCache&&r.onLoadCache(),r.audioWAudio)&&r.audioWAudio.pause(),e=n}}else i=r.frameTime},1),this.audioWAudio&&this.audioWAudio.play()):this.playInterval=setInterval(function(){var e=r.YuvBuf.shift();null!=e&&null!==e&&(r.showScreen&&r.onRender&&r.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),a.renderFrame(r.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h)),r.YuvBuf.length<=0&&(r.cache_status=!1)},r.frameTime)}}start(e){let t=this;this.workerFetch=new Worker(o.GetScriptPath(function(){var r=null;self;self.onmessage=e=>{var t=e.data;let n=null;switch(n=void 0===t.cmd||null===t.cmd?"":t.cmd){case"start":var i=t.data;(r=new WebSocket(i)).binaryType="arraybuffer",r.onopen=function(e){r.send("Hello WebSockets!")},r.onmessage=function(e){e.data instanceof ArrayBuffer&&0<(e=e.data).byteLength&&postMessage({cmd:"fetch-chunk",data:new Uint8Array(e),msg:"fetch-chunk"})},r.onclose=function(e){};break;case"stop":r&&r.close(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"})}}})),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this._ptr_probeCallback=Module.addFunction(this._callbackProbe.bind(this),"vdiidiiiiii"),this._ptr_yuvCallback=Module.addFunction(this._callbackYUV.bind(this),"vi"),this._ptr_naluCallback=Module.addFunction(this._callbackNALU.bind(this),"vi"),this._ptr_sampleCallback=Module.addFunction(this._callbackPCM.bind(this),"vi"),this._ptr_aacCallback=Module.addFunction(this._callbackAAC.bind(this),"vi");Module.cwrap("initializeSniffHttpFlvModule","number",["number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_yuvCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback);this.AVGLObj=a.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),this._decode()}}},function(e,t,n){"use strict";n.r(t),n.d(t,"NvHLSjsCore",function(){return i});var o=n(4),s=n(23);const l=n(5),u=n(165),r=n(59);var i=class{constructor(e,t){this.configFormat={probeDurationMS:e.probeDurationMS,width:e.width||l.DEFAULT_WIDTH,height:e.height||l.DEFAULT_HEIGHT,playerId:e.playerId||l.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,danmaku:e.danmaku,authToken:e.authToken,openToken:e.openToken,maxBufferLength:e.maxBufferLength,startPosition:e.startPosition},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-vjs",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.vCodecID=l.V_CODEC_NAME_AVC,this.audioNone=!1,this.metadata={},this.showScreen=!1,this.playPTS=0,this.loadSuccess=!1,this.bufferInterval=null,this.bootInterval=null,this.qualityList=[],this.manualLevel=-1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onCacheProcess=null,this.onQualityLevels=null,this.onError=null,this.onLevelUpdates=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.bufferCodecsInfo=null,this.headers=e.headers,this.timeShift=e.timeShift,this.timeShiftData=this.timeShift&&this.timeShift.liveStartTime?Date.now()/1e3-this.timeShift.liveStartTime:null,this.liveStartTime=this.timeShiftData,this.url=t,this.onLiveShift=null,this.isPause=!1,this.videoCodec=l.CODEC_H264,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}makeIt(n){let r=this;this.configFormat.width,this.configFormat.height,this.configFormat.autoPlay;var e,t,i=document.querySelector("#"+this.configFormat.playerId),a=document.createElement("video");a.id=this.myPlayerID,this.videoTag=a,u.isSupported()?(this.configFormat.repeatPlay&&a.setAttribute("loop","loop"),this.VRPlugin?this.VrPlayer=new s.a({video:this.videoTag,container:i,autoPlay:this.configFormat.autoPlay},this.VRPlugin):i.insertBefore(a,i.firstChild),!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",window.onclick=document.body.onclick=function(e){r.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.onplay=function(){var e=r.isPlayingState();r.onPlayState&&r.onPlayState(e)},this.videoTag.onpause=function(){var e=r.isPlayingState();r.onPlayState&&r.onPlayState(e)},this.videoTag.ontimeupdate=()=>{r.onPlayingTime&&r.onPlayingTime(r.videoTag.currentTime)},this.videoTag.onended=()=>{r.onPlayingFinish&&r.onPlayingFinish()},this.videoTag.onseeked=function(){r.onSeekFinish&&r.onSeekFinish(r.seekResult)},i=this.configFormat.maxBufferLength,t={},t=this.configFormat.authToken&&this.configFormat.authToken[n]||this.configFormat.openToken?(e=this.configFormat.authToken[n],i?{token:e,maxBufferLength:i}:{token:e}):i?{maxBufferLength:i}:{},this.headers&&(t=Object.assign({},t,{xhrSetup:e=>{for(var t in this.headers)e.setRequestHeader(t,this.headers[t])}})),null!=this.configFormat.startPosition&&Object.assign(t,{startPosition:this.configFormat.startPosition}),r.myPlayer=new u(Object.assign(t)),r.myPlayer.attachMedia(a),r.myPlayer.on(u.Events.MEDIA_ATTACHED,function(e,t){r.myPlayer.loadSource(n)}),r.myPlayer.on(u.Events.LEVEL_LOADED,function(e,t){0<r.timeShiftData?r.duration=r.timeShiftData:r.duration=t.details.totalduration}),r.myPlayer.on(u.Events.LEVEL_UPDATED,function(e){r.onLevelUpdates(r.getCurrentLevel())}),r.myPlayer.on(u.Events.BUFFER_APPENDING,function(e,t){}),r.myPlayer.on(u.Events.BUFFER_CODECS,function(e,t){r.bufferCodecsInfo=t,r.metadata=t.video?t.video.metadata:{width:1,height:1},t.vide&&t.video.codec&&-1<t.video.codec.indexOf("hvc1")&&(r.vCodecID=l.V_CODEC_NAME_HEVC,r.videoCodec=l.CODEC_H265),r.VrPlayer&&r.VrPlayer.loadVideo&&r.VrPlayer.loadVideo();t=document.querySelector("#"+r.configFormat.playerId);t.getElementsByTagName("video")[0]||t.getElementsByTagName("div"),!0!==r.loadSuccess&&(r.onLoadFinish&&r.onLoadFinish(),r.onReadyShowDone&&r.onReadyShowDone(),r.loadSuccess=!0)}),r.myPlayer.on(u.Events.MANIFEST_PARSED,function(e,t){var n=t["levels"];if(r.qualityList=[],1<n.length){t={id:-1,label:"自动",index:0,selected:-1===r.manualLevel};r.qualityList.push(t);for(let e=0;e<n.length;e++){var i=n[e],i={id:e,label:i.height+"P",index:e+1,selected:e===r.manualLevel,with:i.width,height:i.height,bitrate:i.bitrate};r.qualityList.push(i)}r.onQualityLevels&&r.onQualityLevels(r.qualityList)}}),r.myPlayer.on(u.Events.ERROR,(e,t)=>{if(t.fatal)switch(t.type){case u.ErrorTypes.NETWORK_ERROR:r.onError({msg:t.response,event:t.details,url:t.url,type:t.type});break;case u.ErrorTypes.MEDIA_ERROR:case u.ErrorTypes.MUX_ERROR:r.onError({msg:t,url:t.url,type:t.type});break;default:u.ErrorTypes.OTHER_ERROR;r.onError({msg:t,url:t.url,type:o.ErrorTypes.OTHER})}else r.onError({msg:t,url:t.url,type:o.ErrorTypes.OTHER})}),r.onMakeItReady&&r.onMakeItReady()):(e=this.videoTag.canPlayType("application/vnd.apple.mpegurl"),this.release(),r.onError({url:n,msg:o.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:o.ErrorTypes.NOT_SUPPORT,isAppleMpegurl:e}))}_refreshVideoTagEvent(){this.videoTag=document.getElementById(this.myPlayerID).querySelector("video")}setPlaybackRate(e=1){return!(e<=0||void 0===this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return void 0===this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:this.videoTag.videoWidth||this.metadata.width,height:this.videoTag.videoHeight||this.metadata.height}}play(){let n=this;n.isPause&&0<n.timeShiftData&&n.shiftRequestUrl?(n.isPause=!1,this.seekTimeShift(n.liveStartTime,n.shiftRequestUrl)):(n.videoTag.play(),n.isPause=!1,n.videoTag.ontimeupdate=function(){var e,t;n.videoTag&&0!=n.videoTag.buffered.length&&((e=n.videoTag.buffered.end(n.videoTag.buffered.length-1))>=n.duration-.04?n.onCacheProcess&&n.onCacheProcess(n.duration):n.onCacheProcess&&n.onCacheProcess(e),t=n.videoTag.currentTime>n.duration?n.duration:n.videoTag.currentTime,0<n.timeShiftData&&(n.duration=n.videoTag.currentTime+n.timeShiftData,t=n.liveStartTime+n.videoTag.currentTime),n.onPlayingTime(t,null,n.duration),n.seekReadyPts&&e>n.seekReadyPts&&(t=n.seek(n.seekReadyPts),n.seekResult=t,n.seekReadyPts=null),n.getFrameRate())})}seek(e){var t,n;if(!(0<this.timeShiftData))return this.videoTag.currentTime=e,-1!=(n=(t=this.videoTag.buffered).length-1)&&t.end(n)<e?(this.seekReadyPts=e,!1):this.seekResult=!0;this.seekTimeShift(e)}pause(){0<this.timeShiftData&&(this.isPause=!0,this.myPlayer.stopLoad()),this.videoTag&&this.videoTag.pause()}setVoice(e){this.videoTag.volume=e}isPlayingState(){return!this.videoTag.paused}changeHlsQuality(t){var e=this.qualityList.find(e=>e.index===t);e&&this.manualLevel!==e.id&&(this.manualLevel=e.id,this.myPlayer.nextLevel=e.id)}getCurrentLevel(){if(0==this.qualityList.length)return!1;const t=this.myPlayer&&this.myPlayer.loadLevel;return this.qualityList.find(e=>t==e.id)}getMediaInfo(){var e,t;if(this.myPlayer)return{videoPts:e,audioPts:t}=this.getPts(),{video:{width:this.getSize().width,height:this.getSize().height,codec:this.bufferCodecsInfo&&this.bufferCodecsInfo.video&&this.bufferCodecsInfo.video.codec,frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"hls_live":"hls_vod",demuxStyle:"hls",bitRate:this.myPlayer.bandwidthEstimate/1024/8,videoPts:e},audio:{bitRate:this.myPlayer.bandwidthEstimate,sampleRate:this.bufferCodecsInfo&&this.bufferCodecsInfo.audio&&this.bufferCodecsInfo.audio.metadata.samplerate,codec:this.bufferCodecsInfo&&this.bufferCodecsInfo.audio&&this.bufferCodecsInfo.audio.metadata.segmentCodec,audioPts:t}}}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getPts(){var e=this.myPlayer&&this.myPlayer.abrController.fragCurrent,e=e&&e.endPTS;return{audioPts:e,videoPts:e}}seekTimeShift(e,t){this.onLiveShift&&this.onLiveShift();var n=parseInt(Date.now()/1e3-(this.duration-e)),i=parseInt(Date.now()/1e3),n=r.getUrlParams(this.url)?this.url+`&starttime=${n}&requesttime=`+i:this.url+`?starttime=${n}&requesttime=`+i,n=t||(!1===e?this.url:n);this.timeShiftDestroy(),this.makeIt(n),this.shiftRequestUrl=n,this.play(),this.liveStartTime=0==e?this.duration:e,this.timeShiftData=this.duration}timeShiftDestroy(){this.loadSuccess=!1,this.myPlayer.destroy(),document.querySelector("#"+this.configFormat.playerId).removeChild(this.videoTag),this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.qualityList=[]}gobackLive(){this.seekTimeShift(!1)}release(){this.loadSuccess=!1,this.VrPlayer&&this.VrPlayer.destroy(),void 0!==this.bootInterval&&null!==this.bootInterval&&(window.clearInterval(this.bootInterval),this.bootInterval=null),this.myPlayer&&this.myPlayer.destroy(),this.myPlayerID=null,this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.qualityList=[],this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,(this.onQualityLevels=null)!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),window.onclick=document.body.onclick=null}}},function(e,t,n){!function Ws(Ks){e.exports=function(){"use strict";function C(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function m(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach(function(e){var t=i,n=r[e];(e=N(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,N(i.key),i)}}function r(e,t,n){t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function $(){return($=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function e(e,t){e.prototype=Object.create(t.prototype),D(e.prototype.constructor=e,t)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return(k=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){}}}()?Reflect.construct.bind():function(e,t,n){var i=[null],t=(i.push.apply(i,t),new(Function.bind.apply(e,i)));return n&&D(t,n.prototype),t}).apply(null,arguments)}function O(e){var n="function"==typeof Map?new Map:void 0;return(O=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return k(e,arguments,P(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),D(t,e)})(e)}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function x(e,t){var n,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e){var t;if(e)return"string"==typeof e?M(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}function F(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}B=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,U=/^(?=([^\/?#]*))\1([^]*)$/,j=/(?:\/|^)\.(?=\/)/g,H=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Y={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=Y.parseURL(e);if(i)return i.path=Y.normalizePath(i.path),Y.buildURLFromParts(i);throw new Error("Error trying to parse base URL.")}i=Y.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=Y.normalizePath(i.path),Y.buildURLFromParts(i)):t;t=Y.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=U.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/");var r,e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(e.netLoc=t.netLoc,"/"===i.path[0])||(i.path?(r=(r=t.path).substring(0,r.lastIndexOf("/")+1)+i.path,e.path=Y.normalizePath(r)):(e.path=t.path,i.params||(e.params=t.params,i.query)||(e.query=t.query))),null===e.path&&(e.path=n.alwaysNormalize?Y.normalizePath(i.path):i.path),Y.buildURLFromParts(e)},parseURL:function(e){e=B.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(j,"");e.length!==(e=e.replace(H,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};var B,U,j,H,Y,z=Y,G=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},ee=((t={}).MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t),te=((t={}).NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t),ne=((t={}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t),W=function(){},K={trace:W,debug:W,log:W,warn:W,info:W,error:W},q=K;function Q(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];t.forEach(function(e){var t;q[e]=n[e]?n[e].bind(n):(t=self.console[e])?t.bind(self.console,"["+e+"] >"):W})}function X(e,t){if(self.console&&!0===e||"object"==typeof e){Q(e,"debug","log","info","warn","error");try{q.log('Debug logs enabled for "'+t+'" in hls.js version '+void 0)}catch(e){q=K}}else q=K}var ie=q,J=/^(\d+)x(\d+)$/,Z=/(.+?)=(".*?"|.*?)(?:,|$)/g,V=((t=ae.prototype).decimalInteger=function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){e=this[e];return e?parseFloat(e):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){e=J.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},ae.parseAttrList=function(e){var t,n={};for(Z.lastIndex=0;null!==(t=Z.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1].trim()]=i}return n},ae);function ae(e){for(var t in e="string"==typeof e?ae.parseAttrList(e):e)e.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}r(ve,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){var e;return this._endDate||(null!==(e=this.duration)?new Date(this._startDate.getTime()+1e3*e):null)}},{key:"duration",get:function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(G(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&G(this.startDate.getTime())&&(null===this.duration||0<=this.duration)&&(!this.endOnNext||!!this.class)}}]);var oe,se,le=ve,ue=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},E="audio",ce="video",he="audiovideo",t=(ye.prototype.setByteRange=function(e,t){var e=e.split("@",2),n=[];1===e.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(e[1]),n[1]=parseInt(e[0])+n[0],this._byteRange=n},r(ye,[{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=z.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),ye),de=(e(_e,se=t),(n=_e.prototype).setKeyFormat=function(e){this.levelkeys&&(e=this.levelkeys[e])&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))},n.abortRequests=function(){var e;null!=(e=this.loader)&&e.abort(),null!=(e=this.keyLoader)&&e.abort()},n.setElementaryStreamInfo=function(e,t,n,i,r,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,i),s.endDTS=Math.max(s.endDTS,r)):o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:a}},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[E]=null,e[ce]=null,e[he]=null},r(_e,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){var e;return null!==this.programDateTime&&G(this.programDateTime)?(e=G(this.duration)?this.duration:0,this.programDateTime+1e3*e):null}},{key:"encrypted",get:function(){if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var e=Object.keys(this.levelkeys),t=e.length;if(1<t||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}}]),_e),fe=(e(ge,oe=t),r(ge,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),ge),pe=(me.prototype.reloaded=function(e){var t,n;e?(t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex,this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<n,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay):(this.advanced=!0,this.updated=!0)},r(me,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&G(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),me);function me(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}function ge(e,t,n,i,r){(n=oe.call(this,n)||this).fragOffset=0,n.duration=0,n.gap=!1,n.independent=!1,n.relurl=void 0,n.fragment=void 0,n.index=void 0,n.stats=new ue,n.duration=e.decimalFloatingPoint("DURATION"),n.gap=e.bool("GAP"),n.independent=e.bool("INDEPENDENT"),n.relurl=e.enumeratedString("URI"),n.fragment=t,n.index=i;t=e.enumeratedString("BYTERANGE");return t&&n.setByteRange(t,r),r&&(n.fragOffset=r.fragOffset+r.duration),n}function _e(e,t){return(t=se.call(this,t)||this)._decryptdata=null,t.rawProgramDateTime=null,t.programDateTime=null,t.tagList=[],t.duration=0,t.sn=0,t.levelkeys=void 0,t.type=void 0,t.loader=null,t.keyLoader=null,t.level=-1,t.cc=0,t.startPTS=void 0,t.endPTS=void 0,t.startDTS=void 0,t.endDTS=void 0,t.start=0,t.deltaPTS=void 0,t.maxStartPTS=void 0,t.minEndPTS=void 0,t.stats=new ue,t.urlId=0,t.data=void 0,t.bitrateTest=!1,t.title=null,t.initSegment=null,t.endList=void 0,t.gap=void 0,t.type=e,t}function ye(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[E]=null,t[ce]=null,t[he]=null,t),this.baseurl=e}function ve(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var n,i=t.attr;for(n in i)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==i[n]){ie.warn('DATERANGE tag attribute: "'+n+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=n;break}e=$(new V({}),i,e)}this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr&&(t=new Date(this.attr["END-DATE"]),G(t.getTime()))&&(this._endDate=t)}function Ee(e){return Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)})}function Ae(e){return Uint8Array.from(unescape(encodeURIComponent(e)),function(e){return e.charCodeAt(0)})}var g={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},be="org.w3.clearkey",Te="com.apple.streamingkeydelivery",Se="com.microsoft.playready",we="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Re(e){switch(e){case Te:return g.FAIRPLAY;case Se:return g.PLAYREADY;case we:return g.WIDEVINE;case be:return g.CLEARKEY}}var Ie="edef8ba979d64acea3c827dcd51d21ed";function Ce(e){switch(e){case g.FAIRPLAY:return Te;case g.PLAYREADY:return Se;case g.WIDEVINE:return we;case g.CLEARKEY:return be}}function Le(e){var t=e.drmSystems,e=e.widevineLicenseUrl,n=t?[g.FAIRPLAY,g.WIDEVINE,g.PLAYREADY,g.CLEARKEY].filter(function(e){return!!t[e]}):[];return!n[g.WIDEVINE]&&e&&n.push(g.WIDEVINE),n}var Pe="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function De(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}function ke(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Oe(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Me(e,t){for(var n=t,i=0;ke(e,t);)i=(i+=10)+Ue(e,t+6),Oe(e,t+10)&&(i+=10),t+=i;if(0<i)return e.subarray(n,n+i)}function xe(e){for(var t=Fe(e),n=0;n<t.length;n++){var i=t[n];if(Ne(i)){if(8===i.data.byteLength){var i=new Uint8Array(i.data),r=1&i[3],i=(i[4]<<23)+(i[5]<<15)+(i[6]<<7)+i[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}return}}}function Ne(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function Fe(e){for(var t,n=0,i=[];ke(e,n);){for(var r=Ue(e,n+6),a=(n+=10)+r;n+8<a;){t=e.subarray(n),s=o=void 0,o=String.fromCharCode(t[0],t[1],t[2],t[3]),s=Ue(t,4);var o={type:o,size:s,data:t.subarray(10,10+s)},s=("PRIV"===(t=o).type?je:"W"===t.type[0]?Ve:Ge)(t);s&&i.push(s),n+=o.size+10}Oe(e,n)&&(n+=10)}return i}var Be,Ue=function(e,t){var n=0,n=(127&e[t])<<21;return(n=(n|=(127&e[t+1])<<14)|(127&e[t+2])<<7)|127&e[t+3]},je=function(e){var t,n;if(!(e.size<2))return t=He(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1)),{key:e.type,info:t,data:n.buffer}},Ge=function(e){var t,n;if(!(e.size<2))return"TXXX"===e.type?(t=1,t+=(n=He(e.data.subarray(1),!0)).length+1,t=He(e.data.subarray(t)),{key:e.type,info:n,data:t}):(n=He(e.data.subarray(1)),{key:e.type,data:n})},Ve=function(e){var t,n;return"WXXX"===e.type?e.size<2?void 0:(t=1,t+=(n=He(e.data.subarray(1),!0)).length+1,t=He(e.data.subarray(t)),{key:e.type,info:n,data:t}):(n=He(e.data),{key:e.type,data:n})},He=function(e,t){void 0===t&&(t=!1);var n,i;Be=Be||void 0===self.TextDecoder?Be:new self.TextDecoder("utf-8");if(Be)return n=Be.decode(e),t?-1!==(i=n.indexOf("\0"))?n.substring(0,i):n:n.replace(/\0/g,"");for(var r,a,o,s=e.length,l="",u=0;u<s;){if(0===(r=e[u++])&&t)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:a=e[u++],l+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=e[u++],o=e[u++],l+=String.fromCharCode((15&r)<<12|(63&a)<<6|(63&o)<<0)}}return l};function Ye(e){for(var t="",n=0;n<e.length;n++){var i=e[n].toString(16);t+=i=i.length<2?"0"+i:i}return t}var ze=Math.pow(2,32)-1,We=[].push,Ke={video:1,audio:2,id3:3,text:4};function v(e){return String.fromCharCode.apply(null,e)}function qe(e,t){e=e[t]<<8|e[t+1];return e<0?65536+e:e}function R(e,t){e=Qe(e,t);return e<0?4294967296+e:e}function Qe(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Xe(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function I(e,t){var n=[];if(t.length)for(var i=e.byteLength,r=0;r<i;){var a,o=R(e,r),o=1<o?r+o:i;v(e.subarray(r+4,r+8))===t[0]&&(1===t.length?n.push(e.subarray(r+8,o)):(a=I(e.subarray(r+8,o),t.slice(1))).length&&We.apply(n,a)),r=o}return n}function Je(e){for(var n=[],t=I(e,["moov","trak"]),i=0;i<t.length;i++){var r,a,o=t[i],s=I(o,["tkhd"])[0];s&&(s=R(s,0===s[0]?12:20),r=I(o,["mdia","mdhd"])[0])&&(r=R(r,0===r[0]?12:20),a=I(o,["mdia","hdlr"])[0])&&(a=v(a.subarray(8,12)),a={soun:E,vide:ce}[a])&&(o=function(e){var t=e.subarray(8),n=t.subarray(86),i=v(t.subarray(4,8)),r=i,a="enca"===i||"encv"===i;{var o;a&&(o=I(t,[i])[0],I(o.subarray("enca"===i?28:78),["sinf"]).forEach(function(e){var t=I(e,["schm"])[0];!t||"cbcs"!==(t=v(t.subarray(4,8)))&&"cenc"!==t||(t=I(e,["frma"])[0])&&(r=v(t))}))}switch(r){case"avc1":case"avc2":case"avc3":case"avc4":r+="."+Ze(e[111])+Ze(e[112])+Ze(e[113]);break;case"mp4a":var s=I(t,[i])[0],s=I(s.subarray(28),["esds"])[0];s&&12<s.length&&0!==s[11]&&(r=(r+="."+Ze(s[11]))+("."+(s[12]>>>2&63).toString(16).toUpperCase()));break;case"hvc1":case"hev1":var s=I(n,["hvcC"])[0],l=s[1],u=["","A","B","C"][l>>6],c=31&l,h=R(s,2),l=(32&l)>>5?"H":"L",d=s[12],f=s.subarray(6,12);r=(r=(r+="."+u+c)+("."+h.toString(16).toUpperCase()))+("."+l+d);for(var p="",m=f.length;m--;){var g=f[m];(g||p)&&(p="."+g.toString(16).toUpperCase()+p)}r+=p;break;case"dvh1":case"dvhe":s=I(n,["dvcC"])[0],u=s[2]>>1&127,c=s[2]<<5&32|s[3]>>3&31;r+="."+$e(u)+"."+$e(c);break;case"vp09":h=I(n,["vpcC"])[0],l=h[4],d=h[5],s=h[6]>>4&15;r+="."+$e(l)+"."+$e(d)+"."+$e(s);break;case"av01":var u=I(n,["av1C"])[0],c=u[1]>>>3,h=31&u[1],l=u[2]>>>7?"H":"M",d=(64&u[2])>>6,s=(32&u[2])>>5,s=2==c&&d?s?12:10:d?10:8,d=(16&u[2])>>4,_=(8&u[2])>>3,y=(4&u[2])>>2,u=3&u[2];r+="."+c+"."+$e(h)+l+"."+$e(s)+"."+d+"."+_+y+u}return{codec:r,encrypted:a}}(I(o,["mdia","minf","stbl","stsd"])[0]),n[s]={timescale:r,type:a},n[a]=m({timescale:r,id:s},o))}return I(e,["moov","mvex","trex"]).forEach(function(e){var t=R(e,4),t=n[t];t&&(t.default={duration:R(e,12),flags:R(e,20)})}),n}function Ze(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function $e(e){return(e<10?"0":"")+e}function et(e){var t=I(e,["schm"])[0];if(t){t=v(t.subarray(4,8));if("cbcs"===t||"cenc"===t)return I(e,["schi","tenc"])[0]}return ie.error("[eme] missing 'schm' box"),null}function tt(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function nt(E,A){var b=[],T=A.samples,S=A.timescale,a=A.id,w=!1;return I(T,["moof"]).map(function(e){var v=e.byteOffset-8;I(e,["traf"]).map(function(r){var e=I(r,["tfdt"]).map(function(e){var t=e[0],n=R(e,4);return(n=1===t?(n*=Math.pow(2,32))+R(e,8):n)/S})[0];return void 0!==e&&(E=e),I(r,["tfhd"]).map(function(e){var t=R(e,4),n=16777215&R(e,0),_=0,y=0,i=8;t===a&&(0!=(1&n)&&(i+=8),0!=(2&n)&&(i+=4),0!=(8&n)&&(_=R(e,i),i+=4),0!=(16&n)&&(y=R(e,i),i+=4),0!=(32&n)&&(i+=4),"video"===A.type&&(t=A.codec,w=!!t&&("hvc1"===(t=(e=t.indexOf("."))<0?t:t.substring(0,e))||"hev1"===t||"dvh1"===t||"dvhe"===t)),I(r,["trun"]).map(function(e){var t=e[0],n=16777215&R(e,0),i=0,r=0!=(256&n),a=0,o=0!=(512&n),s=0,l=0!=(1024&n),u=0!=(2048&n),c=0,h=R(e,4),d=8;0!=(1&n)&&(i=R(e,d),d+=4),0!=(4&n)&&(d+=4);for(var f=i+v,p=0;p<h;p++){if(r?(a=R(e,d),d+=4):a=_,o?(s=R(e,d),d+=4):s=y,l&&(d+=4),u&&(c=(0===t?R:Qe)(e,d),d+=4),A.type===ce)for(var m=0;m<s;){var g=R(T,f);!function(e,t){if(e)return 39==(e=t>>1&63)||40==e;return 6==(31&t)}(w,T[f+=4])||it(T.subarray(f,f+g),w?2:1,E+c/S,b),f+=g,m+=g+4}E+=a/S}}))})})}),b}function it(e,t,n,i){var r=rt(e),a=0;a+=t;for(var o=0,s=0,l=!1,u=0;a<r.length;){for(o=0;!(a>=r.length)&&(o+=u=r[a++],255===u););for(s=0;!(a>=r.length)&&(s+=u=r[a++],255===u););var c=r.length-a;if(!l&&4===o&&a<r.length){if(l=!0,181===r[a++]){var h=qe(r,a);if(a+=2,49===h){h=R(r,a);if(a+=4,1195456820===h){h=r[a++];if(3===h){var d=r[a++],f=64&d,p=f?2+3*(31&d):0,m=new Uint8Array(p);if(f){m[0]=d;for(var g=1;g<p;g++)m[g]=r[a++]}i.push({type:h,payloadType:o,pts:n,bytes:m})}}}}}else if(5===o&&s<c){if(l=!0,16<s){for(var _=[],y=0;y<16;y++){var v=r[a++].toString(16);_.push(1==v.length?"0"+v:v),3!==y&&5!==y&&7!==y&&9!==y||_.push("-")}for(var E=s-16,A=new Uint8Array(E),b=0;b<E;b++)A[b]=r[a++];i.push({payloadType:o,pts:n,uuid:_.join(""),userData:He(A),userDataBytes:A})}}else if(s<c)a+=s;else if(c<s)break}}function rt(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;for(var r=t-n.length,a=new Uint8Array(r),o=0,i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),a[i]=e[o];return a}var at={},ot=(lt.clearKeyUriToKeyIdMap=function(){at={}},(n=lt.prototype).isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Te:case we:case Se:case be:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},n.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv)return"number"!=typeof e&&("AES-128"!==this.method||this.iv||ie.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0),e=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e),new lt(this.method,this.uri,"identity",this.keyFormatVersions,e);e=(e=this.uri).split(":"),t=null,"data"===e[0]&&2===e.length&&2===(i=(e=e[1].split(";"))[e.length-1].split(",")).length&&(n="base64"===i[0],i=i[1],t=n?(e.splice(-1,1),Ee(i)):(n=Ae(i).subarray(0,16),(e=new Uint8Array(16)).set(n,16-n.length),e));var t,n,i,r=t;if(r)switch(this.keyFormat){case we:22<=(this.pssh=r).length&&(this.keyId=r.subarray(r.length-22,r.length-6));break;case Se:var a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),a=(this.pssh=function(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");var i;if(t)for(var r=1,a=new Uint8Array(16*t.length),o=0;o<t.length;o++){var s=t[o];if(16!==s.byteLength)throw new RangeError("Invalid key");a.set(s,16*o)}else r=0,a=new Uint8Array;0<r?(i=new Uint8Array(4),0<t.length&&new DataView(i.buffer).setUint32(0,t.length,!1)):i=new Uint8Array;var l=new Uint8Array(4);return n&&0<n.byteLength&&new DataView(l.buffer).setUint32(0,n.byteLength,!1),function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=n.length,a=8,o=r;o--;)a+=n[o].byteLength;var s=new Uint8Array(a);for(s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,s.set(e,4),o=0,a=8;o<r;o++)s.set(n[o],a),a+=n[o].byteLength;return s}([112,115,115,104],new Uint8Array([r,0,0,0]),e,i,a,l,n||new Uint8Array)}(a,null,r),new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2)),a=String.fromCharCode.apply(null,Array.from(a)),a=a.substring(a.indexOf("<"),a.length),a=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("KID")[0];a&&(a=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE"))&&(a=Ee(a).subarray(0,16),s(o=a,0,3),s(o,1,2),s(o,4,5),s(o,6,7),this.keyId=a);break;default:var o=r.subarray(0,16);16!==o.length&&((a=new Uint8Array(16)).set(o,16-o.length),o=a),this.keyId=o}function s(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}return this.keyId&&16===this.keyId.byteLength||((i=at[this.uri])||(n=Object.keys(at).length%Number.MAX_SAFE_INTEGER,i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,n),at[this.uri]=i),this.keyId=i),this},lt),st=/\{\$([a-zA-Z0-9-_]+)\}/g;function lt(e,t,n,i,r,a){void 0===i&&(i=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.token=void 0,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e,this.token=a,"media-drm-player-binding"===this.keyFormat&&(this.uri=this.uri+"&playerId=pid-1-5-1"),"media-drm-token"===this.keyFormat&&this.token&&(this.uri=this.uri+"&playerId=pid-1-5-1&token="+this.token),!this.keyFormat&&this.token&&(this.uri=this.uri+"&token="+this.token)}function ut(e){return st.test(e)}function ct(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(var i=n.length;i--;){var r=n[i],a=t[r];a&&(t[r]=ht(e,a))}}function ht(i,e){var r;return null!==i.variableList||i.hasVariableRefs?(r=i.variableList,e.replace(st,function(e){var t=e.substring(2,e.length-1),n=null==r?void 0:r[t];return void 0===n?(i.playlistParsingError||(i.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+t+'"')),e):n})):e}function dt(e,t,n){var i,r,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){i=t.QUERYPARAM;try{var o=new self.URL(n).searchParams;if(!o.has(i))throw new Error('"'+i+'" does not match any query parameter in URI: "'+n+'"');r=o.get(i)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+t.message))}}else i=t.NAME,r=t.VALUE;i in a?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+i+'"')):a[i]=r||""}function ft(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}var pt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,fLaC:!0,flac:!0,FLAC:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},mt=ft();function gt(e,t){return!e.split(",").some(function(e){return!_t(e,t)})}function _t(e,t){return null!=(t=null==mt?void 0:mt.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"'))&&t}var yt={},vt=/flac|opus/i;function Et(e){return e.replace(vt,function(e){var t=e.toLowerCase();if(yt[t])return yt[t];for(var n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t],i=0;i<n.length;i++)if(_t(n[i],"audio"))return yt[t]=n[i],n[i];return t})}var At=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,bt=/#EXT-X-MEDIA:(.*)/g,Tt=/^#EXT(?:INF|-X-TARGETDURATION):/m,St=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),wt=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Rt=(It.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},It.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return 2<n.length?(t=n.shift()+".",(t+=parseInt(n.shift()).toString(16))+("000"+parseInt(n.shift()).toString(16)).slice(-4)):e},It.resolve=function(e,t){return z.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},It.isMediaPlaylist=function(e){return Tt.test(e)},It.parseMasterPlaylist=function(e,t){var n,i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ut(e)},r=[];for(At.lastIndex=0;null!=(n=At.exec(e));)if(n[1]){var a=new V(n[1]),o=(ct(i,a,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]),ht(i,n[2])),o={attrs:a,bitrate:a.decimalInteger("BANDWIDTH")||a.decimalInteger("AVERAGE-BANDWIDTH"),name:a.NAME,url:It.resolve(o,t)},s=a.decimalResolution("RESOLUTION");s&&(o.width=s.width,o.height=s.height),function(e,i){["video","audio","text"].forEach(function(n){var t=e.filter(function(e){return e=e,!!(t=pt[n])&&!0===t[e.slice(0,4)];var t});t.length&&(i[n+"Codec"]=t.join(","),e=e.filter(function(e){return-1===t.indexOf(e)}))}),i.unknownCodecs=e}((a.CODECS||"").split(/[ ,]+/).filter(function(e){return e}),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=It.convertAVC1ToAVCOTI(o.videoCodec)),null!=(s=o.unknownCodecs)&&s.length||r.push(o),i.levels.push(o)}else if(n[3]){var a=n[3],l=n[4];switch(a){case"SESSION-DATA":var u=new V(l),c=(ct(i,u,["DATA-ID","LANGUAGE","VALUE","URI"]),u["DATA-ID"]);c&&(null===i.sessionData&&(i.sessionData={}),i.sessionData[c]=u);break;case"SESSION-KEY":c=Ct(l,t,i);c.encrypted&&c.isSupported()?(null===i.sessionKeys&&(i.sessionKeys=[]),i.sessionKeys.push(c)):ie.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+l+'"');break;case"DEFINE":u=new V(l);ct(i,u,["NAME","VALUE","QUERYPARAM"]),dt(i,u,t);break;case"CONTENT-STEERING":var h=new V(l);ct(i,h,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:It.resolve(h["SERVER-URI"],t),pathwayId:h["PATHWAY-ID"]||"."};break;case"START":i.startTimeOffset=Lt(l)}}var d=0<r.length&&r.length<i.levels.length;return i.levels=d?r:i.levels,0===i.levels.length&&(i.playlistParsingError=new Error("no levels found in manifest")),i},It.parseMasterPlaylistMedia=function(e,t,n){var i={},r=n.levels,a={AUDIO:r.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),SUBTITLES:r.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),"CLOSED-CAPTIONS":[]},o=0;for(bt.lastIndex=0;null!==(u=bt.exec(e));){var s,l,u=new V(u[1]),c=u.TYPE;c&&(s=a[c],l=i[c]||[],i[c]=l,ct(n,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]),c={attrs:u,bitrate:0,id:o++,groupId:u["GROUP-ID"]||"",instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:u.LANGUAGE,url:u.URI?It.resolve(u.URI,t):""},null!=s&&s.length&&(Pt(c,u=It.findGroup(s,c.groupId)||s[0],"audioCodec"),Pt(c,u,"textCodec")),l.push(c))}return i},It.parseLevelPlaylist=function(e,t,n,i,N,F,B){var r,a,o,s=new pe(t),l=s.fragments,u=null,c=0,h=0,d=0,f=0,p=null,m=new de(i,t),g=-1,_=!1;for(St.lastIndex=0,s.m3u8=e,s.hasVariableRefs=ut(e);null!==(r=St.exec(e));){_&&(_=!1,(m=new de(i,t)).start=d,m.sn=c,m.cc=f,m.level=n,u)&&(m.initSegment=u,m.rawProgramDateTime=u.rawProgramDateTime,u.rawProgramDateTime=null);var y=r[1];if(y){m.duration=parseFloat(y);var v=(" "+r[2]).slice(1);m.title=v||null,m.tagList.push(v?["INF",y,v]:["INF",y])}else if(r[3])G(m.duration)&&(m.start=d,o&&Ot(m,o,s),m.sn=c,m.level=n,m.cc=f,m.urlId=N,l.push(m),v=(" "+r[3]).slice(1),m.relurl=ht(s,v),Dt(m,p),d+=(p=m).duration,c++,_=!(h=0));else if(r[4]){y=(" "+r[4]).slice(1);p?m.setByteRange(y,p):m.setByteRange(y)}else if(r[5])m.rawProgramDateTime=(" "+r[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]),-1===g&&(g=l.length);else if(r=r[0].match(wt)){for(a=1;a<r.length&&void 0===r[a];a++);var E=(" "+r[a]).slice(1),A=(" "+r[a+1]).slice(1),b=r[a+2]?(" "+r[a+2]).slice(1):"";switch(E){case"PLAYLIST-TYPE":s.type=A.toUpperCase();break;case"MEDIA-SEQUENCE":c=s.startSN=parseInt(A);break;case"SKIP":var T=new V(A),S=(ct(s,T,["RECENTLY-REMOVED-DATERANGES"]),T.decimalInteger("SKIPPED-SEGMENTS"));if(G(S)){for(var U=s.skippedSegments=S;U--;)l.unshift(null);c+=S}S=T.enumeratedString("RECENTLY-REMOVED-DATERANGES");S&&(s.recentlyRemovedDateranges=S.split("\t"));break;case"TARGETDURATION":s.targetduration=Math.max(parseInt(A),1);break;case"VERSION":s.version=parseInt(A);break;case"EXTM3U":break;case"ENDLIST":s.live=!1;break;case"#":(A||b)&&m.tagList.push(b?[A,b]:[A]);break;case"DISCONTINUITY":f++,m.tagList.push(["DIS"]);break;case"GAP":m.gap=!0,m.tagList.push([E]);break;case"BITRATE":m.tagList.push([E,A]);break;case"DATERANGE":T=new V(A),S=(ct(s,T,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),ct(s,T,T.clientAttrs),new le(T,s.dateRanges[T.ID]));S.isValid||s.skippedSegments?s.dateRanges[S.id]=S:ie.warn('Ignoring invalid DATERANGE tag: "'+A+'"'),m.tagList.push(["EXT-X-DATERANGE",A]);break;case"DEFINE":var w=new V(A);ct(s,w,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in w?(I=s,C=F,R=void 0,L=(L=w).IMPORT,C&&L in C?((R=I.variableList)||(I.variableList=R={}),R[L]=C[L]):I.playlistParsingError||(I.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+L+'"'))):dt(s,w,t);break;case"DISCONTINUITY-SEQUENCE":f=parseInt(A);break;case"KEY":var R=Ct(A,t,s,B);if(R.isSupported()){if("NONE"===R.method){o=void 0;break}(o=(o=o||{})[R.keyFormat]?$({},o):o)[R.keyFormat]=R}else ie.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+A+'"');break;case"START":s.startTimeOffset=Lt(A);break;case"MAP":var I,C=new V(A);ct(s,C,["BYTERANGE","URI"]),m.duration?(kt(I=new de(i,t),C,n,o),(m.initSegment=u=I).rawProgramDateTime&&!m.rawProgramDateTime&&(m.rawProgramDateTime=u.rawProgramDateTime)):(kt(m,C,n,o),u=m,_=!0);break;case"SERVER-CONTROL":var L=new V(A);s.canBlockReload=L.bool("CAN-BLOCK-RELOAD"),s.canSkipUntil=L.optionalFloat("CAN-SKIP-UNTIL",0),s.canSkipDateRanges=0<s.canSkipUntil&&L.bool("CAN-SKIP-DATERANGES"),s.partHoldBack=L.optionalFloat("PART-HOLD-BACK",0),s.holdBack=L.optionalFloat("HOLD-BACK",0);break;case"PART-INF":w=new V(A);s.partTarget=w.decimalFloatingPoint("PART-TARGET");break;case"PART":var P=(P=s.partList)||(s.partList=[]),D=0<h?P[P.length-1]:void 0,k=h++,O=new V(A),O=(ct(s,O,["BYTERANGE","URI"]),new fe(O,m,t,k,D));P.push(O),m.duration+=O.duration;break;case"PRELOAD-HINT":k=new V(A);ct(s,k,["URI"]),s.preloadHint=k;break;case"RENDITION-REPORT":D=new V(A);ct(s,D,["URI"]),s.renditionReports=s.renditionReports||[],s.renditionReports.push(D);break;default:ie.warn("line parsed but not handled: "+r)}}else ie.warn("No matches on slow regex match for level playlist!")}p&&!p.relurl?(l.pop(),d-=p.duration,s.partList&&(s.fragmentHint=p)):s.partList&&(Dt(m,p),m.cc=f,s.fragmentHint=m,o)&&Ot(m,o,s);var M=l.length,j=l[0],x=l[M-1];return 0<(d+=s.skippedSegments*s.targetduration)&&M&&x?(s.averagetargetduration=d/M,M=x.sn,s.endSN="initSegment"!==M?M:0,s.live||(x.endList=!0),j&&(s.startCC=j.cc)):(s.endSN=0,s.startCC=0),s.fragmentHint&&(d+=s.fragmentHint.duration),s.totalduration=d,s.endCC=f,0<g&&function(e,t){for(var n=e[t],i=t;i--;){var r=e[i];if(!r)return;r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(l,g),s},It);function It(){}function Ct(e,t,n,i){var e=new V(e),n=(ct(n,e,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]),null!=(n=e.METHOD)?n:""),r=e.URI,a=e.hexadecimalInteger("IV"),o=e.KEYFORMATVERSIONS,s=null!=(s=e.KEYFORMAT)?s:"identity",e=(r&&e.IV&&!a&&ie.error("Invalid IV: "+e.IV),r?Rt.resolve(r,t):""),r=(o||"1").split("/").map(Number).filter(Number.isFinite);return new ot(n,e,s,r,a,i.token)}function Lt(e){e=new V(e).decimalFloatingPoint("TIME-OFFSET");return G(e)?e:null}function Pt(e,t,n){t=t[n];t&&(e[n]=t)}function Dt(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),G(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function kt(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function Ot(e,t,n){e.levelkeys=t;n=n.encryptedFragments;n.length&&n[n.length-1].levelkeys===t||!Object.keys(t).some(function(e){return t[e].isCommonEncryption})||n.push(e)}var Mt="manifest",xt="level",Nt="audioTrack",Ft="subtitleTrack",_="main",Bt="audio",Ut="subtitle";function jt(e){switch(e.type){case Nt:return Bt;case Ft:return Ut;default:return _}}function Gt(e,t){e=e.url;return e=void 0!==e&&0!==e.indexOf("data:")?e:t.url}(t=Ht.prototype).startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.LEVEL_LOADING,this.onLevelLoading,this),e.on(ee.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(ee.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.LEVEL_LOADING,this.onLevelLoading,this),e.off(ee.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(ee.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,n=new(n||i)(t);return this.loaders[e.type]=n},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){t=t.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Mt,url:t,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,i=t.level,r=t.url,t=t.deliveryDirectives;this.load({id:n,level:i,responseType:"text",type:xt,url:r,deliveryDirectives:t})},t.onAudioTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,t=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:Nt,url:r,deliveryDirectives:t})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,t=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:Ft,url:r,deliveryDirectives:t})},t.load=function(e){var o=this,t=this.hls.config,n=this.getInternalLoader(e);if(n){var i=n.context;if(i&&i.url===e.url)return void ie.trace("[playlist-loader]: playlist request ongoing");ie.log("[playlist-loader]: aborting previous loader for type: "+e.type),n.abort()}i=e.type===Mt?t.manifestLoadPolicy.default:$({},t.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),n=this.createInternalLoader(e),G(null==(t=e.deliveryDirectives)?void 0:t.part)&&(e.type===xt&&null!==e.level?r=this.hls.levels[e.level].details:e.type===Nt&&null!==e.id?r=this.hls.audioTracks[e.id].details:e.type===Ft&&null!==e.id&&(r=this.hls.subtitleTracks[e.id].details),r)&&(t=r.partTarget,r=r.targetduration,t&&r&&(t=1e3*Math.max(3*t,.8*r),i=$({},i,{maxTimeToFirstByteMs:Math.min(t,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,i.maxTimeToFirstByteMs)})));var r=i.errorRetry||i.timeoutRetry||{},t={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:r.maxNumRetry||0,retryDelay:r.retryDelayMs||0,maxRetryDelay:r.maxRetryDelayMs||0};n.load(e,t,{onSuccess:function(e,t,n,i){var r=o.getInternalLoader(n),a=(o.resetInternalLoader(n.type),e.data);0===a.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),Rt.isMediaPlaylist(a)?o.handleTrackOrLevelPlaylist(e,t,n,i||null,r):o.handleMasterPlaylist(e,t,n,i)):o.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),i||null,t)},onError:function(e,t,n,i){o.handleNetworkError(t,n,!1,e,i)},onTimeout:function(e,t,n){o.handleNetworkError(t,n,!0,void 0,e)}})},t.handleMasterPlaylist=function(e,t,n,i){var r,a,o,s,l,u=this.hls,c=e.data,h=Gt(e,n),d=Rt.parseMasterPlaylist(c,h);d.playlistParsingError?this.handleManifestParsingError(e,n,d.playlistParsingError,i,t):(e=d.contentSteering,n=d.levels,r=d.sessionData,a=d.sessionKeys,o=d.startTimeOffset,s=d.variableList,this.variableList=s,d=(c=Rt.parseMasterPlaylistMedia(c,h,d)).AUDIO,l=c.SUBTITLES,c=c["CLOSED-CAPTIONS"],(d=void 0===d?[]:d).length&&!d.some(function(e){return!e.url})&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(ie.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new V({}),bitrate:0,url:""})),u.trigger(ee.MANIFEST_LOADED,{levels:n,audioTracks:d,subtitles:l,captions:c,contentSteering:e,url:h,stats:t,networkDetails:i,sessionData:r,sessionKeys:a,startTimeOffset:o,variableList:s}))},t.handleTrackOrLevelPlaylist=function(e,t,n,i,r){var a=this.hls,o=n.id,s=n.level,l=n.type,u=Gt(e,n),o=G(o)?o:0,s=G(s)?s:o,c=jt(n),s=Rt.parseLevelPlaylist(e.data,u,s,c,o,this.variableList,a.config);l===Mt&&(c={attrs:new V({}),bitrate:0,details:s,name:"",url:u},a.trigger(ee.MANIFEST_LOADED,{levels:[c],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})),t.parsing.end=performance.now(),n.levelDetails=s,this.handlePlaylistLoaded(s,e,t,n,i,r)},t.handleManifestParsingError=function(e,t,n,i,r){this.hls.trigger(ee.ERROR,{type:te.NETWORK_ERROR,details:ne.MANIFEST_PARSING_ERROR,fatal:t.type===Mt,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:r})},t.handleNetworkError=function(e,t,n,i,r){var a="A network "+((n=void 0===n?!1:n)?"timeout":"error"+(i?" (status "+i.code+")":""))+" occurred while loading "+e.type,o=(e.type===xt?a+=": "+e.level+" id: "+e.id:e.type!==Nt&&e.type!==Ft||(a+=" id: "+e.id+' group-id: "'+e.groupId+'"'),new Error(a)),s=(ie.warn("[playlist-loader]: "+a),ne.UNKNOWN),l=!1,a=this.getInternalLoader(e);switch(e.type){case Mt:s=n?ne.MANIFEST_LOAD_TIMEOUT:ne.MANIFEST_LOAD_ERROR,l=!0;break;case xt:s=n?ne.LEVEL_LOAD_TIMEOUT:ne.LEVEL_LOAD_ERROR,l=!1;break;case Nt:s=n?ne.AUDIO_TRACK_LOAD_TIMEOUT:ne.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Ft:s=n?ne.SUBTITLE_TRACK_LOAD_TIMEOUT:ne.SUBTITLE_LOAD_ERROR,l=!1}a&&this.resetInternalLoader(e.type);a={type:te.NETWORK_ERROR,details:s,fatal:l,url:e.url,loader:a,context:e,error:o,networkDetails:t,stats:r};i&&(o=(null==t?void 0:t.url)||e.url,a.response=m({url:o,data:void 0},i)),this.hls.trigger(ee.ERROR,a)},t.handlePlaylistLoaded=function(e,t,n,i,r,a){var o=this.hls,s=i.type,l=i.level,u=i.id,c=i.groupId,h=i.deliveryDirectives,d=Gt(t,i),f=jt(i),p="number"==typeof i.level&&f===_?l:void 0;if(e.fragments.length){e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));l=e.playlistParsingError;if(l)o.trigger(ee.ERROR,{type:te.NETWORK_ERROR,details:ne.LEVEL_PARSING_ERROR,fatal:!1,url:d,error:l,reason:l.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n});else switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case Mt:case xt:o.trigger(ee.LEVEL_LOADED,{details:e,level:p||0,id:u||0,stats:n,networkDetails:r,deliveryDirectives:h});break;case Nt:o.trigger(ee.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:h});break;case Ft:o.trigger(ee.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:h})}}else{l=new Error("No Segments found in Playlist");o.trigger(ee.ERROR,{type:te.NETWORK_ERROR,details:ne.LEVEL_EMPTY_ERROR,fatal:!1,url:d,error:l,reason:l.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n})}};var Vt=Ht;function Ht(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}function Yt(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function zt(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){ie.debug("[texttrack-utils]: "+n);try{var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(e){ie.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+e)}}"disabled"===n&&(e.mode=n)}function Wt(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function Kt(e,t,n,i){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&0<e.cues.length)for(var a=function(e,t,n){var i=[],r=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var i=0,r=n;i<=r;){var a=Math.floor((r+i)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&i<n))return a;i=a+1}}return e[i].startTime-t<t-e[r].startTime?i:r}(e,t);if(-1<r)for(var a=r,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=n)i.push(s);else if(s.startTime>n)return i}return i}(e.cues,t,n),o=0;o<a.length;o++)i&&!i(a[o])||e.removeCue(a[o]);"disabled"===r&&(e.mode=r)}var qt="org.id3",Qt="https://aomedia.org/emsg/ID3";function Xt(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var Jt=function(){var e=Xt();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Zt(e,t){return e.getTime()/1e3-t}(n=ln.prototype).destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},n._registerListeners=function(){var e=this.hls;e.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(ee.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ee.LEVEL_UPDATED,this.onLevelUpdated,this)},n._unregisterListeners=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(ee.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ee.LEVEL_UPDATED,this.onLevelUpdated,this)},n.onMediaAttached=function(e,t){this.media=t.media},n.onMediaDetaching=function(){this.id3Track&&(Wt(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},n.onManifestLoading=function(){this.dateRangeCuesAppended={}},n.createTrack=function(e){e=this.getID3Track(e.textTracks);return e.mode="hidden",e},n.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Yt(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},n.onFragParsingMetadata=function(e,t){if(this.media){var n=this.hls.config,i=n.enableEmsgMetadataCues,r=n.enableID3MetadataCues;if(i||r){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var o=Xt(),s=0;s<a.length;s++){var l=a[s].type;if((l!==Qt||i)&&r){var u=Fe(a[s].data);if(u){var c=a[s].pts,h=c+a[s].duration;(h=Jt<h?Jt:h)-c<=0&&(h=c+.25);for(var d=0;d<u.length;d++){var f,p=u[d];Ne(p)||(this.updateId3CueEnds(c,l),(f=new o(c,h,"")).value=p,l&&(f.type=l),this.id3Track.addCue(f))}}}}}}},n.updateId3CueEnds=function(e,t){var n,i=null==(n=this.id3Track)?void 0:n.cues;if(i)for(var r=i.length;r--;){var a=i[r];a.type===t&&a.startTime<e&&a.endTime===Jt&&(a.endTime=e)}},n.onBufferFlushing=function(e,t){var n,i,r=t.startOffset,a=t.endOffset,t=t.type,o=this.id3Track,s=this.hls;s&&(s=s.config,n=s.enableEmsgMetadataCues,i=s.enableID3MetadataCues,o)&&(n||i)&&Kt(o,r,a,"audio"===t?function(e){return e.type===qt&&i}:"video"===t?function(e){return e.type===Qt&&n}:function(e){return e.type===qt&&i||e.type===Qt&&n})},n.onLevelUpdated=function(e,t){var p=this,t=t.details;if(this.media&&t.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var m=this.dateRangeCuesAppended,n=this.id3Track,g=t.dateRanges,_=Object.keys(g);if(n)for(var i=Object.keys(m).filter(function(e){return!_.includes(e)}),r=i.length;r--;)!function(){var t=i[r];Object.keys(m[t].cues).forEach(function(e){n.removeCue(m[t].cues[e])}),delete m[t]}();t=t.fragments[t.fragments.length-1];if(0!==_.length&&G(null==t?void 0:t.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var y=t.programDateTime/1e3-t.start,v=Xt(),E=0;E<_.length;E++)!function(){var e=_[E],i=g[e],t=m[e],n=(null==t?void 0:t.cues)||{},r=(null==t?void 0:t.durationKnown)||!1,a=Zt(i.startDate,y),o=Jt,s=i.endDate;s?(o=Zt(s,y),r=!0):i.endOnNext&&!r&&(s=_.reduce(function(e,t){var n=g[t];return n.class===i.class&&n.id!==t&&n.startDate>i.startDate&&e.push(n),e},[]).sort(function(e,t){return e.startDate.getTime()-t.startDate.getTime()})[0])&&(o=Zt(s.startDate,y),r=!0);for(var l,u=Object.keys(i.attr),c=0;c<u.length;c++){var h,d,f=u[c];"ID"!==f&&"CLASS"!==f&&"START-DATE"!==f&&"DURATION"!==f&&"END-DATE"!==f&&"END-ON-NEXT"!==f&&((d=n[f])?r&&!t.durationKnown&&(d.endTime=o):(h=i.attr[f],d=new v(a,o,""),"SCTE35-OUT"!==(l=f)&&"SCTE35-IN"!==l||(l=h,h=Uint8Array.from(l.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),d.value={key:f,data:h},d.type="com.apple.quicktime.HLS",d.id=e,p.id3Track.addCue(d),n[f]=d))}m[e]={cues:n,dateRange:i,durationKnown:r}}()}}};var $t=ln,en=((t=sn.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ee.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(ee.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ee.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(ee.ERROR,this.onError,this)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){t=t.details;(this.levelDetails=t).advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){t.details===ne.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(t=this.levelDetails))&&t.live&&ie.warn("[playback-rate-controller]: Stall detected, adjusting target latency")},t.timeupdate=function(){var e,t,n,i=this.media,r=this.levelDetails;i&&r&&(this.currentTime=i.currentTime,null!==(t=this.computeLatency()))&&(this._latency=t,n=(e=this.config).lowLatencyMode,e=e.maxLiveSyncPlaybackRate,n)&&1!==e&&null!==(n=this.targetLatency)&&(n=(t=t-n)<Math.min(this.maxLatency,n+r.targetduration),r.live&&n&&.05<t&&1<this.forwardBufferLength?(r=Math.min(2,Math.max(1,e)),n=Math.round(2/(1+Math.exp(-.75*t-this.edgeStalled))*20)/20,i.playbackRate=Math.min(r,Math.max(1,n))):1!==i.playbackRate&&0!==i.playbackRate&&(i.playbackRate=1))},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},r(sn,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e,t,n,i,r,a=this.levelDetails;return null===a?null:(e=a.holdBack,i=a.partHoldBack,a=a.targetduration,t=(r=this.config).liveSyncDuration,n=r.liveSyncDurationCount,r=r.lowLatencyMode&&i||e,(r=(i=this.hls.userConfig).liveSyncDuration||i.liveSyncDurationCount||0===r?void 0!==t?t:n*a:r)+Math.min(+this.stallCount,a))}},{key:"liveSyncPosition",get:function(){var e,t=this.estimateLiveEdge(),n=this.targetLatency,i=this.levelDetails;return null===t||null===n||null===i?null:(e=i.edge,t=t-n-this.edgeStalled,n=e-i.totalduration,e=e-(this.config.lowLatencyMode&&i.partTarget||i.targetduration),Math.min(Math.max(n,t),e))}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e,t=this.levelDetails;return null===t?0:(e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration),Math.max(t.age-e,0))}},{key:"forwardBufferLength",get:function(){var e,t=this.media,n=this.levelDetails;return t&&n?((e=t.buffered.length)?t.buffered.end(e-1):n.edge)-this.currentTime:0}}]),sn),tn=["NONE","TYPE-0","TYPE-1",null],nn=(on.prototype.addDirectives=function(e){e=new self.URL(e);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href},on),rn=(an.prototype.addFallback=function(e){this.url.push(e.url),this._attrs.push(e.attrs)},r(an,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){e%=this.url.length;this._urlId!==e&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=e)}},{key:"audioGroupId",get:function(){var e;return null==(e=this.audioGroupIds)?void 0:e[this.urlId]}},{key:"textGroupId",get:function(){var e;return null==(e=this.textGroupIds)?void 0:e[this.urlId]}}]),an);function an(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this._avgBitrate=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this._avgBitrate=this.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return e}).join(",").replace(/\.[^.,]+/g,"")}function on(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}function sn(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}function ln(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}function un(e,t,n){n&&("audio"===t?(e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds[e.url.length-1]=n):"text"===t&&(e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds[e.url.length-1]=n))}function cn(e,t){var n,i=t.startPTS;G(i)?(n=0,(i=t.sn>e.sn?(n=i-e.start,e):(n=e.start-i,t)).duration!==n&&(i.duration=n)):t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function hn(e,t,n,i,r,a){i-n<=0&&(ie.warn("Fragment should have a positive duration",t),i=n+t.duration,a=r+t.duration);var o=n,s=i,l=t.startPTS,u=t.endPTS,c=(G(l)&&(c=Math.abs(l-n),G(t.deltaPTS)?t.deltaPTS=Math.max(c,t.deltaPTS):t.deltaPTS=c,o=Math.max(n,l),n=Math.min(n,l),r=Math.min(r,t.startDTS),s=Math.min(i,u),i=Math.max(i,u),a=Math.max(a,t.endDTS)),n-t.start);0!==t.start&&(t.start=n),t.duration=i-t.start,t.startPTS=n,t.maxStartPTS=o,t.startDTS=r,t.endPTS=i,t.minEndPTS=s,t.endDTS=a;var h,l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var u=l-e.startSN,d=e.fragments;for(d[u]=t,h=u;0<h;h--)cn(d[h],d[h-1]);for(h=u;h<d.length-1;h++)cn(d[h],d[h+1]);return e.fragmentHint&&cn(d[d.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function dn(e,t){for(var n=null,i=e.fragments,r=i.length-1;0<=r;r--){var a=i[r].initSegment;if(a){n=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;for(var o,s,l,u=0,c=e,h=t,d=h.skippedSegments,f=Math.max(c.startSN,h.startSN)-h.startSN,p=(c.fragmentHint?1:0)+(d?h.endSN:Math.min(c.endSN,h.endSN))-h.startSN,m=h.startSN-c.startSN,g=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments,_=c.fragmentHint?c.fragments.concat(c.fragmentHint):c.fragments,y=f;y<=p;y++){var v=_[m+y],E=g[y];d&&!E&&y<d&&(E=h.fragments[y]=v),v&&E&&(E=E,(v=v).relurl&&(u=v.cc-E.cc),G(v.startPTS)&&G(v.endPTS)&&(E.start=E.startPTS=v.startPTS,E.startDTS=v.startDTS,E.maxStartPTS=v.maxStartPTS,E.endPTS=v.endPTS,E.endDTS=v.endDTS,E.minEndPTS=v.minEndPTS,E.duration=v.endPTS-v.startPTS,E.duration&&(o=E),t.PTSKnown=t.alignedSliding=!0),E.elementaryStreams=v.elementaryStreams,E.loader=v.loader,E.stats=v.stats,E.urlId=v.urlId,v.initSegment)&&(E.initSegment=v.initSegment,n=v.initSegment)}if(n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach(function(e){e.initSegment&&e.initSegment.relurl!==(null==n?void 0:n.relurl)||(e.initSegment=n)}),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some(function(e){return!e}),t.deltaUpdateFailed){ie.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var A=t.skippedSegments;A--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=(c=e.dateRanges,s=t.dateRanges,f=t.recentlyRemovedDateranges,l=$({},c),f&&f.forEach(function(e){delete l[e]}),Object.keys(s).forEach(function(e){var t=new le(s[e].attr,l[e]);t.isValid?l[e]=t:ie.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(s[e].attr)+'"')}),l));var b=t.fragments;if(u){ie.warn("discontinuity sliding from playlist, take drift into account");for(var T=0;T<b.length;T++)b[T].cc+=u}t.skippedSegments&&(t.startCC=t.fragments[0].cc);var S=e.partList,w=t.partList;if(S&&w)for(var R=0,I=0,C=S.length;I<=C;I++){var L=S[I],P=w[I+R];L&&P&&L.index===P.index&&L.fragment.sn===P.fragment.sn?(L=L,(P=P).elementaryStreams=L.elementaryStreams,P.stats=L.stats):R--}o?hn(t,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):fn(e,t),b.length&&(t.totalduration=t.edge-b[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;c=t.advancedDateTime;t.advanced&&c?(f=t.edge,t.driftStart||(t.driftStartTime=c,t.driftStart=f),t.driftEndTime=c,t.driftEnd=f):(t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime)}function fn(e,t){var n=t.startSN+t.skippedSegments-e.startSN,e=e.fragments;n<0||n>=e.length||pn(t,e[n].start)}function pn(e,t){if(t){for(var n=e.fragments,i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function mn(e,t,n){return null!=e&&e.details?gn(null==(e=e.details)?void 0:e.partList,t,n):null}function gn(e,t,n){if(e)for(var i=e.length;i--;){var r=e[i];if(r.index===n&&r.fragment.sn===t)return r}return null}function _n(e){switch(e.details){case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_TIMEOUT:case ne.LEVEL_LOAD_TIMEOUT:case ne.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function yn(e,t){t=_n(t);return e.default[(t?"timeout":"error")+"Retry"]}function vn(e,t){t="linear"===e.backoff?1:Math.pow(2,t);return Math.min(t*e.retryDelayMs,e.maxRetryDelayMs)}function En(e){return m(m({},e),{errorRetry:null,timeoutRetry:null})}function An(e,t,n,i){return e&&t<e.maxNumRetry&&(0===i&&!1===navigator.onLine||i&&(i<400||499<i)||n)}var bn=function(e,t){for(var n,i,r=0,a=e.length-1;r<=a;){var o=t(i=e[n=(r+a)/2|0]);if(0<o)r=1+n;else{if(!(o<0))return i;a=n-1}}return null};function Tn(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=null;return e?r=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(r=t[0]),r&&0===Sn(n,i,r)||!(t=bn(t,Sn.bind(null,n,i)))||t===e&&r?r:t}function Sn(e,t,n){return void 0===t&&(t=0),n.start<=(e=void 0===e?0:e)&&n.start+n.duration>e?0:(t=Math.min(t,n.duration+(n.deltaPTS||0)),n.start+n.duration-t<=e?1:n.start-t>e&&n.start?-1:0)}(n=Fn.prototype).registerListeners=function(){var e=this.hls;e.on(ee.ERROR,this.onError,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.LEVEL_UPDATED,this.onLevelUpdated,this)},n.unregisterListeners=function(){var e=this.hls;e&&(e.off(ee.ERROR,this.onError,this),e.off(ee.ERROR,this.onErrorOut,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.LEVEL_UPDATED,this.onLevelUpdated,this))},n.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},n.startLoad=function(e){},n.stopLoad=function(){this.playlistError=0},n.getVariantLevelIndex=function(e){return(null==e?void 0:e.type)===_?e.level:this.hls.loadLevel},n.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},n.onLevelUpdated=function(){this.playlistError=0},n.onError=function(e,t){if(!t.fatal){var n,i=this.hls,r=t.context;switch(t.details){case ne.FRAG_LOAD_ERROR:case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_ERROR:case ne.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case ne.FRAG_PARSING_ERROR:if(null!=(a=t.frag)&&a.gap)return void(t.errorAction={action:0,flags:0});case ne.FRAG_GAP:case ne.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case ne.LEVEL_EMPTY_ERROR:case ne.LEVEL_PARSING_ERROR:var a=t.parent===_?t.level:i.loadLevel;return void(t.details===ne.LEVEL_EMPTY_ERROR&&null!=(o=t.context)&&null!=(o=o.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,a)));case ne.LEVEL_LOAD_ERROR:case ne.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==r?void 0:r.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level)));case ne.AUDIO_TRACK_LOAD_ERROR:case ne.AUDIO_TRACK_LOAD_TIMEOUT:case ne.SUBTITLE_LOAD_ERROR:case ne.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){var o=i.levels[i.loadLevel];if(o&&(r.type===Nt&&r.groupId===o.audioGroupId||r.type===Ft&&r.groupId===o.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case ne.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var a=i.levels[i.loadLevel],o=null==a?void 0:a.attrs["HDCP-LEVEL"];return void(o&&(t.errorAction={action:2,flags:2,hdcpLevel:o}));case ne.BUFFER_ADD_CODEC_ERROR:case ne.REMUX_ALLOC_ERROR:case ne.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:i.loadLevel));case ne.INTERNAL_EXCEPTION:case ne.BUFFER_APPENDING_ERROR:case ne.BUFFER_FULL_ERROR:case ne.LEVEL_SWITCH_ERROR:case ne.BUFFER_STALLED_ERROR:case ne.BUFFER_SEEK_OVER_HOLE:case ne.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}t.type===te.KEY_SYSTEM_ERROR&&(n=this.getVariantLevelIndex(t.frag),t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,n))}},n.getPlaylistRetryOrSwitchAction=function(e,t){var n=yn(this.hls.config.playlistLoadPolicy,e),i=this.playlistError++,r=null==(r=e.response)?void 0:r.code;return An(n,i,_n(e),r)?{action:5,flags:0,retryConfig:n,retryCount:i}:(r=this.getLevelSwitchAction(e,t),n&&(r.retryConfig=n,r.retryCount=i),r)},n.getFragRetryOrSwitchAction=function(e){var t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],r=t.config,a=r.fragLoadPolicy,r=r.keyLoadPolicy,r=yn(e.details.startsWith("key")?r:a,e),a=t.levels.reduce(function(e,t){return e+t.fragmentError},0);if(i){e.details!==ne.FRAG_GAP&&i.fragmentError++;i=null==(t=e.response)?void 0:t.code;if(An(r,a,_n(e),i))return{action:5,flags:0,retryConfig:r,retryCount:a}}t=this.getLevelSwitchAction(e,n);return r&&(t.retryConfig=r,t.retryCount=a),t},n.getLevelSwitchAction=function(e,t){var n=this.hls,i=(null==t&&(t=n.loadLevel),this.hls.levels[t]);if(i&&(i.loadError++,n.autoLevelEnabled)){for(var r=-1,a=n.levels,o=n.loadLevel,s=n.minAutoLevel,l=n.maxAutoLevel,u=null==(t=e.frag)?void 0:t.type,t=null!=(t=e.context)?t:{},c=t.type,h=t.groupId,d=a.length;d--;){var f=(d+o)%a.length;if(f!==o&&s<=f&&f<=l&&0===a[f].loadError){var p=a[f];if(e.details===ne.FRAG_GAP&&e.frag){var m=a[f].details;if(m){m=Tn(e.frag,m.fragments,e.frag.start);if(null!=m&&m.gap)continue}}else{if(c===Nt&&h===p.audioGroupId||c===Ft&&h===p.textGroupId)continue;if(u===Bt&&i.audioGroupId===p.audioGroupId||u===Ut&&i.textGroupId===p.textGroupId)continue}r=f;break}}if(-1<r&&n.loadLevel!==r)return e.levelRetry=!0,{action:2,flags:this.playlistError=0,nextAutoLevel:r}}return{action:2,flags:1}},n.onErrorOut=function(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===ne.FRAG_GAP||(t.fatal=!0)}t.fatal&&this.hls.stopLoad()},n.sendAlternateToPenaltyBox=function(e){var t=this.hls,n=e.errorAction;if(n){var i=n.flags,r=n.hdcpLevel,a=n.nextAutoLevel;switch(i){case 0:this.switchLevel(e,a);break;case 1:n.resolved||(n.resolved=this.redundantFailover(e));break;case 2:r&&(t.maxHdcpLevel=tn[tn.indexOf(r)-1],n.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}n.resolved||this.switchLevel(e,a)}},n.switchLevel=function(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},n.redundantFailover=function(n){var i=this,r=this.hls,a=this.penalizedRenditions,o=n.parent===_?n.level||0:r.loadLevel,s=r.levels[o],l=s.url.length,u=(n.frag||s).urlId;s.urlId!==u||n.frag&&!s.details||this.penalizeRendition(s,n);for(var e,c=1;c<l;c++)if(e=function(){var t=(u+c)%l,e=a[t];if(!e||function(e,t,n){if(3e5<performance.now()-e.lastErrorPerfMs)return 1;var i=e.details;if(t.details===ne.FRAG_GAP&&i&&t.frag){var r=t.frag.start,r=Tn(null,i.fragments,r);if(r&&!r.gap)return 1}if(n&&e.errors.length<n.errors.length){r=e.errors[e.errors.length-1];if(i&&r.frag&&t.frag&&Math.abs(r.frag.start-t.frag.start)>3*i.targetduration)return 1}}(e,n,a[u]))return i.warn("Switching to Redundant Stream "+(1+t)+"/"+l+': "'+s.url[t]+'" after '+n.details),i.playlistError=0,r.levels.forEach(function(e){e.urlId=t}),r.nextLoadLevel=o,{v:!0}}())return e.v;return!1},n.penalizeRendition=function(e,t){var n=this.penalizedRenditions,i=n[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(t),i.details=e.details,n[e.urlId]=i};var t=Fn,n=((n=Nn.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},n.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},n.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},n.stopLoad=function(){this.canLoad=!1,this.clearTimer()},n.switchParams=function(e,t){var n=null==t?void 0:t.renditionReports;if(n){for(var i,r,a,o=-1,s=0;s<n.length;s++){var l=n[s],u=void 0;try{u=new self.URL(l.URI,t.url).href}catch(e){ie.warn("Could not construct new URL for Rendition Report: "+e),u=l.URI||""}if(u===e){o=s;break}u===e.substring(0,u.length)&&(o=s)}if(-1!==o)return r=n[o],i=parseInt(r["LAST-MSN"])||(null==t?void 0:t.lastPartSn),r=parseInt(r["LAST-PART"])||(null==t?void 0:t.lastPartIndex),this.hls.config.lowLatencyMode&&(a=Math.min(t.age-t.partTarget,t.targetduration),0<=r)&&a>t.partTarget&&(r+=1),new nn(i,0<=r?r:void 0,"")}},n.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},n.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},n.shouldReloadPlaylist=function(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)},n.playlistLoaded=function(e,t,n){var i=this,r=t.details,a=t.stats,o=self.performance.now(),s=a.loading.first?Math.max(0,o-a.loading.first):0;if(r.advancedDateTime=Date.now()-s,r.live||null!=n&&n.live){if(r.reloaded(n),n&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:"MISSED")),n&&0<r.fragments.length&&dn(n,r),this.canLoad&&r.live){var l,s=void 0,u=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var c=this.hls.config.lowLatencyMode,h=r.lastPartSn,d=r.endSN,f=r.lastPartIndex,p=h===d,h=(-1!==f?(s=p?d+1:h,u=p?c?0:f:f+1):s=d+1,r.age),f=h+r.ageHeader,d=Math.min(f-r.partTarget,1.5*r.targetduration);if(0<d&&(n&&d>n.tuneInGoal?(this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+d+" with playlist age: "+r.age),d=0):(s+=f=Math.floor(d/r.targetduration),void 0!==u&&(u+=Math.round(d%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+h.toFixed(2)+"s goal: "+d+" skip sn "+f+" to part "+u)),r.tuneInGoal=d),l=this.getDeliveryDirectives(r,t.deliveryDirectives,s,u),c||!p)return void this.loadPlaylist(l)}else r.canBlockReload&&(l=this.getDeliveryDirectives(r,t.deliveryDirectives,s,u));n=this.hls.mainForwardBufferInfo,h=n?n.end-n.len:0,p=(void 0===(f=1e3*(r.edge-h))&&(f=1/0),d=1e3*r.targetduration,r.updated?(c=r.fragments).length&&f<4*d&&(f=1e3*c[c.length-1].duration)<d&&(d=f):d/=2,Math.round(d)),t=(r.updated&&o>this.requestScheduled+p&&(this.requestScheduled=a.loading.start),void 0!==s&&r.canBlockReload?this.requestScheduled=a.loading.first+p-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+p<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=p),this.requestScheduled-o),t=Math.max(0,t);this.log("reload live playlist "+e+" in "+Math.round(t)+" ms"),this.timer=self.setTimeout(function(){return i.loadPlaylist(l)},t)}}else this.clearTimer()},n.getDeliveryDirectives=function(e,t,n,i){s=n,r=e.canSkipUntil,a=e.canSkipDateRanges,o=e.endSN;var r,a,o,s=r&&(void 0!==s?s-o:0)<r?a?"v2":"YES":"";return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,s=""),new nn(n,i,s)},n.checkRetry=function(e){var t=this,n=e.details,i=_n(e),r=e.errorAction,a=r||{},o=a.action,s=a.retryCount,s=void 0===s?0:s,a=a.retryConfig,o=!!r&&!!a&&(5===o||!r.resolved&&2===o);if(o){if(this.requestScheduled=-1,s>=a.maxNumRetry)return!1;i&&null!=(i=e.context)&&i.deliveryDirectives?(this.warn("Retrying playlist loading "+(s+1)+"/"+a.maxNumRetry+' after "'+n+'" without delivery-directives'),this.loadPlaylist()):(i=vn(a,s),this.timer=self.setTimeout(function(){return t.loadPlaylist()},i),this.warn("Retrying playlist loading "+(s+1)+"/"+a.maxNumRetry+' after "'+n+'" in '+i+"ms")),e.levelRetry=!0,r.resolved=!0}return o},Nn),wn=((i=xn.prototype).sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},i.getTotalWeight=function(){return this.totalWeight_},i.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},xn),Rn=((i=Mn.prototype).update=function(e,t){var n=this.slow_,i=this.fast_,r=this.ttfb_;n.halfLife!==e&&(this.slow_=new wn(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new wn(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new wn(e,r.getEstimate(),r.getTotalWeight()))},i.sample=function(e,t){e=(e=Math.max(e,this.minDelayMs_))/1e3,t=8*t/e;this.fast_.sample(e,t),this.slow_.sample(e,t)},i.sampleTTFB=function(e){var t=e/1e3,t=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(t,Math.max(e,5))},i.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},i.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},i.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},i.destroy=function(){},Mn),i=((i=On.prototype).resetEstimator=function(e){e&&(ie.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.bwEstimator=this.initEstimator()},i.initEstimator=function(){var e=this.hls.config;return new Rn(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},i.registerListeners=function(){var e=this.hls;e.on(ee.FRAG_LOADING,this.onFragLoading,this),e.on(ee.FRAG_LOADED,this.onFragLoaded,this),e.on(ee.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ee.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ee.LEVEL_LOADED,this.onLevelLoaded,this)},i.unregisterListeners=function(){var e=this.hls;e.off(ee.FRAG_LOADING,this.onFragLoading,this),e.off(ee.FRAG_LOADED,this.onFragLoaded,this),e.off(ee.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ee.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ee.LEVEL_LOADED,this.onLevelLoaded,this)},i.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},i.onFragLoading=function(e,t){var n=t.frag;this.ignoreFragment(n)||(this.fragCurrent=n,this.partCurrent=null!=(n=t.part)?n:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},i.onLevelSwitching=function(e,t){this.clearTimer()},i.getTimeToLoadFrag=function(e,t,n,i){return e+n/t+(i?this.lastLevelLoadSec:0)},i.onLevelLoaded=function(e,t){var n=this.hls.config,i=t.stats,r=i.total,i=i.bwEstimate;G(r)&&G(i)&&(this.lastLevelLoadSec=8*r/i),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},i._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,r=n.media;if(e&&r){var a=performance.now(),o=(t||e).stats,s=(t||e).duration,a=a-o.loading.start;if(o.aborted||o.loaded&&o.loaded===o.total||0===e.level)this.clearTimer(),this._nextAutoLevel=-1;else if(i&&!r.paused&&r.playbackRate&&r.readyState){i=n.mainForwardBufferInfo;if(null!==i){var l=this.bwEstimator.getEstimateTTFB(),r=Math.abs(r.playbackRate);if(!(a<=Math.max(l,s/(2*r)*1e3))){var u=i.len/r;if(!(2*s/r<=u)){var i=o.loading.first?o.loading.first-o.loading.start:-1,r=o.loaded&&-1<i,c=this.getBwEstimate(),h=n.levels,d=n.minAutoLevel,f=h[e.level],f=o.total||Math.max(o.loaded,Math.round(s*f.maxBitrate/8)),p=a-i,p=(p<1&&r&&(p=Math.min(a,8*o.loaded/c)),r?1e3*o.loaded/p:0),f=p?(f-o.loaded)/p:8*f/c+l/1e3;if(!(f<=u)){for(var m=p?8*p:c,g=Number.POSITIVE_INFINITY,_=e.level-1;d<_;_--){var y=h[_].maxBitrate;if((g=this.getTimeToLoadFrag(l/1e3,m,s*y,!h[_].details))<u)break}f<=g||10*s<g||(n.nextLoadLevel=_,r?this.bwEstimator.sample(a-Math.min(l,i),o.loaded):this.bwEstimator.sampleTTFB(a),this.clearTimer(),ie.warn("[abr] Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly;\n      Time to underbuffer: "+u.toFixed(3)+" s\n      Estimated load time for current fragment: "+f.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+g.toFixed(3)+" s\n      TTFB estimate: "+i+"\n      Current BW estimate: "+(G(c)?(c/1024).toFixed(3):"Unknown")+" Kb/s\n      New BW estimate: "+(this.bwEstimator.getEstimate()/1024).toFixed(3)+" Kb/s\n      Aborting and switching to level "+_),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(ee.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o}))}}}}}}},i.onFragLoaded=function(e,t){var n,i,r,a=t.frag,t=t.part,o=(t||a).stats;a.type===_&&this.bwEstimator.sampleTTFB(o.loading.first-o.loading.start),this.ignoreFragment(a)||(this.clearTimer(),this.lastLoadedFragLevel=a.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(i=(t||a).duration,n=((r=this.hls.levels[a.level]).loaded?r.loaded.bytes:0)+o.loaded,i=(r.loaded?r.loaded.duration:0)+i,r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)),a.bitrateTest&&(r={stats:o,frag:a,part:t,id:a.type},this.onFragBuffered(ee.FRAG_BUFFERED,r),a.bitrateTest=!1))},i.onFragBuffered=function(e,t){var n,i=t.frag,t=t.part,t=(null!=t&&t.stats.loaded?t:i).stats;t.aborted||this.ignoreFragment(i)||(n=t.parsing.end-t.loading.start-Math.min(t.loading.first-t.loading.start,this.bwEstimator.getEstimateTTFB()),this.bwEstimator.sample(n,t.loaded),t.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0)},i.ignoreFragment=function(e){return e.type!==_||"initSegment"===e.sn},i.clearTimer=function(){self.clearInterval(this.timer)},i.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.maxAutoLevel,r=n.config,a=n.minAutoLevel,o=n.media,t=t?t.duration:e?e.duration:0,e=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,o=this.getBwEstimate(),n=n.mainForwardBufferInfo,n=(n?n.len:0)/e,e=this.findBestLevel(o,a,i,n,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(0<=e)return e;ie.trace("[abr] "+(n?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var s,l=t?Math.min(t,r.maxStarvationDelay):r.maxStarvationDelay,u=r.abrBandWidthFactor,c=r.abrBandWidthUpFactor;return n||(s=this.bitrateTestDelay)&&(l=(t?Math.min(t,r.maxLoadingDelay):r.maxLoadingDelay)-s,ie.trace("[abr] bitrate test took "+Math.round(1e3*s)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*l)+" ms"),u=c=1),e=this.findBestLevel(o,a,i,n+l,u,c),Math.max(e,0)},i.getBwEstimate=function(){return this.bwEstimator?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},i.findBestLevel=function(e,t,n,i,r,a){for(var o,s=this.fragCurrent,l=this.partCurrent,u=this.lastLoadedFragLevel,c=this.hls.levels,h=c[u],d=!(null==h||null==(o=h.details)||!o.live),f=null==h?void 0:h.codecSet,p=l?l.duration:s?s.duration:0,m=this.bwEstimator.getEstimateTTFB()/1e3,g=t,_=-1,y=n;t<=y;y--){var v=c[y];if(!v||f&&v.codecSet!==f)v&&(g=Math.min(y,g),_=Math.max(y,_));else{-1!==_&&ie.trace("[abr] Skipped level(s) "+g+"-"+_+' with CODECS:"'+c[_].attrs.CODECS+'"; not compatible with "'+h.attrs.CODECS+'"');var E,v=v.details,A=(l?null==v?void 0:v.partTarget:null==v?void 0:v.averagetargetduration)||p,b=c[y].maxBitrate,v=this.getTimeToLoadFrag(m,E=y<=u?r*e:a*e,b*A,void 0===v);if(ie.trace("[abr] level:"+y+" adjustedbw-bitrate:"+Math.round(E-b)+" avgDuration:"+A.toFixed(1)+" maxFetchDuration:"+i.toFixed(1)+" fetchDuration:"+v.toFixed(1)),b<E&&(v<=m||!G(v)||d&&!this.bitrateTestDelay||v<i))return y}}return-1},r(On,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;t=this.getNextABRAutoLevel();if(-1!==e){var n=this.hls.levels;if(n.length>Math.max(e,t)&&n[e].loadError<=n[t].loadError)return e}return t=-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}}]),On),In=((In=kn.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},In.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},In.onHandlerDestroyed=function(){},In.hasInterval=function(){return!!this._tickInterval},In.hasNextTick=function(){return!!this._tickTimer},In.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},In.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),!(this._tickInterval=null))},In.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),!(this._tickTimer=null))},In.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},In.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},In.doTick=function(){},kn),Cn="NOT_LOADED",Ln="PARTIAL",Pn=((a=Dn.prototype)._registerListeners=function(){var e=this.hls;e.on(ee.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ee.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ee.FRAG_LOADED,this.onFragLoaded,this)},a._unregisterListeners=function(){var e=this.hls;e.off(ee.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ee.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ee.FRAG_LOADED,this.onFragLoaded,this)},a.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},a.getAppendedFrag=function(e,t){var n=this.activePartLists[t];if(n)for(var i=n.length;i--;){var r=n[i];if(!r)break;var a=r.end;if(r.start<=e&&null!==a&&e<=a)return r}return this.getBufferedFrag(e,t)},a.getBufferedFrag=function(e,t){for(var n=this.fragments,i=Object.keys(n),r=i.length;r--;){var a=n[i[r]];if((null==a?void 0:a.body.type)===t&&a.buffered){a=a.body;if(a.start<=e&&e<=a.end)return a}}return null},a.detectEvictedFragments=function(n,i,r,e){var a=this,o=(this.timeRanges&&(this.timeRanges[n]=i),(null==e?void 0:e.fragment.sn)||-1);Object.keys(this.fragments).forEach(function(e){var t=a.fragments[e];!t||o>=t.body.sn||(t.buffered||t.loaded?(e=t.range[n])&&e.time.some(function(e){e=!a.isTimeBuffered(e.startPTS,e.endPTS,i);return e&&a.removeFragment(t.body),e}):t.body.type===r&&a.removeFragment(t.body))})},a.detectPartialFragments=function(e){var i,r,a=this,o=this.timeRanges,s=e.frag,l=e.part;o&&"initSegment"!==s.sn&&(e=Un(s),!(i=this.fragments[e])||i.buffered&&s.gap||(r=!s.relurl,Object.keys(o).forEach(function(e){var t,n=s.elementaryStreams[e];n&&(t=o[e],n=r||!0===n.partial,i.range[e]=a.getBufferedTimes(s,l,n,t))}),i.loaded=null,Object.keys(i.range).length?(i.buffered=!0,i.body.endList&&(this.endListFragments[i.body.type]=i),Bn(i)||this.removeParts(s.sn-1,s.type)):this.removeFragment(i.body)))},a.removeParts=function(t,e){var n=this.activePartLists[e];n&&(this.activePartLists[e]=n.filter(function(e){return e.fragment.sn>=t}))},a.fragBuffered=function(e,t){var n=Un(e),i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap)&&(this.hasGaps=!0),i&&(i.loaded=null,i.buffered=!0)},a.getBufferedTimes=function(e,t,n,i){for(var r={time:[],partial:n},a=e.start,o=e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,u=0;u<i.length;u++){var c=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(c<=l&&s<=h){r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}if(a<h&&c<o)r.partial=!0,r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});else if(o<=c)break}return r},a.getPartialFragment=function(t){var n,i,r=null,a=0,o=this.bufferPadding,s=this.fragments;return Object.keys(s).forEach(function(e){e=s[e];e&&Bn(e)&&(n=e.body.start-o,i=e.body.end+o,n<=t)&&t<=i&&(n=Math.min(t-n,i-t),a<=n)&&(r=e.body,a=n)}),r},a.isEndListAppended=function(e){e=this.endListFragments[e];return void 0!==e&&(e.buffered||Bn(e))},a.getState=function(e){e=Un(e),e=this.fragments[e];return e?e.buffered?Bn(e)?Ln:"OK":"APPENDING":Cn},a.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,i<=e&&t<=r)return!0;if(t<=i)return!1}return!1},a.onFragLoaded=function(e,t){var n,i=t.frag,r=t.part;"initSegment"===i.sn||i.bitrateTest||(n=Un(i),this.fragments[n]={body:i,appendedPTS:null,loaded:r?null:t,buffered:!1,range:Object.create(null)})},a.onBufferAppended=function(e,t){var n,i=this,r=t.frag,a=t.part,o=t.timeRanges;"initSegment"!==r.sn&&(n=r.type,a&&((t=this.activePartLists[n])||(this.activePartLists[n]=t=[]),t.push(a)),this.timeRanges=o,Object.keys(o).forEach(function(e){var t=o[e];i.detectEvictedFragments(e,t,n,a)}))},a.onFragBuffered=function(e,t){this.detectPartialFragments(t)},a.hasFragment=function(e){e=Un(e);return!!this.fragments[e]},a.hasParts=function(e){return!(null==(e=this.activePartLists[e])||!e.length)},a.removeFragmentsInRange=function(n,i,r,a,o){var s=this;a&&!this.hasGaps||Object.keys(this.fragments).forEach(function(e){var t,e=s.fragments[e];!e||(t=e.body).type!==r||a&&!t.gap||t.start<i&&t.end>n&&(e.buffered||o)&&s.removeFragment(t)})},a.removeFragment=function(e){var t,n=Un(e),i=(e.stats.loaded=0,e.clearElementaryStreamInfo(),this.activePartLists[e.type]);i&&(t=e.sn,this.activePartLists[e.type]=i.filter(function(e){return e.fragment.sn!==t})),delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]},a.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},Dn);function Dn(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}function kn(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}function On(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}function Mn(e,t,n,i){void 0===i&&(i=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new wn(e),this.fast_=new wn(t),this.defaultTTFB_=i,this.ttfb_=new wn(e)}function xn(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}function Nn(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=ie.log.bind(ie,t+":"),this.warn=ie.warn.bind(ie,t+":"),this.hls=e}function Fn(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=ie.log.bind(ie,"[info]:"),this.warn=ie.warn.bind(ie,"[warning]:"),this.error=ie.error.bind(ie,"[error]:"),this.registerListeners()}function Bn(e){var t;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(t=e.range.audio)?void 0:t.partial)||(null==(t=e.range.audiovideo)?void 0:t.partial))}function Un(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}function jn(e,t,n,i,r,a){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=a}var Gn={length:0,start:function(){return 0},end:function(){return 0}},y=(Vn.isBuffered=function(e,t){try{if(e)for(var n=Vn.getBuffered(e),i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}catch(e){}return!1},Vn.bufferInfo=function(e,t,n){try{if(e){for(var i=Vn.getBuffered(e),r=[],a=0;a<i.length;a++)r.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(r,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},Vn.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort(function(e,t){return e.start-t.start||t.end-e.end});var i=[];if(n)for(var r=0;r<e.length;r++){var a,o=i.length;o&&(a=i[o-1].end,e[r].start-a<n)?e[r].end>a&&(i[o-1].end=e[r].end):i.push(e[r])}else i=e;for(var s,l=0,u=t,c=t,h=0;h<i.length;h++){var d=i[h].start,f=i[h].end;if(d<=t+n&&t<f)u=d,l=(c=f)-t;else if(t+n<d){s=d;break}}return{len:l,start:u||0,end:c||0,nextStart:s}},Vn.getBuffered=function(e){try{return e.buffered}catch(e){return ie.log("failed to get media.buffered",e),Gn}},Vn);function Vn(){}function Hn(e,t){for(var n,i=0,r=e.length;i<r;i++)if((null==(n=e[i])?void 0:n.cc)===t)return e[i];return null}function Yn(e,t){e&&(t=e.start+t,e.start=e.startPTS=t,e.endPTS=t+e.duration)}function zn(e,t){for(var n=t.fragments,i=0,r=n.length;i<r;i++)Yn(n[i],e);t.fragmentHint&&Yn(t.fragmentHint,e),t.alignedSliding=!0}function Wn(e,t){var n,i,r,a,o;e.hasProgramDateTime&&t.hasProgramDateTime&&(n=e.fragments,i=t.fragments,n.length)&&i.length&&(o=Math.min(t.endCC,e.endCC),t.startCC<o&&e.startCC<o&&(r=Hn(i,o),a=Hn(n,o)),r&&a||(a=Hn(n,(r=i[Math.floor(i.length/2)]).cc)||n[Math.floor(n.length/2)]),t=r.programDateTime,o=a.programDateTime,t)&&o&&zn((o-t)/1e3-(a.start-r.start),e)}var Kn=Math.pow(2,17),qn=((a=Qn.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},a.abort=function(){this.loader&&this.loader.abort()},a.load=function(s,l){var u=this,c=s.url;if(!c)return Promise.reject(new ei({type:te.NETWORK_ERROR,details:ne.FRAG_LOAD_ERROR,fatal:!1,frag:s,error:new Error("Fragment does not have a "+(c?"part list":"url")),networkDetails:null}));this.abort();var n=this.config,h=n.fLoader,d=n.loader;return new Promise(function(r,a){if(u.loader&&u.loader.destroy(),s.gap){if(s.tagList.some(function(e){return"GAP"===e[0]}))return void a(Jn(s));s.gap=!1}var o=u.loader=s.loader=new(h||d)(n),e=Xn(s),t=En(n.fragLoadPolicy.default),i={loadPolicy:t,timeout:t.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===s.sn?1/0:Kn};s.stats=o.stats,o.load(e,i,{onSuccess:function(e,t,n,i){u.resetLoader(s,o);e=e.data;n.resetIV&&s.decryptdata&&(s.decryptdata.iv=new Uint8Array(e.slice(0,16)),e=e.slice(16)),r({frag:s,part:null,payload:e,networkDetails:i})},onError:function(e,t,n,i){u.resetLoader(s,o),a(new ei({type:te.NETWORK_ERROR,details:ne.FRAG_LOAD_ERROR,fatal:!1,frag:s,response:m({url:c,data:void 0},e),error:new Error("HTTP Error "+e.code+" "+e.text),networkDetails:n,stats:i}))},onAbort:function(e,t,n){u.resetLoader(s,o),a(new ei({type:te.NETWORK_ERROR,details:ne.INTERNAL_ABORTED,fatal:!1,frag:s,error:new Error("Aborted"),networkDetails:n,stats:e}))},onTimeout:function(e,t,n){u.resetLoader(s,o),a(new ei({type:te.NETWORK_ERROR,details:ne.FRAG_LOAD_TIMEOUT,fatal:!1,frag:s,error:new Error("Timeout after "+i.timeout+"ms"),networkDetails:n,stats:e}))},onProgress:function(e,t,n,i){l&&l({frag:s,part:null,payload:n,networkDetails:i})}})})},a.loadPart=function(l,u,c){var h=this,t=(this.abort(),this.config),n=t.fLoader,d=t.loader;return new Promise(function(r,a){var o,s,e,i;h.loader&&h.loader.destroy(),l.gap||u.gap?a(Jn(l,u)):(o=h.loader=l.loader=new(n||d)(t),s=Xn(l,u),e=En(t.fragLoadPolicy.default),i={loadPolicy:e,timeout:e.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Kn},u.stats=o.stats,o.load(s,i,{onSuccess:function(e,t,n,i){h.resetLoader(l,o),h.updateStatsFromPart(l,u);e={frag:l,part:u,payload:e.data,networkDetails:i};c(e),r(e)},onError:function(e,t,n,i){h.resetLoader(l,o),a(new ei({type:te.NETWORK_ERROR,details:ne.FRAG_LOAD_ERROR,fatal:!1,frag:l,part:u,response:m({url:s.url,data:void 0},e),error:new Error("HTTP Error "+e.code+" "+e.text),networkDetails:n,stats:i}))},onAbort:function(e,t,n){l.stats.aborted=u.stats.aborted,h.resetLoader(l,o),a(new ei({type:te.NETWORK_ERROR,details:ne.INTERNAL_ABORTED,fatal:!1,frag:l,part:u,error:new Error("Aborted"),networkDetails:n,stats:e}))},onTimeout:function(e,t,n){h.resetLoader(l,o),a(new ei({type:te.NETWORK_ERROR,details:ne.FRAG_LOAD_TIMEOUT,fatal:!1,frag:l,part:u,error:new Error("Timeout after "+i.timeout+"ms"),networkDetails:n,stats:e}))}}))})},a.updateStatsFromPart=function(e,t){var n=e.stats,i=t.stats,r=i.total,e=(n.loaded+=i.loaded,r?(r=((e=Math.round(e.duration/t.duration))-(t=Math.min(Math.round(n.loaded/r),e)))*Math.round(n.loaded/t),n.total=n.loaded+r):n.total=Math.max(n.loaded,n.total),n.loading),t=i.loading;e.start?e.first+=t.first-t.start:(e.start=t.start,e.first=t.first),e.end=t.end},a.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},Qn);function Qn(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}function Xn(e,t){var n,i,r=(t=void 0===t?null:t)||e,t={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},a=r.byteRangeStartOffset,r=r.byteRangeEndOffset;return G(a)&&G(r)&&(n=a,i=r,"initSegment"===e.sn&&"AES-128"===(null==(e=e.decryptdata)?void 0:e.method)&&((e=r-a)%16&&(i=r+(16-e%16)),0!==a)&&(t.resetIV=!0,n=a-16),t.rangeStart=n,t.rangeEnd=i),t}function Jn(e,t){var n=new Error("GAP "+(e.gap?"tag":"attribute")+" found"),n={type:te.MEDIA_ERROR,details:ne.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(n.part=t),(t||e).stats.aborted=!0,new ei(n)}e(Ti,$n=O(Error));var Zn,$n,ei=Ti,ti=(bi.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},bi),ni=(Ai.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},Ai),ii=((a=Ei.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},a.initTable=function(){for(var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],n=this.invSubMix,s=n[0],l=n[1],u=n[2],c=n[3],h=new Uint32Array(256),d=0,f=0,p=0,p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var m=f^f<<1^f<<2^f<<3^f<<4,g=(e[d]=m=m>>>8^255&m^99,h[t[m]=d]),_=h[g],y=h[_],v=257*h[m]^16843008*m;i[d]=v<<24|v>>>8,r[d]=v<<16|v>>>16,a[d]=v<<8|v>>>24,o[d]=v,s[m]=(v=16843009*y^65537*_^257*g^16843008*d)<<24|v>>>8,l[m]=v<<16|v>>>16,u[m]=v<<8|v>>>24,c[m]=v,d?(d=g^h[h[h[y^g]]],f^=h[h[f]]):d=f=1}},a.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var a,o,s,l=this.ksRows=4*(r+6+1),u=this.keySchedule=new Uint32Array(l),c=this.invKeySchedule=new Uint32Array(l),h=this.sBox,d=this.rcon,e=this.invSubMix,f=e[0],p=e[1],m=e[2],g=e[3],_=0;_<l;_++)_<r?o=u[_]=t[_]:(s=o,_%r==0?(s=h[(s=s<<8|s>>>24)>>>24]<<24|h[s>>>16&255]<<16|h[s>>>8&255]<<8|h[255&s],s^=d[_/r|0]<<24):6<r&&_%r==4&&(s=h[s>>>24]<<24|h[s>>>16&255]<<16|h[s>>>8&255]<<8|h[255&s]),u[_]=o=(u[_-r]^s)>>>0);for(a=0;a<l;a++)_=l-a,s=3&a?u[_]:u[_-4],c[a]=a<4||_<=4?s:f[h[s>>>24]]^p[h[s>>>16&255]]^m[h[s>>>8&255]]^g[h[255&s]],c[a]=c[a]>>>0}},a.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},a.decrypt=function(e,t,n){for(var i,r,a,o,s,l,u,c,h,d,f,p,m,g,_=this.keySize+6,y=this.invKeySchedule,v=this.invSBox,E=this.invSubMix,A=E[0],b=E[1],T=E[2],S=E[3],E=this.uint8ArrayToUint32Array_(n),w=E[0],R=E[1],I=E[2],C=E[3],L=new Int32Array(e),P=new Int32Array(L.length),D=this.networkToHostOrderSwap;t<L.length;){for(h=D(L[t]),d=D(L[t+1]),f=D(L[t+2]),p=D(L[t+3]),s=h^y[0],l=p^y[1],u=f^y[2],c=d^y[3],m=4,g=1;g<_;g++)i=A[s>>>24]^b[l>>16&255]^T[u>>8&255]^S[255&c]^y[m],r=A[l>>>24]^b[u>>16&255]^T[c>>8&255]^S[255&s]^y[m+1],a=A[u>>>24]^b[c>>16&255]^T[s>>8&255]^S[255&l]^y[m+2],o=A[c>>>24]^b[s>>16&255]^T[l>>8&255]^S[255&u]^y[m+3],s=i,l=r,u=a,c=o,m+=4;i=v[s>>>24]<<24^v[l>>16&255]<<16^v[u>>8&255]<<8^v[255&c]^y[m],r=v[l>>>24]<<24^v[u>>16&255]<<16^v[c>>8&255]<<8^v[255&s]^y[m+1],a=v[u>>>24]<<24^v[c>>16&255]<<16^v[s>>8&255]<<8^v[255&l]^y[m+2],o=v[c>>>24]<<24^v[s>>16&255]<<16^v[l>>8&255]<<8^v[255&u]^y[m+3],P[t]=D(i^w),P[t+1]=D(o^R),P[t+2]=D(a^I),P[t+3]=D(r^C),w=h,R=d,I=f,C=p,t+=4}return P.buffer},Ei),ri=((a=vi.prototype).destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},a.isSync=function(){return this.useSoftware},a.flush=function(){var e,t,n=this.currentResult,i=this.remainderData;return!n||i?(this.reset(),null):(i=new Uint8Array(n),this.reset(),this.removePKCS7Padding?(t=(e=(n=i).byteLength)&&new DataView(n.buffer).getUint8(e-1))?De(n,0,e-t):n:i)},a.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},a.decrypt=function(i,r,a){var o=this;return this.useSoftware?new Promise(function(e,t){o.softwareDecrypt(new Uint8Array(i),r,a);var n=o.flush();n?e(n.buffer):t(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(i),r,a)},a.softwareDecrypt=function(e,t,n){var i=this.currentIV,r=this.currentResult,a=this.remainderData,a=(this.logOnce("JS AES decrypt"),a&&(e=tt(a,e),this.remainderData=null),this.getValidChunk(e));if(!a.length)return null;i&&(n=i);e=this.softwareDecrypter,(e=e||(this.softwareDecrypter=new ii)).expandKey(t),i=r;return this.currentResult=e.decrypt(a.buffer,0,n),this.currentIV=De(a,-16).buffer,i||null},a.webCryptoDecrypt=function(t,n,i){var r=this,a=this.subtle;return this.key===n&&this.fastAesKey||(this.key=n,this.fastAesKey=new ni(a,n)),this.fastAesKey.expandKey().then(function(e){return a?(r.logOnce("WebCrypto AES decrypt"),new ti(a,new Uint8Array(i)).decrypt(t.buffer,e)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(e){return ie.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+e.name+": "+e.message),r.onWebCryptoError(t,n,i)})},a.onWebCryptoError=function(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);e=this.flush();if(e)return e.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},a.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=De(e,0,n),this.remainderData=De(e,n)),t},a.logOnce=function(e){this.logEnabled&&(ie.log("[decrypter]: "+e),this.logEnabled=!1)},vi),ai="STOPPED",h="IDLE",oi="KEY_LOADING",si="FRAG_LOADING",li="FRAG_LOADING_WAITING_RETRY",ui="WAITING_TRACK",ci="PARSING",hi="PARSED",di="ENDED",fi="ERROR",pi="WAITING_INIT_PTS",mi="WAITING_LEVEL",In=(e(yi,Zn=In),(a=yi.prototype).doTick=function(){this.onTickEnd()},a.onTickEnd=function(){},a.startLoad=function(e){},a.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ai},a._streamEnded=function(e,t){return!(t.live||e.nextStart||!e.end||!this.media)&&(null!=(e=t.partList)&&e.length?(e=e[e.length-1],y.isBuffered(this.media,e.start+e.duration/2)):(e=t.fragments[t.fragments.length-1].type,this.fragmentTracker.isEndListAppended(e)))},a.getLevelDetails=function(){var e;return!this.levels||null===this.levelLastLoaded||null==(e=this.levels[this.levelLastLoaded])?void 0:e.details},a.onMediaAttached=function(e,t){t=this.media=this.mediaBuffer=t.media,this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended),t=this.config;this.levels&&t.autoStartLoad&&this.state===ai&&this.startLoad(t.startPosition)},a.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},a.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,i=this.mediaBuffer,r=this.state,a=n?n.currentTime:0,i=y.bufferInfo(i||n,a,e.maxBufferHole);this.log("media seeking to "+(G(a)?a.toFixed(3):a)+", state: "+r),this.state===di?this.resetLoadingState():t&&(r=e.maxFragLookUpTolerance,e=t.start-r,r=t.start+t.duration+r,!i.len||r<i.start||e>i.end)&&(r=r<a,a<e||r)&&(r&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null),n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||i.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},a.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},a.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]},a.onHandlerDestroying=function(){this.stopLoad(),Zn.prototype.onHandlerDestroying.call(this)},a.onHandlerDestroyed=function(){this.state=ai,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,Zn.prototype.onHandlerDestroyed.call(this)},a.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},a._loadFragForPlayback=function(n,e,t){var i=this;this._doFragLoad(n,e,t,function(e){i.fragContextChanged(n)?(i.warn("Fragment "+n.sn+(e.part?" p: "+e.part.index:"")+" of level "+n.level+" was dropped during download."),i.fragmentTracker.removeFragment(n)):(n.stats.chunkCount++,i._handleFragmentLoadProgress(e))}).then(function(e){var t;e&&(t=i.state,i.fragContextChanged(n)?t!==si&&(i.fragCurrent||t!==ci)||(i.fragmentTracker.removeFragment(n),i.state=h):("payload"in e&&(i.log("Loaded fragment "+n.sn+" of level "+n.level),i.hls.trigger(ee.FRAG_LOADED,e)),i._handleFragmentLoadComplete(e)))}).catch(function(e){i.state!==ai&&i.state!==fi&&(i.warn(e),i.resetFragmentLoading(n))})},a.clearTrackerIfNeeded=function(e){var t,n=this.fragmentTracker;"APPENDING"===n.getState(e)?(t=e.type,t=this.getFwdBufferInfo(this.mediaBuffer,t),t=Math.max(e.duration,t?t.len:this.config.maxBufferLength),this.reduceMaxBufferLength(t)&&n.removeFragment(e)):0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Ln)&&n.removeFragment(e)},a.flushMainBuffer=function(e,t,n){void 0===n&&(n=null),e-t&&this.hls.trigger(ee.BUFFER_FLUSHING,{startOffset:e,endOffset:t,type:n})},a._loadInitSegment=function(a,n){var o=this;this._doFragLoad(a,n).then(function(e){if(e&&!o.fragContextChanged(a)&&o.levels)return e;throw new Error("init load aborted")}).then(function(n){var i,r=o.hls,e=n.payload,t=a.decryptdata;return e&&0<e.byteLength&&t&&t.key&&t.iv&&"AES-128"===t.method?(i=self.performance.now(),o.decrypter.decrypt(new Uint8Array(e),t.key.buffer,t.iv.buffer).catch(function(e){throw r.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:a}),e}).then(function(e){var t=self.performance.now();return r.trigger(ee.FRAG_DECRYPTED,{frag:a,payload:e,stats:{tstart:i,tdecrypt:t}}),n.payload=e,n})):n}).then(function(e){if(!o.levels)throw new Error("init load aborted, missing levels");var t=a.stats;o.state=h,n.fragmentError=0,a.data=new Uint8Array(e.payload),t.parsing.start=t.buffering.start=self.performance.now(),t.parsing.end=t.buffering.end=self.performance.now(),o.tick()}).catch(function(e){o.state!==ai&&o.state!==fi&&(o.warn(e),o.resetFragmentLoading(a))})},a.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},a.fragBufferedComplete=function(e,t){var n=this.mediaBuffer||this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+(this.playlistType===_?"level":"track")+" "+e.level+" (frag:["+(null!=(t=e.startPTS)?t:NaN).toFixed(3)+"-"+(null!=(t=e.endPTS)?t:NaN).toFixed(3)+"] > buffer:"+(n?function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+"-"+e.end(i).toFixed(3)+"]";return t}(y.getBuffered(n)):"(detached)")+")"),this.state=h,n&&(!this.loadedmetadata&&e.type==_&&n.buffered.length&&(null==(t=this.fragCurrent)?void 0:t.sn)===(null==(e=this.fragPrevious)?void 0:e.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},a.seekToStartPos=function(){},a._handleFragmentLoadComplete=function(e){var t,n,i=this.transmuxer;i&&(n=e.frag,t=e.part,e=!(e=e.partsLoaded)||0===e.length||e.some(function(e){return!e}),n=new jn(n.level,n.sn,n.stats.chunkCount+1,0,t?t.index:-1,!e),i.flush(n))},a._handleFragmentLoadProgress=function(e){},a._doFragLoad=function(t,n,e,i){var r=this,a=(void 0===e&&(e=null),null==n?void 0:n.details);if(!this.levels||!a)throw new Error("frag load aborted, missing level"+(a?"":" detail")+"s");var o=null;if(!t.encrypted||null!=(s=t.decryptdata)&&s.key?!t.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(t,a.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+a.startSN+"-"+a.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=oi,this.fragCurrent=t,o=this.keyLoader.load(t).then(function(e){if(!r.fragContextChanged(e.frag))return r.hls.trigger(ee.KEY_LOADED,e),r.state===oi&&(r.state=h),e}),this.hls.trigger(ee.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),e=Math.max(t.start,e||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){var s=a.partList;if(s&&i){e>t.end&&a.fragmentHint&&(t=a.fragmentHint);var l,u=this.getNextPart(s,t,e);if(-1<u)return l=s[u],this.log("Loading part sn: "+t.sn+" p: "+l.index+" cc: "+t.cc+" of playlist ["+a.startSN+"-"+a.endSN+"] parts [0-"+u+"-"+(s.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(e.toFixed(3))),this.nextLoadPosition=l.start+l.duration,this.state=si,u=o?o.then(function(e){return!e||r.fragContextChanged(e.frag)?null:r.doFragPartsLoad(t,l,n,i)}).catch(function(e){return r.handleFragLoadError(e)}):this.doFragPartsLoad(t,l,n,i).catch(function(e){return r.handleFragLoadError(e)}),this.hls.trigger(ee.FRAG_LOADING,{frag:t,part:l,targetBufferTime:e}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):u;if(!t.url||this.loadedEndOfParts(s,e))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(a?"of ["+a.startSN+"-"+a.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(e.toFixed(3))),G(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=si;var c=this.config.progressive,u=c&&o?o.then(function(e){return!e||r.fragContextChanged(null==e?void 0:e.frag)?null:r.fragmentLoader.load(t,i)}).catch(function(e){return r.handleFragLoadError(e)}):Promise.all([this.fragmentLoader.load(t,c?i:void 0),o]).then(function(e){e=e[0];return!c&&e&&i&&i(e),e}).catch(function(e){return r.handleFragLoadError(e)});return this.hls.trigger(ee.FRAG_LOADING,{frag:t,targetBufferTime:e}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u},a.doFragPartsLoad=function(s,n,l,u){var c=this;return new Promise(function(r,e){var t,a=[],o=null==(t=l.details)?void 0:t.partList;!function n(i){c.fragmentLoader.loadPart(s,i,u).then(function(e){var t=(a[i.index]=e).part,e=(c.hls.trigger(ee.FRAG_LOADED,e),mn(l,s.sn,i.index+1)||gn(o,s.sn,i.index+1));if(!e)return r({frag:s,part:t,partsLoaded:a});n(e)}).catch(e)}(n)})},a.handleFragLoadError=function(e){var t;return"data"in e?(t=e.data,e.data&&t.details===ne.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(ee.ERROR,t)):this.hls.trigger(ee.ERROR,{type:te.OTHER_ERROR,details:ne.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0}),null},a._handleTransmuxerFlush=function(e){var t,n,i,r=this.getCurrentContext(e);r&&this.state===ci?(t=r.frag,n=r.part,r=r.level,i=self.performance.now(),t.stats.parsing.end=i,n&&(n.stats.parsing.end=i),this.updateLevelTiming(t,n,r,e.partial)):this.fragCurrent||this.state===ai||this.state===fi||(this.state=h)},a.getCurrentContext=function(e){var t,n,i=this.levels,r=this.fragCurrent,a=e.level,o=e.sn,e=e.part;return null!=i&&i[a]?(i=i[a],(n=(e=-1<e?mn(i,o,e):null)?e.fragment:null!=i&&i.details?(t=i.details).fragments[o-t.startSN]||((n=t.fragmentHint)&&n.sn===o?n:o<t.startSN&&r&&r.sn===o?r:null):null)?(r&&r!==n&&(n.stats=r.stats),{frag:n,part:e,level:i}):null):(this.warn("Levels object was unset while buffering fragment "+o+" of level "+a+". The current chunk will not be buffered."),null)},a.bufferFragmentData=function(e,t,n,i,r){var a,o,s;e&&this.state===ci&&(s=e.data1,a=e.data2,null!=(o=(o=s)&&a?tt(s,a):o))&&o.length&&(s={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:o},this.hls.trigger(ee.BUFFER_APPENDING,s),e.dropped)&&e.independent&&!n&&!r&&this.flushBufferGap(t)},a.flushBufferGap=function(e){var t,n,i=this.media;i&&(y.isBuffered(i,i.currentTime)?(t=i.currentTime,i=y.bufferInfo(i,t,0),n=e.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),i=Math.max(Math.min(e.start-n,i.end-n),t+n),e.start-i>n&&this.flushMainBuffer(i,e.start)):this.flushMainBuffer(0,e.start))},a.getFwdBufferInfo=function(e,t){var n=this.getLoadPosition();return G(n)?this.getFwdBufferInfoAtPos(e,n,t):null},a.getFwdBufferInfoAtPos=function(e,t,n){var i=this.config.maxBufferHole,r=y.bufferInfo(e,t,i);if(0===r.len&&void 0!==r.nextStart){n=this.fragmentTracker.getBufferedFrag(t,n);if(n&&r.nextStart<n.end)return y.bufferInfo(e,t,Math.max(r.nextStart,i))}return r},a.getMaxBufferLength=function(e){var t=this.config,e=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength;return Math.min(e,t.maxMaxBufferLength)},a.reduceMaxBufferLength=function(e){var t=this.config,e=e||t.maxBufferLength;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},a.getAppendedFrag=function(e,t){e=this.fragmentTracker.getAppendedFrag(e,_);return e&&"fragment"in e?e.fragment:e},a.getNextFragment=function(e,t){var n=t.fragments,i=n.length;if(!i)return null;var r,a=this.config,o=n[0].start;if(t.live){var s=a.initialLiveManifestSize;if(i<s)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+s+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,n),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=o&&(r=n[0]);return r||(i=a.lowLatencyMode?t.partEnd:t.fragmentEnd,r=this.getFragmentAtPosition(e,i,t)),this.mapToInitFragWhenRequired(r)},a.isLoopLoading=function(e,t){var n=this.fragmentTracker.getState(e);return("OK"===n||n===Ln&&!!e.gap)&&this.nextLoadPosition>t},a.getNextFragmentLoopLoading=function(e,t,n,i,r){var a=e.gap,t=this.getNextFragment(this.nextLoadPosition,t);if(null===t)return t;if(e=t,a&&e&&!e.gap&&n.nextStart){t=this.getFwdBufferInfoAtPos(this.mediaBuffer||this.media,n.nextStart,i);if(null!==t&&n.len+t.len>=r)return this.log('buffer full after gaps in "'+i+'" playlist starting at sn: '+e.sn),null}return e},a.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},a.getNextPart=function(e,t,n){for(var i=-1,r=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o],a=a&&!l.independent;if(-1<i&&n<l.start)break;var u=l.loaded;u?i=-1:(r||l.independent||a)&&l.fragment===t&&(i=o),r=u}return i},a.loadedEndOfParts=function(e,t){e=e[e.length-1];return e&&t>e.start&&e.loaded},a.getInitialLiveFragment=function(e,t){var n,i,r=this.fragPrevious,a=null;return r?(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(e,t,n){if(null!==t&&Array.isArray(e)&&e.length&&G(t)&&!(t<(e[0].programDateTime||0)||t>=(e[e.length-1].endProgramDateTime||0))){n=n||0;for(var i,r,a,o=0;o<e.length;++o){var s=e[o];if(i=t,r=n,a=s,r=1e3*Math.min(n,a.duration+(a.deltaPTS||0)),(a.endProgramDateTime||0)-r>i)return s}}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),a||((n=r.sn+1)>=e.startSN&&n<=e.endSN&&(n=t[n-e.startSN],r.cc===n.cc)&&this.log("Live playlist, switching playlist, load frag with next SN: "+(a=n).sn),!a&&(i=r.cc,a=bn(t,function(e){return e.cc<i?1:e.cc>i?-1:0}))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn))):null!==(n=this.hls.liveSyncPosition)&&(a=this.getFragmentAtPosition(n,this.bitrateTest?e.fragmentEnd:e.edge,e)),a},a.getFragmentAtPosition=function(e,t,n){var i=this.config,r=this.fragPrevious,a=n.fragments,o=n.endSN,s=n.fragmentHint,l=i.maxFragLookUpTolerance,u=n.partList,i=!!(i.lowLatencyMode&&null!=u&&u.length&&s);return i&&s&&!this.bitrateTest&&(a=a.concat(s),o=s.sn),(s=e<t?Tn(r,a,e,t-l<e?0:l):a[a.length-1])&&(t=s.sn-n.startSN,r="OK"===(e=this.fragmentTracker.getState(s))||e===Ln&&s.gap?s:r)&&s.sn===r.sn&&(!i||u[0].fragment.sn>s.sn)&&r&&s.level===r.level&&(l=a[1+t],s=s.sn<o&&"OK"!==this.fragmentTracker.getState(l)?l:null),s},a.synchronizeToLiveEdge=function(e){var t,n,i,r,a=this.config,o=this.media;o&&(t=this.hls.liveSyncPosition,n=o.currentTime,r=e.fragments[0].start,i=e.edge,r=n>=r-a.maxFragLookUpTolerance&&n<=i,null!==t)&&o.duration>t&&(n<t||!r)&&(a=void 0!==a.liveMaxLatencyDuration?a.liveMaxLatencyDuration:a.liveMaxLatencyDurationCount*e.targetduration,!r&&o.readyState<4||n<i-a)&&(this.loadedmetadata||(this.nextLoadPosition=t),o.readyState)&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+i+", reset currentTime to : "+t.toFixed(3)),o.currentTime=t)},a.alignPlaylists=function(e,t){var n,i,r,a,o,s=this.levels,l=this.levelLastLoaded,u=this.fragPrevious,s=null!==l?s[l]:null,l=e.fragments.length;return l?(n=e.fragments[0].start,i=!t,r=e.alignedSliding&&G(n),i||!r&&!n?(i=u,r=e,(s=s)&&(i=i,a=r,(o=s).details&&(a.endCC>a.startCC||i&&i.cc<a.startCC)&&(i=function(){var e=o.details.fragments,t=a.fragments;if(t.length&&e.length){e=Hn(e,t[0].cc);if(e&&(!e||e.startPTS))return e;ie.log("No frag in previous level to align on")}else ie.log("No fragments to align")}())&&G(i.start)&&(ie.log("Adjusting PTS using last level due to CC increase within current level "+a.url),zn(i.start,a)),!r.alignedSliding&&s.details&&Wn(r,s.details),r.alignedSliding||!s.details||r.skippedSegments||fn(s.details,r)),i=e.fragments[0].start,this.log("Live playlist sliding: "+i.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(u?u.sn:"na")+" fragments: "+l),i):n):(this.warn("No fragments in live playlist"),0)},a.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},a.setStartPosition=function(e,t){var n,i,r=this.startPosition;-1!==(r=r<t?-1:r)&&-1!==this.lastCurrentTime||(null!==(i=((n=null!==this.startTimeOffset)?this:e).startTimeOffset)&&G(i)?(r=t+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Start time offset "+i+" found in "+(n?"multivariant":"media")+" playlist, adjust startPosition to "+r),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r),this.nextLoadPosition=r},a.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},a.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},a.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===li)||(this.state=h)},a.onFragmentOrKeyLoadError=function(e,t){t.chunkMeta&&!t.frag&&(n=this.getCurrentContext(t.chunkMeta))&&(t.frag=n.frag);var n=t.frag;if(n&&n.type===e&&this.levels)if(this.fragContextChanged(n))this.warn("Frag load error must match current frag to retry "+n.url+" > "+(null==(i=this.fragCurrent)?void 0:i.url));else{var i=t.details===ne.FRAG_GAP,r=(i&&this.fragmentTracker.fragBuffered(n,!0),t.errorAction),a=r||{},o=a.action,s=a.retryCount,s=void 0===s?0:s,a=a.retryConfig;if(r&&5===o&&a){this.resetStartWhenNotLoaded(null!=(l=this.levelLastLoaded)?l:n.level);var l=vn(a,s);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" errored with "+t.details+", retrying loading "+(s+1)+"/"+a.maxNumRetry+" in "+l+"ms"),r.resolved=!0,this.retryDate=self.performance.now()+l,this.state=li}else if(a&&r){if(this.resetFragmentErrors(e),!(s<a.maxNumRetry))return void ie.warn(t.details+" reached or exceeded max retry ("+s+")");i||3===o||(r.resolved=!0)}else 2===(null==r?void 0:r.action)?this.state=mi:this.state=fi;this.tickImmediate()}},a.reduceLengthAndFlushBuffer=function(e){var t,n,i;return(this.state===ci||this.state===hi)&&(t=e.parent,(n=(i=this.getFwdBufferInfo(this.mediaBuffer,t))&&.5<i.len)&&this.reduceMaxBufferLength(i.len),(i=!n)&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+t+" buffer"),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),i)},a.resetFragmentErrors=function(e){e===Bt&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ai&&(this.state=h)},a.afterBufferFlushed=function(e,t,n){e&&(e=y.getBuffered(e),this.fragmentTracker.detectEvictedFragments(t,e,n),this.state===di)&&this.resetLoadingState()},a.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=h},a.resetStartWhenNotLoaded=function(e){this.loadedmetadata||(this.startFragRequested=!1,null!=(e=this.levels?this.levels[e].details:null)&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition)},a.resetWhenMissingContext=function(e){var t;this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:e.level),this.resetLoadingState()},a.removeUnbufferedFrags=function(e){this.fragmentTracker.removeFragmentsInRange(e=void 0===e?0:e,1/0,this.playlistType,!1,!0)},a.updateLevelTiming=function(r,e,a,o){var s=this,l=a.details;if(l){if(Object.keys(r.elementaryStreams).reduce(function(e,t){var n,i=r.elementaryStreams[t];return i?(n=i.endPTS-i.startPTS)<=0?(s.warn("Could not parse fragment "+r.sn+" "+t+" duration reliably ("+n+")"),e||!1):(n=o?0:hn(l,r,i.startPTS,i.endPTS,i.startDTS,i.endDTS),s.hls.trigger(ee.LEVEL_PTS_UPDATED,{details:l,level:a,drift:n,type:t,frag:r,start:i.startPTS,end:i.endPTS}),!0):e},!1))a.fragmentError=0;else if(null===(null==(t=this.transmuxer)?void 0:t.error)){var t=new Error("Found no media in fragment "+r.sn+" of level "+r.level+" resetting transmuxer to fallback to playlist timing");if(0===a.fragmentError&&(a.fragmentError++,r.gap=!0,this.fragmentTracker.removeFragment(r),this.fragmentTracker.fragBuffered(r,!0)),this.warn(t.message),this.hls.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:r,reason:"Found no media in msn "+r.sn+' of level "'+a.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=hi,this.hls.trigger(ee.FRAG_PARSED,{frag:r,part:e})}else this.warn("level.details undefined")},a.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},a.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(e=null!=(e=this.levelLastLoaded)?e:null==(e=this.fragCurrent)?void 0:e.level)?e:0),this.resetLoadingState())},r(yi,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),yi),gi=((a=_i.prototype).push=function(e){this.chunks.push(e),this.dataLength+=e.length},a.flush=function(){var e=this.chunks,a=this.dataLength;return e.length?(e=1===e.length?e[0]:function(e){for(var t=new Uint8Array(a),n=0,i=0;i<e.length;i++){var r=e[i];t.set(r,n),n+=r.length}return t}(e),this.reset(),e):new Uint8Array(0)},a.reset=function(){this.chunks.length=0,this.dataLength=0},_i);function _i(){this.chunks=[],this.dataLength=0}function yi(e,t,n,i,r){var a;return(a=Zn.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=ai,a.playlistType=void 0,a.media=null,a.mediaBuffer=null,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.startTimeOffset=null,a.loadedmetadata=!1,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.keyLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.playlistType=r,a.logPrefix=i,a.log=ie.log.bind(ie,i+":"),a.warn=ie.warn.bind(ie,i+":"),a.hls=e,a.fragmentLoader=new qn(e.config),a.keyLoader=n,a.fragmentTracker=t,a.config=e.config,a.decrypter=new ri(e.config),e.on(ee.MANIFEST_LOADED,a.onManifestLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}function vi(e,t){t=(void 0===t?{}:t).removePKCS7Padding,t=void 0===t||t;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}function Ei(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}function Ai(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}function bi(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}function Ti(e){var t;return(t=$n.call(this,e.error.message)||this).data=void 0,t.data=e,t}function Si(e,t){return{type:e=void 0===e?"":e,id:-1,pid:-1,inputTimeScale:t=void 0===t?9e4:t,sequenceNumber:-1,samples:[],dropped:0}}(a=Ri.prototype).resetInitSegment=function(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},a.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},a.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},a.canParse=function(e,t){return!1},a.appendFrame=function(e,t,n){},a.demux=function(e,t){this.cachedData&&(e=tt(this.cachedData,e),this.cachedData=null);var n,i,r,a=Me(e,0),o=a?a.length:0,s=this._audioTrack,l=this._id3Track,u=a?xe(a):void 0,c=e.length;for((null===this.basePTS||0===this.frameIndex&&G(u))&&(this.basePTS=wi(u,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),a&&0<a.length&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:qt,duration:Number.POSITIVE_INFINITY});o<c;)this.canParse(e,o)?(i=this.appendFrame(s,e,o))?(this.frameIndex++,this.lastPTS=i.sample.pts,n=o+=i.length):o=c:ke(i=e,r=o)&&Ue(i,r+6)+10<=i.length-r?(a=Me(e,o),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:qt,duration:Number.POSITIVE_INFINITY}),n=o+=a.length):o++,o===c&&n!==c&&(r=De(e,n),this.cachedData?this.cachedData=tt(this.cachedData,r):this.cachedData=r);return{audioTrack:s,videoTrack:Si(),id3Track:l,textTrack:Si()}},a.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},a.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Si(),id3Track:this._id3Track,textTrack:Si()}},a.destroy=function(){};var a=Ri,wi=function(e,t,n){return G(e)?90*e:9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function Ri(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}function Ii(e,t){return 255===e[t]&&240==(246&e[t+1])}function Ci(e,t){return 1&e[t+1]?7:9}function Li(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function Pi(e,t){return t+1<e.length&&Ii(e,t)}function Di(e,t,n,i,r){var a,o,s,l,u,c;!e.samplerate&&(t=t,n=n,i=i,r=r,o=navigator.userAgent.toLowerCase(),s=r,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],u=1+((192&n[i+2])>>>6),c=(60&n[i+2])>>>2,i=l.length-1<c?void t.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c}):(t=(1&n[i+2])<<2,t|=(192&n[i+3])>>>6,ie.log("manifest codec:"+r+", ADTS type:"+u+", samplingIndex:"+c),n=/firefox/i.test(o)?6<=c?(u=5,a=new Array(4),c-3):(u=2,a=new Array(2),c):-1!==o.indexOf("android")?(u=2,a=new Array(2),c):(u=5,a=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&6<=c?c-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(6<=c&&1==t||/vivaldi/i.test(o))||!r&&1==t)&&(u=2,a=new Array(2)),c)),a[0]=u<<3,a[0]|=(14&c)>>1,a[1]|=(1&c)<<7,a[1]|=t<<3,5===u&&(a[1]|=(14&n)>>1,a[2]=(1&n)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:l[c],channelCount:t,codec:"mp4a.40."+u,manifestCodec:s}))&&(e.config=i.config,e.samplerate=i.samplerate,e.channelCount=i.channelCount,e.codec=i.codec,e.manifestCodec=i.manifestCodec,ie.log("parsed codec:"+e.codec+", rate:"+i.samplerate+", channels:"+i.channelCount))}function ki(e){return 9216e4/e}function Oi(e,n,i,t,r){var a,o,s,t=t+r*ki(e.samplerate),r=function(){var e=Ci(n,i);if(i+e<=n.length){var t=Li(n,i)-e;if(0<t)return{headerLength:e,frameLength:t}}}();return r?(o=r.frameLength,o=(r=r.headerLength)+o,(s=Math.max(0,i+o-n.length))?(a=new Uint8Array(o-r)).set(n.subarray(i+r,n.length),0):a=n.subarray(i+r,i+o),r={unit:a,pts:t},s||e.samples.push(r),{sample:r,length:o,missing:s}):(e=n.length-i,(a=new Uint8Array(e)).set(n.subarray(i,n.length),0),{sample:{unit:a,pts:t},length:e,missing:-1})}e(Vi,Mi=a),(o=Vi.prototype).resetInitSegment=function(e,t,n,i){Mi.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},Vi.probe=function(e){if(e)for(var t,n,i,r,a=(Me(e,0)||[]).length,o=e.length;a<o;a++)if(r=i=void 0,!Pi(t=e,n=a)||n+(r=Ci(t,n))>=t.length?void 0:!((i=Li(t,n))<=r)&&((r=n+i)===t.length||Pi(t,r)))return ie.log("ADTS sync word found !"),!0;return!1},o.canParse=function(e,t){return(t=t)+5<(e=e).length&&Ii(e,t)&&Li(e,t)<=e.length-t},o.appendFrame=function(e,t,n){Di(e,this.observer,t,n,e.manifestCodec);e=Oi(e,t,n,this.basePTS,this.frameIndex);if(e&&0===e.missing)return e};var Mi,o=Vi,xi=/\/emsg[-/]ID3/i,s=((s=Gi.prototype).resetTimeStamp=function(){},s.resetInitSegment=function(e,t,n,i){var r,a,o,s=this.videoTrack=Si("video",1),l=this.audioTrack=Si("audio",1),u=this.txtTrack=Si("text",1);this.id3Track=Si("id3",1),this.timeOffset=0,null!=e&&e.byteLength&&((e=Je(e)).video&&(r=(o=e.video).id,a=o.timescale,o=o.codec,s.id=r,s.timescale=u.timescale=a,s.codec=o),e.audio&&(a=(r=e.audio).id,o=r.timescale,e=r.codec,l.id=a,l.timescale=o,l.codec=e),u.id=Ke.text,s.sampleDuration=0,s.duration=l.duration=i)},s.resetContiguity=function(){this.remainderData=null},Gi.probe=function(e){return 0<I(e=16384<e.length?e.subarray(0,16384):e,["moof"]).length},s.demux=function(e,t){this.timeOffset=t;var n,i=e,r=this.videoTrack,a=this.txtTrack,o=(this.config.progressive?(this.remainderData&&(i=tt(this.remainderData,e)),e={valid:null,remainder:null},(o=I(n=i,["moof"]))&&(o.length<2?e.remainder=n:(o=o[o.length-1],e.valid=De(n,0,o.byteOffset-8),e.remainder=De(n,o.byteOffset-8))),n=e,this.remainderData=n.remainder,r.samples=n.valid||new Uint8Array):r.samples=i,this.extractID3Track(r,t));return a.samples=nt(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},s.flush=function(){var e=this.timeOffset,t=this.videoTrack,n=this.txtTrack,i=(t.samples=this.remainderData||new Uint8Array,this.remainderData=null,this.extractID3Track(t,this.timeOffset));return n.samples=nt(e,t),{videoTrack:t,audioTrack:Si(),id3Track:i,textTrack:Si()}},s.extractID3Track=function(e,i){var r=this.id3Track;return e.samples.length&&(e=I(e.samples,["emsg"]))&&e.forEach(function(e){var t,n,e=function(e){var t=e[0],n="",i="",r=0,a=0,o=0,s=0,l=0,u=0;if(0===t){for(;"\0"!==v(e.subarray(u,u+1));)n+=v(e.subarray(u,u+1)),u+=1;for(n+=v(e.subarray(u,u+1)),u+=1;"\0"!==v(e.subarray(u,u+1));)i+=v(e.subarray(u,u+1)),u+=1;i+=v(e.subarray(u,u+1)),u+=1,r=R(e,12),a=R(e,16),s=R(e,20),l=R(e,24),u=28}else if(1===t){var r=R(e,u+=4),t=R(e,u+=4),c=R(e,u+=4);for(u+=4,o=Math.pow(2,32)*t+c,Number.isSafeInteger(o)||(o=Number.MAX_SAFE_INTEGER,ie.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=R(e,u),l=R(e,u+=4),u+=4;"\0"!==v(e.subarray(u,u+1));)n+=v(e.subarray(u,u+1)),u+=1;for(n+=v(e.subarray(u,u+1)),u+=1;"\0"!==v(e.subarray(u,u+1));)i+=v(e.subarray(u,u+1)),u+=1;i+=v(e.subarray(u,u+1)),u+=1}return{schemeIdUri:n,value:i,timeScale:r,presentationTime:o,presentationTimeDelta:a,eventDuration:s,id:l,payload:e.subarray(u,e.byteLength)}}(e);xi.test(e.schemeIdUri)&&(t=G(e.presentationTime)?e.presentationTime/e.timeScale:i+e.presentationTimeDelta/e.timeScale,(n=4294967295===e.eventDuration?Number.POSITIVE_INFINITY:e.eventDuration/e.timeScale)<=.001&&(n=Number.POSITIVE_INFINITY),e=e.payload,r.samples.push({data:e,len:e.byteLength,dts:t,pts:t,type:Qt,duration:n}))}),r},s.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},s.destroy=function(){},Gi),Ni=null,Fi=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Bi=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ui=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],ji=[0,1,1,4];function Gi(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}function Vi(e,t){var n;return(n=Mi.call(this)||this).observer=void 0,n.config=void 0,n.observer=e,n.config=t,n}function Hi(e,t,n,i,r){if(!(n+24>t.length)){var a=Yi(t,n);if(a&&n+a.frameLength<=t.length)return i=i+r*(9e4*a.samplesPerFrame/a.sampleRate),r={unit:t.subarray(n,n+a.frameLength),pts:i,dts:i},e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(r),{sample:r,length:a.frameLength,missing:0}}}function Yi(e,t){var n,i,r,a,o,s=e[t+1]>>3&3,l=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(1!=s&&0!=u&&15!=u&&3!=c)return o=e[t+2]>>1&1,n=e[t+3]>>6,u=1e3*Fi[14*(3==s?3-l:3==l?3:4)+u-1],c=Bi[3*(3==s?0:2==s?1:2)+c],i=3==n?1:2,a=8*(s=Ui[s][l])*(r=ji[l]),s=Math.floor(s*u/c+o)*r,null===Ni&&(o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),Ni=o?parseInt(o[1]):0),Ni&&Ni<=87&&2==l&&224e3<=u&&0==n&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:i,frameLength:s,samplesPerFrame:a}}function zi(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function Wi(e,t){return t+1<e.length&&zi(e,t)}function Ki(e,t){var n=0,i=5;t+=i;for(var r=new Uint32Array(1),a=new Uint32Array(1),o=new Uint8Array(1);0<i;){o[0]=e[t];var s=Math.min(i,8),l=8-s;a[0]=4278190080>>>24+l<<l,r[0]=(o[0]&a[0])>>l,n=n?n<<s|r[0]:r[0],t+=1,i-=s}return n}e(Xi,qi=a),(Qi=Xi.prototype).resetInitSegment=function(e,t,n,i){qi.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},Qi.canParse=function(e,t){return t+64<e.length},Qi.appendFrame=function(e,t,n){t=Ji(e,t,n,this.basePTS,this.frameIndex);if(-1!==t)return{sample:e.samples[e.samples.length-1],length:t,missing:0}},Xi.probe=function(e){var t,n;return!!e&&!!(t=Me(e,0))&&11===e[n=t.length]&&119===e[n+1]&&void 0!==xe(t)&&Ki(e,n)<16};var qi,Qi=Xi;function Xi(e){var t;return(t=qi.call(this)||this).observer=void 0,t.observer=e,t}function Ji(e,t,n,i,r){var a,o,s,l,u,c,h,d,f;return n+8>t.length||11!==t[n]||119!==t[n+1]||3<=(h=t[n+4]>>6)||(a=[48e3,44100,32e3][h],n+(s=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*(o=63&t[n+4])+h])>t.length)?-1:(u=0,(2==(l=t[n+6]>>5)||(1&l&&1!=l&&(u+=2),4&l))&&(u+=2),u=(t[n+6]<<8|t[n+7])>>12-u&1,c=[2,1,2,3,3,4,4,5][l]+u,d=t[n+5]>>3,f=7&t[n+5],h=new Uint8Array([h<<6|d<<1|f>>2,(3&f)<<6|l<<3|u<<2|o>>4,o<<4&224]),d=i+r*(1536/a*9e4),f=t.subarray(n,n+s),e.config=h,e.channelCount=c,e.samplerate=a,e.samples.push({unit:f,pts:d}),s)}(l=hr.prototype).createVideoSample=function(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}},l.getLastNalUnit=function(e){var t,n=this.VideoSample;return t=null!=(n=n&&0!==n.units.length?n:e[e.length-1])&&n.units?(e=n.units)[e.length-1]:t},l.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,i=n.length;if(!i)return void t.dropped++;n=n[i-1];e.pts=n.pts,e.dts=n.dts}t.samples.push(e)}e.debug.length&&ie.log(e.pts+"/"+e.dts+":"+e.debug)};var Zi,$i,l=hr,er=((u=cr.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");i.set(e.subarray(n,n+t)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},u.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e||(e=(e-=this.bitsAvailable)-((t=e>>3)<<3),this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},u.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;if(32<e&&ie.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable)this.word<<=t;else{if(!(0<this.bytesAvailable))throw new Error("no bits available");this.loadWord()}return 0<(t=e-t)&&this.bitsAvailable?n<<t|this.readBits(t):n},u.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},u.skipUEG=function(){this.skipBits(1+this.skipLZ())},u.skipEG=function(){this.skipBits(1+this.skipLZ())},u.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},u.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},u.readBoolean=function(){return 1===this.readBits(1)},u.readUByte=function(){return this.readBits(8)},u.readUShort=function(){return this.readBits(16)},u.readUInt=function(){return this.readBits(32)},u.skipScalingList=function(e){for(var t=8,n=8,i=0;i<e;i++)t=0===(n=0!==n?(t+this.readEG()+256)%256:n)?t:n},u.readSPS=function(){var e,t,n,i=0,r=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),h=this.skipBits.bind(this),d=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this),m=(s(),s());if(l(5),h(3),s(),f(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){m=u();if(3===m&&h(1),f(),f(),h(1),c())for(t=3!==m?8:12,n=0;n<t;n++)c()&&p(n<6?16:64)}f();m=u();if(0===m)u();else if(1===m)for(h(1),d(),d(),e=u(),n=0;n<e;n++)d();f(),h(1);var m=u(),f=u(),l=l(1),g=(0===l&&h(1),h(1),c()&&(i=u(),r=u(),a=u(),o=u()),[1,1]);if(c()&&c())switch(s()){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(m+1)-2*i-2*r),height:(2-l)*(f+1)*16-(l?2:4)*(a+o),pixelRatio:g}},u.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},u.destroy=function(){this.data=null},cr),tr=(e(ur,$i=l),(u=ur.prototype).parseAVCPES=function(s,l,u,e,c){var h,d=this,t=this.parseAVCNALu(s,u.data),f=this.VideoSample,p=!1;u.data=null,f&&t.length&&!s.audFound&&(this.pushAccessUnit(f,s),f=this.VideoSample=this.createVideoSample(!1,u.pts,u.dts,"")),t.forEach(function(e){switch(e.type){case 1:var t=!1;h=!0;var n=e.data;p&&4<n.length&&(2!==(n=new er(n).readSliceType())&&4!==n&&7!==n&&9!==n||(t=!0)),t&&null!=f&&f.frame&&!f.key&&(d.pushAccessUnit(f,s),f=d.VideoSample=null),(f=f||(d.VideoSample=d.createVideoSample(!0,u.pts,u.dts,""))).frame=!0,f.key=t;break;case 5:h=!0,null!=f&&f.frame&&!f.key&&(d.pushAccessUnit(f,s),f=d.VideoSample=null),(f=f||(d.VideoSample=d.createVideoSample(!0,u.pts,u.dts,""))).key=!0,f.frame=!0;break;case 6:h=!0,it(e.data,1,u.pts,l.samples);break;case 7:if(p=h=!0,!s.sps){n=e.data,t=new er(n).readSPS();s.width=t.width,s.height=t.height,s.pixelRatio=t.pixelRatio,s.sps=[n],s.duration=c;for(var i=n.subarray(1,4),r="avc1.",a=0;a<3;a++){var o=i[a].toString(16);r+=o=o.length<2?"0"+o:o}s.codec=r}break;case 8:h=!0,s.pps||(s.pps=[e.data]);break;case 9:h=!0,s.audFound=!0,f&&d.pushAccessUnit(f,s),f=d.VideoSample=d.createVideoSample(!1,u.pts,u.dts,"");break;case 12:h=!0;break;default:h=!1,f&&(f.debug+="unknown NAL "+e.type+" ")}f&&h&&f.units.push(e)}),e&&f&&(this.pushAccessUnit(f,s),this.VideoSample=null)},u.parseAVCNALu=function(e,t){var n,i,r,a,o=t.byteLength,s=e.naluState||0,l=s,u=[],c=0,h=-1,d=0;for(-1===s&&(d=31&t[h=0],s=0,c=1);c<o;)n=t[c++],s=s?1!==s?n?1===n?(r=c-s-1,0<=h?(i={data:t.subarray(h,r),type:d},u.push(i)):(i=this.getLastNalUnit(e.samples))&&(l&&c<=4-l&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-l)),0<r)&&(i.data=tt(i.data,t.subarray(0,r)),i.state=0),c<o?(d=31&t[h=c],0):-1):0:3:n?0:2:n?0:1;return 0<=h&&0<=s&&(a={data:t.subarray(h,o),type:d,state:s},u.push(a)),0===u.length&&(a=this.getLastNalUnit(e.samples))&&(a.data=tt(a.data,t)),e.naluState=s,u},ur),nr=(lr._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},lr.parseVPS=function(e){e=lr._ebsp2rbsp(e),e=new er(e);return e.readUByte(),e.readUByte(),e.readBits(4),e.readBits(2),e.readBits(6),{num_temporal_layers:e.readBits(3)+1,temporal_id_nested:e.readBoolean()}},lr.parseSPS=function(e){var e=lr._ebsp2rbsp(e),t=new er(e),e=(t.readUByte(),t.readUByte(),0),n=0,i=0,r=0,a=(t.readBits(4),t.readBits(3));t.readBoolean();for(var N=t.readBits(2),F=t.readBoolean(),o=t.readBits(5),B=t.readUByte(),U=t.readUByte(),j=t.readUByte(),G=t.readUByte(),V=t.readUByte(),H=t.readUByte(),Y=t.readUByte(),z=t.readUByte(),W=t.readUByte(),K=t.readUByte(),s=t.readUByte(),l=[],u=[],c=0;c<a;c++)l.push(t.readBoolean()),u.push(t.readBoolean());if(0<a)for(var h=a;h<8;h++)t.readBits(2);for(var d=0;d<a;d++)l[d]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),u[d]&&t.readUByte();t.readUEG();var f=t.readUEG(),p=(3==f&&t.readBits(1),t.readUEG()),q=t.readUEG();t.readBoolean()&&(e+=t.readUEG(),n+=t.readUEG(),i+=t.readUEG(),r+=t.readUEG());for(var m=t.readUEG(),Q=t.readUEG(),X=t.readUEG(),g=t.readBoolean()?0:a;g<=a;g++)t.readUEG(),t.readUEG(),t.readUEG();if(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBoolean()&&t.readBoolean())for(var _=0;_<4;_++)for(var y=0;y<(3===_?2:6);y++)if(t.readBoolean()){var J=Math.min(64,1<<4+(_<<1));1<_&&t.readEG();for(var v=0;v<J;v++)t.readEG()}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUEG(),t.readUEG(),t.readBoolean());for(var E=t.readUEG(),A=0,b=0;b<E;b++){var T=!1;if(T=0!==b?t.readBoolean():T){b===E&&t.readUEG(),t.readBoolean(),t.readUEG();for(var S=0,w=0;w<=A;w++){var R=t.readBoolean(),I=!1;R||(I=t.readBoolean()),(R||I)&&S++}A=S}else{for(var C=t.readUEG(),Z=t.readUEG(),A=C+Z,$=0;$<C;$++)t.readUEG(),t.readBoolean();for(var ee=0;ee<Z;ee++)t.readUEG(),t.readBoolean()}}if(t.readBoolean())for(var te=t.readUEG(),ne=0;ne<te;ne++){for(var ie=0;ie<X+4;ie++)t.readBits(1);t.readBits(1)}var re=0,L=1,P=1,ae=!1,D=1,k=1;if(t.readBoolean(),t.readBoolean(),t.readBoolean()){if(t.readBoolean()&&(0<(x=t.readUByte())&&x<=16?(L=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][x-1],P=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][x-1]):255===x&&(L=t.readBits(16),P=t.readBits(16))),t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean())&&(t.readUByte(),t.readUByte(),t.readUByte()),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG()),t.readBoolean()&&(D=t.readBits(32),k=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){var O=!1,oe=t.readBoolean(),se=t.readBoolean();(oe||se)&&((O=t.readBoolean())&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),O&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(var le=0;le<=a;le++){var ue=t.readBoolean(),ae=ue,ce=!0,M=1,he=!1;if((ce=ue?ce:t.readBoolean())?t.readUEG():he=t.readBoolean(),he||(M=t.readUEG()+1),oe){for(var de=0;de<M;de++)t.readUEG(),t.readUEG(),O&&(t.readUEG(),t.readUEG());t.readBoolean()}if(se){for(var fe=0;fe<M;fe++)t.readUEG(),t.readUEG(),O&&(t.readUEG(),t.readUEG());t.readBoolean()}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),re=t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG())}t.readBoolean();var x="hvc1."+o+".1.L"+s+".B0",p=p-(e+n)*(1===f||2===f?2:1),e=q-(i+r)*(1===f?2:1),n=1!==L&&1!==P?L/P:1;return t.destroy(),t=null,{codec_mimetype:x,level_string:lr.getLevelString(s),profile_idc:o,bit_depth:m+8,ref_frames:1,chroma_format:f,chroma_format_string:lr.getChromaFormatString(f),general_level_idc:s,general_profile_space:N,general_tier_flag:F,general_profile_idc:o,general_profile_compatibility_flags_1:B,general_profile_compatibility_flags_2:U,general_profile_compatibility_flags_3:j,general_profile_compatibility_flags_4:G,general_constraint_indicator_flags_1:V,general_constraint_indicator_flags_2:H,general_constraint_indicator_flags_3:Y,general_constraint_indicator_flags_4:z,general_constraint_indicator_flags_5:W,general_constraint_indicator_flags_6:K,min_spatial_segmentation_idc:re,constant_frame_rate:0,chroma_format_idc:f,bit_depth_luma_minus8:m,bit_depth_chroma_minus8:Q,frame_rate:{fixed:ae,fps:k/D,fps_den:D,fps_num:k},sar_ratio:{width:L,height:P},codec_size:{width:p,height:e},present_size:{width:p*n,height:e}}},lr.parsePPS=function(e){var e=lr._ebsp2rbsp(e),e=new er(e),t=(e.readUByte(),e.readUByte(),e.readUEG(),e.readUEG(),e.readBoolean(),e.readBoolean(),e.readBits(3),e.readBoolean(),e.readBoolean(),e.readUEG(),e.readUEG(),e.readEG(),e.readBoolean(),e.readBoolean(),e.readBoolean()&&e.readUEG(),e.readEG(),e.readEG(),e.readBoolean(),e.readBoolean(),e.readBoolean(),e.readBoolean(),e.readBoolean()),e=e.readBoolean(),n=1;return e&&t?n=0:e?n=3:t&&(n=2),{parallelismType:n}},lr.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},lr.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},lr.getLevelString=function(e){return(e/30).toFixed(1)},lr),ir=(e(sr,Zi=l),(u=sr.prototype).parseAVCPES=function(i,r,a,e,o){var s,l=this,t=this.parseAVCNALu(i,a.data),u=this.VideoSample;a.data=null,u&&t.length&&!i.audFound&&(this.pushAccessUnit(u,i),u=this.VideoSample=this.createVideoSample(!1,a.pts,a.dts,"")),t.forEach(function(e){switch(e.type){case 0:case 1:s=!0,(u=u||(l.VideoSample=l.createVideoSample(!0,a.pts,a.dts,""))).frame=!0;break;case 19:case 20:case 21:s=!0,(u=u||(l.VideoSample=l.createVideoSample(!0,a.pts,a.dts,""))).key=!0,u.frame=!0;break;case 32:s=!0,i.vps||(i.vps=[e.data]);break;case 33:var t;s=!0,i.sps||(n=e.data,t=nr.parseSPS(n),i.width=t.codec_size.width,i.height=t.codec_size.height,i.pixelRatio=[t.sar_ratio.width,t.sar_ratio.height],i.sps=[n],i.duration=o,i.codec=t.codec_mimetype,i.details=m(m({},i.details),t));break;case 34:var n;s=!0,i.pps||(i.pps=[e.data],n=nr.parsePPS(e.data),i.details=m(m({},i.details),n));break;case 35:s=!1,i.audFound=!0,u&&l.pushAccessUnit(u,i),u=l.VideoSample=l.createVideoSample(!1,a.pts,a.dts,"");break;case 39:s=!0,it(e.data,1,a.pts,r.samples);break;default:s=!0}u&&s&&u.units.push(e)}),e&&u&&(this.pushAccessUnit(u,i),this.VideoSample=null)},u.parseAVCNALu=function(e,t){var n,i,r,a,o=t.byteLength,s=e.naluState||0,l=s,u=[],c=0,h=-1,d=0;for(-1===s&&(d=t[h=0]>>1&63,s=0,c=1);c<o;)n=t[c++],s=s?1!==s?n?1===n?(r=c-s-1,0<=h?(i={data:t.subarray(h,r),type:d},u.push(i)):(i=this.getLastNalUnit(e.samples))&&(l&&c<=4-l&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-l)),0<r)&&(i.data=tt(i.data,t.subarray(0,r)),i.state=0),c<o?(d=t[h=c]>>1&63,0):-1):0:3:n?0:2:n?0:1;return 0<=h&&0<=s&&(a={data:t.subarray(h,o),type:d,state:s},u.push(a)),0===u.length&&(a=this.getLastNalUnit(e.samples))&&(a.data=tt(a.data,t)),e.naluState=s,u},sr),rr=((l=or.prototype).decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},l.decryptAacSample=function(t,n,i){var e,r=this,a=t[n].unit;a.length<=16||(e=(e=a.subarray(16,a.length-a.length%16)).buffer.slice(e.byteOffset,e.byteOffset+e.length),this.decryptBuffer(e).then(function(e){e=new Uint8Array(e);a.set(e,16),r.decrypter.isSync()||r.decryptAacSamples(t,n+1,i)}))},l.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,n),this.decrypter.isSync())))return}},l.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},l.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)e.set(n.subarray(i,i+16),r);return e},l.decryptAvcSample=function(t,n,i,r,a){var o=this,s=rt(a.data),e=this.getAvcEncryptedData(s);this.decryptBuffer(e.buffer).then(function(e){a.data=o.getAvcDecryptedUnit(s,e),o.decrypter.isSync()||o.decryptAvcSamples(t,n,i+1,r)})},l.decryptAvcSamples=function(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,n,i,a),this.decrypter.isSync())))return}}},or),l=(ar.probe=function(e){e=ar.syncOffset(e);return 0<e&&ie.warn("MPEG2-TS detected but first sync word found @ offset "+e),-1!==e},ar.syncOffset=function(e){for(var t=e.length,n=Math.min(940,e.length-188)+1,i=0;i<n;){for(var r=!1,a=-1,o=0,s=i;s<t;s+=188){if(71!==e[s]){if(o)return-1;break}if(o++,-1===a&&0!==(a=s)&&(n=Math.min(a+18612,e.length-188)+1),(r=r||0===dr(e,s))&&1<o&&(0===a&&2<o||n<s+188))return a}i++}return-1},ar.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:Ke[e],pid:-1,segmentVideoCodec:"",inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}},(u=ar.prototype).resetInitSegment=function(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=ar.createTrack("video"),this._audioTrack=ar.createTrack("audio",i),this._id3Track=ar.createTrack("id3"),this._txtTrack=ar.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i},u.resetTimeStamp=function(){},u.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null},u.parseVideoAVCPES=function(e,t,n,i,r){"avc"===e.segmentCodec&&this.videoParser.parseAVCPES(e,t,n,i,r),"hevc"===e.segmentCodec&&this.hevcVideoParser.parseAVCPES(e,t,n,i,r)},u.demux=function(e,t,n,i){void 0===i&&(i=!1),(n=void 0===n?!1:n)||(this.sampleAes=null);var r,a=this._videoTrack,o=this._audioTrack,s=this._id3Track,l=this._txtTrack,u=a.pid,c=a.pesData,h=o.pid,d=s.pid,f=o.pesData,p=s.pesData,m=null,g=this.pmtParsed,_=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=tt(this.remainderData,e)).length,this.remainderData=null),y<188&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};var v=Math.max(0,ar.syncOffset(e));(y-=(y-v)%188)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));for(var E,A=0,b=v;b<y;b+=188)if(71===e[b]){var T=!!(64&e[b+1]),S=dr(e,b),w=void 0;if(1<(48&e[b+3])>>4){if((w=b+5+e[b+4])===b+188)continue}else w=b+4;switch(S){case u:T&&(c&&(r=pr(c))&&this.parseVideoAVCPES(a,l,r,!1,this._duration),c={data:[],size:0}),c&&(c.data.push(e.subarray(w,b+188)),c.size+=b+188-w);break;case h:if(T){if(f&&(r=pr(f)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break;case"ac3":this.parseAC3PES(o,r)}f={data:[],size:0}}f&&(f.data.push(e.subarray(w,b+188)),f.size+=b+188-w);break;case d:T&&(p&&(r=pr(p))&&this.parseID3PES(s,r),p={data:[],size:0}),p&&(p.data.push(e.subarray(w,b+188)),p.size+=b+188-w);break;case 0:T&&(w+=e[w]+1),_=this._pmtId=(31&(R=e)[(E=w)+10])<<8|R[E+11];break;case _:T&&(w+=e[w]+1);var R=function(e,t,n,i){var r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var o=dr(e,t),s=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!i){fr("ADTS AAC");break}case 15:-1===r.audioPid&&(r.audioPid=o);break;case 21:-1===r.id3Pid&&(r.id3Pid=o);break;case 219:if(!i){fr("H.264");break}case 27:-1===r.videoPid&&(r.videoPid=o,r.segmentVideoCodec="avc");break;case 3:case 4:n.mpeg||n.mp3?-1===r.audioPid&&(r.audioPid=o,r.segmentAudioCodec="mp3"):ie.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){fr("AC-3");break}case 129:n.ac3?-1===r.audioPid&&(r.audioPid=o,r.segmentAudioCodec="ac3"):ie.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===r.audioPid&&0<s)for(var l=t+5,u=s;2<u;){106===e[l]&&(!0!==n.ac3?ie.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=o,r.segmentAudioCodec="ac3"));var c=e[l+1]+2;l+=c,u-=c}break;case 194:case 135:ie.warn("Unsupported EC-3 in M2TS found");break;case 36:-1===r.videoPid&&(r.videoPid=o,r.segmentVideoCodec="hevc")}t+=5+s}return r}(e,w,this.typeSupported,n);0<(u=R.videoPid)&&(a.pid=u,a.segmentCodec=R.segmentVideoCodec),0<(h=R.audioPid)&&(o.pid=h,o.segmentCodec=R.segmentAudioCodec),0<(d=R.id3Pid)&&(s.pid=d),null===m||g||(ie.warn("MPEG-TS PMT found at "+b+" after unknown PID '"+m+"'. Backtracking to sync byte @"+v+" to parse all TS packets."),m=null,b=v-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=S}}else A++;0<A&&(I=new Error("Found "+A+" TS packet/s that do not start with 0x47"),this.observer.emit(ee.ERROR,ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message})),a.pesData=c,o.pesData=f,s.pesData=p;var I={audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};return i&&this.extractRemainingSamples(I),I},u.flush=function(){var e=this.remainderData;return this.remainderData=null,e=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},u.extractRemainingSamples=function(e){var t,n=e.audioTrack,i=e.videoTrack,r=e.id3Track,e=e.textTrack,a=i.pesData,o=n.pesData,s=r.pesData;if(a&&(t=pr(a))?(this.parseVideoAVCPES(i,e,t,!0,this._duration),i.pesData=null):i.pesData=a,o&&(t=pr(o))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,t);break;case"mp3":this.parseMPEGPES(n,t);break;case"ac3":this.parseAC3PES(n,t)}n.pesData=null}else null!=o&&o.size&&ie.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;s&&(t=pr(s))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=s},u.demuxSampleAes=function(e,t,n){e=this.demux(e,n,!0,!this.config.progressive),n=this.sampleAes=new rr(this.observer,this.config,t);return this.decrypt(e,n)},u.decrypt=function(i,r){return new Promise(function(e){var t=i.audioTrack,n=i.videoTrack;t.samples&&"aac"===t.segmentCodec?r.decryptAacSamples(t.samples,0,function(){n.samples?r.decryptAvcSamples(n.samples,0,0,function(){e(i)}):e(i)}):n.samples&&r.decryptAvcSamples(n.samples,0,0,function(){e(i)})})},u.destroy=function(){this._duration=0},u.parseAACPES=function(e,t){var n,i,r=0,a=this.aacOverFlow,o=t.data;for(a&&(this.aacOverFlow=null,s=a.missing,l=a.sample.unit.byteLength,-1===s?o=tt(a.sample.unit,o):(l=l-s,a.sample.unit.set(o.subarray(0,s),l),e.samples.push(a.sample),r=a.missing)),n=r,i=o.length;n<i-1&&!Pi(o,n);n++);if(n!==r){var s=n<i-1,l=s?"AAC PES did not start with ADTS header,offset:"+n:"No ADTS header found in AAC PES",r=new Error(l);if(ie.warn("parsing error: "+l),this.observer.emit(ee.ERROR,ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,levelRetry:s,error:r,reason:l}),!s)return}if(Di(e,this.observer,o,n,this.audioCodec),void 0!==t.pts)u=t.pts;else{if(!a)return void ie.warn("[tsdemuxer]: AAC PES unknown PTS");var r=ki(e.samplerate),u=a.sample.pts+r}for(var c,h=0;n<i;){if(n+=(c=Oi(e,o,n,u,h)).length,c.missing){this.aacOverFlow=c;break}for(h++;n<i-1&&!Pi(o,n);n++);}},u.parseMPEGPES=function(e,t){var n=t.data,i=n.length,r=0,a=0,o=t.pts;if(void 0!==o)for(;a<i;)if(Wi(n,a)){var s=Hi(e,n,a,o,r);if(!s)break;a+=s.length,r++}else a++;else ie.warn("[tsdemuxer]: MPEG PES unknown PTS")},u.parseAC3PES=function(e,t){var n=t.data,i=t.pts;if(void 0!==i)for(var r,a=n.length,o=0,s=0;s<a&&0<(r=Ji(e,n,s,i,o++));)s+=r;else ie.warn("[tsdemuxer]: AC3 PES unknown PTS")},u.parseID3PES=function(e,t){void 0!==t.pts?(t=$({},t,{type:this._videoTrack?Qt:qt,duration:Number.POSITIVE_INFINITY}),e.samples.push(t)):ie.warn("[tsdemuxer]: ID3 PES unknown PTS")},ar);function ar(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.hevcVideoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new tr,this.hevcVideoParser=new ir}function or(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new ri(t,{removePKCS7Padding:!1})}function sr(){return Zi.apply(this,arguments)||this}function lr(){}function ur(){return $i.apply(this,arguments)||this}function cr(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function hr(){this.VideoSample=null}function dr(e,t){return((31&e[t+1])<<8)+e[t+2]}function fr(e){ie.log(e+" with AES-128-CBC encryption found in unencrypted stream")}function pr(e){var t,n,i,r,a=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&1<o.length;)o[0]=tt(o[0],o[1]),o.splice(1,1);if(1!==((t=o[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var s=t[7],l=(192&s&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&s?54e5<i-(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(ie.warn(Math.round((i-r)/9e4)+"s delta between PTS and DTS, align them"),i=r):r=i),(s=t[8])+9);if(e.size<=l)return null;e.size-=l;for(var u=new Uint8Array(e.size),c=0,h=o.length;c<h;c++){var d=(t=o[c]).byteLength;if(l){if(d<l){l-=d;continue}t=t.subarray(l),d-=l,l=0}u.set(t,a),a+=d}return n&&(n-=s+3),{data:u,pts:i,dts:r,len:n}}e(Ar,mr=a),(u=Ar.prototype).resetInitSegment=function(e,t,n,i){mr.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},Ar.probe=function(e){if(e){var t=Me(e,0),n=(null==t?void 0:t.length)||0;if(!(t&&11===e[n]&&119===e[n+1]&&void 0!==xe(t)&&Ki(e,n)<=16))for(var i=e.length;n<i;n++)if(function(e,t){var n;if(t+1<e.length&&zi(e,t))return n=4,(t=t+(n=null!=(t=Yi(e,t))&&t.frameLength?t.frameLength:n))===e.length||Wi(e,t)}(e,n))return ie.log("MPEG Audio sync word found !"),!0}return!1},u.canParse=function(e,t){return zi(e,t)&&4<=e.length-t},u.appendFrame=function(e,t,n){if(null!==this.basePTS)return Hi(e,t,n,this.basePTS,this.frameIndex)};var mr,a=Ar,gr=(Er.getSilentFrame=function(e,t){return"mp4a.40.2"===e?1===t?new Uint8Array([0,200,0,128,35,128]):2===t?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):void 0:1===t?new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):2===t||3===t?new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):void 0},Er),_r=(vr.prototype.getData=function(){return this.data},vr),yr=Math.pow(2,32)-1,re=(d.init=function(){for(var e in d.types={avc1:[],avcC:[],hvc1:[],hvcC:[],av01:[],av1C:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})d.types.hasOwnProperty(e)&&(d.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t=(d.HDLR_TYPES={video:t,audio:n},new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])),n=new Uint8Array([0,0,0,0,0,0,0,0]),n=(d.STTS=d.STSC=d.STCO=n,d.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),d.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),d.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),new Uint8Array([105,115,111,109])),i=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);d.FTYP=d.box(d.types.ftyp,n,r,n,i),d.DINF=d.box(d.types.dinf,d.box(d.types.dref,t))},d.box=function(e){for(var t=8,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=i.length,o=a;a--;)t+=i[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(i[a],t),t+=i[a].byteLength;return s},d.hdlr=function(e){return d.box(d.types.hdlr,d.HDLR_TYPES[e])},d.mdat=function(e){return d.box(d.types.mdat,e)},d.mdhd=function(e,t){t*=e;var n=Math.floor(t/(1+yr)),t=Math.floor(t%(1+yr));return d.box(d.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},d.mdia=function(e){return d.box(d.types.mdia,d.mdhd(e.timescale,e.duration),d.hdlr(e.type),d.minf(e))},d.mfhd=function(e){return d.box(d.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},d.minf=function(e){return"audio"===e.type?d.box(d.types.minf,d.box(d.types.smhd,d.SMHD),d.DINF,d.stbl(e)):d.box(d.types.minf,d.box(d.types.vmhd,d.VMHD),d.DINF,d.stbl(e))},d.moof=function(e,t,n){return d.box(d.types.moof,d.mfhd(e),d.traf(n,t))},d.moov=function(e){for(var t=e.length,n=[];t--;)n[t]=d.trak(e[t]);return d.box.apply(null,[d.types.moov,d.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(d.mvex(e)))},d.mvex=function(e){for(var t=e.length,n=[];t--;)n[t]=d.trex(e[t]);return d.box.apply(null,[d.types.mvex].concat(n))},d.mvhd=function(e,t){t*=e;var n=Math.floor(t/(1+yr)),t=Math.floor(t%(1+yr)),e=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d.box(d.types.mvhd,e)},d.sdtp=function(e){for(var t,n=e.samples||[],i=new Uint8Array(4+n.length),r=0;r<n.length;r++)t=n[r].flags,i[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return d.box(d.types.sdtp,i)},d.stbl=function(e){return d.box(d.types.stbl,d.stsd(e),d.box(d.types.stts,d.STTS),d.box(d.types.stsc,d.STSC),d.box(d.types.stsz,d.STSZ),d.box(d.types.stco,d.STCO))},d.avc1=function(e){for(var t,n,i=[],r=[],a=0;a<e.sps.length;a++)n=(t=e.sps[a]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)n=(t=e.pps[a]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(t));var o=d.box(d.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(r))),s=e.width,l=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return d.box(d.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,d.box(d.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),d.box(d.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},d.hvc1=function(e){for(var t=new Uint8Array,n=new Uint8Array,i=new Uint8Array,r=e.width,a=e.height,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>>8&255,255&r,a>>>8&255,255&a,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),o=0;o<e.vps.length;o++){var s=e.vps[o],l=new Uint8Array(t.length+s.length);l.set(t),l.set(s,t.length),t=l}for(o=0;o<e.sps.length;o++){s=e.sps[o];var u=new Uint8Array(n.length+s.length);u.set(n),u.set(s,n.length),n=u}for(o=0;o<e.pps.length;o++){s=e.pps[o];var c=new Uint8Array(i.length+s.length);c.set(i),c.set(s,i.length),i=c}a=new _r(t,n,i,e.details);return d.box(d.types.hvc1,r,d.box(d.types.hvcC,a.getData()))},d.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},d.audioStsd=function(e){var t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])},d.mp4a=function(e){return d.box(d.types.mp4a,d.audioStsd(e),d.box(d.types.esds,d.esds(e)))},d.mp3=function(e){return d.box(d.types[".mp3"],d.audioStsd(e))},d.ac3=function(e){return d.box(d.types["ac-3"],d.audioStsd(e),d.box(d.types.dac3,e.config))},d.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?d.box(d.types.stsd,d.STSD,d.mp3(e)):"ac3"===e.segmentCodec?d.box(d.types.stsd,d.STSD,d.ac3(e)):d.box(d.types.stsd,d.STSD,d.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?d.box(d.types.stsd,d.STSD,d.hvc1(e)):d.box(d.types.stsd,d.STSD,d.avc1(e))},d.tkhd=function(e){var t=e.id,n=e.duration*e.timescale,i=e.width,e=e.height,r=Math.floor(n/(1+yr)),n=Math.floor(n%(1+yr));return d.box(d.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,e>>8&255,255&e,0,0]))},d.traf=function(e,t){var n=d.sdtp(e),i=e.id,r=Math.floor(t/(1+yr)),t=Math.floor(t%(1+yr));return d.box(d.types.traf,d.box(d.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),d.box(d.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t])),d.trun(e,n.length+16+20+8+16+8+8),n)},d.trak=function(e){return e.duration=e.duration||4294967295,d.box(d.types.trak,d.tkhd(e),d.mdia(e))},d.trex=function(e){e=e.id;return d.box(d.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},d.trun=function(e,t){var n,i,r,a,o,s=e.samples||[],l=s.length,u=12+16*l,c=new Uint8Array(u);for(c.set(["video"===e.type?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+u)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),n=0;n<l;n++)i=(o=s[n]).duration,r=o.size,a=o.flags,o=o.cts,c.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*n);return d.box(d.types.trun,c)},d.initSegment=function(e){d.types||d.init();e=d.moov(e);return tt(d.FTYP,e)},d);function d(){}function vr(e,t,n,i){this.data=void 0;var r=23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength),r=this.data=new Uint8Array(r);r[0]=1,r[1]=(3&i.general_profile_space)<<6|(i.general_tier_flag?1:0)<<5|31&i.general_profile_idc,r[2]=i.general_profile_compatibility_flags_1,r[3]=i.general_profile_compatibility_flags_2,r[4]=i.general_profile_compatibility_flags_3,r[5]=i.general_profile_compatibility_flags_4,r[6]=i.general_constraint_indicator_flags_1,r[7]=i.general_constraint_indicator_flags_2,r[8]=i.general_constraint_indicator_flags_3,r[9]=i.general_constraint_indicator_flags_4,r[10]=i.general_constraint_indicator_flags_5,r[11]=i.general_constraint_indicator_flags_6,r[12]=i.general_level_idc,r[13]=240|(3840&i.min_spatial_segmentation_idc)>>8,r[14]=255&i.min_spatial_segmentation_idc,r[15]=252|3&i.parallelismType,r[16]=252|3&i.chroma_format_idc,r[17]=248|7&i.bit_depth_luma_minus8,r[18]=248|7&i.bit_depth_chroma_minus8,r[19]=0,r[20]=0,r[21]=(3&i.constant_frame_rate)<<6|(7&i.num_temporal_layers)<<3|(i.temporal_id_nested?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=(255&e.byteLength)>>0,r.set(e,28),r[23+(5+e.byteLength)+0]=161,r[23+(5+e.byteLength)+1]=0,r[23+(5+e.byteLength)+2]=1,r[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,r[23+(5+e.byteLength)+4]=(255&t.byteLength)>>0,r.set(t,23+(5+e.byteLength)+5),r[23+(5+e.byteLength+5+t.byteLength)+0]=162,r[23+(5+e.byteLength+5+t.byteLength)+1]=0,r[23+(5+e.byteLength+5+t.byteLength)+2]=1,r[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&n.byteLength)>>8,r[23+(5+e.byteLength+5+t.byteLength)+4]=(255&n.byteLength)>>0,r.set(n,23+(5+e.byteLength+5+t.byteLength)+5)}function Er(){}function Ar(){return mr.apply(this,arguments)||this}re.types=void 0,re.HDLR_TYPES=void 0,re.STTS=void 0,re.STSC=void 0,re.STCO=void 0,re.STSZ=void 0,re.VMHD=void 0,re.SMHD=void 0,re.STSD=void 0,re.FTYP=void 0,re.DINF=void 0;function br(e,t,n,i){e=e*t*(n=void 0===n?1:n);return(i=void 0===i?!1:i)?Math.round(e):e}function Tr(e,t){return br(e,1e3,1/9e4,t=void 0===t?!1:t)}var Sr=null,wr=null,u=((u=Rr.prototype).destroy=function(){},u.resetTimeStamp=function(e){ie.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},u.resetNextTimestamp=function(){ie.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},u.resetInitSegment=function(){ie.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},u.getVideoStartPts=function(e){var i=!1,e=e.reduce(function(e,t){var n=t.pts-e;return n<-4294967296?(i=!0,Ir(e,t.pts)):0<n?e:t.pts},e[0].pts);return i&&ie.debug("PTS rollover detected"),e},u.remux=function(e,t,n,i,r,a,o,s){var l,u,c,h,d,f,p,m=r,g=r,_=-1<e.pid,y=-1<t.pid,v=t.samples.length,E=0<e.samples.length,A=o&&0<v||1<v;return(_&&!E||y&&!A)&&!this.ISGenerated&&!o||(this.ISGenerated||(c=this.generateIS(e,t,r,a)),_=this.isVideoContiguous,o=-1,A&&(o=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!_)&&this.config.forceKeyFrameOnDiscontinuity&&(f=!0,0<o?(ie.warn("[mp4-remuxer]: Dropped "+o+" out of "+v+" video samples due to a missing keyframe"),p=this.getVideoStartPts(t.samples),t.samples=t.samples.slice(o),t.dropped+=o,p=g+=(t.samples[0].pts-p)/t.inputTimeScale):-1===o&&(ie.warn("[mp4-remuxer]: No keyframe found out of "+v+" video samples"),f=!1)),this.ISGenerated&&(E&&A&&(v=this.getVideoStartPts(t.samples),v=(Ir(e.samples[0].pts,v)-v)/t.inputTimeScale,m+=Math.max(0,v),g+=Math.max(0,-v)),E?(e.samplerate||(ie.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r,a)),u=this.remuxAudio(e,m,this.isAudioContiguous,a,y||A||s===Bt?g:void 0),A&&(v=u?u.endPTS-u.startPTS:0,t.inputTimeScale||(ie.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r,a)),l=this.remuxVideo(t,g,_,v))):A&&(l=this.remuxVideo(t,g,_,0)),l)&&(l.firstKeyFrame=o,l.independent=-1!==o,l.firstKeyFramePTS=p)),{audio:u,video:l,initSegment:c,independent:f,text:h=this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(d=Cr(n,r,this._initPTS,this._initDTS)),i.samples.length)?Lr(i,r,this._initPTS):h,id3:d}},u.generateIS=function(e,t,n,i){var r,a,o,s=e.samples,l=t.samples,u=this.typeSupported,c={},h=this._initPTS,i=!h||i,d="audio/mp4";if(i&&(o=a=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":u.mpeg?(d="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}c.audio={id:"audio",container:d,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&u.mpeg?new Uint8Array(0):re.initSegment([e]),metadata:{channelCount:e.channelCount,samplerate:e.samplerate,segmentCodec:e.segmentCodec}},i&&(r=e.inputTimeScale,h&&r===h.timescale?i=!1:o=a=s[0].pts-Math.round(r*n))}if(t.sps&&t.pps&&l.length&&(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:re.initSegment([t]),metadata:{width:t.width,height:t.height}},i)&&(r=t.inputTimeScale,h&&r===h.timescale?i=!1:(s=this.getVideoStartPts(l),t=Math.round(r*n),a=Math.min(a,Ir(l[0].dts,s)-t),o=Math.min(o,s-t))),Object.keys(c).length)return this.ISGenerated=!0,i?(this._initPTS={baseTime:o,timescale:r},this._initDTS={baseTime:a,timescale:r}):o=r=void 0,{tracks:c,initPTS:o,timescale:r}},u.remuxVideo=function(e,t,n,i){var r=e.inputTimeScale,a=e.samples,o=[],s=a.length,l=this._initPTS,u=this.nextAvcDts,c=8,h=this.videoSampleDuration,d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,p=!1;n&&null!==u||(u=t*r-(a[0].pts-Ir(a[0].dts,a[0].pts)));for(var m=l.baseTime*r/l.timescale,g=0;g<s;g++){var _=a[g];_.pts=Ir(_.pts-m,u),_.dts=Ir(_.dts-m,u),_.dts<a[0<g?g-1:g].dts&&(p=!0)}p&&a.sort(function(e,t){var n=e.dts-t.dts,e=e.pts-t.pts;return n||e}),t=a[0].dts;var l=a[a.length-1].dts-t,y=l?Math.round(l/(s-1)):h||e.inputTimeScale/30;n&&(n=(l=t-u)<-1,(w=y<l)||n)&&(w?ie.warn("AVC: "+Tr(l,!0)+" ms ("+l+"dts) hole between fragments detected, filling it"):ie.warn("AVC: "+Tr(-l,!0)+" ms ("+l+"dts) overlapping between fragments detected"),!n||u>=a[0].pts)&&(t=u,w=a[0].pts-l,a[0].dts=t,a[0].pts=w,ie.log("Video: First PTS/DTS adjusted: "+Tr(w,!0)+"/"+Tr(t,!0)+", delta: "+Tr(l,!0)+" ms"));for(var v=0,N=0,F=t=Math.max(0,t),E=0;E<s;E++){for(var A=a[E],B=A.units,U=B.length,b=0,T=0;T<U;T++)b+=B[T].data.length;N+=b,v+=U,A.length=b,A.dts=A.dts<F?F++:A.dts,d=Math.min(A.pts,d),f=Math.max(A.pts,f)}var S,n=a[s-1].dts,w=N+4*v+8;try{S=new Uint8Array(w)}catch(e){return void this.observer.emit(ee.ERROR,ee.ERROR,{type:te.MUX_ERROR,details:ne.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:w,reason:"fail allocating video mdat "+w})}var j=new DataView(S.buffer);j.setUint32(0,w),S.set(re.types.mdat,4);for(var G=!1,V=Number.POSITIVE_INFINITY,H=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,I=0;I<s;I++){for(var C=a[I],z=C.units,W=0,L=0,K=z.length;L<K;L++){var P=z[L],q=P.data,P=P.data.byteLength;j.setUint32(c,P),c+=4,S.set(q,c),c+=P,W+=4+P}var D,k=void 0,O=(I<s-1?(h=a[I+1].dts-C.dts,k=a[I+1].pts-C.pts):(O=this.config,D=0<I?C.dts-a[I-1].dts:y,k=0<I?C.pts-a[I-1].pts:y,O.stretchShortVideoTrack&&null!==this.nextAudioPts&&Math.floor(O.maxBufferHole*r)<(O=(i?d+i*r:this.nextAudioPts)-C.pts)?((h=O-D)<0?h=D:G=!0,ie.log("[mp4-remuxer]: It is approximately "+O/90+" ms to the next segment; using duration "+h/90+" ms for the last video frame.")):h=D),Math.round(C.pts-C.dts)),V=Math.min(V,h),R=Math.max(R,h),H=Math.min(H,k),Y=Math.max(Y,k);o.push(new Dr(C.key,h,W,O))}if(o.length)if(Sr)Sr<70&&((l=o[0].flags).dependsOn=2,l.isNonSync=0);else if(wr&&Y-H<R-V&&y/R<.025&&0===o[0].cts){ie.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var M=t,x=0,Q=o.length;x<Q;x++){var X,J=M+o[x].duration,Z=M+o[x].cts;x<Q-1?(X=J+o[x+1].cts,o[x].duration=X-Z):o[x].duration=x?o[x-1].duration:y,o[x].cts=0,M=J}}this.nextAvcDts=u=n+(h=G||!h?y:h),this.videoSampleDuration=h,this.isVideoContiguous=!0;w={data1:re.moof(e.sequenceNumber++,t,$({},e,{samples:o})),data2:S,startPTS:d/r,endPTS:(f+h)/r,startDTS:t/r,endDTS:u/r,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,w},u.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},u.remuxAudio=function(e,t,n,i,r){var a=e.inputTimeScale,o=a/(e.samplerate||a),s=this.getSamplesPerFrame(e),l=s*o,u=this._initPTS,c="mp3"===e.segmentCodec&&this.typeSupported.mpeg,h=[],d=void 0!==r,f=e.samples,p=c?0:8,m=this.nextAudioPts||-1,g=t*a,_=u.baseTime*a/u.timescale;if(this.isAudioContiguous=n=n||f.length&&0<m&&(i&&Math.abs(g-m)<9e3||Math.abs(Ir(f[0].pts-_,g)-m)<20*l),f.forEach(function(e){e.pts=Ir(e.pts-_,g)}),!n||m<0){if(!(f=f.filter(function(e){return 0<=e.pts})).length)return;m=0===r?0:i&&!d?Math.max(0,g):f[0].pts}if("aac"===e.segmentCodec)for(var y=this.config.maxAudioFramesDrift,v=0,E=m;v<f.length;v++){var A=f[v],b=A.pts,T=b-E,S=Math.abs(1e3*T/a);if(T<=-y*l&&d)0===v&&(ie.warn("Audio frame @ "+(b/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*T/a)+" ms."),this.nextAudioPts=m=E=b);else if(y*l<=T&&S<1e4&&d){var w=Math.round(T/l);(E=b-w*l)<0&&(w--,E+=l),0===v&&(this.nextAudioPts=m=E),ie.warn("[mp4-remuxer]: Injecting "+w+" audio frame @ "+(E/a).toFixed(3)+"s due to "+Math.round(1e3*T/a)+" ms gap.");for(var R=0;R<w;R++)gr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount)||(ie.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),A.unit.subarray()),E+=l,v++}A.pts=E,E+=l}for(var I,C=null,L=null,P=0,D=f.length;D--;)P+=f[D].unit.byteLength;for(var k=0,O=f.length;k<O;k++){var M=f[k],x=M.unit,M=M.pts;if(null!==L)h[k-1].duration=Math.round((M-L)/o);else{if(C=M=n&&"aac"===e.segmentCodec?m:M,!(0<P))return;P+=p;try{I=new Uint8Array(P)}catch(e){return void this.observer.emit(ee.ERROR,ee.ERROR,{type:te.MUX_ERROR,details:ne.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:P,reason:"fail allocating audio mdat "+P})}c||(new DataView(I.buffer).setUint32(0,P),I.set(re.types.mdat,4))}I.set(x,p);x=x.byteLength;p+=x,h.push(new Dr(!0,s,x,0)),L=M}t=h.length;if(t)return this.nextAudioPts=m=L+o*h[h.length-1].duration,i={data1:c?new Uint8Array(0):re.moof(e.sequenceNumber++,C/o,$({},e,{samples:h})),data2:I,startPTS:u=C/a,endPTS:r=m/a,startDTS:u,endDTS:r,type:"audio",hasAudio:!0,hasVideo:!(e.samples=[]),nb:t},this.isAudioContiguous=!0,i},u.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=r/(e.samplerate||r),o=this.nextAudioPts,s=this._initDTS,s=9e4*s.baseTime/s.timescale,l=(null!==o?o:i.startDTS*r)+s,o=i.endDTS*r+s,u=1024*a,c=Math.ceil((o-l)/u),h=gr.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(ie.warn("[mp4-remuxer]: remux empty Audio"),h){for(var d=[],f=0;f<c;f++){var p=l+f*u;d.push({unit:h,pts:p,dts:p})}return e.samples=d,this.remuxAudio(e,t,n,!1)}ie.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},Rr);function Rr(e,t,n,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Sr&&(e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),Sr=e?parseInt(e[1]):0),null===wr&&(t=navigator.userAgent.match(/Safari\/(\d+)/i),wr=t?parseInt(t[1]):0)}function Ir(e,t){var n;if(null!==t)for(n=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=n;return e}function Cr(e,t,n,i){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,o=0;o<r;o++){var s=e.samples[o];s.pts=Ir(s.pts-n.baseTime*a/n.timescale,t*a)/a,s.dts=Ir(s.dts-i.baseTime*a/i.timescale,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function Lr(e,t,n){var i=e.samples.length;if(i){for(var r=e.inputTimeScale,a=0;a<i;a++){var o=e.samples[a];o.pts=Ir(o.pts-n.baseTime*r/n.timescale,t*r)/r}e.samples.sort(function(e,t){return e.pts-t.pts});var s=e.samples;return e.samples=[],{samples:s}}}var Pr,Dr=function(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}},c=((c=kr.prototype).destroy=function(){},c.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},c.resetNextTimestamp=function(){this.lastEndTime=null},c.resetInitSegment=function(e,t,n,i){var r;this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(((t=e)&&i&&(r=i.keyId)&&i.isCommonEncryption&&I(t,["moov","trak"]).forEach(function(e){var e=I(e,["mdia","minf","stbl","stsd"])[0].subarray(8),t=I(e,["enca"]),n=0<t.length;(t=n?t:I(e,["encv"])).forEach(function(e){I(n?e.subarray(28):e.subarray(78),["sinf"]).forEach(function(e){var t,e=et(e);e&&!(t=e.subarray(8,24)).some(function(e){return 0!==e})&&(ie.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+Ye(t)+" -> "+Ye(r)),e.set(r,8))})})}),t)),this.emitInitSegment=!0},c.generateInitSegment=function(e){var t,n,i=this.audioCodec,r=this.videoCodec;null!=e&&e.byteLength?((t=this.initData=Je(e)).audio&&(i=Or(t.audio,E)),t.video&&(r=Or(t.video,ce)),n={},t.audio&&t.video?n.audiovideo={container:"video/mp4",codec:i+","+r,initSegment:e,id:"main"}:t.audio?n.audio={container:"audio/mp4",codec:i,initSegment:e,id:"audio"}:t.video?n.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:ie.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n):(this.initTracks=void 0,this.initData=void 0)},c.remux=function(e,t,n,i,r,a){var o,s,l,u,c,h,d,f,p,m,g,_=this.initPTS,y=this.lastEndTime,v={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0},t=(G(y)||(y=this.lastEndTime=r||0),t.samples);return null!=t&&t.length&&(o={initPTS:void 0,timescale:1},null!=(s=this.initData)&&s.length||(this.generateInitSegment(t),s=this.initData),null!=s&&s.length?(this.emitInitSegment&&(o.tracks=this.initTracks,this.emitInitSegment=!1),l=function(e,t){for(var n=0,i=0,r=0,a=I(e,["moof","traf"]),o=0;o<a.length;o++){var s=a[o],l=I(s,["tfhd"])[0],u=t[R(l,4)];if(u){var c=u.default,h=R(l,0)|(null==c?void 0:c.flags),d=null==c?void 0:c.duration;8&h&&(d=R(l,2&h?12:8));for(var f=u.timescale||9e4,p=I(s,["trun"]),m=0;m<p.length;m++)!(n=function(e){var t=R(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var i=0,r=R(e,4),a=0;a<r;a++)256&t&&(i+=R(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return i}(p[m]))&&d&&(n=d*R(p[m],4)),u.type===ce?i+=n/f:u.type===E&&(r+=n/f)}}if(0!==i||0!==r)return i||r;for(var g=0,_=I(e,["sidx"]),y=0;y<_.length;y++){var v=function(e){var t=[],n=e[0],i=8,r=R(e,i),a=e.length+0,o=qe(e,i=(i+=4)+(0===n?8:16)+2);i+=2;for(var s=0;s<o;s++){var l=i,u=R(e,l),c=(l+=4,2147483647&u);if(1==(2147483648&u)>>>31)return ie.warn("SIDX has hierarchical references (not supported)"),null;u=R(e,l);l+=4,t.push({referenceSize:c,subsegmentDuration:u,info:{duration:u/r,start:a,end:a+c-1}}),a+=c,i=l+=4}return{earliestPresentationTime:0,timescale:r,version:n,referencesCount:o,references:t}}(_[y]);null!=v&&v.references&&(g+=v.references.reduce(function(e,t){return e+t.info.duration||0},0))}return g}(t,s),c=s,u=I(t,["moof","traf"]).reduce(function(e,t){var i=I(t,["tfdt"])[0],r=i[0],t=I(t,["tfhd"]).reduce(function(e,t){t=R(t,4),t=c[t];if(t){var n=R(i,4);if(1===r){if(n===ze)return ie.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;n=n*(1+ze)+R(i,8)}n=n/(t.timescale||9e4);if(isFinite(n)&&(null===e||n<e))return n}return e},null);return null!==t&&isFinite(t)&&(null===e||t<e)?t:e},null),d=u=null===u?r:u,g=r,(null===(h=_)||(m=Math.max(l,1),d=d-h.baseTime/h.timescale,Math.abs(d-g)>m)||o.timescale!==_.timescale&&a)&&(o.initPTS=u-r,_&&1===_.timescale&&ie.warn("Adjusting initPTS by "+(o.initPTS-_.baseTime)),this.initPTS=_={baseTime:o.initPTS,timescale:1}),d=(h=e?u-_.baseTime/_.timescale:y)+l,f=s,p=_.baseTime/_.timescale,I(t,["moof","traf"]).forEach(function(t){I(t,["tfhd"]).forEach(function(e){var i,e=R(e,4),e=f[e];e&&(i=e.timescale||9e4,I(t,["tfdt"]).forEach(function(e){var t=e[0],n=R(e,4);0===t?(n-=p*i,Xe(e,4,n=Math.max(n,0))):(n=(n=(n*=Math.pow(2,32))+R(e,8))-p*i,n=Math.max(n,0),t=Math.floor(n/(1+ze)),n=Math.floor(n%(1+ze)),Xe(e,4,t),Xe(e,8,n))}))})}),0<l?this.lastEndTime=d:(ie.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp()),g="",(m=!!s.audio)&&(g+="audio"),(a=!!s.video)&&(g+="video"),v.audio="audio"===(e={data1:t,startPTS:h,startDTS:h,endPTS:d,endDTS:d,type:g,hasAudio:m,hasVideo:a,nb:1,dropped:0}).type?e:void 0,v.video="audio"!==e.type?e:void 0,v.initSegment=o,v.id3=Cr(n,r,_,_),i.samples.length&&(v.text=Lr(i,r,_))):ie.warn("[passthrough-remuxer.ts]: Failed to generate initSegment.")),v},kr);function kr(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}function Or(e,t){e=null==e?void 0:e.codec;return e&&4<e.length?e:t===E?"ec-3"===e||"ac-3"===e||"alac"===e?e:"fLaC"===e||"Opus"===e?Et(e):(ie.warn('Unhandled audio codec "'+e+'" or audio object type'),"mp4a.40.5"):(ie.warn('Unhandled video codec "'+e+'"'),"hvc1"===e||"hev1"===e?"hvc1.1.6.L120.90":"av01"===e?"av01.0.04M.08":"avc1.42e01e")}try{Pr=self.performance.now.bind(self.performance)}catch(e){ie.debug("Unable to use Performance API on this environment"),Pr="undefined"!=typeof self&&self.Date.now}var Mr=[{demux:s,remux:c},{demux:l,remux:u},{demux:o,remux:u},{demux:a,remux:u}],xr=(Mr.splice(2,0,{demux:Qi,remux:u}),(s=Fr.prototype).configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},s.push=function(e,t,n,i){var r=this,a=n.transmuxing,e=(a.executeStart=Pr(),new Uint8Array(e)),o=this.currentTransmuxState,s=this.transmuxConfig,i=(i&&(this.currentTransmuxState=i),i||o),o=i.contiguous,l=i.discontinuity,u=i.trackSwitch,c=i.accurateTimeOffset,h=i.timeOffset,i=i.initSegmentChange,d=s.audioCodec,f=s.videoCodec,p=s.defaultInitPts,m=s.duration,s=s.initSegmentData,g=(g=null,g=0<e.byteLength&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method?t:g);if(g&&"AES-128"===g.method){var _=this.getDecrypter();if(!_.isSync())return this.decryptionPromise=_.webCryptoDecrypt(e,g.key.buffer,g.iv.buffer).then(function(e){e=r.push(e,null,n);return r.decryptionPromise=null,e}),this.decryptionPromise;var y=_.softwareDecrypt(e,g.key.buffer,g.iv.buffer);if(!(y=-1<n.part?_.flush():y))return a.executeEnd=Pr(),Nr(n);e=new Uint8Array(y)}_=this.needsProbing(l,u);if(_){y=this.configureTransmuxer(e);if(y)return ie.warn("[transmuxer] "+y.message),this.observer.emit(ee.ERROR,ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,fatal:!1,error:y,reason:y.message}),a.executeEnd=Pr(),Nr(n)}(l||u||i||_)&&this.resetInitSegment(s,d,f,m,t),(l||i||_)&&this.resetInitialTimestamp(p),o||this.resetContiguity();y=this.transmux(e,g,h,c,n),u=this.currentTransmuxState;return u.contiguous=!0,u.discontinuity=!1,u.trackSwitch=!1,a.executeEnd=Pr(),y},s.flush=function(t){var n,i=this,e=t.transmuxing,r=(e.executeStart=Pr(),this.decrypter),a=this.currentTransmuxState,o=this.decryptionPromise;return o?o.then(function(){return i.flush(t)}):(n=[],o=a.timeOffset,r&&(a=r.flush())&&n.push(this.push(a,null,t)),r=this.demuxer,a=this.remuxer,r&&a?Br(a=r.flush(o))?a.then(function(e){return i.flushRemux(n,e,t),n}):(this.flushRemux(n,a,t),n):(e.executeEnd=Pr(),[Nr(t)]))},s.flushRemux=function(e,t,n){var i=t.audioTrack,r=t.videoTrack,a=t.id3Track,t=t.textTrack,o=this.currentTransmuxState,s=o.accurateTimeOffset,o=o.timeOffset,i=(ie.log("[transmuxer.ts]: Flushed fragment "+n.sn+(-1<n.part?" p: "+n.part:"")+" of level "+n.level),this.remuxer.remux(i,r,a,t,o,s,!0,this.id));e.push({remuxResult:i,chunkMeta:n}),n.transmuxing.executeEnd=Pr()},s.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},s.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},s.resetInitSegment=function(e,t,n,i,r){var a=this.demuxer,o=this.remuxer;a&&o&&(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,r))},s.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},s.transmux=function(e,t,n,i,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r)},s.transmuxUnencrypted=function(e,t,n,i){var e=this.demuxer.demux(e,t,!1,!this.config.progressive),r=e.audioTrack,a=e.videoTrack,o=e.id3Track,e=e.textTrack;return{remuxResult:this.remuxer.remux(r,a,o,e,t,n,!1,this.id),chunkMeta:i}},s.transmuxSampleAes=function(e,t,n,i,r){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then(function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,a.id),chunkMeta:r}})},s.configureTransmuxer=function(e){for(var t,n,i=this.config,r=this.observer,a=this.typeSupported,o=this.vendor,s=0,l=Mr.length;s<l;s++)if(null!=(n=Mr[s].demux)&&n.probe(e)){t=Mr[s];break}if(!t)return new Error("Failed to find demuxer by probing fragment data");var u=this.demuxer,c=this.remuxer,h=t.remux,d=t.demux;c&&c instanceof h||(this.remuxer=new h(r,i,a,o)),u&&u instanceof d||(this.demuxer=new d(r,i,a),this.probe=d.probe)},s.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},s.getDecrypter=function(){return this.decrypter||(this.decrypter=new ri(this.config))},Fr),Nr=function(e){return{remuxResult:{},chunkMeta:e}};function Fr(e,t,n,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}function Br(e){return"then"in e&&e.then instanceof Function}function Ur(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r||null}function jr(e,t,n,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}var Gr,f,c={exports:{}};function Vr(){}function Hr(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Yr(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");n=new Hr(n,i||e,r),i=f?f+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],n]:e._events[i].push(n):(e._events[i]=n,e._eventsCount++),e}function zr(e,t){0==--e._eventsCount?e._events=new Vr:delete e._events[t]}function Wr(){this._events=new Vr,this._eventsCount=0}l=c,Gr=Object.prototype.hasOwnProperty,f="~",Object.create&&(Vr.prototype=Object.create(null),(new Vr).__proto__||(f=!1)),Wr.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)Gr.call(e,t)&&n.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},Wr.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,i=t.length,r=new Array(i);n<i;n++)r[n]=t[n].fn;return r},Wr.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},Wr.prototype.emit=function(e,t,n,i,r,a){var o=f?f+e:e;if(!this._events[o])return!1;var s,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,a),!0}for(d=1,s=new Array(u-1);d<u;d++)s[d-1]=arguments[d];l.fn.apply(l.context,s)}else for(var c,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,n);break;case 4:l[d].fn.call(l[d].context,t,n,i);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];l[d].fn.apply(l[d].context,s)}return!0},Wr.prototype.on=function(e,t,n){return Yr(this,e,t,n,!1)},Wr.prototype.once=function(e,t,n){return Yr(this,e,t,n,!0)},Wr.prototype.removeListener=function(e,t,n,i){e=f?f+e:e;if(this._events[e])if(t){var r=this._events[e];if(r.fn)r.fn!==t||i&&!r.once||n&&r.context!==n||zr(this,e);else{for(var a=0,o=[],s=r.length;a<s;a++)(r[a].fn!==t||i&&!r[a].once||n&&r[a].context!==n)&&o.push(r[a]);o.length?this._events[e]=1===o.length?o[0]:o:zr(this,e)}}else zr(this,e);return this},Wr.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&zr(this,e)):(this._events=new Vr,this._eventsCount=0),this},Wr.prototype.off=Wr.prototype.removeListener,Wr.prototype.addListener=Wr.prototype.on,Wr.prefixed=f,l.exports=Wr.EventEmitter=Wr;var Kr=F(c.exports);function qr(e,t){var n,i,r;return!!((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment)&&(n=[],i=(r=t.remuxResult).audio,r=r.video,i&&Qr(n,i),r&&Qr(n,r),e.postMessage({event:"transmuxComplete",data:t},n),!0)}function Qr(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function Xr(n,e,t){e.reduce(function(e,t){return qr(n,t)||e},!1)||n.postMessage({event:"transmuxComplete",data:e[0]}),n.postMessage({event:"flush",data:t})}{function Jr(){for(var e in ie)!function(t){ie[t]=function(e){ea("workerLog",{logType:t,message:e})}}(e)}var Zr,$r,ea;void 0!==Ks&&Ks&&(Zr=self,$r=new Kr,ea=function(e,t){Zr.postMessage({event:e,data:t})},$r.on(ee.FRAG_DECRYPTED,ea),$r.on(ee.ERROR,ea),Zr.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var n=JSON.parse(t.config);Zr.transmuxer=new xr($r,t.typeSupported,n,t.vendor,t.id),X(n.debug,t.id),Jr(),ea("init",null);break;case"configure":Zr.transmuxer.configure(t.config);break;case"demux":n=Zr.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state);Br(n)?(Zr.transmuxer.async=!0,n.then(function(e){qr(Zr,e)}).catch(function(e){ea(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})})):(Zr.transmuxer.async=!1,qr(Zr,n));break;case"flush":var i=t.chunkMeta,n=Zr.transmuxer.flush(i);Br(n)||Zr.transmuxer.async?(n=Br(n)?n:Promise.resolve(n)).then(function(e){Xr(Zr,e,i)}).catch(function(e){ea(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})}):Xr(Zr,n,i)}}))}var ta,na,ia=ft()||{isTypeSupported:function(){return!1}},ra=((o=sa.prototype).resetWorker=function(){var e,t;this.workerContext&&(e=(t=this.workerContext).worker,(t=t.objectURL)&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null)},o.destroy=function(){this.workerContext?(this.resetWorker(),this.onwmsg=void 0):(e=this.transmuxer)&&(e.destroy(),this.transmuxer=null);var e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},o.push=function(e,t,n,i,r,a,o,s,l,u){var c=this,h=(l.transmuxing.start=self.performance.now(),this.transmuxer),d=(a||r).start,f=r.decryptdata,p=this.frag,m=!(p&&r.cc===p.cc),g=!(p&&l.level===p.level),_=p?l.sn-p.sn:-1,y=this.part?l.part-this.part.index:-1,v=0==_&&1<l.id&&l.id===(null==p?void 0:p.stats.chunkCount),v=!g&&(1==_||0==_&&(1==y||v&&y<=0)),E=self.performance.now(),E=((g||_||0===r.stats.parsing.start)&&(r.stats.parsing.start=E),!a||!y&&v||(a.stats.parsing.start=E),!(p&&(null==(_=r.initSegment)?void 0:_.url)===(null==(y=p.initSegment)?void 0:y.url))),_=new jr(m,v,s,g,d,E);v&&!m&&!E||(ie.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+g+"\n        contiguous: "+v+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+d+"\n        initSegmentChange: "+E),p=new Ur(n,i,t,o,u),this.configureTransmuxer(p)),this.frag=r,this.part=a,this.workerContext?this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:_},e instanceof ArrayBuffer?[e]:[]):h&&(Br(y=h.push(e,f,l,_))?(h.async=!0,y.then(function(e){c.handleTransmuxComplete(e)}).catch(function(e){c.transmuxerError(e,l,"transmuxer-interface push error")})):(h.async=!1,this.handleTransmuxComplete(y)))},o.flush=function(t){var e,n=this,i=(t.transmuxing.start=self.performance.now(),this.transmuxer);this.workerContext?this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t}):i&&(Br(e=i.flush(t))||i.async?(e=Br(e)?e:Promise.resolve(e)).then(function(e){n.handleFlushResult(e,t)}).catch(function(e){n.transmuxerError(e,t,"transmuxer-interface flush error")}):this.handleFlushResult(e,t))},o.transmuxerError=function(e,t,n){this.hls&&(this.error=e,this.hls.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n}))},o.handleFlushResult=function(e,t){var n=this;e.forEach(function(e){n.handleTransmuxComplete(e)}),this.onFlush(t)},o.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":var i=null==(i=this.workerContext)?void 0:i.objectURL;i&&self.URL.revokeObjectURL(i);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":ie[t.data.logType]&&ie[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},o.configureTransmuxer=function(e){var t=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)},o.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},sa),Qi=(e(oa,na=In),(a=oa.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},a._registerListeners=function(){var e=this.hls;e.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ee.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(ee.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ee.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ee.ERROR,this.onError,this),e.on(ee.BUFFER_RESET,this.onBufferReset,this),e.on(ee.BUFFER_CREATED,this.onBufferCreated,this),e.on(ee.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ee.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ee.FRAG_BUFFERED,this.onFragBuffered,this)},a._unregisterListeners=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ee.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(ee.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ee.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ee.ERROR,this.onError,this),e.off(ee.BUFFER_RESET,this.onBufferReset,this),e.off(ee.BUFFER_CREATED,this.onBufferCreated,this),e.off(ee.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ee.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ee.FRAG_BUFFERED,this.onFragBuffered,this)},a.onInitPtsFound=function(e,t){var n=t.frag,i=t.id,r=t.initPTS,t=t.timescale;"main"===i&&(i=n.cc,this.initPTS[n.cc]={baseTime:r,timescale:t},this.log("InitPTS for cc: "+i+" found from main: "+r),this.videoTrackCC=i,this.state===pi)&&this.tick()},a.startLoad=function(e){var t;this.levels?(t=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),0<t&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=h):(this.loadedmetadata=!1,this.state=ui),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.startPosition=e,this.state=ai)},a.doTick=function(){switch(this.state){case h:this.doTickIdle();break;case ui:var e=this.levels,t=this.trackId,t=null==e||null==(e=e[t])?void 0:e.details;if(t){if(this.waitForCdnTuneIn(t))break;this.state=pi}break;case li:e=performance.now(),t=this.retryDate;(!t||t<=e||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=h);break;case pi:var n,i,e=this.waitingData;e?(t=e.frag,n=e.part,i=e.cache,e=e.complete,void 0!==this.initPTS[t.cc]?(this.waitingData=null,this.waitingVideoCC=-1,this.state=si,n={frag:t,part:n,payload:i.flush(),networkDetails:null},this._handleFragmentLoadProgress(n),e&&na.prototype._handleFragmentLoadComplete.call(this,n)):this.videoTrackCC!==this.waitingVideoCC?(this.log("Waiting fragment cc ("+t.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment()):(i=this.getLoadPosition(),Sn((e=y.bufferInfo(this.mediaBuffer,i,this.config.maxBufferHole)).end,this.config.maxFragLookUpTolerance,t)<0&&(this.log("Waiting fragment cc ("+t.cc+") @ "+t.start+" cancelled because another fragment at "+e.end+" is needed"),this.clearWaitingFragment()))):this.state=h}this.onTickEnd()},a.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=h)},a.resetLoadingState=function(){this.clearWaitingFragment(),na.prototype.resetLoadingState.call(this)},a.onTickEnd=function(){var e=this.media;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},a.doTickIdle=function(){var e=this.hls,t=this.levels,n=this.media,i=this.trackId,r=e.config;if(null!=t&&t[i]&&(n||!this.startFragRequested&&r.startFragPrefetch)){r=t[i],t=r.details;if(!t||t.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(t))this.state=ui;else{i=this.mediaBuffer||this.media,i=(this.bufferFlushed&&i&&(this.bufferFlushed=!1,this.afterBufferFlushed(i,E,Bt)),this.getFwdBufferInfo(i,Bt));if(null!==i){var a=this.bufferedTrack,o=this.switchingTrack;if(!o&&this._streamEnded(i,t))e.trigger(ee.BUFFER_EOS,{type:"audio"}),this.state=di;else{var e=this.getFwdBufferInfo(this.videoBuffer||this.media,_),s=i.len,l=this.getMaxBufferLength(null==e?void 0:e.len),u=t.fragments,c=u[0].start,h=i.end;if(o&&n&&(d=this.getLoadPosition(),a&&o.attrs!==a.attrs&&(h=d),t.PTSKnown)&&d<c&&(i.end>c||i.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=c+.05),!(l<=s&&!o&&h<u[u.length-1].start)){var a=this.getNextFragment(h,t),d=!1;if(a&&this.isLoopLoading(a,h)&&(d=!!a.gap,a=this.getNextFragmentLoopLoading(a,t,i,_,l)),a){n=e&&a.start>e.end+t.targetduration;if(n||(null==e||!e.len)&&i.len){c=this.getAppendedFrag(a.start,_);if(null===c)return;if(d=d||!!c.gap||!!n&&0===e.len,n&&!d||d&&i.nextStart&&i.nextStart<c.end)return}this.loadFragment(a,r,h)}else this.bufferFlushed=!0}}}}}},a.getMaxBufferLength=function(e){var t=na.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t},a.onMediaDetaching=function(){this.videoBuffer=null,na.prototype.onMediaDetaching.call(this)},a.onAudioTracksUpdated=function(e,t){t=t.audioTracks;this.resetTransmuxer(),this.levels=t.map(function(e){return new rn(e)})},a.onAudioTrackSwitching=function(e,t){var n=!!t.url,i=(this.trackId=t.id,this.fragCurrent);i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=h,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=ai),this.tick()},a.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},a.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(ee.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},a.onAudioTrackLoaded=function(e,t){if(null!=this.mainDetails){var n=this.levels,i=t.details,r=t.id;if(n){this.log("Track "+r+" loaded ["+i.startSN+","+i.endSN+"]"+(i.lastPartSn?"[part-"+i.lastPartSn+"-"+i.lastPartIndex+"]":"")+",duration:"+i.totalduration);var n=n[r],a=0;if(i.live||null!=(o=n.details)&&o.live){var o=this.mainDetails;if(i.fragments[0]||(i.deltaUpdateFailed=!0),i.deltaUpdateFailed||!o)return;a=!n.details&&i.hasProgramDateTime&&o.hasProgramDateTime?(Wn(i,o),i.fragments[0].start):this.alignPlaylists(i,n.details)}n.details=i,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(n.details,a),this.state!==ui||this.waitForCdnTuneIn(i)||(this.state=h),this.tick()}else this.warn("Audio tracks were reset while loading level "+r)}else this.cachedTrackLoadedData=t},a._handleFragmentLoadProgress=function(e){var t,n,i,r,a=e.frag,o=e.part,e=e.payload,s=this.config,l=this.trackId,u=this.levels;u?(u=u[l])?(t=u.details)?(s=s.defaultAudioCodec||u.audioCodec||"mp4a.40.2",u=(u=this.transmuxer)||(this.transmuxer=new ra(this.hls,Bt,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))),n=this.initPTS[a.cc],i=null==(i=a.initSegment)?void 0:i.data,void 0!==n?(r=o?o.index:-1,r=new jn(a.level,a.sn,a.stats.chunkCount,e.byteLength,r,-1!==r),u.push(e,i,s,"",a,o,t.totalduration,!1,r,n)):(this.log("Unknown video PTS for cc "+a.cc+", waiting for video PTS before demuxing audio frag "+a.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+l),(this.waitingData=this.waitingData||{frag:a,part:o,cache:new gi,complete:!1}).cache.push(new Uint8Array(e)),this.waitingVideoCC=this.videoTrackCC,this.state=pi)):(this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(a.start)):this.warn("Audio track is undefined on fragment load progress"):this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+a.sn+" of level "+a.level+" will not be buffered")},a._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:na.prototype._handleFragmentLoadComplete.call(this,e)},a.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},a.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},a.onFragBuffered=function(e,t){var n,i=t.frag,t=t.part;i.type===Bt?this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(t?" p: "+t.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false")):("initSegment"!==i.sn&&(this.fragPrevious=i,n=this.switchingTrack)&&(this.bufferedTrack=n,this.switchingTrack=null,this.hls.trigger(ee.AUDIO_TRACK_SWITCHED,m({},n))),this.fragBufferedComplete(i,t)):this.loadedmetadata||i.type!==_||(n=this.videoBuffer||this.media)&&y.getBuffered(n).length&&(this.loadedmetadata=!0)},a.onError=function(e,t){var n;if(t.fatal)this.state=fi;else switch(t.details){case ne.FRAG_GAP:case ne.FRAG_PARSING_ERROR:case ne.FRAG_DECRYPT_ERROR:case ne.FRAG_LOAD_ERROR:case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_ERROR:case ne.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Bt,t);break;case ne.AUDIO_TRACK_LOAD_ERROR:case ne.AUDIO_TRACK_LOAD_TIMEOUT:case ne.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==ui||(null==(n=t.context)?void 0:n.type)!==Nt||(this.state=h);break;case ne.BUFFER_APPEND_ERROR:case ne.BUFFER_FULL_ERROR:t.parent&&"audio"===t.parent&&(t.details===ne.BUFFER_APPEND_ERROR?this.resetLoadingState():this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,na.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")));break;case ne.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},a.onBufferFlushed=function(e,t){var n,t=t.type;t===E&&(this.bufferFlushed=!0,this.state===di&&(this.state=h),n=this.mediaBuffer||this.media)&&(this.afterBufferFlushed(n,t,Bt),this.tick())},a._handleTransmuxComplete=function(e){var t,n,i,r,a,o,s,l,u=this.hls,c=e.remuxResult,e=e.chunkMeta,h=this.getCurrentContext(e);h?(t=h.frag,n=h.part,i=(h=h.level).details,r=c.audio,a=c.text,o=c.id3,c=c.initSegment,!this.fragContextChanged(t)&&i?(this.state=ci,this.switchingTrack&&r&&this.completeAudioSwitch(this.switchingTrack),null!=c&&c.tracks&&(l=t.initSegment||t,this._bufferInitSegment(h,c.tracks,l,e),u.trigger(ee.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:"audio",tracks:c.tracks})),r&&(h=r.startPTS,l=r.endPTS,c=r.startDTS,s=r.endDTS,n&&(n.elementaryStreams[E]={startPTS:h,endPTS:l,startDTS:c,endDTS:s}),t.setElementaryStreamInfo(E,h,l,c,s),this.bufferFragmentData(r,t,n,e)),null!=o&&null!=(h=o.samples)&&h.length&&(l=$({id:"audio",frag:t,details:i},o),u.trigger(ee.FRAG_PARSING_METADATA,l)),a&&(c=$({id:"audio",frag:t,details:i},a),u.trigger(ee.FRAG_PARSING_USERDATA,c))):this.fragmentTracker.removeFragment(t)):this.resetWhenMissingContext(e)},a._bufferInitSegment=function(e,t,n,i){var r;this.state===ci&&(t.video&&delete t.video,r=t.audio)&&(r.id="audio",e=e.audioCodec,this.log("Init audio buffer, container:"+r.container+", codecs[level/parsed]=["+e+"/"+r.codec+"]"),e&&1===e.split(",").length&&(r.levelCodec=e),this.hls.trigger(ee.BUFFER_CODECS,t),null!=(e=r.initSegment)&&e.byteLength&&(t={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:e},this.hls.trigger(ee.BUFFER_APPENDING,t)),this.tickImmediate())},a.loadFragment=function(e,t,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,this.switchingTrack||i===Cn||i===Ln?"initSegment"===e.sn?this._loadInitSegment(e,t):null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=pi,(i=this.mainDetails)&&i.fragments[0].start!==t.details.fragments[0].start&&Wn(t.details,i)):(this.startFragRequested=!0,na.prototype.loadFragment.call(this,e,t,n)):this.clearTrackerIfNeeded(e)},a.flushAudioIfNeeded=function(e){var t=this.media,n=this.bufferedTrack,n=null==n?void 0:n.attrs,e=e.attrs;t&&n&&(n.CHANNELS!==e.CHANNELS||n.NAME!==e.NAME||n.LANGUAGE!==e.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),na.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)},a.completeAudioSwitch=function(e){var t=this.hls;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(ee.AUDIO_TRACK_SWITCHED,m({},e))},oa),s=(e(aa,ta=n),(u=aa.prototype).registerListeners=function(){var e=this.hls;e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ee.LEVEL_LOADING,this.onLevelLoading,this),e.on(ee.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ee.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ee.ERROR,this.onError,this)},u.unregisterListeners=function(){var e=this.hls;e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ee.LEVEL_LOADING,this.onLevelLoading,this),e.off(ee.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ee.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ee.ERROR,this.onError,this)},u.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,ta.prototype.destroy.call(this)},u.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},u.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},u.onAudioTrackLoaded=function(e,t){var n,i=t.id,r=t.groupId,a=t.details,o=this.tracksInGroup[i];o&&o.groupId===r?(n=o.details,o.details=t.details,this.log("audio-track "+i+' "'+o.name+'" lang:'+o.lang+" group:"+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,t,n)):this.warn("Track with id:"+i+" and group:"+r+" not found in active group "+o.groupId)},u.onLevelLoading=function(e,t){this.switchLevel(t.level)},u.onLevelSwitching=function(e,t){this.switchLevel(t.level)},u.switchLevel=function(e){var t,n,e=this.hls.levels[e];null!=e&&e.audioGroupIds&&(t=e.audioGroupIds[e.urlId],this.groupId!==t?(this.groupId=t||null,e=this.tracks.filter(function(e){return!t||e.groupId===t}),this.selectDefaultTrack&&!e.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),n={audioTracks:this.tracksInGroup=e},this.log("Updating audio tracks, "+e.length+" track(s) found in group:"+t),this.hls.trigger(ee.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack()):this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId))},u.onError=function(e,t){!t.fatal&&t.context&&t.context.type===Nt&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))},u.setAudioTrack=function(e){var t,n,i,r=this.tracksInGroup;e<0||e>=r.length?this.warn("Invalid id passed to audio-track controller"):(this.clearTimer(),t=this.currentTrack,r[this.trackId],n=(r=r[e]).groupId,i=r.name,this.log("Switching to audio-track "+e+' "'+i+'" lang:'+r.lang+" group:"+n),this.trackId=e,this.currentTrack=r,this.selectDefaultTrack=!1,this.hls.trigger(ee.AUDIO_TRACK_SWITCHING,m({},r)),r.details&&!r.details.live||(i=this.switchParams(r.url,null==t?void 0:t.details),this.loadPlaylist(i)))},u.selectInitialTrack=function(){var e=this.tracksInGroup,t=this.findTrackId(this.currentTrack);-1!==(t=-1===t?this.findTrackId(null):t)?this.setAudioTrack(t):(t=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+e.length),this.warn(t.message),this.hls.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t}))},u.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if(!this.selectDefaultTrack||i.default){if(!e||void 0!==e.attrs["STABLE-RENDITION-ID"]&&e.attrs["STABLE-RENDITION-ID"]===i.attrs["STABLE-RENDITION-ID"])return i.id;if(e.name===i.name&&e.lang===i.lang)return i.id}}return-1},u.loadPlaylist=function(e){ta.prototype.loadPlaylist.call(this);var t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){var n=t.id,i=t.groupId,r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist "+n+' "'+t.name+'" lang:'+t.lang+" group:"+i),this.clearTimer(),this.hls.trigger(ee.AUDIO_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:e||null})}},r(aa,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),aa);function aa(e){return(e=ta.call(this,e,"[audio-track-controller]")||this).tracks=[],e.groupId=null,e.tracksInGroup=[],e.trackId=-1,e.currentTrack=null,e.selectDefaultTrack=!0,e.registerListeners(),e}function oa(e,t,n){return(e=na.call(this,e,t,n,"[audio-stream-controller]",Bt)||this).videoBuffer=null,e.videoTrackCC=-1,e.waitingVideoCC=-1,e.bufferedTrack=null,e.switchingTrack=null,e.trackId=-1,e.waitingData=null,e.mainDetails=null,e.bufferFlushed=!1,e.cachedTrackLoadedData=null,e._registerListeners(),e}function sa(t,n,i,e){function r(e,t){(t=t||{}).frag=a.frag,t.id=a.id,e===ee.ERROR&&(a.error=t.error),a.hls.trigger(e,t)}var a=this,o=(this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,t.config);this.hls=t,this.id=n,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=i,this.onFlush=e;this.observer=new Kr,this.observer.on(ee.FRAG_DECRYPTED,r),this.observer.on(ee.ERROR,r);var s,l,u,c,t={mpeg:ia.isTypeSupported("audio/mpeg"),mp3:ia.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:ia.isTypeSupported('audio/mp4; codecs="ac-3"')},i=navigator.vendor;if(!this.useWorker||"undefined"==typeof Worker||(o.workerPath,0))this.transmuxer=new xr(this.observer,t,o,i,n);else try{o.workerPath?(ie.log("loading Web Worker "+o.workerPath+' for "'+n+'"'),this.workerContext=(u=o.workerPath,c=new self.URL(u,self.location.href).href,{worker:new self.Worker(c),scriptURL:c})):(ie.log('injecting Web Worker for "'+n+'"'),this.workerContext=(s=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+Ws.toString()+")(true);"],{type:"text/javascript"}),l=self.URL.createObjectURL(s),{worker:new self.Worker(l),objectURL:l})),this.onwmsg=function(e){return a.onWorkerMessage(e)};var h=this.workerContext.worker;h.addEventListener("message",this.onwmsg),h.onerror=function(e){e=new Error(e.message+"  ("+e.filename+":"+e.lineno+")");o.enableWorker=!1,ie.warn('Error in "'+n+'" Web Worker, fallback to inline'),a.hls.trigger(ee.ERROR,{type:te.OTHER_ERROR,details:ne.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:e})},h.postMessage({cmd:"init",typeSupported:t,vendor:i,id:n,config:JSON.stringify(o)})}catch(e){ie.warn('Error setting up "'+n+'" Web Worker, fallback to inline',e),this.resetWorker(),this.error=null,this.transmuxer=new xr(this.observer,t,o,i,n)}}function la(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(!function(t,n){var e=t["STABLE-RENDITION-ID"];return e?e===n["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(function(e){return t[e]!==n[e]})}(e[n].attrs,t[n].attrs))return;return 1}}e(fa,ca=In),(l=fa.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},l._registerListeners=function(){var e=this.hls;e.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ee.ERROR,this.onError,this),e.on(ee.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ee.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ee.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ee.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(ee.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ee.FRAG_BUFFERED,this.onFragBuffered,this)},l._unregisterListeners=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ee.ERROR,this.onError,this),e.off(ee.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ee.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ee.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ee.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(ee.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ee.FRAG_BUFFERED,this.onFragBuffered,this)},l.startLoad=function(e){this.stopLoad(),this.state=h,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},l.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},l.onMediaDetaching=function(){this.tracksBuffered=[],ca.prototype.onMediaDetaching.call(this)},l.onLevelLoaded=function(e,t){this.mainDetails=t.details},l.onSubtitleFragProcessed=function(e,t){var n=t.frag,t=t.success;if(this.fragPrevious=n,this.state=h,t){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var r,a=n.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){r=i[o];break}t=n.start+n.duration;r?r.end=t:i.push(r={start:a,end:t}),this.fragmentTracker.fragBuffered(n)}}},l.onBufferFlushing=function(e,t){var n,i=t.startOffset,r=t.endOffset;0!==i||r===Number.POSITIVE_INFINITY||(n=r-1)<=0||(t.endOffsetSubtitles=Math.max(0,n),this.tracksBuffered.forEach(function(e){for(var t=0;t<e.length;)if(e[t].end<=n)e.shift();else{if(!(e[t].start<n))break;e[t].start=n,t++}}),this.fragmentTracker.removeFragmentsInRange(i,n,Ut))},l.onFragBuffered=function(e,t){this.loadedmetadata||t.frag.type!==_||null!=(t=this.media)&&t.buffered.length&&(this.loadedmetadata=!0)},l.onError=function(e,t){t=t.frag;(null==t?void 0:t.type)===Ut&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ai)&&(this.state=h)},l.onSubtitleTracksUpdated=function(e,t){var n=this,t=t.subtitleTracks;la(this.levels,t)?this.levels=t.map(function(e){return new rn(e)}):(this.tracksBuffered=[],this.levels=t.map(function(e){e=new rn(e);return n.tracksBuffered[e.id]=[],e}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ut),this.fragPrevious=null,this.mediaBuffer=null)},l.onSubtitleTrackSwitch=function(e,t){this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId?(null!=(t=this.levels[this.currentTrackId])&&t.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,t&&this.setInterval(500)):this.clearInterval()},l.onSubtitleTrackLoaded=function(e,t){var n=t.details,t=t.id,i=this.currentTrackId,r=this.levels;if(r.length){var a=r[i];if(!(t>=r.length||t!==i)&&a){this.mediaBuffer=this.mediaBufferTimeRanges;r=0;if(n.live||null!=(i=a.details)&&i.live){i=this.mainDetails;if(n.deltaUpdateFailed||!i)return;var o=i.fragments[0];a.details?0===(r=this.alignPlaylists(n,a.details))&&o&&pn(n,r=o.start):n.hasProgramDateTime&&i.hasProgramDateTime?(Wn(n,i),r=n.fragments[0].start):o&&pn(n,r=o.start)}a.details=n,this.levelLastLoaded=t,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(a.details,r),this.tick(),!n.live||this.fragCurrent||!this.media||this.state!==h||Tn(null,n.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),a.details=void 0)}}},l._handleFragmentLoadComplete=function(e){var n,t=this,i=e.frag,e=e.payload,r=i.decryptdata,a=this.hls;!this.fragContextChanged(i)&&e&&0<e.byteLength&&r&&r.key&&r.iv&&"AES-128"===r.method&&(n=performance.now(),this.decrypter.decrypt(new Uint8Array(e),r.key.buffer,r.iv.buffer).catch(function(e){throw a.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:i}),e}).then(function(e){var t=performance.now();a.trigger(ee.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:n,tdecrypt:t}})}).catch(function(e){t.warn(e.name+": "+e.message),t.state=h}))},l.doTick=function(){var e,t,n,i,r,a,o,s,l;this.media?this.state===h&&(e=this.currentTrackId,e=(s=this.levels)[e],s.length)&&e&&e.details&&(s=this.config,i=this.getLoadPosition(),t=(i=y.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,s.maxBufferHole)).end,i=i.len,r=this.getFwdBufferInfo(this.media,_),n=e.details,i>this.getMaxBufferLength(null==r?void 0:r.len)+n.levelTargetDuration||(r=(i=n.fragments).length,l=n.edge,a=null,o=this.fragPrevious,t<l?(s=l-(l=s.maxFragLookUpTolerance)<t?0:l,!(a=Tn(o,i,Math.max(i[0].start,t),s))&&o&&o.start<i[0].start&&(a=i[0])):a=i[r-1],a&&("initSegment"!==(a=this.mapToInitFragWhenRequired(a)).sn&&(l=i[a.sn-n.startSN-1])&&l.cc===a.cc&&this.fragmentTracker.getState(l)===Cn&&(a=l),this.fragmentTracker.getState(a)===Cn)&&this.loadFragment(a,e,t))):this.state=h},l.getMaxBufferLength=function(e){var t=ca.prototype.getMaxBufferLength.call(this);return e?Math.max(t,e):t},l.loadFragment=function(e,t,n){"initSegment"===(this.fragCurrent=e).sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,ca.prototype.loadFragment.call(this,e,t,n))},r(fa,[{key:"mediaBufferTimeRanges",get:function(){return new ha(this.tracksBuffered[this.currentTrackId]||[])}}]);var ua,ca,c=fa,ha=function(i){this.buffered=void 0;function t(e,t,n){if((t>>>=0)>n-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than the maximum bound ("+n+")");return i[t][e]}this.buffered={get length(){return i.length},end:function(e){return t("end",e,i.length)},start:function(e){return t("start",e,i.length)}}},a=(e(da,ua=n),(o=da.prototype).destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,ua.prototype.destroy.call(this)},o.registerListeners=function(){var e=this.hls;e.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ee.LEVEL_LOADING,this.onLevelLoading,this),e.on(ee.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ee.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ee.ERROR,this.onError,this)},o.unregisterListeners=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ee.LEVEL_LOADING,this.onLevelLoading,this),e.off(ee.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ee.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ee.ERROR,this.onError,this)},o.onMediaAttached=function(e,t){this.media=t.media,this.media&&(-1<this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},o.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},o.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),-1<this.trackId&&(this.queuedDefaultTrack=this.trackId),pa(this.media.textTracks).forEach(function(e){Wt(e)}),this.subtitleTrack=-1,this.media=null)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},o.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},o.onSubtitleTrackLoaded=function(e,t){var n,i=t.id,r=t.details,a=this.trackId,a=this.tracksInGroup[a];a?(n=a.details,a.details=t.details,this.log("subtitle track "+i+" loaded ["+r.startSN+"-"+r.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,t,n)):this.warn("Invalid subtitle track id "+i)},o.onLevelLoading=function(e,t){this.switchLevel(t.level)},o.onLevelSwitching=function(e,t){this.switchLevel(t.level)},o.switchLevel=function(e){var t,n,i,r,e=this.hls.levels[e];null!=e&&e.textGroupIds&&(t=e.textGroupIds[e.urlId],e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,this.groupId!==t?(n=this.tracks.filter(function(e){return!t||e.groupId===t}),this.tracksInGroup=n,i=this.findTrackId(null==e?void 0:e.name)||this.findTrackId(),this.groupId=t||null,r={subtitleTracks:n},this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(ee.SUBTITLE_TRACKS_UPDATED,r),-1!==i&&this.setSubtitleTrack(i,e)):this.shouldReloadPlaylist(e)&&this.setSubtitleTrack(this.trackId,e))},o.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},o.onError=function(e,t){!t.fatal&&t.context&&t.context.type===Ft&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)},o.loadPlaylist=function(e){ua.prototype.loadPlaylist.call(this);var t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){var n=t.id,i=t.groupId,t=t.url;if(e)try{t=e.addDirectives(t)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(ee.SUBTITLE_TRACK_LOADING,{url:t,id:n,groupId:i,deliveryDirectives:e||null})}},o.toggleTrackModes=function(e){var t,n=this,i=this.media,r=this.trackId;i&&(t=(i=pa(i.textTracks)).filter(function(e){return e.groupId===n.groupId}),-1===e?[].slice.call(i).forEach(function(e){e.mode="disabled"}):(i=t[r])&&(i.mode="disabled"),r=t[e])&&(r.mode=this.subtitleDisplay?"showing":"hidden")},o.setSubtitleTrack=function(e,t){var n,i,r,a,o,s=this.tracksInGroup;this.media?(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(n=s[e])&&n.details)||e<-1||e>=s.length||(this.clearTimer(),n=s[e],this.log("Switching to subtitle-track "+e+(n?' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId:"")),this.trackId=e,n?(s=n.id,i=n.groupId,r=n.name,a=n.type,o=n.url,this.hls.trigger(ee.SUBTITLE_TRACK_SWITCH,{id:s,groupId:void 0===i?"":i,name:r,type:a,url:o}),s=this.switchParams(n.url,null==t?void 0:t.details),this.loadPlaylist(s)):this.hls.trigger(ee.SUBTITLE_TRACK_SWITCH,{id:e}))):this.queuedDefaultTrack=e},o.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=pa(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},r(da,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,-1<this.trackId&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),da);function da(e){var t;return(t=ua.call(this,e,"[subtitle-track-controller]")||this).media=null,t.tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.selectDefaultTrack=!0,t.queuedDefaultTrack=-1,t.trackChangeListener=function(){return t.onTextTracksChanged()},t.asyncPollTrackChange=function(){return t.pollTrackChange(0)},t.useTextTrackPolling=!1,t.subtitlePollingInterval=-1,t._subtitleDisplay=!0,t.registerListeners(),t}function fa(e,t,n){return(e=ca.call(this,e,t,n,"[subtitle-stream-controller]",Ut)||this).levels=[],e.currentTrackId=-1,e.tracksBuffered=[],e.mainDetails=null,e._registerListeners(),e}function pa(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||t.push(e[n])}return t}function ma(e){var t=e;return Ea.hasOwnProperty(e)&&(t=Ea[e]),String.fromCharCode(t)}function ga(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}(u=Ha.prototype).append=function(e,t,n){var i=this.queues[t];i.push(e),1!==i.length||n||this.executeNext(t)},u.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},u.appendBlocker=function(e){var t,n=new Promise(function(e){t=e}),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},u.executeNext=function(e){var t=this.queues[e];if(t.length){var n=t[0];try{n.execute()}catch(t){ie.warn('[buffer-operation-queue]: Exception executing "'+e+'" SourceBuffer operation: '+t),n.onError(t);n=this.buffers[e];null!=n&&n.updating||this.shiftAndExecuteNext(e)}}},u.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},u.current=function(e){return this.queues[e][0]};var _a=Ha,ya=ft(),va=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,o=((l=Va.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},l.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},l.registerListeners=function(){var e=this.hls;e.on(ee.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ee.BUFFER_RESET,this.onBufferReset,this),e.on(ee.BUFFER_APPENDING,this.onBufferAppending,this),e.on(ee.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ee.BUFFER_EOS,this.onBufferEos,this),e.on(ee.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ee.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ee.FRAG_PARSED,this.onFragParsed,this),e.on(ee.FRAG_CHANGED,this.onFragChanged,this)},l.unregisterListeners=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ee.BUFFER_RESET,this.onBufferReset,this),e.off(ee.BUFFER_APPENDING,this.onBufferAppending,this),e.off(ee.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ee.BUFFER_EOS,this.onBufferEos,this),e.off(ee.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ee.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ee.FRAG_PARSED,this.onFragParsed,this),e.off(ee.FRAG_CHANGED,this.onFragChanged,this)},l._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new _a(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},l.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},l.onManifestParsed=function(e,t){var n=2;(!t.audio||t.video)&&t.altAudio||(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},l.onMediaAttaching=function(e,t){var n,t=this.media=t.media;t&&ya&&((n=this.mediaSource=new ya).addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=self.URL.createObjectURL(n),this._objectUrl=t.src,t.addEventListener("emptied",this._onMediaEmptied))},l.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):this.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(ee.MEDIA_DETACHED,void 0)},l.onBufferReset=function(){var n=this;this.getSourceBufferTypes().forEach(function(e){var t=n.sourceBuffer[e];try{t&&(n.removeBufferListeners(e),n.mediaSource&&n.mediaSource.removeSourceBuffer(t),n.sourceBuffer[e]=void 0)}catch(t){n.warn("Failed to reset the "+e+" buffer",t)}}),this._initSourceBuffer()},l.onBufferCodecs=function(e,c){var h=this,d=this.getSourceBufferTypes().length;Object.keys(c).forEach(function(e){var t,n,i,r,a,o,s,l,u;d?(t=h.tracks[e])&&"function"==typeof t.buffer.changeType&&(n=(o=c[e]).id,i=o.codec,r=o.levelCodec,a=o.container,o=o.metadata,(s=(t.levelCodec||t.codec).replace(va,"$1"))!==(l=(r||i).replace(va,"$1")))&&(u=r||i,u=a+";codecs="+(u="audio"===e.slice(0,5)?Et(u):u),h.appendChangeType(e,u),h.log("switching codec "+s+" to "+l),h.tracks[e]={buffer:t.buffer,codec:i,container:a,levelCodec:r,metadata:o,id:n}):h.pendingTracks[e]=c[e]}),d||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},l.appendChangeType=function(t,n){var i=this,r=this.operationQueue;r.append({execute:function(){var e=i.sourceBuffer[t];e&&(i.log("changing "+t+" sourceBuffer type to "+n),e.changeType(n)),r.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){i.warn("Failed to change "+t+" SourceBuffer type",e)}},t,!!this.pendingTracks[t])},l.onBufferAppending=function(e,t){var r=this,n=this.hls,i=this.operationQueue,a=this.tracks,o=t.data,s=t.type,l=t.frag,u=t.part,c=t.chunkMeta,h=c.buffering[s],t=self.performance.now(),d=(h.start=t,l.stats.buffering),f=u?u.stats.buffering:null,t=(0===d.start&&(d.start=t),f&&0===f.start&&(f.start=t),a.audio),p=!1,m=("audio"===s&&"audio/mpeg"===(null==t?void 0:t.container)&&(p=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c),l.start);i.append({execute:function(){var e,t;h.executeStart=self.performance.now(),p&&(e=r.sourceBuffer[s])&&(t=m-e.timestampOffset,.1<=Math.abs(t))&&(r.log("Updating audio SourceBuffer timestampOffset to "+m+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=m),r.appendExecutor(o,s)},onStart:function(){},onComplete:function(){var e,t=self.performance.now(),n=(h.executeEnd=h.end=t,0===d.first&&(d.first=t),f&&0===f.first&&(f.first=t),r.sourceBuffer),i={};for(e in n)i[e]=y.getBuffered(n[e]);r.appendErrors[s]=0,r.hls.trigger(ee.BUFFER_APPENDED,{type:s,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:i})},onError:function(e){var t={type:te.MEDIA_ERROR,parent:l.type,details:ne.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:l,part:u,chunkMeta:c,error:e,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=ne.BUFFER_FULL_ERROR:(e=++r.appendErrors[s],t.details=ne.BUFFER_APPEND_ERROR,r.warn("Failed "+e+"/"+n.config.appendErrorMaxRetry+' times to append segment in "'+s+'" sourceBuffer'),e>n.config.appendErrorMaxRetry&&(t.fatal=!0)),n.trigger(ee.ERROR,t)}},s,!!this.pendingTracks[s])},l.onBufferFlushing=function(e,n){function t(t){return{execute:i.removeExecutor.bind(i,t,n.startOffset,n.endOffset),onStart:function(){},onComplete:function(){i.hls.trigger(ee.BUFFER_FLUSHED,{type:t})},onError:function(e){i.warn("Failed to remove from "+t+" SourceBuffer",e)}}}var i=this,r=this.operationQueue;n.type?r.append(t(n.type),n.type):this.getSourceBufferTypes().forEach(function(e){r.append(t(e),e)})},l.onFragParsed=function(e,t){var n=this,i=t.frag,r=t.part,t=[],a=(r||i).elementaryStreams;a[he]?t.push("audiovideo"):(a[E]&&t.push("audio"),a[ce]&&t.push("video")),0===t.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers(function(){var e=self.performance.now(),e=(i.stats.buffering.end=e,r&&(r.stats.buffering.end=e),(r||i).stats);n.hls.trigger(ee.FRAG_BUFFERED,{frag:i,part:r,stats:e,id:i.type})},t)},l.onFragChanged=function(e,t){this.flushBackBuffer()},l.onBufferEos=function(e,i){var r=this;this.getSourceBufferTypes().reduce(function(e,t){var n=r.sourceBuffer[t];return!n||i.type&&i.type!==t||(n.ending=!0,n.ended)||(n.ended=!0,r.log(t+" sourceBuffer now EOS")),e&&!(n&&!n.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){r.getSourceBufferTypes().forEach(function(e){e=r.sourceBuffer[e];e&&(e.ending=!1)});var e=r.mediaSource;e&&"open"===e.readyState?(r.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&r.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)}))},l.onLevelUpdated=function(e,t){t=t.details;t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},l.flushBackBuffer=function(){var e,t,i,r,a,o=this,s=this.hls,l=this.details,n=this.media,u=this.sourceBuffer;n&&null!==l&&(e=this.getSourceBufferTypes()).length&&(t=l.live&&null!==s.config.liveBackBufferLength?s.config.liveBackBufferLength:s.config.backBufferLength,!G(t)||t<0||(i=n.currentTime,r=l.levelTargetDuration,n=Math.max(t,r),a=Math.floor(i/r)*r-n,e.forEach(function(e){var t=u[e];if(t){var n=y.getBuffered(t);if(0<n.length&&a>n.start(0)){if(s.trigger(ee.BACK_BUFFER_REACHED,{bufferEnd:a}),l.live)s.trigger(ee.LIVE_BACK_BUFFER_REACHED,{bufferEnd:a});else if(t.ended&&n.end(n.length-1)-i<2*r)return void o.log("Cannot flush "+e+" back buffer while SourceBuffer is in ended state");s.trigger(ee.BUFFER_FLUSHING,{startOffset:0,endOffset:a,type:e})}}})))},l.updateMediaElementDuration=function(){var e,t,n,i,r,a;this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState&&(e=this.details,t=this.hls,r=this.media,n=this.mediaSource,i=e.fragments[0].start+e.totalduration,r=r.duration,a=G(n.duration)?n.duration:0,e.live&&t.config.liveDurationInfinity?(n.duration=1/0,this.updateSeekableRange(e)):(a<i&&r<i||!G(r))&&(this.log("Updating Media Source duration to "+i.toFixed(3)),n.duration=i))},l.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;n.length&&e.live&&null!=t&&t.setLiveSeekableRange&&(n=Math.max(0,n[0].start),e=Math.max(n,n+e.totalduration),this.log("Media Source duration is set to "+t.duration+". Setting seekable range to "+n+"-"+e+"."),t.setLiveSeekableRange(n,e))},l.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;(i&&!e||2===i)&&(this.createSourceBuffers(n),this.pendingTracks={},(e=this.getSourceBufferTypes()).length?(this.hls.trigger(ee.BUFFER_CREATED,{tracks:this.tracks}),e.forEach(function(e){t.executeNext(e)})):(i=new Error("could not create source buffer for media codec(s)"),this.hls.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:i,reason:i.message})))},l.createSourceBuffers=function(e){var t,n=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(t in e)if(!n[t]){var r=e[t];if(!r)throw Error("source buffer exists for track "+t+", however track does not");var a=r.levelCodec||r.codec,o=(a&&"audio"===t.slice(0,5)&&(a=Et(a)),r.container+";codecs="+a);this.log("creating sourceBuffer("+o+")");try{var s=n[t]=i.addSourceBuffer(o),l=t;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[t]={buffer:s,codec:a,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(e){this.error("error while trying to add sourceBuffer: "+e.message),this.hls.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:t,mimeType:o})}}},l._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},l._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},l._onSBUpdateError=function(e,t){var n=new Error(e+" SourceBuffer error"),n=(this.error(""+n,t),this.hls.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1}),this.operationQueue.current(e));n&&n.onError(t)},l.removeExecutor=function(e,t,n){var i=this.media,r=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];i&&r&&o?(i=G(i.duration)?i.duration:1/0,r=G(r.duration)?r.duration:1/0,(t=Math.max(0,t))<(n=Math.min(n,i,r))&&(!o.ending||o.ended)?(o.ended=!1,this.log("Removing ["+t+","+n+"] from the "+e+" SourceBuffer"),o.remove(t,n)):a.shiftAndExecuteNext(e)):(this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),a.shiftAndExecuteNext(e))},l.appendExecutor=function(e,t){var n=this.sourceBuffer[t];if(n)n.ended=!1,n.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the "+t+" SourceBuffer, but it does not exist")},l.blockBuffers=function(e,t){var n,i,r=this;(t=void 0===t?this.getSourceBufferTypes():t).length?(n=this.operationQueue,i=t.map(function(e){return n.appendBlocker(e)}),Promise.all(i).then(function(){e(),t.forEach(function(e){var t=r.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)})})):(this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e))},l.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},l.addBufferListener=function(e,t,n){var i=this.sourceBuffer[e];i&&(n=n.bind(this,e),this.listeners[e].push({event:t,listener:n}),i.addEventListener(t,n))},l.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},Va),Ea={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Aa=15,ba=100,Ta={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Sa={17:2,18:4,21:6,22:8,23:10,19:13,20:15},wa={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ra={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ia=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Ca=(Ga.prototype.log=function(e,t){this.verboseLevel>=e&&(t="function"==typeof t?t():t,ie.log(this.time+" ["+e+"] "+t))},Ga),La=((u=ja.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},u.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},u.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},u.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},u.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},u.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},ja),Pa=((l=Ua.prototype).reset=function(){this.uchar=" ",this.penState.reset()},l.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},l.setPenState=function(e){this.penState.copy(e)},l.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},l.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},l.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},Ua),Da=((u=Ba.prototype).equals=function(e){for(var t=0;t<ba;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0},u.copy=function(e){for(var t=0;t<ba;t++)this.chars[t].copy(e.chars[t])},u.isEmpty=function(){for(var e=!0,t=0;t<ba;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},u.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ba&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ba)},u.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},u.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},u.insertChar=function(e){var t=this,n=(144<=e&&this.backSpace(),ma(e));this.pos>=ba?this.logger.log(0,function(){return"Cannot insert "+e.toString(16)+" ("+n+") at position "+t.pos+". Skipping it!"}):(this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1))},u.clearFromPos=function(e){for(var t=e;t<ba;t++)this.chars[t].reset()},u.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},u.clearToEndOfRow=function(){this.clearFromPos(this.pos)},u.getTextString=function(){for(var e=[],t=!0,n=0;n<ba;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},u.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},Ba),ka=((l=Fa.prototype).reset=function(){for(var e=0;e<Aa;e++)this.rows[e].clear();this.currRow=14},l.equals=function(e){for(var t=!0,n=0;n<Aa;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},l.copy=function(e){for(var t=0;t<Aa;t++)this.rows[t].copy(e.rows[t])},l.isEmpty=function(){for(var e=!0,t=0;t<Aa;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},l.backSpace=function(){this.rows[this.currRow].backSpace()},l.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},l.insertChar=function(e){this.rows[this.currRow].insertChar(e)},l.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},l.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},l.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},l.setPAC=function(e){this.logger.log(2,function(){return"pacData = "+JSON.stringify(e)});var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<Aa;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime,o=this.logger.time;if(null!==a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=t;a=this.rows[this.currRow],null!==e.indent&&(o=e.indent,o=Math.max(o-1,0),a.setCursor(e.indent),e.color=a.chars[o].penState.foreground),a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},l.setBkgData=function(e){this.logger.log(2,function(){return"bkgData = "+JSON.stringify(e)}),this.backSpace(),this.setPen(e),this.insertChar(32)},l.setRollUpRows=function(e){this.nrRollUpRows=e},l.rollUp=function(){var e,t=this;null!==this.nrRollUpRows?(this.logger.log(1,function(){return t.getDisplayText()}),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),this.logger.log(2,"Rolling up")):this.logger.log(3,"roll_up but nrRollUpRows not set yet")},l.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=0;i<Aa;i++){var r=this.rows[i].getTextString();r&&t.push(e?"Row "+(i+1)+": '"+r+"'":r.trim())}return n=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):n},l.getTextAndFormat=function(){return this.rows},Fa),Oa=((u=Na.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},u.getHandler=function(){return this.outputFilter},u.setHandler=function(e){this.outputFilter=e},u.setPAC=function(e){this.writeScreen.setPAC(e)},u.setBkgData=function(e){this.writeScreen.setBkgData(e)},u.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,function(){return"MODE="+e}),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},u.insertChars=function(e){for(var t=this,n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,function(){return i+": "+t.writeScreen.getDisplayText(!0)}),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},u.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},u.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},u.ccAOF=function(){},u.ccAON=function(){},u.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},u.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},u.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},u.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},u.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},u.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},u.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},u.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},u.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},u.ccEOC=function(){var e,t=this;this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,function(){return"DISP: "+t.displayedMemory.getDisplayText()})),this.outputDataUpdate(!0)},u.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},u.ccMIDROW=function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},u.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},u.cueSplitAtTime=function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)},Na),Ma=((l=xa.prototype).getHandler=function(e){return this.channels[e].getHandler()},l.setHandler=function(e,t){this.channels[e].setHandler(t)},l.addData=function(e,t){var n,i=!1;this.logger.time=e;for(var r=0;r<t.length;r+=2){var a,o=127&t[r],s=127&t[r+1];0==o&&0==s||(this.logger.log(3,"["+ga([t[r],t[r+1]])+"] -> ("+ga([o,s])+")"),!(n=(n=(n=(n=this.parseCmd(o,s))||this.parseMidrow(o,s))||this.parsePAC(o,s))||this.parseBackgroundAttributes(o,s))&&(i=this.parseChars(o,s))&&((a=this.currentChannel)&&0<a?this.channels[a].insertChars(i):this.logger.log(2,"No channel found yet. TEXT-MODE?")),n)||i||this.logger.log(2,"Couldn't parse cleaned data "+ga([o,s])+" orig: "+ga([t[r],t[r+1]]))}},l.parseCmd=function(e,t){var n,i,r=this.cmdHistory;return((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35)&&(za(e,t,r)?(Ya(null,null,r),this.logger.log(3,"Repeated command ("+ga([e,t])+") is dropped")):(i=this.channels[n=20===e||21===e||23===e?1:2],20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),Ya(e,t,r),this.currentChannel=n),!0)},l.parseMidrow=function(e,t){var n;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currentChannel?(this.logger.log(0,"Mismatch channel in midrow parsing"),!1):!!(n=this.channels[n])&&(n.ccMIDROW(t),this.logger.log(3,"MIDROW ("+ga([e,t])+")"),!0))},l.parsePAC=function(e,t){var n,i,r=this.cmdHistory;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(za(e,t,r)?(Ya(null,null,r),!0):!!(i=this.channels[n=e<=23?1:2])&&(i.setPAC(this.interpretPAC((64<=t&&t<=95?1==n?Ta:wa:1==n?Sa:Ra)[e],t)),Ya(e,t,r),this.currentChannel=n,!0))},l.interpretPAC=function(e,t){e={color:null,italics:!1,indent:null,underline:!1,row:e},t=95<t?t-96:t-64;return e.underline=1==(1&t),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},l.parseChars=function(e,t){var n,i=null,r=null;return 17<=(r=25<=e?(n=2,e-8):(n=1,e))&&r<=19?(this.logger.log(2,"Special char '"+ma(r=17===r?t+80:18===r?t+112:t+144)+"' in channel "+n),i=[r]):32<=e&&e<=127&&(i=0===t?[e]:[e,t]),i&&(n=ga(i),this.logger.log(3,"Char codes =  "+n.join(",")),Ya(e,t,this.cmdHistory)),i},l.parseBackgroundAttributes=function(e,t){var n,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(i={},16===e||24===e?(n=Math.floor((t-32)/2),i.background=Ia[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),this.channels[e<=23?1:2].setBkgData(i),Ya(e,t,this.cmdHistory),!0)},l.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},l.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},xa);function xa(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;var i=this.logger=new Ca;this.channels=[null,new Oa(e,t,i),new Oa(e+1,n,i)]}function Na(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new ka(n),this.nonDisplayedMemory=new ka(n),this.lastOutputScreen=new ka(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}function Fa(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var t=0;t<Aa;t++)this.rows.push(new Da(e));this.logger=e}function Ba(e){this.chars=[],this.pos=0,this.currPenState=new La,this.cueStartTime=null,this.logger=void 0;for(var t=0;t<ba;t++)this.chars.push(new Pa);this.logger=e}function Ua(){this.uchar=" ",this.penState=new La}function ja(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}function Ga(){this.time=null,this.verboseLevel=0}function Va(e){var n=this,e=(this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onMediaSourceOpen=function(){var e=n.media,t=n.mediaSource;n.log("Media source opened"),e&&(e.removeEventListener("emptied",n._onMediaEmptied),n.updateMediaElementDuration(),n.hls.trigger(ee.MEDIA_ATTACHED,{media:e})),t&&t.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},this._onMediaSourceClose=function(){n.log("Media source closed")},this._onMediaSourceEnded=function(){n.log("Media source ended")},this._onMediaEmptied=function(){var e=n.media,t=n._objectUrl;e&&e.src!==t&&n.error("Media element src was set while attaching MediaSource ("+t+" > "+e.src+")")},this.hls=e,"[buffer-controller]");this.log=ie.log.bind(ie,e),this.warn=ie.warn.bind(ie,e),this.error=ie.error.bind(ie,e),this._initSourceBuffer(),this.registerListeners()}function Ha(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}function Ya(e,t,n){n.a=e,n.b=t}function za(e,t,n){return n.a===e&&n.b===t}(u=no.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},u.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},u.reset=function(){this.cueRanges=[],this.startTime=null};var Wa,Ka,qa=no,Qa="undefined"!=typeof self&&self.VTTCue?self.VTTCue:(Wa=["","lr","rl"],Ka=["start","middle","end","left","right"],to.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},to),Xa=(Ja.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},Ja);function Ja(){}function Za(e,t){return"string"==typeof t&&!!Array.isArray(e)&&(t=t.toLowerCase(),!!~e.indexOf(t))&&t}function $a(e){return Za(Ka,e)}function eo(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=1;r<arguments.length;r++){var a,o=arguments[r];for(a in o)e[a]=o[a]}return e}function to(e,t,n){var i=this,r={enumerable:!0},a=(i.hasBeenReset=!1,""),o=!1,s=e,l=t,u=n,c=null,h="",d=!0,f="auto",p="start",m=50,g="middle",_=50,y="middle";Object.defineProperty(i,"id",eo({},r,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(i,"pauseOnExit",eo({},r,{get:function(){return o},set:function(e){o=!!e}})),Object.defineProperty(i,"startTime",eo({},r,{get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",eo({},r,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",eo({},r,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",eo({},r,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",eo({},r,{get:function(){return h},set:function(e){e=Za(Wa,e);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",eo({},r,{get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",eo({},r,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",eo({},r,{get:function(){return p},set:function(e){e=$a(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",eo({},r,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",eo({},r,{get:function(){return g},set:function(e){e=$a(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",eo({},r,{get:function(){return _},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",eo({},r,{get:function(){return y},set:function(e){e=$a(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),i.displayState=void 0}function no(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}function io(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}e=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return e?59<parseFloat(e[2])?t(e[2],e[3],0,e[4]):t(e[1],e[2],e[3],e[4]):null}(l=ao.prototype).set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},l.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},l.has=function(e){return e in this.values},l.alt=function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},l.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},l.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){t=parseFloat(t);if(0<=t&&t<=100)return this.set(e,t),!0}return!1};var ro=ao;function ao(){this.values=Object.create(null)}function oo(e,t,n,i){var r,a,o=i?e.split(i):[e];for(r in o)"string"==typeof o[r]&&2===(a=o[r].split(n)).length&&t(a[0],a[1])}var so=new Qa(0,0,""),lo="middle"===so.align?"middle":"center";function uo(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function co(e,t,n){return e.slice(n=void 0===n?0:n,n+t.length)===t}(u=mo.prototype).parse=function(e){var i=this;function t(){for(var e=0,t=uo(t=i.buffer);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.slice(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.slice(e),n}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{var n="";if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var r=(n=t()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var a=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(a?a=!1:n=t(),i.state){case"HEADER":/:/.test(n)?oo(n,function(e,t){},/:/):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(i.cue=new Qa(0,0,""),i.state="CUE",-1===n.indexOf("--\x3e")){i.cue.id=n;continue}case"CUE":if(!i.cue){i.state="BADCUE";continue}try{!function(t,e,r){var n,a,i=t;function o(){var e=io(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=o(),s(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.slice(3),s(),e.endTime=o(),s(),n=t,e=e,a=new ro,oo(n,function(e,t){var n;switch(e){case"region":for(var i=r.length-1;0<=i;i--)if(r[i].id===t){a.set(e,r[i].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":n=t.split(","),a.integer(e,n[0]),a.percent(e,n[0])&&a.set("snapToLines",!1),a.alt(e,n[0],["auto"]),2===n.length&&a.alt("lineAlign",n[1],["start",lo,"end"]);break;case"position":n=t.split(","),a.percent(e,n[0]),2===n.length&&a.alt("positionAlign",n[1],["start",lo,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",lo,"end","left","right"])}},/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical",""),"auto"===(n=a.get("line","auto"))&&-1===so.line&&(n=-1),e.line=n,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",lo),"auto"===(n=a.get("position","auto"))&&50===so.position&&(n="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=n}(n,i.cue,i.regionList)}catch(e){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(a=!0)){i.oncue&&i.cue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}if(null===i.cue)continue;i.cue.text&&(i.cue.text+="\n"),i.cue.text+=n;continue;case"BADCUE":n||(i.state="ID")}}}catch(e){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},u.flush=function(){var t=this;try{if(!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this};var ho=mo,fo=/\r\n|\n\r|\n|\r/g,po=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function mo(){this.state="INITIAL",this.buffer="",this.decoder=new Xa,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}function go(e,t,n){return po(e.toString())+po(t.toString())+po(n)}var _o="stpp.ttml.im1t",yo=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,vo=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Eo={left:"start",center:"center",right:"end",start:"start",end:"end"};function Ao(e,t,n,i){var r=I(new Uint8Array(e),["mdat"]);if(0!==r.length){var a,r=r.map(function(e){return He(e)}),o=br(t.baseTime,1,1/(t=void 0===(t=t.timescale)?1:t),a=void 0===a?!1:a);try{r.forEach(function(e){return n(function(e,u){var n,c,h,d,f,i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(i)return n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},c=Object.keys(n).reduce(function(e,t){return e[t]=i.getAttribute("ttp:"+t)||n[t],e},{}),h="preserve"!==i.getAttribute("xml:space"),d=To(bo(i,"styling","style")),f=To(bo(i,"layout","region")),e=bo(i,"body","[begin]"),[].map.call(e,function(e){var t=function i(e,r){return[].slice.call(e.childNodes).reduce(function(e,t,n){return"br"===t.nodeName&&n?e+"\n":null!=(n=t.childNodes)&&n.length?i(t,r):r?e+t.textContent.trim().replace(/\s+/g," "):e+t.textContent},"")}(e,h);if(!t||!e.hasAttribute("begin"))return null;var n=Ro(e.getAttribute("begin"),c),i=Ro(e.getAttribute("dur"),c),r=Ro(e.getAttribute("end"),c);if(null===n)throw wo(e);if(null===r){if(null===i)throw wo(e);r=n+i}var a,o,s,l,i=new Qa(n-u,r-u,t),t=(i.id=go(i.startTime,i.endTime,i.text),a=f[e.getAttribute("region")],o=d[e.getAttribute("style")],n=d,s="http://www.w3.org/ns/ttml#styling",(r=(l=null)!=a&&a.hasAttribute("style")?a.getAttribute("style"):null)&&n.hasOwnProperty(r)&&(l=n[r]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(e,t){var n=So(o,s,t)||So(a,s,t)||So(l,s,t);return n&&(e[t]=n),e},{})),e=t.textAlign;return e&&((n=Eo[e])&&(i.lineAlign=n),i.align=e),$(i,t),i}).filter(function(e){return null!==e});throw new Error("Invalid ttml")}(e,o))})}catch(e){i(e)}}else i(new Error("Could not parse IMSC1 mdat"))}function bo(e,t,n){e=e.getElementsByTagName(t)[0];return e?[].slice.call(e.querySelectorAll(n)):[]}function To(e){return e.reduce(function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function So(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function wo(e){return new Error("Could not parse ttml timestamp "+e)}function Ro(i,e){var t,n,r,a;return i?(null===(t=io(i))&&(yo.test(i)?(n=e,r=yo.exec(i),a=(0|r[4])+(0|r[5])/n.subFrameRate,t=3600*(0|r[1])+60*(0|r[2])+(0|r[3])+a/n.frameRate):vo.test(i)&&(t=function(e){var t=vo.exec(i),n=Number(t[1]);switch(t[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}(e))),t):null}(l=Io.prototype).destroy=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ee.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ee.FRAG_LOADING,this.onFragLoading,this),e.off(ee.FRAG_LOADED,this.onFragLoaded,this),e.off(ee.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(ee.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(ee.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ee.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(ee.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},l.lazyInit608=function(){var e,t,n,i;!this.config.enableCEA708Captions||this.cea608Parser1&&this.cea608Parser2||(e=new qa(this,"textTrack1"),t=new qa(this,"textTrack2"),n=new qa(this,"textTrack3"),i=new qa(this,"textTrack4"),this.cea608Parser1=new Ma(1,e,t),this.cea608Parser2=new Ma(3,n,i))},l.addCues=function(e,t,n,i,r){for(var a,o,s,l=!1,u=r.length;u--;){var c=r[u],h=(a=c[0],h=c[1],o=t,Math.min(h,n)-Math.max(a,o));if(0<=h&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],n),l=!0,.5<h/(n-t)))return}l||r.push([t,n]),this.config.renderTextTracksNatively?(s=this.captionsTracks[e],this.Cues.newCue(s,t,n,i)):(s=this.Cues.newCue(null,t,n,i),this.hls.trigger(ee.CUES_PARSED,{type:"captions",cues:s,track:e}))},l.onInitPtsFound=function(e,t){var n=this,i=t.frag,r=t.id,a=t.initPTS,t=t.timescale,o=this.unparsedVttFrags;"main"===r&&(this.initPTS[i.cc]={baseTime:a,timescale:t}),o.length&&(this.unparsedVttFrags=[],o.forEach(function(e){n.onFragLoaded(ee.FRAG_LOADED,e)}))},l.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},l.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},l.createNativeTrack=function(e){var t,n,i,r,a;this.captionsTracks[e]||(r=this.captionsProperties,t=this.captionsTracks,n=this.media,i=(r=r[e]).label,r=r.languageCode,(a=this.getExistingTrack(e))?(t[e]=a,Wt(t[e]),Yt(t[e],n)):(a=this.createTextTrack("captions",i,r))&&(a[e]=!0,t[e]=a))},l.createNonNativeTrack=function(e){var t;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(ee.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]}))},l.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},l.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},l.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){Wt(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},l.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},l._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Wt(t[n])}},l.onSubtitleTracksUpdated=function(e,t){var s,l=this,t=t.subtitleTracks||[],n=t.some(function(e){return e.textCodec===_o});(this.config.enableWebVTT||n&&this.config.enableIMSC1)&&(la(this.tracks,t)?this.tracks=t:(this.textTracks=[],this.tracks=t,this.config.renderTextTracksNatively?(s=this.media?this.media.textTracks:null,this.tracks.forEach(function(e,t){var n,i,r;if(s&&t<s.length){for(var a=null,o=0;o<s.length;o++)if(i=s[o],r=e,i&&i.label===r.name&&!i.textTrack1&&!i.textTrack2){a=s[o];break}a&&(n=a)}n?Wt(n):(t=l._captionsOrSubtitlesFromCharacteristics(e),(n=l.createTextTrack(t,e.name,e.lang))&&(n.mode="disabled")),n&&(n.groupId=e.groupId,l.textTracks.push(n))})):this.tracks.length&&(n=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}),this.hls.trigger(ee.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:n}))))},l._captionsOrSubtitlesFromCharacteristics=function(e){return e.attrs.CHARACTERISTICS&&/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS)&&/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS)?"captions":"subtitles"},l.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);t&&(t="textTrack"+t[1],t=n.captionsProperties[t])&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e)})},l.closedCaptionsForLevel=function(e){e=this.hls.levels[e.level];return null==e?void 0:e.attrs["CLOSED-CAPTIONS"]},l.onFragLoading=function(e,t){var n,i,r=this.cea608Parser1,a=this.cea608Parser2,o=this.lastCc,s=this.lastSn,l=this.lastPartIndex;this.enabled&&r&&a&&t.frag.type===_&&(n=(i=t.frag).cc,i=i.sn,t=null!=(t=null==t||null==(t=t.part)?void 0:t.index)?t:-1,i===s+1||i===s&&t===l+1||n===o||(r.reset(),a.reset()),this.lastCc=n,this.lastSn=i,this.lastPartIndex=t)},l.onFragLoaded=function(e,t){var n,i,r=t.frag,a=t.payload;r.type===Ut&&(a.byteLength?(n=r.decryptdata,i="stats"in t,null!=n&&n.encrypted&&!i||(n=this.tracks[r.level],(i=this.vttCCs)[r.cc]||(i[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),n&&n.textCodec===_o?this._parseIMSC1(r,a):this._parseVTTs(t))):this.hls.trigger(ee.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")}))},l._parseIMSC1=function(t,e){var n=this,i=this.hls;Ao(e,this.initPTS[t.cc],function(e){n._appendCues(e,t.level),i.trigger(ee.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){ie.log("Failed to parse IMSC1: "+e),i.trigger(ee.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})})},l._parseVTTs=function(n){var i,r,a,o,s,e,t,l,u,c,h,d,f,p,m,g,_=this,y=n.frag,v=n.payload,E=this.initPTS,A=this.unparsedVttFrags,b=E.length-1;E[y.cc]||-1!=b?(i=this.hls,E=null!=(E=y.initSegment)&&E.data?tt(y.initSegment.data,new Uint8Array(v)):v,r=this.initPTS[y.cc],a=this.vttCCs,o=y.cc,s=y.start,e=function(e){_._appendCues(e,y.level),i.trigger(ee.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:y})},t=function(e){var t="Missing initPTS for VTT MPEGTS"===e.message;t?A.push(n):_._fallbackToIMSC1(y,v),ie.log("Failed to parse VTT cue: "+e),t&&b>y.cc||i.trigger(ee.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:y,error:e})},c=new ho,E=He(new Uint8Array(E)).trim().replace(fo,"\n").split("\n"),h=[],d=r?br(r.baseTime,9e4,1/(l=void 0===(l=r.timescale)?1:l)):0,f="00:00.000",g=!(m=p=0),c.oncue=function(e){var t=a[o],n=a.ccOffset,i=(p-d)/9e4;if(null!=t&&t.new&&(void 0!==m?n=a.ccOffset=t.start:function(e,t){var n=e[o],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,n.new=!1;for(;null!=i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC];e.presentationOffset=t}(a,i)),i){if(!r)return void(u=new Error("Missing initPTS for VTT MPEGTS"));n=i-a.presentationOffset}t=e.endTime-e.startTime,i=Ir(9e4*(e.startTime+n-m),9e4*s)/9e4,e.startTime=Math.max(i,0),e.endTime=Math.max(i+t,0),n=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(n)),e.id||(e.id=go(e.startTime,e.endTime,n)),0<e.endTime&&h.push(e)},c.onparsingerror=function(e){u=e},c.onflush=function(){u?t(u):e(h)},E.forEach(function(e){if(g){if(co(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach(function(e){co(e,"LOCAL:")?f=e.slice(6):co(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))});try{m=function(e){var t=parseInt(e.slice(-3)),n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=9<e.length?parseInt(e.substring(0,e.indexOf(":"))):0;if(G(t)&&G(n)&&G(i)&&G(r))return t+1e3*n+6e4*i+36e5*r;throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e)}(f)/1e3}catch(e){u=e}return}""===e&&(g=!1)}c.parse(e+"\n")}),c.flush()):A.push(n)},l._fallbackToIMSC1=function(e,t){var n=this,i=this.tracks[e.level];i.textCodec||Ao(t,this.initPTS[e.cc],function(){i.textCodec=_o,n._parseIMSC1(e,t)},function(){i.textCodec="wvtt"})},l._appendCues=function(e,t){var n,i,r=this.hls;this.config.renderTextTracksNatively?(n=this.textTracks[t])&&"disabled"!==n.mode&&e.forEach(function(e){return zt(n,e)}):(i=this.tracks[t])&&(i=i.default?"default":"subtitles"+t,r.trigger(ee.CUES_PARSED,{type:"subtitles",cues:e,track:i}))},l.onFragDecrypted=function(e,t){t.frag.type===Ut&&this.onFragLoaded(ee.FRAG_LOADED,t)},l.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},l.onFragParsingUserdata=function(e,t){if(this.enabled){var n=t.frag,i=t.samples;if(n.type!==_||"NONE"!==this.closedCaptionsForLevel(n)){this.lazyInit608();var r=this.cea608Parser1,a=this.cea608Parser2;if(r&&a)for(var o=0;o<i.length;o++){var s=i[o].bytes;s&&(s=this.extractCea608Data(s),r.addData(i[o].pts,s[0]),a.addData(i[o].pts,s[1]))}}}},l.onBufferFlushing=function(e,t){var n,i,r=t.startOffset,a=t.endOffset,o=t.endOffsetSubtitles,t=t.type,s=this.media;!s||s.currentTime<a||(t&&"video"!==t||(n=this.captionsTracks,Object.keys(n).forEach(function(e){return Kt(n[e],r,a)})),this.config.renderTextTracksNatively&&0===r&&void 0!==o&&(i=this.textTracks,Object.keys(i).forEach(function(e){return Kt(i[e],r,o)})))},l.extractCea608Data=function(e){for(var t=[[],[]],n=31&e[0],i=2,r=0;r<n;r++){var a=e[i++],o=127&e[i++],s=127&e[i++];0==o&&0==s||0==(4&a)||0!=(a=3&a)&&1!=a||(t[a].push(o),t[a].push(s))}return t};u=Io;function Io(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(ee.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ee.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ee.FRAG_LOADING,this.onFragLoading,this),e.on(ee.FRAG_LOADED,this.onFragLoaded,this),e.on(ee.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(ee.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(ee.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ee.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(ee.BUFFER_FLUSHING,this.onBufferFlushing,this)}(l=Do.prototype).setStreamController=function(e){this.streamController=e},l.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},l.registerListeners=function(){var e=this.hls;e.on(ee.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(ee.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ee.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this)},l.unregisterListener=function(){var e=this.hls;e.off(ee.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(ee.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ee.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this)},l.onFpsDropLevelCapping=function(e,t){t=this.hls.levels[t.droppedLevel];this.isLevelAllowed(t)&&this.restrictedLevels.push({bitrate:t.bitrate,height:t.height,width:t.width})},l.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null},l.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},l.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},l.onMediaDetaching=function(){this.stopCapping()},l.detectPlayerSize=function(){var e,t,n;this.media&&(this.mediaHeight<=0||this.mediaWidth<=0?this.clientRect=null:(e=this.hls.levels).length&&(t=this.hls,(n=this.getMaxLevel(e.length-1))!==this.autoLevelCapping&&ie.log("Setting autoLevelCapping to "+n+": "+e[n].height+"p@"+e[n].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping))},l.getMaxLevel=function(n){var i=this,e=this.hls.levels;return e.length?(e=e.filter(function(e,t){return i.isLevelAllowed(e)&&t<=n}),this.clientRect=null,Do.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)):-1},l.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},l.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},l.getDimensions=function(){var e,t,n;return this.clientRect||(t={width:0,height:0},(e=this.media)&&(n=e.getBoundingClientRect(),t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)),this.clientRect=t)},l.isLevelAllowed=function(t){return!this.restrictedLevels.some(function(e){return t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height})},Do.getMaxLevelByMediaSize=function(e,t,n){if(null==e||!e.length)return-1;for(var i,r=e.length-1,a=Math.max(t,n),o=0;o<e.length;o+=1){var s=e[o];if((s.width>=a||s.height>=a)&&(!(i=e[o+1])||s.width!==i.width||s.height!==i.height)){r=o;break}}return r},r(Do,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]);var l=Do,p=((p=Po.prototype).setStreamController=function(e){this.streamController=e},p.registerListeners=function(){this.hls.on(ee.MEDIA_ATTACHING,this.onMediaAttaching,this)},p.unregisterListeners=function(){this.hls.off(ee.MEDIA_ATTACHING,this.onMediaAttaching,this)},p.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},p.onMediaAttaching=function(e,t){var n=this.hls.config;n.capLevelOnFPSDrop&&(t=t.media instanceof self.HTMLVideoElement?t.media:null,(this.media=t)&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod))},p.checkFPS=function(e,t,n){var i,r,a,o,s=performance.now();t&&(this.lastTime&&(o=s-this.lastTime,i=n-this.lastDroppedFrames,r=t-this.lastDecodedFrames,o=1e3*i/o,(a=this.hls).trigger(ee.FPS_DROP,{currentDropped:i,currentDecoded:r,totalDroppedFrames:n}),0<o)&&i>a.config.fpsDroppedMonitoringThreshold*r&&(o=a.currentLevel,ie.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o)&&(-1===a.autoLevelCapping||a.autoLevelCapping>=o)&&(a.trigger(ee.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:a.currentLevel}),a.autoLevelCapping=o,this.streamController.nextLevelSwitch()),this.lastTime=s,this.lastDroppedFrames=n,this.lastDecodedFrames=t)},p.checkFPSInterval=function(){var e,t=this.media;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},Po),Co="[eme]",A=((A=Lo.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},A.registerListeners=function(){this.hls.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ee.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ee.MANIFEST_LOADED,this.onManifestLoaded,this)},A.unregisterListeners=function(){this.hls.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ee.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ee.MANIFEST_LOADED,this.onManifestLoaded,this)},A.getLicenseServerUrl=function(e){var t=this.config,n=t.drmSystems,t=t.widevineLicenseUrl,n=n[e];if(n)return n.licenseUrl;if(e===g.WIDEVINE&&t)return t;throw new Error('no license server URL configured for key-system "'+e+'"')},A.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},A.attemptKeySystemAccess=function(e){function t(e,t,n){return!!e&&n.indexOf(e)===t}var o=this,n=this.hls.levels,s=n.map(function(e){return e.audioCodec}).filter(t),l=n.map(function(e){return e.videoCodec}).filter(t);return s.length+l.length===0&&l.push("avc1.42e01e"),new Promise(function(r,a){!function t(n){var i=n.shift();o.getMediaKeysPromise(i,s,l).then(function(e){return r({keySystem:i,mediaKeys:e})}).catch(function(e){n.length?t(n):a(e instanceof Oo?e:new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_ACCESS,error:e,fatal:!0},e.message))})}(e)})},A.requestMediaKeySystemAccess=function(e,t){var n,i=this.config.requestMediaKeySystemAccessFunc;return"function"!=typeof i?(n="Configured requestMediaKeySystemAccess is not a function "+i,null===Pe&&"http:"===self.location.protocol&&(n="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(n))):i(e,t)},A.getMediaKeysPromise=function(i,e,t){var r,a=this,e=function(e,t,n,i){var r,a;switch(e){case g.FAIRPLAY:r=["cenc","sinf"];break;case g.WIDEVINE:case g.PLAYREADY:r=["cenc"];break;case g.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return n=n,[{initDataTypes:r,persistentState:(a=i).persistentState||"not-allowed",distinctiveIdentifier:a.distinctiveIdentifier||"not-allowed",sessionTypes:a.sessionTypes||[a.sessionType||"temporary"],audioCapabilities:t.map(function(e){return{contentType:'audio/mp4; codecs="'+e+'"',robustness:a.audioRobustness||"",encryptionScheme:a.audioEncryptionScheme||null}}),videoCapabilities:n.map(function(e){return{contentType:'video/mp4; codecs="'+e+'"',robustness:a.videoRobustness||"",encryptionScheme:a.videoEncryptionScheme||null}})}]}(i,e,t,this.config.drmSystemOptions),n=this.keySystemAccessPromises[i],t=null==n?void 0:n.keySystemAccess;return t?t.then(function(){return n.mediaKeys}):(this.log('Requesting encrypted media "'+i+'" key-system access with config: '+JSON.stringify(e)),t=this.requestMediaKeySystemAccess(i,e),r=this.keySystemAccessPromises[i]={keySystemAccess:t},t.catch(function(e){a.log('Failed to obtain access to key-system "'+i+'": '+e)}),t.then(function(e){a.log('Access for key-system "'+e.keySystem+'" obtained');var n=a.fetchServerCertificate(i);return a.log('Create media-keys for "'+i+'"'),r.mediaKeys=e.createMediaKeys().then(function(t){return a.log('Media-keys created for "'+i+'"'),n.then(function(e){return e?a.setMediaKeysServerCertificate(t,i,e):t})}),r.mediaKeys.catch(function(e){a.error('Failed to create media-keys for "'+i+'"}: '+e)}),r.mediaKeys}))},A.createMediaKeySessionContext=function(e){var t=e.decryptdata,n=e.keySystem,e=e.mediaKeys,i=(this.log('Creating key-system session "'+n+'" keyId: '+Ye(t.keyId||[])),e.createSession()),t={decryptdata:t,keySystem:n,mediaKeys:e,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(t),t},A.renewKeySession=function(e){var t,n,i=e.decryptdata;i.pssh?(t=this.createMediaKeySessionContext(e),n=this.getKeyIdString(i),this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(t,"cenc",i.pssh,"expired")):this.warn("Could not renew expired session. Missing pssh initData."),this.removeSession(e)},A.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Ye(e.keyId)},A.updateKeySession=function(e,t){var n=e.mediaKeysSession;return this.log('Updating key-session "'+n.sessionId+'" for keyID '+Ye((null==(e=e.decryptdata)?void 0:e.keyId)||[])+"\n      } (data length: "+(t&&t.byteLength)+")"),n.update(t)},A.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},A.getKeyFormatPromise=function(r){var a=this;return new Promise(function(n,i){var t=Le(a.config),e=r.map(Re).filter(function(e){return!!e&&-1!==t.indexOf(e)});return a.getKeySystemSelectionPromise(e).then(function(e){var e=e.keySystem,t=Ce(e);t?n(t):i(new Error('Unable to find format for key-system "'+e+'"'))}).catch(i)})},A.loadKey=function(i){var r=this,a=i.keyInfo.decryptdata,e=this.getKeyIdString(a),o="(keyId: "+e+' format: "'+a.keyFormat+'" method: '+a.method+" uri: "+a.uri+")",t=(this.log("Starting session for key "+o),this.keyIdToKeySessionPromise[e]);return t||(t=this.keyIdToKeySessionPromise[e]=this.getKeySystemForKeyPromise(a).then(function(e){var t=e.keySystem,n=e.mediaKeys;return r.throwIfDestroyed(),r.log("Handle encrypted media sn: "+i.frag.sn+" "+i.frag.type+": "+i.frag.level+" using key "+o),r.attemptSetMediaKeys(t,n).then(function(){r.throwIfDestroyed();var e=r.createMediaKeySessionContext({keySystem:t,mediaKeys:n,decryptdata:a});return r.generateRequestWithPreferredKeySession(e,"cenc",a.pssh,"playlist-key")})})).catch(function(e){return r.handleError(e)}),t},A.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},A.handleError=function(e){this.hls&&(this.error(e.message),e instanceof Oo?this.hls.trigger(ee.ERROR,e.data):this.hls.trigger(ee.ERROR,{type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},A.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),t=this.keyIdToKeySessionPromise[t];return t||(e=(t=Re(e.keyFormat))?[t]:Le(this.config),this.attemptKeySystemAccess(e))},A.getKeySystemSelectionPromise=function(e){if(0===(e=e.length?e:Le(this.config)).length)throw new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},A._onMediaEncrypted=function(e){var r,t,a=this,o=e.initDataType,s=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+o+'"'),null!==s){if("sinf"===o&&this.config.drmSystems[g.FAIRPLAY]){var n=v(new Uint8Array(s));try{var i=Ee(JSON.parse(n).sinf),l=et(new Uint8Array(i));if(!l)return;r=l.subarray(8,24),t=g.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var u=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),i=n.getUint32(0);if(e.byteLength!==i&&44<i)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,1<t.version)return null;t.systemId=Ye(new Uint8Array(e,12,16));var r=n.getUint32(28);if(0===t.version){if(i-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(var a=0;a<r;a++)t.kids.push(new Uint8Array(e,32+16*a,16))}return t}(s);if(null===u)return;0===u.version&&u.systemId===Ie&&u.data&&(r=u.data.subarray(8,24)),t=function(){if(u.systemId===Ie)return g.WIDEVINE}()}if(t&&r){for(var c,h=Ye(r),d=this.keyIdToKeySessionPromise,f=this.mediaKeySessions,p=d[h],m=0;m<f.length&&(0===(c=function(){var e,t=f[m],n=t.decryptdata;return n.pssh||!n.keyId?0:(e=Ye(n.keyId),h===e||-1!==n.uri.replace(/-/g,"").indexOf(h)?(p=d[e],delete d[e],n.pssh=new Uint8Array(s),n.keyId=r,p=d[h]=p.then(function(){return a.generateRequestWithPreferredKeySession(t,o,s,"encrypted-event-key-match")}),1):void 0)}())||1!==c);m++);(p=p||(d[h]=this.getKeySystemSelectionPromise([t]).then(function(e){var t=e.keySystem,n=e.mediaKeys,i=(a.throwIfDestroyed(),new ot("ISO-23001-7",h,null!=(e=Ce(t))?e:""));return i.pssh=new Uint8Array(s),i.keyId=r,a.attemptSetMediaKeys(t,n).then(function(){a.throwIfDestroyed();var e=a.createMediaKeySessionContext({decryptdata:i,keySystem:t,mediaKeys:n});return a.generateRequestWithPreferredKeySession(e,o,s,"encrypted-event-no-match")})}))).catch(function(e){return a.handleError(e)})}}},A._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},A.attemptSetMediaKeys=function(e,t){var n=this,i=this.setMediaKeysQueue.slice(),r=(this.log('Setting media-keys for "'+e+'"'),Promise.all(i).then(function(){if(n.media)return n.media.setMediaKeys(t);throw new Error("Attempted to set mediaKeys without media element attached")}));return this.setMediaKeysQueue.push(r),r.then(function(){n.log('Media-keys set for "'+e+'"'),i.push(r),n.setMediaKeysQueue=n.setMediaKeysQueue.filter(function(e){return-1===i.indexOf(e)})})},A.generateRequestWithPreferredKeySession=function(i,e,t,n){var r,a,o,s=this,l=null==(l=this.config.drmSystems)||null==(l=l[i.keySystem])?void 0:l.generateRequest;if(l)try{var u=l.call(this.hls,e,t,i);if(!u)throw new Error("Invalid response from configured generateRequest filter");e=u.initDataType,t=i.decryptdata.pssh=u.initData?new Uint8Array(u.initData):null}catch(i){if(this.warn(i.message),null!=(l=this.hls)&&l.config.debug)throw i}return null===t?(this.log('Skipping key-session request for "'+n+'" (no initData)'),Promise.resolve(i)):(r=this.getKeyIdString(i.decryptdata),this.log('Generating key-session request for "'+n+'": '+r+" (init data type: "+e+" length: "+(t?t.byteLength:null)+")"),a=new Kr,i.mediaKeysSession.onmessage=function(e){var t,n=i.mediaKeysSession;n?(t=e.messageType,e=e.message,s.log('"'+t+'" message event for session "'+n.sessionId+'" message size: '+e.byteLength),"license-request"===t||"license-renewal"===t?s.renewLicense(i,e).catch(function(e){s.handleError(e),a.emit("error",e)}):"license-release"===t?i.keySystem===g.FAIRPLAY&&(s.updateKeySession(i,Ae("acknowledged")),s.removeSession(i)):s.warn('unhandled media key message type "'+t+'"')):a.emit("error",new Error("invalid state"))},i.mediaKeysSession.onkeystatuseschange=function(e){var t;i.mediaKeysSession?(s.onKeyStatusChange(i),t=i.keyStatus,a.emit("keyStatus",t),"expired"===t&&(s.warn(i.keySystem+" expired for key "+r),s.renewKeySession(i))):a.emit("error",new Error("invalid state"))},o=new Promise(function(t,n){a.on("error",n),a.on("keyStatus",function(e){e.startsWith("usable")?t():"output-restricted"===e?n(new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===e?n(new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+e+'"')):"expired"===e?n(new Error("key expired while generating request")):s.warn('unhandled key status change "'+e+'"')})}),i.mediaKeysSession.generateRequest(e,t).then(function(){var e;s.log('Request generated for key-session "'+(null==(e=i.mediaKeysSession)?void 0:e.sessionId)+'" keyId: '+r)}).catch(function(e){throw new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)}).then(function(){return o}).catch(function(e){throw a.removeAllListeners(),s.removeSession(i),e}).then(function(){return a.removeAllListeners(),i}))},A.onKeyStatusChange=function(n){var i=this;n.mediaKeysSession.keyStatuses.forEach(function(e,t){i.log('key status change "'+e+'" for keyStatuses keyId: '+Ye("buffer"in t?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t))+" session keyId: "+Ye(new Uint8Array(n.decryptdata.keyId||[]))+" uri: "+n.decryptdata.uri),n.keyStatus=e})},A.fetchServerCertificate=function(s){var t=this.config,n=new t.loader(t),l=this.getServerCertificateUrl(s);return l?(this.log('Fetching serverCertificate for "'+s+'"'),new Promise(function(r,a){var o={responseType:"arraybuffer",url:l},e=t.certLoadPolicy.default,e={loadPolicy:e,timeout:e.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};n.load(o,e,{onSuccess:function(e,t,n,i){r(e.data)},onError:function(e,t,n,i){a(new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:m({url:o.url,data:void 0},e)},'"'+s+'" certificate request failed ('+l+"). Status: "+e.code+" ("+e.text+")"))},onTimeout:function(e,t,n){a(new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:o.url,data:void 0}},'"'+s+'" certificate request timed out ('+l+")"))},onAbort:function(e,t,n){a(new Error("aborted"))}})})):Promise.resolve()},A.setMediaKeysServerCertificate=function(i,r,a){var o=this;return new Promise(function(t,n){i.setServerCertificate(a).then(function(e){o.log("setServerCertificate "+(e?"success":"not supported by CDM")+" ("+(null==a?void 0:a.byteLength)+') on "'+r+'"'),t(i)}).catch(function(e){n(new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})},A.renewLicense=function(t,e){var n=this;return this.requestLicense(t,new Uint8Array(e)).then(function(e){return n.updateKeySession(t,new Uint8Array(e)).catch(function(e){throw new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)})})},A.setupLicenseXHR=function(t,n,i,r){var a=this,o=this.config.licenseXhrSetup;return o?Promise.resolve().then(function(){if(i.decryptdata)return o.call(a.hls,t,n,i,r);throw new Error("Key removed")}).catch(function(e){if(i.decryptdata)return t.open("POST",n,!0),o.call(a.hls,t,n,i,r);throw e}).then(function(e){return t.readyState||t.open("POST",n,!0),{xhr:t,licenseChallenge:e||r}}):(t.open("POST",n,!0),Promise.resolve({xhr:t,licenseChallenge:r}))},A.requestLicense=function(o,s){var l=this,u=this.config.keyLoadPolicy.default;return new Promise(function(n,i){var r=l.getLicenseServerUrl(o.keySystem),a=(l.log("Sending license request to URL: "+r),new XMLHttpRequest);a.responseType="arraybuffer",a.onreadystatechange=function(){if(!l.hls||!o.mediaKeysSession)return i(new Error("invalid state"));if(4===a.readyState)if(200===a.status){l._requestLicenseFailureCount=0;var e=a.response,t=(l.log("License received "+(e instanceof ArrayBuffer?e.byteLength:e)),l.config.licenseResponseCallback);if(t)try{e=t.call(l.hls,a,r,o)}catch(e){l.error(e)}n(e)}else{var t=u.errorRetry,e=t?t.maxNumRetry:0;l._requestLicenseFailureCount++,l._requestLicenseFailureCount>e||400<=a.status&&a.status<500?i(new Oo({type:te.KEY_SYSTEM_ERROR,details:ne.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:r,data:void 0,code:a.status,text:a.statusText}},"License Request XHR failed ("+r+"). Status: "+a.status+" ("+a.statusText+")")):(t=e-l._requestLicenseFailureCount+1,l.warn("Retrying license request, "+t+" attempts left"),l.requestLicense(o,s).then(n,i))}},o.licenseXhr&&o.licenseXhr.readyState!==XMLHttpRequest.DONE&&o.licenseXhr.abort(),o.licenseXhr=a,l.setupLicenseXHR(a,r,o,s).then(function(e){var t=e.xhr,e=e.licenseChallenge;t.send(e)})})},A.onMediaAttached=function(e,t){this.config.emeEnabled&&(t=t.media,(this.media=t).addEventListener("encrypted",this.onMediaEncrypted),t.addEventListener("waitingforkey",this.onWaitingForKey))},A.onMediaDetached=function(){var t=this,n=this.media,e=this.mediaKeySessions,i=(n&&(n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},ot.clearKeyUriToKeyIdMap(),e.length);Lo.CDMCleanupPromise=Promise.all(e.map(function(e){return t.removeSession(e)}).concat(null==n?void 0:n.setMediaKeys(null).catch(function(e){t.log("Could not clear media keys: "+e+". media.src: "+(null==n?void 0:n.src))}))).then(function(){i&&(t.log("finished closing key sessions and clearing media keys"),e.length=0)}).catch(function(e){t.log("Could not close sessions and clear media keys: "+e+". media.src: "+(null==n?void 0:n.src))})},A.onManifestLoading=function(){this.keyFormatPromise=null},A.onManifestLoaded=function(e,t){var t=t.sessionKeys;t&&this.config.emeEnabled&&!this.keyFormatPromise&&(t=t.reduce(function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e},[]),this.log("Selecting key-system from session-keys "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t))},A.removeSession=function(e){var t=this,n=e.mediaKeysSession,i=e.licenseXhr;if(n)return this.log("Remove licenses and keys and close session "+n.sessionId),n.onmessage=null,n.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0,-1<(i=this.mediaKeySessions.indexOf(e))&&this.mediaKeySessions.splice(i,1),n.remove().catch(function(e){t.log("Could not remove session: "+e)}).then(function(){return n.close()}).catch(function(e){t.log("Could not close session: "+e)})},Lo);function Lo(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Lo.CDMCleanupPromise?[Lo.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=ie.debug.bind(ie,Co),this.log=ie.log.bind(ie,Co),this.warn=ie.warn.bind(ie,Co),this.error=ie.error.bind(ie,Co),this.hls=e,this.config=e.config,this.registerListeners()}function Po(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}function Do(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}A.CDMCleanupPromise=void 0;e(Go,ko=O(Error));var ko,Oo=Go,Mo="m",xo="a",No="v",Fo="av",Bo=((Bo=jo.prototype).registerListeners=function(){var e=this.hls;e.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ee.MEDIA_DETACHED,this.onMediaDetached,this),e.on(ee.BUFFER_CREATED,this.onBufferCreated,this)},Bo.unregisterListeners=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ee.MEDIA_DETACHED,this.onMediaDetached,this),e.off(ee.BUFFER_CREATED,this.onBufferCreated,this)},Bo.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},Bo.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},Bo.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},Bo.onBufferCreated=function(e,t){var n;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer},Bo.createData=function(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},Bo.apply=function(e,t){$(t=void 0===t?{}:t,this.createData());var n="i"===t.ot||t.ot===No||t.ot===Fo;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders?(n=jo.toHeaders(t),Object.keys(n).length&&(e.headers||(e.headers={}),$(e.headers,n))):(n=jo.toQuery(t))&&(e.url=jo.appendQueryToUri(e.url,n))},Bo.getObjectType=function(e){var t=e.type;return"subtitle"===t?"tt":"initSegment"===e.sn?"i":"audio"===t?xo:"main"===t?this.hls.audioTracks.length?No:Fo:void 0},Bo.getTopBandwidth=function(e){for(var t=0,n=this.hls,i=x(e===xo?n.audioTracks:(e=-1<(e=n.maxAutoLevel)?e+1:n.levels.length,n.levels.slice(0,e)));!(r=i()).done;){var r=r.value;r.bitrate>t&&(t=r.bitrate)}return 0<t?t:NaN},Bo.getBufferLength=function(e){var t=this.hls.media,e=e===xo?this.audioBuffer:this.videoBuffer;return e&&t?1e3*y.bufferInfo(e,t.currentTime,this.config.maxBufferHole).len:NaN},Bo.createPlaylistLoader=function(){var e=this.config.pLoader,i=this.applyPlaylistData,t=e||this.config.loader;return(e=n.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,t,n){i(e),this.loader.load(e,t,n)},r(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n;function n(e){this.loader=void 0,this.loader=new t(e)}},Bo.createFragmentLoader=function(){var e=this.config.fLoader,i=this.applyFragmentData,t=e||this.config.loader;return(e=n.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,t,n){i(e),this.loader.load(e,t,n)},r(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n;function n(e){this.loader=void 0,this.loader=new t(e)}},jo.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},jo.serialize=function(e){for(var t=[],n=function(e){return Math.round(e)},i=function(e){return 100*n(e/100)},r={br:n,d:n,bl:i,dl:i,mtp:i,nor:function(e){return encodeURIComponent(e)},rtp:i,tb:n},a=x(Object.keys(e||{}).sort());!(l=a()).done;){var o,s,l=l.value,u=e[l];o=u,Number.isNaN(o)||null==o||""===o||!1===o||"v"===l&&1===u||"pr"==l&&1===u||(o=typeof(u=(o=r[l])?o(u):u),s=void 0,s="ot"===l||"sf"===l||"st"===l?l+"="+u:"boolean"==o?l:"number"==o?l+"="+u:l+"="+JSON.stringify(u),t.push(s))}return t.join(",")},jo.toHeaders=function(e){for(var t={},n=["Object","Request","Session","Status"],i=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];i[null!=r[s]?r[s]:1][s]=e[s]}for(var l=0;l<i.length;l++){var u=jo.serialize(i[l]);u&&(t["CMCD-"+n[l]]=u)}return t},jo.toQuery=function(e){return"CMCD="+encodeURIComponent(jo.serialize(e))},jo.appendQueryToUri=function(e,t){var n;return t?(n=e.includes("?")?"&":"?",e+n+t):e},jo),b=((b=Uo.prototype).registerListeners=function(){var e=this.hls;e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ee.ERROR,this.onError,this)},b.unregisterListeners=function(){var e=this.hls;e&&(e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ee.ERROR,this.onError,this))},b.startLoad=function(){var e;this.started=!0,this.clearTimeout(),this.enabled&&this.uri&&(this.updated?(e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0),this.scheduleRefresh(this.uri,e)):this.loadSteeringManifest(this.uri))},b.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},b.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},b.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},b.removeLevel=function(t){var e=this.levels;e&&(this.levels=e.filter(function(e){return e!==t}))},b.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},b.onManifestLoaded=function(e,t){t=t.contentSteering;null!==t&&(this.pathwayId=t.pathwayId,this.uri=t.uri,this.started)&&this.startLoad()},b.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},b.onError=function(e,t){var n,i,t=t.errorAction;2===(null==t?void 0:t.action)&&1===t.flags&&(n=this.pathwayPriority,i=this.pathwayId,this.penalizedPathways[i]||(this.penalizedPathways[i]=performance.now()),n=!n&&this.levels?this.levels.reduce(function(e,t){return-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e},[]):n)&&1<n.length&&(this.updatePathwayPriority(n),t.resolved=this.pathwayId!==i)},b.filterParsedLevels=function(e){this.levels=e;var t,n=this.getLevelsForPathway(this.pathwayId);return 0===n.length&&(t=e[0].pathwayId,this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+t+'"'),n=this.getLevelsForPathway(t),this.pathwayId=t),n.length!==e.length?(this.log("Found "+n.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),n):e},b.getLevelsForPathway=function(t){return null===this.levels?[]:this.levels.filter(function(e){return t===e.pathwayId})},b.updatePathwayPriority=function(e){this.pathwayPriority=e;var t,n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(function(e){3e5<i-n[e]&&delete n[e]});for(var r=0;r<e.length;r++){var a=e[r];if(!n[a]){if(a===this.pathwayId)return;var o=this.hls.nextLoadLevel,s=this.hls.levels[o];if(0<(t=this.getLevelsForPathway(a)).length){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,this.hls.trigger(ee.LEVELS_UPDATED,{levels:t});a=this.hls.levels[o];s&&a&&this.levels&&(a.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&a.bitrate!==s.bitrate&&this.log("Unstable Pathways change from bitrate "+s.bitrate+" to "+a.bitrate),this.hls.nextLoadLevel=o);break}}}},b.clonePathways=function(e){var o,s,n=this,i=this.levels;i&&(o={},s={},e.forEach(function(e){var r=e.ID,t=e["BASE-ID"],a=e["URI-REPLACEMENT"];i.some(function(e){return e.pathwayId===r})||(e=n.getLevelsForPathway(t).map(function(e){var t=$({},e),e=(t.details=void 0,t.url=Ho(e.uri,e.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),new V(e.attrs)),n=(e["PATHWAY-ID"]=r,e.AUDIO&&e.AUDIO+"_clone_"+r),i=e.SUBTITLES&&e.SUBTITLES+"_clone_"+r,e=(n&&(o[e.AUDIO]=n,e.AUDIO=n),i&&(s[e.SUBTITLES]=i,e.SUBTITLES=i),t.attrs=e,new rn(t));return un(e,"audio",n),un(e,"text",i),e}),i.push.apply(i,e),Vo(n.audioTracks,o,a,r),Vo(n.subtitleTracks,s,a,r))}))},b.loadSteeringManifest=function(e){var l,u=this,t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);try{l=new self.URL(e)}catch(l){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}"data:"!==l.protocol&&(n=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate),l.searchParams.set("_HLS_pathway",this.pathwayId),l.searchParams.set("_HLS_throughput",""+n));e={responseType:"json",url:l.href},n=t.steeringManifestLoadPolicy.default,t=n.errorRetry||n.timeoutRetry||{},n={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:t.maxNumRetry||0,retryDelay:t.retryDelayMs||0,maxRetryDelay:t.maxRetryDelayMs||0},t={onSuccess:function(e,t,n,i){u.log('Loaded steering manifest: "'+l+'"');var r=e.data;if(1===r.VERSION){u.updated=performance.now(),u.timeToLoad=r.TTL;var a=r["RELOAD-URI"],o=r["PATHWAY-CLONES"],s=r["PATHWAY-PRIORITY"];if(a)try{u.uri=new self.URL(a,l).href}catch(e){return u.enabled=!1,void u.log("Failed to parse Steering Manifest RELOAD-URI: "+a)}u.scheduleRefresh(u.uri||n.url),o&&u.clonePathways(o);a={steeringManifest:r,url:l.toString()};u.hls.trigger(ee.STEERING_MANIFEST_LOADED,a),s&&u.updatePathwayPriority(s)}else u.log("Steering VERSION "+r.VERSION+" not supported!")},onError:function(e,t,n,i){var r;u.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),u.stopLoad(),410===e.code?(u.enabled=!1,u.log("Steering manifest "+t.url+" no longer available")):(r=1e3*u.timeToLoad,429!==e.code?u.scheduleRefresh(u.uri||t.url,r):("function"==typeof(null==(e=u.loader)?void 0:e.getResponseHeader)&&(e=e.getResponseHeader("Retry-After"))&&(r=1e3*parseFloat(e)),u.log("Steering manifest "+t.url+" rate limited")))},onTimeout:function(e,t,n){u.log("Timeout loading steering manifest ("+t.url+")"),u.scheduleRefresh(u.uri||t.url)}};this.log("Requesting steering manifest: "+l),this.loader.load(e,n,t)},b.scheduleRefresh=function(e,t){var n=this;void 0===t&&(t=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout(function(){n.loadSteeringManifest(e)},t)},Uo);function Uo(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=ie.log.bind(ie,"[content-steering]:"),this.registerListeners()}function jo(e){var a=this,e=(this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){a.initialized&&(a.starved=!0),a.buffering=!0},this.onPlaying=function(){a.initialized||(a.initialized=!0),a.buffering=!1},this.applyPlaylistData=function(e){try{a.apply(e,{ot:Mo,su:!a.initialized})}catch(e){ie.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,n=a.hls.levels[t.level],i=a.getObjectType(t),r={d:1e3*t.duration,ot:i};i!==No&&i!==xo&&i!=Fo||(r.br=n.bitrate/1e3,r.tb=a.getTopBandwidth(i)/1e3,r.bl=a.getBufferLength(i)),a.apply(e,r)}catch(e){ie.warn("Could not generate segment CMCD data.",e)}},this.hls=e,this.config=e.config),t=e.cmcd;null!=t&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=t.sessionId||jo.uuid(),this.cid=t.contentId,this.useHeaders=!0===t.useHeaders,this.registerListeners())}function Go(e,t){var n;return(n=ko.call(this,t)||this).data=void 0,e.error||(e.error=new Error(t)),(n.data=e).err=e.error,n}function Vo(t,i,r,a){t&&Object.keys(i).forEach(function(n){var e=t.filter(function(e){return e.groupId===n}).map(function(e){var t=$({},e);return t.details=void 0,t.attrs=new V(t.attrs),t.url=t.attrs.URI=Ho(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),t.groupId=t.attrs["GROUP-ID"]=i[n],t.attrs["PATHWAY-ID"]=a,t});t.push.apply(t,e)})}function Ho(e,t,n,i){var r,a=i.HOST,o=i.PARAMS,i=i[n],s=(t&&(r=null==i?void 0:i[t])&&(e=r),new self.URL(e));return a&&!r&&(s.host=a),o&&Object.keys(o).sort().forEach(function(e){e&&s.searchParams.set(e,o[e])}),s.href}var Yo=/^age:\s*[\d.]+\s*$/im,zo=((T=Qo.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null},T.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState)&&(this.stats.aborted=!0,e.abort())},T.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},T.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()},T.loadInternal=function(){var t,n,i,r=this,e=this.config,a=this.context;e&&a&&(t=this.loader=new self.XMLHttpRequest,(n=this.stats).loading.first=0,n.loaded=0,n.aborted=!1,(i=this.xhrSetup)?Promise.resolve().then(function(){if(!r.stats.aborted)return i(t,a.url)}).catch(function(e){return t.open("GET",a.url,!0),i(t,a.url)}).then(function(){r.stats.aborted||r.openAndSendXhr(t,a,e)}).catch(function(e){r.callbacks.onError({code:t.status,text:e.message},a,t,n)}):this.openAndSendXhr(t,a,e))},T.openAndSendXhr=function(e,t,n){e.readyState||e.open("GET",t.url,!0),t.url.includes("playerId")&&(t.responseType="text");var i=t.headers,r=n.loadPolicy,a=r.maxTimeToFirstByteMs,r=r.maxLoadTimeMs;if(i)for(var o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=a&&G(a)?a:r,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()},T.readystatechange=function(){var e,t,n,i,r=this.context,a=this.loader,o=this.stats;r&&a&&(t=a.readyState,e=this.config,!o.aborted)&&2<=t&&(0===o.loading.first&&(o.loading.first=Math.max(self.performance.now(),o.loading.start),e.timeout!==e.loadPolicy.maxLoadTimeMs)&&(self.clearTimeout(this.requestTimeout),e.timeout=e.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.loadPolicy.maxLoadTimeMs-(o.loading.first-o.loading.start))),4===t)&&(self.clearTimeout(this.requestTimeout),a.onreadystatechange=null,a.onprogress=null,t=a.status,i="text"!==a.responseType,200<=t&&t<300&&(i&&a.response||null!==a.responseText)?(o.loading.end=Math.max(self.performance.now(),o.loading.first),i=i?a.response:a.responseText,n="arraybuffer"===a.responseType?i.byteLength:i.length,o.loaded=o.total=n,o.bwEstimate=8e3*o.total/(o.loading.end-o.loading.first),this.callbacks&&((n=this.callbacks.onProgress)&&n(o,r,i,a),this.callbacks)&&(n={url:a.responseURL,data:i,code:t},this.callbacks.onSuccess(n,o,r,a))):An(i=e.loadPolicy.errorRetry,o.retry,!1,t)?this.retry(i):(ie.error(t+" while loading "+r.url),this.callbacks.onError({code:t,text:a.statusText},r,a,o)))},T.loadtimeout=function(){var e=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;An(e,this.stats.retry,!0)?this.retry(e):(ie.warn("timeout while loading "+(null==(e=this.context)?void 0:e.url)),(e=this.callbacks)&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader)))},T.retry=function(e){var t=this.context,n=this.stats;this.retryDelay=vn(e,n.retry),n.retry++,ie.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+n.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},T.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},T.getCacheAge=function(){var e,t=null;return t=this.loader&&Yo.test(this.loader.getAllResponseHeaders())?(e=this.loader.getResponseHeader("age"))?parseFloat(e):null:t},T.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},Qo),Wo=/(\d+)-(\d+)\/(\d+)/,Ko=((T=qo.prototype).destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},T.abortInternal=function(){var e=this.response;!this.controller||null!=e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},T.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},T.load=function(i,r,a){var o=this,s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();var e=function(e,t){t={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers($({},e.headers))};return e.rangeEnd&&t.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),t}(i,this.controller.signal),l=a.onProgress,u="arraybuffer"===i.responseType,c=u?"byteLength":"length",t=r.loadPolicy,n=t.maxTimeToFirstByteMs,h=t.maxLoadTimeMs;this.context=i,this.config=r,this.callbacks=a,this.request=this.fetchSetup(i,e),self.clearTimeout(this.requestTimeout),r.timeout=n&&G(n)?n:h,this.requestTimeout=self.setTimeout(function(){o.abortInternal(),a.onTimeout(s,i,o.response)},r.timeout),self.fetch(this.request).then(function(e){o.response=o.loader=e;var t,n=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(o.requestTimeout),r.timeout=h,o.requestTimeout=self.setTimeout(function(){o.abortInternal(),a.onTimeout(s,i,o.response)},h-(n-s.loading.start)),e.ok)return s.loading.first=n,s.total=function(e){var t=e.get("Content-Range");if(t){var n=function(){var e=Wo.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}();if(G(n))return n}n=e.get("Content-Length");if(n)return parseInt(n)}(e.headers)||s.total,l&&G(r.highWaterMark)?o.loadProgressively(e,s,i,r.highWaterMark,l):u?e.arrayBuffer():"json"===i.responseType?e.json():e.text();throw n=e.status,t=e.statusText,new $o(t||"fetch, bad network response",n,e)}).then(function(e){var t=o.response;if(!t)throw new Error("loader destroyed");self.clearTimeout(o.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);var n=e[c],n=(n&&(s.loaded=s.total=n),{url:t.url,data:e,code:t.status});l&&!G(r.highWaterMark)&&l(s,i,e,t),a.onSuccess(n,s,i,t)}).catch(function(e){var t,n;self.clearTimeout(o.requestTimeout),s.aborted||(t=e&&e.code||0,n=e?e.message:null,a.onError({code:t,text:n},i,e?e.details:null,s))})},T.getCacheAge=function(){var e,t=null;return t=this.response?(e=this.response.headers.get("age"))?parseFloat(e):null:t},T.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},T.loadProgressively=function(i,r,a,o,s){void 0===o&&(o=0);var l=new gi,e=i.body.getReader();return function n(){return e.read().then(function(e){var t;return e.done?(l.dataLength&&s(r,a,l.flush(),i),Promise.resolve(new ArrayBuffer(0))):(t=(e=e.value).length,r.loaded+=t,t<o||l.dataLength?(l.push(e),l.dataLength>=o&&s(r,a,l.flush(),i)):s(r,a,e,i),n())}).catch(function(){return Promise.reject()})}()},qo);function qo(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Xo,this.controller=new self.AbortController,this.stats=new ue}function Qo(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ue,this.retryDelay=0}function Xo(e,t){return new self.Request(e.url,t)}e(ns,Zo=O(Error));var Jo,Zo,$o=ns,es=/\s/,ts=m(m({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:zo,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:i,bufferController:o,capLevelController:l,errorController:t,fpsController:p,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Pe,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(t,e,n,i){for(var r,a,o,s,l=[],u=self.VTTCue||self.TextTrackCue,c=0;c<i.rows.length;c++)if(a=!0,o=0,s="",!(r=i.rows[c]).isEmpty()){for(var h,d=0;d<r.chars.length;d++)es.test(r.chars[d].uchar)&&a?o++:(s+=r.chars[d].uchar,a=!1);(r.cueStartTime=e)===n&&(n+=1e-4),16<=o?o--:o++;var f=uo(s.trim()),p=go(e,n,f);null!=t&&null!=(h=t.cues)&&h.getCueById(p)||((h=new u(e,n,f)).id=p,h.line=c+1,h.align="left",h.position=10+Math.min(80,10*Math.floor(8*o/32)),l.push(h))}return t&&l.length&&(l.sort(function(e,t){return"auto"===e.line||"auto"===t.line?0:8<e.line&&8<t.line?t.line-e.line:e.line-t.line}),l.forEach(function(e){return zt(t,e)})),l}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:c,subtitleTrackController:a,timelineController:u,audioStreamController:Qi,audioTrackController:s,emeController:A,cmcdController:Bo,contentSteeringController:b});function ns(e,t,n){return(e=Zo.call(this,e)||this).code=void 0,e.details=void 0,e.code=t,e.details=n,e}function is(n){return n&&"object"==typeof n?Array.isArray(n)?n.map(is):Object.keys(n).reduce(function(e,t){return e[t]=is(n[t]),e},{}):n}e(os,rs=n),(T=os.prototype)._registerListeners=function(){var e=this.hls;e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ee.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ee.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(ee.FRAG_LOADED,this.onFragLoaded,this),e.on(ee.ERROR,this.onError,this)},T._unregisterListeners=function(){var e=this.hls;e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ee.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ee.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(ee.FRAG_LOADED,this.onFragLoaded,this),e.off(ee.ERROR,this.onError,this)},T.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),rs.prototype.destroy.call(this)},T.stopLoad=function(){this._levels.forEach(function(e){e.loadError=0,e.fragmentError=0}),rs.prototype.stopLoad.call(this)},T.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},T.onManifestLoading=function(e,t){this.resetLevels()},T.onManifestLoaded=function(e,t){var s,l=[],u={};t.levels.forEach(function(e){var t=e.attrs,n=(-1!==(null==(n=e.audioCodec)?void 0:n.indexOf("mp4a.40.34"))&&(Jo=Jo||/chrome|firefox/i.test(navigator.userAgent))&&(e.audioCodec=void 0),e.audioCodec&&(e.audioCodec=Et(e.audioCodec)),t.AUDIO),i=t.CODECS,r=t["FRAME-RATE"],a=t["PATHWAY-ID"],o=t.RESOLUTION,t=t.SUBTITLES,a=(a||".")+"-"+e.bitrate+"-"+o+"-"+r+"-"+i;(s=u[a])?s.addFallback(e):(s=new rn(e),u[a]=s,l.push(s)),un(s,"audio",n),un(s,"text",t)}),this.filterAndSortMediaOptions(l,t)},T.filterAndSortMediaOptions=function(t,n){var i=this,e=[],r=[],a=!1,o=!1,s=!1,l=t.filter(function(e){var t=e.audioCodec,n=e.videoCodec,i=e.width,r=e.height,e=e.unknownCodecs;return a=a||!(!i||!r),o=o||!!n,s=s||!!t,!(null!=e&&e.length)&&(!t||gt(t,"audio"))&&(!n||gt(n,"video"))});if(0!==(l=(a||o)&&s?l.filter(function(e){var t=e.videoCodec,n=e.width,e=e.height;return!!t||!(!n||!e)}):l).length){n.audioTracks&&ss(e=n.audioTracks.filter(function(e){return!e.audioCodec||gt(e.audioCodec,"audio")})),n.subtitles&&ss(r=n.subtitles);var u=l.slice(0),c=(l.sort(function(e,t){return e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs["FRAME-RATE"]!==t.attrs["FRAME-RATE"]?e.attrs.decimalFloatingPoint("FRAME-RATE")-t.attrs.decimalFloatingPoint("FRAME-RATE"):e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):a&&e.height!==t.height?e.height-t.height:0}),u[0]);if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==u.length)for(var h=0;h<u.length;h++)if(u[h].pathwayId===l[0].pathwayId){c=u[h];break}this._levels=l;for(var d=0;d<l.length;d++)if(l[d]===c){this._firstLevel=d;var f,p=c.bitrate,m=this.hls.bandwidthEstimate;this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+p),void 0===(null==(f=this.hls.userConfig)?void 0:f.abrEwmaDefaultEstimate)&&m<(f=Math.min(p,this.hls.config.abrEwmaDefaultEstimateMax))&&m===ts.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=f);break}var g=s&&!o,r={levels:l,audioTracks:e,subtitleTracks:r,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:s,video:o,altAudio:!g&&e.some(function(e){return!!e.url})};this.hls.trigger(ee.MANIFEST_PARSED,r),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then(function(){var e;i.hls&&(t.length&&i.warn('One or more CODECS in variant not supported: "'+t[0].attrs.CODECS+'"'),e=new Error("no level with compatible codecs found in manifest"),i.hls.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:e,reason:e.message}))})},T.onError=function(e,t){!t.fatal&&t.context&&t.context.type===xt&&t.context.level===this.level&&this.checkRetry(t)},T.onFragLoaded=function(e,t){var t=t.frag;void 0!==t&&t.type===_&&void 0!==(t=this._levels[t.level])&&(t.loadError=0)},T.onLevelLoaded=function(e,t){var n=t.level,i=t.details,r=this._levels[n];r?n===this.currentLevelIndex?(0===r.fragmentError&&(r.loadError=0),this.playlistLoaded(n,t,r.details)):null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0):(this.warn("Invalid level index "+n),null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0))},T.onAudioTrackSwitched=function(e,t){var n=this.currentLevel;if(n){var i=this.hls.audioTracks[t.id].groupId;if(n.audioGroupIds&&n.audioGroupId!==i){for(var r=-1,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}-1!==r&&r!==n.urlId&&(n.urlId=r,this.canLoad)&&this.startLoad()}}},T.loadPlaylist=function(e){rs.prototype.loadPlaylist.call(this);var t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){var i=n.urlId,r=n.uri;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}var a=n.attrs["PATHWAY-ID"];this.log("Loading level index "+t+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(a?" Pathway "+a:"")+" URI "+(i+1)+"/"+n.url.length+" "+r),this.clearTimer(),this.hls.trigger(ee.LEVEL_LOADING,{url:r,level:t,id:i,deliveryDirectives:e||null})}},T.removeLevel=function(n,i){function r(e,t){return t!==i}var a=this,e=this._levels.filter(function(e,t){return t!==n||(1<e.url.length&&void 0!==i?(e.url=e.url.filter(r),e.audioGroupIds&&(e.audioGroupIds=e.audioGroupIds.filter(r)),e.textGroupIds&&(e.textGroupIds=e.textGroupIds.filter(r)),!(e.urlId=0)):(a.steering&&a.steering.removeLevel(e),!1))});this.hls.trigger(ee.LEVELS_UPDATED,{levels:e})},T.onLevelsUpdated=function(e,t){t=t.levels;t.forEach(function(e,t){e=e.details;null!=e&&e.fragments&&e.fragments.forEach(function(e){e.level=t})}),this._levels=t},r(os,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;if(0!==t.length){if(e<0||e>=t.length){var n=new Error("invalid level idx"),i=e<0;if(this.hls.trigger(ee.ERROR,{type:te.OTHER_ERROR,details:ne.LEVEL_SWITCH_ERROR,level:e,fatal:i,error:n,reason:n.message}),i)return;e=Math.min(e,t.length-1)}var n=this.currentLevelIndex,i=this.currentLevel,r=i?i.attrs["PATHWAY-ID"]:void 0,t=t[e],a=t.attrs["PATHWAY-ID"];this.currentLevelIndex=e,this.currentLevel=t,n===e&&t.details&&i&&r===a||(this.log("Switching to level "+e+(a?" with Pathway "+a:"")+" from level "+n+(r?" with Pathway "+r:"")),delete(a=$({},t,{level:e,maxBitrate:t.maxBitrate,attrs:t.attrs,uri:t.uri,urlId:t.urlId}))._attrs,delete a._urlId,delete a._avgBitrate,this.hls.trigger(ee.LEVEL_SWITCHING,a),(n=t.details)&&!n.live)||(r=this.switchParams(t.uri,null==i?void 0:i.details),this.loadPlaylist(r))}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){var e;return void 0===this._startLevel?void 0!==(e=this.hls.config.startLevel)?e:this._firstLevel:this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]);var rs,T,as=os;function os(e,t){return(e=rs.call(this,e,"[level-controller]")||this)._levels=[],e._firstLevel=-1,e._startLevel=void 0,e.currentLevel=null,e.currentLevelIndex=-1,e.manualLevelIndex=-1,e.steering=void 0,e.onParsedComplete=void 0,e.steering=t,e._registerListeners(),e}function ss(e){var n={};e.forEach(function(e){var t=e.groupId||"";e.id=n[t]=n[t]||0,n[t]++})}var ls,us,cs,hs,ds,fs,ps,ms,gs,_s,ys,vs,Es,As,bs,Ts,Ss,ws,Rs,Is,Cs,Ls,Ps,Ds,i={exports:{}};
/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */function ks(e){return parseInt(e)===e}function Os(e){if(ks(e.length)){for(var t=0;t<e.length;t++)if(!ks(e[t])||e[t]<0||255<e[t])return;return 1}}function S(e,t){if(e.buffer&&"Uint8Array"===e.name)return e=t?e.slice?e.slice():Array.prototype.slice.call(e):e;if(Array.isArray(e)){if(Os(e))return new Uint8Array(e);throw new Error("Array contains invalid value: "+e)}if(ks(e.length)&&Os(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function w(e){return new Uint8Array(e)}function Ms(e,t,n,i,r){null==i&&null==r||(e=e.slice?e.slice(i,r):Array.prototype.slice.call(e,i,r)),t.set(e,n)}function xs(e){for(var t=[],n=0;n<e.length;n+=4)t.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}o=i,l={toBytes:function(e){var t=[],n=0;for(e=encodeURI(e);n<e.length;){var i=e.charCodeAt(n++);37===i?(t.push(parseInt(e.substr(n,2),16)),n+=2):t.push(i)}return S(t)},fromBytes:function(e){for(var t=[],n=0;n<e.length;){var i=e[n];i<128?(t.push(String.fromCharCode(i)),n++):191<i&&i<224?(t.push(String.fromCharCode((31&i)<<6|63&e[n+1])),n+=2):(t.push(String.fromCharCode((15&i)<<12|(63&e[n+1])<<6|63&e[n+2])),n+=3)}return t.join("")}},ls="0123456789abcdef",t={toBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},fromBytes:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(ls[(240&i)>>4]+ls[15&i])}return t.join("")}},us={16:10,24:12,32:14},cs=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],hs=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ds=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],fs=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],ps=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],ms=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],gs=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],_s=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],ys=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],vs=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Es=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],As=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],bs=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Ts=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Ss=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],(ws=function(e){if(!(this instanceof ws))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:S(e,!0)}),this._prepare()}).prototype._prepare=function(){var e=us[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var n,i=4*(e+1),r=this.key.length/4,a=xs(this.key),t=0;t<r;t++)this._Ke[n=t>>2][t%4]=a[t],this._Kd[e-n][t%4]=a[t];for(var o,s=0,l=r;l<i;){if(o=a[r-1],a[0]^=hs[o>>16&255]<<24^hs[o>>8&255]<<16^hs[255&o]<<8^hs[o>>24&255]^cs[s]<<24,s+=1,8!=r)for(t=1;t<r;t++)a[t]^=a[t-1];else{for(t=1;t<r/2;t++)a[t]^=a[t-1];for(o=a[r/2-1],a[r/2]^=hs[255&o]^hs[o>>8&255]<<8^hs[o>>16&255]<<16^hs[o>>24&255]<<24,t=r/2+1;t<r;t++)a[t]^=a[t-1]}for(t=0;t<r&&l<i;)this._Ke[u=l>>2][c=l%4]=a[t],this._Kd[e-u][c]=a[t++],l++}for(var u=1;u<e;u++)for(var c=0;c<4;c++)o=this._Kd[u][c],this._Kd[u][c]=As[o>>24&255]^bs[o>>16&255]^Ts[o>>8&255]^Ss[255&o]},ws.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,n=[0,0,0,0],i=xs(e),r=0;r<4;r++)i[r]^=this._Ke[0][r];for(var a=1;a<t;a++){for(r=0;r<4;r++)n[r]=fs[i[r]>>24&255]^ps[i[(r+1)%4]>>16&255]^ms[i[(r+2)%4]>>8&255]^gs[255&i[(r+3)%4]]^this._Ke[a][r];i=n.slice()}for(var o,s=w(16),r=0;r<4;r++)o=this._Ke[t][r],s[4*r]=255&(hs[i[r]>>24&255]^o>>24),s[4*r+1]=255&(hs[i[(r+1)%4]>>16&255]^o>>16),s[4*r+2]=255&(hs[i[(r+2)%4]>>8&255]^o>>8),s[4*r+3]=255&(hs[255&i[(r+3)%4]]^o);return s},ws.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,n=[0,0,0,0],i=xs(e),r=0;r<4;r++)i[r]^=this._Kd[0][r];for(var a=1;a<t;a++){for(r=0;r<4;r++)n[r]=_s[i[r]>>24&255]^ys[i[(r+3)%4]>>16&255]^vs[i[(r+2)%4]>>8&255]^Es[255&i[(r+1)%4]]^this._Kd[a][r];i=n.slice()}for(var o,s=w(16),r=0;r<4;r++)o=this._Kd[t][r],s[4*r]=255&(ds[i[r]>>24&255]^o>>24),s[4*r+1]=255&(ds[i[(r+3)%4]>>16&255]^o>>16),s[4*r+2]=255&(ds[i[(r+2)%4]>>8&255]^o>>8),s[4*r+3]=255&(ds[255&i[(r+1)%4]]^o);return s},(Rs=function(e){if(!(this instanceof Rs))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ws(e)}).prototype.encrypt=function(e){if((e=S(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=w(e.length),n=w(16),i=0;i<e.length;i+=16)Ms(e,n,0,i,i+16),Ms(n=this._aes.encrypt(n),t,i);return t},Rs.prototype.decrypt=function(e){if((e=S(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=w(e.length),n=w(16),i=0;i<e.length;i+=16)Ms(e,n,0,i,i+16),Ms(n=this._aes.decrypt(n),t,i);return t},(Is=function(e,t){if(!(this instanceof Is))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=w(16);this._lastCipherblock=S(t,!0),this._aes=new ws(e)}).prototype.encrypt=function(e){if((e=S(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=w(e.length),n=w(16),i=0;i<e.length;i+=16){Ms(e,n,0,i,i+16);for(var r=0;r<16;r++)n[r]^=this._lastCipherblock[r];this._lastCipherblock=this._aes.encrypt(n),Ms(this._lastCipherblock,t,i)}return t},Is.prototype.decrypt=function(e){if((e=S(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=w(e.length),n=w(16),i=0;i<e.length;i+=16){Ms(e,n,0,i,i+16);for(var n=this._aes.decrypt(n),r=0;r<16;r++)t[i+r]=n[r]^this._lastCipherblock[r];Ms(e,this._lastCipherblock,0,i,i+16)}return t},(Cs=function(e,t,n){if(!(this instanceof Cs))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=w(16);this.segmentSize=n=n||1,this._shiftRegister=S(t,!0),this._aes=new ws(e)}).prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t=S(e,!0),n=0;n<t.length;n+=this.segmentSize){for(var i=this._aes.encrypt(this._shiftRegister),r=0;r<this.segmentSize;r++)t[n+r]^=i[r];Ms(this._shiftRegister,this._shiftRegister,0,this.segmentSize),Ms(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t},Cs.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t=S(e,!0),n=0;n<t.length;n+=this.segmentSize){for(var i=this._aes.encrypt(this._shiftRegister),r=0;r<this.segmentSize;r++)t[n+r]^=i[r];Ms(this._shiftRegister,this._shiftRegister,0,this.segmentSize),Ms(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t},(Ls=function(e,t){if(!(this instanceof Ls))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=w(16);this._lastPrecipher=S(t,!0),this._lastPrecipherIndex=16,this._aes=new ws(e)}).prototype.encrypt=function(e){for(var t=S(e,!0),n=0;n<t.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},Ls.prototype.decrypt=Ls.prototype.encrypt,(Ps=function(e){if(!(this instanceof Ps))throw Error("Counter must be instanitated with `new`");"number"==typeof(e=0!==e?e||1:e)?(this._counter=w(16),this.setValue(e)):this.setBytes(e)}).prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;0<=t;--t)this._counter[t]=e%256,e=parseInt(e/256)},Ps.prototype.setBytes=function(e){if(16!=(e=S(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},Ps.prototype.increment=function(){for(var e=15;0<=e;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}},(Ds=function(e,t){if(!(this instanceof Ds))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof Ps||(t=new Ps(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ws(e)}).prototype.encrypt=function(e){for(var t=S(e,!0),n=0;n<t.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[n]^=this._remainingCounter[this._remainingCounterIndex++];return t},Ds.prototype.decrypt=Ds.prototype.encrypt,o.exports={AES:ws,Counter:Ps,ModeOfOperation:{ecb:Rs,cbc:Is,cfb:Cs,ofb:Ls,ctr:Ds},utils:{hex:t,utf8:l},padding:{pkcs7:{pad:function(e){var t=16-(e=S(e,!0)).length%16,n=w(e.length+t);Ms(e,n);for(var i=e.length;i<n.length;i++)n[i]=t;return n},strip:function(e){if((e=S(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(16<t)throw new Error("PKCS#7 padding byte out of range");for(var n=e.length-t,i=0;i<t;i++)if(e[n+i]!==t)throw new Error("PKCS#7 invalid padding byte");var r=w(n);return Ms(e,r,0,0,n),r}}},_arrayTest:{coerceArray:S,createArray:w,copyArray:Ms}};var Ns=F(i.exports),Fs=((p=Bs.prototype).abort=function(e){for(var t in this.keyUriToKeyInfo){var n,t=this.keyUriToKeyInfo[t].loader;if(t){if(e&&e!==(null==(n=t.context)?void 0:n.frag.type))return;t.abort()}}},p.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},p.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){e=this.keyUriToKeyInfo[e].loader;e&&e.destroy()}this.keyUriToKeyInfo={}},p.createKeyLoadError=function(e,t,n,i,r){return void 0===t&&(t=ne.KEY_LOAD_ERROR),new ei({type:te.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:n,networkDetails:i})},p.loadClear=function(e,n){var i=this;if(this.emeController&&this.config.emeEnabled)for(var r=e.sn,a=e.cc,o=0;o<n.length&&!function(){var t=n[o];if(a<=t.cc&&("initSegment"===r||"initSegment"===t.sn||r<t.sn))return i.emeController.selectKeySystemFormat(t).then(function(e){t.setKeyFormat(e)}),1}();o++);},p.load=function(t){var n=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then(function(e){return n.loadInternal(t,e)}):this.loadInternal(t)},p.loadInternal=function(t,e){e&&t.setKeyFormat(e);var n=t.decryptdata;if(!n)return e=new Error(e?"Expected frag.decryptdata to be defined after setting format "+e:"Missing decryption data on fragment in onKeyLoading"),Promise.reject(this.createKeyLoadError(t,ne.KEY_LOAD_ERROR,e));e=n.uri;if(!e)return Promise.reject(this.createKeyLoadError(t,ne.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+e+'"')));var i,r=this.keyUriToKeyInfo[e];if(null!=r&&r.decryptdata.key)return n.key=r.decryptdata.key,Promise.resolve({frag:t,keyInfo:r});if(null!=r&&r.keyLoadPromise)switch(null==(i=r.mediaKeySessionContext)?void 0:i.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return r.keyLoadPromise.then(function(e){return n.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:r}})}switch(r=this.keyUriToKeyInfo[e]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===n.keyFormat?this.loadKeyHTTP(r,t):this.loadKeyEME(r,t);case"AES-128":return this.loadKeyHTTP(r,t);default:return Promise.reject(this.createKeyLoadError(t,ne.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+n.method+'"')))}},p.loadKeyEME=function(t,e){var n={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){e=this.emeController.loadKey(n);if(e)return(t.keyLoadPromise=e.then(function(e){return t.mediaKeySessionContext=e,n})).catch(function(e){throw t.keyLoadPromise=null,e})}return Promise.resolve(n)},p.loadKeyHTTP=function(t,a){var p=this,n=this.config,i=new n.loader(n);return a.keyLoader=t.loader=i,t.keyLoadPromise=new Promise(function(d,f){var r={keyInfo:t,frag:a,responseType:"arraybuffer",url:t.decryptdata.uri},e=n.keyLoadPolicy.default,e={loadPolicy:e,timeout:e.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};i.load(r,e,{onSuccess:function(e,t,n,i){var r=n.frag,a=n.keyInfo,n=n.url;if(!r.decryptdata||a!==p.keyUriToKeyInfo[n])return f(p.createKeyLoadError(r,ne.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),i));if(n.includes("playerId")){for(var o=JSON.parse(e.data).encryptedVideoKey,i=Ns.utils.utf8.toBytes("72Fhskjglp8qjpqx"),n=new Ns.ModeOfOperation.ecb(i),s=[],l=0;l<o.length;l+=2)s.push(parseInt(o[l]+o[l+1],16));for(var i=n.decrypt(s),u=Ns.utils.utf8.fromBytes(i),n=new ArrayBuffer(u.length),c=new Uint8Array(n),h=(l=0,u.length);l<h;l++)c[l]=u.charCodeAt(l);a.decryptdata.key=c}else a.decryptdata.key=r.decryptdata.key=new Uint8Array(e.data);r.keyLoader=null,a.loader=null,d({frag:r,keyInfo:a})},onError:function(e,t,n,i){p.resetLoader(t),f(p.createKeyLoadError(a,ne.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),n,m({url:r.url,data:void 0},e)))},onTimeout:function(e,t,n){p.resetLoader(t),f(p.createKeyLoadError(a,ne.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n))},onAbort:function(e,t,n){p.resetLoader(t),f(p.createKeyLoadError(a,ne.INTERNAL_ABORTED,new Error("key loading aborted"),n))}})})},p.resetLoader=function(e){var t=e.frag,n=e.keyInfo,e=e.url,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[e],i&&i.destroy()},Bs);function Bs(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}function Us(){return self.SourceBuffer||self.WebKitSourceBuffer}(c=zs.prototype).destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},c.poll=function(e,t){var n=this.config,i=this.media,r=this.stalled;if(null!==i){var a=i.currentTime,o=i.seeking,s=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a===e){if(l||s)this.stalled=null;else if(!(i.paused&&!o||i.ended||0===i.playbackRate)&&y.getBuffered(i).length){e=y.bufferInfo(i,a,0),l=0<e.len,s=e.nextStart||0;if(l||s){if(o){l=2<e.len,t=!s||t&&t.start<=a||2<s-a&&!this.fragmentTracker.getPartialFragment(a);if(l||t)return;this.moved=!1}if(!this.moved&&null!==this.stalled){l=Math.max(s,e.start||0)-a,t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,s=null!=t&&null!=(s=t.details)&&s.live?2*t.details.targetduration:2,t=this.fragmentTracker.getPartialFragment(a);if(0<l&&(l<=s||t))return void(i.paused||this._trySkipBufferHole(t))}l=self.performance.now();null!==r?(s=l-r,!o&&250<=s&&(this._reportStall(e),!this.media)||(t=y.bufferInfo(i,a,n.maxBufferHole),this._tryFixBufferStall(t,s))):this.stalled=l}}}else this.moved=!0,null!==r&&(this.stallReported&&(o=self.performance.now()-r,ie.warn("playback not stuck anymore @"+a+", after "+Math.round(o)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)}},c._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media;null!==r&&(r=r.currentTime,!(i=i.getPartialFragment(r))||!this._trySkipBufferHole(i)&&this.media)&&(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-r<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(ie.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},c._reportStall=function(e){var t=this.hls,n=this.media;!this.stallReported&&n&&(this.stallReported=!0,n=new Error("Playback stalling at @"+n.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),ie.warn(n.message),t.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:e.len}))},c._trySkipBufferHole=function(e){var t=this.config,n=this.hls,i=this.media;if(null!==i){var r=i.currentTime,a=y.bufferInfo(i,r,0),o=r<a.start?a.start:a.nextStart;if(o){var s=a.len<=t.maxBufferHole,a=0<a.len&&a.len<1&&i.readyState<3,l=o-r;if(0<l&&(s||a)){if(l>t.maxBufferHole){var u=this.fragmentTracker,s=!1;if(!(s=0===r&&(a=u.getAppendedFrag(0,_))&&o<a.end?!0:s)){l=e||u.getAppendedFrag(r,_);if(l){for(var c=!1,h=l.end;h<o;){var d=u.getPartialFragment(h);if(!d){c=!0;break}h+=d.duration}if(c)return 0}}}t=Math.max(o+.05,r+.1);return ie.warn("skipping hole, adjusting currentTime from "+r+" to "+t),this.moved=!0,this.stalled=null,i.currentTime=t,e&&!e.gap&&(a=new Error("fragment loaded with buffer holes, seeking from "+r+" to "+t),n.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:a,reason:a.message,frag:e})),t}}}return 0},c._tryNudgeBuffer=function(){var e,t,n=this.config,i=this.hls,r=this.media,a=this.nudgeRetry;null!==r&&(e=r.currentTime,this.nudgeRetry++,a<n.nudgeMaxRetry?(a=e+(a+1)*n.nudgeOffset,t=new Error("Nudging 'currentTime' from "+e+" to "+a),ie.warn(t.message),r.currentTime=a,i.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.BUFFER_NUDGE_ON_STALL,error:t,fatal:!1})):(r=new Error("Playhead still not moving while enough data buffered @"+e+" after "+n.nudgeMaxRetry+" nudges"),ie.error(r.message),i.trigger(ee.ERROR,{type:te.MEDIA_ERROR,details:ne.BUFFER_STALLED_ERROR,error:r,fatal:!0})))};var js,Gs=zs,Vs=(e(Ys,js=In),(a=Ys.prototype)._registerListeners=function(){var e=this.hls;e.on(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ee.LEVEL_LOADING,this.onLevelLoading,this),e.on(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ee.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(ee.ERROR,this.onError,this),e.on(ee.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ee.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(ee.BUFFER_CREATED,this.onBufferCreated,this),e.on(ee.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ee.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ee.FRAG_BUFFERED,this.onFragBuffered,this)},a._unregisterListeners=function(){var e=this.hls;e.off(ee.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ee.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ee.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ee.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ee.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ee.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(ee.ERROR,this.onError,this),e.off(ee.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ee.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(ee.BUFFER_CREATED,this.onBufferCreated,this),e.off(ee.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ee.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ee.FRAG_BUFFERED,this.onFragBuffered,this)},a.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},a.startLoad=function(e){var t,n,i;this.levels?(t=this.lastCurrentTime,n=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.startFragRequested||(-1===(i=n.startLevel)&&(n.config.testBandwidth&&1<this.levels.length?this.bitrateTest=!(i=0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1),0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=h,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this._forceStartLoad=!0,this.state=ai)},a.stopLoad=function(){this._forceStartLoad=!1,js.prototype.stopLoad.call(this)},a.doTick=function(){switch(this.state){case mi:var e=this.levels,t=this.level,t=null==e||null==(e=e[t])?void 0:e.details;if(!t||t.live&&this.levelLastLoaded!==this.level)this.hls.nextLoadLevel!==this.level&&(this.state=h);else{if(this.waitForCdnTuneIn(t))break;this.state=h}break;case li:e=self.performance.now(),t=this.retryDate;(!t||t<=e||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=h)}this.state===h&&this.doTickIdle(),this.onTickEnd()},a.onTickEnd=function(){js.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},a.doTickIdle=function(){var e,t,n=this.hls,i=this.levelLastLoaded,r=this.levels,a=this.media,o=n.config,s=n.nextLoadLevel;null===i||!(a||!this.startFragRequested&&o.startFragPrefetch)||this.altAudio&&this.audioOnly||null==r||!r[s]||(i=r[s],null!==(a=this.getMainFwdBufferInfo())&&((o=this.getLevelDetails())&&this._streamEnded(a,o)?(r={},this.altAudio&&(r.type="video"),this.hls.trigger(ee.BUFFER_EOS,r),this.state=di):(n.loadLevel!==s&&-1===n.manualLevel&&this.log("Adapting to level "+s+" from level "+this.level),this.level=n.nextLoadLevel=s,!(o=i.details)||this.state===mi||o.live&&this.levelLastLoaded!==s?(this.level=s,this.state=mi):(r=a.len,(n=this.getMaxBufferLength(i.maxBitrate))<=r||(this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null),s=this.backtrackFragment?this.backtrackFragment.start:a.end,r=this.getNextFragment(s,o),this.couldBacktrack&&!this.fragPrevious&&r&&"initSegment"!==r.sn&&"OK"!==this.fragmentTracker.getState(r)?(e=(null!=(e=this.backtrackFragment)?e:r).sn-o.startSN,(e=o.fragments[e-1])&&r.cc===e.cc&&this.fragmentTracker.removeFragment(r=e)):this.backtrackFragment&&a.len&&(this.backtrackFragment=null),r&&this.isLoopLoading(r,s)&&(r.gap||(t=((e=this.audioOnly&&!this.altAudio?E:ce)===ce?this.videoBuffer:this.mediaBuffer)||this.media)&&this.afterBufferFlushed(t,e,_),r=this.getNextFragmentLoopLoading(r,o,a,_,n)),r&&(!r.initSegment||r.initSegment.data||this.bitrateTest||(r=r.initSegment),this.loadFragment(r,i,s)))))))},a.loadFragment=function(e,t,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===Cn||i===Ln?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,js.prototype.loadFragment.call(this,e,t,n)):this.clearTrackerIfNeeded(e)},a.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,_)},a.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},a.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},a.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var n=this.getAppendedFrag(t.currentTime),n=(n&&1<n.start&&this.flushMainBuffer(0,n.start-1),this.getLevelDetails());if(null!=n&&n.live){var i=this.getMainFwdBufferInfo();if(!i||i.len<2*n.targetduration)return}e=!t.paused&&e&&(i=e[this.hls.nextLoadLevel],n=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*n)+1:0;i=this.getBufferedFrag(t.currentTime+e);i&&(n=this.followingBufferedFrag(i))&&(this.abortCurrentFrag(),t=n.maxStartPTS||n.start,e=n.duration,n=Math.max(i.end,t+Math.min(Math.max(e-this.config.maxFragLookUpTolerance,.5*e),.75*e)),this.flushMainBuffer(n,Number.POSITIVE_INFINITY))}},a.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case oi:case si:case li:case ci:case hi:this.state=h}this.nextLoadPosition=this.getLoadPosition()},a.flushMainBuffer=function(e,t){js.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},a.onMediaAttached=function(e,t){js.prototype.onMediaAttached.call(this,e,t);e=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),e.addEventListener("playing",this.onvplaying),e.addEventListener("seeked",this.onvseeked),this.gapController=new Gs(this.config,e,this.fragmentTracker,this.hls)},a.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),js.prototype.onMediaDetaching.call(this)},a.onMediaPlaying=function(){this.tick()},a.onMediaSeeked=function(){var e=this.media,e=e?e.currentTime:null,e=(G(e)&&this.log("Media seeked to "+e.toFixed(3)),this.getMainFwdBufferInfo());null!==e&&0!==e.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(e?e.len:"empty")+")")},a.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(ee.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1},a.onManifestParsed=function(e,t){var n,i,r=!1,a=!1;t.levels.forEach(function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5"))&&(a=!0)}),this.audioCodecSwitch=r&&a&&!("function"==typeof(null==(i=Us())||null==(i=i.prototype)?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},a.onLevelLoading=function(e,t){var n=this.levels;n&&this.state===h&&(!(n=n[t.level]).details||n.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(n.details))&&(this.state=mi)},a.onLevelLoaded=function(e,t){var n=this.levels,i=t.level,r=t.details,a=r.totalduration;if(n){this.log("Level "+i+" loaded ["+r.startSN+","+r.endSN+"]"+(r.lastPartSn?"[part-"+r.lastPartSn+"-"+r.lastPartIndex+"]":"")+", cc ["+r.startCC+", "+r.endCC+"] duration:"+a);var a=n[i],n=this.fragCurrent,t=(!n||this.state!==si&&this.state!==li||n.level===t.level&&n.urlId===a.urlId||!n.loader||this.abortCurrentFrag(),0);if(r.live||null!=(n=a.details)&&n.live){if(r.fragments[0]||(r.deltaUpdateFailed=!0),r.deltaUpdateFailed)return;t=this.alignPlaylists(r,a.details)}if(a.details=r,this.levelLastLoaded=i,this.hls.trigger(ee.LEVEL_UPDATED,{details:r,level:i}),this.state===mi){if(this.waitForCdnTuneIn(r))return;this.state=h}this.startFragRequested?r.live&&this.synchronizeToLiveEdge(r):this.setStartPosition(r,t),this.tick()}else this.warn("Levels were reset while loading level "+i)},a._handleFragmentLoadProgress=function(e){var t,n,i,r,a,o,s,l=e.frag,u=e.part,e=e.payload,c=this.levels;c?(t=(c=c[l.level]).details)?(n=c.videoCodec,i=t.PTSKnown||!t.live,r=null==(r=l.initSegment)?void 0:r.data,c=this._getAudioCodec(c),a=this.transmuxer=this.transmuxer||new ra(this.hls,_,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),o=u?u.index:-1,o=new jn(l.level,l.sn,l.stats.chunkCount,e.byteLength,o,-1!==o),s=this.initPTS[l.cc],a.push(e,r,c,n,l,u,t.totalduration,i,o,s)):(this.warn("Dropping fragment "+l.sn+" of level "+l.level+" after level details were reset"),this.fragmentTracker.removeFragment(l)):this.warn("Levels were reset while fragment load was in progress. Fragment "+l.sn+" of level "+l.level+" will not be buffered")},a.onAudioTrackSwitching=function(e,t){var n,i=this.altAudio;t.url||(this.mediaBuffer!==this.media?(this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(n=this.fragCurrent)&&(this.log("Switching to main audio track, cancel main fragment load"),n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.resetLoadingState()):this.audioOnly&&this.resetTransmuxer(),n=this.hls,i&&(n.trigger(ee.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),n.trigger(ee.AUDIO_TRACK_SWITCHED,t))},a.onAudioTrackSwitched=function(e,t){var n,t=t.id,t=!!this.hls.audioTracks[t].url;t&&(n=this.videoBuffer)&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n),this.altAudio=t,this.tick()},a.onBufferCreated=function(e,t){var n,i=t.tracks,r=!1;for(n in i){var a,o,s=i[n];"main"===s.id?(o=s,"video"===(a=n)&&(s=i[n])&&(this.videoBuffer=s.buffer)):r=!0}r&&o?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=o.buffer):this.mediaBuffer=this.media},a.onFragBuffered=function(e,t){var n,i=t.frag,t=t.part;i&&i.type!==_||(this.fragContextChanged(i)?(this.warn("Fragment "+i.sn+(t?" p: "+t.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),this.state===hi&&(this.state=h)):(n=(t||i).stats,this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,t)))},a.onError=function(e,t){var n;if(t.fatal)this.state=fi;else switch(t.details){case ne.FRAG_GAP:case ne.FRAG_PARSING_ERROR:case ne.FRAG_DECRYPT_ERROR:case ne.FRAG_LOAD_ERROR:case ne.FRAG_LOAD_TIMEOUT:case ne.KEY_LOAD_ERROR:case ne.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(_,t);break;case ne.LEVEL_LOAD_ERROR:case ne.LEVEL_LOAD_TIMEOUT:case ne.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==mi||(null==(n=t.context)?void 0:n.type)!==xt||(this.state=h);break;case ne.BUFFER_APPEND_ERROR:case ne.BUFFER_FULL_ERROR:t.parent&&"main"===t.parent&&(t.details===ne.BUFFER_APPEND_ERROR?this.resetLoadingState():this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case ne.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},a.checkBuffer=function(){var e,t=this.media,n=this.gapController;t&&n&&t.readyState&&(!this.loadedmetadata&&y.getBuffered(t).length||(e=this.state!==h?this.fragCurrent:null,n.poll(this.lastCurrentTime,e)),this.lastCurrentTime=t.currentTime)},a.onFragLoadEmergencyAborted=function(){this.state=h,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},a.onBufferFlushed=function(e,t){var n,t=t.type;(t!==E||this.audioOnly&&!this.altAudio)&&(n=(t===ce?this.videoBuffer:this.mediaBuffer)||this.media,this.afterBufferFlushed(n,t,_),this.tick())},a.onLevelsUpdated=function(e,t){this.levels=t.levels},a.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},a.seekToStartPos=function(){var e,t,n,i=this.media;i&&(e=i.currentTime,0<=(t=this.startPosition))&&e<t&&(i.seeking?this.log("could not seek to "+t+", already seeking at "+e):(0<(n=((n=y.getBuffered(i)).length?n.start(0):0)-t)&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),this.startPosition=t+=n),this.log("seek to target start position "+t+" from current time "+e),i.currentTime=t))},a._getAudioCodec=function(e){e=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},a._loadBitrateTestFrag=function(i,r){var a=this;i.bitrateTest=!0,this._doFragLoad(i,r).then(function(e){var t,n=a.hls;e&&!a.fragContextChanged(i)&&(r.fragmentError=0,a.state=h,a.startFragRequested=!1,a.bitrateTest=!1,(t=i.stats).parsing.start=t.parsing.end=t.buffering.start=t.buffering.end=self.performance.now(),n.trigger(ee.FRAG_LOADED,e),i.bitrateTest=!1)})},a._handleTransmuxComplete=function(e){var t="main",n=this.hls,i=e.remuxResult,e=e.chunkMeta,r=this.getCurrentContext(e);if(r){var a=r.frag,o=r.part,r=r.level,s=i.video,l=i.text,u=i.id3,c=i.initSegment,h=r.details,d=this.altAudio?void 0:i.audio;if(this.fragContextChanged(a))this.fragmentTracker.removeFragment(a);else{if(this.state=ci,c&&(null!=c&&c.tracks&&(f=a.initSegment||a,this._bufferInitSegment(r,c.tracks,f,e),n.trigger(ee.FRAG_PARSING_INIT_SEGMENT,{frag:f,id:t,tracks:c.tracks})),r=c.initPTS,f=c.timescale,G(r))&&(this.initPTS[a.cc]={baseTime:r,timescale:f},n.trigger(ee.INIT_PTS_FOUND,{frag:a,id:t,initPTS:r,timescale:f})),s&&h&&"initSegment"!==a.sn){var c=h.fragments[a.sn-1-h.startSN],r=a.sn===h.startSN,f=!c||a.cc>c.cc;if(!1!==i.independent){var c=s.startPTS,i=s.endPTS,p=s.startDTS,m=s.endDTS;if(o)o.elementaryStreams[s.type]={startPTS:c,endPTS:i,startDTS:p,endDTS:m};else if(s.firstKeyFrame&&s.independent&&1===e.id&&!f&&(this.couldBacktrack=!0),s.dropped&&s.independent){var g=this.getMainFwdBufferInfo(),g=(g?g.end:this.getLoadPosition())+this.config.maxBufferHole,_=s.firstKeyFramePTS||c;if(!r&&g<_-this.config.maxBufferHole&&!f)return void this.backtrack(a);f&&(a.gap=!0),a.setElementaryStreamInfo(s.type,a.start,i,a.start,m,!0)}a.setElementaryStreamInfo(s.type,c,i,p,m),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(s,a,o,e,r||f)}else{if(!r&&!f)return void this.backtrack(a);a.gap=!0}}d&&(g=d.startPTS,_=d.endPTS,c=d.startDTS,i=d.endDTS,o&&(o.elementaryStreams[E]={startPTS:g,endPTS:_,startDTS:c,endDTS:i}),a.setElementaryStreamInfo(E,g,_,c,i),this.bufferFragmentData(d,a,o,e)),h&&null!=u&&null!=(p=u.samples)&&p.length&&(m={id:t,frag:a,details:h,samples:u.samples},n.trigger(ee.FRAG_PARSING_METADATA,m)),h&&l&&(s={id:t,frag:a,details:h,samples:l.samples},n.trigger(ee.FRAG_PARSING_USERDATA,s))}}else this.resetWhenMissingContext(e)},a._bufferInitSegment=function(e,n,i,r){var t,a,o,s,l,u=this;this.state===ci&&(this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&delete n.audio,t=n.audio,a=n.video,o=n.audiovideo,t&&(s=e.audioCodec,l=navigator.userAgent.toLowerCase(),(s=this.audioCodecSwitch&&(s=s&&(-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==t.metadata.channelCount)&&-1===l.indexOf("firefox")?"mp4a.40.5":s)&&-1!==s.indexOf("mp4a.40.5")&&-1!==l.indexOf("android")&&"audio/mpeg"!==t.container&&this.log("Android: force audio codec to "+(s="mp4a.40.2")),e.audioCodec&&e.audioCodec!==s&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+s+'"'),t.levelCodec=s,t.id="main",this.log("Init audio buffer, container:"+t.container+", codecs[selected/level/parsed]=["+(s||"")+"/"+(e.audioCodec||"")+"/"+t.codec+"]")),a&&(a.levelCodec=e.videoCodec,a.id="main",this.log("Init video buffer, container:"+a.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+a.codec+"]")),o&&this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+o.codec+"]"),this.hls.trigger(ee.BUFFER_CODECS,n),Object.keys(n).forEach(function(e){var t=n[e].initSegment;null!=t&&t.byteLength&&u.hls.trigger(ee.BUFFER_APPENDING,{type:e,data:t,frag:i,part:null,chunkMeta:r,parent:i.type})}),this.tickImmediate())},a.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer||this.media,_)},a.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=h},a.checkFragmentChanged=function(){var e,t=this.media,n=null;t&&1<t.readyState&&!1===t.seeking&&(e=t.currentTime,y.isBuffered(t,e)?n=this.getAppendedFrag(e):y.isBuffered(t,e+.1)&&(n=this.getAppendedFrag(e+.1)),n)&&(this.backtrackFragment=null,t=this.fragPlaying,e=n.level,t&&n.sn===t.sn&&t.level===e&&n.urlId===t.urlId||(this.fragPlaying=n,this.hls.trigger(ee.FRAG_CHANGED,{frag:n}),t&&t.level===e)||this.hls.trigger(ee.LEVEL_SWITCHED,{level:e}))},r(Ys,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var e=e.currentTime,t=this.currentFrag;if(t&&G(e)&&G(t.programDateTime))return e=t.programDateTime+1e3*(e-t.start),new Date(e)}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),Ys),Qi=(Hs.isSupported=function(){return!!(t=ft())&&(e=Us(),t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove,!!t)&&!!e;var e,t},(u=Hs.prototype).createController=function(e,t){return e?(e=new e(this),t&&t.push(e),e):null},u.on=function(e,t,n){this._emitter.on(e,t,n=void 0===n?this:n)},u.once=function(e,t,n){this._emitter.once(e,t,n=void 0===n?this:n)},u.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},u.off=function(e,t,n,i){this._emitter.off(e,t,n=void 0===n?this:n,i)},u.listeners=function(e){return this._emitter.listeners(e)},u.emit=function(e,t,n){return this._emitter.emit(e,t,n)},u.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){var n;ie.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.triggeringException||(this.triggeringException=!0,n=e===ee.ERROR,this.trigger(ee.ERROR,{type:te.OTHER_ERROR,details:ne.INTERNAL_EXCEPTION,fatal:n,event:e,error:t}),this.triggeringException=!1)}return!1},u.listenerCount=function(e){return this._emitter.listenerCount(e)},u.destroy=function(){ie.log("destroy"),this.trigger(ee.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},u.attachMedia=function(e){ie.log("attachMedia"),this._media=e,this.trigger(ee.MEDIA_ATTACHING,{media:e})},u.detachMedia=function(){ie.log("detachMedia"),this.trigger(ee.MEDIA_DETACHING,void 0),this._media=null},u.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,i=this.url=z.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});ie.log("loadSource:"+i),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(ee.MANIFEST_LOADING,{url:e})},u.startLoad=function(t){void 0===t&&(t=-1),ie.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},u.stopLoad=function(){ie.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},u.swapAudioCodec=function(){ie.log("swapAudioCodec"),this.streamController.swapAudioCodec()},u.recoverMediaError=function(){ie.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},u.removeLevel=function(e,t){this.levelController.removeLevel(e,t=void 0===t?0:t)},r(Hs,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){ie.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){ie.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){ie.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){ie.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){ie.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){e=!!e;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(ie.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},set:function(e){this.abrController.resetEstimator(e)}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){-1<tn.indexOf(e)&&(this._maxHdcpLevel=e)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(e)for(var n=e.length,i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping,n=this.maxHdcpLevel,t=-1===t&&e&&e.length?e.length-1:t;if(n)for(var i=t;i--;){var r=e[i].attrs["HDCP-LEVEL"];if(r&&r<=n)return i}return t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){}},{key:"Events",get:function(){return ee}},{key:"ErrorTypes",get:function(){return te}},{key:"ErrorDetails",get:function(){return ne}},{key:"DefaultConfig",get:function(){return Hs.defaultConfig||ts},set:function(e){Hs.defaultConfig=e}}]),Hs);function Hs(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Kr,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,X(e.debug||!1,"Hls instance");var t=this.config=function(e,l){if((l.liveSyncDurationCount||l.liveMaxLatencyDurationCount)&&(l.liveSyncDuration||l.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==l.liveMaxLatencyDurationCount&&(void 0===l.liveSyncDurationCount||l.liveMaxLatencyDurationCount<=l.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==l.liveMaxLatencyDuration&&(void 0===l.liveSyncDuration||l.liveMaxLatencyDuration<=l.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var u=is(e),t=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(function(r){var a=("level"===r?"playlist":r)+"LoadPolicy",o=void 0===l[a],s=[];t.forEach(function(e){var t=r+"Loading"+e,n=l[t];if(void 0!==n&&o){s.push(t);var i=u[a].default;switch(l[a]={default:i},e){case"TimeOut":i.maxLoadTimeMs=n,i.maxTimeToFirstByteMs=n;break;case"MaxRetry":i.errorRetry.maxNumRetry=n,i.timeoutRetry.maxNumRetry=n;break;case"RetryDelay":i.errorRetry.retryDelayMs=n,i.timeoutRetry.retryDelayMs=n;break;case"MaxRetryTimeout":i.errorRetry.maxRetryDelayMs=n,i.timeoutRetry.maxRetryDelayMs=n}}}),s.length&&ie.warn('hls.js config: "'+s.join('", "')+'" setting(s) are deprecated, use "'+a+'": '+JSON.stringify(l[a]))}),m(m({},u),l)}(Hs.DefaultConfig,e),n=(this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&((n=(e=t).loader)!==Ko&&n!==zo?(ie.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),1}catch(e){}}()&&(e.loader=Ko,e.progressive=!0,e.enableSoftwareAES=!0,ie.log("[config]: Progressive streaming enabled, using FetchLoader"))),t.abrController),e=t.bufferController,i=t.capLevelController,r=t.errorController,a=t.fpsController,r=new r(this),o=this.abrController=new n(this),e=this.bufferController=new e(this),i=this.capLevelController=new i(this),a=new a(this),s=new Vt(this),l=new $t(this),u=t.contentSteeringController,u=u?new u(this):null,c=this.levelController=new as(this,u),h=new Pn(this),d=new Fs(this.config),f=this.streamController=new Vs(this,h,d),s=(i.setStreamController(f),a.setStreamController(f),[s,c,f]),c=(u&&s.splice(1,0,u),this.networkControllers=s,[o,e,i,a,l,h]),f=(this.audioTrackController=this.createController(t.audioTrackController,s),t.audioStreamController),u=(f&&s.push(new f(this,h,d)),this.subtitleTrackController=this.createController(t.subtitleTrackController,s),t.subtitleStreamController),o=(u&&s.push(new u(this,h,d)),this.createController(t.timelineController,c),d.emeController=this.emeController=this.createController(t.emeController,c),this.cmcdController=this.createController(t.cmcdController,c),this.latencyController=this.createController(en,c),this.coreComponents=c,s.push(r),r.onErrorOut);"function"==typeof o&&this.on(ee.ERROR,o,r)}function Ys(e,t,n){return(e=js.call(this,e,t,n,"[stream-controller]",_)||this).audioCodecSwap=!1,e.gapController=null,e.level=-1,e._forceStartLoad=!1,e.altAudio=!1,e.audioOnly=!1,e.fragPlaying=null,e.onvplaying=null,e.onvseeked=null,e.fragLastKbps=0,e.couldBacktrack=!1,e.backtrackFragment=null,e.audioCodecSwitch=!1,e.videoBuffer=null,e._registerListeners(),e}function zs(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}return Qi.defaultConfig=void 0,Qi}()}(!1)},function(e,t,n){"use strict";n.r(t),n.d(t,"NvFlvjsCore",function(){return i});var o=n(4),s=n(23);const l=n(5);n(29);var u=n(167);const c=n(12);var i=class{constructor(e){this.configFormat={width:e.width||l.DEFAULT_WIDTH,height:e.height||l.DEFAULT_HEIGHT,playerId:e.playerId||l.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,duration:e.duration,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,audioNone:e.audioNone},this.audioVoice=1,this.onlyDemux=e.onlyDemux||!1,this.myPlayerID=this.configFormat.playerId+"-flv-hevc",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.vCodecID=l.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1,this.checkStartIntervalCount=0,this.checkStartInterval=null,this.checkPicBlockInterval=null,this.bufferInterval=null,this.onPlayState=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onCacheProcess=null,this.isReBuildTime=3,this.onError=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.headers=e.headers,this.seekStartTime=0,this.videoCodec=l.CODEC_H264,this.onMediaInfo=null,this.DemuxeVideoData=[],this.DemuxeAudioData=[],this.demuexTimer=null,this.videoParseIndex=-1,this.audioParseIndex=-1,this.videoSeekInfo=null,this.isLimitDownloads=!1,this.keyList=[],this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}_reBuildFlvjs(e,t){0==this.isReBuildTime?(this.onError&&this.onError({msg:o.ErrorDetails.RECONNECT_ERROR_DETAIL,event:o.ErrorEvent.TIMEOUT,url:e,errorType:o.ErrorTypes.NETWORK_ERROR}),this.release()):(this._releaseFlvjs(),this.makeIt(e,t))}_checkPicBlock(e){let t=this;this.checkPicBlockInterval=window.setInterval(function(){0<t.lastDecodedFrameTime&&1e4<c.GetMsTime()-t.lastDecodedFrameTime&&t.isPlayingState()&&(window.clearInterval(t.checkPicBlockInterval),t.checkPicBlockInterval=null,t._reBuildFlvjs(e))},1e3)}_checkLoadState(e){let t=this;this.checkStartIntervalCount=0,this.isReBuildTime--,this.checkStartInterval=window.setInterval(function(){!1!==t.isInitDecodeFrames?(t.checkStartIntervalCount=0,window.clearInterval(t.checkStartInterval),t.checkStartInterval=null):(t.checkStartIntervalCount+=1,20<t.checkStartIntervalCount&&(window.clearInterval(t.checkStartInterval),t.checkStartIntervalCount=0,t.checkStartInterval=null,!1===t.isInitDecodeFrames)&&t._reBuildFlvjs(e))},500)}makeIt(i,e){let r=this;var t,n,a;u.isSupported()?(t=document.querySelector("#"+this.configFormat.playerId),this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",this.onlyDemux||((n=t.getElementsByTagName("video")[0])&&(a=t.getElementsByTagName("div"),this.VRPlugin||t.insertBefore(n,a[0])),!0===this.configFormat.autoPlay&&(window.onclick=document.body.onclick=function(e){r.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.VRPlugin&&!this.VrPlayer&&(this.VrPlayer=new s.a({video:this.videoTag,container:t,autoPlay:this.configFormat.autoPlay},this.VRPlugin)),this.videoTag.onplay=function(){var e=r.isPlayingState();r.onPlayState&&r.onPlayState(e)},this.videoTag.onpause=function(){var e=r.isPlayingState();r.onPlayState&&r.onPlayState(e)},this.videoTag.ontimeupdate=()=>{r.videoTag&&r.onPlayingTime&&r.onPlayingTime(r.videoTag.currentTime)},this.videoTag.onseeked=()=>{0==this.seekStartTime&&this.seekReadyPts&&this.seekReadyPts>this.seekStartTime&&1<=parseInt(this.seekReadyPts-this.videoTag.currentTime)||(this.seekReadyPts=null,this.seekStartTime=null,this.onSeekFinish&&this.onSeekFinish(this.seekResult))}),n={hasVideo:!0,hasAudio:!(!0===this.configFormat.audioNone),type:"flv",url:i,withCredentials:!1},this.options=e||n,this.options=Object.assign(this.options),a=this.headers?{headers:this.headers,onlyDemuxer:this.onlyDemux}:{onlyDemuxer:this.onlyDemux},this.myPlayer=u.createPlayer(this.options,a),this.myPlayer.on(u.Events.MEDIA_INFO,function(e){var t;r.onlyDemux||!1===r.isInitDecodeFrames&&(r.isInitDecodeFrames=!0,r.width=Math.max(r.videoTag.videoWidth,e.width),r.height=Math.max(r.videoTag.videoHeight,e.height),r.duration=r.videoTag.duration||e.duration/1e3,r.videoCodec=e.mimeType&&-1<e.mimeType.indexOf("hvc1")?l.CODEC_H265:l.CODEC_H264,e=document.querySelector("#"+r.configFormat.playerId),setTimeout(()=>{r.VrPlayer&&r.VrPlayer.loadVideo&&r.VrPlayer.loadVideo()},1e3),e.getElementsByTagName("video")[0]||r.VRPlugin||(t=e.getElementsByTagName("div"),e.insertBefore(r.videoTag,t[0])),r.onLoadFinish&&r.onLoadFinish(),r.onReadyShowDone&&r.onReadyShowDone(),r._loopBufferState(),r.videoTag.ontimeupdate=()=>{r.onPlayingTime&&r.onPlayingTime(r.videoTag.currentTime,window.startPts),r.getFrameRate()},r.duration!==1/0&&0<r.duration?r.videoTag.onended=()=>{r.onPlayingFinish&&r.onPlayingFinish()}:r.videoTag.onended=()=>{r._reBuildFlvjs&&r._reBuildFlvjs(r.options.url)})}),this.myPlayer.on(u.Events.STATISTICS_INFO,function(e){var t,n,i;r.onlyDemux||(!1===r.isInitDecodeFrames&&0<r.videoTag.videoWidth&&0<r.videoTag.videoHeight&&(r.isInitDecodeFrames=!0,r.width=r.videoTag.videoWidth,r.height=r.videoTag.videoHeight,r.duration=r.videoTag.duration,(n=(t=document.querySelector("#"+r.configFormat.playerId)).getElementsByTagName("video")[0])||(i=t.getElementsByTagName("div"),r.VRPlugin)||t.insertBefore(n,i[0]),r.onLoadFinish&&r.onLoadFinish(),r.onReadyShowDone&&r.onReadyShowDone(),r._loopBufferState(),r.videoTag.ontimeupdate=()=>{r.onPlayingTime&&r.onPlayingTime(r.videoTag.currentTime)},r.duration!==1/0)&&(r.videoTag.onended=()=>{r.onPlayingFinish&&r.onPlayingFinish()}),r.lastDecodedFrame=e.decodedFrames,r.lastDecodedFrameTime=c.GetMsTime())}),this.myPlayer.on(u.Events.SCRIPTDATA_ARRIVED,function(e){r.onlyDemux&&r.onMediaInfo&&r.onMediaInfo(e.onMetaData)}),this.myPlayer.on(u.Events.METADATA_ARRIVED,function(e){r.onlyDemux||e.width&&(e.audiocodecid||e.audiosize)||e.detectAudio||r.options.hasAudio===e.detectAudio||(e={hasVideo:!0,hasAudio:e.detectAudio,type:"flv",url:r.options.url,withCredentials:!1},r._reBuildFlvjs(r.options.url,e))}),this.myPlayer.on(u.Events.DEMUX_DATA,e=>{var t=e["type"];e.data.pts=e.data.pts/1e3,e.data.dts=e.data.dts/1e3,("video"==t?this.DemuxeVideoData:this.DemuxeAudioData).push(e),"video"===t&&e.data.isKeyframe&&this.keyList.push({pts:e.data.pts,index:this.DemuxeVideoData.length-1}),"video"==t&&this.seekReadyPts&&-1==this.videoParseIndex&&e.data.isKeyframe&&e.data.pts>this.seekReadyPts&&(this.videoParseIndex=this.DemuxeVideoData.length-1,this.videoSeekInfo=this.DemuxeVideoData[this.videoParseIndex].data.pts),"audio"==t&&this.seekReadyPts&&-1==this.audioParseIndex&&this.videoSeekInfo&&e.data.pts>this.videoSeekInfo&&(this.audioParseIndex=this.DemuxeAudioData.length-1)}),this.myPlayer.on(u.Events.ERROR,function(e,t,n){r.onlyDemux||(9===n.code?(r.onError&&r.onError({msg:n,event:e,url:i,errorType:e}),r.release()):r.myPlayer&&r._reBuildFlvjs(i))}),this.myPlayer.attachMediaElement(this.videoTag),this.myPlayer.load(),this.onlyDemux||this._checkLoadState(i)):r.onError&&r.onError({msg:o.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:o.ErrorTypes.NOT_SUPPORT,event:o.ErrorEvent.ERROR,url:i})}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.height}}play(){this.myPlayer.play(),this.lastDecodedFrameTime=c.GetMsTime()}seek(t){var e,n;if(!this.onlyDemux)return this.setVoice(0),-1!=(n=(e=this.videoTag.buffered).length-1)&&e.end(n)<t?(this.seekReadyPts=t.toFixed(2),!1):(this.videoTag.currentTime=t,this.seekReadyPts=Number(t).toFixed(2),this.seekResult=!0);{if(this.videoParseIndex=-1,this.audioParseIndex=-1,0==(this.seekReadyPts=t))return this.audioParseIndex=0,void(this.videoParseIndex=0);const i=this.keyList.find(e=>e.pts>=t);void(i&&(this.videoParseIndex=i.index,this.audioParseIndex=this.DemuxeAudioData.findIndex(e=>e&&e.data&&e.data.pts>=i.pts)))}}pause(){this.myPlayer&&this.myPlayer.pause()}setVoice(e){this.myPlayer.volume=e}isPlayingState(){return!this.videoTag.paused}_loopBufferState(){let n=this;n.duration<=0&&(n.duration=n.videoTag.duration),null!==n.bufferInterval&&(window.clearInterval(n.bufferInterval),n.bufferInterval=null),n.bufferInterval=window.setInterval(function(){if(!n.duration||n.duration<0)window.clearInterval(n.bufferInterval);else{let e=null;if(n.videoTag.buffered){try{e=n.videoTag.buffered.end(n.videoTag.buffered.length-1)}catch(e){}var t;n.onCacheProcess&&n.onCacheProcess(e),n.seekReadyPts&&e>n.seekReadyPts&&(t=n.seek(n.seekReadyPts),n.seekStartTime=null,n.seekResult=t,n.onSeekFinish&&n.onSeekFinish(t),n.seekReadyPts=null),e>=n.duration-.04&&(n.onCacheProcess&&n.onCacheProcess(n.duration),window.clearInterval(n.bufferInterval))}}},200)}_releaseFlvjs(){this.myPlayer&&(this.myPlayer.pause(),this.myPlayer.unload(),this.myPlayer.detachMediaElement(),this.myPlayer.destroy(),this.myPlayer=null),this.videoTag&&(this.videoTag.remove(),this.videoTag=null),null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1}getMediaInfo(){if(!this.myPlayer||!this.myPlayer._mediaInfo||!this.myPlayer._statisticsInfo)return null;var e,t=null,{videoPts:n,audioPts:i}=(this.myPlayer._statisticsInfo.speed&&(t=JSON.parse(JSON.stringify(this.myPlayer._statisticsInfo.speed))),this.getPts()),r={video:{width:"width",height:"height",codec:"videoCodec",frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"flv_live":"flv_vod",demuxStyle:"flv",bitRate:8*t,pts:n},audio:{bitRate:"audioDataRate",sampleRate:"audioSampleRate",codec:this.getAudioCodec(this.myPlayer._mediaInfo.metadata.audiocodecid),pts:i}},a=Object.assign(this.myPlayer._mediaInfo,this.myPlayer._statisticsInfo);for(e in r){var o,s=r[e];for(o in s)a[s[o]]&&(r[e][o]=a[s[o]])}return r}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getAudioCodec(e){return{0:"Linear PCM, platform endian",1:"ADPCM",2:"MP3",3:"Linear PCM, little endian",4:"Nellymoser 16 kHz mono",5:"Nellymoser 8 kHz mono",6:"Nellymoser",7:"G.711 A-law logarithmic PCM",8:"G.711 mu-law logarithmic PCM",9:"reserved",10:"aac",11:"Speex",14:"MP3 8 kHz",15:"Device-specific sound"}[e]}onDemuxeData(e,t){this.getDemuxeData(e,t),this.demuexTimer=setInterval(()=>{this.getDemuxeData(e,t)})}getDemuxeData(e,t){var n,i;this.isLimitDownloads||(n=this.DemuxeVideoData[this.videoParseIndex],i=this.DemuxeAudioData[this.audioParseIndex],n&&(this.videoParseIndex+=1,e(n.data)),i&&(this.audioParseIndex+=1,t(i.data)))}limitDownloads(e){this.isLimitDownloads=e}getPts(){var e=this.myPlayer&&this.myPlayer._transmuxer&&this.myPlayer._transmuxer._controller._remuxer;return{audioPts:e&&e._audioNextPts?e._audioNextPts:0,videoPts:e&&e._videoNextPts?e._videoNextPts:0}}release(){this.VrPlayer&&this.VrPlayer.destroy(),(this.VrPlayer=null)!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this.demuexTimer&&(clearInterval(this.demuexTimer),this.demuexTimer=null),this.DemuxeAudioData=[],this.DemuxeVideoData=[],this._releaseFlvjs(),this.myPlayerID=null,this.videoContaner=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onError=null,this.isReBuildTime=3,window.onclick=document.body.onclick=null}}},function(e,t,n){!function(j){function i(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e].call(t.exports,t,t.exports,i)),t.exports}var n,r;self,e.exports=(n={970:function(e,t,U){
/*!
           * @overview es6-promise - a tiny implementation of Promises/A+.
           * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
           * @license   Licensed under MIT license
           *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
           * @version   v4.2.8+1e68dce6
           */
e.exports=function(){"use strict";function l(e){return"function"==typeof e}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,t=void 0,r=void 0,o=function(e,t){h[i]=e,h[i+1]=t,2===(i+=2)&&(r?r(d):g())};var e="undefined"!=typeof window?window:void 0,a=e||{},a=a.MutationObserver||a.WebKitMutationObserver,s="undefined"==typeof self&&void 0!==j&&"[object process]"==={}.toString.call(j),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(d,1)}}var h=new Array(1e3);function d(){for(var e=0;e<i;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;i=0}var f,p,m,g=void 0;function _(e,t){var n,i=this,r=new this.constructor(E),a=(void 0===r[v]&&k(r),i._state);return a?(n=arguments[a-1],o(function(){return P(a,r,n,i._result)})):C(i,r,e,t),r}function y(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(w(t=new this(E),e),t)}var g=s?function(){return j.nextTick(d)}:a?(p=0,s=new a(d),m=document.createTextNode(""),s.observe(m,{characterData:!0}),function(){m.data=p=++p%2}):u?((f=new MessageChannel).port1.onmessage=d,function(){return f.port2.postMessage(0)}):(void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(d)}:c()}catch(e){return c()}}:c)(),v=Math.random().toString(36).substring(2);function E(){}var A=void 0,b=1,T=2;function N(e,i,r){o(function(t){var n=!1,e=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(r,i,function(e){n||(n=!0,(i!==e?w:R)(t,e))},function(e){n||(n=!0,I(t,e))},t._label);!n&&e&&(n=!0,I(t,e))},e)}function S(e,t,n){var i,r;t.constructor===e.constructor&&n===_&&t.constructor.resolve===y?(i=e,(r=t)._state===b?R(i,r._result):r._state===T?I(i,r._result):C(r,void 0,function(e){return w(i,e)},function(e){return I(i,e)})):void 0!==n&&l(n)?N(e,t,n):R(e,t)}function w(t,e){if(t===e)I(t,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof e,null===e||"object"!=n&&"function"!=n)R(t,e);else{n=void 0;try{n=e.then}catch(e){return void I(t,e)}S(t,e,n)}var n}function F(e){e._onerror&&e._onerror(e._result),L(e)}function R(e,t){e._state===A&&(e._result=t,e._state=b,0!==e._subscribers.length)&&o(L,e)}function I(e,t){e._state===A&&(e._state=T,e._result=t,o(F,e))}function C(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+b]=n,r[a+T]=i,0===a&&e._state&&o(L,e)}function L(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?P(n,i,r,a):r(a);e._subscribers.length=0}}function P(e,t,n,i){var r=l(n),a=void 0,o=void 0,s=!0;if(r){try{a=n(i)}catch(e){s=!1,o=e}if(t===a)return void I(t,new TypeError("A promises callback cannot return that same promise."))}else a=i;t._state===A&&(r&&s?w(t,a):!1===s?I(t,o):e===b?R(t,a):e===T&&I(t,a))}var D=0;function k(e){e[v]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}O.prototype._enumerate=function(e){for(var t=0;this._state===A&&t<e.length;t++)this._eachEntry(e[t],t)},O.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===y){var r,a=void 0,o=void 0,s=!1;try{a=t.then}catch(t){s=!0,o=t}a===_&&t._state!==A?this._settledAt(t._state,e,t._result):"function"!=typeof a?(this._remaining--,this._result[e]=t):n===M?(r=new n(E),s?I(r,o):S(r,t,a),this._willSettleAt(r,e)):this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},O.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===A&&(this._remaining--,e===T?I(i,n):this._result[t]=n),0===this._remaining&&R(i,this._result)},O.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(b,t,e)},function(e){return n._settledAt(T,t,e)})};var B=O;function O(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[v]||k(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||R(this.promise,this._result)):I(this.promise,new Error("Array Methods must be provided an Array"))}x.prototype.catch=function(e){return this.then(null,e)},x.prototype.finally=function(t){var n=this.constructor;return l(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)};var M=x;function x(e){if(this[v]=D++,this._result=this._state=void 0,this._subscribers=[],E!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof x))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,n=e;try{n(function(e){w(t,e)},function(e){I(t,e)})}catch(n){I(t,n)}}}return M.prototype.then=_,M.all=function(e){return new B(this,e).promise},M.race=function(r){var a=this;return n(r)?new a(function(e,t){for(var n=r.length,i=0;i<n;i++)a.resolve(r[i]).then(e,t)}):new a(function(e,t){return t(new TypeError("You must pass an array to race."))})},M.resolve=y,M.reject=function(e){var t=new this(E);return I(t,e),t},M._setScheduler=function(e){r=e},M._setAsap=function(e){o=e},M._asap=o,M.polyfill=function(){var e=void 0;if(void 0!==U.g)e=U.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=M},M.Promise=M}()},393:function(e){"use strict";var t="object"==typeof Reflect?Reflect:null,l=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},n=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(r,a){return new Promise(function(e,t){function n(e){r.removeListener(a,i),t(e)}function i(){"function"==typeof r.removeListener&&r.removeListener("error",n),e([].slice.call(arguments))}p(r,a,i,{once:!0}),"error"!==a&&"function"==typeof r.on&&p(r,"error",n,{once:!0})})},(r.EventEmitter=r).prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var a=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function s(e,t,n,i){var r,a;return u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=o(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function c(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function h(e,t,n){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return f(e,e.length)}}function d(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function p(n,i,r,a){if("function"==typeof n.on)a.once?n.once(i,r):n.on(i,r);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(i,function e(t){a.once&&n.removeEventListener(i,e),r(t)})}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){if((a=0<t.length?t[0]:a)instanceof Error)throw a;i=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw i.context=a,i}var a=r[e];if(void 0===a)return!1;if("function"==typeof a)l(a,this,t);else for(var o=a.length,s=f(a,o),n=0;n<o;++n)l(s[n],this,t);return!0},r.prototype.on=r.prototype.addListener=function(e,t){return s(this,e,t,!1)},r.prototype.prependListener=function(e,t){return s(this,e,t,!0)},r.prototype.once=function(e,t){return u(t),this.on(e,c(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,c(this,e,t)),this},r.prototype.off=r.prototype.removeListener=function(e,t){var n,i,r,a,o;if(u(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{var s=n;var l=r;for(;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(void 0!==(n=this._events))if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},r.prototype.listeners=function(e){return h(this,e,!0)},r.prototype.rawListeners=function(e){return h(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},r.prototype.listenerCount=d,r.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},227:function(e,t,d){function a(n){var i={};function r(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}r.m=n,r.c=i,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw e};var e=r(r.s=ENTRY_MODULE);return e.default||e}var f="[\\.|\\-|\\+|\\w|/|@]+",p="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+f+").*?\\)";function m(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(h,e){var n={main:d.m},i=(e=e||{}).all?{main:Object.keys(n.main)}:function(e){for(var t={main:[h]},n={main:[]},i={main:{}};function(n){return Object.keys(n).reduce(function(e,t){return e||0<n[t].length},!1)}(t);)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a],s=t[o].pop();if(i[o]=i[o]||{},!i[o][s]&&e[o][s]){i[o][s]=!0,n[o]=n[o]||[],n[o].push(s);for(var l=function(e,t,n){var i={},r=(i[n]=[],t.toString());if(t=r.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)){for(var a,t=t[1],o=new RegExp("(\\\\n|\\W)"+m(t)+p,"g");a=o.exec(r);)"dll-reference"!==a[3]&&i[n].push(a[3]);for(o=new RegExp("\\("+m(t)+'\\("(dll-reference\\s('+f+'))"\\)\\)'+p,"g");a=o.exec(r);)e[a[2]]||(i[n].push(a[1]),e[a[2]]=d(a[1]).m),i[a[2]]=i[a[2]]||[],i[a[2]].push(a[4]);for(var s,l=Object.keys(i),u=0;u<l.length;u++)for(var c=0;c<i[l[u]].length;c++)s=i[l[u]][c],isNaN(+s)||(i[l[u]][c]=+i[l[u]][c])}return i}(e,e[o][s],o),u=Object.keys(l),c=0;c<u.length;c++)t[u[c]]=t[u[c]]||[],t[u[c]]=t[u[c]].concat(l[u[c]])}}return n}(n),r="",t=(Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;i[t][e];)e++;i[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i[t].map(function(e){return JSON.stringify(e)+": "+n[t][e].toString()}).join(",")+"});\n"}),r=r+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+i.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"}))(self);",new window.Blob([r],{type:"text/javascript"}));return e.bare||(e=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(t),(t=new window.Worker(e)).objectURL=e),t}},70:function(e,t){"use strict";function n(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}n.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!==this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},n.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},n.prototype.getNearestKeyframe=function(e){var t;return null==this.keyframesIndex?null:(t=this.keyframesIndex,{index:e=this._search(t.times,e),milliseconds:t.times[e],fileposition:t.filepositions[e]})},n.prototype._search=function(e,t){var n,i=0,r=e.length-1,a=0,o=r;for(t<e[0]&&(i=0,a=o+1);a<=o;){if((n=a+Math.floor((o-a)/2))===r||t>=e[n]&&t<e[n+1]){i=n;break}e[n]<t?a=n+1:o=n-1}return i},t.Z=n},779:function(e,t,n){"use strict";n.d(t,{J1:function(){return o},Vn:function(){return a},Wk:function(){return i},Yy:function(){return r}});var i=function(e,t,n,i,r){this.dts=e,this.pts=t,this.duration=n,this.originalDts=i,this.isSyncPoint=r,this.fileposition=null},r=(u.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},u),a=(l.prototype.clear=function(){this._list=[]},l.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},l.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t,n=this._list,i=0,r=n.length-1,a=0,o=r;for(e<n[0].dts&&(i=0,a=o+1);a<=o;){if((t=a+Math.floor((o-a)/2))===r||e>=n[t].dts&&e<n[t+1].dts){i=t;break}n[t].dts<e?a=t+1:o=t-1}return this._list[i]},l),o=(Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),s.prototype.isEmpty=function(){return 0===this._list.length},s.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},s.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var n,i=t.length-1,r=0,a=i,o=0;if(e<t[0].originalBeginDts)return-1;for(;r<=a;){if((n=r+Math.floor((a-r)/2))===i||e>t[n].lastSample.originalDts&&e<t[n+1].originalBeginDts){o=n;break}t[n].originalBeginDts<e?r=n+1:a=n-1}return o},s.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},s.prototype.append=function(e){var t=this._list,n=this._lastAppendLocation,i=0;-1!==n&&n<t.length&&e.originalBeginDts>=t[n].lastSample.originalDts&&(n===t.length-1||n<t.length-1&&e.originalBeginDts<t[n+1].originalBeginDts)?i=n+1:0<t.length&&(i=this._searchNearestSegmentBefore(e.originalBeginDts)+1),this._lastAppendLocation=i,this._list.splice(i,0,e)},s.prototype.getLastSegmentBefore=function(e){e=this._searchNearestSegmentBefore(e);return 0<=e?this._list[e]:null},s.prototype.getLastSampleBefore=function(e){e=this.getLastSegmentBefore(e);return null!=e?e.lastSample:null},s.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&0<t;)n=this._list[--t].syncPoints;return 0<n.length?n[n.length-1]:null},s);function s(e){this._type=e,this._list=[],this._lastAppendLocation=-1}function l(){this._list=[]}function u(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}},131:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var t=n(393),r=n.n(t),P=n(240),D=n(340),i=n(70);function o(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!=(192&i[++t]))return;return 1}}function a(e){for(var t,n=[],i=e,r=0,a=e.length;r<a;){if(i[r]<128)n.push(String.fromCharCode(i[r]));else{if(!(i[r]<192))if(i[r]<224){if(o(i,r,1)&&128<=(t=(31&i[r])<<6|63&i[r+1])){n.push(String.fromCharCode(65535&t)),r+=2;continue}}else if(i[r]<240){if(o(i,r,2)&&2048<=(t=(15&i[r])<<12|(63&i[r+1])<<6|63&i[r+2])&&55296!=(63488&t)){n.push(String.fromCharCode(65535&t)),r+=3;continue}}else if(i[r]<248)if(o(i,r,3)&&65536<(t=(7&i[r])<<18|(63&i[r+1])<<12|(63&i[r+2])<<6|63&i[r+3])&&t<1114112){t-=65536,n.push(String.fromCharCode(t>>>10|55296)),n.push(String.fromCharCode(1023&t|56320)),r+=4;continue}n.push(String.fromCharCode(65533))}++r}return n.join("")}var _=n(996),y=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),s=(v.parseScriptData=function(e,t,n){var i={};try{var r=v.parseValue(e,t,n),a=v.parseValue(e,t+r.size,n-r.size);i[r.data]=a.data}catch(e){P.Z.e("AMF",e.toString())}return i},v.parseObject=function(e,t,n){if(n<3)throw new _.rT("Data not enough when parse ScriptDataObject");var i=v.parseString(e,t,n),e=v.parseValue(e,t+i.size,n-i.size),t=e.objectEnd;return{data:{name:i.data,value:e.data},size:i.size+e.size,objectEnd:t}},v.parseVariable=function(e,t,n){return v.parseObject(e,t,n)},v.parseString=function(e,t,n){if(n<2)throw new _.rT("Data not enough when parse String");n=new DataView(e,t,n).getUint16(0,!y);return{data:0<n?a(new Uint8Array(e,t+2,n)):"",size:2+n}},v.parseLongString=function(e,t,n){if(n<4)throw new _.rT("Data not enough when parse LongString");n=new DataView(e,t,n).getUint32(0,!y);return{data:0<n?a(new Uint8Array(e,t+4,n)):"",size:4+n}},v.parseDate=function(e,t,n){if(n<10)throw new _.rT("Data size invalid when parse Date");e=new DataView(e,t,n),t=e.getFloat64(0,!y),n=e.getInt16(8,!y);return{data:new Date(t+=60*n*1e3),size:10}},v.parseValue=function(e,t,n){if(n<1)throw new _.rT("Data not enough when parse Value");var i=new DataView(e,t,n),r=1,a=i.getUint8(0),o=!1;try{switch(a){case 0:l=i.getFloat64(1,!y),r+=8;break;case 1:l=!!i.getUint8(1),r+=1;break;case 2:var s=v.parseString(e,t+1,n-1),l=s.data;r+=s.size;break;case 3:l={};var u=0;for(9==(16777215&i.getUint32(n-4,!y))&&(u=3);r<n-4;){var c=v.parseObject(e,t+r,n-r-u);if(c.objectEnd)break;l[c.data.name]=c.data.value,r+=c.size}r<=n-3&&9==(16777215&i.getUint32(r-1,!y))&&(r+=3);break;case 8:for(l={},r+=4,u=0,9==(16777215&i.getUint32(n-4,!y))&&(u=3);r<n-8;){var h=v.parseVariable(e,t+r,n-r-u);if(h.objectEnd)break;l[h.data.name]=h.data.value,r+=h.size}r<=n-3&&9==(16777215&i.getUint32(r-1,!y))&&(r+=3);break;case 9:r=1,o=!(l=void 0);break;case 10:l=[];var d=i.getUint32(1,!y);r+=4;for(var f=0;f<d;f++){var p=v.parseValue(e,t+r,n-r);l.push(p.data),r+=p.size}break;case 11:var m=v.parseDate(e,t+1,n-1);l=m.data,r+=m.size;break;case 12:var g=v.parseString(e,t+1,n-1);l=g.data,r+=g.size;break;default:r=n,P.Z.w("AMF","Unsupported AMF value type "+a)}}catch(e){P.Z.e("AMF",e.toString())}return{data:l,size:r,objectEnd:o}},v),R=(u.prototype.destroy=function(){this._buffer=null},u.prototype._fillCurrentWord=function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new _.rT("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,e),t=new Uint8Array(4);t.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(t.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e},u.prototype.readBits=function(e){if(32<e)throw new _.OC("ExpGolomb: readBits() bits exceeded max 32bits!");var t,n;return e<=this._current_word_bits_left?(t=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t):(t=this._current_word_bits_left?this._current_word:0,t>>>=32-this._current_word_bits_left,e=e-this._current_word_bits_left,this._fillCurrentWord(),e=Math.min(e,this._current_word_bits_left),n=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t<<e|n)},u.prototype.readBool=function(){return 1===this.readBits(1)},u.prototype.readByte=function(){return this.readBits(8)},u.prototype._skipLeadingZero=function(){for(var e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},u.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},u.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},u),A=(I._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},I.parseSPS=function(e){var e=I._ebsp2rbsp(e),t=new R(e),e=(t.readByte(),t.readByte()),n=(t.readByte(),t.readByte()),i=(t.readUEG(),I.getProfileString(e)),n=I.getLevelString(n),r=1,a=420,o=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(3===(r=t.readUEG())&&t.readBits(1),r<=3&&(a=[0,420,422,444][r]),o=t.readUEG()+8,t.readUEG(),t.readBits(1),t.readBool()))for(var s=3!==r?8:12,l=0;l<s;l++)t.readBool()&&I._skipScalingList(t,l<6?16:64);t.readUEG();e=t.readUEG();if(0===e)t.readUEG();else if(1===e){t.readBits(1),t.readSEG(),t.readSEG();for(var u=t.readUEG(),l=0;l<u;l++)t.readSEG()}var e=t.readUEG(),c=(t.readBits(1),t.readUEG()),h=t.readUEG(),d=t.readBits(1),f=(0===d&&t.readBits(1),t.readBits(1),0),p=0,m=0,g=0,_=(t.readBool()&&(f=t.readUEG(),p=t.readUEG(),m=t.readUEG(),g=t.readUEG()),1),y=1,v=0,E=!0,A=0,b=0,T=(t.readBool()&&(t.readBool()&&(0<(S=t.readByte())&&S<16?(_=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][S-1],y=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][S-1]):255===S&&(_=t.readByte()<<8|t.readByte(),y=t.readByte()<<8|t.readByte())),t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(4),t.readBool())&&t.readBits(24),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool())&&(S=t.readBits(32),T=t.readBits(32),E=t.readBool(),v=(A=T)/(b=2*S)),1),S=(1===_&&1===y||(T=_/y),0),w=0,w=0===r?(S=1,2-d):(S=3===r?1:2,(1===r?2:1)*(2-d)),r=16*(c+1),c=16*(h+1)*(2-d),h=(r-=(f+p)*S,c-=(m+g)*w,Math.ceil(r*T));return t.destroy(),t=null,{profile_string:i,level_string:n,bit_depth:o,ref_frames:e,chroma_format:a,chroma_format_string:I.getChromaFormatString(a),frame_rate:{fixed:E,fps:v,fps_den:b,fps_num:A},sar_ratio:{width:_,height:y},codec_size:{width:r,height:c},present_size:{width:h,height:c}}},I._skipScalingList=function(e,t){for(var n=8,i=8,r=0;r<t;r++)n=0===(i=0!==i?(n+e.readSEG()+256)%256:i)?n:i},I.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},I.getLevelString=function(e){return(e/10).toFixed(1)},I.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},I),S=(T.parseSPS=function(e){var e=A._ebsp2rbsp(e),t=new R(e),e={},n=(t.readBits(16),t.readBits(4),t.readBits(3)),i=(t.readBits(1),T._hvcc_parse_ptl(t,e,n),t.readUEG(),0),r=t.readUEG(),a=(3==r&&(i=t.readBits(1)),e.sar_width=e.sar_height=1,e.conf_win_left_offset=e.conf_win_right_offset=e.conf_win_top_offset=e.conf_win_bottom_offset=0,e.def_disp_win_left_offset=e.def_disp_win_right_offset=e.def_disp_win_top_offset=e.def_disp_win_bottom_offset=0,t.readUEG()),o=t.readUEG(),s=(t.readBits(1)&&(e.conf_win_left_offset=t.readUEG(),e.conf_win_right_offset=t.readUEG(),e.conf_win_top_offset=t.readUEG(),e.conf_win_bottom_offset=t.readUEG(),1===e.default_display_window_flag)&&(e.conf_win_left_offset,e.def_disp_win_left_offset,e.conf_win_right_offset,e.def_disp_win_right_offset,e.conf_win_top_offset,e.def_disp_win_top_offset,e.conf_win_bottom_offset,e.def_disp_win_bottom_offset),t.readUEG()+8);t.readUEG();for(var l=t.readUEG(),u=t.readBits(1)?0:n;u<=n;u++)T._skip_sub_layer_ordering_info(t);t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBits(1)&&t.readBits(1)&&T._skip_scaling_list_data(t),t.readBits(1),t.readBits(1),t.readBits(1)&&(t.readBits(4),t.readBits(4),t.readUEG(),t.readUEG(),t.readBits(1));var c=[],h=t.readUEG();for(u=0;u<h;u++){var d=T._parse_rps(t,u,h,c);if(d<0)return d}if(t.readBits(1))for(var f=t.readUEG(),u=0;u<f;u++){var p=Math.min(l+4,16);if(32<p){for(var m=p/32,g=p%32,_=0;_<m;_++)t.readBits(32);t.readBits(g)}else t.readBits(p);t.readBits(1)}t.readBits(1),t.readBits(1),t.readBits(1)&&T._hvcc_parse_vui(t,e,n);var y=T.getProfileString(e.profile_idc),v=T.getLevelString(e.level_idc),E=1,i=(1===e.sar_width&&1===e.sar_height||(E=e.sar_width/e.sar_height),a-=(1!==r&&2!=r||0!==i?1:2)*(e.conf_win_left_offset+e.conf_win_right_offset),o-=(1===r&&0===i?2:1)*(e.conf_win_top_offset+e.conf_win_bottom_offset),Math.ceil(a*E));return t.destroy(),t=null,{profile_string:y,level_string:v,profile_idc:e.profile_idc,level_idc:e.level_idc,bit_depth:s,ref_frames:1,chroma_format:r,chroma_format_string:T.getChromaFormatString(r),frame_rate:{fixed:e.fps_fixed,fps:e.fps,fps_den:e.fps_den,fps_num:e.fps_num},sar_ratio:{width:e.sar_width,height:e.sar_height},codec_size:{width:a,height:o},present_size:{width:i,height:o}}},T._hvcc_parse_ptl=function(e,t,n){e.readBits(2);var i=e.readBits(1),r=e.readBits(5),a=(e.readBits(32),e.readBits(32),e.readBits(16),e.readByte());void 0===t.tier_flag||void 0===t.level_idc||t.tier_flag<i?t.level_idc=a:t.level_idc=Math.max(t.level_idc,a),t.profile_idc=Math.max(void 0===t.profile_idc?0:t.profile_idc,r);for(var o=[],s=[],l=0;l<n;l++)o.push(e.readBits(1)),s.push(e.readBits(1));if(0<n)for(l=n;l<8;l++)e.readBits(2);for(l=0;l<n;l++)o[l]&&(e.readBits(32),e.readBits(32),e.readBits(24)),s[l]&&e.readByte()},T._parse_rps=function(e,t,n,i){if(t&&e.readBits(1)){if(n<=t)return-1;e.readBits(1),e.readUEG();for(var r=i[t]=0;r<=i[t-1];r++){var a=0,o=e.readBits(1);o||(a=e.readBits(1)),(o||a)&&i[t]++}}else{var s=e.readUEG(),l=e.readUEG();for(i[t]=s+l,r=0;r<s;r++)e.readUEG(),e.readBits(1);for(r=0;r<l;r++)e.readUEG(),e.readBits(1)}return 0},T._hvcc_parse_vui=function(e,t,n){e.readBits(1)&&255==e.readByte()&&(t.sar_width=e.readBits(16),t.sar_height=e.readBits(16)),e.readBits(1)&&e.readBits(1),e.readBits(1)&&(e.readBits(4),e.readBits(1))&&e.readBits(24),e.readBits(1)&&(e.readUEG(),e.readUEG()),e.readBits(3),t.default_display_window_flag=e.readBits(1),t.default_display_window_flag&&(t.def_disp_win_left_offset=e.readUEG(),t.def_disp_win_right_offset=e.readUEG(),t.def_disp_win_top_offset=e.readUEG(),t.def_disp_win_bottom_offset=e.readUEG()),e.readBits(1)&&(T._skip_timing_info(e,t),e.readBits(1))&&T._skip_hrd_parameters(e,t,1,n),e.readBits(1)&&(e.readBits(3),e.readUEG(),e.readUEG(),e.readUEG(),e.readUEG(),e.readUEG())},T._skip_sub_layer_ordering_info=function(e,t){e.readUEG(),e.readUEG(),e.readUEG()},T._skip_scaling_list_data=function(e){for(var t=0;t<4;t++)for(var n=0;n<(3==t?2:6);n++)if(e.readBits(1)){var i=Math.min(64,1<<4+(t<<1));1<t&&e.readSEG();for(var r=0;r<i;r++)e.readSEG()}else e.readUEG()},T._skip_sub_layer_hrd_parameters=function(e,t,n){for(var i=0;i<=t;i++)e.readUEG(),e.readUEG(),n&&(e.readUEG(),e.readUEG()),e.readBits(1)},T._skip_timing_info=function(e,t){t.fps_den=e.readBits(32),t.fps_num=e.readBits(32),0<t.fps_den&&(t.fps=t.fps_num/t.fps_den);var n=0;e.readBits(1)&&0<=(n=e.readUEG())&&(t.fps/=n+1)},T._skip_hrd_parameters=function(e,t,n){var i=0,r=0;t&&(i=e.readBits(1),r=e.readBits(1),i||r)&&((t=e.readBits(1))&&e.readBits(19),e.readByte(),t&&e.readBits(4),e.readBits(15));for(var a=0;a<=n;a++){var o=0,s=0,l=0,u=e.readBits(1);(l=(hvcc.fps_fixed=u)?l:e.readBits(1))?e.readUEG():s=e.readBits(1),s||(o=e.readUEG(e)),i&&T._skip_sub_layer_hrd_parameters(e,o,0),r&&T._skip_sub_layer_hrd_parameters(e,o,0)}},T.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},T.getLevelString=function(e){return(e/30).toFixed(1)},T.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},T),w=n(61),l=(b.parseOBUs=function(e){for(var t=null,n=0;n<e.byteLength;){e[n];var i=(120&e[n])>>3,r=0!=(4&e[n]),a=0!=(2&e[n]),o=(e[n],n+=1,r&&(n+=1),Number.POSITIVE_INFINITY);if(a)for(var o=0,s=0;o|=(127&e[n])<<7*s,0!=(128&e[n+=1]);s++);1==i&&(t=b.parseSeuqneceHeader(e.subarray(n,n+o))),n+=o}return t},b.parseSeuqneceHeader=function(e){var t=new R(e),e=t.readBits(3),n=(t.readBool(),t.readBool()),i=!0,r=0,a=0,o=[];if(n)o.push({operating_point_idc:0,level:t.readBits(5),tier:0});else{if(t.readBool()){var s=t.readBits(32),l=t.readBits(32),u=t.readBool();if(u){for(var c=0;0===t.readBits(1);)c+=1;32<=c||t.readBits(c)}r=l,a=s,i=u,t.readBool()&&(t.readBits(5),t.readBits(32),t.readBits(5),t.readBits(5))}for(var h=t.readBool(),d=t.readBits(5),f=0;f<=d;f++){var p=t.readBits(12),m=t.readBits(5),g=7<m?t.readBits(1):0;o.push({operating_point_idc:p,level:m,tier:g}),!h||t.readBool()&&t.readBits(4)}}var l=o[0],s=l.level,u=l.tier,l=t.readBits(4),_=t.readBits(4),l=t.readBits(l+1)+1,_=t.readBits(_+1)+1,y=!1,n=((y=n?y:t.readBool())&&(t.readBits(4),t.readBits(4)),t.readBool(),t.readBool(),t.readBool(),n||(t.readBool(),t.readBool(),t.readBool(),t.readBool(),(y=t.readBool())&&(t.readBool(),t.readBool()),!t.readBool()&&!t.readBits(1)||t.readBool()||t.readBits(1),y&&t.readBits(3)),t.readBool(),t.readBool(),t.readBool(),t.readBool()),y=8,y=2===e&&n?t.readBool()?12:10:n?10:8,n=!1,v=(1!==e&&(n=t.readBool()),t.readBool()&&(t.readBits(8),t.readBits(8),t.readBits(8)),1),E=1;return n?(t.readBits(1),E=v=1):(t.readBits(1),0==e?E=v=1:1==e?E=v=0:12==y?t.readBits(1)&&t.readBits(1):(v=1,E=0),v&&E&&t.readBits(2),t.readBits(1)),t.readBool(),t.destroy(),t=null,{codec_mimetype:"av01.".concat(e,".").concat(b.getLevelString(s,u),".").concat(y.toString(10).padStart(2,"0")),level:s,tier:u,level_string:b.getLevelString(s,u),profile_idc:e,profile_string:"".concat(e),bit_depth:y,ref_frames:1,chroma_format:b.getChromaFormat(n,v,E),chroma_format_string:b.getChromaFormatString(n,v,E),frame_rate:{fixed:i,fps:r/a,fps_den:a,fps_num:r},sar_ratio:{width:1,height:1},codec_size:{width:l,height:_},present_size:{width:+l,height:_}}},b.getLevelString=function(e,t){return"".concat(e.toString(10).padStart(2,"0")).concat(0===t?"M":"H")},b.getChromaFormat=function(e,t,n){return e?0:0===t&&0===n?3:1===t&&0===n?2:1===t&&1===n?1:Number.NaN},b.getChromaFormatString=function(e,t,n){return e?"4:0:0":0===t&&0===n?"4:4:4":1===t&&0===n?"4:2:2":1===t&&1===n?"4:2:0":"Unknown"},b);function b(){}function T(){}function I(){}function u(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function v(){}d.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},d.probe=function(e){var t,n,e=new Uint8Array(e),i={match:!1};return e.byteLength<4||70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3]||(t=(4&e[4])>>>2!=0,n=0!=(1&e[4]),(e=e[5]<<24|e[6]<<16|e[7]<<8|e[8])<9)?i:{match:!0,consumed:e,dataOffset:e,hasAudioTrack:t,hasVideoTrack:n}},d.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(d.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDemuxData",{get:function(){return this._onDemuxData},set:function(e){this._onDemuxData=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),d.prototype.resetMediaInfo=function(){this._mediaInfo=new i.Z},d.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},d.prototype.parseChunks=function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new _.rT("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0,i=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;n=d.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+n!==this._dataOffset&&P.Z.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(r=new DataView(e,n)).getUint32(0,!i)&&P.Z.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4);n<e.byteLength;){this._dispatch=!0;var r=new DataView(e,n);if(n+11+4>e.byteLength)break;var a=r.getUint8(0),o=16777215&r.getUint32(0,!i);if(n+11+o+4>e.byteLength)break;if(8===a||9===a||18===a){var s=r.getUint8(4),l=r.getUint8(5),u=r.getUint8(6)|l<<8|s<<16|r.getUint8(7)<<24,c=(0!=(16777215&r.getUint32(7,!i))&&P.Z.w(this.TAG,"Meet tag which has StreamID != 0!"),n+11);switch(a){case 8:this._parseAudioData(e,c,o,u);break;case 9:this._parseVideoData(e,c,o,u,t+n);break;case 18:this._parseScriptData(e,c,o)}l=r.getUint32(11+o,!i);l!==11+o&&P.Z.w(this.TAG,"Invalid PrevTagSize ".concat(l))}else P.Z.w(this.TAG,"Unsupported tag type ".concat(a,", skipped"));n+=11+o+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),n},d.prototype._parseScriptData=function(e,t,n){e=s.parseScriptData(e,t,n);if(e.hasOwnProperty("onMetaData")){if(null==e.onMetaData||"object"!=typeof e.onMetaData)return void P.Z.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&P.Z.w(this.TAG,"Found another onMetaData tag!"),this._metadata=e;var i,t=this._metadata.onMetaData;this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},t)),"boolean"==typeof t.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=t.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"false"===t.detectAudio&&(this._hasAudioFlagOverrided=!1,this._hasAudio=!1,this._mediaInfo.hasAudio=!1),"boolean"==typeof t.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=t.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof t.audiodatarate&&(this._mediaInfo.audioDataRate=t.audiodatarate),"number"==typeof t.videodatarate&&(this._mediaInfo.videoDataRate=t.videodatarate),"number"==typeof t.width&&(this._mediaInfo.width=t.width),"number"==typeof t.height&&(this._mediaInfo.height=t.height),"number"==typeof t.duration?this._durationOverrided||(n=Math.floor(t.duration*this._timescale),this._duration=n,this._mediaInfo.duration=n):this._mediaInfo.duration=0,"number"==typeof t.framerate&&0<(n=Math.floor(1e3*t.framerate))&&(i=n/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=i,this._referenceFrameRate.fps_num=n,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=i),"object"==typeof t.keyframes?(this._mediaInfo.hasKeyframesIndex=!0,n=t.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(n),t.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=t,P.Z.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(e).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},e))},d.prototype._parseKeyframesIndex=function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var r=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(r),n.push(e.filepositions[i])}return{times:t,filepositions:n}},d.prototype._parseAudioData=function(e,t,n,i){if(n<=1)P.Z.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var r=new DataView(e,t,n).getUint8(0),a=r>>>4;if(2==a||10==a){var o=(12&r)>>>2;if(0<=o&&o<=4){var s,l=this._flvSoundRateTable[o],r=1&r,u=this._audioMetadata,c=this._audioTrack;if(u||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(u=this._audioMetadata={}).type="audio",u.id=c.id,u.timescale=this._timescale,u.duration=this._duration,u.audioSampleRate=l,u.channelCount=0==r?1:2),10==a){var h,l=this._parseAACAudioData(e,t+1,n-1,this._timestampBase+i);null!=l&&(0===l.packetType?(u.config&&P.Z.w(this.TAG,"Found another AudioSpecificConfig!"),h=l.data,u.audioSampleRate=h.samplingRate,u.channelCount=h.channelCount,u.codec=h.codec,u.originalCodec=h.originalCodec,u.config=h.config,u.audioconfig=h.audioconfig,u.samplingIndex=h.samplingIndex,u.refSampleDuration=1024/u.audioSampleRate*u.timescale,P.Z.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",u),(s=this._mediaInfo).audioCodec=u.originalCodec,s.audioSampleRate=u.audioSampleRate,s.audioChannelCount=u.channelCount,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)):1===l.packetType?(d=this._timestampBase+i,r={unit:l.data,length:l.data.byteLength,dts:d,pts:d},c.samples.push(r),c.length+=l.data.length):P.Z.e(this.TAG,"Flv: Unsupported AAC data type ".concat(l.packetType)))}else if(2==a){if(!u.codec){if(null==(h=this._parseMP3AudioData(e,t+1,n-1,!0)))return;u.audioSampleRate=h.samplingRate,u.channelCount=h.channelCount,u.codec=h.codec,u.originalCodec=h.originalCodec,u.refSampleDuration=1152/u.audioSampleRate*u.timescale,P.Z.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",u),(s=this._mediaInfo).audioCodec=u.codec,s.audioSampleRate=u.audioSampleRate,s.audioChannelCount=u.channelCount,s.audioDataRate=h.bitRate,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)}var d,r=this._parseMP3AudioData(e,t+1,n-1,!1);null!=r&&(d=this._timestampBase+i,l={unit:r,length:r.byteLength,dts:d,pts:d},c.samples.push(l),c.length+=r.length)}}else this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+o)}else this._onError(w.Z.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+a)}},d.prototype._parseAACAudioData=function(e,t,n,i){var r,a;if(!(n<=1))return r={},a=new Uint8Array(e,t,n),r.packetType=a[0],0===a[0]?r.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):(r.data=a.subarray(1),this._onlyDemuxer&&(e=this._constructAdtsHeader(this._audioMetadata,r.data),t=this._concatUint8(new Uint8Array(e),r.data),this._onDemuxData({type:"audio",data:{data:t,pts:i}}))),r;P.Z.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},d.prototype._constructAdtsHeader=function(e,t){var n=e.audioSampleRate,i=e.channelCount,e=e.audioconfig,n=this._doubleCheckSampleRateIndex(e,n),e=new Uint8Array(7),n=(e[0]=255,e[1]=240,e[1]=1|e[1],e[2]=64,e[2]=e[2]|60&n<<2,e[2]=e[2]|1&i>>2,e[3]=192&i<<6,t.byteLength+7);return e[3]=e[3]|3&n>>11,e[4]=255&n>>3,e[5]=224&n<<5,e[5]=31|e[5],e[6]=252,e},d.prototype._doubleCheckSampleRateIndex=function(e,t){e=(7&e[0])<<1|e[1]>>>7;return e!==t?e:t},d.prototype._parseAACAudioSpecificConfig=function(e,t,n){var i,r,e=new Uint8Array(e,t,n),t=null,n=0,a=null,n=i=e[0]>>>3;if((r=(7&e[0])<<1|e[1]>>>7)<0||r>=this._mpegSamplingRates.length)this._onError(w.Z.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var o,s=this._mpegSamplingRates[r],l=(120&e[1])>>>3;if(!(l<0||8<=l))return 5===n&&(a=(7&e[1])<<1|e[2]>>>7,e[2]),-1!==(o=self.navigator.userAgent.toLowerCase()).indexOf("firefox")?a=6<=r?(n=5,t=new Array(4),r-3):(n=2,t=new Array(2),r):-1!==o.indexOf("android")?(n=2,t=new Array(2),a=r):(n=5,a=r,t=new Array(4),6<=r?a=r-3:1==l&&(n=2,t=new Array(2),a=r)),t[0]=n<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&l)<<3,5===n&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),{config:t,audioconfig:[e[0],e[1]],samplingRate:s,channelCount:l,samplingIndex:r,codec:"mp4a.40."+n,originalCodec:"mp4a.40."+i};this._onError(w.Z.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},d.prototype._parseMP3AudioData=function(e,t,n,i){if(!(n<4)){this._littleEndian;e=new Uint8Array(e,t,n),t=null;if(i){if(255!==e[0])return;var n=e[1]>>>3&3,i=(6&e[1])>>1,r=(240&e[2])>>>4,a=(12&e[2])>>>2,o=3!=(e[3]>>>6&3)?2:1,s=0,l=0;switch(n){case 0:s=this._mpegAudioV25SampleRateTable[a];break;case 2:s=this._mpegAudioV20SampleRateTable[a];break;case 3:s=this._mpegAudioV10SampleRateTable[a]}switch(i){case 1:r<this._mpegAudioL3BitRateTable.length&&(l=this._mpegAudioL3BitRateTable[r]);break;case 2:r<this._mpegAudioL2BitRateTable.length&&(l=this._mpegAudioL2BitRateTable[r]);break;case 3:r<this._mpegAudioL1BitRateTable.length&&(l=this._mpegAudioL1BitRateTable[r])}t={bitRate:l,samplingRate:s,channelCount:o,codec:"mp3",originalCodec:"mp3"}}else t=e;return t}P.Z.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},d.prototype._parseVideoData=function(e,t,n,i,r){var a,o,s,l;n<=1?P.Z.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(o=(112&(a=new Uint8Array(e,t,n)[0]))>>>4,0!=(128&a)?(s=15&a,"hvc1"===(l=String.fromCharCode.apply(String,new Uint8Array(e,t,n).slice(1,5)))?this._parseHVCVideoPacket(e,t+5,n-5,i,r,o,s):"av01"!==l?this._onError(w.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(l)):this._parseEnhancedAV1VideoPacket(e,t+5,n-5,i,r,o,s)):7==(l=15&a)?this._parseAVCVideoPacket(e,t+1,n-1,i,r,o):12!=l?this._onError(w.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(l)):this._parseHVCVideoPacket(e,t+1,n-1,i,r,o))},d.prototype._parseAVCVideoPacket=function(e,t,n,i,r,a){if(n<4)P.Z.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var o=this._littleEndian,s=new DataView(e,t,n),l=s.getUint8(0),s=(16777215&s.getUint32(0,!o))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseAVCVideoData(e,t+4,n-4,i,r,a,s);else if(2!==l)return void this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(l))}},d.prototype._parseAVCDecoderConfigurationRecord=function(e,t,n){if(n<7)P.Z.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,r=this._videoTrack,a=this._littleEndian,o=new DataView(e,t,n),r=(i?void 0!==i.avcc&&P.Z.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration),o.getUint8(0)),s=o.getUint8(1);if(o.getUint8(2),o.getUint8(3),1===r&&0!==s)if(this._naluLengthSize=1+(3&o.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var l=31&o.getUint8(5);if(0!=l){1<l&&P.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(l));for(var u=6,c=0;c<l;c++){var h=o.getUint16(u,!a);if(u+=2,0!==h){var d=new Uint8Array(e,t+u,h),f=(u+=h,A.parseSPS(d));if(0===c){i.codecWidth=f.codec_size.width,i.codecHeight=f.codec_size.height,i.presentWidth=f.present_size.width,i.presentHeight=f.present_size.height,i.profile=f.profile_string,i.level=f.level_string,i.bitDepth=f.bit_depth,i.chromaFormat=f.chroma_format,i.sarRatio=f.sar_ratio,i.frameRate=f.frame_rate,!1!==f.frame_rate.fixed&&0!==f.frame_rate.fps_num&&0!==f.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var p=i.frameRate.fps_den,m=i.frameRate.fps_num;i.refSampleDuration=i.timescale*(p/m);for(var g=d.subarray(1,4),_="avc1.",y=0;y<3;y++){var v=g[y].toString(16);_+=v=v.length<2?"0"+v:v}i.codec=_;p=this._mediaInfo;p.width=i.codecWidth,p.height=i.codecHeight,p.fps=i.frameRate.fps,p.profile=i.profile,p.level=i.level,p.refFrames=f.ref_frames,p.chromaFormat=f.chroma_format_string,p.sarNum=i.sarRatio.width,p.sarDen=i.sarRatio.height,p.videoCodec=_,p.hasAudio?null!=p.audioCodec&&(p.mimeType='video/x-flv; codecs="'+p.videoCodec+","+p.audioCodec+'"'):p.mimeType='video/x-flv; codecs="'+p.videoCodec+'"',p.isComplete()&&this._onMediaInfo(p)}}}var E=o.getUint8(u);if(0!==E){for(1<E&&P.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(E)),u++,c=0;c<E;c++)h=o.getUint16(u,!a),u+=2,0!==h&&(u+=h);i.avcc=new Uint8Array(n),i.avcc.set(new Uint8Array(e,t,n),0),P.Z.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(w.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},d.prototype._parseAVCVideoData=function(e,t,n,i,r,a,o){for(var s=this._littleEndian,l=new DataView(e,t,n),u=[],c=0,h=0,d=this._naluLengthSize,f=this._timestampBase+i,p=1===a;h<n;){if(n<=h+4){P.Z.w(this.TAG,"Malformed Nalu near timestamp ".concat(f,", offset = ").concat(h,", dataSize = ").concat(n));break}var m=l.getUint32(h,!s);if(3===d&&(m>>>=8),n-d<m)return void P.Z.w(this.TAG,"Malformed Nalus near timestamp ".concat(f,", NaluSize > DataSize!"));var g=31&l.getUint8(h+d),_=(5==g&&(p=!0),new Uint8Array(e,t+h,d+m));if(6==g&&5===l.getUint8(h+d+1)){for(var y=0,v=0;255==_[++v+5];)y+=255;for(var E=6+--v,A=_[E]+y,b="",T=1;T<=16;T++)b+=_[++E];for(var S=A-16,w=0,R=new Uint8Array(S);R[w]=_[++E],++w<=S;);this._onSeiInfo&&this._onSeiInfo({unitType:g,data:R,pts:(f+o)/1e3,uuid:b})}u.push({type:g,data:_}),c+=_.byteLength,h+=d+m}u.length&&(i=this._videoTrack,a={units:u,length:c,isKeyframe:p,dts:f,cts:o,pts:f+o},p&&(a.fileposition=r),i.samples.push(a),i.length+=c)},d.prototype._parseHVCVideoPacket=function(e,t,n,i,r,a){if(n<4)P.Z.w(this.TAG,"Flv: Invalid HVC packet, missing HVCPacketType or/and CompositionTime");else{var o=this._littleEndian,s=new DataView(e,t,n),l=s.getUint8(0),s=(16777215&s.getUint32(0,!o))<<8>>8;if(0===l)this._parseHVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseHVCVideoData(e,t+4,n-4,i,r,a,s);else if(2!==l)return void this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(l))}},d.prototype._parseHVCDecoderConfigurationRecord=function(e,t,n){if(n<23)P.Z.w(this.TAG,"Flv: Invalid HVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,r=this._videoTrack,a=this._littleEndian,o=new DataView(e,t,n),r=(i?void 0!==i.hvcc&&P.Z.w(this.TAG,"Found another HVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration),o.getUint8(0)),s=31&o.getUint8(1);if(1===r&&0!=s)if(this._naluLengthSize=1+(3&o.getUint8(21)),3===this._naluLengthSize||4===this._naluLengthSize){for(var l,u,c,h,d=o.getUint8(22),f=23,p=[],m=[],g=[],_=0;_<d;_++){var y=63&o.getUint8(f++),v=o.getUint16(f,!a);if(f+=2,0!==v){switch(y){case 32:l+=v;break;case 33:u+=v;break;case 34:c+=v}for(var E=0;E<v;E++){var A,b,T=o.getUint16(f,!a);f+=2,0!==T&&(33==y?(A=new Uint8Array(e,t+f,T),p.push(A)):32==y?(A=new Uint8Array(e,t+f,T),m.push(A)):34==y&&(b=new Uint8Array(e,t+f,T),g.push(b)),f+=T)}}}this.firstData=this._concatUint8(new Uint8Array([0,0,0,1]),m[0],new Uint8Array([0,0,0,1]),p[0],new Uint8Array([0,0,0,1]),g[0]),0!==l?(1<l&&P.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: VPS Count = ".concat(l)),0!==u?(1<u&&P.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: SPS Count = ".concat(u)),0!==c?(1<c&&P.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: PPS Count = ".concat(u)),r=S.parseSPS(p[0]),i.codecWidth=r.codec_size.width,i.codecHeight=r.codec_size.height,i.presentWidth=r.present_size.width,i.presentHeight=r.present_size.height,i.profile=r.profile_string,i.level=r.level_string,i.profile_idc=r.profile_idc,i.level_idc=r.level_idc,i.bitDepth=r.bit_depth,i.chromaFormat=r.chroma_format,i.sarRatio=r.sar_ratio,i.frameRate=r.frame_rate,!1!==r.frame_rate.fixed&&0!==r.frame_rate.fps_num&&0!==r.frame_rate.fps_den&&r.frame_rate.fixed||(i.frameRate=this._referenceFrameRate),s=i.frameRate.fps_den,h=i.frameRate.fps_num,i.refSampleDuration=i.timescale*(s/h),s="hvc1."+i.profile_idc+".1.L"+i.level_idc+".B0",i.codec=s,(h=this._mediaInfo).width=i.codecWidth,h.height=i.codecHeight,h.fps=i.frameRate.fps||25,h.profile=i.profile,h.level=i.level,h.refFrames=r.ref_frames,h.chromaFormat=r.chroma_format_string,h.sarNum=i.sarRatio.width,h.sarDen=i.sarRatio.height,h.videoCodec=s,h.hasAudio?null!=h.audioCodec&&(h.mimeType='video/x-flv; codecs="'+h.videoCodec+","+h.audioCodec+'"'):h.mimeType='video/x-flv; codecs="'+h.videoCodec+'"',h.isComplete()&&this._onMediaInfo(h),i.hvcc=new Uint8Array(n),i.hvcc.set(new Uint8Array(e,t,n),0),P.Z.v(this.TAG,"Parsed HVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)):this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No PPS")):this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No SPS")):this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No VPS")}else this._onError(w.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord")}},d.prototype._parseHVCVideoData=function(e,t,n,i,r,a,o){for(var s=this._littleEndian,l=new DataView(e,t,n),u=[],c=0,h=0,d=this._naluLengthSize,f=this._timestampBase+i,p=1===a;h<n;){if(n<=h+4){P.Z.w(this.TAG,"Malformed Nalu near timestamp ".concat(f,", offset = ").concat(h,", dataSize = ").concat(n));break}var m=l.getUint32(h,!s);if(3===d&&(m>>>=8),n-d<m)return void P.Z.w(this.TAG,"Malformed Nalus near timestamp ".concat(f,", NaluSize > DataSize!"));var g=l.getUint8(h+d)>>1&63,_=(16<=g&&g<=23&&(p=!0),new Uint8Array(e,t+h,d+m));u.push({type:g,data:_}),c+=_.byteLength,h+=d+m}if(u.length){i={units:u,length:c,isKeyframe:p,dts:f,cts:o,pts:f+o,firstData:this.firstData};if(p&&(i.fileposition=r),this._onlyDemuxer||((a=this._videoTrack).samples.push(i),a.length+=c),this._onlyDemuxer){for(var y=null,v=0;v<u.length;v++){var E=u[v].data;E[0]=0,E[1]=0,E[2]=0,E[3]=1,y=y?this._concatUint8(y,new Uint8Array(E,0,E.length)):new Uint8Array(E,0,E.length)}i.videoData=this._concatUint8(this.firstData,new Uint8Array(y,0,y.length)),this._onDemuxData({type:"video",data:i}),this.isFirstData=!1}}},d.prototype._parseEnhancedAV1VideoPacket=function(e,t,n,i,r,a,o){this._littleEndian,new DataView(e,t,n),0===o?this._parseAV1CodecConfigurationRecord(e,t,n):1===o?this._parseAV1VideoData(e,t,n,i,r,a,0):5===o?this._onError(w.Z.FORMAT_ERROR,"Flv: Not Suported MP2T AV1 video packet type ".concat(o)):2!==o&&this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(o))},d.prototype._parseAV1CodecConfigurationRecord=function(e,t,n){var i,r,a,o;n<4?P.Z.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!"):(i=this._videoMetadata,o=this._videoTrack,this._littleEndian,r=new DataView(e,t,n),i?void 0!==i.av1c&&P.Z.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=o.id,i.timescale=this._timescale,i.duration=this._duration),o=127&r.getUint8(0),r.getUint8(1),r.getUint8(1),r.getUint8(2),1==o&&null!=(r=l.parseOBUs(new Uint8Array(e,t+4,n-4)))?(i.codecWidth=r.codec_size.width,i.codecHeight=r.codec_size.height,i.presentWidth=r.present_size.width,i.presentHeight=r.present_size.height,i.profile=r.profile_string,i.level=r.level_string,i.bitDepth=r.bit_depth,i.chromaFormat=r.chroma_format,i.sarRatio=r.sar_ratio,i.frameRate=r.frame_rate,!1!==r.frame_rate.fixed&&0!==r.frame_rate.fps_num&&0!==r.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate),o=i.frameRate.fps_den,a=i.frameRate.fps_num,i.refSampleDuration=i.timescale*(o/a),i.codec=r.codec_mimetype,(o=this._mediaInfo).width=i.codecWidth,o.height=i.codecHeight,o.fps=i.frameRate.fps,o.profile=i.profile,o.level=i.level,o.refFrames=r.ref_frames,o.chromaFormat=r.chroma_format_string,o.sarNum=i.sarRatio.width,o.sarDen=i.sarRatio.height,o.videoCodec=r.codec_mimetype,o.hasAudio?null!=o.audioCodec&&(o.mimeType='video/x-flv; codecs="'+o.videoCodec+","+o.audioCodec+'"'):o.mimeType='video/x-flv; codecs="'+o.videoCodec+'"',o.isComplete()&&this._onMediaInfo(o),i.av1c=new Uint8Array(n),i.av1c.set(new Uint8Array(e,t,n),0),P.Z.v(this.TAG,"Parsed AV1CodecConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)):this._onError(w.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"))},d.prototype._parseAV1VideoData=function(e,t,n,i,r,a,o){this._littleEndian,new DataView(e,t,n);var s=[],i=this._timestampBase+i,a=1===a,l=n;s.push({unitType:0,data:new Uint8Array(e,t+0,n)}),s.length&&(e=this._videoTrack,t={units:s,length:l,isKeyframe:a,dts:i,cts:o,pts:i+o},a&&(t.fileposition=r),e.samples.push(t),e.length+=l)},d.prototype._concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.reduce(function(e,t){return e+t.byteLength},0),i=new Uint8Array(n),r=0;return e.forEach(function(e){i.set(e,r),r+=e.byteLength}),i};var c=d,t=(h.init=function(){for(var e in h.types={hvc1:[],hvcC:[],av01:[],av1C:[],avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pasp:[],".mp3":[]})h.types.hasOwnProperty(e)&&(h.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=h.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},h.box=function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),r=i.length,a=0;a<r;a++)t+=i[a].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);for(var o=8,a=0;a<r;a++)n.set(i[a],o),o+=i[a].byteLength;return n},h.generateInitSegment=function(e){var t=h.box(h.types.ftyp,h.constants.FTYP),e=h.moov(e),n=new Uint8Array(t.byteLength+e.byteLength);return n.set(t,0),n.set(e,t.byteLength),n},h.moov=function(e){var t=h.mvhd(e.timescale,e.duration),n=h.trak(e),e=h.mvex(e);return h.box(h.types.moov,t,n,e)},h.mvhd=function(e,t){return h.box(h.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},h.trak=function(e){return h.box(h.types.trak,h.tkhd(e),h.mdia(e))},h.tkhd=function(e){var t=e.id,n=e.duration,i=e.presentWidth,e=e.presentHeight;return h.box(h.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,e>>>8&255,255&e,0,0]))},h.mdia=function(e){return h.box(h.types.mdia,h.mdhd(e),h.hdlr(e),h.minf(e))},h.mdhd=function(e){var t=e.timescale,e=e.duration;return h.box(h.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))},h.hdlr=function(e){e="audio"===e.type?h.constants.HDLR_AUDIO:h.constants.HDLR_VIDEO;return h.box(h.types.hdlr,e)},h.minf=function(e){var t="audio"===e.type?h.box(h.types.smhd,h.constants.SMHD):h.box(h.types.vmhd,h.constants.VMHD);return h.box(h.types.minf,t,h.dinf(),h.stbl(e))},h.dinf=function(){return h.box(h.types.dinf,h.box(h.types.dref,h.constants.DREF))},h.stbl=function(e){return h.box(h.types.stbl,h.stsd(e),h.box(h.types.stts,h.constants.STTS),h.box(h.types.stsc,h.constants.STSC),h.box(h.types.stsz,h.constants.STSZ),h.box(h.types.stco,h.constants.STCO))},h.stsd=function(e){return"audio"===e.type?"mp3"===e.codec?h.box(h.types.stsd,h.constants.STSD_PREFIX,h.mp3(e)):h.box(h.types.stsd,h.constants.STSD_PREFIX,h.mp4a(e)):0<=e.codec.indexOf("avc1")?h.box(h.types.stsd,h.constants.STSD_PREFIX,h.avc1(e)):"video"===e.type&&e.codec.startsWith("av01")?h.box(h.types.stsd,h.constants.STSD_PREFIX,h.av01(e)):h.box(h.types.stsd,h.constants.STSD_PREFIX,h.hvc1(e))},h.mp3=function(e){var t=e.channelCount,e=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]);return h.box(h.types[".mp3"],t)},h.mp4a=function(e){var t=e.channelCount,n=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return h.box(h.types.mp4a,t,h.esds(e))},h.esds=function(e){var e=e.config||[],t=e.length,t=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2]));return h.box(h.types.esds,t)},h.avc1=function(e){var t=e.avcc,n=e.codecWidth,e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return h.box(h.types.avc1,n,h.box(h.types.avcC,t))},h.hvc1=function(e){var t=e.hvcc,n=e.codecWidth,e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return h.box(h.types.hvc1,n,h.box(h.types.hvcC,t))},h.av01=function(e){var t=e.av1c,n=e.codecWidth||192,e=e.codecHeight||108,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return h.box(h.types.av01,n,h.box(h.types.av1C,t))},h.mvex=function(e){return h.box(h.types.mvex,h.trex(e))},h.trex=function(e){e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return h.box(h.types.trex,e)},h.moof=function(e,t){return h.box(h.types.moof,h.mfhd(e.sequenceNumber),h.traf(e,t))},h.mfhd=function(e){e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return h.box(h.types.mfhd,e)},h.traf=function(e,t){var n=e.id,n=h.box(h.types.tfhd,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),t=h.box(h.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),i=h.sdtp(e),e=h.trun(e,i.byteLength+16+16+8+16+8+8);return h.box(h.types.traf,n,t,e,i)},h.sdtp=function(e){for(var t=e.samples||[],n=t.length,i=new Uint8Array(4+n),r=0;r<n;r++){var a=t[r].flags;i[r+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return h.box(h.types.sdtp,i)},h.trun=function(e,t){var n=e.samples||[],i=n.length,e=12+16*i,r=new Uint8Array(e);r.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var a=0;a<i;a++){var o=n[a].duration,s=n[a].size,l=n[a].flags,u=n[a].cts;r.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a)}return h.box(h.types.trun,r)},h.mdat=function(e){return h.box(h.types.mdat,e)},h);function h(){}function d(e,t){this.TAG="FLVDemuxer",this._config=t,this._onlyDemuxer=t.onlyDemuxer||!1,this._onError=null,this._onMediaInfo=null,this._onDemuxData=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new i.Z,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),this.curPts=null,this.firstData=[],this.isFirstData=!0}t.init();var k=t,O=(L.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},L),M=n(779),f=(C.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},C.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(C.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),C.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0,this._audioNextPts=this._videoNextPts=void 0},C.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},C.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new _.rT("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},C.prototype._onTrackMetadataReceived=function(e,t){var n=null,i="mp4",r=t.codec;if("audio"===e)n="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(i="mpeg",r="",new Uint8Array):k.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=k.generateInitSegment(t)}if(!this._onInitSegment)throw new _.rT("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:r,container:"".concat(e,"/").concat(i),mediaDuration:t.duration})},C.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},C.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0},e=(null!=e&&(n.samples.push(e),n.length=e.length),{type:"audio",id:2,sequenceNumber:0,samples:[],length:0});null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(e,!0)},C.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var n=e.samples,i=void 0,r=-1,a=this._audioMeta.refSampleDuration,o="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,s=this._dtsBaseInited&&void 0===this._audioNextDts,l=!1;if(n&&0!==n.length&&(1!==n.length||t)){var u,c,h=0,d=null,f=0,f=o?(h=0,e.length):(h=8)+e.length,p=null,t=(1<n.length&&(f-=(p=n.pop()).length),null!=this._audioStashedLastSample&&(u=this._audioStashedLastSample,this._audioStashedLastSample=null,n.unshift(u),f+=u.length),null!=p&&(this._audioStashedLastSample=p),n[0].dts-this._dtsBase);this._audioNextDts?i=t-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(i=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(l=!0)):i=null!=(C=this._audioSegmentInfoList.getLastSampleBefore(t))?(L=t-(C.originalDts+C.duration),t-(C.dts+C.duration+(L=L<=3?0:L))):0,l&&(C=t-i,null!=(L=this._videoSegmentInfoList.getLastSegmentBefore(t))&&L.beginDts<C?(T=O.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(c=L.beginDts,t=C-L.beginDts,P.Z.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(c,", duration: ").concat(t)),n.unshift({unit:T,dts:c,pts:c}),f+=T.byteLength):l=!1);for(var m=[],g=0;g<n.length;g++){var _=(u=n[g]).unit,y=u.dts-this._dtsBase,v=!1,E=null,A=0;if(!((c=y)<-.001)){if("mp3"!==this._audioMeta.codec){var b=y;if((i=y-(b=this._audioNextDts?this._audioNextDts:b))<=-3*a){P.Z.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(y," ms ,curRefDts: ").concat(b," ms)  due to dtsCorrection: ").concat(i," ms overlap."));continue}if(3*a<=i&&this._fillAudioTimestampGap&&!D.Z.safari){var T,v=!0,S=Math.floor(i/a);P.Z.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\n"+"originalDts: ".concat(y," ms, curRefDts: ").concat(b," ms, ")+"dtsCorrection: ".concat(Math.round(i)," ms, generate: ").concat(S," frames")),c=Math.floor(b),A=Math.floor(b+a)-c,null==(T=O.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(P.Z.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),T=_);for(var E=[],w=0;w<S;w++){b+=a;var R=Math.floor(b),I=Math.floor(b+a)-R,R={dts:R,pts:R,cts:0,unit:T,size:T.byteLength,duration:I,originalDts:y,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};E.push(R),f+=R.size}}else c=Math.floor(b),A=Math.floor(b+a)-c;this._audioNextPts=this._audioNextDts=b+a}else c=y-i,A=g!==n.length-1?n[g+1].dts-this._dtsBase-i-c:null!=p?p.dts-this._dtsBase-i-c:1<=m.length?m[m.length-1].duration:Math.floor(a),this._audioNextPts=this._audioNextDts=c+A;-1===r&&(r=c),m.push({dts:c,pts:c,cts:0,unit:u.unit,size:u.unit.byteLength,duration:A,originalDts:y,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),v&&m.push.apply(m,E)}}if(0===m.length)e.samples=[],e.length=0;else{for(o?d=new Uint8Array(f):((d=new Uint8Array(f))[0]=f>>>24&255,d[1]=f>>>16&255,d[2]=f>>>8&255,d[3]=255&f,d.set(k.types.mdat,4)),g=0;g<m.length;g++)_=m[g].unit,d.set(_,h),h+=_.byteLength;var C=m[m.length-1],L=C.dts+C.duration,t=new M.Yy,l=(t.beginDts=r,t.endDts=L,t.beginPts=r,t.endPts=L,t.originalBeginDts=m[0].originalDts,t.originalEndDts=C.originalDts+C.duration,t.firstSample=new M.Wk(m[0].dts,m[0].pts,m[0].duration,m[0].originalDts,!1),t.lastSample=new M.Wk(C.dts,C.pts,C.duration,C.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(t),e.samples=m,e.sequenceNumber++,o?new Uint8Array:k.moof(e,r)),L=(e.samples=[],e.length=0,{type:"audio",data:this._mergeBoxes(l,d).buffer,sampleCount:m.length,info:t});o&&s&&(L.timestampOffset=r),this._onMediaSegment("audio",L)}}}},C.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var n=e,i=n.samples,r=void 0,a=-1,o=-1;if(i&&0!==i.length&&(1!==i.length||t)){var s,l=8,u=null,t=8+e.length,c=null,e=(1<i.length&&(t-=(c=i.pop()).length),null!=this._videoStashedLastSample&&(s=this._videoStashedLastSample,this._videoStashedLastSample=null,i.unshift(s),t+=s.length),null!=c&&(this._videoStashedLastSample=c),i[0].dts-this._dtsBase);r=this._videoNextDts?e-this._videoNextDts:!this._videoSegmentInfoList.isEmpty()&&null!=(T=this._videoSegmentInfoList.getLastSampleBefore(e))?(S=e-(T.originalDts+T.duration),e-(T.dts+T.duration+(S=S<=3?0:S))):0;for(var h=new M.Yy,d=[],f=0;f<i.length;f++){var p,m=(s=i[f]).dts-this._dtsBase,g=s.isKeyframe,_=m-r,y=s.cts,v=_+y,E=(-1===a&&(a=_,o=v),0),E=f!==i.length-1?i[f+1].dts-this._dtsBase-r-_:null!=c?c.dts-this._dtsBase-r-_:1<=d.length?d[d.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);g&&((p=new M.Wk(_,v,E,s.dts,!0)).fileposition=s.fileposition,h.appendSyncPoint(p)),d.push({dts:_,pts:v,cts:y,units:s.units,size:s.length,isKeyframe:g,duration:E,originalDts:m,flags:{isLeading:0,dependsOn:g?2:1,isDependedOn:g?1:0,hasRedundancy:0,isNonSync:g?0:1}})}for((u=new Uint8Array(t))[0]=t>>>24&255,u[1]=t>>>16&255,u[2]=t>>>8&255,u[3]=255&t,u.set(k.types.mdat,4),f=0;f<d.length;f++)for(var A=d[f].units;A.length;){var b=A.shift().data;u.set(b,l),l+=b.byteLength}var e=d[d.length-1],T=e.dts+e.duration,S=e.pts+e.duration,T=(this._videoNextDts=T,this._videoNextPts=S,h.beginDts=a,h.endDts=T,h.beginPts=o,h.endPts=S,h.originalBeginDts=d[0].originalDts,h.originalEndDts=e.originalDts+e.duration,h.firstSample=new M.Wk(d[0].dts,d[0].pts,d[0].duration,d[0].originalDts,d[0].isKeyframe),h.lastSample=new M.Wk(e.dts,e.pts,e.duration,e.originalDts,e.isKeyframe),this._isLive||this._videoSegmentInfoList.append(h),n.samples=d,n.sequenceNumber++,this._forceFirstIDR&&((t=d[0].flags).dependsOn=2,t.isNonSync=0),k.moof(n,a));n.samples=[],n.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(T,u).buffer,sampleCount:d.length,info:h})}}},C.prototype._mergeBoxes=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},C),p=n(979),m=n(458),g=(n(475),E.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},E.prototype.on=function(e,t){this._emitter.addListener(e,t)},E.prototype.off=function(e,t){this._emitter.removeListener(e,t)},E.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},E.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e],n=this._ioctl=new p.Z(n,this._config,e);n.onError=this._onIOException.bind(this),n.onSeeked=this._onIOSeeked.bind(this),n.onComplete=this._onIOComplete.bind(this),n.onRedirect=this._onIORedirect.bind(this),n.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):n.onDataArrival=this._onInitChunkArrival.bind(this),n.open(t)},E.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},E.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},E.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},E.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},E.prototype.seek=function(e){var t,n,i;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(i=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(n=i.getNearestKeyframe(e),this._remuxer.seek(n.milliseconds),this._ioctl.seek(n.fileposition),this._pendingResolveSeekPoint=n.milliseconds):null==(i=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(n=i.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,n.fileposition),this._pendingResolveSeekPoint=n.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())},E.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){n=i-1;break}return n},E.prototype._onInitChunkArrival=function(e,t){var n,i=this;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,this._demuxer.parseChunks(e,t)):(n=c.probe(e)).match?(this._demuxer=new c(n,this._config),this._remuxer||(this._remuxer=new f(this._config)),null==(n=this._mediaDataSource).duration||isNaN(n.duration)||(this._demuxer.overridedDuration=n.duration),"boolean"==typeof n.hasAudio&&(this._demuxer.overridedHasAudio=n.hasAudio),"boolean"==typeof n.hasVideo&&(this._demuxer.overridedHasVideo=n.hasVideo),this._demuxer.timestampBase=n.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onDemuxData=this._onDemuxData.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),this._demuxer.parseChunks(e,t)):(P.Z.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){i._internalAbort()}),this._emitter.emit(m.Z.DEMUX_ERROR,w.Z.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),0)},E.prototype._onMediaInfo=function(e){var t=this,e=(null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,i.Z.prototype)),Object.assign({},e));Object.setPrototypeOf(e,i.Z.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)})},E.prototype._onDemuxData=function(e){this._emitter.emit(m.Z.DEMUX_DATA,e)},E.prototype._onMetaDataArrived=function(e){this._emitter.emit(m.Z.METADATA_ARRIVED,e)},E.prototype._onScriptDataArrived=function(e){this._emitter.emit(m.Z.SCRIPTDATA_ARRIVED,e)},E.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},E.prototype._onIOComplete=function(e){e+=1;e<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer.flushStashedSamples(),this._emitter.emit(m.Z.LOADING_COMPLETE),this._disableStatisticsReporter())},E.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},E.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(m.Z.RECOVERED_EARLY_EOF)},E.prototype._onIOException=function(e,t){P.Z.e(this.TAG,"IOException: type = ".concat(e,", code = ").concat(t.code,", msg = ").concat(t.msg)),this._emitter.emit(m.Z.IO_ERROR,e,t),this._disableStatisticsReporter()},E.prototype._onDemuxException=function(e,t){P.Z.e(this.TAG,"DemuxException: type = ".concat(e,", info = ").concat(t)),this._emitter.emit(m.Z.DEMUX_ERROR,e,t)},E.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(m.Z.INIT_SEGMENT,e,t)},E.prototype._onRemuxerMediaSegmentArrival=function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(m.Z.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint)&&"video"===e&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,D.Z.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(m.Z.RECOMMEND_SEEKPOINT,t))},E.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},E.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},E.prototype._reportSegmentMediaInfo=function(e){e=this._mediaInfo.segments[e],e=Object.assign({},e);e.duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(m.Z.MEDIA_INFO,e)},E.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(m.Z.STATISTICS_INFO,e)},E);function E(t,n){this.TAG="TransmuxingController",this._emitter=new(r()),this._config=n,t.segments||(t.segments=[{duration:t.duration,filesize:t.filesize,url:t.url}]),"boolean"!=typeof t.cors&&(t.cors=!0),"boolean"!=typeof t.withCredentials&&(t.withCredentials=!1),this._mediaDataSource=t;var i=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach(function(e){e.timestampBase=i,i+=e.duration,e.cors=t.cors,e.withCredentials=t.withCredentials,n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy)}),isNaN(i)||this._mediaDataSource.duration===i||(this._mediaDataSource.duration=i),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function C(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._audioNextPts=void 0,this._videoNextDts=void 0,this._videoNextPts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new M.J1("audio"),this._videoSegmentInfoList=new M.J1("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!D.Z.chrome||!(D.Z.version.major<50||50===D.Z.version.major&&D.Z.version.build<2661)),this._fillSilentAfterSeek=D.Z.msedge||D.Z.msie,this._mp3UseMpegAudio=!D.Z.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function L(){}},458:function(e,t){"use strict";t.Z={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint",DEMUX_DATA:"demux_data"}},919:function(e,t,n){"use strict";n(240),n(45),n(344),n(131),n(458)},61:function(e,t){"use strict";t.Z={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},319:function(x,e,t){"use strict";t.d(e,{default:function(){return M}});var e=t(344),n=t(979),i={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function r(){return Object.assign({},i)}O.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},O.supportMSEH265Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')},O.supportNetworkStreamIO=function(){var e=new n.Z({},r()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},O.getNetworkLoaderTypeName=function(){var e=new n.Z({},r()),t=e.loaderType;return e.destroy(),t},O.supportNativeMediaPlayback=function(e){e=(O.videoElement=null==O.videoElement?window.document.createElement("video"):O.videoElement).canPlayType(e);return"probably"===e||"maybe"==e},O.getFeatureList=function(){var e={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.mseFlvPlayback=O.supportMSEH264Playback(),e.networkStreamIO=O.supportNetworkStreamIO(),e.networkLoaderName=O.getNetworkLoaderTypeName(),e.mseLiveFlvPlayback=e.mseFlvPlayback&&e.networkStreamIO,e.nativeMP4H264Playback=O.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=O.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=O.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=O.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e};var a=O,o=t(475),s=t(393),l=t.n(s),u=t(240),c=t(340),h={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",DEMUX_DATA:"demux_data"},s=t(227),d=t.n(s),f=t(45),p=t(131),m=t(458),g=(t(919),t(70)),_=(k.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),f.Z.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},k.prototype.on=function(e,t){this._emitter.addListener(e,t)},k.prototype.off=function(e,t){this._emitter.removeListener(e,t)},k.prototype.hasWorker=function(){return null!=this._worker},k.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},k.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},k.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},k.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},k.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},k.prototype._onInitSegment=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(m.Z.INIT_SEGMENT,e,t)})},k.prototype._onMediaSegment=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(m.Z.MEDIA_SEGMENT,e,t)})},k.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(m.Z.LOADING_COMPLETE)})},k.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(m.Z.RECOVERED_EARLY_EOF)})},k.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(m.Z.MEDIA_INFO,e)})},k.prototype._onDemuxData=function(e){this._emitter.emit(m.Z.DEMUX_DATA,e)},k.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(m.Z.METADATA_ARRIVED,e)})},k.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(m.Z.SCRIPTDATA_ARRIVED,e)})},k.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(m.Z.STATISTICS_INFO,e)})},k.prototype._onIOError=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(m.Z.IO_ERROR,e,t)})},k.prototype._onDemuxError=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(m.Z.DEMUX_ERROR,e,t)})},k.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(m.Z.RECOMMEND_SEEKPOINT,e)})},k.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},k.prototype._onWorkerMessage=function(e){var t=e.data,n=t.data;if("destroyed"===t.msg||this._workerDestroying)this._workerDestroying=!1,this._worker.terminate(),this._worker=null;else switch(t.msg){case m.Z.INIT_SEGMENT:case m.Z.MEDIA_SEGMENT:this._emitter.emit(t.msg,n.type,n.data);break;case m.Z.LOADING_COMPLETE:case m.Z.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case m.Z.MEDIA_INFO:Object.setPrototypeOf(n,g.Z.prototype),this._emitter.emit(t.msg,n);break;case m.Z.METADATA_ARRIVED:case m.Z.SCRIPTDATA_ARRIVED:case m.Z.STATISTICS_INFO:this._emitter.emit(t.msg,n);break;case m.Z.IO_ERROR:case m.Z.DEMUX_ERROR:this._emitter.emit(t.msg,n.type,n.info);break;case m.Z.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,n);break;case"logcat_callback":u.Z.emitter.emit("log",n.type,n.logcat)}},k),y="error",v="source_open",E="update_end",A="buffer_full",b=t(779),T=t(996),S=(D.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},D.prototype.on=function(e,t){this._emitter.addListener(e,t)},D.prototype.off=function(e,t){this._emitter.removeListener(e,t)},D.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new T.rT("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},D.prototype.detachMediaElement=function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var n=this._pendingSegments[e],n=(n.splice(0,n.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null,this._sourceBuffers[e]);if(n){if("closed"!==t.readyState){try{t.removeSourceBuffer(n)}catch(t){u.Z.e(this.TAG,t.message)}n.removeEventListener("error",this.e.onSourceBufferError),n.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){u.Z.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},D.prototype.appendInitSegment=function(e,t){if(this._mediaSource&&"open"===this._mediaSource.readyState){var n=e,i="".concat(n.container),r=(n.codec&&0<n.codec.length&&(i+=";codecs=".concat(n.codec)),!1);if(u.Z.v(this.TAG,"Received Initialization Segment, mimeType: "+i),this._lastInitSegments[n.type]=n,i!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])u.Z.v(this.TAG,"Notice: ".concat(n.type," mimeType changed, origin: ").concat(this._mimeTypes[n.type],", target: ").concat(i));else{r=!0;try{var a=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(i);a.addEventListener("error",this.e.onSourceBufferError),a.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return u.Z.e(this.TAG,e.message),void this._emitter.emit(y,{code:e.code,msg:e.message})}}this._mimeTypes[n.type]=i}t||this._pendingSegments[n.type].push(n),r||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),c.Z.safari&&"audio/mpeg"===n.container&&0<n.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}else this._pendingSourceBufferInit.push(e),this._pendingSegments[e.type].push(e)},D.prototype.appendMediaSegment=function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer(),e=this._sourceBuffers[e.type];!e||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},D.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(e){u.Z.e(this.TAG,e.message)}this._idrList.clear();var i=this._pendingSegments[t];if(i.splice(0,i.length),"closed"!==this._mediaSource.readyState){for(var r=0;r<n.buffered.length;r++){var a=n.buffered.start(r),o=n.buffered.end(r);this._pendingRemoveRanges[t].push({start:a,end:o})}n.updating||this._doRemoveRanges(),c.Z.safari&&(i=this._lastInitSegments[t])&&(this._pendingSegments[t].push(i),n.updating||this._doAppendSegments())}}},D.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},D.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},D.prototype._needCleanupSourceBuffer=function(){if(this._config.autoCleanupSourceBuffer){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){n=n.buffered;if(1<=n.length&&t-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}}return!1},D.prototype._doCleanupSourceBuffer=function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){for(var i=n.buffered,r=!1,a=0;a<i.length;a++){var o,s=i.start(a),l=i.end(a);s<=t&&t<l+3?t-s>=this._config.autoCleanupMaxBackwardDuration&&(r=!0,o=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:s,end:o})):l<t&&(r=!0,this._pendingRemoveRanges[e].push({start:s,end:l}))}r&&!n.updating&&this._doRemoveRanges()}}},D.prototype._updateMediaSourceDuration=function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(t=this._mediaSource.duration,0<(e=this._pendingMediaDuration)&&(isNaN(t)||t<e)&&(u.Z.v(this.TAG,"Update MediaSource duration from ".concat(t," to ").concat(e)),this._mediaSource.duration=e),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)},D.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];n.length&&!t.updating;){var i=n.shift();t.remove(i.start,i.end)}},D.prototype._doAppendSegments=function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var n,i,r=t[e].shift();if(r.timestampOffset&&(n=this._sourceBuffers[e].timestampOffset,i=r.timestampOffset/1e3,.1<Math.abs(n-i)&&(u.Z.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(n," to ").concat(i)),this._sourceBuffers[e].timestampOffset=i),delete r.timestampOffset),!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(r.data),this._isBufferFull=!1,"video"===e&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(r),22===t.code?(this._isBufferFull||this._emitter.emit(A),this._isBufferFull=!0):(u.Z.e(this.TAG,e,t.message),this._emitter.emit(y,{code:t.code,msg:t.message}))}}},D.prototype._onSourceOpen=function(){if(u.Z.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(v)},D.prototype._onSourceEnded=function(){u.Z.v(this.TAG,"MediaSource onSourceEnded")},D.prototype._onSourceClose=function(){u.Z.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},D.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return 0<(e.video&&e.video.length)||e.audio&&0<e.audio.length},D.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return 0<(e.video&&e.video.length)||e.audio&&0<e.audio.length},D.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(E)},D.prototype._onSourceBufferError=function(e){u.Z.e(this.TAG,"SourceBuffer Error: ".concat(e))},D),s=t(61),w={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},R={NETWORK_EXCEPTION:o.nm.EXCEPTION,NETWORK_STATUS_CODE_INVALID:o.nm.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:o.nm.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:o.nm.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:s.Z.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:s.Z.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:s.Z.CODEC_UNSUPPORTED},I=(P.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},P.prototype.on=function(e,t){var n=this;e===h.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(function(){n._emitter.emit(h.MEDIA_INFO,n.mediaInfo)}):e===h.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(function(){n._emitter.emit(h.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)},P.prototype.off=function(e,t){this._emitter.removeListener(e,t)},P.prototype.attachMediaElement=function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new S(this._config),this._msectl.on(E,this._onmseUpdateEnd.bind(this)),this._msectl.on(A,this._onmseBufferFull.bind(this)),this._msectl.on(v,function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())}),this._msectl.on(y,function(e){t._emitter.emit(h.ERROR,w.MEDIA_ERROR,R.MEDIA_MSE_ERROR,e)}),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},P.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},P.prototype.load=function(){var i=this;if(!this._mediaElement)throw new T.rT("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new T.rT("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new _(this._mediaDataSource,this._config),this._transmuxer.on(m.Z.INIT_SEGMENT,function(e,t){i._msectl.appendInitSegment(t)}),this._transmuxer.on(m.Z.MEDIA_SEGMENT,function(e,t){var n;i._msectl.appendMediaSegment(t),i._config.lazyLoad&&!i._config.isLive&&(n=i._mediaElement.currentTime,t.info.endDts>=1e3*(n+i._config.lazyLoadMaxDuration))&&null==i._progressChecker&&(u.Z.v(i.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),i._suspendTransmuxer())}),this._transmuxer.on(m.Z.LOADING_COMPLETE,function(){i._msectl.endOfStream(),i._emitter.emit(h.LOADING_COMPLETE)}),this._transmuxer.on(m.Z.RECOVERED_EARLY_EOF,function(){i._emitter.emit(h.RECOVERED_EARLY_EOF)}),this._transmuxer.on(m.Z.IO_ERROR,function(e,t){i._emitter.emit(h.ERROR,w.NETWORK_ERROR,e,t)}),this._transmuxer.on(m.Z.DEMUX_ERROR,function(e,t){i._emitter.emit(h.ERROR,w.MEDIA_ERROR,e,{code:-1,msg:t})}),this._transmuxer.on(m.Z.MEDIA_INFO,function(e){i._mediaInfo=e,i._emitter.emit(h.MEDIA_INFO,Object.assign({},e))}),this._transmuxer.on(m.Z.DEMUX_DATA,function(e){i._emitter.emit(h.DEMUX_DATA,Object.assign({},e))}),this._transmuxer.on(m.Z.METADATA_ARRIVED,function(e){i._emitter.emit(h.METADATA_ARRIVED,e)}),this._transmuxer.on(m.Z.SCRIPTDATA_ARRIVED,function(e){i._emitter.emit(h.SCRIPTDATA_ARRIVED,e)}),this._transmuxer.on(m.Z.STATISTICS_INFO,function(e){i._statisticsInfo=i._fillStatisticsInfo(e),i._emitter.emit(h.STATISTICS_INFO,Object.assign({},i._statisticsInfo))}),this._transmuxer.on(m.Z.RECOMMEND_SEEKPOINT,function(e){i._mediaElement&&!i._config.accurateSeek&&(i._requestSetTime=!0,i._mediaElement.currentTime=e/1e3)}),this._transmuxer.open()))},P.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},P.prototype.play=function(){return this._mediaElement.play()},P.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(P.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(e){this._mediaElement.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),P.prototype._fillStatisticsInfo=function(e){var t,n,i,r;return e.playerType=this._type,this._mediaElement instanceof HTMLVideoElement&&(t=!0,r=i=0,this._mediaElement.getVideoPlaybackQuality?(i=(n=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,r=n.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1,t&&(e.decodedFrames=i,e.droppedFrames=r)),e},P.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,n=0,i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);if(r<=t&&t<a){n=a;break}}n>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(u.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},P.prototype._onmseBufferFull=function(){u.Z.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this.isChrome&&this._transmuxer&&this._transmuxer.pause(),null==this._progressChecker&&this._suspendTransmuxer()},P.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker)&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},P.prototype._progressCheckers=function(){null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},P.prototype._checkProgressAndResume=function(){if(this._transmuxer._controller._ioctl._loader._isLive)this._config.isLive=!0;else{for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,i=0;i<t.length;i++){var r=t.start(i),a=t.end(i);if(r<=e&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(!this.isChrome||this._transmuxer._controller._ioctl._paused?n=!0:(this.needResumeTime++,10==this.needResumeTime&&this._transmuxer&&(this._transmuxer.pause(),n=!(this.needResumeTime=0))));break}}n&&(u.Z.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume())}},P.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(i<=e&&e<r)return!0}return!1},P.prototype._internalSeek=function(e){var t,n=this._isTimepointBuffered(e),i=!1,r=0;e<1&&0<this._mediaElement.buffered.length&&((t=this._mediaElement.buffered.start(0))<1&&e<t||c.Z.safari)&&(i=!0,r=c.Z.safari?.1:t),i?(this._requestSetTime=!0,this._mediaElement.currentTime=r):n?(this._alwaysSeekKeyframe?(t=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=t?t.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))},P.prototype._checkAndApplyUnbufferedSeekpoint=function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))},P.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(u.Z.w(this.TAG,"Playback seems stuck at ".concat(t.currentTime,", seek to ").concat(e.start(0))),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)},P.prototype._onvLoadedMetadata=function(e){this.isChrome&&this._progressCheckers(),null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},P.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<n.length){var n=n.start(0);if(n<1&&t<n||c.Z.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=c.Z.safari?.1:n)}this._isTimepointBuffered(t)?(this._alwaysSeekKeyframe&&null!=(n=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=n.dts/1e3),null!=this._progressChecker&&this._checkProgressAndResume()):(this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},P.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},P.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},P.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},P),C=(L.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},L.prototype.on=function(e,t){var n=this;e===h.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(h.MEDIA_INFO,n.mediaInfo)}):e===h.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(h.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)},L.prototype.off=function(e,t){this._emitter.removeListener(e,t)},L.prototype.attachMediaElement=function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},L.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},L.prototype.load=function(){if(!this._mediaElement)throw new T.rT("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},L.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},L.prototype.play=function(){return this._mediaElement.play()},L.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(L.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(e){this._mediaElement.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement)&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight),e},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"statisticsInfo",{get:function(){var e,t,n,i,r={playerType:this._type,url:this._mediaDataSource.url};return this._mediaElement instanceof HTMLVideoElement&&(e=!0,i=n=0,this._mediaElement.getVideoPlaybackQuality?(n=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,i=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):e=!1,e)&&(r.decodedFrames=n,r.droppedFrames=i),r},enumerable:!1,configurable:!0}),L.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(h.MEDIA_INFO,this.mediaInfo)},L.prototype._reportStatisticsInfo=function(){this._emitter.emit(h.STATISTICS_INFO,this.statisticsInfo)},L);function L(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(l()),this._config=r(),"object"==typeof t&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new T.OC("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new T.OC("NativePlayer(".concat(e.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function P(e,t){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(l()),this._config=r(),"object"==typeof t&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new T.OC("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;t=c.Z.chrome&&(c.Z.version.major<50||50===c.Z.version.major&&c.Z.version.build<2661);this._alwaysSeekKeyframe=!!(t||c.Z.msedge||c.Z.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1),this.needResumeTime=0,this.isChrome=navigator.userAgent.toLowerCase().match(/chrome/)}function D(e){this.TAG="MSEController",this._config=e,this._emitter=new(l()),this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new b.Vn}function k(e,t){if(this.TAG="Transmuxer",this._emitter=new(l()),t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=d()(919),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},f.Z.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:f.Z.getConfig()})}catch(n){u.Z.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new p.Z(e,t)}else this._controller=new p.Z(e,t);var n;this._controller&&((n=this._controller).on(m.Z.IO_ERROR,this._onIOError.bind(this)),n.on(m.Z.DEMUX_ERROR,this._onDemuxError.bind(this)),n.on(m.Z.INIT_SEGMENT,this._onInitSegment.bind(this)),n.on(m.Z.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),n.on(m.Z.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),n.on(m.Z.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),n.on(m.Z.MEDIA_INFO,this._onMediaInfo.bind(this)),n.on(m.Z.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),n.on(m.Z.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),n.on(m.Z.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),n.on(m.Z.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)),n.on(m.Z.DEMUX_DATA,this._onDemuxData.bind(this)))}function O(){}e.Z.install();var t={createPlayer:function(e,t){if(null==e||"object"!=typeof e)throw new T.OC("MediaDataSource must be an javascript object!");if(e.hasOwnProperty("type"))return new("flv"===e.type?I:C)(e,t);throw new T.OC("MediaDataSource must has type field to indicate video file type!")},isSupported:function(){return a.supportMSEH264Playback()},getFeatureList:function(){return a.getFeatureList()}},M=(t.BaseLoader=o.fp,t.LoaderStatus=o.GM,t.LoaderErrors=o.nm,t.Events=h,t.ErrorTypes=w,t.ErrorDetails=R,t.FlvPlayer=I,t.NativePlayer=C,t.LoggingControl=f.Z,Object.defineProperty(t,"version",{enumerable:!0,get:function(){return"1.7.2"}}),t)},611:function(e,t,n){e.exports=n(319).default},979:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var a,i,r,o,s,l,u,c,h,d=n(240),f=(D.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},D.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(D.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return this._intervalBytes/(e=0==e?1:e)/1024},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),D),p=n(475),m=n(340),g=n(996),_=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(i){function e(e,t){var n=i.call(this,"fetch-stream-loader")||this;return n.TAG="FetchStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n._isLive=null,n}var t=e,n=i;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}return a(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r),e.isSupported=function(){try{var e=m.Z.msedge&&15048<=m.Z.version.minor,t=!m.Z.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}},e.prototype.destroy=function(){this.isWorking()&&this.abort(),i.prototype.destroy.call(this)},e.prototype.open=function(e,t){var n=this,i=(this._dataSource=e,this._range=t,e.url),r=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL),this._seekHandler.getConfig(i,t)),a=new self.Headers;if("object"==typeof r.headers){var o=r.headers;for(s in o)o.hasOwnProperty(s)&&a.append(s,o[s])}i={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==typeof this._config.headers)for(var s in this._config.headers)a.append(s,this._config.headers[s]);!1===e.cors&&(i.mode="same-origin"),e.withCredentials&&(i.credentials="include"),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,i.signal=this._abortController.signal),this._status=p.GM.kConnecting,self.fetch(r.url,i).then(function(e){if(n._requestAbort)n._status=p.GM.kIdle,e.body.cancel();else{var t;if(e.ok&&200<=e.status&&e.status<=299)return e.url!==r.url&&n._onURLRedirect&&(t=n._seekHandler.removeURLParameters(e.url),n._onURLRedirect(t)),null!=(t=e.headers.get("Content-Length"))?(n._contentLength=parseInt(t),0!==n._contentLength&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength),n._isLive=!1):n._isLive=!0,n._pump.call(n,e.body.getReader());if(n._status=p.GM.kError,!n._onError)throw new g.OZ("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}}).catch(function(e){if(!n._abortController||!n._abortController.signal.aborted){if(n._status=p.GM.kError,!n._onError)throw e;n._onError(p.nm.EXCEPTION,{code:-1,msg:e.message})}})},e.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==p.GM.kBuffering||!m.Z.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},e.prototype._pump=function(i){var r=this;return i.read().then(function(e){if(e.done)if(null!==r._contentLength&&r._receivedLength<r._contentLength){r._status=p.GM.kError;var t=p.nm.EARLY_EOF,n={code:-1,msg:"Fetch stream meet Early-EOF"};if(!r._onError)throw new g.OZ(n.msg);r._onError(t,n)}else r._status=p.GM.kComplete,r._onComplete&&r._onComplete(r._range.from,r._range.from+r._receivedLength-1);else if(r._abortController&&r._abortController.signal.aborted)r._status=p.GM.kComplete;else{if(!0===r._requestAbort)return r._status=p.GM.kComplete,i.cancel();r._status=p.GM.kBuffering;t=e.value.buffer,n=r._range.from+r._receivedLength;r._receivedLength+=t.byteLength,r._onDataArrival&&r._onDataArrival(t,n,r._receivedLength),r._pump(i)}}).catch(function(e){if(r._abortController&&r._abortController.signal.aborted)r._status=p.GM.kComplete;else if(11!==e.code||!m.Z.msedge){r._status=p.GM.kError;var t=0,n=null,n=19!==e.code&&"network error"!==e.message||!(null===r._contentLength||null!==r._contentLength&&r._receivedLength<r._contentLength)?(t=p.nm.EXCEPTION,{code:e.code,msg:e.message}):(t=p.nm.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!r._onError)throw new g.OZ(n.msg);r._onError(t,n)}})},e}(p.fp)),t=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=(c=p.fp,t(P,c),P.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return d.Z.w("MozChunkedLoader",e.message),!1}},P.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),c.prototype.destroy.call(this)},P.prototype.open=function(e,t){this._dataSource=e,this._range=t;var n=e.url,n=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL),this._seekHandler.getConfig(n,t)),i=(this._requestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="moz-chunked-arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onloadend=this._onLoadEnd.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);this._status=p.GM.kConnecting,i.send()},P.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=p.GM.kComplete},P.prototype._onReadyStateChange=function(e){var t,e=e.target;if(2===e.readyState)if(null!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect&&(t=this._seekHandler.removeURLParameters(e.responseURL),this._onURLRedirect(t)),0!==e.status&&(e.status<200||299<e.status)){if(this._status=p.GM.kError,!this._onError)throw new g.OZ("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=p.GM.kBuffering},P.prototype._onProgress=function(e){var t;this._status!==p.GM.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength),e=e.target.response,t=this._range.from+this._receivedLength,this._receivedLength+=e.byteLength,this._onDataArrival)&&this._onDataArrival(e,t,this._receivedLength)},P.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==p.GM.kError&&(this._status=p.GM.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1):this._requestAbort=!1},P.prototype._onXhrError=function(e){this._status=p.GM.kError;var t=0,n=null,n=this._contentLength&&e.loaded<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=p.nm.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(n.msg);this._onError(t,n)},P),n=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),t=(l=p.fp,n(L,l),L.isSupported=function(){try{var e;return void 0===self.MSStream||void 0===self.MSStreamReader?!1:((e=new XMLHttpRequest).open("GET","https://example.com",!0),(e.responseType="ms-stream")===e.responseType)}catch(e){return d.Z.w("MSStreamLoader",e.message),!1}},L.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),l.prototype.destroy.call(this)},L.prototype.open=function(e,t){this._internalOpen(e,t,!1)},L.prototype._internalOpen=function(e,t,n){this._dataSource=e,n?this._currentRange=t:this._totalRange=t;var n=e.url,n=(this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL)),this._seekHandler.getConfig(n,t)),t=(this._currentRequestURL=n.url,this._reader=new self.MSStreamReader),i=(t.onprogress=this._msrOnProgress.bind(this),t.onload=this._msrOnLoad.bind(this),t.onerror=this._msrOnError.bind(this),this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="ms-stream",i.onreadystatechange=this._xhrOnReadyStateChange.bind(this),i.onerror=this._xhrOnError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);this._isReconnecting?this._isReconnecting=!1:this._status=p.GM.kConnecting,i.send()},L.prototype.abort=function(){this._internalAbort(),this._status=p.GM.kComplete},L.prototype._internalAbort=function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},L.prototype._xhrOnReadyStateChange=function(e){e=e.target;if(2===e.readyState)if(200<=e.status&&e.status<=299){this._status=p.GM.kBuffering,null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t);var t=e.getResponseHeader("Content-Length");null!=t&&null==this._contentLength&&0<(t=parseInt(t))&&(this._contentLength=t,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength)}else{if(this._status=p.GM.kError,!this._onError)throw new g.OZ("MSStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else 3===e.readyState&&200<=e.status&&e.status<=299&&(this._status=p.GM.kBuffering,t=e.response,this._reader.readAsArrayBuffer(t))},L.prototype._xhrOnError=function(e){this._status=p.GM.kError;var t=p.nm.EXCEPTION,e={code:-1,msg:e.constructor.name+" "+e.type};if(!this._onError)throw new g.OZ(e.msg);this._onError(t,e)},L.prototype._msrOnProgress=function(e){var t,n,e=e.target.result;null!=e?(t=e.slice(this._lastTimeBufferSize),this._lastTimeBufferSize=e.byteLength,n=this._totalRange.from+this._receivedLength,this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength),e.byteLength>=this._bufferLimit&&(d.Z.v(this.TAG,"MSStream buffer exceeded max size near ".concat(n+t.byteLength,", reconnecting...")),this._doReconnectIfNeeded())):this._doReconnectIfNeeded()},L.prototype._doReconnectIfNeeded=function(){var e;(null==this._contentLength||this._receivedLength<this._contentLength)&&(this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort(),e={from:this._totalRange.from+this._receivedLength,to:-1},this._internalOpen(this._dataSource,e,!0))},L.prototype._msrOnLoad=function(e){this._status=p.GM.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},L.prototype._msrOnError=function(e){this._status=p.GM.kError;var t=0,n=null,n=this._contentLength&&this._receivedLength<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"MSStream meet Early-Eof"}):(t=p.nm.EARLY_EOF,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(n.msg);this._onError(t,n)},s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=(o=p.fp,t(C,o),C.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return d.Z.w("RangeLoader",e.message),!1}},C.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),o.prototype.destroy.call(this)},Object.defineProperty(C.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),C.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=p.GM.kConnecting;e=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(e=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||e?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},C.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,e=t+e;null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)},C.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var n=e.url,n=(this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL)),this._seekHandler.getConfig(n,t)),i=(this._currentRequestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onload=this._onLoad.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);i.send()},C.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=p.GM.kComplete},C.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},C.prototype._onReadyStateChange=function(e){var t,e=e.target;if(2===e.readyState)if(null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t),200<=e.status&&e.status<=299)this._waitForTotalLength||(this._status=p.GM.kBuffering);else{if(this._status=p.GM.kError,!this._onError)throw new g.OZ("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}},C.prototype._onProgress=function(e){if(this._status!==p.GM.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,t=this._totalLengthReceived=!0,n=e.total,this._internalAbort(),null!=n&0!==n)&&(this._totalLength=n),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var n=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(n)}},C.prototype._normalizeSpeed=function(e){var t,n=this._chunkSizeKBList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},C.prototype._onLoad=function(e){var t,n;this._status!==p.GM.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)!==(t=0===(t=this._speedSampler.lastSecondKBps)&&(this._zeroSpeedChunkCount++,3<=this._zeroSpeedChunkCount)?this._speedSampler.currentKBps:t)&&(t=this._normalizeSpeed(t),this._currentSpeedNormalized!==t)&&(this._currentSpeedNormalized=t,this._currentChunkSizeKB=t),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,n=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():n=!0,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),n&&(this._status=p.GM.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))},C.prototype._onXhrError=function(e){this._status=p.GM.kError;var t=0,n=null,n=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=p.nm.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(n.msg);this._onError(t,n)},C),n=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=(i=p.fp,n(I,i),I.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},I.prototype.destroy=function(){this._ws&&this.abort(),i.prototype.destroy.call(this)},I.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=p.GM.kConnecting}catch(e){this._status=p.GM.kError;t={code:e.code,msg:e.message};if(!this._onError)throw new g.OZ(t.msg);this._onError(p.nm.EXCEPTION,t)}},I.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=p.GM.kComplete},I.prototype._onWebSocketOpen=function(e){this._status=p.GM.kBuffering},I.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=p.GM.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},I.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{this._status=p.GM.kError;e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new g.OZ(e.msg);this._onError(p.nm.EXCEPTION,e)}},I.prototype._dispatchArrayBuffer=function(e){var t=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,t,this._receivedLength)},I.prototype._onWebSocketError=function(e){this._status=p.GM.kError;e={code:e.code,msg:e.message};if(!this._onError)throw new g.OZ(e.msg);this._onError(p.nm.EXCEPTION,e)},I),A=(R.prototype.getConfig=function(e,t){var n,i={};return 0!==t.from||-1!==t.to?(n=void 0,n=-1!==t.to?"bytes=".concat(t.from.toString(),"-").concat(t.to.toString()):"bytes=".concat(t.from.toString(),"-"),i.Range=n):this._zeroStart&&(i.Range="bytes=0-"),{url:e,headers:i}},R.prototype.removeURLParameters=function(e){return e},R),b=(w.prototype.getConfig=function(e,t){var n;return 0===t.from&&-1===t.to||(n=!0,-1===e.indexOf("?")&&(e+="?",n=!1),n&&(e+="&"),e+="".concat(this._startName,"=").concat(t.from.toString()),-1!==t.to&&(e+="&".concat(this._endName,"=").concat(t.to.toString()))),{url:e,headers:{}}},w.prototype.removeURLParameters=function(e){var t=e.split("?")[0],n=void 0,i=e.indexOf("?"),r="";if(null!=(n=-1!==i?e.substring(i+1):n)&&0<n.length)for(var a=n.split("&"),o=0;o<a.length;o++){var s=a[o].split("=");s[0]!==this._startName&&s[0]!==this._endName&&(0<o&&(r+="&"),r+=a[o])}return 0===r.length?t:t+"?"+r},w),T=(S.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},S.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},S.prototype.isPaused=function(){return this._paused},Object.defineProperty(S.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentSpeed",{get:function(){return this._loaderClass===v?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),S.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new A(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new b(t,n)}else{if("custom"!==e.seekType)throw new g.OC("Invalid seekType in config: ".concat(e.seekType));if("function"!=typeof e.customSeekHandler)throw new g.OC("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},S.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=E;else if(_.isSupported())this._loaderClass=_;else if(y.isSupported())this._loaderClass=y;else{if(!v.isSupported())throw new g.OZ("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=v}},S.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},S.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},S.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},S.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},S.prototype.resume=function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))},S.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},S.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;t={from:e,to:-1};this._currentRange={from:t.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,t),this._onSeeked&&this._onSeeked()},S.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new g.OC("Url must be a non-empty string!");this._dataSource.url=e},S.prototype._expandBuffer=function(e){for(var t,n,i=this._stashSize;i+1048576<e;)i*=2;(i+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(i),0<this._stashUsed&&(n=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,i).set(n,0)),this._stashBuffer=t,this._bufferSize=i)},S.prototype._normalizeSpeed=function(e){var t,n=this._speedNormalizeList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},S.prototype._adjustStashSize=function(e){var t=0,e=1024*(t=8192<(t=this._config.isLive||e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)?8192:t)+1048576;this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t},S.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},S.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},S.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},S.prototype._onLoaderChunkArrival=function(e,t,n){if(!this._onDataArrival)throw new g.rT("IOController: No existing consumer (onDataArrival) callback!");var i,r,a,o,s;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof)&&this._onRecoveredEarlyEof(),this._speedSampler.addBytes(e.byteLength),0!==(i=this._speedSampler.lastSecondKBps)&&(i=this._normalizeSpeed(i),this._speedNormalized!==i)&&(this._speedNormalized=i,this._adjustStashSize(i)),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?((a=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(a=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(i=this._stashBuffer.slice(0,this._stashUsed),(o=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?0<o&&(s=new Uint8Array(i,o),a.set(s,0),this._stashUsed=s.byteLength,this._stashByteStart+=o):(this._stashUsed=0,this._stashByteStart+=o),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&(this._expandBuffer(r),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o))):0===this._stashUsed?(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&this._expandBuffer(r),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(o=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<o&&(s=new Uint8Array(this._stashBuffer,o),a.set(s,0)),this._stashUsed-=o,this._stashByteStart+=o))},S.prototype._flushStashBuffer=function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),i=t.byteLength-n;if(n<t.byteLength){if(!e)return 0<n&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,n),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=n),0;d.Z.w(this.TAG,"".concat(i," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,i}return 0},S.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},S.prototype._onLoaderError=function(e,t){switch(d.Z.e(this.TAG,"Loader error, code = ".concat(t.code,", msg = ").concat(t.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=p.nm.UNRECOVERABLE_EARLY_EOF),e){case p.nm.EARLY_EOF:var n;if(!this._config.isLive&&this._totalLength)return void((n=this._currentRange.to+1)<this._totalLength&&(d.Z.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)));e=p.nm.UNRECOVERABLE_EARLY_EOF;case p.nm.UNRECOVERABLE_EARLY_EOF:case p.nm.CONNECTING_TIMEOUT:case p.nm.HTTP_STATUS_CODE_INVALID:case p.nm.EXCEPTION:}if(!this._onError)throw new g.OZ("IOException: "+t.msg);this._onError(e,t)},S);function S(e,t,n){this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=393216,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new f,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function w(e,t){this._startName=e,this._endName=t}function R(e){this._zeroStart=e||!1}function I(){var e=i.call(this,"websocket-loader")||this;return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function C(e,t){var n=o.call(this,"xhr-range-loader")||this;return n.TAG="RangeLoader",n._seekHandler=e,n._config=t,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new f,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}function L(e,t){var n=l.call(this,"xhr-msstream-loader")||this;return n.TAG="MSStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._reader=null,n._totalRange=null,n._currentRange=null,n._currentRequestURL=null,n._currentRedirectedURL=null,n._contentLength=null,n._receivedLength=0,n._bufferLimit=16777216,n._lastTimeBufferSize=0,n._isReconnecting=!1,n}function P(e,t){var n=c.call(this,"xhr-moz-chunked-loader")||this;return n.TAG="MozChunkedLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function D(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}},475:function(e,t,n){"use strict";n.d(t,{GM:function(){return r},fp:function(){return o},nm:function(){return a}});var i=n(996),r={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},a={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},o=(s.prototype.destroy=function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},s.prototype.isWorking=function(){return this._status===r.kConnecting||this._status===r.kBuffering},Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),s.prototype.open=function(e,t){throw new i.do("Unimplemented abstract function!")},s.prototype.abort=function(){throw new i.do("Unimplemented abstract function!")},s);function s(e){this._type=e||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},340:function(e,t){"use strict";var n,i,r={},a=self.navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0<=a.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(a)||[],a=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(android)/.exec(a)||/(windows)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||[],o={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",majorVersion:o[4]||o[2]||"0",platform:a[0]||""},a={};for(i in o.browser&&(a[o.browser]=!0,n=o.majorVersion.split("."),a.version={major:parseInt(o.majorVersion,10),string:o.version},1<n.length&&(a.version.minor=parseInt(n[1],10)),2<n.length)&&(a.version.build=parseInt(n[2],10)),o.platform&&(a[o.platform]=!0),(a.chrome||a.opr||a.safari)&&(a.webkit=!0),(a.rv||a.iemobile)&&(a.rv&&delete a.rv,o.browser="msie",a.msie=!0),a.edge&&(delete a.edge,o.browser="msedge",a.msedge=!0),a.opr&&(o.browser="opera",a.opera=!0),a.safari&&a.android&&(o.browser="android",a.android=!0),a.name=o.browser,a.platform=o.platform,r)r.hasOwnProperty(i)&&delete r[i];Object.assign(r,a),t.Z=r},996:function(e,t,n){"use strict";n.d(t,{OC:function(){return c},OZ:function(){return l},do:function(){return h},rT:function(){return u}});function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};Object.defineProperty(m.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),m.prototype.toString=function(){return this.name+": "+this.message};var r,a,o,s,l=m,u=(i(p,s=l),Object.defineProperty(p.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),p),c=(i(f,o=l),Object.defineProperty(f.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),f),h=(i(d,a=l),Object.defineProperty(d.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),d);function d(e){return a.call(this,e)||this}function f(e){return o.call(this,e)||this}function p(e){return s.call(this,e)||this}function m(e){this._message=e}},240:function(e,t,n){"use strict";var i=n(393),n=n.n(i),i=(r.e=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t);r.ENABLE_CALLBACK&&r.emitter.emit("log","error",e),r.ENABLE_ERROR&&!console.error&&console.warn},r.i=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t);r.ENABLE_CALLBACK&&r.emitter.emit("log","info",e),r.ENABLE_INFO&&console.info},r.w=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t);r.ENABLE_CALLBACK&&r.emitter.emit("log","warn",e),r.ENABLE_WARN&&console.warn},r.d=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t);r.ENABLE_CALLBACK&&r.emitter.emit("log","debug",e),r.ENABLE_DEBUG&&console.debug},r.v=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t);r.ENABLE_CALLBACK&&r.emitter.emit("log","verbose",e)},r);function r(){}i.GLOBAL_TAG="flv.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new(n()),t.Z=i},45:function(e,t,n){"use strict";var i=n(393),i=n.n(i),r=n(240),n=(Object.defineProperty(a,"forceGlobalTag",{get:function(){return r.Z.FORCE_GLOBAL_TAG},set:function(e){r.Z.FORCE_GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return r.Z.GLOBAL_TAG},set:function(e){r.Z.GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return r.Z.ENABLE_VERBOSE&&r.Z.ENABLE_DEBUG&&r.Z.ENABLE_INFO&&r.Z.ENABLE_WARN&&r.Z.ENABLE_ERROR},set:function(e){r.Z.ENABLE_VERBOSE=e,r.Z.ENABLE_DEBUG=e,r.Z.ENABLE_INFO=e,r.Z.ENABLE_WARN=e,r.Z.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return r.Z.ENABLE_DEBUG},set:function(e){r.Z.ENABLE_DEBUG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return r.Z.ENABLE_VERBOSE},set:function(e){r.Z.ENABLE_VERBOSE=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return r.Z.ENABLE_INFO},set:function(e){r.Z.ENABLE_INFO=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return r.Z.ENABLE_WARN},set:function(e){r.Z.ENABLE_WARN=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return r.Z.ENABLE_ERROR},set:function(e){r.Z.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:r.Z.GLOBAL_TAG,forceGlobalTag:r.Z.FORCE_GLOBAL_TAG,enableVerbose:r.Z.ENABLE_VERBOSE,enableDebug:r.Z.ENABLE_DEBUG,enableInfo:r.Z.ENABLE_INFO,enableWarn:r.Z.ENABLE_WARN,enableError:r.Z.ENABLE_ERROR,enableCallback:r.Z.ENABLE_CALLBACK}},a.applyConfig=function(e){r.Z.GLOBAL_TAG=e.globalTag,r.Z.FORCE_GLOBAL_TAG=e.forceGlobalTag,r.Z.ENABLE_VERBOSE=e.enableVerbose,r.Z.ENABLE_DEBUG=e.enableDebug,r.Z.ENABLE_INFO=e.enableInfo,r.Z.ENABLE_WARN=e.enableWarn,r.Z.ENABLE_ERROR=e.enableError,r.Z.ENABLE_CALLBACK=e.enableCallback},a._notifyChange=function(){var e,t=a.emitter;0<t.listenerCount("change")&&(e=a.getConfig(),t.emit("change",e))},a.registerListener=function(e){a.emitter.addListener("change",e)},a.removeListener=function(e){a.emitter.removeListener("change",e)},a.addLogListener=function(e){r.Z.emitter.addListener("log",e),0<r.Z.emitter.listenerCount("log")&&(r.Z.ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(e){r.Z.emitter.removeListener("log",e),0===r.Z.emitter.listenerCount("log")&&(r.Z.ENABLE_CALLBACK=!1,a._notifyChange())},a);function a(){}n.emitter=new(i()),t.Z=n},344:function(e,t,n){"use strict";r.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},"function"!=typeof self.Promise&&n(970).polyfill()};var i=r;function r(){}i.install(),t.Z=i}},r={},i.m=n,i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i(611))}.call(this,n(74))},function(e,t,n){"use strict";n.r(t),n.d(t,"NvMpegTsCore",function(){return r});var a=n(4),o=n(23);const s=n(5);n(29);const l=n(169),i=n(12);var r=class{constructor(e){this.configFormat={width:e.width||s.DEFAULT_WIDTH,height:e.height||s.DEFAULT_HEIGHT,playerId:e.playerId||s.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,duration:e.duration,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,audioNone:e.audioNone},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-jsmpegts",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=this.configFormat.duration/1e3||-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.vCodecID=s.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.isInitDecodeFrames=!1,this.reset_player=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1,this.checkStartIntervalCount=0,this.checkStartInterval=null,this.checkPicBlockInterval=null,this.bufferInterval=null,this.onPlayState=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onReadyShowDone=null,this.onCacheProcess=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.headers=e.headers,this.videoCodec=s.CODEC_H264,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}_reBuildMpegTsjs(e){this._releaseMpegTsjs(),this.makeIt(e)}_checkPicBlock(e){let t=this;this.checkPicBlockInterval=window.setInterval(function(){0<t.lastDecodedFrameTime&&1e4<i.GetMsTime()-t.lastDecodedFrameTime&&(window.clearInterval(t.checkPicBlockInterval),t.checkPicBlockInterval=null,t._reBuildMpegTsjs(e))},1e3)}_checkLoadState(e){let t=this;this.checkStartIntervalCount=0,this.checkStartInterval=window.setInterval(function(){!1!==t.isInitDecodeFrames?(t.checkStartIntervalCount=0,window.clearInterval(t.checkStartInterval),t.checkStartInterval=null):(t.checkStartIntervalCount+=1,20<t.checkStartIntervalCount&&(window.clearInterval(t.checkStartInterval),t.checkStartIntervalCount=0,t.checkStartInterval=null,!1===t.isInitDecodeFrames)&&t._reBuildMpegTsjs(e))},500)}init_player(i,e){let r=this;var t={type:"mpegts",url:i,duration:this.configFormat.duration,isLive:!1},n={hasVideo:!0,hasAudio:!(!0===this.configFormat.audioNone),isLive:this.configFormat.duration<=0,withCredentials:!1,seekType:"range",cors:!0,stashInitialSize:3145728,headers:this.headers};this.myPlayer=l.createPlayer(t,n),this.myPlayer.attachMediaElement(this.videoTag),this.myPlayer.on(l.Events.MEDIA_INFO,function(e){var t;!1===r.isInitDecodeFrames&&(setTimeout(()=>{r.VrPlayer&&r.VrPlayer.loadVideo&&r.VrPlayer.loadVideo()},1e3),r.isInitDecodeFrames=!0,r.width=Math.max(r.videoTag.videoWidth,e.width),r.height=Math.max(r.videoTag.videoHeight,e.height),r.videoCodec=e.mimeType&&-1<e.mimeType.indexOf("hvc1")?s.CODEC_H265:s.CODEC_H264,r.videoTag.duration&&e.duration?r.videoTag.duration?r.duration=r.videoTag.duration:e.duration&&(r.duration=e.duration):r.duration=r.configFormat.duration/1e3,(e=document.querySelector("#"+r.configFormat.playerId)).getElementsByTagName("video")[0]||(t=e.getElementsByTagName("div"),r.VRPlugin)||e.insertBefore(r.videoTag,t[0]),r.onLoadFinish&&r.onLoadFinish(),!1===r.reset_player&&r.onReadyShowDone&&r.onReadyShowDone(),r._loopBufferState(),r.videoTag.onplay=function(){var e=r.isPlayingState();r.onPlayState&&r.onPlayState(e)},r.videoTag.ontimeupdate=()=>{var e;r.myPlayer&&(e=r.seekReadyPts||r.myPlayer.currentTime,r.onPlayingTime&&r.onPlayingTime(e),r.getFrameRate())},r.videoTag.onpause=function(){var e=r.isPlayingState();!1===r.reset_player&&r.onPlayState&&r.onPlayState(e)},r.duration!==1/0&&0<r.duration&&(r.videoTag.onended=()=>{r.onPlayingFinish&&r.onPlayingFinish()}),r.videoTag.onseeked=function(){r.onSeekFinish&&r.onSeekFinish(r.seekResult)})}),this.myPlayer.on(l.Events.SCRIPTDATA_ARRIVED,function(e){}),this.myPlayer.on(l.Events.ERROR,function(e,t,n){n.code===a.MsgCode.PLAY_ERROR?r.onError&&r.onError({msg:n,event:e,url:i,errorType:e}):r.myPlayer&&416!=n.code&&r._reBuildMpegTsjs(i)}),this.myPlayer.load(),e&&(this.pause(),this.seekReadyPts=e)}makeIt(e){let n=this;var t,i,r;this.url=e,l.isSupported()?(t=document.querySelector("#"+this.configFormat.playerId),this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",i=t.getElementsByTagName("video")[0],r=t.getElementsByTagName("div"),this.configFormat.repeatPlay&&(this.videoTag.setAttribute("loop","loop"),i)&&i.setAttribute("loop","loop"),i?this.VRPlugin||t.insertBefore(i,r[0]):r[0]&&!this.VRPlugin&&t.insertBefore(this.videoTag,r[0]),this.VRPlugin&&!this.VrPlayer&&(this.VrPlayer=new o.a({video:this.videoTag,container:t,autoPlay:this.configFormat.autoPlay},this.VRPlugin)),!0===this.configFormat.autoPlay&&(window.onclick=document.body.onclick=function(e){n.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.oncanplay=function(){var e,t;!1===n.isInitDecodeFrames&&(n.isInitDecodeFrames=!0,(e=document.querySelector("#"+n.configFormat.playerId)).getElementsByTagName("video")[0]||(t=e.getElementsByTagName("div"),n.VRPlugin)||e.insertBefore(n.videoTag,t[0]),n.onLoadFinish&&n.onLoadFinish(),n.onReadyShowDone&&n.onReadyShowDone(),n._loopBufferState(),n.videoTag.ontimeupdate=()=>{n.onPlayingTime&&n.onPlayingTime(n.myPlayer.currentTime)},n.duration!==1/0)&&0<n.duration&&(n.videoTag.onended=()=>{n.onPlayingFinish&&n.onPlayingFinish()})},this.seekReadyPts?this.init_player(e,this.seekReadyPts):this.init_player(e),this._checkLoadState(e),this._checkPicBlock(e),n.onMakeItReady&&n.onMakeItReady()):n.onError&&n.onError({msg:a.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:a.ErrorTypes.NOT_SUPPORT,event:a.ErrorEvent.ERROR,url:e})}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.height}}play(){this.myPlayer.play()}reload_mpegts(e){this.reset_player=!0,this.myPlayer.unload(),this.myPlayer.load(),this.onLoadFinish&&this.onLoadFinish(!1),this.pause(),this.seekReadyPts=e}seek(e){var t,n,i;if(!(e>=this.duration))return this.videoTag.muted=!0,(i=this.videoTag.buffered).length?(t=i.length-1,n=i.end(t),i=i.start(t),n-1<=e?(this.seekReadyPts||(this.seekReadyPts=e),this.myPlayer.currentTime=parseFloat(n-.1),!(this.seekResult=!0)):i<=e?(this.onPlayingTime&&this.onPlayingTime(e-.1),this.myPlayer.currentTime=parseFloat(e),this.seekReadyPts&&this.seekReadyPts!==e&&(this.seekReadyPts=e),this.seekResult=!0):0==e&&0<=i?(this.myPlayer.currentTime=parseFloat(e),this.seekResult=!0):(this.reset_player||this.reload_mpegts(e),!1)):(this.reset_player||this.reload_mpegts(e),!1)}pause(){this.myPlayer&&this.myPlayer.pause()}setVoice(e){this.videoTag.volume=e}isPlayingState(){return!this.videoTag.paused}_loopBufferState(){let r=this;r.duration<=0&&r.videoTag.duration&&(r.duration=r.videoTag.duration),null!==r.bufferInterval&&(window.clearInterval(r.bufferInterval),r.bufferInterval=null),r.bufferInterval=window.setInterval(function(){if(r.configFormat.duration<=0)window.clearInterval(r.bufferInterval);else{var t,n=r.videoTag.buffered.length,i=r.videoTag.buffered.end.length,n=i<n?n:i;let e;(e=r.videoTag.buffered.length?r.videoTag.buffered.end(n-1):e)>=r.duration-.04&&(r.onCacheProcess&&r.onCacheProcess(r.duration),r.cacheCompleted=!0,window.clearInterval(r.bufferInterval)),r.onCacheProcess&&r.onCacheProcess(e),r.seekReadyPts&&e>r.seekReadyPts?(t=r.seek(r.seekReadyPts),(r.seekResult=t)&&(r.videoTag.paused&&(r.play(),r.videoTag.muted&&(r.videoTag.muted=!1),r.reset_player=!1),r.seekReadyPts=null)):r.seekReadyPts&&e<=r.seekReadyPts&&(t=r.seek(e-.1),r.seekResult=t)}},200)}_releaseMpegTsjs(){this.myPlayer&&(this.myPlayer.pause(),this.myPlayer.unload(),this.myPlayer.detachMediaElement(),this.myPlayer.destroy(),this.myPlayer=null),this.videoTag&&(this.videoTag.remove(),this.videoTag=null),null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1}getMediaInfo(){if(!this.myPlayer||!this.myPlayer._mediaInfo||!this.myPlayer._statisticsInfo)return null;var e,t={video:{width:"width",height:"height",codec:"videoCodec",frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"ts_live":"ts_vod",demuxStyle:"ts",bitRate:"speed"},audio:{bitRate:"speed",sampleRate:"audioSampleRate",codec:this.getAudioCodec()}},n=Object.assign(this.myPlayer._mediaInfo,this.myPlayer._statisticsInfo);for(e in t){var i,r=t[e];for(i in r)n[r[i]]&&(t[e][i]=n[r[i]])}return t}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getAudioCodec(){return this.myPlayer._transmuxer&&this.myPlayer._transmuxer._controller._demuxer.audio_metadata_&&this.myPlayer._transmuxer._controller._demuxer.audio_metadata_.codec}release(){null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this._releaseMpegTsjs(),this.myPlayerID=null,this.videoContaner=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,window.onclick=document.body.onclick=null}}},function(e,t,n){function r(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var i,a;window,e.exports=(i=[function(e,t,n){"use strict";var i=n(6),n=n.n(i),i=(r.e=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t;r.ENABLE_CALLBACK&&r.emitter.emit("log","error",e),r.ENABLE_ERROR&&!console.error&&console.warn},r.i=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t;r.ENABLE_CALLBACK&&r.emitter.emit("log","info",e),r.ENABLE_INFO&&console.info},r.w=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t;r.ENABLE_CALLBACK&&r.emitter.emit("log","warn",e),r.ENABLE_WARN&&console.warn},r.d=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t;r.ENABLE_CALLBACK&&r.emitter.emit("log","debug",e),r.ENABLE_DEBUG&&console.debug},r.v=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t;r.ENABLE_CALLBACK&&r.emitter.emit("log","verbose",e)},r);function r(){}i.GLOBAL_TAG="mpegts.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new n.a,t.a=i},function(e,t,n){"use strict";t.a={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var i=n(3),r={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},a={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},o=(s.prototype.destroy=function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},s.prototype.isWorking=function(){return this._status===r.kConnecting||this._status===r.kBuffering},Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),s.prototype.open=function(e,t){throw new i.c("Unimplemented abstract function!")},s.prototype.abort=function(){throw new i.c("Unimplemented abstract function!")},s);function s(e){this._type=e||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return h});function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)};Object.defineProperty(m.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),m.prototype.toString=function(){return this.name+": "+this.message};var r,a,o,s,l=m,u=(i(p,s=l),Object.defineProperty(p.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),p),c=(i(f,o=l),Object.defineProperty(f.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),f),h=(i(d,a=l),Object.defineProperty(d.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),d);function d(e){return a.call(this,e)||this}function f(e){return o.call(this,e)||this}function p(e){return s.call(this,e)||this}function m(e){this._message=e}},function(e,t,n){"use strict";var i,r,a={},o=self.navigator.userAgent.toLowerCase(),s=/(edge)\/([\w.]+)/.exec(o)||/(opr)[\/]([\w.]+)/.exec(o)||/(chrome)[ \/]([\w.]+)/.exec(o)||/(iemobile)[\/]([\w.]+)/.exec(o)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||0<=o.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(o)||o.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(o)||[],o=/(ipad)/.exec(o)||/(ipod)/.exec(o)||/(windows phone)/.exec(o)||/(iphone)/.exec(o)||/(kindle)/.exec(o)||/(android)/.exec(o)||/(windows)/.exec(o)||/(mac)/.exec(o)||/(linux)/.exec(o)||/(cros)/.exec(o)||[],s={browser:s[5]||s[3]||s[1]||"",version:s[2]||s[4]||"0",majorVersion:s[4]||s[2]||"0",platform:o[0]||""},o={};for(r in s.browser&&(o[s.browser]=!0,i=s.majorVersion.split("."),o.version={major:parseInt(s.majorVersion,10),string:s.version},1<i.length&&(o.version.minor=parseInt(i[1],10)),2<i.length)&&(o.version.build=parseInt(i[2],10)),s.platform&&(o[s.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),(o.rv||o.iemobile)&&(o.rv&&delete o.rv,s.browser="msie",o.msie=!0),o.edge&&(delete o.edge,s.browser="msedge",o.msedge=!0),o.opr&&(s.browser="opera",o.opera=!0),o.safari&&o.android&&(s.browser="android",o.android=!0),o.name=s.browser,o.platform=s.platform,a)a.hasOwnProperty(r)&&delete a[r];Object.assign(a,o),t.a=a},function(e,t,n){"use strict";t.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(e,t,n){"use strict";var i="object"==typeof Reflect?Reflect:null,l=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(r,a){return new Promise(function(e,t){function n(e){r.removeListener(a,i),t(e)}function i(){"function"==typeof r.removeListener&&r.removeListener("error",n),e([].slice.call(arguments))}g(r,a,i,{once:!0}),"error"!==a&&"function"==typeof r.on&&g(r,"error",n,{once:!0})})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,a;return u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=c(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function d(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function f(e,t,n){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return m(e,e.length)}}function p(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(n,i,r,a){if("function"==typeof n.on)a.once?n.once(i,r):n.on(i,r);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(i,function e(t){a.once&&n.removeEventListener(i,e),r(t)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){if((a=0<t.length?t[0]:a)instanceof Error)throw a;i=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw i.context=a,i}var a=r[e];if(void 0===a)return!1;if("function"==typeof a)l(a,this,t);else for(var o=a.length,s=m(a,o),n=0;n<o;++n)l(s[n],this,t);return!0},o.prototype.on=o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},o.prototype.off=o.prototype.removeListener=function(e,t){var n,i,r,a,o;if(u(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{var s=n;var l=r;for(;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.removeAllListeners=function(e){var t,n;if(void 0!==(n=this._events))if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o});var i=function(e,t,n,i,r){this.dts=e,this.pts=t,this.duration=n,this.originalDts=i,this.isSyncPoint=r,this.fileposition=null},r=(u.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},u),a=(l.prototype.clear=function(){this._list=[]},l.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},l.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t,n=this._list,i=0,r=n.length-1,a=0,o=r;for(e<n[0].dts&&(i=0,a=o+1);a<=o;){if((t=a+Math.floor((o-a)/2))===r||e>=n[t].dts&&e<n[t+1].dts){i=t;break}n[t].dts<e?a=t+1:o=t-1}return this._list[i]},l),o=(Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),s.prototype.isEmpty=function(){return 0===this._list.length},s.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},s.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var n,i=t.length-1,r=0,a=i,o=0;if(e<t[0].originalBeginDts)return-1;for(;r<=a;){if((n=r+Math.floor((a-r)/2))===i||e>t[n].lastSample.originalDts&&e<t[n+1].originalBeginDts){o=n;break}t[n].originalBeginDts<e?r=n+1:a=n-1}return o},s.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},s.prototype.append=function(e){var t=this._list,n=this._lastAppendLocation,i=0;-1!==n&&n<t.length&&e.originalBeginDts>=t[n].lastSample.originalDts&&(n===t.length-1||n<t.length-1&&e.originalBeginDts<t[n+1].originalBeginDts)?i=n+1:0<t.length&&(i=this._searchNearestSegmentBefore(e.originalBeginDts)+1),this._lastAppendLocation=i,this._list.splice(i,0,e)},s.prototype.getLastSegmentBefore=function(e){e=this._searchNearestSegmentBefore(e);return 0<=e?this._list[e]:null},s.prototype.getLastSampleBefore=function(e){e=this.getLastSegmentBefore(e);return null!=e?e.lastSample:null},s.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&0<t;)n=this._list[--t].syncPoints;return 0<n.length?n[n.length-1]:null},s);function s(e){this._type=e,this._list=[],this._lastAppendLocation=-1}function l(){this._list=[]}function u(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}},function(e,t,n){"use strict";function i(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}i.prototype.isComplete=function(){var e=null!==this.hasAudio||!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!==this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&e&&t},i.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},i.prototype.getNearestKeyframe=function(e){var t;return null==this.keyframesIndex?null:(t=this.keyframesIndex,{index:e=this._search(t.times,e),milliseconds:t.times[e],fileposition:t.filepositions[e]})},i.prototype._search=function(e,t){var n,i=0,r=e.length-1,a=0,o=r;for(t<e[0]&&(i=0,a=o+1);a<=o;){if((n=a+Math.floor((o-a)/2))===r||t>=e[n]&&t<e[n+1]){i=n;break}e[n]<t?a=n+1:o=n-1}return i},t.a=i},function(e,t,n){"use strict";var i=n(6),i=n.n(i),r=n(0),n=(Object.defineProperty(a,"forceGlobalTag",{get:function(){return r.a.FORCE_GLOBAL_TAG},set:function(e){r.a.FORCE_GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return r.a.GLOBAL_TAG},set:function(e){r.a.GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return r.a.ENABLE_VERBOSE&&r.a.ENABLE_DEBUG&&r.a.ENABLE_INFO&&r.a.ENABLE_WARN&&r.a.ENABLE_ERROR},set:function(e){r.a.ENABLE_VERBOSE=e,r.a.ENABLE_DEBUG=e,r.a.ENABLE_INFO=e,r.a.ENABLE_WARN=e,r.a.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return r.a.ENABLE_DEBUG},set:function(e){r.a.ENABLE_DEBUG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return r.a.ENABLE_VERBOSE},set:function(e){r.a.ENABLE_VERBOSE=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return r.a.ENABLE_INFO},set:function(e){r.a.ENABLE_INFO=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return r.a.ENABLE_WARN},set:function(e){r.a.ENABLE_WARN=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return r.a.ENABLE_ERROR},set:function(e){r.a.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:r.a.GLOBAL_TAG,forceGlobalTag:r.a.FORCE_GLOBAL_TAG,enableVerbose:r.a.ENABLE_VERBOSE,enableDebug:r.a.ENABLE_DEBUG,enableInfo:r.a.ENABLE_INFO,enableWarn:r.a.ENABLE_WARN,enableError:r.a.ENABLE_ERROR,enableCallback:r.a.ENABLE_CALLBACK}},a.applyConfig=function(e){r.a.GLOBAL_TAG=e.globalTag,r.a.FORCE_GLOBAL_TAG=e.forceGlobalTag,r.a.ENABLE_VERBOSE=e.enableVerbose,r.a.ENABLE_DEBUG=e.enableDebug,r.a.ENABLE_INFO=e.enableInfo,r.a.ENABLE_WARN=e.enableWarn,r.a.ENABLE_ERROR=e.enableError,r.a.ENABLE_CALLBACK=e.enableCallback},a._notifyChange=function(){var e,t=a.emitter;0<t.listenerCount("change")&&(e=a.getConfig(),t.emit("change",e))},a.registerListener=function(e){a.emitter.addListener("change",e)},a.removeListener=function(e){a.emitter.removeListener("change",e)},a.addLogListener=function(e){r.a.emitter.addListener("log",e),0<r.a.emitter.listenerCount("log")&&(r.a.ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(e){r.a.emitter.removeListener("log",e),0===r.a.emitter.listenerCount("log")&&(r.a.ENABLE_CALLBACK=!1,a._notifyChange())},a);function a(){}n.emitter=new i.a,t.a=n},function(L,x,e){"use strict";var t=e(6),N=e.n(t),P=e(0),D=e(4),i=e(8);function o(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!=(192&i[++t]))return;return 1}}function F(e){for(var t,n=[],i=e,r=0,a=e.length;r<a;){if(i[r]<128)n.push(String.fromCharCode(i[r]));else{if(!(i[r]<192))if(i[r]<224){if(o(i,r,1)&&128<=(t=(31&i[r])<<6|63&i[r+1])){n.push(String.fromCharCode(65535&t)),r+=2;continue}}else if(i[r]<240){if(o(i,r,2)&&2048<=(t=(15&i[r])<<12|(63&i[r+1])<<6|63&i[r+2])&&55296!=(63488&t)){n.push(String.fromCharCode(65535&t)),r+=3;continue}}else if(i[r]<248)if(o(i,r,3)&&65536<(t=(7&i[r])<<18|(63&i[r+1])<<12|(63&i[r+2])<<6|63&i[r+3])&&t<1114112){t-=65536,n.push(String.fromCharCode(t>>>10|55296)),n.push(String.fromCharCode(1023&t|56320)),r+=4;continue}n.push(String.fromCharCode(65533))}++r}return n.join("")}var _=e(3),y=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),B=(E.parseScriptData=function(e,t,n){var i={};try{var r=E.parseValue(e,t,n),a=E.parseValue(e,t+r.size,n-r.size);i[r.data]=a.data}catch(e){P.a.e("AMF",e.toString())}return i},E.parseObject=function(e,t,n){if(n<3)throw new _.a("Data not enough when parse ScriptDataObject");var i=E.parseString(e,t,n),e=E.parseValue(e,t+i.size,n-i.size),t=e.objectEnd;return{data:{name:i.data,value:e.data},size:i.size+e.size,objectEnd:t}},E.parseVariable=function(e,t,n){return E.parseObject(e,t,n)},E.parseString=function(e,t,n){if(n<2)throw new _.a("Data not enough when parse String");n=new DataView(e,t,n).getUint16(0,!y);return{data:0<n?F(new Uint8Array(e,t+2,n)):"",size:2+n}},E.parseLongString=function(e,t,n){if(n<4)throw new _.a("Data not enough when parse LongString");n=new DataView(e,t,n).getUint32(0,!y);return{data:0<n?F(new Uint8Array(e,t+4,n)):"",size:4+n}},E.parseDate=function(e,t,n){if(n<10)throw new _.a("Data size invalid when parse Date");e=new DataView(e,t,n),t=e.getFloat64(0,!y),n=e.getInt16(8,!y);return{data:new Date(t+=60*n*1e3),size:10}},E.parseValue=function(e,t,n){if(n<1)throw new _.a("Data not enough when parse Value");var i=new DataView(e,t,n),r=1,a=i.getUint8(0),o=!1;try{switch(a){case 0:l=i.getFloat64(1,!y),r+=8;break;case 1:l=!!i.getUint8(1),r+=1;break;case 2:var s=E.parseString(e,t+1,n-1),l=s.data;r+=s.size;break;case 3:l={};var u=0;for(9==(16777215&i.getUint32(n-4,!y))&&(u=3);r<n-4;){var c=E.parseObject(e,t+r,n-r-u);if(c.objectEnd)break;l[c.data.name]=c.data.value,r+=c.size}r<=n-3&&9==(16777215&i.getUint32(r-1,!y))&&(r+=3);break;case 8:for(l={},r+=4,u=0,9==(16777215&i.getUint32(n-4,!y))&&(u=3);r<n-8;){var h=E.parseVariable(e,t+r,n-r-u);if(h.objectEnd)break;l[h.data.name]=h.data.value,r+=h.size}r<=n-3&&9==(16777215&i.getUint32(r-1,!y))&&(r+=3);break;case 9:r=1,o=!(l=void 0);break;case 10:l=[];var d=i.getUint32(1,!y);r+=4;for(var f=0;f<d;f++){var p=E.parseValue(e,t+r,n-r);l.push(p.data),r+=p.size}break;case 11:var m=E.parseDate(e,t+1,n-1);l=m.data,r+=m.size;break;case 12:var g=E.parseString(e,t+1,n-1);l=g.data,r+=g.size;break;default:r=n,P.a.w("AMF","Unsupported AMF value type "+a)}}catch(e){P.a.e("AMF",e.toString())}return{data:l,size:r,objectEnd:o}},E),ne=(n.prototype.destroy=function(){this._buffer=null},n.prototype._fillCurrentWord=function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new _.a("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,e),t=new Uint8Array(4);t.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(t.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e},n.prototype.readBits=function(e){if(32<e)throw new _.b("ExpGolomb: readBits() bits exceeded max 32bits!");var t,n;return e<=this._current_word_bits_left?(t=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t):(t=this._current_word_bits_left?this._current_word:0,t>>>=32-this._current_word_bits_left,e=e-this._current_word_bits_left,this._fillCurrentWord(),e=Math.min(e,this._current_word_bits_left),n=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t<<e|n)},n.prototype.readBool=function(){return 1===this.readBits(1)},n.prototype.readByte=function(){return this.readBits(8)},n.prototype._skipLeadingZero=function(){for(var e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},n.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},n.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},n),U=(O._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},O.parseSPS=function(e){for(var t=e.subarray(1,4),n="avc1.",i=0;i<3;i++){var r=t[i].toString(16);n+=r=r.length<2?"0"+r:r}var e=O._ebsp2rbsp(e),a=new ne(e),e=(a.readByte(),a.readByte()),o=(a.readByte(),a.readByte()),s=(a.readUEG(),O.getProfileString(e)),l=O.getLevelString(o),u=1,c=420,h=8,d=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(3===(u=a.readUEG())&&a.readBits(1),u<=3&&(c=[0,420,422,444][u]),h=a.readUEG()+8,d=a.readUEG()+8,a.readBits(1),a.readBool()))for(var f=3!==u?8:12,p=0;p<f;p++)a.readBool()&&O._skipScalingList(a,p<6?16:64);a.readUEG();var m=a.readUEG();if(0===m)a.readUEG();else if(1===m){a.readBits(1),a.readSEG(),a.readSEG();for(var g=a.readUEG(),p=0;p<g;p++)a.readSEG()}var m=a.readUEG(),_=(a.readBits(1),a.readUEG()),y=a.readUEG(),v=a.readBits(1),E=(0===v&&a.readBits(1),a.readBits(1),0),A=0,b=0,T=0,S=(a.readBool()&&(E=a.readUEG(),A=a.readUEG(),b=a.readUEG(),T=a.readUEG()),1),w=1,R=0,I=!0,C=0,L=0,P=(a.readBool()&&(a.readBool()&&(0<(D=a.readByte())&&D<16?(S=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][D-1],w=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][D-1]):255===D&&(S=a.readByte()<<8|a.readByte(),w=a.readByte()<<8|a.readByte())),a.readBool()&&a.readBool(),a.readBool()&&(a.readBits(4),a.readBool())&&a.readBits(24),a.readBool()&&(a.readUEG(),a.readUEG()),a.readBool())&&(D=a.readBits(32),P=a.readBits(32),I=a.readBool(),R=(C=P)/(L=2*D)),1),D=(1===S&&1===w||(P=S/w),0),k=0,k=0===u?(D=1,2-v):(D=3===u?1:2,(1===u?2:1)*(2-v)),_=16*(_+1),y=16*(y+1)*(2-v),v=(_-=(E+A)*D,y-=(b+T)*k,Math.ceil(_*P));return a.destroy(),a=null,{codec_mimetype:n,profile_idc:e,level_idc:o,profile_string:s,level_string:l,chroma_format_idc:u,bit_depth:h,bit_depth_luma:h,bit_depth_chroma:d,ref_frames:m,chroma_format:c,chroma_format_string:O.getChromaFormatString(c),frame_rate:{fixed:I,fps:R,fps_den:L,fps_num:C},sar_ratio:{width:S,height:w},codec_size:{width:_,height:y},present_size:{width:v,height:y}}},O._skipScalingList=function(e,t){for(var n=8,i=8,r=0;r<t;r++)n=0===(i=0!==i?(n+e.readSEG()+256)%256:i)?n:i},O.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},O.getLevelString=function(e){return(e/10).toFixed(1)},O.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},O),A=e(5),v=(ie._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},ie.parseVPS=function(e){e=ie._ebsp2rbsp(e),e=new ne(e);return e.readByte(),e.readByte(),e.readBits(4),e.readBits(2),e.readBits(6),{num_temporal_layers:e.readBits(3)+1,temporal_id_nested:e.readBool()}},ie.parseSPS=function(e){var e=ie._ebsp2rbsp(e),t=new ne(e);t.readByte(),t.readByte();for(var e=0,n=0,i=0,r=0,a=(t.readBits(4),t.readBits(3)),N=(t.readBool(),t.readBits(2)),F=t.readBool(),o=t.readBits(5),B=t.readByte(),U=t.readByte(),j=t.readByte(),G=t.readByte(),V=t.readByte(),H=t.readByte(),Y=t.readByte(),z=t.readByte(),W=t.readByte(),K=t.readByte(),s=t.readByte(),l=[],u=[],c=0;c<a;c++)l.push(t.readBool()),u.push(t.readBool());if(0<a)for(c=a;c<8;c++)t.readBits(2);for(c=0;c<a;c++)l[c]&&(t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte()),u[c]&&t.readByte();t.readUEG();var h=t.readUEG(),d=(3==h&&t.readBits(1),t.readUEG()),q=t.readUEG(),f=(t.readBool()&&(e+=t.readUEG(),n+=t.readUEG(),i+=t.readUEG(),r+=t.readUEG()),t.readUEG()),Q=t.readUEG(),X=t.readUEG();for(c=t.readBool()?0:a;c<=a;c++)t.readUEG(),t.readUEG(),t.readUEG();if(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBool()&&t.readBool())for(var p=0;p<4;p++)for(var m=0;m<(3===p?2:6);m++)if(t.readBool()){var J=Math.min(64,1<<4+(p<<1));for(1<p&&t.readSEG(),c=0;c<J;c++)t.readSEG()}else t.readUEG();t.readBool(),t.readBool(),t.readBool()&&(t.readByte(),t.readUEG(),t.readUEG(),t.readBool());var g=t.readUEG(),_=0;for(c=0;c<g;c++){var y=!1;if(y=0!==c?t.readBool():y){c===g&&t.readUEG(),t.readBool(),t.readUEG();for(var v=0,E=0;E<=_;E++){var A=t.readBool(),b=!1;A||(b=t.readBool()),(A||b)&&v++}_=v}else{for(var T=t.readUEG(),S=t.readUEG(),_=T+S,E=0;E<T;E++)t.readUEG(),t.readBool();for(E=0;E<S;E++)t.readUEG(),t.readBool()}}if(t.readBool())for(var Z=t.readUEG(),c=0;c<Z;c++){for(E=0;E<X+4;E++)t.readBits(1);t.readBits(1)}var w=0,R=1,I=1,$=!1,C=1,L=1;if(t.readBool(),t.readBool(),t.readBool()){if(t.readBool()&&(0<(x=t.readByte())&&x<=16?(R=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][x-1],I=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][x-1]):255===x&&(R=t.readBits(16),I=t.readBits(16))),t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(3),t.readBool(),t.readBool())&&(t.readByte(),t.readByte(),t.readByte()),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool(),t.readBool(),t.readBool(),t.readBool()&&(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG()),t.readBool()&&(C=t.readBits(32),L=t.readBits(32),t.readBool())&&(t.readUEG(),t.readBool())){var P=!1,D=t.readBool(),k=t.readBool();for((D||k)&&((P=t.readBool())&&(t.readByte(),t.readBits(5),t.readBool(),t.readBits(5)),t.readBits(4),t.readBits(4),P&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5)),c=0;c<=a;c++){var O=t.readBool(),$=O,ee=!1,M=1,te=!1;if((ee=O?ee:t.readBool())?t.readSEG():te=t.readBool(),te||(M=t.readUEG()+1),D)for(E=0;E<M;E++)t.readUEG(),t.readUEG(),P&&(t.readUEG(),t.readUEG());if(k)for(E=0;E<M;E++)t.readUEG(),t.readUEG(),P&&(t.readUEG(),t.readUEG())}}t.readBool()&&(t.readBool(),t.readBool(),t.readBool(),w=t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG())}t.readBool();var x="hvc1."+o+".1.L"+s+".B0",d=d-(e+n)*(1===h||2===h?2:1),e=q-(i+r)*(1===h?2:1),n=1!==R&&1!==I?R/I:1;return t.destroy(),t=null,{codec_mimetype:x,level_string:ie.getLevelString(s),profile_idc:o,bit_depth:f+8,ref_frames:1,chroma_format:h,chroma_format_string:ie.getChromaFormatString(h),general_level_idc:s,general_profile_space:N,general_tier_flag:F,general_profile_idc:o,general_profile_compatibility_flags_1:B,general_profile_compatibility_flags_2:U,general_profile_compatibility_flags_3:j,general_profile_compatibility_flags_4:G,general_constraint_indicator_flags_1:V,general_constraint_indicator_flags_2:H,general_constraint_indicator_flags_3:Y,general_constraint_indicator_flags_4:z,general_constraint_indicator_flags_5:W,general_constraint_indicator_flags_6:K,min_spatial_segmentation_idc:w,constant_frame_rate:0,chroma_format_idc:h,bit_depth_luma_minus8:f,bit_depth_chroma_minus8:Q,frame_rate:{fixed:$,fps:L/C,fps_den:C,fps_num:L},sar_ratio:{width:R,height:I},codec_size:{width:d,height:e},present_size:{width:d*n,height:e}}},ie.parsePPS=function(e){var e=ie._ebsp2rbsp(e),e=new ne(e),t=(e.readByte(),e.readByte(),e.readUEG(),e.readUEG(),e.readBool(),e.readBool(),e.readBits(3),e.readBool(),e.readBool(),e.readUEG(),e.readUEG(),e.readSEG(),e.readBool(),e.readBool(),e.readBool()&&e.readUEG(),e.readSEG(),e.readSEG(),e.readBool(),e.readBool(),e.readBool(),e.readBool(),e.readBool()),e=e.readBool(),n=1;return e&&t?n=0:e?n=3:t&&(n=2),{parallelismType:n}},ie.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},ie.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},ie.getLevelString=function(e){return(e/30).toFixed(1)},ie);function ie(){}function O(){}function n(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function E(){}function j(e){return e.byteOffset%2==0&&e.byteLength%2==0}function G(e){return e.byteOffset%4==0&&e.byteLength%4==0}function r(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function b(e,t){return e.byteLength===t.byteLength&&(G(e)&&G(t)?(n=t,r(new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4),new Uint32Array(n.buffer,n.byteOffset,n.byteLength/4))):j(e)&&j(t)?(n=t,r(new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2))):r(e,t));var n}function V(){this.program_pmt_pid={}}h.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},h.probe=function(e){var t,n,i,e=new Uint8Array(e);return e.byteLength<9?{needMoreData:!0}:(t={match:!1},70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3]||(n=(4&e[4])>>>2!=0,i=0!=(1&e[4]),(e=e[5]<<24|e[6]<<16|e[7]<<8|e[8])<9)?t:{match:!0,consumed:e,dataOffset:e,hasAudioTrack:n,hasVideoTrack:i})},h.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(h.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),h.prototype.resetMediaInfo=function(){this._mediaInfo=new i.a},h.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},h.prototype.parseChunks=function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new _.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0,i=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;n=h.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+n!==this._dataOffset&&P.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(r=new DataView(e,n)).getUint32(0,!i)&&P.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4);n<e.byteLength;){this._dispatch=!0;var r=new DataView(e,n);if(n+11+4>e.byteLength)break;var a=r.getUint8(0),o=16777215&r.getUint32(0,!i);if(n+11+o+4>e.byteLength)break;if(8===a||9===a||18===a){var s=r.getUint8(4),l=r.getUint8(5),u=r.getUint8(6)|l<<8|s<<16|r.getUint8(7)<<24,c=(0!=(16777215&r.getUint32(7,!i))&&P.a.w(this.TAG,"Meet tag which has StreamID != 0!"),n+11);switch(a){case 8:this._parseAudioData(e,c,o,u);break;case 9:this._parseVideoData(e,c,o,u,t+n);break;case 18:this._parseScriptData(e,c,o)}l=r.getUint32(11+o,!i);l!==11+o&&P.a.w(this.TAG,"Invalid PrevTagSize "+l)}else P.a.w(this.TAG,"Unsupported tag type "+a+", skipped");n+=11+o+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),n},h.prototype._parseScriptData=function(e,t,n){e=B.parseScriptData(e,t,n);if(e.hasOwnProperty("onMetaData")){if(null==e.onMetaData||"object"!=typeof e.onMetaData)return void P.a.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&P.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=e;var i,t=this._metadata.onMetaData;this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},t)),"boolean"==typeof t.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=t.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof t.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=t.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof t.audiodatarate&&(this._mediaInfo.audioDataRate=t.audiodatarate),"number"==typeof t.videodatarate&&(this._mediaInfo.videoDataRate=t.videodatarate),"number"==typeof t.width&&(this._mediaInfo.width=t.width),"number"==typeof t.height&&(this._mediaInfo.height=t.height),"number"==typeof t.duration?this._durationOverrided||(n=Math.floor(t.duration*this._timescale),this._duration=n,this._mediaInfo.duration=n):this._mediaInfo.duration=0,"number"==typeof t.framerate&&0<(n=Math.floor(1e3*t.framerate))&&(i=n/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=i,this._referenceFrameRate.fps_num=n,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=i),"object"==typeof t.keyframes?(this._mediaInfo.hasKeyframesIndex=!0,n=t.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(n),t.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=t,P.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(e).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},e))},h.prototype._parseKeyframesIndex=function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var r=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(r),n.push(e.filepositions[i])}return{times:t,filepositions:n}},h.prototype._parseAudioData=function(e,t,n,i){if(n<=1)P.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var r=new DataView(e,t,n).getUint8(0),a=r>>>4;if(2==a||10==a){var o=(12&r)>>>2;if(0<=o&&o<=4){var s,l=this._flvSoundRateTable[o],r=1&r,u=this._audioMetadata,c=this._audioTrack;if(u||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(u=this._audioMetadata={}).type="audio",u.id=c.id,u.timescale=this._timescale,u.duration=this._duration,u.audioSampleRate=l,u.channelCount=0==r?1:2),10==a){l=this._parseAACAudioData(e,t+1,n-1);if(null!=l)if(0===l.packetType){if(u.config){if(b(l.data.config,u.config))return;P.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var h=l.data;u.audioSampleRate=h.samplingRate,u.channelCount=h.channelCount,u.codec=h.codec,u.originalCodec=h.originalCodec,u.config=h.config,u.refSampleDuration=1024/u.audioSampleRate*u.timescale,P.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",u),(s=this._mediaInfo).audioCodec=u.originalCodec,s.audioSampleRate=u.audioSampleRate,s.audioChannelCount=u.channelCount,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)}else 1===l.packetType?(d=this._timestampBase+i,r={unit:l.data,length:l.data.byteLength,dts:d,pts:d},c.samples.push(r),c.length+=l.data.length):P.a.e(this.TAG,"Flv: Unsupported AAC data type "+l.packetType)}else if(2==a){if(!u.codec){if(null==(h=this._parseMP3AudioData(e,t+1,n-1,!0)))return;u.audioSampleRate=h.samplingRate,u.channelCount=h.channelCount,u.codec=h.codec,u.originalCodec=h.originalCodec,u.refSampleDuration=1152/u.audioSampleRate*u.timescale,P.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",u),(s=this._mediaInfo).audioCodec=u.codec,s.audioSampleRate=u.audioSampleRate,s.audioChannelCount=u.channelCount,s.audioDataRate=h.bitRate,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)}var d,r=this._parseMP3AudioData(e,t+1,n-1,!1);null!=r&&(d=this._timestampBase+i,l={unit:r,length:r.byteLength,dts:d,pts:d},c.samples.push(l),c.length+=r.length)}}else this._onError(A.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+o)}else this._onError(A.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+a)}},h.prototype._parseAACAudioData=function(e,t,n){var i,r;if(!(n<=1))return i={},r=new Uint8Array(e,t,n),i.packetType=r[0],0===r[0]?i.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):i.data=r.subarray(1),i;P.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},h.prototype._parseAACAudioSpecificConfig=function(e,t,n){var i,r,e=new Uint8Array(e,t,n),t=null,n=0,a=null,n=i=e[0]>>>3;if((r=(7&e[0])<<1|e[1]>>>7)<0||r>=this._mpegSamplingRates.length)this._onError(A.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var o=this._mpegSamplingRates[r],s=(120&e[1])>>>3;if(!(s<0||8<=s))return 5===n&&(a=(7&e[1])<<1|e[2]>>>7,e[2]),-1!==(e=self.navigator.userAgent.toLowerCase()).indexOf("firefox")?a=6<=r?(n=5,t=new Array(4),r-3):(n=2,t=new Array(2),r):-1!==e.indexOf("android")?(n=2,t=new Array(2),a=r):(n=5,a=r,t=new Array(4),6<=r?a=r-3:1==s&&(n=2,t=new Array(2),a=r)),t[0]=n<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&s)<<3,5===n&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),{config:t,samplingRate:o,channelCount:s,codec:"mp4a.40."+n,originalCodec:"mp4a.40."+i};this._onError(A.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},h.prototype._parseMP3AudioData=function(e,t,n,i){if(!(n<4)){this._littleEndian;e=new Uint8Array(e,t,n),t=null;if(i){if(255!==e[0])return;var n=e[1]>>>3&3,i=(6&e[1])>>1,r=(240&e[2])>>>4,a=(12&e[2])>>>2,o=3!=(e[3]>>>6&3)?2:1,s=0,l=0;switch(n){case 0:s=this._mpegAudioV25SampleRateTable[a];break;case 2:s=this._mpegAudioV20SampleRateTable[a];break;case 3:s=this._mpegAudioV10SampleRateTable[a]}switch(i){case 1:r<this._mpegAudioL3BitRateTable.length&&(l=this._mpegAudioL3BitRateTable[r]);break;case 2:r<this._mpegAudioL2BitRateTable.length&&(l=this._mpegAudioL2BitRateTable[r]);break;case 3:r<this._mpegAudioL1BitRateTable.length&&(l=this._mpegAudioL1BitRateTable[r])}t={bitRate:l,samplingRate:s,channelCount:o,codec:"mp3",originalCodec:"mp3"}}else t=e;return t}P.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},h.prototype._parseVideoData=function(e,t,n,i,r){var a,o,s,l;n<=1?P.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(o=(112&(a=new Uint8Array(e,t,n)[0]))>>>4,0!=(128&a)?(s=15&a,"hvc1"!==(l=String.fromCharCode.apply(String,new Uint8Array(e,t,n).slice(1,5)))?this._onError(A.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+l):this._parseEnhancedHEVCVideoPacket(e,t+5,n-5,i,r,o,s)):7==(l=15&a)?this._parseAVCVideoPacket(e,t+1,n-1,i,r,o):12!=l?this._onError(A.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+l):this._parseHEVCVideoPacket(e,t+1,n-1,i,r,o))},h.prototype._parseAVCVideoPacket=function(e,t,n,i,r,a){if(n<4)P.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var o=this._littleEndian,s=new DataView(e,t,n),l=s.getUint8(0),s=(16777215&s.getUint32(0,!o))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseAVCVideoData(e,t+4,n-4,i,r,a,s);else if(2!==l)return void this._onError(A.a.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}},h.prototype._parseHEVCVideoPacket=function(e,t,n,i,r,a){if(n<4)P.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var o=this._littleEndian,s=new DataView(e,t,n),l=s.getUint8(0),s=(16777215&s.getUint32(0,!o))<<8>>8;if(0===l)this._parseHEVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseHEVCVideoData(e,t+4,n-4,i,r,a,s);else if(2!==l)return void this._onError(A.a.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}},h.prototype._parseEnhancedHEVCVideoPacket=function(e,t,n,i,r,a,o){if(n<4)P.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var s=this._littleEndian,l=new DataView(e,t,n);if(0===o)this._parseHEVCDecoderConfigurationRecord(e,t,n);else if(1===o){l=(4294967040&l.getUint32(0,!s))>>8;this._parseHEVCVideoData(e,t+3,n-3,i,r,a,l)}else if(3===o)this._parseHEVCVideoData(e,t,n,i,r,a,0);else if(2!==o)return void this._onError(A.a.FORMAT_ERROR,"Flv: Invalid video packet type "+o)}},h.prototype._parseAVCDecoderConfigurationRecord=function(e,t,n){if(n<7)P.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,r=this._videoTrack,a=this._littleEndian,o=new DataView(e,t,n);if(i){if(void 0!==i.avcc){var s=new Uint8Array(e,t,n);if(b(s,i.avcc))return;P.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration;s=o.getUint8(0),r=o.getUint8(1);if(o.getUint8(2),o.getUint8(3),1===s&&0!==r)if(this._naluLengthSize=1+(3&o.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var l=31&o.getUint8(5);if(0!=l){1<l&&P.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+l);for(var u=6,c=0;c<l;c++){var h=o.getUint16(u,!a);if(u+=2,0!==h){var d=new Uint8Array(e,t+u,h),f=(u+=h,U.parseSPS(d));if(0===c){i.codecWidth=f.codec_size.width,i.codecHeight=f.codec_size.height,i.presentWidth=f.present_size.width,i.presentHeight=f.present_size.height,i.profile=f.profile_string,i.level=f.level_string,i.bitDepth=f.bit_depth,i.chromaFormat=f.chroma_format,i.sarRatio=f.sar_ratio,i.frameRate=f.frame_rate,!1!==f.frame_rate.fixed&&0!==f.frame_rate.fps_num&&0!==f.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var p=i.frameRate.fps_den,m=i.frameRate.fps_num;i.refSampleDuration=i.timescale*(p/m);for(var g=d.subarray(1,4),_="avc1.",y=0;y<3;y++){var v=g[y].toString(16);_+=v=v.length<2?"0"+v:v}i.codec=_;p=this._mediaInfo;p.width=i.codecWidth,p.height=i.codecHeight,p.fps=i.frameRate.fps,p.profile=i.profile,p.level=i.level,p.refFrames=f.ref_frames,p.chromaFormat=f.chroma_format_string,p.sarNum=i.sarRatio.width,p.sarDen=i.sarRatio.height,p.videoCodec=_,p.hasAudio?null!=p.audioCodec&&(p.mimeType='video/x-flv; codecs="'+p.videoCodec+","+p.audioCodec+'"'):p.mimeType='video/x-flv; codecs="'+p.videoCodec+'"',p.isComplete()&&this._onMediaInfo(p)}}}var E=o.getUint8(u);if(0!==E){for(1<E&&P.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+E),u++,c=0;c<E;c++)h=o.getUint16(u,!a),u+=2,0!==h&&(u+=h);i.avcc=new Uint8Array(n),i.avcc.set(new Uint8Array(e,t,n),0),P.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(A.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(A.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(A.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(A.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},h.prototype._parseHEVCDecoderConfigurationRecord=function(e,t,n){if(n<22)P.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,r=this._videoTrack,a=this._littleEndian,o=new DataView(e,t,n);if(i){if(void 0!==i.hvcc){var s=new Uint8Array(e,t,n);if(b(s,i.hvcc))return;P.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration;s=o.getUint8(0),r=31&o.getUint8(1);if(1===s&&0!=r)if(this._naluLengthSize=1+(3&o.getUint8(21)),3===this._naluLengthSize||4===this._naluLengthSize){for(var l=o.getUint8(22),u=0,c=23;u<l;u++){var h=63&o.getUint8(c+0),d=o.getUint16(c+1,!a);c+=3;for(var f=0;f<d;f++){var p,m,g,_=o.getUint16(c+0,!a);0===f&&33==h?(c+=2,p=new Uint8Array(e,t+c,_),p=v.parseSPS(p),i.codecWidth=p.codec_size.width,i.codecHeight=p.codec_size.height,i.presentWidth=p.present_size.width,i.presentHeight=p.present_size.height,i.profile=p.profile_string,i.level=p.level_string,i.bitDepth=p.bit_depth,i.chromaFormat=p.chroma_format,i.sarRatio=p.sar_ratio,i.frameRate=p.frame_rate,!1!==p.frame_rate.fixed&&0!==p.frame_rate.fps_num&&0!==p.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate),g=i.frameRate.fps_den,m=i.frameRate.fps_num,i.refSampleDuration=i.timescale*(g/m),i.codec=p.codec_mimetype,(g=this._mediaInfo).width=i.codecWidth,g.height=i.codecHeight,g.fps=i.frameRate.fps,g.profile=i.profile,g.level=i.level,g.refFrames=p.ref_frames,g.chromaFormat=p.chroma_format_string,g.sarNum=i.sarRatio.width,g.sarDen=i.sarRatio.height,g.videoCodec=p.codec_mimetype,g.hasAudio?null!=g.audioCodec&&(g.mimeType='video/x-flv; codecs="'+g.videoCodec+","+g.audioCodec+'"'):g.mimeType='video/x-flv; codecs="'+g.videoCodec+'"',g.isComplete()&&this._onMediaInfo(g),c+=_):c+=2+_}}i.hvcc=new Uint8Array(n),i.hvcc.set(new Uint8Array(e,t,n),0),P.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(A.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(A.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord")}},h.prototype._parseAVCVideoData=function(e,t,n,i,r,a,o){for(var s=this._littleEndian,l=new DataView(e,t,n),u=[],c=0,h=0,d=this._naluLengthSize,f=this._timestampBase+i,p=1===a;h<n;){if(n<=h+4){P.a.w(this.TAG,"Malformed Nalu near timestamp "+f+", offset = "+h+", dataSize = "+n);break}var m=l.getUint32(h,!s);if(3===d&&(m>>>=8),n-d<m)return void P.a.w(this.TAG,"Malformed Nalus near timestamp "+f+", NaluSize > DataSize!");var g=31&l.getUint8(h+d),_=(5==g&&(p=!0),new Uint8Array(e,t+h,d+m));u.push({type:g,data:_}),c+=_.byteLength,h+=d+m}u.length&&(i=this._videoTrack,a={units:u,length:c,isKeyframe:p,dts:f,cts:o,pts:f+o},p&&(a.fileposition=r),i.samples.push(a),i.length+=c)},h.prototype._parseHEVCVideoData=function(e,t,n,i,r,a,o){for(var s=this._littleEndian,l=new DataView(e,t,n),u=[],c=0,h=0,d=this._naluLengthSize,f=this._timestampBase+i,p=1===a;h<n;){if(n<=h+4){P.a.w(this.TAG,"Malformed Nalu near timestamp "+f+", offset = "+h+", dataSize = "+n);break}var m=l.getUint32(h,!s);if(3===d&&(m>>>=8),n-d<m)return void P.a.w(this.TAG,"Malformed Nalus near timestamp "+f+", NaluSize > DataSize!");var g=31&l.getUint8(h+d),_=(19!=g&&20!=g||(p=!0),new Uint8Array(e,t+h,d+m));u.push({type:g,data:_}),c+=_.byteLength,h+=d+m}u.length&&(i=this._videoTrack,a={units:u,length:c,isKeyframe:p,dts:f,cts:o,pts:f+o},p&&(a.fileposition=r),i.samples.push(a),i.length+=c)};var T,H=h,t=(Y.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},Y);function Y(){}function h(e,t){this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new i.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0])}(u=T=T||{})[u.kMPEG1Audio=3]="kMPEG1Audio",u[u.kMPEG2Audio=4]="kMPEG2Audio",u[u.kPESPrivateData=6]="kPESPrivateData",u[u.kADTSAAC=15]="kADTSAAC",u[u.kLOASAAC=17]="kLOASAAC",u[u.kAC3=129]="kAC3",u[u.kID3=21]="kID3",u[u.kSCTE35=134]="kSCTE35",u[u.kH264=27]="kH264",u[u.kH265=36]="kH265";function z(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.scte_35_pids={},this.smpte2038_pids={}}function W(){}function K(){}function q(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0}var d;(u=d=d||{})[u.kUnspecified=0]="kUnspecified",u[u.kSliceNonIDR=1]="kSliceNonIDR",u[u.kSliceDPA=2]="kSliceDPA",u[u.kSliceDPB=3]="kSliceDPB",u[u.kSliceDPC=4]="kSliceDPC",u[u.kSliceIDR=5]="kSliceIDR",u[u.kSliceSEI=6]="kSliceSEI",u[u.kSliceSPS=7]="kSliceSPS",u[u.kSlicePPS=8]="kSlicePPS",u[u.kSliceAUD=9]="kSliceAUD",u[u.kEndOfSequence=10]="kEndOfSequence",u[u.kEndOfStream=11]="kEndOfStream",u[u.kFiller=12]="kFiller",u[u.kSPSExt=13]="kSPSExt",u[u.kReserved0=14]="kReserved0";function Q(){}function X(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}a.prototype.findNextStartCodeOffset=function(e){for(var t=e,n=this.data_;;){if(t+3>=n.byteLength)return this.eof_flag_=!0,n.byteLength;var i=n[t+0]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],r=n[t+0]<<16|n[t+1]<<8|n[t+2];if(1==i||1==r)return t;t++}},a.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n=this.current_startcode_offset_,i=31&e[n+=1==(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])?4:3],r=(128&e[n])>>>7,a=this.findNextStartCodeOffset(n);this.current_startcode_offset_=a,i>=d.kReserved0||0!=r||(r=e.subarray(n,a),(t=new Q).type=i,t.data=r)}return t};var J=a,Z=($.prototype.getData=function(){return this.data},$);function $(e,t,n){var i=8+e.byteLength+1+2+t.byteLength,r=!1,i=(66!==e[3]&&77!==e[3]&&88!==e[3]&&(r=!0,i+=4),this.data=new Uint8Array(i)),a=(i[0]=1,i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=255,i[5]=225,e.byteLength),o=(i[6]=a>>>8,i[7]=255&a,8),e=(i.set(e,8),i[o+=a]=1,t.byteLength);i[o+1]=e>>>8,i[o+2]=255&e,i.set(t,o+3),o+=3+e,r&&(i[o]=252|n.chroma_format_idc,i[o+1]=248|n.bit_depth_luma-8,i[o+2]=248|n.bit_depth_chroma-8,i[o+3]=0)}function a(e){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&P.a.e(this.TAG,"Could not find H264 startcode until payload end!")}function ee(){}function te(e){var t=null,n=e.audio_object_type,i=e.audio_object_type,r=e.sampling_freq_index,e=e.channel_config,a=0,o=navigator.userAgent.toLowerCase();-1!==o.indexOf("firefox")?a=6<=r?(i=5,t=new Array(4),r-3):(i=2,t=new Array(2),r):-1!==o.indexOf("android")?(i=2,t=new Array(2),a=r):(i=5,a=r,t=new Array(4),6<=r?a=r-3:1===e&&(i=2,t=new Array(2),a=r)),t[0]=i<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&e)<<3,5===i&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),this.config=t,this.sampling_rate=w[r],this.channel_count=e,this.codec_mimetype="mp4a.40."+i,this.original_codec_mimetype="mp4a.40."+n}function re(){}function ae(){}var S,oe,se,w=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],le=(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)}(se=he,u=oe=ee),se.prototype=null===u?Object.create(u):(de.prototype=u.prototype,new de),he),ue=(l.prototype.findNextSyncwordOffset=function(e){for(var t=e,n=this.data_;;){if(t+7>=n.byteLength)return this.eof_flag_=!0,n.byteLength;if(4095==(n[t+0]<<8|n[t+1])>>>4)return t;t++}},l.prototype.readNextAACFrame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n=this.current_syncword_offset_,i=(8&e[n+1])>>>3,r=(6&e[n+1])>>>1,a=1&e[n+1],o=(192&e[n+2])>>>6,s=(60&e[n+2])>>>2,l=(1&e[n+2])<<2|(192&e[n+3])>>>6,u=(3&e[n+3])<<11|e[n+4]<<3|(224&e[n+5])>>>5;if(e[n+6],n+u>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var a=1==a?7:9,u=u-a,a=(n+=a,this.findNextSyncwordOffset(n+u));this.current_syncword_offset_=a,0!=i&&1!=i||0!=r||(a=e.subarray(n,n+u),(t=new ee).audio_object_type=1+o,t.sampling_freq_index=s,t.sampling_frequency=w[s],t.channel_config=l,t.data=a)}return t},l.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},l.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},l),ce=(s.prototype.findNextSyncwordOffset=function(e){for(var t=e,n=this.data_;;){if(t+1>=n.byteLength)return this.eof_flag_=!0,n.byteLength;if(695==(n[t+0]<<3|n[t+1]>>>5))return t;t++}},s.prototype.getLATMValue=function(e){for(var t=e.readBits(2),n=0,i=0;i<=t;i++)n=(n<<=8)|e.readByte();return n},s.prototype.readNextAACFrame=function(e){for(var t=this.data_,n=null;null==n&&!this.eof_flag_;){var i=this.current_syncword_offset_,r=(31&t[i+1])<<8|t[i+2];if(i+3+r>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var a=new ne(t.subarray(i+3,i+3+r)),o=null;if(a.readBool()){if(null==e){P.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(i+3+r),a.destroy();continue}o=e}else{var s=a.readBool();if(s&&a.readBool()){P.a.e(this.TAG,"audioMuxVersionA is Not Supported"),a.destroy();break}if(s&&this.getLATMValue(a),!a.readBool()){P.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),a.destroy();break}if(0!==a.readBits(6)){P.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),a.destroy();break}if(0!==a.readBits(4)){P.a.e(this.TAG,"more than 2 numProgram Not Supported"),a.destroy();break}if(0!==a.readBits(3)){P.a.e(this.TAG,"more than 2 numLayer Not Supported"),a.destroy();break}var l=s?this.getLATMValue(a):0,u=a.readBits(5),c=(l-=5,a.readBits(4)),h=(l-=4,a.readBits(4)),l=(l-=4,a.readBits(3),0<(l-=3)&&a.readBits(l),a.readBits(3));if(0!==l){P.a.e(this.TAG,"frameLengthType = "+l+". Only frameLengthType = 0 Supported"),a.destroy();break}a.readByte();l=a.readBool();if(l)if(s)this.getLATMValue(a);else for(;;){0;var d=a.readBool();if(a.readByte(),!d)break}a.readBool()&&a.readByte(),(o=new le).audio_object_type=u,o.sampling_freq_index=c,o.sampling_frequency=w[o.sampling_freq_index],o.channel_config=h,o.other_data_present=l}for(var f=0;;){var p=a.readByte();if(f+=p,255!==p)break}for(var m=new Uint8Array(f),g=0;g<f;g++)m[g]=a.readByte();(n=new le).audio_object_type=o.audio_object_type,n.sampling_freq_index=o.sampling_freq_index,n.sampling_frequency=w[o.sampling_freq_index],n.channel_config=o.channel_config,n.other_data_present=o.other_data_present,n.data=m,this.current_syncword_offset_=this.findNextSyncwordOffset(i+3+r)}return n},s.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},s.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},s);function s(e){this.TAG="AACLOASParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&P.a.e(this.TAG,"Could not found LOAS syncword until payload end")}function l(e){this.TAG="AACADTSParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&P.a.e(this.TAG,"Could not found ADTS syncword until payload end")}function he(){return null!==oe&&oe.apply(this,arguments)||this}function de(){this.constructor=se}(u=S=S||{})[u.kSpliceNull=0]="kSpliceNull",u[u.kSpliceSchedule=4]="kSpliceSchedule",u[u.kSpliceInsert=5]="kSpliceInsert",u[u.kTimeSignal=6]="kTimeSignal",u[u.kBandwidthReservation=7]="kBandwidthReservation",u[u.kPrivateCommand=255]="kPrivateCommand";function fe(e){var t=new ne(e),n=t.readBits(8),i=t.readBool(),r=t.readBool(),a=(t.readBits(2),t.readBits(12)),o=t.readBits(8),s=t.readBool(),l=t.readBits(6),u=4*t.readBits(31)+t.readBits(2),c=t.readBits(8),h=t.readBits(12),d=t.readBits(12),f=t.readBits(8),p=null;f===S.kSpliceNull?p={}:f===S.kSpliceSchedule?p=function(e){for(var t=e.readBits(8),n=[],i=0;i<t;i++)n.push(function(e){var t=e.readBits(32),n=e.readBool(),i=(e.readBits(7),{splice_event_id:t,splice_event_cancel_indicator:n});if(!n){if(i.out_of_network_indicator=e.readBool(),i.program_splice_flag=e.readBool(),i.duration_flag=e.readBool(),e.readBits(5),i.program_splice_flag)i.utc_splice_time=e.readBits(32);else{i.component_count=e.readBits(8),i.components=[];for(var r=0;r<i.component_count;r++)i.components.push(be(e))}i.duration_flag&&(i.break_duration=Ae(e)),i.unique_program_id=e.readBits(16),i.avail_num=e.readBits(8),i.avails_expected=e.readBits(8)}return i}(e));return{splice_count:t,events:n}}(t):f===S.kSpliceInsert?p=function(e){var t,n,i,r=e.readBits(32),a=e.readBool(),o=(e.readBits(7),{splice_event_id:r,splice_event_cancel_indicator:a});if(!a){if(o.out_of_network_indicator=e.readBool(),o.program_splice_flag=e.readBool(),o.duration_flag=e.readBool(),o.splice_immediate_flag=e.readBool(),e.readBits(4),o.program_splice_flag&&!o.splice_immediate_flag&&(o.splice_time=Ee(e)),!o.program_splice_flag){o.component_count=e.readBits(8),o.components=[];for(var s=0;s<o.component_count;s++)o.components.push((t=o.splice_immediate_flag,i=void 0,i=(n=e).readBits(8),t?{component_tag:i}:{component_tag:i,splice_time:Ee(n)}))}o.duration_flag&&(o.break_duration=Ae(e)),o.unique_program_id=e.readBits(16),o.avail_num=e.readBits(8),o.avails_expected=e.readBits(8)}return o}(t):f===S.kTimeSignal?p={splice_time:Ee(t)}:f===S.kBandwidthReservation?p={}:f===S.kPrivateCommand?p=function(e,t){for(var n=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8)),i=new Uint8Array(e-4),r=0;r<e-4;r++)i[r]=t.readBits(8);return{identifier:n,private_data:i.buffer}}(d,t):t.readBits(8*d);for(var m,g=[],_=t.readBits(16),y=0;y<_;){var v=t.readBits(8),E=t.readBits(8),A=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8));0===v?g.push({descriptor_tag:v,descriptor_length:E,identifier:A,provider_avail_id:t.readBits(32)}):1===v?g.push(function(e,t,n,i){var r=i.readBits(8),a=i.readBits(3);i.readBits(5);for(var o="",s=0;s<a;s++)o+=String.fromCharCode(i.readBits(8));return{descriptor_tag:e,descriptor_length:t,identifier:n,preroll:r,dtmf_count:a,DTMF_char:o}}(v,E,A,t)):2===v?g.push(function(e,t,n,i){var r=i.readBits(32),a=i.readBool(),o=(i.readBits(7),{descriptor_tag:e,descriptor_length:t,identifier:n,segmentation_event_id:r,segmentation_event_cancel_indicator:a});if(!a){if(o.program_segmentation_flag=i.readBool(),o.segmentation_duration_flag=i.readBool(),o.delivery_not_restricted_flag=i.readBool(),o.delivery_not_restricted_flag?i.readBits(5):(o.web_delivery_allowed_flag=i.readBool(),o.no_regional_blackout_flag=i.readBool(),o.archive_allowed_flag=i.readBool(),o.device_restrictions=i.readBits(2)),!o.program_segmentation_flag){o.component_count=i.readBits(8),o.components=[];for(var s=0;s<o.component_count;s++)o.components.push(Te(i))}o.segmentation_duration_flag&&(o.segmentation_duration=i.readBits(40)),o.segmentation_upid_type=i.readBits(8),o.segmentation_upid_length=i.readBits(8);for(var l=new Uint8Array(o.segmentation_upid_length),s=0;s<o.segmentation_upid_length;s++)l[s]=i.readBits(8);o.segmentation_upid=l.buffer,o.segmentation_type_id=i.readBits(8),o.segment_num=i.readBits(8),o.segments_expected=i.readBits(8),52!==o.segmentation_type_id&&54!==o.segmentation_type_id&&56!==o.segmentation_type_id&&58!==o.segmentation_type_id||(o.sub_segment_num=i.readBits(8),o.sub_segments_expected=i.readBits(8))}return o}(v,E,A,t)):3===v?g.push({descriptor_tag:v,descriptor_length:E,identifier:A,TAI_seconds:(m=t).readBits(48),TAI_ns:m.readBits(32),UTC_offset:m.readBits(16)}):4===v?g.push(function(e,t,n,i){for(var r=i.readBits(4),a=[],o=0;o<r;o++)a.push(Se(i));return{descriptor_tag:e,descriptor_length:t,identifier:n,audio_count:r,components:a}}(v,E,A,t)):t.readBits(8*(E-4)),y+=2+E}var b,T,n={table_id:n,section_syntax_indicator:i,private_indicator:r,section_length:a,protocol_version:o,encrypted_packet:s,encryption_algorithm:l,pts_adjustment:u,cw_index:c,tier:h,splice_command_length:d,splice_command_type:f,splice_command:p,descriptor_loop_length:_,splice_descriptors:g,E_CRC32:s?t.readBits(32):void 0,CRC32:t.readBits(32)};return f===S.kSpliceInsert?(i=p).splice_event_cancel_indicator?{splice_command_type:f,detail:n,data:e}:i.program_splice_flag&&!i.splice_immediate_flag?(b=i.duration_flag?i.break_duration.auto_return:void 0,T=i.duration_flag?i.break_duration.duration/90:void 0,i.splice_time.time_specified_flag?{splice_command_type:f,pts:(u+i.splice_time.pts_time)%Math.pow(2,33),auto_return:b,duraiton:T,detail:n,data:e}:{splice_command_type:f,auto_return:b,duraiton:T,detail:n,data:e}):{splice_command_type:f,auto_return:b=i.duration_flag?i.break_duration.auto_return:void 0,duraiton:T=i.duration_flag?i.break_duration.duration/90:void 0,detail:n,data:e}:f===S.kTimeSignal&&(r=p).splice_time.time_specified_flag?{splice_command_type:f,pts:(u+r.splice_time.pts_time)%Math.pow(2,33),detail:n,data:e}:{splice_command_type:f,detail:n,data:e}}function pe(){}function me(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}function ge(){}function _e(){}function ye(){}function ve(e){var t=[e.sampling_rate_code<<6|e.bit_stream_identification<<1|e.bit_stream_mode>>2,(3&e.bit_stream_mode)<<6|e.channel_mode<<3|e.low_frequency_effects_channel_on<<2|e.frame_size_code>>4,e.frame_size_code<<4&224];this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.bit_stream_mode=e.bit_stream_mode,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"}var f,Ee=function(e){var t=e.readBool();return t?(e.readBits(6),{time_specified_flag:t,pts_time:4*e.readBits(31)+e.readBits(2)}):(e.readBits(7),{time_specified_flag:t})},Ae=function(e){var t=e.readBool();return e.readBits(6),{auto_return:t,duration:4*e.readBits(31)+e.readBits(2)}},be=function(e){return{component_tag:e.readBits(8),utc_splice_time:e.readBits(32)}},Te=function(e){var t=e.readBits(8);return e.readBits(7),{component_tag:t,pts_offset:4*e.readBits(31)+e.readBits(2)}},Se=function(e){return{component_tag:e.readBits(8),ISO_code:String.fromCharCode(e.readBits(8),e.readBits(8),e.readBits(8)),Bit_Stream_Mode:e.readBits(3),Num_Channels:e.readBits(4),Full_Srvc_Audio:e.readBool()}},we=((u=f=f||{})[u.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",u[u.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",u[u.kSliceCRA_NUT=21]="kSliceCRA_NUT",u[u.kSliceVPS=32]="kSliceVPS",u[u.kSliceSPS=33]="kSliceSPS",u[u.kSlicePPS=34]="kSlicePPS",u[u.kSliceAUD=35]="kSliceAUD",Oe.prototype.findNextStartCodeOffset=function(e){for(var t=e,n=this.data_;;){if(t+3>=n.byteLength)return this.eof_flag_=!0,n.byteLength;var i=n[t+0]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],r=n[t+0]<<16|n[t+1]<<8|n[t+2];if(1==i||1==r)return t;t++}},Oe.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n=this.current_startcode_offset_,i=e[n+=1==(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])?4:3]>>1&63,r=(128&e[n])>>>7,a=this.findNextStartCodeOffset(n);this.current_startcode_offset_=a,0==r&&(r=e.subarray(n,a),(t=new pe).type=i,t.data=r)}return t},Oe),Re=(ke.prototype.getData=function(){return this.data},ke),Ie=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],Ce=(g.prototype.findNextSyncwordOffset=function(e){for(var t=e,n=this.data_;;){if(t+7>=n.byteLength)return this.eof_flag_=!0,n.byteLength;if(2935==(n[t+0]<<8|n[t+1]<<0))return t;t++}},g.prototype.readNextAC3Frame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n=this.current_syncword_offset_,i=e[n+4]>>6,r=[48e3,44200,33e3][i],a=63&e[n+4],i=2*Ie[i][a];if(n+i>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var o=this.findNextSyncwordOffset(n+i),o=(this.current_syncword_offset_=o,e[n+5]>>3),s=7&e[n+5],l=e[n+6]>>5,u=0,u=(0!=(1&l)&&1!=l&&(u+=2),0!=(4&l)&&(u+=2),2==l&&(u+=2),(e[n+6]<<8|e[n+7]<<0)>>12-u&1),c=[2,1,2,3,3,4,4,5][l]+u;(t=new ye).sampling_frequency=r,t.channel_count=c,t.channel_mode=l,t.bit_stream_identification=o,t.low_frequency_effects_channel_on=u,t.bit_stream_mode=s,t.frame_size_code=a,t.data=e.subarray(n,n+i)}return t},g.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},g.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},g);Pe=function(e,t){return(Pe=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)};var Le,Pe,p=function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},De=(function(e,t){function n(){this.constructor=e}Pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(m,Le=t),m.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,Le.prototype.destroy.call(this)},m.probe=function(e){var t=new Uint8Array(e),n=-1,i=188;if(t.byteLength<=3*i)return{needMoreData:!0};for(;-1===n;){for(var r=Math.min(1e3,t.byteLength-3*i),a=0;a<r;){if(71===t[a]&&71===t[a+i]&&71===t[a+2*i]){n=a;break}a++}if(-1===n)if(188===i)i=192;else{if(192!==i)break;i=204}}return-1===n?{match:!1}:(192===i&&4<=n?(P.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),n-=4):204===i&&P.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:i,sync_offset:n})},m.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},m.prototype.resetMediaInfo=function(){this.media_info_=new i.a},m.prototype.parseChunks=function(e,t){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new _.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0;for(this.first_parse_&&(this.first_parse_=!1,n=this.sync_offset_);n+this.ts_packet_size_<=e.byteLength;){var i=t+n,r=(192===this.ts_packet_size_&&(n+=4),new Uint8Array(e,n,188)),a=r[0];if(71!==a){P.a.e(this.TAG,"sync_byte = "+a+", not 0x47");break}var o,a=(64&r[1])>>>6,s=(r[1],(31&r[1])<<8|r[2]),l=(48&r[3])>>>4,u=15&r[3],c={},h=4;if(2==l||3==l){var r=r[4];if(5+r===188){n+=188,204===this.ts_packet_size_&&(n+=16);continue}0<r&&(c=this.parseAdaptationField(e,n+4,1+r)),h=5+r}1!=l&&3!=l||(0==s||s===this.current_pmt_pid_||null!=this.pmt_&&this.pmt_.pid_stream_type[s]===T.kSCTE35?this.handleSectionSlice(e,n+h,o=188-h,{pid:s,file_position:i,payload_unit_start_indicator:a,continuity_conunter:u,random_access_indicator:c.random_access_indicator}):null!=this.pmt_&&null!=this.pmt_.pid_stream_type[s]&&(o=188-h,r=this.pmt_.pid_stream_type[s],s!==this.pmt_.common_pids.h264&&s!==this.pmt_.common_pids.h265&&s!==this.pmt_.common_pids.adts_aac&&s!==this.pmt_.common_pids.loas_aac&&s!==this.pmt_.common_pids.ac3&&s!==this.pmt_.common_pids.opus&&s!==this.pmt_.common_pids.mp3&&!0!==this.pmt_.pes_private_data_pids[s]&&!0!==this.pmt_.timed_id3_pids[s]||this.handlePESSlice(e,n+h,o,{pid:s,stream_type:r,file_position:i,payload_unit_start_indicator:a,continuity_conunter:u,random_access_indicator:c.random_access_indicator}))),n+=188,204===this.ts_packet_size_&&(n+=16)}return this.dispatchAudioVideoMediaSegment(),n},m.prototype.parseAdaptationField=function(e,t,n){e=new Uint8Array(e,t,n),t=e[0];return 0<t?183<t?(P.a.w(this.TAG,"Illegal adaptation_field_length: "+t),{}):{discontinuity_indicator:(128&e[1])>>>7,random_access_indicator:(64&e[1])>>>6,elementary_stream_priority_indicator:(32&e[1])>>>5}:{}},m.prototype.handleSectionSlice=function(e,t,n,i){var r=new Uint8Array(e,t,n),a=this.section_slice_queues_[i.pid];if(i.payload_unit_start_indicator){var o,s=r[0];null!=a&&0!==a.total_length&&(o=new Uint8Array(e,t+1,Math.min(n,s)),a.slices.push(o),a.total_length+=o.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,i):this.clearSlices(a,i));for(var l=1+s;l<r.byteLength&&255!==r[l+0];){var u=(15&r[l+1])<<8|r[l+2];this.section_slice_queues_[i.pid]=new q,(a=this.section_slice_queues_[i.pid]).expected_length=3+u,a.file_position=i.file_position,a.random_access_indicator=i.random_access_indicator,o=new Uint8Array(e,t+l,Math.min(n-l,a.expected_length-a.total_length)),a.slices.push(o),a.total_length+=o.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,i):a.total_length>=a.expected_length&&this.clearSlices(a,i),l+=o.byteLength}}else null!=a&&0!==a.total_length&&(o=new Uint8Array(e,t,Math.min(n,a.expected_length-a.total_length)),a.slices.push(o),a.total_length+=o.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,i):a.total_length>=a.expected_length&&this.clearSlices(a,i))},m.prototype.handlePESSlice=function(e,t,n,i){var e=new Uint8Array(e,t,n),t=e[0]<<16|e[1]<<8|e[2],n=(e[3],e[4]<<8|e[5]);if(i.payload_unit_start_indicator){if(1!=t)return void P.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value "+t);t=this.pes_slice_queues_[i.pid];t&&(0===t.expected_length||t.expected_length===t.total_length?this.emitPESSlices(t,i):this.clearSlices(t,i)),this.pes_slice_queues_[i.pid]=new q,this.pes_slice_queues_[i.pid].file_position=i.file_position,this.pes_slice_queues_[i.pid].random_access_indicator=i.random_access_indicator}null!=this.pes_slice_queues_[i.pid]&&((t=this.pes_slice_queues_[i.pid]).slices.push(e),i.payload_unit_start_indicator&&(t.expected_length=0==n?0:6+n),t.total_length+=e.byteLength,0<t.expected_length&&t.expected_length===t.total_length?this.emitPESSlices(t,i):0<t.expected_length&&t.expected_length<t.total_length&&this.clearSlices(t,i))},m.prototype.emitSectionSlices=function(e,t){for(var n=new Uint8Array(e.total_length),i=0,r=0;i<e.slices.length;i++){var a=e.slices[i];n.set(a,r),r+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var o=new K;o.pid=t.pid,o.data=n,o.file_position=e.file_position,o.random_access_indicator=e.random_access_indicator,this.parseSection(o)},m.prototype.emitPESSlices=function(e,t){for(var n=new Uint8Array(e.total_length),i=0,r=0;i<e.slices.length;i++){var a=e.slices[i];n.set(a,r),r+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var o=new W;o.pid=t.pid,o.data=n,o.stream_type=t.stream_type,o.file_position=e.file_position,o.random_access_indicator=e.random_access_indicator,this.parsePES(o)},m.prototype.clearSlices=function(e,t){e.slices=[],e.expected_length=-1,e.total_length=0},m.prototype.parseSection=function(e){var t=e.data,e=e.pid;0===e?this.parsePAT(t):e===this.current_pmt_pid_?this.parsePMT(t):null!=this.pmt_&&this.pmt_.scte_35_pids[e]&&this.parseSCTE35(t)},m.prototype.parsePES=function(e){var t=e.data,n=t[0]<<16|t[1]<<8|t[2],i=t[3],r=t[4]<<8|t[5];if(1==n)if(188!==i&&190!==i&&191!==i&&240!==i&&241!==i&&255!==i&&242!==i&&248!==i){t[6];var a=(192&t[7])>>>6,o=t[8],s=void 0,l=void 0,a=(2!=a&&3!=a||(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,l=3==a?536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2:s),9+o),u=void 0;if(0!=r){if(r<3+o)return void P.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");u=r-3-o}else u=t.byteLength-a;var c=t.subarray(a,a+u);switch(e.stream_type){case T.kMPEG1Audio:case T.kMPEG2Audio:this.parseMP3Payload(c,s);break;case T.kPESPrivateData:this.pmt_.common_pids.opus===e.pid?this.parseOpusPayload(c,s):this.pmt_.common_pids.ac3===e.pid?this.parseAC3Payload(c,s):this.pmt_.smpte2038_pids[e.pid]?this.parseSMPTE2038MetadataPayload(c,s,l,e.pid,i):this.parsePESPrivateDataPayload(c,s,l,e.pid,i);break;case T.kADTSAAC:this.parseADTSAACPayload(c,s);break;case T.kLOASAAC:this.parseLOASAACPayload(c,s);break;case T.kAC3:this.parseAC3Payload(c,s);break;case T.kID3:this.parseTimedID3MetadataPayload(c,s,l,e.pid,i);break;case T.kH264:this.parseH264Payload(c,s,l,e.file_position,e.random_access_indicator);break;case T.kH265:this.parseH265Payload(c,s,l,e.file_position,e.random_access_indicator)}}else 188!==i&&191!==i&&240!==i&&241!==i&&255!==i&&242!==i&&248!==i||e.stream_type!==T.kPESPrivateData||(a=6,u=void 0,u=0!=r?r:t.byteLength-a,c=t.subarray(a,a+u),this.parsePESPrivateDataPayload(c,void 0,void 0,e.pid,i));else P.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value "+n)},m.prototype.parsePAT=function(e){var t=e[0];if(0===t){var n=(15&e[1])<<8|e[2],i=(e[3],e[4],(62&e[5])>>>1),r=1&e[5],a=e[6],o=(e[7],null);if(1==r&&0===a)(o=new V).version_number=i;else if(null==(o=this.pat_))return;for(var s=n-5-4,l=-1,u=-1,c=8;c<8+s;c+=4){var h=e[c]<<8|e[c+1],d=(31&e[c+2])<<8|e[c+3];0==h?o.network_pid=d:(o.program_pmt_pid[h]=d,-1===l&&(l=h),-1===u&&(u=d))}1==r&&0===a&&(null==this.pat_&&P.a.v(this.TAG,"Parsed first PAT: "+JSON.stringify(o)),this.pat_=o,this.current_program_=l,this.current_pmt_pid_=u)}else P.a.e(this.TAG,"parsePAT: table_id "+t+" is not corresponded to PAT!")},m.prototype.parsePMT=function(e){var t=e[0];if(2===t){var n=(15&e[1])<<8|e[2],i=e[3]<<8|e[4],r=(62&e[5])>>>1,a=1&e[5],o=e[6],s=(e[7],null);if(1==a&&0===o)(s=new z).program_number=i,s.version_number=r,this.program_pmt_map_[i]=s;else if(null==(s=this.program_pmt_map_[i]))return;e[8],e[9];for(var a=(15&e[10])<<8|e[11],l=12+a,u=n-9-a-4,c=l;c<l+u;){var h=e[c],d=(31&e[c+1])<<8|e[c+2],f=(15&e[c+3])<<8|e[c+4],p=(s.pid_stream_type[d]=h,s.common_pids.h264||s.common_pids.h265),m=s.common_pids.adts_aac||s.common_pids.loas_aac||s.common_pids.ac3||s.common_pids.opus||s.common_pids.mp3;if(h!==T.kH264||p)if(h!==T.kH265||p)if(h!==T.kADTSAAC||m)if(h!==T.kLOASAAC||m)if(h!==T.kAC3||m)if(h!==T.kMPEG1Audio&&h!==T.kMPEG2Audio||m)if(h===T.kPESPrivateData){if(s.pes_private_data_pids[d]=!0,0<f){for(var g=c+5;g<c+5+f;){var _=e[g+0],y=e[g+1];if(5===_){var v=String.fromCharCode.apply(String,Array.from(e.subarray(g+2,g+2+y)));"VANC"===v?s.smpte2038_pids[d]=!0:"Opus"===v&&(s.common_pids.opus=d)}else if(127===_&&d===s.common_pids.opus){v=null;if(null==(v=128===e[g+2]?e[g+3]:v)){P.a.e(this.TAG,"Not Supported Opus channel count.");continue}var _={codec:"opus",channel_count:0==(15&v)?2:15&v,channel_config_code:v,sample_rate:48e3},E={codec:"opus",meta:_};0==this.audio_init_segment_dispatched_?(this.audio_metadata_=_,this.dispatchAudioInitSegment(E)):this.detectAudioMetadataChange(E)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(E))}g+=2+y}p=e.subarray(c+5,c+5+f);this.dispatchPESPrivateDataDescriptor(d,h,p)}}else h===T.kID3?s.timed_id3_pids[d]=!0:h===T.kSCTE35&&(s.scte_35_pids[d]=!0);else s.common_pids.mp3=d;else s.common_pids.ac3=d;else s.common_pids.loas_aac=d;else s.common_pids.adts_aac=d;else s.common_pids.h265=d;else s.common_pids.h264=d;c+=5+f}i===this.current_program_&&(null==this.pmt_&&P.a.v(this.TAG,"Parsed first PMT: "+JSON.stringify(s)),((this.pmt_=s).common_pids.h264||s.common_pids.h265)&&(this.has_video_=!0),s.common_pids.adts_aac||s.common_pids.loas_aac||s.common_pids.ac3||s.common_pids.opus||s.common_pids.mp3)&&(this.has_audio_=!0)}else P.a.e(this.TAG,"parsePMT: table_id "+t+" is not corresponded to PMT!")},m.prototype.parseSCTE35=function(e){var t,e=fe(e);null!=e.pts?(t=Math.floor(e.pts/this.timescale_),e.pts=t):e.nearest_pts=this.aac_last_sample_pts_,this.onSCTE35Metadata&&this.onSCTE35Metadata(e)},m.prototype.parseH264Payload=function(e,t,n,i,r){for(var a=new J(e),o=[],s=0,l=!1;null!=(u=a.readNextNaluPayload());){var u,c=new X(u);c.type===d.kSliceSPS?(u=U.parseSPS(u.data),this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(c,u)&&(P.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:c,pps:void 0,details:u}):(this.video_metadata_.sps=c,this.video_metadata_.details=u)):c.type===d.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=c,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(c.type===d.kSliceIDR||c.type===d.kSliceNonIDR&&1===r)&&(l=!0),this.video_init_segment_dispatched_&&(o.push(c),s+=c.data.byteLength)}e=Math.floor(t/this.timescale_),t=Math.floor(n/this.timescale_);o.length&&((n=this.video_track_).samples.push({units:o,length:s,isKeyframe:l,dts:t,pts:e,cts:e-t,file_position:i}),n.length+=s)},m.prototype.parseH265Payload=function(e,t,n,i,r){for(var a,o=new we(e),s=[],l=0,u=!1;null!=(a=o.readNextNaluPayload());){var c,h=new me(a);h.type===f.kSliceVPS?this.video_init_segment_dispatched_||(c=v.parseVPS(a.data),this.video_metadata_.vps=h,this.video_metadata_.details=p(p({},this.video_metadata_.details),c)):h.type===f.kSliceSPS?(c=v.parseSPS(a.data),this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(h,c)&&(P.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:h,pps:void 0,details:c}):(this.video_metadata_.sps=h,this.video_metadata_.details=p(p({},this.video_metadata_.details),c))):h.type===f.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(c=v.parsePPS(a.data),this.video_metadata_.pps=h,this.video_metadata_.details=p(p({},this.video_metadata_.details),c),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):h.type!==f.kSliceIDR_W_RADL&&h.type!==f.kSliceIDR_N_LP&&h.type!==f.kSliceCRA_NUT||(u=!0),this.video_init_segment_dispatched_&&(s.push(h),l+=h.data.byteLength)}e=Math.floor(t/this.timescale_),t=Math.floor(n/this.timescale_);s.length&&((n=this.video_track_).samples.push({units:s,length:l,isKeyframe:u,dts:t,pts:e,cts:e-t,file_position:i}),n.length+=l)},m.prototype.detectVideoMetadataChange=function(e,t){var n,i;return t.codec_mimetype!==this.video_metadata_.details.codec_mimetype?(P.a.v(this.TAG,"Video: Codec mimeType changed from "+this.video_metadata_.details.codec_mimetype+" to "+t.codec_mimetype),!0):t.codec_size.width!==this.video_metadata_.details.codec_size.width||t.codec_size.height!==this.video_metadata_.details.codec_size.height?(n=this.video_metadata_.details.codec_size,i=t.codec_size,P.a.v(this.TAG,"Video: Coded Resolution changed from "+n.width+"x"+n.height+" to "+i.width+"x"+i.height),!0):t.present_size.width!==this.video_metadata_.details.present_size.width&&(P.a.v(this.TAG,"Video: Present resolution width changed from "+this.video_metadata_.details.present_size.width+" to "+t.present_size.width),!0)},m.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},m.prototype.dispatchVideoInitSegment=function(){var e,t,n=this.video_metadata_.details,i={type:"video"},r=(i.id=this.video_track_.id,i.timescale=1e3,i.duration=this.duration_,i.codecWidth=n.codec_size.width,i.codecHeight=n.codec_size.height,i.presentWidth=n.present_size.width,i.presentHeight=n.present_size.height,i.profile=n.profile_string,i.level=n.level_string,i.bitDepth=n.bit_depth,i.chromaFormat=n.chroma_format,i.sarRatio=n.sar_ratio,i.frameRate=n.frame_rate,i.frameRate.fps_den),a=i.frameRate.fps_num,a=(i.refSampleDuration=r/a*1e3,i.codec=n.codec_mimetype,this.video_metadata_.vps?(r=this.video_metadata_.vps.data.subarray(4),e=this.video_metadata_.sps.data.subarray(4),t=this.video_metadata_.pps.data.subarray(4),a=new Re(r,e,t,n),i.hvcc=a.getData(),0==this.video_init_segment_dispatched_&&P.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: "+i.codec)):(e=this.video_metadata_.sps.data.subarray(4),t=this.video_metadata_.pps.data.subarray(4),r=new Z(e,t,n),i.avcc=r.getData(),0==this.video_init_segment_dispatched_&&P.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: "+i.codec)),this.onTrackMetadata("video",i),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1,this.media_info_);a.hasVideo=!0,a.width=i.codecWidth,a.height=i.codecHeight,a.fps=i.frameRate.fps,a.profile=i.profile,a.level=i.level,a.refFrames=n.ref_frames,a.chromaFormat=n.chroma_format_string,a.sarNum=i.sarRatio.width,a.sarDen=i.sarRatio.height,a.videoCodec=i.codec,a.hasAudio&&a.audioCodec?a.mimeType='video/mp2t; codecs="'+a.videoCodec+","+a.audioCodec+'"':a.mimeType='video/mp2t; codecs="'+a.videoCodec+'"',a.isComplete()&&this.onMediaInfo(a)},m.prototype.dispatchVideoMediaSegment=function(){this.isInitSegmentDispatched()&&this.video_track_.length&&this.onDataAvailable(null,this.video_track_)},m.prototype.dispatchAudioMediaSegment=function(){this.isInitSegmentDispatched()&&this.audio_track_.length&&this.onDataAvailable(this.audio_track_,null)},m.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},m.prototype.parseADTSAACPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n,i,r;if(this.aac_last_incomplete_data_&&((r=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength)).set(this.aac_last_incomplete_data_,0),r.set(e,this.aac_last_incomplete_data_.byteLength),e=r),null!=t&&(n=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)i=1024/this.audio_metadata_.sampling_frequency*1e3,n=this.aac_last_sample_pts_+i;else if(null==t)return void P.a.w(this.TAG,"AAC: Unknown pts");this.aac_last_incomplete_data_&&this.aac_last_sample_pts_&&(i=1024/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+i,1<Math.abs(r-n))&&(P.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+r+"ms, PES pts: "+n+"ms"),n=r)}for(var a,o,s=new ue(e),l=n;null!=(o=s.readNextAACFrame());){i=1024/o.sampling_frequency*1e3;var u={codec:"aac",data:o},u=(0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:o.audio_object_type,sampling_freq_index:o.sampling_freq_index,sampling_frequency:o.sampling_frequency,channel_config:o.channel_config},this.dispatchAudioInitSegment(u)):this.detectAudioMetadataChange(u)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(u)),a=l,Math.floor(l)),u={unit:o.data,length:o.data.byteLength,pts:u,dts:u};this.audio_track_.samples.push(u),this.audio_track_.length+=o.data.byteLength,l+=i}s.hasIncompleteData()&&(this.aac_last_incomplete_data_=s.getIncompleteData()),a&&(this.aac_last_sample_pts_=a)}},m.prototype.parseLOASAACPayload=function(e,t){var n,i,r;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_&&((r=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength)).set(this.aac_last_incomplete_data_,0),r.set(e,this.aac_last_incomplete_data_.byteLength),e=r),null!=t&&(n=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)i=1024/this.audio_metadata_.sampling_frequency*1e3,n=this.aac_last_sample_pts_+i;else if(null==t)return void P.a.w(this.TAG,"AAC: Unknown pts");this.aac_last_incomplete_data_&&this.aac_last_sample_pts_&&(i=1024/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+i,1<Math.abs(r-n))&&(P.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+r+"ms, PES pts: "+n+"ms"),n=r)}for(var a,o,s=new ce(e),l=n;null!=(o=s.readNextAACFrame(null!=(o=this.loas_previous_frame)?o:void 0));){i=1024/(this.loas_previous_frame=o).sampling_frequency*1e3;var u={codec:"aac",data:o},u=(0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:o.audio_object_type,sampling_freq_index:o.sampling_freq_index,sampling_frequency:o.sampling_frequency,channel_config:o.channel_config},this.dispatchAudioInitSegment(u)):this.detectAudioMetadataChange(u)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(u)),a=l,Math.floor(l)),u={unit:o.data,length:o.data.byteLength,pts:u,dts:u};this.audio_track_.samples.push(u),this.audio_track_.length+=o.data.byteLength,l+=i}s.hasIncompleteData()&&(this.aac_last_incomplete_data_=s.getIncompleteData()),a&&(this.aac_last_sample_pts_=a)}},m.prototype.parseAC3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n;if(null!=t&&(n=t/this.timescale_),"ac-3"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)s=1536/this.audio_metadata_.sampling_frequency*1e3,n=this.aac_last_sample_pts_+s;else if(null==t)return void P.a.w(this.TAG,"Opus: Unknown pts");for(var i,r,a=new Ce(e),o=n;null!=(r=a.readNextAC3Frame());){var s=1536/r.sampling_frequency*1e3,l={codec:"ac-3",data:r},l=(0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"ac-3",sampling_frequency:r.sampling_frequency,bit_stream_identification:r.bit_stream_identification,bit_stream_mode:r.bit_stream_mode,low_frequency_effects_channel_on:r.low_frequency_effects_channel_on,channel_mode:r.channel_mode},this.dispatchAudioInitSegment(l)):this.detectAudioMetadataChange(l)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(l)),i=o,Math.floor(o)),l={unit:r.data,length:r.data.byteLength,pts:l,dts:l};this.audio_track_.samples.push(l),this.audio_track_.length+=r.data.byteLength,o+=s}i&&(this.aac_last_sample_pts_=i)}},m.prototype.parseOpusPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n;if(null!=t&&(n=t/this.timescale_),"opus"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)n=this.aac_last_sample_pts_+(a=20);else if(null==t)return void P.a.w(this.TAG,"Opus: Unknown pts");for(var i=n,r=0;r<e.length;){for(var a=20,o=0!=(16&e[r+1]),s=0!=(8&e[r+1]),l=r+2,u=0;255===e[l];)u+=255,l+=1;u+=e[l];var l=(l+=1)+(o?2:0)+(s?2:0),c=i,o=Math.floor(i),s=e.slice(l,l+u),o={unit:s,length:s.byteLength,pts:o,dts:o};this.audio_track_.samples.push(o),this.audio_track_.length+=s.byteLength,i+=a,r=l+u}c&&(this.aac_last_sample_pts_=c)}},m.prototype.parseMP3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n=e[1]>>>3&3,i=(6&e[1])>>1,r=(e[2],(12&e[2])>>>2),a=3!=(e[3]>>>6&3)?2:1,o=0,s=34;switch(n){case 0:o=[11025,12e3,8e3,0][r];break;case 2:o=[22050,24e3,16e3,0][r];break;case 3:o=[44100,48e3,32e3,0][r]}switch(i){case 1:s=34;break;case 2:s=33;break;case 3:s=32}n=new _e,i=(n.object_type=s,n.sample_rate=o,n.channel_count=a,n.data=e,{codec:"mp3",data:n}),n=(0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"mp3",object_type:s,sample_rate:o,channel_count:a},this.dispatchAudioInitSegment(i)):this.detectAudioMetadataChange(i)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(i)),{unit:e,length:e.byteLength,pts:t/this.timescale_,dts:t/this.timescale_});this.audio_track_.samples.push(n),this.audio_track_.length+=e.byteLength}},m.prototype.detectAudioMetadataChange=function(e){if(e.codec!==this.audio_metadata_.codec)return P.a.v(this.TAG,"Audio: Audio Codecs changed from "+this.audio_metadata_.codec+" to "+e.codec),!0;if("aac"===e.codec&&"aac"===this.audio_metadata_.codec){if((t=e.data).audio_object_type!==this.audio_metadata_.audio_object_type)return P.a.v(this.TAG,"AAC: AudioObjectType changed from "+this.audio_metadata_.audio_object_type+" to "+t.audio_object_type),!0;if(t.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return P.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+this.audio_metadata_.sampling_freq_index+" to "+t.sampling_freq_index),!0;if(t.channel_config!==this.audio_metadata_.channel_config)return P.a.v(this.TAG,"AAC: Channel configuration changed from "+this.audio_metadata_.channel_config+" to "+t.channel_config),!0}else if("ac-3"===e.codec&&"ac-3"===this.audio_metadata_.codec){var t;if((t=e.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return P.a.v(this.TAG,"AC3: Sampling Frequency changed from "+this.audio_metadata_.sampling_frequency+" to "+t.sampling_frequency),!0;if(t.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return P.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+this.audio_metadata_.bit_stream_identification+" to "+t.bit_stream_identification),!0;if(t.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return P.a.v(this.TAG,"AC3: BitStream Mode changed from "+this.audio_metadata_.bit_stream_mode+" to "+t.bit_stream_mode),!0;if(t.channel_mode!==this.audio_metadata_.channel_mode)return P.a.v(this.TAG,"AC3: Channel Mode changed from "+this.audio_metadata_.channel_mode+" to "+t.channel_mode),!0;if(t.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return P.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+this.audio_metadata_.low_frequency_effects_channel_on+" to "+t.low_frequency_effects_channel_on),!0}else if("opus"===e.codec&&"opus"===this.audio_metadata_.codec){if((n=e.meta).sample_rate!==this.audio_metadata_.sample_rate)return P.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+n.sample_rate),!0;if(n.channel_count!==this.audio_metadata_.channel_count)return P.a.v(this.TAG,"Opus: Channel count changed from "+this.audio_metadata_.channel_count+" to "+n.channel_count),!0}else if("mp3"===e.codec&&"mp3"===this.audio_metadata_.codec){var n;if((n=e.data).object_type!==this.audio_metadata_.object_type)return P.a.v(this.TAG,"MP3: AudioObjectType changed from "+this.audio_metadata_.object_type+" to "+n.object_type),!0;if(n.sample_rate!==this.audio_metadata_.sample_rate)return P.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+n.sample_rate),!0;if(n.channel_count!==this.audio_metadata_.channel_count)return P.a.v(this.TAG,"MP3: Channel count changed from "+this.audio_metadata_.channel_count+" to "+n.channel_count),!0}return!1},m.prototype.dispatchAudioInitSegment=function(e){var t={type:"audio"},n=(t.id=this.audio_track_.id,t.timescale=1e3,t.duration=this.duration_,"aac"===this.audio_metadata_.codec?(n="aac"===e.codec?e.data:null,n=new te(n),t.audioSampleRate=n.sampling_rate,t.channelCount=n.channel_count,t.codec=n.codec_mimetype,t.originalCodec=n.original_codec_mimetype,t.config=n.config,t.refSampleDuration=1024/t.audioSampleRate*t.timescale):"ac-3"===this.audio_metadata_.codec?(n="ac-3"===e.codec?e.data:null,e=new ve(n),t.audioSampleRate=e.sampling_rate,t.channelCount=e.channel_count,t.codec=e.codec_mimetype,t.originalCodec=e.original_codec_mimetype,t.config=e.config,t.refSampleDuration=1536/t.audioSampleRate*t.timescale):"opus"===this.audio_metadata_.codec?(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.channelConfigCode=this.audio_metadata_.channel_config_code,t.codec="opus",t.originalCodec="opus",t.config=void 0,t.refSampleDuration=20):"mp3"===this.audio_metadata_.codec&&(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.codec="mp3",t.originalCodec="mp3",t.config=void 0),0==this.audio_init_segment_dispatched_&&P.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: "+t.codec),this.onTrackMetadata("audio",t),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1,this.media_info_);n.hasAudio=!0,n.audioCodec=t.originalCodec,n.audioSampleRate=t.audioSampleRate,n.audioChannelCount=t.channelCount,n.hasVideo&&n.videoCodec?n.mimeType='video/mp2t; codecs="'+n.videoCodec+","+n.audioCodec+'"':n.mimeType='video/mp2t; codecs="'+n.audioCodec+'"',n.isComplete()&&this.onMediaInfo(n)},m.prototype.dispatchPESPrivateDataDescriptor=function(e,t,n){var i=new ae;i.pid=e,i.stream_type=t,i.descriptor=n,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(i)},m.prototype.parsePESPrivateDataPayload=function(e,t,n,i,r){var a=new re;a.pid=i,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t?(i=Math.floor(t/this.timescale_),a.pts=i):a.nearest_pts=this.aac_last_sample_pts_,null!=n&&(r=Math.floor(n/this.timescale_),a.dts=r),this.onPESPrivateData&&this.onPESPrivateData(a)},m.prototype.parseTimedID3MetadataPayload=function(e,t,n,i,r){var a=new re;a.pid=i,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t&&(i=Math.floor(t/this.timescale_),a.pts=i),null!=n&&(r=Math.floor(n/this.timescale_),a.dts=r),this.onTimedID3Metadata&&this.onTimedID3Metadata(a)},m.prototype.parseSMPTE2038MetadataPayload=function(f,e,t,n,i){var r=new ge;r.pid=n,r.stream_id=i,r.len=f.byteLength,r.data=f,null!=e&&(n=Math.floor(e/this.timescale_),r.pts=n),r.nearest_pts=this.aac_last_sample_pts_,null!=t&&(i=Math.floor(t/this.timescale_),r.dts=i),r.ancillaries=function(){for(var e=new ne(f),t=0,n=[];t+=6,0===e.readBits(6);){var i=e.readBool(),r=(t+=1,e.readBits(11)),a=(t+=11,e.readBits(12)),o=(t+=12,255&e.readBits(10)),s=(t+=10,255&e.readBits(10)),l=(t+=10,255&e.readBits(10));t+=10;for(var u=new Uint8Array(l),c=0;c<l;c++){var h=255&e.readBits(10);t+=10,u[c]=h}e.readBits(10),t+=10;var d="User Defined";65==o?7==s&&(d="SCTE-104"):95==o?220==s?d="ARIB STD-B37 (1SEG)":221==s?d="ARIB STD-B37 (ANALOG)":222==s?d="ARIB STD-B37 (SD)":223==s&&(d="ARIB STD-B37 (HD)"):97==o&&(1==s?d="EIA-708":2==s&&(d="EIA-608")),n.push({yc_indicator:i,line_number:r,horizontal_offset:a,did:o,sdid:s,user_data:u,description:d,information:{}}),e.readBits(8-(t-Math.floor(t/8))%8),t+=(8-(t-Math.floor(t/8)))%8}return e.destroy(),e=null,n}(),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(r)},m),u=(c.init=function(){for(var e in c.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[]})c.types.hasOwnProperty(e)&&(c.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=c.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},c.box=function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),r=i.length,a=0;a<r;a++)t+=i[a].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);for(var o=8,a=0;a<r;a++)n.set(i[a],o),o+=i[a].byteLength;return n},c.generateInitSegment=function(e){var t=c.box(c.types.ftyp,c.constants.FTYP),e=c.moov(e),n=new Uint8Array(t.byteLength+e.byteLength);return n.set(t,0),n.set(e,t.byteLength),n},c.moov=function(e){var t=c.mvhd(e.timescale,e.duration),n=c.trak(e),e=c.mvex(e);return c.box(c.types.moov,t,n,e)},c.mvhd=function(e,t){return c.box(c.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},c.trak=function(e){return c.box(c.types.trak,c.tkhd(e),c.mdia(e))},c.tkhd=function(e){var t=e.id,n=e.duration,i=e.presentWidth,e=e.presentHeight;return c.box(c.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,e>>>8&255,255&e,0,0]))},c.mdia=function(e){return c.box(c.types.mdia,c.mdhd(e),c.hdlr(e),c.minf(e))},c.mdhd=function(e){var t=e.timescale,e=e.duration;return c.box(c.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))},c.hdlr=function(e){e="audio"===e.type?c.constants.HDLR_AUDIO:c.constants.HDLR_VIDEO;return c.box(c.types.hdlr,e)},c.minf=function(e){var t="audio"===e.type?c.box(c.types.smhd,c.constants.SMHD):c.box(c.types.vmhd,c.constants.VMHD);return c.box(c.types.minf,t,c.dinf(),c.stbl(e))},c.dinf=function(){return c.box(c.types.dinf,c.box(c.types.dref,c.constants.DREF))},c.stbl=function(e){return c.box(c.types.stbl,c.stsd(e),c.box(c.types.stts,c.constants.STTS),c.box(c.types.stsc,c.constants.STSC),c.box(c.types.stsz,c.constants.STSZ),c.box(c.types.stco,c.constants.STCO))},c.stsd=function(e){return"audio"===e.type?"mp3"===e.codec?c.box(c.types.stsd,c.constants.STSD_PREFIX,c.mp3(e)):"ac-3"===e.codec?c.box(c.types.stsd,c.constants.STSD_PREFIX,c.ac3(e)):"opus"===e.codec?c.box(c.types.stsd,c.constants.STSD_PREFIX,c.Opus(e)):c.box(c.types.stsd,c.constants.STSD_PREFIX,c.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?c.box(c.types.stsd,c.constants.STSD_PREFIX,c.hvc1(e)):c.box(c.types.stsd,c.constants.STSD_PREFIX,c.avc1(e))},c.mp3=function(e){var t=e.channelCount,e=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]);return c.box(c.types[".mp3"],t)},c.mp4a=function(e){var t=e.channelCount,n=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return c.box(c.types.mp4a,t,c.esds(e))},c.ac3=function(e){var t=e.channelCount,n=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return c.box(c.types["ac-3"],t,c.box(c.types.dac3,new Uint8Array(e.config)))},c.esds=function(e){var e=e.config||[],t=e.length,t=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2]));return c.box(c.types.esds,t)},c.Opus=function(e){var t=e.channelCount,n=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]);return c.box(c.types.Opus,t,c.dOps(e))},c.dOps=function(e){var t=e.channelCount,n=e.channelConfigCode,i=e.audioSampleRate;if(!e.config){var r=[];switch(n){case 1:case 2:r=[0];break;case 0:r=[255,1,1,0,1];break;case 128:r=[255,2,0,0,1];break;case 3:r=[1,2,1,0,2,1];break;case 4:r=[1,2,2,0,1,2,3];break;case 5:r=[1,3,2,0,4,1,2,3];break;case 6:r=[1,4,2,0,4,1,2,3,5];break;case 7:r=[1,4,2,0,4,1,2,3,5,6];break;case 8:r=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:r=[1,1,2,0,1];break;case 131:r=[1,1,3,0,1,2];break;case 132:r=[1,1,4,0,1,2,3];break;case 133:r=[1,1,5,0,1,2,3,4];break;case 134:r=[1,1,6,0,1,2,3,4,5];break;case 135:r=[1,1,7,0,1,2,3,4,5,6];break;case 136:r=[1,1,8,0,1,2,3,4,5,6,7]}var a=new Uint8Array(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}([0,t,0,0,i>>>24&255,i>>>17&255,i>>>8&255,i>>>0&255,0,0],r))}return c.box(c.types.dOps,a)},c.avc1=function(e){var t=e.avcc,n=e.codecWidth,e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return c.box(c.types.avc1,n,c.box(c.types.avcC,t))},c.hvc1=function(e){var t=e.hvcc,n=e.codecWidth,e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return c.box(c.types.hvc1,n,c.box(c.types.hvcC,t))},c.mvex=function(e){return c.box(c.types.mvex,c.trex(e))},c.trex=function(e){e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return c.box(c.types.trex,e)},c.moof=function(e,t){return c.box(c.types.moof,c.mfhd(e.sequenceNumber),c.traf(e,t))},c.mfhd=function(e){e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return c.box(c.types.mfhd,e)},c.traf=function(e,t){var n=e.id,n=c.box(c.types.tfhd,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),t=c.box(c.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),i=c.sdtp(e),e=c.trun(e,i.byteLength+16+16+8+16+8+8);return c.box(c.types.traf,n,t,e,i)},c.sdtp=function(e){for(var t=e.samples||[],n=t.length,i=new Uint8Array(4+n),r=0;r<n;r++){var a=t[r].flags;i[r+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return c.box(c.types.sdtp,i)},c.trun=function(e,t){var n=e.samples||[],i=n.length,e=12+16*i,r=new Uint8Array(e);r.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var a=0;a<i;a++){var o=n[a].duration,s=n[a].size,l=n[a].flags,u=n[a].cts;r.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a)}return c.box(c.types.trun,r)},c.mdat=function(e){return c.box(c.types.mdat,e)},c);function c(){}function m(e,t){var n=Le.call(this)||this;return n.TAG="TSDemuxer",n.first_parse_=!0,n.media_info_=new i.a,n.timescale_=90,n.duration_=0,n.current_pmt_pid_=-1,n.program_pmt_map_={},n.pes_slice_queues_={},n.section_slice_queues_={},n.video_metadata_={vps:void 0,sps:void 0,pps:void 0,details:void 0},n.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},n.aac_last_sample_pts_=void 0,n.aac_last_incomplete_data_=null,n.has_video_=!1,n.has_audio_=!1,n.video_init_segment_dispatched_=!1,n.audio_init_segment_dispatched_=!1,n.video_metadata_changed_=!1,n.audio_metadata_changed_=!1,n.loas_previous_frame=null,n.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},n.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},n.ts_packet_size_=e.ts_packet_size,n.sync_offset_=e.sync_offset,n.config_=t,n}function g(e){this.TAG="AC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&P.a.e(this.TAG,"Could not found AC3 syncword until payload end")}function ke(e,t,n,i){var r=23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength),r=this.data=new Uint8Array(r);r[0]=1,r[1]=(3&i.general_profile_space)<<6|(i.general_tier_flag?1:0)<<5|31&i.general_profile_idc,r[2]=i.general_profile_compatibility_flags_1,r[3]=i.general_profile_compatibility_flags_2,r[4]=i.general_profile_compatibility_flags_3,r[5]=i.general_profile_compatibility_flags_4,r[6]=i.general_constraint_indicator_flags_1,r[7]=i.general_constraint_indicator_flags_2,r[8]=i.general_constraint_indicator_flags_3,r[9]=i.general_constraint_indicator_flags_4,r[10]=i.general_constraint_indicator_flags_5,r[11]=i.general_constraint_indicator_flags_6,r[12]=i.general_level_idc,r[13]=240|(3840&i.min_spatial_segmentation_idc)>>8,r[14]=255&i.min_spatial_segmentation_idc,r[15]=252|3&i.parallelismType,r[16]=252|3&i.chroma_format_idc,r[17]=248|7&i.bit_depth_luma_minus8,r[18]=248|7&i.bit_depth_chroma_minus8,r[19]=0,r[20]=0,r[21]=(3&i.constant_frame_rate)<<6|(7&i.num_temporal_layers)<<3|(i.temporal_id_nested?1:0)<<2|3,r[22]=3,r[23]=128|f.kSliceVPS,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=(255&e.byteLength)>>0,r.set(e,28),r[23+(5+e.byteLength)+0]=128|f.kSliceSPS,r[23+(5+e.byteLength)+1]=0,r[23+(5+e.byteLength)+2]=1,r[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,r[23+(5+e.byteLength)+4]=(255&t.byteLength)>>0,r.set(t,23+(5+e.byteLength)+5),r[23+(5+e.byteLength+5+t.byteLength)+0]=128|f.kSlicePPS,r[23+(5+e.byteLength+5+t.byteLength)+1]=0,r[23+(5+e.byteLength+5+t.byteLength)+2]=1,r[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&n.byteLength)>>8,r[23+(5+e.byteLength+5+t.byteLength)+4]=(255&n.byteLength)>>0,r.set(n,23+(5+e.byteLength+5+t.byteLength)+5)}function Oe(e){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&P.a.e(this.TAG,"Could not find H265 startcode until payload end!")}u.init();var k=u,Me=(Fe.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},Fe),M=e(7),xe=(C.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},C.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(C.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),C.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},C.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},C.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new _.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),t&&this._remuxVideo(t),e&&this._remuxAudio(e)},C.prototype._onTrackMetadataReceived=function(e,t){var n=null,i="mp4",r=t.codec;if("audio"===e)n="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(i="mpeg",r="",new Uint8Array):k.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=k.generateInitSegment(t)}if(!this._onInitSegment)throw new _.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:r,container:e+"/"+i,mediaDuration:t.duration})},C.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e&&e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t&&t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},C.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},C.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0},e=(null!=e&&(n.samples.push(e),n.length=e.length),{type:"audio",id:2,sequenceNumber:0,samples:[],length:0});null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(e,!0)},C.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var n=e.samples,i=void 0,r=-1,a=this._audioMeta.refSampleDuration,o="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,s=this._dtsBaseInited&&void 0===this._audioNextDts,l=!1;if(n&&0!==n.length&&(1!==n.length||t)){var u,c,h=0,d=null,f=0,f=o?(h=0,e.length):(h=8)+e.length,p=null,t=(1<n.length&&(f-=(p=n.pop()).length),null!=this._audioStashedLastSample&&(u=this._audioStashedLastSample,this._audioStashedLastSample=null,n.unshift(u),f+=u.length),null!=p&&(this._audioStashedLastSample=p),n[0].dts-this._dtsBase);this._audioNextDts?i=t-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(i=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(l=!0)):i=null!=(C=this._audioSegmentInfoList.getLastSampleBefore(t))?(L=t-(C.originalDts+C.duration),t-(C.dts+C.duration+(L=L<=3?0:L))):0,l&&(C=t-i,null!=(L=this._videoSegmentInfoList.getLastSegmentBefore(t))&&L.beginDts<C?(T=Me.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(c=L.beginDts,t=C-L.beginDts,P.a.v(this.TAG,"InsertPrefixSilentAudio: dts: "+c+", duration: "+t),n.unshift({unit:T,dts:c,pts:c}),f+=T.byteLength):l=!1);for(var m=[],g=0;g<n.length;g++){var _=(u=n[g]).unit,y=u.dts-this._dtsBase,v=!1,E=null,A=0;if(!((c=y)<-.001)){if("mp3"!==this._audioMeta.codec){var b=y;if((i=y-(b=this._audioNextDts?this._audioNextDts:b))<=-3*a){P.a.w(this.TAG,"Dropping 1 audio frame (originalDts: "+y+" ms ,curRefDts: "+b+" ms)  due to dtsCorrection: "+i+" ms overlap.");continue}if(3*a<=i&&this._fillAudioTimestampGap&&!D.a.safari){var T,v=!0,S=Math.floor(i/a);P.a.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+y+" ms, curRefDts: "+b+" ms, dtsCorrection: "+Math.round(i)+" ms, generate: "+S+" frames"),c=Math.floor(b),A=Math.floor(b+a)-c,null==(T=Me.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(P.a.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),T=_);for(var E=[],w=0;w<S;w++){b+=a;var R=Math.floor(b),I=Math.floor(b+a)-R,R={dts:R,pts:R,cts:0,unit:T,size:T.byteLength,duration:I,originalDts:y,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};E.push(R),f+=R.size}}else c=Math.floor(b),A=Math.floor(b+a)-c;this._audioNextDts=b+a}else c=y-i,A=g!==n.length-1?n[g+1].dts-this._dtsBase-i-c:null!=p?p.dts-this._dtsBase-i-c:1<=m.length?m[m.length-1].duration:Math.floor(a),this._audioNextDts=c+A;-1===r&&(r=c),m.push({dts:c,pts:c,cts:0,unit:u.unit,size:u.unit.byteLength,duration:A,originalDts:y,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),v&&m.push.apply(m,E)}}if(0===m.length)e.samples=[],e.length=0;else{for(o?d=new Uint8Array(f):((d=new Uint8Array(f))[0]=f>>>24&255,d[1]=f>>>16&255,d[2]=f>>>8&255,d[3]=255&f,d.set(k.types.mdat,4)),g=0;g<m.length;g++)_=m[g].unit,d.set(_,h),h+=_.byteLength;var C=m[m.length-1],L=C.dts+C.duration,t=new M.b,l=(t.beginDts=r,t.endDts=L,t.beginPts=r,t.endPts=L,t.originalBeginDts=m[0].originalDts,t.originalEndDts=C.originalDts+C.duration,t.firstSample=new M.d(m[0].dts,m[0].pts,m[0].duration,m[0].originalDts,!1),t.lastSample=new M.d(C.dts,C.pts,C.duration,C.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(t),e.samples=m,e.sequenceNumber++,o?new Uint8Array:k.moof(e,r)),L=(e.samples=[],e.length=0,{type:"audio",data:this._mergeBoxes(l,d).buffer,sampleCount:m.length,info:t});o&&s&&(L.timestampOffset=r),this._onMediaSegment("audio",L)}}}},C.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var n=e,i=n.samples,r=void 0,a=-1,o=-1;if(i&&0!==i.length&&(1!==i.length||t)){var s,l=8,u=null,t=8+e.length,c=null,e=(1<i.length&&(t-=(c=i.pop()).length),null!=this._videoStashedLastSample&&(s=this._videoStashedLastSample,this._videoStashedLastSample=null,i.unshift(s),t+=s.length),null!=c&&(this._videoStashedLastSample=c),i[0].dts-this._dtsBase);r=this._videoNextDts?e-this._videoNextDts:!this._videoSegmentInfoList.isEmpty()&&null!=(T=this._videoSegmentInfoList.getLastSampleBefore(e))?(S=e-(T.originalDts+T.duration),e-(T.dts+T.duration+(S=S<=3?0:S))):0;for(var h=new M.b,d=[],f=0;f<i.length;f++){var p,m=(s=i[f]).dts-this._dtsBase,g=s.isKeyframe,_=m-r,y=s.cts,v=_+y,E=(-1===a&&(a=_,o=v),0),E=f!==i.length-1?i[f+1].dts-this._dtsBase-r-_:null!=c?c.dts-this._dtsBase-r-_:1<=d.length?d[d.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);g&&((p=new M.d(_,v,E,s.dts,!0)).fileposition=s.fileposition,h.appendSyncPoint(p)),d.push({dts:_,pts:v,cts:y,units:s.units,size:s.length,isKeyframe:g,duration:E,originalDts:m,flags:{isLeading:0,dependsOn:g?2:1,isDependedOn:g?1:0,hasRedundancy:0,isNonSync:g?0:1}})}for((u=new Uint8Array(t))[0]=t>>>24&255,u[1]=t>>>16&255,u[2]=t>>>8&255,u[3]=255&t,u.set(k.types.mdat,4),f=0;f<d.length;f++)for(var A=d[f].units;A.length;){var b=A.shift().data;u.set(b,l),l+=b.byteLength}var e=d[d.length-1],T=e.dts+e.duration,S=e.pts+e.duration,T=(this._videoNextDts=T,h.beginDts=a,h.endDts=T,h.beginPts=o,h.endPts=S,h.originalBeginDts=d[0].originalDts,h.originalEndDts=e.originalDts+e.duration,h.firstSample=new M.d(d[0].dts,d[0].pts,d[0].duration,d[0].originalDts,d[0].isKeyframe),h.lastSample=new M.d(e.dts,e.pts,e.duration,e.originalDts,e.isKeyframe),this._isLive||this._videoSegmentInfoList.append(h),n.samples=d,n.sequenceNumber++,this._forceFirstIDR&&((t=d[0].flags).dependsOn=2,t.isNonSync=0),k.moof(n,a));n.samples=[],n.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(T,u).buffer,sampleCount:d.length,info:h})}}},C.prototype._mergeBoxes=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},C),Ne=e(11),R=e(1);function I(t,n){this.TAG="TransmuxingController",this._emitter=new N.a,this._config=n,t.segments||(t.segments=[{duration:t.duration,filesize:t.filesize,url:t.url}]),"boolean"!=typeof t.cors&&(t.cors=!0),"boolean"!=typeof t.withCredentials&&(t.withCredentials=!1),this._mediaDataSource=t;var i=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach(function(e){e.timestampBase=i,i+=e.duration,e.cors=t.cors,e.withCredentials=t.withCredentials,n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy)}),isNaN(i)||this._mediaDataSource.duration===i||(this._mediaDataSource.duration=i),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function C(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new M.c("audio"),this._videoSegmentInfoList=new M.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!D.a.chrome||!(D.a.version.major<50||50===D.a.version.major&&D.a.version.build<2661)),this._fillSilentAfterSeek=D.a.msedge||D.a.msie,this._mp3UseMpegAudio=!D.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function Fe(){}I.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},I.prototype.on=function(e,t){this._emitter.addListener(e,t)},I.prototype.off=function(e,t){this._emitter.removeListener(e,t)},I.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},I.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e],n=this._ioctl=new Ne.a(n,this._config,e);n.onError=this._onIOException.bind(this),n.onSeeked=this._onIOSeeked.bind(this),n.onComplete=this._onIOComplete.bind(this),n.onRedirect=this._onIORedirect.bind(this),n.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):n.onDataArrival=this._onInitChunkArrival.bind(this),n.open(t)},I.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},I.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},I.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},I.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},I.prototype.seek=function(e){var t,n,i;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(i=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(n=i.getNearestKeyframe(e),this._remuxer.seek(n.milliseconds),this._ioctl.seek(n.fileposition),this._pendingResolveSeekPoint=n.milliseconds):null==(i=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(n=i.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,n.fileposition),this._pendingResolveSeekPoint=n.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())},I.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){n=i-1;break}return n},I.prototype._onInitChunkArrival=function(e,t){var n,i=this,r=0;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,r=this._demuxer.parseChunks(e,t)):(n=null,(n=H.probe(e)).match&&(this._setupFLVDemuxerRemuxer(n),r=this._demuxer.parseChunks(e,t)),n.match||n.needMoreData||(n=De.probe(e)).match&&(this._setupTSDemuxerRemuxer(n),r=this._demuxer.parseChunks(e,t)),n.match||n.needMoreData||(n=null,P.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(function(){i._internalAbort()}),this._emitter.emit(R.a.DEMUX_ERROR,A.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))),r},I.prototype._setupFLVDemuxerRemuxer=function(e){this._demuxer=new H(e,this._config),this._remuxer||(this._remuxer=new xe(this._config));e=this._mediaDataSource;null==e.duration||isNaN(e.duration)||(this._demuxer.overridedDuration=e.duration),"boolean"==typeof e.hasAudio&&(this._demuxer.overridedHasAudio=e.hasAudio),"boolean"==typeof e.hasVideo&&(this._demuxer.overridedHasVideo=e.hasVideo),this._demuxer.timestampBase=e.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},I.prototype._setupTSDemuxerRemuxer=function(e){e=this._demuxer=new De(e,this._config);this._remuxer||(this._remuxer=new xe(this._config)),e.onError=this._onDemuxException.bind(this),e.onMediaInfo=this._onMediaInfo.bind(this),e.onMetaDataArrived=this._onMetaDataArrived.bind(this),e.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),e.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),e.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),e.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),e.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},I.prototype._onMediaInfo=function(e){var t=this,e=(null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,i.a.prototype)),Object.assign({},e));Object.setPrototypeOf(e,i.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)})},I.prototype._onMetaDataArrived=function(e){this._emitter.emit(R.a.METADATA_ARRIVED,e)},I.prototype._onScriptDataArrived=function(e){this._emitter.emit(R.a.SCRIPTDATA_ARRIVED,e)},I.prototype._onTimedID3Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(R.a.TIMED_ID3_METADATA_ARRIVED,e))},I.prototype._onSMPTE2038Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(R.a.SMPTE2038_METADATA_ARRIVED,e))},I.prototype._onSCTE35Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(R.a.SCTE35_METADATA_ARRIVED,e))},I.prototype._onPESPrivateDataDescriptor=function(e){this._emitter.emit(R.a.PES_PRIVATE_DATA_DESCRIPTOR,e)},I.prototype._onPESPrivateData=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(R.a.PES_PRIVATE_DATA_ARRIVED,e))},I.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},I.prototype._onIOComplete=function(e){e+=1;e<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(R.a.LOADING_COMPLETE),this._disableStatisticsReporter())},I.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},I.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(R.a.RECOVERED_EARLY_EOF)},I.prototype._onIOException=function(e,t){P.a.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(R.a.IO_ERROR,e,t),this._disableStatisticsReporter()},I.prototype._onDemuxException=function(e,t){P.a.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(R.a.DEMUX_ERROR,e,t)},I.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(R.a.INIT_SEGMENT,e,t)},I.prototype._onRemuxerMediaSegmentArrival=function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(R.a.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint)&&"video"===e&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,D.a.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(R.a.RECOMMEND_SEEKPOINT,t))},I.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},I.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},I.prototype._reportSegmentMediaInfo=function(e){e=this._mediaInfo.segments[e],e=Object.assign({},e);e.duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(R.a.MEDIA_INFO,e)},I.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(R.a.STATISTICS_INFO,e)},x.a=I},function(e,t,n){"use strict";var i,r,a,o,s,l,u,c,h,d=n(0),f=(D.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},D.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(D.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return this._intervalBytes/(e=0==e?1:e)/1024},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),D),p=n(2),m=n(4),g=n(3),_=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},c=p.a,i(h=L,n=c),h.prototype=null===n?Object.create(n):(P.prototype=n.prototype,new P),L.isSupported=function(){try{var e=m.a.msedge&&15048<=m.a.version.minor,t=!m.a.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}},L.prototype.destroy=function(){this.isWorking()&&this.abort(),c.prototype.destroy.call(this)},L.prototype.open=function(e,t){var n=this,i=(this._dataSource=e,this._range=t,e.url),r=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL),this._seekHandler.getConfig(i,t)),a=new self.Headers;if("object"==typeof r.headers){var o=r.headers;for(s in o)o.hasOwnProperty(s)&&a.append(s,o[s])}i={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==typeof this._config.headers)for(var s in this._config.headers)a.append(s,this._config.headers[s]);!1===e.cors&&(i.mode="same-origin"),e.withCredentials&&(i.credentials="include"),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,i.signal=this._abortController.signal),this._status=p.c.kConnecting,self.fetch(r.url,i).then(function(e){if(n._requestAbort)n._status=p.c.kIdle,e.body.cancel();else{var t;if(e.ok&&200<=e.status&&e.status<=299)return e.url!==r.url&&n._onURLRedirect&&(t=n._seekHandler.removeURLParameters(e.url),n._onURLRedirect(t)),null!=(t=e.headers.get("Content-Length"))&&(n._contentLength=parseInt(t),0!==n._contentLength)&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength),n._pump.call(n,e.body.getReader());if(n._status=p.c.kError,!n._onError)throw new g.d("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}}).catch(function(e){if(!n._abortController||!n._abortController.signal.aborted){if(n._status=p.c.kError,!n._onError)throw e;n._onError(p.b.EXCEPTION,{code:-1,msg:e.message})}})},L.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==p.c.kBuffering||!m.a.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},L.prototype._pump=function(i){var r=this;return i.read().then(function(e){if(e.done)if(null!==r._contentLength&&r._receivedLength<r._contentLength){r._status=p.c.kError;var t=p.b.EARLY_EOF,n={code:-1,msg:"Fetch stream meet Early-EOF"};if(!r._onError)throw new g.d(n.msg);r._onError(t,n)}else r._status=p.c.kComplete,r._onComplete&&r._onComplete(r._range.from,r._range.from+r._receivedLength-1);else if(r._abortController&&r._abortController.signal.aborted)r._status=p.c.kComplete;else{if(!0===r._requestAbort)return r._status=p.c.kComplete,i.cancel();r._status=p.c.kBuffering;t=e.value.buffer,n=r._range.from+r._receivedLength;r._receivedLength+=t.byteLength,r._onDataArrival&&r._onDataArrival(t,n,r._receivedLength),r._pump(i)}}).catch(function(e){if(r._abortController&&r._abortController.signal.aborted)r._status=p.c.kComplete;else if(11!==e.code||!m.a.msedge){r._status=p.c.kError;var t=0,n=null,n=19!==e.code&&"network error"!==e.message||!(null===r._contentLength||null!==r._contentLength&&r._receivedLength<r._contentLength)?(t=p.b.EXCEPTION,{code:e.code,msg:e.message}):(t=p.b.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!r._onError)throw new g.d(n.msg);r._onError(t,n)}})},L),n=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=(l=p.a,n(C,l),C.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return d.a.w("MozChunkedLoader",e.message),!1}},C.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),l.prototype.destroy.call(this)},C.prototype.open=function(e,t){this._dataSource=e,this._range=t;var n=e.url,n=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL),this._seekHandler.getConfig(n,t)),i=(this._requestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="moz-chunked-arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onloadend=this._onLoadEnd.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);this._status=p.c.kConnecting,i.send()},C.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=p.c.kComplete},C.prototype._onReadyStateChange=function(e){var t,e=e.target;if(2===e.readyState)if(null!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect&&(t=this._seekHandler.removeURLParameters(e.responseURL),this._onURLRedirect(t)),0!==e.status&&(e.status<200||299<e.status)){if(this._status=p.c.kError,!this._onError)throw new g.d("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=p.c.kBuffering},C.prototype._onProgress=function(e){var t;this._status!==p.c.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength),e=e.target.response,t=this._range.from+this._receivedLength,this._receivedLength+=e.byteLength,this._onDataArrival)&&this._onDataArrival(e,t,this._receivedLength)},C.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==p.c.kError&&(this._status=p.c.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1):this._requestAbort=!1},C.prototype._onXhrError=function(e){this._status=p.c.kError;var t=0,n=null,n=this._contentLength&&e.loaded<this._contentLength?(t=p.b.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=p.b.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.d(n.msg);this._onError(t,n)},C),n=(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=(o=p.a,n(I,o),I.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return d.a.w("RangeLoader",e.message),!1}},I.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),o.prototype.destroy.call(this)},Object.defineProperty(I.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),I.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=p.c.kConnecting;e=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(e=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||e?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},I.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,e=t+e;null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)},I.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var n=e.url,n=(this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL)),this._seekHandler.getConfig(n,t)),i=(this._currentRequestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onload=this._onLoad.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);i.send()},I.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=p.c.kComplete},I.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},I.prototype._onReadyStateChange=function(e){var t,e=e.target;if(2===e.readyState)if(null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t),200<=e.status&&e.status<=299)this._waitForTotalLength||(this._status=p.c.kBuffering);else{if(this._status=p.c.kError,!this._onError)throw new g.d("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}},I.prototype._onProgress=function(e){if(this._status!==p.c.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,t=this._totalLengthReceived=!0,n=e.total,this._internalAbort(),null!=n&0!==n)&&(this._totalLength=n),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var n=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(n)}},I.prototype._normalizeSpeed=function(e){var t,n=this._chunkSizeKBList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},I.prototype._onLoad=function(e){var t,n;this._status!==p.c.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)!==(t=0===(t=this._speedSampler.lastSecondKBps)&&(this._zeroSpeedChunkCount++,3<=this._zeroSpeedChunkCount)?this._speedSampler.currentKBps:t)&&(t=this._normalizeSpeed(t),this._currentSpeedNormalized!==t)&&(this._currentSpeedNormalized=t,this._currentChunkSizeKB=t),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,n=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():n=!0,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),n&&(this._status=p.c.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))},I.prototype._onXhrError=function(e){this._status=p.c.kError;var t=0,n=null,n=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=p.b.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=p.b.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.d(n.msg);this._onError(t,n)},I),n=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=(r=p.a,n(R,r),R.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},R.prototype.destroy=function(){this._ws&&this.abort(),r.prototype.destroy.call(this)},R.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=p.c.kConnecting}catch(e){this._status=p.c.kError;t={code:e.code,msg:e.message};if(!this._onError)throw new g.d(t.msg);this._onError(p.b.EXCEPTION,t)}},R.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=p.c.kComplete},R.prototype._onWebSocketOpen=function(e){this._status=p.c.kBuffering},R.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=p.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},R.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{this._status=p.c.kError;e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new g.d(e.msg);this._onError(p.b.EXCEPTION,e)}},R.prototype._dispatchArrayBuffer=function(e){var t=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,t,this._receivedLength)},R.prototype._onWebSocketError=function(e){this._status=p.c.kError;e={code:e.code,msg:e.message};if(!this._onError)throw new g.d(e.msg);this._onError(p.b.EXCEPTION,e)},R),A=(w.prototype.getConfig=function(e,t){var n,i={};return 0!==t.from||-1!==t.to?(n=void 0,n=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",i.Range=n):this._zeroStart&&(i.Range="bytes=0-"),{url:e,headers:i}},w.prototype.removeURLParameters=function(e){return e},w),b=(S.prototype.getConfig=function(e,t){var n;return 0===t.from&&-1===t.to||(n=!0,-1===e.indexOf("?")&&(e+="?",n=!1),n&&(e+="&"),e+=this._startName+"="+t.from.toString(),-1!==t.to&&(e+="&"+this._endName+"="+t.to.toString())),{url:e,headers:{}}},S.prototype.removeURLParameters=function(e){var t=e.split("?")[0],n=void 0,i=e.indexOf("?"),r="";if(null!=(n=-1!==i?e.substring(i+1):n)&&0<n.length)for(var a=n.split("&"),o=0;o<a.length;o++){var s=a[o].split("=");s[0]!==this._startName&&s[0]!==this._endName&&(0<o&&(r+="&"),r+=a[o])}return 0===r.length?t:t+"?"+r},S);function T(e,t,n){this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=65536,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new f,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function S(e,t){this._startName=e,this._endName=t}function w(e){this._zeroStart=e||!1}function R(){var e=r.call(this,"websocket-loader")||this;return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function I(e,t){var n=o.call(this,"xhr-range-loader")||this;return n.TAG="RangeLoader",n._seekHandler=e,n._config=t,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new f,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}function C(e,t){var n=l.call(this,"xhr-moz-chunked-loader")||this;return n.TAG="MozChunkedLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function L(e,t){var n=c.call(this,"fetch-stream-loader")||this;return n.TAG="FetchStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._requestAbort=!1,n._abortController=null,n._contentLength=null,n._receivedLength=0,n}function P(){this.constructor=h}function D(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}T.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},T.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},T.prototype.isPaused=function(){return this._paused},Object.defineProperty(T.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"currentSpeed",{get:function(){return this._loaderClass===v?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),T.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new A(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new b(t,n)}else{if("custom"!==e.seekType)throw new g.b("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new g.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},T.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=E;else if(_.isSupported())this._loaderClass=_;else if(y.isSupported())this._loaderClass=y;else{if(!v.isSupported())throw new g.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=v}},T.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},T.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},T.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},T.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},T.prototype.resume=function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))},T.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},T.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;t={from:e,to:-1};this._currentRange={from:t.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,t),this._onSeeked&&this._onSeeked()},T.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new g.b("Url must be a non-empty string!");this._dataSource.url=e},T.prototype._expandBuffer=function(e){for(var t,n,i=this._stashSize;i+1048576<e;)i*=2;(i+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(i),0<this._stashUsed&&(n=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,i).set(n,0)),this._stashBuffer=t,this._bufferSize=i)},T.prototype._normalizeSpeed=function(e){var t,n=this._speedNormalizeList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},T.prototype._adjustStashSize=function(e){var t=0,e=1024*(t=8192<(t=this._config.isLive?e/8:e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)?8192:t)+1048576;this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t},T.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},T.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},T.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},T.prototype._onLoaderChunkArrival=function(e,t,n){if(!this._onDataArrival)throw new g.a("IOController: No existing consumer (onDataArrival) callback!");var i,r,a,o,s;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof)&&this._onRecoveredEarlyEof(),this._speedSampler.addBytes(e.byteLength),0!==(i=this._speedSampler.lastSecondKBps)&&(i=this._normalizeSpeed(i),this._speedNormalized!==i)&&(this._speedNormalized=i,this._adjustStashSize(i)),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?((a=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(a=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(i=this._stashBuffer.slice(0,this._stashUsed),(o=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?0<o&&(s=new Uint8Array(i,o),a.set(s,0),this._stashUsed=s.byteLength,this._stashByteStart+=o):(this._stashUsed=0,this._stashByteStart+=o),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&(this._expandBuffer(r),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o))):0===this._stashUsed?(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&this._expandBuffer(r),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(o=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<o&&(s=new Uint8Array(this._stashBuffer,o),a.set(s,0)),this._stashUsed-=o,this._stashByteStart+=o))},T.prototype._flushStashBuffer=function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),i=t.byteLength-n;if(n<t.byteLength){if(!e)return 0<n&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,n),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=n),0;d.a.w(this.TAG,i+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,i}return 0},T.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},T.prototype._onLoaderError=function(e,t){switch(d.a.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=p.b.UNRECOVERABLE_EARLY_EOF),e){case p.b.EARLY_EOF:var n;if(!this._config.isLive&&this._totalLength)return void((n=this._currentRange.to+1)<this._totalLength&&(d.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)));e=p.b.UNRECOVERABLE_EARLY_EOF;break;case p.b.UNRECOVERABLE_EARLY_EOF:case p.b.CONNECTING_TIMEOUT:case p.b.HTTP_STATUS_CODE_INVALID:case p.b.EXCEPTION:}if(!this._onError)throw new g.d("IOException: "+t.msg);this._onError(e,t)},t.a=T},function(e,t,n){"use strict";r.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},"function"!=typeof self.Promise&&n(15).polyfill()};var i=r;function r(){}i.install(),t.a=i},function(e,t,d){function a(n){var i={};function r(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}r.m=n,r.c=i,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw e};var e=r(r.s=ENTRY_MODULE);return e.default||e}function f(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(h,e){var n={main:d.m},i=(e=e||{}).all?{main:Object.keys(n.main)}:function(e){for(var t={main:[h]},n={main:[]},i={main:{}};function(n){return Object.keys(n).reduce(function(e,t){return e||0<n[t].length},!1)}(t);)for(var r=Object.keys(t),a=0;a<r.length;a++){var o=r[a],s=t[o].pop();if(i[o]=i[o]||{},!i[o][s]&&e[o][s]){i[o][s]=!0,n[o]=n[o]||[],n[o].push(s);for(var l=function(e,t,n){var i={},r=(i[n]=[],t.toString());if(t=r.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)){for(var a,t=t[1],o=new RegExp("(\\\\n|\\W)"+f(t)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");a=o.exec(r);)"dll-reference"!==a[3]&&i[n].push(a[3]);for(o=new RegExp("\\("+f(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");a=o.exec(r);)e[a[2]]||(i[n].push(a[1]),e[a[2]]=d(a[1]).m),i[a[2]]=i[a[2]]||[],i[a[2]].push(a[4]);for(var s,l=Object.keys(i),u=0;u<l.length;u++)for(var c=0;c<i[l[u]].length;c++)s=i[l[u]][c],isNaN(+s)||(i[l[u]][c]=+i[l[u]][c])}return i}(e,e[o][s],o),u=Object.keys(l),c=0;c<u.length;c++)t[u[c]]=t[u[c]]||[],t[u[c]]=t[u[c]].concat(l[u[c]])}}return n}(n),r="",t=(Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;i[t][e];)e++;i[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i[t].map(function(e){return JSON.stringify(e)+": "+n[t][e].toString()}).join(",")+"});\n"}),r=r+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(h))+")({"+i.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"}))(self);",new window.Blob([r],{type:"text/javascript"}));return e.bare||(e=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(t),(t=new window.Worker(e)).objectURL=e),t}},function(e,t,n){e.exports=n(19).default},function(e,t,n){!function(x,N){e.exports=function(){"use strict";function l(e){return"function"==typeof e}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,t=void 0,r=void 0,s=function(e,t){h[i]=e,h[i+1]=t,2===(i+=2)&&(r?r(d):g())},e="undefined"!=typeof window?window:void 0,a=e||{},a=a.MutationObserver||a.WebKitMutationObserver,o="undefined"==typeof self&&void 0!==x&&"[object process]"==={}.toString.call(x),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(d,1)}}var h=new Array(1e3);function d(){for(var e=0;e<i;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;i=0}var f,p,m,g=void 0;function _(e,t){var n,i=this,r=new this.constructor(E),a=(void 0===r[v]&&P(r),i._state);return a?(n=arguments[a-1],s(function(){return C(a,r,n,i._result)})):R(i,r,e,t),r}function y(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(b(t=new this(E),e),t)}var g=o?function(){return x.nextTick(d)}:a?(p=0,o=new a(d),m=document.createTextNode(""),o.observe(m,{characterData:!0}),function(){m.data=p=++p%2}):u?((f=new MessageChannel).port1.onmessage=d,function(){return f.port2.postMessage(0)}):(void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(d)}:c()}catch(e){return c()}}:c)(),v=Math.random().toString(36).substring(2);function E(){}function A(e,t,n){var r,a,i,o;t.constructor===e.constructor&&n===_&&t.constructor.resolve===y?(i=e,1===(o=t)._state?S(i,o._result):2===o._state?w(i,o._result):R(o,void 0,function(e){return b(i,e)},function(e){return w(i,e)})):void 0!==n&&l(n)?(r=t,a=n,s(function(n){var i=!1,e=function(e,t){try{e.call(t,function(e){i||(i=!0,r!==e?b(n,e):S(n,e))},function(e){i||(i=!0,w(n,e))})}catch(e){return e}}(a,r,n._label);!i&&e&&(i=!0,w(n,e))},e)):S(e,t)}function b(e,t){if(e===t)w(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)S(e,t);else{n=void 0;try{n=t.then}catch(t){return void w(e,t)}A(e,t,n)}var n}function T(e){e._onerror&&e._onerror(e._result),I(e)}function S(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length)&&s(I,e)}function w(e,t){void 0===e._state&&(e._state=2,e._result=t,s(T,e))}function R(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+1]=n,r[a+2]=i,0===a&&e._state&&s(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?C(n,i,r,a):r(a);e._subscribers.length=0}}function C(e,t,n,i){var r=l(n),a=void 0,o=void 0,s=!0;if(r){try{a=n(i)}catch(e){s=!1,o=e}if(t===a)return void w(t,new TypeError("A promises callback cannot return that same promise."))}else a=i;void 0===t._state&&(r&&s?b(t,a):!1===s?w(t,o):1===e?S(t,a):2===e&&w(t,a))}var L=0;function P(e){e[v]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}M.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},M.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===y){var r,a=void 0,o=void 0,s=!1;try{a=t.then}catch(t){s=!0,o=t}a===_&&void 0!==t._state?this._settledAt(t._state,e,t._result):"function"!=typeof a?(this._remaining--,this._result[e]=t):n===k?(r=new n(E),s?w(r,o):A(r,t,a),this._willSettleAt(r,e)):this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},M.prototype._settledAt=function(e,t,n){var i=this.promise;void 0===i._state&&(this._remaining--,2===e?w(i,n):this._result[t]=n),0===this._remaining&&S(i,this._result)},M.prototype._willSettleAt=function(e,t){var n=this;R(e,void 0,function(e){return n._settledAt(1,t,e)},function(e){return n._settledAt(2,t,e)})};var D=M,k=(O.prototype.catch=function(e){return this.then(null,e)},O.prototype.finally=function(t){var n=this.constructor;return l(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},O);function O(e){if(this[v]=L++,this._result=this._state=void 0,this._subscribers=[],E!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof O))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,n=e;try{n(function(e){b(t,e)},function(e){w(t,e)})}catch(n){w(t,n)}}}function M(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[v]||P(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||S(this.promise,this._result)):w(this.promise,new Error("Array Methods must be provided an Array"))}return k.prototype.then=_,k.all=function(e){return new D(this,e).promise},k.race=function(r){var a=this;return n(r)?new a(function(e,t){for(var n=r.length,i=0;i<n;i++)a.resolve(r[i]).then(e,t)}):new a(function(e,t){return t(new TypeError("You must pass an array to race."))})},k.resolve=y,k.reject=function(e){var t=new this(E);return w(t,e),t},k._setScheduler=function(e){r=e},k._setAsap=function(e){s=e},k._asap=s,k.polyfill=function(){var e=void 0;if(void 0!==N)e=N;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=k},k.Promise=k}()}.call(this,n(16),n(17))},function(e,t){var n,i,e=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}var s,l=[],u=!1,c=-1;function h(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length)&&d()}function d(){if(!u){var e=o(h);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var a=n(9),o=n(12),s=n(10),l=n(1);t.default=function(n){var i=null,r=function(e,t){n.postMessage({msg:"logcat_callback",data:{type:e,logcat:t}})}.bind(this);o.a.install(),n.addEventListener("message",function(e){switch(e.data.cmd){case"init":(i=new s.a(e.data.param[0],e.data.param[1])).on(l.a.IO_ERROR,function(e,t){n.postMessage({msg:l.a.IO_ERROR,data:{type:e,info:t}})}.bind(this)),i.on(l.a.DEMUX_ERROR,function(e,t){n.postMessage({msg:l.a.DEMUX_ERROR,data:{type:e,info:t}})}.bind(this)),i.on(l.a.INIT_SEGMENT,function(e,t){e={msg:l.a.INIT_SEGMENT,data:{type:e,data:t}},n.postMessage(e,[t.data])}.bind(this)),i.on(l.a.MEDIA_SEGMENT,function(e,t){e={msg:l.a.MEDIA_SEGMENT,data:{type:e,data:t}},n.postMessage(e,[t.data])}.bind(this)),i.on(l.a.LOADING_COMPLETE,function(){var e={msg:l.a.LOADING_COMPLETE};n.postMessage(e)}.bind(this)),i.on(l.a.RECOVERED_EARLY_EOF,function(){var e={msg:l.a.RECOVERED_EARLY_EOF};n.postMessage(e)}.bind(this)),i.on(l.a.MEDIA_INFO,function(e){e={msg:l.a.MEDIA_INFO,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.METADATA_ARRIVED,function(e){e={msg:l.a.METADATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.SCRIPTDATA_ARRIVED,function(e){e={msg:l.a.SCRIPTDATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.TIMED_ID3_METADATA_ARRIVED,function(e){e={msg:l.a.TIMED_ID3_METADATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.SMPTE2038_METADATA_ARRIVED,function(e){e={msg:l.a.SMPTE2038_METADATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.SCTE35_METADATA_ARRIVED,function(e){e={msg:l.a.SCTE35_METADATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.PES_PRIVATE_DATA_DESCRIPTOR,function(e){e={msg:l.a.PES_PRIVATE_DATA_DESCRIPTOR,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.PES_PRIVATE_DATA_ARRIVED,function(e){e={msg:l.a.PES_PRIVATE_DATA_ARRIVED,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.STATISTICS_INFO,function(e){e={msg:l.a.STATISTICS_INFO,data:e},n.postMessage(e)}.bind(this)),i.on(l.a.RECOMMEND_SEEKPOINT,function(e){n.postMessage({msg:l.a.RECOMMEND_SEEKPOINT,data:e})}.bind(this));break;case"destroy":i&&(i.destroy(),i=null),n.postMessage({msg:"destroyed"});break;case"start":i.start();break;case"stop":i.stop();break;case"seek":i.seek(e.data.param);break;case"pause":i.pause();break;case"resume":i.resume();break;case"logging_config":var t=e.data.param;a.a.applyConfig(t),!0===t.enableCallback?a.a.addLogListener(r):a.a.removeLogListener(r)}})}},function(x,e,t){"use strict";t.r(e);var n=t(12),i=t(11),r={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function a(){return Object.assign({},r)}M.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},M.supportMSEH265Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')},M.supportNetworkStreamIO=function(){var e=new i.a({},a()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},M.getNetworkLoaderTypeName=function(){var e=new i.a({},a()),t=e.loaderType;return e.destroy(),t},M.supportNativeMediaPlayback=function(e){e=(M.videoElement=null==M.videoElement?window.document.createElement("video"):M.videoElement).canPlayType(e);return"probably"===e||"maybe"==e},M.getFeatureList=function(){var e={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.msePlayback=M.supportMSEH264Playback(),e.networkStreamIO=M.supportNetworkStreamIO(),e.networkLoaderName=M.getNetworkLoaderTypeName(),e.mseLivePlayback=e.msePlayback&&e.networkStreamIO,e.mseH265Playback=M.supportMSEH265Playback(),e.nativeMP4H264Playback=M.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=M.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=M.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=M.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e};var o=M,s=t(2),l=t(6),u=t.n(l),c=t(0),h=t(4),d={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info"},l=t(13),f=t.n(l),p=t(9),m=t(10),g=t(1),_=t(8),y=(O.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),p.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},O.prototype.on=function(e,t){this._emitter.addListener(e,t)},O.prototype.off=function(e,t){this._emitter.removeListener(e,t)},O.prototype.hasWorker=function(){return null!=this._worker},O.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},O.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},O.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},O.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},O.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},O.prototype._onInitSegment=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(g.a.INIT_SEGMENT,e,t)})},O.prototype._onMediaSegment=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(g.a.MEDIA_SEGMENT,e,t)})},O.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(g.a.LOADING_COMPLETE)})},O.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then(function(){e._emitter.emit(g.a.RECOVERED_EARLY_EOF)})},O.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.MEDIA_INFO,e)})},O.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.METADATA_ARRIVED,e)})},O.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.SCRIPTDATA_ARRIVED,e)})},O.prototype._onTimedID3MetadataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.TIMED_ID3_METADATA_ARRIVED,e)})},O.prototype._onSMPTE2038MetadataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.SMPTE2038_METADATA_ARRIVED,e)})},O.prototype._onSCTE35MetadataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.SCTE35_METADATA_ARRIVED,e)})},O.prototype._onPESPrivateDataDescriptor=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.PES_PRIVATE_DATA_DESCRIPTOR,e)})},O.prototype._onPESPrivateDataArrived=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.PES_PRIVATE_DATA_ARRIVED,e)})},O.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.STATISTICS_INFO,e)})},O.prototype._onIOError=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(g.a.IO_ERROR,e,t)})},O.prototype._onDemuxError=function(e,t){var n=this;Promise.resolve().then(function(){n._emitter.emit(g.a.DEMUX_ERROR,e,t)})},O.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then(function(){t._emitter.emit(g.a.RECOMMEND_SEEKPOINT,e)})},O.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},O.prototype._onWorkerMessage=function(e){var t=e.data,n=t.data;if("destroyed"===t.msg||this._workerDestroying)this._workerDestroying=!1,this._worker.terminate(),this._worker=null;else switch(t.msg){case g.a.INIT_SEGMENT:case g.a.MEDIA_SEGMENT:this._emitter.emit(t.msg,n.type,n.data);break;case g.a.LOADING_COMPLETE:case g.a.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case g.a.MEDIA_INFO:Object.setPrototypeOf(n,_.a.prototype),this._emitter.emit(t.msg,n);break;case g.a.METADATA_ARRIVED:case g.a.SCRIPTDATA_ARRIVED:case g.a.TIMED_ID3_METADATA_ARRIVED:case g.a.SMPTE2038_METADATA_ARRIVED:case g.a.SCTE35_METADATA_ARRIVED:case g.a.PES_PRIVATE_DATA_DESCRIPTOR:case g.a.PES_PRIVATE_DATA_ARRIVED:case g.a.STATISTICS_INFO:this._emitter.emit(t.msg,n);break;case g.a.IO_ERROR:case g.a.DEMUX_ERROR:this._emitter.emit(t.msg,n.type,n.info);break;case g.a.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,n);break;case"logcat_callback":c.a.emitter.emit("log",n.type,n.logcat)}},O),v="error",E="source_open",A="update_end",b="buffer_full",T=t(7),S=t(3),w=(k.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},k.prototype.on=function(e,t){this._emitter.addListener(e,t)},k.prototype.off=function(e,t){this._emitter.removeListener(e,t)},k.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new S.a("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},k.prototype.detachMediaElement=function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var n=this._pendingSegments[e],n=(n.splice(0,n.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null,this._sourceBuffers[e]);if(n){if("closed"!==t.readyState){try{t.removeSourceBuffer(n)}catch(t){c.a.e(this.TAG,t.message)}n.removeEventListener("error",this.e.onSourceBufferError),n.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){c.a.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},k.prototype.appendInitSegment=function(e,t){if(this._mediaSource&&"open"===this._mediaSource.readyState){var n=e,i=""+n.container,r=(n.codec&&0<n.codec.length&&(i+=";codecs="+n.codec),!1);if(c.a.v(this.TAG,"Received Initialization Segment, mimeType: "+i),this._lastInitSegments[n.type]=n,i!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])c.a.v(this.TAG,"Notice: "+n.type+" mimeType changed, origin: "+this._mimeTypes[n.type]+", target: "+i);else{r=!0;try{var a=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(i);a.addEventListener("error",this.e.onSourceBufferError),a.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return c.a.e(this.TAG,e.message),void this._emitter.emit(v,{code:e.code,msg:e.message})}}this._mimeTypes[n.type]=i}t||this._pendingSegments[n.type].push(n),r||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),h.a.safari&&"audio/mpeg"===n.container&&0<n.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}else this._pendingSourceBufferInit.push(e),this._pendingSegments[e.type].push(e)},k.prototype.appendMediaSegment=function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer(),e=this._sourceBuffers[e.type];!e||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},k.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(e){c.a.e(this.TAG,e.message)}this._idrList.clear();var i=this._pendingSegments[t];if(i.splice(0,i.length),"closed"!==this._mediaSource.readyState){for(var r=0;r<n.buffered.length;r++){var a=n.buffered.start(r),o=n.buffered.end(r);this._pendingRemoveRanges[t].push({start:a,end:o})}n.updating||this._doRemoveRanges(),h.a.safari&&(i=this._lastInitSegments[t])&&(this._pendingSegments[t].push(i),n.updating||this._doAppendSegments())}}},k.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},k.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},k.prototype._needCleanupSourceBuffer=function(){if(this._config.autoCleanupSourceBuffer){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){n=n.buffered;if(1<=n.length&&t-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}}return!1},k.prototype._doCleanupSourceBuffer=function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){for(var i=n.buffered,r=!1,a=0;a<i.length;a++){var o,s=i.start(a),l=i.end(a);s<=t&&t<l+3?t-s>=this._config.autoCleanupMaxBackwardDuration&&(r=!0,o=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:s,end:o})):l<t&&(r=!0,this._pendingRemoveRanges[e].push({start:s,end:l}))}r&&!n.updating&&this._doRemoveRanges()}}},k.prototype._updateMediaSourceDuration=function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(t=this._mediaSource.duration,0<(e=this._pendingMediaDuration)&&(isNaN(t)||t<e)&&(c.a.v(this.TAG,"Update MediaSource duration from "+t+" to "+e),this._mediaSource.duration=e),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)},k.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];n.length&&!t.updating;){var i=n.shift();t.remove(i.start,i.end)}},k.prototype._doAppendSegments=function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var n,i,r=t[e].shift();if(r.timestampOffset&&(n=this._sourceBuffers[e].timestampOffset,i=r.timestampOffset/1e3,.1<Math.abs(n-i)&&(c.a.v(this.TAG,"Update MPEG audio timestampOffset from "+n+" to "+i),this._sourceBuffers[e].timestampOffset=i),delete r.timestampOffset),!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(r.data),this._isBufferFull=!1,"video"===e&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(r),22===t.code?(this._isBufferFull||this._emitter.emit(b),this._isBufferFull=!0):(c.a.e(this.TAG,t.message),this._emitter.emit(v,{code:t.code,msg:t.message}))}}},k.prototype._onSourceOpen=function(){if(c.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(E)},k.prototype._onSourceEnded=function(){c.a.v(this.TAG,"MediaSource onSourceEnded")},k.prototype._onSourceClose=function(){c.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},k.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return 0<e.video.length||0<e.audio.length},k.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return 0<e.video.length||0<e.audio.length},k.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(A)},k.prototype._onSourceBufferError=function(e){c.a.e(this.TAG,"SourceBuffer Error: "+e)},k),l=t(5),R={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},I={NETWORK_EXCEPTION:s.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:s.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:s.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:s.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:l.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:l.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:l.a.CODEC_UNSUPPORTED},C=(D.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},D.prototype.on=function(e,t){var n=this;e===d.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(function(){n._emitter.emit(d.MEDIA_INFO,n.mediaInfo)}):e===d.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(function(){n._emitter.emit(d.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)},D.prototype.off=function(e,t){this._emitter.removeListener(e,t)},D.prototype.attachMediaElement=function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new w(this._config),this._msectl.on(A,this._onmseUpdateEnd.bind(this)),this._msectl.on(b,this._onmseBufferFull.bind(this)),this._msectl.on(E,function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())}),this._msectl.on(v,function(e){t._emitter.emit(d.ERROR,R.MEDIA_ERROR,I.MEDIA_MSE_ERROR,e)}),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},D.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},D.prototype.load=function(){var i=this;if(!this._mediaElement)throw new S.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new S.a("MSEPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new y(this._mediaDataSource,this._config),this._transmuxer.on(g.a.INIT_SEGMENT,function(e,t){i._msectl.appendInitSegment(t)}),this._transmuxer.on(g.a.MEDIA_SEGMENT,function(e,t){var n;i._msectl.appendMediaSegment(t),i._config.lazyLoad&&!i._config.isLive&&(n=i._mediaElement.currentTime,t.info.endDts>=1e3*(n+i._config.lazyLoadMaxDuration))&&null==i._progressChecker&&(c.a.v(i.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),i._suspendTransmuxer())}),this._transmuxer.on(g.a.LOADING_COMPLETE,function(){i._msectl.endOfStream(),i._emitter.emit(d.LOADING_COMPLETE)}),this._transmuxer.on(g.a.RECOVERED_EARLY_EOF,function(){i._emitter.emit(d.RECOVERED_EARLY_EOF)}),this._transmuxer.on(g.a.IO_ERROR,function(e,t){i._emitter.emit(d.ERROR,R.NETWORK_ERROR,e,t)}),this._transmuxer.on(g.a.DEMUX_ERROR,function(e,t){i._emitter.emit(d.ERROR,R.MEDIA_ERROR,e,{code:-1,msg:t})}),this._transmuxer.on(g.a.MEDIA_INFO,function(e){i._mediaInfo=e,i._emitter.emit(d.MEDIA_INFO,Object.assign({},e))}),this._transmuxer.on(g.a.METADATA_ARRIVED,function(e){i._emitter.emit(d.METADATA_ARRIVED,e)}),this._transmuxer.on(g.a.SCRIPTDATA_ARRIVED,function(e){i._emitter.emit(d.SCRIPTDATA_ARRIVED,e)}),this._transmuxer.on(g.a.TIMED_ID3_METADATA_ARRIVED,function(e){i._emitter.emit(d.TIMED_ID3_METADATA_ARRIVED,e)}),this._transmuxer.on(g.a.SMPTE2038_METADATA_ARRIVED,function(e){i._emitter.emit(d.SMPTE2038_METADATA_ARRIVED,e)}),this._transmuxer.on(g.a.SCTE35_METADATA_ARRIVED,function(e){i._emitter.emit(d.SCTE35_METADATA_ARRIVED,e)}),this._transmuxer.on(g.a.PES_PRIVATE_DATA_DESCRIPTOR,function(e){i._emitter.emit(d.PES_PRIVATE_DATA_DESCRIPTOR,e)}),this._transmuxer.on(g.a.PES_PRIVATE_DATA_ARRIVED,function(e){i._emitter.emit(d.PES_PRIVATE_DATA_ARRIVED,e)}),this._transmuxer.on(g.a.STATISTICS_INFO,function(e){i._statisticsInfo=i._fillStatisticsInfo(e),i._emitter.emit(d.STATISTICS_INFO,Object.assign({},i._statisticsInfo))}),this._transmuxer.on(g.a.RECOMMEND_SEEKPOINT,function(e){i._mediaElement&&!i._config.accurateSeek&&(i._requestSetTime=!0,i._mediaElement.currentTime=e/1e3)}),this._transmuxer.open()))},D.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},D.prototype.play=function(){return this._mediaElement.play()},D.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(D.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),D.prototype._fillStatisticsInfo=function(e){var t,n,i,r;return e.playerType=this._type,this._mediaElement instanceof HTMLVideoElement&&(t=!0,r=i=0,this._mediaElement.getVideoPlaybackQuality?(i=(n=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,r=n.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1,t&&(e.decodedFrames=i,e.droppedFrames=r)),e},D.prototype._onmseUpdateEnd=function(){var e,t=this._mediaElement.buffered,n=this._mediaElement.currentTime;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&0<t.length&&!this._mediaElement.paused&&(e=t.end(t.length-1))>this._config.liveBufferLatencyMaxLatency&&e-n>this._config.liveBufferLatencyMaxLatency&&(e=e-this._config.liveBufferLatencyMinRemain,this.currentTime=e),this._config.lazyLoad&&!this._config.isLive){for(var i=0,r=0;r<t.length;r++){var a=t.start(r),o=t.end(r);if(a<=n&&n<o){i=o;break}}i>=n+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(c.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},D.prototype._onmseBufferFull=function(){c.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},D.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker)&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},D.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,i=0;i<t.length;i++){var r=t.start(i),a=t.end(i);if(r<=e&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n)&&(c.a.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume())},D.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(i<=e&&e<r)return!0}return!1},D.prototype._internalSeek=function(e){var t,n=this._isTimepointBuffered(e),i=!1,r=0;e<1&&0<this._mediaElement.buffered.length&&((t=this._mediaElement.buffered.start(0))<1&&e<t||h.a.safari)&&(i=!0,r=h.a.safari?.1:t),i?(this._requestSetTime=!0,this._mediaElement.currentTime=r):n?(this._alwaysSeekKeyframe?(t=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=t?t.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))},D.prototype._checkAndApplyUnbufferedSeekpoint=function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))},D.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(c.a.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+e.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)},D.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},D.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<n.length){var n=n.start(0);if(n<1&&t<n||h.a.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=h.a.safari?.1:n)}this._isTimepointBuffered(t)?(this._alwaysSeekKeyframe&&null!=(n=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=n.dts/1e3),null!=this._progressChecker&&this._checkProgressAndResume()):(this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},D.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},D.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},D.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},D),L=(P.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},P.prototype.on=function(e,t){var n=this;e===d.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(d.MEDIA_INFO,n.mediaInfo)}):e===d.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(function(){n._emitter.emit(d.STATISTICS_INFO,n.statisticsInfo)}),this._emitter.addListener(e,t)},P.prototype.off=function(e,t){this._emitter.removeListener(e,t)},P.prototype.attachMediaElement=function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},P.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},P.prototype.load=function(){if(!this._mediaElement)throw new S.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},P.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},P.prototype.play=function(){return this._mediaElement.play()},P.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(P.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement)&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight),e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"statisticsInfo",{get:function(){var e,t,n,i,r={playerType:this._type,url:this._mediaDataSource.url};return this._mediaElement instanceof HTMLVideoElement&&(e=!0,i=n=0,this._mediaElement.getVideoPlaybackQuality?(n=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,i=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):e=!1,e)&&(r.decodedFrames=n,r.droppedFrames=i),r},enumerable:!1,configurable:!0}),P.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(d.MEDIA_INFO,this.mediaInfo)},P.prototype._reportStatisticsInfo=function(){this._emitter.emit(d.STATISTICS_INFO,this.statisticsInfo)},P);function P(e,t){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new u.a,this._config=a(),"object"==typeof t&&Object.assign(this._config,t);t=e.type.toLowerCase();if("mse"===t||"mpegts"===t||"m2ts"===t||"flv"===t)throw new S.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new S.b("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function D(e,t){this.TAG="MSEPlayer",this._type="MSEPlayer",this._emitter=new u.a,this._config=a(),"object"==typeof t&&Object.assign(this._config,t);t=e.type.toLowerCase();if("mse"!==t&&"mpegts"!==t&&"m2ts"!==t&&"flv"!==t)throw new S.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;t=h.a.chrome&&(h.a.version.major<50||50===h.a.version.major&&h.a.version.build<2661);this._alwaysSeekKeyframe=!!(t||h.a.msedge||h.a.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}function k(e){this.TAG="MSEController",this._config=e,this._emitter=new u.a,this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new T.a}function O(e,t){if(this.TAG="Transmuxer",this._emitter=new u.a,t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=f()(18),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},p.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:p.a.getConfig()})}catch(n){c.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new m.a(e,t)}else this._controller=new m.a(e,t);var n;this._controller&&((n=this._controller).on(g.a.IO_ERROR,this._onIOError.bind(this)),n.on(g.a.DEMUX_ERROR,this._onDemuxError.bind(this)),n.on(g.a.INIT_SEGMENT,this._onInitSegment.bind(this)),n.on(g.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),n.on(g.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),n.on(g.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),n.on(g.a.MEDIA_INFO,this._onMediaInfo.bind(this)),n.on(g.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),n.on(g.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),n.on(g.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),n.on(g.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),n.on(g.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),n.on(g.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),n.on(g.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),n.on(g.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),n.on(g.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)))}function M(){}n.a.install();t={createPlayer:function(e,t){var n=e;if(null==n||"object"!=typeof n)throw new S.b("MediaDataSource must be an javascript object!");if(!n.hasOwnProperty("type"))throw new S.b("MediaDataSource must has type field to indicate video file type!");switch(n.type){case"mse":case"mpegts":case"m2ts":case"flv":return new C(n,t);default:return new L(n,t)}},isSupported:function(){return o.supportMSEH264Playback()},getFeatureList:function(){return o.getFeatureList()}};t.BaseLoader=s.a,t.LoaderStatus=s.c,t.LoaderErrors=s.b,t.Events=d,t.ErrorTypes=R,t.ErrorDetails=I,t.MSEPlayer=C,t.NativePlayer=L,t.LoggingControl=p.a,Object.defineProperty(t,"version",{enumerable:!0,get:function(){return"1.7.3"}}),e.default=t}],a={},r.m=i,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14))},function(e,t,n){"use strict";n.r(t),n.d(t,"NvDashJsCore",function(){return s});var i=n(4),r=n(23);const a=n(5),o=n(171);var s=class{constructor(e){this.configFormat={width:e.width||a.DEFAULT_WIDTH,height:e.height||a.DEFAULT_HEIGHT,playerId:e.playerId||a.DEFAILT_WEBGL_PLAY_ID,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1},this.myPlayerID=this.configFormat.playerId+"-dash",this.myPlayer=null,this.videoTag=null,this.duration=-1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onCacheProcess=null,this.onError=null,this.seekResult=null,this.qualityList=[],this.manualLevel=-1,this.onQualityLevels=null,this.url=null,this.onLevelUpdates=null,this.videoCodec=a.CODEC_H264,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}makeIt(e){this._createVideo()&&(this._insertVideo(),this._videoAddEvent(),this._createDashPlayer(e),this._addPlayerEvent(),this.onMakeItReady)&&this.onMakeItReady()}_createVideo(e){return window.MediaSource?(this.url=e,this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",window.onclick=document.body.onclick=e=>{this.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.setAttribute("crossOrigin","anonymous"),this.videoTag.setAttribute("webkit-playsinline","true"),this.videoTag.setAttribute("playsinline","true"),!0):(this.onError&&this.onError({msg:i.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:i.ErrorTypes.NOT_SUPPORT,event:i.ErrorEvent.ERROR,url:e}),!1)}_insertVideo(){var e,t=document.querySelector("#"+this.configFormat.playerId);this.VRPlugin?this.VrPlayer||(this.VrPlayer=new r.a({video:this.videoTag,container:t,autoPlay:this.configFormat.autoPlay},this.VRPlugin)):t.getElementsByTagName("video")[0]||(e=t.getElementsByTagName("div"),t.insertBefore(this.videoTag,e[0]))}_createDashPlayer(e){this.myPlayer=o.MediaPlayer().create(),this.myPlayer.initialize(this.videoTag,e,this.configFormat.autoPlay)}_videoAddEvent(){this._videoRemoveEvent();["play","pause","timeupdate","ended","seeked","error","loadedmetadata"].forEach(t=>{this.videoTag.addEventListener(t,e=>{switch(t){case"play":case"pause":this.onPlayState&&this.onPlayState(this.isPlayingState());break;case"timeupdate":this._setCacheProcess(),this.onPlayingTime&&this.onPlayingTime(this.videoTag&&this.videoTag.currentTime);break;case"ended":this.onPlayingFinish&&this.onPlayingFinish();break;case"seeked":this.onSeekFinish&&this.onSeekFinish(this.seekResult||!0);break;case"loadedmetadata":this._loadedmetadata()}})})}_videoRemoveEvent(){["play","pause","timeupdate","ended","seeked","error","loadedmetadata"].forEach(e=>{this.videoTag.removeEventListener(e,e=>{})})}_addPlayerEvent(){this._removePlayerEvent(),this.myPlayer.on(o.MediaPlayer.events.ERROR,this._handleError.bind(this)),this.myPlayer.on(o.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,e=>{this.onLevelUpdates&&this.onLevelUpdates(e)}),this.myPlayer.on(o.MediaPlayer.events.MANIFEST_LOADED,e=>{this._videoCodec(e.data)})}_removePlayerEvent(){this.myPlayer.off(o.MediaPlayer.events.ERROR,this._handleError)}_loadedmetadata(){this.VrPlayer&&this.VrPlayer.loadVideo&&this.VrPlayer.loadVideo(),this.duration=this.videoTag.duration,this._insertVideo(),this.onLoadFinish&&this.onLoadFinish(),this.onReadyShowDone&&this.onReadyShowDone(),this._setQualityMap()}_handleError(e){this.onError&&this.onError({msg:e.error||e.target&&e.target.error,errorType:i.ErrorTypes.OTHER,event:i.ErrorEvent.ERROR,url:this.url})}_setCacheProcess(){if(this.videoTag&&this.videoTag.buffered.length){let e=this.videoTag.buffered.end(this.videoTag.buffered.length-1);e>=this.duration-.04&&(e=this.duration),this.onCacheProcess&&this.onCacheProcess(e)}}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.configFormat.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.configFormat.height}}play(){var e=this.videoTag.play();void 0!==e&&e.then(e=>{}).catch(e=>{})}pause(){this.videoTag&&this.videoTag.pause&&this.videoTag.pause()}seek(t){try{this.videoTag.currentTime=t}catch(e){return this.videoTag.currentTime=0,this.seekReadyPts=t,this.seekResult=!1}}setVoice(e){this.videoTag.volume=e,this.videoTag.muted=0==e}isPlayingState(){return this.videoTag&&!this.videoTag.paused}_setQualityMap(){this.qualityList=[];var e=this.myPlayer.getBitrateInfoListFor&&this.myPlayer.getBitrateInfoListFor("video")||[];1<e.length&&(this.qualityList.push({id:-1,label:"自动",index:0,selected:-1===this.manualLevel,mediaType:"video"}),e.forEach((e,t)=>{this.qualityList.push({id:t,label:`${Math.floor(e.bitrate/1024)}kbps-${e.height}P`,index:t+1,with:e.width,height:e.height,bitrate:e.bitrate,selected:this.manualLevel===t,mediaType:"video"})}),this.onQualityLevels(this.qualityList))}_videoCodec(e){var t={av01:a.CODEC_AV1,avc1:a.CODEC_H264,hvc1:a.CODEC_H265};let n=null;if(e&&(e=e.Period_asArray[0])&&e.AdaptationSet[0]&&(e=e.AdaptationSet[0].Representation,n=e.codecs||e[0].codecs),n)for(var i in t)-1<n.indexOf(i)&&(this.videoCodec=t[i])}setQuality(e){var t={streaming:{abr:{autoSwitchBitrate:{}}}},e=this.qualityList[e];0<e.index?(t.streaming.abr.autoSwitchBitrate[e.mediaType]=!1,this.myPlayer.updateSettings(t),this.myPlayer.setQualityFor(e.mediaType,e.index-1,!1)):(t.streaming.abr.autoSwitchBitrate[e.mediaType]=!0,this.myPlayer.updateSettings(t))}release(){if(this.VrPlayer&&this.VrPlayer.destroy(),this.videoTag){this._videoRemoveEvent();var e=document.querySelector("#"+this.configFormat.playerId);if(e)try{e.removeChild(this.videoTag)}catch(e){}this._removePlayerEvent(),this.videoTag.remove&&this.videoTag.remove()}this.qualityMap={},this.myPlayer&&this.myPlayer.destroy(),this.myPlayer=null,this.videoTag=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onQualityLevels=null,this.seekResult=null,this.url=null,window.onclick=document.body.onclick=null}}},function(e,t,n){!function(U,g){function d(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},n[e].call(t.exports,t,t.exports,d)),t.exports}var n,i,f;self,e.exports=(n={9944:function(e,t){var n={},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t=0,n=[],i=0|e.length/3;0<i--;){var r=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push(o.charAt(63&r>>6)),n.push(o.charAt(63&r))}return 2==e.length-t?(r=(e[t]<<16)+(e[t+1]<<8),n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push(o.charAt(63&r>>6)),n.push("=")):1==e.length-t&&(r=e[t]<<16,n.push(o.charAt(63&r>>18)),n.push(o.charAt(63&r>>12)),n.push("==")),n.join("")},l=function(){for(var e=[],t=0;t<64;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),u=function(e){for(var t=0,n=[],i=0|e.length/4;0<i--;){var r=(l[e.charCodeAt(t)]<<18)+(l[e.charCodeAt(t+1)]<<12)+(l[e.charCodeAt(t+2)]<<6)+l[e.charCodeAt(t+3)];n.push(255&r>>16),n.push(255&r>>8),n.push(255&r),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},r={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};n.decodeArray=function(e){e=u(e);return new Uint8Array(e)},n.encodeASCII=function(e){e=r.encode(e);return i(e)},n.decodeASCII=function(e){e=u(e);return r.decode(e)},n.encode=function(e){e=function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t}(e);return i(e)},n.decode=function(e){for(var t=u(e),n=[],i=0;i<t.length;){var r=t[i++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&t[i++])<<12),r|=(63&t[i++])<<6),r|=63&t[i++]),n.push(String.fromCharCode(r))}return n.join("")},t.decode=n.decode,t.decodeArray=n.decodeArray,t.encode=n.encode,t.encodeASCII=n.encodeASCII},9850:function(e,t){!function(e){"use strict";function a(e){var t=e;return u.hasOwnProperty(e)&&(t=u[e]),String.fromCharCode(t)}function s(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function o(e,t,n,i,r){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}function t(e,t,n,i,r,a){this.uchar=e||" ",this.penState=new o(t,n,i,r,a)}function n(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new o}function i(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new n);this.currRow=14,this.nrRollUpRows=null,this.reset()}function r(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new i,this.nonDisplayedMemory=new i,this.lastOutputScreen=new i,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function l(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new r(1,t),new r(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var u={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},h={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],m={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}};o.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},n.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(m.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(m.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=a(e);32<=this.pos?m.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},i.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){m.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){m.log("INFO","pacData = "+JSON.stringify(e));var t,n=e.row-1,n=(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.currRow=n,this.rows[this.currRow]),n=(null!==e.indent&&(t=e.indent,t=Math.max(t-1,0),n.setCursor(e.indent),e.color=n.chars[t].penState.foreground),{foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1});this.setPen(n)},setBkgData:function(e){m.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){var e;null!==this.nrRollUpRows?(m.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),m.log("INFO","Rolling up")):m.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=0;i<15;i++){var r=this.rows[i].getTextString();r&&t.push(e?"Row "+(i+1)+': "'+r+'"':r.trim())}return n=0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):n},getTextAndFormat:function(){return this.rows}},r.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,m.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";m.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(m.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){m.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){m.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){m.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){m.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){m.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){m.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){m.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){m.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){m.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){m.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){m.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){var e;m.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,m.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()},cc_TO:function(e){m.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),m.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=m.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)}};l.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,i,r,a=!1;this.lastTime=e,m.setTime(e);for(var o=0;o<t.length;o+=2)i=127&t[o],r=127&t[o+1],16<=i&&i<=31&&i===this.lastCmdA&&r===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,m.log("DEBUG","Repeated command ("+s([i,r])+") is dropped")):0!=i||0!=r?(m.log("DATA","["+s([t[o],t[o+1]])+"] -> ("+s([i,r])+")"),(n=(n=(n=(n=this.parseCmd(i,r))||this.parseMidrow(i,r))||this.parsePAC(i,r))||this.parseBackgroundAttributes(i,r))||(a=this.parseChars(i,r))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(a):m.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,m.log("WARNING","Couldn't parse cleaned data "+s([i,r])+" orig: "+s([t[o],t[o+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var n,i;return((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35)&&(i=this.channels[(n=20===e||21===e||23===e?1:2)-1],20===e||21===e||28===e||29===e?32===t?i.cc_RCL():33===t?i.cc_BS():34===t?i.cc_AOF():35===t?i.cc_AON():36===t?i.cc_DER():37===t?i.cc_RU(2):38===t?i.cc_RU(3):39===t?i.cc_RU(4):40===t?i.cc_FON():41===t?i.cc_RDC():42===t?i.cc_TR():43===t?i.cc_RTD():44===t?i.cc_EDM():45===t?i.cc_CR():46===t?i.cc_ENM():47===t&&i.cc_EOC():i.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0)},parseMidrow:function(e,t){var n;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(m.log("ERROR","Mismatch channel in midrow parsing"),!1):((n=this.channels[n-1]).insertChars([32]),n.cc_MIDROW(t),m.log("DEBUG","MIDROW ("+s([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0))},parsePAC:function(e,t){var n,i;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(n=e<=23?1:2,i=this.interpretPAC((64<=t&&t<=95?1==n?c:d:1==n?h:f)[e],t),this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0)},interpretPAC:function(e,t){e={color:null,italics:!1,indent:null,underline:!1,row:e},t=95<t?t-96:t-64;return e.underline=1==(1&t),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},parseChars:function(e,t){var n=null,i=null,r=null;return 17<=(r=25<=e?(n=2,e-8):(n=1,e))&&r<=19?(m.log("INFO","Special char '"+a(r=17===r?t+80:18===r?t+112:t+144)+"' in channel "+n),i=[r],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),i&&(n=s(i),m.log("DEBUG","Char codes =  "+n.join(","))),i},parseBackgroundAttributes:function(e,t){var n,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=p[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),this.channels[(e<24?1:2)-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=m,e.PenState=o,e.CaptionScreen=i,e.Cea608Parser=l,e.findCea608Nalus=function(e,t,n){for(var i,r,a,o,s,l,u=t,c=[];u<t+n;){if(i=e.getUint32(u),6==(31&e.getUint8(u+4)))for(var h=u+5,d=-1;h<u+4+i-1;){for(var d=0,f=255;255===f;)d+=f=e.getUint8(h),h++;for(var p=0,f=255;255===f;)p+=f=e.getUint8(h),h++;a=p,o=e,s=h,l=void 0,(4!==(r=d)||a<8?null:(r=o.getUint8(s),a=o.getUint16(s+1),l=o.getUint32(s+3),o=o.getUint8(s+7),181==r&&49==a&&1195456820==l&&3==o))&&c.push([h,p]),h+=p}u+=i+4}return c},e.extractCea608DataFromRange=function(e,t){var n=t[0],i=[[],[]],r=31&e.getUint8(n+=8);n+=2;for(var a=0;a<r;a++){var o=e.getUint8(n),s=4&o,o=3&o,l=(n++,e.getUint8(n)),u=(n++,e.getUint8(n));n++,s&&(127&l)+(127&u)!=0&&(0==o?(i[0].push(l),i[0].push(u)):1==o&&(i[1].push(l),i[1].push(u)))}return i}}(t)},2540:function(e,t,n){"use strict";var i=n(6379),r=n(7575),a=n(9378),o=n(1061),n=(n(6513),"undefined"!=typeof window&&window||n.g),s=n.dashjs;(s=s||(n.dashjs={})).MediaPlayer=i.A,s.FactoryMaker=r.A,s.Debug=a.A,s.Version=(0,o.i)()},9378:function(e,t,n){"use strict";var r=n(1739),f=n(3342),n=n(7575);function i(e){e=e||{};var s,l,u,t=this.context,c=(0,r.A)(t).getInstance(),h=e.settings,d=[];function n(e){return(e&&e.bind?e:window.console.log).bind(window.console)}function i(e,t){var n,i="";s&&(n=(new Date).getTime(),i+="["+(n-u)+"]"),l&&t&&t.getClassName&&(i+="["+t.getClassName()+"]",t.getType)&&(i+="["+t.getType()+"]"),0<i.length&&(i+=" ");for(var r=arguments.length,a=new Array(2<r?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];Array.apply(null,a).forEach(function(e){i+=e+" "}),d[e]&&h&&h.get().debug.logLevel>=e&&d[e](i),h&&h.get().debug.dispatchEvent&&c.trigger(f.A.LOG,{message:i,level:e})}return t={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[1,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[2,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[3,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[4,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[5,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){s=e},setCalleeNameVisible:function(e){l=e}},l=s=!0,u=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(d[1]=n(window.console.error),d[2]=n(window.console.error),d[3]=n(window.console.warn),d[4]=n(window.console.info),d[5]=n(window.console.debug)),t}i.__dashjs_factory_name="Debug";var a=n.A.getSingletonFactory(i);a.LOG_LEVEL_NONE=0,a.LOG_LEVEL_FATAL=1,a.LOG_LEVEL_ERROR=2,a.LOG_LEVEL_WARNING=3,a.LOG_LEVEL_INFO=4,a.LOG_LEVEL_DEBUG=5,n.A.updateSingletonFactory(i.__dashjs_factory_name,a),t.A=a},1739:function(e,t,n){"use strict";var i=n(7575),r=n(8914);function a(){var o={};function s(e,n,i){var r=-1;return o[e]&&o[e].some(function(e,t){if(e&&e.callback===n&&(!i||i===e.scope))return r=t,!0}),r}return{on:function(n,e,t){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);var r,a=i.priority||0;0<=s(n,e,t)||(o[n]=o[n]||[],r={callback:e,scope:t,priority:a},t&&t.getStreamId&&(r.streamId=t.getStreamId()),t&&t.getType&&(r.mediaType=t.getType()),i&&i.mode&&(r.mode=i.mode),o[n].some(function(e,t){if(e&&a>e.priority)return o[n].splice(t,0,r),!0}))||o[n].push(r)},off:function(e,t,n){e&&t&&o[e]&&((t=s(e,t,n))<0||(o[e][t]=null))},trigger:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e&&o[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,n.streamId&&(t.streamId=n.streamId),n.mediaType&&(t.mediaType=n.mediaType),o[e].filter(function(e){return!(!e||n.streamId&&e.streamId&&e.streamId!==n.streamId||n.mediaType&&e.mediaType&&e.mediaType!==n.mediaType||n.mode&&e.mode&&e.mode!==n.mode||!e.mode&&n.mode&&n.mode===r.A.EVENT_MODE_ON_RECEIVE)}).forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){o={}}}}a.__dashjs_factory_name="EventBus";n=i.A.getSingletonFactory(a);n.EVENT_PRIORITY_LOW=0,n.EVENT_PRIORITY_HIGH=5e3,i.A.updateSingletonFactory(a.__dashjs_factory_name,n),t.A=n},7575:function(e,t){"use strict";a=[],i={},n={};var l,a,i,n,r=l={extend:function(e,t,n,i){!i[e]&&t&&(i[e]={instance:t,override:n})},getSingletonInstance:o,setSingletonInstance:function(e,t,n){for(var i in a){var r=a[i];if(r.context===e&&r.name===t)return void(a[i].instance=n)}a.push({name:t,context:e,instance:n})},deleteSingletonInstances:function(t){a=a.filter(function(e){return e.context!==t})},getSingletonFactory:function(n){var e=s(n.__dashjs_factory_name,i);return e||(i[n.__dashjs_factory_name]=e=function(e){var t;return void 0===e&&(e={}),{getInstance:function(){return(t=t||o(e,n.__dashjs_factory_name))||(t=c(n,e,arguments),a.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}}),e},getSingletonFactoryByName:function(e){return i[e]},updateSingletonFactory:function(e,t){u(e,t,i)},getClassFactory:function(t){var e=s(t.__dashjs_factory_name,n);return e||(n[t.__dashjs_factory_name]=e=function(e){return void 0===e&&(e={}),{create:function(){return c(t,e,arguments)}}}),e},getClassFactoryByName:function(e){return n[e]},updateClassFactory:function(e,t){u(e,t,n)}};function o(e,t){for(var n in a){n=a[n];if(n.context===e&&n.name===t)return n.instance}return null}function s(e,t){return t[e]}function u(e,t,n){e in n&&(n[e]=t)}function c(e,t,n){var i,r=e.__dashjs_factory_name,a=t[r];if(a){var o,s=a.instance;if(!a.override)return s.apply({context:t,factory:l},n);for(o in i=e.apply({context:t},n),s=s.apply({context:t,factory:l,parent:i},n))i.hasOwnProperty(o)&&(i[o]=s[o])}else i=e.apply({context:t},n);return i.getClassName=function(){return r},i}t.A=r},8416:function(e,t,n){"use strict";var i=n(7575),s=n(4456),r=n(9378),l=n(4961),u=n(4779),c=n(1739),h=n(3342);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n){var i=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=d(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t);return(t="symbol"==d(i)?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=this.context,a=(0,c.A)(e).getInstance(),o={"streaming.delay.liveDelay":h.A.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":h.A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":h.A.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":h.A.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":h.A.SETTING_UPDATED_PLAYBACK_RATE_MAX},t={debug:{logLevel:r.A.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:l.A.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:l.A.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:l.A.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:l.A.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:f(f(f(f(f(f(f(f(f(f({},u.G.MPD_TYPE,500),u.G.XLINK_EXPANSION_TYPE,500),u.G.MEDIA_SEGMENT_TYPE,1e3),u.G.INIT_SEGMENT_TYPE,1e3),u.G.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),u.G.INDEX_SEGMENT_TYPE,1e3),u.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),u.G.LICENSE,1e3),u.G.OTHER_TYPE,1e3),"lowLatencyReductionFactor",10),retryAttempts:f(f(f(f(f(f(f(f(f(f({},u.G.MPD_TYPE,3),u.G.XLINK_EXPANSION_TYPE,1),u.G.MEDIA_SEGMENT_TYPE,3),u.G.INIT_SEGMENT_TYPE,3),u.G.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),u.G.INDEX_SEGMENT_TYPE,3),u.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),u.G.LICENSE,3),u.G.OTHER_TYPE,3),"lowLatencyMultiplyFactor",5),abr:{movingAverageMethod:l.A.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:l.A.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:l.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:l.A.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},n=s.A.clone(t);return{get:function(){return n},update:function(e){"object"===d(e)&&function e(t,n,i){for(var r in t)t.hasOwnProperty(r)&&n.hasOwnProperty(r)&&("object"!==d(t[r])||t[r]instanceof Array||null===t[r]?(n[r]=s.A.clone(t[r]),o[i+r]&&a.trigger(o[i+r])):e(t[r],n[r],i.slice()+r+"."))}(e,n,"")},reset:function(){n=s.A.clone(t)}}}a.__dashjs_factory_name="Settings";n=i.A.getSingletonFactory(a);t.A=n},4456:function(e,t,n){"use strict";var i=n(8758),o=n.n(i),r=n(8450);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=s(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==s(e)?e:String(e)}(i.key),i)}}a(i=l,[{key:"mixin",value:function(e,t,n){var i,r={};if(e)for(var a in t)t.hasOwnProperty(a)&&(i=t[a],a in e&&(e[a]===i||a in r&&r[a]===i)||("object"===s(e[a])&&null!==e[a]?e[a]=l.mixin(e[a],i,n):e[a]=n(i)));return e}},{key:"clone",value:function(e){if(!e||"object"!==s(e))return e;if(e instanceof Array)for(var t=[],n=0,i=e.length;n<i;++n)n in e&&t.push(l.clone(e[n]));else t={};return l.mixin(t,e,l.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{var n;return t&&0!==t.length?(n=new URL(e),t.forEach(function(e){e.key&&e.value&&n.searchParams.set(e.key,e.value)}),n.href):e}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(e)for(var n=e.trim().split("\r\n"),i=0,r=n.length;i<r;i++){var a=n[i],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2))}return t}},{key:"generateUuid",value:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})}},{key:"generateHashCode",value:function(e){var t=0;if(0!==e.length)for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}},{key:"getRelativeUrl",value:function(e,t){try{var n,i,r=new URL(e),a=new URL(t);return(r.protocol=a.protocol,r.origin!==a.origin)?t:(i=0===(n=o().relative(r.pathname.substr(0,r.pathname.lastIndexOf("/")),a.pathname.substr(0,a.pathname.lastIndexOf("/")))).length?1:0,n+=a.pathname.substr(a.pathname.lastIndexOf("/")+i,a.pathname.length-1),a.pathname.length<n.length?a.pathname:n)}catch(e){return t}}},{key:"parseUserAgent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{var t=null===e&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return(0,r.UAParser)(t)}catch(e){return{}}}},{key:"stringHasProtocol",value:function(e){return/(http(s?)):\/\//i.test(e)}}]),Object.defineProperty(i,"prototype",{writable:!1});n=l;function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function")}t.A=n},1061:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i="4.7.4";function r(){return i}},7199:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}n((i=a).prototype,[{key:"extend",value:function(e,t){if(e){var n,i=!!t&&t.override,r=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!i||r&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=a;function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function")}t.A=i},4817:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=o(t);var i=e;if(!(t=a()?Reflect.construct(t,n||[],o(e).constructor):t.apply(e,n))||"object"!==r(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CMSD_STATIC_HEADER="cmsdStaticHeader",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",e.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",e.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",e.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",e.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",e.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&i(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4183).A);t.A=n},3342:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(o=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=new(function(e){function r(){var e=this;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=r,n=arguments,i=(t=s(t),e);if(!(t=o()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))||"object"!==a(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e),t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(n(4817).A));t.A=n},4183:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}n((i=a).prototype,[{key:"extend",value:function(e,t){if(e){var n,i=!!t&&t.override,r=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!i||r&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=a;function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function")}t.A=i},9662:function(e,t,n){"use strict";var A=n(8669),b=n(4779),i=n(7575),T=n(8914),S=n(271),w=n(1333);function r(e){var t,r,a,o,s,n=(e=e||{}).eventBus,i=e.debug,l=e.urlUtils,u=e.type,c=e.streamInfo,h=e.segmentsController,d=e.timelineConverter,f=e.baseURLController;function p(){return u}function m(){a=null}function g(e,t,n){var i,r,n=f.resolve(n.path),a={};return n&&t!==n.url&&l.isRelative(t)?(i=n.url,r=n.serviceLocation,a=n.queryParams,t&&(i=l.resolve(t,i))):i=t,!l.isRelative(i)&&(e.url=i,e.serviceLocation=r,e.queryParams=a,1)}function _(e,t){var n,i,r,a;return null==t?null:(n=new A.A,r=(i=t.representation).adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth,a=t.media,a=(0,S.XX)(a,"Number",t.replacementNumber),a=(0,S.XX)(a,"Time",t.replacementTime),a=(0,S.XX)(a,"Bandwidth",r),a=(0,S.dD)(a,i.id),a=(0,S.Dr)(a),n.mediaType=u,n.type=b.G.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=i.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.availabilityTimeComplete=i.availabilityTimeComplete,n.wallStartTime=t.wallStartTime,n.quality=i.index,n.index=t.index,n.mediaInfo=e,n.adaptationIndex=i.adaptation.index,n.representationId=i.id,g(n,a,i)?n:void 0)}function y(e,t,n){var i=null;return t&&t.segmentInfoType&&(t=h.getSegmentByTime(t,n))&&(a=t,r.debug("Index for time "+n+" is "+t.index),i=_(e,t)),i}function v(e,t,n){var i=null,t=h.getSegmentByIndex(t,n,a?a.mediaStartTime:-1);if(t)i=_(e,t),a=t;else{if(o&&!s)return r.debug(u+" No segment found at index: "+n+". Wait for next loop"),null;s=!0}return i}function E(){r.debug("Dynamic stream complete"),s=!0}return t={getCurrentIndex:function(){return a?a.index:-1},getInitRequest:function(e,t){{var n,i,r,a;if(t)return n=u,i=new A.A,r=t.adaptation.period,a=r.start,i.mediaType=n,i.type=b.G.INIT_SEGMENT_TYPE,i.range=t.range,i.availabilityStartTime=d.calcAvailabilityStartTimeFromPresentationTime(a,t,o),i.availabilityEndTime=d.calcAvailabilityEndTimeFromPresentationTime(a+r.duration,t,o),i.quality=t.index,i.mediaInfo=e,i.representationId=t.id,g(i,t.initialization,t)?(i.url=(0,S.XX)(i.url,"Bandwidth",t.bandwidth),i):void 0}return null},getNextSegmentRequest:function(e,t){return t&&t.segmentInfoType?v(e,t,a?a.index+1:0):null},getNextSegmentRequestIdempotent:function(e,t){var n=a?a.index+1:0,t=h.getSegmentByIndex(t,n,a?a.mediaStartTime:-1);return t?_(e,t):null},getSegmentRequestForTime:y,getStreamId:function(){return c.id},getStreamInfo:function(){return c},getType:p,getValidTimeAheadOfTargetTime:function(e,t,n,i){try{if(isNaN(e)||!t||!n)return NaN;if(e<0&&(e=0),isNaN(i)&&(i=.5),y(t,n,e))return e;if(n.adaptation.period.start+n.adaptation.period.duration<e)return NaN;for(var r,a=isFinite(n.adaptation.period.duration)?n.adaptation.period.start+n.adaptation.period.duration:e+30,o=Math.min(e+i,a),s=NaN,l=null;o<=a;){var u=null;if(u=o<=a?y(t,n,o):u){s=o,l=u;break}o+=i}return l?(r=l.startTime+l.duration,e>l.startTime&&i<r-e?e:!isNaN(l.startTime)&&e<l.startTime&&s>l.startTime?l.startTime+.001:Math.min(r-i,s)):s}catch(e){return NaN}},initialize:function(e){o=e,s=!1,h.initialize(e)},isLastSegmentRequested:function(e,t){if(!e||!a)return!1;if(s)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(a.presentationStartTime+a.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(a.index)&&a.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!o||e.segmentInfoType===w.A.SEGMENT_TEMPLATE)return!0;if(o&&e.segmentInfoType===w.A.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(o&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===w.A.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&a&&!isNaN(a.mediaStartTime)&&!isNaN(a.duration)&&a.mediaStartTime+a.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(e,t){return t&&t.segmentInfoType?v(e,t,a?a.index:0):null},reset:function(){m(),n.off(T.A.DYNAMIC_TO_STATIC,E,t)}},r=i.getLogger(t),m(),n.on(T.A.DYNAMIC_TO_STATIC,E,t),t}r.__dashjs_factory_name="DashHandler",t.A=i.A.getClassFactory(r)},1333:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}n((i=a).prototype,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=new a;function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.init()}t.A=i},6544:function(e,t,n){"use strict";var i=n(7575),l=n(2736),u=n(5573),c=n(3167),h=n(9503);function r(t){t=t||{};var n,i=this.context,r=t.dashConstants,a=t.type,o=t.segmentBaseController;function s(e){return e?e.segments?n[r.SEGMENT_BASE]:n[e.segmentInfoType]:null}return n={},{initialize:function(e){n[r.SEGMENT_TIMELINE]=(0,l.A)(i).create(t,e),n[r.SEGMENT_TEMPLATE]=(0,u.A)(i).create(t,e),n[r.SEGMENT_LIST]=(0,c.A)(i).create(t,e),n[r.SEGMENT_BASE]=(0,h.A)(i).create(t,e)},updateInitData:function(e,t){return t?Promise.resolve():o.getSegmentBaseInitSegment({representation:e,mediaType:a})},updateSegmentData:function(e,t){return t?Promise.resolve():o.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:a})},getSegmentByIndex:function(e,t,n){var i=s(e);return i?i.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=s(e);return n?n.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=s(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}}}r.__dashjs_factory_name="SegmentsController";n=i.A.getClassFactory(r);t.A=n},3167:function(e,t,n){"use strict";var i=n(7575),r=n(4961),c=n(271);function a(e,s){var l=(e=e||{}).timelineConverter;function u(){if(!l||!l.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(r.A.MISSING_CONFIG_ERROR)}function i(e,t){var n,i,r,a,o;return u(),e?(o=(n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentURL_asArray.length,i=e&&!isNaN(e.startNumber)?e.startNumber:1,r=Math.max(i-1,0),a=null,(r=Math.max(t-r,0))<o&&(o=n.SegmentURL_asArray[r],a=(0,c.L$)(l,s,e,t))&&(a.replacementTime=(i+t-1)*e.segmentDuration,a.media=o.media||"",a.mediaRange=o.mediaRange,a.indexRange=o.indexRange),a):null}return{getSegmentByIndex:i,getSegmentByTime:function(e,t){var n;return u(),!e||(n=e.segmentDuration,isNaN(n))?null:(t=l.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),i(e,Math.floor(t/n)))},getMediaFinishedInformation:function(e){var t,n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&(t=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,e=e&&!isNaN(e.startNumber)?e.startNumber:1,e=Math.max(e-1,0),n.numberOfSegments=e+t.SegmentURL_asArray.length),n}}}a.__dashjs_factory_name="ListSegmentsGetter";n=i.A.getClassFactory(a);t.A=n},9503:function(e,t,n){"use strict";var i=n(7575),r=n(4961);function a(e){var t=(e=e||{}).timelineConverter;function a(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(r.A.MISSING_CONFIG_ERROR)}function n(e,t){if(a(),e){var n,i=e.segments?e.segments.length:-1;if(t<i&&(n=e.segments[t])&&n.index===t)return n;for(var r=0;r<i;r++)if((n=e.segments[r])&&n.index===t)return n}return null}return{getSegmentByIndex:n,getSegmentByTime:function(u,e){a();e=function(e){if(!u)return-1;var t,n,i,r,a,o=u.segments,s=o?o.length:null,l=-1;if(o&&0<s)for(a=0;a<s;a++)if(i=(n=o[a]).presentationStartTime,e+(t=(r=n.duration)/2)>=i&&e-t<i+r){l=n.index;break}return l}(e);return n(u,e)},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments&&(t.numberOfSegments=e.segments.length),t}}}a.__dashjs_factory_name="SegmentBaseGetter";n=i.A.getClassFactory(a);t.A=n},271:function(e,t,n){"use strict";n.d(t,{Dr:function(){return i},L$:function(){return a},W$:function(){return o},XX:function(){return h},dD:function(){return r}});var u=n(1365);function c(e,t){for(;e.length<t;)e="0"+e;return e}function i(e){return e&&e.split("$$").join("$")}function r(e,t){return t&&e&&-1!==e.indexOf("$RepresentationID$")?(t=t.toString(),e.split("$RepresentationID$").join(t)):e}function h(e,t,n){var i,r,a,o,s,l,u=t.length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((r=e.indexOf("$",i+u))<0)return e;if((a=e.indexOf("%0",i+u))>i&&a<r)switch(o=e.charAt(r-1),s=parseInt(e.substring(a+2,r-1),10),o){case"d":case"i":case"u":l=c(n.toString(),s);break;case"x":l=c(n.toString(16),s);break;case"X":l=c(n.toString(16),s).toUpperCase();break;case"o":l=c(n.toString(8),s);break;default:return e}else l=n;e=e.substring(0,i)+l+e.substring(r+1)}}function d(e,t,n,i,r,a,o,s){var l=new u.A;return l.representation=e,l.duration=t,l.presentationStartTime=n,l.mediaStartTime=i,l.availabilityStartTime=r.calcAvailabilityStartTimeFromPresentationTime(a,e,o),l.availabilityEndTime=r.calcAvailabilityEndTimeFromPresentationTime(a+t,e,o),l.wallStartTime=r.calcWallTimeForSegment(l,o),l.replacementNumber=l.representation.startNumber+s,l.index=s,l}function f(e,t,n,i){var r=t.adaptation.period;return!(isFinite(r.duration)&&r.start+r.duration<=n.presentationStartTime)&&(!i||"INF"===t.availabilityTimeOffset||(r=e.getClientReferenceTime(),n.availabilityStartTime.getTime()<=r&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=r)))}function a(e,t,n,i){var r=n.segmentDuration,a=(isNaN(r)&&(r=n.adaptation.period.duration),parseFloat((n.adaptation.period.start+i*r).toFixed(5))),o=parseFloat((a+r).toFixed(5)),r=d(n,r,a,e.calcMediaTimeFromPresentationTime(a,n),e,o,t,i);return f(e,n,r,t)?r:null}function o(e,t,n,i,r,a,o,s,l,u){var c=i/a,r=r/a,a=e.calcPresentationTimeFromMediaTime(c,n);return f(e,n,n=d(n,r,a,c,e,a+r,t,l),t)?(n.replacementTime=u||i,o=h(o,"Number",n.replacementNumber),o=h(o,"Time",n.replacementTime),n.media=o,n.mediaRange=s,n):null}},5573:function(e,t,n){"use strict";var i=n(7575),s=n(4961),l=n(271);function r(e,r){var a=(e=e||{}).timelineConverter;function o(){if(!a||!a.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(s.A.MISSING_CONFIG_ERROR)}function i(e,t){var n,i;return o(),e?(n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,t=Math.max(t,0),(i=(0,l.L$)(a,r,e,t))&&(i.replacementTime=Math.round((t-1)*e.segmentDuration*e.timescale,10),t=n.media,t=(0,l.XX)(t,"Number",i.replacementNumber),t=(0,l.XX)(t,"Time",i.replacementTime),i.media=t),i):null}return{getSegmentByIndex:i,getSegmentByTime:function(e,t){var n;return o(),!e||(n=e.segmentDuration,isNaN(n))?null:(t=a.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),i(e,Math.floor(t/n)))},getMediaFinishedInformation:function(e){var t,n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&(t=e.segmentDuration,isNaN(t)?n.numberOfSegments=1:n.numberOfSegments=Math.ceil(e.adaptation.period.duration/t)),n}}}r.__dashjs_factory_name="TemplateSegmentsGetter";n=i.A.getClassFactory(r);t.A=n},2736:function(e,t,n){"use strict";var i=n(7575),r=n(4961),p=n(271);function a(e,d){var f=(e=e||{}).timelineConverter,l=e.dashMetrics;function t(){if(!f)throw new Error(r.A.MISSING_CONFIG_ERROR)}function n(e,t){for(var n,i,r,a,o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,s=o.SegmentTimeline,l=o.SegmentURL_asArray,u=0,c=-1,h=e.timescale,d=!1,f=0,p=(n=s.S_asArray).length;f<p&&!d;f++)for(a=0,(i=n[f]).hasOwnProperty("r")&&(a=i.r),i.hasOwnProperty("t")&&(u=i.t),a<0&&(a=m(e,n[f+1],i,h,u/h)),r=0;r<=a&&!d;r++)(d=t(u,o,l,i,h,++c,f))&&(e.segmentDuration=i.d/h),u+=i.d}function m(e,t,n,i,r){var a;if(t&&t.hasOwnProperty("t"))a=t.t/i;else try{var o,s=0;s=isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)?(o=l.getCurrentDVRInfo(),isNaN(o.end)?0:o.end):e.adaptation.period.start+e.adaptation.period.duration,a=f.calcMediaTimeFromPresentationTime(s,e),e.segmentDuration=n.d/i}catch(e){a=0}return Math.max(Math.ceil((a-r)/(n.d/i))-1,0)}return{getSegmentByIndex:function(l,e,u){var c,h;return t(),l?(c=null,h=!1,n(l,function(e,t,n,i,r,a,o){var s;return h||u<0?(t=t.media,s=i.mediaRange,n&&(t=n[o].media||"",s=n[o].mediaRange),c=(0,p.W$)(f,d,l,e,i.d,r,t,s,a,i.tManifest),!0):(e>=u*r-.5*i.d&&(h=!0),!1)}),c):null},getSegmentByTime:function(l,e){var u,c;return t(),l?(u=null,c=f.calcMediaTimeFromPresentationTime(e=void 0===e?null:e,l),n(l,function(e,t,n,i,r,a,o){var s=parseFloat((c*r).toPrecision(15));return s<e+i.d&&e<=s&&(s=t.media,t=i.mediaRange,n&&(s=n[o].media||"",t=n[o].mediaRange),u=(0,p.W$)(f,d,l,e,i.d,r,s,t,a,i.tManifest),!0)}),u):null},getMediaFinishedInformation:function(e){if(!e)return 0;for(var t,n,i,r,a=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,o=0,s=0,l=0,u=e.timescale,c=(t=a.S_asArray).length,h=0;h<c;h++)for(r=0,(n=t[h]).hasOwnProperty("r")&&(r=n.r),n.hasOwnProperty("t")&&(s=(o=n.t)/u),r<0&&(r=m(e,t[h+1],n,u,s)),i=0;i<=r;i++)l++,s=(o+=n.d)/u;return{numberOfSegments:l,mediaTimeOfLastSignaledSegment:s}}}}a.__dashjs_factory_name="TimelineSegmentsGetter";n=i.A.getClassFactory(a);t.A=n},1365:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}i=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null},o&&n(i.prototype,o),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,o=i;t.A=o},9824:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}i=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value=""},o&&n(i.prototype,o),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,o=i;t.A=o},6379:function(y,e,t){"use strict";t.d(e,{A:function(){return ol}});var e=t(9850),be=t.n(e),Ue=t(4961),ge=t(1333),je=t(6992),Ge=t(1739),Ve=t(3342),_e=t(7575),He=t(9378),Ye=t(8914);function v(){var n,r,i,a,o,s,l,u,t,c,h,d,f,p,m,g,_,y,v,E,A,b,T,S,w,e=this.context,R=(0,Ge.A)(e).getInstance();function F(){C(),_=h=c=0,S=v=!(y=!(T=p=!1)),g=E=NaN,l&&(R.off(Ve.A.DATA_UPDATE_COMPLETED,W,n),R.off(Ve.A.LOADING_PROGRESS,he,n),R.off(Ve.A.MANIFEST_UPDATED,me,n),R.off(Ve.A.STREAMS_COMPOSED,ge,n),R.off(Ye.A.PLAYBACK_ENDED,le,n),R.off(Ye.A.STREAM_INITIALIZING,fe,n),R.off(Ye.A.REPRESENTATION_SWITCH,pe,n),R.off(Ye.A.BUFFER_LEVEL_STATE_CHANGED,Q,n),x(),l.removeEventListener("canplay",K),l.removeEventListener("canplaythrough",q),l.removeEventListener("play",X),l.removeEventListener("waiting",J),l.removeEventListener("playing",Z),l.removeEventListener("pause",$),l.removeEventListener("error",ue),l.removeEventListener("seeking",ee),l.removeEventListener("seeked",te),l.removeEventListener("timeupdate",N),l.removeEventListener("progress",ne),l.removeEventListener("ratechange",ie),l.removeEventListener("loadedmetadata",re),l.removeEventListener("loadeddata",ae),l.removeEventListener("stalled",de),l.removeEventListener("ended",oe),l.removeEventListener("volumechange",se)),f=d=l=t=null}function B(){return parseFloat((I(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)-P()).toFixed(5))}function I(e){e=e||d;return e.start+e.duration}function U(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];d&&l&&l.getElement()?(e&&f&&G(P()),l.play()):p=!0}function C(){d&&l&&l.pause()}function L(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];d&&l&&l.getElement()&&e!==(isNaN(E)?l.getTime():E)&&((A=!0===n)||(E=e),r.info("Requesting seek to time: "+e+(A?" (internal)":"")),f&&i&&G(e),l.setCurrentTime(e,t))}function j(){var e;if(d&&l&&f)return e=i&&i.hasVideoTrack()?Ue.A.VIDEO:Ue.A.AUDIO,(e=o.getCurrentDVRInfo(e))&&e.range?e.range.end:0}function G(e){var t=new Date(u.getClientReferenceTime()),n=s.getRegularPeriods()[0],t=u.calcPresentationTimeFromWallTime(t,n);c=t-e}function P(){return d&&l?l.getTime():null}function D(){return d&&l?l.isPaused():null}function k(){return d&&l?l.isSeeking():null}function V(){return d&&l?l.isStalled():null}function H(){return d&&l?l.getPlaybackRate():null}function Y(){return d&&l?l.getEnded():null}function z(){return f}function O(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;D()||!f||0===l.getReadyState()||k()||T||(t=t||(i.hasVideoTrack()?Ue.A.VIDEO:Ue.A.AUDIO),t=function(e,t){t=o.getCurrentDVRInfo(t),t=t?t.range:null;return t?e>t.end?Math.max(t.end-c,t.start):0<e&&e+.25<t.start&&Math.abs(e-t.start)<31536e4?v?Math.max(t.end-c,t.start):t.start:e:NaN}(e=P(),t),isNaN(t))||t===e||k()||!V()&&!b&&1!==l.getReadyState()||(r.debug("UpdateCurrentTime: Seek to actual time: ".concat(t," from currentTime: ").concat(e)),L(t,!1,!1))}function M(){null===t&&(t=setInterval(function(){var e,t;R.trigger(Ve.A.WALLCLOCK_TIME_UPDATED,{isDynamic:f,time:new Date}),f&&(e=Date.now(),isNaN(g)||e>g+w.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(i.addDVRMetric(),D()?(t=Date.now(),(!m||m+500<t)&&(m=t,N())):O(),g=e)},w.get().streaming.wallclockTimeUpdateInterval))}function x(){clearInterval(t),t=null}function W(e){e=s.convertRepresentationToRepresentationInfo(e.currentRepresentation),e=e?e.mediaInfo.streamInfo:null;null!==e&&d.id===e.id&&(d=e)}function K(){R.trigger(Ve.A.CAN_PLAY)}function q(){R.trigger(Ve.A.CAN_PLAY_THROUGH)}function Q(e){e.streamId===i.getActiveStreamInfo().id&&(b=e.state===je.A.BUFFER_EMPTY,w.get().streaming.buffer.setStallState)&&l.setStallState(e.mediaType,e.state===je.A.BUFFER_EMPTY)}function X(){r.info("Native video element event: play"),O(),M(),R.trigger(Ve.A.PLAYBACK_STARTED,{startTime:P()})}function J(){r.info("Native video element event: waiting"),R.trigger(Ve.A.PLAYBACK_WAITING,{playingTime:P()})}function Z(){r.info("Native video element event: playing"),A=!1,R.trigger(Ve.A.PLAYBACK_PLAYING,{playingTime:P()})}function $(){r.info("Native video element event: pause"),R.trigger(Ve.A.PLAYBACK_PAUSED,{ended:Y()})}function ee(){var e;A||(e=P(),isNaN(E)||E===e||(e=E),E=NaN,r.info("Seeking to: "+e),M(),R.trigger(Ve.A.PLAYBACK_SEEKING,{seekTime:e,streamId:d.id}))}function te(){r.info("Native video element event: seeked"),A=!1,R.trigger(Ve.A.PLAYBACK_SEEKED)}function N(){d&&R.trigger(Ve.A.PLAYBACK_TIME_UPDATED,{timeToEnd:B(),time:P(),streamId:d.id})}function ne(){R.trigger(Ve.A.PLAYBACK_PROGRESS,{streamId:d.id})}function ie(){var e=H();r.info("Native video element event: ratechange: ",e),R.trigger(Ve.A.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function re(){r.info("Native video element event: loadedmetadata"),R.trigger(Ve.A.PLAYBACK_METADATA_LOADED),M()}function ae(){r.info("Native video element event: loadeddata"),R.trigger(Ve.A.PLAYBACK_LOADED_DATA)}function oe(){r.info("Native video element event: ended"),C(),x();var e=i?i.getActiveStreamInfo():null;e&&R.trigger(Ve.A.PLAYBACK_ENDED,{isLast:e.isLast})}function se(){R.trigger(Ve.A.PLAYBACK_VOLUME_CHANGED)}function le(e){t&&e.isLast&&(r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),e=e.seekTime||I(),l.setCurrentTime(e),C(),x())}function ue(e){e=e.target||e.srcElement;R.trigger(Ve.A.PLAYBACK_ERROR,{error:e.error})}function ce(){f=!1}function he(e){!1===e.stream&&v&&!isNaN(e.request.duration)&&(e=1.2*e.request.duration,c<e)&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e.toFixed(2)),h=c=e)}function de(e){R.trigger(Ve.A.PLAYBACK_STALLED,{e:e})}function fe(e){(e=e.mediaInfo)&&e.supplementalProperties&&e.supplementalProperties[Ue.A.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&"true"===e.supplementalProperties[Ue.A.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),v=!0)}function pe(e){var t=i.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===Ue.A.VIDEO||e.mediaType===Ue.A.AUDIO)&&(y=e.currentRepresentation.availabilityTimeComplete,v=!y)&&!S&&(S=!0)}function me(){T=!0}function ge(){T=!1}return n={initialize:function(e,t){d=e,!0!==t&&(l.addEventListener("canplay",K),l.addEventListener("canplaythrough",q),l.addEventListener("play",X),l.addEventListener("waiting",J),l.addEventListener("playing",Z),l.addEventListener("pause",$),l.addEventListener("error",ue),l.addEventListener("seeking",ee),l.addEventListener("seeked",te),l.addEventListener("timeupdate",N),l.addEventListener("progress",ne),l.addEventListener("ratechange",ie),l.addEventListener("loadedmetadata",re),l.addEventListener("loadeddata",ae),l.addEventListener("stalled",de),l.addEventListener("ended",oe),l.addEventListener("volumechange",se),f=d.manifestInfo.isDynamic,A=b=!1,R.on(Ve.A.DATA_UPDATE_COMPLETED,W,n),R.on(Ve.A.LOADING_PROGRESS,he,n),R.on(Ve.A.MANIFEST_UPDATED,me,n),R.on(Ve.A.STREAMS_COMPOSED,ge,n),R.on(Ye.A.PLAYBACK_ENDED,le,n,{priority:Ge.A.EVENT_PRIORITY_HIGH}),R.on(Ye.A.STREAM_INITIALIZING,fe,n),R.on(Ye.A.REPRESENTATION_SWITCH,pe,n),R.on(Ye.A.BUFFER_LEVEL_STATE_CHANGED,Q,n),R.on(Ye.A.DYNAMIC_TO_STATIC,ce,n),p)&&(p=!1,U())},setConfig:function(e){e&&(e.streamController&&(i=e.streamController),e.serviceDescriptionController&&(a=e.serviceDescriptionController),e.dashMetrics&&(o=e.dashMetrics),e.adapter&&(s=e.adapter),e.videoModel&&(l=e.videoModel),e.timelineConverter&&(u=e.timelineConverter),e.settings)&&(w=e.settings)},getTimeToStreamEnd:B,getBufferLevel:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=null;return i.getActiveStreamProcessors().forEach(function(e){t&&0!==t.length&&-1!==t.indexOf(e.getType())||(e=e.getBufferLevel(),n=null===n?e:Math.min(n,e))}),n},getPlaybackStalled:function(){return b},getTime:P,getLowLatencyModeEnabled:function(){return v},getInitialCatchupModeActivated:function(){return S},getIsManifestUpdateInProgress:function(){return T},getPlaybackRate:H,getPlayedRanges:function(){return d&&l?l.getPlayedRanges():null},getEnded:Y,getIsDynamic:z,getStreamController:function(){return i},computeAndSetLiveDelay:function(e,t){var e=!isNaN(e)&&isFinite(e)?e:NaN,n=s.getSuggestedPresentationDelay(),i=a.getServiceDescriptionSettings(),i=isNaN(w.get().streaming.delay.liveDelay)?null===w.get().streaming.delay.liveDelayFragmentCount||isNaN(w.get().streaming.delay.liveDelayFragmentCount)||isNaN(e)?i&&!isNaN(i.liveDelay)&&0<i.liveDelay?i.liveDelay:!0===w.get().streaming.delay.useSuggestedPresentationDelay&&null!==n&&!isNaN(n)&&0<n?n:isNaN(e)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*d.manifestInfo.minBufferTime:4*e:e*w.get().streaming.delay.liveDelayFragmentCount:w.get().streaming.delay.liveDelay;return null!==(n=s.getAvailabilityStartTime())&&(_=n),e=t&&0<t.dvrWindowSize?Math.min(i,t.dvrWindowSize):i,h=c=e},getLiveDelay:function(){return c},getOriginalLiveDelay:function(){return h},getCurrentLiveLatency:function(){var e,t;return!f||isNaN(_)?NaN:(e=P(),isNaN(e)||0===e?0:(t=(new Date).getTime()+1e3*u.getClientTimeOffset(),Math.max(((t-_-1e3*e)/1e3).toFixed(3),0)))},play:U,isPaused:D,isStalled:V,pause:C,isSeeking:k,getStreamEndTime:I,seek:L,seekToOriginalLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=j();0!==i&&L(i-(c=h),e,t,n)},seekToCurrentLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=j();0!==i&&L(i-c,e,t,n)},reset:F,updateCurrentTime:O,getAvailabilityStartTime:function(){return _}},r=(0,He.A)(e).getInstance().getLogger(n),F(),n}v.__dashjs_factory_name="PlaybackController";var Te=_e.A.getSingletonFactory(v),S=t(8669),E="loading",A="executed";function b(e){var t,a,o,n=(e=e||{}).eventBus,i=e.events,r=e.dashMetrics,s=e.fragmentLoader,l=e.debug,u=e.streamInfo,c=e.type;function h(i){var r;return!!i&&(r=!1,a.some(function(e){if(t=i,n=e,!isNaN(t.index)&&t.startTime===n.startTime&&t.adaptationIndex===n.adaptationIndex&&t.type===n.type||(t=i,n=e,isNaN(t.index)&&isNaN(n.index)&&t.quality===n.quality)||i.action===S.A.ACTION_COMPLETE&&i.action===e.action)return r=!0;var t,n}),r)}function d(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function f(n){a=a.filter(function(e){var t=d(e);return isNaN(e.startTime)||void 0!==n&&e.startTime>=n-t})}function p(n,i){i<=n+.5||(a=a.filter(function(e){var t=d(e);return isNaN(e.startTime)||e.startTime>=i-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}))}function m(e,t){r.addSchedulingInfo(e,t),r.addRequestsQueue(e.mediaType,o,a)}function g(e){e.sender===s&&(o.splice(o.indexOf(e.request),1),e.response&&!e.error&&a.push(e.request),m(e.request,e.error?"failed":A),n.trigger(i.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:u.id,mediaType:c}))}function _(e){e.sender===s&&n.trigger(i.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:u.id,mediaType:c})}function y(e){e.sender===s&&n.trigger(i.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:u.id,mediaType:c})}function v(){a=[],o=[]}return t=l.getLogger(e={getStreamId:function(){return u.id},getType:function(){return c},getRequests:function(i){var e=i?i.state instanceof Array?i.state:[i.state]:[],r=[];return e.forEach(function(t){var n,e=function(){var e;switch(t){case E:e=o;break;case A:e=a;break;default:e=[]}return e}();r=r.concat((e=e,(n=i).hasOwnProperty("time")?[function(e,t,n){for(var i=e.length-1;0<=i;i--){var r=e[i],a=r.startTime,o=a+r.duration;if(n=isNaN(n)?d(r):n,!isNaN(a)&&!isNaN(o)&&a<=t+n&&t-n<o||isNaN(a)&&isNaN(t))return r}return null}(e,n.time,n.threshold)]:e.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return!1;return!0})))}),r},isFragmentLoaded:h,isFragmentLoadedOrPending:function(e){var t,n=!1,i=0;if(!(n=h(e)))for(i=0;i<o.length;i++)t=o[i],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:f,removeExecutedRequestsAfterTime:function(t){a=a.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime<t})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,i=0,r=e.length;i<r;i++)p(n,e.start(i)),n=e.end(i);0<t&&p(n,t)}else f()},abortRequests:function(){t.debug("abort requests"),s.abort(),o=[]},executeRequest:function(e){e.action===S.A.ACTION_DOWNLOAD?(m(e,E),o.push(e),e=e,n.trigger(i.FRAGMENT_LOADING_STARTED,{request:e},{streamId:u.id,mediaType:c}),s.load(e)):t.warn("Unknown request action.")},reset:function(){n.off(i.LOADING_COMPLETED,g,this),n.off(i.LOADING_DATA_PROGRESS,_,this),n.off(i.LOADING_ABANDONED,y,this),s&&s.reset(),v()},resetInitialSettings:v,addExecutedRequest:function(e){a.push(e)}}),v(),n.on(i.LOADING_COMPLETED,g,e),n.on(i.LOADING_DATA_PROGRESS,_,e),n.on(i.LOADING_ABANDONED,y,e),e}b.__dashjs_factory_name="FragmentModel";var e=_e.A.getClassFactory(b),fe=(e.FRAGMENT_MODEL_LOADING=E,e.FRAGMENT_MODEL_EXECUTED=A,e.FRAGMENT_MODEL_CANCELED="canceled",e.FRAGMENT_MODEL_FAILED="failed",_e.A.updateClassFactory(b.__dashjs_factory_name,e),e),ze=t(3339);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var We=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=R(t);var i=e;if(!(t=w()?Reflect.construct(t,n||[],R(e).constructor):t.apply(e,n))||"object"!==T(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&I(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(t(7199).A)),ye=t(8416),ve=t(4779);function C(e){var a,r,o,s,t,n=this.context,l=(0,ye.A)(n).getInstance(),i=e.textController,u=e.eventBus,c=[],h=[],d=!1,f=e.mediaSource,p=null;function m(t){return new Promise(function(e){S(function(){o.changeType&&o.changeType(t),e()})})}function g(e){return o=i.getTextSourceBuffer(e),Promise.resolve()}function _(){if("function"==typeof o.addEventListener)try{o.addEventListener("updateend",b,!1),o.addEventListener("error",T,!1),o.addEventListener("abort",T,!1)}catch(e){t=setInterval(b,50)}else t=setInterval(b,50)}function y(i){return new Promise(function(n){o&&l.get().streaming.buffer.useAppendWindow?S(function(){try{var e,t;o?(e=f.duration,t=0,i&&!isNaN(i.start)&&!isNaN(i.duration)&&isFinite(i.duration)&&(e=i.start+i.duration),i&&!isNaN(i.start)&&(t=i.start),o.appendWindowEnd===e&&o.appendWindowStart===t||(o.appendWindowStart=0,o.appendWindowEnd=e+.01,o.appendWindowStart=Math.max(t-.1,0),r.debug("Updated append window for ".concat(s.type,". Set start to ").concat(o.appendWindowStart," and end to ").concat(o.appendWindowEnd))),n()):n()}catch(e){r.warn("Failed to set append window"),n()}}):n()})}function v(e){return new Promise(function(t){o?S(function(){try{o.timestampOffset===e||isNaN(e)||(o.timestampOffset=e,r.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}}):t()})}function E(){if(!d&&0<h.length){d=!0;var e=h[0],t=(h.splice(0,1),function(){d=!1,0<h.length&&E.call(this),e&&e.data&&e.data.segmentType&&e.data.segmentType!==ve.G.INIT_SEGMENT_TYPE&&delete e.data.bytes,e.promise.resolve({chunk:e.data})});try{p=e.request,0===e.data.bytes.byteLength?t.call(this):(o.appendBuffer?o.appendBuffer(e.data.bytes):o.append(e.data.bytes,e.data),S(t.bind(this)))}catch(t){r.fatal('SourceBuffer append failed "'+t+'"'),0<h.length?E():d=!1,delete e.data.bytes,e.promise.reject({chunk:e.data,error:new ze.A(t.code,t.message)})}}}function A(){0<c.length&&(o.updating||(c.shift()(),A()))}function b(){o.updating||A()}function T(e){var e=e.target||{},t=Ve.A.SOURCE_BUFFER_ERROR,e={error:e,lastRequestAppended:p};u.trigger(t,e,{streamId:s.streamInfo.id,mediaType:a})}function S(e){c.push(e),o.updating||A()}return e={getType:function(){return a},getAllBufferRanges:function(){try{return o.buffered}catch(e){return r.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return o},append:function(n){var i=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(e,t){n?(h.push({data:n,promise:{resolve:e,reject:t},request:r}),S(E.bind(i))):t({chunk:n,error:new ze.A(We.APPEND_ERROR_CODE,We.APPEND_ERROR_MESSAGE)})})},remove:function(r){return new Promise(function(e,t){var n=r.start,i=r.end;0<=n&&n<i?S(function(){try{o.remove(n,i),S(function(){e({from:n,to:i,unintended:!1}),r.resolve&&r.resolve()})}catch(e){t({from:n,to:i,unintended:!1,error:new ze.A(We.REMOVE_ERROR_CODE,We.REMOVE_ERROR_MESSAGE)}),r.reject&&r.reject(e)}}):e()})},abort:function(){return new Promise(function(t){try{h=[],"open"===f.readyState?S(function(){try{o&&o.abort(),t()}catch(e){t()}}):(o&&o.setTextTrack&&"ended"===f.readyState&&o.abort(),t())}catch(e){t()}})},reset:function(){if(o){try{c=[];try{"function"==typeof o.removeEventListener&&(o.removeEventListener("updateend",b,!1),o.removeEventListener("error",T,!1),o.removeEventListener("abort",T,!1)),clearInterval(t)}catch(e){r.error(e)}d=!1,h=[],o.getClassName&&"TextSourceBuffer"===o.getClassName()||(r.debug("Removing sourcebuffer from media source"),f.removeSourceBuffer(o))}catch(e){}o=null}p=null},updateTimestampOffset:v,initializeForStreamSwitch:function(e,t,n){a=(s=e).type;e=s.codec,o=n.getBuffer(),_(),n=[];return n.push(new Promise(function(n){S(function(){var e=o.appendWindowStart,t=o.appendWindowEnd;o&&(o.abort(),o.appendWindowStart=e,o.appendWindowEnd=t),n()})})),n.push(y(s.streamInfo)),l.get().streaming.buffer.useChangeTypeForTrackSwitch&&n.push(m(e)),t&&void 0!==t.MSETimeOffset&&n.push(v(t.MSETimeOffset)),Promise.all(n)},initializeForFirstUse:function(e,t,n){a=(s=t).type;var i=s.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return g(e);o=f.addSourceBuffer(i),_();var r=[];return r.push(y(s.streamInfo)),n&&void 0!==n.MSETimeOffset&&r.push(v(n.MSETimeOffset)),Promise.all(r)}catch(t){return s.type==Ue.A.TEXT&&!s.isFragmented||-1!==i.indexOf('codecs="stpp')||-1!==i.indexOf('codecs="vtt')||-1!==i.indexOf("text/vtt")?g(e):Promise.reject(t)}},updateAppendWindow:y,changeType:m},r=(0,He.A)(n).getInstance().getLogger(e),e}C.__dashjs_factory_name="SourceBufferSink";var pe=_e.A.getClassFactory(C);function L(e){var t,a,n=this.context,o=[],i=e;function s(t,n){return o=o.filter(function(e){return!((isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t))}),Promise.resolve()}return e={getAllBufferRanges:function(){for(var t=[],e=0;e<o.length;e++){var n=o[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end}var i={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(i,"length",{get:function(){return t.length}}),i},append:function(e){return a="InitializationSegment"!==e.segmentType?(o.push(e),o.sort(function(e,t){return e.start-t.start}),null):e,t.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),i&&i({chunk:e}),Promise.resolve()},remove:s,abort:function(){return Promise.resolve()},discharge:function(e,t){n=e,i=t;var n,i,r=o.filter(function(e){return(isNaN(i)||e.start<i)&&(isNaN(n)||e.end>n)});return a&&(r.push(a),a=null),s(e,t),r},reset:function(){o=[],i=a=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},t=(0,He.A)(n).getInstance().getLogger(e),e}L.__dashjs_factory_name="PreBufferSink";var me=_e.A.getClassFactory(L);function P(){var i={};return{save:function(e){var t=e.streamId,n=e.representationId;i[t]=i[t]||{},i[t][n]=e},extract:function(e,t){return i&&i[e]&&i[e][t]?i[e][t]:null},reset:function(){i={}}}}P.__dashjs_factory_name="InitCache";var Qe=_e.A.getSingletonFactory(P),Se="BufferController";function D(e){e=e||{};var t,l,i,r,a,u,o,s,h,c,d,f,p,m,N,g,_,y,v,E,A,b=this.context,T=(0,Ge.A)(b).getInstance(),F=e.errHandler,B=e.fragmentModel,U=e.representationController,j=e.adapter,G=e.textController,V=e.abrController,S=e.playbackController,w=e.streamInfo,R=e.type,I=e.settings;function H(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(e,t){u=n,h&&i&&"function"==typeof h.discharge?(c=h,z(i).then(function(){e()}).catch(function(e){t(e)})):e()})}function Y(e){return j.convertRepresentationToRepresentationInfo(U.getRepresentationForQuality(e))}function z(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(t,n){var o,s;y&&e?u?(d=!1,o=e,s=i,new Promise(function(e,t){var n,i,r,a=V.getQualityFor(R,w.id);h=pe(b).create({mediaSource:u,textController:G,eventBus:T}),n=o,i=s,r=Y(a),(i&&i[R]&&(R===Ue.A.VIDEO||R===Ue.A.AUDIO)?h.initializeForStreamSwitch(n,r,i[R]):h.initializeForFirstUse(w,n,r)).then(function(){return k(Y(a))}).then(function(){e(h)}).catch(function(e){l.fatal("Caught error on create SourceBuffer: "+e),F.error(new ze.A(We.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,We.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+R)),t(e)})}).then(function(e){t(e)}).catch(function(e){n(e)})):(d=!0,function(){var i=this;return new Promise(function(e,t){var n=V.getQualityFor(R,w.id);h=me(b).create(X.bind(i)),k(Y(n)).then(function(){e(h)}).catch(function(){t()})})}().then(function(e){t(e)}).catch(function(e){n(e)})):t(null)})}function W(e){I.get().streaming.cacheInitSegments&&(l.info("Init fragment finished loading saving to",R+"'s init cache"),y.save(e.chunk)),l.debug("Append Init fragment",R," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),q(e.chunk)}function K(e){q(e.chunk,e.request)}function q(e,t){h&&(h.append(e,1<arguments.length&&void 0!==t?t:null).then(function(e){X(e)}).catch(function(e){X(e)}),e.mediaInfo.type===Ue.A.VIDEO)&&x(Ve.A.VIDEO_CHUNK_RECEIVED,{chunk:e})}function Q(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)l.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",S.getTime())}function X(e){var t,n,i;e.error?(22===e.error.code&&(_=!0,a=.8*ue(),l.warn("Quota exceeded, Critical Buffer: "+a),0<a)&&(i=Math.max(.2*a,1),n=a-i,t=Math.min(I.get().streaming.buffer.bufferTimeAtTopQuality,.9*n),n=Math.min(I.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*n),i={streaming:{buffer:{bufferToKeep:parseFloat(i.toFixed(5)),bufferTimeAtTopQuality:parseFloat(t.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(n.toFixed(5))}}},I.update(i)),22!==e.error.code&&he()||(l.warn("Clearing playback buffer to overcome quota exceed situation"),x(Ve.A.QUOTA_EXCEEDED,{criticalBufferLevel:a,quotaExceededTime:e.chunk.start}),D(re()))):h&&(P(),_=!1,m=e.chunk)&&m.endFragment&&(m&&!isNaN(m.index)&&(o=Math.max(m.index,o),te()),t=h.getAllBufferRanges(),m.segmentType===ve.G.MEDIA_SEGMENT_TYPE&&(Q(t),C(),isNaN(A)||d||(R!==Ue.A.AUDIO&&R!==Ue.A.VIDEO||(i=L(n=S.getTime(),0),e=L(A,0),i&&e&&i.start===e.start)?A=NaN:(i=U.getCurrentRepresentation().segmentDuration,(e=L(A,i))&&(I.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(n-A)>i?A<=e.end&&S.seek(Math.max(A,e.start),!1,!0):n<e.start&&S.seek(e.start,!1,!0))))),e=!1,f&&(0<f.indexOf(m)&&(e=!0),f=null),m)&&!e&&x(Ve.A.BYTES_APPENDED_END_FRAGMENT,{quality:m.quality,startTime:m.start,index:m.index,bufferedRanges:t,segmentType:m.segmentType,mediaType:R})}function J(){return new Promise(function(e,t){var n=Z();n&&0!==n.length?D(n).then(function(){e()}).catch(function(e){t(e)}):(C(),e())})}function Z(e){var t,n=[],i=h.getAllBufferRanges();return i&&0!==i.length&&(!e&&0!==e||isNaN(e)?n.push({start:i.start(0),end:i.end(i.length-1)+.5}):(t=function(e,t){var n=I.get().streaming.buffer.bufferToKeep,t=t.start(0);if(n<e-t){n=Math.max(0,e-n),e=B.getRequests({state:fe.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];if(0<(n=e?Math.min(e.startTime,n):n))return{start:t,end:n}}return null}(e,i),e=function(e,t){var n=t.end(t.length-1)+.5,i=ce(e),r=w.manifestInfo.duration>=I.get().streaming.buffer.longFormContentDurationThreshold?I.get().streaming.buffer.bufferTimeAtTopQualityLongForm:I.get().streaming.buffer.bufferTimeAtTopQuality;if((s=isNaN(i)?e:Math.min(i,e+r))>=t.end(t.length-1))return null;i=B.getRequests({state:fe.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0];if(i&&(s=Math.max(i.startTime+i.duration,s)),I.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var a=0;a<t.length;a++)if(t.start(a)<=e&&e<=t.end(a)&&t.start(a)<=s&&s<=t.end(a)){var o=s,s=a+1<t.length?t.start(a+1):t.end(a)+1;l.debug("Buffered range ["+t.start(a)+", "+t.end(a)+"] overlaps with targetTime "+e+" and range to be pruned ["+o+", "+n+"], using ["+s+", "+n+"] instead"+(s<n?"":" (no actual pruning)"));break}return s<t.end(t.length-1)?{start:s,end:n}:null}(e,i),t&&n.push(t),e&&n.push(e))),n}function C(){(!E||R===Ue.A.TEXT&&G.isTextEnabled())&&P()}function $(){n()}function ee(){n(),A=NaN}function L(e,t){if(h){var n,i,r,a,o=h.getAllBufferRanges(),s=null,l=null,u=0,c=isNaN(t)?.15:t;if(null!=o){for(i=0,n=o.length;i<n;i++)if(r=o.start(i),a=o.end(i),null===s)u=Math.abs(r-e),(r<=e&&e<a||u<=c)&&(s=r,l=a);else{if(!((u=r-l)<=c))break;l=a}if(null!==s)return{start:s,end:l}}}return null}function P(){var e,t;S&&(e=S.getTime()||0,d&&(e=isNaN(A)?0:A),t=I.get().streaming.gaps.jumpGaps&&!isNaN(I.get().streaming.gaps.smallGapLimit)?I.get().streaming.gaps.smallGapLimit:NaN,r=Math.max((t=t,null===(t=L(e=e,t=I.get().streaming.gaps.jumpGaps?I.get().streaming.gaps.smallGapLimit:t))?0:t.end-e),0),x(Ve.A.BUFFER_LEVEL_UPDATED,{mediaType:R,bufferLevel:r}),n())}function te(){var e=s-1<=o,t=S.getTimeToStreamEnd(w)-r<1e-5;!e&&!t||i||(M(!0),l.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(w.id," and type ").concat(R)))}function n(){R!==Ue.A.AUDIO&&R!==Ue.A.VIDEO||((!S.getLowLatencyModeEnabled()&&r<I.get().streaming.buffer.stallThreshold||0===r)&&!i?ne(je.A.BUFFER_EMPTY):(i||r>=I.get().streaming.buffer.stallThreshold||S.getLowLatencyModeEnabled()&&0<r)&&ne(je.A.BUFFER_LOADED))}function ne(e){p===e||e===je.A.BUFFER_EMPTY&&0===S.getTime()||R===Ue.A.TEXT&&!G.isTextEnabled()||(p=e,x(Ve.A.BUFFER_LEVEL_STATE_CHANGED,{state:e}),x(e===je.A.BUFFER_LOADED?Ve.A.BUFFER_LOADED:Ve.A.BUFFER_EMPTY),l.debug(e===je.A.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ie(){!h||R===Ue.A.TEXT||i||D(re())}function re(){var e=[],t=h.getAllBufferRanges();if(t&&0!==t.length){var n=S.getTime(),i=Math.max(0,n-I.get().streaming.buffer.bufferToKeep),r=B.getRequests({state:fe.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(r)i=Math.min(r.startTime,i);else if(0===n&&S.getIsDynamic())return[];if(t.start(0)<=i){for(var a={start:0,end:i},o=0;o<t.length&&t.end(o)<=i;o++)a.end=t.end(o);a.start<a.end&&e.push(a)}}return e}function D(n){return new Promise(function(e,t){var i;n&&h&&0!==n.length?(i=[],n.forEach(function(e){var n;i.push((n=e,new Promise(function(e,t){n.resolve=e,n.reject=t,v.push(n)})))}),g||ae(),Promise.all(i).then(function(){e()}).catch(function(e){t(e)})):e()})}function ae(){try{var e,t;return 0!==v.length&&h?(e=h.getBuffer())&&e.buffered&&0!==e.buffered.length?(t=v.shift(),l.debug("".concat(R,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),g=!0,S.getTime()<t.end&&M(!1),void h.remove(t).then(function(e){oe(e)}).catch(function(e){oe(e)})):(l.debug("SourceBuffer is empty (or does not exist), halt pruning"),g=!(v=[])):(l.debug("Nothing to prune, halt pruning"),g=!(v=[]))}catch(e){g=!1}}function oe(e){l.debug("onRemoved buffer from:",e.from,"to",e.to),h&&(Q(h.getAllBufferRanges()),0===v.length&&(g=!1,P()),e.unintended&&(l.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),x(Ve.A.SEEK_TARGET,{time:e.from})),g?ae():(E?E=!1:P(),x(Ve.A.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:he(),quotaExceeded:_})))}function k(t){return new Promise(function(e){t&&void 0!==t.MSETimeOffset&&h&&h.updateTimestampOffset?h.updateTimestampOffset(t.MSETimeOffset).then(function(){e()}).catch(function(){e()}):e()})}function O(){return h&&!i?h.updateAppendWindow(w):Promise.resolve()}function se(){++N*(I.get().streaming.wallclockTimeUpdateInterval/1e3)>=I.get().streaming.buffer.bufferPruningInterval&&(N=0,ie())}function le(){n()}function M(e){(i=e)?x(Ve.A.BUFFERING_COMPLETED):s=Number.POSITIVE_INFINITY}function ue(){try{var e,t,n=h.getAllBufferRanges(),i=0;if(n)for(t=0,e=n.length;t<e;t++)i+=n.end(t)-n.start(t);return i}catch(e){return 0}}function ce(e){try{var t=e,n=h.getAllBufferRanges();if(!n||0===n.length)return NaN;for(var i=0;t===e&&i<n.length;){var r=n.start(i),a=n.end(i);r<=t&&t<=a&&(t=a),i+=1}return t===e?NaN:t}catch(e){}}function he(){var e=ue();return isNaN(e)||e<a}function x(e,t){T.trigger(e,t||{},{streamId:w.id,mediaType:R})}function de(e,t){var n;a=Number.POSITIVE_INFINITY,p=void 0,s=Number.POSITIVE_INFINITY,m=null,_=g=i=!1,N=r=o=0,A=NaN,d=!(v=[]),h&&(n=h,h=null,e||t||n.abort().then(function(){n.reset(t),n=null})),E=!1}return t={initialize:function(e){H(e),T.on(Ve.A.INIT_FRAGMENT_LOADED,W,t),T.on(Ve.A.MEDIA_FRAGMENT_LOADED,K,t),T.on(Ve.A.WALLCLOCK_TIME_UPDATED,se,t),T.on(Ye.A.PLAYBACK_PLAYING,ee,t),T.on(Ye.A.PLAYBACK_PROGRESS,C,t),T.on(Ye.A.PLAYBACK_TIME_UPDATED,C,t),T.on(Ye.A.PLAYBACK_RATE_CHANGED,le,t),T.on(Ye.A.PLAYBACK_STALLED,$,t)},getStreamId:function(){return w.id},getType:function(){return R},getBufferControllerType:function(){return Se},createBufferSink:z,dischargePreBuffer:function(){if(h&&c&&"function"==typeof c.discharge){var e=c.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+R+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";l.debug(t)}else l.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");f=[];for(var i=c.discharge(),r=null,a=0;a<i.length;a++){var o,s=i[a];s.segmentType!==ve.G.INIT_SEGMENT_TYPE&&(o=y.extract(s.streamId,s.representationId))&&r!==o&&(f.push(o),h.append(o),r=o),f.push(s),h.append(s)}c.reset(),c=null}},getBuffer:function(){return h},getBufferLevel:function(){return r},getRangeAt:L,hasBufferAtTime:function(e){try{var t=h.getAllBufferRanges();if(t&&0!==t.length)for(var n=0;n<t.length;){var i=t.start(n),r=t.end(n);if(i<=e&&e<=r)return!0;n+=1}return!1}catch(e){return l.error(e),!1}},pruneBuffer:ie,setMediaSource:H,getMediaSource:function(){return u},appendInitSegmentFromCache:function(e){e=y.extract(w.id,e);return!!e&&(l.info("Append Init fragment",R," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),q(e),!0)},getIsBufferingCompleted:function(){return i},setIsBufferingCompleted:M,getIsPruningInProgress:function(){return g},reset:function(e,t){T.off(Ve.A.INIT_FRAGMENT_LOADED,W,this),T.off(Ve.A.MEDIA_FRAGMENT_LOADED,K,this),T.off(Ve.A.WALLCLOCK_TIME_UPDATED,se,this),T.off(Ye.A.PLAYBACK_PLAYING,ee,this),T.off(Ye.A.PLAYBACK_PROGRESS,C,this),T.off(Ye.A.PLAYBACK_TIME_UPDATED,C,this),T.off(Ye.A.PLAYBACK_RATE_CHANGED,le,this),T.off(Ye.A.PLAYBACK_STALLED,$,this),de(e,t)},prepareForPlaybackSeek:function(){return i&&M(!1),h.abort()},prepareForReplacementTrackSwitch:function(n){return new Promise(function(e,t){h.abort().then(O).then(function(){return I.get().streaming.buffer.useChangeTypeForTrackSwitch?h.changeType(n):Promise.resolve()}).then(J).then(function(){M(!1),e()}).catch(function(e){t(e)})})},prepareForNonReplacementTrackSwitch:function(n){return new Promise(function(e,t){O().then(function(){return I.get().streaming.buffer.useChangeTypeForTrackSwitch?h.changeType(n):Promise.resolve()}).then(function(){e()}).catch(function(e){t(e)})})},prepareForForceReplacementQualitySwitch:function(n){return new Promise(function(e,t){h.abort().then(O).then(J).then(function(){return k(n)}).then(function(){M(!1),e()}).catch(function(e){t(e)})})},updateAppendWindow:O,getAllRangesWithSafetyFactor:Z,getContinuousBufferTimeForTargetTime:ce,clearBuffers:D,pruneAllSafely:J,updateBufferTimestampOffset:k,setSeekTarget:function(e){A=e},segmentRequestingCompleted:function(e){isNaN(e)||(s=e,te())}},l=(0,He.A)(b).getInstance().getLogger(t),y=Qe(b).getInstance(),de(),t}D.__dashjs_factory_name=Se;var he=_e.A.getClassFactory(D),k="NotFragmentedTextBufferController";function O(e){e=e||{};var t,n,i,r,a,o,s=this.context,l=(0,Ge.A)(s).getInstance(),u=e.textController,c=e.errHandler,h=e.streamInfo,d=e.type;function f(e){r=e}function p(e){n!==e&&(n=e)&&(e=Ve.A.BUFFERING_COMPLETED,l.trigger(e,{},{streamId:h.id,mediaType:d}))}function m(e){e.chunk.bytes&&!n&&(o.save(e.chunk),a.append(e.chunk),p(!0))}return r=null,n=i=!(t={initialize:function(e){f(e)},getStreamId:function(){return h.id},getType:function(){return d},getBufferControllerType:function(){return k},createBufferSink:function(n){return new Promise(function(e,t){try{(a=pe(s).create({mediaSource:r,textController:u,eventBus:l})).initializeForFirstUse(h,n),i||(a.getBuffer()&&"function"==typeof a.getBuffer().initialize&&a.getBuffer().initialize(),i=!0),e(a)}catch(e){c.error(new ze.A(We.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,We.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+d)),t(e)}})},dischargePreBuffer:function(){},getBuffer:function(){return a},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:f,getMediaSource:function(){return r},appendInitSegmentFromCache:function(e){return null!==o.extract(h.id,e)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:p,getIsPruningInProgress:function(){return!1},reset:function(e){l.off(Ve.A.INIT_FRAGMENT_LOADED,m,t),!e&&a&&(a.abort(),a.reset(),a=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return n=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}}),o=Qe(s).getInstance(),l.on(Ve.A.INIT_FRAGMENT_LOADED,m,t),t}O.__dashjs_factory_name=k;var de=_e.A.getClassFactory(O);function M(e){e=e||{};var n,i,r,t,a,o,s,l,u,c,h,d,f,p=this.context,m=(0,Ge.A)(p).getInstance(),g=e.dashMetrics,_=e.mediaPlayerModel,y=e.fragmentModel,v=e.abrController,E=e.playbackController,A=e.textController,b=e.type,N=e.bufferController,T=e.representationController,S=e.settings;function w(){d=!0}function R(){d=!1}function I(e){N.getIsBufferingCompleted()||(C(),e=isNaN(e)?0:e,a=setTimeout(F,e))}function C(){a&&(clearTimeout(a),a=null)}function F(){try{var e;(function(){try{return b===Ue.A.TEXT&&!A.isTextEnabled()||E.isPaused()&&(!E.getStreamController().getInitialPlayback()||!E.getStreamController().getAutoPlay())&&!S.get().streaming.scheduling.scheduleWhilePaused}catch(e){}})()?C():!function(){try{return d&&T.getCurrentRepresentationInfo()&&(isNaN(u)||c||(t=i.id,n=v.getMaxAllowedIndexFor(b,t),(isNaN(l)||l!=n)&&(r.info("Top quality "+b+" index has changed from "+l+" to "+n),l=n,1))||(e=T.getCurrentRepresentationInfo(),!b||!e||g.getCurrentBufferLevel(b)<L()))}catch(t){}var e,t,n}()?I(E.getLowLatencyModeEnabled()?S.get().streaming.scheduling.lowLatencyTimeout:S.get().streaming.scheduling.defaultTimeout):(e=!1,(e=f?v.checkPlaybackQuality(b,i.id):e)||(t=T.getCurrentRepresentationInfo(),h||t.quality!==u||c?(c?(r.debug("Switch track for "+b+", representation id = "+t.id),c=!1):r.debug("Quality has changed, get init request for representationid = "+t.id),m.trigger(Ve.A.INIT_FRAGMENT_NEEDED,{representationId:t.id,sender:n},{streamId:i.id,mediaType:b}),h=f=!1):(r.debug("Media segment needed for ".concat(b," and stream id ").concat(i.id)),m.trigger(Ve.A.MEDIA_FRAGMENT_NEEDED,{},{streamId:i.id,mediaType:b}),f=!0)))}catch(e){I(E.getLowLatencyModeEnabled()?S.get().streaming.scheduling.lowLatencyTimeout:S.get().streaming.scheduling.defaultTimeout)}var t}function L(){var e=NaN,t=T.getCurrentRepresentationInfo();return e=b&&t?(b===Ue.A.TEXT?function(){try{var e,t;return A.isTextEnabled()?(e=T.getCurrentRepresentationInfo(),isNaN(e.fragmentDuration)?(t=g.getCurrentSchedulingInfo(je.A.SCHEDULING_INFO))?t.duration:0:e.fragmentDuration):0}catch(e){return 0}}:b===Ue.A.AUDIO&&o?function(){try{var e=g.getCurrentBufferLevel(Ue.A.VIDEO),t=T.getCurrentRepresentationInfo();return isNaN(t.fragmentDuration)?e+1:Math.max(e+1,t.fragmentDuration)}catch(e){return 0}}:function(){try{var e=T.getCurrentRepresentationInfo().mediaInfo.streamInfo;return v.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=S.get().streaming.buffer.longFormContentDurationThreshold?S.get().streaming.buffer.bufferTimeAtTopQualityLongForm:S.get().streaming.buffer.bufferTimeAtTopQuality:_.getStableBufferTime()}catch(e){return _.getStableBufferTime()}})():e}function P(){D(!0)}function D(e){var t;E&&y&&(t=y.getRequests({state:fe.FRAGMENT_MODEL_EXECUTED,time:E.getTime(),threshold:0})[0])&&E.getTime()>=t.startTime&&((!s.mediaInfo||t.mediaInfo.type===s.mediaInfo.type&&t.mediaInfo.index!==s.mediaInfo.index)&&e&&m.trigger(Ve.A.TRACK_CHANGE_RENDERED,{mediaType:b,oldMediaInfo:s.mediaInfo,newMediaInfo:t.mediaInfo,streamId:i.id}),t.quality===s.quality&&t.adaptationIndex===s.adaptationIndex||!e||(r.debug("Quality change rendered for streamId ".concat(i.id," and type ").concat(b)),m.trigger(Ve.A.QUALITY_CHANGE_RENDERED,{mediaType:b,oldQuality:s.quality,newQuality:t.quality,streamId:i.id})),s={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}function k(){y.abortRequests(),C()}function O(){S.get().streaming.scheduling.scheduleWhilePaused||I()}function M(e){g.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function x(){f=!0,l=u=NaN,d=!(h=c=!(s={mediaInfo:void(t=0),quality:NaN,adaptationIndex:NaN}))}return n={initialize:function(e){o=e,m.on(Ve.A.URL_RESOLUTION_FAILED,k,n),m.on(Ye.A.PLAYBACK_STARTED,O,n),m.on(Ye.A.PLAYBACK_RATE_CHANGED,M,n),m.on(Ye.A.PLAYBACK_TIME_UPDATED,P,n),m.on(Ye.A.MANAGED_MEDIA_SOURCE_START_STREAMING,w,n),m.on(Ye.A.MANAGED_MEDIA_SOURCE_END_STREAMING,R,n)},getType:function(){return b},getStreamId:function(){return i.id},setTimeToLoadDelay:function(e){t=e},getTimeToLoadDelay:function(){return t},setSwitchTrack:function(e){c=e},getSwitchTrack:function(){return c},startScheduleTimer:I,clearScheduleTimer:C,reset:function(){m.off(Ve.A.URL_RESOLUTION_FAILED,k,n),m.off(Ye.A.PLAYBACK_STARTED,O,n),m.off(Ye.A.PLAYBACK_RATE_CHANGED,M,n),m.off(Ye.A.PLAYBACK_TIME_UPDATED,P,n),m.off(Ye.A.MANAGED_MEDIA_SOURCE_START_STREAMING,w,n),m.off(Ye.A.MANAGED_MEDIA_SOURCE_END_STREAMING,R,n),C(),D(!1),x(),i=null},getBufferTarget:L,getPlaybackController:function(){return E},setCheckPlaybackQuality:function(e){f=e},setInitSegmentRequired:function(e){h=e},setLastInitializedQuality:function(e){u=e}},r=(0,He.A)(p).getInstance().getLogger(n),x(),i=e.streamInfo,n}M.__dashjs_factory_name="ScheduleController";var we=_e.A.getClassFactory(M),x=t(271);function N(e){var t,h,d,f,n,c,i=(e=e||{}).eventBus,r=e.events,p=e.abrController,m=e.dashMetrics,g=e.playbackController,_=e.timelineConverter,y=e.type,v=e.streamInfo,E=e.dashConstants,A=e.segmentsController,b=e.isDynamic,a=e.adapter;function o(){return y}function s(){return d}function l(){return c}function u(){d=!(h=null),f=[],n=null}function T(u){return new Promise(function(l,t){var e=u.hasInitialization(),n=u.hasSegments(),i=[];i.push(A.updateInitData(u,e)),i.push(A.updateSegmentData(u,n)),Promise.all(i).then(function(e){e[0]&&!e[0].error&&(r=u,t=e[0],u=t&&!t.error&&t.representation?t.representation:r),(t=u=e[1]&&!e[1].error?function(e,t){if(t&&!t.error){for(var n,i=t.segments,r=[],a=0,o=0,s=i?i.length:0;o<s;o++)n=i[o],(n=(0,x.W$)(_,b,e,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,a))&&(r.push(n),a++);return 0<r.length&&(e.segments=r),e}}(u,e[1]):u).mediaFinishedInformation=A.getMediaFinishedInformation(t);var t,n=u;if(d){var i,r,a=m.getCurrentManifestUpdate(),o=!1;if(a){for(var s=0;s<a.representationInfo.length;s++)if((i=a.representationInfo[s]).index===n.index&&i.mediaType===y){o=!0;break}o||m.addManifestUpdateRepresentationInfo(n,y)}!function(){for(var e=0,t=f.length;e<t;e++){var n=f[e].segmentInfoType;if(!f[e].hasInitialization()||(n===E.SEGMENT_BASE||n===E.BASE_URL)&&!f[e].segments)return}return 1}()||(p.setPlaybackQuality(y,v,(r=c,f.indexOf(r))),(r=m.getCurrentDVRInfo(y))&&m.updateManifestUpdateInfo({latency:r.range.end-g.getTime()}),m.getCurrentRepresentationSwitch(c.adaptation.type)||S(),R())}l()}).catch(function(e){t(e)})})}function S(){if(!(p&&m&&g&&_))throw new Error(Ue.A.MISSING_CONFIG_ERROR);var e=new Date,t=c,n=1e3*g.getTime();t&&m.addRepresentationSwitch(t.adaptation.type,e,n,t.id),i.trigger(Ye.A.REPRESENTATION_SWITCH,{mediaType:y,streamId:v.id,currentRepresentation:t,numberOfRepresentations:f.length},{streamId:v.id,mediaType:y})}function w(e){return null==e||e>=f.length?null:f[e]}function R(e){d=!1,i.trigger(r.DATA_UPDATE_COMPLETED,{data:h,currentRepresentation:c,error:e},{streamId:v.id,mediaType:y})}function I(e){c=e,n=a.convertRepresentationToRepresentationInfo(c)}function C(e){var t;e.newDuration&&(t=c)&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}return t={getStreamId:function(){return v.id},getType:o,getData:function(){return h},isUpdating:s,updateData:function(o,s,l,u,c){return new Promise(function(e,t){if(d=!0,f=s,h=o,I(w(c)),l===Ue.A.VIDEO||l===Ue.A.AUDIO||l===Ue.A.TEXT&&u){for(var n=[],i=0,r=f.length;i<r;i++){var a=f[i];n.push(T(a))}Promise.all(n).then(function(){I(w(c)),e()}).catch(function(e){t(e)})}else R(),e()})},getCurrentRepresentation:l,getCurrentRepresentationInfo:function(){return n},getRepresentationForQuality:w,prepareQualityChange:function(e){I(w(e)),S()},reset:function(){i.off(Ye.A.MANIFEST_VALIDITY_CHANGED,C,t),u()}},u(),i.on(Ye.A.MANIFEST_VALIDITY_CHANGED,C,t),t}N.__dashjs_factory_name="RepresentationController";var Re=_e.A.getClassFactory(N),Ee=t(5533),Ie=t(9662),Ce=t(7464),Ae=t(1372);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=F(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==F(e)?e:String(e)}(i.key),i)}}function U(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ke=U(function e(){G(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}),qe=(Ke.INITIAL_PLAYOUT_START_REASON="initial_playout",Ke.SEEK_START_REASON="seek",Ke.RESUME_FROM_PAUSE_START_REASON="resume",Ke.METRICS_COLLECTION_START_REASON="metrics_collection_start",U(function e(){G(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null})),Le=(qe.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",qe.REBUFFERING_REASON="rebuffering",qe.USER_REQUEST_STOP_REASON="user_request",qe.END_OF_PERIOD_STOP_REASON="end_of_period",qe.END_OF_CONTENT_STOP_REASON="end_of_content",qe.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",qe.FAILURE_STOP_REASON="failure",t(6544));function V(){return{ntpToUTC:function(e){var t=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(t.getTime()+e).getTime()}}}V.__dashjs_factory_name="TimeUtils";var Pe=_e.A.getSingletonFactory(V);function H(r){r=r||{};var a,s,o,l,n,u,c,_,h,d,f,p,m,g,y,v=this.context,E=(0,Ge.A)(v).getInstance(),A=r.streamInfo,b=r.type,T=r.errHandler,B=r.mimeType,S=r.timelineConverter,w=r.adapter,U=r.manifestModel,R=r.mediaPlayerModel,I=r.fragmentModel,C=r.abrController,L=r.playbackController,j=r.mediaController,P=r.textController,D=r.dashMetrics,k=r.settings,O=r.boxParser,G=r.segmentBlacklistController;function V(){return A.id}function e(){return b}function H(){return w.getIsTextTrack(_.getData())}function Y(){g=0,f=d=h=!(n=[]),y=l=null}function z(e){return!isNaN(e)&&!isNaN(A.duration)&&isFinite(A.duration)&&e>=A.start+A.duration}function W(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.sender&&(L.getIsManifestUpdateInProgress()?M():H()&&!P.isTextEnabled()||!u||!e.representationId||u.appendInitSegmentFromCache(e.representationId)||(0===(e=_.getCurrentRepresentation()).range?i():(e=p?p.getInitRequest(l,e):null)?I.executeRequest(e):t&&(c.setInitSegmentRequired(!0),M())))}function i(e){var t,n,i,r,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];L.getIsManifestUpdateInProgress()||u.getIsPruningInProgress()?M():(r=x(),(r=isNaN(g)||b===Ue.A.TEXT&&!P.isTextEnabled()?null:(p&&(r=_&&r?_.getRepresentationForQuality(r.quality):null,i=h?p.getSegmentRequestForTime(l,r,g):d?p.repeatSegmentRequest(l,r):p.getNextSegmentRequest(l,r)),i))?(d=h=!1,r=r,isNaN(r.startTime+r.duration)||(g=r.startTime+r.duration),r.delayLoadingTime=(new Date).getTime()+c.getTimeToLoadDelay(),c.setTimeToLoadDelay(0),n=r.url,r.range&&(n=n.concat("_",r.range)),G.contains(n)?(s.warn("Fragment request url ".concat(r.url," for stream id ").concat(A.id," and media type ").concat(b," is on the ignore list and will be skipped")),M()):(s.debug("Next fragment request url for stream id ".concat(A.id," and media type ").concat(b," is ").concat(r.url)),I.executeRequest(r))):(n=a,r=_.getCurrentRepresentation(),!k.get().streaming.gaps.enableSeekFix||!h&&0!==L.getTime()||(o&&r.segmentInfoType!==ge.A.SEGMENT_TIMELINE||(t=p.getValidTimeAheadOfTargetTime(g,l,r,k.get().streaming.gaps.threshold)),isNaN(t))||t===g?p.isLastSegmentRequested(r,g)?(r=p.getCurrentIndex(),s.debug("Segment requesting for stream ".concat(A.id," has finished")),E.trigger(Ve.A.STREAM_REQUESTING_COMPLETED,{segmentIndex:r},{streamId:A.id,mediaType:b}),u.segmentRequestingCompleted(r),c.clearScheduleTimer()):n&&M():L.isSeeking()||0===L.getTime()?(s.warn("Adjusting playback time ".concat(t," because of gap in the manifest. Seeking by ").concat(t-g)),L.seek(t,!1,!1)):(s.warn("Adjusting buffering time ".concat(t," because of gap in the manifest. Adjusting time by ").concat(t-g)),F(t),n&&M())))}function M(){c.startScheduleTimer(L.getLowLatencyModeEnabled()?k.get().streaming.scheduling.lowLatencyTimeout:k.get().streaming.scheduling.defaultTimeout)}function K(e){e.error||u.getIsBufferingCompleted()||u.updateBufferTimestampOffset(e.currentRepresentation)}function q(e){D.addBufferState(b,e.state,c.getBufferTarget()),e.state!==je.A.BUFFER_EMPTY||L.isSeeking()||(s.info("Buffer is empty! Stalling!"),D.pushPlayListTraceMetrics(new Date,qe.REBUFFERING_REASON))}function Q(e){I.syncExecutedRequestsWithBufferedRange(u.getBuffer().getAllBufferRanges(),A.duration),e.quotaExceeded&&e.from>L.getTime()&&F(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&c.startScheduleTimer()}function X(e){var t;e&&e.lastRequestAppended&&e.lastRequestAppended.url&&(t=e.lastRequestAppended.url,e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),s.warn("Blacklisting segment with url ".concat(t)),G.add(t))}function J(e){var t;s.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(e.streamId)),e.segmentType===ve.G.INIT_SEGMENT_TYPE&&(t=e.quality,c.setLastInitializedQuality(t),s.info("["+b+"] lastInitializedRepresentationInfo changed to "+e.quality)),y?Z(y):c.startScheduleTimer(0)}function Z(e){var t=I.getRequests({state:fe.FRAGMENT_MODEL_LOADING});if(t&&0<t.length)return s.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),y=e;u.updateBufferTimestampOffset(e).then(function(){c.setCheckPlaybackQuality(!1),l.segmentAlignment||l.subSegmentAlignment?c.startScheduleTimer():ue(),y=null,f=!1}).catch(function(){y=null,f=!1})}function $(e){s.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),L.isSeeking()||c.getSwitchTrack()||f||(s.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?c.setInitSegmentRequired(!0):F(e.request.startTime+e.request.duration/2),c.startScheduleTimer(0))}function ee(e){s.info("OnFragmentLoadingCompleted for stream id "+A.id+" and media type "+b+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),H()&&c.startScheduleTimer(0),e.error&&e.request.serviceLocation&&(e=e,s.info("Fragment loading completed with an error"),e)&&e.request&&e.request.type&&(e.request.type===ve.G.INIT_SEGMENT_TYPE?W({representationId:e.request.representationId,sender:{}},!1):e.request.type===ve.G.MEDIA_SEGMENT_TYPE&&(F(e.request.startTime+e.request.duration/2),i({},!1)))}function te(){F(L.getTime()),c.startScheduleTimer()}function ne(e){var t=e.currentTrackInfo;t&&(e=n.find(function(e){return e.index===t.index&&e.lang===t.lang}))&&ae(e).then(function(){u.setIsBufferingCompleted(!1),F(L.getTime()),c.setInitSegmentRequired(!0),c.startScheduleTimer()})}function ie(e){F(e.quotaExceededTime),c.clearScheduleTimer()}function re(){return u?u.getBuffer():null}function ae(e){e===l||e&&l&&e.type!==l.type||(l=e);var t,n,i,r,e=w.getRealAdaptation(A,l),a=w.getVoRepresentations(l);return _?(r=_.getData(),t=C.getMaxAllowedIndexFor(b,A.id),n=C.getMinAllowedIndexFor(b,A.id),r=(i=null)!==r&&r.id===e.id||b===Ue.A.TEXT?C.getQualityFor(b,A.id):(i=C.getThroughputHistory().getAverageThroughput(b,o)||C.getInitialBitrateFor(b,A.id),C.getQualityForBitrate(l,i,A.id)),_.updateData(e,a,b,l.isFragmented,r=t<(r=void 0!==n&&r<n?n:r)?t:r)):Promise.resolve()}function t(){return c}function x(e){e=void 0!==e?((0,Ee.zQ)(e),_?_.getRepresentationForQuality(e):null):_?_.getCurrentRepresentation():null;return w.convertRepresentationToRepresentationInfo(e)}function oe(){return!!u&&u.getIsBufferingCompleted()}function se(e){var t,n;k.get().streaming.enableManifestTimescaleMismatchFix&&(t=(e=e.chunk).bytes,e=x(e.quality),n=_&&e?_.getRepresentationForQuality(e.quality):null,e)&&n&&(n.timescale=O.getMediaTimescaleFromMoov(t))}function le(e){var t,n,i,r=e.chunk,a=r.bytes,o=r.quality,s=x(o),l=_&&s?_.getRepresentationForQuality(s.quality):null;s&&l&&(k.get().streaming.parseInbandPrft&&e.request.type===ve.G.MEDIA_SEGMENT_TYPE&&(e=t=t||O.parse(a),n=l.timescale,e=e.getBoxes("prft"),i=[],e.forEach(function(e){i.push(function(e,t){var n="unknown";switch(e.flags){case 0:n=ge.A.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:n=ge.A.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:n=ge.A.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var i=1e3*e.ntp_timestamp_sec+e.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:n,ntpTimestamp:Pe(v).getInstance().ntpToUTC(i),mediaTime:e.media_time/t}}(e,n))}),e=i)&&e.length&&E.trigger(Ye.A.INBAND_PRFT,{data:e},{streamId:A.id,mediaType:b}),e=w.getEventsFor(s.mediaInfo,null,A),s=w.getEventsFor(s,l,A),e&&0<e.length||s&&0<s.length)&&(l=I.getRequests({state:fe.FRAGMENT_MODEL_EXECUTED,quality:o,index:r.index})[0],o=function(e,t,n,i){try{for(var r={},a=[],o=n.concat(i),s=0,l=o.length;s<l;s++)r[o[s].schemeIdUri+"/"+o[s].value]=o[s];var u=e.getBoxes("emsg");if(u&&0!==u.length)for(var c=e.getBox("sidx"),h=!c||isNaN(c.earliest_presentation_time)||isNaN(c.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:c.earliest_presentation_time/c.timescale,d=Math.max(h,0),f=_.getCurrentRepresentation(),p=0,m=u.length;p<m;p++){var g=w.getEvent(u[p],r,d,f);g&&a.push(g)}return a}catch(e){return[]}}(t=t||O.parse(a),l,e,s),E.trigger(Ve.A.INBAND_EVENTS,{events:o},{streamId:A.id}))}function N(){var e=L.getTime();k.get().streaming.buffer.flushBufferAtTrackSwitch&&L.seek(e+.001,!1,!0),F(e),u.setSeekTarget(e),c.startScheduleTimer()}function ue(){var e=L.getTime(),t=u.getContinuousBufferTimeForTargetTime(e);F(isNaN(t)?e:t),c.startScheduleTimer()}function ce(e){e&&!isNaN(e.time)&&(F(e.time),u.setSeekTarget(e.time))}function F(e){g=e,h=!0}return a={initialize:function(e,t,n){var i;m=(0,Le.A)(v).create({events:Ve.A,eventBus:E,streamInfo:A,timelineConverter:S,dashConstants:ge.A,segmentBaseController:r.segmentBaseController,type:b}),p=(0,Ie.A)(v).create({streamInfo:A,type:b,timelineConverter:S,dashMetrics:D,mediaPlayerModel:R,baseURLController:r.baseURLController,errHandler:T,segmentsController:m,settings:k,boxParser:O,events:Ve.A,eventBus:E,errors:We,debug:(0,He.A)(v).getInstance(),requestModifier:(0,Ce.A)(v).getInstance(),dashConstants:ge.A,constants:Ue.A,urlUtils:(0,Ae.A)(v).getInstance()}),o=A.manifestInfo.isDynamic,p.initialize(o),C.registerStreamType(b,a),_=Re(v).create({streamInfo:A,type:b,abrController:C,dashMetrics:D,playbackController:L,timelineConverter:S,dashConstants:ge.A,events:Ve.A,eventBus:E,errors:We,isDynamic:o,adapter:w,segmentsController:m}),(u=(i=b)?i!==Ue.A.TEXT||n?he(v).create({streamInfo:A,type:i,mediaPlayerModel:R,manifestModel:U,fragmentModel:I,errHandler:T,mediaController:j,representationController:_,adapter:w,textController:P,abrController:C,playbackController:L,settings:k}):de(v).create({streamInfo:A,type:i,mimeType:B,fragmentModel:I,textController:P,errHandler:T,settings:k}):(T.error(new ze.A(We.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,We.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null))&&u.initialize(e),(c=we(v).create({streamInfo:A,type:b,mimeType:B,adapter:w,dashMetrics:D,mediaPlayerModel:R,fragmentModel:I,abrController:C,playbackController:L,textController:P,mediaController:j,bufferController:u,representationController:_,settings:k})).initialize(t),g=0,d=h=!1},getStreamId:V,getType:e,isUpdating:function(){return!!_&&_.isUpdating()},getBufferController:function(){return u},dischargePreBuffer:function(){u.dischargePreBuffer()},getFragmentModel:function(){return I},getScheduleController:t,getRepresentationController:function(){return _},getRepresentationInfo:x,getBufferLevel:function(){return u?u.getBufferLevel():0},isBufferingCompleted:oe,createBufferSinks:function(e){var t=re();return t?Promise.resolve(t):u?u.createBufferSink(l,e):Promise.resolve(null)},updateStreamInfo:function(e){return A=e,oe()?Promise.resolve():u.updateAppendWindow()},getStreamInfo:function(){return A},selectMediaInfo:ae,clearMediaInfoArray:function(){n=[]},addMediaInfo:function(e){-1===n.indexOf(e)&&n.push(e)},prepareTrackSwitch:function(){return new Promise(function(e){s.debug("Preparing track switch for type ".concat(b));var t=b===Ue.A.TEXT||k.get().streaming.trackSwitchMode[b]===Ue.A.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&L.getTimeToStreamEnd(A)>k.get().streaming.buffer.stallThreshold;u.getIsBufferingCompleted()&&!t?(u.prepareForNonReplacementTrackSwitch(l.codec).then(function(){E.trigger(Ve.A.BUFFERING_COMPLETED,{},{streamId:A.id,mediaType:b})}).catch(function(){E.trigger(Ve.A.BUFFERING_COMPLETED,{},{streamId:A.id,mediaType:b})}),e()):(c.clearScheduleTimer(),c.setSwitchTrack(!0),t?(E.trigger(Ve.A.BUFFER_REPLACEMENT_STARTED,{mediaType:b,streamId:A.id},{mediaType:b,streamId:A.id}),I.abortRequests(),u.prepareForReplacementTrackSwitch(l.codec).then(function(){var e=x();return u.updateBufferTimestampOffset(e)}).then(function(){N(),e()}).catch(function(){N(),e()})):u.prepareForNonReplacementTrackSwitch(l.codec).then(function(){ue(),e()}).catch(function(){ue(),e()}))})},prepareQualityChange:function(e){y&&s.warn("Canceling queued representation switch to ".concat(y.quality," for ").concat(b)),s.debug("Preparing quality switch for type ".concat(b));var t,n,i,r,a,o=e.newQuality,o=(f=!0,c.clearScheduleTimer(),_.prepareQualityChange(o),x(o));e.reason&&e.reason.forceReplace?(a=o,I.abortRequests(),E.trigger(Ve.A.BUFFER_REPLACEMENT_STARTED,{mediaType:b,streamId:A.id},{mediaType:b,streamId:A.id}),c.setCheckPlaybackQuality(!1),u.prepareForForceReplacementQualitySwitch(a).then(function(){N(),y=null,f=!1}).catch(function(){N(),y=null,f=!1})):e&&e.reason&&e.reason.forceAbandon?u.updateBufferTimestampOffset(o).then(function(){I.abortRequests(),d=!0,c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),f=!1,y=null}).catch(function(){y=null,f=!1}):k.get().streaming.buffer.fastSwitchEnabled?(a=o,i=L.getTime(),r=1.5*(isNaN(a.fragmentDuration)?1:a.fragmentDuration),(e=I.getRequests({state:fe.FRAGMENT_MODEL_EXECUTED,time:i+r,threshold:0})[0])&&!H()&&(t=u.getBufferLevel(),n=C.getAbandonmentStateFor(A.id,b),e.quality<a.quality)&&r<=t&&n!==je.A.ABANDON_LOAD?u.updateBufferTimestampOffset(a).then(function(){I.abortRequests(),F(i+r),c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),f=!1}).catch(function(){f=!1}):Z(a)):Z(o),D.pushPlayListTraceMetrics(new Date,qe.REPRESENTATION_SWITCH_STOP_REASON),D.createPlaylistTraceMetrics(o.id,1e3*L.getTime(),L.getPlaybackRate())},getMediaInfo:function(){return l},getMediaSource:function(){return u.getMediaSource()},setMediaSource:function(e){return u.setMediaSource(e,l)},getBuffer:re,setExplicitBufferingTime:F,finalisePlayList:function(e,t){D.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=x(),e=_&&e?_.getRepresentationForQuality(e.quality):null;return p.getNextSegmentRequestIdempotent(l,e)},prepareInnerPeriodPlaybackSeeking:function(i){return new Promise(function(n){u.hasBufferAtTime(i.seekTime)?(u.pruneBuffer(),z(u.getContinuousBufferTimeForTargetTime(i.seekTime))&&u.setIsBufferingCompleted(!0),n()):(c.clearScheduleTimer(),I.abortRequests(),u.prepareForPlaybackSeek().then(function(){var e=u.getAllRangesWithSafetyFactor(i.seekTime);return u.clearBuffers(e)}).then(function(){var e,t=u.getContinuousBufferTimeForTargetTime(i.seekTime);z(t)?(u.setIsBufferingCompleted(!0),n()):(F(t=isNaN(t)?i.seekTime:t),u.setSeekTarget(t),(t=[]).push(u.updateAppendWindow()),e=x(),t.push(u.updateBufferTimestampOffset(e)),Promise.all(t).then(function(){c.setInitSegmentRequired(!0),c.setCheckPlaybackQuality(!1),c.startScheduleTimer(),n()}))}).catch(function(e){s.error(e)}))})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(e,t){try{c.clearScheduleTimer(),I.abortRequests(),u.prepareForPlaybackSeek().then(function(){return u.pruneAllSafely()}).then(function(){e()})}catch(e){t(e)}})},reset:function(e,t){p&&p.reset(),u&&(u.reset(e,t),u=null),c&&(c.reset(),c=null),_&&(_.reset(),_=null),m=m&&null,C&&C.unRegisterStreamType(V(),b),E.off(Ve.A.DATA_UPDATE_COMPLETED,K,a),E.off(Ve.A.INIT_FRAGMENT_NEEDED,W,a),E.off(Ve.A.MEDIA_FRAGMENT_NEEDED,i,a),E.off(Ve.A.INIT_FRAGMENT_LOADED,se,a),E.off(Ve.A.MEDIA_FRAGMENT_LOADED,le,a),E.off(Ve.A.BUFFER_LEVEL_STATE_CHANGED,q,a),E.off(Ve.A.BUFFER_CLEARED,Q,a),E.off(Ve.A.SEEK_TARGET,ce,a),E.off(Ve.A.FRAGMENT_LOADING_ABANDONED,$,a),E.off(Ve.A.FRAGMENT_LOADING_COMPLETED,ee,a),E.off(Ve.A.SET_FRAGMENTED_TEXT_AFTER_DISABLED,te,a),E.off(Ve.A.SET_NON_FRAGMENTED_TEXT,ne,a),E.off(Ve.A.QUOTA_EXCEEDED,ie,a),E.off(Ve.A.SOURCE_BUFFER_ERROR,X,a),E.off(Ve.A.BYTES_APPENDED_END_FRAGMENT,J,a),Y(),A=b=null}},s=(0,He.A)(v).getInstance().getLogger(a),Y(),E.on(Ve.A.DATA_UPDATE_COMPLETED,K,a,{priority:Ge.A.EVENT_PRIORITY_HIGH}),E.on(Ve.A.INIT_FRAGMENT_NEEDED,W,a),E.on(Ve.A.MEDIA_FRAGMENT_NEEDED,i,a),E.on(Ve.A.INIT_FRAGMENT_LOADED,se,a),E.on(Ve.A.MEDIA_FRAGMENT_LOADED,le,a),E.on(Ve.A.BUFFER_LEVEL_STATE_CHANGED,q,a),E.on(Ve.A.BUFFER_CLEARED,Q,a),E.on(Ve.A.SEEK_TARGET,ce,a),E.on(Ve.A.FRAGMENT_LOADING_ABANDONED,$,a),E.on(Ve.A.FRAGMENT_LOADING_COMPLETED,ee,a),E.on(Ve.A.QUOTA_EXCEEDED,ie,a),E.on(Ve.A.SET_FRAGMENTED_TEXT_AFTER_DISABLED,te,a),E.on(Ve.A.SET_NON_FRAGMENTED_TEXT,ne,a),E.on(Ve.A.SOURCE_BUFFER_ERROR,X,a),E.on(Ve.A.BYTES_APPENDED_END_FRAGMENT,J,a),a}H.__dashjs_factory_name="StreamProcessor";var ue=_e.A.getClassFactory(H);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Y(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Y(e)?e:String(e)}(i.key),i)}}e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},n&&z(e.prototype,n),l&&z(e,l),Object.defineProperty(e,"prototype",{writable:!1});var W=e,K=t(3047);function q(e,t){var n;if(e)return"string"==typeof e?Q(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function X(e){var R,t=this.context,o=(e=e||{}).requestModifier,I=e.lowLatencyThroughputModel,C=e.boxParser,s=(0,ye.A)(t).getInstance();function n(A){var e,t=new Date,b=A.request,n=new Headers;if(b.range&&n.append("Range","bytes="+b.range),A.headers)for(var i in A.headers){var r=A.headers[i];r&&n.append(i,r)}b.requestStartDate||(b.requestStartDate=t),o&&o.modifyRequestHeader&&o.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t)}},{url:A.url}),"function"==typeof window.AbortController&&(e=new AbortController,(A.abortController=e).signal.onabort=A.onabort);var a={method:A.method,headers:n,credentials:A.withCredentials?"include":void 0,signal:e?e.signal:void 0},T=s.get().streaming.abr.fetchThroughputCalculationMode,S=Date.now(),w=0;new Promise(function(e){if(T===Ue.A.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&I&&(w=I.getThroughputCapacityDelayMS(b,1e3*R.getCurrentBufferLevel(b.mediaType))))return setTimeout(e,w);e()}).then(function(){var E=Date.now();fetch(A.url,a).then(function(e){A.response||(A.response={}),A.response.status=e.status,A.response.statusText=e.statusText,A.response.responseURL=e.url,e.ok||A.onerror();var t,r="",n=function(e){var t,n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,t=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw t}}};if(Array.isArray(e)||(o=q(e)))return o&&(e=o),r=0,{s:a=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.headers.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value;r+=i+": "+e.headers.get(i)+"\r\n"}}catch(e){n.e(e)}finally{n.f()}if(A.response.responseHeaders=r,!e.body)return e.arrayBuffer().then(function(e){e={loaded:(A.response.response=e).byteLength,total:e.byteLength,stream:!1};A.progress(e),A.onload(),A.onend()});var a,o,s,l,u,c,h=parseInt(e.headers.get("Content-Length"),10),d=0,f=!1,p=new Uint8Array,m=0,g=(T===Ue.A.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&I?(a=E,o=0,s=(l=function(e){if(Array.isArray(e))return e}(l=e.body.tee())||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,a,o=[],s=!0,l=!1;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(o.push(n.value),2!==o.length);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return o}}(l)||q(l,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],l=l[1],u=s.getReader(),c=[],u.read().then(function e(t){var n,i=t.value,t=t.done;if(o=Date.now(),i&&i.length&&(n=o-a,i=i.length,c.push({chunkDownloadTimeRelativeMS:o-E,chunkDownloadDurationMS:n,chunkBytes:i,kbps:Math.round(8*i/(n/1e3)),bufferLevel:R.getCurrentBufferLevel(b.mediaType)})),!t)return a=Date.now(),u.read().then(e);i=o-E,n=c.reduce(function(e,t){return e+t.chunkBytes},0),I.addMeasurement(b,i,c,S,w,r),A.progress({loaded:n,total:n,lengthComputable:!0,time:I.getEstimatedDownloadDurationMS(b),stream:!0})}),A.reader=l.getReader()):A.reader=e.body.getReader(),[]),_=[],y=[],v=!0;L(A,function e(t){var n,i,r,a=t.value;t.done?(p&&(T!==Ue.A.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&(i=t=null,T===Ue.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(t=function(n,i){try{var e=n.filter(function(e,t){return t<n.length-1}),t=i.filter(function(e,t){return t<i.length-1}),r=[];if(1<e.length){for(var a,o,s=0,l=0,u=0;u<e.length;u++)e[u]&&t[u]&&(1<(a=t[u].ts-e[u].ts)?(r.push(8*t[u].bytes/a),l=0):(0===l&&(l=e[u].ts,s=0),1<(o=t[u].ts-l)?(s+=t[u].bytes,r.push(8*s/o),l=0):s+=t[u].bytes));if(0<r.length)return r.reduce(function(e,t){return e+t},0)/r.length}return null}catch(n){return null}}(_,y))&&(i=8*d/t):T===Ue.A.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(i=P(g,d)),A.progress({loaded:d,total:isNaN(h)?d:h,lengthComputable:!0,time:i,stream:!0})),A.response.response=p.buffer),A.onload(),A.onend()):(a&&0<a.length&&(t=a,p=0===(i=p).length?t:((r=new Uint8Array(i.length+t.length)).set(i),r.set(t,i.length),r),d+=a.length,g.push({ts:Date.now(),bytes:a.length}),T===Ue.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&v&&C.findLastTopIsoBoxCompleted(["moof"],p,m).found&&(v=!1,_.push({ts:performance.now(),bytes:a.length})),(t=C.findLastTopIsoBoxCompleted(["moov","mdat"],p,m)).found?(r=t.lastCompletedOffset+t.size,T!==Ue.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||v||(v=!0,y.push({ts:performance.now(),bytes:p.length})),p=r===p.length?(n=p,new Uint8Array):(n=new Uint8Array(p.subarray(0,r)),p.subarray(r)),A.progress({data:n.buffer,lengthComputable:!1,noTrace:!0}),m=0):(m=t.lastCompletedOffset,f||(A.progress({lengthComputable:!1,noTrace:!0}),f=!0))),L(A,e))})}).catch(function(e){A.onerror&&A.onerror(e)})})}function L(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function P(n,t){try{var i,r;return 1<(n=n.filter(function(e){return e.bytes>t/4/n.length})).length?(i=0,r=(n[n.length-1].ts-n[0].ts)/n.length,n.forEach(function(e,t){var t=n[t+1];t&&(t=t.ts-e.ts,i+=t<r?t:0)}),i):null}catch(n){return null}}return{load:function(e){o&&o.modifyRequest?(0,Ce.W)(e,o).then(function(){return n(e)}):n(e)},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:P,setup:function(e){R=e.dashMetrics}}}X.__dashjs_factory_name="FetchLoader";var J=_e.A.getClassFactory(X),Z=t(7474);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=$(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=$(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==$(e)?e:String(e)}(i.key),i)}}ee((n=ne).prototype,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==ge.A.BASE_URL&&this.segmentInfoType!==ge.A.SEGMENT_BASE&&!this.indexRange}}]),Object.defineProperty(n,"prototype",{writable:!1});var te=ne;function ne(){if(!(this instanceof ne))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=ie(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==ie(e)?e:String(e)}(i.key),i)}}l=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.period=null,this.index=-1,this.type=null},p&&re(l.prototype,p),_&&re(l,_),Object.defineProperty(l,"prototype",{writable:!1});var ae=l;function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=oe(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==oe(e)?e:String(e)}(i.key),i)}}e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null},Xe&&se(e.prototype,Xe),c&&se(e,c),Object.defineProperty(e,"prototype",{writable:!1});var n=e,le=(n.DEFAULT_ID="defaultId",n);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=ce(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==ce(e)?e:String(e)}(i.key),i)}}p=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},f&&De(p.prototype,f),r&&De(p,r),Object.defineProperty(p,"prototype",{writable:!1});var ke=p,Oe=t(9824);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Me(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Me(e)?e:String(e)}(i.key),i)}}_=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},m&&xe(_.prototype,m),g&&xe(_,g),Object.defineProperty(_,"prototype",{writable:!1});var Ne=_;function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Fe(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Fe(e)?e:String(e)}(i.key),i)}}l=function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=n||t||"",this.dvbPriority=i||1,this.dvbWeight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}},o&&Be(l.prototype,o),s&&Be(l,s),Object.defineProperty(l,"prototype",{writable:!1});var Xe=l,Je=(Xe.DEFAULT_DVB_PRIORITY=1,Xe.DEFAULT_DVB_WEIGHT=1,Xe);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Ze(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Ze(e)?e:String(e)}(i.key),i)}}c=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},oi&&$e(c.prototype,oi),u&&$e(c,u),Object.defineProperty(c,"prototype",{writable:!1});var et=c;function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=tt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=tt(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==tt(e)?e:String(e)}(i.key),i)}}e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},Er&&nt(e.prototype,Er),wr&&nt(e,wr),Object.defineProperty(e,"prototype",{writable:!1});var it=e;function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=rt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=rt(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==rt(e)?e:String(e)}(i.key),i)}}n=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0},ma&&at(n.prototype,ma),d&&at(n,d),Object.defineProperty(n,"prototype",{writable:!1});var ot=n;function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=st(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=st(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==st(e)?e:String(e)}(i.key),i)}}lt((f=ct).prototype,[{key:"init",value:function(e){return e&&(this.schemeIdUri=e.schemeIdUri||null,this.value=e.value||null,this.id=e.id||null,e[ge.A.DVB_URL]&&(this.dvbUrl=e[ge.A.DVB_URL]),e[ge.A.DVB_MIMETYPE]&&(this.dvbMimeType=e[ge.A.DVB_MIMETYPE]),e[ge.A.DVB_FONTFAMILY])&&(this.dvbFontFamily=e[ge.A.DVB_FONTFAMILY]),this}}]),Object.defineProperty(f,"prototype",{writable:!1});var i=ct,r=t(5633),ut=t.n(r);function ct(){if(!(this instanceof ct))throw new TypeError("Cannot call a class as a function");this.schemeIdUri=null,this.value=null,this.id=null}function ht(){return{areEqual:function(e,t){return ut()(e,t)}}}ht.__dashjs_factory_name="ObjectUtils";var dt=_e.A.getSingletonFactory(ht),ft=t(9025);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=pt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=pt(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==pt(e)?e:String(e)}(i.key),i)}}p=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=n||null,this.queryParams={}},oo&&mt(p.prototype,oo),ho&&mt(p,ho),Object.defineProperty(p,"prototype",{writable:!1});var gt=p;function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=_t(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=_t(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==_t(e)?e:String(e)}(i.key),i)}}m=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=n||null,this.ttl=i||NaN,this.queryParams={}},wo&&yt(m.prototype,wo),Do&&yt(m,Do),Object.defineProperty(m,"prototype",{writable:!1});var vt=m;function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function bt(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?At(Object(a),!0).forEach(function(e){var t=r,n=e,e=a[e],i=function(e){if("object"!=Et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Et(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(n);(n="symbol"==Et(i)?i:String(i))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):At(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function Tt(e,t){var n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return r=!(i=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw n}}};if(Array.isArray(e)||(o=St(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function St(e,t){var n;if(e)return"string"==typeof e?wt(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Rt(){var e,u,c,h,a=this.context,o=(0,Ae.A)(a).getInstance(),d=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function s(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var n=_(e.Representation_asArray[0]);if(n&&0<n.length&&0<=ft._.indexOf(n[0].schemeIdUri))return t===Ue.A.IMAGE}if(e.ContentComponent_asArray&&0<e.ContentComponent_asArray.length){if(1<e.ContentComponent_asArray.length)return t===Ue.A.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var i=t===Ue.A.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length){n=e.Representation_asArray[0].codecs;if(i.test(n))return!0}if(e.hasOwnProperty(ge.A.MIME_TYPE))return i.test(e.mimeType);if(e.Representation_asArray)for(var r,a=0;a<e.Representation_asArray.length;a++)if((r=e.Representation_asArray[a]).hasOwnProperty(ge.A.MIME_TYPE))return i.test(r.mimeType);return!1}function f(e){if(!e)throw new Error("adaptation is not defined");if(e.hasOwnProperty(ge.A.SEGMENT_TEMPLATE)||e.hasOwnProperty(ge.A.SEGMENT_TIMELINE)||e.hasOwnProperty(ge.A.SEGMENT_LIST)||e.hasOwnProperty(ge.A.SEGMENT_BASE))return!0;if(e.Representation_asArray&&0<e.Representation_asArray.length){e=e.Representation_asArray[0];if(e.hasOwnProperty(ge.A.SEGMENT_TEMPLATE)||e.hasOwnProperty(ge.A.SEGMENT_TIMELINE)||e.hasOwnProperty(ge.A.SEGMENT_LIST)||e.hasOwnProperty(ge.A.SEGMENT_BASE))return!0}return!1}function p(e){return s(e,Ue.A.TEXT)}function m(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function l(e,t){return e&&e.Period_asArray&&d(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function n(e){return e&&e.Period_asArray?e.Period_asArray:[]}function g(e){var t=!1;return t=e&&e.hasOwnProperty("type")?e.type===ge.A.DYNAMIC:t}function _(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function r(e,t,n){var i,r=[];if(e)for(i=0;i<e.length;i++){var a=new et;if(a.timescale=1,a.representation=t,!e[i].hasOwnProperty(Ue.A.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(ge.A.TIMESCALE)&&(a.timescale=e[i].timescale),e[i].hasOwnProperty(ge.A.VALUE)&&(a.value=e[i].value),r.push(a),a.period=n}return r}function y(i){var r=[],e=i.BaseURL_asArray||[i.baseUri],a=!1;return e.some(function(e){var t,n;if(e)return t=new Je,n=e.__text||e,o.isRelative(n)&&(a=!0,i.baseUri)&&(n=o.resolve(n,i.baseUri)),t.url=n,e.hasOwnProperty(ge.A.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(ge.A.DVB_PRIORITY)&&(t.dvbPriority=e[ge.A.DVB_PRIORITY]),e.hasOwnProperty(ge.A.DVB_WEIGHT)&&(t.dvbWeight=e[ge.A.DVB_WEIGHT]),e.hasOwnProperty(ge.A.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[ge.A.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(ge.A.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[ge.A.AVAILABILITY_TIME_COMPLETE]),r.push(t),a}),r}function v(e){var t=new ot;return t.serverUrl=e.__text,e.hasOwnProperty(ge.A.DEFAULT_SERVICE_LOCATION)&&(t.defaultServiceLocation=e[ge.A.DEFAULT_SERVICE_LOCATION],t.defaultServiceLocationArray=t.defaultServiceLocation.split(" ")),e.hasOwnProperty(ge.A.QUERY_BEFORE_START)&&(t.queryBeforeStart="true"===e[ge.A.QUERY_BEFORE_START].toLowerCase()),e.hasOwnProperty(ge.A.CLIENT_REQUIREMENT)&&(t.clientRequirement="false"!==e[ge.A.CLIENT_REQUIREMENT].toLowerCase()),t}return e={getIsTypeOf:s,getIsText:p,getIsFragmented:f,getProducerReferenceTimesForAdaptation:function(e){var n=e&&e.hasOwnProperty(ge.A.PRODUCERREFERENCETIME_ASARRAY)?e[ge.A.PRODUCERREFERENCETIME_ASARRAY]:[],i=((e&&e.hasOwnProperty(ge.A.REPRESENTATION_ASARRAY)?e[ge.A.REPRESENTATION_ASARRAY]:[]).forEach(function(e){var t;e.hasOwnProperty(ge.A.PRODUCERREFERENCETIME_ASARRAY)&&n.push.apply(n,function(e){if(Array.isArray(e))return wt(e)}(t=e[ge.A.PRODUCERREFERENCETIME_ASARRAY])||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||St(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),[]);return n.forEach(function(e){var t=new it;e.hasOwnProperty(ge.A.ID)&&(t[ge.A.ID]=e[ge.A.ID],e.hasOwnProperty(ge.A.WALL_CLOCK_TIME))&&(t[ge.A.WALL_CLOCK_TIME]=e[ge.A.WALL_CLOCK_TIME],e.hasOwnProperty(ge.A.PRESENTATION_TIME))&&(t[ge.A.PRESENTATION_TIME]=e[ge.A.PRESENTATION_TIME],e.hasOwnProperty(ge.A.INBAND)&&(t[ge.A.INBAND]="false"!==e[ge.A.INBAND]),e.hasOwnProperty(ge.A.TYPE)&&(t[ge.A.TYPE]=e[ge.A.TYPE]),i.push(t))}),i},getLanguageForAdaptation:function(e){var t="";return t=e&&e.hasOwnProperty(ge.A.LANG)?e.lang:t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(ge.A.VIEWPOINT_ASARRAY)&&e[ge.A.VIEWPOINT_ASARRAY].length?e[ge.A.VIEWPOINT_ASARRAY].map(function(e){return(new i).init(e)}):[]},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(ge.A.ROLE_ASARRAY)&&e[ge.A.ROLE_ASARRAY].length?e[ge.A.ROLE_ASARRAY].map(function(e){return(new i).init(e)}):[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(ge.A.ACCESSIBILITY_ASARRAY)&&e[ge.A.ACCESSIBILITY_ASARRAY].length?e[ge.A.ACCESSIBILITY_ASARRAY].map(function(e){return(new i).init(e)}):[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(ge.A.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[ge.A.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[ge.A.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new i).init(e)}):[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(ge.A.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[ge.A.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[ge.A.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(e){return(new i).init(e)}):[]},getAdaptationForIndex:function(e,t,n){t=l(t,n);return 0<t.length&&d(e)?t[e]:null},getIndexForAdaptation:function(e,t,n){if(e)for(var i=l(t,n),r=0;r<i.length;r++)if(dt(a).getInstance().areEqual(i[r],e))return r;return-1},getAdaptationForId:function(e,t,n){for(var i=l(t,n),r=0,a=i.length;r<a;r++)if(i[r].hasOwnProperty(ge.A.ID)&&i[r].id===e)return i[r];return null},getAdaptationsForType:function(e,t,n){for(var i=l(e,t),r=[],a=0,o=i.length;a<o;a++)s(i[a],n)&&r.push(m(i[a]));return r},getRealPeriods:n,getRealPeriodForIndex:function(e,t){t=n(t);return 0<t.length&&d(e)?t[e]:null},getCodec:function(e,t,n){var i=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&(t=d(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(i=t.mimeType+';codecs="'+t.codecs+'"',n)&&void 0!==t.width&&(i+=';width="'+t.width+'";height="'+t.height+'"'),i=i&&i.replace(/\sprofiles=[^;]*/g,"")},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(ge.A.CENC_DEFAULT_KID)?e[ge.A.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(ge.A.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:g,getId:function(e){return e&&e[ge.A.ID]||null},hasProfile:function(e,t){var n=!1;return n=e&&e.profiles&&0<e.profiles.length?-1!==e.profiles.indexOf(t):n},getDuration:function(e){return e&&e.hasOwnProperty(ge.A.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e&&e.hasOwnProperty(ge.A.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(ge.A.PUBLISH_TIME)?new Date(e[ge.A.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){e=m(e);return(e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}})},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&d(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,i,r=[],a=function(e){if(e&&e.period&&d(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&d(e.index))return m(t.AdaptationSet_asArray[e.index])}}(e);if(a&&a.Representation_asArray){e&&e.period&&d(e.period.index)&&(i=y(e.period.mpd.manifest))&&(n=i[0]);for(var o=0,s=a.Representation_asArray.length;o<s;++o){var l,u=a.Representation_asArray[o],c=new te;c.index=o,c.adaptation=e,u.hasOwnProperty(ge.A.ID)&&(c.id=u.id),u.hasOwnProperty(ge.A.CODECS)&&(c.codecs=u.codecs),u.hasOwnProperty(ge.A.MIME_TYPE)&&(c.mimeType=u[ge.A.MIME_TYPE]),u.hasOwnProperty(ge.A.CODEC_PRIVATE_DATA)&&(c.codecPrivateData=u.codecPrivateData),u.hasOwnProperty(ge.A.BANDWITH)&&(c.bandwidth=u.bandwidth),u.hasOwnProperty(ge.A.WIDTH)&&(c.width=u.width),u.hasOwnProperty(ge.A.HEIGHT)&&(c.height=u.height),u.hasOwnProperty(ge.A.SCAN_TYPE)&&(c.scanType=u.scanType),u.hasOwnProperty(ge.A.MAX_PLAYOUT_RATE)&&(c.maxPlayoutRate=u.maxPlayoutRate),u.hasOwnProperty(ge.A.SEGMENT_BASE)?(t=u.SegmentBase,c.segmentInfoType=ge.A.SEGMENT_BASE):u.hasOwnProperty(ge.A.SEGMENT_LIST)?(t=u.SegmentList).hasOwnProperty(ge.A.SEGMENT_TIMELINE)?c.segmentInfoType=ge.A.SEGMENT_TIMELINE:c.segmentInfoType=ge.A.SEGMENT_LIST:u.hasOwnProperty(ge.A.SEGMENT_TEMPLATE)?((t=u.SegmentTemplate).hasOwnProperty(ge.A.SEGMENT_TIMELINE)?c.segmentInfoType=ge.A.SEGMENT_TIMELINE:c.segmentInfoType=ge.A.SEGMENT_TEMPLATE,t.hasOwnProperty(ge.A.INITIALIZATION_MINUS)&&(c.initialization=t.initialization.split("$Bandwidth$").join(u.bandwidth).split("$RepresentationID$").join(u.id))):c.segmentInfoType=ge.A.BASE_URL,c.essentialProperties=_(u),t&&(t.hasOwnProperty(ge.A.INITIALIZATION)?((l=t.Initialization).hasOwnProperty(ge.A.SOURCE_URL)&&(c.initialization=l.sourceURL),l.hasOwnProperty(ge.A.RANGE)&&(c.range=l.range)):p(a)&&f(a)&&a.mimeType&&-1===a.mimeType.indexOf("application/mp4")&&(c.range=0),t.hasOwnProperty(ge.A.TIMESCALE)&&(c.timescale=t.timescale),t.hasOwnProperty(ge.A.DURATION)?c.segmentDuration=t.duration/c.timescale:u.hasOwnProperty(ge.A.SEGMENT_TEMPLATE)&&(t=u.SegmentTemplate).hasOwnProperty(ge.A.SEGMENT_TIMELINE)&&(c.segmentDuration=(l=t.SegmentTimeline,u=void 0,(l&&l.S_asArray?(u=l.S_asArray[0],l=l.S_asArray[1],u.hasOwnProperty("d")?u.d:l.t-u.t):NaN)/c.timescale)),t.hasOwnProperty(ge.A.MEDIA)&&(c.media=t.media),t.hasOwnProperty(ge.A.START_NUMBER)&&(c.startNumber=t.startNumber),t.hasOwnProperty(ge.A.INDEX_RANGE)&&(c.indexRange=t.indexRange),t.hasOwnProperty(ge.A.PRESENTATION_TIME_OFFSET)&&(c.presentationTimeOffset=t.presentationTimeOffset/c.timescale),t.hasOwnProperty(ge.A.AVAILABILITY_TIME_OFFSET)?c.availabilityTimeOffset=t.availabilityTimeOffset:n&&void 0!==n.availabilityTimeOffset&&(c.availabilityTimeOffset=n.availabilityTimeOffset),t.hasOwnProperty(ge.A.AVAILABILITY_TIME_COMPLETE)?c.availabilityTimeComplete="false"!==t.availabilityTimeComplete:n&&void 0!==n.availabilityTimeComplete&&(c.availabilityTimeComplete=n.availabilityTimeComplete)),c.MSETimeOffset=(u=c.presentationTimeOffset,c.adaptation.period.start-u),c.path=[e.period.index,e.index,o],r.push(c)}}return r},getAdaptationsForPeriod:function(e){var t,n,i,r=e&&d(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,a=[];if(r&&r.AdaptationSet_asArray)for(i=0;i<r.AdaptationSet_asArray.length;i++)n=r.AdaptationSet_asArray[i],t=new ae,n.hasOwnProperty(ge.A.ID)&&(t.id=n.id),t.index=i,t.period=e,s(n,Ue.A.MUXED)?t.type=Ue.A.MUXED:s(n,Ue.A.AUDIO)?t.type=Ue.A.AUDIO:s(n,Ue.A.VIDEO)?t.type=Ue.A.VIDEO:p(n)?t.type=Ue.A.TEXT:s(n,Ue.A.IMAGE)?t.type=Ue.A.IMAGE:u.warn("Unknown Adaptation stream type"),a.push(t);return a},getRegularPeriods:function(e){for(var t=!!e&&g(e.manifest),n=[],i=null,r=null,a=null,o=null,s=0,l=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;s<l;s++)(r=e.manifest.Period_asArray[s]).hasOwnProperty(ge.A.START)?(o=new le).start=r.start:null!==i&&i.hasOwnProperty(ge.A.DURATION)&&null!==a?(o=new le).start=parseFloat((a.start+a.duration).toFixed(5)):0!==s||t||((o=new le).start=0),null!==a&&isNaN(a.duration)&&(null!==o?a.duration=parseFloat((o.start-a.start).toFixed(5)):u.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==o&&(o.id=function(e,t){if(e)return t=le.DEFAULT_ID+"_"+t,e.hasOwnProperty(ge.A.ID)&&0<e.id.length&&"__proto__"!==e.id?e.id:t;throw new Error("Period cannot be null or undefined")}(r,s),o.index=s,o.mpd=e,r.hasOwnProperty(ge.A.DURATION)&&(o.duration=r.duration),a&&(a.nextPeriodId=o.id),n.push(o),i=r,a=o),o=r=null;return 0!==n.length&&null!==a&&isNaN(a.duration)&&(a.duration=parseFloat((function(e){var t,n;if(c&&c.hasOwnProperty("error"))return n=g(e.mpd.manifest),e.mpd.manifest.mediaPresentationDuration?t=e.mpd.manifest.mediaPresentationDuration:e.duration?t=e.duration:n?t=Number.POSITIVE_INFINITY:c.error(new ze.A(We.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),t;throw new Error(Ue.A.MISSING_CONFIG_ERROR)}(a)-a.start).toFixed(5))),n},getMpd:function(e){var t=new ke;return e&&((t.manifest=e).hasOwnProperty(ge.A.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(ge.A.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(ge.A.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(ge.A.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(ge.A.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(ge.A.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(ge.A.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(ge.A.PUBLISH_TIME))&&(t.publishTime=new Date(e.publishTime)),t},getEventsForPeriod:function(e){var t,n,i=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,i=i?i.Period_asArray:null,r=i&&e&&d(e.index)?i[e.index].EventStream_asArray:null,a=[];if(r)for(t=0;t<r.length;t++){var o=new et;if(o.period=e,o.timescale=1,!r[t].hasOwnProperty(Ue.A.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(o.schemeIdUri=r[t][Ue.A.SCHEME_ID_URI],r[t].hasOwnProperty(ge.A.TIMESCALE)&&(o.timescale=r[t][ge.A.TIMESCALE]),r[t].hasOwnProperty(ge.A.VALUE)&&(o.value=r[t][ge.A.VALUE]),r[t].hasOwnProperty(ge.A.PRESENTATION_TIME_OFFSET)&&(o.presentationTimeOffset=r[t][ge.A.PRESENTATION_TIME_OFFSET]),n=0;r[t].Event_asArray&&n<r[t].Event_asArray.length;n++){var s=r[t].Event_asArray[n],l=new Ne,u=(l.presentationTime=0,l.eventStream=o,s.hasOwnProperty(ge.A.PRESENTATION_TIME)&&(l.presentationTime=s.presentationTime),o.presentationTimeOffset?o.presentationTimeOffset/o.timescale:0);l.calculatedPresentationTime=l.presentationTime/o.timescale+e.start-u,s.hasOwnProperty(ge.A.DURATION)&&(l.duration=s.duration/o.timescale),s.hasOwnProperty(ge.A.ID)?l.id=s.id:l.id=null,s.Signal&&s.Signal.Binary?l.messageData=h.decodeArray(s.Signal.Binary.toString()):l.messageData=s.messageData||s.__cdata||s.__text,a.push(l)}}return a},getEssentialPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(ge.A.ESSENTIAL_PROPERTY_ASARRAY)){var n,i=Tt(e.EssentialProperty_asArray);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.hasOwnProperty(Ue.A.SCHEME_ID_URI)&&(t[r[Ue.A.SCHEME_ID_URI]]=bt({},r))}}catch(e){i.e(e)}finally{i.f()}}return t},getEssentialPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(ge.A.ESSENTIAL_PROPERTY_ASARRAY)&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return(new i).init(e)}):[]},getEssentialPropertiesForRepresentation:_,getEventStreamForAdaptationSet:function(e,t,n){var i;return r(i=e&&e.Period_asArray&&t&&t.period&&d(t.period.index)&&(e=e.Period_asArray[t.period.index])&&e.AdaptationSet_asArray&&d(t.index)&&(e=e.AdaptationSet_asArray[t.index])?e.InbandEventStream_asArray:i,null,n)},getEventStreamForRepresentation:function(e,t,n){var i;return r(i=e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&d(t.adaptation.period.index)&&(e=e.Period_asArray[t.adaptation.period.index])&&e.AdaptationSet_asArray&&d(t.adaptation.index)&&(e=e.AdaptationSet_asArray[t.adaptation.index])&&e.Representation_asArray&&d(t.index)&&(e=e.Representation_asArray[t.index])?e.InbandEventStream_asArray:i,t,n)},getUTCTimingSources:function(e){var t=g(e),n=!!e&&e.hasOwnProperty(ge.A.AVAILABILITY_START_TIME),e=e?e.UTCTiming_asArray:null,i=[];return(t||n)&&e&&e.forEach(function(e){var t=new Oe.A;e.hasOwnProperty(Ue.A.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(ge.A.VALUE))&&(t.value=e.value.toString(),i.push(t))}),i},getBaseURLsFromElement:y,getRepresentationSortFunction:function(){return function(e,t){return e.bandwidth-t.bandwidth}},getContentSteering:function(e){if(e&&e.hasOwnProperty(ge.A.CONTENT_STEERING_AS_ARRAY))return v(e[ge.A.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(e){return e&&e.hasOwnProperty(ge.A.LOCATION_AS_ARRAY)?e[ge.A.LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,e=e.hasOwnProperty(ge.A.SERVICE_LOCATION)?e[ge.A.SERVICE_LOCATION]:null;return new gt(t,e)}):[]},getPatchLocation:function(e){return e&&e.hasOwnProperty(ge.A.PATCH_LOCATION_AS_ARRAY)?e[ge.A.PATCH_LOCATION_AS_ARRAY].map(function(e){var t=e.__text||e,n=e.hasOwnProperty(ge.A.SERVICE_LOCATION)?e[ge.A.SERVICE_LOCATION]:null,e=e.hasOwnProperty(ge.A.TTL)?1e3*parseFloat(e[ge.A.TTL]):NaN;return new vt(t,n,e)}):[]},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(ge.A.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(ge.A.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(ge.A.SERVICE_DESCRIPTION)){var n,i=Tt(e.ServiceDescription_asArray);try{for(i.s();!(n=i.n()).done;){var r,a=n.value,o=null,s=null,l=null,u=null,c=null,h=null,d=null;for(r in a)a.hasOwnProperty(r)&&(r===ge.A.ID?o=a[r]:r===ge.A.SERVICE_DESCRIPTION_SCOPE?s=a[r].schemeIdUri:r===ge.A.SERVICE_DESCRIPTION_LATENCY?l={target:parseInt(a[r].target),max:parseInt(a[r].max),min:parseInt(a[r].min),referenceId:parseInt(a[r].referenceId)}:r===ge.A.SERVICE_DESCRIPTION_PLAYBACK_RATE?u={max:parseFloat(a[r].max),min:parseFloat(a[r].min)}:r===ge.A.SERVICE_DESCRIPTION_OPERATING_QUALITY?c={mediaType:a[r].mediaType,max:parseInt(a[r].max),min:parseInt(a[r].min),target:parseInt(a[r].target),type:a[r].type,maxQualityDifference:parseInt(a[r].maxQualityDifference)}:r===ge.A.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?h={mediaType:a[r].mediaType,max:parseInt(a[r].max),min:parseInt(a[r].min),target:parseInt(a[r].target)}:r===ge.A.CONTENT_STEERING&&(d=v(a[r])));t.push({id:o,schemeIdUri:s,latency:l,playbackRate:u,operatingQuality:c,operatingBandwidth:h,contentSteering:d})}}catch(e){i.e(e)}finally{i.f()}}return t},getSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(ge.A.SEGMENT_ALIGNMENT))&&"true"===e[ge.A.SEGMENT_ALIGNMENT]},getSubSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(ge.A.SUB_SEGMENT_ALIGNMENT))&&"true"===e[ge.A.SUB_SEGMENT_ALIGNMENT]},getSupplementalPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(ge.A.SUPPLEMENTAL_PROPERTY_ASARRAY)){var n,i=Tt(e.SupplementalProperty_asArray);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.hasOwnProperty(Ue.A.SCHEME_ID_URI)&&(t[r[Ue.A.SCHEME_ID_URI]]=bt({},r))}}catch(e){i.e(e)}finally{i.f()}}return t},getSupplementalPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(ge.A.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new i).init(e)}):[]},getSupplementalPropertiesForRepresentation:function(e){var t={};if(e&&e.hasOwnProperty(ge.A.SUPPLEMENTAL_PROPERTY_ASARRAY)){var n,i=Tt(e.SupplementalProperty_asArray);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.hasOwnProperty(Ue.A.SCHEME_ID_URI)&&(t[r[Ue.A.SCHEME_ID_URI]]=bt({},r))}}catch(e){i.e(e)}finally{i.f()}}return t},getSupplementalPropertiesAsArrayForRepresentation:function(e){return e&&e.hasOwnProperty(ge.A.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map(function(e){return(new i).init(e)}):[]},setConfig:function(e){e&&(e.errHandler&&(c=e.errHandler),e.BASE64)&&(h=e.BASE64)}},u=(0,He.A)(a).getInstance().getLogger(e),e}Rt.__dashjs_factory_name="DashManifestModel";var It=_e.A.getSingletonFactory(Rt),j=t(4456);function Ct(e,t){var n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return r=!(i=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw n}}};if(Array.isArray(e)||(o=function(e){var t;if(e)return"string"==typeof e?Lt(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Lt(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Pt(){var i,e,y,v,E,A,b,T,S,w,t=this.context,s=(0,Ge.A)(t).getInstance(),R=(0,ye.A)(t).getInstance();function n(){y={pr:1,nor:null,st:null,sf:null,sid:"".concat(j.A.generateUuid()),cid:null},S={},T={},w={},a()}function r(){a()}function a(){var e;A&&(e=A.getStreamController())&&"function"==typeof e.getActiveStream&&(e=e.getActiveStream())&&(b=e.getProcessors())}function l(e,t){var n,i={},r=Ct(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e[a]&&(i[a]=e[a])}}catch(e){r.e(e)}finally{r.f()}return i}function u(e){var t=R.get().streaming.cmcd.enabledKeys;return e.filter(function(e){return t.includes(e)})}function c(e){try{return e.type===ve.G.MPD_TYPE?((_=I()).ot="m",_):e.type===ve.G.MEDIA_SEGMENT_TYPE?(g=e.mediaType,w.hasOwnProperty(g)||(w[g]=!1),T.hasOwnProperty(g)||(T[g]=!1),S.hasOwnProperty(g)||(S[g]=!1),r=e,o=I(),s=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(r),l=function(e){try{return isNaN(e.duration)?NaN:Math.round(1e3*e.duration)}catch(e){return null}}(r),u=function(e){try{return 100*parseInt(v.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(r.mediaType),c=function(e){try{var t=y.pr,n=E.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:100*parseInt(n/t*10)}catch(e){return null}}(r.mediaType),h=C(r.mediaType),d=function(e){try{var t=v.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(r.mediaType),f=y.pr,p=function(e){if(b&&0!==b.length){var t,n=Ct(b);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.getType()===e)return i.probeNextRequest()}}catch(e){n.e(e)}finally{n.f()}}}(r.mediaType),r.mediaType===Ue.A.VIDEO&&(a="v"),r.mediaType===Ue.A.AUDIO&&(a="a"),r.mediaType===Ue.A.TEXT&&(a="application/mp4"===r.mediaInfo.mimeType?"tt":"c"),m=(m=R.get().streaming.cmcd.rtp)||function(e){try{var t,n,i,r=(r=A.getPlaybackRate())||1,a=e.quality,o=e.mediaType,s=e.mediaInfo,l=e.duration;return s?(0===(t=C(o))&&(t=500),n=s.bitrateList[a].bandwidth*l/1e3/(t/r/1e3),i=R.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(R.get().streaming.cmcd.rtpSafetyFactor)?R.get().streaming.cmcd.rtpSafetyFactor:5,100*(parseInt(n*i/100)+1)):NaN}catch(e){return NaN}}(r),isNaN(m)||(o.rtp=m),p&&(r.url!==p.url?o.nor=encodeURIComponent(j.A.getRelativeUrl(r.url,p.url)):p.range&&(o.nrr=p.range)),s&&(o.br=s),a&&(o.ot=a),isNaN(l)||(o.d=l),isNaN(u)||(o.mtp=u),isNaN(c)||(o.dl=c),isNaN(h)||(o.bl=h),isNaN(d)||(o.tb=d),isNaN(f)||1===f||(o.pr=f),S[r.mediaType]&&(o.bs=!0,S[r.mediaType]=!1),!T[r.mediaType]&&w[r.mediaType]||(o.su=!0,T[r.mediaType]=!1,w[r.mediaType]=!0),o):e.type===ve.G.INIT_SEGMENT_TYPE?((i=I()).ot="i",i.su=!0,i):e.type===ve.G.OTHER_TYPE||e.type===ve.G.XLINK_EXPANSION_TYPE?((n=I()).ot="o",n):e.type===ve.G.LICENSE?((t=I()).ot="k",t):null}catch(e){return null}var t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_}function I(){var e={},t=(R.get().streaming.cmcd.cid?R.get().streaming.cmcd:y).cid;return e.v=1,e.sid=(R.get().streaming.cmcd.sid?R.get().streaming.cmcd:y).sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(y.pr)||1===y.pr||null===y.pr||(e.pr=y.pr),y.st&&(e.st=y.st),y.sf&&(e.sf=y.sf),e}function C(e){try{var t=E.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function o(e){try{y.pr=e.playbackRate}catch(e){}}function h(e){try{var t=i.getIsDynamic(e.data)?"l":"v",n=e.protocol&&"MSS"===e.protocol?"s":"d";y.st="".concat(t),y.sf="".concat(n)}catch(e){}}function d(e){try{e.state&&e.mediaType&&e.state===Ye.A.BUFFER_EMPTY&&(S[e.mediaType]||(S[e.mediaType]=!0),T[e.mediaType]||(T[e.mediaType]=!0))}catch(e){}}function f(){for(var e in S)S.hasOwnProperty(e)&&(S[e]=!0);for(var t in T)T.hasOwnProperty(t)&&(T[t]=!0)}function p(i){try{var e,r;return i?(e=Object.keys(i).sort(function(e,t){return e.localeCompare(t)}),r=e.length,e.reduce(function(e,t,n){return"v"===t&&1===i[t]||("string"==typeof i[t]&&"ot"!==t&&"sf"!==t&&"st"!==t?e+="".concat(t,"=").concat(JSON.stringify(i[t])):e+="".concat(t,"=").concat(i[t]),n<r-1&&(e+=",")),e},"").replace(/=true/g,"").replace(/,\s*$/,"")):null}catch(i){return null}}return e={getQueryParameter:function(e){try{var t,n;return R.get().streaming.cmcd&&R.get().streaming.cmcd.enabled?(n=p(function(n){try{var t=R.get().streaming.cmcd.enabledKeys;return Object.keys(n).filter(function(e){return t.includes(e)}).reduce(function(e,t){return e[t]=n[t],e},{})}catch(t){return n}}(t=c(e))),s.trigger(Z.A.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}):null}catch(e){return null}},getHeaderParameters:function(e){try{var t,n,i,r,a,o;return R.get().streaming.cmcd&&R.get().streaming.cmcd.enabled?(n=l(t=c(e),u(["br","d","ot","tb"])),i=l(t,u(["bl","dl","mtp","nor","nrr","su"])),r=l(t,u(["bs","rtp"])),a=l(t,u(["cid","pr","sf","sid","st","v"])),o={"CMCD-Object":p(n),"CMCD-Request":p(i),"CMCD-Status":p(r),"CMCD-Session":p(a)},s.trigger(Z.A.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:o}),o):null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(v=e.abrController),e.dashMetrics&&(E=e.dashMetrics),e.playbackController)&&(A=e.playbackController)},reset:function(){s.off(Ye.A.PLAYBACK_RATE_CHANGED,o,this),s.off(Ye.A.MANIFEST_LOADED,h,this),s.off(Ye.A.BUFFER_LEVEL_STATE_CHANGED,d,e),s.off(Ye.A.PLAYBACK_SEEKED,f,e),n()},initialize:function(){s.on(Ye.A.PLAYBACK_RATE_CHANGED,o,e),s.on(Ye.A.MANIFEST_LOADED,h,e),s.on(Ye.A.BUFFER_LEVEL_STATE_CHANGED,d,e),s.on(Ye.A.PLAYBACK_SEEKED,f,e),s.on(Ye.A.PERIOD_SWITCH_COMPLETED,r,e)}},i=It(t).getInstance(),n(),e}Pt.__dashjs_factory_name="CmcdModel";var Dt=_e.A.getSingletonFactory(Pt);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(){Ot=function(e,t){return new i(e,void 0,t)};var r=RegExp.prototype,o=new WeakMap;function i(e,t,n){t=new RegExp(e,t);return o.set(t,n||o.get(e)),Mt(t,i.prototype)}function a(r,e){var a=o.get(e);return Object.keys(a).reduce(function(e,t){var n=a[t];if("number"==typeof n)e[t]=r[n];else{for(var i=0;void 0===r[n[i]]&&i+1<n.length;)i++;e[t]=r[n[i]]}return e},Object.create(null))}var e=i,t=RegExp;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mt(e,t),i.prototype.exec=function(e){var t,e=r.exec.call(this,e);return e&&(e.groups=a(e,this),t=e.indices)&&(t.groups=a(t,this)),e},i.prototype[Symbol.replace]=function(e,t){var n,i;return"string"==typeof t?(n=o.get(this),r[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){t=n[t];return"$"+(Array.isArray(t)?t.join("$"):t)}))):"function"==typeof t?(i=this,r[Symbol.replace].call(this,e,function(){var e=arguments;return"object"!=kt(e[e.length-1])&&(e=[].slice.call(e)).push(a(e,i)),t.apply(this,e)})):r[Symbol.replace].call(this,e,t)},Ot.apply(this,arguments)}function Mt(e,t){return(Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var xt="dynamic",Nt="stream",Ft=["mb","st","sf","v"],Bt={video:"v",audio:"a",text:"tt",stream:Nt},Ut=/^[-0-9]/;function jt(){var e,u,c,h,t=this.context,d=(0,Ge.A)(t).getInstance();function n(){c={},h={}}function f(t){t&&Object.keys(t).forEach(function(e){Ft.includes(e)||delete t[e]})}function p(e){return!e||"false"!==e.toLowerCase()&&(Ut.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}function m(e){return Bt[e]||"o"}function i(e,t,n){e="static"===e?c:h,t=e[t]||{},e=e[Nt]||{};return t[n]||e[n]}return e={setConfig:function(){},initialize:function(){},reset:function(){n()},parseResponseHeaders:function(e,t){for(var n=null,i=null,r=e.split("\r\n"),a=r.length-1;0<=a;a--){var o=r[a].match(Ot(/^([^:]*):\s*(.*)$/,{key:1,value:2}));if(o&&o.groups){var s=o.groups.key.toLowerCase(),l=o.groups.value;switch(s){case"cmsd-static":n=function(e){try{for(var t={},n=e.split(","),i=0;i<n.length;i++){var r=n[i].split("="),a=r[0],o=p(r[1]);t[a]=o}return t}catch(e){u.error("Failed to parse CMSD-Static response header value:",e)}}(l),d.trigger(Ve.A.CMSD_STATIC_HEADER,n);break;case"cmsd-dynamic":i=i||function(e){try{for(var t={},n=e.split(","),i=n[n.length-1].split(";"),r=1;r<i.length;r++){var a=i[r].split("="),o=a[0],s=p(a[1]);t[o]=s}return t}catch(e){return u.error("Failed to parse CMSD-Dynamic response header value:",e),[]}}(l)}}}e=Nt;return n&&n.ot?e=n.ot:t&&(e=m(t)),f(c[e]),f(h[e]),n&&(c[e]=Object.assign(c[e]||{},n)),i&&(h[e]=Object.assign(h[e]||{},i)),{static:n,dynamic:i}},getMaxBitrate:function(e){e=m(e);return i(xt,e,"mb")||-1},getEstimatedThroughput:function(e){e=m(e);return i(xt,e,"etp")||null},getResponseDelay:function(e){e=m(e);return i(xt,e,"rd")||null},getRoundTripTime:function(e){e=m(e);return i(xt,e,"rtt")||null}},u=(0,He.A)(t).getInstance().getLogger(e),n(),e}jt.__dashjs_factory_name="CmsdModel";var Gt=_e.A.getSingletonFactory(jt);function Vt(){var e,c,t=this.context,h={};function n(){c=(0,He.A)(t).getInstance().getLogger(e)}function d(e){var t,n=!0,i=e.reduce(function(e,t){return e+t.bufferLevelAtSegmentEnd},0)/e.length;return e.forEach(function(e){Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)<.95&&(n=!1),e.bufferLevelAtSegmentEnd/i<.8&&(n=!1),t?t>e.bitrate&&(n=!1):t=e.bitrate}),n}return e={setup:n,addMeasurement:function(t,e,n,i,r){t&&t.mediaType&&!h[t.mediaType]&&(h[t.mediaType]=[]);var a=t.mediaInfo.bitrateList.find(function(e){return e.id===t.representationId});h[t.mediaType].push({index:t.index,repId:t.representationId,mediaType:t.mediaType,requestTimeMS:i,adjustedAvailabilityStartTimeMS:t.availabilityStartTime.getTime(),segDurationMS:1e3*t.duration,chunksDurationMS:n.reduce(function(e,t){return e+t.chunkDownloadDurationMS},0),segmentBytes:n.reduce(function(e,t){return e+t.chunkBytes},0),bitrate:a&&a.bandwidth,bitrateList:t.mediaInfo.bitrateList,chunkMeasurements:n,fetchDownloadDurationMS:e,throughputCapacityDelayMS:r,getEstimatedBufferLevel:function(e){for(var t={},n=0,i=0,r=0,a=0,o=e.length,s=0;s<o;++s)n+=e[s].chunkDownloadTimeRelativeMS,i+=e[s].bufferLevel,r+=e[s].chunkDownloadTimeRelativeMS*e[s].bufferLevel,a+=e[s].chunkDownloadTimeRelativeMS*e[s].chunkDownloadTimeRelativeMS;return t.m=(r-n*i/o)/(a-n*n/o),t.b=i/o-t.m*n/o,function(e){return t.m*e+t.b}}(n.slice(1))}),10<h[t.mediaType].length&&h[t.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){e=h[e.mediaType]&&h[e.mediaType].slice(-3);return e&&!(e.length<3)&&d(e)?250<t/4?250:t/4:0},getEstimatedDownloadDurationMS:function(e){var t=h[e.mediaType].slice(-1).pop(),e=h[e.mediaType].slice(-3),n=t.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS,n=(t.bufferLevelAtSegmentStart=t.getEstimatedBufferLevel(n/2),t.bufferLevelAtSegmentEnd=t.getEstimatedBufferLevel(n),d(e)),e=n?.6:.8;if(t.isBufferStable&&1.05*t.segDurationMS<t.fetchDownloadDurationMS)return t.fetchDownloadDurationMS;if(!n||t.segDurationMS<t.fetchDownloadDurationMS)return.8*t.fetchDownloadDurationMS;if(t.adjustedAvailabilityStartTimeMS<=t.requestTimeMS+t.throughputCapacityDelayMS-t.segDurationMS)return.8*t.fetchDownloadDurationMS;for(var i,r=t.requestTimeMS+t.throughputCapacityDelayMS-t.adjustedAvailabilityStartTimeMS,a=0,o=0,s=0,l=0;l<t.chunkMeasurements.length;l++){var u=t.chunkMeasurements[l];if(r<o+u.chunkDownloadDurationMS)break;o+=u.chunkDownloadDurationMS,a+=u.chunkBytes,s++}return r<0&&c.warn("request time was before adjusted availibitly start time"),a&&o&&s>.2*t.chunkMeasurements.length?(n=t.segmentBytes/(a/o),t.fetchDownloadDurationMS<n?t.fetchDownloadDurationMS*e:n*e):(i=t.bitrate,t.bitrateList.some(function(e){if(e.bandwidth>t.bitrate)return i=e.bandwidth,!0}),i===t.bitrate?t.fetchDownloadDurationMS*e:e*t.segmentBytes*8*1e3/i)}},n(),e}Vt.__dashjs_factory_name="LowLatencyThroughputModel";var Ht=_e.A.getSingletonFactory(Vt),Yt=t(9085);function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){var i=function(e){if("object"!=zt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=zt(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t);return(t="symbol"==zt(i)?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e){var A,b,T,S,w,R,I,C,L,P=this.context,D=(e=e||{}).errHandler,k=e.dashMetrics,O=e.mediaPlayerModel,M=e.requestModifier,x=e.boxParser,t=e.errors,N=e.requestTimeout||0,F=(0,Ge.A)(P).getInstance(),B=(0,ye.A)(P).getInstance();function U(n,t){var a,o=n.request,s=[],i=!0,r=!0,l=new Date,u=l,c=0,h=null,d=null;if(!M||!k||!D)throw new Error("config object is not correct or missing");function f(e){o.requestStartDate=l,o.requestEndDate=new Date,o.firstByteDate=o.firstByteDate||l,o.fileLoaderType=d;var t=a.response?a.response.responseURL:null,n=a.response?a.response.status:null,i=a.response&&a.response.getAllResponseHeaders?a.response.getAllResponseHeaders():a.response?a.response.responseHeaders:null,r=i&&B.get().streaming.cmsd&&B.get().streaming.cmsd.enabled?R.parseResponseHeaders(i,o.mediaType):null;k.addHttpRequest(o,t,n,i,e?s:null,r)}function p(e){r=!1,f(e),o.type===ve.G.MPD_TYPE&&(k.addManifestUpdate(o),F.trigger(Ve.A.MANIFEST_LOADING_FINISHED,{request:o}))}function m(){if(h&&(clearTimeout(h),h=null),-1!==A.indexOf(a)&&(A.splice(A.indexOf(a),1),r))if(p(!1),0<t){try{B.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&o.type===ve.G.MEDIA_SEGMENT_TYPE&&O.getRetryAttemptsForType(ve.G.MEDIA_SEGMENT_TYPE)===t&&F.trigger(Ve.A.ATTEMPT_BACKGROUND_SYNC)}catch(e){}t--;var e={config:n};T.push(e),e.timeout=setTimeout(function(){-1!==T.indexOf(e)&&(T.splice(T.indexOf(e),1),U(n,t))},O.getRetryIntervalsForType(o.type))}else o.type!==ve.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(D.error(new ze.A(S[o.type],o.url+" is not available",{request:o,response:a.response})),n.error&&n.error(o,"error",a.response.statusText,a.response),n.complete)&&n.complete(o,a.response.statusText)}var e,g,d=o.hasOwnProperty("availabilityTimeComplete")&&!1===o.availabilityTimeComplete&&window.fetch&&"arraybuffer"===o.responseType&&o.type===ve.G.MEDIA_SEGMENT_TYPE?((e=J(P).create({requestModifier:M,lowLatencyThroughputModel:C,boxParser:x})).setup({dashMetrics:k}),Ue.A.FILE_LOADER_TYPES.FETCH):(e=(0,K.A)(P).create({requestModifier:M}),Ue.A.FILE_LOADER_TYPES.XHR),_=null,y=M.modifyRequestURL?M.modifyRequestURL(o.url):o.url,v=(B.get().streaming.cmcd&&B.get().streaming.cmcd.enabled&&((E=B.get().streaming.cmcd.mode)===Ue.A.CMCD_MODE_QUERY?(v=function(e){try{var t=[],n=w.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(o),y=j.A.addAditionalQueryParameterToUrl(y,v)):E===Ue.A.CMCD_MODE_HEADER&&(_=w.getHeaderParameters(o))),I.getXHRWithCredentialsForType(o.type)),E=(o.queryParams&&(E=Object.keys(o.queryParams).map(function(e){return{key:e,value:o.queryParams[e]}}),y=j.A.addAditionalQueryParameterToUrl(y,E)),o.url=y,a={url:y,method:ve.G.GET,withCredentials:v,request:o,onload:function(){200<=a.response.status&&a.response.status<=299&&(p(!0),n.success&&n.success(a.response.response,a.response.statusText,a.response.responseURL),n.complete)&&n.complete(o,a.response.statusText)},onend:m,onerror:m,progress:function(e){var t=new Date;i&&(i=!1,!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(o.firstByteDate=t),e.lengthComputable&&(o.bytesLoaded=e.loaded,o.bytesTotal=e.total),e.noTrace||(s.push({s:u,d:e.time||t.getTime()-u.getTime(),b:[e.loaded?e.loaded-c:0]}),u=t,c=e.loaded),h&&(clearTimeout(h),h=null),0<B.get().streaming.fragmentRequestProgressTimeout&&(h=setTimeout(function(){L.warn("Abort request "+a.url+" due to progress timeout"),a.response.onabort=null,a.loader.abort(a),m()},B.get().streaming.fragmentRequestProgressTimeout)),n.progress&&e&&n.progress(e)},onabort:function(){f(!0),h&&(clearTimeout(h),h=null),n.abort&&n.abort(o)},ontimeout:function(e){var t;e=e.lengthComputable?(t=e.loaded/e.total*100,"Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+t.toFixed(3)+"% Completed"):"Request timeout: non-computable download size",L.warn(e)},loader:e,timeout:N,headers:_},(new Date).getTime());isNaN(o.delayLoadingTime)||E>=o.delayLoadingTime?(A.push(a),e.load(a)):(g={httpRequest:a},b.push(g),g.delayTimeout=setTimeout(function(){if(-1!==b.indexOf(g)){b.splice(b.indexOf(g),1);try{l=new Date,u=l,A.push(g.httpRequest),e.load(g.httpRequest)}catch(e){g.httpRequest.onerror()}}},o.delayLoadingTime-E))}return e={load:function(e){e.request?U(e,O.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){T.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),T=[],b.forEach(function(e){return clearTimeout(e.delayTimeout)}),b=[],A.forEach(function(e){e.request.type!==ve.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))}),A=[]}},L=(0,He.A)(P).getInstance().getLogger(e),A=[],b=[],T=[],w=Dt(P).getInstance(),R=Gt(P).getInstance(),C=Ht(P).getInstance(),I=(0,Yt.A)(P).getInstance(),S=a(a(a(a(a(a(a({},ve.G.MPD_TYPE,t.DOWNLOAD_ERROR_ID_MANIFEST_CODE),ve.G.XLINK_EXPANSION_TYPE,t.DOWNLOAD_ERROR_ID_XLINK_CODE),ve.G.INIT_SEGMENT_TYPE,t.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),ve.G.MEDIA_SEGMENT_TYPE,t.DOWNLOAD_ERROR_ID_CONTENT_CODE),ve.G.INDEX_SEGMENT_TYPE,t.DOWNLOAD_ERROR_ID_CONTENT_CODE),ve.G.BITSTREAM_SWITCHING_SEGMENT_TYPE,t.DOWNLOAD_ERROR_ID_CONTENT_CODE),ve.G.OTHER_TYPE,t.DOWNLOAD_ERROR_ID_CONTENT_CODE),e}Wt.__dashjs_factory_name="HTTPLoader";var Kt=_e.A.getClassFactory(Wt);function qt(){var n;function e(){n={}}function t(){e()}return t(),{getLoader:function(e){for(var t in n)if(n.hasOwnProperty(t)&&e.startsWith(t))return n[t];return Kt},registerLoader:function(e,t){n[e]=t},unregisterLoader:function(e){n[e]&&delete n[e]},unregisterAllLoader:e,reset:t}}qt.__dashjs_factory_name="SchemeLoaderFactory";var Qt=_e.A.getSingletonFactory(qt);function Xt(n){n=n||{};var i,r=this.context,a=Qt(r).getInstance();return{load:function(e){var t;i||(t=a.getLoader(e&&e.request?e.request.url:null),i=t(r).create({errHandler:n.errHandler,mediaPlayerModel:n.mediaPlayerModel,requestModifier:n.requestModifier,dashMetrics:n.dashMetrics,boxParser:n.boxParser||null,constants:n.constants||null,dashConstants:n.dashConstants||null,urlUtils:n.urlUtils||null,requestTimeout:isNaN(n.requestTimeout)?0:n.requestTimeout,errors:n.errors})),i.load(e)},abort:function(){i&&i.abort()}}}Xt.__dashjs_factory_name="URLLoader";var Jt=_e.A.getClassFactory(Xt);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return($t=function(){return!!e})()}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e,t){return(tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var nn=function(e){function t(e){if(this instanceof t)return(e=function(e,t,n){t=en(t);var i=e;if(!(t=$t()?Reflect.construct(t,n||[],en(e).constructor):t.apply(e,n))||"object"!==Zt(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t,[e])).checkForExistenceOnly=!0,e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&tn(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(S.A);function rn(e){var t=this.context,r=(e=e||{}).eventBus,a=e.events,n=e.urlUtils,o=e.errors,s=e.streamId,l={checkForExistence:function(t){function e(e){r.trigger(a.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})}var n;t?(n=new nn(t.url),u.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})):e(!1)},load:function(n){function i(e,t){r.trigger(a.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:l})}n?u.load({request:n,progress:function(e){r.trigger(a.LOADING_PROGRESS,{request:n,stream:e.stream,streamId:s}),e.data&&r.trigger(a.LOADING_DATA_PROGRESS,{request:n,response:e.data||null,error:null,sender:l})},success:function(e){i(e)},error:function(e,t,n){i(void 0,new ze.A(o.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t))},abort:function(e){e&&r.trigger(a.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:l})}}):i(void 0,new ze.A(o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){u&&u.abort()},reset:function(){u&&(u.abort(),u=null)}},u=Jt(t).create({errHandler:e.errHandler,errors:o,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:n,constants:Ue.A,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout});return l}rn.__dashjs_factory_name="FragmentLoader";var an=_e.A.getClassFactory(rn);function on(){return{modifyResponseAsync:function(e){return Promise.resolve(e)}}}on.__dashjs_factory_name="SegmentResponseModifier";var sn=_e.A.getSingletonFactory(on);function ln(n){n=n||{};var e,u,i,r=this.context,c=(0,Ge.A)(r).getInstance(),a=n.errHandler,o=n.mediaPlayerModel,s=n.dashMetrics,l=(0,He.A)(r).getInstance(),h=sn(r).getInstance(),d=n.streamInfo;function f(){return d.id}function t(){for(var e in i)i[e].reset();i={}}function p(e){var t,n,i,r,a,o,s,l;e.sender&&(t=e.request,a=e.response,n=t.isInitializationRequest(),i=t.mediaInfo.streamInfo,e.error&&(t.mediaType===Ue.A.AUDIO||t.mediaType===Ue.A.VIDEO||t.mediaType===Ue.A.TEXT&&t.mediaInfo.isFragmented)&&c.trigger(Ve.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:e.request.serviceLocation}),a&&i?(a=a,o=t,s=d.id,e=e.type!==Ve.A.FRAGMENT_LOADING_PROGRESS,(l=new W).streamId=s,l.mediaInfo=o.mediaInfo,l.segmentType=o.type,l.start=o.startTime,l.duration=o.duration,l.end=l.start+l.duration,l.bytes=a,l.index=o.index,l.quality=o.quality,l.representationId=o.representationId,l.endFragment=e,r=l,h.modifyResponseAsync(r).then(function(e){c.trigger(n?Ve.A.INIT_FRAGMENT_LOADED:Ve.A.MEDIA_FRAGMENT_LOADED,{chunk:e,request:t},{streamId:i.id,mediaType:t.mediaType})}).catch(function(e){u.error(e),c.trigger(n?Ve.A.INIT_FRAGMENT_LOADED:Ve.A.MEDIA_FRAGMENT_LOADED,{chunk:r,request:t},{streamId:i.id,mediaType:t.mediaType})})):u.warn("No "+t.mediaType+" bytes to push or stream is inactive."))}return u=l.getLogger(e={getStreamId:f,getModel:function(e){var t=i[e];return t||(t=fe(r).create({streamInfo:d,type:e,dashMetrics:s,fragmentLoader:an(r).create({dashMetrics:s,mediaPlayerModel:o,errHandler:a,requestModifier:(0,Ce.A)(r).getInstance(),settings:n.settings,boxParser:n.boxParser,eventBus:c,events:Ve.A,errors:We,dashConstants:n.dashConstants,urlUtils:n.urlUtils,streamId:f()}),debug:l,eventBus:c,events:Ve.A}),i[e]=t),t},reset:function(){c.off(Ye.A.FRAGMENT_LOADING_COMPLETED,p,this),c.off(Ye.A.FRAGMENT_LOADING_PROGRESS,p,this),t()}}),t(),c.on(Ye.A.FRAGMENT_LOADING_COMPLETED,p,e),c.on(Ye.A.FRAGMENT_LOADING_PROGRESS,p,e),e}ln.__dashjs_factory_name="FragmentController";var un=_e.A.getClassFactory(ln);function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=cn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=cn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==cn(e)?e:String(e)}(i.key),i)}}g=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Vo&&hn(g.prototype,Vo),qo&&hn(g,qo),Object.defineProperty(g,"prototype",{writable:!1});var dn=g;function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=fn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=fn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==fn(e)?e:String(e)}(i.key),i)}}_=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},ds&&pn(_.prototype,ds),ys&&pn(_,ys),Object.defineProperty(_,"prototype",{writable:!1});var mn=_;function gn(e){var t,o,n=this.context,i=e.streamInfo;function r(e){o.setTrackByIndex(e)}function a(){o&&o.reset()}return t={getStreamId:function(){return i.id},initialize:function(){o.addTracks();var e=o.getTracks();e&&0<e.length&&r(0)},provide:function(e,t){if("function"==typeof t){var n=o.getCurrentTrack();if(!n||n.segmentDuration<=0||null==e)t(null);else{(a=o.getThumbnailRequestForTime(e))&&(n.segmentDuration=a.duration);var i=e%n.segmentDuration,i=Math.floor(i*n.tilesHor*n.tilesVert/n.segmentDuration),r=new dn;if(r.width=Math.floor(n.widthPerTile),r.height=Math.floor(n.heightPerTile),r.x=Math.floor(i%n.tilesHor)*n.widthPerTile,r.y=Math.floor(i/n.tilesHor)*n.heightPerTile,"readThumbnail"in n)return n.readThumbnail(e,function(e){r.url=e,t(r)});a?(r.url=a.url,n.segmentDuration=NaN):(i=Math.floor(e/n.segmentDuration),r.url=(e=i+(a=n).startNumber,i=(0,x.XX)(a.templateUrl,"Number",e),i=(0,x.XX)(i,"Time",(e-1)*a.segmentDuration*a.timescale),i=(0,x.XX)(i,"Bandwidth",a.bandwidth),(0,x.Dr)(i))),t(r)}}var a},setTrackByIndex:r,getCurrentTrackIndex:function(){return o.getCurrentTrackIndex()},getBitrateList:function(){var e=o.getTracks(),n=0;return e.map(function(e){var t=new mn;return t.mediaType=Ue.A.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:a},a(),o=(0,ft.A)(n).create({streamInfo:i,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),t}gn.__dashjs_factory_name="ThumbnailController";var _n=_e.A.getClassFactory(gn),yn=t(8098);function vn(e){e=e||{};var t,n=[],i=(0,Ge.A)(this.context).getInstance(),r=e.updateEventName,e=e.addBlacklistEventName;function a(e){-1===n.indexOf(e)&&(n.push(e),i.trigger(r,{entry:e}))}return t={add:a,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}},e&&i.on(e,function(e){a(e.entry)},t),t}vn.__dashjs_factory_name="BlackListController";var En=_e.A.getClassFactory(vn),An=[Ue.A.VIDEO,Ue.A.AUDIO,Ue.A.TEXT,Ue.A.MUXED,Ue.A.IMAGE];function bn(l){l=l||{};var t,u,c,o,a,s,h,d,f,p,m,g,_,r,y,v,n,E,A=this.context,b=(0,Ge.A)(A).getInstance(),e=(0,Ae.A)(A).getInstance(),T=l.manifestModel,F=l.mediaPlayerModel,B=l.dashMetrics,U=l.manifestUpdater,S=l.adapter,j=l.timelineConverter,G=l.capabilities,w=l.errHandler,R=l.abrController,V=l.playbackController,I=l.eventController,C=l.mediaController,L=l.protectionController,P=l.textController,D=l.videoModel,k=l.streamInfo,H=l.settings;function Y(a,e){return new Promise(function(n,t){$(),p=!0,ee();var i=D.getElement(),r=[];An.forEach(function(e){(e!==Ue.A.TEXT||a)&&(e!==Ue.A.VIDEO||!i||i&&/^VIDEO$/i.test(i.nodeName))&&r.push(z(e,a))}),Promise.all(r).then(function(){return i=e,new Promise(function(t){var n={},e=c.map(function(e){return e.createBufferSinks(i)});Promise.all(e).then(function(e){e.forEach(function(e){e&&(n[e.getType()]=e)}),t(n)}).catch(function(){t(n)})});var i}).then(function(e){var t;p=!1,0===c.length?(w.error(new ze.A(We.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t="No streams to play.",T.getValue())),u.fatal(t)):O(),a&&P.createTracks(k),n(e)}).catch(function(e){t(e)})})}function z(e,t){var n,i=S.getAllMediaInfoForType(k,e),r=[],a=null;if(!i||0===i.length)return u.info("No "+e+" data."),Promise.resolve();e===Ue.A.VIDEO&&(h=!0),e===Ue.A.AUDIO&&(d=!0);for(var o=0,s=i.length;o<s;o++)a=i[o],e===Ue.A.TEXT&&a.isEmbedded&&(P.addEmbeddedTrack(k,a),r.push(a)),W(a)&&C.addTrack(a);if(0<r.length&&(C.setInitialMediaSettingsForType(e,k),P.addMediaInfosToBuffer(k,e,r)),0===(i=i.filter(function(e){return!e.isEmbedded})).length)return Promise.resolve();if(e===Ue.A.IMAGE)return(g=_n(A).create({streamInfo:k,adapter:S,baseURLController:l.baseURLController,timelineConverter:l.timelineConverter,debug:v,eventBus:b,events:Ve.A,dashConstants:ge.A,dashMetrics:l.dashMetrics,segmentBaseController:l.segmentBaseController})).initialize(),Promise.resolve();b.trigger(Ve.A.STREAM_INITIALIZING,{streamInfo:k,mediaInfo:a}),C.setInitialMediaSettingsForType(e,k);t=function(e,t){var n=e&&0<e.length?e[0]:null,i=m.getModel(n?n.type:null),r=n?n.type:null,a=n?n.mimeType:null,n=n?n.isFragmented:null,o=ue(A).create({streamInfo:k,type:r,mimeType:a,timelineConverter:j,adapter:S,manifestModel:T,mediaPlayerModel:F,fragmentModel:i,dashMetrics:l.dashMetrics,baseURLController:l.baseURLController,segmentBaseController:l.segmentBaseController,abrController:R,playbackController:V,mediaController:C,textController:P,errHandler:w,settings:H,boxParser:y,segmentBlacklistController:_});o.initialize(t,h,n),c.push(o);for(var s=0;s<e.length;s++)o.addMediaInfo(e[s]);return r===Ue.A.TEXT&&P.addMediaInfosToBuffer(k,r,e,i),o}(i,t);return(n=C.getCurrentTrackFor(e,k.id))?(R.updateTopQualityIndex(n),t.selectMediaInfo(e===Ue.A.TEXT&&n.isEmbedded?i[0]:n)):Promise.resolve()}function W(e){var t,n=e?e.type:null;return n===Ue.A.MUXED?(u.fatal(t="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),w.error(new ze.A(We.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,t,T.getValue())),0):n===Ue.A.TEXT||n===Ue.A.IMAGE||!e.contentProtection||G.supportsEncryptedMedia()||(w.error(new ze.A(We.CAPABILITY_MEDIAKEYS_ERROR_CODE,We.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),0)}function K(e){for(var t=c?c.length:0,n=0;n<t;n++){var i=c[n].getFragmentModel();i.abortRequests(),i.resetInitialSettings(),c[n].reset(!1,e)}P&&P.deactivateStream(k),N(s=a=!(c=[])),Q(!1),b.trigger(Ve.A.STREAM_DEACTIVATED,{streamInfo:k})}function q(e){K(e),d=h=o=!1,n=p=!(f={}),E=[]}function Q(e){n=e}function X(){return k?k.start:NaN}function J(){return k?k.id:null}function Z(){return k}function $(){if(!D||!R)throw new Error(Ue.A.MISSING_CONFIG_ERROR)}function i(e){e.error&&(w.error(e.error),u.fatal(e.error.message))}function ee(){var e;I&&(e=S.getEventsFor(k))&&0<e.length&&I.addInlineEvents(e,k.id)}function O(){for(var e=c.length,t=f.audio||f.video?new ze.A(We.DATA_UPDATE_FAILED_ERROR_CODE,We.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(c[n].isUpdating()||p)return;if(L){L.clearMediaInfoArray();for(var i=0;i<e&&c[i];i++){var r=c[i].getType(),a=c[i].getMediaInfo();(r===Ue.A.AUDIO||r===Ue.A.VIDEO||r===Ue.A.TEXT&&a.isFragmented)&&(r=c[i].getMediaInfo())&&L.initializeForMedia(r)}L.handleKeySystemFromManifest()}t?w.error(t):o||(o=!0,D.waitForReadyState(Ue.A.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){b.trigger(Ve.A.STREAM_INITIALIZED,{streamInfo:k})}))}function te(){var e=x(),t=e.length;if(0!==t){for(var n=0;n<t;n++)if(!e[n].isBufferingCompleted()&&(e[n].getType()===Ue.A.AUDIO||e[n].getType()===Ue.A.VIDEO))return void u.debug("onBufferingCompleted - One streamProcessor has finished but",e[n].getType(),"one is not buffering completed");u.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),s=!0,b.trigger(Ve.A.STREAM_BUFFERING_COMPLETED,{streamInfo:k},{streamInfo:k})}else u.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ne(e){f[e.mediaType]=e.error,O()}function ie(e){I&&I.addInbandEvents(e.events,k.id)}function re(e){return e&&e.type?M(e.type):null}function M(t){return t?x().filter(function(e){return e.getType()===t})[0]:null}function x(){for(var e,t,n=[],i=0;i<c.length;i++)(e=(t=c[i]).getType())!==Ue.A.AUDIO&&e!==Ue.A.VIDEO&&e!==Ue.A.TEXT||n.push(t);return n}function ae(e,t){var n=k,t=t.getStreamInfo();return!(t&&n&&(t=S.getAdaptationForType(t.index,e,t),e=S.getAdaptationForType(n.index,e,n),t&&e?!oe(e)&&oe(t):t||e))}function oe(e){return e&&(e.ContentProtection||e.Representation_asArray&&0<e.Representation_asArray.length&&e.Representation_asArray[0].ContentProtection)}function se(e,t,n){var i,r,a,n=2<arguments.length&&void 0!==n?n:null;return!!(e&&e.hasOwnProperty("getStreamInfo")&&(e=e.getStreamInfo(),n=n?n.getStreamInfo():k,e)&&n)&&(e=S.getAdaptationForType(e.index,t,e),t=S.getAdaptationForType(n.index,t,n),e&&t?(n=e&&t&&e.mimeType===t.mimeType,i=t.Representation_asArray.map(function(e){return e.codecs}),r=(a=e.Representation_asArray.map(function(e){return e.codecs})).some(function(e){return-1<i.indexOf(e)}),a=a.some(function(t){return i.some(function(e){return G.codecRootCompatibleWithCodec(e,t)})}),r||a&&n):!e&&!t)}function N(e){r=e}function le(){return r}t={initialize:function(){b.on(Ve.A.BUFFERING_COMPLETED,te,t),b.on(Ve.A.DATA_UPDATE_COMPLETED,ne,t),b.on(Ve.A.INBAND_EVENTS,ie,t),L&&(b.on(Ve.A.KEY_ERROR,i,t),b.on(Ve.A.SERVER_CERTIFICATE_UPDATED,i,t),b.on(Ve.A.LICENSE_REQUEST_COMPLETE,i,t),b.on(Ve.A.KEY_SYSTEM_SELECTED,i,t),b.on(Ve.A.KEY_SESSION_CREATED,i,t),b.on(Ve.A.KEY_STATUSES_CHANGED,i,t)),P.initializeForStream(k),b.trigger(Ve.A.STREAM_UPDATED,{streamInfo:k})},getStreamId:function(){return k?k.id:null},activate:function(e,i){return new Promise(function(t,n){if(!a)return r?(a=!0,b.trigger(Ve.A.STREAM_ACTIVATED,{streamInfo:k}),void t(i)):void Y(e,i).then(function(e){a=!0,b.trigger(Ve.A.STREAM_ACTIVATED,{streamInfo:k}),t(e)}).catch(function(e){n(e)});t(i)})},deactivate:K,getIsActive:function(){return a},getDuration:function(){return k?k.duration:NaN},getStartTime:X,getId:J,getStreamInfo:Z,getHasAudioTrack:function(){return d},getHasVideoTrack:function(){return h},startPreloading:function(n,i){return new Promise(function(t,e){r?e():(u.info("[startPreloading] Preloading next stream with id ".concat(J())),N(!0),Y(n,i).then(function(){for(var e=0;e<c.length&&c[e];e++)c[e].setExplicitBufferingTime(X()),c[e].getScheduleController().startScheduleTimer();t()}).catch(function(){N(!1),e()}))})},initializeForTextWithMediaSource:function(n){return new Promise(function(e,t){z(Ue.A.TEXT,n).then(function(){return(e=M(Ue.A.TEXT))?e.createBufferSinks():Promise.resolve();var e}).then(function(){P.createTracks(k),e()}).catch(function(e){t(e)})})},getThumbnailController:function(){return g},getBitrateListFor:function(e){return $(),e===Ue.A.IMAGE?g?g.getBitrateList():[]:(e=function(e){for(var t=null,n=0;n<c.length;n++)if((t=c[n]).getType()===e)return t.getMediaInfo();return null}(e),R.getBitrateList(e))},updateData:function(u){return new Promise(function(e){p=!0,k=u,I&&ee();for(var n=[],t=0,i=c.length;t<i;t++){var r=c[t],a=r.getMediaInfo(),o=(n.push(r.updateStreamInfo(k)),S.getAllMediaInfoForType(k,r.getType()));if(o=o.filter(function(e){return!e.isEmbedded})){r.clearMediaInfoArray();for(var s=0;s<o.length;s++){var l=o[s];r.addMediaInfo(o[s]),S.areMediaInfosEqual(a,l)&&(R.updateTopQualityIndex(l),n.push(r.selectMediaInfo(l)))}}}Promise.all(n).then(function(){for(n=[];0<E.length;){var e=E.pop(),t=e.newMediaInfo,e=re(e.oldMediaInfo);if(!e)return;n.push(e.prepareTrackSwitch()),n.push(e.selectMediaInfo(t))}return Promise.all(n)}).then(function(){p=!1,O(),b.trigger(Ve.A.STREAM_UPDATED,{streamInfo:k}),e()})})},reset:function(e){m&&(m.reset(),m=null),R&&k&&R.clearDataForStream(k.id),_&&(_.reset(),_=null),q(e),k=null,b.off(Ve.A.DATA_UPDATE_COMPLETED,ne,t),b.off(Ve.A.BUFFERING_COMPLETED,te,t),b.off(Ve.A.INBAND_EVENTS,ie,t),L&&(b.off(Ve.A.KEY_ERROR,i,t),b.off(Ve.A.SERVER_CERTIFICATE_UPDATED,i,t),b.off(Ve.A.LICENSE_REQUEST_COMPLETE,i,t),b.off(Ve.A.KEY_SYSTEM_SELECTED,i,t),b.off(Ve.A.KEY_SESSION_CREATED,i,t),b.off(Ve.A.KEY_STATUSES_CHANGED,i,t))},getProcessors:x,setMediaSource:function(r){return new Promise(function(n,t){for(var e=[],i=0;i<c.length;)W(c[i].getMediaInfo())?(e.push(c[i].setMediaSource(r)),i++):(c[i].reset(),c.splice(i,1));Promise.all(e).then(function(){for(var e,t=0;t<c.length;t++)c[t].dischargePreBuffer();0===c.length&&(w.error(new ze.A(We.MANIFEST_ERROR_ID_NOSTREAMS_CODE,(e="No streams to play.")+"nostreams",T.getValue())),u.fatal(e)),n()}).catch(function(e){u.error(e),t(e)})})},isMediaCodecCompatible:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return se(e,Ue.A.VIDEO,t)&&se(e,Ue.A.AUDIO,t)},isProtectionCompatible:function(e){return!e||ae(Ue.A.VIDEO,e)&&ae(Ue.A.AUDIO,e)},getPreloaded:le,getIsEndedEventSignaled:function(){return n},setIsEndedEventSignaled:Q,getAdapter:function(){return S},getHasFinishedBuffering:function(){return s},setPreloaded:N,startScheduleControllers:function(){for(var e=c.length,t=0;t<e&&c[t];t++)c[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){var t,n,i,r;a&&k&&(s=!1,t=e.newMediaInfo,n=T.getValue(),S.setCurrentMediaInfo(k.id,t.type,t),i=re(t))&&(r=V.getTime(),u.info("Stream -  Process track changed at current time "+r),n.refreshManifestOnSwitchTrack?(E.push(e),U.getIsUpdating()||(u.debug("Stream -  Refreshing manifest for switch track"),U.refreshManifest())):i.selectMediaInfo(t).then(function(){t.type!==Ue.A.VIDEO&&t.type!==Ue.A.AUDIO||R.updateTopQualityIndex(t),i.prepareTrackSwitch()}))},prepareQualityChange:function(e){var t=M(e.mediaType);t&&t.prepareQualityChange(e)}};try{v=(0,He.A)(A).getInstance(),u=v.getLogger(t),q(),y=(0,yn.A)(A).getInstance(),_=En(A).create({updateEventName:Ve.A.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:Ve.A.SEGMENT_LOCATION_BLACKLIST_ADD}),m=un(A).create({streamInfo:k,mediaPlayerModel:F,dashMetrics:B,errHandler:w,settings:H,boxParser:y,dashConstants:ge.A,urlUtils:e})}catch(e){throw e}return t}bn.__dashjs_factory_name="Stream";var Tn=_e.A.getClassFactory(bn);function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Sn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Sn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Sn(e)?e:String(e)}(i.key),i)}}o=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||null,this.type=ve.G.CONTENT_STEERING_TYPE,this.responseType="json"},Rn&&wn(o.prototype,Rn),In&&wn(o,In),Object.defineProperty(o,"prototype",{writable:!1});var o,Rn,In,Cn=o;function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Ln(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Ln(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Ln(e)?e:String(e)}(i.key),i)}}s=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]},Dn&&Pn(s.prototype,Dn),kn&&Pn(s,kn),Object.defineProperty(s,"prototype",{writable:!1});var s,Dn,kn,On=s;function Mn(){var e,u,c,h,d,t,f,n,i,r,a,o,s,p,l,m=this.context,g=(0,Ae.A)(m).getInstance();function _(e){b(e,"baseUrl")}function y(e){b(e,"location")}function v(e){var t,n;e&&e.request&&e.request.serviceLocation&&e.request.requestStartDate&&e.request.requestEndDate&&!isNaN(e.request.bytesTotal)&&(t=e.request.serviceLocation,n=e.request.requestEndDate.getTime()-e.request.requestStartDate.getTime(),A(t,parseInt(8*e.request.bytesTotal/n*1e3)))}function E(e){e&&e.httpRequest&&e.httpRequest._serviceLocation&&!isNaN(e.throughput)&&A(e.httpRequest._serviceLocation,1e3*e.throughput)}function A(e,t){d[e]||(d[e]=[]),d[e].push(t),4<d[e].length&&d[e].shift()}function b(e,t){e&&e.request&&e.request.serviceLocation&&(e=e.request.serviceLocation,-1===h[t].all.indexOf(e)&&h[t].all.push(e),h[t].current=e)}function T(){var e=a.getValue();return l.getContentSteering(e)||s.getServiceDescriptionSettings().contentSteering}function S(){return new Promise(function(s){try{var t,e,n=T();n&&n.serverUrl?(t=(o=(i=n).serverUrl,c&&c.reloadUri&&(o=g.isRelative(c.reloadUri)?g.resolve(c.reloadUri,i.serverUrl):c.reloadUri),i=[],0<(l=h.baseUrl.all.concat(h.location.all)).length&&((l=l.map(function(e){var t=(t=e)&&d[t]&&0!==d[t].length?(t=d[t].reduce(function(e,t){return e+t})/d[t].length,parseInt(t)):-1;return{serviceLocation:e,throughput:t}})).sort(function(e,t){return t.throughput-e.throughput}),a=r="",l.forEach(function(e,t){0!==t&&(r="".concat(r,","),-1<e.throughput)&&(a="".concat(a,",")),r="".concat(r).concat(e.serviceLocation),-1<e.throughput&&(a="".concat(a).concat(e.throughput))}),i.push({key:"_DASH_pathway",value:'"'.concat(r,'"')}),i.push({key:"_DASH_throughput",value:a})),j.A.addAditionalQueryParameterToUrl(o,i)),e=new Cn(t),f.load({request:e,success:function(e){(e=e)&&e[ge.A.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(e[ge.A.CONTENT_STEERING_RESPONSE.VERSION])&&((c=new On).version=e[ge.A.CONTENT_STEERING_RESPONSE.VERSION],e[ge.A.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(e[ge.A.CONTENT_STEERING_RESPONSE.TTL])&&(c.ttl=e[ge.A.CONTENT_STEERING_RESPONSE.TTL]),e[ge.A.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(c.reloadUri=e[ge.A.CONTENT_STEERING_RESPONSE.RELOAD_URI]),e[ge.A.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(c.pathwayPriority=e[ge.A.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),e[ge.A.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(c.pathwayClones=e[ge.A.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],c.pathwayClones=c.pathwayClones.filter(function(e){return e[ge.A.CONTENT_STEERING_RESPONSE.BASE_ID]&&e[ge.A.CONTENT_STEERING_RESPONSE.ID]&&e[ge.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&e[ge.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ge.A.CONTENT_STEERING_RESPONSE.HOST]})),I()),p.trigger(Ye.A.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:c,url:t}),s()},error:function(e,t,n,i){var r=e,a=i;try{switch(u.warn("Error fetching data from content steering server",r),a.status){case 410:break;case 429:var o=a&&a.getResponseHeader?a.getResponseHeader("retry-after"):null;null!==o&&((c=c||{}).ttl=parseInt(o)),I();break;default:I()}}catch(r){u.error(r)}s(e)},complete:function(){h.baseUrl.all=w(h.baseUrl),h.location.all=w(h.location)}})):s()}catch(e){s(e)}var i,r,a,o,l})}function w(t){return t.all&&0!==t.all.length&&t.current?t.all.filter(function(e){return e===t.current}):[]}function R(r){try{var a=[];return r&&0!==r.length&&c&&c.pathwayClones&&0!==c.pathwayClones.length&&c.pathwayClones.forEach(function(t){var e,n=r.filter(function(e){return t[ge.A.CONTENT_STEERING_RESPONSE.BASE_ID]===e.serviceLocation}),i=null;(i=n&&0<n.length?n[0]:i)&&(n=new URL(i.url),e=t[ge.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ge.A.CONTENT_STEERING_RESPONSE.HOST],e=j.A.stringHasProtocol(e)?e:"".concat(n.protocol,"//").concat(e),e={synthesizedUrl:"".concat(e).concat(n.pathname),serviceLocation:t[ge.A.CONTENT_STEERING_RESPONSE.ID],queryParams:t[ge.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][ge.A.CONTENT_STEERING_RESPONSE.PARAMS],reference:i},a.push(e))}),a}catch(r){return u.error(r),[]}}function I(){c&&c.ttl&&!isNaN(c.ttl)&&(t&&clearTimeout(t),t=setTimeout(function(){S()},1e3*c.ttl))}function C(){t&&clearTimeout(t),t=null}function L(){d={},h={baseUrl:{current:c=null,all:[]},location:{current:null,all:[]}},C()}return e={reset:function(){L(),p.off(Ye.A.FRAGMENT_LOADING_STARTED,_,e),p.off(Ye.A.MANIFEST_LOADING_STARTED,y,e),p.off(Ye.A.MANIFEST_LOADING_FINISHED,v,e),p.off(Ye.A.THROUGHPUT_MEASUREMENT_STORED,E,e)},setConfig:function(e){e&&(e.adapter&&(l=e.adapter),e.errHandler&&(n=e.errHandler),e.dashMetrics&&(i=e.dashMetrics),e.mediaPlayerModel&&(r=e.mediaPlayerModel),e.requestModifier&&(o=e.requestModifier),e.manifestModel&&(a=e.manifestModel),e.serviceDescriptionController&&(s=e.serviceDescriptionController),e.eventBus)&&(p=e.eventBus)},loadSteeringData:S,getCurrentSteeringResponseData:function(){return c},shouldQueryBeforeStart:function(){var e=T();return!!e&&e.queryBeforeStart},getSteeringDataFromManifest:T,stopSteeringRequestTimer:C,getSynthesizedBaseUrlElements:function(e){try{return R(e).map(function(e){var t=new Je(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t.dvbPriority=e.reference.dvbPriority,t.dvbWeight=e.reference.dvbWeight,t.availabilityTimeOffset=e.reference.availabilityTimeOffset,t.availabilityTimeComplete=e.reference.availabilityTimeComplete,t})}catch(e){return u.error(e),[]}},getSynthesizedLocationElements:function(e){try{return R(e).map(function(e){var t=new gt(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t})}catch(e){return u.error(e),[]}},initialize:function(){f=Jt(m).create({errHandler:n,dashMetrics:i,mediaPlayerModel:r,requestModifier:o,errors:We}),p.on(Ye.A.FRAGMENT_LOADING_STARTED,_,e),p.on(Ye.A.MANIFEST_LOADING_STARTED,y,e),p.on(Ye.A.MANIFEST_LOADING_FINISHED,v,e),p.on(Ye.A.THROUGHPUT_MEASUREMENT_STORED,E,e)}},u=(0,He.A)(m).getInstance().getLogger(e),L(),e}Mn.__dashjs_factory_name="ContentSteeringController";var xn=_e.A.getSingletonFactory(Mn);function Nn(){var e=this.context,r=(0,ye.A)(e).getInstance(),t={select:function(e){var t,n,i;return e&&0!==e.length?(t=null,r.get().streaming.applyContentSteering&&(n=e,t=(i=a.getCurrentSteeringResponseData())&&i.pathwayPriority&&0<i.pathwayPriority.length?function(e,t){for(var n=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length&&void 0!==t?t:[],r=0,a=null;r<n.length&&!function(){var t=n[r],e=i.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===t});if(-1!==e&&!o.contains(i[e].serviceLocation))return a=i[e],1;r+=1}(););return a}(i.pathwayPriority,n):null),t||e[0]):null},setConfig:function(e){e.blacklistController&&(o=e.blacklistController),e.contentSteeringController&&(a=e.contentSteeringController)},reset:function(){o.reset()}},o=En(e).create({updateEventName:Ve.A.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:Ve.A.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),a=xn(e).getInstance();return t}Nn.__dashjs_factory_name="LocationSelector";var Fn=_e.A.getClassFactory(Nn);function Bn(){var e,r,a,t,o,s,l,u,c,h,d,n,f,i,p=this.context,m=(0,Ge.A)(p).getInstance(),g=(0,Ae.A)(p).getInstance();function _(){a=NaN,s=!(o=!(l=!1)),y()}function y(){null!==t&&(clearTimeout(t),t=null)}function v(e){y(),s||(isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e))||(r.debug("Refresh manifest in "+e+" milliseconds."),t=setTimeout(b,e))}function E(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=(l=!0,c.getValue()),n=t.url,i=null,r=d.getPatchLocation(t),r=h.select(r),a=null;r&&!e?(n=r.url,i=r.serviceLocation,a=r.queryParams):(e=d.getLocation(t),r=f.getSynthesizedLocationElements(e),e=e.concat(r),(r=h.select(e))&&(n=r.url,i=r.serviceLocation,a=r.queryParams)),g.isRelative(n)&&(n=g.resolve(n,t.url)),u.load(n,i,a)}function A(e){if(e){if(d.getIsPatch(e)){var t=e,n=(e=c.getValue(),d.isPatchValid(e,t)),i=n;if(n&&(n=d.getPublishTime(e),i=d.applyPatchToManifest(e,t),t=d.getPublishTime(e),i=n.getTime()!=t.getTime()),!i)return r.debug("Patch provided is invalid, performing full manifest refresh"),E(!0);e.loadedTime=new Date}}else(e=c.getValue()).loadedTime=new Date;if(c.getValue()&&c.getValue().type===ge.A.DYNAMIC&&e.type===ge.A.STATIC)return m.trigger(Ve.A.DYNAMIC_TO_STATIC),s=!(l=!1);c.setValue(e);n=new Date,t=(n.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(a=d.getManifestUpdatePeriod(e,t))&&(a=2147483.647),m.trigger(Ve.A.MANIFEST_UPDATED,{manifest:e}),r.info("Manifest has been refreshed at "+n+"["+n.getTime()/1e3+"] "),o||v()}function b(){o||(l?v(i.get().streaming.manifestUpdateRetryInterval):E())}function T(e){e.error?e.error.code===We.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&n.error(e.error):A(e.manifest)}function S(){o=!1,v()}function w(){(o=!i.get().streaming.scheduling.scheduleWhilePaused)&&y()}function R(){l=!1}return e={initialize:function(){_(),m.on(Ve.A.STREAMS_COMPOSED,R,this),m.on(Ye.A.PLAYBACK_STARTED,S,this),m.on(Ye.A.PLAYBACK_PAUSED,w,this),m.on(Ve.A.INTERNAL_MANIFEST_LOADED,T,this)},setManifest:function(e){A(e)},refreshManifest:E,getIsUpdating:function(){return l},setConfig:function(e){e&&(e.manifestModel&&(c=e.manifestModel),e.adapter&&(d=e.adapter),e.manifestLoader&&(u=e.manifestLoader),e.errHandler&&(n=e.errHandler),e.locationSelector&&(h=e.locationSelector),e.settings&&(i=e.settings),e.contentSteeringController)&&(f=e.contentSteeringController)},reset:function(){m.off(Ye.A.PLAYBACK_STARTED,S,this),m.off(Ye.A.PLAYBACK_PAUSED,w,this),m.off(Ve.A.STREAMS_COMPOSED,R,this),m.off(Ve.A.INTERNAL_MANIFEST_LOADED,T,this),_()}},r=(0,He.A)(p).getInstance().getLogger(e),h=Fn(p).create(),e}Bn.__dashjs_factory_name="ManifestUpdater";var Un=_e.A.getClassFactory(Bn);function jn(){var e,u,c,t,h,a,i,o,s,d,n,f,p,m,g,_,r=this.context,y=(0,Ge.A)(r).getInstance(),v=(0,Ae.A)(r).getInstance();function l(){o=[],p=n=d=null,f=NaN,t=c=!(s=[]),m=h.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function E(){!h.get().streaming.utcSynchronization.enabled||c||t||!p||!p.value||!p.schemeIdUri||isNaN(f)||isNaN(h.get().streaming.utcSynchronization.backgroundAttempts)||n&&(Date.now()-n)/1e3<30||(o=[],t=!0,function n(i){try{var r;i<=0?D():(r=Date.now(),a[p.schemeIdUri](p.value,function(e){var t=Date.now(),t=A(r,t,e);o.push(t),n(i-1)},function(){D()}))}catch(i){D()}}(isNaN(h.get().streaming.utcSynchronization.backgroundAttempts)?2:h.get().streaming.utcSynchronization.backgroundAttempts))}function A(e,t,n){return n-(t-(t-e)/2)}function b(e){var t,e=0<arguments.length&&void 0!==e?e:NaN,n=isNaN(e);n&&h.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?(t=null!==(t=i.getLatestMPDRequestHeaderValueByID("Date"))?new Date(t).getTime():Number.NaN,isNaN(t)?P(!0):P(!1,t-Date.now())):P(n,e)}function T(e){var t,n,i=Date.parse(e);return isNaN(i)&&(e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),n=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&(parseInt(e[6],10)||0),e[7]&&1e3*parseFloat(e[7])||0),e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),n+=("+"===e[8]?-1:1)*t*60*1e3),i=new Date(n).getTime()),i}function S(e){return Date.parse(e)}function w(e){return Date.parse(e)}function R(e,t,n){n()}function I(e,t,n){e=T(e);isNaN(e)?n():t(e)}function C(t,e,n,i,r){var a,o,s,l=!1,u=new XMLHttpRequest,c=r?ve.G.HEAD:ve.G.GET,h=e.match(/\S+/g);e=h.shift(),a=function(){l||(l=!0,h.length?C(t,h.join(" "),n,i,r):i())},o=function(){var e;200===u.status&&(e=r?u.getResponseHeader("Date"):u.response,e=t(e),isNaN(e)||(n(e),l=!0))},v.isRelative(e)&&(s=_.resolve())&&(e=v.resolve(e,s.url)),u.open(c,e),u.timeout=5e3,u.onload=o,u.onloadend=a,u.send()}function L(e,t,n){C(w,e,t,n,!0)}function P(e,t){if(!(isNaN(f)||isNaN(t)||e)){var n=t;try{var i,r=k(n),a=isNaN(m)?30:m,o=isNaN(h.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:h.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,s=isNaN(h.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:h.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,l=isNaN(h.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:h.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;r?(i=Math.min(a*o,s),u.debug("Increasing timeBetweenSyncAttempts to ".concat(i))):(i=Math.max(a/o,l),u.debug("Decreasing timeBetweenSyncAttempts to ".concat(i))),m=i}catch(n){}}e||isNaN(t)||(d=Date.now(),c=!1,r=isNaN(f),f=t,r&&E(),u.debug("Completed UTC sync. Setting client - server offset to ".concat(t))),e&&(p=null,c=!1,g.error(new ze.A(We.TIME_SYNC_FAILED_ERROR_CODE,We.TIME_SYNC_FAILED_ERROR_MESSAGE))),y.trigger(Ve.A.UPDATE_TIME_SYNC_OFFSET,{offset:t}),y.trigger(Ve.A.TIME_SYNCHRONIZATION_COMPLETED)}function D(){var e;o&&0!==o.length&&(k(e=o.reduce(function(e,t){return e+t},0)/o.length)?u.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(u.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),f=e,y.trigger(Ve.A.UPDATE_TIME_SYNC_OFFSET,{offset:f})),t=!1,n=Date.now())}function k(e){try{var t;return isNaN(f)?!0:(t=h.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(h.get().streaming.utcSynchronization.maximumAllowedDrift)?h.get().streaming.utcSynchronization.maximumAllowedDrift:100,f-t<=e&&e<=f+t)}catch(e){return!0}}return e={initialize:function(){l(),a={"urn:mpeg:dash:utc:http-head:2014":L,"urn:mpeg:dash:utc:http-xsdate:2014":C.bind(null,T),"urn:mpeg:dash:utc:http-iso:2014":C.bind(null,S),"urn:mpeg:dash:utc:direct:2014":I,"urn:mpeg:dash:utc:http-head:2012":L,"urn:mpeg:dash:utc:http-xsdate:2012":C.bind(null,T),"urn:mpeg:dash:utc:http-iso:2012":C.bind(null,S),"urn:mpeg:dash:utc:direct:2012":I,"urn:mpeg:dash:utc:http-ntp:2014":R,"urn:mpeg:dash:utc:ntp:2014":R,"urn:mpeg:dash:utc:sntp:2014":R}},attemptSync:function(e,t){s=e,c||(function(e){try{var t;if(e&&h.get().streaming.utcSynchronization.enabled)return t=isNaN(m)?30:m,!d||!t||isNaN(t)||(Date.now()-d)/1e3>=t}catch(e){return 1}}(t)?(c=!0,function e(t){var n,i,r=(0<arguments.length&&void 0!==t?t:null)||0;!s||0===s.length||r>=s.length||!(n=s[r])?b():a.hasOwnProperty(n.schemeIdUri)?(i=(new Date).getTime(),a[n.schemeIdUri](n.value,function(e){var t=(new Date).getTime(),t=A(i,t,e);p=n,b(t)},function(){e(r+1)})):e(r+1)}()):y.trigger(Ve.A.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(i=e.dashMetrics),e.baseURLController&&(_=e.baseURLController),e.errHandler&&(g=e.errHandler),e.settings)&&(h=e.settings)},reset:function(){l(),y.off(Ve.A.ATTEMPT_BACKGROUND_SYNC,E,e)}},u=(0,He.A)(r).getInstance().getLogger(e),y.on(Ve.A.ATTEMPT_BACKGROUND_SYNC,E,e),e}jn.__dashjs_factory_name="TimeSyncController";var l=_e.A.getSingletonFactory(jn),Gn=(l.HTTP_TIMEOUT_MS=5e3,_e.A.updateSingletonFactory(jn.__dashjs_factory_name,l),l);function Vn(){var n,i,r,e=this.context,a=(0,Ge.A)(e).getInstance(),t={attachMediaSource:function(e){var t=window.URL.createObjectURL(n);return e.setSource(t),"managedMediaSource"===r&&(e.setDisableRemotePlayback(!0),n.addEventListener("startstreaming",function(){a.trigger(Ye.A.MANAGED_MEDIA_SOURCE_START_STREAMING)}),n.addEventListener("endstreaming",function(){a.trigger(Ye.A.MANAGED_MEDIA_SOURCE_END_STREAMING)})),t},createMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return"ManagedMediaSource"in window?(n=new ManagedMediaSource,r="managedMediaSource",o.info("Created ManagedMediaSource")):t?(n=new MediaSource,r="mediaSource",o.info("Created MediaSource")):e&&(n=new WebKitMediaSource,o.info("Created WebkitMediaSource")),n},detachMediaSource:function(e){e.setSource(null)},setConfig:function(e){e&&e.settings&&(i=e.settings)},setDuration:function e(t){!n||"open"!==n.readyState||null===t&&isNaN(t)||n.duration!==t&&(t!==1/0||i.get().streaming.buffer.mediaSourceDurationInfinity||(t=Math.pow(2,32)),function(){for(var e=n.sourceBuffers,t=0;t<e.length;t++)if(e[t].updating)return 1}()?setTimeout(e.bind(null,t),50):(o.info("Set MediaSource duration:"+t),n.duration=t))},setSeekable:function(e,t){n&&"function"==typeof n.setLiveSeekableRange&&"function"==typeof n.clearLiveSeekableRange&&"open"===n.readyState&&0<=e&&e<t&&(n.clearLiveSeekableRange(),n.setLiveSeekableRange(e,t))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,n=0;n<t.length;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}o.info("call to mediaSource endOfStream"),e.endOfStream()}}},o=(0,He.A)(e).getInstance().getLogger(t);return t}Vn.__dashjs_factory_name="MediaSourceController";var Hn=_e.A.getSingletonFactory(Vn);function Yn(){var e,c,a,s,t,n,o,l,i,r,u,h="urn:mpeg:dash:event:2012",d=1,f="urn:mpeg:dash:event:callback:2015",p=1,m=300,g="discarded",_="updated",y="added",v=this.context,E=(0,Ge.A)(v).getInstance();function A(){if(!o||!l)throw new Error("setConfig function has to be called previously")}function b(){u=!1,a={},t=null,r=!(s={}),n=Date.now()/1e3}function T(){try{var e,t;r||(r=!0,t=(e=l.getTime())-n,t=0<n?Math.max(0,t):0,S(s,t,e),S(a,t,e),w(s),w(a),n=e,r=!1)}catch(e){r=!1,c.error(e)}}function S(s,l,u){try{C(s,function(e){if(void 0!==e){var t=isNaN(e.duration)?0:e.duration;if(e.calculatedPresentationTime<=u&&e.calculatedPresentationTime+l+t>=u)P(e,Ye.A.EVENT_MODE_ON_START);else if(L(u,t+l,e.calculatedPresentationTime)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(e){return c.error(e),0}}(e)){c.debug("Removing event ".concat(e.id," from period ").concat(e.eventStream.period.id," as it is expired or invalid"));var n=s,t=e;try{var i=t.eventStream.schemeIdUri,r=t.eventStream.period.id,a=t.eventStream.value,o=t.id;n[r][i]=n[r][i].filter(function(e){return a&&e.eventStream.value&&e.eventStream.value!==a||e.id!==o}),0===n[r][i].length&&delete n[r][i]}catch(n){c.error(n)}}}})}catch(s){c.error(s)}}function w(e){try{for(var t in e)e.hasOwnProperty(t)&&0===Object.keys(e[t]).length&&delete e[t]}catch(e){c.error(e)}}function R(e,t,n){var n=2<arguments.length&&void 0!==n&&n,i=e.eventStream.schemeIdUri,r=e.eventStream.value,a=e.id,o=g,s=(t[i]||(t[i]=[]),t[i].findIndex(function(e){return(!r||e.eventStream.value&&e.eventStream.value===r)&&e.id===a}));return-1===s?(t[i].push(e),e.triggeredReceivedEvent=!1,e.triggeredStartEvent=!1,o=y):n&&(n=t[i][s],e.triggeredReceivedEvent=n.triggeredReceivedEvent,e.triggeredStartEvent=n.triggeredStartEvent,t[i][s]=e,o=_),o}function I(e){try{var i=l.getTime();C(e,function(e){var t=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.duration)?e.eventStream.period.duration:NaN,n=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.start)?e.eventStream.period.start:NaN;isNaN(t)||isNaN(n)||(t=e.calculatedPresentationTime,Math.abs(t-i)<m&&P(e,Ye.A.EVENT_MODE_ON_START))})}catch(e){c.error(e)}}function C(e,t){try{if(e)for(var n=Object.keys(e),i=0;i<n.length;i++)for(var r=e[n[i]],a=Object.keys(r),o=0;o<a.length;o++)r[a[o]].forEach(function(e){void 0!==e&&t(e)})}catch(e){c.error(e)}}function L(e,t,n){try{return n<e-t}catch(e){return c.error(e),0}}function P(e,t){try{var n=l.getTime(),i=e.id;if(t===Ye.A.EVENT_MODE_ON_RECEIVE&&!e.triggeredReceivedEvent)return c.debug("Received event ".concat(i)),e.triggeredReceivedEvent=!0,E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:t});if(!e.triggeredStartEvent){if(e.eventStream.schemeIdUri===h&&e.eventStream.value==d){if(0!==e.duration||0!==e.presentationTimeDelta){c.debug("Starting manifest refresh event ".concat(i," at ").concat(n));try{A(),o.refreshManifest()}catch(e){c.error(e)}}}else if(e.eventStream.schemeIdUri===f&&e.eventStream.value==p){c.debug("Starting callback event ".concat(i," at ").concat(n));var r=e.messageData;try{(0,K.A)(v).create({}).load({method:"get",url:r,request:{responseType:"arraybuffer"}})}catch(r){c.error(r)}}else c.debug("Starting event ".concat(i," from period ").concat(e.eventStream.period.id," at ").concat(n)),E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:t});e.triggeredStartEvent=!0}}catch(e){c.error(e)}}return e={addInlineEvents:function(e,t){try{if(A(),a[t]||(a[t]={}),e)for(var n=0;n<e.length;n++){var i,r=e[n];L(l.getTime(),isNaN(r.duration)?0:r.duration,r.calculatedPresentationTime)||((i=R(r,a[t],!0))===y?(c.debug("Added inline event with id ".concat(r.id," from period ").concat(t)),P(r,Ye.A.EVENT_MODE_ON_RECEIVE)):i===_&&c.debug("Updated inline event with id ".concat(r.id," from period ").concat(t)))}}catch(e){throw e}},addInbandEvents:function(e,t){try{A(),s[t]||(s[t]={});for(var n=0;n<e.length;n++){var i,r,a=e[n];if(!L(l.getTime(),isNaN(a.duration)?0:a.duration,a.calculatedPresentationTime))if(R(a,s[t],!1)===y){if(a.eventStream.schemeIdUri===h){o=void 0;r=void 0;i=void 0;var o=a;try{o.eventStream.value==d&&(i=o.calculatedPresentationTime,r=4294967295==o.calculatedPresentationTime?NaN:o.calculatedPresentationTime+o.duration,E.trigger(Ye.A.MANIFEST_VALIDITY_CHANGED,{id:o.id,validUntil:i,newDuration:r,newManifestValidAfter:NaN},{mode:Ye.A.EVENT_MODE_ON_START}))}catch(o){c.error(o)}}c.debug("Added inband event with id ".concat(a.id," from period ").concat(t)),P(a,Ye.A.EVENT_MODE_ON_RECEIVE)}else c.debug("Inband event with scheme_id_uri ".concat(a.eventStream.schemeIdUri,", value ").concat(a.eventStream.value,", period id ").concat(t," and event id ").concat(a.id," was ignored because it has been added before."))}T()}catch(e){throw e}},getInbandEvents:function(){return s},getInlineEvents:function(){return a},start:function(){try{A(),c.debug("Start Event Controller");var e=i.get().streaming.eventControllerRefreshDelay;u||isNaN(e)||(u=!0,t=setInterval(T,e))}catch(e){throw e}},setConfig:function(e){try{e&&(e.manifestUpdater&&(o=e.manifestUpdater),e.playbackController&&(l=e.playbackController),e.settings)&&(i=e.settings)}catch(e){throw e}},reset:function(){try{if(null!==t&&u){clearInterval(t),t=null,u=!1;try{I(s),I(a)}catch(e){c.error(e)}}}catch(e){throw e}b()}},c=(0,He.A)(v).getInstance().getLogger(e),b(),e}Yn.__dashjs_factory_name="EventController";var zn=_e.A.getSingletonFactory(Yn),Wn={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function qn(){var n,l,F,B,u,i,c,h,d,s,r,f,p,U,j,G,V,m,H,g,_,y,v,E,Y,a,o,A,b,T,S,w,R,z,W,K,t,I,e,C,q,L,Q,P,X,D,k,J,O=this.context,M=(0,Ge.A)(O).getInstance();function Z(){if(!(i&&i.hasOwnProperty("load")&&_&&_.hasOwnProperty("initialize")&&_.hasOwnProperty("reset")&&_.hasOwnProperty("getClientTimeOffset")&&c&&g&&d&&R))throw new Error(Ue.A.MISSING_CONFIG_ERROR)}function $(){try{var n=h.getStreamsInfo();if(!v&&0===n.length)throw new Error("There are no periods in the MPD");v&&0<n.length&&d.updateManifestUpdateInfo({currentTime:R.getTime(),buffered:w.getBufferRange(),presentationStartTime:n[0].start,clientTimeOffset:_.getClientTimeOffset()}),0<y.length&&(0!==(s=n).length?y=y.filter(function(t){var e=0<s.filter(function(e){return e.id===t.getId()}).length||t.getId()===v.getId();return e||(l.debug("Removing stream ".concat(t.getId())),t.reset(!0)),e}):l.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."));for(var e=[],t=0,i=n.length;t<i;t++){var r=n[t];e.push((o=void 0,(o=Oe((a=r).id))?o.updateData(a):(o=Tn(O).create({manifestModel:c,mediaPlayerModel:W,dashMetrics:d,manifestUpdater:u,adapter:h,timelineConverter:_,capabilities:F,capabilitiesFilter:B,errHandler:g,baseURLController:p,segmentBaseController:U,textController:Y,abrController:G,playbackController:R,eventController:m,mediaController:V,protectionController:E,videoModel:w,streamInfo:a,settings:P}),y.push(o),o.initialize(),Promise.resolve()))),d.addManifestUpdateStreamInfo(r)}Promise.all(e).then(function(){return new Promise(function(e,t){v?e():function e(t,n,i){try{ce();var r,a,o,s=d.getCurrentDVRInfo().range;s.end<s.start?(D&&clearTimeout(D),r=Math.min(1e3*(-1*(s.end-s.start)+2),2147483647),l.debug("Waiting for ".concat(r," ms before playback can start")),M.trigger(Ve.A.AST_IN_FUTURE,{delay:r}),D=setTimeout(function(){e(t,n,i)},r)):(P.get().streaming.applyProducerReferenceTime&&z.calculateProducerReferenceTimeOffsets(t),a=t[0].manifestInfo,P.get().streaming.applyServiceDescription&&z.applyServiceDescription(a),h.getIsDynamic()&&(o=Re(t,a),R.computeAndSetLiveDelay(o,a)),(P.get().streaming.applyContentSteering&&f.shouldQueryBeforeStart()?f.loadSteeringData():Promise.resolve()).then(function(){var e=c.getValue();e&&p.update(e),te(),n()}).catch(function(e){l.error(e),te(),n()}))}catch(t){i(t)}}(n,e,t)})}).then(function(){M.trigger(Ve.A.STREAMS_COMPOSED),ye()}).catch(function(e){throw e})}catch(n){g.error(new ze.A(We.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n.message+" nostreamscomposed",c.getValue())),T=!0,Ne()}var a,o,s}function ee(){X=!0}function te(){h.getIsDynamic()?(n=((e=d.getCurrentDVRInfo())&&e.range?e.range.end:0)-R.getOriginalLiveDelay(),(e=e?e.range:null)&&(isNaN(k)&&-1===k.toString().indexOf("posix:")?(t=Te(!0),isNaN(t)||(l.info("Start time from URI parameters: ".concat(t)),n=Math.min(n,t))):(l.info("Start time provided by the app: ".concat(k)),t=Se(!0,k),isNaN(t)||(n=Math.min(n,t))),t=P.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0,n=Math.max(n,e.start+t))):(n=y[0].getStreamInfo().start,isNaN(k)?(e=Te(!1),isNaN(e)||(l.info("Start time from URI parameters: ".concat(e)),n=Math.max(n,e))):(l.info("Start time provided by the app: ".concat(k)),t=Se(!1,k),isNaN(t)||(n=Math.max(n,t))));var e=n,t=ue(e),n=null!==t?t:y[0];M.trigger(Ve.A.INITIAL_STREAM_SWITCH,{startTime:e}),ne(n,null,e),C=C||setInterval(function(){!A&&R.getTimeToStreamEnd()<=0&&!R.isSeeking()&&M.trigger(Ve.A.PLAYBACK_ENDED,{isLast:N().isLast})},200)}function ne(e,t,n){try{var i;A||!e||t===e&&e.getIsActive()||(A=!0,M.trigger(Ve.A.PERIOD_SWITCH_STARTED,{fromStreamInfo:t?t.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),i=!1,v=e,t&&(i=le(e,t),t.deactivate(i)),n=isNaN(n)?!i&&t?e.getStreamInfo().start:NaN:n,l.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(n,", current playback time is ").concat(R.getTime(),". Seamless period switch is set to ").concat(i)),L=L.filter(function(e){return e.getId()!==v.getId()}),R.initialize(N(),!!t),w.getElement()?x(n,i,!1):ie(n,i))}catch(e){A=!1}}function x(t,n,e){var i,r=2<arguments.length&&void 0!==e&&e;function a(){var e;S&&"open"===S.readyState&&(l.debug("MediaSource is open!"),window.URL.revokeObjectURL(i),S.removeEventListener("sourceopen",a),S.removeEventListener("webkitsourceopen",a),be(),e=d.getCurrentDVRInfo(),s.setSeekable(e.range.start,e.range.end),r?(isNaN(t)||R.seek(t,!0,!0),v.setMediaSource(S).then(function(){v.initializeForTextWithMediaSource(S)})):ie(t,n))}function o(){S.addEventListener("sourceopen",a,!1),S.addEventListener("webkitsourceopen",a,!1),i=s.attachMediaSource(w),l.debug("MediaSource attached to element.  Waiting on open...")}S?n?ie(t,n):(s.detachMediaSource(w),o()):(S=s.createMediaSource(),o())}function ie(n,e){v.activate(S,e?q:void 0,n).then(function(e){var t;e&&(0<(t=Object.keys(e)).length&&e[t[0]].getBuffer().changeType&&(Q=!0),q=e),isNaN(n)||(M.trigger(Ve.A.SEEK_TARGET,{time:n},{streamId:v.getId()}),R.seek(n,!1,!0),v.startScheduleControllers()),A=!1,M.trigger(Ve.A.PERIOD_SWITCH_COMPLETED,{toStreamInfo:N()})})}function re(e){var t,n,i,r,a=ue(e.seekTime);a&&a!==v?(ae(),i=a,r=(n=e)&&!isNaN(n.seekTime)?n.seekTime:NaN,a=v.getProcessors().map(function(e){return e.prepareOuterPeriodPlaybackSeeking(n)}),Promise.all(a).then(function(){ne(i,v,r)}).catch(function(e){g.error(e)})):(ae(),t=e,v.getProcessors().forEach(function(e){return e.prepareInnerPeriodPlaybackSeeking(t)}),Pe(qe.USER_REQUEST_STOP_REASON)),De(Ke.SEEK_START_REASON)}function ae(){oe()}function oe(){L&&0<L.length&&(L.forEach(function(e){e.deactivate(!0)}),L=[])}function se(e){var t;e.newMediaInfo.streamInfo.id===v.getId()&&(oe(),P.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&e.oldMediaInfo&&e.oldMediaInfo.codec!==e.newMediaInfo.codec?(t=R.getTime(),v.deactivate(!1),x(t,!1,!1)):v.prepareTrackChange(e))}function le(e,t){try{return P.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||X)&&(Q&&P.get().streaming.buffer.useChangeTypeForTrackSwitch||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function ue(e){if(!isNaN(e))for(var t=y.length,n=0;n<t;n++){var i=y[n];if(e<parseFloat((i.getStartTime()+i.getDuration()).toFixed(5)))return i}return null}function ce(){try{var e=h.getIsDynamic(),t=h.getStreamsInfo()[0].manifestInfo,n=R.getTime(),i=_.calcTimeShiftBufferWindow(y,e),r=Ee();void 0!==i.start&&void 0!==i.end&&(r&&0!==r.length?r.forEach(function(e){d.addDVRInfo(e.getType(),n,t,i)}):d.addDVRInfo(Ue.A.VIDEO,n,t,i))}catch(e){}}function he(e){var t,n;I&&o&&(t=W.getInitialBufferLevel(),n=[Ue.A.TEXT],isNaN(t)||t<=R.getBufferLevel(n)||h.getIsDynamic()&&t>R.getLiveDelay())&&(I=!1,De(Ke.INITIAL_PLAYOUT_START_REASON),R.play()),e&&e.mediaType&&d.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function de(e){e.streamInfo.id===v.getId()&&e.reason&&e.reason.forceReplace&&oe(),Oe(e.streamInfo.id).prepareQualityChange(e)}function fe(){var e,t;h.getIsDynamic()&&0!==R.getOriginalLiveDelay()&&v&&0<(e=h.getStreamsInfo()).length&&(t=Re(e,e=e[0].manifestInfo),R.computeAndSetLiveDelay(t,e))}function pe(){var e;Ce()&&(e=w.getPlaybackQuality())&&d.addDroppedFrames(e)}function me(){l.debug("[onPlaybackStarted]"),!I&&t&&De(Ke.RESUME_FROM_PAUSE_START_REASON),I=I&&!1,e&&(e=!1,P.get().streaming.applyContentSteering)&&!f.shouldQueryBeforeStart()&&f.loadSteeringData(),t=!1}function ge(e){l.debug("[onPlaybackPaused]"),e.ended||(t=!0,Pe(qe.USER_REQUEST_STOP_REASON))}function _e(e){l.debug("Stream with id ".concat(e.streamInfo.id," finished buffering"));e=e.streamInfo.isLast;S&&e?(l.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),s.signalEndOfStream(S)):ye()}function ye(){if(v&&v.getHasFinishedBuffering())for(var e=function(e){var t=0<arguments.length&&void 0!==e?e:null;try{var n,i=t||v||null;if(i)return n=i.getStreamInfo(),y.filter(function(e){e=e.getStreamInfo();return e.start>n.start&&n.id!==e.id})}catch(t){return[]}}(v),t=0;t<e.length;){var n=e[t],i=0===t?v:e[t-1];!n.getPreloaded()&&i.getHasFinishedBuffering()&&S&&function(e,t){t=1<arguments.length&&void 0!==t?t:null,S&&!e.getPreloaded()&&le(e,t)&&e.startPreloading(S,q).then(function(){L.push(e)})}(n,i),t+=1}}function ve(){C&&(clearInterval(C),C=null)}function Ee(){return v?v.getProcessors():[]}function Ae(e){var t;v&&!v.getIsEndedEventSignaled()&&(v.setIsEndedEventSignaled(!0),(t=function(e){e=(0<arguments.length&&void 0!==e?e:null)||v||null;if(!e)return null;for(var t=e.getStreamInfo(),n=t.start,i=0,r=-1,a=NaN;i<y.length;){var o=y[i].getStreamInfo(),s=o.start-n;0<s&&(isNaN(a)||s<a)&&t.id!==o.id&&(a=s,r=i),i+=1}return 0<=r?y[r]:null}())?(l.debug("StreamController onEnded, found next stream with id ".concat(t.getStreamInfo().id,". Switching from ").concat(v.getStreamInfo().id," to ").concat(t.getStreamInfo().id)),ne(t,v,NaN)):(l.debug("StreamController no next stream found"),v.setIsEndedEventSignaled(!1)),Pe(t?qe.END_OF_PERIOD_STOP_REASON:qe.END_OF_CONTENT_STOP_REASON)),e&&e.isLast&&(ve(),f.stopSteeringRequestTimer())}function be(e){e=e||N().manifestInfo.duration;s.setDuration(e)}function Te(e){var t,n=j.getURIFragmentData();return n&&n.t?(t=y[0].getStreamInfo().start,n.t=n.t.split(",")[0],we(e,n.t,t)):NaN}function Se(e,t){var n=0;return we(e,t,n=e?n:y[0].getStreamInfo().start)}function we(e,t,n){var i=h.getRegularPeriods()[0],t=t.toString(),r=-1!==t.indexOf("posix:")?"now"===t.substring(6)?Date.now()/1e3:parseFloat(t.substring(6)):NaN;return e&&!isNaN(r)?_.calcPresentationTimeFromWallTime(new Date(1e3*r),i):parseFloat(t)+n}function Re(e,t){try{var n,i,r=NaN;return t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration)?t.maxFragmentDuration:(e&&1===e.length&&(n=e[0],i=[Ue.A.VIDEO,Ue.A.AUDIO,Ue.A.TEXT].reduce(function(e,t){t=h.getMediaInfoForType(n,t);return t&&!1!==t.isFragmented&&e.push(t),e},[]).reduce(function(t,e){e=h.getVoRepresentations(e);return e&&0<e.length&&e.forEach(function(e){e&&t.push(e)}),t},[]).reduce(function(e,t){t=h.convertRepresentationToRepresentationInfo(t);return t&&t.fragmentDuration&&!isNaN(t.fragmentDuration)&&e.push(t.fragmentDuration),e},[]),r=Math.max.apply(Math,function(e){if(Array.isArray(e))return Kn(e)}(a=i)||function(){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}()||function(e){var t;if(e)return"string"==typeof e?Kn(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Kn(e,void 0):void 0}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),isFinite(r)?r:NaN)}catch(e){return NaN}var a}function Ie(e){var t,n;e.error?(T=!0,Ne()):(l.info("Manifest updated... updating data system wide."),t=e.manifest,h.updatePeriods(t),e=h.getUTCTimingSources(),!h.getIsDynamic()||e&&0!==e.length||M.trigger(Ye.A.CONFORMANCE_VIOLATION,{level:Wn.LEVELS.WARNING,event:Wn.EVENTS.NO_UTC_TIMING_ELEMENT}),n=h.getIsDynamic()?e.concat(K.getUTCTimingSources()):e,B.filterUnsupportedFeatures(t).then(function(){p.initialize(t),r.attemptSync(n,h.getIsDynamic())}))}function Ce(){return!!v&&v.getHasVideoTrack()}function Le(){return!!v&&v.getHasAudioTrack()}function Pe(t,n){n=n||new Date,Ee().forEach(function(e){e.finalisePlayList(n,t)}),d.addPlayList()}function De(e){d.createPlaylistMetrics(1e3*R.getTime(),e)}function ke(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE",J.counts.mediaErrorDecode+=1;break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}"MEDIA_ERR_DECODE"===t&&P.get().errors.recoverAttempts.mediaErrorDecode>=J.counts.mediaErrorDecode?(l.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource"),n=R.getTime(),v.deactivate(!1),l.warn("MediaSource has been resetted. Resuming playback from time ".concat(n)),x(n,!1,!1)):(b=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),l.fatal("Video Element Error: "+t),e.error&&l.fatal(e.error),g.error(new ze.A(e.error.code,t)),Ne())}var n}function N(){return v?v.getStreamInfo():null}function Oe(e){for(var t=0,n=y.length;t<n;t++)if(y[t].getId()===e)return y[t];return null}function Me(e){isNaN(e.newDuration)||be(e.newDuration)}function xe(){k=NaN,Q=X=!(o=!(t=!(e=I=!(T=b=A=!(y=[]))))),L=[],D=C=v=E=null,J={counts:{mediaErrorDecode:0}}}function Ne(){Z(),r.reset(),Pe(b||T?qe.FAILURE_STOP_REASON:qe.USER_REQUEST_STOP_REASON);for(var e=0,t=y?y.length:0;e<t;e++)y[e].reset(b);M.off(Ye.A.PLAYBACK_TIME_UPDATED,pe,n),M.off(Ye.A.PLAYBACK_SEEKING,re,n),M.off(Ye.A.PLAYBACK_ERROR,ke,n),M.off(Ye.A.PLAYBACK_STARTED,me,n),M.off(Ye.A.PLAYBACK_PAUSED,ge,n),M.off(Ye.A.PLAYBACK_ENDED,Ae,n),M.off(Ye.A.METRIC_ADDED,Fe,n),M.off(Ye.A.MANIFEST_VALIDITY_CHANGED,Me,n),M.off(Ye.A.BUFFER_LEVEL_UPDATED,he,n),M.off(Ye.A.QUALITY_CHANGE_REQUESTED,de,n),Ve.A.KEY_SESSION_UPDATED&&M.off(Ve.A.KEY_SESSION_UPDATED,ee,n),M.off(Ve.A.MANIFEST_UPDATED,Ie,n),M.off(Ve.A.STREAM_BUFFERING_COMPLETED,_e,n),M.off(Ve.A.TIME_SYNCHRONIZATION_COMPLETED,$,n),M.off(Ve.A.CURRENT_TRACK_CHANGED,se,n),M.off(Ve.A.SETTING_UPDATED_LIVE_DELAY,fe,n),M.off(Ve.A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,fe,n),p.reset(),u.reset(),m.reset(),d.clearAllCurrentMetrics(),c.setValue(null),i.reset(),_.reset(),H.reset(),S&&(s.detachMediaSource(w),S=null),w=null,E&&(a=E=null,c.getValue())&&M.trigger(Ve.A.PROTECTION_DESTROYED,{data:c.getValue().url}),ve(),M.trigger(Ve.A.STREAM_TEARDOWN_COMPLETE),xe()}function Fe(e){var t;e.metric===je.A.DVR_INFO&&(t=Le()?Ue.A.AUDIO:Ue.A.VIDEO,e.mediaType===t)&&s.setSeekable(e.value.range.start,e.value.range.end)}function Be(){return y}return n={initialize:function(e,t){Z(),o=e,a=t,_.initialize(),(u=Un(O).create()).setConfig({manifestModel:c,adapter:h,manifestLoader:i,errHandler:g,settings:P,contentSteeringController:f}),u.initialize(),(m=zn(O).getInstance()).setConfig({manifestUpdater:u,playbackController:R,settings:P}),m.start(),r.setConfig({dashMetrics:d,baseURLController:p,errHandler:g,settings:P}),r.initialize(),s.setConfig({settings:P}),E&&(M.trigger(Ve.A.PROTECTION_CREATED,{controller:E}),E.setMediaElement(w.getElement()),a)&&E.setProtectionData(a),M.on(Ye.A.PLAYBACK_TIME_UPDATED,pe,n),M.on(Ye.A.PLAYBACK_SEEKING,re,n),M.on(Ye.A.PLAYBACK_ERROR,ke,n),M.on(Ye.A.PLAYBACK_STARTED,me,n),M.on(Ye.A.PLAYBACK_PAUSED,ge,n),M.on(Ye.A.PLAYBACK_ENDED,Ae,n),M.on(Ye.A.METRIC_ADDED,Fe,n),M.on(Ye.A.MANIFEST_VALIDITY_CHANGED,Me,n),M.on(Ye.A.BUFFER_LEVEL_UPDATED,he,n),M.on(Ye.A.QUALITY_CHANGE_REQUESTED,de,n),Ve.A.KEY_SESSION_UPDATED&&M.on(Ve.A.KEY_SESSION_UPDATED,ee,n),M.on(Ve.A.MANIFEST_UPDATED,Ie,n),M.on(Ve.A.STREAM_BUFFERING_COMPLETED,_e,n),M.on(Ve.A.TIME_SYNCHRONIZATION_COMPLETED,$,n),M.on(Ve.A.CURRENT_TRACK_CHANGED,se,n),M.on(Ve.A.SETTING_UPDATED_LIVE_DELAY,fe,n),M.on(Ve.A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,fe,n)},getActiveStreamInfo:N,addDVRMetric:ce,hasVideoTrack:Ce,hasAudioTrack:Le,getStreamById:Oe,getStreamForTime:ue,getTimeRelativeToStreamId:function(e,t){for(var n,i,r=null,a=0,o=0;o<y.length;o++){if(n=(r=y[o]).getStartTime(),i=r.getDuration(),Number.isFinite(n)&&(a=n),r.getId()===t)return e-a;Number.isFinite(i)&&(a+=i)}return null},load:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;Z(),k=t,i.load(e)},loadWithManifest:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!u||!u.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously");k=t,u.setManifest(e)},getActiveStreamProcessors:Ee,setConfig:function(e){e&&(e.capabilities&&(F=e.capabilities),e.capabilitiesFilter&&(B=e.capabilitiesFilter),e.manifestLoader&&(i=e.manifestLoader),e.manifestModel&&(c=e.manifestModel),e.mediaPlayerModel&&(W=e.mediaPlayerModel),e.customParametersModel&&(K=e.customParametersModel),e.protectionController&&(E=e.protectionController),e.adapter&&(h=e.adapter),e.dashMetrics&&(d=e.dashMetrics),e.errHandler&&(g=e.errHandler),e.timelineConverter&&(_=e.timelineConverter),e.videoModel&&(w=e.videoModel),e.playbackController&&(R=e.playbackController),e.serviceDescriptionController&&(z=e.serviceDescriptionController),e.contentSteeringController&&(f=e.contentSteeringController),e.textController&&(Y=e.textController),e.abrController&&(G=e.abrController),e.mediaController&&(V=e.mediaController),e.settings&&(P=e.settings),e.baseURLController&&(p=e.baseURLController),e.uriFragmentModel&&(j=e.uriFragmentModel),e.segmentBaseController&&(U=e.segmentBaseController),e.manifestUpdater)&&(u=e.manifestUpdater)},setProtectionData:function(e){a=e,E&&E.setProtectionData(a)},getIsStreamSwitchInProgress:function(){return A},switchToVideoElement:function(e){v&&(R.initialize(N()),x(e,!1,!0))},getHasMediaOrInitialisationError:function(){return b||T},getStreams:Be,getActiveStream:function(){return v},getInitialPlayback:function(){return I},getAutoPlay:function(){return o},refreshManifest:function(){u.getIsUpdating()||u.refreshManifest()},reset:Ne},l=(0,He.A)(O).getInstance().getLogger(n),r=Gn(O).getInstance(),s=Hn(O).getInstance(),H=Qe(O).getInstance(),xe(),n}qn.__dashjs_factory_name="StreamController";var Qn=_e.A.getSingletonFactory(qn);function Xn(){var e,t,f,n,i,p,m,g,_,y,r,v,a=this.context,o=(0,Ge.A)(a).getInstance();function s(){v.debug("Stopping the gap controller"),i&&(clearInterval(i),i=null),function(){o.off(Ve.A.WALLCLOCK_TIME_UPDATED,d,this),o.off(Ve.A.INITIAL_STREAM_SWITCH,h,this),o.off(Ve.A.PLAYBACK_SEEKING,l,this),o.off(Ve.A.BUFFER_REPLACEMENT_STARTED,u,e),o.off(Ve.A.TRACK_CHANGE_RENDERED,c,e)}(),p=NaN,n=0,y=i=null,r={}}function l(){y&&(clearTimeout(y),y=null)}function u(e){try{e.streamId!==g.getActiveStreamInfo().id||e.mediaType!==Ue.A.VIDEO&&e.mediaType!==Ue.A.AUDIO||e.streamId===g.getActiveStreamInfo().id&&(r[e.mediaType]=!0)}catch(e){v.error(e)}}function c(e){e&&e.mediaType&&(r[e.mediaType]=!1)}function h(){if(!i)try{i||(v.debug("Starting the gap controller"),i=setInterval(function(){E()&&A(m.getTime())},100))}catch(e){}}function d(){var e;E(f.get().streaming.gaps.enableSeekFix)&&10<=++n&&(e=m.getTime(),t===e?A(e,!0):(t=e,p=NaN),n=0)}function E(e){var t,e=0<arguments.length&&void 0!==e&&e;if(g.getActiveStream())return t=Object.keys(r).some(function(e){return r[e]}),e=!!e&&(e=g.getActiveStream(),e=parseFloat((e.getStartTime()+e.getDuration()).toFixed(5)),m.getTime()+f.get().streaming.gaps.threshold>=e),!t&&f.get().streaming.gaps.jumpGaps&&0<g.getActiveStreamProcessors().length&&(!m.isSeeking()||e)&&!m.isPaused()&&!g.getIsStreamSwitchInProgress()&&!g.getHasMediaOrInitialisationError()}function A(e,t){var n,i,t=1<arguments.length&&void 0!==t&&t,r=f.get().streaming.gaps.enableStallFix,a=f.get().streaming.gaps.stallSeek,o=f.get().streaming.gaps.smallGapLimit,s=f.get().streaming.gaps.jumpLargeGaps,l=_.getBufferRange(),u=NaN,c=!1,h=function(e,t){try{if(!e||e.length<=1&&0<t)return NaN;for(var n=NaN,i=0;isNaN(n)&&i<e.length;){var r=0<i?e.end(i-1):0;t<e.start(i)&&r-t<f.get().streaming.gaps.threshold&&(n=i),i+=1}return n}catch(e){return null}}(l,e),d=(isNaN(h)||0<(d=(n=l.start(h))-e)&&(d<=o||s)&&(u=n),m.getTimeToStreamEnd());isNaN(u)&&t&&isFinite(d)&&!isNaN(d)&&d<o&&(u=parseFloat(m.getStreamEndTime().toFixed(5)),c=!0),r&&isNaN(u)&&t&&isNaN(h)&&function(e,t){for(var n=0,i=e.length;n<i;n++)if(t>=e.start(n)&&t<=e.end(n))return 1}(l,e)&&(0===a?(v.warn("Toggle play pause to break stall"),_.pause(),_.play()):(v.warn("Jumping ".concat(a,"s to break stall")),u=e+a)),0<u&&p!==u&&e<u&&!y&&(s=u-e,c?(d=(n=g.getStreamForTime(u))&&!!n.getPreloaded(),v.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(u,". Gap duration: ").concat(s)),m.seek(u,!0,d)):(o=m.getIsDynamic(),i=0<h?l.end(h-1):e,r=o?1e3*Math.max(0,s-.1):0,y=window.setTimeout(function(){m.seek(u,!0,!0),v.warn("Jumping gap occuring in period ".concat(g.getActiveStream().getStreamId()," starting at ").concat(i," and ending at ").concat(u,". Jumping by: ").concat(u-i)),y=null},r)),p=u)}return e={reset:s,setConfig:function(e){e&&(e.settings&&(f=e.settings),e.playbackController&&(m=e.playbackController),e.streamController&&(g=e.streamController),e.videoModel)&&(_=e.videoModel)},initialize:function(){!function(){o.on(Ve.A.WALLCLOCK_TIME_UPDATED,d,this),o.on(Ve.A.INITIAL_STREAM_SWITCH,h,this),o.on(Ve.A.PLAYBACK_SEEKING,l,this),o.on(Ve.A.BUFFER_REPLACEMENT_STARTED,u,e),o.on(Ve.A.TRACK_CHANGE_RENDERED,c,e)}()}},v=(0,He.A)(a).getInstance().getLogger(e),s(),e}Xn.__dashjs_factory_name="GapController";var Jn=_e.A.getSingletonFactory(Xn);function Zn(){var e,h,d,f,p,t,m,g,_,y,n=this.context,i=(0,Ge.A)(n).getInstance();function r(){h=!1;var e=j.A.parseUserAgent();d=e&&e.browser&&e.browser.name&&"safari"===e.browser.name.toLowerCase()}function a(){h=!1}function o(e){e.streamId===t.getActiveStreamInfo().id&&_&&(e=m.getLiveDelay(),m.getBufferLevel()>e/2)&&(_=!1)}function s(e){e.streamId===t.getActiveStreamInfo().id&&(_=e.state===je.A.BUFFER_EMPTY)}function l(){g.getCatchupModeEnabled()||f.setPlaybackRate(1)}function u(){var e,t,n,i,r,a,o,s,l,u,c;m.getIsDynamic()&&g.getCatchupModeEnabled()&&(0<g.getCatchupPlaybackRates().max||g.getCatchupPlaybackRates().min<0)&&!m.isPaused()&&!m.isSeeking()&&function(){try{return!(0<!m.getTime()||h)&&(E()===Ue.A.LIVE_CATCHUP_MODE_LOLP?function(e,t){try{return 0<Math.abs(v())||e<t}catch(e){}}(m.getBufferLevel(),p.get().streaming.liveCatchup.playbackBufferMin):function(){try{return 0<Math.abs(v())}catch(e){}}())}catch(e){}}()&&!h&&f&&(e=f.getPlaybackRate(),t=g.getCatchupPlaybackRates(),n=m.getBufferLevel(),r=v(),i=g.getCatchupMaxDrift(),!isNaN(i)&&0<i&&i<r?(y.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),h=!0,m.seekToCurrentLive(!0,!1)):(i=m.getCurrentLiveLatency(),r=m.getLiveDelay(),o=E()===Ue.A.LIVE_CATCHUP_MODE_LOLP?(a=t,o=i,s=r,l=p.get().streaming.liveCatchup.playbackBufferMin,(u=n)<l?(c=1-(c=Math.abs(a.min))+2*c/(1+Math.pow(Math.E,-(5*(u-l)))),y.debug("[LoL+ playback control_buffer-based] bufferLevel: "+u+", newRate: "+c)):(c=Math.abs(o-s)<=.02*s?1:1-(u=(l=o-s)<0?Math.abs(a.min):a.max)+2*u/(1+Math.pow(Math.E,-(5*l))),y.debug("[LoL+ playback control_latency-based] latency: "+o+", newRate: "+c)),c):(s=t,a=r,u=n,_||(s=1-(s=(l=i-a)<0?Math.abs(s.min):s.max)+2*s/(1+Math.pow(Math.E,-(5*l))),m.getPlaybackStalled()&&u<=a/2&&0<l)?1:s),c=d?.25:.02/(.5/t.max),o&&Math.abs(e-o)>=c&&(y.debug("[CatchupController]: Setting playback rate to ".concat(o)),f.setPlaybackRate(o))))}function v(){return m.getCurrentLiveLatency()-m.getLiveDelay()}function E(){var e=p.get().streaming.liveCatchup.playbackBufferMin;return p.get().streaming.liveCatchup.mode!==Ue.A.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?Ue.A.LIVE_CATCHUP_MODE_DEFAULT:Ue.A.LIVE_CATCHUP_MODE_LOLP}function c(){g.getCatchupPlaybackRates(!0)}return e={reset:function(){i.off(Ye.A.BUFFER_LEVEL_UPDATED,o,e),i.off(Ye.A.BUFFER_LEVEL_STATE_CHANGED,s,e),i.off(Ye.A.PLAYBACK_PROGRESS,u,e),i.off(Ye.A.PLAYBACK_TIME_UPDATED,u,e),i.off(Ye.A.PLAYBACK_SEEKED,a,e),i.off(Ve.A.SETTING_UPDATED_CATCHUP_ENABLED,l,e),i.off(Ve.A.SETTING_UPDATED_PLAYBACK_RATE_MIN,c,e),i.off(Ve.A.SETTING_UPDATED_PLAYBACK_RATE_MAX,c,e),i.off(Ye.A.STREAM_INITIALIZED,c,e),r(),f.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(p=e.settings),e.videoModel&&(f=e.videoModel),e.streamController&&(t=e.streamController),e.playbackController&&(m=e.playbackController),e.mediaPlayerModel)&&(g=e.mediaPlayerModel)},initialize:function(){i.on(Ye.A.BUFFER_LEVEL_UPDATED,o,e),i.on(Ye.A.BUFFER_LEVEL_STATE_CHANGED,s,e),i.on(Ye.A.PLAYBACK_PROGRESS,u,e),i.on(Ye.A.PLAYBACK_TIME_UPDATED,u,e),i.on(Ye.A.PLAYBACK_SEEKED,a,e),i.on(Ve.A.SETTING_UPDATED_CATCHUP_ENABLED,l,e),i.on(Ve.A.SETTING_UPDATED_PLAYBACK_RATE_MIN,c,e),i.on(Ve.A.SETTING_UPDATED_PLAYBACK_RATE_MAX,c,e),i.on(Ye.A.STREAM_INITIALIZED,c,e),c()}},y=(0,He.A)(n).getInstance().getLogger(e),r(),e}Zn.__dashjs_factory_name="CatchupController";var $n=_e.A.getSingletonFactory(Zn),ei=[Ue.A.SERVICE_DESCRIPTION_DVB_LL_SCHEME];function ti(){var e,s,l,u,o,t=this.context;function n(){s={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},l=[]}function c(e,t,n){try{s[e][t]=n/1e3}catch(e){u.error(e)}}return e={getServiceDescriptionSettings:function(){return s},getProducerReferenceTimeOffsets:function(){return l},calculateProducerReferenceTimeOffsets:function(e){try{var t,a,n=[];e&&0<e.length&&(t=[Ue.A.VIDEO,Ue.A.AUDIO,Ue.A.TEXT],a=o.getAvailabilityStartTime()/1e3,e.forEach(function(r){var e=t.reduce(function(e,t){return e.concat(o.getAllMediaInfoForType(r,t))},[]).reduce(function(n,i){return o.getProducerReferenceTimes(r,i).forEach(function(e){var t=o.getVoRepresentations(i);t&&0<t.length&&t[0].adaptation&&t[0].segmentInfoType===ge.A.SEGMENT_TEMPLATE&&(t=t[0],t=new Date(e[ge.A.WALL_CLOCK_TIME]).getTime()/1e3-(e[ge.A.PRESENTATION_TIME]/t[ge.A.TIMESCALE]-t[ge.A.PRESENTATION_TIME_OFFSET]+r.start),n.push({id:e[ge.A.ID],to:a-t}))}),n},[]);n=n.concat(e)})),l=n}catch(e){u.error(e),l=[]}},applyServiceDescription:function(e){var t,n,i,r,a,o;e&&e.serviceDescriptions&&(t=e.serviceDescriptions.filter(function(e){return ei.includes(e.schemeIdUri)}),e=e.serviceDescriptions.filter(function(e){return null==e.schemeIdUri}),t=0<t.length?t[t.length-1]:e[e.length-1])&&(t.latency&&0<t.latency.target&&(t.schemeIdUri,Ue.A.SERVICE_DESCRIPTION_DVB_LL_SCHEME,e={liveDelay:(e=t).latency.target/1e3,maxDrift:!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,referenceId:e.latency.referenceId||NaN},0<l.length?(r=e,o=(a=0)===(o=l.filter(function(e){return e.id===r.referenceId})).length?(a=0<l.length?l[0].to:0,l[0].id||NaN):(a=o[0].to||0,o[0].id||NaN),o=(a={to:a,id:o}).id,s.liveDelay=e.liveDelay-(a=a.to),s.liveCatchup.maxDrift=e.maxDrift,u.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(a," from ProducerReferenceTime element with id ").concat(o,".\n                Live Delay: ").concat(e.liveDelay-a,", Live catchup max drift: ").concat(e.maxDrift,"\n            "))):(s.liveDelay=e.liveDelay,s.liveCatchup.maxDrift=e.maxDrift,u.debug("Found latency properties coming from service description: Live Delay: ".concat(e.liveDelay,", Live catchup max drift: ").concat(e.maxDrift)))),t.playbackRate&&(a=(o=t).playbackRate.min?Math.round(1e3*(o.playbackRate.min-1))/1e3:NaN,o=o.playbackRate.max?Math.round(1e3*(o.playbackRate.max-1))/1e3:NaN,s.liveCatchup.playbackRate.min=a,s.liveCatchup.playbackRate.max=o,u.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(a)),u.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(o))),t.operatingQuality,t.operatingBandwidth&&(e=t)&&e.operatingBandwidth&&e.operatingBandwidth.mediaType&&"all"!==e.operatingBandwidth.mediaType&&((n={}).minBandwidth=e.operatingBandwidth.min,n.maxBandwidth=e.operatingBandwidth.max,n.targetBandwidth=e.operatingBandwidth.target,i=[],"video"===e.operatingBandwidth.mediaType||"audio"===e.operatingBandwidth.mediaType?i.push(e.operatingBandwidth.mediaType):"any"===e.operatingBandwidth.mediaType&&(i.push("audio"),i.push("video")),i.forEach(function(e){isNaN(n.minBandwidth)||c("minBitrate",e,n.minBandwidth),isNaN(n.maxBandwidth)||c("maxBitrate",e,n.maxBandwidth),isNaN(n.targetBandwidth)||c("initialBitrate",e,n.targetBandwidth)})),t.contentSteering)&&(s.contentSteering=t.contentSteering)},reset:function(){n()},setConfig:function(e){e&&e.adapter&&(o=e.adapter)}},u=(0,He.A)(t).getInstance().getLogger(e),n(),e}ti.__dashjs_factory_name="ServiceDescriptionController";var ni=_e.A.getSingletonFactory(ti),Xe=t(8649),ii=t.n(Xe),ri=t(5384);function ai(){var e,u,s,c,n,a,h,o,t=this.context,l=(0,Ge.A)(t).getInstance();function r(e,t){return e&&s[t]&&s[t][e]?s[t][e].list:[]}function d(e,t){return e&&s[t]&&s[t][e]?s[t][e].current:null}function f(e){var t,n,i,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e&&e.streamInfo&&(i=d(t=e.type,n=e.streamInfo.id),s[n])&&s[n][t]&&(s[n][t].current=e,s[n][t].current&&(t!==Ue.A.TEXT&&!g(e,i)||t===Ue.A.TEXT&&e.isFragmented)&&l.trigger(Ve.A.CURRENT_TRACK_CHANGED,{oldMediaInfo:i,newMediaInfo:e,switchMode:c.get().streaming.trackSwitchMode[t]},{streamId:n}),!r)&&(r=(i={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration,codec:e.codec}).lang||i.viewpoint||i.role&&0<i.role.length||i.accessibility&&0<i.accessibility.length||i.audioChannelConfiguration&&0<i.audioChannelConfiguration.length?i:null)&&s[n][t].storeLastSettings&&(r.roles&&(r.role=r.roles[0],delete r.roles),r.accessibility&&(r.accessibility=r.accessibility[0]),r.audioChannelConfiguration&&(r.audioChannelConfiguration=r.audioChannelConfiguration[0]),a[t]=r,o.setSavedMediaSettings(t,r))}function p(e,t){e&&t&&(n[e]=t)}function m(e){return e?n[e]:null}function g(e,t){var n,i,r,a,o,s,l,u,c,h;return!e&&!t||!(!e||!t)&&(n=e.id===t.id,i=e.viewpoint===t.viewpoint,r=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),a=e.lang===t.lang,o=e.codec===t.codec,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),h=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri),n)&&o&&i&&r&&a&&s&&l&&u&&c&&h&&e}function i(){s={},a={},n={audio:null,video:null,text:null}}function _(e,t,n){var i=[];return e.forEach(function(e){t(n,e)&&i.push(e)}),0!==i.length?i:e}function y(e,t){try{return!e.lang||e.lang instanceof RegExp?t.lang.match(e.lang):""!==t.lang&&0<(0,ri.extendedFilter)(t.lang,ii()(e.lang)).length}catch(e){return!1}}function v(e,t){return void 0===e.index||null===e.index||t.index===e.index}function E(e,t){return!e.viewpoint||e.viewpoint===t.viewpoint}function A(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return!t.role||!!e.roles.filter(function(e){return e===t.role})[0]||e.type===Ue.A.AUDIO&&n}function b(t,e){return t.accessibility?!!e.accessibility.filter(function(e){return e===t.accessibility})[0]:!e.accessibility.length}function T(t,e){return!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0]}function S(e,t){return!e.codec||e.codec===t.codec}function w(e){var t,n=0,i=[];return e.forEach(function(e){(t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})))>n?(n=t,i=[e]):t===n&&i.push(e)}),i}function R(e){var n,i=1/0,r=[];return e.forEach(function(e){var t=e.bitrateList.reduce(function(e,t){var n=Math.max(1,t.width*t.height);return e+t.bandwidth/n},0);(n=t/e.bitrateList.length)<i?(i=n,r=[e]):n===i&&r.push(e)}),r}function I(e){var t,n=0,i=[];return e.forEach(function(e){(t=e.representationCount)>n?(n=t,i=[e]):t===n&&i.push(e)}),i}function C(e,t){if(e===Ue.A.TEXT)return t[0];var n,i,r,a,o,s,l=c.get().streaming.selectionModeForInitialTrack,e=h.getCustomInitialTrackSelectionFunction();if(e&&"function"==typeof e)n=e(t);else switch(l){case Ue.A.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:a=0,o=[],t.forEach(function(e){isNaN(e.selectionPriority)||(e.selectionPriority>a?(a=e.selectionPriority,o=[e]):e.selectionPriority===a&&o.push(e))}),n=s=1<(s=1<(s=o).length?w(s):s).length?I(s):s;break;case Ue.A.TRACK_SELECTION_MODE_HIGHEST_BITRATE:n=s=1<(s=w(t)).length?I(s):s;break;case Ue.A.TRACK_SELECTION_MODE_FIRST_TRACK:n=t[0];break;case Ue.A.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:n=r=1<(r=R(t)).length?w(r):r;break;case Ue.A.TRACK_SELECTION_MODE_WIDEST_RANGE:n=i=1<(i=I(r=t)).length?w(r):i;break;default:u.warn("Track selection mode ".concat(l," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),n=t[0]}return(0<n.length?n:t)[0]}return e={setInitialMediaSettingsForType:function(e,t){var n=a[e]||m(e),t=r(e,t.id),i=[];n||((n=o.getSavedMediaSettings(e))&&delete n.codec,p(e,n)),t&&0!==t.length&&(n&&(i=_(i=Array.from(t),y,n),i=_(i,v,n),i=_(i,E,n),e===Ue.A.AUDIO&&a[e]||(i=_(i,A,n)),i=_(i,b,n),i=_(i,T,n),i=_(i,S,n)),0===i.length?f(C(e,t),!0):1<i.length?f(C(e,i)):f(i[0]))},addTrack:function(e){if(e){var t=e.type;if(t===Ue.A.AUDIO||t===Ue.A.VIDEO||t===Ue.A.TEXT||t===Ue.A.IMAGE){var n,i=e.streamInfo.id;s[i]||(s[i]={audio:{list:[],storeLastSettings:n=c.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:n,current:null},text:{list:[],storeLastSettings:n,current:null},image:{list:[],storeLastSettings:n,current:null}});for(var r=s[i][t].list,a=0,o=r.length;a<o;++a)if(g(r[a],e))return;r.push(e)}}},getTracksFor:r,getCurrentTrackFor:d,isCurrentTrack:function(e){var t,n;return!!e&&(t=e.type,n=e.streamInfo.id,s[n])&&s[n][t]&&g(s[n][t].current,e)},setTrack:f,selectInitialTrack:C,setInitialSettings:p,getInitialSettings:m,getTracksWithHighestBitrate:w,getTracksWithHighestEfficiency:R,getTracksWithWidestRange:I,isTracksEqual:g,matchSettings:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{var i,r=!1,a=(t.lang?t.lang instanceof RegExp?r=e.lang.match(t.lang):""!==e.lang&&(i=ii()(t.lang))&&(r=0<(0,ri.extendedFilter)(e.lang,i).length):r=!0,void 0===t.index||null===t.index||e.index===t.index),o=!t.viewpoint||t.viewpoint===e.viewpoint,s=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],l=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],u=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return r&&a&&o&&(s||e.type===Ue.A.AUDIO&&n)&&l&&u}catch(t){return!1}},matchSettingsLang:y,matchSettingsIndex:v,matchSettingsViewPoint:E,matchSettingsRole:A,matchSettingsAccessibility:b,matchSettingsAudioChannelConfig:T,saveTextSettingsDisabled:function(){o.setSavedMediaSettings(Ue.A.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(o=e.domStorage),e.settings&&(c=e.settings),e.customParametersModel)&&(h=e.customParametersModel)},reset:i},u=(0,He.A)(t).getInstance().getLogger(e),i(),e}ai.__dashjs_factory_name="MediaController";var oi=_e.A.getSingletonFactory(ai),si=(_e.A.updateSingletonFactory(ai.__dashjs_factory_name,oi),oi);function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=li(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=li(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==li(e)?e:String(e)}(i.key),i)}}u=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.data={baseUrls:t||null,selectedIdx:n||NaN},this.children=[]},ci&&ui(u.prototype,ci),hi&&ui(u,hi),Object.defineProperty(u,"prototype",{writable:!1});var u,ci,hi,di=u;function fi(){var r,a,n,e=this.context,i=dt(e).getInstance();function o(e,t,n){n=s(n);e[t]?i.areEqual(n,e[t].data.baseUrls)||(e[t].data.baseUrls=n,e[t].data.selectedIdx=NaN):e[t]=new di(n)}function s(e){var e=a.getBaseURLsFromElement(e),t=n.getSynthesizedBaseUrlElements(e);return e=t&&0<t.length?e.concat(t):e}function t(){r=new di}return e={reset:t,update:function(e){if(!a||!a.hasOwnProperty("getBaseURLsFromElement")||!a.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously");var t=s(e);i.areEqual(t,r.data.baseUrls)||(r.data.baseUrls=t,r.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,i){o(r.children,i,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){o(r.children[i].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,t){o(r.children[i].children[n].children,t,e)})})})},getForPath:function(e){var t=r,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){e=e||r;n(e.data),e.children&&e.children.forEach(function(e){return t(n,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN)})},setConfig:function(e){e.adapter&&(a=e.adapter),e.contentSteeringController&&(n=e.contentSteeringController)},getBaseUrls:s},t(),e}fi.__dashjs_factory_name="BaseURLTreeModel";var pi=_e.A.getClassFactory(fi);function mi(e){var n=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var n,t=0,i=[],r=0;if((e=e.sort(function(e,t){e=e.dvbPriority-t.dvbPriority;return isNaN(e)?0:e}).filter(function(e,t,n){return!t||n[0].dvbPriority&&e.dvbPriority&&n[0].dvbPriority===e.dvbPriority})).length)return 1<e.length&&(e.forEach(function(e){t+=e.dvbWeight,i.push(t)}),n=Math.floor(Math.random()*(t-1)),i.every(function(e,t){return r=t,!(n<e)})),e[r]}((t=[],e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvbPriority&&t.push(e.dvbPriority),!1)}).filter(function(e){return!t.length||!e.dvbPriority||-1===t.indexOf(e.dvbPriority)})));var t}}}mi.__dashjs_factory_name="DVBSelector";var gi=_e.A.getClassFactory(mi);function _i(e){var i=(e=e||{}).blacklistController;return{select:function(e){var t,n=0;return t=e&&e.some(function(e,t){return n=t,!i.contains(e.serviceLocation)})?e[n]:t}}}_i.__dashjs_factory_name="BasicSelector";var yi=_e.A.getClassFactory(_i);function vi(){var e,i,o,t=this.context;function r(e,t){for(var n=0<arguments.length&&void 0!==e?e:[],i=1<arguments.length&&void 0!==t?t:[],r=0,a=NaN;r<n.length&&!function(){var t=n[r],e=i.findIndex(function(e){return e.serviceLocation&&e.serviceLocation===t});if(-1!==e&&!o.contains(i[e].serviceLocation))return a=e,1;r+=1}(););return a}return e={selectBaseUrlIndex:function(e){var t=NaN,n=(isNaN(e.selectedIdx)&&(n=i.getSteeringDataFromManifest())&&0<n.defaultServiceLocationArray.length&&(t=r(n.defaultServiceLocationArray,e.baseUrls)),i.getCurrentSteeringResponseData());return t=e.baseUrls&&e.baseUrls.length&&n&&n.pathwayPriority&&n.pathwayPriority.length?r(n.pathwayPriority,e.baseUrls):t},setConfig:function(e){e.blacklistController&&(o=e.blacklistController),e.contentSteeringController&&(i=e.contentSteeringController)}},i=xn(t).getInstance(),e}vi.__dashjs_factory_name="ContentSteeringSelector";var Ei=_e.A.getClassFactory(vi);function Ai(){var e,t,n,i,r,a,o=this.context,s=(0,Ge.A)(o).getInstance(),l=(0,ye.A)(o).getInstance();function u(){t.reset()}return e={chooseSelector:function(e){(0,Ee.sq)(e,"boolean"),a=e?i:n},select:function(e){var t;if(e)return l.get().streaming.applyContentSteering&&(t=r.selectBaseUrlIndex(e),isNaN(t)||-1===t||(e.selectedIdx=t)),isNaN(e.selectedIdx)?(t=a.select(e.baseUrls))?(e.selectedIdx=e.baseUrls.indexOf(t),t):(s.trigger(Ve.A.URL_RESOLUTION_FAILED,{error:new ze.A(We.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,We.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(a===n&&u())):e.baseUrls[e.selectedIdx]},reset:u,setConfig:function(e){e.selector&&(a=e.selector),e.contentSteeringSelector&&(r=e.contentSteeringSelector)}},t=En(o).create({updateEventName:Ve.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:Ve.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),n=yi(o).create({blacklistController:t}),i=gi(o).create({blacklistController:t}),(r=Ei(o).create()).setConfig({blacklistController:t}),a=n,e}Ai.__dashjs_factory_name="BaseURLSelector";var bi=_e.A.getClassFactory(Ai);function Ti(){var e,t,n,i,r,a=this.context,o=(0,Ge.A)(a).getInstance(),s=(0,Ae.A)(a).getInstance();function l(e){n.update(e),i.chooseSelector(t.getIsDVB(e)),o.trigger(Ye.A.BASE_URLS_UPDATED,{baseUrls:u(e)})}function u(e){return n.getBaseUrls(e)}return e={reset:function(){n.reset(),i.reset()},initialize:function(e){n.setConfig({adapter:t,contentSteeringController:r}),l(e)},resolve:function(e){e=n.getForPath(e).reduce(function(e,t){t=i.select(t);return t?(s.isRelative(t.url)?e.url=s.resolve(t.url,e.url):(e.url=t.url,e.serviceLocation=t.serviceLocation),e.availabilityTimeOffset=t.availabilityTimeOffset,e.availabilityTimeComplete=t.availabilityTimeComplete,e.queryParams=t.queryParams,e):new Je},new Je);if(!s.isRelative(e.url))return e},setConfig:function(e){e.baseURLTreeModel&&(n=e.baseURLTreeModel),e.baseURLSelector&&(i=e.baseURLSelector),e.adapter&&(t=e.adapter),e.contentSteeringController&&(r=e.contentSteeringController)},getBaseUrls:u,update:l},n=pi(a).create(),i=bi(a).create(),o.on(Ve.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(e){n.invalidateSelectedIndexes(e.entry)},e),e}Ti.__dashjs_factory_name="BaseURLController";var Si=_e.A.getClassFactory(Ti);function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ri(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ri=function(){return!!e})()}function Ii(e){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ci(e,t){return(Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Li=function(e){function i(e,t){var n;if(this instanceof i)return(n=function(e,t,n){t=Ii(t);var i=e;if(!(t=Ri()?Reflect.construct(t,n||[],Ii(e).constructor):t.apply(e,n))||"object"!==wi(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,i)).url=e||null,n.type=t||null,n.mediaType=Ue.A.STREAM,n.responseType="",n;throw new TypeError("Cannot call a class as a function")}var t=i;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ci(t,e),t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(S.A);function Pi(e){e=e||{};var t=this.context,a=(0,Ge.A)(t).getInstance(),o=Jt(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:We});return{load:function(n,i,r){function t(e,t){i.resolved=!0,i.resolvedContent=e||null,a.trigger(Ve.A.XLINK_ELEMENT_LOADED,{element:i,resolveObject:r,error:e||t?null:new ze.A(We.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,We.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)})}var e;"urn:mpeg:dash:resolve-to-zero:2013"===n?t(null,!0):(e=new Li(n,ve.G.XLINK_EXPANSION_TYPE),o.load({request:e,success:function(e){t(e)},error:function(){t(null)}}))},reset:function(){o&&(o.abort(),o=null)}}}Pi.__dashjs_factory_name="XlinkLoader";function Di(w){void 0===(w=w||{}).escapeMode&&(w.escapeMode=!0),void 0===w.attributePrefix&&(w.attributePrefix="_"),w.arrayAccessForm=w.arrayAccessForm||"none",w.emptyNodeForm=w.emptyNodeForm||"text",void 0===w.enableToStringFunc&&(w.enableToStringFunc=!0),w.arrayAccessFormPaths=w.arrayAccessFormPaths||[],void 0===w.skipEmptyTextNodesForObj&&(w.skipEmptyTextNodesForObj=!0),void 0===w.stripWhitespaces&&(w.stripWhitespaces=!0),w.datetimeAccessFormPaths=w.datetimeAccessFormPaths||[],void 0===w.useDoubleQuotes&&(w.useDoubleQuotes=!1),w.xmlElementsFilter=w.xmlElementsFilter||[],w.jsonPropertiesFilter=w.jsonPropertiesFilter||[],void 0===w.keepCData&&(w.keepCData=!1),void 0===w.ignoreRoot&&(w.ignoreRoot=!1);var R={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function I(e){var t=e.localName;return t=null!=(t=null==t?e.baseName:t)&&""!=t?t:e.nodeName}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function C(e,t,n,i){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==i)break}else if(a instanceof RegExp){if(a.test(i))break}else if("function"==typeof a&&a(t,n,i))break}return r!=e.length}function L(e,t,n){"property"===w.arrayAccessForm&&(e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]),!(e[t]instanceof Array)&&0<w.arrayAccessFormPaths.length&&C(w.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function P(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");return n.setHours(t[3],t[4],i[0]),1<i.length&&n.setMilliseconds(i[1]),t[6]&&t[7]?(i=60*t[6]+Number(t[7]),i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))),n}function D(e,t){if(e.nodeType==R.DOCUMENT_NODE){for(var n=new Object,i=e.childNodes,r=0;r<i.length;r++)(o=i[r]).nodeType==R.ELEMENT_NODE&&(w.ignoreRoot?n=D(o):(n={})[c=I(o)]=D(o));return n}if(e.nodeType==R.ELEMENT_NODE){(n=new Object).__cnt=0;for(var a=[],i=e.childNodes,r=0;r<i.length;r++){var o,s,l,u,c=I(o=i[r]);o.nodeType!=R.COMMENT_NODE&&(A=n,b=o.nodeType,S=s=t+"."+(T=c),b==R.ELEMENT_NODE&&0<w.xmlElementsFilter.length&&!C(w.xmlElementsFilter,A,T,S)||(n.__cnt++,null==n[c]?(l=D(o,s),"#text"==c&&!/[^\s]/.test(l)||((u={})[c]=l,a.push(u)),n[c]=l,L(n,c,s)):(null==n[c]||n[c]instanceof Array||(n[c]=[n[c]],L(n,c,s)),l=D(o,s),"#text"==c&&!/[^\s]/.test(l)||((u={})[c]=l,a.push(u)),n[c][n[c].length]=l)))}n.__children=a;for(var h=I(e),d=0;d<e.attributes.length;d++){var f=e.attributes[d];n.__cnt++;for(var p=f.value,m=0,g=w.matchers.length;m<g;m++){var _=w.matchers[m];_.test(f,h)&&(p=_.converter(f.value))}n[w.attributePrefix+f.name]=p}var y=e.prefix;return null!=y&&""!=y&&(n.__cnt++,n.__prefix=y),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),w.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==w.arrayAccessForm&&delete n["#text_asArray"],n.__text=(y=n.__text,E=t+"."+(v=c),0<w.datetimeAccessFormPaths.length&&(E=E.split(".#")[0],C(w.datetimeAccessFormPaths,y,v,E))?P(y):y)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==w.arrayAccessForm)&&delete n["#cdata-section_asArray"],0==n.__cnt&&"text"==w.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||w.keepCData?1<n.__cnt&&null!=n.__text&&w.skipEmptyTextNodesForObj&&(w.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!w.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}var v,E,A,b,T,S;if(e.nodeType==R.TEXT_NODE||e.nodeType==R.CDATA_SECTION_NODE)return e.nodeValue}function s(e,t,n,i){var r="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var o=n[a],s=e[o];w.escapeMode&&(s=l(s)),r+=" "+o.substr(w.attributePrefix.length)+"=",w.useDoubleQuotes?r+='"'+s+'"':r+="'"+s+"'"}return r+(i?"/>":">")}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return"property"==w.arrayAccessForm&&-1!==(n=t.toString()).indexOf("_asArray",n.length-8)||0==t.toString().indexOf(w.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function;var n}function h(e){var t=0;if(e instanceof Object)for(var n in e)c(e,n)||t++;return t}function d(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(w.attributePrefix)&&t.push(n);return t}function f(e){var t,n,i="";return e instanceof Object?i+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(w.escapeMode?n+=l(t.__text):n+=t.__text),n):null!=e&&(w.escapeMode?i+=l(e):i+=e),i}function p(e,t){return""===e?t:e+"."+t}function m(e,t){var n,i,r,a="";if(0<h(e))for(var o in e)c(e,o)||""!=t&&(n=e,r=p(t,i=o),0!=w.jsonPropertiesFilter.length)&&""!=r&&!C(w.jsonPropertiesFilter,n,i,r)||(i=d(n=e[o]),null==n?a+=s(n,o,i,!0):n instanceof Object?n instanceof Array?a+=function(e,t,n,i){var r="";if(0==e.length)r+=s(e,t,n,!0);else for(var a=0;a<e.length;a++)r=(r=(r+=s(e[a],t,d(e[a]),!1))+m(e[a],p(i,t)))+u(e[a],t);return r}(n,o,i,t):n instanceof Date?a=(a=(a+=s(n,o,i,!1))+n.toISOString())+u(n,o):0<h(n)||null!=n.__text||null!=n.__cdata?a=(a=(a+=s(n,o,i,!1))+m(n,p(t,o)))+u(n,o):a+=s(n,o,i,!0):a=(a=(a+=s(n,o,i,!1))+f(n))+u(n,o));return a+f(e)}this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?P(e):e},this.xml2json=function(e){return D(e)},this.xml_str2json=function(e){e=this.parseXmlString(e);return null!=e?this.xml2json(e):null},this.json2xml_str=function(e){return m(e,"")},this.json2xml=function(e){e=this.json2xml_str(e);return this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}}var ki=_e.A.getClassFactory(Pi),Oi="onLoad";function Mi(e){e=e||{};var t,n,d,f,i,s,r=this.context,p=(0,Ge.A)(r).getInstance(),l=(0,Ae.A)(r).getInstance();function m(e,t,n){var i,r,a={};a.elements=e,a.type=t,a.resolveType=n,0===a.elements.length&&u(a);for(var o=0;o<a.elements.length;o++)i=a.elements[o],r=l.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,s.load(r,i,a)}function a(e){var t,n=e.element,e=e.resolveObject;n.resolvedContent&&((t=0)===n.resolvedContent.indexOf("<?xml")&&(t=n.resolvedContent.indexOf("?>")+2),t=n.resolvedContent.substr(0,t)+"<response>"+n.resolvedContent.substr(t)+"</response>",n.resolvedContent=i.xml_str2json(t)),function(e){for(var t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return;return 1}(e)&&u(e)}function u(e){for(var t,n,i,r,a,o,s,l=[],u=e,c=[],h=u.elements.length-1;0<=h;h--){if(r=(i=u.elements[h]).type+"_asArray",i.resolvedContent){if(i.resolvedContent)for(o=0;o<i.resolvedContent[r].length;o++)a=i.resolvedContent[r][o],c.push(a)}else delete i.originalContent["xlink:actuate"],delete i.originalContent["xlink:href"],c.push(i.originalContent);for(i.parentElement[r].splice(i.index,1),s=0;s<c.length;s++)i.parentElement[r].splice(i.index+s,0,c[s]);c=[]}if(0<u.elements.length&&d.run(f),"onActuate"===e.resolveType&&p.trigger(Ve.A.XLINK_READY,{manifest:f}),e.resolveType===Oi)switch(e.type){case ge.A.PERIOD:for(t=0;t<f[ge.A.PERIOD+"_asArray"].length;t++)(n=f[ge.A.PERIOD+"_asArray"][t]).hasOwnProperty(ge.A.ADAPTATION_SET+"_asArray")&&(l=l.concat(g(n[ge.A.ADAPTATION_SET+"_asArray"],n,ge.A.ADAPTATION_SET,Oi))),n.hasOwnProperty(ge.A.EVENT_STREAM+"_asArray")&&(l=l.concat(g(n[ge.A.EVENT_STREAM+"_asArray"],n,ge.A.EVENT_STREAM,Oi)));m(l,ge.A.ADAPTATION_SET,Oi);break;case ge.A.ADAPTATION_SET:p.trigger(Ve.A.XLINK_READY,{manifest:f})}}function g(e,t,n,i){for(var r,a,o=[],s=e.length-1;0<=s;s--)(r=e[s]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===r["xlink:href"]&&e.splice(s,1);for(s=0;s<e.length;s++)(r=e[s]).hasOwnProperty("xlink:href")&&r.hasOwnProperty("xlink:actuate")&&r["xlink:actuate"]===i&&(a={url:r["xlink:href"],parentElement:t,type:n,index:s,resolveType:i,originalContent:r,resolvedContent:null,resolved:!1},o.push(a));return o}return t={resolveManifestOnLoad:function(e){i=new Di({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),(f=e).Period_asArray?m(g(f.Period_asArray,f,ge.A.PERIOD,Oi),ge.A.PERIOD,Oi):p.trigger(Ve.A.XLINK_READY,{manifest:f})},setMatchers:function(e){e&&(n=e)},setIron:function(e){e&&(d=e)},reset:function(){p.off(Ve.A.XLINK_ELEMENT_LOADED,a,t),s&&(s.reset(),s=null)}},p.on(Ve.A.XLINK_ELEMENT_LOADED,a,t),s=ki(r).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}Mi.__dashjs_factory_name="XlinkController";var xi=_e.A.getClassFactory(Mi);function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(c){function E(e,t){for(var n=0,i=e.children.length;n<i;++n){var r=e.children[n],a=t[r.name+"_asArray"];if(a)for(var o=0,s=a.length;o<s;++o){for(var l=a[o],u=(v=y=_=g=m=p=f=d=h=c=u=void 0,e.properties),c=t,h=l,d=0,f=u.length;d<f;++d){var p=u[d];if(c[p.name])if(h[p.name]){if(p.merge){var m=c[p.name],g=h[p.name];if("object"===Ni(m)&&"object"===Ni(g)){_=void 0;y=void 0;v=void 0;var _=m;var y=g;for(var v in _)y.hasOwnProperty(v)||(y[v]=_[v])}else h[p.name]=m+g}}else h[p.name]=c[p.name]}E(r,l)}}}return{run:function(e){if(null!==e&&"object"===Ni(e)&&e.Period_asArray&&"period"in c)for(var t=c.period,n=e.Period_asArray,i=0,r=n.length;i<r;++i){var a=n[i];if(E(t,a),"adaptationset"in c){var o=a.AdaptationSet_asArray;if(o)for(var s=c.adaptationset,l=0,u=o.length;l<u;++l)E(s,o[l])}}return e}}}Fi.__dashjs_factory_name="ObjectIron";var Bi=_e.A.getClassFactory(Fi);function Ui(e){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Ui(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Ui(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Ui(e)?e:String(e)}(i.key),i)}}ji((c=Vi).prototype,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),Object.defineProperty(c,"prototype",{writable:!1});var c,Gi=Vi;function Vi(e,t){if(!(this instanceof Vi))throw new TypeError("Cannot call a class as a function");this._test=e,this._converter=t}function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n){return(t=function(e){e=function(e){if("object"!=Hi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Hi(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Hi(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Yi=function(){return!!e})()}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wi(e,t){return(Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ki=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=r,n=[function(e,t){h(h(h(h(h(h(h(h(h(h(n={},ge.A.MPD,[ge.A.ID,ge.A.PROFILES]),ge.A.PERIOD,[ge.A.ID]),ge.A.BASE_URL,[ge.A.SERVICE_LOCATION,ge.A.BYTE_RANGE]),ge.A.SEGMENT_BASE,[ge.A.INDEX_RANGE]),ge.A.INITIALIZATION,[ge.A.RANGE]),ge.A.REPRESENTATION_INDEX,[ge.A.RANGE]),ge.A.SEGMENT_LIST,[ge.A.INDEX_RANGE]),ge.A.BITSTREAM_SWITCHING,[ge.A.RANGE]),ge.A.SEGMENT_URL,[ge.A.MEDIA_RANGE,ge.A.INDEX_RANGE]),ge.A.SEGMENT_TEMPLATE,[ge.A.INDEX_RANGE,ge.A.MEDIA,ge.A.INDEX,ge.A.INITIALIZATION_MINUS,ge.A.BITSTREAM_SWITCHING_MINUS]),h(h(h(h(h(h(h(h(h(h(n,ge.A.ASSET_IDENTIFIER,[ge.A.VALUE,ge.A.ID]),ge.A.EVENT_STREAM,[ge.A.VALUE]),ge.A.ADAPTATION_SET,[ge.A.PROFILES,ge.A.MIME_TYPE,ge.A.SEGMENT_PROFILES,ge.A.CODECS,ge.A.CONTENT_TYPE]),ge.A.FRAME_PACKING,[ge.A.VALUE,ge.A.ID]),ge.A.AUDIO_CHANNEL_CONFIGURATION,[ge.A.VALUE,ge.A.ID]),ge.A.CONTENT_PROTECTION,[ge.A.VALUE,ge.A.ID]),ge.A.ESSENTIAL_PROPERTY,[ge.A.VALUE,ge.A.ID]),ge.A.SUPPLEMENTAL_PROPERTY,[ge.A.VALUE,ge.A.ID]),ge.A.INBAND_EVENT_STREAM,[ge.A.VALUE,ge.A.ID]),ge.A.ACCESSIBILITY,[ge.A.VALUE,ge.A.ID]);var n=h(h(h(h(h(h(h(h(n,ge.A.ROLE,[ge.A.VALUE,ge.A.ID]),ge.A.RATING,[ge.A.VALUE,ge.A.ID]),ge.A.VIEWPOINT,[ge.A.VALUE,ge.A.ID]),ge.A.CONTENT_COMPONENT,[ge.A.CONTENT_TYPE]),ge.A.REPRESENTATION,[ge.A.ID,ge.A.DEPENDENCY_ID,ge.A.MEDIA_STREAM_STRUCTURE_ID]),ge.A.SUBSET,[ge.A.ID]),ge.A.METRICS,[ge.A.METRICS_MINUS]),ge.A.REPORTING,[ge.A.VALUE,ge.A.ID]);return!!n.hasOwnProperty(t)&&void 0!==(n=n[t])&&0<=n.indexOf(e.name)},function(e){return String(e)}],i=(t=zi(t),e);if(!(t=Yi()?Reflect.construct(t,n||[],zi(e).constructor):t.apply(e,n))||"object"!==Hi(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}var e=r,t=Gi;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Wi(e,t),e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}();function qi(e){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qi=function(){return!!e})()}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ji(e,t){return(Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Zi=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,$i=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=r,n=[function(e){for(var t=[ge.A.MIN_BUFFER_TIME,ge.A.MEDIA_PRESENTATION_DURATION,ge.A.MINIMUM_UPDATE_PERIOD,ge.A.TIMESHIFT_BUFFER_DEPTH,ge.A.MAX_SEGMENT_DURATION,ge.A.MAX_SUBSEGMENT_DURATION,ge.A.SUGGESTED_PRESENTATION_DELAY,ge.A.START,Ue.A.START_TIME,ge.A.DURATION],n=t.length,i=0;i<n;i++)if(e.nodeName===t[i])return Zi.test(e.value);return!1},function(e){var e=Zi.exec(e),t=31536e3*parseFloat(e[3]||0)+2592e3*parseFloat(e[5]||0)+86400*parseFloat(e[7]||0)+3600*parseFloat(e[9]||0)+60*parseFloat(e[11]||0)+parseFloat(e[13]||0);return t=void 0!==e[1]?-t:t}],i=(t=Xi(t),e);if(!(t=Qi()?Reflect.construct(t,n||[],Xi(e).constructor):t.apply(e,n))||"object"!==qi(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}var e=r,t=Gi;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Ji(e,t),e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}();function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tr=function(){return!!e})()}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e,t){return(ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var rr=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,ar=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=r,n=[function(e){return rr.test(e.value)},function(e){var t,e=rr.exec(e),n=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&1e3*parseFloat(e[7])||0);return e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),n+=("+"===e[8]?-1:1)*t*60*1e3),new Date(n)}],i=(t=nr(t),e);if(!(t=tr()?Reflect.construct(t,n||[],nr(e).constructor):t.apply(e,n))||"object"!==er(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}var e=r,t=Gi;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ir(e,t),e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}();function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sr=function(){return!!e})()}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ur(e,t){return(ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var cr=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,hr=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=r,n=[function(e){return cr.test(e.value)},function(e){return parseFloat(e)}],i=(t=lr(t),e);if(!(t=sr()?Reflect.construct(t,n||[],lr(e).constructor):t.apply(e,n))||"object"!==or(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}var e=r,t=Gi;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ur(e,t),e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}();function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t,n){return(t=function(e){e=function(e){if("object"!=dr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=dr(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==dr(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pr=function(){return!!e})()}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e,t){return(gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _r=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=this,t=r,n=[function(e,t){var n=fr(fr(fr(fr(fr({},ge.A.ADAPTATION_SET,[ge.A.LANG]),ge.A.REPRESENTATION,[ge.A.LANG]),ge.A.CONTENT_COMPONENT,[ge.A.LANG]),ge.A.LABEL,[ge.A.LANG]),ge.A.GROUP_LABEL,[ge.A.LANG]);return!!n.hasOwnProperty(t)&&void 0!==(n=n[t])&&0<=n.indexOf(e.name)},function(e){return ii()(e)||String(e)}],i=(t=mr(t),e);if(!(t=pr()?Reflect.construct(t,n||[],mr(e).constructor):t.apply(e,n))||"object"!==dr(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}var e=r,t=Gi;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),gr(e,t),e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}();function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=yr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=yr(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==yr(e)?e:String(e)}(i.key),i)}}vr((Er=br).prototype,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),Object.defineProperty(Er,"prototype",{writable:!1});var Er,Ar=br;function br(e){if(!(this instanceof br))throw new TypeError("Cannot call a class as a function");this._name=e,this._merge=(e=e)&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Tr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Tr(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Tr(e)?e:String(e)}(i.key),i)}}Sr((wr=Ir).prototype,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),Object.defineProperty(wr,"prototype",{writable:!1});var wr,Rr=Ir;function Ir(e,t,n){var i=this;if(!(this instanceof Ir))throw new TypeError("Cannot call a class as a function");this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){i._properties.push(new Ar(e))})}function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Lr=function(){return!!e})()}function Pr(e){return(Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dr(e,t){return(Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var kr=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=[ge.A.PROFILES,ge.A.WIDTH,ge.A.HEIGHT,ge.A.SAR,ge.A.FRAMERATE,ge.A.AUDIO_SAMPLING_RATE,ge.A.MIME_TYPE,ge.A.SEGMENT_PROFILES,ge.A.CODECS,ge.A.MAXIMUM_SAP_PERIOD,ge.A.START_WITH_SAP,ge.A.MAX_PLAYOUT_RATE,ge.A.CODING_DEPENDENCY,ge.A.SCAN_TYPE,ge.A.FRAME_PACKING,ge.A.AUDIO_CHANNEL_CONFIGURATION,ge.A.CONTENT_PROTECTION,ge.A.ESSENTIAL_PROPERTY,ge.A.ESSENTIAL_PROPERTY+"_asArray",ge.A.SUPPLEMENTAL_PROPERTY,ge.A.INBAND_EVENT_STREAM],t=this,n=r,e=[ge.A.ADAPTATION_SET,e,[new Rr(ge.A.REPRESENTATION,e,[new Rr(ge.A.SUB_REPRESENTATION,e)])]],i=(n=Pr(n),t);if(!(n=Lr()?Reflect.construct(n,e||[],Pr(t).constructor):n.apply(t,e))||"object"!==Cr(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var e=r,t=Rr;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t),e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}();function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mr=function(){return!!e})()}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nr(e,t){return(Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Fr=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var e=[ge.A.SEGMENT_BASE,ge.A.SEGMENT_TEMPLATE,ge.A.SEGMENT_LIST],t=this,n=r,e=[ge.A.PERIOD,e,[new Rr(ge.A.ADAPTATION_SET,e,[new Rr(ge.A.REPRESENTATION,e)])]],i=(n=xr(n),t);if(!(n=Mr()?Reflect.construct(n,e||[],xr(t).constructor):n.apply(t,e))||"object"!==Or(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var e=r,t=Rr;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nr(e,t),e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}();function Br(e){var t=this.context,n={parse:function(e){var t,n,i=window.performance.now();if(e=a.xml_str2json(e))return t=window.performance.now(),e.Patch?((e=e.Patch).add_asArray&&e.add_asArray.forEach(function(e){return o.run(e)}),e.replace_asArray&&e.replace_asArray.forEach(function(e){return o.run(e)})):(e=e.MPD,o.run(e)),n=window.performance.now(),r.info("Parsing complete: ( xml2json: "+(t-i).toPrecision(3)+"ms, objectiron: "+(n-t).toPrecision(3)+"ms, total: "+((n-i)/1e3).toPrecision(3)+"s)"),e.protocol="DASH",e;throw new Error("parsing the manifest failed")},getMatchers:function(){return i},getIron:function(){return o}},r=(e=e||{}).debug.getLogger(n),i=[new $i,new ar,new hr,new _r,new Ki],a=new Di({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:i}),o=Bi(t).create({adaptationset:new kr,period:new Fr});return n}Br.__dashjs_factory_name="DashParser";var Ur=_e.A.getClassFactory(Br);function jr(e){var t,s,r,l,u,c=this.context,h=(e=e||{}).debug,d=e.settings,f=(0,Ge.A)(c).getInstance(),p=(0,Ae.A)(c).getInstance(),m=e.mssHandler,n=e.errHandler;function i(e){f.trigger(Ve.A.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(o){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=new Date,i=new Li(o,ve.G.MPD_TYPE);e&&(i.serviceLocation=e),t&&(i.queryParams=t),i.requestStartDate||(i.requestStartDate=n),f.trigger(Ve.A.MANIFEST_LOADING_STARTED,{request:i}),r.load({request:i,success:function(e,t,n){var i,r,a;if(l)if(n&&n!==o?(r=p.parseBaseUrl(n),i=n):(p.isRelative(o)&&(o=p.resolve(o,window.location.href)),r=p.parseBaseUrl(o)),"No Content"!=t)if(null===u&&(n=null,u=-1<(t=e).indexOf("SmoothStreamingMedia")?(m&&(n=m.createMssParser(),m.createMssFragmentProcessor(),m.registerEvents()),n):-1<t.indexOf("MPD")||-1<t.indexOf("Patch")?Ur(c).create({debug:h}):n),null!==u){l.setMatchers(u.getMatchers()),l.setIron(u.getIron());try{a=u.parse(e)}catch(e){return void f.trigger(Ve.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ze.A(We.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,We.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(o))})}a?(a.url=i||o,a.originalUrl||(a.originalUrl=a.url),d&&d.get().streaming.enableManifestDurationMismatchFix&&a.mediaPresentationDuration&&1<a.Period_asArray.length&&(t=a.Period_asArray.reduce(function(e,t){return e+t.duration},0),!isNaN(t))&&a.mediaPresentationDuration>t&&(s.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),a.mediaPresentationDuration=t),a.baseUri=r,a.loadedTime=new Date,l.resolveManifestOnLoad(a),f.trigger(Ve.A.ORIGINAL_MANIFEST_LOADED,{originalManifest:e})):f.trigger(Ve.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ze.A(We.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,We.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(o))})}else f.trigger(Ve.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ze.A(We.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,We.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(o))});else f.trigger(Ve.A.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(e,t,n){f.trigger(Ve.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ze.A(We.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,We.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(o,", ").concat(n))})}})},reset:function(){f.off(Ve.A.XLINK_READY,i,t),m&&m.reset(),l&&(l.reset(),l=null),r&&(r.abort(),r=null)}},s=h.getLogger(t),f.on(Ve.A.XLINK_READY,i,t),r=Jt(c).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:p,constants:Ue.A,dashConstants:ge.A,errors:We,requestTimeout:e.settings.get().streaming.manifestRequestTimeout}),l=xi(c).create({errHandler:n,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),u=null,t}jr.__dashjs_factory_name="ManifestLoader";var Gr=_e.A.getClassFactory(jr);function Vr(){var e=this.context,t=(0,Ge.A)(e).getInstance();return{error:function(e){t.trigger(Ve.A.ERROR,{error:e})}}}Vr.__dashjs_factory_name="ErrorHandler";var Hr=_e.A.getSingletonFactory(Vr),Yr=t(7928);function zr(){var e,o,s,r,a,l,t=this.context,u=(0,Ge.A)(t).getInstance();function n(t,e){var r;return e&&e.Period_asArray&&0!==e.Period_asArray.length?(r=[],e.Period_asArray.forEach(function(e){var n,i;r.push((n=e,i=t,new Promise(function(e){var t;n&&n.AdaptationSet_asArray&&0!==n.AdaptationSet_asArray.length?(t=[],n.AdaptationSet_asArray.forEach(function(e){var r,a;o.getIsTypeOf(e,i)&&t.push((r=e,a=i,new Promise(function(e){var n,i;r.Representation_asArray&&0!==r.Representation_asArray.length?(n=[],i=[],r.Representation_asArray.forEach(function(e,t){e=function(e,t){switch(a){case Ue.A.VIDEO:return{codec:t,width:e.width||null,height:e.height||null,framerate:e.frameRate||null,bitrate:e.bandwidth||null};case Ue.A.AUDIO:return n=e.audioSamplingRate||null,{codec:t,bitrate:e.bandwidth||null,samplerate:n};default:return null}var n}(e,o.getCodec(r,t,!1));i.push(e),n.push(s.supportsCodec(e,a))}),Promise.all(n).then(function(n){r.Representation_asArray=r.Representation_asArray.filter(function(e,t){return n[t]||l.debug("[Stream] Codec ".concat(i[t].codec," not supported ")),n[t]}),e()}).catch(function(){e()})):e()})))}),Promise.all(t).then(function(){n.AdaptationSet_asArray=n.AdaptationSet_asArray.filter(function(e){var t=e.Representation_asArray&&0<e.Representation_asArray.length;return t||(u.trigger(Ve.A.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),l.warn("AdaptationSet has been removed because of no supported Representation")),t}),e()}).catch(function(){e()})):e()})))}),Promise.all(r)):Promise.resolve()}return e={setConfig:function(e){e&&(e.adapter&&(o=e.adapter),e.capabilities&&(s=e.capabilities),e.settings&&(r=e.settings),e.customParametersModel)&&(a=e.customParametersModel)},filterUnsupportedFeatures:function(i){return new Promise(function(t){var e=[];e.push(n(Ue.A.VIDEO,i)),e.push(n(Ue.A.AUDIO,i)),Promise.all(e).then(function(){var n,e;r.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(e=i)&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(e){var t=o.getEssentialPropertiesForRepresentation(e);if(t&&0<t.length)for(var n=0;n<t.length;){if(!s.supportsEssentialProperty(t[n]))return l.debug("[Stream] EssentialProperty not supported: "+t[n].schemeIdUri),!1;n+=1}return!0}),e.Representation_asArray&&0<e.Representation_asArray.length)})}),e=i,(n=a.getCustomCapabilitiesFilters())&&0!==n.length&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter(function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter(function(t){return!n.some(function(e){return!e(t)})}),e.Representation_asArray&&0<e.Representation_asArray.length)})}),t()}).catch(function(){t()})})}},l=(0,He.A)(t).getInstance().getLogger(e),e}zr.__dashjs_factory_name="CapabilitiesFilter";var Wr=_e.A.getSingletonFactory(zr);function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Kr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Kr(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Kr(e)?e:String(e)}(i.key),i)}}e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},Qr&&qr(e.prototype,Qr),Xr&&qr(e,Xr),Object.defineProperty(e,"prototype",{writable:!1});var Qr,Xr,Jr=e;function Zr(){var l;return{initialize:function(e){if(l=new Jr,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var n=e.substr(t+1).split("&"),i=0,r=n.length;i<r;++i){var a,o=n[i],s=o.indexOf("=");-1!==s&&(a=o.substring(0,s),l.hasOwnProperty(a))&&(l[a]=o.substr(s+1))}},getURIFragmentData:function(){return l}}}Zr.__dashjs_factory_name="URIFragmentModel";var $r=_e.A.getSingletonFactory(Zr);function ea(){var t,e=this.context,n=(0,Ge.A)(e).getInstance();return{getValue:function(){return t},setValue:function(e){(t=e)&&n.trigger(Ve.A.MANIFEST_LOADED,{data:e})}}}ea.__dashjs_factory_name="ManifestModel";var ta=_e.A.getSingletonFactory(ea);function na(){var e,n,i,r,t=this.context,a=(0,ye.A)(t).getInstance();function o(e,t){return isNaN(e)?0:0<e?(t&&n.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e<-.5?(t&&n.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):e}function s(e,t){return isNaN(e)?0:e<0?(t&&n.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):1<e?(t&&n.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):e}function l(){var e=0<a.get().streaming.buffer.stableBufferTime?a.get().streaming.buffer.stableBufferTime:a.get().streaming.buffer.fastSwitchEnabled?20:12,t=i.getLiveDelay();return!isNaN(t)&&0<t?Math.min(e,t):e}return e={getCatchupMaxDrift:function(){var e;return!isNaN(a.get().streaming.liveCatchup.maxDrift)&&0<a.get().streaming.liveCatchup.maxDrift?a.get().streaming.liveCatchup.maxDrift:(e=r.getServiceDescriptionSettings())&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&0<e.liveCatchup.maxDrift?e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==a.get().streaming.liveCatchup.enabled?a.get().streaming.liveCatchup.enabled:i.getInitialCatchupModeActivated()},getStableBufferTime:l,getInitialBufferLevel:function(){var e=a.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(l(),e)},getRetryAttemptsForType:function(e){var t=isNaN(a.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:a.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return i.getLowLatencyModeEnabled()?a.get().streaming.retryAttempts[e]*t:a.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(a.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:a.get().streaming.retryIntervals.lowLatencyReductionFactor;return i.getLowLatencyModeEnabled()?a.get().streaming.retryIntervals[e]/t:a.get().streaming.retryIntervals[e]},getCatchupPlaybackRates:function(e){var t,n=a.get().streaming.liveCatchup.playbackRate;return isNaN(n.min)&&isNaN(n.max)?!(t=r.getServiceDescriptionSettings())||!t.liveCatchup||isNaN(t.liveCatchup.playbackRate.min)&&isNaN(t.liveCatchup.playbackRate.max)?{min:-.5,max:.5}:{min:o((t=t.liveCatchup.playbackRate).min,e),max:s(t.max,e)}:{min:o(n.min,e),max:s(n.max,e)}},getAbrBitrateParameter:function(e,t){try{var n,i=a.get().streaming.abr[e][t];return isNaN(i)||-1===i?(n=r.getServiceDescriptionSettings())&&n[e]&&!isNaN(n[e][t])?n[e][t]:-1:i}catch(e){return-1}},setConfig:function(e){e.playbackController&&(i=e.playbackController),e.serviceDescriptionController&&(r=e.serviceDescriptionController)},reset:function(){}},n=(0,He.A)(t).getInstance().getLogger(e),e}na.__dashjs_factory_name="MediaPlayerModel";var ia=_e.A.getSingletonFactory(na),ra=t(4986);function aa(e){var t=(e=e||{}).abrController,n=e.switchHistory,i=e.droppedFramesHistory,r=e.currentRequest,a=e.useBufferOccupancyABR,o=e.useL2AABR,s=e.useLoLPABR,l=e.streamProcessor?e.streamProcessor.getScheduleController():null,u=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,c=e.videoModel||null;function h(){return u?u.mediaInfo:null}return{getMediaType:function(){var e=h();return e?e.type:null},getMediaInfo:h,getDroppedFramesHistory:function(){return i},getCurrentRequest:function(){return r},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=h();return e?e.streamInfo:null},getScheduleController:function(){return l},getAbrController:function(){return t},getRepresentationInfo:function(){return u},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return o},useLoLPABR:function(){return s},getVideoModel:function(){return c}}}aa.__dashjs_factory_name="RulesContext";var oa=_e.A.getClassFactory(aa),sa=t(9783);function la(){var r=[],a=[];return{push:function(e){e.newValue===sa.A.NO_CHANGE&&(e.newValue=e.oldValue),r[e.oldValue]||(r[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,t=n?-t:0,i=n?0:1;r[e.oldValue].drops+=n,r[e.oldValue].dropSize+=t,r[e.oldValue].noDrops+=i,a.push({idx:e.oldValue,noDrop:i,drop:n,dropSize:t}),8<a.length&&(e=a.shift(),r[e.idx].drops-=e.drop,r[e.idx].dropSize-=e.dropSize,r[e.idx].noDrops-=e.noDrop)},getSwitchRequests:function(){return r},reset:function(){r=[],a=[]}}}la.__dashjs_factory_name="SwitchRequestHistory";var ua=_e.A.getClassFactory(la);function ca(){var a={},o={},s={};return{push:function(e,t,n){var i,r;t&&(a[e]||(a[e]=[],o[e]=0,s[e]=0),r=n&&n.droppedVideoFrames?n.droppedVideoFrames:0,n=n&&n.totalVideoFrames?n.totalVideoFrames:0,i=r-o[e],o[e]=r,r=n-s[e],s[e]=n,n=a[e],isNaN(t)||(n[t]?(n[t].droppedVideoFrames+=i,n[t].totalVideoFrames+=r):n[t]={droppedVideoFrames:i,totalVideoFrames:r}))},getFrameHistory:function(e){return a[e]},clearForStream:function(e){try{delete a[e],delete o[e],delete s[e]}catch(e){}},reset:function(){a={},o={},s={}}}}ca.__dashjs_factory_name="DroppedFramesHistory";var ha=_e.A.getClassFactory(ca);function da(e){var c,h,d,f,t=this.context,p=3,m=4,g=4,_=1.3,y=1.3,v=(e=e||{}).settings,s=(0,Ge.A)(t).getInstance();function l(e,t,n,i){var r=Math.pow(.5,n/i.fast),r=(e.fastEstimate=(1-r)*t+r*e.fastEstimate,Math.pow(.5,n/i.slow));e.slowEstimate=(1-r)*t+r*e.slowEstimate,e.totalWeight+=n}function n(e,t,n){return v.get().streaming.abr.movingAverageMethod!==Ue.A.MOVING_AVERAGE_SLIDING_WINDOW?(s=t,u=(i=e)?E.throughputHalfLife:E.latencyHalfLife,!(s=(i?d:f)[s])||s.totalWeight<=0?NaN:(l=s.fastEstimate/(1-Math.pow(.5,s.totalWeight/u.fast)),s=s.slowEstimate/(1-Math.pow(.5,s.totalWeight/u.slow)),i?Math.min(l,s):Math.max(l,s))):(r=e,a=t,o=n,u=function(){var e,t=r?(e=c[a],o?p:m):(e=h[a],g);if(e){if(t>=e.length)t=e.length;else if(r)for(var n=1;n<t;++n){var i=e[e.length-n]/e[e.length-n-1];if((y<=i||i<=1/_)&&(t+=1)===e.length)break}}else t=0;return t}(),i=(r?c:h)[a],0!==u&&i&&0!==i.length?(i=i.slice(-u)).reduce(function(e,t){return e+t})/i.length:NaN);var r,a,o,i,s,l,u}function i(e,t){return n(!0,e,t)}function u(e){c[e]=c[e]||[],h[e]=h[e]||[],d[e]=d[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},f[e]=f[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function r(){c={},h={},d={},f={}}var E={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}};return r(),{push:function(e,t,n){if(t.trace&&t.trace.length){var i=t.tresponse.getTime()-t.trequest.getTime()||1,r=t._tfinish.getTime()-t.tresponse.getTime()||1,a=t.trace.reduce(function(e,t){return e+t.b[0]},0),o=0;if(0!==(n=t._fileLoaderType&&t._fileLoaderType===Ue.A.FILE_LOADER_TYPES.FETCH?t.trace.reduce(function(e,t){return e+t.d},0):n?r:i+r)&&(o=Math.round(8*a/n)),t.cmsd&&(a=t.cmsd.dynamic&&t.cmsd.dynamic.etp?t.cmsd.dynamic.etp:null)&&0<(n=v.get().streaming.cmsd.abr.etpWeightRatio)&&n<=1&&(o=o*(1-n)+a*n),u(e),a=r,(n=e)===Ue.A.VIDEO?a<v.get().streaming.cacheLoadThresholds[Ue.A.VIDEO]:n===Ue.A.AUDIO&&a<v.get().streaming.cacheLoadThresholds[Ue.A.AUDIO]){if(0<c[e].length&&!c[e].hasCachedEntries)return;c[e].hasCachedEntries=!0}else c[e]&&c[e].hasCachedEntries&&(delete c[n=e],delete h[n],delete d[n],delete f[n],u(n));c[e].push(o),s.trigger(Ye.A.THROUGHPUT_MEASUREMENT_STORED,{throughput:o,mediaType:e,httpRequest:t}),20<c[e].length&&c[e].shift(),h[e].push(i),20<h[e].length&&h[e].shift(),l(d[e],o,.001*r,E.throughputHalfLife),l(f[e],i,1,E.latencyHalfLife)}},getAverageThroughput:i,getSafeAverageThroughput:function(e,t){e=i(e,t);return isNaN(e)||(e*=v.get().streaming.abr.bandwidthSafetyFactor),e},getAverageLatency:function(e){return n(!1,e)},reset:r}}da.__dashjs_factory_name="ThroughputHistory";var fa=_e.A.getClassFactory(da);function pa(){var u,g,c,a,_,h,y,d,o,v,E,A,b,f,T,t,S,p,m,w,R,I,C,L,P,D,k,O=this.context,n=(0,He.A)(O).getInstance(),M=(0,Ge.A)(O).getInstance();function e(){_={},h={},d={},y={},w={},C={},L={},P={},void 0===v&&(v=!1),R&&R.reset(),I=R=m=void 0,clearTimeout(o),o=null}function i(e){var t,n,i=e.request.mediaType,r=e.streamId;i&&r&&y[r]&&k.get().streaming.abr.autoSwitchBitrate[i]&&(t=y[r][i])&&(n=oa(O).create({abrController:u,streamProcessor:t,currentRequest:e.request,useBufferOccupancyABR:C[i],useL2AABR:L[i],useLoLPABR:P[i],videoModel:f}),(n=c.shouldAbandonFragment(n,r)).quality>sa.A.NO_CHANGE)&&t.getFragmentModel().getRequests({state:fe.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(d[r][i].state=je.A.ABANDON_LOAD,w[r][i].reset(),w[r][i].push({oldValue:F(i,r),newValue:n.quality,confidence:1,reason:n.reason}),j(i,a.getActiveStreamInfo(),n.quality,n.reason),clearTimeout(o),o=setTimeout(function(){d[r][i].state=je.A.ALLOW_LOAD,o=null},k.get().streaming.abandonLoadTimeout))}function r(e){e.mediaType===Ue.A.VIDEO&&(void 0!==m&&R.push(e.streamId,m,f.getPlaybackQuality()),m=e.newQuality)}function s(e){var t,n;if(e.metric!==je.A.HTTP_REQUEST||!e.value||e.value.type!==ve.G.MEDIA_SEGMENT_TYPE||e.mediaType!==Ue.A.AUDIO&&e.mediaType!==Ue.A.VIDEO||I.push(e.mediaType,e.value,k.get().streaming.abr.useDeadTimeLatency),e.metric===je.A.BUFFER_LEVEL&&(e.mediaType===Ue.A.AUDIO||e.mediaType===Ue.A.VIDEO)&&(t=e.mediaType,n=.001*e.value.level,k.get().streaming.abr.ABRStrategy===Ue.A.ABR_STRATEGY_DYNAMIC)){var i=t,e=n;try{var r=T.getStableBufferTime(),a=.5*r,o=C[i],s=(o?a:r)<e;(C[i]=s)!==o&&(s?g.info("["+i+"] switching from throughput to buffer occupancy ABR rule (buffer: "+e.toFixed(3)+")."):g.info("["+i+"] switching from buffer occupancy to throughput ABR rule (buffer: "+e.toFixed(3)+")."))}catch(i){g.error(i)}}}function x(e,t){try{var n;return _[t]=_[t]||{},_[t].hasOwnProperty(e)||(_[t][e]=0),h=e,p=_[d=t][h],m=p,n=m=y[d]&&y[d][h]&&(void 0!==(f=N(h,d))&&(m=Math.max(p,f)),void 0!==(p=function(e,t){try{var n=T.getAbrBitrateParameter("maxBitrate",e);return-1<n?B(y[t][e].getMediaInfo(),n,t):void 0}catch(e){}}(h,d)))?Math.min(m,p):m,l=n,u=e,c=_[t][u],u=k.get().streaming.abr.maxRepresentationRatio[u],n=function(e,t,n){if(t!==Ue.A.VIDEO||!k.get().streaming.abr.limitBitrateByPortal||!y[n]||!y[n][t])return e;v||U();var n=y[n][t].getStreamInfo(),i=b.getAdaptationForType(n.index,t,n).Representation_asArray,r=e;if(0<E&&0<A){for(;0<r&&i[r]&&E<i[r].width&&E-i[r-1].width<i[r].width-E;)--r;for(;r<i.length-1&&i[r].width===i[r+1].width;)r+=1}return r}(n=isNaN(u)||1<=u||u<0?l:Math.min(l,Math.round(c*u)),e,t),k.get().streaming.cmsd.enabled&&k.get().streaming.cmsd.abr.applyMb&&(i=n,a=t,n="video"!==(r=e)||(o=S.getMaxBitrate(r))<0?i:(o-=(s=V(a,"audio",F("audio",a)))?s.bitrate/1e3:0,s=B(y[a][r].getMediaInfo(),o,a),g.debug("Stream ID: "+a+" ["+r+"] Apply max bit rate from CMSD: "+o),Math.min(i,s))),n}catch(e){}var i,r,a,o,s,l,u,c,h,d,f,p,m}function N(e,t){try{var n=e,i=t;try{var r,a,o,s=T.getAbrBitrateParameter("minBitrate",n);if(-1<s)return(a=l(r=y[i][n].getMediaInfo()))[o=B(r,s,i)]&&o<a.length-1&&a[o].bitrate<1e3*s&&o++,o}catch(n){}}catch(e){}}function F(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{return t=t||a.getActiveStreamInfo().id,e&&y[t]&&y[t][e]&&t?(h[t]=h[t]||{},h[t].hasOwnProperty(e)||(h[t][e]=0),h[t][e]):0}catch(e){return 0}}function j(e,t,n){var i,r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;t&&t.id&&e&&(i=F(e,t=t.id),(0,Ee.zQ)(n),r=x(e,t),n!==i)&&0<=n&&n<=r&&G(e,i,n,r,a,t)}function G(e,t,n,i,r,a){var o,s,l;e&&y[a]&&y[a][e]&&(s=(o=y[a][e].getStreamInfo())&&o.manifestInfo&&o.manifestInfo.isDynamic,l=D.getCurrentBufferLevel(e),g.info("Stream ID: "+a+" ["+e+"] switch from "+t+" to "+n+"/"+i+" (buffer: "+l+") "+(r?JSON.stringify(r):".")),h[a]=h[a]||{},l=V(a,e,h[a][e]=n),M.trigger(Ve.A.QUALITY_CHANGE_REQUESTED,{oldQuality:t,newQuality:n,reason:r,streamInfo:o,bitrateInfo:l,maxIdx:i,mediaType:e},{streamId:o.id,mediaType:e}),a=I.getAverageThroughput(e,s),isNaN(a)||p.setSavedBitrateSettings(e,a))}function V(e,t,n){return t&&y&&y[e]&&y[e][t]&&l(y[e][t].getMediaInfo())[n]||null}function B(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,n=e&&e.type?y[n][e.type].getRepresentationInfo():null;if(k.get().streaming.abr.useDeadTimeLatency&&i&&n&&n.fragmentDuration){n=n.fragmentDuration;if(n<(i/=1e3))return 0;t*=1-i/n}for(var r=l(e),a=r.length-1;0<=a;a--)if(1e3*t>=r[a].bitrate)return a;return 0}function l(e){var t=[];if(e&&e.bitrateList)for(var n,i=e.bitrateList,r=e.type,a=0,o=i.length;a<o;a++)(n=new mn).mediaType=r,n.qualityIndex=a,n.bitrate=i[a].bandwidth,n.width=i[a].width,n.height=i[a].height,n.scanType=i[a].scanType,t.push(n);return t}function U(){var e;f&&(e=k.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,E=f.getClientWidth()*e,A=f.getClientHeight()*e)}return u={initialize:function(){R=ha(O).create(),I=fa(O).create({settings:k}),(c=(0,ra.A)(O).create({dashMetrics:D,customParametersModel:t,mediaPlayerModel:T,settings:k})).initialize(),M.on(Ye.A.QUALITY_CHANGE_RENDERED,r,u),M.on(Ye.A.METRIC_ADDED,s,u),M.on(Ve.A.LOADING_PROGRESS,i,u)},isPlayingAtTopQuality:function(e){var e=e?e.id:null,t=F(Ue.A.AUDIO,e),n=F(Ue.A.VIDEO,e);return t===x(Ue.A.AUDIO,e)&&n===x(Ue.A.VIDEO,e)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,e=e.representationCount-1;return _[n]=_[n]||{},_[n][t]=e},clearDataForStream:function(e){R&&R.clearForStream(e),y[e]&&delete y[e],w[e]&&delete w[e],d[e]&&delete d[e]},getThroughputHistory:function(){return I},getBitrateList:l,getQualityForBitrate:B,getTopBitrateInfoFor:function(e){var t,n=(n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||a.getActiveStreamInfo().id;return e&&y&&y[n]&&y[n][e]&&(t=x(e,n),l(y[n][e].getMediaInfo())[t])||null},getMinAllowedIndexFor:N,getMaxAllowedIndexFor:x,getInitialBitrateFor:function(e,t){var n,i,r;if(p&&p.hasOwnProperty("getSavedBitrateSettings"))return e===Ue.A.TEXT?NaN:(n=p.getSavedBitrateSettings(e),r=T.getAbrBitrateParameter("initialBitrate",e),i=k.get().streaming.abr.initialRepresentationRatio[e],-1===r?-1<i?(t=y[t][e].getStreamInfo(),t=b.getAdaptationForType(t.index,e,t).Representation_asArray,Array.isArray(t)?t[Math.max(Math.round(t.length*i)-1,0)].bandwidth/1e3:0):isNaN(n)?e===Ue.A.VIDEO?1e3:100:n:r);throw new Error(Ue.A.MISSING_CONFIG_ERROR)},getQualityFor:F,getAbandonmentStateFor:function(e,t){return d[e]&&d[e][t]?d[e][t].state:null},setPlaybackQuality:j,checkPlaybackQuality:function(e,t){try{var n,i,r,a,o,s,l;return e&&y&&y[t]&&y[t][e]?(R&&(n=f.getPlaybackQuality())&&R.push(t,m,n),!!k.get().streaming.abr.autoSwitchBitrate[e]&&(i=F(e,t),r=oa(O).create({abrController:u,switchHistory:w[t][e],droppedFramesHistory:R,streamProcessor:y[t][e],currentValue:i,useBufferOccupancyABR:C[e],useL2AABR:L[e],useLoLPABR:P[e],videoModel:f}),a=N(e,t),o=x(e,t),l=(s=c.getMaxQuality(r)).quality,o<(l=void 0!==a&&(l>sa.A.NO_CHANGE?l:i)<a?a:l)&&(l=o),w[t][e].push({oldValue:i,newValue:l}),l>sa.A.NO_CHANGE)&&l!==i&&(d[t][e].state===je.A.ALLOW_LOAD||l<i)&&(G(e,i,l,o,s.reason,t),!0)):!1}catch(e){return!1}},setElementSize:U,setWindowResizeEventCalled:function(e){v=e},registerStreamType:function(e,t){var n=t.getStreamInfo().id;y[n]||(y[n]={}),w[n]||(w[n]={}),d[n]||(d[n]={}),w[n][e]=ua(O).create(),y[n][e]=t,d[n][e]={},d[n][e].state=je.A.ALLOW_LOAD,t=e,(n=k.get().streaming.abr.ABRStrategy)===Ue.A.ABR_STRATEGY_L2A?(C[t]=!1,P[t]=!1,L[t]=!0):n===Ue.A.ABR_STRATEGY_LoLP?(C[t]=!1,P[t]=!0,L[t]=!1):n===Ue.A.ABR_STRATEGY_BOLA?(C[t]=!0,P[t]=!1,L[t]=!1):n===Ue.A.ABR_STRATEGY_THROUGHPUT?(C[t]=!1,P[t]=!1,L[t]=!1):n===Ue.A.ABR_STRATEGY_DYNAMIC&&(C[t]=!(!C||!C[t])&&C[t],P[t]=!1,L[t]=!1),e===Ue.A.VIDEO&&U()},unRegisterStreamType:function(e,t){try{y[e]&&y[e][t]&&delete y[e][t],w[e]&&w[e][t]&&delete w[e][t],d[e]&&d[e][t]&&delete d[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(a=e.streamController),e.domStorage&&(p=e.domStorage),e.mediaPlayerModel&&(T=e.mediaPlayerModel),e.customParametersModel&&(t=e.customParametersModel),e.cmsdModel&&(S=e.cmsdModel),e.dashMetrics&&(D=e.dashMetrics),e.adapter&&(b=e.adapter),e.videoModel&&(f=e.videoModel),e.settings)&&(k=e.settings)},reset:function(){e(),M.off(Ve.A.LOADING_PROGRESS,i,u),M.off(Ye.A.QUALITY_CHANGE_RENDERED,r,u),M.off(Ye.A.METRIC_ADDED,s,u),c&&c.reset()}},g=n.getLogger(u),e(),u}pa.__dashjs_factory_name="AbrController";var ma=_e.A.getSingletonFactory(pa),ga=(ma.QUALITY_DEFAULT=0,_e.A.updateSingletonFactory(pa.__dashjs_factory_name,ma),ma),_a=new Map([[Ue.A.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[Ue.A.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[Ue.A.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[Ue.A.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function ya(){var e,t,o,n,i,r,a,s,l=this.context,u=(0,Ge.A)(l).getInstance(),c=[];function h(){o&&(o.playbackRate=1,o.removeEventListener("canplay",h))}function d(){return 0<c.length}function f(){var e;o&&d()&&0===o.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),o.dispatchEvent(e))}function p(e,t){o&&o.addEventListener(e,t)}function m(e,t){o&&o.removeEventListener(e,t)}function g(){return o?o.readyState:NaN}function _(){return o?o.buffered:null}function y(e,t,n,i,r){if(o)for(var a=0;a<o.textTracks.length;a++)if(o.textTracks[a].kind===e&&(!t||o.textTracks[a].label==t)&&o.textTracks[a].language===n&&o.textTracks[a].isTTML===i&&o.textTracks[a].isEmbedded===r)return o.textTracks[a];return null}function v(e,t){return e===Ue.A.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||g()>=e?(t(),null):(i=_a.get(e),r=t,p(i,n),{func:n,event:i});function n(){m(i,n),r(i)}var i,r}return e={addEventListener:p,addTextTrack:function(e,t,n,i,r){var a;return o?((a=y(e,t,n,i,r))||((a=o.addTextTrack(e,t,n)).isEmbedded=r,a.isTTML=i),a):null},appendChild:function(e){o&&(o.appendChild(e),void 0!==e.isTTML)&&(o.textTracks[o.textTracks.length-1].isTTML=e.isTTML,o.textTracks[o.textTracks.length-1].isEmbedded=e.isEmbedded)},getBufferRange:_,getClientHeight:function(){return o?o.clientHeight:NaN},getClientWidth:function(){return o?o.clientWidth:NaN},getElement:function(){return o},getEnded:function(){return o?o.ended:null},getPlaybackQuality:function(){var e,t;return o?(e="webkitDroppedFrameCount"in o&&"webkitDecodedFrameCount"in o,t=null,"getVideoPlaybackQuality"in o?t=o.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:o.webkitDroppedFrameCount,totalVideoFrames:o.webkitDroppedFrameCount+o.webkitDecodedFrameCount,creationTime:new Date}),t):null},getPlaybackRate:function(){return o?o.playbackRate:null},getPlayedRanges:function(){return o?o.played:null},getReadyState:g,getSource:function(){return o?o.src:null},getTTMLRenderingDiv:function(){return r},getTextTrack:y,getTextTracks:function(){return o?o.textTracks:[]},getTime:function(){return o?isNaN(n)?o.currentTime:n:null},getVideoHeight:function(){return o?o.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){var e;return o&&(e=o.parentNode.host||o.parentNode)?o.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},getVideoRelativeOffsetTop:function(){var e;return o&&(e=o.parentNode.host||o.parentNode)?o.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoWidth:function(){return o?o.videoWidth:NaN},getVttRenderingDiv:function(){return a},initialize:function(){u.on(Ve.A.PLAYBACK_PLAYING,f,this)},isPaused:function(){return o?o.paused:null},isSeeking:function(){return o?o.seeking||!isNaN(n):null},isStalled:d,pause:function(){o&&(o.pause(),o.autoplay=!1)},play:function(){var e;o&&(o.autoplay=!0,e=o.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&u.trigger(Ve.A.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))})},removeChild:function(e){o&&o.removeChild(e)},removeEventListener:m,reset:function(){clearTimeout(s),u.off(Ve.A.PLAYBACK_PLAYING,f,this)},setCurrentTime:function(e,t){o&&(i&&i.func&&i.event&&m(i.event,i.func),n=e,i=v(Ue.A.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(o)if(o.currentTime!==n)try{n=t?function(e){var t=_(),n=e,i=9999999999;if(t)for(var r=0;r<t.length;r++){var a=t.start(r),o=t.end(r),s=Math.abs(a-e),l=Math.abs(o-e);if(a<=e&&e<=o)return e;s<i&&(i=s,n=a),l<i&&(i=l,n=o)}return n}(n):n,isNaN(n)||(o.currentTime=n),n=NaN}catch(e){0===o.readyState&&e.code===e.INVALID_STATE_ERR&&(s=setTimeout(function(){o.currentTime=n,n=NaN},400))}else n=NaN}))},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(o=e)&&(o.preload="auto")},setPlaybackRate:function(e){o&&(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&o.readyState<=2&&0<e?o.addEventListener("canplay",h):o.playbackRate=e)},setSource:function(e){o&&(e?o.src=e:(o.removeAttribute("src"),o.load()))},setStallState:function(e,t){var n;e=e,t?null!==(n=e)&&o&&!o.seeking&&-1===c.indexOf(n)&&c.push(n):(n=e,e=c.indexOf(n),null!==n&&-1!==e&&c.splice(e,1))},setTTMLRenderingDiv:function(e){(r=e).style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0},setVttRenderingDiv:function(e){a=e},waitForReadyState:v,setDisableRemotePlayback:function(e){o&&(o.disableRemotePlayback=e)}},t=(0,He.A)(l).getInstance().getLogger(e),n=NaN,e}ya.__dashjs_factory_name="VideoModel";var va=_e.A.getSingletonFactory(ya),Ea=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],Aa="dashjs_?_bitrate",ba="dashjs_?_settings",Ta="localStorage",Sa="lastBitrate",wa="lastMediaSettings";function Ra(e){var o,n,t=this.context,s=(e=e||{}).settings;function i(e){if(void 0===n){var t;n=!1;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return o.warn("DOMStorage access denied: "+e.message),n}if(t&&(e===Ta||"sessionStorage"===e))try{t.setItem("1","1"),t.removeItem("1"),n=!0}catch(e){o.warn("DOMStorage is supported, but cannot be used: "+e.message)}}return n}function r(){return 6e5*Math.round((new Date).getTime()/6e5)}function l(e,t){return i(e)&&s.get().streaming[t+"CachingInfo"].enabled}function u(){if(!s)throw new Error(Ue.A.MISSING_CONFIG_ERROR)}return e={getSavedBitrateSettings:function(e){if(u(),!s.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var t=NaN;if(l(Ta,Sa)){var n=Aa.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},r=(new Date).getTime()-parseInt(i.timestamp,10)>=s.get().streaming.lastBitrateCachingInfo.ttl||!1,a=parseFloat(i.bitrate);isNaN(a)||r?r&&localStorage.removeItem(n):(t=a,o.debug("Last saved bitrate for "+e+" was "+a))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(l(Ta,Sa)&&t){var n=Aa.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:r()}))}catch(e){o.error(e.message)}}},getSavedMediaSettings:function(e){if(u(),!s.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var t=null;if(l(Ta,wa)){var n=ba.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},r=(new Date).getTime()-parseInt(i.timestamp,10)>=s.get().streaming.lastMediaSettingsCachingInfo.ttl||!1,t=i.settings;r&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(l(Ta,wa)){var n=ba.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:r()}))}catch(e){o.error(e.message)}}}},o=(0,He.A)(t).getInstance().getLogger(e),i(Ta)&&Ea.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){o.error(e.message)}}}),e}Ra.__dashjs_factory_name="DOMStorage";var Ia=_e.A.getSingletonFactory(Ra),Ca=t(1061),La=t(1365);function Pa(){var t,A,n,b,i,r,a,l,o,s,u,c,h,e=this.context;function d(e,t,n){n({segments:e,representation:t,error:e?void 0:new ze.A(o.SEGMENT_BASE_LOADER_ERROR_CODE,o.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function T(e){var t;if(e.url)return(t=new S.A).setInfo(e),t}return t={setConfig:function(e){e.baseURLController&&(h=e.baseURLController),e.dashMetrics&&(r=e.dashMetrics),e.mediaPlayerModel&&(a=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler),e.boxParser&&(b=e.boxParser),e.debug&&(A=e.debug.getLogger(t)),e.requestModifier&&(i=e.requestModifier),e.errors&&(o=e.errors),e.urlUtils&&(c=e.urlUtils),e.constants&&(s=e.constants),e.dashConstants&&(u=e.dashConstants)},initialize:function(){l=Jt(e).create({errHandler:n,dashMetrics:r,mediaPlayerModel:a,requestModifier:i,boxParser:b,errors:o,urlUtils:c,constants:s,dashConstants:u})},loadInitialization:function(t,n){return new Promise(function(e){!function t(n,i,r,e){var a,o=n?h.resolve(n.path):null,s=e||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:i},e=(A.debug("Start searching for initialization."),T(s));l.load({request:e,success:function(e){if(s.bytesLoaded=s.range.end,!(a=b.findInitRange(e)))return s.range.end=s.bytesLoaded+s.bytesToLoad,t(n,i,r,s);n.range=a,r(n)},error:function(){r(n)}}),A.debug("Perform init search: "+s.url)}(t,n,e)})},loadSegments:function(t,n,i){return new Promise(function(e){!function f(p,m,e,g,_,t){!e||void 0!==e.start&&void 0!==e.end||(e=(n=e?e.toString().split("-"):null)?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null),_=_||d;var y,v=null,n=!!e,i=p?h.resolve(p.path):null,E={init:!1,url:i?i.url:void 0,range:n?e:{start:0,end:1500},searching:!n,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500,mediaType:m},i=T(E);l.load({request:i,success:function(e){var t=E.bytesToLoad,n=e.byteLength;if(E.bytesLoaded=E.range.end-E.range.start,v=b.parse(e),(y=v.getBox("sidx"))&&y.isComplete){var i=y.references;if(d=null!=i&&0<i.length?1===i[0].reference_type:d){A.debug("Initiate multiple SIDX load."),E.range.end=E.range.start+y.size;for(var r,a,o=[],s=0,l=(y.offset||E.range.start)+y.size,u=function(e){e?(o=o.concat(e),++s>=h&&(o.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),_(o,p,g))):_(null,p,g)},c=0,h=i.length;c<h;c++)a=(r=l)+i[c].referenced_size-1,l+=i[c].referenced_size,f(p,m,{start:r,end:a},g,u,E)}else A.debug("Parsing segments from SIDX. representation "+m+" - id: "+p.id+" for range : "+E.range.start+" - "+E.range.end),e=function(){for(var e,t,n,i=y.references,r=i.length,a=y.timescale,o=y.earliest_presentation_time,s=E.range.start+y.offset+y.first_offset+y.size,l=[],u=0;u<r;u++)t=i[u].subsegment_duration,n=i[u].referenced_size,(e=new La.A).duration=t,e.startTime=o,e.timescale=a,e.mediaRange=s+"-"+(s+n-1),l.push(e),o+=t,s+=n;return l}(),_(e,p,g)}else{if(y)E.range.start=y.offset||E.range.start,E.range.end=E.range.start+(y.size||t);else{if(n<E.bytesLoaded)return void _(null,p,g);var d=v.getLastBox();d&&d.size?(E.range.start=d.offset+d.size,E.range.end=E.range.start+t):E.range.end+=t}f(p,m,E.range,g,null,E)}},error:function(){_(null,p,g)}}),A.debug("Perform SIDX load for type ".concat(m," : ").concat(E.url," with range ").concat(E.range.start," - ").concat(E.range.end))}(t,n,i,e)})},reset:function(){l&&(l.abort(),l=null)}}}Pa.__dashjs_factory_name="SegmentBaseLoader";var Da=_e.A.getSingletonFactory(Pa);function ka(e){e=e||{};var n,l=new DataView(e.data),u=0;function i(e,t){var n=!0,i=0;if(void 0===t&&(t=!1),i=16777215<e.tag?(l.getUint32(u)!==e.tag&&(n=!1),4):65535<e.tag?(256*l.getUint16(u)+l.getUint8(u+2)!==e.tag&&(n=!1),3):255<e.tag?(l.getUint16(u)!==e.tag&&(n=!1),2):(l.getUint8(u)!==e.tag&&(n=!1),1),n||!e.required||t)return n&&(u+=i),n;throw new Error("required tag not found")}function r(e){for(var t=1,n=128,i=-1,r=0,a=l.getUint8(u),o=0,o=0;o<8;o+=1){if((a&n)===n){r=void 0===e?a&~n:a,i=o;break}n>>=1}for(o=0;o<i;o+=1,t+=1)r=r<<8|255&l.getUint8(u+t);return u+=t,r}return n={getPos:function(){return u},setPos:function(e){u=e},consumeTag:i,consumeTagAndSize:function(e,t){e=i(e,t);return e&&r(),e},parseTag:function(e){var t;return i(e),t=r(),n[e.parse](t)},skipOverElement:function(e,t){e=i(e,t);return e&&(t=r(),u+=t),e},getMatroskaCodedNum:r,getMatroskaFloat:function(e){var t;switch(e){case 4:t=l.getFloat32(u),u+=4;break;case 8:t=l.getFloat64(u),u+=8}return t},getMatroskaUint:function(e){if(4<e){for(var t=e,n=Math.floor(Number.MAX_SAFE_INTEGER/256),i=0,r=0;r<t;r+=1){if(n<i)throw new Error("Value exceeds safe integer limit");i*=256;var a=l.getUint8(u+r);if(i>Number.MAX_SAFE_INTEGER-a)throw new Error("Value exceeds safe integer limit");i+=a}return u+=t,i}for(var o=0,s=0;s<e;s+=1)o=(o<<=8)|255&l.getUint8(u+s);return u+=e,o>>>0},moreData:function(){return u<l.byteLength}}}ka.__dashjs_factory_name="EBMLParser";var Oa=_e.A.getClassFactory(ka);function Ma(){var t,g,_,n,i,r,a,y,v,o,E=this.context;function A(e){var t=new S.A;return t.setInfo(e),t}return _={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(Ue.A.MISSING_CONFIG_ERROR);o=e.baseURLController,r=e.dashMetrics,a=e.mediaPlayerModel,n=e.errHandler,v=e.errors,g=e.debug.getLogger(t),i=e.requestModifier},initialize:function(){y=Jt(E).create({errHandler:n,dashMetrics:r,mediaPlayerModel:a,requestModifier:i,errors:v})},loadInitialization:function(i,r){return new Promise(function(e){var t=i?o.resolve(i.path):null,n=i?i.range.split("-"):null,n={range:{start:n?parseFloat(n[0]):null,end:n?parseFloat(n[1]):null},request:null,url:t?t.url:void 0,init:!0,mediaType:r};g.info("Start loading initialization."),t=A(n),y.load({request:t,success:function(){e(i)},error:function(){e(i)}}),g.debug("Perform init load: "+n.url)})},loadSegments:function(p,t,m){return new Promise(function(d){var e=p?o.resolve(p.path):null,f=e?e.url:void 0,e=A({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:null,url:f,init:!1,mediaType:t});g.debug("Parsing ebml header"),y.load({request:e,success:function(e){function t(e){d({segments:e,representation:p,error:e?void 0:new ze.A(v.SEGMENT_BASE_LOADER_ERROR_CODE,v.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}var n=f,i=m;if((e=e)&&0!==e.byteLength){var r,a,o,s,l=Oa(E).create({data:e}),e=i?i.split("-"):null,u={url:n,range:{start:e?parseFloat(e[0]):null,end:e?parseFloat(e[1]):null},request:null};for(g.debug("Parse EBML header: "+u.url),l.skipOverElement(_.EBML),l.consumeTag(_.Segment),o=l.getMatroskaCodedNum(),o+=l.getPos(),s=l.getPos();l.moreData()&&!l.consumeTagAndSize(_.Segment.Info,!0);)if(!(l.skipOverElement(_.Segment.SeekHead,!0)||l.skipOverElement(_.Segment.Tracks,!0)||l.skipOverElement(_.Segment.Cues,!0)||l.skipOverElement(_.Void,!0)))throw new Error("no valid top level element found");for(;void 0===r;){var c=l.getMatroskaCodedNum(!0),h=l.getMatroskaCodedNum();c===_.Segment.Info.Duration.tag?r=l[_.Segment.Info.Duration.parse](h):l.setPos(l.getPos()+h)}i=A(u),y.load({request:i,success:function(c){a=function(e,t,n){for(var i,r,a,o,s=[],l=0,u=(i=function(e){var t,n,i=[],r=Oa(E).create({data:e});for(r.consumeTagAndSize(_.Segment.Cues);r.moreData()&&r.consumeTagAndSize(_.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=r.parseTag(_.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];r.moreData()&&r.consumeTag(_.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=r.getMatroskaCodedNum(),o=r.getPos();if((n={}).Track=r.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===n.Track)throw new Error("Cue track cannot be 0");n.ClusterPosition=r.parseTag(_.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(n),r.setPos(o+a)}if(0===t.CueTracks.length)throw new Error("Mandatory cuetrack not found");i.push(t)}if(0===i.length)throw new Error("mandatory cuepoint not found");return i}(c)).length;l<u;l+=1)r=new La.A,a=l<i.length-1?i[l+1].CueTime-i[l].CueTime:n-i[l].CueTime,r.duration=a,r.startTime=i[l].CueTime,r.timescale=1e3,a=i[l].CueTracks[0].ClusterPosition+e,o=l<i.length-1?i[l+1].CueTracks[0].ClusterPosition+e-1:t-1,r.mediaRange=a+"-"+o,s.push(r);return g.debug("Parsed cues: "+s.length+" cues."),s}(s,o,r),t(a)},error:function(){g.error("Download Error: Cues "+u.url),t(null)}}),g.debug("Perform cues load: "+u.url+" bytes="+u.range.start+"-"+u.range.end)}else t(null)},error:function(){d({representation:p,error:new ze.A(v.SEGMENT_BASE_LOADER_ERROR_CODE,v.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){y&&(y.abort(),y=null)}}}Ma.__dashjs_factory_name="WebmSegmentBaseLoader";var xa=_e.A.getSingletonFactory(Ma);function Na(e){var t,n,i,r=this.context,a=(e=e||{}).eventBus,o=e.events,s=e.dashMetrics,l=e.mediaPlayerModel,u=e.errHandler,c=e.baseURLController,h=e.debug,d=e.boxParser,f=e.requestModifier,e=e.errors;function p(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return t={initialize:function(){n.initialize(),i.initialize()},getSegmentBaseInitSegment:function(e){return(p(e.representation.mimeType)?i:n).loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return(p(e.mimeType)?i:n).loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){n.reset(),i.reset()}},n=Da(r).getInstance(),i=xa(r).getInstance(),n.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:a,events:o,errors:e,debug:h,boxParser:d,requestModifier:f}),i.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:a,events:o,errors:e,debug:h,requestModifier:f}),t}Na.__dashjs_factory_name="SegmentBaseController";var Fa=_e.A.getSingletonFactory(Na);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Ba(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Ba(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Ba(e)?e:String(e)}(i.key),i)}}d=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},ja&&Ua(d.prototype,ja),Ga&&Ua(d,Ga),Object.defineProperty(d,"prototype",{writable:!1});var d,ja,Ga,Va=d;function Ha(e){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Ha(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Ha(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Ha(e)?e:String(e)}(i.key),i)}}n=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},za&&Ya(n.prototype,za),Wa&&Ya(n,Wa),Object.defineProperty(n,"prototype",{writable:!1});var za,Wa,Ka=n;function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=qa(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=qa(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==qa(e)?e:String(e)}(i.key),i)}}f=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Xa&&Qa(f.prototype,Xa),Ja&&Qa(f,Ja),Object.defineProperty(f,"prototype",{writable:!1});var f,Xa,Ja,Za=f;function $a(e){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=$a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=$a(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==$a(e)?e:String(e)}(i.key),i)}}r=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null},to&&eo(r.prototype,to),no&&eo(r,no),Object.defineProperty(r,"prototype",{writable:!1});var to,no,io=r;function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=ro(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=ro(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==ro(e)?e:String(e)}(i.key),i)}}ao((oo=lo).prototype,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return"text()"===this.path[this.path.length-1].name}},{key:"getMpdTarget",value:function(e,t){for(var i=this,r=null,a=e,o=1,s="MPD";o<this.path.length&&null!==a;)!function(){r=a;var e,t,n=i.path[o];s=n.name,o===i.path.length-1&&(s.startsWith("@")||"text()"===s)||(0===(e=r[s+"_asArray"]||[]).length&&r[s]&&e.push(r[s]),a=n.position?e[n.position]||null:n.attribute?(t=n.attribute,e.filter(function(e){return e[t.name]==t.value})[0]||null):e[0]||null),o++}();return null===a?null:s.startsWith("@")?{name:s.substring(1),leaf:a,target:a}:"text()"===s?{name:"__text",leaf:a,target:a}:{name:s,leaf:a,target:t?r:a}}}]),Object.defineProperty(oo,"prototype",{writable:!1});var oo,so=lo;function lo(e){var i=this;if(!(this instanceof lo))throw new TypeError("Cannot call a class as a function");this.valid="/"==e[0],this.path=e.split("/").filter(function(e){return 0!==e.length}).map(function(e){var t={name:e},n=e.indexOf("[");return-1!=n&&(t.name=e.substring(0,n),n=e.substring(n+1,e.length-1),i.valid=i.valid&&-1==n.indexOf("["),-1!=(e=n.indexOf("="))?(t.attribute={name:n.substring(1,e),value:n.substring(e+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(n,10)-1),t})}function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=uo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=uo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==uo(e)?e:String(e)}(i.key),i)}}co((ho=po).prototype,[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}]),Object.defineProperty(ho,"prototype",{writable:!1});var ho,fo=po;function po(e,t,n){if(!(this instanceof po))throw new TypeError("Cannot call a class as a function");this.action=e,this.xpath=t,this.value=n,this.position=null}function mo(){var e=this.context,t={getIsPatch:function(e){return e&&e.hasOwnProperty(ge.A.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(ge.A.PUBLISH_TIME)?new Date(e[ge.A.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(ge.A.ORIGINAL_PUBLISH_TIME)?new Date(e[ge.A.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[ge.A.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map(function(e){var t=Object.keys(e)[0];if("add"!==t&&"remove"!==t&&"replace"!==t)return a.warn("Ignoring node of invalid action: ".concat(t)),null;var e=e[t],n=e.sel;if("add"===t&&e.type){if(!e.type.startsWith("@"))return a.warn("Ignoring add action for prefixed namespace declaration: ".concat(e.type,"=").concat(e.__text)),null;n="".concat(n,"/").concat(e.type)}var i,r=new so(n);return r.isValid()?(i=null,r.findsAttribute()||r.findsTextReplace()?i=e.__text||"":"remove"!==t&&(i=e.__children.reduce(function(e,t){var n=Object.keys(t)[0];return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t[n])),e},{})),r=new fo(t,r,i),"add"===t&&(r.position=e.pos),r):(a.warn("Ignoring action with invalid selector: ".concat(t," - ").concat(n)),null)}).filter(function(e){return!!e}):[]}},a=(0,He.A)(e).getInstance().getLogger(t);return t}mo.__dashjs_factory_name="PatchManifestModel";var go=_e.A.getSingletonFactory(mo);function _o(){var e,_,a,c,h,y,o,t=this.context;function i(e,t,n){var i,r=_.getAdaptationsForType(c[0].mpd.manifest,e,t);if(!r||0===r.length)return null;if(1<r.length&&n){var a=f(n,t);if(h[n.id]&&h[n.id][t])for(var o=0,s=r.length;o<s;o++)if(d(h[n.id][t],a[o]))return r[o];for(var l=0,u=r.length;l<u;l++)if(i=r[l],_.getRolesForAdaptation(i).filter(function(e){return e.value===ge.A.MAIN})[0])return r[l]}return r[0]}function d(e,t){var n,i,r,a,o,s,l,u,c,h;return!(!e||!t)&&(n=e.id===t.id,i=e.codec===t.codec,r=e.viewpoint===t.viewpoint,a=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),o=e.lang===t.lang,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),h=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri),n)&&i&&r&&a&&o&&s&&l&&u&&c&&h&&e}function s(e,t,n,i,r,a){var o,s,l,u=[];if(!i||0===i.length)return[];for(var c=_.getAdaptationsForPeriod(t),h=0,d=i.length;h<d;h++)if(o=i[h],s=v(c[l=_.getIndexForAdaptation(o,e,n.index)]),a){for(var f=s.accessibility.length,p=0;p<f;p++)if(s){var m=s.accessibility[p];if(0===m.indexOf("cea-608:")){var g=m.substring(8).split(";");if("CC"===g[0].substring(0,2))for(p=0;p<g.length;p++)E(s=s||v.call(this,c[l]),g[p].substring(0,3),g[p].substring(4)),u.push(s),s=null;else for(p=0;p<g.length;p++)E(s=s||v.call(this,c[l]),"CC"+(p+1),g[p]),u.push(s),s=null}else 0===m.indexOf("cea-608")&&(E(s,y.CC1,"eng"),u.push(s),s=null)}}else r===y.IMAGE?(s.type=y.IMAGE,u.push(s),s=null):s&&u.push(s);return u}function f(e,t,n){var i=c,r=[];if(n)A(),i=l(n);else{if(!(0<c.length))return r;n=c[0].mpd.manifest}var a,i=m(e,i),r=s(n,i,e,_.getAdaptationsForType(n,e?e.index:null,t),t);return t===y.TEXT&&(a=_.getAdaptationsForType(n,e?e.index:null,y.VIDEO),r=r.concat(s(n,i,e,a,t,!0))),r}function l(e){e=n(e);return _.getRegularPeriods(e)}function n(e){e=u(e);return _.getMpd(e)}function r(){c=[],h={}}function u(e){return e||(0<c.length?c[0].mpd.manifest:null)}function p(e){try{var t=m(e.streamInfo,c),n=_.getAdaptationsForPeriod(t);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&n?n[e.index]:null}catch(e){return null}}function m(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i];if(e&&e.id===r.id)return r}return null}function v(e){var i,t,n,r,a;return e?(i=new Ka,t=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index],i.id=e.id,i.index=e.index,i.type=e.type,i.streamInfo=g(e.period),i.representationCount=_.getRepresentationCount(t),i.labels=_.getLabelsForAdaptation(t),i.lang=_.getLanguageForAdaptation(t),i.segmentAlignment=_.getSegmentAlignment(t),i.subSegmentAlignment=_.getSubSegmentAlignment(t),e=_.getViewpointForAdaptation(t),i.viewpoint=e.length?e[0].value:void 0,i.viewpointsWithSchemeIdUri=e,e=_.getAccessibilityForAdaptation(t),i.accessibility=e.map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==o&&(n=t?"cea-608:"+t:"cea-608",i.embeddedCaptions=!0),n}),i.accessibilitiesWithSchemeIdUri=e,e=_.getAudioChannelConfigurationForAdaptation(t),i.audioChannelConfiguration=e.map(function(e){return e.value}),i.audioChannelConfigurationsWithSchemeIdUri=e,0===i.audioChannelConfiguration.length&&Array.isArray(t.Representation_asArray)&&0<t.Representation_asArray.length&&(e=_.getAudioChannelConfigurationForRepresentation(t.Representation_asArray[0]),i.audioChannelConfiguration=e.map(function(e){return e.value}),i.audioChannelConfigurationsWithSchemeIdUri=e),e=_.getRolesForAdaptation(t),i.roles=e.map(function(e){return e.value}),i.rolesWithSchemeIdUri=e,i.codec=_.getCodec(t),i.mimeType=_.getMimeType(t),i.contentProtection=_.getContentProtectionData(t),i.bitrateList=_.getBitrateListForAdaptation(t),i.selectionPriority=_.getSelectionPriority(t),i.contentProtection&&(e=i.contentProtection.map(function(e){return _.getKID(e)}).filter(function(e){return null!==e})).length&&(n=e[0],i.contentProtection.forEach(function(e){e.keyId=n})),i.isText=_.getIsText(t),i.supplementalProperties=_.getSupplementalPropertiesForAdaptation(t),(!i.supplementalProperties||0===Object.keys(i.supplementalProperties).length)&&Array.isArray(t.Representation_asArray)&&0<t.Representation_asArray.length&&(r=t.Representation_asArray.map(function(e){return _.getSupplementalPropertiesForRepresentation(e)})).every(function(e){return JSON.stringify(e)===JSON.stringify(r[0])})&&(i.supplementalProperties=r[0]),i.supplementalPropertiesAsArray=_.getSupplementalPropertiesAsArrayForAdaptation(t),(!i.supplementalPropertiesAsArray||0===i.supplementalPropertiesAsArray.length)&&Array.isArray(t.Representation_asArray)&&0<t.Representation_asArray.length&&(a=t.Representation_asArray.map(function(e){return _.getSupplementalPropertiesAsArrayForRepresentation(e)})).every(function(e){return JSON.stringify(e)===JSON.stringify(a[0])})&&(i.supplementalPropertiesAsArray=a[0]),i.essentialProperties=_.getEssentialPropertiesForAdaptation(t),i.essentialPropertiesAsArray=_.getEssentialPropertiesAsArrayForAdaptation(t),i.isFragmented=_.getIsFragmented(t),i.isEmbedded=!1,i):null}function E(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=y.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1;t=ii()(n);e.lang=t||n,e.roles=["caption"],e.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function g(e){var t,n,i=new Za;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(t=e.mpd,(n=new io).dvrWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=_.getDuration(t.manifest),n.isDynamic=_.getIsDynamic(t.manifest),n.serviceDescriptions=_.getServiceDescriptions(t.manifest),n.protocol=t.manifest.protocol,n),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function A(){if(!y)throw new Error("setConfig function has to be called previously")}function b(e){return 0<c.length?c[0].mpd.manifest.Period_asArray[e]:null}function T(e,t,n){var i,r,a,o,s;if(e)for(i=e.AdaptationSet_asArray,o=0;o<i.length;o+=1)for(a=i[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(r=a[s]).id)return n?s:r;return null}return e={getBandwidthForRepresentation:function(e,t){return(t=T(b(t),e))?t.bandwidth:null},getIndexForRepresentation:function(e,t){return null!==(t=T(b(t),e,!0))?t:-1},getMaxIndexForBufferType:function(e,t){var n,i,r,a,t=b(t),o=e;if(t&&o)for(i=t.AdaptationSet_asArray,a=0;a<i.length;a+=1)if(r=(n=i[a]).Representation_asArray,_.getIsTypeOf(n,o))return r.length;return-1},convertRepresentationToRepresentationInfo:function(e){var t,n;return e?(t=new Va,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],n=_.getRepresentationFor(e.index,n),t.id=e.id,t.quality=e.index,t.bandwidth=_.getBandwidth(n),t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.mediaInfo=v(e.adaptation),t):null},getStreamsInfo:function(e,t){var n=[],i=c;if(e&&(A(),i=l(e)),0<i.length){(!t||t>i.length)&&(t=i.length);for(var r=0;r<t;r++)n.push(g(i[r]))}return n},getMediaInfoForType:function(e,t){var n;return 0!==c.length&&e&&(n=m(e,c))&&(n=_.getAdaptationsForPeriod(n),t=i(e.index,t,e))?v(n[_.getIndexForAdaptation(t,c[0].mpd.manifest,e.index)]):null},getAllMediaInfoForType:f,getAdaptationForType:i,getRealAdaptation:function(e,t){var n,e=m(e,c),i=t?t.id:null;return n=0<c.length&&e?i?_.getAdaptationForId(i,c[0].mpd.manifest,e.index):_.getAdaptationForIndex(t?t.index:null,c[0].mpd.manifest,e.index):n},getProducerReferenceTimes:function(e,t){var n,e=m(e,c),i=t?t.id:null;return(n=0<c.length&&e?i?_.getAdaptationForId(i,c[0].mpd.manifest,e.index):_.getAdaptationForIndex(t?t.index:null,c[0].mpd.manifest,e.index):n)?_.getProducerReferenceTimesForAdaptation(n):[]},getRealPeriodByIndex:function(e){return _.getRealPeriodForIndex(e,c[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return _.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){e=p(e);return _.getRepresentationsForAdaptation(e)},getEventsFor:function(e,t,n){var i,r,a=[];return 0<c.length&&(i=c[0].mpd.manifest,e instanceof Za?(r=m(e,c),a=_.getEventsForPeriod(r)):e instanceof Ka?(r=m(n,c),a=_.getEventStreamForAdaptationSet(i,p(e),r)):e instanceof Va&&(r=m(n,c),a=_.getEventStreamForRepresentation(i,t,r))),a},getEvent:function(e,t,n,i){try{var r,a,o,s,l,u,c,h,d,f,p,m;return e&&t&&!isNaN(n)&&i?t[(r=e.scheme_id_uri)+"/"+(a=e.value)]?(o=new Ne,s=e.timescale||1,l=i.adaptation.period.start,u=t[r+"/"+a],c=isNaN(i.presentationTimeOffset)?isNaN(u.presentationTimeOffset)?0:u.presentationTimeOffset:i.presentationTimeOffset,h=e.presentation_time_delta/s,d=0===e.version?l+n-c+h:l-c+h,f=e.event_duration/s,p=e.id,m=e.message_data,o.eventStream=u,o.eventStream.value=a,o.eventStream.timescale=s,o.duration=f,o.id=p,o.calculatedPresentationTime=d,o.messageData=m,o.presentationTimeDelta=h,o):null:null}catch(e){return null}},getMpd:n,setConfig:function(e){e&&(e.constants&&(y=e.constants),e.cea608parser&&(o=e.cea608parser),e.errHandler&&_.setConfig({errHandler:e.errHandler}),e.BASE64)&&_.setConfig({BASE64:e.BASE64})},updatePeriods:function(e){if(!e)return null;A(),c=l(e)},getIsTextTrack:function(e){return _.getIsText(e)},getUTCTimingSources:function(){var e=u();return _.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<c.length?c[0].mpd:null;return _.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){e=n(e);return _.getAvailabilityStartTime(e)},getIsTypeOf:function(e,t){return _.getIsTypeOf(e,t)},getIsDynamic:function(e){e=u(e);return _.getIsDynamic(e)},getDuration:function(e){e=u(e);return _.getDuration(e)},getRegularPeriods:l,getContentSteering:function(e){return _.getContentSteering(e)},getLocation:function(e){return _.getLocation(e)},getPatchLocation:function(e){var t=_.getPatchLocation(e),n=_.getPublishTime(e);return t&&0!==t.length&&n?t.filter(function(e){return isNaN(e.ttl)||n.getTime()+e.ttl>(new Date).getTime()}):[]},getManifestUpdatePeriod:function(e){return _.getManifestUpdatePeriod(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function(e){return _.getPublishTime(e)},getIsDVB:function(e){return _.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return a.getIsPatch(e)},getBaseURLsFromElement:function(e){return _.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return _.getRepresentationSortFunction()},getCodec:function(e,t,n){return _.getCodec(e,t,n)},getPeriodById:function(t){var e;return t&&0!==c.length&&(e=c.filter(function(e){return e.id===t}))&&0<e.length?e[0]:null},setCurrentMediaInfo:function(e,t,n){h[e]=h[e]||{},h[e][t]=h[e][t]||{},h[e][t]=n},isPatchValid:function(e,t){var n=_.getId(e),i=a.getMpdId(t),e=_.getPublishTime(e),r=a.getPublishTime(t),t=a.getOriginalPublishTime(t);return!!(n&&i&&n==i&&e&&t&&e.getTime()==t.getTime()&&r&&e.getTime()<r.getTime())},applyPatchToManifest:function(t,e){a.getPatchOperations(e).forEach(function(r){var e=r.getMpdTarget(t);if(null!==e){var a=e.name,o=e.target,e=e.leaf;if(r.xpath.findsAttribute()||"__text"===a)switch(r.action){case"add":case"replace":o[a]=r.value;break;case"remove":delete o[a]}else{var s=(o[a+"_asArray"]||[]).indexOf(e),l="prepend"===r.position||"before"===r.position;"remove"!==r.action&&"replace"!==r.action||(delete o[a],-1==s)||((e=o[a+"_asArray"]).splice(s,1),1<e.length?o[a]=e:1==e.length?o[a]=e[0]:delete o[a+"_asArray"]),"add"!==r.action&&"replace"!==r.action||Object.keys(r.value).forEach(function(e){var t,n=r.value[e],i=o[e+"_asArray"]||[];0===i.length&&o[e]&&i.push(o[e]),0===i.length?i=n:(t=i.length,t=e==a&&-1!=s?s+(l?0:1)+("replace"==r.action?-1:0):l?0:i.length,i.splice.apply(i,[t,0].concat(n))),o[e+"_asArray"]=i,o[e]=1==i.length?i[0]:i})}}})},areMediaInfosEqual:d,reset:r},_=It(t).getInstance(),a=go(t).getInstance(),r(),e}_o.__dashjs_factory_name="DashAdapter";var yo=_e.A.getSingletonFactory(_o);function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=vo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=vo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==vo(e)?e:String(e)}(i.key),i)}}Eo(p=bo,[{key:"round10",value:function(e,t){return e=e,void 0===(t=t)||0==+t?Math.round(e):(t=+t,null===(e=+e)||isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}}]),Object.defineProperty(p,"prototype",{writable:!1});var p,Ao=bo;function bo(){if(!(this instanceof bo))throw new TypeError("Cannot call a class as a function")}function To(e){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=To(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=To(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==To(e)?e:String(e)}(i.key),i)}}wo=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Ro&&So(wo.prototype,Ro),Io&&So(wo,Io),Object.defineProperty(wo,"prototype",{writable:!1});var wo,Ro,Io,Co=wo;function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Po(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Lo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Lo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Lo(e)?e:String(e)}(i.key),i)}}Do=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.mt=null,this.to=null,this.lto=null},ko&&Po(Do.prototype,ko),Oo&&Po(Do,Oo),Object.defineProperty(Do,"prototype",{writable:!1});var Do,ko,Oo,Mo=Do;function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=xo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=xo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==xo(e)?e:String(e)}(i.key),i)}}m=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.level=null},Fo&&No(m.prototype,Fo),Bo&&No(m,Bo),Object.defineProperty(m,"prototype",{writable:!1});var m,Fo,Bo,Uo=m;function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=jo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=jo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==jo(e)?e:String(e)}(i.key),i)}}Vo=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.target=null,this.state=je.A.BUFFER_EMPTY},Ho&&Go(Vo.prototype,Ho),Yo&&Go(Vo,Yo),Object.defineProperty(Vo,"prototype",{writable:!1});var Vo,Ho,Yo,zo=Vo;function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Wo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Wo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Wo(e)?e:String(e)}(i.key),i)}}qo=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.time=null,this.range=null,this.manifestInfo=null},Qo&&Ko(qo.prototype,Qo),Xo&&Ko(qo,Xo),Object.defineProperty(qo,"prototype",{writable:!1});var qo,Qo,Xo,Jo=qo;function Zo(e){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=Zo(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Zo(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==Zo(e)?e:String(e)}(i.key),i)}}g=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.time=null,this.droppedFrames=null},es&&$o(g.prototype,es),ts&&$o(g,ts),Object.defineProperty(g,"prototype",{writable:!1});var g,es,ts,ns=g;function is(e){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=is(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=is(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==is(e)?e:String(e)}(i.key),i)}}function as(e,t,n){return t&&rs(e.prototype,t),n&&rs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function os(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ss=as(function e(){os(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}),ls=as(function e(){os(this,e),this.id=null,this.index=null,this.start=null,this.duration=null}),us=as(function e(){os(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null});function cs(e){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=cs(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=cs(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==cs(e)?e:String(e)}(i.key),i)}}ds=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},fs&&hs(ds.prototype,fs),ps&&hs(ds,ps),Object.defineProperty(ds,"prototype",{writable:!1});var ds,fs,ps,ms=ds;function gs(e){return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=gs(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=gs(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==gs(e)?e:String(e)}(i.key),i)}}ys=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.loadingRequests=[],this.executedRequests=[]},vs&&_s(ys.prototype,vs),Es&&_s(ys,Es),Object.defineProperty(ys,"prototype",{writable:!1});var ys,vs,Es,As=ys;function bs(e){var i,r=(e=e||{}).settings,e=this.context,a=(0,Ge.A)(e).getInstance();function t(){a.trigger(Ve.A.METRICS_CHANGED)}function o(e){a.trigger(Ve.A.METRIC_CHANGED,{mediaType:e}),t()}function u(e,t,n){a.trigger(Ve.A.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),o(e)}function h(e,t,n){a.trigger(Ve.A.METRIC_ADDED,{mediaType:e,metric:t,value:n}),o(e)}function s(e,t){var n=null;return e&&(i.hasOwnProperty(e)?n=i[e]:t||(n=new Co,i[e]=n)),n}function d(e,t,n){e=s(e);null!==e&&(e[t].push(n),e[t].length>r.get().streaming.metrics.maxListDepth)&&e[t].shift()}function v(e,t,n){d(e,t,n),h(e,t,n)}return i={},{clearCurrentMetricsForType:function(e){delete i[e],o(e)},clearAllCurrentMetrics:function(){i={},t()},getMetricsFor:s,addHttpRequest:function e(t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_){var y=new ve.G;null!=o&&o!==r&&(e(t,null,i,r,a,null,null,l,u,null,null,null,f,null,null,g,_),y.actualurl=o),y.tcpid=n,y.type=i,y.url=r,y.range=l,y.trequest=u,y.tresponse=c,y.responsecode=d,y.cmsd=_,y._tfinish=h,y._stream=t,y._mediaduration=f,y._quality=a,y._responseHeaders=p,y._serviceLocation=s,y._fileLoaderType=g,m?m.forEach(function(e){var t,n,i,r;t=y,n=e.s,i=e.d,e=e.b,(r=new ve.N).s=n,r.d=i,r.b=e,t.trace.push(r),t.interval||(t.interval=0),t.interval+=i}):(delete y.interval,delete y.trace),v(t,je.A.HTTP_REQUEST,y)},addRepresentationSwitch:function(e,t,n,i,r){var a=new Mo;a.t=t,a.mt=n,a.to=i,r?a.lto=r:delete a.lto,v(e,je.A.TRACK_SWITCH,a)},addBufferLevel:function(e,t,n){var i=new Uo;i.t=t,i.level=n,v(e,je.A.BUFFER_LEVEL,i)},addBufferState:function(e,t,n){var i=new zo;i.target=n,i.state=t,v(e,je.A.BUFFER_STATE,i)},addDVRInfo:function(e,t,n,i){var r=new Jo;r.time=t,r.range=i,r.manifestInfo=n,v(e,je.A.DVR_INFO,r)},addDroppedFrames:function(e,t){var n=new ns,i=s(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<i.length&&i[i.length-1]==n||v(e,je.A.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,i,r,a,o,s,l){var u=new ms;u.mediaType=e,u.t=t,u.type=n,u.startTime=i,u.availabilityStartTime=r,u.duration=a,u.quality=o,u.range=s,u.state=l,v(e,je.A.SCHEDULING_INFO,u)},addRequestsQueue:function(e,t,n){var i=new As;i.loadingRequests=t,i.executedRequests=n,s(e).RequestsQueue=i,h(e,je.A.REQUESTS_QUEUE,i)},addManifestUpdate:function(e,t,n,i,r,a,o,s,l,u){var c=new ss;c.mediaType=e,c.type=t,c.requestTime=n,c.fetchTime=i,c.availabilityStartTime=r,c.presentationStartTime=a,c.clientTimeOffset=o,c.currentTime=s,c.buffered=l,c.latency=u,d(Ue.A.STREAM,je.A.MANIFEST_UPDATE,c),h(e,je.A.MANIFEST_UPDATE,c)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];u(e.mediaType,je.A.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,i,r){var a;e&&((a=new ls).id=t,a.index=n,a.start=i,a.duration=r,e.streamInfo.push(a),u(e.mediaType,je.A.MANIFEST_UPDATE_STREAM_INFO,e))},addManifestUpdateRepresentationInfo:function(e,t,n,i,r,a,o,s){var l;e&&e.representationInfo&&((l=new us).id=t,l.index=n,l.streamIndex=i,l.mediaType=r,l.startNumber=o,l.fragmentInfoType=s,l.presentationTimeOffset=a,e.representationInfo.push(l),u(e.mediaType,je.A.MANIFEST_UPDATE_TRACK_INFO,e))},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,v(Ue.A.STREAM,je.A.PLAY_LIST,e)},addDVBErrors:function(e){v(Ue.A.STREAM,je.A.DVB_ERRORS,e)}}}bs.__dashjs_factory_name="MetricsModel";var Ts=_e.A.getSingletonFactory(bs);function Ss(e){var t,i,r,a,n=this.context,o=(e=e||{}).metricsModel;function s(e){e=o.getMetricsFor(e,!0);if(!e)return null;var t,n=e.HttpList,i=null;if(!n||n.length<=0)return null;for(t=n.length-1;0<=t;){if(n[t].responsecode){i=n[t];break}t--}return i}function l(e){e=o.getMetricsFor(e,!0);return e&&e.HttpList?e.HttpList:[]}function u(e,t){return(e=e&&e[t])&&0!==e.length?e[e.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return u(o.getMetricsFor(e,!0),je.A.TRACK_SWITCH)},getCurrentBufferState:function(e){return u(o.getMetricsFor(e,!0),je.A.BUFFER_STATE)},getCurrentBufferLevel:function(e){e=u(o.getMetricsFor(e,!0),je.A.BUFFER_LEVEL);return e?Ao.round10(e.level/1e3,-3):0},getCurrentHttpRequest:s,getHttpRequests:l,getCurrentDroppedFrames:function(){return u(o.getMetricsFor(Ue.A.VIDEO,!0),je.A.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return u(o.getMetricsFor(e,!0),je.A.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return u(e?o.getMetricsFor(e,!0):o.getMetricsFor(Ue.A.VIDEO,!0)||o.getMetricsFor(Ue.A.AUDIO,!0),je.A.DVR_INFO)},getCurrentManifestUpdate:function(){return u(o.getMetricsFor(Ue.A.STREAM),je.A.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n;return!t||(n={},void 0===(e=(n=(e=s(e))?j.A.parseHttpHeaders(e._responseHeaders):n)[t.toLowerCase()]))?null:e},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;for(var t,n,i={},r=(t=l(Ue.A.STREAM)).length-1;0<=r;r--)if((n=t[r]).type===ve.G.MPD_TYPE){i=j.A.parseHttpHeaders(n._responseHeaders);break}e=i[e.toLowerCase()];return void 0===e?null:e},addRepresentationSwitch:function(e,t,n,i,r){o.addRepresentationSwitch(e,t,n,i,r)},addDVRInfo:function(e,t,n,i){o.addDVRInfo(e,t,n,i)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();o.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),o.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration))},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),o.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType))},addManifestUpdate:function(e){o.addManifestUpdate(Ue.A.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,i,r,a){o.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,i,r,e.fileLoaderType,a)},addSchedulingInfo:function(e,t){o.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){o.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){o.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){o.addBufferState(e,t,n)},addDroppedFrames:function(e){o.addDroppedFrames(Ue.A.VIDEO,e)},addPlayList:function(){a&&(o.addPlayList(a),a=null)},addDVBErrors:function(e){o.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(a=new Ke).start=new Date,a.mstart=e,a.starttype=t},createPlaylistTraceMetrics:function(e,t,n){!0===i&&(i=!1,(r=new qe).representationid=e,r.start=new Date,r.mstart=t,r.playbackspeed=null!==n?n.toString():null)},updatePlayListTraceMetrics:function(e){if(r)for(var t in r)r[t]=e[t]},pushPlayListTraceMetrics:function(e,t){var n;!1===i&&a&&r&&r.start&&(n=r.start,e=e.getTime()-n.getTime(),r.duration=e,r.stopreason=t,a.trace.push(r),i=!0)},clearAllCurrentMetrics:function(){o.clearAllCurrentMetrics()}},o=o||Ts(n).getInstance({settings:e.settings}),i=!0,a=r=null,t}Ss.__dashjs_factory_name="DashMetrics";var ws=_e.A.getSingletonFactory(Ss);function Rs(){var e,h,n,i,t=this.context,s=(0,Ge.A)(t).getInstance(),l=(0,ye.A)(t).getInstance();function r(e){i=e}function a(e,t,n,i){var r=t.adaptation.period.mpd,a=r.availabilityStartTime;return i?n&&r.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(a.getTime()+1e3*(e+r.timeShiftBufferDepth)):r.availabilityEndTime:n?(i=t.availabilityTimeOffset,new Date(a.getTime()+1e3*(e-i))):a}function u(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function d(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function c(e){var t,n={start:NaN,end:NaN},i=e[0].getAdapter().getRegularPeriods()[0],r=u(new Date,i);return e&&0!==e.length&&(e.forEach(function(e){var t=e.getAdapter(),e=t.getMediaInfoForType(e.getStreamInfo(),Ue.A.VIDEO)||t.getMediaInfoForType(e.getStreamInfo(),Ue.A.AUDIO),t=t.getVoRepresentations(e)[0],e={start:NaN,end:NaN};t&&(t.segmentInfoType===ge.A.SEGMENT_TIMELINE?e=function(e){var t,n,i,r,a=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],a=h.getRepresentationFor(e.index,a),a=a.SegmentTemplate||a.SegmentList,o=a.SegmentTimeline,a=a.timescale,s=o.S_asArray,o={start:0,end:0},l=s[0].t,u=!isNaN(l),l=u?l:0,c=0;for(u&&(o.start=d(l/a,e)),i=0,r=s.length;i<r;i++)n=0,(t=s[i]).hasOwnProperty("r")&&(n=t.r),c+=t.d*(1+n);return o.end=d((l+c)/a,e),o}(t):(t=t.adaptation.period,e.start=t.start,e.end=Math.max(r,t.start+t.duration))),!isNaN(e.start)&&(isNaN(n.start)||n.start>e.start)&&(n.start=e.start),!isNaN(e.end)&&(isNaN(n.end)||n.end<e.end)&&(n.end=e.end)}),n.end=Math.min(r,n.end),t=p(e,n.end,!0),n.end=isNaN(t)?n.end:t,n.start=i&&i.mpd&&i.mpd.timeShiftBufferDepth&&!isNaN(i.mpd.timeShiftBufferDepth)&&!isNaN(n.end)?Math.max(n.end-i.mpd.timeShiftBufferDepth,n.start):n.start,n.start=p(e,n.start)),{range:n,now:r}}function f(e,t){n=e-t.end}function p(e,t,n){var i=2<arguments.length&&void 0!==n&&n;try{for(var r=0,a=!1,o=NaN;!a&&r<e.length;){var s=e[r].getStreamInfo();s.start<=t&&(!isFinite(s.duration)||s.start+s.duration>=t)?(o=t,a=!0):!i&&s.start>t&&(isNaN(o)||s.start<o)?o=s.start:i&&s.start+s.duration<t&&(isNaN(o)||s.start+s.duration>o)&&(o=s.start+s.duration),r+=1}return o}catch(e){return t}}function o(e){void 0===e.offset||isNaN(e.offset)||r(e.offset/1e3)}function m(){n=i=0}function g(){s.off(Ve.A.UPDATE_TIME_SYNC_OFFSET,o,this),m()}return e={initialize:function(){m(),s.on(Ve.A.UPDATE_TIME_SYNC_OFFSET,o,this)},getClientTimeOffset:function(){return i},setClientTimeOffset:r,getClientReferenceTime:function(){return Date.now()-1e3*n+1e3*i},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return a(e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return a(e,t,n,!0)},calcPresentationTimeFromWallTime:u,calcPresentationTimeFromMediaTime:d,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var n;return t&&(t=e.representation.adaptation.period.mpd.suggestedPresentationDelay,t=e.presentationStartTime+t,n=new Date(e.availabilityStartTime.getTime()+1e3*t)),n},calcTimeShiftBufferWindow:function(e,t){if(!t)return t={start:NaN,end:NaN},n=0,i=NaN,e.forEach(function(e){e=e.getStreamInfo();n+=e.duration,(isNaN(i)||e.start<i)&&(i=e.start)}),t.start=i,t.end=i+n,t;var n,i;if(l.get().streaming.timeShiftBuffer.calcFromSegmentTimeline)return f((t=c(e)).now,t.range),t.range;t=e,e={start:NaN,end:NaN};if(t&&0!==t.length){var r=t[0].getAdapter().getRegularPeriods()[0],a=u(new Date,r),r=r.mpd.timeShiftBufferDepth,o=isNaN(r)?0:a-r;if(e.start=p(t,o),e.end=!isNaN(e.start)&&a<e.start?a:p(t,a,!0),!isNaN(r)&&e.end<a-r&&(e.end=NaN),l.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){o=c(t);if(o.range.end<e.start)return s.trigger(Ye.A.CONFORMANCE_VIOLATION,{level:Wn.LEVELS.WARNING,event:Wn.EVENTS.INVALID_DVR_WINDOW}),f(o.now,o.range),o.range}}return e},reset:g},h=It(t).getInstance(),g(),e}Rs.__dashjs_factory_name="TimelineConverter";var Is=_e.A.getSingletonFactory(Rs),Cs=t(9944),Ls=t(5521);function Ps(e){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ds=function(){return!!e})()}function ks(e){return(ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Os(e,t){return(Os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ms=function(){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=ks(t);var i=e;if(!(t=Ds()?Reflect.construct(t,n||[],ks(e).constructor):t.apply(e,n))||"object"!==Ps(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).captionData=null,e.label=null,e.defaultTrack=!1,e.kind=null,e.isFragmented=!1,e.isEmbedded=!1,e.isTTML=null,e;throw new TypeError("Cannot call a class as a function")}var e=t,n=Ka;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Os(e,n),e=t,Object.defineProperty(e,"prototype",{writable:!1}),e}(),xs=t(5994);function Ns(){var F=0;function n(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function B(e,t){e=e.videoHeight/15;return t?"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?n(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?n(t.background):"transparent")+";":"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(e,t,n,N){for(var i=null,r=!1,a=-1,o={start:t,end:n,spans:[]},s="style_cea608_white_black",l={},u={},c=[],h=0;h<15;++h){var d=N.rows[h],f="",p=null;if(!1===d.isEmpty()){var m=function(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}(d.chars);null===i&&(i={x:m,y1:h,y2:h+1,p:[]}),m!==a&&r&&(i.p.push(o),o={start:t,end:n,spans:[]},i.y2=h,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(c.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i={x:m,y1:h,y2:h+1,p:[]});for(var g=0;g<d.chars.length;++g){var _,y=d.chars[g],v=y.penState;null!==p&&v.equals(p)||(0<f.trim().length&&(o.spans.push({name:s,line:f,row:h}),f=""),_="style_cea608_"+v.foreground+"_"+v.background,v.underline&&(_+="_underline"),v.italics&&(_+="_italics"),u.hasOwnProperty(_)||(u[_]=JSON.parse(JSON.stringify(v))),p=v,s=_),f+=y.uchar}0<f.trim().length&&o.spans.push({name:s,line:f,row:h}),r=!0,a=m}else r=!1,a=-1,i&&(i.p.push(o),o={start:t,end:n,spans:[]},i.y2=h,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(c.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null)}i&&(i.p.push(o),i.y2=h+1,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(c.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null);var E=[];for(h=0;h<c.length;++h){var A=c[h],b="sub_cea608_"+F++,T=document.createElement("div"),S=(T.id=b,"left: "+3.125*A.x+"%; top: "+6.66*A.y1+"%; width: "+(100-3.125*A.x)+"%; height: "+6.66*Math.max(A.y2-1-A.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"),S=(T.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+S,document.createElement("div")),w=(S.className="paragraph bodyStyle",S.style.cssText=B(e),document.createElement("div"));w.className="cueUniWrapper",w.style.cssText="unicode-bidi: normal; direction: ltr;";for(var R=0;R<A.p.length;++R)for(var I=A.p[R],C=0,L=0;L<I.spans.length;++L){var P,D,k,O=I.spans[L];0<O.line.length&&(0!==L&&C!=O.row&&((P=document.createElement("br")).className="lineBreak",w.appendChild(P)),P=!1,C===O.row&&(P=!0),C=O.row,D=u[O.name],(k=document.createElement("span")).className="spanPadding "+O.name+" customSpanColor",k.style.cssText=B(e,D),0!==L&&P?L===I.spans.length-1?k.textContent=O.line.replace(/\s+$/g,""):k.textContent=O.line:1<I.spans.length&&L<I.spans.length-1&&O.row===I.spans[L+1].row?k.textContent=O.line.replace(/^\s+/g,""):k.textContent=O.line.trim(),w.appendChild(k))}S.appendChild(w),T.appendChild(S);var M,x={bodyStyle:["%",90]};for(M in u)u.hasOwnProperty(M)&&(x[M]=["%",90]);E.push({type:"html",start:t,end:n,cueHTMLElement:T,cueID:b,cellResolution:[32,15],isFromCEA608:!0,fontSize:x,lineHeight:{},linePadding:{}})}return E}}}Ns.__dashjs_factory_name="EmbeddedTextHtmlRender";var Fs=_e.A.getSingletonFactory(Ns);function Bs(e){var _,y,v,E,h,A,b,T,d,S,w,R,I,C,L,P,D,k=e.errHandler,O=e.manifestModel,f=e.mediaController,M=e.videoModel,x=e.textTracks,N=e.vttParser,n=e.vttCustomRenderingParser,l=e.ttmlParser,p=e.streamInfo,u=e.settings,m=this.context,t=(0,Ge.A)(m).getInstance(),i=!1;function r(){T=NaN,b=!(d=[]),h=[],E=S=A=null}function a(e){e=e.chunk;e.mediaInfo.embeddedCaptions&&o(e.bytes,e)}function g(e){w=e}function o(e,t){var p,n,i=t.mediaInfo,r=i.type,a=i.mimeType,a=i.codec||a;if(a)if(-1!==i.codec.indexOf("application/mp4"))i=e,p=a,"InitializationSegment"===(o=t).segmentType?(b=!0,T=v.getMediaTimescaleFromMoov(i)):b&&(0<(s=v.getSamplesInfo(i).sampleList).length&&(S=s[0].cts-o.start*T),(0<=p.search(Ue.A.STPP)?function(e,t){var n;for(E=null!==E?E:B(p),n=0;n<t.length;n++){for(var i=t[n],r=i.cts,a=F(),o=a+r/T,s=o+i.duration/T,o=(_.buffered.add(o,s),new DataView(e,i.offset,i.subSizes[0])),s=Ls.Utils.dataViewToString(o,Ue.A.UTF8),l=[],u=i.offset+i.subSizes[0],c=1;c<i.subSizes.length;c++){var h=new Uint8Array(e,u,i.subSizes[c]),h=String.fromCharCode.apply(null,h);l.push(h),u+=i.subSizes[c]}try{var d=O.getValue().ttmlTimeIsRelative?r/T:0,f=E.parse(s,d,r/T,(r+i.duration)/T,l);x.addCaptions(w,a,f)}catch(e){A.removeExecutedRequestsBeforeTime(),this.remove(),y.error("TTML parser error: "+e.message)}}}:function(e,t){for(var n=[],i=0;i<t.length;i++)for(var r=t[i],a=(r.cts-=S,F()+r.cts/T),o=a+r.duration/T,a=(_.buffered.add(a,o),e.slice(r.offset,r.offset+r.size)),s=Ls.parseBuffer(a),l=0;l<s.boxes.length;l++){var u=s.boxes[l];if(y.debug("VTT box1: "+u.type),"vtte"!==u.type&&"vttc"===u.type){y.debug("VTT vttc boxes.length = "+u.boxes.length);for(var c={styles:{}},h=0;h<u.boxes.length;h++){var d=u.boxes[h];if(y.debug("VTT box2: "+d.type),"payl"===d.type)c.start=r.cts/T,c.end=(r.cts+r.duration)/T,c.data=d.cue_text;else if("sttg"===d.type&&d.settings&&""!==d.settings)try{var f=d.settings.split(" ");c.styles=N.getCaptionStyles(f)}catch(e){}}c&&c.data&&(n.push(c),y.debug("VTT  ".concat(c.start," - ").concat(c.end," :  ").concat(c.data)))}}0<n.length&&x.addCaptions(w,0,n)})(i,s));else if(r===Ue.A.VIDEO){var d=e,o;if((o=t).segmentType===ve.G.INIT_SEGMENT_TYPE)0===I&&(I=v.getMediaTimescaleFromMoov(d));else if(o.segmentType===ve.G.MEDIA_SEGMENT_TYPE){if(0===I)return void y.warn("CEA-608: No timescale for embeddedTextTrack yet");var s=(i=v.getSamplesInfo(d)).lastSequenceNumber,r=Math.trunc(o.start),o=Math.trunc(o.end);if(P[0]||P[1]||function(){for(var e=0;e<R.length;e++){if(-1===(t=x.getTrackIdxForId(R[e].id)))return y.warn("CEA-608: data before track is ready.");var t=function(i){return function(e,t,n){(e=M.getTTMLRenderingDiv()?D.createHTMLCaptionsFromScreen(M.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}])&&x.addCaptions(i,0,e)}}(t);P[e]=new(be().Cea608Parser)(e+1,{newCue:t},null)}}(),I){if(f=C,g=i.numSequences,null!==f&&null!==s&&null!==L&&null!==r&&(s===f?L!==r:s!==f+g))for(n=0;n<P.length;n++)P[n]&&P[n].reset();for(var l=function(e){if(0===e.length)return null;for(var t,n={splits:[],fields:[[],[]]},i=new DataView(d),r=0;r<e.length;r++)for(var a=e[r],o=be().findCea608Nalus(i,a.offset,a.size),s=null,l=0,u=0;u<o.length;u++)for(var c=be().extractCea608DataFromRange(i,o[u]),h=0;h<2;h++)0<c[h].length&&(a.cts!==s?l=0:l+=1,t=F(),n.fields[h].push([a.cts+t*I,c[h],l]),s=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(i.sampleList),u=0;u<P.length;u++){var c=l.fields[u],h=P[u];if(h)for(n=0;n<c.length;n++)h.addData(c[n][0]/I,c[n][1])}C=s,L=o}}}else{r=t;var f=a,m,g=new DataView(e,0,e.byteLength),g=Ls.Utils.dataViewToString(g,Ue.A.UTF8);try{m=B(f).parse(g,0),x.addCaptions(x.getCurrentTrackIdx(),0,m),_.buffered&&_.buffered.add(r.start,r.end)}catch(e){k.error(new ze.A(We.TIMED_TEXT_ERROR_ID_PARSE_CODE,We.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,g))}}else y.error("No text type defined")}function F(){return isNaN(_.timestampOffset)?0:_.timestampOffset}function B(e){var t;return 0<=e.search(Ue.A.VTT)?t=u.get().streaming.text.webvtt.customRenderingEnabled&&n?n:N:(0<=e.search(Ue.A.TTML)||0<=e.search(Ue.A.STPP))&&(t=l),t}function s(t){R.forEach(function(e){e=x.getTrackIdxForId(e.id);0<=e&&x.deleteCuesFromTrackIdx(e,t.from,t.to)})}return _={initialize:function(){i||(R=[],I=0,P=[],i=!(L=C=w=null),D=Fs(m).getInstance(),t.on(Ve.A.VIDEO_CHUNK_RECEIVED,a,_),t.on(Ve.A.BUFFER_CLEARED,s,_))},addMediaInfos:function(e,t,n){if(h=h.concat(t),e===Ue.A.TEXT&&t[0].isFragmented&&!t[0].isEmbedded){A=n,_.buffered=(0,xs.A)(m).create(),d=f.getTracksFor(Ue.A.TEXT,p.id).filter(function(e){return e.isFragmented});for(var i=f.getCurrentTrackFor(Ue.A.TEXT,p.id),r=0;r<d.length;r++)if(d[r]===i){g(r);break}}for(var a=0;a<t.length;a++){o=void 0;c=void 0;s=void 0;l=void 0;u=void 0;var o=t[a];var s,l,u,c=new Ms;for(s in o)c[s]=o[s];c.labels=o.labels,c.defaultTrack=(l=o,u=!1,1<R.length&&l.isEmbedded?u=l.id&&l.id===Ue.A.CC1:1===R.length?l.id&&"string"==typeof l.id&&"CC"===l.id.substring(0,2)&&(u=!0):0===R.length&&(u=l.index===h[0].index),u),c.isFragmented=o.isFragmented,c.isEmbedded=!!o.isEmbedded,c.isTTML=(l=o).codec&&0<=l.codec.search(Ue.A.STPP)||l.mimeType&&0<=l.mimeType.search(Ue.A.TTML),c.kind=(u={subtitle:"subtitles",caption:"captions"},(l=o.roles&&0<o.roles.length?u[o.roles[0]]:u.caption)===u.caption||l===u.subtitle?l:u.caption),x.addTextTrack(c)}},resetMediaInfos:function(){h=[]},getStreamId:function(){return p.id},append:o,abort:function(){},addEmbeddedTrack:function(e){if(i&&e)if(e.id===Ue.A.CC1||e.id===Ue.A.CC3){for(var t=0;t<R.length;t++)if(R[t].id===e.id)return;R.push(e)}else y.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(Ve.A.VIDEO_CHUNK_RECEIVED,a,_),t.off(Ve.A.BUFFER_CLEARED,s,_),x&&x.deleteAllTextTracks(),i=!1,R=[],P=[null,null],L=C=null},getConfig:function(){return{fragmentModel:A,fragmentedTracks:d,videoModel:M}},setCurrentFragmentedTrackIdx:g,remove:function(e,t){void 0===e&&e===t&&(e=_.buffered.start(0),t=_.buffered.end(_.buffered.length-1)),_.buffered.remove(e,t),x.deleteCuesFromTrackIdx(w,e,t)},reset:function(){r(),h=[],v=null}},y=(0,He.A)(m).getInstance().getLogger(_),v=(0,yn.A)(m).getInstance(),r(),_}Bs.__dashjs_factory_name="TextSourceBuffer";var Us=_e.A.getClassFactory(Bs),js=t(8769);function Gs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Vs=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Hs(e){var b,r,c,h,T,S,w,R,I,C,d,i,p,m,n,g,a,L,P,t=this.context,D=(0,Ge.A)(t).getInstance(),k=e.videoModel,f=e.streamInfo,O=e.settings;function _(e,t){var n=k.getClientWidth(),i=k.getClientHeight(),r=k.getVideoWidth(),a=k.getVideoHeight(),o=k.getVideoRelativeOffsetTop(),s=k.getVideoRelativeOffsetLeft();if(0!==r&&0!==a){var l=r/a,u=!1,n=(e.isFromCEA608&&(l=3.5/3,u=!0),function(e,t,n,i,r,a){var o=0,s=0;return n/i<e/t?o=(s=t)/i*n:s=(o=e)/n*i,i=n=0,r<o/s?n=(i=s)*r:i=(n=o)/r,s=(e-n)/2,o=(t-i)/2,a?{x:s+.1*n,y:o+.1*i,w:.8*n,h:.8*i}:{x:s,y:o,w:n,h:i}}.call(this,n,i,r,a,l,u)),i=n.w,r=n.h,a=n.x,l=n.y;if(i!=R||r!=I||a!=S||l!=w||t){S=a+s,w=l+o,R=i,I=r,C&&(u=C.style)&&(u.left=S+"px",u.top=w+"px",u.width=R+"px",u.height=I+"px",u.zIndex=p&&document[p]||m?g:null,D.trigger(Ye.A.CAPTION_CONTAINER_RESIZE));var c=e.activeCues;if(c)for(var h=c.length,d=0;d<h;++d){var f=c[d];f.scaleCue(f)}}}}function M(e){var t,n,i,r=R,a=I;if(e.cellResolution){var o=[r/e.cellResolution[0],a/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t))for(var s=(e.linePadding[t]*o[0]).toString(),l=document.getElementsByClassName("spanPadding"),u=0;u<l.length;u++)l[u].style.cssText=l[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s),l[u].style.cssText=l[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s);if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?n=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(n=e.fontSize[t][1]),s=(n*o[1]).toString();for(var c="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph"),h=0;h<c.length;h++)c[h].style.cssText=c[h].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),s=(i*o[1]).toString(),c=document.getElementsByClassName(t);for(var d=0;d<c.length;d++)c[d].style.cssText=c[d].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}}}e.isd&&((r=document.getElementById(e.cueID))&&C.removeChild(r),x(e))}function o(e,t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,i=/^#(.*)$/;return n.test(t)?(n=n.exec(t),n=parseInt(n[4],10)-1,"data:image/png;base64,"+btoa(e.images[n])):i.test(t)?(n=i.exec(t)[1],"data:image/png;base64,"+e.embeddedImages[n]):t}function x(t){var e;C&&(s.call(this),e=document.createElement("div"),C.appendChild(e),n=(0,js.renderHTML)(t.isd,e,function(e){return o(t,e)},C.clientHeight,C.clientWidth,O.get().streaming.text.imsc.displayForcedOnlyMode,function(e){b.info("renderCaption :",e)},n,O.get().streaming.text.imsc.enableRollUp),e.id=t.cueID,D.trigger(Ye.A.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:T}))}function y(e,t,n){var i,r,a,o,s=j(e),l=O.get().streaming.text.dispatchForManualRendering;if(s&&Array.isArray(n)&&0!==n.length)for(var u=0;u<n.length;u++){var c=null,h=n[u];s.cellResolution=h.cellResolution,s.isFromCEA608=h.isFromCEA608,isNaN(h.start)||isNaN(h.end)||(l?c=function(e,t){var n=B(e,t);return n.onenter=function(){F(e)&&P&&P.cueID!==n.cueID&&N(P),delete n.type,V(P=n)},n.onexit=function(){N(n),P=null},n}(h,t):F(h)&&C?c=function(e,t,n){var i=this,e=B(e,t);return C.style.left=S+"px",C.style.top=w+"px",C.style.width=R+"px",C.style.height=I+"px",e.onenter=function(){var e=this;n.mode===Ue.A.TEXT_SHOWING&&(this.isd?(L?requestAnimationFrame(function(){return x(e)}):x(this),b.debug("Cue enter id:"+this.cueID)):(C.appendChild(this.cueHTMLElement),M.call(i,this),D.trigger(Ye.A.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:T})))},e.onexit=function(){if(C)for(var e=C.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(b.debug("Cue exit id:"+e[t].id),C.removeChild(e[t]),--t)},e}(h,t,s):h.data&&(c=function(e,t,n){t=B(e,t);if(t.isActive=!1,e.styles)try{void 0!==e.styles.align&&"align"in t&&(t.align=e.styles.align),void 0!==e.styles.line&&"line"in t&&(t.line=e.styles.line),void 0!==e.styles.snapToLines&&"snapToLines"in t&&(t.snapToLines=e.styles.snapToLines),void 0!==e.styles.position&&"position"in t&&(t.position=e.styles.position),void 0!==e.styles.size&&"size"in t&&(t.size=e.styles.size)}catch(e){b.error(e)}return t.onenter=function(){n.mode===Ue.A.TEXT_SHOWING&&D.trigger(Ye.A.CAPTION_RENDERED,{currentTrackIdx:T})},t}(h,t,s)));try{if(c){!function(e,t){if(e.cues)for(var n=0;n<e.cues.length;n++)if(e.cues[n].startTime===t.startTime&&e.cues[n].endTime===t.endTime)return 1;return}(s,c)&&(O.get().streaming.text.webvtt.customRenderingEnabled?(s.manualCueList||(s.manualCueList=[]),s.manualCueList.push(c)):(d=void 0,s.cues&&0!==s.cues.length&&(d=s.cues[s.cues.length-1]),a=c,(o=d)&&o.endTime>=a.startTime?(i=c,r=d,O.get().streaming.text.extendSegmentedCues&&function(e,t,n){for(var i=0;i<n.length;i++){var r=n[i];if(JSON.stringify(e[r])!==JSON.stringify(t[r]))return}return 1}(r,i,Vs)?r.endTime=Math.max(r.endTime,i.endTime):(d.isd&&(d.onexit=function(){}),s.mode!==Ue.A.TEXT_DISABLED&&s.addCue(c))):s.mode!==Ue.A.TEXT_DISABLED&&s.addCue(c)));var d,f,p,m=O.get().streaming.buffer.bufferToKeep,g=(A=E=v=p=f=y=_=g=void 0,s),_=0,y=k.getTime()-m;if(!(y<_)&&g&&(g.cues||g.manualCueList)){var v=g.cues&&0<g.cues.length?"native":"custom",E="native"==v?g.cues:g.manualCueList;if(E&&0!==E.length)for(var A=E.length-1;0<=A;A--)!H(E[A],_,y,!0)||(f=E[A],p=k.getTime(),f.startTime>=p&&f.endTime<=p)||("native"==v?g.removeCue(E[A]):(U(E[A]),delete g.manualCueList[A]))}}else b.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(e){throw G(s),s.addCue(c),e}}}function V(e){D.trigger(Ye.A.CUE_ENTER,e)}function N(e){D.trigger(Ye.A.CUE_EXIT,{cueID:e.cueID})}function F(e){return"html"===e.type}function B(e,t){return F(e)?((i=new r((n=e).start+t,n.end+t,"")).cueHTMLElement=n.cueHTMLElement,i.isd=n.isd,i.images=n.images,i.embeddedImages=n.embeddedImages,i.cueID=n.cueID,i.scaleCue=M.bind(self),i.cellResolution=n.cellResolution,i.lineHeight=n.lineHeight,i.linePadding=n.linePadding,i.fontSize=n.fontSize,i.isd&&function t(n,e){e&&e.forEach(function(e){e.kind&&"image"===e.kind&&(e.src=o(n,e.src)),t(n,e.contents)})}(i,i.isd.contents),i):((n=new r(e.start-t,e.end-t,e.data)).cueID="".concat(n.startTime,"_").concat(n.endTime),n);var n,i}function U(e){if(d)for(var t=d.childNodes,n=0;n<t.length;++n)t[n].id===e.cueID&&(d.removeChild(t[n]),--n)}function l(){var e,t=[],n=function(e){var t,n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,t=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw t}}};if(Array.isArray(e)||(o=function(e){var t;if(e)return"string"==typeof e?Gs(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Gs(e,void 0):void 0}(e)))return o&&(e=o),r=0,{s:a=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(k.getTextTracks());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.manualMode===Ue.A.TEXT_SHOWING&&t.push(i)}}catch(e){n.e(e)}finally{n.f()}return t}function j(e){return 0<=e&&c[e]?k.getTextTrack(c[e].kind,c[e].id,c[e].lang,c[e].isTTML,c[e].isEmbedded):null}function v(e){var t,n=this;e!==T&&(t=j(T=e),function(e){s.call(this),(e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=k.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){b.info(""+e.message)}}}:function(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}).call(this)}.call(this,t),i&&(clearInterval(i),i=null),t)&&"html"===t.renderingType&&(_.call(this,t,!0),window.ResizeObserver?(a=new window.ResizeObserver(function(){_.call(n,t,!0)})).observe(k.getElement()):i=setInterval(_.bind(this,t),500))}function H(e,t,n,i){i=!(3<arguments.length&&void 0!==i)||i;return e&&(isNaN(t)||(i?e.startTime:e.endTime)>=t)&&(isNaN(n)||(i?e.endTime:e.startTime)<=n)}function G(e,t,n){var i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];if(e&&(e.cues||e.manualCueList)){var r=e.cues&&0<e.cues.length?"native":"custom",a="native"==r?e.cues:e.manualCueList;if(a&&0!==a.length)for(var o=a.length-1;0<=o;o--)H(a[o],t,n,i)&&("native"==r?(a[o].onexit&&a[o].onexit(),e.removeCue(a[o])):(U(a[o]),delete e.manualCueList[o]))}}function s(){if(C)for(;C.firstChild;)C.removeChild(C.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(r=window.VTTCue||window.TextTrackCue,c=[],h=[],I=R=w=S=0,m=!(T=-1),g=2147483647,n=i=d=C=null,L="requestAnimationFrame"in window,void 0!==document.fullscreenElement?p="fullscreenElement":void 0!==document.webkitIsFullScreen?p="webkitIsFullScreen":document.msFullscreenElement?p="msFullscreenElement":document.mozFullScreen&&(p="mozFullScreen"))},getStreamId:function(){return f.id},addTextTrack:function(e){c.push(e)},addCaptions:y,createTracks:function(){var e=O.get().streaming.text.dispatchForManualRendering;c.sort(function(e,t){return e.index-t.index}),C=k.getTTMLRenderingDiv(),d=k.getVttRenderingDiv();for(var t,n,i,r=-1,a=0;a<c.length;a++){o=(i=c[a]).kind,s=void 0!==i.id?i.id:i.lang,t=i.lang,n=i.isTTML,i=i.isEmbedded;var o=k.addTextTrack(o,s,t,n,i),s=(h.push(o),c[a].defaultTrack&&(o.default=!0,r=a),j(a));s&&(s.mode=Ue.A.TEXT_SHOWING,C&&(c[a].isTTML||c[a].isEmbedded)?s.renderingType="html":s.renderingType="default"),y(a,0,c[a].captionData),D.trigger(Ye.A.TEXT_TRACK_ADDED)}if(v.call(this,r),0<=r){D.on(Ye.A.PLAYBACK_METADATA_LOADED,function e(){var t=j(r);t&&"html"===t.renderingType&&_.call(this,t,!0),D.off(Ye.A.PLAYBACK_METADATA_LOADED,e,this)},this);for(var l=0;l<c.length;l++){var u=j(l);u&&(u.mode=l!==r||e?Ue.A.TEXT_HIDDEN:Ue.A.TEXT_SHOWING,u.manualMode=l===r?Ue.A.TEXT_SHOWING:Ue.A.TEXT_HIDDEN)}}D.trigger(Ve.A.TEXT_TRACKS_QUEUE_INITIALIZED,{index:T,tracks:c,streamId:f.id})},getCurrentTrackIdx:function(){return T},setCurrentTrackIdx:v,getTrackIdxForId:function(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return c[T]},setModeForTrackIdx:function(e,t){e=j(e);e&&e.mode!==t&&(e.mode=t),e&&e.manualMode!==t&&(e.manualMode=t)},deleteCuesFromTrackIdx:function(e,t,n){e=j(e);e&&G(e,t,n)},deleteAllTextTracks:function(){for(var e=h?h.length:0,t=0;t<e;t++){var n=j(t);n&&G.call(this,n,f.start,f.start+f.duration,!1)}h=[],c=[],i&&(clearInterval(i),i=null),a&&k&&(a.unobserve(k.getElement()),a=null),T=-1,s.call(this)},manualCueProcessing:function(t){var e=l();e&&0<e.length&&(e=e[0].manualCueList)&&0<e.length&&e.forEach(function(e){e.startTime<=t&&e.endTime>=t&&!e.isActive?(e.isActive=!0,O.get().streaming.text.dispatchForManualRendering?V(e):WebVTT.processCues(window,[e],d,e.cueID)):e.isActive&&(e.startTime>t||e.endTime<t)&&(e.isActive=!1,(O.get().streaming.text.dispatchForManualRendering?N:U)(e))})},disableManualTracks:function(){var e=l();e&&0<e.length&&(e=e[0].manualCueList)&&0<e.length&&e.forEach(function(e){if(e.isActive)if(e.isActive=!1,O.get().streaming.text.dispatchForManualRendering)N(e);else if(d)for(var t=d.childNodes,n=0;n<t.length;++n)t[n].id===e.cueID&&(d.removeChild(t[n]),--n)})}},b=(0,He.A)(t).getInstance().getLogger(e),e}Hs.__dashjs_factory_name="TextTracks";var Ys=_e.A.getClassFactory(Hs);function zs(){var e,u,c,h,d,f,t=this.context;function p(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}function m(e){var i={};return e.forEach(function(e){var t,n;1<e.split(/:/).length&&(n=!1,(t=e.split(/:/)[1])&&-1!=t.search(/%/)&&(n=!0,t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(i.align=t),(e.match(/line/)||e.match(/L/))&&(i.line="auto"===t?t:parseInt(t,10),n)&&(i.snapToLines=!1),(e.match(/position/)||e.match(/P/))&&(i.position=t),e.match(/size/)||e.match(/S/))&&(i.size=t)}),i}return e={parse:function(e){var t=[];if(e)for(var n=(e=e.split(c)).length,i=-1,r=0;r<n;r++){var a,o,s,l=e[r];0<l.length&&"WEBVTT"!==l&&l.match(h)&&(s=void 0,(s=(l=(l=l).split(h))[1].split(f)).shift(),l[1]=s[0],s.shift(),s=(l={cuePoints:l,styles:m(s)}).cuePoints,l=l.styles,a=function(e,t){for(var n,i=t,r="",a="";""!==e[i]&&i<e.length;)i++;if(1<(n=i-t))for(var o=0;o<n;o++){if((a=e[t+o]).match(h)){r="";break}r+=a,o!==n-1&&(r+="\n")}else(a=e[t]).match(h)||(r=a);return r}(e,r+1),o=p(s[0].replace(d,"")),s=p(s[1].replace(d,"")),!isNaN(o)&&!isNaN(s)&&i<=o&&o<s?""!==a?t.push({start:i=o,end:s,data:a,styles:l}):u.error("Skipping cue due to empty/malformed cue text"):u.error("Skipping cue due to incorrect cue timing"))}return t},getCaptionStyles:m},u=(0,He.A)(t).getInstance().getLogger(e),c=/(?:\r\n|\r|\n)/gm,h=/-->/,d=/(^[\s]+|[\s]+$)/g,f=/\s\b/g,e}zs.__dashjs_factory_name="VTTParser";var Ws=_e.A.getSingletonFactory(zs);function Ks(){var n,e={parse:function(e){var t=[];return n.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},t.push(e)},n.parse(e),t}};try{window&&window.WebVTT&&window.WebVTT.Parser&&(n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(e){}return e}Ks.__dashjs_factory_name="VttCustomRenderingParser";var qs=_e.A.getSingletonFactory(Ks);function Qs(){var e=this.context,y=(0,Ge.A)(e).getInstance(),v=0,t={parse:function(e,t,n,i,r){var a,o="",s=[],l={},u={},c="",h="",d={onOpenTag:function(e,t,n){n[" imagetype"]&&!n[" imageType"]&&(y.trigger(Ye.A.CONFORMANCE_VIOLATION,{level:Wn.LEVELS.ERROR,event:Wn.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),n[" imageType"]=n[" imagetype"]),"image"!==t||"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"!==e&&"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"!==e||(n[" imageType"]&&"PNG"===n[" imageType"].value?c=n["http://www.w3.org/XML/1998/namespace id"].value:E.warn("smpte-tt imageType != PNG. Discarded"))},onCloseTag:function(){c&&(u[c]=h.trim()),c=h=""},onText:function(e){c&&(h+=e)}};if(!e)throw o="no ttml data to parse",new Error(o);l.data=e,y.trigger(Ve.A.TTML_TO_PARSE,l);var f=(0,js.fromXML)(l.data,function(e){o=e},d);y.trigger(Ve.A.TTML_PARSED,{ttmlString:l.data,ttmlDoc:f});for(var p,m=f.getMediaTimeEvents(),g=0;g<m.length;g++){var _=(0,js.generateISD)(f,m[g],function(e){o=e});_.contents.some(function(e){return e.contents.length})&&(p=m[g]+t)<(a=m[g+1]+t)&&s.push({start:p,end:a,type:"html",cueID:(p="cue_TTML_"+v,v++,p),isd:_,images:r,embeddedImages:u})}if(""!==o)throw E.error(o),new Error(o);return s}},E=(0,He.A)(e).getInstance().getLogger(t);return t}Qs.__dashjs_factory_name="TTMLParser";var Xs=_e.A.getSingletonFactory(Qs);function Js(e){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function $s(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Zs(Object(a),!0).forEach(function(e){var t=r,n=e,e=a[e],i=function(e){if("object"!=Js(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=Js(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(n);(n="symbol"==Js(i)?i:String(i))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Zs(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function tl(e){var r,s,t=this.context,i=(0,Ge.A)(t).getInstance(),l=(0,Ae.A)(t).getInstance(),u=e.adapter,c=e.baseURLController,h="unloaded";function a(e,t){var n=s[e];s[e]=$s($s({},n),{},{status:t})}function o(){s=[]}return e={addFontsFromTracks:function(e,t){if(e&&Array.isArray(e)&&t)for(var n=0;n<e.length;n++)!function(i,r){var a,o=!1,e=(c.resolve()&&(e=u.getVoRepresentations(i))&&0<e.length&&(a=c.resolve(e[0].path).url),i.essentialPropertiesAsArray.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===Ue.A.FONT_DOWNLOAD_DVB_SCHEME})),t=i.supplementalPropertiesAsArray.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===Ue.A.FONT_DOWNLOAD_DVB_SCHEME});(e=0<e.length?(o=!0,e):t).forEach(function(e){var t,n;e.value&&"1"===e.value&&e.dvbUrl&&0<e.dvbUrl.length&&e.dvbFontFamily&&0<e.dvbFontFamily.length&&e.dvbMimeType&&(e.dvbMimeType===Ue.A.OFF_MIMETYPE||e.dvbMimeType===Ue.A.WOFF_MIMETYPE)&&(t=e.dvbUrl,n=a,n=!l.isPathAbsolute(t)&&l.isRelative(t)?n?l.resolve(t,n):l.resolve(t):t,s.push({fontFamily:e.dvbFontFamily,url:n,mimeType:e.dvbMimeType,trackId:i.id,streamId:r,isEssential:o,status:h,fontFace:new FontFace(e.dvbFontFamily,"url(".concat(n,")"),{display:"swap"})}))})}(e[n],t)},downloadFonts:function(){for(var e=0;e<s.length;e++)!function(t){var n=s[t];document.fonts.add(n.fontFace),i.trigger(Ye.A.DVB_FONT_DOWNLOAD_ADDED,n),n.fontFace.load().then(function(){a(t,"loaded"),i.trigger(Ye.A.DVB_FONT_DOWNLOAD_COMPLETE,n)},function(e){a(t,"error"),r.debug("Font download error: ",e),i.trigger(Ye.A.DVB_FONT_DOWNLOAD_FAILED,n)})}(e)},getFonts:function(){return s},getFontsForTrackId:function(t){return s.filter(function(e){return e.trackId&&e.trackId===t})},reset:function(){var e,t=function(e){var t,n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,t=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw t}}};if(Array.isArray(e)||(o=function(e){var t;if(e)return"string"==typeof e?el(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?el(e,void 0):void 0}(e)))return o&&(e=o),r=0,{s:a=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(s);try{for(t.s();!(e=t.n()).done;){var n=e.value,i=document.fonts.delete(n.fontFace);r.debug("Removal of fontFamily: ".concat(n.fontFamily," was ").concat(i?"successful":"unsuccessful"))}}catch(e){t.e(e)}finally{t.f()}o()}},r=(0,He.A)(t).getInstance().getLogger(e),o(),e}tl.__dashjs_factory_name="DVBFonts";var nl=_e.A.getClassFactory(tl);function il(e){var t,a,d,f,i,r,o,p,m,n,s,l,u,c,h=this.context,g=e.adapter,_=e.errHandler,y=e.manifestModel,v=e.mediaController,E=e.baseURLController,A=e.videoModel,b=e.settings;function T(e){var t;c.error("Could not download ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential&&(t=f[e.streamId].getTrackIdxForId(e.trackId),f[e.streamId].setModeForTrackIdx(t,Ue.A.TEXT_DISABLED))}function S(e){var t;c.debug("Successfully downloaded ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential&&((t=f[e.streamId].getTrackIdxForId(e.trackId))===f[e.streamId].getCurrentTrackIdx()?f[e.streamId].setModeForTrackIdx(t,Ue.A.TEXT_SHOWING):f[e.streamId].setModeForTrackIdx(t,Ue.A.TEXT_HIDDEN))}function w(e){var n,t=e.tracks,i=e.index,r=e.streamId;!1===b.get().streaming.text.defaultEnabled&&!C()||l?L(r,-1):((e=v.getCurrentTrackFor(Ue.A.TEXT,r))&&(n={lang:e.lang,role:e.roles[0],index:e.index,codec:e.codec,accessibility:e.accessibility[0]},t.some(function(e,t){if(v.matchSettings(n,e))return L(r,t),i=t,!0})),m=!1),a[r].lastEnabledIndex=i,p.trigger(Ye.A.TEXT_TRACKS_ADDED,{enabled:C(),index:i,tracks:t,streamId:r}),s=!0,u.addFontsFromTracks(t,r),u.getFonts().forEach(function(e){var t;e.isEssential&&(t=f[e.streamId].getTrackIdxForId(e.trackId),f[e.streamId].setModeForTrackIdx(t,Ue.A.TEXT_DISABLED))}),u.downloadFonts()}function R(e){try{var t=e.streamId;f[t]&&!isNaN(e.time)&&f[t].manualCueProcessing(e.time)}catch(e){}}function I(e){try{var t=e.streamId;f[t]&&f[t].disableManualTracks()}catch(e){}}function C(){return m&&!n?!1:!0}function L(e,t){(m=-1===t)&&v&&v.saveTextSettingsDisabled();var n=P(e);if(n!==t&&f[e]){f[e].disableManualTracks();var i=f[e].getCurrentTrackInfo(),r=i?A.getTextTrack(i.kind,i.id,i.lang,i.isTTML,i.isEmbedded):null,r=(r&&r.mode!==Ue.A.TEXT_DISABLED&&f[e].setModeForTrackIdx(n,Ue.A.TEXT_HIDDEN),f[e].setCurrentTrackIdx(t),i=f[e].getCurrentTrackInfo(),b.get().streaming.text.dispatchForManualRendering);if(i&&!r&&i.mode!==Ue.A.TEXT_DISABLED&&f[e].setModeForTrackIdx(t,Ue.A.TEXT_SHOWING),i&&i.isFragmented&&!i.isEmbedded){var a=e;var o=i;var s=n;if(d[a])for(var l=d[a].getConfig().fragmentedTracks,u=0;u<l.length;u++){var c,h=l[u];o.lang===h.lang&&(h.id?o.id===h.id:o.index===h.index)&&(c=v.getCurrentTrackFor(Ue.A.TEXT,a),(h.id?c.id!==h.id:c.index!==h.index)?(f[a].deleteCuesFromTrackIdx(s),d[a].setCurrentFragmentedTrackIdx(u)):-1===s&&p.trigger(Ve.A.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:a,mediaType:Ue.A.TEXT}))}}else i&&!i.isFragmented&&p.trigger(Ve.A.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:i},{streamId:e,mediaType:Ue.A.TEXT});v.setTrack(i)}}function P(e){return f[e].getCurrentTrackIdx()}function D(){d={},f={},a={},l=s=!(m=!0)}return l=s=n=!(t={deactivateStream:function(e){e&&(e=e.id,d[e]&&d[e].resetMediaInfos(),f[e])&&f[e].deleteAllTextTracks()},initialize:function(){u=nl(h).create({adapter:g,baseURLController:E}),p.on(Ve.A.TEXT_TRACKS_QUEUE_INITIALIZED,w,t),p.on(Ve.A.DVB_FONT_DOWNLOAD_FAILED,T,t),p.on(Ve.A.DVB_FONT_DOWNLOAD_COMPLETE,S,t),b.get().streaming.text.webvtt.customRenderingEnabled&&(p.on(Ve.A.PLAYBACK_TIME_UPDATED,R,t),p.on(Ve.A.PLAYBACK_SEEKING,I,t))},initializeForStream:function(e){var t=e.id,n=Ys(h).create({videoModel:A,settings:b,streamInfo:e}),n=(n.initialize(),f[t]=n,Us(h).create({errHandler:_,adapter:g,dvbFonts:u,manifestModel:y,mediaController:v,videoModel:A,textTracks:n,vttParser:i,vttCustomRenderingParser:r,ttmlParser:o,streamInfo:e,settings:b}));n.initialize(),d[t]=n,a[t]={},a[t].lastEnabledIndex=-1},createTracks:function(e){e=e.id;f[e]&&f[e].createTracks()},getTextSourceBuffer:function(e){e=e.id;if(d&&d[e])return d[e]},getAllTracksAreDisabled:function(){return m},addEmbeddedTrack:function(e,t){e=e.id;d[e]&&d[e].addEmbeddedTrack(t)},enableText:function(e,t){return(0,Ee.sq)(t,"boolean"),C()!==t&&(t&&L(e,a[e].lastEnabledIndex),t||(a[e].lastEnabledIndex=P(e),s?L(e,-1):l=!0)),!0},isTextEnabled:C,setTextTrack:L,getCurrentTrackIdx:P,enableForcedTextStreaming:function(e){return(0,Ee.sq)(e,"boolean"),n=e,!0},addMediaInfosToBuffer:function(e,t,n){e=e.id;d[e]&&d[e].addMediaInfos(t,n,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)},reset:function(){u.reset(),D(),p.off(Ve.A.TEXT_TRACKS_QUEUE_INITIALIZED,w,t),p.off(Ve.A.DVB_FONT_DOWNLOAD_FAILED,T,t),p.off(Ve.A.DVB_FONT_DOWNLOAD_COMPLETE,S,t),b.get().streaming.text.webvtt.customRenderingEnabled&&(p.off(Ve.A.PLAYBACK_TIME_UPDATED,R,t),p.off(Ve.A.PLAYBACK_SEEKING,I,t)),Object.keys(d).forEach(function(e){d[e].resetEmbedded(),d[e].reset()})}}),i=Ws(h).getInstance(),r=qs(h).getInstance(),o=Xs(h).getInstance(),p=(0,Ge.A)(h).getInstance(),c=(0,He.A)(h).getInstance().getLogger(t),D(),t}il.__dashjs_factory_name="TextController";var rl=_e.A.getClassFactory(il);function al(){var e,r,n,i,a,o,s,B,l,u,U,j,c,h,t,G,d,f,p,m,g,_,y,V,v,E,A,b,T,S,w,R,I,H,Y,C,z,W,L,P="You must first call initialize() and set a source before calling this method",D="You must first call initialize() and set a valid source and view before calling this method",K="You must first call attachView() to set the video element before calling this method",q="You must first call attachSource() with a valid source before calling this method",k="MediaPlayer not initialized!",O=this.context,M=(0,Ge.A)(O).getInstance(),x=(0,ye.A)(O).getInstance(),N=(0,He.A)(O).getInstance({settings:x});function Q(){le(null),oe(null),i=null,h&&(h.reset(),h=null),t&&(t.reset(),t=null),m&&m.reset(),x.reset(),d&&(d.reset(),d=null)}function X(){return!!n&&!!C.getElement()}function J(){return(0,Ca.i)()}function Z(){if(s)return b.isPaused();throw D}function $(){if(s)return b.getIsDynamic();throw D}function ee(e){var t,n=v&&v.hasVideoTrack()?Ue.A.VIDEO:Ue.A.AUDIO,n=R.getCurrentDVRInfo(n);return n?(t=b.getOriginalLiveDelay(),(e=n.range.start+e)>n.range.end-t?n.range.end-t:e):0}function te(e){var t;if(s)return t=F().currentTime,void 0!==e?t=v.getTimeRelativeToStreamId(t,e):b.getIsDynamic()&&(e=v&&v.hasVideoTrack()?Ue.A.VIDEO:Ue.A.AUDIO,t=null===(e=R.getCurrentDVRInfo(e))||0===t?0:Math.max(0,t-e.range.start)),t;throw D}function ne(){var e,t;if(s)return t=F().duration,b.getIsDynamic()&&(e=v&&v.hasVideoTrack()?Ue.A.VIDEO:Ue.A.AUDIO,t=(e=R.getCurrentDVRInfo(e))?e.range.end-e.range.start:0),t;throw D}function ie(e){(0,Ee.sq)(e,"boolean"),B=e}function re(){m.restoreDefaultUTCTimingSources()}function ae(){return R}function F(){if(C.getElement())return C.getElement();throw K}function oe(e){if(!a)throw k;C.setElement(e),e&&(de(),t||"function"==typeof(e=dashjs.MetricsReporting)&&(e=e(O).create(),t=e.createMetricsReporting({debug:N,eventBus:M,mediaElement:F(),adapter:f,dashMetrics:R,mediaPlayerModel:p,events:Ve.A,constants:Ue.A,metricsConstants:je.A})),G||"function"==typeof(e=dashjs.MssHandler)&&(We.extend(e.errors),G=e(O).create({eventBus:M,mediaPlayerModel:p,dashMetrics:R,manifestModel:I,playbackController:b,streamController:v,protectionController:h,baseURLController:_,errHandler:g,events:Ve.A,constants:Ue.A,debug:N,initSegmentType:ve.G.INIT_SEGMENT_TYPE,BASE64:Cs,ISOBoxer:Ls,settings:x})),v)&&v.switchToVideoElement(l),s&&ce(),me(l)}function se(e){var t;if(o)return(t=v.getActiveStreamInfo())?c.getTracksFor(e,t.id):[];throw P}function le(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!a)throw k;"string"==typeof e&&z.initialize(e),null==t&&(t=NaN),isNaN(t)||(t=Math.max(0,t)),l=t,n=e,(o||s)&&ce(),X()&&me(l)}function ue(){var e;if(o)return(e=v.getActiveStreamInfo())?v.getStreamById(e.id):null;throw P}function ce(){o=s=!1,f.reset(),v.reset(),A.reset(),w.reset(),b.reset(),T.reset(),S.reset(),u.reset(),c.reset(),L.reset(),h&&(x.get().streaming.protection.keepProtectionMediaKeys?h.stop():(h.reset(),h=null,de())),E.reset(),H.reset(),Y.reset()}function he(){return Gr(O).create({debug:N,errHandler:g,dashMetrics:R,mediaPlayerModel:p,requestModifier:(0,Ce.A)(O).getInstance(),mssHandler:G,settings:x})}function de(){var e,t;return h||("function"==typeof(e=dashjs.Protection)?(t=e(O).create(),Ve.A.extend(e.events),Ye.A.extend(e.events,{publicOnly:!0}),We.extend(e.errors),y=y||(0,Yr.A)(O).getInstance(),h=t.createProtectionSystem({debug:N,errHandler:g,videoModel:C,customParametersModel:m,capabilities:y,eventBus:M,events:Ve.A,BASE64:Cs,constants:Ue.A,cmcdModel:H,settings:x})):null)}function fe(){var e,t,n;if(a)return d||("function"==typeof(e=dashjs.OfflineController)?(Ve.A.extend(e.events),Ye.A.extend(e.events,{publicOnly:!0}),We.extend(e.errors),t=he(),(n=Un(O).create()).setConfig({manifestModel:I,adapter:f,manifestLoader:t,errHandler:g,contentSteeringController:S}),d=e(O).create({debug:N,manifestUpdater:n,baseURLController:_,manifestLoader:t,manifestModel:I,mediaPlayerModel:p,abrController:u,playbackController:b,adapter:f,errHandler:g,dashMetrics:R,timelineConverter:j,segmentBaseController:L,schemeLoaderFactory:U,eventBus:M,events:Ve.A,errors:We,constants:Ue.A,settings:x,dashConstants:ge.A,urlUtils:(0,Ae.A)(O).getInstance()})):null);throw k}function pe(e){var t=v&&v.hasVideoTrack()?Ue.A.VIDEO:Ue.A.AUDIO,t=R.getCurrentDVRInfo(t);return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function me(e){var t,e=0<arguments.length&&void 0!==e?e:NaN;d&&d.resetRecords(),!o&&n&&(o=!0,r.info("Streaming Initialized"),t=he(),v=v||Qn(O).getInstance(),E=E||rl(O).create({errHandler:g,manifestModel:I,adapter:f,mediaController:c,baseURLController:_,videoModel:C,settings:x}),V.setConfig({capabilities:y,customParametersModel:m,adapter:f,settings:x,manifestModel:I,errHandler:g}),v.setConfig({capabilities:y,capabilitiesFilter:V,manifestLoader:t,manifestModel:I,mediaPlayerModel:p,customParametersModel:m,protectionController:h,textController:E,adapter:f,dashMetrics:R,errHandler:g,timelineConverter:j,videoModel:C,playbackController:b,serviceDescriptionController:T,contentSteeringController:S,abrController:u,mediaController:c,settings:x,baseURLController:_,uriFragmentModel:z,segmentBaseController:L}),A.setConfig({settings:x,playbackController:b,streamController:v,videoModel:C,timelineConverter:j,adapter:f}),b.setConfig({streamController:v,serviceDescriptionController:T,dashMetrics:R,adapter:f,videoModel:C,timelineConverter:j,settings:x}),w.setConfig({streamController:v,playbackController:b,mediaPlayerModel:p,videoModel:C,settings:x}),u.setConfig({streamController:v,domStorage:W,mediaPlayerModel:p,customParametersModel:m,cmsdModel:Y,dashMetrics:R,adapter:f,videoModel:C,settings:x}),H.setConfig({abrController:u,dashMetrics:R,playbackController:b}),Y.setConfig({}),u.initialize(),v.initialize(B,i),E.initialize(),A.initialize(),w.initialize(),H.initialize(),Y.initialize(),S.initialize(),L.initialize(),"string"==typeof n?v.load(n,e):v.loadWithManifest(n,e)),!s&&X()&&(s=!0,r.info("Playback Initialized"))}return r=N.getLogger(e={initialize:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:NaN;y||(y=(0,Yr.A)(O).getInstance()).setConfig({settings:x}),g=g||Hr(O).getInstance(),y.supportsMediaSource()?(a||(a=!0,j=Is(O).getInstance(),u||(u=ga(O).getInstance()).setConfig({settings:x}),U=U||Qt(O).getInstance(),b=b||Te(O).getInstance(),c=c||si(O).getInstance(),v=v||Qn(O).getInstance(),A=A||Jn(O).getInstance(),w=w||$n(O).getInstance(),T=T||ni(O).getInstance(),S=S||xn(O).getInstance(),V=V||Wr(O).getInstance(),f=yo(O).getInstance(),I=ta(O).getInstance(),H=Dt(O).getInstance(),Y=Gt(O).getInstance(),R=ws(O).getInstance({settings:x}),W=Ia(O).getInstance({settings:x}),f.setConfig({constants:Ue.A,cea608parser:be(),errHandler:g,BASE64:Cs}),(_=_||Si(O).create()).setConfig({adapter:f,contentSteeringController:S}),T.setConfig({adapter:f}),L=L||Fa(O).getInstance({dashMetrics:R,mediaPlayerModel:p,errHandler:g,baseURLController:_,events:Ve.A,eventBus:M,debug:N,boxParser:(0,yn.A)(O).getInstance(),requestModifier:(0,Ce.A)(O).getInstance(),errors:We}),c.setConfig({domStorage:W,settings:x,customParametersModel:m}),p.setConfig({playbackController:b,serviceDescriptionController:T}),S.setConfig({adapter:f,errHandler:g,dashMetrics:R,mediaPlayerModel:p,manifestModel:I,serviceDescriptionController:T,eventBus:M,requestModifier:(0,Ce.A)(O).getInstance()}),re(),ie(void 0===n||n),fe()),e&&oe(e),t&&le(t,i),r.info("[dash.js "+J()+"] MediaPlayer has been initialized")):g.error(new ze.A(We.CAPABILITY_MEDIASOURCE_ERROR_CODE,We.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(y=e.capabilities),e.capabilitiesFilter&&(V=e.capabilitiesFilter),e.streamController&&(v=e.streamController),e.textController&&(E=e.textController),e.gapController&&(A=e.gapController),e.playbackController&&(b=e.playbackController),e.serviceDescriptionController&&(T=e.serviceDescriptionController),e.contentSteeringController&&(S=e.contentSteeringController),e.catchupController&&(w=e.catchupController),e.mediaPlayerModel&&(p=e.mediaPlayerModel),e.customParametersModel&&(m=e.customParametersModel),e.abrController&&(u=e.abrController),e.schemeLoaderFactory&&(U=e.schemeLoaderFactory),e.mediaController&&(c=e.mediaController),e.settings)&&(x=e.settings)},on:function(e,t,n,i){M.on(e,t,n,i)},off:function(e,t,n){M.off(e,t,n)},extend:function(e,t,n){_e.A.extend(e,t,n,O)},attachView:oe,attachSource:le,refreshManifest:function(n){if(!a)throw k;if(!X())return n(null,q);var i=this;"function"==typeof n&&M.on(Ve.A.INTERNAL_MANIFEST_LOADED,function e(t){M.off(Ve.A.INTERNAL_MANIFEST_LOADED,e,i),t.error?n(null,t.error):n(t.manifest)},i),v.refreshManifest()},isReady:X,preload:function(){if(!C.getElement()&&!o){if(!n)throw q;me(l)}},play:function(){if(!s)throw D;(!B||Z()&&s)&&b.play(!0)},isPaused:Z,pause:function(){if(!s)throw D;b.pause()},isSeeking:function(){if(s)return b.isSeeking();throw D},isDynamic:$,getLowLatencyModeEnabled:function(){if(s)return b.getLowLatencyModeEnabled();throw D},seek:function(e){if(!s)throw D;if((0,Ee.sq)(e,"number"),isNaN(e))throw Ue.A.BAD_ARGUMENT_ERROR;e<0&&(e=0);var e=b.getIsDynamic()?ee(e):e,t=F();!b.getIsDynamic()&&t.duration&&(e=Math.min(t.duration,e)),b.seek(e,!1,!1,!0)},seekToOriginalLive:function(){s&&$()&&b.seekToOriginalLive()},setPlaybackRate:function(e){F().playbackRate=e},getPlaybackRate:function(){return F().playbackRate},setMute:function(e){(0,Ee.sq)(e,"boolean"),F().muted=e},isMuted:function(){return F().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw Ue.A.BAD_ARGUMENT_ERROR;F().volume=e},getVolume:function(){return F().volume},time:te,duration:ne,timeAsUTC:function(){if(s)return te()<0?NaN:pe(te());throw D},durationAsUTC:function(){if(s)return pe(ne());throw D},getActiveStream:ue,getDVRWindowSize:function(){var e=v&&v.hasVideoTrack()?Ue.A.VIDEO:Ue.A.AUDIO,e=R.getCurrentDVRInfo(e);return e?e.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ee,getAvailableBaseUrls:function(){var e=I.getValue();return e?_.getBaseUrls(e):[]},getAvailableLocations:function(){var e,t=I.getValue();return t?(t=f.getLocation(t),e=S.getSynthesizedLocationElements(t),t.concat(e)):[]},getTargetLiveDelay:function(){if(s)return b.getOriginalLiveDelay();throw D},convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),e=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(e<10?"0"+e.toString():e.toString())},formatUTC:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=new Date(1e3*e),r=e.toLocaleDateString(t),e=e.toLocaleTimeString(t,{hour12:n});return i?e+" "+r:e},getVersion:J,getDebug:function(){return N},getBufferLength:function(e){var t=[Ue.A.VIDEO,Ue.A.AUDIO,Ue.A.TEXT];return e?-1!==t.indexOf(e)?R.getCurrentBufferLevel(e)||NaN:(r.warn("getBufferLength requested for invalid type"),NaN):(e=t.map(function(e){return 0<se(e).length?R.getCurrentBufferLevel(e):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:e},getTTMLRenderingDiv:function(){return C?C.getTTMLRenderingDiv():null},getVideoElement:F,getSource:function(){if(n)return n;throw q},updateSource:function(e){n=e,v.load(n)},getCurrentLiveLatency:function(){if(a)return s?b.getCurrentLiveLatency():NaN;throw k},getTopBitrateInfoFor:function(e){if(o)return u.getTopBitrateInfoFor(e);throw P},setAutoPlay:ie,getAutoPlay:function(){return B},getDashMetrics:ae,getQualityFor:function(e){var t;if(o)return e===Ue.A.IMAGE?(t=ue())&&(t=t.getThumbnailController())?t.getCurrentTrackIndex():-1:u.getQualityFor(e);throw P},setQualityFor:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!o)throw P;if(e===Ue.A.IMAGE){var i=ue();if(!i)return;i=i.getThumbnailController();i&&i.setTrackByIndex(t)}u.setPlaybackQuality(e,v.getActiveStreamInfo(),t,{forceReplace:n})},updatePortalSize:function(){u.setElementSize(),u.setWindowResizeEventCalled(!0)},enableText:function(e){var t=v.getActiveStreamInfo();return!(!t||!E)&&E.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!(!v.getActiveStreamInfo()||!E)&&E.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=v.getActiveStreamInfo();return!(!e||!E)&&E.isTextEnabled(e)},setTextTrack:function(e){if(!s)throw D;var t=v.getActiveStreamInfo();t&&E&&E.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){var t;if(o)return(t=ue())?t.getBitrateListFor(e):[];throw P},getStreamsFromManifest:function(e){if(o)return f.getStreamsInfo(e);throw P},getTracksFor:se,getTracksForTypeFromManifest:function(e,t,n){if(o)return(n=n||f.getStreamsInfo(t,1)[0])?f.getAllMediaInfoForType(n,e,t):[];throw P},getCurrentTrackFor:function(e){var t;if(o)return t=v.getActiveStreamInfo(),c.getCurrentTrackFor(e,t.id);throw P},setInitialMediaSettingsFor:function(e,t){if(!a)throw k;c.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(a)return c.getInitialSettings(e);throw k},setCurrentTrack:function(e){if(!o)throw P;c.setTrack(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},addABRCustomRule:function(e,t,n){m.addAbrCustomRule(e,t,n)},removeABRCustomRule:function(e){m.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){m.removeAllAbrCustomRule()},getABRCustomRules:function(){return m.getAbrCustomRules()},getAverageThroughput:function(e){var t=u.getThroughputHistory(),n=b.getIsDynamic();return t?t.getAverageThroughput(e,n):0},retrieveManifest:function(e,n){var i=he(),r=this;M.on(Ve.A.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),M.off(Ve.A.INTERNAL_MANIFEST_LOADED,e,r),i.reset()},r),z.initialize(e),i.load(e)},addUTCTimingSource:function(e,t){m.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){m.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){m.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:re,setXHRWithCredentialsForType:function(e,t){m.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return m.getXHRWithCredentialsForType(e)},getProtectionController:de,attachProtectionController:function(e){h=e},setProtectionData:function(e){i=e,v&&v.setProtectionData(i)},registerLicenseRequestFilter:function(e){m.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){m.registerLicenseResponseFilter(e)},unregisterLicenseRequestFilter:function(e){m.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){m.unregisterLicenseResponseFilter(e)},registerCustomCapabilitiesFilter:function(e){m.registerCustomCapabilitiesFilter(e)},unregisterCustomCapabilitiesFilter:function(e){m.unregisterCustomCapabilitiesFilter(e)},setCustomInitialTrackSelectionFunction:function(e){m.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){m.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!C.getElement())throw K;C.setTTMLRenderingDiv(e)},attachVttRenderingDiv:function(e){if(!C.getElement())throw K;C.setVttRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=v.getActiveStreamInfo();if(e&&E)return E.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t){if(!(e<0)){var e=b.getIsDynamic()?ee(e):e,n=v.getStreamForTime(e);if(null!==n){n=n.getThumbnailController();if(n)return n.provide(e,t)}}t(null)}},getDashAdapter:function(){return f},getOfflineController:fe,triggerSteeringRequest:function(){if(S)return S.loadSteeringData()},getCurrentSteeringResponseData:function(){if(S)return S.getCurrentSteeringResponseData()},getSettings:function(){return x.get()},updateSettings:function(e){x.update(e)},resetSettings:function(){x.reset()},reset:Q,destroy:function(){Q(),_e.A.deleteSingletonInstances(O)}}),B=!(o=s=a=!1),l=NaN,L=f=i=d=h=null,Ve.A.extend(Ye.A),p=ia(O).getInstance(),m=(0,Yt.A)(O).getInstance(),C=va(O).getInstance(),z=$r(O).getInstance(),e}al.__dashjs_factory_name="MediaPlayer";var _=_e.A.getClassFactory(al),ol=(_.events=Ye.A,_.errors=We,_e.A.updateClassFactory(al.__dashjs_factory_name,_),_)},8914:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=o(t);var i=e;if(!(t=a()?Reflect.construct(t,n||[],o(e).constructor):t.apply(e,n))||"object"!==r(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).AST_IN_FUTURE="astInFuture",e.BASE_URLS_UPDATED="baseUrlsUpdated",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",e.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",e.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADING_STARTED="manifestLoadingStarted",e.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.CUE_ENTER="cueEnter",e.CUE_EXIT="cueExit",e.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",e.INBAND_PRFT="inbandPrft",e.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",e.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&i(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4183).A));t.A=n},4961:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}n((i=a).prototype,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=new a;function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.init()}t.A=i},6992:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}n((i=a).prototype,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=new a;function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.init()}t.A=i},9138:function(N,e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}t.d(e,{default:function(){return oe}});e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null},i&&n(e.prototype,i),I&&n(e,I),Object.defineProperty(e,"prototype",{writable:!1});var i=e,f=(i.SSL_CONNECTION_FAILED_PREFIX="SSL",i.DNS_RESOLUTION_FAILED="C00",i.HOST_UNREACHABLE="C01",i.CONNECTION_REFUSED="C02",i.CONNECTION_ERROR="C03",i.CORRUPT_MEDIA_ISOBMFF="M00",i.CORRUPT_MEDIA_OTHER="M01",i.BASE_URL_CHANGED="F00",i.BECAME_REPORTER="S00",i),p=t(7474);function a(e){var t,i,n=(e=e||{}).eventBus,r=e.dashMetrics,a=e.metricsConstants,o=e.events;function s(e){var t=new f;if(i){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=i.originalUrl||i.url),t.terror||(t.terror=new Date),r.addDVBErrors(t)}}function l(e){e.error||(i=e.manifest)}function u(e){s({errorcode:f.BASE_URL_CHANGED,servicelocation:e.entry})}function c(){s({errorcode:f.BECAME_REPORTER})}function h(e){e.metric===a.HTTP_REQUEST&&(0===(e=e.value).responsecode||null==e.responsecode||400<=e.responsecode||e.responsecode<100||600<=e.responsecode)&&s({errorcode:e.responsecode||f.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function d(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=f.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=f.CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t})}return t={initialize:function(){n.on(o.MANIFEST_UPDATED,l,t),n.on(o.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,u,t),n.on(o.METRIC_ADDED,h,t),n.on(o.METRIC_UPDATED,h,t),n.on(o.PLAYBACK_ERROR,d,t),n.on(p.A.BECAME_REPORTING_PLAYER,c,t)},reset:function(){n.off(o.MANIFEST_UPDATED,l,t),n.off(o.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,u,t),n.off(o.METRIC_ADDED,h,t),n.off(o.METRIC_UPDATED,h,t),n.off(o.PLAYBACK_ERROR,d,t),n.off(p.A.BECAME_REPORTING_PLAYER,c,t)}}}a.__dashjs_factory_name="DVBErrorsTranslator";var F=dashjs.FactoryMaker.getSingletonFactory(a),B=t(5994);function o(e){var a=!1,t=this.context,o=(e=e||{}).mediaElement,e={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,e=t+e.duration;s.add(t,e)}),a=!!e[0]._useWallClockTime)},reset:function(){s.clear()},isEnabled:function(){var e=s.length;if(!e)return!0;for(var t=a?(new Date).getTime()/1e3:o.currentTime,n=0;n<e;n+=1){var i=s.start(n),r=s.end(n);if(i<=t&&t<r)return!0}return!1}},s=(0,B.A)(t).create();return e}o.__dashjs_factory_name="RangeController";var U=dashjs.FactoryMaker.getClassFactory(o);function s(){return{serialise:function n(e){var t,i,r=[],a=[];for(t in e)if(e.hasOwnProperty(t)&&0!==t.indexOf("_")){if(null==(i=e[t])&&(i=""),Array.isArray(i)){if(!i.length)continue;a=[],i.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);a.push(t?e:n(e))}),i=a.map(encodeURIComponent).join(",")}else"string"==typeof i?i=encodeURIComponent(i):i instanceof Date?i=i.toISOString():"number"==typeof i&&(i=Math.round(i));r.push(t+"="+i)}return r.join("&")}}}s.__dashjs_factory_name="MetricSerialiser";var j=dashjs.FactoryMaker.getSingletonFactory(s);function l(){var i,r,e,a=window.crypto||window.msCrypto,t=Uint32Array,o=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1;function s(){a&&(i=i||new t(10),a.getRandomValues(i),r=0)}return e={random:function(e,t){var n;return e=e||0,t=t||1,a?(r===i.length&&s(),n=i[r]/o,r+=1):n=Math.random(),n*(t-e)+e}},s(),e}l.__dashjs_factory_name="RNG";var G=dashjs.FactoryMaker.getSingletonFactory(l),V=t(9085);function u(e){var o,s,n,i,l,u,r,t=this.context,c=[],h=(e=e||{}).metricsConstants;function a(){l=i=!1,r=u=null}return e={report:function(a,e){Array.isArray(e)||(e=[e]),l&&r.isEnabled()&&e.forEach(function(e){var e=o.serialise(e),t=(a!==h.DVB_ERRORS&&(e="metricname=".concat(a,"&").concat(e)),e="".concat(u,"?").concat(e)),n=function(){l=!1};function i(){var e=c.indexOf(r);-1===e||(c.splice(e,1),200<=r.status&&r.status<300)||!n||n()}var r=new XMLHttpRequest;r.withCredentials=s.getXHRWithCredentialsForType(h.HTTP_REQUEST_DVB_REPORTING_TYPE),c.push(r);try{r.open("GET",t),r.onloadend=i,r.onerror=i,r.send()}catch(t){r.onerror()}})},initialize:function(e,t){if(r=t,!(u=e.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");i||((t=e.dvbProbability)&&(1e3===t||t/1e3>=n.random())&&(l=!0),i=!0)},reset:function(){a()}},o=j(t).getInstance(),n=G(t).getInstance(),s=(0,V.A)(t).getInstance(),a(),e}u.__dashjs_factory_name="DVBReporting";var H=dashjs.FactoryMaker.getClassFactory(u);function c(e){var i={"urn:dvb:dash:reporting:2014":H},r=this.context,a=(e=e||{}).debug?e.debug.getLogger(void 0):{},o=e.metricsConstants,s=e.mediaPlayerModel||{};return{create:function(e,t){var n;try{(n=i[e.schemeIdUri](r).create({metricsConstants:o,mediaPlayerModel:s})).initialize(e,t)}catch(t){n=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(e.schemeIdUri," (").concat(t.message,")"))}return n},register:function(e,t){i[e]=t},unregister:function(e){delete i[e]}}}c.__dashjs_factory_name="ReportingFactory";var h=dashjs.FactoryMaker.getSingletonFactory(c);function d(e){var i=[],n=h(this.context).getInstance(e);return{initialize:function(e,t){e.some(function(e){e=n.create(e,t);if(e)return i.push(e),!0})},reset:function(){i.forEach(function(e){return e.reset()}),i=[]},report:function(t,n){i.forEach(function(e){return e.report(t,n)})}}}d.__dashjs_factory_name="ReportingController";var Y=dashjs.FactoryMaker.getClassFactory(d);function m(){return{reconstructFullMetricName:function(e,t,n){return t&&(e+="("+t,n&&n.length&&(e+=","+n),e+=")"),e},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}m.__dashjs_factory_name="HandlerHelpers";var g=dashjs.FactoryMaker.getSingletonFactory(m);function _(e){e=e||{};var i,r,a,o,t,n=this.context,s=g(n).getInstance(),l=[],u=e.metricsConstants;function c(){var e=function(){try{return Object.keys(l).map(function(e){return l[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){}}();e&&t!==e.t&&(t=e.t,i.report(a,e))}return{initialize:function(e,t,n){t&&(r=s.validateN(n),i=t,a=s.reconstructFullMetricName(e,n),o=setInterval(c,r))},reset:function(){clearInterval(o),r=0,t=i=o=null},handleNewMetric:function(e,t,n){e===u.BUFFER_LEVEL&&(l[n]=t)}}}_.__dashjs_factory_name="BufferLevelHandler";var z=dashjs.FactoryMaker.getClassFactory(_),W=dashjs.FactoryMaker.getClassFactory(function(e){var n,i=(e=e||{}).eventBus,r=e.metricsConstants;function a(){i.off(p.A.METRICS_INITIALISATION_COMPLETE,a,this),i.trigger(p.A.BECAME_REPORTING_PLAYER)}return{initialize:function(e,t){t&&(n=t,i.on(p.A.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){n=null},handleNewMetric:function(e,t){e===r.DVB_ERRORS&&n&&n.report(e,t)}}});function y(e){e=e||{};var r,a,o,s,l,n=[],u=g(this.context).getInstance(),i=e.metricsConstants;function c(){var e=n;e.length&&r&&r.report(s,e),n=[]}return{initialize:function(e,t,n,i){t&&(a=u.validateN(n),r=t,i&&i.length&&(o=i),s=u.reconstructFullMetricName(e,n,i),l=setInterval(c,a))},reset:function(){clearInterval(l),n=[],r=o=a=l=null},handleNewMetric:function(e,t){e!==i.HTTP_REQUEST||o&&o!==t.type||n.push(t)}}}y.__dashjs_factory_name="HttpListHandler";var K=dashjs.FactoryMaker.getClassFactory(y);function v(){var n,i;return{initialize:function(e,t){n=e,i=t},reset:function(){i=null,n=void 0},handleNewMetric:function(e,t){e===n&&i&&i.report(n,t)}}}v.__dashjs_factory_name="GenericMetricHandler";var E=dashjs.FactoryMaker.getClassFactory(v);function A(i){var r=(i=i||{}).debug?i.debug.getLogger(void 0):{},a=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,o=this.context,s={BufferLevel:z,DVBErrors:W,HttpList:K,PlayList:E,RepSwitchList:E,TcpList:E};return{create:function(t,e){var n,t=t.match(a);if(t){try{(n=s[t[1]](o).create({eventBus:i.eventBus,metricsConstants:i.metricsConstants})).initialize(t[1],e,t[3],t[5])}catch(e){n=null,r.error("MetricsHandlerFactory: Could not create handler for type ".concat(t[1]," with args ").concat(t[3],", ").concat(t[5]," (").concat(e.message,")"))}return n}},register:function(e,t){s[e]=t},unregister:function(e){delete s[e]}}}A.__dashjs_factory_name="MetricsHandlerFactory";var b=dashjs.FactoryMaker.getSingletonFactory(A);function T(e){var t,a=[],n=this.context,i=(e=e||{}).eventBus,o=e.events,s=b(n).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function l(t){a.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}return t={initialize:function(e,r){e.split(",").forEach(function(e,t,n){var i;-1!==e.indexOf("(")&&-1===e.indexOf(")")&&(i=n[t+1])&&-1===i.indexOf("(")&&-1!==i.indexOf(")")&&(e+=","+i,delete n[t+1]),(i=s.create(e,r))&&a.push(i)}),i.on(o.METRIC_ADDED,l,t),i.on(o.METRIC_UPDATED,l,t)},reset:function(){i.off(o.METRIC_ADDED,l,t),i.off(o.METRIC_UPDATED,l,t),a.forEach(function(e){return e.reset()}),a=[]}}}T.__dashjs_factory_name="MetricsHandlersController";var q=dashjs.FactoryMaker.getClassFactory(T);function S(t){t=t||{};var n,i,r,a=this.context;function o(){n&&n.reset(),i&&i.reset(),r&&r.reset()}return{initialize:function(e){try{(r=U(a).create({mediaElement:t.mediaElement})).initialize(e.Range),(i=Y(a).create({debug:t.debug,metricsConstants:t.metricsConstants,mediaPlayerModel:t.mediaPlayerModel})).initialize(e.Reporting,r),(n=q(a).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,i)}catch(e){throw o(),e}},reset:o}}S.__dashjs_factory_name="MetricsController";var Q=dashjs.FactoryMaker.getClassFactory(S);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=w(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==w(e)?e:String(e)}(i.key),i)}}I=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.metrics="",this.Range=[],this.Reporting=[]},C&&R(I.prototype,C),L&&R(I,L),Object.defineProperty(I,"prototype",{writable:!1});var I,C,L,X=I;function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=P(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==P(e)?e:String(e)}(i.key),i)}}e=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},k&&D(e.prototype,k),O&&D(e,O),Object.defineProperty(e,"prototype",{writable:!1});var k,O,J=e;function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=M(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==M(e)?e:String(e)}(i.key),i)}}i=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3},$&&Z(i.prototype,$),ee&&Z(i,ee),Object.defineProperty(i,"prototype",{writable:!1});var $,ee,te=i;function ne(e){var l=(e=e||{}).adapter,u=e.constants;return{getMetrics:function(s){var t=[];return s&&s.Metrics_asArray&&s.Metrics_asArray.forEach(function(e){var a=new X,o=l.getIsDynamic(s);e.hasOwnProperty("metrics")&&(a.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t,n,i,r=new J;r.starttime=(t=s,n=e,i=0,o?i=l.getAvailabilityStartTime(t)/1e3:(t=l.getRegularPeriods(t)).length&&(i=t[0].start),t=i,n&&n.hasOwnProperty(u.START_TIME)&&(t+=n.starttime),t),e.hasOwnProperty("duration")?r.duration=e.duration:r.duration=l.getDuration(s),r._useWallClockTime=o,a.Range.push(r)}),e.Reporting_asArray)&&(e.Reporting_asArray.forEach(function(e){var t=new te;e.hasOwnProperty(u.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(u.DVB_REPORTING_URL)&&(t.dvbReportingUrl=e[u.DVB_REPORTING_URL]),e.hasOwnProperty(u.DVB_PROBABILITY)&&(t.dvbProbability=e[u.DVB_PROBABILITY]),a.Reporting.push(t))}),t.push(a))}),t}}}ne.__dashjs_factory_name="ManifestParsing";var ie=dashjs.FactoryMaker.getSingletonFactory(ne);function re(r){r=r||{};var e,a={},o=this.context,t=r.eventBus,n=r.events;function i(e){var i;e.error||(i=Object.keys(a),ie(o).getInstance({adapter:r.adapter,constants:r.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))i.splice(t,1);else try{var n=Q(o).create(r);n.initialize(e),a[t]=n}catch(e){}}),i.forEach(function(e){a[e].reset(),delete a[e]}),t.trigger(p.A.METRICS_INITIALISATION_COMPLETE))}function s(){Object.keys(a).forEach(function(e){a[e].reset()}),a={}}return e={reset:function(){t.off(n.MANIFEST_UPDATED,i,e),t.off(n.STREAM_TEARDOWN_COMPLETE,s,e)}},t.on(n.MANIFEST_UPDATED,i,e),t.on(n.STREAM_TEARDOWN_COMPLETE,s,e),e}re.__dashjs_factory_name="MetricsCollectionController";var ae=dashjs.FactoryMaker.getClassFactory(re);function x(){var t=this.context;return{createMetricsReporting:function(e){return F(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}).initialize(),ae(t).create(e)},getReportingFactory:function(){return h(t).getInstance()},getMetricsHandlerFactory:function(){return b(t).getInstance()}}}x.__dashjs_factory_name="MetricsReporting";var t=dashjs.FactoryMaker.getClassFactory(x),oe=(t.events=p.A,dashjs.FactoryMaker.updateClassFactory(x.__dashjs_factory_name,t),t)},7474:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=o(t);var i=e;if(!(t=a()?Reflect.construct(t,n||[],o(e).constructor):t.apply(e,n))||"object"!==r(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&i(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4183).A));t.A=n},9085:function(e,t,n){"use strict";var p=n(9824),i=n(7575),m=n(8416),g=n(5533),_=n(4986),y=n(4961);function r(){var r,i,t,n,a,o,s,e=this.context,l=(0,m.A)(e).getInstance();function u(){t=[],n=[],a=[],s=[],o=null,r=[]}function c(e,n){var i=-1;e.some(function(e,t){if(e===n)return i=t,!0}),i<0||e.splice(i,1)}function h(e){for(var t=0;t<s.length;t++)if(s[t].rulename===e)return t;return-1}function d(e,t){f(e,t);var n=new p.A;n.schemeIdUri=e,n.value=t,r.push(n)}function f(n,i){(0,g.sq)(n,"string"),(0,g.sq)(i,"string"),r.forEach(function(e,t){e.schemeIdUri===n&&e.value===i&&r.splice(t,1)})}return i={default:!(e={getCustomInitialTrackSelectionFunction:function(){return o},setCustomInitialTrackSelectionFunction:function(e){o=e},resetCustomInitialTrackSelectionFunction:function(){o=null},getLicenseResponseFilters:function(){return n},getLicenseRequestFilters:function(){return t},getCustomCapabilitiesFilters:function(){return a},registerCustomCapabilitiesFilter:function(e){a.push(e)},registerLicenseResponseFilter:function(e){n.push(e)},registerLicenseRequestFilter:function(e){t.push(e)},unregisterCustomCapabilitiesFilter:function(e){c(a,e)},unregisterLicenseResponseFilter:function(e){c(n,e)},unregisterLicenseRequestFilter:function(e){c(t,e)},addAbrCustomRule:function(e,t,n){if("string"!=typeof e||e!==_.A.ABANDON_FRAGMENT_RULES&&e!==_.A.QUALITY_SWITCH_RULES||"string"!=typeof t)throw y.A.BAD_ARGUMENT_ERROR;var i=h(t);-1===i?s.push({type:e,rulename:t,rule:n}):(s[i].type=e,s[i].rule=n)},removeAllAbrCustomRule:function(){s=[]},removeAbrCustomRule:function(e){e?-1!==(e=h(e))&&s.splice(e,1):s=[]},getAbrCustomRules:function(){return s},addUTCTimingSource:d,removeUTCTimingSource:f,getUTCTimingSources:function(){return r},clearDefaultUTCTimingSources:function(){r=[]},restoreDefaultUTCTimingSources:function(){var e=l.get().streaming.utcSynchronization.defaultTimingSource;d(e.scheme,e.value)},setXHRWithCredentialsForType:function t(e,n){e?i[e]=!!n:Object.keys(i).forEach(function(e){t(e,n)})},getXHRWithCredentialsForType:function(e){e=i[e];return void 0===e?i.default:e},setConfig:function(){},reset:function(){u()}})},u(),e}r.__dashjs_factory_name="CustomParametersModel",t.A=i.A.getSingletonFactory(r)},3047:function(e,t,n){"use strict";var i=n(7575),r=n(7464);function a(e){var o=(e=e||{}).requestModifier;function t(e){var t=new Date,n=e.request,i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),n.responseType&&(i.responseType=n.responseType),n.range&&i.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),o&&o.modifyRequestHeader&&(i=o.modifyRequestHeader(i,{url:e.url})),e.headers)for(var r in e.headers){var a=e.headers[r];a&&i.setRequestHeader(r,a)}i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.ontimeout=e.ontimeout,i.timeout=e.timeout,i.send(),e.response=i}return{load:function(e){o&&o.modifyRequest?(0,r.W)(e,o).then(function(){return t(e)}):t(e)},abort:function(e){e=e.response;e.onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}a.__dashjs_factory_name="XHRLoader";n=i.A.getClassFactory(a);t.A=n},3260:function(k,e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}t.d(e,{default:function(){return et}});var d={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},V=(O(e=n,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var i=e[n];"urn:mpeg:dash:mp4protection:2011"!==i.schemeIdUri.toLowerCase()||"cenc"!==i.value.toLowerCase()&&"cbcs"!==i.value.toLowerCase()||(t=i)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),i=n.getUint8(t);return t+=20,0<i&&(t+=4+16*n.getUint32(t)),e.slice(t+=4)}},{key:"getPSSHForKeySystem",value:function(e,t){t=n.parsePSSHList(t);return e&&t.hasOwnProperty(e.uuid.toLowerCase())?t[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},i=0;;){var r,a,o=void 0,s=i;if(i>=t.buffer.byteLength)break;if(r=i+t.getUint32(i),i+=4,1886614376===t.getUint32(i)&&(i+=4,0===(a=t.getUint8(i))||1===a)){i++,i+=3;for(var o="",l=void 0,u=void 0,l=0;l<4;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=4,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<6;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;i=i+6+4,n[o=o.toLowerCase()]=t.buffer.slice(s,r)}i=r}return n}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var n=0,i=null;n<e.length&&!i;){var r=e[n];if(r&&r.contentProtection&&0<r.contentProtection.length){var a=r.contentProtection.filter(function(e){return e.schemeIdUri&&e.schemeIdUri===t});if(a&&0<a.length)for(var o=0;o<a.length&&!i;){for(var s=a[o],l=0;l<d.attributes.length&&!i;){for(var u=0,c=d.attributes[l];u<d.prefixes.length&&!i;){var h=d.prefixes[u];s[c]&&s[c].__prefix&&s[c].__prefix===h&&s[c].__text&&(i=s[c].__text),u+=1}l+=1}o+=1}}n+=1}return i}catch(e){return null}}}]),Object.defineProperty(e,"prototype",{writable:!1}),n);function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=a(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==a(e)?e:String(e)}(i.key),i)}}e=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.contentType=t,this.robustness=n},m&&M(e.prototype,m),R&&M(e,R),Object.defineProperty(e,"prototype",{writable:!1});var W=e;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=o(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==o(e)?e:String(e)}(i.key),i)}}m=function e(t,n,i,r,a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=r,this.sessionTypes=a},i&&x(m.prototype,i),h&&x(m,h),Object.defineProperty(m,"prototype",{writable:!1});var b=m;function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(F=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var H=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=s(t);var i=e;if(!(t=F()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))||"object"!==N(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&B(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(t(7199).A)),Y=t(3339);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=l(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==l(e)?e:String(e)}(i.key),i)}}R=function e(t,n,i,r,a,o,s,l){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t,this.method=n,this.responseType=i,this.headers=r,this.withCredentials=a,this.messageType=o,this.sessionId=s,this.data=l},v&&U(R.prototype,v),ke&&U(R,ke),Object.defineProperty(R,"prototype",{writable:!1});var K=R;function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=u(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==u(e)?e:String(e)}(i.key),i)}}e=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t,this.headers=n,this.data=i},C&&j(e.prototype,C),P&&j(e,P),Object.defineProperty(e,"prototype",{writable:!1});var q=e,z=t(4779),Q=t(4456),X=t(4961),i=t(7575);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){var t,w,r,R,l,a,u,I,c,C,L,P=(e=e||{}).protectionKeyController,D=e.protectionModel,k=e.eventBus,O=e.events,E=e.debug,A=e.BASE64,h=e.constants,o=[],M=e.cmcdModel,x=e.settings,N=e.customParametersModel;function n(){if(!(k&&k.hasOwnProperty("on")&&P&&P.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function s(e,t){if(I||c)I&&d();else{var n=e,i=t;if(!c){c=!0;var r,a=[];n=n.sort(function(e,t){return(l&&l[e.ks.systemString]&&0<=l[e.ks.systemString].priority?l[e.ks.systemString].priority:n.length)-(l&&l[t.ks.systemString]&&0<=l[t.ks.systemString].priority?l[t.ks.systemString].priority:n.length)});for(var o=0;o<n.length;o++){var s=function(e){var t=e.protData,n=[],i=[],r=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:u,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:u,e=e.sessionType,o=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",t=t&&t.persistentState?t.persistentState:"temporary"===e?"optional":"required";return R.forEach(function(e){e.type===h.AUDIO?n.push(new W(e.codec,r)):e.type===h.VIDEO&&i.push(new W(e.codec,a))}),new b(n,i,o,t,[e])}(n[o]);a.push({ks:n[o].ks,configs:[s],protData:n[o].protData})}D.requestKeySystemAccess(a).then(function(e){e=(r=e.data).mksa&&r.mksa.selectedSystemString?r.mksa.selectedSystemString:r.keySystem.systemString;return w.info("DRM: KeySystem Access Granted for system string ("+e+")!  Selecting key system..."),D.selectKeySystem(r)}).then(function(e){I=e,c=!1,D&&(k.trigger(O.KEY_SYSTEM_SELECTED,{data:r}),(e=F(I))&&e.serverCertificate&&0<e.serverCertificate.length&&D.setServerCertificate(A.decodeArray(e.serverCertificate).buffer),d())}).catch(function(e){I=null,c=!1,i||k.trigger(O.KEY_SYSTEM_SELECTED,{data:null,error:new Y.A(H.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,H.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})})}}}function d(){for(var e,t=0;t<r.length;t++)for(e=0;e<r[t].length;e++)if(I===r[t][e].ks){n=i=void 0;var n,i=r[t][e];P.isClearKey(I)&&i.protData&&i.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(i.protData.clearkeys).length&&(n={kids:Object.keys(i.protData.clearkeys)},i.initData=(new TextEncoder).encode(JSON.stringify(n))),i.sessionId?f(i):null!==i.initData&&p(i);break}r=[]}function f(e){n(),D.loadKeySession(e)}function p(e){var t=V.getPSSHForKeySystem(I,e?e.initData:null);if(t){if(!function(e){if(e)try{for(var t=D.getSessions(),n=0;n<t.length;n++)if(t[n].getKeyId()===e)return 1}catch(e){}}(e.keyId)&&!m(t))try{e.initData=t,D.createKeySession(e)}catch(e){k.trigger(O.KEY_SESSION_CREATED,{data:null,error:new Y.A(H.KEY_SESSION_CREATED_ERROR_CODE,H.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?D.createKeySession(e):k.trigger(O.KEY_SESSION_CREATED,{data:null,error:new Y.A(H.KEY_SESSION_CREATED_ERROR_CODE,H.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(I?I.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function F(e){if(e){e=e.systemString;if(l)return e in l?l[e]:null}return null}function m(e){if(e)try{for(var t=D.getAllInitData(),n=0;n<t.length;n++)if(P.initDataEquals(e,t[n]))return w.debug("DRM: Ignoring initData because we have already seen it!"),1}catch(e){}}function i(e){n(),e?(D.setMediaElement(e),k.on(O.NEED_KEY,v,t)):null===e&&(D.setMediaElement(e),k.off(O.NEED_KEY,v,t))}function g(e){e.error?k.trigger(O.KEY_STATUSES_CHANGED,{data:null,error:e.error}):w.debug("DRM: key status = "+e.status)}function _(e){w.debug("DRM: onKeyMessage");var i,t,n,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y,v=e.data,E=(k.trigger(O.KEY_MESSAGE,{data:v}),v.messageType||"license-request"),A=v.message,b=v.sessionToken,T=F(I),S=P.getLicenseServerModelInstance(I,T,E),E={sessionToken:b,messageType:E};if(A&&0!==A.byteLength)if(S){if(P.isClearKey(I)){var A=P.processClearKeyLicenseRequest(I,T,A);if(A&&A.keyPairs&&0<A.keyPairs.length)return w.debug("DRM: ClearKey license request handled by application!"),B(E),void D.updateKeySession(b,A)}i=S,A=T,m=(S=v).sessionToken,g=S.messageType||"license-request",_={sessionToken:m,messageType:g},y=I?I.systemString:null,T=A,v=g,t=m,u=i,c=null,d=(l=S).message,T&&T.serverURL?"string"==typeof(r=T.serverURL)&&""!==r?c=r:"object"===J(r)&&r.hasOwnProperty(v)&&(c=r[v]):T&&T.laURL&&""!==T.laURL?c=T.laURL:(c=V.getLicenseServerUrlFromMediaInfo(R,I.schemeIdURI))||P.isClearKey(I)||(r=V.getPSSHData(t.initData),c=(c=I.getLicenseServerURLFromInitData(r))||l.laURL),(T=u.getServerURLFromMessage(c,d,v))?(n=!(t={}),A&&U(t,A.httpRequestHeaders),r=S.message,U(t,I.getRequestHeadersFromMessage(r)),Object.keys(t).forEach(function(e){"authorization"===e.toLowerCase()&&(n=!0)}),A&&"boolean"==typeof A.withCredentials&&(n=A.withCredentials),a=function(t){var e,n;D&&(200<=t.status&&t.status<=299?(e=Q.A.parseHttpHeaders(t.getAllResponseHeaders?t.getAllResponseHeaders():null),n=new q(t.responseURL,e,t.response),G(N.getLicenseResponseFilters(),n).then(function(){var e=i.getLicenseMessage(n.data,y,g);null!==e?(B(_),D.updateKeySession(m,e)):j(t,_,y,g,i)})):j(t,_,y,g,i))},o=function(e){B(_,new Y.A(H.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,H.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+y+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},s=function(e){B(_,new Y.A(H.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,H.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+y+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},l=I.getLicenseRequestFromMessage(r),u=i.getHTTPMethod(g),c=i.getResponseType(y,g),h=A&&!isNaN(A.httpTimeout)?A.httpTimeout:8e3,d=m.getSessionId()||null,f=new K(T,u,c,t,n,g,d,l),p=isNaN(x.get().streaming.retryAttempts[z.G.LICENSE])?3:x.get().streaming.retryAttempts[z.G.LICENSE],G(N.getLicenseRequestFilters(),f).then(function(){!function t(n,i,r,a,o,s){var e=new XMLHttpRequest;{var l;x.get().streaming.cmcd&&x.get().streaming.cmcd.enabled&&x.get().streaming.cmcd.mode===X.A.CMCD_MODE_QUERY&&(l=M.getQueryParameter({url:n.url,type:z.G.LICENSE}))&&(n.url=Q.A.addAditionalQueryParameterToUrl(n.url,[l]))}for(var u in e.open(n.method,n.url,!0),e.responseType=n.responseType,e.withCredentials=n.withCredentials,0<r&&(e.timeout=r),n.headers)e.setRequestHeader(u,n.headers[u]);if(x.get().streaming.cmcd&&x.get().streaming.cmcd.enabled&&x.get().streaming.cmcd.mode===X.A.CMCD_MODE_HEADER){var c=M.getHeaderParameters({url:n.url,type:z.G.LICENSE});if(c)for(var h in c){var d=c[h];d&&e.setRequestHeader(h,d)}}var f=function(){i--;var e=isNaN(x.get().streaming.retryIntervals[z.G.LICENSE])?1e3:x.get().streaming.retryIntervals[z.G.LICENSE];L=setTimeout(function(){t(n,i,r,a,o,s)},e)};e.onload=function(){C=null,200<=this.status&&this.status<=299||i<=0?a(this):(w.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+i),f())},e.ontimeout=e.onerror=function(){C=null,i<=0?s(this):(w.warn("License request network request failed . Retrying it... Pending retries: "+i),f())},e.onabort=function(){o(this)},k.trigger(O.LICENSE_REQUEST_SENDING,{url:n.url,headers:n.headers,payload:n.data,sessionId:n.sessionId}),C=e,e.send(n.data)}(f,p,h,a,o,s)})):B(_,new Y.A(H.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,H.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else w.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+b.getSessionId()),B(E);else B(E,new Y.A(H.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,H.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function B(e,t){k.trigger(O.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function y(){C&&(C.onloadend=C.onerror=C.onprogress=void 0,C.abort(),C=null),L&&(clearTimeout(L),L=null)}function U(e,t){if(t)for(var n in t)e[n]=t[n]}function j(e,t,n,i,r){var a="NONE",o=null;e.response&&(a=r.getErrorResponse(e.response,n,i),o={serverResponse:e.response||null,responseCode:e.status||null,responseText:e.statusText||null}),B(t,new Y.A(H.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,H.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+a,o))}function G(e,n){return e?e.reduce(function(e,t){return e.then(function(){return t(n)})},Promise.resolve()):Promise.resolve()}function v(e,t){if(!x.get().streaming.protection.ignoreEmeEncryptedEvent)if(w.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)w.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);else if(0===R.length&&(w.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))o.push(setTimeout(function(){v(e,t)},500));else{var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),I){var i=V.getPSSHForKeySystem(I,n);if(i&&m(i))return}w.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));i=P.getSupportedKeySystemsFromSegmentPssh(n,l,a);0===i.length?w.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!"):(n=i,r.push(n),s(n,!1))}}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");n(),R.push(e)},clearMediaInfoArray:function(){R=[]},handleKeySystemFromManifest:function(){var t;R&&0!==R.length&&(t=[],R.forEach(function(e){e=P.getSupportedKeySystemsFromContentProtection(e.contentProtection,l,a);0<e.length&&(0===t.length&&(t=e),r.push(e))}),t)&&0<t.length&&s(t,!0)},createKeySession:p,loadKeySession:f,removeKeySession:function(e){n(),D.removeKeySession(e)},closeKeySession:function(e){n(),D.closeKeySession(e)},setServerCertificate:function(e){n(),D.setServerCertificate(e)},setMediaElement:i,setSessionType:function(e){a=e},setRobustnessLevel:function(e){u=e},setProtectionData:function(e){l=e,P.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return n(),P.getSupportedKeySystemsFromContentProtection(e,l,a)},getKeySystems:function(){return P?P.getKeySystems():[]},setKeySystems:function(e){P&&P.setKeySystems(e)},stop:function(){y(),D&&D.stop()},reset:function(){k.off(O.INTERNAL_KEY_MESSAGE,_,t),k.off(O.INTERNAL_KEY_STATUS_CHANGED,g,t),n(),y(),i(null),I=null,c=!1,D&&(D.reset(),D=null),o.forEach(function(e){return clearTimeout(e)}),o=[],R=[],r=[]}},w=E.getLogger(t),r=[],R=[],a="temporary",u="",L=C=null,k.on(O.INTERNAL_KEY_MESSAGE,_,t),k.on(O.INTERNAL_KEY_STATUS_CHANGED,g,t),t}G.__dashjs_factory_name="ProtectionController";var Z=i.A.getClassFactory(G);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=c(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==c(e)?e:String(e)}(i.key),i)}}h=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.keyID=t,this.key=n},ee&&$(h.prototype,ee),te&&$(h,te),Object.defineProperty(h,"prototype",{writable:!1});var h,ee,te,f=h;function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=p(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==p(e)?e:String(e)}(i.key),i)}}ne((m=_).prototype,[{key:"toJWK",value:function(){for(var e=this.keyPairs.length,t={keys:[]},n=0;n<e;n++){var i={kty:"oct",alg:"A128KW",kid:this.keyPairs[n].keyID,k:this.keyPairs[n].key};t.keys.push(i)}this.type&&(t.type=this.type);var r=JSON.stringify(t),a=r.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(n=0;n<a;n++)s[n]=r.charCodeAt(n);return o}}]),Object.defineProperty(m,"prototype",{writable:!1});var m,g=_;function _(e,t){if(!(this instanceof _))throw new TypeError("Cannot call a class as a function");if(t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=y(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==y(e)?e:String(e)}(i.key),i)}}ie((v=A).prototype,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),Object.defineProperty(v,"prototype",{writable:!1});var v,E=new A,re="e2719d58-a985-b3c9-781a-b030af78d30e",ae=E.CLEARKEY_KEYSTEM_STRING;function A(){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");this.init()}function oe(e){var r=(e=e||{}).BASE64;return{uuid:re,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:ae,getInitData:function(e,t){try{var n,i=V.parseInitDataFromContentProtection(e,r);return!i&&t&&(n={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(e){return null}}(t["cenc:default_KID"])]},i=(new TextEncoder).encode(JSON.stringify(n))),i}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],a=0;a<i.kids.length;a++){var o=i.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");r.push(new f(o,s))}n=new g(r)}return n}}}oe.__dashjs_factory_name="KeySystemClearKey";var se=dashjs.FactoryMaker.getSingletonFactory(oe),le="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",ue=E.CLEARKEY_KEYSTEM_STRING;function ce(e){var t=e.BASE64,l=e.debug.getLogger(void 0);return{uuid:le,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:ue,getInitData:function(e){return V.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],a=0;a<i.kids.length;a++){var o=i.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");r.push(new f(o,s))}n=new g(r),l.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}ce.__dashjs_factory_name="KeySystemW3CClearKey";var he=dashjs.FactoryMaker.getSingletonFactory(ce),de="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",fe=E.WIDEVINE_KEYSTEM_STRING;function pe(e){var t=(e=e||{}).BASE64;return{uuid:de,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:fe,getInitData:function(e){return V.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}pe.__dashjs_factory_name="KeySystemWidevine";var me=dashjs.FactoryMaker.getSingletonFactory(pe),ge="9a04f079-9840-4286-ab92-e65be0885f95",_e=E.PLAYREADY_KEYSTEM_STRING;function ye(e){var o="utf-16",l=(e=e||{}).BASE64,s=e.settings;function u(){if(!l||!l.hasOwnProperty("decodeArray")||!l.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:ge,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:_e,getInitData:function(e){var t,n,i,r=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=0,s=null;if(u(),!e)return null;if("pssh"in e)return V.parseInitDataFromContentProtection(e,l);if("pro"in e)s=l.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=l.decodeArray(e.prheader.__text)}return e=s.length,t=4+r.length+a.length+4+e,i=new ArrayBuffer(t),n=new Uint8Array(i),(i=new DataView(i)).setUint32(0,t),o+=4,n.set(r,4),o+=r.length,n.set(a,o),o+=a.length,i.setUint32(o,e),n.set(s,o+=4),n.buffer},getRequestHeadersFromMessage:function(e){var t={},n=new DOMParser;if(s&&s.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===o&&e&&e.byteLength%2==1)t["Content-Type"]="text/xml; charset=utf-8";else{for(var e=new("utf-16"===o?Uint16Array:Uint8Array)(e),e=String.fromCharCode.apply(null,e),i=(n=n.parseFromString(e,"application/xml")).getElementsByTagName("name"),r=n.getElementsByTagName("value"),a=0;a<i.length;a++)t[i[a].childNodes[0].nodeValue]=r[a].childNodes[0].nodeValue;t.hasOwnProperty("Content")&&(t["Content-Type"]=t.Content,delete t.Content),t.hasOwnProperty("Content-Type")||(t["Content-Type"]="text/xml; charset=utf-8")}return t},getLicenseRequestFromMessage:function(e){var t,n=null,i=new DOMParser;return!(s&&s.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===o&&e&&e.byteLength%2==1)&&(t=new("utf-16"===o?Uint16Array:Uint8Array)(e),u(),t=String.fromCharCode.apply(null,t),(i=i.parseFromString(t,"application/xml")).getElementsByTagName("PlayReadyKeyMessage")[0])?(t=i.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)?l.decode(t):n:e},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),i=6,r=new DOMParser,a=0;a<n;a++){var o=t.getUint16(i,!0),s=(i+=2,t.getUint16(i,!0));if(i+=2,1===o){o=e.slice(i,i+s),o=String.fromCharCode.apply(null,new Uint16Array(o)),o=r.parseFromString(o,"application/xml");if(o.getElementsByTagName("LA_URL")[0]){var l=o.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(l)return l}if(o.getElementsByTagName("LUI_URL")[0]){l=o.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(l)return l}}else i+=s}return null},getCDMData:function(e){var t,n,i,r;if(u(),!e)return null;for(t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=l.encode(t),n='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),i=[],r=0;r<n.length;++r)i.push(n.charCodeAt(r)),i.push(0);return new Uint8Array(i).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');o=e}}}ye.__dashjs_factory_name="KeySystemPlayReady";var ve=dashjs.FactoryMaker.getSingletonFactory(ye);function Ee(e){var n=(e=e||{}).BASE64,i={};return i[E.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},i[E.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return i[e].responseType},getLicenseMessage:function(e,t){if(n&&n.hasOwnProperty("decodeArray"))return i[t].getLicenseMessage(e);throw new Error("Missing config parameter(s)")},getErrorResponse:function(e,t){return i[t].getErrorResponse(e)}}}Ee.__dashjs_factory_name="DRMToday";var Ae=dashjs.FactoryMaker.getSingletonFactory(Ee);function be(){var o="http://schemas.xmlsoap.org/soap/envelope/";function s(e){e=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=s(e),t=(new window.DOMParser).parseFromString(t,"text/xml"),t=t?t.getElementsByTagNameNS(o,"Envelope")[0]:null,t=t?t.getElementsByTagNameNS(o,"Body")[0]:null;if(t&&t.getElementsByTagNameNS(o,"Fault")[0])return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",i="";if(window.DOMParser){var e=s(e),r=(new window.DOMParser).parseFromString(e,"text/xml"),r=r?r.getElementsByTagNameNS(o,"Envelope")[0]:null,r=r?r.getElementsByTagNameNS(o,"Body")[0]:null,r=r?r.getElementsByTagNameNS(o,"Fault")[0]:null,a=r?r.getElementsByTagName("detail")[0]:null,a=a?a.getElementsByTagName("Exception")[0]:null;if(null===r)return e;t=(e=r.getElementsByTagName("faultstring")[0].firstChild)?e.nodeValue:null,null!==a&&(n=(e=a.getElementsByTagName("StatusCode")[0])?e.firstChild.nodeValue:null,r=(i=(e=a.getElementsByTagName("Message")[0])?e.firstChild.nodeValue:null)?i.lastIndexOf("[")+1:-1,a=i?i.indexOf("]"):-1,i=i?i.substring(r,a):"")}return e="code: ".concat(n,", name: ").concat(t),i&&(e+=", message: ".concat(i)),e}.call(this,e)}}}be.__dashjs_factory_name="PlayReady";var Te=i.A.getSingletonFactory(be);function Se(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Se.__dashjs_factory_name="Widevine";var we=dashjs.FactoryMaker.getSingletonFactory(Se);function Re(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var i=e.keys[n],r=i.kid.replace(/=/g,""),i=i.k.replace(/=/g,"");t.push(new f(r,i))}return new g(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Re.__dashjs_factory_name="ClearKey";var Ie=dashjs.FactoryMaker.getSingletonFactory(Re);function Ce(){var t,n,i,h,r,a,o,s,l=this.context;function d(e,t){return t&&e in t?t[e]:null}function f(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function p(e,t){return e&&e.sessionType?e.sessionType:t}return t={initialize:function(){var e;h=[],e=ve(l).getInstance({BASE64:r,settings:a}),h.push(e),e=me(l).getInstance({BASE64:r}),h.push(e),e=se(l).getInstance({BASE64:r}),h.push(e),o=e,e=he(l).getInstance({BASE64:r,debug:n}),h.push(e),s=e},setProtectionData:function(e){for(var t,n=0;n<h.length;n++){var i=h[n];i.hasOwnProperty("init")&&i.init((i=i.systemString,void 0,t=null,t=e?i in e?e[i]:null:t))}},isClearKey:function(e){return e===o||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),i=new Uint8Array(t),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0},getKeySystems:function(){return h},setKeySystems:function(e){h=e},getKeySystemBySystemString:function(e){for(var t=0;t<h.length;t++)if(h[t].systemString===e)return h[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,n){var i,r,a=[];if(e)for(var o=V.findCencContentProtection(e),s=0;s<h.length;++s)for(var l,u=d((r=h[s]).systemString,t),c=0;c<e.length;++c)(i=e[c]).schemeIdUri.toLowerCase()===r.schemeIdURI&&(l=r.getInitData(i,o),a.push({ks:h[s],keyId:i.keyId,initData:l,protData:u,cdmData:r.getCDMData(u?u.cdmData:null),sessionId:f(u,i),sessionType:p(u,n)}));return a},getSupportedKeySystemsFromSegmentPssh:function(e,t,n){for(var i,r=[],a=V.parsePSSHList(e),o=0;o<h.length;++o){var s=d((i=h[o]).systemString,t);i.uuid in a&&r.push({ks:i,initData:a[i.uuid],protData:s,cdmData:i.getCDMData(s?s.cdmData:null),sessionId:f(s),sessionType:p(s,n)})}return r},getLicenseServerModelInstance:function(e,t,n){return"license-release"===n||"individualization-request"===n?null:(n=null,t&&t.hasOwnProperty("drmtoday")?n=Ae(l).getInstance({BASE64:r}):e.systemString===E.WIDEVINE_KEYSTEM_STRING?n=we(l).getInstance():e.systemString===E.PLAYREADY_KEYSTEM_STRING?n=Te(l).getInstance():e.systemString===E.CLEARKEY_KEYSTEM_STRING&&(n=Ie(l).getInstance()),n)},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return i.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,i=n.getLogger(t)),e.BASE64&&(r=e.BASE64),e.settings)&&(a=e.settings)}}}Ce.__dashjs_factory_name="ProtectionKeyController";var T=dashjs.FactoryMaker.getSingletonFactory(Ce);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Pe=function(){return!!e})()}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ke=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=S(t);var i=e;if(!(t=Pe()?Reflect.construct(t,n||[],S(e).constructor):t.apply(e,n))||"object"!==Le(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&De(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(t(4183).A));function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=w(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==w(e)?e:String(e)}(i.key),i)}}R=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initData=t,this.initDataType=n},Me&&Oe(R.prototype,Me),xe&&Oe(R,xe),Object.defineProperty(R,"prototype",{writable:!1});var R,Me,xe,Ne=R;function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=I(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==I(e)?e:String(e)}(i.key),i)}}C=function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=r||"license-request"},Be&&Fe(C.prototype,Be),Ue&&Fe(C,Ue),Object.defineProperty(C,"prototype",{writable:!1});var C,Be,Ue,je=C;function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=L(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==L(e)?e:String(e)}(i.key),i)}}P=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.keySystem=t,this.ksConfiguration=n},Ve&&Ge(P.prototype,Ve),He&&Ge(P,He),Object.defineProperty(P,"prototype",{writable:!1});var P,Ve,He,Ye=P,D={};function ze(e){var c,a,r,o,s,l,i,t=this.context,h=(e=e||{}).eventBus,d=e.events,e=e.debug;function f(n,i,r,a){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return h.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE,{error:e="Insecure origins are not allowed"}),a({error:e});var o,s,e=n[i].protData&&n[i].protData.systemStringPriority?n[i].protData.systemStringPriority:null,t=n[i].configs,l=n[i].ks,u=l.systemString;o=e||D[u]||[u],s=t,new Promise(function(e,t){!function t(n,i,r,a,o){var s=n[r];c.debug("Requesting key system access for system string ".concat(s)),navigator.requestMediaKeySystemAccess(s,i).then(function(e){e.selectedSystemString=s,a(e)}).catch(function(e){r+1<n.length?t(n,i,r+1,a,o):o(e)})}(o,s,0,e,t)}).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,t=new Ye(l,t);t.mksa=e,h.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE,{data:t}),r({data:t})}).catch(function(e){var t;i+1<n.length?f(n,i+1,r,a):(h.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE,{error:(t="Key system access denied! ")+e.message}),a({error:t+e.message}))})}function u(e){var t;return e&&e.session?((t=e.session).removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()):Promise.resolve}function p(e){for(var t=0;t<s.length;t++)if(s[t]===e){s.splice(t,1);break}}function m(e){var t,n;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1])&&("string"==typeof e[1]?t=e[1]:n=e[1]),{status:t,keyId:n}}function g(t,e){var n={session:t,keyId:e.keyId,initData:e.initData,sessionId:e.sessionId,sessionType:e.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":h.trigger(d.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=m(arguments);"expired"===e.status?h.trigger(d.INTERNAL_KEY_STATUS_CHANGED,{error:new Y.A(H.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,H.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):h.trigger(d.INTERNAL_KEY_STATUS_CHANGED,e)});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;h.trigger(d.INTERNAL_KEY_MESSAGE,{data:new je(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return t.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===m(arguments).status&&(e=!0)}),e}};return t.addEventListener("keystatuseschange",n),t.addEventListener("message",n),t.closed.then(function(){p(n),c.debug("DRM: Session closed.  SessionID = "+n.getSessionId()),h.trigger(d.KEY_SESSION_CLOSED,{data:n.getSessionId()})}),s.push(n),n}return c=e.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<s.length;t++)s[t].initData&&e.push(s[t].initData);return e},getSessions:function(){return s},requestKeySystemAccess:function(n){return new Promise(function(e,t){f(n,0,e,t)})},selectKeySystem:function(n){return new Promise(function(e,t){n.mksa.createMediaKeys().then(function(e){return a=n.keySystem,o=e,r?r.setMediaKeys(o):Promise.resolve()}).then(function(){e(a)}).catch(function(){t({error:"Error selecting keys system ("+n.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(e){r!==e&&(r&&(r.removeEventListener("encrypted",l),r.setMediaKeys)&&r.setMediaKeys(null),r=e)&&(r.addEventListener("encrypted",l),r.setMediaKeys)&&o&&r.setMediaKeys(o)},setServerCertificate:function(e){if(!a||!o)throw new Error("Can not set server certificate until you have selected a key system");o.setServerCertificate(e).then(function(){c.info("DRM: License server certificate successfully updated."),h.trigger(d.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){h.trigger(d.SERVER_CERTIFICATE_UPDATED,{error:new Y.A(H.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,H.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e){if(!a||!o)throw new Error("Can not create sessions until you have selected a key system");var t=o.createSession(e.sessionType),n=g(t,e),i=a.systemString===E.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?E.INITIALIZATION_DATA_TYPE_KEYIDS:E.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(i,e.initData).then(function(){c.debug("DRM: Session created.  SessionID = "+n.getSessionId()),h.trigger(d.KEY_SESSION_CREATED,{data:n})}).catch(function(e){p(n),h.trigger(d.KEY_SESSION_CREATED,{data:null,error:new Y.A(H.KEY_SESSION_CREATED_ERROR_CODE,H.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(t,e){var n=t.session;i.isClearKey(a)&&(e=e.toJWK()),n.update(e).then(function(){h.trigger(d.KEY_SESSION_UPDATED)}).catch(function(e){h.trigger(d.KEY_ERROR,{error:new Y.A(H.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(e){if(!a||!o)throw new Error("Can not load sessions until you have selected a key system");for(var t=e.sessionId,n=0;n<s.length;n++)if(t===s[n].sessionId)return void c.warn("DRM: Ignoring session ID because we have already seen it!");var i=o.createSession(e.sessionType),r=g(i,e);i.load(t).then(function(e){e?(c.debug("DRM: Session loaded.  SessionID = "+r.getSessionId()),h.trigger(d.KEY_SESSION_CREATED,{data:r})):(p(r),h.trigger(d.KEY_SESSION_CREATED,{data:null,error:new Y.A(H.KEY_SESSION_CREATED_ERROR_CODE,H.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){p(r),h.trigger(d.KEY_SESSION_CREATED,{data:null,error:new Y.A(H.KEY_SESSION_CREATED_ERROR_CODE,H.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){c.debug("DRM: Session removed.  SessionID = "+t.getSessionId()),h.trigger(d.KEY_SESSION_REMOVED,{data:t.getSessionId()})},function(e){h.trigger(d.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionId()+"). "+e.name})})},closeKeySession:function(t){u(t).catch(function(e){p(t),h.trigger(d.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionId()+") "+e.name})})},stop:function(){for(var e,t=0;t<s.length;t++)(e=s[t]).getUsable()||(u(e),p(e))},reset:function(){var e,t,n=s.length;if(0!==n)for(var i=0;i<n;i++)t=e=s[i],u(e),p(t),0===s.length&&(r?(r.removeEventListener("encrypted",l),r.setMediaKeys(null).then(function(){h.trigger(d.TEARDOWN_COMPLETE)})):h.trigger(d.TEARDOWN_COMPLETE));else h.trigger(d.TEARDOWN_COMPLETE)}}),o=r=a=null,s=[],i=T(t).getInstance(),l={handleEvent:function(e){var t;"encrypted"===e.type&&e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,h.trigger(d.NEED_KEY,{key:new Ne(t,e.initDataType)}))}},e}D[E.PLAYREADY_KEYSTEM_STRING]=[E.PLAYREADY_KEYSTEM_STRING,E.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],D[E.WIDEVINE_KEYSTEM_STRING]=[E.WIDEVINE_KEYSTEM_STRING],D[E.CLEARKEY_KEYSTEM_STRING]=[E.CLEARKEY_KEYSTEM_STRING],ze.__dashjs_factory_name="ProtectionModel_21Jan2015";var We=dashjs.FactoryMaker.getClassFactory(ze);function Ke(e){var n,i,r,a,o,s,t,_,l=this.context,y=(e=e||{}).eventBus,v=e.events,u=e.debug,E=e.api;function c(){try{for(var e=0;e<s.length;e++)h(s[e]);i&&i.removeEventListener(E.needkey,t),y.trigger(v.TEARDOWN_COMPLETE)}catch(e){y.trigger(v.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function h(e){var t=e.session;t.removeEventListener(E.error,e),t.removeEventListener(E.message,e),t.removeEventListener(E.ready,e),t.removeEventListener(E.close,e);for(var n=0;n<s.length;n++)if(s[n]===e){s.splice(n,1);break}t[E.release]()}function d(){function e(){i.removeEventListener("loadedmetadata",t),i[E.setMediaKeys](a),y.trigger(v.VIDEO_ELEMENT_SELECTED)}var t=null;1<=i.readyState?e():(t=e.bind(this),i.addEventListener("loadedmetadata",t))}return n=u.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<s.length;t++)e.push(s[t].initData);return e},getSessions:function(){return s},requestKeySystemAccess:function(g){return new Promise(function(e,t){for(var n,i=!1,r=0;r<g.length;r++)for(var a=g[r].ks.systemString,o=g[r].configs,s=null,l=null,u=0;u<o.length;u++){var c=o[u].audioCapabilities,h=o[u].videoCapabilities;if(c&&0!==c.length)for(var s=[],d=0;d<c.length;d++)window[E.MediaKeys].isTypeSupported(a,c[d].contentType)&&s.push(c[d]);if(h&&0!==h.length)for(var l=[],f=0;f<h.length;f++)window[E.MediaKeys].isTypeSupported(a,h[f].contentType)&&l.push(h[f]);if(!(!s&&!l||s&&0===s.length||l&&0===l.length)){var i=!0,p=new b(s,l),m=_.getKeySystemBySystemString(a),m=new Ye(m,p);y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{data:m}),e({data:m});break}}i||(y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{error:n="Key system access denied! -- No valid audio/video content configurations detected!"}),t({error:n}))})},selectKeySystem:function(n){return new Promise(function(e,t){try{a=n.mediaKeys=new window[E.MediaKeys](n.keySystem.systemString),r=n.keySystem,o=n,i&&d(),e(r)}catch(e){t({error:"Error selecting keys system ("+r.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(e){i!==e&&(i&&i.removeEventListener(E.needkey,t),i=e)&&(i.addEventListener(E.needkey,t),a)&&d()},createKeySession:function(e){if(!r||!a||!o)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(null===(t=null===(t=o.ksConfiguration.videoCapabilities&&0<o.ksConfiguration.videoCapabilities.length?o.ksConfiguration.videoCapabilities[0]:t)&&o.ksConfiguration.audioCapabilities&&0<o.ksConfiguration.audioCapabilities.length?o.ksConfiguration.audioCapabilities[0]:t))throw new Error("Can not create sessions for unknown content types.");t=t.contentType,t=a.createSession(t,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),e={session:t,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case E.error:y.trigger(v.KEY_ERROR,{error:new Y.A(H.MEDIA_KEYERR_CODE,"KeyError",this)});break;case E.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;y.trigger(v.INTERNAL_KEY_MESSAGE,{data:new je(this,t,e.destinationURL)});break;case E.ready:n.debug("DRM: Key added."),y.trigger(v.KEY_ADDED);break;case E.close:n.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),y.trigger(v.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}};t.addEventListener(E.error,e),t.addEventListener(E.message,e),t.addEventListener(E.ready,e),t.addEventListener(E.close,e),s.push(e),n.debug("DRM: Session created.  SessionID = "+e.getSessionId()),y.trigger(v.KEY_SESSION_CREATED,{data:e})},updateKeySession:function(e,t){e=e.session;_.isClearKey(r)?e.update(new Uint8Array(t.toJWK())):e.update(new Uint8Array(t)),y.trigger(v.KEY_SESSION_UPDATED)},closeKeySession:h,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:c,reset:c}),o=a=r=i=null,s=[],_=T(l).getInstance(),t={handleEvent:function(e){e.type===E.needkey&&e.initData&&(e=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,y.trigger(v.NEED_KEY,{key:new Ne(e,"cenc")}))}},e}Ke.__dashjs_factory_name="ProtectionModel_3Feb2014";var qe=dashjs.FactoryMaker.getClassFactory(Ke);function Qe(e){var a,m,r,g,o,s,l,n,t=this.context,_=(e=e||{}).eventBus,y=e.events,i=e.debug,u=e.api,c=e.errHandler;function h(){m&&p();for(var e=0;e<s.length;e++)d(s[e]);_.trigger(y.TEARDOWN_COMPLETE)}function d(t){try{m[u.cancelKeyRequest](r.systemString,t.sessionId)}catch(e){_.trigger(y.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionId+") "+e.message})}}function f(e,t){if(t&&e)for(var n=e.length,i=0;i<n;i++)if(e[i].sessionId==t)return e[i];return null}function p(){m.removeEventListener(u.keyerror,n),m.removeEventListener(u.needkey,n),m.removeEventListener(u.keymessage,n),m.removeEventListener(u.keyadded,n)}return a=i.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<o.length;t++)e.push(o[t].initData);for(var n=0;n<s.length;n++)e.push(s[n].initData);return e},getSessions:function(){return s.concat(o)},requestKeySystemAccess:function(p){return new Promise(function(e,t){for(var n,i=(i=m)||document.createElement("video"),r=!1,a=0;a<p.length;a++)for(var o=p[a].ks.systemString,s=p[a].configs,l=null,u=0;u<s.length;u++){var c=s[u].videoCapabilities;if(c&&0!==c.length)for(var l=[],h=0;h<c.length;h++)""!==i.canPlayType(c[h].contentType,o)&&l.push(c[h]);if(l&&(!l||0!==l.length)){var r=!0,d=new b(null,l),f=g.getKeySystemBySystemString(o),f=new Ye(f,d);_.trigger(y.KEY_SYSTEM_ACCESS_COMPLETE,{data:f}),e({data:f});break}}r||(_.trigger(y.KEY_SYSTEM_ACCESS_COMPLETE,{error:n="Key system access denied! -- No valid audio/video content configurations detected!"}),t({error:n}))})},selectKeySystem:function(e){return r=e.keySystem,Promise.resolve(r)},setMediaElement:function(e){if(m!==e){if(m){p();for(var t=0;t<s.length;t++)d(s[t]);s=[]}(m=e)&&(m.addEventListener(u.keyerror,n),m.addEventListener(u.needkey,n),m.addEventListener(u.keymessage,n),m.addEventListener(u.keyadded,n),_.trigger(y.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!r)throw new Error("Can not create sessions until you have selected a key system");var t;if(l||0===s.length)return t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}},o.push(t),m[u.generateKeyRequest](r.systemString,new Uint8Array(e.initData)),t;throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionId;if(g.isClearKey(r))for(var i=0;i<t.keyPairs.length;i++)m[u.addKey](r.systemString,t.keyPairs[i].key,t.keyPairs[i].keyID,n);else m[u.addKey](r.systemString,new Uint8Array(t),new Uint8Array(e.initData),n);_.trigger(y.KEY_SESSION_UPDATED)},closeKeySession:d,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:h,reset:h}),r=m=null,o=[],s=[],g=T(t).getInstance(),n={handleEvent:function(e){var t=null;switch(e.type){case u.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;_.trigger(y.NEED_KEY,{key:new Ne(n,"cenc")});break;case u.keyerror:if(t=(t=f(s,e.sessionId))||f(o,e.sessionId)){var i=H.MEDIA_KEYERR_CODE,r="";switch(e.errorCode.code){case 1:i=H.MEDIA_KEYERR_UNKNOWN_CODE,r+="MEDIA_KEYERR_UNKNOWN - "+H.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:i=H.MEDIA_KEYERR_CLIENT_CODE,r+="MEDIA_KEYERR_CLIENT - "+H.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:i=H.MEDIA_KEYERR_SERVICE_CODE,r+="MEDIA_KEYERR_SERVICE - "+H.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:i=H.MEDIA_KEYERR_OUTPUT_CODE,r+="MEDIA_KEYERR_OUTPUT - "+H.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:i=H.MEDIA_KEYERR_HARDWARECHANGE_CODE,r+="MEDIA_KEYERR_HARDWARECHANGE - "+H.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:i=H.MEDIA_KEYERR_DOMAIN_CODE,r+="MEDIA_KEYERR_DOMAIN - "+H.MEDIA_KEYERR_DOMAIN_MESSAGE}r+="  System Code = "+e.systemCode,_.trigger(y.KEY_ERROR,{error:new Y.A(i,r,t)})}else a.error("No session token found for key error");break;case u.keyadded:(t=(t=f(s,e.sessionId))||f(o,e.sessionId))?(a.debug("DRM: Key added."),_.trigger(y.KEY_ADDED,{data:t})):a.debug("No session token found for key added");break;case u.keymessage:(l=null!==e.sessionId&&void 0!==e.sessionId)?!(t=f(s,e.sessionId))&&0<o.length&&(t=o.shift(),s.push(t),t.sessionId=e.sessionId,_.trigger(y.KEY_SESSION_CREATED,{data:t})):0<o.length&&(t=o.shift(),s.push(t),0!==o.length)&&c.error(new Y.A(H.MEDIA_KEY_MESSAGE_ERROR_CODE,H.MEDIA_KEY_MESSAGE_ERROR_MESSAGE)),t?(n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,t.keyMessage=n,_.trigger(y.INTERNAL_KEY_MESSAGE,{data:new je(t,n,e.defaultURL)})):a.warn("No session token found for key message")}}},e}Qe.__dashjs_factory_name="ProtectionModel_01b";var Xe=dashjs.FactoryMaker.getClassFactory(Qe),Je=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Ze=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function $e(){var u,c=this.context;function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("function"==typeof e[i[Object.keys(i)[0]]])return i}return null}return u={createProtectionSystem:function(e){var t,n,i,r,a,o=null,s=T(c).getInstance(),l=(s.setConfig({debug:e.debug,BASE64:e.BASE64,settings:e.settings}),s.initialize(),n=(t=e).debug,i=n.getLogger(u),r=t.eventBus,l=t.errHandler,(a=t.videoModel?t.videoModel.getElement():null)&&void 0===a.onencrypted||a&&void 0===a.mediaKeys?h(a,Ze)?(i.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),qe(c).create({debug:n,eventBus:r,events:t.events,api:h(a,Ze)})):h(a,Je)?(i.info("EME detected on this user agent! (ProtectionModel_01b)"),Xe(c).create({debug:n,eventBus:r,errHandler:l,events:t.events,api:h(a,Je)})):(i.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(i.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),We(c).create({debug:n,eventBus:r,events:t.events})));return!o&&l&&(o=Z(c).create({protectionModel:l,protectionKeyController:s,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants,cmcdModel:e.cmcdModel,customParametersModel:e.customParametersModel,settings:e.settings}),e.capabilities.setEncryptedMediaSupported(!0)),o}}}$e.__dashjs_factory_name="Protection";var e=dashjs.FactoryMaker.getClassFactory($e),et=(e.events=ke,e.errors=H,dashjs.FactoryMaker.updateClassFactory($e.__dashjs_factory_name,e),e)},9783:function(e,t,n){"use strict";var n=n(7575),i={DEFAULT:.5,STRONG:1,WEAK:0};function r(e,t,n){return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:n!==i.DEFAULT&&n!==i.STRONG&&n!==i.WEAK?i.DEFAULT:n}}r.__dashjs_factory_name="SwitchRequest";var a=n.A.getClassFactory(r);a.NO_CHANGE=-1,a.PRIORITY=i,n.A.updateClassFactory(r.__dashjs_factory_name,a),t.A=a},4986:function(e,t,n){"use strict";var c=n(5364),h=n(2043),d=n(4703),f=n(264),p=n(9208),m=n(5030),g=n(173),_=n(8967),i=n(7575),y=n(9783),v=n(4961),E="qualitySwitchRules",A="abandonFragmentRules";function r(e){var n,i,l=this.context,t=(e=e||{}).mediaPlayerModel,r=e.customParametersModel,a=e.dashMetrics,o=e.settings;function s(e){return e.filter(function(e){return e.quality>y.A.NO_CHANGE})}function u(e){var t,n,i,r,a,o={},s=null;if(0!==e.length){for(o[y.A.PRIORITY.STRONG]={quality:y.A.NO_CHANGE,reason:null},o[y.A.PRIORITY.WEAK]={quality:y.A.NO_CHANGE,reason:null},o[y.A.PRIORITY.DEFAULT]={quality:y.A.NO_CHANGE,reason:null},t=0,n=e.length;t<n;t+=1)(i=e[t]).quality!==y.A.NO_CHANGE&&(o[i.priority].quality===y.A.NO_CHANGE||o[i.priority].quality>i.quality)&&(o[i.priority].quality=i.quality,o[i.priority].reason=i.reason||null);return o[y.A.PRIORITY.WEAK].quality!==y.A.NO_CHANGE&&(s=o[y.A.PRIORITY.WEAK]),o[y.A.PRIORITY.DEFAULT].quality!==y.A.NO_CHANGE&&(s=o[y.A.PRIORITY.DEFAULT]),(s=o[y.A.PRIORITY.STRONG].quality!==y.A.NO_CHANGE?o[y.A.PRIORITY.STRONG]:s)&&(r=s.quality,a=s.reason),(0,y.A)(l).create(r,a)}}return{initialize:function(){n=[],i=[],o.get().streaming.abr.useDefaultABRRules&&(o.get().streaming.abr.ABRStrategy===v.A.ABR_STRATEGY_L2A?n.push((0,g.A)(l).create({dashMetrics:a,settings:o})):o.get().streaming.abr.ABRStrategy===v.A.ABR_STRATEGY_LoLP?n.push((0,_.A)(l).create({dashMetrics:a})):(n.push((0,m.A)(l).create({dashMetrics:a,mediaPlayerModel:t,settings:o})),n.push((0,c.A)(l).create({dashMetrics:a})),o.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&n.push((0,h.A)(l).create({dashMetrics:a,settings:o})),o.get().streaming.abr.additionalAbrRules.switchHistoryRule&&n.push((0,p.A)(l).create()),o.get().streaming.abr.additionalAbrRules.droppedFramesRule&&n.push((0,f.A)(l).create()),o.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&i.push((0,d.A)(l).create({dashMetrics:a,mediaPlayerModel:t,settings:o})))),r.getAbrCustomRules().forEach(function(e){e.type===E&&n.push(e.rule(l).create()),e.type===A&&i.push(e.rule(l).create())})},reset:function(){[n,i].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),n=[],i=[]},getMaxQuality:function(t){return u(s(n.map(function(e){return e.getMaxIndex(t)})))||(0,y.A)(l).create()},getMinSwitchRequest:u,shouldAbandonFragment:function(t,n){var e=u(s(i.map(function(e){return e.shouldAbandon(t,n)})));return e&&(e.reason.forceAbandon=!0),e||(0,y.A)(l).create()},getQualitySwitchRules:function(){return n}}}r.__dashjs_factory_name="ABRRulesCollection";n=i.A.getClassFactory(r);n.QUALITY_SWITCH_RULES=E,n.ABANDON_FRAGMENT_RULES=A,i.A.updateSingletonFactory(r.__dashjs_factory_name,n),t.A=n},4703:function(e,t,n){"use strict";var _=n(9783),i=n(7575),r=n(9378);function y(e){var u,c,h,d,f=this.context,p=(e=e||{}).mediaPlayerModel,m=e.dashMetrics,g=e.settings;function t(){c={},h={},d=[]}return e={shouldAbandon:function(e){var t=(0,_.A)(f).create(_.A.NO_CHANGE,{name:y.__dashjs_factory_name});if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")){var n=e.getMediaInfo(),i=e.getMediaType(),r=e.getStreamInfo(),r=r?r.id:null,a=e.getCurrentRequest();if(!isNaN(a.index)){s=a.index,c[o=i]=c[o]||{},c[o][s]=c[o][s]||{};var o=p.getStableBufferTime();if(m.getCurrentBufferLevel(i)>o)return t;var s=c[i][a.index];if(null===s||null===a.firstByteDate||h.hasOwnProperty(s.id))return t;if(void 0===s.firstByteTime&&(d[i]=[],s.firstByteTime=a.firstByteDate.getTime(),s.segmentDuration=a.duration,s.bytesTotal=a.bytesTotal,s.id=a.index),s.bytesLoaded=a.bytesLoaded,s.elapsedTime=(new Date).getTime()-s.firstByteTime,0<s.bytesLoaded&&0<s.elapsedTime&&(o=i,a=Math.round(8*s.bytesLoaded/s.elapsedTime),d[o]=d[o]||[],d[o].push(a)),d[i].length>=g.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&s.elapsedTime>g.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&s.bytesLoaded<s.bytesTotal){var l,o=d[i].reduce(function(e,t){return e+t},0);if(s.measuredBandwidthInKbps=Math.round(o/d[i].length),s.estimatedTimeOfDownload=+(8*s.bytesTotal/s.measuredBandwidthInKbps/1e3).toFixed(2),s.estimatedTimeOfDownload<s.segmentDuration*g.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||0===e.getRepresentationInfo().quality)return t;h.hasOwnProperty(s.id)||(a=e.getAbrController(),o=s.bytesTotal-s.bytesLoaded,e=a.getBitrateList(n),n=a.getQualityForBitrate(n,s.measuredBandwidthInKbps*g.get().streaming.abr.bandwidthSafetyFactor,r),l=void 0!==(l=a.getMinAllowedIndexFor(i,r))?Math.max(l,n):n,o>s.bytesTotal*e[l].bitrate/e[a.getQualityFor(i,r)].bitrate&&(t.quality=l,t.reason.throughput=s.measuredBandwidthInKbps,t.reason.fragmentID=s.id,t.reason.rule=this.getClassName(),h[s.id]=s,u.debug("["+i+"] frag id",s.id," is asking to abandon and switch to quality to ",l," measured bandwidth was",s.measuredBandwidthInKbps),delete c[i][s.id]))}else s.bytesLoaded===s.bytesTotal&&delete c[i][s.id]}}return t},reset:t},u=(0,r.A)(f).getInstance().getLogger(e),t(),e}y.__dashjs_factory_name="AbandonRequestsRule",t.A=i.A.getClassFactory(y)},5030:function(e,t,n){"use strict";var h=n(6992),x=n(9783),i=n(7575),d=n(4779),f=n(1739),p=n(3342),m=n(9378),g=n(8914),_=n(4961);function r(e){var t,w,R,I=this.context,C=(e=e||{}).dashMetrics,L=e.mediaPlayerModel,n=(0,f.A)(I).getInstance();function P(e,t,i){var n=i.reduce(function(e,t,n){return t>i[e]?n:e},0);return 0===n?null:(e=Math.max(e,10+2*t.length),{gp:t=(i[n]-1)/(e/10-1),Vp:10/t})}function D(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function k(e,t){var n,i,r=L.getStableBufferTime();e.stableBufferTime===r||(n=P(r,e.bitrates,e.utilities)).Vp===e.Vp&&n.gp===e.gp||(i=(t=C.getCurrentBufferLevel(t))+e.placeholderBuffer,i=(i-=10)*(n.Vp/e.Vp)+10,e.stableBufferTime=r,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,i-t))}function O(e,t){return e.Vp*(e.utilities[t]+e.gp)}function M(e,t){for(var n,i,r=e.bitrates[t],a=e.utilities[t],o=0,s=t-1;0<=s;--s)e.utilities[s]<e.utilities[t]&&(n=e.bitrates[s],i=e.utilities[s],i=e.Vp*(e.gp+(r*i-n*a)/(r-n)),o=Math.max(o,i));return o}function i(e){for(var t in e.mediaType===_.A.AUDIO?[_.A.AUDIO]:R)R.hasOwnProperty(t)&&2===R[t].state&&(R[t].placeholderBuffer=0)}function r(){for(var e in R)R.hasOwnProperty(e)&&0!==(e=R[e]).state&&(e.state=1,D(e))}function a(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&(t=R[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,s(t,e.chunk.mediaInfo.type))}function o(e){var t;e&&e.metric===h.A.HTTP_REQUEST&&e.value&&e.value.type===d.G.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=R[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),s(t,e.mediaType))}function s(e,t){var n;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(t=C.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),n=O(e,e.lastQuality),n=Math.max(0,n-t),e.placeholderBuffer=Math.min(n,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function l(e){var t;e&&(t=R[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function u(e){var t,n;e&&(t=R[e.mediaType])&&0!==t.state&&(e=C.getCurrentBufferLevel(e.mediaType),n=0<t.abrQuality?M(t,t.abrQuality):10,n=Math.max(0,n-e),t.placeholderBuffer=Math.min(t.placeholderBuffer,n))}function c(){R={}}return t={getMaxIndex:function(e){var t=(0,x.A)(I).create();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")){var n=e.getMediaInfo(),i=e.getMediaType(),r=e.getScheduleController(),a=e.getStreamInfo(),o=e.getAbrController(),s=o.getThroughputHistory(),l=a?a.id:null,a=a&&a.manifestInfo&&a.manifestInfo.isDynamic,u=e.useBufferOccupancyABR();if(t.reason=t.reason||{},u){r.setTimeToLoadDelay(0);e=(u=e).getMediaType(),(p=R[e])?0!==p.state&&k(p,e):(c={},u=u.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),h=(h=u.map(function(e){return Math.log(e)})).map(function(e){return e-h[0]+1}),d=L.getStableBufferTime(),(f=P(d,u,h))?(c.state=1,c.bitrates=u,c.utilities=h,c.stableBufferTime=d,c.Vp=f.Vp,c.gp=f.gp,c.lastQuality=0,D(c)):c.state=0,p=c,R[e]=p);var c,h,d,f,p,m=p;if(0!==m.state){var g,_,y=C.getCurrentBufferLevel(i),v=s.getAverageThroughput(i,a),E=s.getSafeAverageThroughput(i,a),A=s.getAverageLatency(i);if(t.reason.state=m.state,t.reason.throughput=v,t.reason.latency=A,!isNaN(v))switch(m.state){case 1:b=o.getQualityForBitrate(n,E,l,A),t.quality=b,t.reason.throughput=E,m.placeholderBuffer=Math.max(0,M(m,b)-y),m.lastQuality=b,!isNaN(m.lastSegmentDurationS)&&y>=m.lastSegmentDurationS&&(m.state=2);break;case 2:g=m,_=i,S=Date.now(),isNaN(g.lastSegmentFinishTimeMs)?isNaN(g.lastCallTimeMs)||(T=.001*(S-g.lastCallTimeMs),g.placeholderBuffer+=Math.max(0,T)):(T=.001*(S-g.lastSegmentFinishTimeMs),g.placeholderBuffer+=Math.max(0,T)),g.lastCallTimeMs=S,g.lastSegmentStart=NaN,g.lastSegmentRequestTimeMs=NaN,g.lastSegmentFinishTimeMs=NaN,k(g,_);var b=function(e,t){for(var n=e.bitrates.length,i=NaN,r=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(r)||r<=o)&&(r=o,i=a)}return i}(m,y+m.placeholderBuffer),T=o.getQualityForBitrate(n,E,l,A),S=(b>m.lastQuality&&T<b&&(b=Math.max(T,m.lastQuality)),Math.max(0,y+m.placeholderBuffer-O(m,b)));S<=m.placeholderBuffer?(m.placeholderBuffer-=S,S=0):(S-=m.placeholderBuffer,m.placeholderBuffer=0,b<o.getMaxAllowedIndexFor(i,l)?r.setTimeToLoadDelay(1e3*S):S=0),t.quality=b,t.reason.throughput=v,t.reason.latency=A,t.reason.bufferLevel=y,t.reason.placeholderBuffer=m.placeholderBuffer,t.reason.delay=S,m.lastQuality=b;break;default:w.debug("BOLA ABR rule invoked in bad state."),t.quality=o.getQualityForBitrate(n,E,l,A),t.reason.state=m.state,t.reason.throughput=E,t.reason.latency=A,m.state=1,D(m)}}}}return t},reset:function(){c(),n.off(g.A.BUFFER_EMPTY,i,t),n.off(g.A.PLAYBACK_SEEKING,r,t),n.off(g.A.METRIC_ADDED,o,t),n.off(g.A.QUALITY_CHANGE_REQUESTED,l,t),n.off(g.A.FRAGMENT_LOADING_ABANDONED,u,t),n.off(p.A.MEDIA_FRAGMENT_LOADED,a,t)}},w=(0,m.A)(I).getInstance().getLogger(t),c(),n.on(g.A.BUFFER_EMPTY,i,t),n.on(g.A.PLAYBACK_SEEKING,r,t),n.on(g.A.METRIC_ADDED,o,t),n.on(g.A.QUALITY_CHANGE_REQUESTED,l,t),n.on(g.A.FRAGMENT_LOADING_ABANDONED,u,t),n.on(p.A.MEDIA_FRAGMENT_LOADED,a,t),t}r.__dashjs_factory_name="BolaRule",t.A=i.A.getClassFactory(r)},264:function(e,t,n){"use strict";var i=n(7575),c=n(9783),r=n(9378);function a(){var l=this.context,e={getMaxIndex:function(e){var t=(0,c.A)(l).create();if(e&&e.hasOwnProperty("getDroppedFramesHistory")){var n=e.getDroppedFramesHistory(),e=e.getStreamInfo().id;if(n){var i=n.getFrameHistory(e);if(!i||0===i.length)return t;for(var r=0,a=0,o=c.A.NO_CHANGE,s=1;s<i.length;s++)if(i[s]&&(r=i[s].droppedVideoFrames,375<(a=i[s].totalVideoFrames))&&.15<r/a){u.debug("index: "+(o=s-1)+" Dropped Frames: "+r+" Total Frames: "+a);break}return(0,c.A)(l).create(o,{droppedFrames:r})}}return t}},u=(0,r.A)(l).getInstance().getLogger(e);return e}a.__dashjs_factory_name="DroppedFramesRule",t.A=i.A.getClassFactory(a)},2043:function(e,t,n){"use strict";var s=n(1739),l=n(3342),i=n(7575),f=n(9378),p=n(9783),m=n(4961),g=n(6992),_=n(8914);function r(e){e=e||{};var t,u,c,n=2,h=this.context,i=(0,s.A)(h).getInstance(),d=e.dashMetrics;function r(){(c={})[m.A.VIDEO]={ignoreCount:n},c[m.A.AUDIO]={ignoreCount:n}}function a(){r()}function o(e){isNaN(e.startTime)||e.mediaType!==m.A.AUDIO&&e.mediaType!==m.A.VIDEO||0<c[e.mediaType].ignoreCount&&c[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=(0,p.A)(h).create();if(e&&e.hasOwnProperty("getMediaType")){if(!d||!d.hasOwnProperty("getCurrentBufferLevel")||!d.hasOwnProperty("getCurrentBufferState"))throw new Error(m.A.MISSING_CONFIG_ERROR);var n,i=e.getMediaType(),r=d.getCurrentBufferState(i),a=e.getRepresentationInfo().fragmentDuration,o=e.getStreamInfo(),s=o?o.id:null,l=e.getScheduleController(),o=o&&o.manifestInfo&&o.manifestInfo.isDynamic;!l.getPlaybackController().getLowLatencyModeEnabled()&&0<c[i].ignoreCount||!a||(r&&r.state===g.A.BUFFER_EMPTY?(u.debug("["+i+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty"):(l=e.getMediaInfo(),e=(r=e.getAbrController()).getThroughputHistory(),n=d.getCurrentBufferLevel(i),o=e.getAverageThroughput(i,o),e=e.getAverageLatency(i),t.quality=r.getQualityForBitrate(l,o*(n/a)*.5,s,e),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"))}return t},reset:function(){r(),i.off(_.A.PLAYBACK_SEEKING,a,t),i.off(l.A.BYTES_APPENDED_END_FRAGMENT,o,t)}},u=(0,f.A)(h).getInstance().getLogger(t),r(),i.on(_.A.PLAYBACK_SEEKING,a,t),i.on(l.A.BYTES_APPENDED_END_FRAGMENT,o,t),t}r.__dashjs_factory_name="InsufficientBufferRule",t.A=i.A.getClassFactory(r)},173:function(e,t,n){"use strict";var u=n(6992),j=n(9783),i=n(7575),G=n(4779),c=n(1739),h=n(3342),d=n(9378),V=n(4961);function r(e){var t,O,M,x,N=this.context,F=(e=e||{}).dashMetrics,n=(0,c.A)(N).getInstance();function B(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,e.lastSegmentUrl=""}function i(){for(var e in O)O.hasOwnProperty(e)&&0!==(e=O[e]).state&&(e.state=1,B(e))}function r(e){var t,n,i;e&&e.chunk&&e.chunk.mediaInfo&&(t=O[e.chunk.mediaInfo.type],n=M[e.chunk.mediaInfo.type],t)&&0!==t.state&&(i=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||i>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=i,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=i,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,o(t,n))}function a(e){var t,n;e&&e.metric===u.A.HTTP_REQUEST&&e.value&&e.value.type===G.G.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=O[e.mediaType],n=M[e.mediaType],t)&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),o(t,n))}function o(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function s(e){var t;e&&e.mediaType&&(t=O[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function U(e,t){if(e.length!==t.length)return-1;for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[i];return n}function l(){O={},M={}}return t={getMaxIndex:function(e){var t,n=(0,j.A)(N).create(),i=Math.pow(4,.99),r=Math.max(Math.pow(4,1),i*Math.sqrt(4)),a=e.getMediaInfo(),o=e.getMediaType(),s=a.bitrateList.map(function(e){return e.bandwidth}),l=s.length,u=e.getScheduleController(),c=e.getStreamInfo(),h=e.getAbrController(),d=h.getThroughputHistory(),f=c&&c.manifestInfo&&c.manifestInfo.isDynamic,p=e.useL2AABR(),m=F.getCurrentBufferLevel(o,!0),g=d.getSafeAverageThroughput(o,f),_=d.getAverageThroughput(o,f),y=d.getAverageLatency(o),v=e.getVideoModel().getPlaybackRate();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")&&(n.reason=n.reason||{},p)&&o!==V.A.AUDIO){u.setTimeToLoadDelay(0);d=(f=e).getMediaType(),(p=O[d])||(u={},f=f.getMediaInfo(),e=f.bitrateList.map(function(e){return e.bandwidth/1e3}),u.state=1,u.bitrates=e,u.lastQuality=0,(e=f)&&e.type&&(M[e.type]={},M[e.type].w=[],M[e.type].prev_w=[],M[e.type].Q=0,M[e.type].segment_request_start_s=0,M[e.type].segment_download_finish_s=0,M[e.type].B_target=1.5),B(u),p=u,O[d]=p);var E=p;if(0!==E.state){var A=M[o];if(A&&(n.reason.state=E.state,n.reason.throughput=_,n.reason.latency=y,!isNaN(_)))switch(E.state){case 1:if(t=h.getQualityForBitrate(a,g,c.id,y),n.quality=t,n.reason.throughput=g,E.lastQuality=t,!isNaN(E.lastSegmentDurationS)&&m>=A.B_target){E.state=2,A.Q=i;for(var b=0;b<l;++b)b===E.lastQuality?A.prev_w[b]=1:A.prev_w[b]=0}break;case 2:var T=[],S=F.getCurrentHttpRequest(o).trace.reduce(function(e,t){return e+t.d},0),w=F.getCurrentHttpRequest(o).trace.reduce(function(e,t){return e+t.b[0]},0),R=Math.round(8*w/S),w=F.getCurrentHttpRequest(o);if(R<1&&(R=1),w.url===E.lastSegmentUrl||w.type===G.G.INIT_SEGMENT_TYPE)t=E.lastQuality;else{for(var I=E.lastSegmentDurationS,C=1,L=0;L<l;++L)s[L]=s[L]/1e3,v*s[L]>R&&(C=-1),A.w[L]=A.prev_w[L]+C*(I/(2*r))*((A.Q+i)*(v*s[L]/R));A.w=function(e){for(var t=e.length,n=!1,i=[],r=0;r<t;++r)i[r]=e[r];for(var a=e.sort(function(e,t){return t-e}),o=0,s=0,l=[],u=0;u<t-1;++u)if((s=((o+=a[u])-1)/(u+1))>=a[u+1]){n=!0;break}n||(s=(o+a[t-1]-1)/t);for(var c=0;c<t;++c)l[c]=Math.max(i[c]-s,0);return l}(A.w);for(var P=0;P<l;++P)T[P]=A.w[P]-A.prev_w[P],A.prev_w[P]=A.w[P];A.Q=Math.max(0,A.Q-I+I*v*((U(s,A.prev_w)+U(s,T))/R));for(var D=[],k=0;k<l;++k)D[k]=Math.abs(s[k]-U(A.w,s));s[t=(t=D.indexOf(Math.min.apply(Math,D)))>E.lastQuality&&s[E.lastQuality+1]<=R?E.lastQuality+1:t]>=R&&(A.Q=2*Math.max(i,A.Q)),E.lastSegmentUrl=w.url}n.quality=t,n.reason.throughput=_,n.reason.latency=y,n.reason.bufferLevel=m,E.lastQuality=n.quality;break;default:x.debug("L2A ABR rule invoked in bad state."),n.quality=h.getQualityForBitrate(a,g,c.id,y),n.reason.state=E.state,n.reason.throughput=g,n.reason.latency=y,E.state=1,B(E)}}}return n},reset:function(){l(),n.off(h.A.PLAYBACK_SEEKING,i,t),n.off(h.A.MEDIA_FRAGMENT_LOADED,r,t),n.off(h.A.METRIC_ADDED,a,t),n.off(h.A.QUALITY_CHANGE_REQUESTED,s,t)}},x=(0,d.A)(N).getInstance().getLogger(t),l(),n.on(h.A.PLAYBACK_SEEKING,i,t),n.on(h.A.MEDIA_FRAGMENT_LOADED,r,t),n.on(h.A.METRIC_ADDED,a,t),n.on(h.A.QUALITY_CHANGE_REQUESTED,s,t),t}r.__dashjs_factory_name="L2ARule",t.A=i.A.getClassFactory(r)},9208:function(e,t,n){"use strict";var i=n(7575),r=n(9378),u=n(9783);function a(){var s=this.context,e={getMaxIndex:function(e){for(var e=e?e.getSwitchHistory():null,t=e?e.getSwitchRequests():[],n=0,i=0,r=0,a=(0,u.A)(s).create(),o=0;o<t.length;o++)if(void 0!==t[o]&&(n+=t[o].drops,i+=t[o].noDrops,r+=t[o].dropSize,6<=n+i)&&.075<n/i){a.quality=0<o&&0<t[o].drops?o-1:o,a.reason={index:a.quality,drops:n,noDrops:i,dropSize:r},l.debug("Switch history rule index: "+a.quality+" samples: "+(n+i)+" drops: "+n);break}return a}},l=(0,r.A)(s).getInstance().getLogger(e);return e}a.__dashjs_factory_name="SwitchHistoryRule",t.A=i.A.getClassFactory(a)},5364:function(e,t,n){"use strict";var i=n(7575),f=n(9783),p=n(4961),m=n(6992);function r(e){var h=this.context,d=(e=e||{}).dashMetrics;return{getMaxIndex:function(e){var t=(0,f.A)(h).create();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")){if(!d||!d.hasOwnProperty("getCurrentBufferState"))throw new Error(p.A.MISSING_CONFIG_ERROR);var n=e.getMediaInfo(),i=e.getMediaType(),r=d.getCurrentBufferState(i),a=e.getScheduleController(),o=e.getAbrController(),s=e.getStreamInfo(),l=s?s.id:null,s=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,u=o.getThroughputHistory(),c=u.getSafeAverageThroughput(i,s),u=u.getAverageLatency(i),e=e.useBufferOccupancyABR();isNaN(c)||!r||e||o.getAbandonmentStateFor(l,i)===m.A.ABANDON_LOAD||r.state!==m.A.BUFFER_LOADED&&!s||(t.quality=o.getQualityForBitrate(n,c,l,u),a.setTimeToLoadDelay(0),t.reason={throughput:c,latency:u})}return t},reset:function(){}}}r.__dashjs_factory_name="ThroughputRule",t.A=i.A.getClassFactory(r)},5535:function(e,t,n){"use strict";var i=n(7575),r=n(9378);function a(){var e,S,w,R,I,C,L,P,D,t=this.context;function n(){R=1,I=100,C=0,P=L=w=null,D="dynamic_weight_selection"}function k(){var e=0;if(w)for(var t=0;t<w.length;t++){var n=w[t];n.state.throughput>e&&(e=n.state.throughput)}return e}function O(e,n,i){e=e.map(function(e,t){return i[t]*Math.pow(e-n[t],2)}).reduce(function(e,t){return e+t});return(e<0?-1:1)*Math.sqrt(Math.abs(e))}function M(e,t,n){for(var i,r,a=0;a<t.length;a++){var o=t[a],s=O([o.state.throughput,o.state.latency,o.state.rebuffer,o.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1]);o=o,i=n,s=Math.exp(-1*Math.pow(s,2)/(2*Math.pow(.1,2))),r=void 0,o=o.state,r=[.01,.01,.01,.01],o.throughput=o.throughput+(i[0]-o.throughput)*r[0]*s,o.latency=o.latency+(i[1]-o.latency)*r[1]*s,o.rebuffer=o.rebuffer+(i[2]-o.rebuffer)*r[2]*s,o.switch=o.switch+(i[3]-o.switch)*r[3]*s}}return e={getNextQuality:function(a,e,t,n,i,r,o){var s=t,l=n,u=e,c=function(){if(!w){w=[];var e=a.bitrateList,t=[];C=e[0].bandwidth,e.forEach(function(e){t.push(e.bandwidth),e.bandwidth<C&&(C=e.bandwidth)}),r=t.map(function(e){return Math.pow(e,2)}).reduce(function(e,t){return e+t}),R=Math.sqrt(r);for(var n=0;n<e.length;n++){var i={qualityIndex:n,bitrate:e[n].bandwidth,state:{throughput:e[n].bandwidth/R,latency:0,rebuffer:0,switch:0}};w.push(i)}P=function(e){var t=[],n=function(e){for(var t=[],n=0;n<e;n++){var i=[Math.random()*k(),Math.random(),Math.random(),Math.random()];t.push(i)}return t}(Math.pow(e.length,2));t.push(n[0]);for(var i=[1,1,1,1],r=1;r<e.length;r++){for(var a=null,o=null,s=0;s<n.length;s++){for(var l=n[s],u=null,c=0;c<t.length;c++){var h=O(l,t[c],i);(null===u||h<u)&&(u=h)}(null===o||o<u)&&(a=l,o=u)}t.push(a)}for(var d=null,f=null,p=0;p<t.length;p++){for(var m=0,g=0;g<t.length;g++)p!==g&&(m+=O(t[p],t[g],i));(null===d||d<m)&&(d=m,f=p)}var _=[];for(_.push(t[f]),t.splice(f,1);0<t.length;){for(var y=null,v=null,E=0;E<t.length;E++){var A=O(_[0],t[E],i);(null===y||A<y)&&(y=A,v=E)}_.push(t[v]),t.splice(v,1)}return _}(w)}var r;return w}(),h=e/R,n=(1<h&&(h=k()),t/=I,S.debug("getNextQuality called throughput:".concat(h," latency:").concat(t," bufferSize:").concat(n," currentQualityIndex:").concat(r," playbackRate:").concat(i)),c[r]),d=n.bitrate*o.getSegmentDuration()/u,f=Math.max(0,d-l);if(l-d<o.getMinBuffer())return S.debug("Buffer is low for bitrate= ".concat(n.bitrate," downloadTime=").concat(d," currentBuffer=").concat(l," rebuffer=").concat(f)),function(e,t){var n=0,i=e;if(w)for(var r=0;r<w.length;r++){var a=w[r];a.bitrate<e.bitrate&&a.bitrate>n&&t>a.bitrate&&(n=a.bitrate,i=a)}return i}(n,u).qualityIndex;switch(D){case"manual_weight_selection":L=[.4,.4,.4,.4];break;case"random_weight_selection":L=function(e){for(var t=[],n=Math.sqrt(2/e),i=0;i<4;i++)t.push(Math.random()*n);return L=t}(c.length);break;default:var p=o;L=L||P[P.length-1],null!==(p=p.findWeightVector(c,s,l,f,u,i))&&-1!==p&&(L=p)}for(var m=null,g=null,_=null,y=0;y<c.length;y++){var v=c[y],E=v.state,E=[E.throughput,E.latency,E.rebuffer,E.switch],A=L.slice(),b=o.getNextBufferWithBitrate(v.bitrate,l,u),T=b<o.getMinBuffer(),b=(T&&S.debug("Buffer is low for bitrate=".concat(v.bitrate," downloadTime=").concat(d," currentBuffer=").concat(l," nextBuffer=").concat(b)),(v.bitrate>e-1e4||T)&&v.bitrate!==C&&(A[0]=100),O(E,[h,0,0,0],A));(null===m||b<m)&&(m=b,g=v.qualityIndex,_=v)}r=Math.abs(n.bitrate-_.bitrate)/R;return M(n,c,[h,t,f,r]),M(_,c,[h,0,0,r]),g},reset:function(){n()}},S=(0,r.A)(t).getInstance().getLogger(e),n(),e}a.__dashjs_factory_name="LearningAbrController",t.A=i.A.getClassFactory(a)},7881:function(e,t,n){"use strict";var i=n(7575),c=n(5465);function r(){var r,a,o,s;function e(){s=o=a=r=null}function l(e,t,n,i){var r=new c.A;return r.type=e,r.weights.bitrateReward=t||1,r.weights.bitrateSwitchPenalty=1,r.weights.rebufferPenalty=n||1e3,r.weights.latencyPenalty=[],r.weights.latencyPenalty.push({threshold:1.1,penalty:.05*i}),r.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),r.weights.playbackSpeedPenalty=i||200,r}function u(e,t,n,i,r){r.bitrateWSum+=r.weights.bitrateReward*e,r.lastBitrate&&(r.bitrateSwitchWSum+=r.weights.bitrateSwitchPenalty*Math.abs(e-r.lastBitrate)),r.lastBitrate=e,r.rebufferWSum+=r.weights.rebufferPenalty*t;for(var a=0;a<r.weights.latencyPenalty.length;a++){var o=r.weights.latencyPenalty[a];if(n<=o.threshold){r.latencyWSum+=o.penalty*n;break}}r.playbackSpeedWSum+=r.weights.playbackSpeedPenalty*Math.abs(1-i),r.totalQoe=r.bitrateWSum-r.bitrateSwitchWSum-r.rebufferWSum-r.latencyWSum-r.playbackSpeedWSum}return e(),{setupPerSegmentQoe:function(e,t,n){r=l("segment",e,t,n),a=e,o=t,s=n},logSegmentMetrics:function(e,t,n,i){r&&u(e,t,n,i,r)},getPerSegmentQoe:function(){return r},calculateSingleUseQoe:function(e,t,n,i){var r=null;return(r=a&&o&&s?l("segment",a,o,s):r)?(u(e,t,n,i,r),r.totalQoe):0},reset:function(){e()}}}r.__dashjs_factory_name="LoLpQoeEvaluator",t.A=i.A.getClassFactory(r)},8967:function(e,t,n){"use strict";var i=n(9378),r=n(7575),a=n(5535),o=n(7881),D=n(9783),k=n(6992),O=n(7512),M=n(4961);function s(e){var R=(e=e||{}).dashMetrics,I=this.context,e={getMaxIndex:function(e){try{var t=(0,D.A)(I).create(),n=e.getMediaInfo().type,i=e.getAbrController(),r=e.getStreamInfo(),a=i.getQualityFor(n,r.id),o=e.getMediaInfo(),s=R.getCurrentBufferState(n),l=e.getScheduleController(),u=R.getCurrentBufferLevel(n,!0),c=r&&r.manifestInfo?r.manifestInfo.isDynamic:null,h=l.getPlaybackController(),d=h.getCurrentLiveLatency();if(e.useLoLPABR()&&n!==M.A.AUDIO){var d=d||0,f=h.getPlaybackRate(),p=i.getThroughputHistory().getSafeAverageThroughput(n,c);if(C.debug("Throughput ".concat(Math.round(p)," kbps")),!isNaN(p)&&s&&i.getAbandonmentStateFor(r.id,n)!==k.A.ABANDON_LOAD){for(var m=o.bitrateList,g=e.getRepresentationInfo().fragmentDuration,_=m[0].bandwidth/1e3,y=m[m.length-1].bandwidth/1e3,v=0;v<m.length;v++){var E=m[v].bandwidth/1e3;y<E?y=E:E<_&&(_=E)}var A=m[a].bandwidth/1e3,b=R.getCurrentHttpRequest(n,!0),T=(b.tresponse.getTime()-b.trequest.getTime())/1e3,S=g<T?T-g:0,w=(P.setupPerSegmentQoe(g,y,_),P.logSegmentMetrics(A,S,d,f),(0,O.A)(I).create({targetLatency:1.5,bufferMin:.3,segmentDuration:g,qoeEvaluator:P}));t.quality=L.getNextQuality(o,1e3*p,d,u,f,a,w),t.reason={throughput:p,latency:d},t.priority=D.A.PRIORITY.STRONG,l.setTimeToLoadDelay(0),t.quality!==a&&C.debug("[TgcLearningRule]["+n+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(p),"kbps")}}return t}catch(e){throw e}},reset:function(){L.reset(),P.reset()}},C=(0,i.A)(I).getInstance().getLogger(e),L=(0,a.A)(I).create(),P=(0,o.A)(I).create();return e}s.__dashjs_factory_name="LoLPRule",t.A=r.A.getClassFactory(s)},7512:function(e,t,n){"use strict";n=n(7575);function i(e){var n,i,l,p=e.targetLatency,m=e.bufferMin,g=e.segmentDuration,_=e.qoeEvaluator;function t(){return g}function y(e,t){return g<t?e-g:e+g-t}return e={getMinBuffer:function(){return m},getSegmentDuration:t,getNextBufferWithBitrate:function(e,t,n){return y(t,e*g/n)},getNextBuffer:y,findWeightVector:function(e,o,s,t,l,u){var c=null,h=null,d=null,f=Math.abs(o-i);return e.forEach(function(a){n.forEach(function(e){e[0];var t=e[1],n=e[2],i=(e[3],a.bitrate*g/l),r=y(s,i),n=(0===n?10:1/n)*Math.max(1e-5,i-r),i=(0===t?10:1/t)*a.state.latency,t=_.calculateSingleUseQoe(a.bitrate,n,i,u);(null===c||c<t)&&!(p+f<o)&&m<=r&&(c=t,h=e,d=a.bitrate)})}),i=o,h=null===h&&null===d?-1:h}},n=function e(t,n,i){if(i===n)return t;for(var r=t.length,a=0;a<r;a++)for(var o=t.shift(),s=0;s<l.length;s++)t.push(o.concat(l[s]));return e(t,n,i+1)}((l=[.2,.4,.6,.8,1]).map(function(e){return[e]}),4,1),i=0,e}i.__dashjs_factory_name="LoLpWeightSelector",t.A=n.A.getClassFactory(i)},5465:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}i=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0},o&&n(i.prototype,o),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,o=i;t.A=o},9025:function(e,t,n){"use strict";n.d(t,{_:function(){return P}});var A=n(4961),b=n(1333),i=n(7575),T=n(2705),S=n(1372),w=n(271),R=n(8098),I=n(3047),C=n(9662),L=n(6544),P=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function r(e){var t,r,a,o,s,l,u,c,n=this.context,h=e.adapter,d=e.baseURLController,i=e.streamInfo,f=e.timelineConverter,p=e.debug,m=e.eventBus,g=e.events,_=e.dashConstants,y=(0,S.A)(n).getInstance();function v(n,e){var t,i=new T.A;i.id=n.id,i.bitrate=n.bandwidth,i.width=n.width,i.height=n.height,i.tilesHor=1,i.tilesVert=1,n.essentialProperties&&n.essentialProperties.forEach(function(e){0<=P.indexOf(e.schemeIdUri)&&e.value&&(2!==(e=e.value.split("x")).length||isNaN(e[0])||isNaN(e[1])||(i.tilesHor=parseInt(e[0],10),i.tilesVert=parseInt(e[1],10)))}),e?l.updateSegmentData(n).then(function(e){var t,r,a;t=i,a=[],e=function(e,t){for(var n,i=[],r=0,a=0,o=e.segments.length;a<o;a++)n=e.segments[a],(n=(0,w.W$)(f,h.getIsDynamic(),t,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,r))&&(i.push(n),r++);return i}(e,r=n),r.segments=e,t.segmentDuration=r.segments[0].duration,t.readThumbnail=function(t,i){var n=null;a.some(function(e){if(e.start<=t&&e.end>t)return n=e.url,!0}),n?i(n):r.segments.some(function(n){var e;if(n.mediaStartTime<=t&&n.mediaStartTime+n.duration>t)return e=d.resolve(r.path),u.load({method:"get",url:e.url,request:{range:n.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=c.getSamplesInfo(e.target.response),e=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),t=window.URL.createObjectURL(e);a.push({start:n.mediaStartTime,end:n.mediaStartTime+n.duration,url:t}),i&&i(t)}}),!0})}}):(i.startNumber=n.startNumber,i.segmentDuration=n.segmentDuration,i.timescale=n.timescale,i.templateUrl=(e=n,(t=y.isRelative(e.media)?y.resolve(e.media,d.resolve(e.path).url):e.media)?(0,w.dD)(t,e.id):"")),0<i.tilesHor&&0<i.tilesVert&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,r.push(i))}function E(){r=[],o=-1,s=null}return t={getTracks:function(){return r},addTracks:function(){var e;i&&h&&(s=h.getMediaInfoForType(i,A.A.IMAGE))&&((e=h.getVoRepresentations(s))&&0<e.length&&e.forEach(function(e){(e.segmentInfoType===b.A.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===b.A.SEGMENT_TIMELINE)&&v(e),e.segmentInfoType===b.A.SEGMENT_BASE&&v(e,!0)}),0<r.length)&&r.sort(function(e,t){return e.bitrate-t.bitrate})},reset:E,setTrackByIndex:function(e){r&&0!==r.length&&(e>=r.length&&(e=r.length-1),o=e)},getCurrentTrack:function(){return o<0?null:r[o]},getCurrentTrackIndex:function(){return o},getThumbnailRequestForTime:function(e){for(var t,n=h.getVoRepresentations(s),i=0;i<n.length;i++)if(r[o].id===n[i].id){t=n[i];break}return a.getSegmentRequestForTime(s,t,e)}},E(),u=(0,I.A)(n).create({}),c=(0,R.A)(n).getInstance(),l=(0,L.A)(n).create({events:g,eventBus:m,streamInfo:i,timelineConverter:f,dashConstants:_,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:A.A.IMAGE}),(a=(0,C.A)(n).create({streamInfo:i,type:A.A.IMAGE,timelineConverter:f,segmentsController:l,baseURLController:d,debug:p,eventBus:m,events:g,dashConstants:_,urlUtils:y})).initialize(!!h&&h.getIsDynamic()),t}r.__dashjs_factory_name="ThumbnailTracks",t.A=i.A.getClassFactory(r)},8098:function(e,t,n){"use strict";var r=n(9378),a=n(6579),i=n(7575),o=n(5521),c=n(2556);function s(){var i,e,n=this.context;function P(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var e=o.parseBuffer(e),t=(0,a.A)(n).create();return t.setData(e),t}function l(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function u(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return e={parse:P,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new c.A(0,!1);for(var i,r=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<r.byteLength;){var o=l(r,n),s=u(r,n+4);if(0===o)break;n+o<=r.byteLength&&(0<=e.indexOf(s)?i=new c.A(n,!0,o):a=n+o),n+=o}return i||new c.A(a,!1)},getMediaTimescaleFromMoov:function(e){e=P(e),e=e?e.getBox("mdhd"):void 0;return e?e.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};for(var t,n,i,e=P(e),r=e.getBoxes("moof"),a=e.getBoxes("mfhd"),e=e.getBoxes("moof").length,a=a[a.length-1].sequence_number,o=[],s=-1,l=-1,u=0;u<r.length;u++)for(var c=r[u],h=c.getChildBoxes("traf"),d=0;d<h.length;d++){for(var f=h[d],p=f.getChildBox("tfhd"),m=f.getChildBox("tfdt"),g=m.baseMediaDecodeTime,_=f.getChildBoxes("trun"),y=f.getChildBoxes("subs"),v=0;v<_.length;v++)for(var E=_[v],A=E.sample_count,b=(p.base_data_offset||0)+(E.data_offset||0),T=0;T<A;T++){var S=void 0!==(t=E.samples[T]).sample_duration?t.sample_duration:p.default_sample_duration,w=void 0!==t.sample_size?t.sample_size:p.default_sample_size,R={dts:g,cts:g+(void 0!==t.sample_composition_time_offset?t.sample_composition_time_offset:0),duration:S,offset:c.offset+b,size:w,subSizes:[w]};if(y)for(n=0;n<y.length;n++){var I=y[n];if(s<I.entry_count-1&&l<T&&(s++,l+=I.entries[s].sample_delta),T==l){R.subSizes=[];for(var C=I.entries[s],L=0;L<C.subsample_count;L++)R.subSizes.push(C.subsamples[L].subsample_size)}}o.push(R),b+=w,g+=S}i=g-m.baseMediaDecodeTime}return{sampleList:o,lastSequenceNumber:a,totalDuration:i,numSequences:e}},findInitRange:function(e){var t,n=null,e=P(e);return e&&(t=e.getBox("ftyp"),e=e.getBox("moov"),i.debug("Searching for initialization."),e)&&e.isComplete&&(n=(t||e).offset+"-"+(e.offset+e.size-1),i.debug("Found the initialization.  Range: "+n)),n},parsePayload:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new c.A(0,!1);for(var i,r=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<r.byteLength;){var o=l(r,n),s=u(r,n+4);if(0===o)break;n+o<=r.byteLength&&(0<=e.indexOf(s)?i=new c.A(n,!0,o,s):a=n+o),n+=o}return i||new c.A(a,!1)}},i=(0,r.A)(n).getInstance().getLogger(e),e}s.__dashjs_factory_name="BoxParser",t.A=i.A.getSingletonFactory(s)},7928:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var i=n(7575),r=n(9025),l=n(4961),a=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function o(){var e="ManagedMediaSource"in window,t="WebKitMediaSource"in window,n="MediaSource"in window;return e||t||n}function s(){var s,t=!1;return{setConfig:function(e){e&&e.settings&&(s=e.settings)},supportsMediaSource:o,supportsEncryptedMedia:function(){return t},supportsCodec:function(e,t){return t!==l.A.AUDIO&&t!==l.A.VIDEO?Promise.resolve(!0):(a=e,o=t,s.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(a.codec&&o===l.A.AUDIO||o===l.A.VIDEO&&a.codec&&a.width&&a.height&&a.bitrate&&a.framerate)?(i=e,r=t,new Promise(function(t){var e;i&&i.codec?((e={type:"media-source"})[r]={},e[r].contentType=i.codec,e[r].width=i.width,e[r].height=i.height,e[r].bitrate=parseInt(i.bitrate),e[r].framerate=parseFloat(i.framerate),navigator.mediaCapabilities.decodingInfo(e).then(function(e){t(e.supported)}).catch(function(){t(!1)})):t(!1)})):(n=e,new Promise(function(e){var t;n&&n.codec&&(t=n.codec,n.width&&n.height&&(t+=';width="'+n.width+'";height="'+n.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(t)||"MediaSource"in window&&MediaSource.isTypeSupported(t)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(t))?e(!0):e(!1)})));var n,i,r,a,o},setEncryptedMediaSupported:function(e){t=e},supportsEssentialProperty:function(e){try{return-1!==r._.indexOf(e.schemeIdUri)||l.A.FONT_DOWNLOAD_DVB_SCHEME===e.schemeIdUri}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var n,i=e.split(".")[0],e=0===t.indexOf(i),r=0;r<a.length;r++)if(a[r].codec===i){n=a[r];break}return n?e||n.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):e}}}s.__dashjs_factory_name="Capabilities",t.A=i.A.getSingletonFactory(s)},5994:function(e,t,n){"use strict";var i=n(7575),r=n(5533);function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){for(var n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],i=this.customTimeRangeArray[t];return n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(n.end=i.end,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(n.start=i.start,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,r.zQ)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,r.zQ)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",t.A=i.A.getClassFactory(a)},1219:function(e,t,n){"use strict";n=n(7575);function i(){function e(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}}function t(e,t){var n=s;return t&&c(e)?(h(e)&&(n=l),n=(n=d(e)?u:n)(t),t="/"!==n.charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"",[n,e].join(t)):e}var n,i=/^[a-z][a-z0-9+\-_.]*:/i,r=/^https?:\/\//i,a=/^https:\/\//i,o=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(e=-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):e).substring(0,n+1):""}function l(e){e=e.match(o);return e?e[1]:""}function u(e){e=e.match(i);return e?e[0]:""}function c(e){return!i.test(e)}function h(e){return c(e)&&"/"===e.charAt(0)}function d(e){return 0===e.indexOf("//")}try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||t}return{parseBaseUrl:s,parseOrigin:l,parseScheme:u,isRelative:c,isPathAbsolute:h,isSchemeRelative:d,isHTTPURL:function(e){return r.test(e)},isHTTPS:function(e){return a.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return n(e,t)}}}i.__dashjs_factory_name="DefaultURLUtils",t.A=n.A.getSingletonFactory(i)},6579:function(e,t,n){"use strict";var i=n(8424),n=n(7575);function r(){var o;function t(e){var t=[];if(e&&o&&"function"==typeof o.fetchAll)for(var n,i=o.fetchAll(e),r=0,a=i.length;r<a;r++)(n=s(i[r]))&&t.push(n);return t}function s(e){var t;return e?(t=new i.A(e),e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t):null}return{getBox:function(e){return e&&o&&o.boxes&&0!==o.boxes.length&&"function"==typeof o.fetch?s(o.fetch(e)):null},getBoxes:t,setData:function(e){o=e},getLastBox:function(){var e;return o&&o.boxes&&o.boxes.length&&0<(e=t(o.boxes[o.boxes.length-1].type)).length?e[e.length-1]:null}}}r.__dashjs_factory_name="IsoFile",t.A=n.A.getClassFactory(r)},7464:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});n=n(7575);function i(e,t){var n={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0,range:e.request.range};return Promise.resolve(t.modifyRequest(n)).then(function(){return Object.assign(e,n,{withCredentials:"include"===n.credentials})})}function r(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,t){return t.url,e}}}r.__dashjs_factory_name="RequestModifier",t.A=n.A.getSingletonFactory(r)},5533:function(e,t,n){"use strict";n.d(t,{sq:function(){return a},zQ:function(){return o}});var i=n(4961);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(r(e)!==t)throw i.A.BAD_ARGUMENT_ERROR}function o(e){if(null===e||isNaN(e)||e%1!=0)throw i.A.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},1372:function(e,t,n){"use strict";var i=n(7575),o=n(1219);function r(){var r,a=[],e=this.context;function n(e,t,n){var i=function(e){for(var t=0;t<a.length;t++)if(a[t].regex.test(e))return a[t].utils;return r}(n||t);return(i&&"function"==typeof i[e]?i:r)[e](t,n)}return r=(0,o.A)(e).getInstance(),{registerUrlRegex:function(e,t){a.push({regex:e,utils:t})},parseBaseUrl:function(e){return n("parseBaseUrl",e)},parseOrigin:function(e){return n("parseOrigin",e)},parseScheme:function(e){return n("parseScheme",e)},isRelative:function(e){return n("isRelative",e)},isPathAbsolute:function(e){return n("isPathAbsolute",e)},isSchemeRelative:function(e){return n("isSchemeRelative",e)},isHTTPURL:function(e){return n("isHTTPURL",e)},isHTTPS:function(e){return n("isHTTPS",e)},removeHostname:function(e){return n("removeHostname",e)},resolve:function(e,t){return n("resolve",e,t)}}}r.__dashjs_factory_name="URLUtils";n=i.A.getSingletonFactory(r);t.A=n},3339:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}i=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.code=t||null,this.message=n||null,this.data=i||null},o&&n(i.prototype,o),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,o=i;t.A=o},8669:function(e,t,n){"use strict";var i=n(4779);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}a((n=o).prototype,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===i.G.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?i.G.INIT_SEGMENT_TYPE:i.G.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}]),Object.defineProperty(n,"prototype",{writable:!1});n=o;function o(e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.action=o.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}n.ACTION_DOWNLOAD="download",n.ACTION_COMPLETE="complete",t.A=n},8424:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}var i;function s(e){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");if(this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new s(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var n=0;n<e.references.length;n++){var i={reference_type:e.references[n].reference_type,referenced_size:e.references[n].referenced_size,subsegment_duration:e.references[n].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var r=0,a=e.samples.length;r<a;r++){var o={sample_size:e.samples[r].sample_size,sample_duration:e.samples[r].sample_duration,sample_composition_time_offset:e.samples[r].sample_composition_time_offset};this.samples.push(o)}}break;case"prft":this.version=e.version,this.reference_track_ID=e.reference_track_ID,this.ntp_timestamp_sec=e.ntp_timestamp_sec,this.ntp_timestamp_frac=e.ntp_timestamp_frac,this.media_time=e.media_time,this.flags=e.flags}}n((i=s).prototype,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),Object.defineProperty(i,"prototype",{writable:!1}),t.A=s},2556:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}i=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.lastCompletedOffset=t,this.found=n,this.size=i},o&&n(i.prototype,o),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,o=i;t.A=o},2705:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}i=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},o&&n(i.prototype,o),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1});var i,a,o=i;t.A=o},4779:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==r(e)?e:String(e)}(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{G:function(){return s},N:function(){return l}});var s=a(function e(){o(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null}),l=a(function e(){o(this,e),this.s=null,this.d=null,this.b=[]});s.GET="GET",s.HEAD="HEAD",s.MPD_TYPE="MPD",s.XLINK_EXPANSION_TYPE="XLinkExpansion",s.INIT_SEGMENT_TYPE="InitializationSegment",s.INDEX_SEGMENT_TYPE="IndexSegment",s.MEDIA_SEGMENT_TYPE="MediaSegment",s.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",s.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",s.DVB_REPORTING_TYPE="DVBReporting",s.LICENSE="license",s.CONTENT_STEERING_TYPE="ContentSteering",s.OTHER_TYPE="other"},1477:function(e,t){"use strict";t.byteLength=function(e){var e=c(e),t=e[0],e=e[1];return 3*(t+e)/4-e},t.toByteArray=function(e){for(var t,n=c(e),i=n[0],n=n[1],r=new u(3*(i+n)/4-n),a=0,o=0<n?i-4:i,s=0;s<o;s+=4)t=l[e.charCodeAt(s)]<<18|l[e.charCodeAt(s+1)]<<12|l[e.charCodeAt(s+2)]<<6|l[e.charCodeAt(s+3)],r[a++]=t>>16&255,r[a++]=t>>8&255,r[a++]=255&t;return 2===n&&(t=l[e.charCodeAt(s)]<<2|l[e.charCodeAt(s+1)]>>4,r[a++]=255&t),1===n&&(t=l[e.charCodeAt(s)]<<10|l[e.charCodeAt(s+1)]<<4|l[e.charCodeAt(s+2)]>>2,r[a++]=t>>8&255,r[a++]=255&t),r},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r=[],a=0,o=n-i;a<o;a+=16383)r.push(function(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(s[(i=i)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return r.join("")}(e,a,o<a+16383?o:a+16383));return 1==i?(t=e[n-1],r.push(s[t>>2]+s[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],r.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"=")),r.join("")};for(var s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)s[i]=n[i],l[n.charCodeAt(i)]=i;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},5384:function(e,t){"use strict";function n(u,c){return function(e,t){for(var n,i,r,a=h(e,"tag"),o=h(null==t?"*":t,"range"),s=[],l=-1;++l<o.length;)if(n=o[l].toLowerCase(),c||"*"!==n){for(i=-1,r=[];++i<a.length;)if(u(a[i].toLowerCase(),n)){if(!c)return a[i];s.push(a[i])}else r.push(a[i]);a=r}return c?s:void 0}}function h(e,t){e=e&&"string"==typeof e?[e]:e;if(e&&"object"==typeof e&&"length"in e)return e;throw new Error("Invalid "+t+" `"+e+"`, expected non-empty string")}t.basicFilter=n(function(e,t){return"*"===t||e===t||-1<e.indexOf(t+"-")},!0),t.extendedFilter=n(function(e,t){var n=e.split("-"),i=t.split("-"),r=0,a=0;if("*"===i[a]||n[r]===i[a]){for(r++,a++;a<i.length;)if("*"!==i[a]){if(!n[r])return;if(n[r]!==i[a]){if(1===n[r].length)return;r++}else r++,a++}else a++;return 1}},!0),t.lookup=n(function(e,t){for(var n,i=t;;){if("*"===i||e===i)return 1;if((n=i.lastIndexOf("-"))<0)return;"-"===i.charAt(n-2)&&(n-=2),i=i.slice(0,n)}})},8649:function(e,t,n){"use strict";e.exports=n(9713)},9713:function(e,t,n){"use strict";var s=n(4505),l=n(5384),u=n(8850),c=n(2940),h=n(6535),d=n(7281),f=(e.exports=function(e,t){var n,i=t||{},r=s.parse(String(e||"").toLowerCase(),i),a=s.stringify(r),o=-1;if(!a)return a;for(;++o<u.length;)l.extendedFilter(a,u[o].from).length&&(m(r,u[o].from,u[o].to),a=s.stringify(r));for(o=-1;++o<c.length;)g(r,c[o].from.field,c[o].from.value)&&_(r,c[o].to.field,c[o].to.value);for(a=s.stringify(Object.assign({},r,p)),o=-1;++o<h.length;)a===h[o]&&(m(r,h[o],h[o].split("-").slice(0,-1).join("-")),a=s.stringify(Object.assign({},r,p)));if(r.extensions.sort(y),i.warning)for(n in d)f.call(d[n],r[n])&&i.warning("Deprecated "+n+" `"+r[n]+"`, expected one of `"+d[n][r[n]].join("`, `")+"`",null,7);return r.script&&(r.script=r.script.charAt(0).toUpperCase()+r.script.slice(1)),r.region&&(r.region=r.region.toUpperCase()),s.stringify(r)},{}.hasOwnProperty),i=new Intl.Collator,p={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function m(e,t,n){var i,r=s.parse(t),a=s.parse(n),o=[];for(i in r)r[i]&&r[i].length&&g(e,i,r[i])&&o.push(i);for(i in a)a[i]&&a[i].length&&(-1<o.indexOf(i)||!e[i]||!e[i].length)&&_(e,i,a[i])}function g(e,t,n){var i,r,a,o,s=!1;if(n){if(r=i=e[t],i&&"object"==typeof i)for(r=[],a=-1;++a<i.length;)o=i[a],n.indexOf(o)<0?r.push(o):s=!0;else i===n&&(s=!(r=null));e[t]=r}return s}function _(e,t,n){var i,r,a,o=e[t];if(o&&"object"==typeof o)for(i=[].concat(n),r=-1;++r<i.length;)a=i[r],o.indexOf(a)<0&&o.push(a);else e[t]=n}function y(e,t){return i.compare(e.singleton,t.singleton)}},4505:function(e,t,n){"use strict";t.parse=n(1766),t.stringify=n(1656)},1766:function(e,t,n){"use strict";var d=n(661),f=n(1577),p=n(4781),m=n(7031),g=n(900),_=(e.exports=function e(t,n){var i,r,a,o=n||{},s={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},l=String(t),u=l.toLowerCase(),c=0;if(null==t)throw new Error("Expected string, got `"+t+"`");if(_.call(g,u))return(null==o.normalize||o.normalize)&&g[u]?e(g[u]):(s[-1===m.indexOf(u)?"irregular":"regular"]=l,s);for(;f(u.charCodeAt(c))&&c<9;)c++;if(1<c&&c<9){if(s.language=l.slice(0,c),c<4)for(r=0;45===u.charCodeAt(c)&&f(u.charCodeAt(c+1))&&f(u.charCodeAt(c+2))&&f(u.charCodeAt(c+3))&&!f(u.charCodeAt(c+4));){if(2<r)return h(c,3,"Too many extended language subtags, expected at most 3 subtags");s.extendedLanguageSubtags.push(l.slice(c+1,c+4)),c+=4,r++}for(45===u.charCodeAt(c)&&f(u.charCodeAt(c+1))&&f(u.charCodeAt(c+2))&&f(u.charCodeAt(c+3))&&f(u.charCodeAt(c+4))&&!f(u.charCodeAt(c+5))&&(s.script=l.slice(c+1,c+5),c+=5),45===u.charCodeAt(c)&&(f(u.charCodeAt(c+1))&&f(u.charCodeAt(c+2))&&!f(u.charCodeAt(c+3))?(s.region=l.slice(c+1,c+3),c+=3):p(u.charCodeAt(c+1))&&p(u.charCodeAt(c+2))&&p(u.charCodeAt(c+3))&&!p(u.charCodeAt(c+4))&&(s.region=l.slice(c+1,c+4),c+=4));45===u.charCodeAt(c);){for(a=i=c+1;d(u.charCodeAt(a));){if(7<a-i)return h(a,1,"Too long variant, expected at most 8 characters");a++}if(!(4<a-i||3<a-i&&p(u.charCodeAt(i))))break;s.variants.push(l.slice(i,a)),c=a}for(;45===u.charCodeAt(c)&&120!==u.charCodeAt(c+1)&&d(u.charCodeAt(c+1))&&45===u.charCodeAt(c+2)&&d(u.charCodeAt(c+3));){for(a=c+2,r=0;45===u.charCodeAt(a)&&d(u.charCodeAt(a+1))&&d(u.charCodeAt(a+2));)for(a=(i=a+1)+2,r++;d(u.charCodeAt(a));){if(7<a-i)return h(a,2,"Too long extension, expected at most 8 characters");a++}if(!r)return h(a,4,"Empty extension, extensions must have at least 2 characters of content");s.extensions.push({singleton:l.charAt(c+1),extensions:l.slice(c+3,a).split("-")}),c=a}}else c=0;if(0===c&&120===u.charCodeAt(c)||45===u.charCodeAt(c)&&120===u.charCodeAt(c+1))for(a=c=c?c+2:1;45===u.charCodeAt(a)&&d(u.charCodeAt(a+1));){for(a=i=c+1;d(u.charCodeAt(a));){if(7<a-i)return h(a,5,"Too long private-use area, expected at most 8 characters");a++}s.privateuse.push(l.slice(c+1,a)),c=a}return c!==l.length?h(c,6,"Found superfluous content after tag"):s;function h(e,t,n){return o.warning&&o.warning(n,t,e),o.forgiving?s:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}},{}.hasOwnProperty)},1656:function(e){"use strict";e.exports=function(e){var t,n,i,e=e||{},r=[];if(e.irregular||e.regular)return e.irregular||e.regular;if(e.language)for(r=r.concat(e.language,e.extendedLanguageSubtags||[],e.script||[],e.region||[],e.variants||[]),t=e.extensions||[],n=-1;++n<t.length;)(i=t[n]).singleton&&i.extensions&&i.extensions.length&&(r=r.concat(i.singleton,i.extensions));return(r=e.privateuse&&e.privateuse.length?r.concat("x",e.privateuse):r).join("-")}},5059:function(e,n,t){"use strict";var S=t(1477),a=t(736),t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,i=(n.Buffer=h,n.SlowBuffer=function(e){return h.alloc(+(e=+e!=e?0:e))},n.INSPECT_MAX_BYTES=50,2147483647);function u(e){if(i<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return Object.setPrototypeOf(e,h.prototype),e}function h(e,t,n){if("number"!=typeof e)return r(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}function r(e,t,n){if("string"==typeof e){var i=e,r=t;if(h.isEncoding(r="string"==typeof r&&""!==r?r:"utf8"))return(i=(o=u(a=0|p(i,r))).write(i,r))!==a?o.slice(0,i):o;throw new TypeError("Unknown encoding: "+r)}if(ArrayBuffer.isView(e))return P(a=e,Uint8Array)?d((i=new Uint8Array(a)).buffer,i.byteOffset,i.byteLength):c(a);var a;if(null!=e){if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(P(e,SharedArrayBuffer)||e&&P(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return h.from(o,t,n);var s,l=h.isBuffer(r=e)?(0!==(s=u(l=0|f(r.length))).length&&r.copy(s,0,0,l),s):void 0!==r.length?"number"!=typeof r.length||D(r.length)?u(0):c(r):"Buffer"===r.type&&Array.isArray(r.data)?c(r.data):void 0;if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,n)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return o(e),u(e<0?0:0|f(e))}function c(e){for(var t=e.length<0?0:0|f(e.length),n=u(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');e=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return Object.setPrototypeOf(e,h.prototype),e}function f(e){if(i<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function p(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(e).length;default:if(r)return i?-1:I(e).length;t=(""+t).toLowerCase(),r=!0}}function l(e,t,n){var i,r=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=this,o=t,s=n,l=a.length;(!s||s<0||l<s)&&(s=l);for(var u="",c=o=!o||o<0?0:o;c<s;++c)u+=k[a[c]];return u;case"utf8":case"utf-8":return w(this,t,n);case"ascii":var h=this,l=t,d=n,f="";d=Math.min(h.length,d);for(var p=l;p<d;++p)f+=String.fromCharCode(127&h[p]);return f;case"latin1":case"binary":var m=this,o=t,g=n,_="";g=Math.min(m.length,g);for(var y=o;y<g;++y)_+=String.fromCharCode(m[y]);return _;case"base64":return v=this,i=n,0===(E=t)&&i===v.length?S.fromByteArray(v):S.fromByteArray(v.slice(E,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,E=n,A=this.slice(v,E),b="",T=0;T<A.length-1;T+=2)b+=String.fromCharCode(A[T]+256*A[T+1]);return b;default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function g(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=D(n=+n)?r?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=h.from(t,i)),h.isBuffer(t))return 0===t.length?-1:_(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(r?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):_(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,i,r){var a=1,o=e.length,s=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r)for(var u=-1,c=n;c<o;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*a}else-1!==u&&(c-=c-u),u=-1;else for(c=n=o<n+s?o-s:n;0<=c;c--){for(var h=!0,d=0;d<s;d++)if(l(e,c+d)!==l(t,d)){h=!1;break}if(h)return c}return-1}function w(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,l,u=e[r],c=null,h=239<u?4:223<u?3:191<u?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[r+1]))&&127<(l=(31&u)<<6|63&a)&&(c=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(i.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}var d=i,f=d.length;if(f<=y)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=y));return p}n.kMaxLength=i,h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=r,Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,n){return t=t,n=n,o(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?u(e).fill(t,n):u(e).fill(t):u(e)},h.allocUnsafe=s,h.allocUnsafeSlow=s,h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(P(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;for(var n=h.allocUnsafe(t),i=0,r=0;r<e.length;++r){var a=e[r];if(P(a,Uint8Array))i+a.length>n.length?h.from(a).copy(n,i):Uint8Array.prototype.set.call(n,a,i);else{if(!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i)}i+=a.length}return n},h.byteLength=p,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):l.apply(this,arguments)},h.prototype.equals=function(e){if(h.isBuffer(e))return this===e||0===h.compare(this,e);throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t&&(h.prototype[t]=h.prototype.inspect),h.prototype.compare=function(e,t,n,i,r){if(P(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),(t=void 0===t?0:t)<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=t)return 0;if(r<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(i,r),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){a=l[c],o=u[c];break}return a<o?-1:o<a?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},h.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||r<n)&&(n=r),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var a,o,s,l,u,c,h=!1;;)switch(i){case"hex":var d=this,f=e,p=t,m=n,g=(p=Number(p)||0,d.length-p);(!m||(m=Number(m))>g)&&(m=g),(g=f.length)/2<m&&(m=g/2);for(var _=0;_<m;++_){var y=parseInt(f.substr(2*_,2),16);if(D(y))return _;d[p+_]=y}return _;case"utf8":case"utf-8":return g=t,c=n,L(I(e,(u=this).length-g),u,g,c);case"ascii":case"latin1":case"binary":return u=this,c=t,l=n,L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),u,c,l);case"base64":return l=this,o=t,s=n,L(C(e),l,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,s=n,L(function(e,t){for(var n,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,r.push(n%256),r.push(i);return r}(e,(a=this).length-o),a,o,s);default:if(h)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),h=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function v(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,i,r,a){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function A(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function b(e,t,n,i,r){return t=+t,n>>>=0,r||A(e,0,n,4),a.write(e,t,n,i,23,4),n+4}function T(e,t,n,i,r){return t=+t,n>>>=0,r||A(e,0,n,8),a.write(e,t,n,i,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length,n=((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),this.subarray(e,t));return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},h.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var i=t,r=1,a=this[e+--i];0<i&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},h.prototype.readInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),a.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),a.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),a.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),a.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||E(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||E(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=e/a&255;return t+n},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,n,i){e=+e,t>>>=0,i||E(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=0,a=1,o=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},h.prototype.writeIntBE=function(e,t,n,i){e=+e,t>>>=0,i||E(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=n-1,a=1,o=0;for(this[t+r]=255&e;0<=--r&&(a*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,n){return b(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return b(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return T(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return T(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,i){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),(i=0<i&&i<n?n:i)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var r=(i=e.length-t<i-n?e.length-t+n:i)-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},h.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var r;1===e.length&&(r=e.charCodeAt(0),"utf8"===i&&r<128||"latin1"===i)&&(e=r)}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");var a;if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else{var o=h.isBuffer(e)?e:h.from(e,i),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var R=/[^+/0-9A-Za-z-_]/g;function I(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===i){-1<(t-=3)&&a.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function C(e){return S.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}var k=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var i=16*n,r=0;r<16;++r)t[i+r]=e[n]+e[r];return t}()},5521:function(e,t){var r={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(i.prototype._boxProcessors[e]=t)},createFile:function(){return new a},createBox:function(e,t,n){e=i.create(e);return t&&t.append(e,n),e},createFullBox:function(e,t,n){e=r.createBox(e,t,n);return e.version=0,e.flags=0,e},Utils:{}},a=(r.Utils.dataViewToString=function(e,t){t=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);var n=[],i=0;if("utf-8"===t)for(;i<e.byteLength;){var r=e.getUint8(i++);r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e.getUint8(i++))<<12),r|=(63&e.getUint8(i++))<<6),r|=63&e.getUint8(i++)),n.push(String.fromCharCode(r))}else for(;i<e.byteLength;)n.push(String.fromCharCode(e.getUint8(i++)));return n.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var i,r=-1;if("number"==typeof n)r=n;else{if("string"==typeof n)i=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);i=n.type}for(var a=0;a<e.boxes.length;a++)if(i===e.boxes[a].type){r=a+1;break}}e.boxes.splice(r,0,t)}else e.boxes.push(t)},t.parseBuffer=r.parseBuffer,t.addBoxProcessor=r.addBoxProcessor,t.createFile=r.createFile,t.createBox=r.createBox,t.createFullBox=r.createFullBox,t.Utils=r.Utils,r.Cursor=function(e){this.offset=void 0===e?0:e},function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))}),i=(a.prototype.fetch=function(e){e=this.fetchAll(e,!0);return e.length?e[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=i.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[i],e,t,n)}},a.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},a.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},function(){this._cursor=new r.Cursor});i.parse=function(e){var t=new i;return t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},i.create=function(e){var t=new i;return t.type=e,t.boxes=[],t},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],i.prototype._boxProcessors={},i.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},i.prototype._procFieldArray=function(e,t,n,i){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(n,i);else for(r=0;r<this[e].length;r++)this._writeField(n,i,this[e][r])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(e,t,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push({}),n.call(this,this[e][i]);else for(i=0;i<t;i++)n.call(this,this[e][i])},i.prototype._procSubEntries=function(e,t,n,i){var r;if(this._parsing)for(e[t]=[],r=0;r<n;r++)e[t].push({}),i.call(this,e[t][r]);else for(r=0;r<n;r++)i.call(this,e[t][r])},i.prototype._procEntryField=function(e,t,n,i){this._parsing?e[t]=this._readField(n,i):this._writeField(n,i,e[t])},i.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(i.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},i.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},i.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var i=this._raw.getInt32(n),r=this._raw.getInt32(4+n),t=i*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},i.prototype._readUint=function(e){var t,n,i=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:i=this._raw.getUint8(r);break;case 16:i=this._raw.getUint16(r);break;case 24:i=((t=this._raw.getUint16(r))<<8)+(n=this._raw.getUint8(2+r));break;case 32:i=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),n=this._raw.getUint32(4+r),i=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,i},i.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var i=this._readUint(8);t+=String.fromCharCode(i)}return t},i.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},i.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},i.prototype._readData=function(e){var t,e=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);return 0<e?(t=new Uint8Array(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e,t):null},i.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t&&r.Utils.dataViewToString(t)},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var i=Math.floor(t/Math.pow(2,32)),r=t-i*Math.pow(2,32);this._rawo.setUint32(n,i),this._rawo.setUint32(4+n,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},i.prototype._writeUint=function(e,t){if(this._rawo){var n,i,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:i=255&t,this._rawo.setUint16(r,n=(16776960&t)>>8),this._rawo.setUint8(2+r,i);break;case 32:this._rawo.setUint32(r,t);break;case 64:i=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,n),this._rawo.setUint32(4+r,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},i.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},i.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},i.prototype._writeTemplate=function(e,t){var n=Math.floor(t),t=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,t)},i.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},i.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},i.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.avc2=i.prototype._boxProcessors.avc3=i.prototype._boxProcessors.avc4=i.prototype._boxProcessors.hvc1=i.prototype._boxProcessors.hev1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_offset",1===this.version?"int":"uint",32)})},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},i.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_delta","uint",32)})},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){}},6513:function(e,t,n){"use strict";e.exports=n(3087).polyfill()},3087:function(e,t,B){e.exports=function(){"use strict";function l(e){return"function"==typeof e}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,t=void 0,r=void 0,s=function(e,t){h[i]=e,h[i+1]=t,2===(i+=2)&&(r?r(d):g())},e="undefined"!=typeof window?window:void 0,a=e||{},a=a.MutationObserver||a.WebKitMutationObserver,o="undefined"==typeof self&&void 0!==U&&"[object process]"==={}.toString.call(U),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(d,1)}}var h=new Array(1e3);function d(){for(var e=0;e<i;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;i=0}var f,p,m,g=void 0;function _(e,t){var n,i=this,r=new this.constructor(E),a=(void 0===r[v]&&k(r),i._state);return a?(n=arguments[a-1],s(function(){return P(a,r,n,i._result)})):C(i,r,e,t),r}function y(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(w(t=new this(E),e),t)}var g=o?function(){return U.nextTick(d)}:a?(p=0,o=new a(d),m=document.createTextNode(""),o.observe(m,{characterData:!0}),function(){m.data=p=++p%2}):u?((f=new MessageChannel).port1.onmessage=d,function(){return f.port2.postMessage(0)}):(void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(d)}:c()}catch(e){return c()}}:c)(),v=Math.random().toString(36).substring(2);function E(){}var A=void 0,b=1,T=2;function S(e,t,n){var r,a,i,o;t.constructor===e.constructor&&n===_&&t.constructor.resolve===y?(i=e,(o=t)._state===b?R(i,o._result):o._state===T?I(i,o._result):C(o,void 0,function(e){return w(i,e)},function(e){return I(i,e)})):void 0!==n&&l(n)?(r=t,a=n,s(function(n){var i=!1,e=function(e,t){try{e.call(t,function(e){i||(i=!0,r!==e?w(n,e):R(n,e))},function(e){i||(i=!0,I(n,e))})}catch(e){return e}}(a,r,n._label);!i&&e&&(i=!0,I(n,e))},e)):R(e,t)}function w(e,t){if(e===t)I(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)R(e,t);else{n=void 0;try{n=t.then}catch(t){return void I(e,t)}S(e,t,n)}var n}function N(e){e._onerror&&e._onerror(e._result),L(e)}function R(e,t){e._state===A&&(e._result=t,e._state=b,0!==e._subscribers.length)&&s(L,e)}function I(e,t){e._state===A&&(e._state=T,e._result=t,s(N,e))}function C(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+b]=n,r[a+T]=i,0===a&&e._state&&s(L,e)}function L(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?P(n,i,r,a):r(a);e._subscribers.length=0}}function P(e,t,n,i){var r=l(n),a=void 0,o=void 0,s=!0;if(r){try{a=n(i)}catch(e){s=!1,o=e}if(t===a)return void I(t,new TypeError("A promises callback cannot return that same promise."))}else a=i;t._state===A&&(r&&s?w(t,a):!1===s?I(t,o):e===b?R(t,a):e===T&&I(t,a))}var D=0;function k(e){e[v]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}O.prototype._enumerate=function(e){for(var t=0;this._state===A&&t<e.length;t++)this._eachEntry(e[t],t)},O.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===y){var r,a=void 0,o=void 0,s=!1;try{a=t.then}catch(t){s=!0,o=t}a===_&&t._state!==A?this._settledAt(t._state,e,t._result):"function"!=typeof a?(this._remaining--,this._result[e]=t):n===M?(r=new n(E),s?I(r,o):S(r,t,a),this._willSettleAt(r,e)):this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},O.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===A&&(this._remaining--,e===T?I(i,n):this._result[t]=n),0===this._remaining&&R(i,this._result)},O.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(b,t,e)},function(e){return n._settledAt(T,t,e)})};var F=O;function O(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[v]||k(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||R(this.promise,this._result)):I(this.promise,new Error("Array Methods must be provided an Array"))}x.prototype.catch=function(e){return this.then(null,e)},x.prototype.finally=function(t){var n=this.constructor;return l(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)};var M=x;function x(e){if(this[v]=D++,this._result=this._state=void 0,this._subscribers=[],E!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof x))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,n=e;try{n(function(e){w(t,e)},function(e){I(t,e)})}catch(n){I(t,n)}}}return M.prototype.then=_,M.all=function(e){return new F(this,e).promise},M.race=function(r){var a=this;return n(r)?new a(function(e,t){for(var n=r.length,i=0;i<n;i++)a.resolve(r[i]).then(e,t)}):new a(function(e,t){return t(new TypeError("You must pass an array to race."))})},M.resolve=y,M.reject=function(e){var t=new this(E);return I(t,e),t},M._setScheduler=function(e){r=e},M._setAsap=function(e){s=e},M._asap=s,M.polyfill=function(){var e=void 0;if(void 0!==B.g)e=B.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=M},M.Promise=M}()},7069:function(e){"use strict";var t="object"==typeof Reflect?Reflect:null,l=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},n=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(r,a){return new Promise(function(e,t){function n(e){r.removeListener(a,i),t(e)}function i(){"function"==typeof r.removeListener&&r.removeListener("error",n),e([].slice.call(arguments))}p(r,a,i,{once:!0}),"error"!==a&&"function"==typeof r.on&&p(r,"error",n,{once:!0})})},(r.EventEmitter=r).prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var a=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function s(e,t,n,i){var r,a;return u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=o(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function c(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function h(e,t,n){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return f(e,e.length)}}function d(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function p(n,i,r,a){if("function"==typeof n.on)a.once?n.once(i,r):n.on(i,r);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(i,function e(t){a.once&&n.removeEventListener(i,e),r(t)})}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){if((a=0<t.length?t[0]:a)instanceof Error)throw a;i=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw i.context=a,i}var a=r[e];if(void 0===a)return!1;if("function"==typeof a)l(a,this,t);else for(var o=a.length,s=f(a,o),n=0;n<o;++n)l(s[n],this,t);return!0},r.prototype.on=r.prototype.addListener=function(e,t){return s(this,e,t,!1)},r.prototype.prependListener=function(e,t){return s(this,e,t,!0)},r.prototype.once=function(e,t){return u(t),this.on(e,c(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,c(this,e,t)),this},r.prototype.off=r.prototype.removeListener=function(e,t){var n,i,r,a,o;if(u(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{var s=n;var l=r;for(;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(void 0!==(n=this._events))if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},r.prototype.listeners=function(e){return h(this,e,!0)},r.prototype.rawListeners=function(e){return h(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},r.prototype.listenerCount=d,r.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},5633:function(e){"use strict";var u=Array.isArray,c=Object.keys,h=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var i,r,a,o=u(t),s=u(n);if(o&&s){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1}else{if(o!=s)return!1;o=t instanceof Date,s=n instanceof Date;if(o!=s)return!1;if(o&&s)return t.getTime()==n.getTime();o=t instanceof RegExp,s=n instanceof RegExp;if(o!=s)return!1;if(o&&s)return t.toString()==n.toString();var l=c(t);if((r=l.length)!==c(n).length)return!1;for(i=r;0!=i--;)if(!h.call(n,l[i]))return!1;for(i=r;0!=i--;)if(!e(t[a=l[i]],n[a]))return!1}return!0}return t!=t&&n!=n}},736:function(e,t){t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1,r=e[t+h];for(h+=d,a=r&(1<<-c)-1,r>>=-c,c+=s;0<c;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;0<c;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(r?-1:1);o+=Math.pow(2,i),a-=u}return(r?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,l=8*a-r-1,u=(1<<l)-1,c=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,f=i?1:-1,a=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-o))<1&&(o--,i*=2),2<=(t+=1<=o+c?h/i:h*Math.pow(2,1-c))*i&&(o++,i/=2),u<=o+c?(s=0,o=u):1<=o+c?(s=(t*i-1)*Math.pow(2,r),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));8<=r;e[n+d]=255&s,d+=f,s/=256,r-=8);for(o=o<<r|s,l+=r;0<l;e[n+d]=255&o,d+=f,o/=256,l-=8);e[n+d-f]|=128*a}},5456:function(i,e,t){function p(e,t,n,i){var r=i&&"seq"===i.timeContainer,a=0,o=(i&&(a=r&&n?n.end:i.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a,t.begin),s=null;if("sets"in t)for(var l=0;l<t.sets.length;l++)p(e,t.sets[l],s,t),o="seq"===t.timeContainer?t.sets[l].end:Math.max(o,t.sets[l].end),s=t.sets[l];if("contents"in t){if("contents"in t)for(var u=0;u<t.contents.length;u++)p(e,t.contents[u],s,t),o="seq"===t.timeContainer?t.contents[u].end:Math.max(o,t.contents[u].end),s=t.contents[u]}else o=r?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=o,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function m(e){this.node=e}function g(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new y,this.layout=new A}function y(){this.styles={},this.initials={}}function v(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function E(){this.styleAttrs=null}function A(){this.regions={}}function b(e,t){n.call(this,"image"),this.src=e,this.type=t}function n(e){this.kind=e}function r(e){this.id=e}function o(e){this.regionID=e}function s(e){this.styleAttrs=e}function l(e){this.sets=e}function u(e){this.contents=e}function c(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function T(){n.call(this,"body")}function S(){n.call(this,"div")}function w(){n.call(this,"p")}function R(){n.call(this,"span")}function a(){n.call(this,"span")}function I(){n.call(this,"br")}function C(){}function F(){}function B(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function h(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function d(e,t){var n={};if(null!==e)for(var i in e.attributes){var r,a=e.attributes[i].uri+" "+e.attributes[i].local,o=x.byQName[a];void 0!==o&&(null!==(r=o.parse(e.attributes[i].value))?(n[a]=r,o===x.byName.zIndex&&D(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):k(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[i].value))}return n}function f(e,t,n){for(var i in e.attributes)if(e.attributes[i].uri===t&&e.attributes[i].local===n)return e.attributes[i].value;return null}function L(e,t,n){var i,r=null;return null!==(i=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(r=parseFloat(i[1])/t):null!==(i=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(r=parseFloat(i[1])/e):null!==(i=/^(\d+(?:\.\d+)?)ms$/.exec(n))?r=parseFloat(i[1])/1e3:null!==(i=/^(\d+(?:\.\d+)?)s$/.exec(n))?r=parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)h$/.exec(n))?r=3600*parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)m$/.exec(n))?r=60*parseFloat(i[1]):null!==(i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?r=3600*parseInt(i[1])+60*parseInt(i[2])+parseFloat(i[3]):null!==(i=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(r=3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3])+(null===i[4]?0:parseInt(i[4])/t)),r}function U(e,t,n,i){for(var r=t.length-1;0<=r;r--){var a=t[r];a in e.styles?P(e.styles[a].styleAttrs,n):k(i,"Non-existant style id referenced")}}function P(e,t){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}function D(e,t){if(e&&e.warn&&e.warn(t))throw t}function k(e,t){if(e&&e.error&&e.error(t))throw t}function O(e,t){throw e&&e.fatal&&e.fatal(t),t}function j(e,t){for(var n,i=0,r=e.length-1;i<=r;){var a=e[n=Math.floor((i+r)/2)];if(a<t)i=n+1;else{if(!(t<a))return{found:!0,index:n};r=n-1}}return{found:!1,index:i}}var G,M,x,N;e=e,G="undefined"==typeof sax?t(4468):sax,M="undefined"==typeof imscNames?t(6982):imscNames,x="undefined"==typeof imscStyles?t(1826):imscStyles,N="undefined"==typeof imscUtils?t(6095):imscUtils,e.fromXML=function(e,s,l){var t,n,i=G.parser(!0,{xmlns:!0}),u=[],c=[],h=[],d=0,f=null,r=(i.onclosetag=function(e){if(u[0]instanceof C)null!==f.head&&null!==f.head.styling&&U(f.head.styling,u[0].styleRefs,u[0].styleAttrs,s),delete u[0].styleRefs;else if(u[0]instanceof y)for(var t in u[0].styles)u[0].styles.hasOwnProperty(t)&&function e(t,n,i){for(;0<n.styleRefs.length;){var r=n.styleRefs.pop();r in t.styles?(e(t,t.styles[r],i),P(t.styles[r].styleAttrs,n.styleAttrs)):k(i,"Non-existant style id referenced")}}(u[0],u[0].styles[t],s);else if(u[0]instanceof w||u[0]instanceof R){if(1<u[0].contents.length){for(var n=[u[0].contents[0]],i=1;i<u[0].contents.length;i++)u[0].contents[i]instanceof a&&n[n.length-1]instanceof a?n[n.length-1].text+=u[0].contents[i].text:n.push(u[0].contents[i]);u[0].contents=n}u[0]instanceof R&&1===u[0].contents.length&&u[0].contents[0]instanceof a&&(u[0].text=u[0].contents[0].text,delete u[0].contents)}else u[0]instanceof m&&(u[0].node.uri===M.ns_tt&&"metadata"===u[0].node.local?d--:0<d&&l&&"onCloseTag"in l&&l.onCloseTag());h.shift(),c.shift(),u.shift()},i.ontext=function(e){if(void 0!==u[0])if(u[0]instanceof R||u[0]instanceof w){if(u[0]instanceof R){var t=u[0].styleAttrs[x.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}t=new a;t.initFromText(f,u[0],e,c[0],h[0],s),u[0].contents.push(t)}else u[0]instanceof m&&0<d&&l&&"onText"in l&&l.onText(e)},i.onopentag=function(e){var t,n,i=e.attributes["xml:space"],i=(h.unshift(i?i.value:0===h.length?"default":h[0]),e.attributes["xml:lang"]);if(c.unshift(i?i.value:0===c.length?"":c[0]),e.uri===M.ns_tt)if("tt"===e.local)null!==f&&O(s,"Two <tt> elements at ("+this.line+","+this.column+")"),(f=new g).initFromNode(e,c[0],s),u.unshift(f);else if("head"===e.local)u[0]instanceof g||O(s,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),u.unshift(f.head);else if("styling"===e.local)u[0]instanceof _||O(s,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),u.unshift(f.head.styling);else if("style"===e.local)u[0]instanceof y?((n=new v).initFromNode(e,s),n.id?f.head.styling.styles[n.id]=n:k(s,"<style> element missing @id attribute"),u.unshift(n)):u[0]instanceof C?((n=new v).initFromNode(e,s),P(n.styleAttrs,u[0].styleAttrs),u.unshift(n)):O(s,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===e.local)if(u[0]instanceof y){for(var r in(t=new E).initFromNode(e,s),t.styleAttrs)t.styleAttrs.hasOwnProperty(r)&&(f.head.styling.initials[r]=t.styleAttrs[r]);u.unshift(t)}else O(s,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else"layout"===e.local?(u[0]instanceof _||O(s,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),u.unshift(f.head.layout)):"region"===e.local?(u[0]instanceof A||O(s,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(i=new C).initFromNode(f,e,c[0],s),!i.id||i.id in f.head.layout.regions?k(s,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):f.head.layout.regions[i.id]=i,u.unshift(i)):"body"===e.local?(u[0]instanceof g||O(s,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==f.body&&O(s,"Second <body> element at "+this.line+","+this.column+")"),(n=new T).initFromNode(f,e,c[0],s),f.body=n,u.unshift(n)):"div"===e.local?(u[0]instanceof S||u[0]instanceof T||O(s,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(i=new S).initFromNode(f,u[0],e,c[0],s),(n=i.styleAttrs[x.byName.backgroundImage.qname])&&(i.contents.push(new b(n)),delete i.styleAttrs[x.byName.backgroundImage.qname]),u[0].contents.push(i),u.unshift(i)):"image"===e.local?(u[0]instanceof S||O(s,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),(n=new b).initFromNode(f,u[0],e,c[0],s),u[0].contents.push(n),u.unshift(n)):"p"===e.local?(u[0]instanceof S||O(s,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(i=new w).initFromNode(f,u[0],e,c[0],s),u[0].contents.push(i),u.unshift(i)):"span"===e.local?(u[0]instanceof R||u[0]instanceof w||O(s,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(n=new R).initFromNode(f,u[0],e,c[0],h[0],s),u[0].contents.push(n),u.unshift(n)):"br"===e.local?(u[0]instanceof R||u[0]instanceof w||O(s,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(i=new I).initFromNode(f,u[0],e,c[0],s),u[0].contents.push(i),u.unshift(i)):"set"===e.local?(u[0]instanceof R||u[0]instanceof w||u[0]instanceof S||u[0]instanceof T||u[0]instanceof C||u[0]instanceof I||O(s,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(n=new F).initFromNode(f,u[0],e,s),u[0].sets.push(n),u.unshift(n)):u.unshift(new m(e));else u.unshift(new m(e));if(u[0]instanceof m)if(e.uri===M.ns_tt&&"metadata"===e.local)d++;else if(0<d&&l&&"onOpenTag"in l){var a,o=[];for(a in e.attributes)o[e.attributes[a].uri+" "+e.attributes[a].local]={uri:e.attributes[a].uri,local:e.attributes[a].local,value:e.attributes[a].value};l.onOpenTag(e.uri,e.local,o)}},i.write(e).close(),delete f.head.styling.styles,!1);for(t in f.head.layout.regions)if(f.head.layout.regions.hasOwnProperty(t)){r=!0;break}for(n in r||(i=C.prototype.createDefaultRegion(f.lang),f.head.layout.regions[i.id]=i),f.head.layout.regions)f.head.layout.regions.hasOwnProperty(n)&&p(f,f.head.layout.regions[n],null,null);return f.body&&p(f,f.body,null,null),f.body&&function e(t){if("contents"in t)for(var n=("styleAttrs"in t?t.styleAttrs[x.byName.ruby.qname]:null),i="span"===t.kind&&("container"===n||"textContainer"===n||"baseContainer"===n),r=t.contents.length-1;0<=r;r--)!i||"styleAttrs"in t.contents[r]&&x.byName.ruby.qname in t.contents[r].styleAttrs?e(t.contents[r]):delete t.contents[r]}(f.body),f},g.prototype.initFromNode=function(e,t,n){r=n,o=f(e,M.ns_ttp,"cellResolution"),u=15,s=32,null!==o&&(null!==(o=/(\d+) (\d+)/.exec(o))?(s=parseInt(o[1]),u=parseInt(o[2])):D(r,"Malformed cellResolution value (using initial value instead)"));var i,r,a,o={w:s,h:u},s=(this.cellLength={h:new N.ComputedLength(0,1/o.h),w:new N.ComputedLength(1/o.w,0)},r=n,u=f(s=e,M.ns_ttp,"frameRate"),o=30,null!==u&&(null!==(i=/(\d+)/.exec(u))?o=parseInt(i[1]):D(r,"Malformed frame rate attribute (using initial value instead)")),l=f(s,M.ns_ttp,"frameRateMultiplier"),a=1,null!==l&&(null!==(i=/(\d+) (\d+)/.exec(l))?a=parseInt(i[1])/parseInt(i[2]):D(r,"Malformed frame rate multiplier attribute (using initial value instead)")),l=a*o,a=1,null===(o=f(s,M.ns_ttp,"tickRate"))?null!==u&&(a=l):null!==(i=/(\d+)/.exec(o))?a=parseInt(i[1]):D(r,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:l,tickRate:a}),l=(this.effectiveFrameRate=s.effectiveFrameRate,this.tickRate=s.tickRate,this.aspectRatio=(u=n,i=f(o=e,M.ns_ittp,"aspectRatio"),(r=null)!==(i=null===i?f(o,M.ns_ttp,"displayAspectRatio"):i)&&(null!==(o=/(\d+)\s+(\d+)/.exec(i))?(i=parseInt(o[1]),o=parseInt(o[2]),0!==i&&0!==o?r=i/o:k(u,"Illegal aspectRatio values (ignoring)")):k(u,"Malformed aspectRatio attribute (ignoring)")),r),f(e,M.ns_ttp,"timeBase")),u=(null!==l&&"media"!==l&&O(n,"Unsupported time base"),a=n,null===(s=f(e,M.ns_tts,"extent"))?null:2!==(s=s.split(" ")).length?(D(a,"Malformed extent (ignoring)"),null):(o=N.parseLength(s[0]),(s=N.parseLength(s[1]))&&o?{h:s,w:o}:(D(a,"Malformed extent values (ignoring)"),null)));null===u?this.pxLength={h:null,w:null}:("px"===u.h.unit&&"px"===u.w.unit||O(n,"Extent on TT must be in px or absent"),this.pxLength={h:new N.ComputedLength(0,1/u.h.value),w:new N.ComputedLength(1/u.w.value,0)}),this.dimensions={h:new N.ComputedLength(0,1),w:new N.ComputedLength(1,0)},this.lang=t},g.prototype._registerEvent=function(e){var t;e.end<=e.begin||((t=j(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end===Number.POSITIVE_INFINITY)||(t=j(this.events,e.end)).found||this.events.splice(t.index,0,e.end)},g.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},g.prototype.getMediaTimeEvents=function(){return this.events},v.prototype.initFromNode=function(e,t){this.id=B(e),this.styleAttrs=d(e,t),this.styleRefs=h(e)},E.prototype.initFromNode=function(e,t){for(var n in this.styleAttrs={},e.attributes){var i;e.attributes[n].uri!==M.ns_itts&&e.attributes[n].uri!==M.ns_ebutts&&e.attributes[n].uri!==M.ns_tts||(i=e.attributes[n].uri+" "+e.attributes[n].local,this.styleAttrs[i]=e.attributes[n].value)}},b.prototype.initFromNode=function(e,t,n,i,r){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||k(r,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||k(r,"Invalid image@type attribute"),s.prototype.initFromNode.call(this,e,t,n,r),c.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),o.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},r.prototype.initFromNode=function(e,t,n,i){this.id=B(n)},o.prototype.initFromNode=function(e,t,n,i){this.regionID=(n=n)&&"region"in n.attributes?n.attributes.region.value:""},s.prototype.initFromNode=function(e,t,n,i){this.styleAttrs=d(n,i),null!==e.head&&null!==e.head.styling&&U(e.head.styling,h(n),this.styleAttrs,i)},l.prototype.initFromNode=function(e,t,n,i){this.sets=[]},u.prototype.initFromNode=function(e,t,n,i){this.contents=[]},c.prototype.initFromNode=function(e,t,n,i){e=e,a=i,o=null,(r=n)&&"begin"in r.attributes&&null===(o=L(e.tickRate,e.effectiveFrameRate,r.attributes.begin.value))&&D(a,"Malformed begin value "+r.attributes.begin.value+" (using 0)"),s=null,r&&"dur"in r.attributes&&null===(s=L(e.tickRate,e.effectiveFrameRate,r.attributes.dur.value))&&D(a,"Malformed dur value "+r.attributes.dur.value+" (ignoring)"),l=null,r&&"end"in r.attributes&&null===(l=L(e.tickRate,e.effectiveFrameRate,r.attributes.end.value))&&D(a,"Malformed end value (ignoring)");var r,a,o,s,l,e={explicit_begin:o,explicit_end:l,explicit_dur:s};this.explicit_begin=e.explicit_begin,this.explicit_end=e.explicit_end,this.explicit_dur=e.explicit_dur,this.timeContainer=function(e,t){e=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return e&&"par"!==e?"seq"===e?"seq":(k(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,i)},T.prototype.initFromNode=function(e,t,n,i){s.prototype.initFromNode.call(this,e,null,t,i),c.prototype.initFromNode.call(this,e,null,t,i),l.prototype.initFromNode.call(this,e,null,t,i),o.prototype.initFromNode.call(this,e,null,t,i),u.prototype.initFromNode.call(this,e,null,t,i),this.lang=n},S.prototype.initFromNode=function(e,t,n,i,r){s.prototype.initFromNode.call(this,e,t,n,r),c.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),o.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},w.prototype.initFromNode=function(e,t,n,i,r){s.prototype.initFromNode.call(this,e,t,n,r),c.prototype.initFromNode.call(this,e,t,n,r),l.prototype.initFromNode.call(this,e,t,n,r),o.prototype.initFromNode.call(this,e,t,n,r),u.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},R.prototype.initFromNode=function(e,t,n,i,r,a){s.prototype.initFromNode.call(this,e,t,n,a),c.prototype.initFromNode.call(this,e,t,n,a),l.prototype.initFromNode.call(this,e,t,n,a),o.prototype.initFromNode.call(this,e,t,n,a),u.prototype.initFromNode.call(this,e,t,n,a),this.space=r,this.lang=i},a.prototype.initFromText=function(e,t,n,i,r,a){c.prototype.initFromNode.call(this,e,t,null,a),this.text=n,this.space=r,this.lang=i},I.prototype.initFromNode=function(e,t,n,i,r){o.prototype.initFromNode.call(this,e,t,n,r),c.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},C.prototype.createDefaultRegion=function(e){var t=new C;return r.call(t,""),s.call(t,{}),l.call(t,[]),c.call(t,0,Number.POSITIVE_INFINITY,null),this.lang=e,t},C.prototype.initFromNode=function(e,t,n,i){r.prototype.initFromNode.call(this,e,null,t,i),c.prototype.initFromNode.call(this,e,null,t,i),l.prototype.initFromNode.call(this,e,null,t,i),this.styleAttrs=d(t,i),this.styleRefs=h(t),this.lang=n},F.prototype.initFromNode=function(e,t,n,i){c.prototype.initFromNode.call(this,e,t,n,i);var r,a=d(n,i);for(r in this.qname=null,this.value=null,a)if(a.hasOwnProperty(r)){if(this.qname){k(i,"More than one style specified on set");break}this.qname=r,this.value=a[r]}}},4725:function(e,t,n){var w=/firefox/i.test(navigator.userAgent),R=("undefined"==typeof imscNames&&n(6982),"undefined"==typeof imscStyles?n(1826):imscStyles);function I(e,t,n,i){if("region"===n.kind)(r=document.createElement("div")).style.position="absolute";else if("body"===n.kind)r=document.createElement("div");else if("div"===n.kind)r=document.createElement("div");else if("image"===n.kind){var r=document.createElement("img");null!==e.imgResolver&&null!==n.src&&((u=e.imgResolver(n.src,r))&&(r.src=u),r.height=e.regionH,r.width=e.regionW)}else if("p"===n.kind)r=document.createElement("p");else if("span"===n.kind)if("container"===n.styleAttrs[R.byName.ruby.qname])r=document.createElement("ruby"),e.ruby=!0;else if("base"===n.styleAttrs[R.byName.ruby.qname])r=document.createElement("span");else if("text"===n.styleAttrs[R.byName.ruby.qname])r=document.createElement("rt");else if("baseContainer"===n.styleAttrs[R.byName.ruby.qname])r=document.createElement("rbc");else if("textContainer"===n.styleAttrs[R.byName.ruby.qname])r=document.createElement("rtc");else{if("delimiter"===n.styleAttrs[R.byName.ruby.qname])return;r=document.createElement("span")}else"br"===n.kind&&(r=document.createElement("br"));if(r){!n.lang||"region"!==n.kind&&n.lang===i.lang||(r.lang=n.lang),t.appendChild(r),r.style.margin="0","region"===n.kind?"lrtb"===(u=n.styleAttrs[R.byName.writingMode.qname])||"lr"===u?(e.ipd="lr",e.bpd="tb"):"rltb"===u||"rl"===u?(e.ipd="rl",e.bpd="tb"):"tblr"===u?(e.ipd="tb",e.bpd="lr"):"tbrl"!==u&&"tb"!==u||(e.ipd="tb",e.bpd="rl"):"p"===n.kind&&"tb"===e.bpd&&(i=n.styleAttrs[R.byName.direction.qname],e.ipd="ltr"===i?"lr":"rl");for(var a=0;a<k.length;a++){var o=k[a],s=n.styleAttrs[o.qname];void 0!==s&&null!==o.map&&o.map(e,r,n,s)}var l=r,t=n.styleAttrs[R.byName.linePadding.qname],u=(t&&!t.isZero()&&0<(u=t.toUsedLength(e.w,e.h))&&(i=Math.ceil(u)+"px","tb"===e.bpd?(l.style.paddingLeft=i,l.style.paddingRight=i):(l.style.paddingTop=i,l.style.paddingBottom=i),e.lp=t),n.styleAttrs[R.byName.multiRowAlign.qname]),t=(u&&"auto"!==u&&((i=document.createElement("span")).style.display="inline-block",i.style.textAlign=u,r.appendChild(i),l=i,e.mra=u),n.styleAttrs[R.byName.rubyReserve.qname]);if(t&&"none"!==t[0]&&(e.rubyReserve=t),n.styleAttrs[R.byName.fillLineGap.qname]&&(e.flg=!0),"span"===n.kind&&n.text){var c=n.styleAttrs[R.byName.textEmphasis.qname];if(c&&"none"!==c.style&&(e.textEmphasis=!0),R.byName.textCombine.qname in n.styleAttrs&&"all"===n.styleAttrs[R.byName.textCombine.qname])r.textContent=n.text,r._isd_element=n,c&&D(e,r,0,c);else for(var h="",d=0;d<n.text.length;d++){h+=n.text.charAt(d);var f=n.text.charCodeAt(d);(f<55296||56319<f||d===n.text.length-1)&&((f=document.createElement("span")).textContent=h,c&&D(e,f,0,c),r.appendChild(f),h="",f._isd_element=n)}}if("contents"in n)for(var p=0;p<n.contents.length;p++)I(e,l,n.contents[p],n);var i=[];if("p"===n.kind&&(P(e,l,i,null),e.rubyReserve&&(function(e,t){for(var n=0;n<e.length;n++){var i,r=document.createElement("ruby"),a=document.createElement("span");a.textContent="​",r.appendChild(a);var o,a=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&1==e.length?((i=document.createElement("rtc")).style[M]=O?"after":"under",i.textContent="​",i.style.fontSize=a,(o=document.createElement("rtc")).style[M]=O?"before":"over",o.textContent="​",o.style.fontSize=a,r.appendChild(i),r.appendChild(o)):((i=document.createElement("rtc")).textContent="​",i.style.fontSize=a,o="after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&0<n?O?"after":"tb"===t.bpd||"rl"===t.bpd?"under":"over":O?"before":"tb"===t.bpd||"rl"===t.bpd?"over":"under",i.style[M]=o,r.appendChild(i));for(var s=null,l=0;l<e[n].rbc.length;l++)if("ruby"===e[n].rbc[l].localName){for(var s=e[n].rbc[l],u=0;u<s.style.length;u++)r.style.setProperty(s.style.item(u),s.style.getPropertyValue(s.style.item(u)));break}(s=s||e[n].elements[0].node).parentElement.insertBefore(r,s)}}(i,e),e.rubyReserve=null),(e.ruby||e.rubyReserve)&&(function(e,t){for(var n,i=0;i<e.length;i++)for(var r=0;r<e[i].rbc.length;r++)e[i].rbc[r].style[M]||(n=O?0===i?"before":"after":"tb"===t.bpd||"rl"===t.bpd?0===i?"over":"under":0===i?"under":"over",e[i].rbc[r].style[M]=n)}(i,e),e.ruby=null),e.textEmphasis&&(function(e,t){for(var n,i=0;i<e.length;i++)for(var r=0;r<e[i].te.length;r++)e[i].te[r].style[x]&&"none"!==e[i].te[r].style[x]||(n="tb"===t.bpd?0===i?"left over":"left under":"rl"===t.bpd?0===i?"right under":"left under":0===i?"left under":"right under",e[i].te[r].style[x]=n)}(i,e),e.textEmphasis=null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var n,i=e[t].elements.length;0!==i&&!1===e[t].br&&(n=document.createElement("br"),(i=e[t].elements[i-1].node).parentElement.insertBefore(n,i.nextSibling))}}(i),e.mra=null),e.lp&&(function(e,t,n){if(null!==e)for(var i=0;i<e.length;i++){var r=e[i].elements.length,a=Math.ceil(t)+"px",o="-"+Math.ceil(t)+"px";if(0!==r){var r=e[i].elements[e[i].start_elem],s=e[i].elements[e[i].end_elem];if(r===s){var l=r.node.getBoundingClientRect();if(0==l.width||0==l.height)continue}"lr"===n.ipd?(r.node.style.marginLeft=o,r.node.style.paddingLeft=a):"rl"===n.ipd?(r.node.style.paddingRight=a,r.node.style.marginRight=o):"tb"===n.ipd&&(r.node.style.paddingTop=a,r.node.style.marginTop=o),"lr"===n.ipd?(w||(s.node.style.marginRight=o),s.node.style.paddingRight=a):"rl"===n.ipd?(s.node.style.paddingLeft=a,w||(s.node.style.marginLeft=o)):"tb"===n.ipd&&(s.node.style.paddingBottom=a,s.node.style.marginBottom=o)}}}(i,e.lp.toUsedLength(e.w,e.h),e),e.lp=null),function(e,t){for(var n=0;n<e.length;n++)for(var i=e[n],r=1;r<i.elements.length;){var a=i.elements[r-1],o=i.elements[r];!function(e,t,n){if("SPAN"!==e.tagName||"SPAN"!==t.tagName||e._isd_element!==t._isd_element)return;if(!e._isd_element)return N(n.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),0;e.textContent+=t.textContent;for(var i=0;i<t.style.length;i++){var r=t.style[i];(0<=r.indexOf("border")||0<=r.indexOf("padding")||0<=r.indexOf("margin"))&&(e.style[r]=t.style[r])}return t.parentElement.removeChild(t),1}(a.node,o.node,t)?r++:i.elements.splice(r,1)}for(var s,l,u=[],c=0;c<e.length;c++)for(var h=0;h<e[c].elements.length;h++)(l=function e(t,n,i){return t.style.backgroundColor?(i&&!n.includes(t)&&n.push(t),t.style.backgroundColor):"SPAN"===t.parentElement.nodeName||"RUBY"===t.parentElement.nodeName||"RBC"===t.parentElement.nodeName||"RTC"===t.parentElement.nodeName||"RT"===t.parentElement.nodeName?e(t.parentElement,n,!0):void 0}(s=e[c].elements[h].node,u,!1))&&(s.style.backgroundColor=l);for(var d=0;d<u.length;d++)u[d].style.backgroundColor=""}(i,e),e.flg)){for(var u=L(l.getBoundingClientRect(),e),m=i,g=u.before,_=u.after,y=e,v=Math.sign(_-g),E=0;E<=m.length;E++){var A,b,T,S=0===E?Math.round(g):E===m.length?Math.round(_):Math.round((m[E-1].after+m[E].before)/2);if(0<E&&m[E-1])for(b=0;b<m[E-1].elements.length;b++)A=v*(S-(T=m[E-1].elements[b]).after)+"px","lr"===y.bpd?T.node.style.paddingRight=A:"rl"===y.bpd?T.node.style.paddingLeft=A:"tb"===y.bpd&&(T.node.style.paddingBottom=A);if(E<m.length)for(b=0;b<m[E].elements.length;b++)A=v*((T=m[E].elements[b]).before-S)+"px","lr"===y.bpd?T.node.style.paddingLeft=A:"rl"===y.bpd?T.node.style.paddingRight=A:"tb"===y.bpd&&(T.node.style.paddingTop=A)}e.flg=null}"region"===n.kind&&"tb"===e.bpd&&e.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[R.byName.displayAlign.qname]&&(P(e,l,i,null),t=new C(""===n.id?"_":n.id,i),e.currentISDState[t.id]=t,e.previousISDState)&&t.id in e.previousISDState&&0<e.previousISDState[t.id].plist.length&&1<t.plist.length&&t.plist[t.plist.length-2].text===e.previousISDState[t.id].plist[e.previousISDState[t.id].plist.length-1].text&&(u=r.firstElementChild,i=t.plist[t.plist.length-1].after-t.plist[t.plist.length-1].before,u.style.bottom="-"+i+"px",u.style.transition="transform 0.4s",u.style.position="relative",u.style.transform="translateY(-"+i+"px)")}else N(e.errorHandler,"Error processing ISD element kind: "+n.kind)}function C(e,t){this.id=e,this.plist=t}function L(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function P(e,t,n,i){if("rt"!==t.localName&&"rtc"!==t.localName){var r,a,o,s,l=t.style.backgroundColor||i;if(0===t.childElementCount)"span"===t.localName||"rb"===t.localName?(i=L(t.getBoundingClientRect(),e),0!==n.length&&(r=i.before,s=i.after,a=n[n.length-1].before,s<(o=n[n.length-1].after)&&a<r||o<=s&&r<=a)?(o=Math.sign(i.after-i.before),s=Math.sign(i.end-i.start),o*(i.before-n[n.length-1].before)<0&&(n[n.length-1].before=i.before),0<o*(i.after-n[n.length-1].after)&&(n[n.length-1].after=i.after),s*(i.start-n[n.length-1].start)<0&&(n[n.length-1].start=i.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<s*(i.end-n[n.length-1].end)&&(n[n.length-1].end=i.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:i.before,after:i.after,start:i.start,end:i.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:l,before:i.before,after:i.after})):"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var u=t.firstChild;u;)u.nodeType===Node.ELEMENT_NODE&&(P(e,u,n,l),"ruby"===u.localName||"rtc"===u.localName?0<n.length&&n[n.length-1].rbc.push(u):"span"===u.localName&&u.style[c]&&"none"!==u.style[c]&&0<n.length&&n[n.length-1].te.push(u)),u=u.nextSibling}}function D(e,t,n,i){"none"!==i.style&&("auto"===i.style?t.style[c]="filled":t.style[c]=i.style+" "+i.symbol,"before"===i.position||"after"===i.position)&&(e="tb"===e.bpd?"before"===i.position?"left over":"left under":"rl"===e.bpd?"before"===i.position?"right under":"left under":"before"===i.position?"left under":"right under",t.style[x]=e)}function i(e,t){this.qname=e,this.map=t}"undefined"==typeof imscUtils&&n(6095),t.render=function(e,t,n,i,r,a,o,s,l){var u,i=i||t.clientHeight,r=r||t.clientWidth,c=(null!==e.aspectRatio&&(r<(u=i*e.aspectRatio)?i=Math.round(r/e.aspectRatio):r=u),document.createElement("div")),h=(c.style.position="relative",c.style.width=r+"px",c.style.height=i+"px",c.style.margin="auto",c.style.top=0,c.style.bottom=0,c.style.left=0,c.style.right=0,c.style.zIndex=0,{h:i,w:r,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:o,previousISDState:s,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null});if(t.appendChild(c),"contents"in e)for(var d=0;d<e.contents.length;d++)I(h,c,e.contents[d],e);return h.currentISDState};for(var k=[new i("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,i){0!==i[3]&&(t.style.backgroundColor="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")")}),new i("http://www.w3.org/ns/ttml#styling color",function(e,t,n,i){t.style.color="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")"}),new i("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,i){t.style.direction=i}),new i("http://www.w3.org/ns/ttml#styling display",function(e,t,n,i){}),new i("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,i){t.style.display="flex",t.style.flexDirection="column","before"===i?t.style.justifyContent="flex-start":"center"===i?t.style.justifyContent="center":"after"===i&&(t.style.justifyContent="flex-end")}),new i("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,i){e.regionH=i.h.toUsedLength(e.w,e.h),e.regionW=i.w.toUsedLength(e.w,e.h);var i=0,r=0,n=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];n&&(i=n[0].toUsedLength(e.w,e.h)+n[2].toUsedLength(e.w,e.h),r=n[1].toUsedLength(e.w,e.h)+n[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-r+"px"}),new i("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,i){for(var r=[],a=0;a<i.length;a++)i[a]=i[a].trim(),"monospaceSerif"===i[a]?(r.push("Courier New"),r.push('"Liberation Mono"'),r.push("Courier"),r.push("monospace")):"proportionalSansSerif"===i[a]?(r.push("Arial"),r.push("Helvetica"),r.push('"Liberation Sans"'),r.push("sans-serif")):"monospace"===i[a]?r.push("monospace"):"sansSerif"===i[a]?r.push("sans-serif"):"serif"===i[a]?r.push("serif"):"monospaceSansSerif"===i[a]?(r.push("Consolas"),r.push("monospace")):"proportionalSerif"===i[a]?r.push("serif"):r.push(i[a]);if(0<r.length){for(var o=[r[0]],s=1;s<r.length;s++)-1==o.indexOf(r[s])&&o.push(r[s]);r=o}t.style.fontFamily=r.join(",")}),new i("http://www.w3.org/ns/ttml#styling shear",function(e,t,n,i){0!==i&&(i=-.9*i,"tb"===e.bpd?t.style.transform="skewX("+i+"deg)":t.style.transform="skewY("+i+"deg)")}),new i("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,i){t.style.fontSize=i.toUsedLength(e.w,e.h)+"px"}),new i("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,i){t.style.fontStyle=i}),new i("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,i){t.style.fontWeight=i}),new i("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,i){t.style.lineHeight="normal"===i?"normal":i.toUsedLength(e.w,e.h)+"px"}),new i("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,i){t.style.opacity=i}),new i("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,i){t.style.top=i.h.toUsedLength(e.w,e.h)+"px",t.style.left=i.w.toUsedLength(e.w,e.h)+"px"}),new i("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,i){t.style.overflow=i}),new i("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,i){var r=[];r[0]=i[0].toUsedLength(e.w,e.h)+"px",r[1]=i[3].toUsedLength(e.w,e.h)+"px",r[2]=i[2].toUsedLength(e.w,e.h)+"px",r[3]=i[1].toUsedLength(e.w,e.h)+"px",t.style.padding=r.join(" ")}),new i("http://www.w3.org/ns/ttml#styling position",function(e,t,n,i){t.style.top=i.h.toUsedLength(e.w,e.h)+"px",t.style.left=i.w.toUsedLength(e.w,e.h)+"px"}),new i("http://www.w3.org/ns/ttml#styling rubyAlign",function(e,t,n,i){t.style.rubyAlign="spaceAround"===i?"space-around":"center"}),new i("http://www.w3.org/ns/ttml#styling rubyPosition",function(e,t,n,i){"before"!==i&&"after"!==i||(e=O?i:"tb"===e.bpd||"rl"===e.bpd?"before"===i?"over":"under":"before"===i?"under":"over",t.parentElement.style[M]=e)}),new i("http://www.w3.org/ns/ttml#styling showBackground",null),new i("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,i){e="start"===i?"rl"===e.ipd?"right":"left":"end"===i?"rl"===e.ipd?"left":"right":i;t.style.textAlign=e}),new i("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,i){t.style.textDecoration=i.join(" ").replace("lineThrough","line-through")}),new i("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,i){}),new i("http://www.w3.org/ns/ttml#styling textShadow",function(e,t,n,i){n=n.styleAttrs[R.byName.textOutline.qname];if("none"===i&&"none"===n)t.style.textShadow="";else{var r=[];if("none"!==n&&(n="rgba("+n.color[0].toString()+","+n.color[1].toString()+","+n.color[2].toString()+","+(n.color[3]/255).toString()+")",r.push("1px 1px 1px "+n),r.push("-1px 1px 1px "+n),r.push("1px -1px 1px "+n),r.push("-1px -1px 1px "+n)),"none"!==i)for(var a=0;a<i.length;a++)r.push(i[a].x_off.toUsedLength(e.w,e.h)+"px "+i[a].y_off.toUsedLength(e.w,e.h)+"px "+i[a].b_radius.toUsedLength(e.w,e.h)+"px rgba("+i[a].color[0].toString()+","+i[a].color[1].toString()+","+i[a].color[2].toString()+","+(i[a].color[3]/255).toString()+")");t.style.textShadow=r.join(",")}}),new i("http://www.w3.org/ns/ttml#styling textCombine",function(e,t,n,i){t.style.textCombineUpright=i}),new i("http://www.w3.org/ns/ttml#styling textEmphasis",function(e,t,n,i){}),new i("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,i){t.style.unicodeBidi="bidiOverride"===i?"bidi-override":i}),new i("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,i){t.style.visibility=i}),new i("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,i){"wrap"===i?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new i("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,i){"lrtb"===i||"lr"===i||"rltb"===i||"rl"===i?t.style.writingMode="horizontal-tb":"tblr"===i?t.style.writingMode="vertical-lr":"tbrl"!==i&&"tb"!==i||(t.style.writingMode="vertical-rl")}),new i("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,i){t.style.zIndex=i}),new i("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,i){e.displayForcedOnlyMode&&!1===i&&(t.style.visibility="hidden")})],r=0;r<k.length;r++)k[r].qname,k[r];var O="webkitRubyPosition"in window.getComputedStyle(document.documentElement),M=O?"webkitRubyPosition":"rubyPosition",c="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",x="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function N(e,t){if(e&&e.error&&e.error(t))throw t}},1902:function(e,t,n){function k(e,t){if("contents"in e)for(var n=0;n<e.contents.length;n++){var i=e.contents[n],r=i.styleAttrs[N.byName.ruby.qname];("span"!==i.kind||"textContainer"!==r&&"text"!==r)&&("contents"in i?k(i,t):("span"===i.kind&&0!==i.text.length||"br"===i.kind)&&t.push(i))}}function O(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)O(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function m(e){this.contents=[],this.aspectRatio=e.aspectRatio,this.lang=e.lang}function M(e){for(var t in this.kind=e.kind||"region",this.lang=e.lang,e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)e.styleAttrs.hasOwnProperty(t)&&(this.styleAttrs[t]=e.styleAttrs[t]);"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function x(e,t){if(e&&e.error&&e.error(t))throw t}var N,F,B;t=t,"undefined"==typeof imscNames&&n(6982),N="undefined"==typeof imscStyles?n(1826):imscStyles,F="undefined"==typeof imscUtils?n(6095):imscUtils,t.generateISD=function(e,t,n){var i,r,a,o,s,l,u,c=new m(e),h={},d={},f=e.head.styling.initials[N.byName.showBackground.qname],p=e.head.styling.initials[N.byName.backgroundColor.qname];for(r in e.head.layout.regions)e.head.layout.regions.hasOwnProperty(r)&&(o=(a=e.head.layout.regions[r]).styleAttrs[N.byName.showBackground.qname]||f,s=a.styleAttrs[N.byName.backgroundColor.qname]||p,d[a.id]=("always"===o||void 0===o)&&void 0!==s&&!(t<a.begin||t>=a.end));for(l in e.body&&e.body.regionID&&(d[e.body.regionID]=!0),i=null!==e.body?function t(n,e){if(e.contents){var i,r={};for(i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r.contents=[],e.contents.filter(function(e){return!(n<e.begin||n>=e.end)}).forEach(function(e){e=t(n,e);e.regionID&&(d[e.regionID]=!0),null!==e&&r.contents.push(e)}),r}return e}(t,e.body):null,void 0!==d[""]&&(d[""]=!0),d)d[l]&&null!==(u=function e(t,n,i,r,a,o,s,l,u){if(n<s.begin||n>=s.end)return null;var c="regionID"in s&&""!==s.regionID?s.regionID:o;if(null!==a&&c!==i.id&&(!("contents"in s)||"contents"in s&&0===s.contents.length||""!==c))return null;var h=new M(s);if("sets"in s)for(var d=0;d<s.sets.length;d++)n<s.sets[d].begin||n>=s.sets[d].end||(h.styleAttrs[s.sets[d].qname]=s.sets[d].value);var f={};for(var p in h.styleAttrs)!h.styleAttrs.hasOwnProperty(p)||(f[p]=!0,"region"!==h.kind)||p!==N.byName.writingMode.qname||N.byName.direction.qname in h.styleAttrs||("lrtb"===(p=h.styleAttrs[p])||"lr"===p?h.styleAttrs[N.byName.direction.qname]="ltr":"rltb"!==p&&"rl"!==p||(h.styleAttrs[N.byName.direction.qname]="rtl"));if(null!==a)for(var m=0;m<N.all.length;m++){var g,_,y,v=N.all[m];v.qname===N.byName.textDecoration.qname?(_=a.styleAttrs[v.qname],y=h.styleAttrs[v.qname],g=[],void 0===y?g=_:-1===y.indexOf("none")?((-1===y.indexOf("noUnderline")&&-1!==_.indexOf("underline")||-1!==y.indexOf("underline"))&&g.push("underline"),(-1===y.indexOf("noLineThrough")&&-1!==_.indexOf("lineThrough")||-1!==y.indexOf("lineThrough"))&&g.push("lineThrough"),(-1===y.indexOf("noOverline")&&-1!==_.indexOf("overline")||-1!==y.indexOf("overline"))&&g.push("overline")):g.push("none"),h.styleAttrs[v.qname]=g):v.qname!==N.byName.fontSize.qname||v.qname in h.styleAttrs||"span"!==h.kind||"textContainer"!==h.styleAttrs[N.byName.ruby.qname]?v.qname!==N.byName.fontSize.qname||v.qname in h.styleAttrs||"span"!==h.kind||"text"!==h.styleAttrs[N.byName.ruby.qname]?v.inherit&&v.qname in a.styleAttrs&&!(v.qname in h.styleAttrs)&&(h.styleAttrs[v.qname]=a.styleAttrs[v.qname]):(_=a.styleAttrs[N.byName.fontSize.qname],"textContainer"===a.styleAttrs[N.byName.ruby.qname]?h.styleAttrs[v.qname]=_:h.styleAttrs[v.qname]=new F.ComputedLength(.5*_.rw,.5*_.rh)):(y=a.styleAttrs[N.byName.fontSize.qname],h.styleAttrs[v.qname]=new F.ComputedLength(.5*y.rw,.5*y.rh))}for(var E=0;E<N.all.length;E++){var A,b=N.all[E];b.qname in h.styleAttrs||b.qname===N.byName.position.qname&&N.byName.origin.qname in h.styleAttrs||b.qname===N.byName.origin.qname&&N.byName.position.qname in h.styleAttrs||null!==(A=t.head.styling.initials[b.qname]||b.initial)&&("region"===h.kind||!1===b.inherit&&null!==A)&&(null!==(A=b.parse(A))?(h.styleAttrs[b.qname]=A,f[b.qname]=!0):x(l,"Invalid initial value for '"+b.qname+"' on element '"+h.kind))}for(var T=0;T<N.all.length;T++){var S,w=N.all[T];w.qname in f&&null!==w.compute&&(null!==(S=w.compute(t,a,h,h.styleAttrs[w.qname],u))?h.styleAttrs[w.qname]=S:(h.styleAttrs[w.qname]=w.compute(t,a,h,w.parse(w.initial),u),x(l,"Style '"+w.qname+"' on element '"+h.kind+"' cannot be computed")))}if("none"===h.styleAttrs[N.byName.display.qname])return null;var R=null;null===a?R=null===r?[]:[r]:"contents"in s&&(R=s.contents);for(var I=0;null!==R&&I<R.length;I++){var C=e(t,n,i,r,h,c,R[I],l,u);null!==C&&h.contents.push(C.element)}for(var L in h.styleAttrs){var P,D;h.styleAttrs.hasOwnProperty(L)&&(P=!1,"span"===h.kind&&(D=h.styleAttrs[N.byName.ruby.qname],P=(P=(P=("container"===D||"textContainer"===D||"baseContainer"===D)&&-1!==B.indexOf(L))||"container"!==D&&L===N.byName.rubyAlign.qname)||!("textContainer"===D||"text"===D)&&L===N.byName.rubyPosition.qname),P||"applies"in(D=N.byQName[L])&&(P=-1===D.applies.indexOf(h.kind)),P)&&delete h.styleAttrs[L]}o=h.styleAttrs[N.byName.ruby.qname];"p"!==h.kind&&("span"!==h.kind||"textContainer"!==o&&"text"!==o)||(k(h,o=[]),function(e){for(var t,n,i,r,a=0;a<e.length;)"br"!==(t=e[a]).kind&&"preserve"!==t.space&&(n=t.text.replace(/[\t\r\n ]+/g," "),/^[ ]/.test(n)&&(0===a||"br"===(i=e[a-1]).kind||/[\r\n\t ]$/.test(i.text))&&(n=n.substring(1)),0===(t.text=n).length)?e.splice(a,1):a++;for(a=0;a<e.length;a++)"br"!==(t=e[a]).kind&&"preserve"!==t.space?/[ ]$/.test(t.text)&&(a===e.length-1||"br"===(r=e[a+1]).kind||"preserve"===r.space&&/^[\r\n]/.test(r.text))&&(t.text=t.text.slice(0,-1)):a++}(o),O(h));return"div"===h.kind&&N.byName.backgroundImage.qname in h.styleAttrs||"br"===h.kind||"image"===h.kind||"contents"in h&&0<h.contents.length||"span"===h.kind&&null!==h.text||"region"===h.kind&&"always"===h.styleAttrs[N.byName.showBackground.qname]?{region_id:c,element:h}:null}(e,t,e.head.layout.regions[l],i,null,"",e.head.layout.regions[l],n,h))&&c.contents.push(u.element);return c},B=[N.byName.color.qname,N.byName.textCombine.qname,N.byName.textDecoration.qname,N.byName.textEmphasis.qname,N.byName.textOutline.qname,N.byName.textShadow.qname]},8769:function(e,t,n){t.generateISD=n(1902).generateISD,t.fromXML=n(5456).fromXML,t.renderHTML=n(4725).render},6982:function(e,t){(t=t).ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"},1826:function(e,t,n){var i,r,l=t,t="undefined"==typeof imscNames?n(6982):imscNames,u="undefined"==typeof imscUtils?n(6095):imscUtils;function a(e,t,n,i,r,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=r,this.animatable=a,this.initial=n,this.applies=i,this.parse=o,this.compute=s}for(i in l.all=[new a(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,u.parseColor,null),new a(t.ns_tts,"color","white",["span"],!0,!0,u.parseColor,null),new a(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new a(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){var t;return"auto"===e?e:2===(e=e.split(" ")).length&&(t=u.parseLength(e[0]),e=u.parseLength(e[1]))&&t?{h:e,w:t}:null},function(e,t,n,i,r){var a,o;if("auto"===i)a=new u.ComputedLength(0,1);else if(null===(a=u.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)o=new u.ComputedLength(1,0);else if(null===(o=u.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:o}}),new a(t.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(e){for(var t=e.split(","),n=[],i=0;i<t.length;i++)t[i]=t[i].trim(),"'"!==t[i].charAt(0)&&'"'!==t[i].charAt(0)&&"default"===t[i]?n.push("monospaceSerif"):n.push(t[i]);return n},null),new a(t.ns_tts,"shear","0%",["p"],!0,!0,u.parseLength,function(e,t,n,i){return"%"!==i.unit?null:100<Math.abs(i.value)?100*Math.sign(i.value):i.value}),new a(t.ns_tts,"fontSize","1c",["span","p"],!0,!0,u.parseLength,function(e,t,n,i,r){return u.toComputedLength(i.value,i.unit,null!==t?t.styleAttrs[l.byName.fontSize.qname]:e.cellLength.h,null!==t?t.styleAttrs[l.byName.fontSize.qname]:e.cellLength.h,e.cellLength.h,e.pxLength.h)}),new a(t.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(e){return e},null),new a(t.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(e){return e},null),new a(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:u.parseLength(e)},function(e,t,n,i,r){var a;if("normal"===i)a=i;else if(null===(a=u.toComputedLength(i.value,i.unit,n.styleAttrs[l.byName.fontSize.qname],n.styleAttrs[l.byName.fontSize.qname],e.cellLength.h,e.pxLength.h)))return null;return a}),new a(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new a(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){var t;return"auto"===e?e:2===(e=e.split(" ")).length&&(t=u.parseLength(e[0]),e=u.parseLength(e[1]))&&t?{h:e,w:t}:null},function(e,t,n,i,r){var a,o;if("auto"===i)a=new u.ComputedLength(0,0);else if(null===(a=u.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)o=new u.ComputedLength(0,0);else if(null===(o=u.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:o}}),new a(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;for(var n=[],i=0;i<t.length;i++){var r=u.parseLength(t[i]);if(!r)return null;n.push(r)}return n},function(e,t,n,i,r){var a;if(1===i.length)a=[i[0],i[0],i[0],i[0]];else if(2===i.length)a=[i[0],i[1],i[0],i[1]];else if(3===i.length)a=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;a=[i[0],i[1],i[2],i[3]]}i=n.styleAttrs[l.byName.writingMode.qname];if("lrtb"===i||"lr"===i)a=[a[0],a[3],a[2],a[1]];else if("rltb"===i||"rl"===i)a=[a[0],a[1],a[2],a[3]];else if("tblr"===i)a=[a[3],a[0],a[1],a[2]];else{if("tbrl"!==i&&"tb"!==i)return null;a=[a[3],a[2],a[1],a[0]]}for(var o=[],s=0;s<a.length;s++)if(0===a[s].value)o[s]=new u.ComputedLength(0,0);else if(o[s]=u.toComputedLength(a[s].value,a[s].unit,n.styleAttrs[l.byName.fontSize.qname],0===s||2===s?n.styleAttrs[l.byName.extent.qname].h:n.styleAttrs[l.byName.extent.qname].w,0===s||2===s?e.cellLength.h:e.cellLength.w,0===s||2===s?e.pxLength.h:e.pxLength.w),null===o[s])return null;return o}),new a(t.ns_tts,"position","top left",["region"],!1,!0,function(e){return u.parsePosition(e)},function(e,t,n,i){var r,a;return null===(r=u.toComputedLength(i.v.offset.value,i.v.offset.unit,null,new u.ComputedLength(-n.styleAttrs[l.byName.extent.qname].h.rw,e.dimensions.h.rh-n.styleAttrs[l.byName.extent.qname].h.rh),null,e.pxLength.h))||("bottom"===i.v.edge&&(r=new u.ComputedLength(-r.rw-n.styleAttrs[l.byName.extent.qname].h.rw,e.dimensions.h.rh-r.rh-n.styleAttrs[l.byName.extent.qname].h.rh)),a=u.toComputedLength(i.h.offset.value,i.h.offset.unit,null,new u.ComputedLength(e.dimensions.w.rw-n.styleAttrs[l.byName.extent.qname].w.rw,-n.styleAttrs[l.byName.extent.qname].w.rh),null,e.pxLength.w),null===r)?null:{h:r,w:a="right"===i.h.edge?new u.ComputedLength(e.dimensions.w.rw-a.rw-n.styleAttrs[l.byName.extent.qname].w.rw,-a.rh-n.styleAttrs[l.byName.extent.qname].w.rh):a}}),new a(t.ns_tts,"ruby","none",["span"],!1,!0,function(e){return e},null),new a(t.ns_tts,"rubyAlign","center",["span"],!0,!0,function(e){return"center"!==e&&"spaceAround"!==e?null:e},null),new a(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"rubyReserve","none",["p"],!0,!0,function(e){var e=e.split(" "),t=[null,null];if(0===e.length||2<e.length)return null;if("none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;if(t[0]=e[0],2===e.length&&"none"!==e[0]){e=u.parseLength(e[1]);if(!e)return null;t[1]=e}return t},function(e,t,n,i,r){return"none"===i[0]?i:null===(n=null===i[1]?new u.ComputedLength(.5*n.styleAttrs[l.byName.fontSize.qname].rw,.5*n.styleAttrs[l.byName.fontSize.qname].rh):u.toComputedLength(i[1].value,i[1].unit,n.styleAttrs[l.byName.fontSize.qname],n.styleAttrs[l.byName.fontSize.qname],e.cellLength.h,e.pxLength.h))?null:[i[0],n]}),new a(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,i,r){return"left"===i?"start":"right"===i?"end":i}),new a(t.ns_tts,"textCombine","none",["span"],!0,!0,function(e){return"none"===e||"all"===e?e:null},null),new a(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new a(t.ns_tts,"textEmphasis","none",["span"],!0,!0,function(e){for(var t=e.split(" "),n={style:null,symbol:null,color:null,position:null},i=0;i<t.length;i++)if("none"===t[i]||"auto"===t[i])n.style=t[i];else if("filled"===t[i]||"open"===t[i])n.style=t[i];else if("circle"===t[i]||"dot"===t[i]||"sesame"===t[i])n.symbol=t[i];else if("current"===t[i])n.color=t[i];else if("outside"===t[i]||"before"===t[i]||"after"===t[i])n.position=t[i];else if(n.color=u.parseColor(t[i]),null===n.color)return null;return null==n.style&&null==n.symbol?n.style="auto":(n.symbol=n.symbol||"circle",n.style=n.style||"filled"),n.position=n.position||"outside",n.color=n.color||"current",n},null),new a(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){var t,n;return"none"===e?e:(t={},!(0===(e=e.split(" ")).length||2<e.length)&&(n=u.parseColor(e[0]),null!==(t.color=n)&&e.shift(),1===e.length)&&(n=u.parseLength(e[0]))?(t.thickness=n,t):null)},function(e,t,n,i,r){var a;return"none"===i?i:(a={},null===i.color?a.color=n.styleAttrs[l.byName.color.qname]:a.color=i.color,a.thickness=u.toComputedLength(i.thickness.value,i.thickness.unit,n.styleAttrs[l.byName.fontSize.qname],n.styleAttrs[l.byName.fontSize.qname],e.cellLength.h,e.pxLength.h),null===a.thickness?null:a)}),new a(t.ns_tts,"textShadow","none",["span"],!0,!0,u.parseTextShadow,function(e,t,n,i){if("none"===i)return i;for(var r=[],a=0;a<i.length;a++){var o={};if(o.x_off=u.toComputedLength(i[a][0].value,i[a][0].unit,null,n.styleAttrs[l.byName.fontSize.qname],null,e.pxLength.w),null===o.x_off)return null;if(o.y_off=u.toComputedLength(i[a][1].value,i[a][1].unit,null,n.styleAttrs[l.byName.fontSize.qname],null,e.pxLength.h),null===o.y_off)return null;if(null===i[a][2])o.b_radius=0;else if(o.b_radius=u.toComputedLength(i[a][2].value,i[a][2].unit,null,n.styleAttrs[l.byName.fontSize.qname],null,e.pxLength.h),null===o.b_radius)return null;null===i[a][3]?o.color=n.styleAttrs[l.byName.color.qname]:o.color=i[a][3],r.push(o)}return r}),new a(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new a(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new a(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new a(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new a(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,u.parseLength,function(e,t,n,i,r){return u.toComputedLength(i.value,i.unit,null,null,e.cellLength.w,null)}),new a(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new a(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new a(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new a(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],l.byQName={},l.all)l.byQName[l.all[i].qname]=l.all[i];for(r in l.byName={},l.all)l.byName[l.all[r].name]=l.all[r]},6095:function(e,t){var u,i,r,a,o,n;i=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,r=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,a=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]},(u=t).parseColor=function(e){var t=null,n=o[e.toLowerCase()];return void 0!==n?t=n:null!==(n=i.exec(e))?t=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),void 0!==n[4]?parseInt(n[4],16):255]:null!==(n=r.exec(e))?t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),255]:null!==(n=a.exec(e))&&(t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseInt(n[4])]),t},n=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/,u.parseLength=function(e){var t=null;return t=null!==(e=n.exec(e))?{value:parseFloat(e[1]),unit:e[2]}:t},u.parseTextShadow=function(e){for(var t=e.match(/([^\(,\)]|\([^\)]+\))+/g),n=[],i=0;i<t.length;i++){var r=t[i].split(" ");if(1===r.length&&"none"===r[0])return"none";if(1<r.length&&r.length<5){var a=[null,null,null,null],o=u.parseLength(r.shift());if(null===o)return null;if(a[0]=o,null===(o=u.parseLength(r.shift())))return null;if(a[1]=o,0===r.length);else if(null!==(o=u.parseLength(r[0]))&&(a[2]=o,r.shift()),0!==r.length){o=u.parseColor(r[0]);if(null===o)return null;a[3]=o}n.push(a)}}return n},u.parsePosition=function(e){function t(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e}var n=e.split(" ");if(4<n.length)return null;for(var i=0;i<n.length;i++)if(!t(n[i])){var r=u.parseLength(n[i]);if(null===r)return null;n[i]=r}for(var a={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},o=0;o<n.length;){var s=n[o++];if(t(s)){var l={value:0,unit:"%"};2!==n.length&&o<n.length&&!t(n[o])&&(l=n[o++]),"right"===s?(a.h.edge=s,a.h.offset=l):"bottom"===s?(a.v.edge=s,a.v.offset=l):"left"===s?a.h.offset=l:"top"===s&&(a.v.offset=l)}else{if(1!==n.length&&2!==n.length)return null;1===o?a.h.offset=s:a.v.offset=s}}return a},u.ComputedLength=function(e,t){this.rw=e,this.rh=t},u.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},u.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},u.toComputedLength=function(e,t,n,i,r,a){return"%"===t&&i?new u.ComputedLength(i.rw*e/100,i.rh*e/100):"em"===t&&n?new u.ComputedLength(n.rw*e,n.rh*e):"c"===t&&r?new u.ComputedLength(e*r.rw,e*r.rh):"px"===t&&a?new u.ComputedLength(e*a.rw,e*a.rh):"rh"===t?new u.ComputedLength(0,e/100):"rw"===t?new u.ComputedLength(e/100,0):null}},7497:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},1577:function(e){"use strict";e.exports=function(e){e="string"==typeof e?e.charCodeAt(0):e;return 97<=e&&e<=122||65<=e&&e<=90}},661:function(e,t,n){"use strict";var i=n(1577),r=n(4781);e.exports=function(e){return i(e)||r(e)}},4781:function(e){"use strict";e.exports=function(e){e="string"==typeof e?e.charCodeAt(0):e;return 48<=e&&e<=57}},8758:function(e){"use strict";function d(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function a(e,t){for(var n,i="",r=0,a=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(a!==s-1&&1!==o)if(a!==s-1&&2===o){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(2<i.length){var l=i.lastIndexOf("/");if(l!==i.length-1){r=-1===l?(i="",0):(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),a=s,o=0;continue}}else if(2===i.length||1===i.length){i="",a=s,o=r=0;continue}t&&(0<i.length?i+="/..":i="..",r=2)}else 0<i.length?i+="/"+e.slice(a+1,s):i=e.slice(a+1,s),r=s-a-1;a=s,o=0}else 46===n&&-1!==o?++o:o=-1}return i}var f={resolve:function(){for(var e,t="",n=!1,i=arguments.length-1;-1<=i&&!n;i--){var r=0<=i?arguments[i]:e=void 0===e?U.cwd():e;d(r),0!==r.length&&(t=r+"/"+t,n=47===r.charCodeAt(0))}return t=a(t,!n),n?0<t.length?"/"+t:"/":0<t.length?t:"."},normalize:function(e){var t,n;return d(e),0===e.length?".":(t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1),0<(e=0!==(e=a(e,!t)).length||t?e:".").length&&n&&(e+="/"),t?"/"+e:e)},isAbsolute:function(e){return d(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];d(n),0<n.length&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":f.normalize(e)},relative:function(e,t){if(d(e),d(t),e===t)return"";if((e=f.resolve(e))===(t=f.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var i=e.length,r=i-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var o=t.length-a,s=r<o?r:o,l=-1,u=0;u<=s;++u){if(u===s){if(s<o){if(47===t.charCodeAt(a+u))return t.slice(a+u+1);if(0===u)return t.slice(a+u)}else s<r&&(47===e.charCodeAt(n+u)?l=u:0===u&&(l=0));break}var c=e.charCodeAt(n+u);if(c!==t.charCodeAt(a+u))break;47===c&&(l=u)}for(var h="",u=n+l+1;u<=i;++u)u!==i&&47!==e.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return 0<h.length?h+t.slice(a+l):(47===t.charCodeAt(a+=l)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(d(e),0===e.length)return".";for(var t=47===e.charCodeAt(0),n=-1,i=!0,r=e.length-1;1<=r;--r)if(47===e.charCodeAt(r)){if(!i){n=r;break}}else i=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');d(e);var n=0,i=-1,r=!0;if(void 0!==t&&0<t.length&&t.length<=e.length){if(t.length===e.length&&t===e)return"";for(var a=t.length-1,o=-1,s=e.length-1;0<=s;--s){var l=e.charCodeAt(s);if(47===l){if(!r){n=s+1;break}}else-1===o&&(r=!1,o=s+1),0<=a&&(l===t.charCodeAt(a)?-1==--a&&(i=s):(a=-1,i=o))}return n===i?i=o:-1===i&&(i=e.length),e.slice(n,i)}for(s=e.length-1;0<=s;--s)if(47===e.charCodeAt(s)){if(!r){n=s+1;break}}else-1===i&&(r=!1,i=s+1);return-1===i?"":e.slice(n,i)},extname:function(e){d(e);for(var t=-1,n=0,i=-1,r=!0,a=0,o=e.length-1;0<=o;--o){var s=e.charCodeAt(o);if(47!==s)-1===i&&(r=!1,i=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1);else if(!r){n=o+1;break}}return-1===t||-1===i||0===a||1===a&&t===i-1&&t===n+1?"":e.slice(t,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+n:t+"/"+n:n;var t,n},parse:function(e){d(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0!==e.length){for(var n,i=47===e.charCodeAt(0),r=i?(t.root="/",1):0,a=-1,o=0,s=-1,l=!0,u=e.length-1,c=0;r<=u;--u)if(47!==(n=e.charCodeAt(u)))-1===s&&(l=!1,s=u+1),46===n?-1===a?a=u:1!==c&&(c=1):-1!==a&&(c=-1);else if(!l){o=u+1;break}-1===a||-1===s||0===c||1===c&&a===s-1&&a===o+1?-1!==s&&(t.base=t.name=0===o&&i?e.slice(1,s):e.slice(o,s)):(0===o&&i?(t.name=e.slice(1,a),t.base=e.slice(1,s)):(t.name=e.slice(o,a),t.base=e.slice(o,s)),t.ext=e.slice(a,s)),0<o?t.dir=e.slice(0,o-1):i&&(t.dir="/")}return t},sep:"/",delimiter:":",win32:null,posix:null};f.posix=f,e.exports=f},4385:function(e){"use strict";var s={};function t(e,i,t){t=t||Error;n=r=t,(a=o).prototype=Object.create(n.prototype),(a.prototype.constructor=a).__proto__=n;var r,n,a=o;function o(e,t,n){return r.call(this,"string"==typeof i?i:i(e,t,n))||this}a.prototype.name=t.name,a.prototype.code=e,s[e]=a}function l(e,t){var n;return Array.isArray(e)?(n=e.length,e=e.map(function(e){return String(e)}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}t("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(e,t,n){var i,r,a,o;return"string"==typeof t&&"not "===t.substr(0,4)?(i="must not be",t=t.replace(/^not /,"")):i="must be",a=e,(void 0===o||o>a.length)&&(o=a.length),(" argument"===a.substring(o-9,o)?"The ".concat(e," "):(a=(r="number"!=typeof r?0:r)+1>e.length||-1===e.indexOf(".",r)?"argument":"property",'The "'.concat(e,'" ').concat(a," "))).concat(i," ").concat(l(t,"type"))+". Received type ".concat(typeof n)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=s},5947:function(e,t,n){"use strict";var i=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},r=(e.exports=u,n(4857)),a=n(6745);n(7497)(u,r);for(var o=i(a.prototype),s=0;s<o.length;s++){var l=o[s];u.prototype[l]||(u.prototype[l]=a.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);r.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",c))}function c(){this._writableState.ended||U.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5639:function(e,t,n){"use strict";e.exports=r;var i=n(5773);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(7497)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},4857:function(e,N,r){"use strict";var i;(e.exports=A).ReadableState=E,r(7069).EventEmitter;function m(e,t){return e.listeners(t).length}var a,t,n,o=r(7254),h=r(5059).Buffer,d=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},e=r(5564),g=e&&e.debuglog?e.debuglog("stream"):function(){},s=r(6580),e=r(4005),l=r(5798).getHighWaterMark,u=r(4385).F,f=u.ERR_INVALID_ARG_TYPE,p=u.ERR_STREAM_PUSH_AFTER_EOF,c=u.ERR_METHOD_NOT_IMPLEMENTED,_=u.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y=(r(7497)(A,o),e.errorOrDestroy),v=["error","close","destroy","pause","resume"];function E(e,t,n){i=i||r(5947),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=l(this,e,"readableHighWaterMark",n),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(a=a||r(3952).I,this.decoder=new a(e.encoding),this.encoding=e.encoding)}function A(e){if(i=i||r(5947),!(this instanceof A))return new A(e);var t=this instanceof i;this._readableState=new E(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),o.call(this)}function b(e,t,n,i,r){g("readableAddChunk",t);var a,o,s,l,u,c=e._readableState;if(null===t)c.reading=!1,s=e,l=c,g("onEofChunk"),l.ended||(l.decoder&&(u=l.decoder.end())&&u.length&&(l.buffer.push(u),l.length+=l.objectMode?1:u.length),l.ended=!0,l.sync?w(s):(l.needReadable=!1,l.emittedReadable||(l.emittedReadable=!0,R(s))));else if(r||(u=c,s=l=t,a=o=h.isBuffer(s)||s instanceof d||"string"==typeof l||void 0===l||u.objectMode?o:new f("chunk",["string","Buffer","Uint8Array"],l)),a)y(e,a);else if(c.objectMode||t&&0<t.length)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===h.prototype||(r=t,t=h.from(r)),i)c.endEmitted?y(e,new _):T(e,c,t,!0);else if(c.ended)y(e,new p);else{if(c.destroyed)return!1;c.reading=!1,!c.decoder||n||(t=c.decoder.write(t),c.objectMode)||0!==t.length?T(e,c,t,!1):I(e,c)}else i||(c.reading=!1,I(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&w(e)),I(e,t)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),A.prototype.destroy=e.destroy,A.prototype._undestroy=e.undestroy,A.prototype._destroy=function(e,t){t(e)},A.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=h.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},A.prototype.unshift=function(e){return b(this,e,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(e){var t=new(a=a||r(3952).I)(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(1073741824<=(n=e)?n=1073741824:(n--,n=(n=(n=(n=(n|=n>>>1)|n>>>2)|n>>>4)|n>>>8)|n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function w(e){var t=e._readableState;g("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(g("emitReadable",t.flowing),t.emittedReadable=!0,U.nextTick(R,e))}function R(e){var t=e._readableState;g("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,k(e)}function I(e,t){t.readingMore||(t.readingMore=!0,U.nextTick(C,e,t))}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(g("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function P(e){g("readable nexttick read 0"),e.read(0)}function D(e,t){g("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(g("flow",t.flowing);t.flowing&&null!==e.read(););}function O(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function M(e){var t=e._readableState;g("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,U.nextTick(F,t,e))}function F(e,t){g("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy()}function x(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}A.prototype.read=function(e){g("read",e),e=parseInt(e,10);var t,n=this._readableState,i=e;return 0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:0<n.length)||n.ended)?(g("read: emitReadable",n.length,n.ended),(0===n.length&&n.ended?M:w)(this),null):0===(e=S(e,n))&&n.ended?(0===n.length&&M(this),null):(t=n.needReadable,g("need readable",t),(0===n.length||n.length-e<n.highWaterMark)&&g("length less than watermark",t=!0),n.ended||n.reading?g("reading or ended",t=!1):t&&(g("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=S(i,n))),null===(t=0<e?O(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),i!==e)&&n.ended&&M(this),null!==t&&this.emit("data",t),t)},A.prototype._read=function(e){y(this,new c("_read()"))},A.prototype.pipe=function(i,e){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=i;break;case 1:a.pipes=[a.pipes,i];break;default:a.pipes.push(i)}a.pipesCount+=1,g("pipe count=%d opts=%j",a.pipesCount,e);e=e&&!1===e.end||i===U.stdout||i===U.stderr?p:o;function o(){g("onend"),i.end()}a.endEmitted?U.nextTick(e):r.once("end",e),i.on("unpipe",function e(t,n){g("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,g("cleanup"),i.removeListener("close",d),i.removeListener("finish",f),i.removeListener("drain",l),i.removeListener("error",h),i.removeListener("unpipe",e),r.removeListener("end",o),r.removeListener("end",p),r.removeListener("data",c),u=!0,!a.awaitDrain||i._writableState&&!i._writableState.needDrain||l())});t=r;var t,n,s,l=function(){var e=t._readableState;g("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&m(t,"data")&&(e.flowing=!0,k(t))},u=(i.on("drain",l),!1);function c(e){g("ondata");e=i.write(e);g("dest.write",e),!1===e&&((1===a.pipesCount&&a.pipes===i||1<a.pipesCount&&-1!==x(a.pipes,i))&&!u&&(g("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function h(e){g("onerror",e),p(),i.removeListener("error",h),0===m(i,"error")&&y(i,e)}function d(){i.removeListener("finish",f),p()}function f(){g("onfinish"),i.removeListener("close",d),p()}function p(){g("unpipe"),r.unpipe(i)}return r.on("data",c),e="error",s=h,"function"==typeof(n=i).prependListener?n.prependListener(e,s):n._events&&n._events[e]?Array.isArray(n._events[e])?n._events[e].unshift(s):n._events[e]=[s,n._events[e]]:n.on(e,s),i.once("close",d),i.once("finish",f),i.emit("pipe",r),a.flowing||(g("pipe resume"),r.resume()),i},A.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n));else if(e){var i=x(t.pipes,e);-1!==i&&(t.pipes.splice(i,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n))}else{var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit("unpipe",this,{hasUnpiped:!1})}return this},A.prototype.addListener=A.prototype.on=function(e,t){var t=o.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=0<this.listenerCount("readable"),!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,g("on readable",n.length,n.reading),n.length?w(this):n.reading||U.nextTick(P,this)),t},A.prototype.removeListener=function(e,t){t=o.prototype.removeListener.call(this,e,t);return"readable"===e&&U.nextTick(L,this),t},A.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||U.nextTick(L,this),t},A.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(g("resume"),n.flowing=!n.readableListening,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,U.nextTick(D,e,t))),n.paused=!1,this},A.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(t){var e,n=this,i=this._readableState,r=!1;for(e in t.on("end",function(){var e;g("wrapped end"),i.decoder&&!i.ended&&(e=i.decoder.end())&&e.length&&n.push(e),n.push(null)}),t.on("data",function(e){g("wrapped data"),i.decoder&&(e=i.decoder.write(e)),i.objectMode&&null==e||(i.objectMode||e&&e.length)&&!n.push(e)&&(r=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<v.length;a++)t.on(v[a],this.emit.bind(this,v[a]));return this._read=function(e){g("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return(t=void 0===t?r(5232):t)(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),A._fromList=O,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(A.from=function(e,t){return(n=void 0===n?r(5686):n)(A,e,t)})},5773:function(e,t,n){"use strict";e.exports=l;var e=n(4385).F,i=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,a=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=e.ERR_TRANSFORM_WITH_LENGTH_0,s=n(5947);function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState,i=(n.transforming=!1,n.writecb);if(null===i)return this.emit("error",new r);n.writechunk=null,(n.writecb=null)!=t&&this.push(t),i(e),(n=this._readableState).reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",u)}function u(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(e,t){c(n,e,t)})}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;e.push(null)}n(7497)(l,s),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var i=this._transformState;i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming&&(n=this._readableState,i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},6745:function(e,t,n){"use strict";function c(r){var a=this;this.next=null,this.entry=null,this.finish=function(){var e=a,t=r,n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(void 0),n=n.next}t.corkedRequestsFree.next=e}}var i;(e.exports=T).WritableState=m;var r,e={deprecate:n(6667)},a=n(7254),g=n(5059).Buffer,_=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},o=n(4005),s=n(5798).getHighWaterMark,l=n(4385).F,y=l.ERR_INVALID_ARG_TYPE,u=l.ERR_METHOD_NOT_IMPLEMENTED,h=l.ERR_MULTIPLE_CALLBACK,d=l.ERR_STREAM_CANNOT_PIPE,f=l.ERR_STREAM_DESTROYED,v=l.ERR_STREAM_NULL_VALUES,E=l.ERR_STREAM_WRITE_AFTER_END,p=l.ERR_UNKNOWN_ENCODING,A=o.errorOrDestroy;function b(){}function m(e,u,t){i=i||n(5947),e=e||{},"boolean"!=typeof t&&(t=u instanceof i),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=s(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t,n,i,r,a=u,o=a._writableState,s=o.sync,l=o.writecb;if("function"!=typeof l)throw new h;(r=o).writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(r=a,n=s,e=e,i=l,--(t=o).pendingcb,n?(U.nextTick(i,e),U.nextTick(L,r,t),r._writableState.errorEmitted=!0,A(r,e)):(i(e),r._writableState.errorEmitted=!0,A(r,e),L(r,t))):((n=I(o)||a.destroyed)||o.corked||o.bufferProcessing||!o.bufferedRequest||R(a,o),s?U.nextTick(w,a,o,n,l):w(a,o,n,l))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function T(e){var t=this instanceof(i=i||n(5947));if(!t&&!r.call(T,this))return new T(e);this._writableState=new m(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),a.call(this)}function S(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new f("write")):n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function w(e,t,n,i){var r;n||(n=e,0===(r=t).length&&r.needDrain&&(r.needDrain=!1,n.emit("drain"))),t.pendingcb--,i(),L(e,t)}function R(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),i=t.corkedRequestsFree;i.entry=n;for(var a=0,o=!0;n;)(r[a]=n).isBuf||(o=!1),n=n.next,a+=1;r.allBuffers=o,S(e,t,!0,t.length,r,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new c(t),t.bufferedRequestCount=0}else{for(;n;){var s=n.chunk,l=n.encoding,u=n.callback;if(S(e,t,!1,t.objectMode?1:s.length,s,l,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(t,n){t._final(function(e){n.pendingcb--,e&&A(t,e),n.prefinished=!0,t.emit("prefinish"),L(t,n)})}function L(e,t){var n,i,r=I(t);return r&&(n=e,(i=t).prefinished||i.finalCalled||("function"!=typeof n._final||i.destroyed?(i.prefinished=!0,n.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,U.nextTick(C,n,i))),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)&&((!(n=e._readableState)||n.autoDestroy&&n.endEmitted)&&e.destroy()),r}n(7497)(T,a),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(m.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!r.call(this,e)||this===T&&e&&e._writableState instanceof m}})):r=function(e){return e instanceof this},T.prototype.pipe=function(){A(this,new d)},T.prototype.write=function(e,t,n){var i,r,a,o,s,l,u,c,h,d,f=this._writableState,p=!1,m=!f.objectMode&&(m=e,g.isBuffer(m)||m instanceof _);return m&&!g.isBuffer(e)&&(d=e,e=g.from(d)),"function"==typeof t&&(n=t,t=null),t=m?"buffer":t||f.defaultEncoding,"function"!=typeof n&&(n=b),f.ending?(d=this,c=n,h=new E,A(d,h),U.nextTick(c,h)):m||(c=this,h=f,l=n,null===(s=e)?u=new v:"string"==typeof s||h.objectMode||(u=new y("chunk",["string","Buffer"],s)),!u)?(f.pendingcb++,s=this,f=f,e=e,t=t,n=n,(i=m)||(o=e,a=t,o=f.objectMode||!1===f.decodeStrings||"string"!=typeof o?o:g.from(o,a),e!==o&&(i=!0,t="buffer",e=o)),a=f.objectMode?1:e.length,f.length+=a,(o=f.length<f.highWaterMark)||(f.needDrain=!0),f.writing||f.corked?(r=f.lastBufferedRequest,f.lastBufferedRequest={chunk:e,encoding:t,isBuf:i,callback:n,next:null},r?r.next=f.lastBufferedRequest:f.bufferedRequest=f.lastBufferedRequest,f.bufferedRequestCount+=1):S(s,f,!1,a,e,t,n),p=o):(A(c,u),U.nextTick(l,u)),p},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||R(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new p(e)},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,n){n(new u("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||(e=this,t=n,(n=i).ending=!0,L(e,n),t&&(n.finished?U.nextTick(t):e.once("finish",t)),n.ended=!0,e.writable=!1),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=o.destroy,T.prototype._undestroy=o.undestroy,T.prototype._destroy=function(e,t){t(e)}},5232:function(e,t,n){"use strict";var i;function r(e,t,n){var i;i=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),(t="symbol"==typeof i?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var a=n(9827),o=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t,n=e[o];null!==n&&null!==(t=e[d].read())&&(e[c]=null,e[o]=null,e[s]=null,n(f(t,!1)))}var n=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((r(i={get stream(){return this[d]},next:function(){var n=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise(function(e,t){U.nextTick(function(){n[l]?t(n[l]):e(f(void 0,!0))})});var t,i,r,e=this[c];if(e)t=new Promise((i=e,r=this,function(e,t){i.then(function(){r[u]?e(f(void 0,!0)):r[h](e,t)},t)}));else{e=this[d].read();if(null!==e)return Promise.resolve(f(e,!1));t=new Promise(this[h])}return this[c]=t}},Symbol.asyncIterator,function(){return this}),r(i,"return",function(){var e=this;return new Promise(function(t,n){e[d].destroy(null,function(e){e?n(e):t(f(void 0,!0))})})}),i),n);e.exports=function(e){var t,i=Object.create(m,(r(t={},d,{value:e,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,l,{value:null,writable:!0}),r(t,u,{value:e._readableState.endEmitted,writable:!0}),r(t,h,{value:function(e,t){var n=i[d].read();n?(i[c]=null,i[o]=null,i[s]=null,e(f(n,!1))):(i[o]=e,i[s]=t)},writable:!0}),t));return i[c]=null,a(e,function(e){var t;e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code?(null!==(t=i[s])&&(i[c]=null,i[o]=null,i[s]=null,t(e)),i[l]=e):(null!==(t=i[o])&&(i[c]=null,i[o]=null,t(f(void 0,!(i[s]=null)))),i[u]=!0)}),e.on("readable",function(e){U.nextTick(p,e)}.bind(null,i)),i}},6580:function(e,t,n){"use strict";function a(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function o(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach(function(e){var t,n;t=i,n=r[e=e],(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})}return i}function s(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}var l=n(5059).Buffer,u=n(6102).inspect,c=u&&u.custom||"inspect";e.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}for(var t=e,n=t.prototype,i=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,n,i=l.allocUnsafe(e>>>0),r=this.head,a=0;r;)t=r.data,n=a,l.prototype.copy.call(t,i,n),a+=r.data.length,r=r.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,a=e>r.length?r.length:e;if(a===r.length?i+=r:i+=r.slice(0,e),0==(e-=a)){a===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=r.slice(a);break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,a=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,a),0==(e-=a)){a===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=r.slice(a);break}++i}return this.length-=i,t}},{key:c,value:function(e,t){return u(this,o(o({},t),{},{depth:0,customInspect:!1}))}}],r=0;r<i.length;r++){var a=i[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,s(a.key),a)}return Object.defineProperty(t,"prototype",{writable:!1}),e}()},4005:function(e){"use strict";function a(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return i||r?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,U.nextTick(s,this,e)):U.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?U.nextTick(o,n):(n._writableState.errorEmitted=!0,U.nextTick(a,n,e)):U.nextTick(a,n,e):t?(U.nextTick(o,n),t(e)):U.nextTick(o,n)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},9827:function(e,t,n){"use strict";var g=n(4385).F.ERR_STREAM_PREMATURE_CLOSE;function _(){}e.exports=function e(t,n,i){var r,a,o,s,l,u,c,h,d,f,p,m;return"function"==typeof n?e(t,null,n):(r=i||_,a=!1,i=function(){if(!a){a=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(this,t)}},o=(n=n||{}).readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){u=!(s=!1),o||i.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){h=!(o=!1),s||i.call(t)},f=function(e){i.call(t,e)},p=function(){var e;return o&&!h?(t._readableState&&t._readableState.ended||(e=new g),i.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new g),i.call(t,e)):void 0},m=function(){t.req.on("finish",c)},t.setHeader&&"function"==typeof t.abort?(t.on("complete",c),t.on("abort",p),t.req?m():t.on("request",m)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",d),t.on("finish",c),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",d),t.removeListener("error",f),t.removeListener("close",p)})}},5686:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},8057:function(e,t,p){"use strict";var m,n=p(4385).F,i=n.ERR_MISSING_ARGS,g=n.ERR_STREAM_DESTROYED;function r(e){if(e)throw e}function _(e){e()}function a(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,c=new Array(e),t=0;t<e;t++)c[t]=arguments[t];var h,n,d=!(n=c).length||"function"!=typeof n[n.length-1]?r:n.pop();if((c=Array.isArray(c[0])?c[0]:c).length<2)throw new i("streams");var f=c.map(function(e,t){var n,i,r,a,o,s,l,u=t<c.length-1;return i=u,t=0<t,a=r=function(e){h=h||e,e&&f.forEach(_),u||(f.forEach(_),d(h))},o=!1,s=!(r=function(){o||(o=!0,a.apply(void 0,arguments))}),(n=e).on("close",function(){s=!0}),(m=void 0===m?p(9827):m)(n,{readable:i,writable:t},function(e){if(e)return r(e);s=!0,r()}),l=!1,function(e){if(!s&&!l)return l=!0,n.setHeader&&"function"==typeof n.abort?n.abort():"function"==typeof n.destroy?n.destroy():void r(e||new g("pipe"))}});return c.reduce(a)}},5798:function(e,t,n){"use strict";var r=n(4385).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){t=null!=t.highWaterMark?t.highWaterMark:i?t[n]:null;if(null==t)return e.objectMode?16:16384;if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new r(i?n:"highWaterMark",t);return Math.floor(t)}}},7254:function(e,t,n){e.exports=n(7069).EventEmitter},576:function(e,t,n){var i=n(5059),r=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),a(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=r(e);return void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},4468:function(p,e,n){var v=e;v.parser=function(e,t){return new o(e,t)},v.SAXParser=o,v.SAXStream=a,v.createStream=function(e,t){return new a(e,t)},v.MAX_BUFFER_LENGTH=65536;var i,E=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,t){if(!(this instanceof o))return new o(e,t);for(var n=this,i=n,r=0,a=E.length;r<a;r++)i[E[r]]="";n.q=n.c="",n.bufferCheckPosition=v.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=L.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(v.XML_ENTITIES):Object.create(v.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(m)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),d(n,"onready")}v.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}),o.prototype={end:function(){M(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return O(t,"Cannot write after close. Assign an onready handler.");if(null===e)return M(t);"object"==typeof e&&(e=e.toString());for(var n,i,r,a,o,s,l,u=0,c="";c=j(e,u++),t.c=c;)switch(t.trackPosition&&(t.position++,"\n"===c?(t.line++,t.column=0):t.column++),t.state){case L.BEGIN:if(t.state=L.BEGIN_WHITESPACE,"\ufeff"===c)continue;U(t,c);continue;case L.BEGIN_WHITESPACE:U(t,c);continue;case L.TEXT:if(t.sawRoot&&!t.closedRoot){for(var h=u-1;c&&"<"!==c&&"&"!==c;)(c=j(e,u++))&&t.trackPosition&&(t.position++,"\n"===c?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(h,u-1)}"<"!==c||t.sawRoot&&t.closedRoot&&!t.strict?(!C(S,c)||t.sawRoot&&!t.closedRoot||x(t,"Text data outside of root node."),"&"===c?t.state=L.TEXT_ENTITY:t.textNode+=c):(t.state=L.OPEN_WAKA,t.startTagPosition=t.position);continue;case L.SCRIPT:"<"===c?t.state=L.SCRIPT_ENDING:t.script+=c;continue;case L.SCRIPT_ENDING:"/"===c?t.state=L.CLOSE_TAG:(t.script+="<"+c,t.state=L.SCRIPT);continue;case L.OPEN_WAKA:"!"===c?(t.state=L.SGML_DECL,t.sgmlDecl=""):I(S,c)||(I(w,c)?(t.state=L.OPEN_TAG,t.tagName=c):"/"===c?(t.state=L.CLOSE_TAG,t.tagName=""):"?"===c?(t.state=L.PROC_INST,t.procInstName=t.procInstBody=""):(x(t,"Unencoded <"),t.startTagPosition+1<t.position&&(h=t.position-t.startTagPosition,c=new Array(h).join(" ")+c),t.textNode+="<"+c,t.state=L.TEXT));continue;case L.SGML_DECL:(t.sgmlDecl+c).toUpperCase()===T?(P(t,"onopencdata"),t.state=L.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+c==="--"?(t.state=L.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+c).toUpperCase()===G?(t.state=L.DOCTYPE,(t.doctype||t.sawRoot)&&x(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===c?(P(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=L.TEXT):(I(A,c)&&(t.state=L.SGML_DECL_QUOTED),t.sgmlDecl+=c);continue;case L.SGML_DECL_QUOTED:c===t.q&&(t.state=L.SGML_DECL,t.q=""),t.sgmlDecl+=c;continue;case L.DOCTYPE:">"===c?(t.state=L.TEXT,P(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=c,"["===c?t.state=L.DOCTYPE_DTD:I(A,c)&&(t.state=L.DOCTYPE_QUOTED,t.q=c));continue;case L.DOCTYPE_QUOTED:t.doctype+=c,c===t.q&&(t.q="",t.state=L.DOCTYPE);continue;case L.DOCTYPE_DTD:t.doctype+=c,"]"===c?t.state=L.DOCTYPE:I(A,c)&&(t.state=L.DOCTYPE_DTD_QUOTED,t.q=c);continue;case L.DOCTYPE_DTD_QUOTED:t.doctype+=c,c===t.q&&(t.state=L.DOCTYPE_DTD,t.q="");continue;case L.COMMENT:"-"===c?t.state=L.COMMENT_ENDING:t.comment+=c;continue;case L.COMMENT_ENDING:"-"===c?(t.state=L.COMMENT_ENDED,t.comment=k(t.opt,t.comment),t.comment&&P(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+c,t.state=L.COMMENT);continue;case L.COMMENT_ENDED:">"!==c?(x(t,"Malformed comment"),t.comment+="--"+c,t.state=L.COMMENT):t.state=L.TEXT;continue;case L.CDATA:"]"===c?t.state=L.CDATA_ENDING:t.cdata+=c;continue;case L.CDATA_ENDING:"]"===c?t.state=L.CDATA_ENDING_2:(t.cdata+="]"+c,t.state=L.CDATA);continue;case L.CDATA_ENDING_2:">"===c?(t.cdata&&P(t,"oncdata",t.cdata),P(t,"onclosecdata"),t.cdata="",t.state=L.TEXT):"]"===c?t.cdata+="]":(t.cdata+="]]"+c,t.state=L.CDATA);continue;case L.PROC_INST:"?"===c?t.state=L.PROC_INST_ENDING:I(S,c)?t.state=L.PROC_INST_BODY:t.procInstName+=c;continue;case L.PROC_INST_BODY:if(!t.procInstBody&&I(S,c))continue;"?"===c?t.state=L.PROC_INST_ENDING:t.procInstBody+=c;continue;case L.PROC_INST_ENDING:">"===c?(P(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=L.TEXT):(t.procInstBody+="?"+c,t.state=L.PROC_INST_BODY);continue;case L.OPEN_TAG:I(R,c)?t.tagName+=c:(l=s=void 0,(o=t).strict||(o.tagName=o.tagName[o.looseCase]()),s=o.tags[o.tags.length-1]||o,l=o.tag={name:o.tagName,attributes:{}},o.opt.xmlns&&(l.ns=s.ns),o.attribList.length=0,P(o,"onopentagstart",l),">"===c?F(t):"/"===c?t.state=L.OPEN_TAG_SLASH:(C(S,c)&&x(t,"Invalid character in tag name"),t.state=L.ATTRIB));continue;case L.OPEN_TAG_SLASH:">"===c?(F(t,!0),B(t)):(x(t,"Forward-slash in opening tag not followed by >"),t.state=L.ATTRIB);continue;case L.ATTRIB:if(I(S,c))continue;">"===c?F(t):"/"===c?t.state=L.OPEN_TAG_SLASH:I(w,c)?(t.attribName=c,t.attribValue="",t.state=L.ATTRIB_NAME):x(t,"Invalid attribute name");continue;case L.ATTRIB_NAME:"="===c?t.state=L.ATTRIB_VALUE:">"===c?(x(t,"Attribute without value"),t.attribValue=t.attribName,N(t),F(t)):I(S,c)?t.state=L.ATTRIB_NAME_SAW_WHITE:I(R,c)?t.attribName+=c:x(t,"Invalid attribute name");continue;case L.ATTRIB_NAME_SAW_WHITE:if("="===c)t.state=L.ATTRIB_VALUE;else{if(I(S,c))continue;x(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",P(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===c?F(t):I(w,c)?(t.attribName=c,t.state=L.ATTRIB_NAME):(x(t,"Invalid attribute name"),t.state=L.ATTRIB)}continue;case L.ATTRIB_VALUE:if(I(S,c))continue;I(A,c)?(t.q=c,t.state=L.ATTRIB_VALUE_QUOTED):(x(t,"Unquoted attribute value"),t.state=L.ATTRIB_VALUE_UNQUOTED,t.attribValue=c);continue;case L.ATTRIB_VALUE_QUOTED:if(c!==t.q){"&"===c?t.state=L.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=c;continue}N(t),t.q="",t.state=L.ATTRIB_VALUE_CLOSED;continue;case L.ATTRIB_VALUE_CLOSED:I(S,c)?t.state=L.ATTRIB:">"===c?F(t):"/"===c?t.state=L.OPEN_TAG_SLASH:I(w,c)?(x(t,"No whitespace between attributes"),t.attribName=c,t.attribValue="",t.state=L.ATTRIB_NAME):x(t,"Invalid attribute name");continue;case L.ATTRIB_VALUE_UNQUOTED:if(C(b,c)){"&"===c?t.state=L.ATTRIB_VALUE_ENTITY_U:t.attribValue+=c;continue}N(t),">"===c?F(t):t.state=L.ATTRIB;continue;case L.CLOSE_TAG:if(t.tagName)">"===c?B(t):I(R,c)?t.tagName+=c:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=L.SCRIPT):(C(S,c)&&x(t,"Invalid tagname in closing tag"),t.state=L.CLOSE_TAG_SAW_WHITE);else{if(I(S,c))continue;C(w,c)?t.script?(t.script+="</"+c,t.state=L.SCRIPT):x(t,"Invalid tagname in closing tag."):t.tagName=c}continue;case L.CLOSE_TAG_SAW_WHITE:if(I(S,c))continue;">"===c?B(t):x(t,"Invalid characters in closing tag");continue;case L.TEXT_ENTITY:case L.ATTRIB_VALUE_ENTITY_Q:case L.ATTRIB_VALUE_ENTITY_U:switch(t.state){case L.TEXT_ENTITY:n=L.TEXT,i="textNode";break;case L.ATTRIB_VALUE_ENTITY_Q:n=L.ATTRIB_VALUE_QUOTED,i="attribValue";break;case L.ATTRIB_VALUE_ENTITY_U:n=L.ATTRIB_VALUE_UNQUOTED,i="attribValue"}";"===c?(t[i]+=(a=l=o=s=void 0,o=(r=t).entity,l=o.toLowerCase(),a="",r.ENTITIES[o]||r.ENTITIES[l]||("#"===(o=l).charAt(0)&&(a="x"===o.charAt(1)?(o=o.slice(2),(s=parseInt(o,16)).toString(16)):(o=o.slice(1),(s=parseInt(o,10)).toString(10))),o=o.replace(/^0+/,""),a.toLowerCase()!==o?(x(r,"Invalid character entity"),"&"+r.entity+";"):String.fromCodePoint(s))),t.entity="",t.state=n):I(t.entity.length?H:V,c)?t.entity+=c:(x(t,"Invalid character in entity name"),t[i]+="&"+t.entity+c,t.entity="",t.state=n);continue;default:throw new Error(t,"Unknown state: "+t.state)}if(t.position>=t.bufferCheckPosition){for(var d=t,f=Math.max(v.MAX_BUFFER_LENGTH,10),p=0,m=0,g=E.length;m<g;m++){var _=d[E[m]].length;if(f<_)switch(E[m]){case"textNode":D(d);break;case"cdata":P(d,"oncdata",d.cdata),d.cdata="";break;case"script":P(d,"onscript",d.script),d.script="";break;default:O(d,"Max buffer length exceeded: "+E[m])}p=Math.max(p,_)}var y=v.MAX_BUFFER_LENGTH-p;d.bufferCheckPosition=y+d.position}return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){D(this),""!==this.cdata&&(P(this,"oncdata",this.cdata),this.cdata=""),""!==this.script&&(P(this,"onscript",this.script),this.script="")}};try{i=n(3947).Stream}catch(v){i=function(){}}var r=v.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function a(e,t){if(!(this instanceof a))return new a(e,t);i.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,r.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e)},enumerable:!0,configurable:!1})})}(a.prototype=Object.create(i.prototype,{constructor:{value:a}})).write=function(e){var t;return"function"==typeof g&&"function"==typeof g.isBuffer&&g.isBuffer(e)&&(this._decoder||(t=n(3952).I,this._decoder=new t("utf8")),e=this._decoder.write(e)),this._parser.write(e.toString()),this.emit("data",e),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===r.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),i.prototype.on.call(n,t,e)};var A="'\"",b=(S="\r\n\t ")+">",T="[CDATA[",G="DOCTYPE",s="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",m={xml:s,xmlns:l},S=t(S),w=(t("0124356789"),t("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,H=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function t(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function I(e,t){return"[object RegExp]"===Object.prototype.toString.call(e)?t.match(e):e[t]}function C(e,t){return!I(e,t)}var u,c,h,A=t(A),b=t(b),L=0;for(h in v.STATE={BEGIN:L++,BEGIN_WHITESPACE:L++,TEXT:L++,TEXT_ENTITY:L++,OPEN_WAKA:L++,SGML_DECL:L++,SGML_DECL_QUOTED:L++,DOCTYPE:L++,DOCTYPE_QUOTED:L++,DOCTYPE_DTD:L++,DOCTYPE_DTD_QUOTED:L++,COMMENT_STARTING:L++,COMMENT:L++,COMMENT_ENDING:L++,COMMENT_ENDED:L++,CDATA:L++,CDATA_ENDING:L++,CDATA_ENDING_2:L++,PROC_INST:L++,PROC_INST_BODY:L++,PROC_INST_ENDING:L++,OPEN_TAG:L++,OPEN_TAG_SLASH:L++,ATTRIB:L++,ATTRIB_NAME:L++,ATTRIB_NAME_SAW_WHITE:L++,ATTRIB_VALUE:L++,ATTRIB_VALUE_QUOTED:L++,ATTRIB_VALUE_CLOSED:L++,ATTRIB_VALUE_UNQUOTED:L++,ATTRIB_VALUE_ENTITY_Q:L++,ATTRIB_VALUE_ENTITY_U:L++,CLOSE_TAG:L++,CLOSE_TAG_SAW_WHITE:L++,SCRIPT:L++,SCRIPT_ENDING:L++},v.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},v.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(v.ENTITIES).forEach(function(e){var t=v.ENTITIES[e],t="number"==typeof t?String.fromCharCode(t):t;v.ENTITIES[e]=t}),v.STATE)v.STATE[v.STATE[h]]=h;function d(e,t,n){e[t]&&e[t](n)}function P(e,t,n){e.textNode&&D(e),d(e,t,n)}function D(e){e.textNode=k(e.opt,e.textNode),e.textNode&&d(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),t=e.normalize?t.replace(/\s+/g," "):t}function O(e,t){return D(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,d(e,"onerror",t),e}function M(e){return e.sawRoot&&!e.closedRoot&&x(e,"Unclosed root tag"),e.state!==L.BEGIN&&e.state!==L.BEGIN_WHITESPACE&&e.state!==L.TEXT&&O(e,"Unexpected end"),D(e),e.c="",e.closed=!0,d(e,"onend"),o.call(e,e.strict,e.opt),e}function x(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&O(e,t)}function f(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],n=n[1];return t&&"xmlns"===e&&(i="xmlns",n=""),{prefix:i,local:n}}function N(e){var t,n,i;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(n=(t=f(e.attribName,!0)).prefix,t=t.local,"xmlns"===n&&("xml"===t&&e.attribValue!==s?x(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue):"xmlns"===t&&e.attribValue!==l?x(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue):(n=e.tag,i=e.tags[e.tags.length-1]||e,n.ns===i.ns&&(n.ns=Object.create(i.ns)),n.ns[t]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,P(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue=""}function F(t,e){if(t.opt.xmlns){var n=t.tag,i=f(t.tagName),i=(n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(x(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=i.prefix),t.tags[t.tags.length-1]||t);n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){P(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var r=0,a=t.attribList.length;r<a;r++){var o=t.attribList[r],s=o[0],o=o[1],l=f(s,!0),u=l.prefix,l=l.local,c=""!==u&&n.ns[u]||"",o={name:s,value:o,prefix:u,local:l,uri:c};u&&"xmlns"!==u&&!c&&(x(t,"Unbound namespace prefix: "+JSON.stringify(u)),o.uri=u),t.tag.attributes[s]=o,P(t,"onattribute",o)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),P(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=L.TEXT:t.state=L.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function B(n){if(!n.tagName)return x(n,"Weird empty close tag."),n.textNode+="</>",n.state=L.TEXT;if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",n.state=L.SCRIPT;P(n,"onscript",n.script),n.script=""}for(var e=n.tags.length,t=n.tagName,i=t=n.strict?t:t[n.looseCase]();e--&&n.tags[e].name!==i;)x(n,"Unexpected close tag");if(e<0)return x(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",n.state=L.TEXT;n.tagName=t;for(var r=n.tags.length;r-- >e;){var a,o=n.tag=n.tags.pop();n.tagName=n.tag.name,P(n,"onclosetag",n.tagName);for(a in o.ns)a,o.ns[a];var s=n.tags[n.tags.length-1]||n;n.opt.xmlns&&o.ns!==s.ns&&Object.keys(o.ns).forEach(function(e){var t=o.ns[e];P(n,"onclosenamespace",{prefix:e,uri:t})})}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=L.TEXT}function U(e,t){"<"===t?(e.state=L.OPEN_WAKA,e.startTagPosition=e.position):C(S,t)&&(x(e,"Non-whitespace before first tag."),e.textNode=t,e.state=L.TEXT)}function j(e,t){var n="";return n=t<e.length?e.charAt(t):n}L=v.STATE,String.fromCodePoint||(u=String.fromCharCode,c=Math.floor,e=function(){var e,t=[],n=-1,i=arguments.length;if(!i)return"";for(var r="";++n<i;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||1114111<a||c(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?t.push(a):(e=55296+((a-=65536)>>10),t.push(e,a%1024+56320)),(n+1===i||16384<t.length)&&(r+=u.apply(null,t),t.length=0)}return r},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:e,configurable:!0,writable:!0}):String.fromCodePoint=e)},3947:function(e,t,n){e.exports=i;var c=n(7069).EventEmitter;function i(){c.call(this)}n(7497)(i,c),i.Readable=n(4857),i.Writable=n(6745),i.Duplex=n(5947),i.Transform=n(5773),i.PassThrough=n(5639),i.finished=n(9827),i.pipeline=n(8057),(i.Stream=i).prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",r),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(u(),0===c.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),t.removeListener("drain",r),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),t.removeListener("close",u)}return n.on("error",l),t.on("error",l),n.on("end",u),n.on("close",u),t.on("close",u),t.emit("pipe",n),t}},3952:function(e,t,n){"use strict";var i=n(576).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||i.isEncoding!==r&&r(e))return t||e;throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t,n=this.lastTotal-this.lastNeed,i=(t=this,128!=(192&(i=e)[0])?(t.lastNeed=0,"�"):1<t.lastNeed&&1<i.length?128!=(192&i[1])?(t.lastNeed=1,"�"):2<t.lastNeed&&2<i.length&&128!=(192&i[2])?(t.lastNeed=2,"�"):void 0:void 0);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var n=t.charCodeAt(t.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function c(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}(t.I=a).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"�":e},a.prototype.text=function(e,t){n=this,a=t;var n,i,r,a=(r=(o=e).length-1)<a?0:0<=(i=s(o[r]))?(0<i&&(n.lastNeed=i-1),i):--r<a||-2===i?0:0<=(i=s(o[r]))?(0<i&&(n.lastNeed=i-2),i):!(--r<a||-2===i)&&0<=(i=s(o[r]))?(0<i&&(2===i?i=0:n.lastNeed=i-3),i):0;if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=a;var o=e.length-(a-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},8450:function(V,H,Y){var z;!function(s,h){"use strict";function e(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t}function N(e,t){return typeof e===m&&-1!==M(t).indexOf(M(e))}function l(e,t){if(typeof e===m)return e=e.replace(/^\s\s*/,""),typeof t==f?e:e.substring(0,500)}function u(e,t){for(var n,i,r,a,o,s=0;s<t.length&&!a;){for(var l=t[s],u=t[s+1],c=n=0;c<l.length&&!a&&l[c];)if(a=l[c++].exec(e))for(i=0;i<u.length;i++)o=a[++n],typeof(r=u[i])===p&&0<r.length?2===r.length?typeof r[1]==d?this[r[0]]=r[1].call(this,o):this[r[0]]=r[1]:3===r.length?typeof r[1]!==d||r[1].exec&&r[1].test?this[r[0]]=o?o.replace(r[1],r[2]):h:this[r[0]]=o?r[1].call(this,o,r[2]):h:4===r.length&&(this[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):h):this[r]=o||h;s+=2}}function t(e,t){for(var n in t)if(typeof t[n]===p&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(N(t[n][i],e))return"?"===n?h:n}else if(N(t[n],e))return"?"===n?h:n;return e}function c(e,t){var n,i,r,a,o;return typeof e===p&&(t=e,e=h),this instanceof c?(n=typeof s!=f&&s.navigator?s.navigator:h,i=e||(n&&n.userAgent?n.userAgent:""),r=n&&n.userAgentData?n.userAgentData:h,a=t?function(e,t){var n,i={};for(n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(G,t):G,o=n&&n.userAgent==i,this.getBrowser=function(){var e,t={};return t.name=h,t[y]=h,u.call(t,i,a.browser),t.major=typeof(e=t[y])===m?e.replace(/[^\d\.]/g,"").split(".")[0]:h,o&&n&&n.brave&&typeof n.brave.isBrave==d&&(t.name="Brave"),t},this.getCPU=function(){var e={};return e[v]=h,u.call(e,i,a.cpu),e},this.getDevice=function(){var e={};return e[_]=h,e[g]=h,e.type=h,u.call(e,i,a.device),o&&!e.type&&r&&r.mobile&&(e.type=E),o&&"Macintosh"==e[g]&&n&&typeof n.standalone!=f&&n.maxTouchPoints&&2<n.maxTouchPoints&&(e[g]="iPad",e.type=A),e},this.getEngine=function(){var e={};return e.name=h,e[y]=h,u.call(e,i,a.engine),e},this.getOS=function(){var e={};return e.name=h,e[y]=h,u.call(e,i,a.os),o&&!e.name&&r&&"Unknown"!=r.platform&&(e.name=r.platform.replace(/chrome os/i,U).replace(/macos/i,"Mac OS")),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===m&&500<e.length?l(e,500):e,this},this.setUA(i),this):new c(e,t).getResult()}var i,d="function",f="undefined",p="object",m="string",g="model",n="name",r="type",_="vendor",y="version",v="architecture",a="console",E="mobile",A="tablet",o="smarttv",b="wearable",T="embedded",S="Amazon",w="Apple",F="BlackBerry",R="Browser",I="Chrome",C="Firefox",L="Google",P="Microsoft",D="Opera",k="Samsung",O="Sony",B="Xiaomi",U="Chromium OS",M=function(e){return e.toLowerCase()},j={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[n,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[n,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[n,y],[/opios[\/ ]+([\w\.]+)/i],[y,[n,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[n,D]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[y,[n,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[n,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[n,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[y,[n,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[n,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[n,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[y,[n,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[y,[n,"Smart Lenovo "+R]],[/(avast|avg)\/([\w\.]+)/i],[[n,/(.+)/,"$1 Secure "+R],y],[/\bfocus\/([\w\.]+)/i],[y,[n,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[n,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[n,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[n,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[n,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[n,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[y,[n,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[n,"360 "+R]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[n,/(.+)/,"$1 "+R],y],[/samsungbrowser\/([\w\.]+)/i],[y,[n,k+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[n,/_/g," "],y],[/metasr[\/ ]?([\d\.]+)/i],[y,[n,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[n,"Sogou Mobile"],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[n,y],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[n],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[n,"Facebook"],y],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[n,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[n,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[y,[n,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[n,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[n,I+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[n,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[n,y],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[y,[n,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[y,n],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[n,[y,t,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[n,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[n,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[n,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[n,y],[/(cobalt)\/([\w\.]+)/i],[n,[y,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,M]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",M]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,M]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[_,k],[r,A]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[g,[_,k],[r,E]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[g,[_,w],[r,E]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[_,w],[r,A]],[/(macintosh);/i],[g,[_,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[_,"Sharp"],[r,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[_,"Huawei"],[r,A]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[g,[_,"Huawei"],[r,E]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[g,/_/g," "],[_,B],[r,E]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[_,B],[r,A]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[_,"OPPO"],[r,E]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[_,"Vivo"],[r,E]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[g,[_,"Realme"],[r,E]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[_,"Motorola"],[r,E]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[_,"Motorola"],[r,A]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[_,"LG"],[r,A]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[_,"LG"],[r,E]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[_,"Lenovo"],[r,A]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[_,"Nokia"],[r,E]],[/(pixel c)\b/i],[g,[_,L],[r,A]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[_,L],[r,E]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[_,O],[r,E]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[_,O],[r,A]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[_,"OnePlus"],[r,E]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[_,S],[r,A]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[_,S],[r,E]],[/(playbook);[-\w\),; ]+(rim)/i],[g,_,[r,A]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[_,F],[r,E]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[_,"ASUS"],[r,A]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[_,"ASUS"],[r,E]],[/(nexus 9)/i],[g,[_,"HTC"],[r,A]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[g,/_/g," "],[r,E]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[_,"Acer"],[r,A]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[_,"Meizu"],[r,E]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[g,[_,"Ulefone"],[r,E]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,g,[r,E]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,g,[r,A]],[/(surface duo)/i],[g,[_,P],[r,A]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[_,"Fairphone"],[r,E]],[/(u304aa)/i],[g,[_,"AT&T"],[r,E]],[/\bsie-(\w*)/i],[g,[_,"Siemens"],[r,E]],[/\b(rct\w+) b/i],[g,[_,"RCA"],[r,A]],[/\b(venue[\d ]{2,7}) b/i],[g,[_,"Dell"],[r,A]],[/\b(q(?:mv|ta)\w+) b/i],[g,[_,"Verizon"],[r,A]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[_,"Barnes & Noble"],[r,A]],[/\b(tm\d{3}\w+) b/i],[g,[_,"NuVision"],[r,A]],[/\b(k88) b/i],[g,[_,"ZTE"],[r,A]],[/\b(nx\d{3}j) b/i],[g,[_,"ZTE"],[r,E]],[/\b(gen\d{3}) b.+49h/i],[g,[_,"Swiss"],[r,E]],[/\b(zur\d{3}) b/i],[g,[_,"Swiss"],[r,A]],[/\b((zeki)?tb.*\b) b/i],[g,[_,"Zeki"],[r,A]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],g,[r,A]],[/\b(ns-?\w{0,9}) b/i],[g,[_,"Insignia"],[r,A]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[_,"NextBook"],[r,A]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],g,[r,E]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],g,[r,E]],[/\b(ph-1) /i],[g,[_,"Essential"],[r,E]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[_,"Envizen"],[r,A]],[/\b(trio[-\w\. ]+) b/i],[g,[_,"MachSpeed"],[r,A]],[/\btu_(1491) b/i],[g,[_,"Rotor"],[r,A]],[/(shield[\w ]+) b/i],[g,[_,"Nvidia"],[r,A]],[/(sprint) (\w+)/i],[_,g,[r,E]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[_,P],[r,E]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[_,"Zebra"],[r,A]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[_,"Zebra"],[r,E]],[/smart-tv.+(samsung)/i],[_,[r,o]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[_,k],[r,o]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,"LG"],[r,o]],[/(apple) ?tv/i],[_,[g,w+" TV"],[r,o]],[/crkey/i],[[g,I+"cast"],[_,L],[r,o]],[/droid.+aft(\w+)( bui|\))/i],[g,[_,S],[r,o]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[g,[_,"Sharp"],[r,o]],[/(bravia[\w ]+)( bui|\))/i],[g,[_,O],[r,o]],[/(mitv-\w{5}) bui/i],[g,[_,B],[r,o]],[/Hbbtv.*(technisat) (.*);/i],[_,g,[r,o]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,l],[g,l],[r,o]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[r,o]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,g,[r,a]],[/droid.+; (shield) bui/i],[g,[_,"Nvidia"],[r,a]],[/(playstation [345portablevi]+)/i],[g,[_,O],[r,a]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[_,P],[r,a]],[/((pebble))app/i],[_,g,[r,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[g,[_,w],[r,b]],[/droid.+; (glass) \d/i],[g,[_,L],[r,b]],[/droid.+; (wt63?0{2,3})\)/i],[g,[_,"Zebra"],[r,b]],[/(quest( 2| pro)?)/i],[g,[_,"Facebook"],[r,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[r,T]],[/(aeobc)\b/i],[g,[_,S],[r,T]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[g,[r,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[r,A]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[r,A]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[r,E]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[n,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[n,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[n,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,n]],os:[[/microsoft (windows) (vista|xp)/i],[n,y],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[n,[y,t,j]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,t,j],[n,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[n,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[n,"Mac OS"],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[y,n],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[n,y],[/\(bb(10);/i],[y,[n,F]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[n,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[n,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[n,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[y,[n,"watchOS"]],[/crkey\/([\d\.]+)/i],[y,[n,I+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[n,U],y],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[n,y],[/(sunos) ?([\w\.\d]*)/i],[[n,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[n,y]]},x=(c.VERSION="1.0.37",c.BROWSER=e([n,y,"major"]),c.CPU=e([v]),c.DEVICE=e([g,_,r,a,E,o,A,b,T]),c.ENGINE=c.OS=e([n,y]),typeof H!=f?(H=V.exports?V.exports=c:H).UAParser=c:Y.amdO?(z=function(){return c}.call(H,Y,H,V))!==h&&(V.exports=z):typeof s!=f&&(s.UAParser=c),typeof s!=f&&(s.jQuery||s.Zepto));x&&!x.ua&&(i=new c,x.ua=i.getResult(),x.ua.get=function(){return i.getUA()},x.ua.set=function(e){i.setUA(e);var t,n=i.getResult();for(t in n)x.ua[t]=n[t]})}("object"==typeof window?window:this)},6667:function(e,t,n){function i(e){try{if(!n.g.localStorage)return}catch(e){return}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){var n;return i("noDeprecation")?e:(n=!1,function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation"),n=!0}return e.apply(this,arguments)})}},6102:function(){},5564:function(){},6535:function(e){"use strict";e.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},2940:function(e){"use strict";e.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},7281:function(e){"use strict";e.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},8850:function(e){"use strict";e.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},900:function(e){"use strict";e.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},7031:function(e){"use strict";e.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},i={},d.amdO={},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,{a:t}),t},d.d=function(e,t){for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f={},function(){"use strict";d.d(f,{default:function(){return h}}),d(2540);var e,r,u,t=d(7928),n=d(9138),i=d(3260),a=d(6379),o=(u="application/dash+xml",{create:c,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var i=(t=t||document).querySelectorAll(e),r=0;r<i.length;r++){var a=c(i[r],null);n.push(a)}for(var o=t.querySelectorAll('source[type="'+u+'"]'),s=0;s<o.length;s++){var l=c(function e(t){return/^VIDEO$/i.test(t.nodeName)?t:e(t.parentNode)}(o[s]),null);n.push(l)}return n}});function c(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var i=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==u})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return(n=(0,a.A)(n=n||{}).create()).initialize(e,t.src,e.autoplay),(r=r||n.getDebug().getLogger()).debug("Converted "+i+" to dash.js player and added content: "+t.src),e._dashjs_player=n}"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?o.createAll():e=window.setInterval(function(){window.dashjs&&(window.clearInterval(e),o.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),o.createAll()}));var s=o,l=d(9378),h=(dashjs.Protection=i.default,dashjs.MetricsReporting=n.default,dashjs.MediaPlayerFactory=s,dashjs.Debug=l.A,dashjs.supportsMediaSource=t.a,dashjs)}(),f.default)}.call(this,n(74),n(172).Buffer)},function(e,k,O){"use strict";!function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var S=O(173),a=O(174),s=O(175);function n(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=h.prototype:(e=null===e?new h(t):e).length=t,e}function h(e,t,n){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(e,t,n);if("number"!=typeof e)return i(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return o(this,e)}function i(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var r=e,a=t,o=n;if(a.byteLength,o<0||a.byteLength<o)throw new RangeError("'offset' is out of bounds");if(a.byteLength<o+(i||0))throw new RangeError("'length' is out of bounds");return a=void 0===o&&void 0===i?new Uint8Array(a):void 0===i?new Uint8Array(a,o):new Uint8Array(a,o,i),h.TYPED_ARRAY_SUPPORT?(r=a).__proto__=h.prototype:r=u(r,a),r}if("string"!=typeof t){o=e,i=t;if(h.isBuffer(i))return a=0|c(i.length),0!==(o=l(o,a)).length&&i.copy(o,0,0,a),o;if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||function(e){return e!=e}(i.length)?l(o,0):u(o,i);if("Buffer"===i.type&&s(i.data))return u(o,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}r=e,i=t,e=n;if(h.isEncoding(e="string"==typeof e&&""!==e?e:"utf8"))return t=0|d(i,e),r=(i=(r=l(r,t)).write(i,e))!==t?r.slice(0,i):r;throw new TypeError('"encoding" must be a valid string encoding')}function r(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function o(e,t){if(r(t),e=l(e,t<0?0:0|c(t)),!h.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t){var n=t.length<0?0:0|c(t.length);e=l(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function c(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function d(e,t){if(h.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(i)return L(e).length;t=(""+t).toLowerCase(),i=!0}}function t(e,t,n){var i,r=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=this,o=t,s=n,l=a.length;(!s||s<0||l<s)&&(s=l);for(var u="",c=o=!o||o<0?0:o;c<s;++c)u+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(a[c]);return u;case"utf8":case"utf-8":return w(this,t,n);case"ascii":var h=this,l=t,d=n,f="";d=Math.min(h.length,d);for(var p=l;p<d;++p)f+=String.fromCharCode(127&h[p]);return f;case"latin1":case"binary":var m=this,o=t,g=n,_="";g=Math.min(m.length,g);for(var y=o;y<g;++y)_+=String.fromCharCode(m[y]);return _;case"base64":return v=this,i=n,0===(E=t)&&i===v.length?S.fromByteArray(v):S.fromByteArray(v.slice(E,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,E=n,A=this.slice(v,E),b="",T=0;T<A.length;T+=2)b+=String.fromCharCode(A[T]+256*A[T+1]);return b;default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function f(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function p(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?r?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=h.from(t,i)),h.isBuffer(t))return 0===t.length?-1:m(e,t,n,i,r);if("number"==typeof t)return t&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(r?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):m(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,i,r){var a=1,o=e.length,s=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r)for(var u=-1,c=n;c<o;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*a}else-1!==u&&(c-=c-u),u=-1;else for(c=n=o<n+s?o-s:n;0<=c;c--){for(var h=!0,d=0;d<s;d++)if(l(e,c+d)!==l(t,d)){h=!1;break}if(h)return c}return-1}function g(e,t,n,i){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function _(e,t,n,i){return D(function(e,t){for(var n,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r.push(n%256),r.push(i);return r}(t,e.length-n),e,n,i)}function w(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,l,u=e[r],c=null,h=239<u?4:223<u?3:191<u?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[r+1]))&&127<(l=(31&u)<<6|63&a)&&(c=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(i.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}var d=i,f=d.length;if(f<=y)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=y));return p}k.Buffer=h,k.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},k.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),k.kMaxLength=n(),h.poolSize=8192,h._augment=function(e){return e.__proto__=h.prototype,e},h.from=function(e,t,n){return i(null,e,t,n)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0}),h.alloc=function(e,t,n){return i=null,t=t,n=n,r(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?l(i,e).fill(t,n):l(i,e).fill(t):l(i,e);var i},h.allocUnsafe=function(e){return o(null,e)},h.allocUnsafeSlow=function(e){return o(null,e)},h.isBuffer=function(e){return!(null==e||!e._isBuffer)},h.compare=function(e,t){if(!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;for(var n=h.allocUnsafe(t),i=0,r=0;r<e.length;++r){var a=e[r];if(!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},h.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?w(this,0,e):t.apply(this,arguments)},h.prototype.equals=function(e){if(h.isBuffer(e))return this===e||0===h.compare(this,e);throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var e="",t=k.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t)&&(e+=" ... "),"<Buffer "+e+">"},h.prototype.compare=function(e,t,n,i,r){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),(t=void 0===t?0:t)<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=t)return 0;if(r<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(i,r),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){a=l[c],o=u[c];break}return a<o?-1:o<a?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},h.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||r<n)&&(n=r),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var a,o,s,l=!1;;)switch(i){case"hex":var u=this,c=e,h=t,d=n,f=(h=Number(h)||0,u.length-h);if((!d||f<(d=Number(d)))&&(d=f),(f=c.length)%2!=0)throw new TypeError("Invalid hex string");f/2<d&&(d=f/2);for(var p=0;p<d;++p){var m=parseInt(c.substr(2*p,2),16);if(isNaN(m))return p;u[h+p]=m}return p;case"utf8":case"utf-8":return f=t,s=n,D(L(e,(o=this).length-f),o,f,s);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return g(this,e,t,n);case"base64":return o=this,s=t,a=n,D(P(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function v(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,i,r,a){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function A(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function b(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function T(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,i,r){return r||T(e,0,n,4),a.write(e,t,n,i,23,4),n+4}function I(e,t,n,i,r){return r||T(e,0,n,8),a.write(e,t,n,i,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),h.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=h.prototype;else for(var i=t-e,r=new h(i,void 0),a=0;a<i;++a)r[a]=this[a+e];return r},h.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||v(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},h.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||v(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},h.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||v(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*t)),i},h.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||v(e,t,this.length);for(var i=t,r=1,a=this[e+--i];0<i&&(r*=256);)a+=this[e+--i]*r;return(r*=128)<=a&&(a-=Math.pow(2,8*t)),a},h.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),a.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),a.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),a.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),a.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||E(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},h.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||E(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=e/a&255;return t+n},h.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,255,0),h.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):b(this,e,t,!0),t+4},h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):b(this,e,t,!1),t+4},h.prototype.writeIntLE=function(e,t,n,i){e=+e,t|=0,i||E(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=0,a=1,o=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},h.prototype.writeIntBE=function(e,t,n,i){e=+e,t|=0,i||E(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=n-1,a=1,o=0;for(this[t+r]=255&e;0<=--r&&(a*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,127,-128),h.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):b(this,e,t,!0),t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),h.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):b(this,e,t,!1),t+4},h.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,i){if(n=n||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),(i=0<i&&i<n?n:i)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var r,a=(i=e.length-t<i-n?e.length-t+n:i)-n;if(this===e&&n<t&&t<i)for(r=a-1;0<=r;--r)e[r+t]=this[r+n];else if(a<1e3||!h.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},h.prototype.fill=function(e,t,n,i){if("string"==typeof e){var r;if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length&&(r=e.charCodeAt(0))<256&&(e=r),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(s=t;s<n;++s)this[s]=e;else for(var a=h.isBuffer(e)?e:L(new h(e,i).toString()),o=a.length,s=0;s<n-t;++s)this[s+t]=a[s%o];return this};var C=/[^+\/0-9A-Za-z-_]/g;function L(e,t){t=t||1/0;for(var n,i=e.length,r=null,a=[],o=0;o<i;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===i){-1<(t-=3)&&a.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function P(e){return S.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}.call(this,O(27))},function(e,t,n){"use strict";t.byteLength=function(e){var e=c(e),t=e[0],e=e[1];return 3*(t+e)/4-e},t.toByteArray=function(e){var t,n,i=c(e),r=i[0],i=i[1],a=new u(function(e,t){return 3*(e+t)/4-t}(r,i)),o=0,s=0<i?r-4:r;for(n=0;n<s;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;2===i&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,a[o++]=255&t);1===i&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t);return a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r=[],a=0,o=n-i;a<o;a+=16383)r.push(function(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(i));return r.join("")}(e,a,o<a+16383?o:a+16383));1==i?(t=e[n-1],r.push(s[t>>2]+s[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],r.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return r.join("")};for(var s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)s[r]=i[r],l[i.charCodeAt(r)]=r;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1,r=e[t+h];for(h+=d,a=r&(1<<-c)-1,r>>=-c,c+=s;0<c;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;0<c;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(r?-1:1);o+=Math.pow(2,i),a-=u}return(r?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,l=8*a-r-1,u=(1<<l)-1,c=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,f=i?1:-1,a=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-o))<1&&(o--,i*=2),2<=(t+=1<=o+c?h/i:h*Math.pow(2,1-c))*i&&(o++,i/=2),u<=o+c?(s=0,o=u):1<=o+c?(s=(t*i-1)*Math.pow(2,r),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));8<=r;e[n+d]=255&s,d+=f,s/=256,r-=8);for(o=o<<r|s,l+=r;0<l;e[n+d]=255&o,d+=f,o/=256,l-=8);e[n+d-f]|=128*a}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){t.AACDecoder=class{constructor(e){this.sampleRate=e.sampleRate,this.frameDurMs=Math.floor(1024e3/this.sampleRate),this.frameDurSec=this.frameDurMs/1e3}updateConfig(e){this.sampleRate=e.sampleRate,this.frameDurMs=1024e3/this.sampleRate,this.frameDurSec=this.frameDurMs/1e3}_getPktLen(e,t,n){return((3&e)<<11)+(t<<3)+((224&n)>>5)}sliceAACFrames(e,t){var n,i,r,a=[];let o=e;for(let e=0;e<t.length-1;)255==t[e]&&t[e+1]>>4==15?(n=this._getPktLen(t[e+3],t[e+4],t[e+5]))<=0||(i=t.subarray(e,e+n),(r=new Uint8Array(n)).set(i,0),a.push({ptime:o,data:r}),o+=this.frameDurSec,e+=n):e+=1;return a}}},function(e,t){e.exports={DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNEL:1,H264AUD:[0,0,0,1,9,224],H265AUD:[0,0,0,1,70,1,80],DEF_AAC:"aac",DEF_MP3:"mp3",DEF_H265:"h265",DEF_HEVC:"hevc",DEF_H264:"h264",DEF_AVC:"avc",CODEC_OFFSET_TABLE:["hevc","h265","avc","h264","aac","mp3"]}},function(e,t,n){const i=n(179),g=n(103),_=n(76),r=n(30),y=n(5),o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12,Reserved:13,"frequency is written explictly":15};function a(){this.listeners={},this.onSamplesCallback=null,this.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e]=this.listeners[e].concat(t)},this.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(),this.listeners[e].splice(t,1),-1<t)},this.trigger=function(e){var t,n,i,r=this.listeners[e];if(r)if(2===arguments.length)for(n=r.length,t=0;t<n;++t)r[t].call(this,arguments[1]);else{for(i=[],t=arguments.length,t=1;t<arguments.length;++t)i.push(arguments[t]);for(n=r.length,t=0;t<n;++t)r[t].apply(this,i)}},this.dispose=function(){this.listeners={}}}a.prototype.setStartCode=function(t,e=!1){let n=null;if(e){let e=0;if(!(0==t[e]&&0==t[e+1]&&0==t[e+2]&&1==t[e+3]))for(var i=t.length-1;e<i;)nalSize=(r=e,t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),t[e]=0,t[e+1]=0,t[e+2]=0,t[e+3]=1,e=(e+=4)+nalSize;n=t}else(n=new Uint8Array(g.DEFINE_STARTCODE.length+t.length)).set(g.DEFINE_STARTCODE,0),n.set(t,g.DEFINE_STARTCODE.length);var r;return n},a.prototype.setAACAdts=function(e){var t=null,n=this.aacProfile,i=o[this.sampleRate],r=new Uint8Array(7),a=r.length+e.length;return r[0]=255,r[1]=241,r[2]=(n-1<<6)+(i<<2),r[3]=128+(a>>11),r[4]=(2047&a)>>3,r[5]=31+((7&a)<<5),r[6]=252,(t=new Uint8Array(a)).set(r,0),t.set(e,r.length),t},a.prototype.demux=function(){let m=this;m.seekPos=-1,m.mp4boxfile=i.createFile(),m.movieInfo=null,m.videoCodec=null,m.durationMs=-1,m.fps=-1,m.sampleRate=-1,m.aacProfile=2,m.size={width:-1,height:-1},m.bufObject=r(),m.audioNone=!1,m.naluHeader={vps:null,sps:null,pps:null,sei:null},m.mp4boxfile.onError=function(e){},this.mp4boxfile.onReady=function(e){for(var t in(m.movieInfo=e).tracks)("VideoHandler"===e.tracks[t].name||"video"===e.tracks[t].type)&&(0<=e.tracks[t].codec.indexOf("hev")||0<=e.tracks[t].codec.indexOf("hvc")?m.videoCodec=y.CODEC_H265:0<=e.tracks[t].codec.indexOf("avc")&&(m.videoCodec=y.CODEC_H264),0<=e.tracks[t].codec.indexOf("av01")||0<=e.tracks[t].codec.indexOf("av1C"))&&(m.videoCodec=y.CODEC_AV1);let n=-1;var i;n=e.videoTracks[0].samples_duration/e.videoTracks[0].timescale,m.durationMs=1e3*n,m.fps=e.videoTracks[0].nb_samples/n,m.seekDiffTime=1/m.fps,m.size.width=e.videoTracks[0].track_width,m.size.height=e.videoTracks[0].track_height,0<e.audioTracks.length?(m.sampleRate=e.audioTracks[0].audio.sample_rate,i=e.audioTracks[0].codec.split("."),m.aacProfile=i[i.length-1]):m.audioNone=!0,null!=m.onMp4BoxReady&&m.onMp4BoxReady(m.videoCodec),m.initializeAllSourceBuffers(),m.mp4boxfile.start()},m.mp4boxfile.onSamples=function(t,e,i){for(let e=0;e<i.length;e++){var a=i[e];let r=a.data,n=null;if(null!=r&&r&&(m.videoCodec!==y.CODEC_H264&&m.videoCodec!==y.CODEC_H265||!(r.length<4))){var o=a.dts/a.timescale;if(1===t){let e=null,t=a.is_sync;if(m.videoCodec===y.CODEC_H265){e=a.description.hvcC;var s=_.GET_NALU_TYPE(r[4]);if((s===g.HEVC_NAL_SEI_PREFIX||s===g.HEVC_NAL_SEI_SUFFIX)&&5==(31&r[6])){let e=0,t=0;for(;255==r[++t+6];)e+=255;let n=7+--t;var l=r[n]+e;let i="";for(let e=1;e<=16;e++)i+=r[++n];var u=l-16;try{for(var c=0,h=new Uint8Array(u);h[c]=r[++n],++c<=u;);m.trigger("parse_sei",{data:h,pts:o})}catch(e){}}t=t||s==g.DEFINE_KEY_FRAME||a.is_sync}else if(m.videoCodec===y.CODEC_H264&&(e=a.description.avcC,6==(31&r[4]))&&5==(31&r[5])){let e=0,t=0;for(;255==r[++t+5];)e+=255;let n=6+--t;l=r[n]+e;let i="";for(let e=1;e<=16;e++)i+=r[++n];for(var d=l-16,c=0,h=new Uint8Array(d);h[c]=r[++n],++c<=d;);m.trigger("parse_sei",{data:h,pts:o})}if(t){if(m.videoCodec==y.CODEC_H265?(s=e.nalu_arrays,m.naluHeader.vps=m.setStartCode(s[0][0].data,!1),m.naluHeader.sps=m.setStartCode(s[1][0].data,!1),m.naluHeader.pps=m.setStartCode(s[2][0].data,!1),3<s.length?m.naluHeader.sei=m.setStartCode(s[3][0].data,!1):m.naluHeader.sei=new Uint8Array):m.videoCodec==y.CODEC_H264&&(m.naluHeader.vps=new Uint8Array,m.naluHeader.sps=m.setStartCode(e.SPS[0].nalu,!1),m.naluHeader.pps=m.setStartCode(e.PPS[0].nalu,!1),m.naluHeader.sei=new Uint8Array),m.videoCodec===y.CODEC_H264||m.videoCodec===y.CODEC_H265)if(r[4]===m.naluHeader.vps[4]){var a=m.naluHeader.vps.length+4,f=m.naluHeader.vps.length+m.naluHeader.sps.length+4,p=m.naluHeader.vps.length+m.naluHeader.sps.length+m.naluHeader.pps.length+4;if(m.naluHeader.sei.length<=0&&0<m.naluHeader.sps.length&&r[a]===m.naluHeader.sps[4]&&0<m.naluHeader.pps.length&&r[f]===m.naluHeader.pps[4]&&78===r[p]){let t=0;for(let e=0;e<r.length;e++)if(r[e]===g.SOURCE_CODE_SEI_END&&_.GET_NALU_TYPE(r[e+5])===g.DEFINE_KEY_FRAME){t=e;break}r[3]=1,r[a-1]=1,r[f-1]=1,r[p-1]=1,r[2]=0,r[a-2]=0,r[f-2]=0,r[p-2]=0,r[1]=0,r[a-3]=0,r[f-3]=0,r[p-3]=0,r[t+1]=0,r[t+2]=0,r[t+3]=0,r[t+4]=1,m.naluHeader.vps=null,m.naluHeader.sps=null,m.naluHeader.pps=null,m.naluHeader.vps=new Uint8Array,m.naluHeader.sps=new Uint8Array,m.naluHeader.pps=new Uint8Array}else r=r.subarray(m.naluHeader.vps.length+m.naluHeader.sps.length+m.naluHeader.pps.length+m.naluHeader.sei.length)}else if(4<m.naluHeader.sei.length&&r[4]===m.naluHeader.sei[4]){a=r.subarray(0,10);let e=new Uint8Array(m.naluHeader.vps.length+a.length);e.set(a,0),e.set(m.naluHeader.vps,a.length),e[3]=1,m.naluHeader.vps=null,m.naluHeader.vps=new Uint8Array(e),e=null}else if(0===m.naluHeader.sei.length&&78===r[4]){r=m.setStartCode(r,!0);let t=0;for(let e=0;e<r.length;e++)if(r[e]===g.SOURCE_CODE_SEI_END&&_.GET_NALU_TYPE(r[e+5])===g.DEFINE_KEY_FRAME){t=e;break}m.naluHeader.sei=r.subarray(0,t+1),r=new Uint8Array(r.subarray(t+1))}m.videoCodec===y.CODEC_AV1?(n=new Uint8Array(r.length)).set(r,0):((n=new Uint8Array(m.naluHeader.vps.length+m.naluHeader.sps.length+m.naluHeader.pps.length+m.naluHeader.sei.length+r.length)).set(m.naluHeader.vps,0),n.set(m.naluHeader.sps,m.naluHeader.vps.length),n.set(m.naluHeader.pps,m.naluHeader.vps.length+m.naluHeader.sps.length),n.set(m.naluHeader.sei,m.naluHeader.vps.length+m.naluHeader.sps.length+m.naluHeader.pps.length),n.set(m.setStartCode(r,!0),m.naluHeader.vps.length+m.naluHeader.sps.length+m.naluHeader.pps.length+m.naluHeader.sei.length))}else m.videoCodec===y.CODEC_AV1?(n=new Uint8Array(r.length)).set(r,0):n=m.setStartCode(r,!0);m.bufObject.appendFrame(o,n,!0,t)}else 2==t&&(n=m.setAACAdts(r),m.bufObject.appendFrame(o,n,!1,!0))}}}},a.prototype.appendBufferData=function(e,t=0,n){return e.fileStart=t,this.mp4boxfile.appendBuffer(e)},a.prototype.finishBuffer=function(){this.mp4boxfile.flush()},a.prototype.play=function(){},a.prototype.getVideoCoder=function(){return this.videoCodec},a.prototype.getDurationMs=function(){return this.durationMs},a.prototype.getFPS=function(){return this.fps},a.prototype.getSampleRate=function(){return this.sampleRate},a.prototype.getSize=function(){return this.size},a.prototype.seek=function(e){if(0<=e)return e=this.bufObject.seekIDR(e),parseInt(e)},a.prototype.popBuffer=function(e=1,t=-1){return t<0?null:1==e?this.bufObject.vFrame(t):2==e?this.bufObject.aFrame(t):void 0},a.prototype.addBuffer=function(e){e=e.id;this.mp4boxfile.setExtractionOptions(e,null,{nbSamples:300})},a.prototype.initializeAllSourceBuffers=function(){if(this.movieInfo){var t=this.movieInfo;for(let e=0;e<t.tracks.length;e++){var n=t.tracks[e];this.addBuffer(n)}this.initializeSourceBuffers()}},a.prototype.onInitAppended=function(e){e=e.target;"open"===e.ms.readyState&&(e.sampleNum=0,e.removeEventListener("updateend",this.onInitAppended),e.ms.pendingInits--,0===e.ms.pendingInits)&&this.mp4boxfile.start()},a.prototype.initializeSourceBuffers=function(){var t=this.mp4boxfile.initializeSegmentation();for(let e=0;e<t.length;e++){var n=t[e].user;0===e&&(n.ms.pendingInits=0),n.addEventListener("updateend",this.onInitAppended),n.appendBuffer(t[e].buffer),n.segmentIndex=0,n.ms.pendingInits++}},a.prototype.remove=function(){this.bufObject&&this.bufObject.remove&&this.bufObject.remove()},e.exports=a},function(e,t,n){function h(e){if(!(e instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=e,this.dataview=new DataView(e),this.position=0}function l(e,t,n){this._byteOffset=t||0,e instanceof ArrayBuffer?this.buffer=e:"object"==typeof e?(this.dataView=e,t&&(this._byteOffset+=t)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=null==n?l.LITTLE_ENDIAN:n}function i(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)}function r(){var r=[],i=(r[3]="ES_Descriptor",r[4]="DecoderConfigDescriptor",r[5]="DecoderSpecificInfo",r[6]="SLConfigDescriptor",this.getDescriptorName=function(e){return r[e]},this),a={};return this.parseOneDescriptor=function(e){var t,n=0,i=e.readUint8();for(t=e.readUint8(),0;128&t;)n=(127&t)<<7,t=e.readUint8(),0;return d.debug("MPEG4DescriptorParser","Found "+(r[i]||"Descriptor "+i)+", size "+(n+=127&t)+" at position "+e.getPosition()),(i=new(r[i]?a[r[i]]:a.Descriptor)(n)).parse(e),i},a.Descriptor=function(e,t){this.tag=e,this.size=t,this.descs=[]},a.Descriptor.prototype.parse=function(e){this.data=e.readUint8Array(this.size)},a.Descriptor.prototype.findDescriptor=function(e){for(var t=0;t<this.descs.length;t++)if(this.descs[t].tag==e)return this.descs[t];return null},a.Descriptor.prototype.parseRemainingDescriptors=function(e){for(var t=e.position;e.position<t+this.size;){var n=i.parseOneDescriptor(e);this.descs.push(n)}},a.ES_Descriptor=function(e){a.Descriptor.call(this,3,e)},a.ES_Descriptor.prototype=new a.Descriptor,a.ES_Descriptor.prototype.parse=function(e){var t;this.ES_ID=e.readUint16(),this.flags=e.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=e.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags?(t=e.readUint8(),this.URL=e.readString(t),this.size-=t+1):this.URL="",32&this.flags?(this.OCR_ES_ID=e.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(e)},a.ES_Descriptor.prototype.getOTI=function(e){var t=this.findDescriptor(4);return t?t.oti:0},a.ES_Descriptor.prototype.getAudioConfig=function(e){var t,n=this.findDescriptor(4);return(n=n&&n.findDescriptor(5))&&n.data?31===(t=(248&n.data[0])>>3)&&2<=n.data.length?32+((7&n.data[0])<<3)+((224&n.data[1])>>5):t:null},a.DecoderConfigDescriptor=function(e){a.Descriptor.call(this,4,e)},a.DecoderConfigDescriptor.prototype=new a.Descriptor,a.DecoderConfigDescriptor.prototype.parse=function(e){this.oti=e.readUint8(),this.streamType=e.readUint8(),this.bufferSize=e.readUint24(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32(),this.size-=13,this.parseRemainingDescriptors(e)},a.DecoderSpecificInfo=function(e){a.Descriptor.call(this,5,e)},a.DecoderSpecificInfo.prototype=new a.Descriptor,a.SLConfigDescriptor=function(e){a.Descriptor.call(this,6,e)},a.SLConfigDescriptor.prototype=new a.Descriptor,this}function a(){}function o(){}function R(e){this.stream=e||new i,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1}var d=function(){new Date;return{setLogLevel:function(e){e==this.debug?1:e==this.info?2:e==this.warn?3:(this.error,4)},debug:function(e,t){void 0===console.debug&&(console.debug=console.log)},log:function(e,t){this.debug(e.msg)},info:function(e,t){},warn:function(e,t){},error:function(e,t){}}}(),s=(d.getDurationString=function(e,t){var n;function i(e,t){for(var n=(""+e).split(".");n[0].length<t;)n[0]="0"+n[0];return n.join(".")}e<0?(n=!0,e=-e):n=!1;var e=e/(t||1),t=Math.floor(e/3600),r=(e-=3600*t,Math.floor(e/60)),a=1e3*(e-=60*r);return a-=1e3*(e=Math.floor(e)),a=Math.floor(a),(n?"-":"")+t+":"+i(r,2)+":"+i(e,2)+"."+i(a,3)},d.printRanges=function(e){var t=e.length;if(0<t){for(var n="",i=0;i<t;i++)0<i&&(n+=","),n+="["+d.getDurationString(e.start(i))+","+d.getDurationString(e.end(i))+"]";return n}return"(empty)"},t.Log=d,h.prototype.getPosition=function(){return this.position},h.prototype.getEndPosition=function(){return this.buffer.byteLength},h.prototype.getLength=function(){return this.buffer.byteLength},h.prototype.seek=function(e){e=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(e)||!isFinite(e)?0:e,!0},h.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},h.prototype.readAnyInt=function(e,t){var n=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n=t?this.dataview.getInt8(this.position):this.dataview.getUint8(this.position);break;case 2:n=t?this.dataview.getInt16(this.position):this.dataview.getUint16(this.position);break;case 3:if(t)throw"No method for reading signed 24 bits values";n=this.dataview.getUint8(this.position)<<16,n=(n|=this.dataview.getUint8(this.position+1)<<8)|this.dataview.getUint8(this.position+2);break;case 4:n=t?this.dataview.getInt32(this.position):this.dataview.getUint32(this.position);break;case 8:if(t)throw"No method for reading signed 64 bits values";n=this.dataview.getUint32(this.position)<<32,n|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,n}throw"Not enough bytes in buffer"},h.prototype.readUint8=function(){return this.readAnyInt(1,!1)},h.prototype.readUint16=function(){return this.readAnyInt(2,!1)},h.prototype.readUint24=function(){return this.readAnyInt(3,!1)},h.prototype.readUint32=function(){return this.readAnyInt(4,!1)},h.prototype.readUint64=function(){return this.readAnyInt(8,!1)},h.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readUint8());return t}throw"Not enough bytes in buffer"},h.prototype.readCString=function(){for(var e=[];;){var t=this.readUint8();if(0===t)break;e.push(t)}return String.fromCharCode.apply(null,e)},h.prototype.readInt8=function(){return this.readAnyInt(1,!0)},h.prototype.readInt16=function(){return this.readAnyInt(2,!0)},h.prototype.readInt32=function(){return this.readAnyInt(4,!0)},h.prototype.readInt64=function(){return this.readAnyInt(8,!1)},h.prototype.readUint8Array=function(e){for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readUint8();return t},h.prototype.readInt16Array=function(e){for(var t=new Int16Array(e),n=0;n<e;n++)t[n]=this.readInt16();return t},h.prototype.readUint16Array=function(e){for(var t=new Int16Array(e),n=0;n<e;n++)t[n]=this.readUint16();return t},h.prototype.readUint32Array=function(e){for(var t=new Uint32Array(e),n=0;n<e;n++)t[n]=this.readUint32();return t},h.prototype.readInt32Array=function(e){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=this.readInt32();return t},t.MP4BoxStream=h,(l.prototype={}).getPosition=function(){return this.position},l.prototype._realloc=function(e){if(this._dynamicSize){var t=this._byteOffset+this.position+e,n=this._buffer.byteLength;if(t<=n)t>this._byteLength&&(this._byteLength=t);else{for(n<1&&(n=1);n<t;)n*=2;var e=new ArrayBuffer(n),i=new Uint8Array(this._buffer);new Uint8Array(e,0,i.length).set(i),this.buffer=e,this._byteLength=t}}},l.prototype._trimAlloc=function(){var e,t,n;this._byteLength!=this._buffer.byteLength&&(e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),n=new Uint8Array(this._buffer,0,t.length),t.set(n),this.buffer=e)},l.BIG_ENDIAN=!1,l.LITTLE_ENDIAN=!0,l.prototype._byteLength=0,Object.defineProperty(l.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(l.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(l.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(l.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),l.prototype.seek=function(e){e=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(e)||!isFinite(e)?0:e},l.prototype.isEof=function(){return this.position>=this._byteLength},l.prototype.mapUint8Array=function(e){this._realloc(+e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=+e,t},l.prototype.readInt32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Int32Array(e);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),l.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},l.prototype.readInt16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var n=new Int16Array(e);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),l.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},l.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Int8Array(e);return l.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},l.prototype.readUint32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Uint32Array(e);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),l.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},l.prototype.readUint16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var n=new Uint16Array(e);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),l.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},l.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Uint8Array(e);return l.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},l.prototype.readFloat64Array=function(e,t){e=null==e?this.byteLength-this.position/8:e;var n=new Float64Array(e);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),l.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},l.prototype.readFloat32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Float32Array(e);return l.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),l.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},l.prototype.readInt32=function(e){e=this._dataView.getInt32(this.position,null==e?this.endianness:e);return this.position+=4,e},l.prototype.readInt16=function(e){e=this._dataView.getInt16(this.position,null==e?this.endianness:e);return this.position+=2,e},l.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},l.prototype.readUint32=function(e){e=this._dataView.getUint32(this.position,null==e?this.endianness:e);return this.position+=4,e},l.prototype.readUint16=function(e){e=this._dataView.getUint16(this.position,null==e?this.endianness:e);return this.position+=2,e},l.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},l.prototype.readFloat32=function(e){e=this._dataView.getFloat32(this.position,null==e?this.endianness:e);return this.position+=4,e},l.prototype.readFloat64=function(e){e=this._dataView.getFloat64(this.position,null==e?this.endianness:e);return this.position+=8,e},l.endianness=0<new Int8Array(new Int16Array([1]).buffer)[0],l.memcpy=function(e,t,n,i,r){e=new Uint8Array(e,t,r),t=new Uint8Array(n,i,r);e.set(t)},l.arrayToNative=function(e,t){return t==this.endianness?e:this.flipArrayEndianness(e)},l.nativeToEndian=function(e,t){return this.endianness==t?e:this.flipArrayEndianness(e)},l.flipArrayEndianness=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=0;n<e.byteLength;n+=e.BYTES_PER_ELEMENT)for(var i=n+e.BYTES_PER_ELEMENT-1,r=n;r<i;i--,r++){var a=t[r];t[r]=t[i],t[i]=a}return e},l.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return String.fromCharCode.apply(null,t)},l.prototype.readString=function(e,t){return null==t||"ASCII"==t?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==e?this.byteLength-this.position:e)]):new TextDecoder(t).decode(this.mapUint8Array(e))},l.prototype.readCString=function(e){var t=this.byteLength-this.position,n=new Uint8Array(this._buffer,this._byteOffset+this.position),i=t;null!=e&&(i=Math.min(e,t));for(var r=0;r<i&&0!==n[r];r++);var a=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(r)]);return null!=e?this.position+=i-r:r!=t&&(this.position+=1),a},Math.pow(2,32)),E=(l.prototype.readInt64=function(){return this.readInt32()*s+this.readUint32()},l.prototype.readUint64=function(){return this.readUint32()*s+this.readUint32()},l.prototype.readInt64=function(){return this.readUint32()*s+this.readUint32()},l.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},(t.DataStream=l).prototype.save=function(e){var t=new Blob([this.buffer]);if(!window.URL||!URL.createObjectURL)throw"DataStream.save: Can't create object URL.";var t=window.URL.createObjectURL(t),n=document.createElement("a");document.body.appendChild(n),n.setAttribute("href",t),n.setAttribute("download",e),n.setAttribute("target","_self"),n.click(),window.URL.revokeObjectURL(t)},l.prototype._dynamicSize=!0,Object.defineProperty(l.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),l.prototype.shift=function(e){var t=new ArrayBuffer(this._byteLength-e),n=new Uint8Array(t),i=new Uint8Array(this._buffer,e,n.length);n.set(i),this.buffer=t,this.position-=e},l.prototype.writeInt32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeInt32(e[n],t)},l.prototype.writeInt16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeInt16(e[n],t)},l.prototype.writeInt8Array=function(e){if(this._realloc(+e.length),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var t=0;t<e.length;t++)this.writeInt8(e[t])},l.prototype.writeUint32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeUint32(e[n],t)},l.prototype.writeUint16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeUint16(e[n],t)},l.prototype.writeUint8Array=function(e){if(this._realloc(+e.length),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},l.prototype.writeFloat64Array=function(e,t){if(this._realloc(8*e.length),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeFloat64(e[n],t)},l.prototype.writeFloat32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)l.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeFloat32(e[n],t)},l.prototype.writeInt32=function(e,t){this._realloc(4),this._dataView.setInt32(this.position,e,null==t?this.endianness:t),this.position+=4},l.prototype.writeInt16=function(e,t){this._realloc(2),this._dataView.setInt16(this.position,e,null==t?this.endianness:t),this.position+=2},l.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},l.prototype.writeUint32=function(e,t){this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},l.prototype.writeUint16=function(e,t){this._realloc(2),this._dataView.setUint16(this.position,e,null==t?this.endianness:t),this.position+=2},l.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},l.prototype.writeFloat32=function(e,t){this._realloc(4),this._dataView.setFloat32(this.position,e,null==t?this.endianness:t),this.position+=4},l.prototype.writeFloat64=function(e,t){this._realloc(8),this._dataView.setFloat64(this.position,e,null==t?this.endianness:t),this.position+=8},l.prototype.writeUCS2String=function(e,t,n){null==n&&(n=e.length);for(var i=0;i<e.length&&i<n;i++)this.writeUint16(e.charCodeAt(i),t);for(;i<n;i++)this.writeUint16(0)},l.prototype.writeString=function(e,t,n){var i=0;if(null==t||"ASCII"==t)if(null!=n){for(var r=Math.min(e.length,n),i=0;i<r;i++)this.writeUint8(e.charCodeAt(i));for(;i<n;i++)this.writeUint8(0)}else for(i=0;i<e.length;i++)this.writeUint8(e.charCodeAt(i));else this.writeUint8Array(new TextEncoder(t).encode(e.substring(0,n)))},l.prototype.writeCString=function(e,t){var n=0;if(null!=t){for(var i=Math.min(e.length,t),n=0;n<i;n++)this.writeUint8(e.charCodeAt(n));for(;n<t;n++)this.writeUint8(0)}else{for(n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));this.writeUint8(0)}},l.prototype.writeStruct=function(e,t){for(var n=0;n<e.length;n+=2){var i=e[n+1];this.writeType(i,t[e[n]],t)}},l.prototype.writeType=function(e,t,n){var i;if("function"==typeof e)return e(this,t);if("object"==typeof e&&!(e instanceof Array))return e.set(this,t,n);var r=null,a="ASCII",n=this.position;switch("string"==typeof e&&/:/.test(e)&&(e=(i=e.split(":"))[0],r=parseInt(i[1])),"string"==typeof e&&/,/.test(e)&&(e=(i=e.split(","))[0],a=parseInt(i[1])),e){case"uint8":this.writeUint8(t);break;case"int8":this.writeInt8(t);break;case"uint16":this.writeUint16(t,this.endianness);break;case"int16":this.writeInt16(t,this.endianness);break;case"uint32":this.writeUint32(t,this.endianness);break;case"int32":this.writeInt32(t,this.endianness);break;case"float32":this.writeFloat32(t,this.endianness);break;case"float64":this.writeFloat64(t,this.endianness);break;case"uint16be":this.writeUint16(t,l.BIG_ENDIAN);break;case"int16be":this.writeInt16(t,l.BIG_ENDIAN);break;case"uint32be":this.writeUint32(t,l.BIG_ENDIAN);break;case"int32be":this.writeInt32(t,l.BIG_ENDIAN);break;case"float32be":this.writeFloat32(t,l.BIG_ENDIAN);break;case"float64be":this.writeFloat64(t,l.BIG_ENDIAN);break;case"uint16le":this.writeUint16(t,l.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(t,l.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(t,l.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(t,l.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(t,l.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(t,l.LITTLE_ENDIAN);break;case"cstring":this.writeCString(t,r);break;case"string":this.writeString(t,a,r);break;case"u16string":this.writeUCS2String(t,this.endianness,r);break;case"u16stringle":this.writeUCS2String(t,l.LITTLE_ENDIAN,r);break;case"u16stringbe":this.writeUCS2String(t,l.BIG_ENDIAN,r);break;default:if(3!=e.length)this.writeStruct(e,t);else for(var o=e[1],s=0;s<t.length;s++)this.writeType(o,t[s])}null!=r&&(this.position=n,this._realloc(r),this.position=n+r)},l.prototype.writeUint64=function(e){var t=Math.floor(e/s);this.writeUint32(t),this.writeUint32(4294967295&e)},l.prototype.writeUint24=function(e){this.writeUint8((16711680&e)>>16),this.writeUint8((65280&e)>>8),this.writeUint8(255&e)},l.prototype.adjustUint32=function(e,t){var n=this.position;this.seek(e),this.writeUint32(t),this.seek(n)},l.prototype.mapInt32Array=function(e,t){this._realloc(4*e);var n=new Int32Array(this._buffer,this.byteOffset+this.position,e);return l.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},l.prototype.mapInt16Array=function(e,t){this._realloc(2*e);var n=new Int16Array(this._buffer,this.byteOffset+this.position,e);return l.arrayToNative(n,null==t?this.endianness:t),this.position+=2*e,n},l.prototype.mapInt8Array=function(e){this._realloc(+e);var t=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=+e,t},l.prototype.mapUint32Array=function(e,t){this._realloc(4*e);var n=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return l.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},l.prototype.mapUint16Array=function(e,t){this._realloc(2*e);var n=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return l.arrayToNative(n,null==t?this.endianness:t),this.position+=2*e,n},l.prototype.mapFloat64Array=function(e,t){this._realloc(8*e);var n=new Float64Array(this._buffer,this.byteOffset+this.position,e);return l.arrayToNative(n,null==t?this.endianness:t),this.position+=8*e,n},l.prototype.mapFloat32Array=function(e,t){this._realloc(4*e);var n=new Float32Array(this._buffer,this.byteOffset+this.position,e);return l.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},(i.prototype=new l(new ArrayBuffer,0,l.BIG_ENDIAN)).initialized=function(){var e;return-1<this.bufferIndex||(0<this.buffers.length?0===(e=this.buffers[0]).fileStart?(this.buffer=e,this.bufferIndex=0,d.debug("MultiBufferStream","Stream ready for parsing"),!0):(d.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1):(d.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(e,t){d.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+t.byteLength));var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer},i.prototype.reduceBuffer=function(e,t,n){var i=new Uint8Array(n);return i.set(new Uint8Array(e,t,n)),i.buffer.fileStart=e.fileStart+t,i.buffer.usedBytes=0,i.buffer},i.prototype.insertBuffer=function(e){for(var t=!0,n=0;n<this.buffers.length;n++){var i=this.buffers[n];if(e.fileStart<=i.fileStart){if(e.fileStart===i.fileStart){if(e.byteLength>i.byteLength){this.buffers.splice(n,1),n--;continue}d.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring")}else e.fileStart+e.byteLength<=i.fileStart||(e=this.reduceBuffer(e,0,i.fileStart-e.fileStart)),d.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(n,0,e),0===n&&(this.buffer=e);t=!1;break}if(e.fileStart<i.fileStart+i.byteLength){var i=i.fileStart+i.byteLength-e.fileStart,r=e.byteLength-i;if(!(0<r)){t=!1;break}e=this.reduceBuffer(e,i,r)}}t&&(d.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),0===n)&&(this.buffer=e)},i.prototype.logBufferLevel=function(e){for(var t,n,i=[],r="",a=0,o=0,s=0;s<this.buffers.length;s++)t=this.buffers[s],0===s?(i.push(n={}),n.start=t.fileStart,n.end=t.fileStart+t.byteLength,r+="["+n.start+"-"):n.end===t.fileStart?n.end=t.fileStart+t.byteLength:((n={}).start=t.fileStart,r+=i[i.length-1].end-1+"], ["+n.start+"-",n.end=t.fileStart+t.byteLength,i.push(n)),a+=t.usedBytes,o+=t.byteLength;0<i.length&&(r+=n.end-1+"]");e=e?d.info:d.debug;0===this.buffers.length?e("MultiBufferStream","No more buffer in memory"):e("MultiBufferStream",this.buffers.length+" stored buffer(s) ("+a+"/"+o+" bytes), continuous ranges: "+r)},i.prototype.cleanBuffers=function(){for(var e,t=0;t<this.buffers.length;t++)(e=this.buffers[t]).usedBytes===e.byteLength&&(d.debug("MultiBufferStream","Removing buffer #"+t),this.buffers.splice(t,1),t--)},i.prototype.mergeNextBuffer=function(){var e,t,n,i;return this.bufferIndex+1<this.buffers.length&&(i=this.buffers[this.bufferIndex+1]).fileStart===this.buffer.fileStart+this.buffer.byteLength&&(e=this.buffer.byteLength,t=this.buffer.usedBytes,n=this.buffer.fileStart,this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,i),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=t,this.buffer.fileStart=n,d.debug("ISOFile","Concatenating buffer for box parsing (length: "+e+"->"+this.buffer.byteLength+")"),!0)},i.prototype.findPosition=function(e,t,n){for(var i=null,r=-1,a=!0===e?0:this.bufferIndex;a<this.buffers.length&&(i=this.buffers[a]).fileStart<=t;)r=a,n&&(i.fileStart+i.byteLength<=t?i.usedBytes=i.byteLength:i.usedBytes=t-i.fileStart,this.logBufferLevel()),a++;return-1!==r&&(i=this.buffers[r]).fileStart+i.byteLength>=t?(d.debug("MultiBufferStream","Found position in existing buffer #"+r),r):-1},i.prototype.findEndContiguousBuf=function(e){var t,n,e=void 0!==e?e:this.bufferIndex,i=this.buffers[e];if(this.buffers.length>e+1)for(t=e+1;t<this.buffers.length&&(n=this.buffers[t]).fileStart===i.fileStart+i.byteLength;t++)i=n;return i.fileStart+i.byteLength},i.prototype.getEndFilePositionAfter=function(e){var t=this.findPosition(!0,e,!1);return-1!==t?this.findEndContiguousBuf(t):e},i.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},i.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},i.prototype.seek=function(e,t,n){t=this.findPosition(t,e,n);return-1!==t?(this.buffer=this.buffers[t],this.bufferIndex=t,this.position=e-this.buffer.fileStart,d.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(d.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},i.prototype.getPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},i.prototype.getLength=function(){return this.byteLength},i.prototype.getEndPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=i,t.MPEG4DescriptorParser=r,{ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){E.FullBox.prototype=new E.Box,E.ContainerBox.prototype=new E.Box,E.SampleEntry.prototype=new E.Box,E.TrackGroupTypeBox.prototype=new E.FullBox,E.BASIC_BOXES.forEach(function(e){E.createBoxCtor(e)}),E.FULL_BOXES.forEach(function(e){E.createFullBoxCtor(e)}),E.CONTAINER_BOXES.forEach(function(e){E.createContainerBoxCtor(e[0],null,e[1])})},Box:function(e,t,n){this.type=e,this.size=t,this.uuid=n},FullBox:function(e,t,n){E.Box.call(this,e,t,n),this.flags=0,this.version=0},ContainerBox:function(e,t,n){E.Box.call(this,e,t,n),this.boxes=[]},SampleEntry:function(e,t,n,i){E.ContainerBox.call(this,e,t),this.hdr_size=n,this.start=i},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,t){E.FullBox.call(this,e,t)},createBoxCtor:function(t,e){E.boxCodes.push(t),E[t+"Box"]=function(e){E.Box.call(this,t,e)},E[t+"Box"].prototype=new E.Box,e&&(E[t+"Box"].prototype.parse=e)},createFullBoxCtor:function(t,n){E[t+"Box"]=function(e){E.FullBox.call(this,t,e)},E[t+"Box"].prototype=new E.FullBox,E[t+"Box"].prototype.parse=function(e){this.parseFullHeader(e),n&&n.call(this,e)}},addSubBoxArrays:function(e){if(e)for(var t=(this.subBoxNames=e).length,n=0;n<t;n++)this[e[n]+"s"]=[]},createContainerBoxCtor:function(t,e,n){E[t+"Box"]=function(e){E.ContainerBox.call(this,t,e),E.addSubBoxArrays.call(this,n)},E[t+"Box"].prototype=new E.ContainerBox,e&&(E[t+"Box"].prototype.parse=e)},createMediaSampleEntryCtor:function(e,t,n){E.sampleEntryCodes[e]=[],E[e+"SampleEntry"]=function(e,t){E.SampleEntry.call(this,e,t),E.addSubBoxArrays.call(this,n)},E[e+"SampleEntry"].prototype=new E.SampleEntry,t&&(E[e+"SampleEntry"].prototype.parse=t)},createSampleEntryCtor:function(t,n,e,i){E.sampleEntryCodes[t].push(n),E[n+"SampleEntry"]=function(e){E[t+"SampleEntry"].call(this,n,e),E.addSubBoxArrays.call(this,i)},E[n+"SampleEntry"].prototype=new E[t+"SampleEntry"],e&&(E[n+"SampleEntry"].prototype.parse=e)},createEncryptedSampleEntryCtor:function(e,t,n){E.createSampleEntryCtor.call(this,e,t,n,["sinf"])},createSampleGroupCtor:function(t,e){E[t+"SampleGroupEntry"]=function(e){E.SampleGroupEntry.call(this,t,e)},E[t+"SampleGroupEntry"].prototype=new E.SampleGroupEntry,e&&(E[t+"SampleGroupEntry"].prototype.parse=e)},createTrackGroupCtor:function(t,e){E[t+"TrackGroupTypeBox"]=function(e){E.TrackGroupTypeBox.call(this,t,e)},E[t+"TrackGroupTypeBox"].prototype=new E.TrackGroupTypeBox,e&&(E[t+"TrackGroupTypeBox"].prototype.parse=e)},createUUIDBox:function(t,n,i,r){E.UUIDs.push(t),E.UUIDBoxes[t]=function(e){(n?E.FullBox:i?E.ContainerBox:E.Box).call(this,"uuid",e,t)},E.UUIDBoxes[t].prototype=new(n?E.FullBox:i?E.ContainerBox:E.Box),r&&(E.UUIDBoxes[t].prototype.parse=n?function(e){this.parseFullHeader(e),r&&r.call(this,e)}:r)}}),u=(E.initialize(),E.TKHD_FLAG_ENABLED=1,E.TKHD_FLAG_IN_MOVIE=2,E.TKHD_FLAG_IN_PREVIEW=4,E.TFHD_FLAG_BASE_DATA_OFFSET=1,E.TFHD_FLAG_SAMPLE_DESC=2,E.TFHD_FLAG_SAMPLE_DUR=8,E.TFHD_FLAG_SAMPLE_SIZE=16,E.TFHD_FLAG_SAMPLE_FLAGS=32,E.TFHD_FLAG_DUR_EMPTY=65536,E.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,E.TRUN_FLAGS_DATA_OFFSET=1,E.TRUN_FLAGS_FIRST_FLAG=4,E.TRUN_FLAGS_DURATION=256,E.TRUN_FLAGS_SIZE=512,E.TRUN_FLAGS_FLAGS=1024,E.TRUN_FLAGS_CTS_OFFSET=2048,E.Box.prototype.add=function(e){return this.addBox(new E[e+"Box"])},E.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},E.Box.prototype.set=function(e,t){return this[e]=t,this},E.Box.prototype.addEntry=function(e,t){t=t||"entries";return this[t]||(this[t]=[]),this[t].push(e),this},(t.BoxParser=E).parseUUID=function(e){return E.parseHex16(e)},E.parseHex16=function(e){for(var t="",n=0;n<16;n++){var i=e.readUint8().toString(16);t+=1===i.length?"0"+i:i}return t},E.parseOneBox=function(e,t,n){var i,r,a=e.getPosition(),o=0;if(e.getEndPosition()-a<8)return d.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:E.ERR_NOT_ENOUGH_DATA};if(n&&n<8)return d.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:E.ERR_NOT_ENOUGH_DATA};var s=e.readUint32(),l=e.readString(4),u=l;if(d.debug("BoxParser","Found box of type '"+l+"' and size "+s+" at position "+a),o=8,"uuid"==l){if(e.getEndPosition()-e.getPosition()<16||n-o<16)return e.seek(a),d.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:E.ERR_NOT_ENOUGH_DATA};o+=16,u=r=E.parseUUID(e)}if(1==s){if(e.getEndPosition()-e.getPosition()<8||n&&n-o<8)return e.seek(a),d.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+l+'" box'),{code:E.ERR_NOT_ENOUGH_DATA};s=e.readUint64(),o+=8}else if(0===s)if(n)s=n;else if("mdat"!==l)return d.error("BoxParser","Unlimited box size not supported for type: '"+l+"'"),i=new E.Box(l,s),{code:E.OK,box:i,size:i.size};return 0!==s&&s<o?(d.error("BoxParser","Box of type "+l+" has an invalid size "+s+" (too small to be a box)"),{code:E.ERR_NOT_ENOUGH_DATA,type:l,size:s,hdr_size:o,start:a}):0!==s&&n&&n<s?(d.error("BoxParser","Box of type '"+l+"' has a size "+s+" greater than its container size "+n),{code:E.ERR_NOT_ENOUGH_DATA,type:l,size:s,hdr_size:o,start:a}):0!==s&&a+s>e.getEndPosition()?(e.seek(a),d.info("BoxParser","Not enough data in stream to parse the entire '"+l+"' box"),{code:E.ERR_NOT_ENOUGH_DATA,type:l,size:s,hdr_size:o,start:a}):t?{code:E.OK,type:l,size:s,hdr_size:o,start:a}:(E[l+"Box"]?i=new E[l+"Box"](s):"uuid"!==l?(d.warn("BoxParser","Unknown box type: '"+l+"'"),(i=new E.Box(l,s)).has_unparsed_data=!0):E.UUIDBoxes[r]?i=new E.UUIDBoxes[r](s):(d.warn("BoxParser","Unknown uuid type: '"+r+"'"),(i=new E.Box(l,s)).uuid=r,i.has_unparsed_data=!0),i.hdr_size=o,i.start=a,i.write===E.Box.prototype.write&&"mdat"!==i.type&&(d.info("BoxParser","'"+u+"' box writing not yet implemented, keeping unparsed data in memory for later write"),i.parseDataAndRewind(e)),i.parse(e),(n=e.getPosition()-(i.start+i.size))<0?(d.warn("BoxParser","Parsing of box '"+u+"' did not read the entire indicated box data size (missing "+-n+" bytes), seeking forward"),e.seek(i.start+i.size)):0<n&&(d.error("BoxParser","Parsing of box '"+u+"' read "+n+" more bytes than the indicated box data size, seeking backwards"),0!==i.size)&&e.seek(i.start+i.size),{code:E.OK,box:i,size:i.size})},E.Box.prototype.parse=function(e){"mdat"!=this.type?this.data=e.readUint8Array(this.size-this.hdr_size):0===this.size?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},E.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},E.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},E.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},E.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},E.ContainerBox.prototype.parse=function(e){for(;e.getPosition()<this.start+this.size;){if((n=E.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==E.OK)return;var t,n=n.box;this.boxes.push(n),this.subBoxNames&&-1!=this.subBoxNames.indexOf(n.type)?this[this.subBoxNames[this.subBoxNames.indexOf(n.type)]+"s"].push(n):this[t="uuid"!==n.type?n.type:n.uuid]?d.warn("Box of type "+t+" already stored in field of this type"):this[t]=n}},E.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();e=[];e[0]=this.language>>10&31,e[1]=this.language>>5&31,e[2]=31&this.language,this.languageString=String.fromCharCode(e[0]+96,e[1]+96,e[2]+96)},E.SAMPLE_ENTRY_TYPE_VISUAL="Visual",E.SAMPLE_ENTRY_TYPE_AUDIO="Audio",E.SAMPLE_ENTRY_TYPE_HINT="Hint",E.SAMPLE_ENTRY_TYPE_METADATA="Metadata",E.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",E.SAMPLE_ENTRY_TYPE_SYSTEM="System",E.SAMPLE_ENTRY_TYPE_TEXT="Text",E.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},E.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},E.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},E.SampleEntry.prototype.parseFooter=function(e){E.ContainerBox.prototype.parse.call(this,e)},E.createMediaSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_HINT),E.createMediaSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_METADATA),E.createMediaSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SUBTITLE),E.createMediaSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SYSTEM),E.createMediaSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_TEXT),E.createMediaSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var t;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),t=Math.min(31,e.readUint8()),this.compressorname=e.readString(t),t<31&&e.readString(31-t),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),E.createMediaSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),E.createEncryptedSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),E.createEncryptedSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),E.createEncryptedSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),E.createEncryptedSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),E.createEncryptedSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_TEXT,"enct"),E.createEncryptedSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_METADATA,"encm"),E.createBoxCtor("a1lx",function(e){var t=16*(1+(1&(1&e.readUint8())));this.layer_size=[];for(var n=0;n<3;n++)this.layer_size[n]=16==t?e.readUint16():e.readUint32()}),E.createBoxCtor("a1op",function(e){this.op_index=e.readUint8()}),E.createFullBoxCtor("auxC",function(e){this.aux_type=e.readCString();var t=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(t)}),E.createBoxCtor("av1C",function(e){var t=e.readUint8();if(t>>7&!1)d.error("av1C marker problem");else if(this.version=127&t,1!==this.version)d.error("av1C version "+this.version+" not supported");else if(t=e.readUint8(),this.seq_profile=t>>5&7,this.seq_level_idx_0=31&t,t=e.readUint8(),this.seq_tier_0=t>>7&1,this.high_bitdepth=t>>6&1,this.twelve_bit=t>>5&1,this.monochrome=t>>4&1,this.chroma_subsampling_x=t>>3&1,this.chroma_subsampling_y=t>>2&1,this.chroma_sample_position=3&t,t=e.readUint8(),this.reserved_1=t>>5&7,0!==this.reserved_1)d.error("av1C reserved_1 parsing problem");else{if(this.initial_presentation_delay_present=t>>4&1,1===this.initial_presentation_delay_present)this.initial_presentation_delay_minus_one=15&t;else if(this.reserved_2=15&t,0!==this.reserved_2)return void d.error("av1C reserved_2 parsing problem");t=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(t)}}),E.createBoxCtor("avcC",function(e){var t,n;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=3&e.readUint8(),this.nb_SPS_nalus=31&e.readUint8(),n=this.size-this.hdr_size-6,this.SPS=[],t=0;t<this.nb_SPS_nalus;t++)this.SPS[t]={},this.SPS[t].length=e.readUint16(),this.SPS[t].nalu=e.readUint8Array(this.SPS[t].length),n-=2+this.SPS[t].length;for(this.nb_PPS_nalus=e.readUint8(),n--,this.PPS=[],t=0;t<this.nb_PPS_nalus;t++)this.PPS[t]={},this.PPS[t].length=e.readUint16(),this.PPS[t].nalu=e.readUint8Array(this.PPS[t].length),n-=2+this.PPS[t].length;0<n&&(this.ext=e.readUint8Array(n))}),E.createBoxCtor("btrt",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),E.createBoxCtor("clap",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),E.createBoxCtor("clli",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),E.createFullBoxCtor("co64",function(e){var t,n=e.readUint32();if(this.chunk_offsets=[],0===this.version)for(t=0;t<n;t++)this.chunk_offsets.push(e.readUint64())}),E.createFullBoxCtor("CoLL",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),E.createBoxCtor("colr",function(e){var t;this.colour_type=e.readString(4),"nclx"===this.colour_type?(this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16(),t=e.readUint8(),this.full_range_flag=t>>7):"rICC"!==this.colour_type&&"prof"!==this.colour_type||(this.ICC_profile=e.readUint8Array(this.size-4))}),E.createFullBoxCtor("cprt",function(e){this.parseLanguage(e),this.notice=e.readCString()}),E.createFullBoxCtor("cslg",function(e){0===this.version&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),E.createFullBoxCtor("ctts",function(e){var t,n=e.readUint32();if(this.sample_counts=[],this.sample_offsets=[],0===this.version)for(t=0;t<n;t++){this.sample_counts.push(e.readUint32());var i=e.readInt32();i<0&&d.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(i)}else if(1==this.version)for(t=0;t<n;t++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),E.createBoxCtor("dac3",function(e){var t=e.readUint8(),n=e.readUint8(),e=e.readUint8();this.fscod=t>>6,this.bsid=t>>1&31,this.bsmod=(1&t)<<2|n>>6&3,this.acmod=n>>3&7,this.lfeon=n>>2&1,this.bit_rate_code=3&n|e>>5&7}),E.createBoxCtor("dec3",function(e){var t=e.readUint16();this.data_rate=t>>3,this.num_ind_sub=7&t,this.ind_subs=[];for(var n=0;n<this.num_ind_sub+1;n++){var i={},r=(this.ind_subs.push(i),e.readUint8()),a=e.readUint8(),o=e.readUint8();i.fscod=r>>6,i.bsid=r>>1&31,i.bsmod=(1&r)<<4|a>>4&15,i.acmod=a>>1&7,i.lfeon=1&a,i.num_dep_sub=o>>1&15,0<i.num_dep_sub&&(i.chan_loc=(1&o)<<8|e.readUint8())}}),E.createFullBoxCtor("dfLa",function(e){var t=[],n=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];for(this.parseFullHeader(e);;){var i=e.readUint8(),r=Math.min(127&i,n.length-1);if(r?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),t.push(n[r]),128&i)break}this.numMetadataBlocks=t.length+" ("+t.join(", ")+")"}),E.createBoxCtor("dimm",function(e){this.bytessent=e.readUint64()}),E.createBoxCtor("dmax",function(e){this.time=e.readUint32()}),E.createBoxCtor("dmed",function(e){this.bytessent=e.readUint64()}),E.createBoxCtor("dOps",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),0!==this.ChannelMappingFamily){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var t=0;t<this.OutputChannelCount;t++)this.ChannelMapping[t]=e.readUint8()}}),E.createFullBoxCtor("dref",function(e){this.entries=[];for(var t,n=e.readUint32(),i=0;i<n;i++){if((t=E.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==E.OK)return;t=t.box,this.entries.push(t)}}),E.createBoxCtor("drep",function(e){this.bytessent=e.readUint64()}),E.createFullBoxCtor("elng",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),E.createFullBoxCtor("elst",function(e){this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i={};this.entries.push(i),1===this.version?(i.segment_duration=e.readUint64(),i.media_time=e.readInt64()):(i.segment_duration=e.readUint32(),i.media_time=e.readInt32()),i.media_rate_integer=e.readInt16(),i.media_rate_fraction=e.readInt16()}}),E.createFullBoxCtor("emsg",function(e){1==this.version?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var t=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));1==this.version&&(t-=4),this.message_data=e.readUint8Array(t)}),E.createFullBoxCtor("esds",function(e){var e=e.readUint8Array(this.size-this.hdr_size),t=new r;this.esd=t.parseOneDescriptor(new l(e.buffer,0,l.BIG_ENDIAN))}),E.createBoxCtor("fiel",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),E.createBoxCtor("frma",function(e){this.data_format=e.readString(4)}),E.createBoxCtor("ftyp",function(e){for(var t=this.size-this.hdr_size,n=(this.major_brand=e.readString(4),this.minor_version=e.readUint32(),t-=8,this.compatible_brands=[],0);4<=t;)this.compatible_brands[n]=e.readString(4),t-=4,n++}),E.createFullBoxCtor("hdlr",function(e){0===this.version&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1])&&(this.name=this.name.slice(0,-1))}),E.createBoxCtor("hvcC",function(e){this.configurationVersion=e.readUint8(),n=e.readUint8(),this.general_profile_space=n>>6,this.general_tier_flag=(32&n)>>5,this.general_profile_idc=31&n,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=4095&e.readUint16(),this.parallelismType=3&e.readUint8(),this.chroma_format_idc=3&e.readUint8(),this.bit_depth_luma_minus8=7&e.readUint8(),this.bit_depth_chroma_minus8=7&e.readUint8(),this.avgFrameRate=e.readUint16(),n=e.readUint8(),this.constantFrameRate=n>>6,this.numTemporalLayers=(13&n)>>3,this.temporalIdNested=(4&n)>>2,this.lengthSizeMinusOne=3&n,this.nalu_arrays=[];for(var t,n,i=e.readUint8(),r=0;r<i;r++)for(var a=[],o=(this.nalu_arrays.push(a),n=e.readUint8(),a.completeness=(128&n)>>7,a.nalu_type=63&n,e.readUint16()),s=0;s<o;s++){var l={};a.push(l),t=e.readUint16(),l.data=e.readUint8Array(t)}}),E.createFullBoxCtor("iinf",function(e){var t;0===this.version?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var n=0;n<this.entry_count;n++){if((t=E.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==E.OK)return;"infe"!==t.box.type&&d.error("BoxParser","Expected 'infe' box, got "+t.box.type),this.item_infos[n]=t.box}}),E.createFullBoxCtor("iloc",function(e){var t=e.readUint8(),n=(this.offset_size=t>>4&15,this.length_size=15&t,t=e.readUint8(),this.base_offset_size=t>>4&15,1===this.version||2===this.version?this.index_size=15&t:this.index_size=0,this.items=[],0);if(this.version<2)n=e.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";n=e.readUint32()}for(var i=0;i<n;i++){var r={};if(this.items.push(r),!(this.version<2)&&2!==this.version)throw"version of iloc box not supported";switch(r.item_ID=e.readUint16(),1===this.version||2===this.version?r.construction_method=15&e.readUint16():r.construction_method=0,r.data_reference_index=e.readUint16(),this.base_offset_size){case 0:r.base_offset=0;break;case 4:r.base_offset=e.readUint32();break;case 8:r.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var a=e.readUint16();r.extents=[];for(var o=0;o<a;o++){var s={};if(r.extents.push(s),1===this.version||2===this.version)switch(this.index_size){case 0:s.extent_index=0;break;case 4:s.extent_index=e.readUint32();break;case 8:s.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:s.extent_offset=0;break;case 4:s.extent_offset=e.readUint32();break;case 8:s.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:s.extent_length=0;break;case 4:s.extent_length=e.readUint32();break;case 8:s.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),E.createBoxCtor("imir",function(e){e=e.readUint8();this.reserved=e>>7,this.axis=1&e}),E.createFullBoxCtor("infe",function(e){0!==this.version&&1!==this.version||(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),1===this.version?(this.extension_type=e.readString(4),d.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size)):2<=this.version&&(2===this.version?this.item_ID=e.readUint16():3===this.version&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),"mime"===this.item_type?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):"uri "===this.item_type&&(this.item_uri_type=e.readCString()))}),E.createFullBoxCtor("ipma",function(e){var t,n;for(entry_count=e.readUint32(),this.associations=[],t=0;t<entry_count;t++){var i={},r=(this.associations.push(i),this.version<1?i.id=e.readUint16():i.id=e.readUint32(),e.readUint8());for(i.props=[],n=0;n<r;n++){var a=e.readUint8(),o={};i.props.push(o),o.essential=(128&a)>>7==1,1&this.flags?o.property_index=(127&a)<<8|e.readUint8():o.property_index=127&a}}}),E.createFullBoxCtor("iref",function(e){var t;for(this.references=[];e.getPosition()<this.start+this.size;){if((t=E.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==E.OK)return;(t=new(0===this.version?E.SingleItemTypeReferenceBox:E.SingleItemTypeReferenceBoxLarge)(t.type,t.size,t.hdr_size,t.start)).write===E.Box.prototype.write&&"mdat"!==t.type&&(d.warn("BoxParser",t.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),t.parseDataAndRewind(e)),t.parse(e),this.references.push(t)}}),E.createBoxCtor("irot",function(e){this.angle=3&e.readUint8()}),E.createFullBoxCtor("ispe",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),E.createFullBoxCtor("kind",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),E.createFullBoxCtor("leva",function(e){var t=e.readUint8();this.levels=[];for(var n=0;n<t;n++){var i={},r=((this.levels[n]=i).track_ID=e.readUint32(),e.readUint8());switch(i.padding_flag=r>>7,i.assignment_type=127&r,i.assignment_type){case 0:i.grouping_type=e.readString(4);break;case 1:i.grouping_type=e.readString(4),i.grouping_type_parameter=e.readUint32();break;case 2:case 3:break;case 4:i.sub_track_id=e.readUint32();break;default:d.warn("BoxParser","Unknown leva assignement type")}}}),E.createBoxCtor("lsel",function(e){this.layer_id=e.readUint16()}),E.createBoxCtor("maxr",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),E.createBoxCtor("mdcv",function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),E.createFullBoxCtor("mdhd",function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),E.createFullBoxCtor("mehd",function(e){1&this.flags&&(d.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),1==this.version?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),E.createFullBoxCtor("meta",function(e){this.boxes=[],E.ContainerBox.prototype.parse.call(this,e)}),E.createFullBoxCtor("mfhd",function(e){this.sequence_number=e.readUint32()}),E.createFullBoxCtor("mfro",function(e){this._size=e.readUint32()}),E.createFullBoxCtor("mvhd",function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),E.createBoxCtor("npck",function(e){this.packetssent=e.readUint32()}),E.createBoxCtor("nump",function(e){this.packetssent=e.readUint64()}),E.createFullBoxCtor("padb",function(e){var t=e.readUint32();this.padbits=[];for(var n=0;n<Math.floor((t+1)/2);n++)this.padbits=e.readUint8()}),E.createBoxCtor("pasp",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),E.createBoxCtor("payl",function(e){this.text=e.readString(this.size-this.hdr_size)}),E.createBoxCtor("payt",function(e){this.payloadID=e.readUint32();var t=e.readUint8();this.rtpmap_string=e.readString(t)}),E.createFullBoxCtor("pdin",function(e){var t=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var n=0;n<t;n++)this.rate[n]=e.readUint32(),this.initial_delay[n]=e.readUint32()}),E.createFullBoxCtor("pitm",function(e){0===this.version?this.item_id=e.readUint16():this.item_id=e.readUint32()}),E.createFullBoxCtor("pixi",function(e){var t;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],t=0;t<this.num_channels;t++)this.bits_per_channels[t]=e.readUint8()}),E.createBoxCtor("pmax",function(e){this.bytes=e.readUint32()}),E.createFullBoxCtor("prft",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),0===this.version?this.media_time=e.readUint32():this.media_time=e.readUint64()}),E.createFullBoxCtor("pssh",function(e){if(this.system_id=E.parseHex16(e),0<this.version){var t=e.readUint32();this.kid=[];for(var n=0;n<t;n++)this.kid[n]=E.parseHex16(e)}var i=e.readUint32();0<i&&(this.data=e.readUint8Array(i))}),E.createFullBoxCtor("clef",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),E.createFullBoxCtor("enof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),E.createFullBoxCtor("prof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),E.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),E.createBoxCtor("rtp ",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),E.createFullBoxCtor("saio",function(e){1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var t=e.readUint32();this.offset=[];for(var n=0;n<t;n++)0===this.version?this.offset[n]=e.readUint32():this.offset[n]=e.readUint64()}),E.createFullBoxCtor("saiz",function(e){1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var t=e.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var n=0;n<t;n++)this.sample_info_size[n]=e.readUint8()}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),E.createSampleEntryCtor(E.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),E.createSampleGroupCtor("alst",function(e){var t,n=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],t=0;t<n;t++)this.sample_offset[t]=e.readUint32();var i=this.description_length-4-4*n;for(this.num_output_samples=[],this.num_total_samples=[],t=0;t<i/4;t++)this.num_output_samples[t]=e.readUint16(),this.num_total_samples[t]=e.readUint16()}),E.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),E.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();for(var t=e.readUint8(),n=(this.durationFlag=t>>7,this.avgRateFlag=t>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[],e.readUint8()),i=0;i<n;i++){var r={};this.dependency.push(r),r.subSeqDirectionFlag=e.readUint8(),r.layerNumber=e.readUint8(),r.subSequenceIdentifier=e.readUint16()}}),E.createSampleGroupCtor("dtrt",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createSampleGroupCtor("mvif",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),E.createSampleGroupCtor("rap ",function(e){e=e.readUint8();this.num_leading_samples_known=e>>7,this.num_leading_samples=127&e}),E.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)d.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var t=0;t<this.operation_point_count;t++)this.available_bitrate[t]=e.readUint32(),this.target_rate_share[t]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),E.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),E.SampleGroupEntry.prototype.parse=function(e){d.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},E.createSampleGroupCtor("scif",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createSampleGroupCtor("scnm",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var t=e.readUint8();this.crypt_byte_block=t>>4,this.skip_byte_block=15&t,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=E.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,1===this.isProtected&&0===this.Per_Sample_IV_Size&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),E.createSampleGroupCtor("stsa",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createSampleGroupCtor("sync",function(e){e=e.readUint8();this.NAL_unit_type=63&e}),E.createSampleGroupCtor("tele",function(e){e=e.readUint8();this.level_independently_decodable=e>>7}),E.createSampleGroupCtor("tsas",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createSampleGroupCtor("tscl",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createSampleGroupCtor("vipr",function(e){d.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),E.createFullBoxCtor("sbgp",function(e){this.grouping_type=e.readString(4),1===this.version?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i={};this.entries.push(i),i.sample_count=e.readInt32(),i.group_description_index=e.readInt32()}}),E.createFullBoxCtor("schm",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),1&this.flags&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),E.createBoxCtor("sdp ",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),E.createFullBoxCtor("sdtp",function(e){var t,n=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var i=0;i<n;i++)t=e.readUint8(),this.is_leading[i]=t>>6,this.sample_depends_on[i]=t>>4&3,this.sample_is_depended_on[i]=t>>2&3,this.sample_has_redundancy[i]=3&t}),E.createFullBoxCtor("senc"),E.createFullBoxCtor("sgpd",function(e){this.grouping_type=e.readString(4),d.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=e.readUint32():this.default_length=0,2<=this.version&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i=new(E[this.grouping_type+"SampleGroupEntry"]?E[this.grouping_type+"SampleGroupEntry"]:E.SampleGroupEntry)(this.grouping_type);this.entries.push(i),1===this.version&&0===this.default_length?i.description_length=e.readUint32():i.description_length=this.default_length,i.write===E.SampleGroupEntry.prototype.write&&(d.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),i.data=e.readUint8Array(i.description_length),e.position-=i.description_length),i.parse(e)}}),E.createFullBoxCtor("sidx",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),0===this.version?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var t=e.readUint16(),n=0;n<t;n++){var i={},r=(this.references.push(i),e.readUint32());i.reference_type=r>>31&1,i.referenced_size=2147483647&r,i.subsegment_duration=e.readUint32(),r=e.readUint32(),i.starts_with_SAP=r>>31&1,i.SAP_type=r>>28&7,i.SAP_delta_time=268435455&r}}),E.SingleItemTypeReferenceBox=function(e,t,n,i){E.Box.call(this,e,t),this.hdr_size=n,this.start=i},E.SingleItemTypeReferenceBox.prototype=new E.Box,E.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var t=e.readUint16();this.references=[];for(var n=0;n<t;n++)this.references[n]=e.readUint16()},E.SingleItemTypeReferenceBoxLarge=function(e,t,n,i){E.Box.call(this,e,t),this.hdr_size=n,this.start=i},E.SingleItemTypeReferenceBoxLarge.prototype=new E.Box,E.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var t=e.readUint16();this.references=[];for(var n=0;n<t;n++)this.references[n]=e.readUint32()},E.createFullBoxCtor("SmDm",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),E.createFullBoxCtor("smhd",function(e){this.balance=e.readUint16(),e.readUint16()}),E.createFullBoxCtor("ssix",function(e){this.subsegments=[];for(var t=e.readUint32(),n=0;n<t;n++)for(var i={},r=(this.subsegments.push(i),i.ranges=[],e.readUint32()),a=0;a<r;a++){var o={};i.ranges.push(o),o.level=e.readUint8(),o.range_size=e.readUint24()}}),E.createFullBoxCtor("stco",function(e){var t=e.readUint32();if(this.chunk_offsets=[],0===this.version)for(var n=0;n<t;n++)this.chunk_offsets.push(e.readUint32())}),E.createFullBoxCtor("stdp",function(e){var t=(this.size-this.hdr_size)/2;this.priority=[];for(var n=0;n<t;n++)this.priority[n]=e.readUint16()}),E.createFullBoxCtor("sthd"),E.createFullBoxCtor("stri",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var t=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var n=0;n<t;n++)this.attribute_list[n]=e.readUint32()}),E.createFullBoxCtor("stsc",function(e){var t,n=e.readUint32();if(this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(t=0;t<n;t++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),E.createFullBoxCtor("stsd",function(e){var t,n,i,r;for(this.entries=[],i=e.readUint32(),t=1;t<=i;t++){if((n=E.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==E.OK)return;E[n.type+"SampleEntry"]?((r=new E[n.type+"SampleEntry"](n.size)).hdr_size=n.hdr_size,r.start=n.start):(d.warn("BoxParser","Unknown sample entry type: "+n.type),r=new E.SampleEntry(n.type,n.size,n.hdr_size,n.start)),r.write===E.SampleEntry.prototype.write&&(d.info("BoxParser","SampleEntry "+r.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),r.parseDataAndRewind(e)),r.parse(e),this.entries.push(r)}}),E.createFullBoxCtor("stsg",function(e){this.grouping_type=e.readUint32();var t=e.readUint16();this.group_description_index=[];for(var n=0;n<t;n++)this.group_description_index[n]=e.readUint32()}),E.createFullBoxCtor("stsh",function(e){var t,n=e.readUint32();if(this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(t=0;t<n;t++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),E.createFullBoxCtor("stss",function(e){var t,n=e.readUint32();if(0===this.version)for(this.sample_numbers=[],t=0;t<n;t++)this.sample_numbers.push(e.readUint32())}),E.createFullBoxCtor("stsz",function(e){var t;if(this.sample_sizes=[],0===this.version)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),t=0;t<this.sample_count;t++)0===this.sample_size?this.sample_sizes.push(e.readUint32()):this.sample_sizes[t]=this.sample_size}),E.createFullBoxCtor("stts",function(e){var t,n,i=e.readUint32();if(this.sample_counts=[],this.sample_deltas=[],0===this.version)for(t=0;t<i;t++)this.sample_counts.push(e.readUint32()),(n=e.readInt32())<0&&(d.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),n=1),this.sample_deltas.push(n)}),E.createFullBoxCtor("stvi",function(e){var t,n=e.readUint32(),n=(this.single_view_allowed=3&n,this.stereo_scheme=e.readUint32(),e.readUint32());for(this.stereo_indication_type=e.readString(n),this.boxes=[];e.getPosition()<this.start+this.size;){if((t=E.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==E.OK)return;t=t.box,this.boxes.push(t),this[t.type]=t}}),E.createBoxCtor("styp",function(e){E.ftypBox.prototype.parse.call(this,e)}),E.createFullBoxCtor("stz2",function(e){var t,n;if(this.sample_sizes=[],0===this.version)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),n=e.readUint32(),4===this.field_size)for(t=0;t<n;t+=2){var i=e.readUint8();this.sample_sizes[t]=i>>4&15,this.sample_sizes[t+1]=15&i}else if(8===this.field_size)for(t=0;t<n;t++)this.sample_sizes[t]=e.readUint8();else if(16===this.field_size)for(t=0;t<n;t++)this.sample_sizes[t]=e.readUint16();else d.error("BoxParser","Error in length field in stz2 box")}),E.createFullBoxCtor("subs",function(e){var t,n,i,r=e.readUint32();for(this.entries=[],t=0;t<r;t++){var a={};if((this.entries[t]=a).sample_delta=e.readUint32(),a.subsamples=[],0<(i=e.readUint16()))for(n=0;n<i;n++){var o={};a.subsamples.push(o),1==this.version?o.size=e.readUint32():o.size=e.readUint16(),o.priority=e.readUint8(),o.discardable=e.readUint8(),o.codec_specific_parameters=e.readUint32()}}}),E.createFullBoxCtor("tenc",function(e){var t;e.readUint8(),0===this.version?e.readUint8():(t=e.readUint8(),this.default_crypt_byte_block=t>>4&15,this.default_skip_byte_block=15&t),this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=E.parseHex16(e),1===this.default_isProtected&&0===this.default_Per_Sample_IV_Size&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),E.createFullBoxCtor("tfdt",function(e){1==this.version?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),E.createFullBoxCtor("tfhd",function(e){var t=0;this.track_id=e.readUint32(),this.size-this.hdr_size>t&&this.flags&E.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),t+=8):this.base_data_offset=0,this.size-this.hdr_size>t&&this.flags&E.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),t+=4):this.default_sample_description_index=0,this.size-this.hdr_size>t&&this.flags&E.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),t+=4):this.default_sample_duration=0,this.size-this.hdr_size>t&&this.flags&E.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),t+=4):this.default_sample_size=0,this.size-this.hdr_size>t&&this.flags&E.TFHD_FLAG_SAMPLE_FLAGS?this.default_sample_flags=e.readUint32():this.default_sample_flags=0}),E.createFullBoxCtor("tfra",function(e){this.track_ID=e.readUint32(),e.readUint24();for(var t=e.readUint8(),n=(this.length_size_of_traf_num=t>>4&3,this.length_size_of_trun_num=t>>2&3,this.length_size_of_sample_num=3&t,this.entries=[],e.readUint32()),i=0;i<n;i++)1===this.version?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),E.createFullBoxCtor("tkhd",function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),E.createBoxCtor("tmax",function(e){this.time=e.readUint32()}),E.createBoxCtor("tmin",function(e){this.time=e.readUint32()}),E.createBoxCtor("totl",function(e){this.bytessent=e.readUint32()}),E.createBoxCtor("tpay",function(e){this.bytessent=e.readUint32()}),E.createBoxCtor("tpyl",function(e){this.bytessent=e.readUint64()}),E.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},E.createTrackGroupCtor("msrc"),E.TrackReferenceTypeBox=function(e,t,n,i){E.Box.call(this,e,t),this.hdr_size=n,this.start=i},E.TrackReferenceTypeBox.prototype=new E.Box,E.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},E.trefBox.prototype.parse=function(e){for(var t;e.getPosition()<this.start+this.size;){if((t=E.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==E.OK)return;(t=new E.TrackReferenceTypeBox(t.type,t.size,t.hdr_size,t.start)).write===E.Box.prototype.write&&"mdat"!==t.type&&(d.info("BoxParser","TrackReference "+t.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),t.parseDataAndRewind(e)),t.parse(e),this.boxes.push(t)}},E.createFullBoxCtor("trep",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;){if((ret=E.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==E.OK)return;box=ret.box,this.boxes.push(box)}}),E.createFullBoxCtor("trex",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),E.createBoxCtor("trpy",function(e){this.bytessent=e.readUint64()}),E.createFullBoxCtor("trun",function(e){var t=0;if(this.sample_count=e.readUint32(),this.size-this.hdr_size>(t+=4)&&this.flags&E.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),t+=4):this.data_offset=0,this.size-this.hdr_size>t&&this.flags&E.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),t+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>t)for(var n=0;n<this.sample_count;n++)this.flags&E.TRUN_FLAGS_DURATION&&(this.sample_duration[n]=e.readUint32()),this.flags&E.TRUN_FLAGS_SIZE&&(this.sample_size[n]=e.readUint32()),this.flags&E.TRUN_FLAGS_FLAGS&&(this.sample_flags[n]=e.readUint32()),this.flags&E.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[n]=e.readUint32():this.sample_composition_time_offset[n]=e.readInt32())}),E.createFullBoxCtor("tsel",function(e){this.switch_group=e.readUint32();var t=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var n=0;n<t;n++)this.attribute_list[n]=e.readUint32()}),E.createFullBoxCtor("txtC",function(e){this.config=e.readCString()}),E.createFullBoxCtor("url ",function(e){1!==this.flags&&(this.location=e.readCString())}),E.createFullBoxCtor("urn ",function(e){this.name=e.readCString(),0<this.size-this.hdr_size-this.name.length-1&&(this.location=e.readCString())}),E.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),E.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(e){this.system_id=E.parseHex16(e);var t=e.readUint32();0<t&&(this.data=e.readUint8Array(t))}),E.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),E.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=E.parseHex16(e)}),E.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var t=0;t<this.fragment_count;t++){var n={},i=0,r=0,r=1===this.version?(i=e.readUint64(),e.readUint64()):(i=e.readUint32(),e.readUint32());n.absolute_time=i,n.absolute_duration=r,this.entries.push(n)}}),E.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(e){1===this.version?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),E.createFullBoxCtor("vmhd",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),E.createFullBoxCtor("vpcC",function(e){var t;1===this.version?(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4,this.chromaSubsampling=t>>1&7,this.videoFullRangeFlag=1&t,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8()):(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4&15,this.colorSpace=15&t,t=e.readUint8(),this.chromaSubsampling=t>>4&15,this.transferFunction=t>>1&7,this.videoFullRangeFlag=1&t),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)}),E.createBoxCtor("vttC",function(e){this.text=e.readString(this.size-this.hdr_size)}),E.createFullBoxCtor("vvcC",function(e){var t,n={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(e){this.held_bits=e.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(e){this.held_bits=e.readUint16(),this.num_held_bits=16},extract_bits:function(e){var t=this.held_bits>>this.num_held_bits-e&(1<<e)-1;return this.num_held_bits-=e,t}};if(n.stream_read_1_bytes(e),n.extract_bits(5),this.lengthSizeMinusOne=n.extract_bits(2),this.ptl_present_flag=n.extract_bits(1),this.ptl_present_flag){if(n.stream_read_2_bytes(e),this.ols_idx=n.extract_bits(9),this.num_sublayers=n.extract_bits(3),this.constant_frame_rate=n.extract_bits(2),this.chroma_format_idc=n.extract_bits(2),n.stream_read_1_bytes(e),this.bit_depth_minus8=n.extract_bits(3),n.extract_bits(5),n.stream_read_2_bytes(e),n.extract_bits(2),this.num_bytes_constraint_info=n.extract_bits(6),this.general_profile_idc=n.extract_bits(7),this.general_tier_flag=n.extract_bits(1),this.general_level_idc=e.readUint8(),n.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=n.extract_bits(1),this.ptl_multilayer_enabled_flag=n.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(s=0;s<this.num_bytes_constraint_info-1;s++){var i=n.extract_bits(6),r=(n.stream_read_1_bytes(e),n.extract_bits(2));this.general_constraint_info[s]=i<<2|r}this.general_constraint_info[this.num_bytes_constraint_info-1]=n.extract_bits(6)}else n.extract_bits(6);for(n.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,t=this.num_sublayers-2;0<=t;--t){var a=n.extract_bits(1);this.ptl_sublayer_present_mask|=a<<t}for(t=this.num_sublayers;t<=8&&1<this.num_sublayers;++t)n.extract_bits(1);for(t=this.num_sublayers-2;0<=t;--t)this.ptl_sublayer_present_mask&1<<t&&(this.sublayer_level_idc[t]=e.readUint8());if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(s=0;s<this.ptl_num_sub_profiles;s++)this.general_sub_profile_idc.push(e.readUint32());this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}this.nalu_arrays=[];for(var o=e.readUint8(),s=0;s<o;s++){var l=[],u=(this.nalu_arrays.push(l),n.stream_read_1_bytes(e),l.completeness=n.extract_bits(1),n.extract_bits(2),l.nalu_type=n.extract_bits(5),1);for(13!=l.nalu_type&&12!=l.nalu_type&&(u=e.readUint16()),t=0;t<u;t++){var c=e.readUint16();l.push({data:e.readUint8Array(c),length:c})}}}),E.createFullBoxCtor("vvnC",function(e){var t=strm.readUint8();this.lengthSizeMinusOne=3&t}),E.SampleEntry.prototype.isVideo=function(){return!1},E.SampleEntry.prototype.isAudio=function(){return!1},E.SampleEntry.prototype.isSubtitle=function(){return!1},E.SampleEntry.prototype.isMetadata=function(){return!1},E.SampleEntry.prototype.isHint=function(){return!1},E.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},E.SampleEntry.prototype.getWidth=function(){return""},E.SampleEntry.prototype.getHeight=function(){return""},E.SampleEntry.prototype.getChannelCount=function(){return""},E.SampleEntry.prototype.getSampleRate=function(){return""},E.SampleEntry.prototype.getSampleSize=function(){return""},E.VisualSampleEntry.prototype.isVideo=function(){return!0},E.VisualSampleEntry.prototype.getWidth=function(){return this.width},E.VisualSampleEntry.prototype.getHeight=function(){return this.height},E.AudioSampleEntry.prototype.isAudio=function(){return!0},E.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},E.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},E.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},E.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},E.MetadataSampleEntry.prototype.isMetadata=function(){return!0},E.decimalToHex=function(e,t){var n=Number(e).toString(16);for(t=null==t?2:t;n.length<t;)n="0"+n;return n},E.avc1SampleEntry.prototype.getCodec=E.avc2SampleEntry.prototype.getCodec=E.avc3SampleEntry.prototype.getCodec=E.avc4SampleEntry.prototype.getCodec=function(){var e=E.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+E.decimalToHex(this.avcC.AVCProfileIndication)+E.decimalToHex(this.avcC.profile_compatibility)+E.decimalToHex(this.avcC.AVCLevelIndication):e},E.hev1SampleEntry.prototype.getCodec=E.hvc1SampleEntry.prototype.getCodec=function(){var e=E.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(e+=".",this.hvcC.general_profile_space){case 0:e+="";break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C"}for(var e=e+this.hvcC.general_profile_idc+".",t=this.hvcC.general_profile_compatibility,n=0,i=0;i<32&&(n|=1&t,31!=i);i++)n<<=1,t>>=1;e=e+E.decimalToHex(n,0)+".",0===this.hvcC.general_tier_flag?e+="L":e+="H",e+=this.hvcC.general_level_idc;var r=!1,a="";for(i=5;0<=i;i--)(this.hvcC.general_constraint_indicator[i]||r)&&(a="."+E.decimalToHex(this.hvcC.general_constraint_indicator[i],0)+a,r=!0);e+=a}return e},E.vvc1SampleEntry.prototype.getCodec=E.vvi1SampleEntry.prototype.getCodec=function(){var e=E.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){e+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?e+=".H":e+=".L",e+=this.vvcC.general_level_idc;var t="";if(this.vvcC.general_constraint_info){var n,i=[],r=0,r=(r|=this.vvcC.ptl_frame_only_constraint<<7)|this.vvcC.ptl_multilayer_enabled<<6;for(l=0;l<this.vvcC.general_constraint_info.length;++l)r|=this.vvcC.general_constraint_info[l]>>2&63,i.push(r),r&&(n=l),r=this.vvcC.general_constraint_info[l]>>2&3;if(void 0===n)t=".CA";else{for(var t=".C",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",o=0,s=0,l=0;l<=n;++l)for(o=o<<8|i[l],s+=8;5<=s;)t+=a[o>>s-5&31],o&=(1<<(s-=5))-1;s&&(t+=a[31&(o<<=5-s)])}}e+=t}return e},E.mp4aSampleEntry.prototype.getCodec=function(){var e,t,n=E.SampleEntry.prototype.getCodec.call(this);return this.esds&&this.esds.esd?(e=this.esds.esd.getOTI(),t=this.esds.esd.getAudioConfig(),n+"."+E.decimalToHex(e)+(t?"."+t:"")):n},E.stxtSampleEntry.prototype.getCodec=function(){var e=E.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},E.vp08SampleEntry.prototype.getCodec=E.vp09SampleEntry.prototype.getCodec=function(){var e=E.SampleEntry.prototype.getCodec.call(this),t=this.vpcC.level,n=this.vpcC.bitDepth;return e+".0"+this.vpcC.profile+"."+(t=0==t?"00":t)+"."+(n=8==n?"08":n)},E.av01SampleEntry.prototype.getCodec=function(){var e,t=E.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;return 2===this.av1C.seq_profile&&1===this.av1C.high_bitdepth?e=1===this.av1C.twelve_bit?"12":"10":this.av1C.seq_profile<=2&&(e=1===this.av1C.high_bitdepth?"10":"08"),t+"."+this.av1C.seq_profile+"."+(n=n<10?"0"+n:n)+(this.av1C.seq_tier_0?"H":"M")+"."+e},E.Box.prototype.writeHeader=function(e,t){this.size+=8,this.size>s&&(this.size+=8),"uuid"===this.type&&(this.size+=16),d.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(t||"")),this.size>s?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),"uuid"===this.type&&e.writeUint8Array(this.uuid),this.size>s&&e.writeUint64(this.size)},E.FullBox.prototype.writeHeader=function(e){this.size+=4,E.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},E.Box.prototype.write=function(e){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},E.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&(this.boxes[t].write(e),this.size+=this.boxes[t].size);d.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},E.TrackReferenceTypeBox.prototype.write=function(e){this.size=4*this.track_ids.length,this.writeHeader(e),e.writeUint32Array(this.track_ids)},E.avcCBox.prototype.write=function(e){var t;for(this.size=7,t=0;t<this.SPS.length;t++)this.size+=2+this.SPS[t].length;for(t=0;t<this.PPS.length;t++)this.size+=2+this.PPS[t].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),t=0;t<this.SPS.length;t++)e.writeUint16(this.SPS[t].length),e.writeUint8Array(this.SPS[t].nalu);for(e.writeUint8(this.PPS.length),t=0;t<this.PPS.length;t++)e.writeUint16(this.PPS[t].length),e.writeUint8Array(this.PPS[t].nalu);this.ext&&e.writeUint8Array(this.ext)},E.co64Box.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),t=0;t<this.chunk_offsets.length;t++)e.writeUint64(this.chunk_offsets[t])},E.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},E.cttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),1===this.version?e.writeInt32(this.sample_offsets[t]):e.writeUint32(this.sample_offsets[t])},E.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;d.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},E.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},E.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var n=this.entries[t];e.writeUint32(n.segment_duration),e.writeInt32(n.media_time),e.writeInt16(n.media_rate_integer),e.writeInt16(n.media_rate_fraction)}},E.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},E.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var t=0;t<this.compatible_brands.length;t++)e.writeString(this.compatible_brands[t],null,4)},E.hdlrBox.prototype.write=function(e){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},E.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},E.mdhdBox.prototype.write=function(e){this.size=20,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},E.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},E.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},E.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=96,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},E.SampleEntry.prototype.writeHeader=function(e){this.size=8,E.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},E.SampleEntry.prototype.writeFooter=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e),this.size+=this.boxes[t].size;d.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},E.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,d.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},E.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=70,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},E.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=20,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},E.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},E.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},E.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var n=this.entries[t];e.writeInt32(n.sample_count),e.writeInt32(n.group_description_index)}},E.sgpdBox.prototype.write=function(e){var t,n;for(this.flags=0,this.size=12,t=0;t<this.entries.length;t++)n=this.entries[t],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=n.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),1===this.version&&e.writeUint32(this.default_length),2<=this.version&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),t=0;t<this.entries.length;t++)n=this.entries[t],1===this.version&&0===this.default_length&&e.writeUint32(n.description_length),n.write(e)},E.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var t=0;t<this.references.length;t++){var n=this.references[t];e.writeUint32(n.reference_type<<31|n.referenced_size),e.writeUint32(n.subsegment_duration),e.writeUint32(n.starts_with_SAP<<31|n.SAP_type<<28|n.SAP_delta_time)}},E.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},E.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},E.stscBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),t=0;t<this.first_chunk.length;t++)e.writeUint32(this.first_chunk[t]),e.writeUint32(this.samples_per_chunk[t]),e.writeUint32(this.sample_description_index[t])},E.stsdBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;d.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},E.stshBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),t=0;t<this.shadowed_sample_numbers.length;t++)e.writeUint32(this.shadowed_sample_numbers[t]),e.writeUint32(this.sync_sample_numbers[t])},E.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},E.stszBox.prototype.write=function(e){var t,n=!0;if(this.version=0,(this.flags=0)<this.sample_sizes.length)for(t=0;t+1<this.sample_sizes.length;){if(this.sample_sizes[t+1]!==this.sample_sizes[0]){n=!1;break}t++}else n=!1;this.size=8,n||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),n?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),n||e.writeUint32Array(this.sample_sizes)},E.sttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),e.writeUint32(this.sample_deltas[t])},E.tfdtBox.prototype.write=function(e){var t=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>t?1:0,this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(e),1===this.version?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},E.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&E.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&E.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&E.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&E.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&E.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&E.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&E.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&E.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&E.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&E.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},E.tkhdBox.prototype.write=function(e){this.version=0,this.size=80,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},E.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},E.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&E.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&E.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&E.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&E.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&E.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&E.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&E.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&E.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var t=0;t<this.sample_count;t++)this.flags&E.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[t]),this.flags&E.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[t]),this.flags&E.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[t]),this.flags&E.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?e.writeUint32(this.sample_composition_time_offset[t]):e.writeInt32(this.sample_composition_time_offset[t]))},E["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},E["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},E.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},E.cttsBox.prototype.unpack=function(e){for(var t,n=0,i=0;i<this.sample_counts.length;i++)for(t=0;t<this.sample_counts[i];t++)e[n].pts=e[n].dts+this.sample_offsets[i],n++},E.sttsBox.prototype.unpack=function(e){for(var t,n=0,i=0;i<this.sample_counts.length;i++)for(t=0;t<this.sample_counts[i];t++)e[n].dts=0===n?0:e[n-1].dts+this.sample_deltas[i],n++},E.stcoBox.prototype.unpack=function(e){for(var t=0;t<this.chunk_offsets.length;t++)e[t].offset=this.chunk_offsets[t]},E.stscBox.prototype.unpack=function(e){for(var t,n,i=0,r=0,a=0;a<this.first_chunk.length;a++)for(t=0;t<(a+1<this.first_chunk.length?this.first_chunk[a+1]:1/0);t++)for(r++,n=0;n<this.samples_per_chunk[a];n++){if(!e[i])return;e[i].description_index=this.sample_description_index[a],e[i].chunk_index=r,i++}},E.stszBox.prototype.unpack=function(e){for(var t=0;t<this.sample_sizes.length;t++)e[t].size=this.sample_sizes[t]},E.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],E.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],E.boxEqualFields=function(e,t){if(e&&!t)return!1;for(var n in e)if(!(-1<E.DIFF_BOXES_PROP_NAMES.indexOf(n)||e[n]instanceof E.Box||t[n]instanceof E.Box||void 0===e[n]||void 0===t[n]||"function"==typeof e[n]||"function"==typeof t[n]||e.subBoxNames&&-1<e.subBoxNames.indexOf(n.slice(0,4))||t.subBoxNames&&-1<t.subBoxNames.indexOf(n.slice(0,4))||"data"===n||"start"===n||"size"===n||"creation_time"===n||"modification_time"===n||-1<E.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(n)||e[n]===t[n]))return!1;return!0},E.boxEqual=function(e,t){if(!E.boxEqualFields(e,t))return!1;for(var n=0;n<E.DIFF_BOXES_PROP_NAMES.length;n++){var i=E.DIFF_BOXES_PROP_NAMES[n];if(e[i]&&t[i]&&!E.boxEqual(e[i],t[i]))return!1}return!0},a.prototype.parseSample=function(e){var t,n={resources:[]},i=new h(e.data.buffer);if(e.subsamples&&0!==e.subsamples.length){if(n.documentString=i.readString(e.subsamples[0].size),1<e.subsamples.length)for(t=1;t<e.subsamples.length;t++)n.resources[t]=i.readUint8Array(e.subsamples[t].size)}else n.documentString=i.readString(e.data.length);return"undefined"!=typeof DOMParser&&(n.document=(new DOMParser).parseFromString(n.documentString,"application/xml")),n},o.prototype.parseSample=function(e){return new h(e.data.buffer).readString(e.data.length)},o.prototype.parseConfig=function(e){e=new h(e.buffer);return e.readUint32(),e.readCString()},t.XMLSubtitlein4Parser=a,t.Textin4Parser=o,R.prototype.setSegmentOptions=function(e,t,n){var i,r=this.getTrackById(e);r&&(this.fragmentedTracks.push(i={}),i.id=e,i.user=t,(i.trak=r).nextSample=0,i.segmentStream=null,i.nb_samples=1e3,i.rapAlignement=!0,n)&&(n.nbSamples&&(i.nb_samples=n.nbSamples),n.rapAlignement)&&(i.rapAlignement=n.rapAlignement)},R.prototype.unsetSegmentOptions=function(e){for(var t=-1,n=0;n<this.fragmentedTracks.length;n++)this.fragmentedTracks[n].id==e&&(t=n);-1<t&&this.fragmentedTracks.splice(t,1)},R.prototype.setExtractionOptions=function(e,t,n){var i,r=this.getTrackById(e);r&&(this.extractedTracks.push(i={}),i.id=e,i.user=t,(i.trak=r).nextSample=0,i.nb_samples=1e3,i.samples=[],n)&&n.nbSamples&&(i.nb_samples=n.nbSamples)},R.prototype.unsetExtractionOptions=function(e){for(var t=-1,n=0;n<this.extractedTracks.length;n++)this.extractedTracks[n].id==e&&(t=n);-1<t&&this.extractedTracks.splice(t,1)},R.prototype.parse=function(){var e;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(!this.processIncompleteMdat())return}else if(this.saveParsePosition&&this.saveParsePosition(),(e=E.parseOneBox(this.stream,!1)).code===E.ERR_NOT_ENOUGH_DATA){if(!this.processIncompleteBox)return;if(!this.processIncompleteBox(e))return}else{var t,n="uuid"!==(t=e.box).type?t.type:t.uuid;switch(this.boxes.push(t),n){case"mdat":this.mdats.push(t);break;case"moof":this.moofs.push(t);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[n]&&d.warn("ISOFile","Duplicate Box of type: "+n+", overriding previous occurrence"),this[n]=t}this.updateUsedBytes&&this.updateUsedBytes(t,e)}},R.prototype.checkBuffer=function(e){if(null==e)throw"Buffer must be defined and non empty";if(void 0===e.fileStart)throw"Buffer must have a fileStart property";return 0===e.byteLength?(d.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(d.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),!!this.stream.initialized()||(d.warn("ISOFile","Not ready to start parsing"),!1))},R.prototype.appendBuffer=function(e,t){var n;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart)&&this.onMoovStart(),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(t),this.nextSeekPosition?(n=this.nextSeekPosition,this.nextSeekPosition=void 0):n=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(n=this.stream.getEndFilePositionAfter(n))):n=this.nextParsePosition||0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems)&&this.processItems(this.onItem),this.stream.cleanBuffers&&(d.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+n),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),d.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),n},R.prototype.getInfo=function(){var e,t,n,i,r,a,o={},s=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(o.hasMoov=!0,o.duration=this.moov.mvhd.duration,o.timescale=this.moov.mvhd.timescale,o.isFragmented=null!=this.moov.mvex,o.isFragmented&&this.moov.mvex.mehd&&(o.fragment_duration=this.moov.mvex.mehd.fragment_duration),o.isProgressive=this.isProgressive,o.hasIOD=null!=this.moov.iods,o.brands=[],o.brands.push(this.ftyp.major_brand),o.brands=o.brands.concat(this.ftyp.compatible_brands),o.created=new Date(s+1e3*this.moov.mvhd.creation_time),o.modified=new Date(s+1e3*this.moov.mvhd.modification_time),o.tracks=[],o.audioTracks=[],o.videoTracks=[],o.subtitleTracks=[],o.metadataTracks=[],o.hintTracks=[],o.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(a=(n=this.moov.traks[e]).mdia.minf.stbl.stsd.entries[0],o.tracks.push(i={}),i.id=n.tkhd.track_id,i.name=n.mdia.hdlr.name,i.references=[],n.tref)for(t=0;t<n.tref.boxes.length;t++)i.references.push(r={}),r.type=n.tref.boxes[t].type,r.track_ids=n.tref.boxes[t].track_ids;n.edts&&(i.edits=n.edts.elst.entries),i.created=new Date(s+1e3*n.tkhd.creation_time),i.modified=new Date(s+1e3*n.tkhd.modification_time),i.movie_duration=n.tkhd.duration,i.movie_timescale=o.timescale,i.layer=n.tkhd.layer,i.alternate_group=n.tkhd.alternate_group,i.volume=n.tkhd.volume,i.matrix=n.tkhd.matrix,i.track_width=n.tkhd.width/65536,i.track_height=n.tkhd.height/65536,i.timescale=n.mdia.mdhd.timescale,i.cts_shift=n.mdia.minf.stbl.cslg,i.duration=n.mdia.mdhd.duration,i.samples_duration=n.samples_duration,i.codec=a.getCodec(),i.kind=n.udta&&n.udta.kinds.length?n.udta.kinds[0]:{schemeURI:"",value:""},i.language=n.mdia.elng?n.mdia.elng.extended_language:n.mdia.mdhd.languageString,i.nb_samples=n.samples.length,i.size=n.samples_size,i.bitrate=8*i.size*i.timescale/i.samples_duration,a.isAudio()?(i.type="audio",o.audioTracks.push(i),i.audio={},i.audio.sample_rate=a.getSampleRate(),i.audio.channel_count=a.getChannelCount(),i.audio.sample_size=a.getSampleSize()):a.isVideo()?(i.type="video",o.videoTracks.push(i),i.video={},i.video.width=a.getWidth(),i.video.height=a.getHeight()):(a.isSubtitle()?(i.type="subtitles",o.subtitleTracks):a.isHint()?(i.type="metadata",o.hintTracks):a.isMetadata()?(i.type="metadata",o.metadataTracks):(i.type="metadata",o.otherTracks)).push(i)}else o.hasMoov=!1;if(o.mime="",o.hasMoov&&o.tracks){for(o.videoTracks&&0<o.videoTracks.length?o.mime+='video/mp4; codecs="':o.audioTracks&&0<o.audioTracks.length?o.mime+='audio/mp4; codecs="':o.mime+='application/mp4; codecs="',e=0;e<o.tracks.length;e++)0!==e&&(o.mime+=","),o.mime+=o.tracks[e].codec;o.mime+='"; profiles="',o.mime+=this.ftyp.compatible_brands.join(),o.mime+='"'}return o},R.prototype.processSamples=function(e){var t;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(t=0;t<this.fragmentedTracks.length;t++)for(var n=this.fragmentedTracks[t],i=n.trak;i.nextSample<i.samples.length&&this.sampleProcessingStarted;){d.debug("ISOFile","Creating media fragment on track #"+n.id+" for sample "+i.nextSample);var r=this.createFragment(n.id,i.nextSample,n.segmentStream);if(!r)break;if(n.segmentStream=r,i.nextSample++,(i.nextSample%n.nb_samples==0||e||i.nextSample>=i.samples.length)&&(d.info("ISOFile","Sending fragmented data on track #"+n.id+" for samples ["+Math.max(0,i.nextSample-n.nb_samples)+","+(i.nextSample-1)+"]"),d.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(n.id,n.user,n.segmentStream.buffer,i.nextSample,e||i.nextSample>=i.samples.length),n.segmentStream=null,n!==this.fragmentedTracks[t]))break}if(null!==this.onSamples)for(t=0;t<this.extractedTracks.length;t++){var a=this.extractedTracks[t];for(i=a.trak;i.nextSample<i.samples.length&&this.sampleProcessingStarted;){d.debug("ISOFile","Exporting on track #"+a.id+" sample #"+i.nextSample);var o=this.getSample(i,i.nextSample);if(!o)break;if(i.nextSample++,a.samples.push(o),(i.nextSample%a.nb_samples==0||i.nextSample>=i.samples.length)&&(d.debug("ISOFile","Sending samples on track #"+a.id+" for sample "+i.nextSample),this.onSamples&&this.onSamples(a.id,a.user,a.samples),a.samples=[],a!==this.extractedTracks[t]))break}}}},R.prototype.getBox=function(e){e=this.getBoxes(e,!0);return e.length?e[0]:null},R.prototype.getBoxes=function(e,t){var n=[];return R._sweep.call(this,e,n,t),n},R._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;R._sweep.call(this.boxes[i],e,t,n)}},R.prototype.getTrackSamplesInfo=function(e){e=this.getTrackById(e);if(e)return e.samples},R.prototype.getTrackSample=function(e,t){e=this.getTrackById(e);return this.getSample(e,t)},R.prototype.releaseUsedSamples=function(e,t){var n=0,i=this.getTrackById(e);i.lastValidSample||(i.lastValidSample=0);for(var r=i.lastValidSample;r<t;r++)n+=this.releaseSample(i,r);d.info("ISOFile","Track #"+e+" released samples up to "+t+" (released size: "+n+", remaining: "+this.samplesDataSize+")"),i.lastValidSample=t},R.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},R.prototype.stop=function(){this.sampleProcessingStarted=!1},R.prototype.flush=function(){d.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},R.prototype.seekTrack=function(e,t,n){var i,r,a,o,s=0,l=0;if(0===n.samples.length)return d.info("ISOFile","No sample in track, cannot seek! Using time "+d.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(i=0;i<n.samples.length;i++){if(r=n.samples[i],0===i)l=0,o=r.timescale;else if(r.cts>e*r.timescale){l=i-1;break}t&&r.is_sync&&(s=i)}for(t&&(l=s),e=n.samples[l].cts,n.nextSample=l;n.samples[l].alreadyRead===n.samples[l].size&&n.samples[l+1];)l++;return a=n.samples[l].offset+n.samples[l].alreadyRead,d.info("ISOFile","Seeking to "+(t?"RAP":"")+" sample #"+n.nextSample+" on track "+n.tkhd.track_id+", time "+d.getDurationString(e,o)+" and offset: "+a),{offset:a,time:e/o}},R.prototype.seek=function(e,t){var n,i,r=this.moov,a={offset:1/0,time:1/0};if(this.moov){for(i=0;i<r.traks.length;i++)n=r.traks[i],(n=this.seekTrack(e,t,n)).offset<a.offset&&(a.offset=n.offset),n.time<a.time&&(a.time=n.time);return d.info("ISOFile","Seeking at time "+d.getDurationString(a.time,1)+" needs a buffer with a fileStart position of "+a.offset),a.offset===1/0?a={offset:this.nextParsePosition,time:0}:a.offset=this.stream.getEndFilePositionAfter(a.offset),d.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+a.offset),a}throw"Cannot seek: moov not received!"},R.prototype.equal=function(e){for(var t=0;t<this.boxes.length&&t<e.boxes.length;){var n=this.boxes[t],i=e.boxes[t];if(!E.boxEqual(n,i))return!1;t++}return!0},(t.ISOFile=R).prototype.lastBoxStartPosition=0,R.prototype.parsingMdat=null,R.prototype.nextParsePosition=0,R.prototype.discardMdatData=!1,R.prototype.processIncompleteBox=function(e){var t;return"mdat"===e.type?(t=new E[e.type+"Box"](e.size),this.parsingMdat=t,this.boxes.push(t),this.mdats.push(t),t.start=e.start,t.hdr_size=e.hdr_size,this.stream.addUsedBytes(t.hdr_size),this.lastBoxStartPosition=t.start+t.size,this.stream.seek(t.start+t.size,!1,this.discardMdatData)?!(this.parsingMdat=null):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=t.start+t.size,!1)):("moov"===e.type&&(this.moovStartFound=!0,0===this.mdats.length)&&(this.isProgressive=!0),!!this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer()?(this.nextParsePosition=this.stream.getEndPosition(),!0):(!e.type||this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size,!1))},R.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},R.prototype.processIncompleteMdat=function(){var e=this.parsingMdat;return this.stream.seek(e.start+e.size,!1,this.discardMdatData)?(d.debug("ISOFile","Found 'mdat' end in buffered data"),!(this.parsingMdat=null)):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},R.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},R.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},R.prototype.updateUsedBytes=function(e,t){this.stream.addUsedBytes&&("mdat"===e.type?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},R.prototype.add=E.Box.prototype.add,R.prototype.addBox=E.Box.prototype.addBox,R.prototype.init=function(e){var e=e||{},t=(this.add("ftyp").set("major_brand",e.brands&&e.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",e.brands||["iso4"]),this.add("moov"));return t.add("mvhd").set("timescale",e.timescale||600).set("rate",e.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",e.duration||0).set("volume",e.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),t.add("mvex"),this},R.prototype.addTrack=function(e){this.moov||this.init(e);var t=e||{},e=(t.width=t.width||320,t.height=t.height||320,t.id=t.id||this.moov.mvhd.next_track_id,t.type=t.type||"avc1",this.moov.add("trak")),n=(this.moov.mvhd.next_track_id=t.id+1,e.add("tkhd").set("flags",E.TKHD_FLAG_ENABLED|E.TKHD_FLAG_IN_MOVIE|E.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",t.id).set("duration",t.duration||0).set("layer",t.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",t.width<<16).set("height",t.height<<16),e.add("mdia")),i=(n.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",t.timescale||1).set("duration",t.media_duration||0).set("language",t.language||"und"),n.add("hdlr").set("handler",t.hdlr||"vide").set("name",t.name||"Track created with MP4Box.js"),n.add("elng").set("extended_language",t.language||"fr-FR"),n.add("minf"));if(void 0!==E[t.type+"SampleEntry"]){var r,a,o,s=new E[t.type+"SampleEntry"],l=(s.data_reference_index=1,"");for(r in E.sampleEntryCodes)for(var u=E.sampleEntryCodes[r],c=0;c<u.length;c++)if(-1<u.indexOf(t.type)){l=r;break}switch(l){case"Visual":i.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),s.set("width",t.width).set("height",t.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",t.type+" Compressor").set("depth",24),t.avcDecoderConfigRecord&&(a=new E.avcCBox,o=new h(t.avcDecoderConfigRecord),a.parse(o),s.addBox(a));break;case"Audio":i.add("smhd").set("balance",t.balance||0),s.set("channel_count",t.channel_count||2).set("samplesize",t.samplesize||16).set("samplerate",t.samplerate||65536);break;case"Hint":i.add("hmhd");break;case"Subtitle":i.add("sthd"),"stpp"===t.type&&s.set("namespace",t.namespace||"nonamespace").set("schema_location",t.schema_location||"").set("auxiliary_mime_types",t.auxiliary_mime_types||"");break;default:i.add("nmhd")}t.description&&s.addBox(t.description),t.description_boxes&&t.description_boxes.forEach(function(e){s.addBox(e)}),i.add("dinf").add("dref").addEntry((new E["url Box"]).set("flags",1));n=i.add("stbl");return n.add("stsd").addEntry(s),n.add("stts").set("sample_counts",[]).set("sample_deltas",[]),n.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),n.add("stco").set("chunk_offsets",[]),n.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",t.id).set("default_sample_description_index",t.default_sample_description_index||1).set("default_sample_duration",t.default_sample_duration||0).set("default_sample_size",t.default_sample_size||0).set("default_sample_flags",t.default_sample_flags||0),this.buildTrakSampleLists(e),t.id}},E.Box.prototype.computeSize=function(e){e=e||new l;e.endianness=l.BIG_ENDIAN,this.write(e)},R.prototype.addSample=function(e,t,n){var n=n||{},i={},e=this.getTrackById(e);if(null!==e)return i.number=e.samples.length,i.track_id=e.tkhd.track_id,i.timescale=e.mdia.mdhd.timescale,i.description_index=n.sample_description_index?n.sample_description_index-1:0,i.description=e.mdia.minf.stbl.stsd.entries[i.description_index],i.data=t,i.size=t.byteLength,i.alreadyRead=i.size,i.duration=n.duration||1,i.cts=n.cts||0,i.dts=n.dts||0,i.is_sync=n.is_sync||!1,i.is_leading=n.is_leading||0,i.depends_on=n.depends_on||0,i.is_depended_on=n.is_depended_on||0,i.has_redundancy=n.has_redundancy||0,i.degradation_priority=n.degradation_priority||0,i.offset=0,i.subsamples=n.subsamples,e.samples.push(i),e.samples_size+=i.size,e.samples_duration+=i.duration,e.first_dts||(e.first_dts=n.dts),this.processSamples(),e=this.createSingleSampleMoof(i),this.addBox(e),e.computeSize(),e.trafs[0].truns[0].data_offset=e.size+8,this.add("mdat").data=new Uint8Array(t),i},R.prototype.createSingleSampleMoof=function(e){var t=0,t=e.is_sync?1<<25:65536,n=new E.moofBox,i=(n.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++,n.add("traf")),r=this.getTrackById(e.track_id);return i.add("tfhd").set("track_id",e.track_id).set("flags",E.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),i.add("tfdt").set("baseMediaDecodeTime",e.dts-(r.first_dts||0)),i.add("trun").set("flags",E.TRUN_FLAGS_DATA_OFFSET|E.TRUN_FLAGS_DURATION|E.TRUN_FLAGS_SIZE|E.TRUN_FLAGS_FLAGS|E.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[t]).set("sample_composition_time_offset",[e.cts-e.dts]),n},R.prototype.lastMoofIndex=0,R.prototype.samplesDataSize=0,R.prototype.resetTables=function(){var e,t;for(this.initial_duration=this.moov.mvhd.duration,e=this.moov.mvhd.duration=0;e<this.moov.traks.length;e++){(t=this.moov.traks[e]).tkhd.duration=0,t.mdia.mdhd.duration=0,(t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64).chunk_offsets=[],(n=t.mdia.minf.stbl.stsc).first_chunk=[],n.samples_per_chunk=[],n.sample_description_index=[],(t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2).sample_sizes=[],(n=t.mdia.minf.stbl.stts).sample_counts=[],n.sample_deltas=[],(n=t.mdia.minf.stbl.ctts)&&(n.sample_counts=[],n.sample_offsets=[]);var n=t.mdia.minf.stbl.stss,n=t.mdia.minf.stbl.boxes.indexOf(n);-1!=n&&(t.mdia.minf.stbl.boxes[n]=null)}},R.initSampleGroups=function(e,t,n,i,r){var a,o,s,l;function u(e,t,n){this.grouping_type=e,this.grouping_type_parameter=t,this.sbgp=n,this.last_sample_in_run=-1,this.entry_index=-1}for(t&&(t.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),o=0;o<n.length;o++){for(l=n[o].grouping_type+"/"+n[o].grouping_type_parameter,s=new u(n[o].grouping_type,n[o].grouping_type_parameter,n[o]),t&&(t.sample_groups_info[l]=s),e.sample_groups_info[l]||(e.sample_groups_info[l]=s),a=0;a<i.length;a++)i[a].grouping_type===n[o].grouping_type&&(s.description=i[a],s.description.used=!0);if(r)for(a=0;a<r.length;a++)r[a].grouping_type===n[o].grouping_type&&(s.fragment_description=r[a],s.fragment_description.used=!0,s.is_fragment=!0)}if(t){if(r)for(o=0;o<r.length;o++)!r[o].used&&2<=r[o].version&&(l=r[o].grouping_type+"/0",(s=new u(r[o].grouping_type,0)).is_fragment=!0,t.sample_groups_info[l]||(t.sample_groups_info[l]=s))}else for(o=0;o<i.length;o++)!i[o].used&&2<=i[o].version&&(l=i[o].grouping_type+"/0",s=new u(i[o].grouping_type,0),e.sample_groups_info[l]||(e.sample_groups_info[l]=s))},R.setSampleGroupProperties=function(e,t,n,i){var r,a,o;for(r in t.sample_groups=[],i)t.sample_groups[r]={},t.sample_groups[r].grouping_type=i[r].grouping_type,t.sample_groups[r].grouping_type_parameter=i[r].grouping_type_parameter,n>=i[r].last_sample_in_run&&(i[r].last_sample_in_run<0&&(i[r].last_sample_in_run=0),i[r].entry_index++,i[r].entry_index<=i[r].sbgp.entries.length-1)&&(i[r].last_sample_in_run+=i[r].sbgp.entries[i[r].entry_index].sample_count),i[r].entry_index<=i[r].sbgp.entries.length-1?t.sample_groups[r].group_description_index=i[r].sbgp.entries[i[r].entry_index].group_description_index:t.sample_groups[r].group_description_index=-1,0!==t.sample_groups[r].group_description_index&&(o=i[r].fragment_description||i[r].description,0<t.sample_groups[r].group_description_index?(a=65535<t.sample_groups[r].group_description_index?(t.sample_groups[r].group_description_index>>16)-1:t.sample_groups[r].group_description_index-1,o&&0<=a&&(t.sample_groups[r].description=o.entries[a])):o&&2<=o.version&&0<o.default_group_description_index&&(t.sample_groups[r].description=o.entries[o.default_group_description_index-1]))},R.process_sdtp=function(e,t,n){t&&(e?(t.is_leading=e.is_leading[n],t.depends_on=e.sample_depends_on[n],t.is_depended_on=e.sample_is_depended_on[n],t.has_redundancy=e.sample_has_redundancy[n]):(t.is_leading=0,t.depends_on=0,t.is_depended_on=0,t.has_redundancy=0))},R.prototype.buildSampleLists=function(){for(var e,t=0;t<this.moov.traks.length;t++)e=this.moov.traks[t],this.buildTrakSampleLists(e)},R.prototype.buildTrakSampleLists=function(e){var t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y,v,E,A,b,T,S;if(e.samples=[],e.samples_duration=0,e.samples_size=0,n=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,i=e.mdia.minf.stbl.stsc,r=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,a=e.mdia.minf.stbl.stts,o=e.mdia.minf.stbl.ctts,s=e.mdia.minf.stbl.stss,l=e.mdia.minf.stbl.stsd,u=e.mdia.minf.stbl.subs,d=e.mdia.minf.stbl.stdp,c=e.mdia.minf.stbl.sbgps,h=e.mdia.minf.stbl.sgpds,A=E=v=y=-1,S=T=b=0,R.initSampleGroups(e,null,c,h),void 0!==r){for(t=0;t<r.sample_sizes.length;t++){var w={};w.number=t,w.track_id=e.tkhd.track_id,w.timescale=e.mdia.mdhd.timescale,w.alreadyRead=0,(e.samples[t]=w).size=r.sample_sizes[t],e.samples_size+=w.size,0===t?(f=0,w.chunk_index=p=1,w.chunk_run_index=f,_=i.samples_per_chunk[f],g=0,m=f+1<i.first_chunk.length?i.first_chunk[f+1]-1:1/0):t<_?(w.chunk_index=p,w.chunk_run_index=f):(g=0,(w.chunk_index=++p)<=m||(m=++f+1<i.first_chunk.length?i.first_chunk[f+1]-1:1/0),w.chunk_run_index=f,_+=i.samples_per_chunk[f]),w.description_index=i.sample_description_index[w.chunk_run_index]-1,w.description=l.entries[w.description_index],w.offset=n.chunk_offsets[w.chunk_index-1]+g,g+=w.size,y<t&&(v++,y<0&&(y=0),y+=a.sample_counts[v]),0<t?(e.samples[t-1].duration=a.sample_deltas[v],e.samples_duration+=e.samples[t-1].duration,w.dts=e.samples[t-1].dts+e.samples[t-1].duration):w.dts=0,o?(E<=t&&(A++,E<0&&(E=0),E+=o.sample_counts[A]),w.cts=e.samples[t].dts+o.sample_offsets[A]):w.cts=w.dts,s?(t==s.sample_numbers[b]-1?(w.is_sync=!0,b++):(w.is_sync=!1,w.degradation_priority=0),u&&u.entries[T].sample_delta+S==t+1&&(w.subsamples=u.entries[T].subsamples,S+=u.entries[T].sample_delta,T++)):w.is_sync=!0,R.process_sdtp(e.mdia.minf.stbl.sdtp,w,w.number),w.degradation_priority=d?d.priority[t]:0,u&&u.entries[T].sample_delta+S==t&&(w.subsamples=u.entries[T].subsamples,S+=u.entries[T].sample_delta),(0<c.length||0<h.length)&&R.setSampleGroupProperties(e,w,t,e.sample_groups_info)}0<t&&(e.samples[t-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[t-1].dts,0),e.samples_duration+=e.samples[t-1].duration)}},R.prototype.updateSampleLists=function(){var e,t,n,i,r,a,o,s,l,u,c,h;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(o=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==o.type)for(s=o,e=0;e<s.trafs.length;e++){for(l=s.trafs[e],u=this.getTrackById(l.tfhd.track_id),c=this.getTrexById(l.tfhd.track_id),t=l.tfhd.flags&E.TFHD_FLAG_SAMPLE_DESC?l.tfhd.default_sample_description_index:c?c.default_sample_description_index:1,n=l.tfhd.flags&E.TFHD_FLAG_SAMPLE_DUR?l.tfhd.default_sample_duration:c?c.default_sample_duration:0,i=l.tfhd.flags&E.TFHD_FLAG_SAMPLE_SIZE?l.tfhd.default_sample_size:c?c.default_sample_size:0,r=l.tfhd.flags&E.TFHD_FLAG_SAMPLE_FLAGS?l.tfhd.default_sample_flags:c?c.default_sample_flags:0,(l.sample_number=0)<l.sbgps.length&&R.initSampleGroups(u,l,l.sbgps,u.mdia.minf.stbl.sgpds,l.sgpds),v=0;v<l.truns.length;v++)for(var d=l.truns[v],f=0;f<d.sample_count;f++){(h={}).moof_number=this.lastMoofIndex,h.number_in_traf=l.sample_number,l.sample_number++,h.number=u.samples.length,l.first_sample_index=u.samples.length,u.samples.push(h),h.track_id=u.tkhd.track_id,h.timescale=u.mdia.mdhd.timescale,h.description_index=t-1,h.description=u.mdia.minf.stbl.stsd.entries[h.description_index],h.size=i,d.flags&E.TRUN_FLAGS_SIZE&&(h.size=d.sample_size[f]),u.samples_size+=h.size,h.duration=n,d.flags&E.TRUN_FLAGS_DURATION&&(h.duration=d.sample_duration[f]),u.samples_duration+=h.duration,u.first_traf_merged||0<f?h.dts=u.samples[u.samples.length-2].dts+u.samples[u.samples.length-2].duration:(l.tfdt?h.dts=l.tfdt.baseMediaDecodeTime:h.dts=0,u.first_traf_merged=!0),h.cts=h.dts,d.flags&E.TRUN_FLAGS_CTS_OFFSET&&(h.cts=h.dts+d.sample_composition_time_offset[f]),p=r,d.flags&E.TRUN_FLAGS_FLAGS?p=d.sample_flags[f]:0===f&&d.flags&E.TRUN_FLAGS_FIRST_FLAG&&(p=d.first_sample_flags),h.is_sync=!(p>>16&1),h.is_leading=p>>26&3,h.depends_on=p>>24&3,h.is_depended_on=p>>22&3,h.has_redundancy=p>>20&3,h.degradation_priority=65535&p;var p=!!(l.tfhd.flags&E.TFHD_FLAG_BASE_DATA_OFFSET),m=!!(l.tfhd.flags&E.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),g=!!(d.flags&E.TRUN_FLAGS_DATA_OFFSET),_=0,_=p?l.tfhd.base_data_offset:m||0===v?s.start:a;h.offset=0===v&&0===f?g?_+d.data_offset:_:a,a=h.offset+h.size,(0<l.sbgps.length||0<l.sgpds.length||0<u.mdia.minf.stbl.sbgps.length||0<u.mdia.minf.stbl.sgpds.length)&&R.setSampleGroupProperties(u,h,h.number_in_traf,l.sample_groups_info)}if(l.subs){u.has_fragment_subsamples=!0;for(var y=l.first_sample_index,v=0;v<l.subs.entries.length;v++)y+=l.subs.entries[v].sample_delta,(h=u.samples[y-1]).subsamples=l.subs.entries[v].subsamples}}},R.prototype.getSample=function(e,t){var n=e.samples[t];if(!this.moov)return null;if(n.data){if(n.alreadyRead==n.size)return n}else n.data=new Uint8Array(n.size),n.alreadyRead=0,this.samplesDataSize+=n.size,d.debug("ISOFile","Allocating sample #"+t+" on track #"+e.tkhd.track_id+" of size "+n.size+" (total: "+this.samplesDataSize+")");for(;;){var i=this.stream.findPosition(!0,n.offset+n.alreadyRead,!1);if(!(-1<i))return null;var r=(i=this.stream.buffers[i]).byteLength-(n.offset+n.alreadyRead-i.fileStart);if(n.size-n.alreadyRead<=r)return d.debug("ISOFile","Getting sample #"+t+" data (alreadyRead: "+n.alreadyRead+" offset: "+(n.offset+n.alreadyRead-i.fileStart)+" read size: "+(n.size-n.alreadyRead)+" full size: "+n.size+")"),l.memcpy(n.data.buffer,n.alreadyRead,i,n.offset+n.alreadyRead-i.fileStart,n.size-n.alreadyRead),i.usedBytes+=n.size-n.alreadyRead,this.stream.logBufferLevel(),n.alreadyRead=n.size,n;if(0==r)return null;d.debug("ISOFile","Getting sample #"+t+" partial data (alreadyRead: "+n.alreadyRead+" offset: "+(n.offset+n.alreadyRead-i.fileStart)+" read size: "+r+" full size: "+n.size+")"),l.memcpy(n.data.buffer,n.alreadyRead,i,n.offset+n.alreadyRead-i.fileStart,r),n.alreadyRead+=r,i.usedBytes+=r,this.stream.logBufferLevel()}},R.prototype.releaseSample=function(e,t){e=e.samples[t];return e.data?(this.samplesDataSize-=e.size,e.data=null,e.alreadyRead=0,e.size):0},R.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},R.prototype.getCodecs=function(){for(var e="",t=0;t<this.moov.traks.length;t++)0<t&&(e+=","),e+=this.moov.traks[t].mdia.minf.stbl.stsd.entries[0].getCodec();return e},R.prototype.getTrexById=function(e){var t;if(this.moov&&this.moov.mvex)for(t=0;t<this.moov.mvex.trexs.length;t++){var n=this.moov.mvex.trexs[t];if(n.track_id==e)return n}return null},R.prototype.getTrackById=function(e){if(void 0!==this.moov)for(var t=0;t<this.moov.traks.length;t++){var n=this.moov.traks[t];if(n.tkhd.track_id==e)return n}return null},R.prototype.items=[],R.prototype.itemsDataSize=0,R.prototype.flattenItemInfo=function(){var e=this.items,t=this.meta;if(null!=t&&void 0!==t.hdlr&&void 0!==t.iinf){for(l=0;l<t.iinf.item_infos.length;l++)(i={}).id=t.iinf.item_infos[l].item_ID,(e[i.id]=i).ref_to=[],i.name=t.iinf.item_infos[l].item_name,0<t.iinf.item_infos[l].protection_index&&(i.protection=t.ipro.protections[t.iinf.item_infos[l].protection_index-1]),t.iinf.item_infos[l].item_type?i.type=t.iinf.item_infos[l].item_type:i.type="mime",i.content_type=t.iinf.item_infos[l].content_type,i.content_encoding=t.iinf.item_infos[l].content_encoding;if(t.iloc)for(l=0;l<t.iloc.items.length;l++){var n=t.iloc.items[l],i=e[n.item_ID];switch(0!==n.data_reference_index&&(d.warn("Item storage with reference to other files: not supported"),i.source=t.dinf.boxes[n.data_reference_index-1]),n.construction_method){case 0:break;case 1:case 2:d.warn("Item storage with construction_method : not supported")}for(i.extents=[],a=i.size=0;a<n.extents.length;a++)i.extents[a]={},i.extents[a].offset=n.extents[a].extent_offset+n.base_offset,i.extents[a].length=n.extents[a].extent_length,i.extents[a].alreadyRead=0,i.size+=i.extents[a].length}if(t.pitm&&(e[t.pitm.item_id].primary=!0),t.iref)for(l=0;l<t.iref.references.length;l++)for(var r=t.iref.references[l],a=0;a<r.references.length;a++)e[r.from_item_ID].ref_to.push({type:r.type,id:r.references[a]});if(t.iprp)for(var o=0;o<t.iprp.ipmas.length;o++)for(var s=t.iprp.ipmas[o],l=0;l<s.associations.length;l++){var u=s.associations[l];for(void 0===(i=e[u.id]).properties&&(i.properties={},i.properties.boxes=[]),a=0;a<u.props.length;a++){var c=u.props[a];0<c.property_index&&c.property_index-1<t.iprp.ipco.boxes.length&&(c=t.iprp.ipco.boxes[c.property_index-1],i.properties[c.type]=c,i.properties.boxes.push(c))}}}},R.prototype.getItem=function(e){var t;if(!this.meta)return null;if(!(t=this.items[e]).data&&t.size)t.data=new Uint8Array(t.size),t.alreadyRead=0,this.itemsDataSize+=t.size,d.debug("ISOFile","Allocating item #"+e+" of size "+t.size+" (total: "+this.itemsDataSize+")");else if(t.alreadyRead===t.size)return t;for(var n=0;n<t.extents.length;n++){var i=t.extents[n];if(i.alreadyRead!==i.length){var r=this.stream.findPosition(!0,i.offset+i.alreadyRead,!1);if(!(-1<r))return null;var a=(r=this.stream.buffers[r]).byteLength-(i.offset+i.alreadyRead-r.fileStart);if(!(i.length-i.alreadyRead<=a))return d.debug("ISOFile","Getting item #"+e+" extent #"+n+" partial data (alreadyRead: "+i.alreadyRead+" offset: "+(i.offset+i.alreadyRead-r.fileStart)+" read size: "+a+" full extent size: "+i.length+" full item size: "+t.size+")"),l.memcpy(t.data.buffer,t.alreadyRead,r,i.offset+i.alreadyRead-r.fileStart,a),i.alreadyRead+=a,t.alreadyRead+=a,r.usedBytes+=a,this.stream.logBufferLevel(),null;d.debug("ISOFile","Getting item #"+e+" extent #"+n+" data (alreadyRead: "+i.alreadyRead+" offset: "+(i.offset+i.alreadyRead-r.fileStart)+" read size: "+(i.length-i.alreadyRead)+" full extent size: "+i.length+" full item size: "+t.size+")"),l.memcpy(t.data.buffer,t.alreadyRead,r,i.offset+i.alreadyRead-r.fileStart,i.length-i.alreadyRead),r.usedBytes+=i.length-i.alreadyRead,this.stream.logBufferLevel(),t.alreadyRead+=i.length-i.alreadyRead,i.alreadyRead=i.length}}return t.alreadyRead===t.size?t:null},R.prototype.releaseItem=function(e){var t=this.items[e];if(t.data){this.itemsDataSize-=t.size,t.data=null;for(var n=t.alreadyRead=0;n<t.extents.length;n++)t.extents[n].alreadyRead=0;return t.size}return 0},R.prototype.processItems=function(e){for(var t in this.items){t=this.items[t];this.getItem(t.id),e&&!t.sent&&(e(t),t.sent=!0,t.data=null)}},R.prototype.hasItem=function(e){for(var t in this.items){t=this.items[t];if(t.name===e)return t.id}return-1},R.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},R.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},R.prototype.itemToFragmentedTrackFile=function(e){var t,e=e||{},n=null;return null!=(n=e.itemId?this.getItem(e.itemId):this.getPrimaryItem())&&((e=new R).discardMdatData=!1,t={type:n.type,description_boxes:n.properties.boxes},n.properties.ispe&&(t.width=n.properties.ispe.image_width,t.height=n.properties.ispe.image_height),t=e.addTrack(t))?(e.addSample(t,n.data),e):null},R.prototype.write=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e)},R.prototype.createFragment=function(e,t,n){var e=this.getTrackById(e),i=this.getSample(e,t);return null==i?(i=e.samples[t],this.nextSeekPosition?this.nextSeekPosition=Math.min(i.offset+i.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.samples[t].offset+i.alreadyRead,null):((e=n||new l).endianness=l.BIG_ENDIAN,(t=this.createSingleSampleMoof(i)).write(e),t.trafs[0].truns[0].data_offset=t.size+8,d.debug("MP4Box","Adjusting data_offset with new value "+t.trafs[0].truns[0].data_offset),e.adjustUint32(t.trafs[0].truns[0].data_offset_position,t.trafs[0].truns[0].data_offset),(n=new E.mdatBox).data=i.data,n.write(e),e)},R.writeInitializationSegment=function(e,t,n,i){d.debug("ISOFile","Generating initialization segment");var r,a=new l,o=(a.endianness=l.BIG_ENDIAN,e.write(a),t.add("mvex"));for(n&&o.add("mehd").set("fragment_duration",n),r=0;r<t.traks.length;r++)o.add("trex").set("track_id",t.traks[r].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",i).set("default_sample_size",0).set("default_sample_flags",65536);return t.write(a),a.buffer},R.prototype.save=function(e){var t=new l;t.endianness=l.BIG_ENDIAN,this.write(t),t.save(e)},R.prototype.getBuffer=function(){var e=new l;return e.endianness=l.BIG_ENDIAN,this.write(e),e.buffer},R.prototype.initializeSegmentation=function(){var e,t,n,i;for(null===this.onSegment&&d.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),t=[],e=0;e<this.fragmentedTracks.length;e++){var r=new E.moovBox;r.mvhd=this.moov.mvhd,r.boxes.push(r.mvhd),n=this.getTrackById(this.fragmentedTracks[e].id),r.boxes.push(n),r.traks.push(n),(i={}).id=n.tkhd.track_id,i.user=this.fragmentedTracks[e].user,i.buffer=R.writeInitializationSegment(this.ftyp,r,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,0<this.moov.traks[e].samples.length?this.moov.traks[e].samples[0].duration:0),t.push(i)}return t},E.Box.prototype.printHeader=function(e){this.size+=8,this.size>s&&(this.size+=8),"uuid"===this.type&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},E.FullBox.prototype.printHeader=function(e){this.size+=4,E.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},E.Box.prototype.print=function(e){this.printHeader(e)},E.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var t,n=0;n<this.boxes.length;n++)this.boxes[n]&&(t=e.indent,e.indent+=" ",this.boxes[n].print(e),e.indent=t)},R.prototype.print=function(e){e.indent="";for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&this.boxes[t].print(e)},E.mvhdBox.prototype.print=function(e){E.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},E.tkhdBox.prototype.print=function(e){E.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)},{});u.createFile=function(e,t){e=void 0===e||e,t=new R(t);return t.discardMdatData=!e,t},t.createFile=u.createFile},function(e,t,n){const i=n(75),r=n(30),s=n(76);t.MpegTs=class{constructor(){this.seekPos=-1,this.durationMs=-1,this.fps=-1,this.sampleRate=-1,this.aCodec="",this.vCodec="",this.size={width:-1,height:-1},this.bufObject=r(),this.mpegTsObj=null,this.bufObject=r(),this.mediaInfo={},this.extensionInfo={},this.onReady=null,this.onDemuxed=null,this.onReadyOBJ=null,this.onError=null,this.onWasmError=null}initMPEG(){let e=this;this.mpegTsObj=new i.default.MPEG_JS_Module({}),this.mpegTsObj.onDemuxed=()=>{e.mediaInfo=e.mpegTsObj.readMediaInfo(),e.extensionInfo=e.mpegTsObj.readExtensionInfo(),e.vCodec=e.mediaInfo.vCodec,e.aCodec=e.mediaInfo.aCodec,e.durationMs=1e3*e.mediaInfo.duration,e.fps=e.mediaInfo.vFps,e.sampleRate=e.mediaInfo.sampleRate,0<e.extensionInfo.vWidth&&0<e.extensionInfo.vHeight&&(e.size.width=e.extensionInfo.vWidth,e.size.height=e.extensionInfo.vHeight),e.isHEVC()&&e.mpegTsObj.readPacket(),null!=e.onDemuxed&&e.onDemuxed(e.onReadyOBJ)},this.mpegTsObj.onReady=()=>{null!=e.onReady&&e.onReady(e.onReadyOBJ)},this.mpegTsObj.onNalu=e=>{this._appendFrame(e)},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.releaseTsDemuxer(),this.onWasmError&&this.onWasmError(e)},this.mpegTsObj.initDemuxer()}_appendFrame(e){var t=e.dtime;if(0==e.type){var n=s.PACK_NALU(e.layer),i=1==e.keyframe;this.bufObject.appendFrame(t,n,!0,i)}else if("aac"==this.mediaInfo.aCodec)for(var r=e.data,a=0;a<r.length;a++){var o=r[a];this.bufObject.appendFrame(o.ptime,o.data,!1,!0)}else this.bufObject.appendFrame(t,e.data,!1,!0)}bindReady(e){this.onReadyOBJ=e}releaseTsDemuxer(){this.mpegTsObj&&this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null}demux(e){this.mpegTsObj.demuxUint8Buf(e)}popBuffer(e=1,t=-1){return t<0?null:1==e?this.bufObject.vFrame(t):2==e?this.bufObject.aFrame(t):void 0}isHEVC(){return this.mpegTsObj.isHEVC()}getACodec(){return this.aCodec}getVCodec(){return this.vCodec}getAudioNone(){return this.mpegTsObj.mediaAttr.audioNone}getDurationMs(){return this.durationMs}getFPS(){return this.fps}getSampleRate(){return this.sampleRate}getSize(){return this.size}seek(e){if(0<=e)return e=this.bufObject.seekIDR(e),this.seekPos=e,parseInt(e)}}},function(e,t,n){const i=n(182),r=n(75),d=n(38),a=n(30),f=n(76),o=n(5);t.M3u8=class{constructor(e){this.hls=new i.M3u8Base(e),this.mpegTsObj=new r.default.MPEG_JS_Module({}),this.mpegTsWasmState=!1,this.mpegTsWasmRetryLoadTimes=0,this.tsList=[],this._segmentPointer=-1,this.parseTsList=[],this.vStartTime=0,this.aStartTime=0,this.lockWait={state:!1,lockMember:{dur:0}},this.timerFeed=null,this.timerTsWasm=null,this.seekPos=-1,this.vPreFramePTS=0,this.aPreFramePTS=0,this.audioNone=!1,this.isHevcParam=!1,this.vCodec=!1,this.aCodec=!1,this.aChannel=0,this.durationMs=-1,this.bufObject=a(),this.fps=-1,this.sampleRate=-1,this.size={width:-1,height:-1},this.mediaInfo=null,this.extensionInfo=null,this.seekTime=-1,this.seekStartTime=-1,this.onReadyOBJ=null,this.onFinished=null,this.onDemuxed=null,this.onSamples=null,this.onCacheProcess=null,this.isDownloaded=!1,this.onError=null,this.onWasmError=null}getCachePTS(){return Math.max(this.vPreFramePTS,this.aPreFramePTS)}demux(e){let r=this;this.vPreFramePTS=0,this.aPreFramePTS=0,this.hls.onTransportStream=(e,t,n,i)=>{r.tsList.push({streamURI:e,streamDur:t,start:n,end:i})},this.hls.onFinished=e=>{e.type==o.PLAYER_IN_TYPE_M3U8_VOD?r.durationMs=1e3*e.duration:r.durationMs=-1,null!=r.onFinished&&r.onFinished(r.onReadyOBJ,e),r.loadSegment()},this.mpegTsObj.onDemuxedFailed=(e,t)=>{r.lockWait.state=!1},this.mpegTsObj.onDemuxed=()=>{r.isDownloaded=!1,null==r.mediaInfo&&(r.mediaInfo=r.mpegTsObj.readMediaInfo(),r.isHevcParam=r.mpegTsObj.isHEVC(),r.vCodec=r.mediaInfo.vCodec,r.aCodec=r.mediaInfo.aCodec,r.aChannel=r.mediaInfo.sampleChannel,r.fps=r.mediaInfo.vFps,r.sampleRate=r.mediaInfo.sampleRate,null===r.aCodec||""===r.aCodec||r.aChannel<=0)&&(r.audioNone=!0),null==r.extensionInfo&&(r.extensionInfo=r.mpegTsObj.readExtensionInfo(),0<r.extensionInfo.vWidth)&&0<r.extensionInfo.vHeight&&(r.size.width=r.extensionInfo.vWidth,r.size.height=r.extensionInfo.vHeight),null!=r.onDemuxed&&r.onDemuxed(r.onReadyOBJ);var e;r.mpegTsObj.readPacket();r.parseTsList&&0<r.parseTsList.length?(e=r.parseTsList.shift().start,r.vStartTime=e,r.aStartTime=e):-1==this.seekStartTime?setTimeout(()=>{r.vStartTime+=parseFloat(r.lockWait.lockMember.dur),r.aStartTime+=parseFloat(r.lockWait.lockMember.dur)},1e3):(r.vStartTime=r.seekStartTime,r.aStartTime=r.seekStartTime,r.seekStartTime=-1),r.lockWait.state=!1},this.mpegTsObj.onReady=()=>{r._onTsReady(e)},this.mpegTsObj.onNalu=e=>{this._appendFrame(e,-1,!1),this.lockWait.state=!1},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.release(),this.onWasmError&&this.onWasmError(e)},r.mpegTsObj.initDemuxer(),this.timerTsWasm=window.setInterval(()=>{r.mpegTsWasmState?(window.clearInterval(r.timerTsWasm),r.timerTsWasm=null):3<=r.mpegTsWasmRetryLoadTimes?(r._onTsReady(e),window.clearInterval(r.timerTsWasm),r.timerTsWasm=null):(r.mpegTsWasmRetryLoadTimes+=1,r.mpegTsObj.initDemuxer())},3e3)}_appendFrame(e,t,n){var i=this,r=0<e.dtime?e.dtime:e.ptime;if(0==e.type){t<0&&r<=i.vPreFramePTS&&(n=!0);var a=f.PACK_NALU(e.layer),o=1==e.keyframe,s=1==n?r+i.vStartTime:r,o=new d.BufferFrame(s,o,a,!0);i.bufObject.appendFrame(o.pts,o.data,!0,o.isKey),i.vPreFramePTS=s,null!=i.onSamples&&i.onSamples(i.onReadyOBJ,o)}else if(t<0&&r<=i.aPreFramePTS&&(n=!0),"aac"==i.mediaInfo.aCodec)for(var l=e.data,u=0;u<l.length;u++){var c=l[u],h=1==n?c.ptime+i.vStartTime:r,c=new d.BufferFrame(h,!0,c.data,!1);i.aPreFramePTS=h,null!=i.onSamples&&i.onSamples(i.onReadyOBJ,c)}else{a=1==n?r+i.vStartTime:r,s=new d.BufferFrame(a,!0,e.data,!1);i.bufObject.appendFrameByBufferFrame(s),i.aPreFramePTS=a,null!=i.onSamples&&i.onSamples(i.onReadyOBJ,s)}this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}_onTsReady(e){this.hls.fetchM3u8(e),this.mpegTsWasmState=!0,this.timerFeed&&window.clearInterval(this.timerFeed),this.downLoadInterval()}downLoadInterval(){let e=this;this.timerFeed&&window.clearInterval(this.timerFeed),e.timerFeed=window.setInterval(()=>{e.loadSegment()},1e3)}loadSegment(){var e,t,n,i=this;if(0<i.tsList.length&&0==i.lockWait.state)try{i.isDownloaded||(e=i.nextSegment(),i.moveSegmentPointer(),null!=e&&(t=e.streamURI,n=e.streamDur,i.lockWait.state=!0,i.lockWait.lockMember.dur=n,i.mpegTsObj.isLive=i.hls.isLive(),i.isDownloaded=!0,i.mpegTsObj.demuxURL(t),i.parseTsList.push(e)))}catch(e){i.lockWait.state=!1}}release(){this.hls&&this.hls.release(),this.hls=null,this.mpegTsObj&&this.mpegTsObj.release(),this.timerFeed&&window.clearInterval(this.timerFeed),this.timerFeed=null,this.timerTsWasm&&window.clearInterval(this.timerTsWasm),this.timerTsWasm=null,this._segmentPointer=-1,this.parseTsList=[],this.tsList=[],this.isDownloaded=!1,this.bufObject&&this.bufObject.cleanPipeline()}nextSegment(){return this.tsList&&this.tsList[this._segmentPointer+1]}setNextSegmentByIndex(e=0){this._segmentPointer=e-1}getSegmentByIndex(e){return this.tsList&&this.tsList[e]}moveSegmentPointer(e){null==e&&(e=this._segmentPointer+1),this._segmentPointer=this.clamp(e,-1,this.tsList.length)}findSegmentIndexByTime(i){var r=this.tsList;if(r){for(let e=0,t=r.length,n;e<t;e++)if(i>=(n=r[e]).start&&i<n.end)return e;var e=r[r.length-1];if(Math.abs(i-e.end)<.2)return r.length-1}}clamp(e,t,n){return n<t&&(n=t),Math.min(Math.max(e,t),n)}bindReady(e){this.onReadyOBJ=e}popBuffer(e=1,t=-1){return t<0?null:1===e?t+1>this.bufObject.videoBuffer.length?null:this.bufObject.vFrame(t):2===e?t+1>this.bufObject.audioBuffer.length?null:this.bufObject.aFrame(t):void 0}getVLen(){return this.bufObject.videoBuffer.length}getALen(){return this.bufObject.audioBuffer.length}getLastIdx(){return this.bufObject.videoBuffer.length-1}getALastIdx(){return this.bufObject.audioBuffer.length-1}getACodec(){return this.aCodec}getVCodec(){return this.vCodec}getDurationMs(){return this.durationMs}getFPS(){return this.fps}getSampleRate(){return this.sampleRate}getSampleChannel(){return this.aChannel}getSize(){return this.size}seek(e){0<=e&&(e=this.bufObject.seekIDR(e),this.seekPos=e)}toSeek(e){this.seekTime=e;var e=this.findSegmentIndexByTime(e),t=this.getSegmentByIndex(e);null!=e&&t&&t!==this.tsList.nextSegment&&(this.seekStartTime=t.start,this.setNextSegmentByIndex(e),this.loadSegment(),this.timerFeed&&window.clearInterval(this.timerFeed),this.downLoadInterval())}limitDownloads(e){e!=this.limitDownload&&(this.timerFeed&&window.clearInterval(this.timerFeed),this.limitDownload=e,this.limitDownload?this.timerFeed&&window.clearInterval(this.timerFeed):this.downLoadInterval())}}},function(e,t,n){const f=n(5),p=[/#EXT-X-PROGRAM-DATE-TIME.+\n/g],m={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",streamInf:"STREAM-INF",isComment:e=>e&&"#"===e[0]&&!e.startsWith(m.tagPrefix),isBlank:e=>""===e,canStrip:e=>m.isBlank(e)||m.isComment(e),defaultMinDur:99999,hlsSliceLimit:100};t.M3u8Base=class{constructor(e){this.initState=!0,this.controller=new AbortController,this._slices=[],this._type=f.PLAYER_IN_TYPE_M3U8_LIVE,this._preURI="",this.duration=-1,this.onTransportStream=null,this.onFinished=null,this.config=e}isLive(){return this._type===f.PLAYER_IN_TYPE_M3U8_LIVE?1:0}release(){this.initState=!1}fetchM3u8(t){let n=this;if(this.initState){let e;this.config.headers&&(e={headers:new Headers(this.config.headers)}),fetch(t,e).then(e=>e.text()).then(e=>{return 1==n._uriParse(t)?n._m3u8Parse(e):null}).then(e=>{null!=e&&!1!==e&&!0!==e&&this._type==f.PLAYER_IN_TYPE_M3U8_LIVE&&setTimeout(()=>{n.fetchM3u8(t)},500*e)}).catch(e=>{setTimeout(()=>{n.fetchM3u8(t)},500)})}}_uriParse(e){this._preURI="";var t,e=e.split("://");let n=null;if(e.length<1)return!1;1<e.length?(t=e[0],n=e[1].split("/"),this._preURI=t+"://"):n=e[0].split("/");for(var i=0;i<n.length-1;i++)this._preURI+=n[i]+"/";return!0}_m3u8Parse(t){let n=t;for(let e=0;e<p.length;e++)n=t.replace(p[e],"");var e,i=n.split(m.lineDelimiter);let r=m.defaultMinDur,a="";for(let t=0;t<i.length;t++){let e=i[t];if(!(e.length<1)){if(void 0!==a&&null!==a&&""!==a)switch(a){case m.version:case m.mediaSequence:case m.allowCache:case m.discontinuity:case m.targetDuration:case m.combined:break;case m.streamInf:return e.indexOf("http")<0&&e.indexOf(this._preURI)<0&&(e=this._preURI+e),this.fetchM3u8(e),null}var o,s=this._readTag(e);if(null!=s)switch(a=s.key,s.key){case m.version:case m.mediaSequence:case m.allowCache:case m.discontinuity:case m.targetDuration:case m.combined:case m.streamInf:break;case m.endList:return this._type=f.PLAYER_IN_TYPE_M3U8_VOD,null!=this.onFinished&&(o={type:this._type,duration:this.duration},this.onFinished(o)),!0}s=m.segmentParse.exec(e);if(null!=s){var l,u,c=s[1],h=-1==this.duration?0:this.duration,s=(-1==this.duration&&(this.duration=0),this.duration+=parseFloat(s[1]),-1==this.duration?0:this.duration),d=(r>c&&(r=c),i[t+=1]);let e=null;e=0<=d.indexOf("http")?d:("/"===d[0]&&(u=(l=this._preURI.split("//"))[l.length-1].split("/"),this._preURI=l[0]+"//"+u[0]),this._preURI+d),this._slices.indexOf(e)<0&&(this._slices.push(e),null!=this.onTransportStream)&&this.onTransportStream(e,c,h,s)}}}return this._slices.length>m.hlsSliceLimit&&this._type==f.PLAYER_IN_TYPE_M3U8_LIVE&&(this._slices=this._slices.slice(-1*m.hlsSliceLimit)),null!=this.onFinished&&(e={type:this._type,duration:-1},this.onFinished(e)),r}_readTag(e){e=m.tagParse.exec(e);return null!==e?{key:e[1],value:e[3]}:null}}},function(e,t,n){!function(e){e.STATIC_MEM_wasmDecoderState=-1,e.STATICE_MEM_playerCount=-1,e.STATICE_MEM_playerIndexPtr=0}.call(this,n(27))},function(e,t){t.UI=class{constructor(){}static createPlayerRender(e,t,n){e=document.querySelector("div#"+e);return e.style.position="relative",e.style.backgroundColor="black",e.style.width=t+"px",e.style.height=n+"px",e}}},function(e,P,D){!function(I,C){var L;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(){var ja,Ga="Expected a function",_o="__lodash_hash_undefined__",yo="__lodash_placeholder__",Va=9007199254740991,vo=NaN,Ha=4294967295,Eo=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ya="[object Arguments]",Ao="[object Array]",za="[object Boolean]",Wa="[object Date]",bo="[object Error]",To="[object Function]",So="[object GeneratorFunction]",Ka="[object Map]",qa="[object Number]",Qa="[object Object]",wo="[object Promise]",Xa="[object RegExp]",Ja="[object Set]",Za="[object String]",Ro="[object Symbol]",$a="[object WeakMap]",eo="[object ArrayBuffer]",to="[object DataView]",Io="[object Float32Array]",Co="[object Float64Array]",Lo="[object Int8Array]",Po="[object Int16Array]",Do="[object Int32Array]",ko="[object Uint8Array]",Oo="[object Uint8ClampedArray]",Mo="[object Uint16Array]",xo="[object Uint32Array]",No=/\b__p \+= '';/g,Fo=/\b(__p \+=) '' \+/g,Bo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Uo=/&(?:amp|lt|gt|quot|#39);/g,jo=/[&<>"']/g,Go=RegExp(Uo.source),Vo=RegExp(jo.source),Ho=/<%-([\s\S]+?)%>/g,Yo=/<%([\s\S]+?)%>/g,zo=/<%=([\s\S]+?)%>/g,Wo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ko=/^\w*$/,qo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qo=/[\\^$.*+?()[\]{}|]/g,Xo=RegExp(Qo.source),Jo=/^\s+/,o=/\s/,Zo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$o=/\{\n\/\* \[wrapped with (.+)\] \*/,es=/,? & /,ts=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ns=/[()=,{}\[\]\/\s]/,is=/\\(\\)?/g,rs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,as=/\w*$/,os=/^[-+]0x[0-9a-f]+$/i,ss=/^0b[01]+$/i,ls=/^\[object .+?Constructor\]$/,us=/^0o[0-7]+$/i,cs=/^(?:0|[1-9]\d*)$/,hs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ds=/($^)/,fs=/['\n\r\u2028\u2029\\]/g,s="\\ud800-\\udfff",l="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",e="\\u2700-\\u27bf",t="a-z\\xdf-\\xf6\\xf8-\\xff",n="A-Z\\xc0-\\xd6\\xd8-\\xde",u="\\ufe0e\\ufe0f",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+s+"]",c="["+i+"]",h="["+l+"]",d="["+e+"]",f="["+t+"]",i="[^"+s+i+"\\d+"+e+t+n+"]",e="\\ud83c[\\udffb-\\udfff]",t="[^"+s+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",n="["+n+"]",m="(?:"+f+"|"+i+")",i="(?:"+n+"|"+i+")",g="(?:['’](?:d|ll|m|re|s|t|ve))?",_="(?:['’](?:D|LL|M|RE|S|T|VE))?",y="(?:"+h+"|"+e+")"+"?",v="["+u+"]?",v=v+y+("(?:\\u200d(?:"+[t,p,a].join("|")+")"+v+y+")*"),y="(?:"+[d,p,a].join("|")+")"+v,d="(?:"+[t+h+"?",h,p,a,r].join("|")+")",ps=RegExp("['’]","g"),ms=RegExp(h,"g"),E=RegExp(e+"(?="+e+")|"+d+v,"g"),gs=RegExp([n+"?"+f+"+"+g+"(?="+[c,n,"$"].join("|")+")",i+"+"+_+"(?="+[c,n+m,"$"].join("|")+")",n+"?"+m+"+"+g,n+"+"+_,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",y].join("|"),"g"),A=RegExp("[\\u200d"+s+l+u+"]"),_s=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ys=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vs=-1,no={},io=(no[Io]=no[Co]=no[Lo]=no[Po]=no[Do]=no[ko]=no[Oo]=no[Mo]=no[xo]=!0,no[Ya]=no[Ao]=no[eo]=no[za]=no[to]=no[Wa]=no[bo]=no[To]=no[Ka]=no[qa]=no[Qa]=no[Xa]=no[Ja]=no[Za]=no[$a]=!1,{}),b=(io[Ya]=io[Ao]=io[eo]=io[to]=io[za]=io[Wa]=io[Io]=io[Co]=io[Lo]=io[Po]=io[Do]=io[Ka]=io[qa]=io[Qa]=io[Xa]=io[Ja]=io[Za]=io[Ro]=io[ko]=io[Oo]=io[Mo]=io[xo]=!0,io[bo]=io[To]=io[$a]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),Es=parseFloat,As=parseInt,t="object"==typeof I&&I&&I.Object===Object&&I,p="object"==typeof self&&self&&self.Object===Object&&self,ro=t||p||Function("return this")(),a=P&&!P.nodeType&&P,T=a&&"object"==typeof C&&C&&!C.nodeType&&C,bs=T&&T.exports===a,S=bs&&t.process,r=function(){try{var e=T&&T.require&&T.require("util").types;return e?e:S&&S.binding&&S.binding("util")}catch(e){}}(),Ts=r&&r.isArrayBuffer,Ss=r&&r.isDate,ws=r&&r.isMap,Rs=r&&r.isRegExp,Is=r&&r.isSet,Cs=r&&r.isTypedArray;function ao(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ls(e,t,n,i){for(var r=-1,a=null==e?0:e.length;++r<a;){var o=e[r];t(i,o,n(o),e)}return i}function oo(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function Ps(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ds(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function so(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a}function ks(e,t){return!!(null==e?0:e.length)&&-1<co(e,t,0)}function Os(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function lo(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function uo(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function Ms(e,t,n,i){var r=-1,a=null==e?0:e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function xs(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function Ns(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var w=Vs("length");function Fs(e,i,t){var r;return t(e,function(e,t,n){if(i(e,t,n))return r=t,!1}),r}function Bs(e,t,n,i){for(var r=e.length,a=n+(i?1:-1);i?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function co(e,t,n){if(t!=t)return Bs(e,js,n);for(var i=e,r=t,a=n-1,o=i.length;++a<o;)if(i[a]===r)return a;return-1}function Us(e,t,n,i){for(var r=n-1,a=e.length;++r<a;)if(i(e[r],t))return r;return-1}function js(e){return e!=e}function Gs(e,t){var n=null==e?0:e.length;return n?Ys(e,t)/n:vo}function Vs(t){return function(e){return null==e?ja:e[t]}}function R(t){return function(e){return null==t?ja:t[e]}}function Hs(e,i,r,a,t){return t(e,function(e,t,n){r=a?(a=!1,e):i(r,e,t,n)}),r}function Ys(e,t){for(var n,i=-1,r=e.length;++i<r;){var a=t(e[i]);a!==ja&&(n=n===ja?a:n+a)}return n}function zs(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Ws(e){return e&&e.slice(0,il(e)+1).replace(Jo,"")}function ho(t){return function(e){return t(e)}}function Ks(t,e){return lo(e,function(e){return t[e]})}function qs(e,t){return e.has(t)}function Qs(e,t){for(var n=-1,i=e.length;++n<i&&-1<co(t,e[n],0););return n}function Xs(e,t){for(var n=e.length;n--&&-1<co(t,e[n],0););return n}var Js=R({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Zs=R({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $s(e){return"\\"+b[e]}function fo(e){return A.test(e)}function el(e){var n=-1,i=Array(e.size);return e.forEach(function(e,t){i[++n]=[t,e]}),i}function tl(t,n){return function(e){return t(n(e))}}function po(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o=e[n];o!==t&&o!==yo||(e[n]=yo,a[r++]=n)}return a}function nl(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function mo(e){return(fo(e)?function(e){var t=E.lastIndex=0;for(;E.test(e);)++t;return t}:w)(e)}function go(e){return fo(e)?e.match(E)||[]:e.split("")}function il(e){for(var t=e.length;t--&&o.test(e.charAt(t)););return t}var rl=R({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var al=function r(e){var b=(e=null==e?ro:al.defaults(ro.Object(),e,al.pick(ro,ys))).Array,a=e.Date,k=e.Error,O=e.Function,M=e.Math,m=e.Object,x=e.RegExp,V=e.String,T=e.TypeError,H=b.prototype,Y=O.prototype,z=m.prototype,W=e["__core-js_shared__"],K=Y.toString,N=z.hasOwnProperty,q=0,Q=(Y=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",X=z.toString,J=K.call(m),Z=ro._,$=x("^"+K.call(N).replace(Qo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=bs?e.Buffer:ja,t=e.Symbol,ee=e.Uint8Array,te=Y?Y.allocUnsafe:ja,ne=tl(m.getPrototypeOf,m),ie=m.create,re=z.propertyIsEnumerable,ae=H.splice,oe=t?t.isConcatSpreadable:ja,se=t?t.iterator:ja,le=t?t.toStringTag:ja,ue=function(){try{var e=Zn(m,"defineProperty");return e({},"",{}),e}catch(e){}}(),ce=e.clearTimeout!==ro.clearTimeout&&e.clearTimeout,he=a&&a.now!==ro.Date.now&&a.now,de=e.setTimeout!==ro.setTimeout&&e.setTimeout,fe=M.ceil,pe=M.floor,me=m.getOwnPropertySymbols,Y=Y?Y.isBuffer:ja,ge=e.isFinite,_e=H.join,ye=tl(m.keys,m),S=M.max,w=M.min,ve=a.now,Ee=e.parseInt,Ae=M.random,be=H.reverse,a=Zn(e,"DataView"),Te=Zn(e,"Map"),Se=Zn(e,"Promise"),we=Zn(e,"Set"),e=Zn(e,"WeakMap"),Re=Zn(m,"create"),Ie=e&&new e,Ce={},Le=Ti(a),Pe=Ti(Te),De=Ti(Se),ke=Ti(we),Oe=Ti(e),t=t?t.prototype:ja,Me=t?t.valueOf:ja,xe=t?t.toString:ja;function p(e){if(G(e)&&!j(e)&&!(e instanceof _)){if(e instanceof g)return e;if(N.call(e,"__wrapped__"))return Si(e)}return new g(e)}var Ne=function(e){if(!A(e))return{};if(ie)return ie(e);Fe.prototype=e;e=new Fe;return Fe.prototype=ja,e};function Fe(){}function Be(){}function g(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ja}function _(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ha,this.__views__=[]}function Ue(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function je(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ve(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ge;++t<n;)this.add(e[t])}function F(e){e=this.__data__=new je(e);this.size=e.size}function He(e,t){var n,i=j(e),r=!i&&_r(e),a=!i&&!r&&vr(e),o=!i&&!r&&!a&&Pr(e),s=i||r||a||o,l=s?zs(e.length,V):[],u=l.length;for(n in e)!t&&!N.call(e,n)||s&&("length"==n||a&&("offset"==n||"parent"==n)||o&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||ri(n,u))||l.push(n);return l}function Ye(e){var t=e.length;return t?e[Bt(0,t-1)]:ja}function ze(e,t){return vi(R(e),et(t,0,e.length))}function We(e){return vi(R(e))}function Ke(e,t,n){(n===ja||U(e[t],n))&&(n!==ja||t in e)||Ze(e,t,n)}function qe(e,t,n){var i=e[t];N.call(e,t)&&U(i,n)&&(n!==ja||t in e)||Ze(e,t,n)}function Qe(e,t){for(var n=e.length;n--;)if(U(e[n][0],t))return n;return-1}function Xe(e,i,r,a){return rt(e,function(e,t,n){i(a,e,r(e),n)}),a}function Je(e,t){return e&&gn(t,L(t),e)}function Ze(e,t,n){"__proto__"==t&&ue?ue(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $e(e,t){for(var n=-1,i=t.length,r=b(i),a=null==e;++n<i;)r[n]=a?ja:Yr(e,t[n]);return r}function et(e,t,n){return e=e==e&&(n!==ja&&(e=e<=n?e:n),t!==ja)?t<=e?e:t:e}function y(n,i,r,e,t,a){var o,s=1&i,l=2&i,u=4&i;if((o=r?t?r(n,e,t,a):r(n):o)===ja){if(!A(n))return n;var c,e=j(n);if(e){if(o=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&N.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(n),!s)return R(n,o)}else{var h=B(n),d=h==To||h==So;if(vr(n))return cn(n,s);if(h==Qa||h==Ya||d&&!t){if(o=l||d?{}:ni(n),!s)return l?(f=d=n,f=(c=o)&&gn(f,P(f),c),gn(d,ei(d),f)):(d=Je(o,c=n),gn(c,$n(c),d))}else{if(!io[h])return t?n:{};o=function(e,t,n){var i=e.constructor;switch(t){case eo:return hn(e);case za:case Wa:return new i(+e);case to:return function(e,t){t=t?hn(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case Io:case Co:case Lo:case Po:case Do:case ko:case Oo:case Mo:case xo:return dn(e,n);case Ka:return new i;case qa:case Za:return new i(e);case Xa:return function(e){var t=new e.constructor(e.source,as.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ja:return new i;case Ro:return function(e){return Me?m(Me.call(e)):{}}(e)}}(n,h,s)}}var f=(a=a||new F).get(n);if(f)return f;a.set(n,o),Cr(n)?n.forEach(function(e){o.add(y(e,i,r,e,n,a))}):Sr(n)&&n.forEach(function(e,t){o.set(t,y(e,i,r,t,n,a))});var p=e?ja:(u?l?Wn:zn:l?P:L)(n);oo(p||n,function(e,t){p&&(e=n[t=e]),qe(o,t,y(e,i,r,t,n,a))})}return o}function tt(e,t,n){var i=n.length;if(null==e)return!i;for(e=m(e);i--;){var r=n[i],a=t[r],o=e[r];if(o===ja&&!(r in e)||!a(o))return!1}return!0}function nt(e,t,n){if("function"!=typeof e)throw new T(Ga);return mi(function(){e.apply(ja,n)},t)}function it(e,t,n,i){var r=-1,a=ks,o=!0,s=e.length,l=[],u=t.length;if(s){n&&(t=lo(t,ho(n))),i?(a=Os,o=!1):200<=t.length&&(a=qs,o=!1,t=new Ve(t));e:for(;++r<s;){var c=e[r],h=null==n?c:n(c),c=i||0!==c?c:0;if(o&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else a(t,h,i)||l.push(c)}}return l}p.templateSettings={escape:Ho,evaluate:Yo,interpolate:zo,variable:"",imports:{_:p}},(p.prototype=Be.prototype).constructor=p,(g.prototype=Ne(Be.prototype)).constructor=g,(_.prototype=Ne(Be.prototype)).constructor=_,Ue.prototype.clear=function(){this.__data__=Re?Re(null):{},this.size=0},Ue.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Ue.prototype.get=function(e){var t,n=this.__data__;return Re?(t=n[e])===_o?ja:t:N.call(n,e)?n[e]:ja},Ue.prototype.has=function(e){var t=this.__data__;return Re?t[e]!==ja:N.call(t,e)},Ue.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Re&&t===ja?_o:t,this},je.prototype.clear=function(){this.__data__=[],this.size=0},je.prototype.delete=function(e){var t=this.__data__;return!((e=Qe(t,e))<0||(e==t.length-1?t.pop():ae.call(t,e,1),--this.size,0))},je.prototype.get=function(e){var t=this.__data__;return(e=Qe(t,e))<0?ja:t[e][1]},je.prototype.has=function(e){return-1<Qe(this.__data__,e)},je.prototype.set=function(e,t){var n=this.__data__,i=Qe(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Ge.prototype.clear=function(){this.size=0,this.__data__={hash:new Ue,map:new(Te||je),string:new Ue}},Ge.prototype.delete=function(e){return e=Xn(this,e).delete(e),this.size-=e?1:0,e},Ge.prototype.get=function(e){return Xn(this,e).get(e)},Ge.prototype.has=function(e){return Xn(this,e).has(e)},Ge.prototype.set=function(e,t){var n=Xn(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Ve.prototype.add=Ve.prototype.push=function(e){return this.__data__.set(e,_o),this},Ve.prototype.has=function(e){return this.__data__.has(e)},F.prototype.clear=function(){this.__data__=new je,this.size=0},F.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},F.prototype.get=function(e){return this.__data__.get(e)},F.prototype.has=function(e){return this.__data__.has(e)},F.prototype.set=function(e,t){var n=this.__data__;if(n instanceof je){var i=n.__data__;if(!Te||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ge(i)}return n.set(e,t),this.size=n.size,this};var rt=vn(ht),at=vn(dt,!0);function ot(e,i){var r=!0;return rt(e,function(e,t,n){return r=!!i(e,t,n)}),r}function st(e,t,n){for(var i=-1,r=e.length;++i<r;){var a,o,s=e[i],l=t(s);null!=l&&(a===ja?l==l&&!v(l):n(l,a))&&(a=l,o=s)}return o}function lt(e,i){var r=[];return rt(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r}function l(e,t,n,i,r){var a=-1,o=e.length;for(n=n||ii,r=r||[];++a<o;){var s=e[a];0<t&&n(s)?1<t?l(s,t-1,n,i,r):uo(r,s):i||(r[r.length]=s)}return r}var ut=En(),ct=En(!0);function ht(e,t){return e&&ut(e,t,L)}function dt(e,t){return e&&ct(e,t,L)}function ft(t,e){return so(e,function(e){return Ar(t[e])})}function pt(e,t){for(var n=0,i=(t=on(t,e)).length;null!=e&&n<i;)e=e[bi(t[n++])];return n&&n==i?e:ja}function mt(e,t,n){t=t(e);return j(e)?t:uo(t,n(e))}function n(e){if(null==e)return e===ja?"[object Undefined]":"[object Null]";if(le&&le in m(e)){var t=e,n=N.call(t,le),i=t[le];try{t[le]=ja;var r=!0}catch(e){}var a=X.call(t);return r&&(n?t[le]=i:delete t[le]),a}return X.call(e)}function gt(e,t){return t<e}function _t(e,t){return null!=e&&N.call(e,t)}function yt(e,t){return null!=e&&t in m(e)}function vt(e,t,n){for(var i=n?Os:ks,r=e[0].length,a=e.length,o=a,s=b(a),l=1/0,u=[];o--;){var c=e[o];o&&t&&(c=lo(c,ho(t))),l=w(c.length,l),s[o]=!n&&(t||120<=r&&120<=c.length)?new Ve(o&&c):ja}var c=e[0],h=-1,d=s[0];e:for(;++h<r&&u.length<l;){var f=c[h],p=t?t(f):f,f=n||0!==f?f:0;if(!(d?qs(d,p):i(u,p,n))){for(o=a;--o;){var m=s[o];if(!(m?qs(m,p):i(e[o],p,n)))continue e}d&&d.push(p),u.push(f)}}return u}function Et(e,t,n){t=null==(e=di(e,t=on(t,e)))?e:e[bi(i(t))];return null==t?ja:ao(t,e,n)}function At(e){return G(e)&&n(e)==Ya}function bt(e,t,n,i,r){if(e===t)return!0;if(null==e||null==t||!G(e)&&!G(t))return e!=e&&t!=t;var a=bt,o=j(e),s=j(t),l=o?Ao:B(e),s=s?Ao:B(t),u=(l=l==Ya?Qa:l)==Qa,c=(s=s==Ya?Qa:s)==Qa;if((s=l==s)&&vr(e)){if(!vr(t))return!1;u=!(o=!0)}if(s&&!u){r=r||new F;if(o||Pr(e))return Hn(e,t,n,i,a,r);else{var h=e;var d=t;var f=l;var p=n;var m=i;var g=a;var _=r;switch(f){case to:if(h.byteLength!=d.byteLength||h.byteOffset!=d.byteOffset)return!1;h=h.buffer,d=d.buffer;case eo:return h.byteLength==d.byteLength&&g(new ee(h),new ee(d))?!0:!1;case za:case Wa:case qa:return U(+h,+d);case bo:return h.name==d.name&&h.message==d.message;case Xa:case Za:return h==d+"";case Ka:var y=el;case Ja:var v=1&p;if(y=y||nl,h.size!=d.size&&!v)return!1;v=_.get(h);if(v)return v==d;p|=2,_.set(h,d);v=Hn(y(h),y(d),p,m,g,_);return _.delete(h),v;case Ro:if(Me)return Me.call(h)==Me.call(d)}return!1;return}}if(!(1&n)){o=u&&N.call(e,"__wrapped__"),l=c&&N.call(t,"__wrapped__");if(o||l)return u=o?e.value():e,c=l?t.value():t,r=r||new F,a(u,c,n,i,r)}if(s){r=r||new F;var E=e,A=t,b=n,T=i,S=a,w=r,R=1&b,I=zn(E),C=I.length,o=zn(A).length;if(C!=o&&!R)return!1;for(var L=C;L--;){var P=I[L];if(!(R?P in A:N.call(A,P)))return!1}o=w.get(E),l=w.get(A);if(o&&l)return o==A&&l==E;for(var D=!0,k=(w.set(E,A),w.set(A,E),R);++L<C;){P=I[L];var O,M=E[P],x=A[P];if(!((O=T?R?T(x,M,P,A,E,w):T(M,x,P,E,A,w):O)===ja?M===x||S(M,x,b,T,w):O)){D=!1;break}k=k||"constructor"==P}return D&&!k&&(o=E.constructor,l=A.constructor,o!=l)&&"constructor"in E&&"constructor"in A&&!("function"==typeof o&&o instanceof o&&"function"==typeof l&&l instanceof l)&&(D=!1),w.delete(E),w.delete(A),D}return!1}function Tt(e,t,n,i){var r=n.length,a=r,o=!i;if(null==e)return!a;for(e=m(e);r--;){var s=n[r];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<a;){var l=(s=n[r])[0],u=e[l],c=s[1];if(o&&s[2]){if(u===ja&&!(l in e))return!1}else{var h,d=new F;if(!((h=i?i(u,c,l,e,t,d):h)===ja?bt(c,u,3,i,d):h))return!1}}return!0}function St(e){var t;return!(!A(e)||(t=e,Q&&Q in t))&&(Ar(e)?$:ls).test(Ti(e))}function wt(e){return"function"==typeof e?e:null==e?D:"object"==typeof e?j(e)?Dt(e[0],e[1]):Pt(e):Ia(e)}function Rt(e){if(!li(e))return ye(e);var t,n=[];for(t in m(e))N.call(e,t)&&"constructor"!=t&&n.push(t);return n}function It(e){if(!A(e)){var t=e,n=[];if(null!=t)for(var i in m(t))n.push(i);return n}var r,a=li(e),o=[];for(r in e)("constructor"!=r||!a&&N.call(e,r))&&o.push(r);return o}function Ct(e,t){return e<t}function Lt(e,i){var r=-1,a=c(e)?b(e.length):[];return rt(e,function(e,t,n){a[++r]=i(e,t,n)}),a}function Pt(t){var n=Jn(t);return 1==n.length&&n[0][2]?ci(n[0][0],n[0][1]):function(e){return e===t||Tt(e,t,n)}}function Dt(n,i){return ai(n)&&ui(i)?ci(bi(n),i):function(e){var t=Yr(e,n);return t===ja&&t===i?zr(e,n):bt(i,t,3)}}function kt(m,g,_,y,v){m!==g&&ut(g,function(e,t){var n,i,r,a,o,s,l,u,c,h,d,f,p;v=v||new F,A(e)?(i=g,a=_,o=kt,s=y,l=v,d=fi(n=m,r=t),f=fi(i,r),(p=l.get(f))?Ke(n,r,p):(p=s?s(d,f,r+"",n,i,l):ja,(i=p===ja)&&(u=j(f),c=!u&&vr(f),h=!u&&!c&&Pr(f),p=f,u||c||h?p=j(d)?d:E(d)?R(d):c?cn(f,!(i=!1)):h?dn(f,!(i=!1)):[]:Rr(f)||_r(f)?_r(p=d)?p=Nr(d):A(d)&&!Ar(d)||(p=ni(f)):i=!1),i&&(l.set(f,p),o(p,f,a,s,l),l.delete(f)),Ke(n,r,p))):(u=y?y(fi(m,t),e,t+"",m,g,v):ja,Ke(m,t,u=u===ja?e:u))},P)}function Ot(e,t){var n=e.length;if(n)return ri(t+=t<0?n:0,n)?e[t]:ja}function Mt(e,i,c){i=i.length?lo(i,function(t){return j(t)?function(e){return pt(e,1===t.length?t[0]:t)}:t}):[D];var r=-1;i=lo(i,ho(h()));var t=Lt(e,function(t,e,n){return{criteria:lo(i,function(e){return e(t)}),index:++r,value:t}}),e=function(e,t){for(var n=c,i=-1,r=e.criteria,a=t.criteria,o=r.length,s=n.length;++i<o;){var l,u=fn(r[i],a[i]);if(u)return s<=i?u:(l=n[i],u*("desc"==l?-1:1))}return e.index-t.index},n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function xt(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var o=t[i],s=pt(e,o);n(s,o)&&Vt(a,on(o,e),s)}return a}function Nt(e,t,n,i){var r=i?Us:co,a=-1,o=t.length,s=e;for(e===t&&(t=R(t)),n&&(s=lo(e,ho(n)));++a<o;)for(var l=0,u=t[a],c=n?n(u):u;-1<(l=r(s,c,l,i));)s!==e&&ae.call(s,l,1),ae.call(e,l,1);return e}function Ft(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r,a=t[n];n!=i&&a===r||(ri(r=a)?ae.call(e,a,1):Jt(e,a))}}function Bt(e,t){return e+pe(Ae()*(t-e+1))}function Ut(e,t){var n="";if(!(!e||t<1||Va<t))for(;t%2&&(n+=e),(t=pe(t/2))&&(e+=e),t;);return n}function o(e,t){return gi(hi(e,t,D),e+"")}function jt(e){return Ye(na(e))}function Gt(e,t){e=na(e);return vi(e,et(t,0,e.length))}function Vt(e,t,n,i){if(A(e))for(var r=-1,a=(t=on(t,e)).length,o=a-1,s=e;null!=s&&++r<a;){var l,u=bi(t[r]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;qe(s,u,c=r!=o&&(l=s[u],(c=i?i(l,u,s):ja)===ja)?A(l)?l:ri(t[r+1])?[]:{}:c),s=s[u]}return e}var Ht=Ie?function(e,t){return Ie.set(e,t),e}:D,t=ue?function(e,t){return ue(e,"toString",{configurable:!0,enumerable:!1,value:ga(t),writable:!0})}:D;function Yt(e){return vi(na(e))}function s(e,t,n){for(var i=-1,r=e.length,a=((n=r<n?r:n)<0&&(n+=r),r=n<(t=t<0?r<-t?0:r+t:t)?0:n-t>>>0,t>>>=0,b(r));++i<r;)a[i]=e[i+t];return a}function zt(e,i){var r;return rt(e,function(e,t,n){return!(r=i(e,t,n))}),!!r}function Wt(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=e[a];null!==o&&!v(o)&&(n?o<=t:o<t)?i=1+a:r=a}return r}return Kt(e,t,D,n)}function Kt(e,t,n,i){var r=0,a=null==e?0:e.length;if(0===a)return 0;for(var o=(t=n(t))!=t,s=null===t,l=v(t),u=t===ja;r<a;){var c=pe((r+a)/2),h=n(e[c]),d=h!==ja,f=null===h,p=h==h,m=v(h),p=o?i||p:u?p&&(i||d):s?p&&d&&(i||!f):l?p&&d&&!f&&(i||!m):!f&&!m&&(i?h<=t:h<t);p?r=c+1:a=c}return w(a,4294967294)}function qt(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o,s=e[n],l=t?t(s):s;n&&U(l,o)||(o=l,a[r++]=0===s?0:s)}return a}function Qt(e){return"number"==typeof e?e:v(e)?vo:+e}function u(e){var t;return"string"==typeof e?e:j(e)?lo(e,u)+"":v(e)?xe?xe.call(e):"":"0"==(t=e+"")&&1/e==-1/0?"-0":t}function Xt(e,t,n){var i=-1,r=ks,a=e.length,o=!0,s=[],l=s;if(n)o=!1,r=Os;else if(200<=a){var u=t?null:Fn(e);if(u)return nl(u);o=!1,r=qs,l=new Ve}else l=t?[]:s;e:for(;++i<a;){var c=e[i],h=t?t(c):c,c=n||0!==c?c:0;if(o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(c)}else r(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function Jt(e,t){return null==(e=di(e,t=on(t,e)))||delete e[bi(i(t))]}function Zt(e,t,n,i){return Vt(e,t,n(pt(e,t)),i)}function $t(e,t,n,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&t(e[a],a,e););return n?s(e,i?0:a,i?a+1:r):s(e,i?a+1:0,i?r:a)}function en(e,t){var n=e;return Ms(t,function(e,t){return t.func.apply(t.thisArg,uo([e],t.args))},n=e instanceof _?e.value():n)}function tn(e,t,n){var i=e.length;if(i<2)return i?Xt(e[0]):[];for(var r=-1,a=b(i);++r<i;)for(var o=e[r],s=-1;++s<i;)s!=r&&(a[r]=it(a[r]||o,e[s],t,n));return Xt(l(a,1),t,n)}function nn(e,t,n){for(var i=-1,r=e.length,a=t.length,o={};++i<r;){var s=i<a?t[i]:ja;n(o,e[i],s)}return o}function rn(e){return E(e)?e:[]}function an(e){return"function"==typeof e?e:D}function on(e,t){return j(e)?e:ai(e,t)?[e]:Ai(f(e))}var sn=o;function ln(e,t,n){var i=e.length;return n=n===ja?i:n,!t&&i<=n?e:s(e,t,n)}var un=ce||function(e){return ro.clearTimeout(e)};function cn(e,t){return t?e.slice():(t=e.length,t=te?te(t):new e.constructor(t),e.copy(t),t)}function hn(e){var t=new e.constructor(e.byteLength);return new ee(t).set(new ee(e)),t}function dn(e,t){t=t?hn(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function fn(e,t){if(e!==t){var n=e!==ja,i=null===e,r=e==e,a=v(e),o=t!==ja,s=null===t,l=t==t,u=v(t);if(!s&&!u&&!a&&t<e||a&&o&&l&&!s&&!u||i&&o&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&e<t||u&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!l)return-1}return 0}function pn(e,t,n,i){for(var r=-1,a=e.length,o=n.length,s=-1,l=t.length,u=S(a-o,0),c=b(l+u),h=!i;++s<l;)c[s]=t[s];for(;++r<o;)(h||r<a)&&(c[n[r]]=e[r]);for(;u--;)c[s++]=e[r++];return c}function mn(e,t,n,i){for(var r=-1,a=e.length,o=-1,s=n.length,l=-1,u=t.length,c=S(a-s,0),h=b(c+u),d=!i;++r<c;)h[r]=e[r];for(var f=r;++l<u;)h[f+l]=t[l];for(;++o<s;)(d||r<a)&&(h[f+n[o]]=e[r++]);return h}function R(e,t){var n=-1,i=e.length;for(t=t||b(i);++n<i;)t[n]=e[n];return t}function gn(e,t,n,i){for(var r=!n,a=(n=n||{},-1),o=t.length;++a<o;){var s=t[a],l=i?i(n[s],e[s],s,n,e):ja;(r?Ze:qe)(n,s,l=l===ja?e[s]:l)}return n}function _n(r,a){return function(e,t){var n=j(e)?Ls:Xe,i=a?a():{};return n(e,r,h(t,2),i)}}function yn(s){return o(function(e,t){var n=-1,i=t.length,r=1<i?t[i-1]:ja,a=2<i?t[2]:ja,r=3<s.length&&"function"==typeof r?(i--,r):ja;for(a&&d(t[0],t[1],a)&&(r=i<3?ja:r,i=1),e=m(e);++n<i;){var o=t[n];o&&s(e,o,n,r)}return e})}function vn(a,o){return function(e,t){if(null!=e){if(!c(e))return a(e,t);for(var n=e.length,i=o?n:-1,r=m(e);(o?i--:++i<n)&&!1!==t(r[i],i,r););}return e}}function En(l){return function(e,t,n){for(var i=-1,r=m(e),a=n(e),o=a.length;o--;){var s=a[l?o:++i];if(!1===t(r[s],s,r))break}return e}}function An(i){return function(e){var t=fo(e=f(e))?go(e):ja,n=t?t[0]:e.charAt(0),t=t?ln(t,1).join(""):e.slice(1);return n[i]()+t}}function bn(t){return function(e){return Ms(fa(aa(e).replace(ps,"")),t,"")}}function Tn(i){return function(){var e=arguments;switch(e.length){case 0:return new i;case 1:return new i(e[0]);case 2:return new i(e[0],e[1]);case 3:return new i(e[0],e[1],e[2]);case 4:return new i(e[0],e[1],e[2],e[3]);case 5:return new i(e[0],e[1],e[2],e[3],e[4]);case 6:return new i(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new i(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=Ne(i.prototype),n=i.apply(t,e);return A(n)?n:t}}function Sn(a,o,s){var l=Tn(a);return function e(){for(var t=arguments.length,n=b(t),i=t,r=Qn(e);i--;)n[i]=arguments[i];r=t<3&&n[0]!==r&&n[t-1]!==r?[]:po(n,r);return(t-=r.length)<s?xn(a,o,In,e.placeholder,ja,n,r,ja,ja,s-t):ao(this&&this!==ro&&this instanceof e?l:a,this,n)}}function wn(a){return function(e,t,n){var i,r=m(e),t=(c(e)||(i=h(t,3),e=L(e),t=function(e){return i(r[e],e,r)}),a(e,t,n));return-1<t?r[i?e[t]:t]:ja}}function Rn(l){return Yn(function(r){var a=r.length,e=a,t=g.prototype.thru;for(l&&r.reverse();e--;){var n=r[e];if("function"!=typeof n)throw new T(Ga);t&&!s&&"wrapper"==qn(n)&&(s=new g([],!0))}for(e=s?e:a;++e<a;)var i=qn(n=r[e]),o="wrapper"==i?Kn(n):ja,s=o&&oi(o[0])&&424==o[1]&&!o[4].length&&1==o[9]?s[qn(o[0])].apply(s,o[3]):1==n.length&&oi(n)?s[i]():s.thru(n);return function(){var e=arguments,t=e[0];if(s&&1==e.length&&j(t))return s.plant(t).value();for(var n=0,i=a?r[n].apply(this,e):t;++n<a;)i=r[n].call(this,i);return i}})}function In(o,s,l,u,c,h,d,f,p,m){var g=128&s,_=1&s,y=2&s,v=24&s,E=512&s,A=y?ja:Tn(o);return function e(){for(var t,n,i,r=b(i=arguments.length),a=i;a--;)r[a]=arguments[a];return v&&(n=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(r,t=Qn(e))),u&&(r=pn(r,u,c,v)),h&&(r=mn(r,h,d,v)),i-=n,v&&i<m?(n=po(r,t),xn(o,s,In,e.placeholder,l,r,n,f,p,m-i)):(t=_?l:this,n=y?t[o]:o,i=r.length,f?r=function(e,t){for(var n=e.length,i=w(t.length,n),r=R(e);i--;){var a=t[i];e[i]=ri(a,n)?r[a]:ja}return e}(r,f):E&&1<i&&r.reverse(),g&&p<i&&(r.length=p),(n=this&&this!==ro&&this instanceof e?A||Tn(n):n).apply(t,r))}}function Cn(n,o){return function(e,t){return e=e,i=n,r=o(t),a={},ht(e,function(e,t,n){i(a,r(e),t,n)}),a;var i,r,a}}function Ln(i,r){return function(e,t){var n;if(e===ja&&t===ja)return r;if(e!==ja&&(n=e),t!==ja){if(n===ja)return t;t=("string"==typeof e||"string"==typeof t?(e=u(e),u):(e=Qt(e),Qt))(t),n=i(e,t)}return n}}function Pn(i){return Yn(function(e){return e=lo(e,ho(h())),o(function(t){var n=this;return i(e,function(e){return ao(e,n,t)})})})}function Dn(e,t){var n=(t=t===ja?" ":u(t)).length;return n<2?n?Ut(t,e):t:(n=Ut(t,fe(e/mo(t))),fo(t)?ln(go(n),0,e).join(""):n.slice(0,e))}function kn(s,e,l,u){var c=1&e,h=Tn(s);return function e(){for(var t=-1,n=arguments.length,i=-1,r=u.length,a=b(r+n),o=this&&this!==ro&&this instanceof e?h:s;++i<r;)a[i]=u[i];for(;n--;)a[i++]=arguments[++t];return ao(o,c?l:this,a)}}function On(u){return function(e,t,n){n&&"number"!=typeof n&&d(e,t,n)&&(t=n=ja),e=Mr(e),t===ja?(t=e,e=0):t=Mr(t),n=n===ja?e<t?1:-1:Mr(n);for(var i=e,r=n,a=u,o=-1,s=S(fe((t-i)/(r||1)),0),l=b(s);s--;)l[a?s:++o]=i,i+=r;return l}}function Mn(n){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=C(e),t=C(t)),n(e,t)}}function xn(e,t,n,i,r,a,o,s,l,u){var c=8&t,r=(4&(t=(t|(c?32:64))&~(c?64:32))||(t&=-4),[e,t,r,c?a:ja,c?o:ja,c?ja:a,c?ja:o,s,l,u]),a=n.apply(ja,r);return oi(e)&&pi(a,r),a.placeholder=i,_i(a,e,t)}function Nn(e){var i=M[e];return function(e,t){var n;return e=C(e),(t=null==t?0:w(I(t),292))&&ge(e)?(n=(f(e)+"e").split("e"),+((n=(f(i(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(+n[1]-t))):i(e)}}var Fn=we&&1/nl(new we([,-0]))[1]==1/0?function(e){return new we(e)}:Ta;function Bn(a){return function(e){var t,n,i,r=B(e);return r==Ka?el(e):r==Ja?(r=e,t=-1,n=Array(r.size),r.forEach(function(e){n[++t]=[e,e]}),n):lo(a(i=e),function(e){return[e,i[e]]})}}function Un(e,t,n,i,r,a,o,s){var l,u,c,h,d,f,p,m,g,_,y,v,E,A=2&t;if(A||"function"==typeof e)return(l=i?i.length:0)||(t&=-97,i=r=ja),o=o===ja?o:S(I(o),0),s=s===ja?s:I(s),l-=r?r.length:0,64&t&&(c=i,h=r,i=r=ja),u=A?ja:Kn(e),c=[e,t,n,i,r,c,h,a,o,s],u&&(h=u,o=(a=c)[1],f=h[1],m=(p=o|f)<131,g=128==f&&8==o||128==f&&256==o&&a[7].length<=h[8]||384==f&&h[7].length<=h[8]&&8==o,m||g)&&(1&f&&(a[2]=h[2],p|=1&o?0:4),(m=h[3])&&(d=a[3],a[3]=d?pn(d,m,h[4]):m,a[4]=d?po(a[3],yo):h[4]),(m=h[5])&&(d=a[5],a[5]=d?mn(d,m,h[6]):m,a[6]=d?po(a[5],yo):h[6]),(m=h[7])&&(a[7]=m),128&f&&(a[8]=null==a[8]?h[8]:w(a[8],h[8])),null==a[9]&&(a[9]=h[9]),a[0]=h[0],a[1]=p),e=c[0],t=c[1],n=c[2],i=c[3],r=c[4],!(s=c[9]=c[9]===ja?A?0:e.length:S(c[9]-l,0))&&24&t&&(t&=-25),g=t&&1!=t?8==t||16==t?Sn(e,t,s):32!=t&&33!=t||r.length?In.apply(ja,c):kn(e,t,n,i):(y=n,v=1&t,E=Tn(_=e),function e(){return(this&&this!==ro&&this instanceof e?E:_).apply(v?y:this,arguments)}),_i((u?Ht:pi)(g,c),e,t);throw new T(Ga)}function jn(e,t,n,i){return e===ja||U(e,z[n])&&!N.call(i,n)?t:e}function Gn(e,t,n,i,r,a){return A(e)&&A(t)&&(a.set(t,e),kt(e,t,ja,Gn,a),a.delete(t)),e}function Vn(e){return Rr(e)?ja:e}function Hn(e,t,n,i,r,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&s<l))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var c=-1,h=!0,d=2&n?new Ve:ja;for(a.set(e,t),a.set(t,e);++c<s;){var f,p=e[c],m=t[c];if((f=i?o?i(m,p,c,t,e,a):i(p,m,c,e,t,a):f)!==ja){if(f)continue;h=!1;break}if(d){if(!Ns(t,function(e,t){return!qs(d,t)&&(p===e||r(p,e,n,i,a))&&d.push(t)})){h=!1;break}}else if(p!==m&&!r(p,m,n,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Yn(e){return gi(hi(e,ja,Ii),e+"")}function zn(e){return mt(e,L,$n)}function Wn(e){return mt(e,P,ei)}var Kn=Ie?function(e){return Ie.get(e)}:Ta;function qn(e){for(var t=e.name+"",n=Ce[t],i=N.call(Ce,t)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==e)return r.name}return t}function Qn(e){return(N.call(p,"placeholder")?p:e).placeholder}function h(){var e=(e=p.iteratee||va)===va?wt:e;return arguments.length?e(arguments[0],arguments[1]):e}function Xn(e,t){var n,i,e=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?e["string"==typeof t?"string":"hash"]:e.map}function Jn(e){for(var t=L(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,ui(r)]}return t}function Zn(e,t){t=t;e=null==(e=e)?ja:e[t];return St(e)?e:ja}var $n=me?function(t){return null==t?[]:(t=m(t),so(me(t),function(e){return re.call(t,e)}))}:Pa,ei=me?function(e){for(var t=[];e;)uo(t,$n(e)),e=ne(e);return t}:Pa,B=n;function ti(e,t,n){for(var i=-1,r=(t=on(t,e)).length,a=!1;++i<r;){var o=bi(t[i]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&Tr(r)&&ri(o,r)&&(j(e)||_r(e))}function ni(e){return"function"!=typeof e.constructor||li(e)?{}:Ne(ne(e))}function ii(e){return j(e)||_r(e)||!!(oe&&e&&e[oe])}function ri(e,t){var n=typeof e;return!!(t=null==t?Va:t)&&("number"==n||"symbol"!=n&&cs.test(e))&&-1<e&&e%1==0&&e<t}function d(e,t,n){var i;if(A(n))return("number"==(i=typeof t)?c(n)&&ri(t,n.length):"string"==i&&t in n)&&U(n[t],e)}function ai(e,t){var n;if(!j(e))return"number"==(n=typeof e)||"symbol"==n||"boolean"==n||null==e||v(e)||Ko.test(e)||!Wo.test(e)||null!=t&&e in m(t)}function oi(e){var t=qn(e),n=p[t];return"function"==typeof n&&t in _.prototype&&(e===n||(t=Kn(n))&&e===t[0])}(a&&B(new a(new ArrayBuffer(1)))!=to||Te&&B(new Te)!=Ka||Se&&B(Se.resolve())!=wo||we&&B(new we)!=Ja||e&&B(new e)!=$a)&&(B=function(e){var t=n(e),e=t==Qa?e.constructor:ja,e=e?Ti(e):"";if(e)switch(e){case Le:return to;case Pe:return Ka;case De:return wo;case ke:return Ja;case Oe:return $a}return t});var si=W?Ar:Da;function li(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||z)}function ui(e){return e==e&&!A(e)}function ci(t,n){return function(e){return null!=e&&e[t]===n&&(n!==ja||t in m(e))}}function hi(a,o,s){return o=S(o===ja?a.length-1:o,0),function(){for(var e=arguments,t=-1,n=S(e.length-o,0),i=b(n);++t<n;)i[t]=e[o+t];for(var t=-1,r=b(o+1);++t<o;)r[t]=e[t];return r[o]=s(i),ao(a,this,r)}}function di(e,t){return t.length<2?e:pt(e,s(t,0,-1))}function fi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pi=yi(Ht),mi=de||function(e,t){return ro.setTimeout(e,t)},gi=yi(t);function _i(e,t,n){var i,r,a,t=t+"";return gi(e,(r=(t=(t=e=t).match($o))?t[1].split(es):[],a=n,oo(Eo,function(e){var t="_."+e[0];a&e[1]&&!ks(r,t)&&r.push(t)}),t=r.sort(),(n=t.length)?(t[i=n-1]=(1<n?"& ":"")+t[i],t=t.join(2<n?", ":" "),e.replace(Zo,"{\n/* [wrapped with "+t+"] */\n")):e))}function yi(n){var i=0,r=0;return function(){var e=ve(),t=16-(e-r);if(r=e,0<t){if(800<=++i)return arguments[0]}else i=0;return n.apply(ja,arguments)}}function vi(e,t){var n=-1,i=e.length,r=i-1;for(t=t===ja?i:t;++n<t;){var a=Bt(n,r),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}Ei=(ce=cr(ce=function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(qo,function(e,t,n,i){r.push(n?i.replace(is,"$1"):t||e)}),r},function(e){return 500===Ei.size&&Ei.clear(),e})).cache;var Ei,Ai=ce;function bi(e){var t;return"string"==typeof e||v(e)?e:"0"==(t=e+"")&&1/e==-1/0?"-0":t}function Ti(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Si(e){var t;return e instanceof _?e.clone():((t=new g(e.__wrapped__,e.__chain__)).__actions__=R(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t)}a=o(function(e,t){return E(e)?it(e,l(t,1,E,!0)):[]}),Se=o(function(e,t){var n=i(t);return E(n)&&(n=ja),E(e)?it(e,l(t,1,E,!0),h(n,2)):[]}),e=o(function(e,t){var n=i(t);return E(n)&&(n=ja),E(e)?it(e,l(t,1,E,!0),ja,n):[]});function wi(e,t,n){var i=null==e?0:e.length;return i?((n=null==n?0:I(n))<0&&(n=S(i+n,0)),Bs(e,h(t,3),n)):-1}function Ri(e,t,n){var i,r=null==e?0:e.length;return r?(i=r-1,n!==ja&&(i=I(n),i=n<0?S(r+i,0):w(i,r-1)),Bs(e,h(t,3),i,!0)):-1}function Ii(e){return(null==e?0:e.length)?l(e,1):[]}function Ci(e){return e&&e.length?e[0]:ja}W=o(function(e){var t=lo(e,rn);return t.length&&t[0]===e[0]?vt(t):[]}),de=o(function(e){var t=i(e),n=lo(e,rn);return t===i(n)?t=ja:n.pop(),n.length&&n[0]===e[0]?vt(n,h(t,2)):[]}),t=o(function(e){var t=i(e),n=lo(e,rn);return(t="function"==typeof t?t:ja)&&n.pop(),n.length&&n[0]===e[0]?vt(n,ja,t):[]});function i(e){var t=null==e?0:e.length;return t?e[t-1]:ja}ce=o(Li);function Li(e,t){return e&&e.length&&t&&t.length?Nt(e,t):e}var Pi=Yn(function(e,t){var n=null==e?0:e.length,i=$e(e,t);return Ft(e,lo(t,function(e){return ri(e,n)?+e:e}).sort(fn)),i});function Di(e){return null==e?e:be.call(e)}var ki=o(function(e){return Xt(l(e,1,E,!0))}),Oi=o(function(e){var t=i(e);return E(t)&&(t=ja),Xt(l(e,1,E,!0),h(t,2))}),Mi=o(function(e){var t="function"==typeof(t=i(e))?t:ja;return Xt(l(e,1,E,!0),ja,t)});function xi(t){var n;return t&&t.length?(n=0,t=so(t,function(e){return E(e)&&(n=S(e.length,n),1)}),zs(n,function(e){return lo(t,Vs(e))})):[]}function Ni(e,t){return e&&e.length?(e=xi(e),null==t?e:lo(e,function(e){return ao(t,ja,e)})):[]}var Fi=o(function(e,t){return E(e)?it(e,t):[]}),Bi=o(function(e){return tn(so(e,E))}),Ui=o(function(e){var t=i(e);return E(t)&&(t=ja),tn(so(e,E),h(t,2))}),ji=o(function(e){var t="function"==typeof(t=i(e))?t:ja;return tn(so(e,E),ja,t)}),Gi=o(xi);var Vi=o(function(e){var t=e.length,t="function"==typeof(t=1<t?e[t-1]:ja)?(e.pop(),t):ja;return Ni(e,t)});function Hi(e){e=p(e);return e.__chain__=!0,e}function Yi(e,t){return t(e)}var zi=Yn(function(t){function e(e){return $e(e,t)}var n=t.length,i=n?t[0]:0,r=this.__wrapped__;return!(1<n||this.__actions__.length)&&r instanceof _&&ri(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:Yi,args:[e],thisArg:ja}),new g(r,this.__chain__).thru(function(e){return n&&!e.length&&e.push(ja),e})):this.thru(e)});var Wi=_n(function(e,t,n){N.call(e,n)?++e[n]:Ze(e,n,1)});var Ki=wn(wi),qi=wn(Ri);function Qi(e,t){return(j(e)?oo:rt)(e,h(t,3))}function Xi(e,t){return(j(e)?Ps:at)(e,h(t,3))}var Ji=_n(function(e,t,n){N.call(e,n)?e[n].push(t):Ze(e,n,[t])});var Zi=o(function(e,t,n){var i=-1,r="function"==typeof t,a=c(e)?b(e.length):[];return rt(e,function(e){a[++i]=r?ao(t,e,n):Et(e,t,n)}),a}),$i=_n(function(e,t,n){Ze(e,n,t)});function er(e,t){return(j(e)?lo:Lt)(e,h(t,3))}var tr=_n(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var nr=o(function(e,t){var n;return null==e?[]:(1<(n=t.length)&&d(e,t[0],t[1])?t=[]:2<n&&d(t[0],t[1],t[2])&&(t=[t[0]]),Mt(e,l(t,1),[]))}),ir=he||function(){return ro.Date.now()};function rr(e,t,n){return t=n?ja:t,t=e&&null==t?e.length:t,Un(e,128,ja,ja,ja,ja,t)}function ar(e,t){var n;if("function"!=typeof t)throw new T(Ga);return e=I(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=ja),n}}var or=o(function(e,t,n){var i,r=1;return n.length&&(i=po(n,Qn(or)),r|=32),Un(e,r,t,n,i)}),sr=o(function(e,t,n){var i,r=3;return n.length&&(i=po(n,Qn(sr)),r|=32),Un(t,r,e,n,i)});function lr(i,n,e){var r,a,o,s,l,u,c=0,h=!1,d=!1,t=!0;if("function"!=typeof i)throw new T(Ga);function f(e){var t=r,n=a;return r=a=ja,c=e,s=i.apply(n,t)}function p(e){var t=e-u;return u===ja||n<=t||t<0||d&&o<=e-c}function m(){var e,t=ir();if(p(t))return g(t);l=mi(m,(e=n-((t=t)-u),d?w(e,o-(t-c)):e))}function g(e){return l=ja,t&&r?f(e):(r=a=ja,s)}function _(){var e=ir(),t=p(e);if(r=arguments,a=this,u=e,t){if(l===ja)return c=e=u,l=mi(m,n),h?f(e):s;if(d)return un(l),l=mi(m,n),f(u)}return l===ja&&(l=mi(m,n)),s}return n=C(n)||0,A(e)&&(h=!!e.leading,d="maxWait"in e,o=d?S(C(e.maxWait)||0,n):o,t="trailing"in e?!!e.trailing:t),_.cancel=function(){l!==ja&&un(l),c=0,r=u=a=l=ja},_.flush=function(){return l===ja?s:g(ir())},_}var he=o(function(e,t){return nt(e,1,t)}),ur=o(function(e,t,n){return nt(e,C(t)||0,n)});function cr(i,r){if("function"!=typeof i||null!=r&&"function"!=typeof r)throw new T(Ga);function a(){var e=arguments,t=r?r.apply(this,e):e[0],n=a.cache;return n.has(t)?n.get(t):(e=i.apply(this,e),a.cache=n.set(t,e)||n,e)}return a.cache=new(cr.Cache||Ge),a}function hr(t){if("function"!=typeof t)throw new T(Ga);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}cr.Cache=Ge;var sn=sn(function(i,r){var a=(r=1==r.length&&j(r[0])?lo(r[0],ho(h())):lo(l(r,1),ho(h()))).length;return o(function(e){for(var t=-1,n=w(e.length,a);++t<n;)e[t]=r[t].call(this,e[t]);return ao(i,this,e)})}),dr=o(function(e,t){var n=po(t,Qn(dr));return Un(e,32,ja,t,n)}),fr=o(function(e,t){var n=po(t,Qn(fr));return Un(e,64,ja,t,n)}),pr=Yn(function(e,t){return Un(e,256,ja,ja,ja,t)});function U(e,t){return e===t||e!=e&&t!=t}var mr=Mn(gt),gr=Mn(function(e,t){return t<=e}),_r=At(function(){return arguments}())?At:function(e){return G(e)&&N.call(e,"callee")&&!re.call(e,"callee")},j=b.isArray,yr=Ts?ho(Ts):function(e){return G(e)&&n(e)==eo};function c(e){return null!=e&&Tr(e.length)&&!Ar(e)}function E(e){return G(e)&&c(e)}var vr=Y||Da,Y=Ss?ho(Ss):function(e){return G(e)&&n(e)==Wa};function Er(e){var t;return!!G(e)&&((t=n(e))==bo||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Rr(e))}function Ar(e){return!!A(e)&&((e=n(e))==To||e==So||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function br(e){return"number"==typeof e&&e==I(e)}function Tr(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=Va}function A(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function G(e){return null!=e&&"object"==typeof e}var Sr=ws?ho(ws):function(e){return G(e)&&B(e)==Ka};function wr(e){return"number"==typeof e||G(e)&&n(e)==qa}function Rr(e){return!(!G(e)||n(e)!=Qa)&&(null===(e=ne(e))||"function"==typeof(e=N.call(e,"constructor")&&e.constructor)&&e instanceof e&&K.call(e)==J)}var Ir=Rs?ho(Rs):function(e){return G(e)&&n(e)==Xa};var Cr=Is?ho(Is):function(e){return G(e)&&B(e)==Ja};function Lr(e){return"string"==typeof e||!j(e)&&G(e)&&n(e)==Za}function v(e){return"symbol"==typeof e||G(e)&&n(e)==Ro}var Pr=Cs?ho(Cs):function(e){return G(e)&&Tr(e.length)&&!!no[n(e)]};var Dr=Mn(Ct),kr=Mn(function(e,t){return e<=t});function Or(e){if(!e)return[];if(c(e))return(Lr(e)?go:R)(e);if(se&&e[se]){for(var t,n=e[se](),i=[];!(t=n.next()).done;)i.push(t.value);return i}var r=B(e);return(r==Ka?el:r==Ja?nl:na)(e)}function Mr(e){return e?(e=C(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function I(e){var e=Mr(e),t=e%1;return e==e?t?e-t:e:0}function xr(e){return e?et(I(e),0,Ha):0}function C(e){if("number"==typeof e)return e;if(v(e))return vo;if("string"!=typeof(e=A(e)?A(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=Ws(e);var t=ss.test(e);return t||us.test(e)?As(e.slice(2),t?2:8):os.test(e)?vo:+e}function Nr(e){return gn(e,P(e))}function f(e){return null==e?"":u(e)}var Fr=yn(function(e,t){if(li(t)||c(t))gn(t,L(t),e);else for(var n in t)N.call(t,n)&&qe(e,n,t[n])}),Br=yn(function(e,t){gn(t,P(t),e)}),Ur=yn(function(e,t,n,i){gn(t,P(t),e,i)}),jr=yn(function(e,t,n,i){gn(t,L(t),e,i)}),Gr=Yn($e);var Vr=o(function(e,t){e=m(e);var n=-1,i=t.length,r=2<i?t[2]:ja;for(r&&d(t[0],t[1],r)&&(i=1);++n<i;)for(var a=t[n],o=P(a),s=-1,l=o.length;++s<l;){var u=o[s],c=e[u];(c===ja||U(c,z[u])&&!N.call(e,u))&&(e[u]=a[u])}return e}),Hr=o(function(e){return e.push(ja,Gn),ao(Xr,ja,e)});function Yr(e,t,n){e=null==e?ja:pt(e,t);return e===ja?n:e}function zr(e,t){return null!=e&&ti(e,t,yt)}var Wr=Cn(function(e,t,n){e[t=null!=t&&"function"!=typeof t.toString?X.call(t):t]=n},ga(D)),Kr=Cn(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=X.call(t)),N.call(e,t)?e[t].push(n):e[t]=[n]},h),qr=o(Et);function L(e){return(c(e)?He:Rt)(e)}function P(e){return c(e)?He(e,!0):It(e)}var Qr=yn(function(e,t,n){kt(e,t,n)}),Xr=yn(function(e,t,n,i){kt(e,t,n,i)}),Jr=Yn(function(t,e){var n={};if(null!=t)for(var i=!1,r=(e=lo(e,function(e){return e=on(e,t),i=i||1<e.length,e}),gn(t,Wn(t),n),i&&(n=y(n,7,Vn)),e.length);r--;)Jt(n,e[r]);return n});var Zr=Yn(function(e,t){return null==e?{}:xt(n=e,t,function(e,t){return zr(n,t)});var n});function $r(e,n){var t;return null==e?{}:(t=lo(Wn(e),function(e){return[e]}),n=h(n),xt(e,t,function(e,t){return n(e,t[0])}))}var ea=Bn(L),ta=Bn(P);function na(e){return null==e?[]:Ks(e,L(e))}var ia=bn(function(e,t,n){return t=t.toLowerCase(),e+(n?ra(t):t)});function ra(e){return da(f(e).toLowerCase())}function aa(e){return(e=f(e))&&e.replace(hs,Js).replace(ms,"")}var oa=bn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),sa=bn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),la=An("toLowerCase");var ua=bn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var ca=bn(function(e,t,n){return e+(n?" ":"")+da(t)});var ha=bn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),da=An("toUpperCase");function fa(e,t,n){return e=f(e),(t=n?ja:t)===ja?(n=e,_s.test(n)?e.match(gs)||[]:e.match(ts)||[]):e.match(t)||[]}var pa=o(function(e,t){try{return ao(e,ja,t)}catch(e){return Er(e)?e:new k(e)}}),ma=Yn(function(t,e){return oo(e,function(e){e=bi(e),Ze(t,e,or(t[e],t))}),t});function ga(e){return function(){return e}}var _a=Rn(),ya=Rn(!0);function D(e){return e}function va(e){return wt("function"==typeof e?e:y(e,1))}var Ea=o(function(t,n){return function(e){return Et(e,t,n)}}),Aa=o(function(t,n){return function(e){return Et(t,e,n)}});function ba(i,t,e){var n=L(t),r=ft(t,n),a=(null!=e||A(t)&&(r.length||!n.length)||(e=t,t=i,i=this,r=ft(t,L(t))),!(A(e)&&"chain"in e&&!e.chain)),o=Ar(i);return oo(r,function(e){var n=t[e];i[e]=n,o&&(i.prototype[e]=function(){var e,t=this.__chain__;return a||t?(((e=i(this.__wrapped__)).__actions__=R(this.__actions__)).push({func:n,args:arguments,thisArg:i}),e.__chain__=t,e):n.apply(i,uo([this.value()],arguments))})}),i}function Ta(){}var Sa=Pn(lo),wa=Pn(Ds),Ra=Pn(Ns);function Ia(e){return ai(e)?Vs(bi(e)):(t=e,function(e){return pt(e,t)});var t}var Ca=On(),La=On(!0);function Pa(){return[]}function Da(){return!1}var ka=Ln(function(e,t){return e+t},0),Oa=Nn("ceil"),Ma=Ln(function(e,t){return e/t},1),xa=Nn("floor");var Na,Fa=Ln(function(e,t){return e*t},1),Ba=Nn("round"),Ua=Ln(function(e,t){return e-t},0);return p.after=function(e,t){if("function"!=typeof t)throw new T(Ga);return e=I(e),function(){if(--e<1)return t.apply(this,arguments)}},p.ary=rr,p.assign=Fr,p.assignIn=Br,p.assignInWith=Ur,p.assignWith=jr,p.at=Gr,p.before=ar,p.bind=or,p.bindAll=ma,p.bindKey=sr,p.castArray=function(){var e;return arguments.length?j(e=arguments[0])?e:[e]:[]},p.chain=Hi,p.chunk=function(e,t,n){t=(n?d(e,t,n):t===ja)?1:S(I(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var r=0,a=0,o=b(fe(i/t));r<i;)o[a++]=s(e,r,r+=t);return o},p.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var a=e[t];a&&(r[i++]=a)}return r},p.concat=function(){var e=arguments.length;if(!e)return[];for(var t=b(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return uo(j(n)?R(n):[n],l(t,1))},p.cond=function(i){var r=null==i?0:i.length,t=h();return i=r?lo(i,function(e){if("function"!=typeof e[1])throw new T(Ga);return[t(e[0]),e[1]]}):[],o(function(e){for(var t=-1;++t<r;){var n=i[t];if(ao(n[0],this,e))return ao(n[1],this,e)}})},p.conforms=function(e){return t=y(e,1),n=L(t),function(e){return tt(e,t,n)};var t,n},p.constant=ga,p.countBy=Wi,p.create=function(e,t){return e=Ne(e),null==t?e:Je(e,t)},p.curry=function e(t,n,i){t=Un(t,8,ja,ja,ja,ja,ja,n=i?ja:n);return t.placeholder=e.placeholder,t},p.curryRight=function e(t,n,i){t=Un(t,16,ja,ja,ja,ja,ja,n=i?ja:n);return t.placeholder=e.placeholder,t},p.debounce=lr,p.defaults=Vr,p.defaultsDeep=Hr,p.defer=he,p.delay=ur,p.difference=a,p.differenceBy=Se,p.differenceWith=e,p.drop=function(e,t,n){var i=null==e?0:e.length;return i?s(e,(t=n||t===ja?1:I(t))<0?0:t,i):[]},p.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?s(e,0,(t=i-(t=n||t===ja?1:I(t)))<0?0:t):[]},p.dropRightWhile=function(e,t){return e&&e.length?$t(e,h(t,3),!0,!0):[]},p.dropWhile=function(e,t){return e&&e.length?$t(e,h(t,3),!0):[]},p.fill=function(e,t,n,i){if(!(l=null==e?0:e.length))return[];n&&"number"!=typeof n&&d(e,t,n)&&(n=0,i=l);var r=e,a=t,o=n,s=i,l=r.length;for((o=I(o))<0&&(o=l<-o?0:l+o),(s=s===ja||l<s?l:I(s))<0&&(s+=l),s=s<o?0:xr(s);o<s;)r[o++]=a;return r},p.filter=function(e,t){return(j(e)?so:lt)(e,h(t,3))},p.flatMap=function(e,t){return l(er(e,t),1)},p.flatMapDeep=function(e,t){return l(er(e,t),1/0)},p.flatMapDepth=function(e,t,n){return n=n===ja?1:I(n),l(er(e,t),n)},p.flatten=Ii,p.flattenDeep=function(e){return(null==e?0:e.length)?l(e,1/0):[]},p.flattenDepth=function(e,t){return(null==e?0:e.length)?l(e,t=t===ja?1:I(t)):[]},p.flip=function(e){return Un(e,512)},p.flow=_a,p.flowRight=ya,p.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},p.functions=function(e){return null==e?[]:ft(e,L(e))},p.functionsIn=function(e){return null==e?[]:ft(e,P(e))},p.groupBy=Ji,p.initial=function(e){return(null==e?0:e.length)?s(e,0,-1):[]},p.intersection=W,p.intersectionBy=de,p.intersectionWith=t,p.invert=Wr,p.invertBy=Kr,p.invokeMap=Zi,p.iteratee=va,p.keyBy=$i,p.keys=L,p.keysIn=P,p.map=er,p.mapKeys=function(e,i){var r={};return i=h(i,3),ht(e,function(e,t,n){Ze(r,i(e,t,n),e)}),r},p.mapValues=function(e,i){var r={};return i=h(i,3),ht(e,function(e,t,n){Ze(r,t,i(e,t,n))}),r},p.matches=function(e){return Pt(y(e,1))},p.matchesProperty=function(e,t){return Dt(e,y(t,1))},p.memoize=cr,p.merge=Qr,p.mergeWith=Xr,p.method=Ea,p.methodOf=Aa,p.mixin=ba,p.negate=hr,p.nthArg=function(t){return t=I(t),o(function(e){return Ot(e,t)})},p.omit=Jr,p.omitBy=function(e,t){return $r(e,hr(h(t)))},p.once=function(e){return ar(2,e)},p.orderBy=function(e,t,n,i){return null==e?[]:Mt(e,t=j(t)?t:null==t?[]:[t],n=j(n=i?ja:n)?n:null==n?[]:[n])},p.over=Sa,p.overArgs=sn,p.overEvery=wa,p.overSome=Ra,p.partial=dr,p.partialRight=fr,p.partition=tr,p.pick=Zr,p.pickBy=$r,p.property=Ia,p.propertyOf=function(t){return function(e){return null==t?ja:pt(t,e)}},p.pull=ce,p.pullAll=Li,p.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Nt(e,t,h(n,2)):e},p.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Nt(e,t,ja,n):e},p.pullAt=Pi,p.range=Ca,p.rangeRight=La,p.rearg=pr,p.reject=function(e,t){return(j(e)?so:lt)(e,hr(h(t,3)))},p.remove=function(e,t){var n=[];if(e&&e.length){var i=-1,r=[],a=e.length;for(t=h(t,3);++i<a;){var o=e[i];t(o,i,e)&&(n.push(o),r.push(i))}Ft(e,r)}return n},p.rest=function(e,t){if("function"!=typeof e)throw new T(Ga);return o(e,t=t===ja?t:I(t))},p.reverse=Di,p.sampleSize=function(e,t,n){return t=(n?d(e,t,n):t===ja)?1:I(t),(j(e)?ze:Gt)(e,t)},p.set=function(e,t,n){return null==e?e:Vt(e,t,n)},p.setWith=function(e,t,n,i){return i="function"==typeof i?i:ja,null==e?e:Vt(e,t,n,i)},p.shuffle=function(e){return(j(e)?We:Yt)(e)},p.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n=n&&"number"!=typeof n&&d(e,t,n)?(t=0,i):(t=null==t?0:I(t),n===ja?i:I(n)),s(e,t,n)):[]},p.sortBy=nr,p.sortedUniq=function(e){return e&&e.length?qt(e):[]},p.sortedUniqBy=function(e,t){return e&&e.length?qt(e,h(t,2)):[]},p.split=function(e,t,n){return n&&"number"!=typeof n&&d(e,t,n)&&(t=n=ja),(n=n===ja?Ha:n>>>0)?(e=f(e))&&("string"==typeof t||null!=t&&!Ir(t))&&!(t=u(t))&&fo(e)?ln(go(e),0,n):e.split(t,n):[]},p.spread=function(n,i){if("function"!=typeof n)throw new T(Ga);return i=null==i?0:S(I(i),0),o(function(e){var t=e[i],e=ln(e,0,i);return t&&uo(e,t),ao(n,this,e)})},p.tail=function(e){var t=null==e?0:e.length;return t?s(e,1,t):[]},p.take=function(e,t,n){return e&&e.length?s(e,0,(t=n||t===ja?1:I(t))<0?0:t):[]},p.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?s(e,(t=i-(t=n||t===ja?1:I(t)))<0?0:t,i):[]},p.takeRightWhile=function(e,t){return e&&e.length?$t(e,h(t,3),!1,!0):[]},p.takeWhile=function(e,t){return e&&e.length?$t(e,h(t,3)):[]},p.tap=function(e,t){return t(e),e},p.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new T(Ga);return A(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),lr(e,t,{leading:i,maxWait:t,trailing:r})},p.thru=Yi,p.toArray=Or,p.toPairs=ea,p.toPairsIn=ta,p.toPath=function(e){return j(e)?lo(e,bi):v(e)?[e]:R(Ai(f(e)))},p.toPlainObject=Nr,p.transform=function(e,i,r){var t,n=j(e),a=n||vr(e)||Pr(e);return i=h(i,4),null==r&&(t=e&&e.constructor,r=a?n?new t:[]:A(e)&&Ar(t)?Ne(ne(e)):{}),(a?oo:ht)(e,function(e,t,n){return i(r,e,t,n)}),r},p.unary=function(e){return rr(e,1)},p.union=ki,p.unionBy=Oi,p.unionWith=Mi,p.uniq=function(e){return e&&e.length?Xt(e):[]},p.uniqBy=function(e,t){return e&&e.length?Xt(e,h(t,2)):[]},p.uniqWith=function(e,t){return t="function"==typeof t?t:ja,e&&e.length?Xt(e,ja,t):[]},p.unset=function(e,t){return null==e||Jt(e,t)},p.unzip=xi,p.unzipWith=Ni,p.update=function(e,t,n){return null==e?e:Zt(e,t,an(n))},p.updateWith=function(e,t,n,i){return i="function"==typeof i?i:ja,null==e?e:Zt(e,t,an(n),i)},p.values=na,p.valuesIn=function(e){return null==e?[]:Ks(e,P(e))},p.without=Fi,p.words=fa,p.wrap=function(e,t){return dr(an(t),e)},p.xor=Bi,p.xorBy=Ui,p.xorWith=ji,p.zip=Gi,p.zipObject=function(e,t){return nn(e||[],t||[],qe)},p.zipObjectDeep=function(e,t){return nn(e||[],t||[],Vt)},p.zipWith=Vi,p.entries=ea,p.entriesIn=ta,p.extend=Br,p.extendWith=Ur,ba(p,p),p.add=ka,p.attempt=pa,p.camelCase=ia,p.capitalize=ra,p.ceil=Oa,p.clamp=function(e,t,n){return n===ja&&(n=t,t=ja),n!==ja&&(n=(n=C(n))==n?n:0),t!==ja&&(t=(t=C(t))==t?t:0),et(C(e),t,n)},p.clone=function(e){return y(e,4)},p.cloneDeep=function(e){return y(e,5)},p.cloneDeepWith=function(e,t){return y(e,5,t="function"==typeof t?t:ja)},p.cloneWith=function(e,t){return y(e,4,t="function"==typeof t?t:ja)},p.conformsTo=function(e,t){return null==t||tt(e,t,L(t))},p.deburr=aa,p.defaultTo=function(e,t){return null==e||e!=e?t:e},p.divide=Ma,p.endsWith=function(e,t,n){e=f(e),t=u(t);var i=e.length,i=n=n===ja?i:et(I(n),0,i);return 0<=(n-=t.length)&&e.slice(n,i)==t},p.eq=U,p.escape=function(e){return(e=f(e))&&Vo.test(e)?e.replace(jo,Zs):e},p.escapeRegExp=function(e){return(e=f(e))&&Xo.test(e)?e.replace(Qo,"\\$&"):e},p.every=function(e,t,n){return(j(e)?Ds:ot)(e,h(t=n&&d(e,t,n)?ja:t,3))},p.find=Ki,p.findIndex=wi,p.findKey=function(e,t){return Fs(e,h(t,3),ht)},p.findLast=qi,p.findLastIndex=Ri,p.findLastKey=function(e,t){return Fs(e,h(t,3),dt)},p.floor=xa,p.forEach=Qi,p.forEachRight=Xi,p.forIn=function(e,t){return null==e?e:ut(e,h(t,3),P)},p.forInRight=function(e,t){return null==e?e:ct(e,h(t,3),P)},p.forOwn=function(e,t){return e&&ht(e,h(t,3))},p.forOwnRight=function(e,t){return e&&dt(e,h(t,3))},p.get=Yr,p.gt=mr,p.gte=gr,p.has=function(e,t){return null!=e&&ti(e,t,_t)},p.hasIn=zr,p.head=Ci,p.identity=D,p.includes=function(e,t,n,i){return e=c(e)?e:na(e),n=n&&!i?I(n):0,i=e.length,n<0&&(n=S(i+n,0)),Lr(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<co(e,t,n)},p.indexOf=function(e,t,n){var i=null==e?0:e.length;return i?co(e,t,e=(e=null==n?0:I(n))<0?S(i+e,0):e):-1},p.inRange=function(e,t,n){return t=Mr(t),n===ja?(n=t,t=0):n=Mr(n),(e=e=C(e))>=w(t=t,n=n)&&e<S(t,n)},p.invoke=qr,p.isArguments=_r,p.isArray=j,p.isArrayBuffer=yr,p.isArrayLike=c,p.isArrayLikeObject=E,p.isBoolean=function(e){return!0===e||!1===e||G(e)&&n(e)==za},p.isBuffer=vr,p.isDate=Y,p.isElement=function(e){return G(e)&&1===e.nodeType&&!Rr(e)},p.isEmpty=function(e){if(null!=e){if(c(e)&&(j(e)||"string"==typeof e||"function"==typeof e.splice||vr(e)||Pr(e)||_r(e)))return!e.length;var t,n=B(e);if(n==Ka||n==Ja)return!e.size;if(li(e))return!Rt(e).length;for(t in e)if(N.call(e,t))return!1}return!0},p.isEqual=function(e,t){return bt(e,t)},p.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:ja)?n(e,t):ja;return i===ja?bt(e,t,ja,n):!!i},p.isError=Er,p.isFinite=function(e){return"number"==typeof e&&ge(e)},p.isFunction=Ar,p.isInteger=br,p.isLength=Tr,p.isMap=Sr,p.isMatch=function(e,t){return e===t||Tt(e,t,Jn(t))},p.isMatchWith=function(e,t,n){return n="function"==typeof n?n:ja,Tt(e,t,Jn(t),n)},p.isNaN=function(e){return wr(e)&&e!=+e},p.isNative=function(e){if(si(e))throw new k("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return St(e)},p.isNil=function(e){return null==e},p.isNull=function(e){return null===e},p.isNumber=wr,p.isObject=A,p.isObjectLike=G,p.isPlainObject=Rr,p.isRegExp=Ir,p.isSafeInteger=function(e){return br(e)&&-Va<=e&&e<=Va},p.isSet=Cr,p.isString=Lr,p.isSymbol=v,p.isTypedArray=Pr,p.isUndefined=function(e){return e===ja},p.isWeakMap=function(e){return G(e)&&B(e)==$a},p.isWeakSet=function(e){return G(e)&&"[object WeakSet]"==n(e)},p.join=function(e,t){return null==e?"":_e.call(e,t)},p.kebabCase=oa,p.last=i,p.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;if(n!==ja&&(r=(r=I(n))<0?S(i+r,0):w(r,i-1)),t!=t)return Bs(e,js,r,!0);for(var a=e,o=t,s=r+1;s--;)if(a[s]===o)return s;return s},p.lowerCase=sa,p.lowerFirst=la,p.lt=Dr,p.lte=kr,p.max=function(e){return e&&e.length?st(e,D,gt):ja},p.maxBy=function(e,t){return e&&e.length?st(e,h(t,2),gt):ja},p.mean=function(e){return Gs(e,D)},p.meanBy=function(e,t){return Gs(e,h(t,2))},p.min=function(e){return e&&e.length?st(e,D,Ct):ja},p.minBy=function(e,t){return e&&e.length?st(e,h(t,2),Ct):ja},p.stubArray=Pa,p.stubFalse=Da,p.stubObject=function(){return{}},p.stubString=function(){return""},p.stubTrue=function(){return!0},p.multiply=Fa,p.nth=function(e,t){return e&&e.length?Ot(e,I(t)):ja},p.noConflict=function(){return ro._===this&&(ro._=Z),this},p.noop=Ta,p.now=ir,p.pad=function(e,t,n){e=f(e);var i=(t=I(t))?mo(e):0;return!t||t<=i?e:Dn(pe(t=(t-i)/2),n)+e+Dn(fe(t),n)},p.padEnd=function(e,t,n){e=f(e);var i=(t=I(t))?mo(e):0;return t&&i<t?e+Dn(t-i,n):e},p.padStart=function(e,t,n){e=f(e);var i=(t=I(t))?mo(e):0;return t&&i<t?Dn(t-i,n)+e:e},p.parseInt=function(e,t,n){return t=n||null==t?0:t&&+t,Ee(f(e).replace(Jo,""),t||0)},p.random=function(e,t,n){var i;return n&&"boolean"!=typeof n&&d(e,t,n)&&(t=n=ja),n===ja&&("boolean"==typeof t?(n=t,t=ja):"boolean"==typeof e&&(n=e,e=ja)),e===ja&&t===ja?(e=0,t=1):(e=Mr(e),t===ja?(t=e,e=0):t=Mr(t)),t<e&&(i=e,e=t,t=i),n||e%1||t%1?(i=Ae(),w(e+i*(t-e+Es("1e-"+((i+"").length-1))),t)):Bt(e,t)},p.reduce=function(e,t,n){var i=j(e)?Ms:Hs,r=arguments.length<3;return i(e,h(t,4),n,r,rt)},p.reduceRight=function(e,t,n){var i=j(e)?xs:Hs,r=arguments.length<3;return i(e,h(t,4),n,r,at)},p.repeat=function(e,t,n){return t=(n?d(e,t,n):t===ja)?1:I(t),Ut(f(e),t)},p.replace=function(){var e=arguments,t=f(e[0]);return e.length<3?t:t.replace(e[1],e[2])},p.result=function(e,t,n){var i=-1,r=(t=on(t,e)).length;for(r||(r=1,e=ja);++i<r;){var a=null==e?ja:e[bi(t[i])];a===ja&&(i=r,a=n),e=Ar(a)?a.call(e):a}return e},p.round=Ba,p.runInContext=r,p.sample=function(e){return(j(e)?Ye:jt)(e)},p.size=function(e){var t;return null==e?0:c(e)?Lr(e)?mo(e):e.length:(t=B(e))==Ka||t==Ja?e.size:Rt(e).length},p.snakeCase=ua,p.some=function(e,t,n){return(j(e)?Ns:zt)(e,h(t=n&&d(e,t,n)?ja:t,3))},p.sortedIndex=function(e,t){return Wt(e,t)},p.sortedIndexBy=function(e,t,n){return Kt(e,t,h(n,2))},p.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Wt(e,t);if(i<n&&U(e[i],t))return i}return-1},p.sortedLastIndex=function(e,t){return Wt(e,t,!0)},p.sortedLastIndexBy=function(e,t,n){return Kt(e,t,h(n,2),!0)},p.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Wt(e,t,!0)-1;if(U(e[n],t))return n}return-1},p.startCase=ca,p.startsWith=function(e,t,n){return e=f(e),n=null==n?0:et(I(n),0,e.length),t=u(t),e.slice(n,n+t.length)==t},p.subtract=Ua,p.sum=function(e){return e&&e.length?Ys(e,D):0},p.sumBy=function(e,t){return e&&e.length?Ys(e,h(t,2)):0},p.template=function(o,e,t){var s,l,n=p.templateSettings;t&&d(o,e,t)&&(e=ja),o=f(o),e=Ur({},e,n,jn);var i=L(t=Ur({},e.imports,n.imports,jn)),r=Ks(t,i),u=0,n=e.interpolate||ds,c="__p += '",t=x((e.escape||ds).source+"|"+n.source+"|"+(n===zo?rs:ds).source+"|"+(e.evaluate||ds).source+"|$","g"),a="//# sourceURL="+(N.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vs+"]")+"\n";if(o.replace(t,function(e,t,n,i,r,a){return n=n||i,c+=o.slice(u,a).replace(fs,$s),t&&(s=!0,c+="' +\n__e("+t+") +\n'"),r&&(l=!0,c+="';\n"+r+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=a+e.length,e}),c+="';\n",n=N.call(e,"variable")&&e.variable){if(ns.test(n))throw new k("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";if(c=(l?c.replace(No,""):c).replace(Fo,"$1").replace(Bo,"$1;"),c="function("+(n||"obj")+") {\n"+(n?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}",(t=pa(function(){return O(i,a+"return "+c).apply(ja,r)})).source=c,Er(t))throw t;return t},p.times=function(e,t){if((e=I(e))<1||Va<e)return[];for(var n=Ha,i=w(e,Ha),i=(t=h(t),e-=Ha,zs(i,t));++n<e;)t(n);return i},p.toFinite=Mr,p.toInteger=I,p.toLength=xr,p.toLower=function(e){return f(e).toLowerCase()},p.toNumber=C,p.toSafeInteger=function(e){return e?et(I(e),-Va,Va):0===e?e:0},p.toString=f,p.toUpper=function(e){return f(e).toUpperCase()},p.trim=function(e,t,n){return(e=f(e))&&(n||t===ja)?Ws(e):e&&(t=u(t))?ln(n=go(e),Qs(n,t=go(t)),Xs(n,t)+1).join(""):e},p.trimEnd=function(e,t,n){return(e=f(e))&&(n||t===ja)?e.slice(0,il(e)+1):e&&(t=u(t))?ln(n=go(e),0,Xs(n,go(t))+1).join(""):e},p.trimStart=function(e,t,n){return(e=f(e))&&(n||t===ja)?e.replace(Jo,""):e&&(t=u(t))?ln(n=go(e),Qs(n,go(t))).join(""):e},p.truncate=function(e,t){var n,i=30,r="...",t=(A(t)&&(n="separator"in t?t.separator:n,i="length"in t?I(t.length):i,r="omission"in t?u(t.omission):r),(e=f(e)).length);if((t=fo(e)?(a=go(e)).length:t)<=i)return e;if((t=i-mo(r))<1)return r;var a,i=a?ln(a,0,t).join(""):e.slice(0,t);if(n!==ja)if(a&&(t+=i.length-t),Ir(n)){if(e.slice(t).search(n)){var o,s=i;for((n=n.global?n:x(n.source,f(as.exec(n))+"g")).lastIndex=0;o=n.exec(s);)var l=o.index;i=i.slice(0,l===ja?t:l)}}else e.indexOf(u(n),t)!=t&&-1<(a=i.lastIndexOf(n))&&(i=i.slice(0,a));return i+r},p.unescape=function(e){return(e=f(e))&&Go.test(e)?e.replace(Uo,rl):e},p.uniqueId=function(e){var t=++q;return f(e)+t},p.upperCase=ha,p.upperFirst=da,p.each=Qi,p.eachRight=Xi,p.first=Ci,ba(p,(Na={},ht(p,function(e,t){N.call(p.prototype,t)||(Na[t]=e)}),Na),{chain:!1}),p.VERSION="4.17.21",oo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),oo(["drop","take"],function(n,i){_.prototype[n]=function(e){e=e===ja?1:S(I(e),0);var t=this.__filtered__&&!i?new _(this):this.clone();return t.__filtered__?t.__takeCount__=w(e,t.__takeCount__):t.__views__.push({size:w(e,Ha),type:n+(t.__dir__<0?"Right":"")}),t},_.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),oo(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;_.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:h(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),oo(["head","last"],function(e,t){var n="take"+(t?"Right":"");_.prototype[e]=function(){return this[n](1).value()[0]}}),oo(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");_.prototype[e]=function(){return this.__filtered__?new _(this):this[n](1)}}),_.prototype.compact=function(){return this.filter(D)},_.prototype.find=function(e){return this.filter(e).head()},_.prototype.findLast=function(e){return this.reverse().find(e)},_.prototype.invokeMap=o(function(t,n){return"function"==typeof t?new _(this):this.map(function(e){return Et(e,t,n)})}),_.prototype.reject=function(e){return this.filter(hr(h(e)))},_.prototype.slice=function(e,t){e=I(e);var n=this;return n.__filtered__&&(0<e||t<0)?new _(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ja?(t=I(t))<0?n.dropRight(-t):n.take(t-e):n)},_.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},_.prototype.toArray=function(){return this.take(Ha)},ht(_.prototype,function(u,e){var c=/^(?:filter|find|map|reject)|While$/.test(e),h=/^(?:head|last)$/.test(e),d=p[h?"take"+("last"==e?"Right":""):e],f=h||/^find/.test(e);d&&(p.prototype[e]=function(){function e(e){return e=d.apply(p,uo([e],i)),h&&s?e[0]:e}var t,n=this.__wrapped__,i=h?[1]:arguments,r=n instanceof _,a=i[0],o=r||j(n),s=(o&&c&&"function"==typeof a&&1!=a.length&&(r=o=!1),this.__chain__),a=!!this.__actions__.length,l=f&&!s,r=r&&!a;return!f&&o?(n=r?n:new _(this),(t=u.apply(n,i)).__actions__.push({func:Yi,args:[e],thisArg:ja}),new g(t,s)):l&&r?u.apply(this,i):(t=this.thru(e),l?h?t.value()[0]:t.value():t)})}),oo(["pop","push","shift","sort","splice","unshift"],function(e){var n=H[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var e,t=arguments;return r&&!this.__chain__?(e=this.value(),n.apply(j(e)?e:[],t)):this[i](function(e){return n.apply(j(e)?e:[],t)})}}),ht(_.prototype,function(e,t){var n,i=p[t];i&&(n=i.name+"",N.call(Ce,n)||(Ce[n]=[]),Ce[n].push({name:t,func:i}))}),Ce[In(ja,2).name]=[{name:"wrapper",func:ja}],_.prototype.clone=function(){var e=new _(this.__wrapped__);return e.__actions__=R(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=R(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=R(this.__views__),e},_.prototype.reverse=function(){var e;return this.__filtered__?((e=new _(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},_.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=j(e),i=t<0,r=n?e.length:0,a=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=w(t,e+o);break;case"takeRight":e=S(e,t-o)}}return{start:e,end:t}}(0,r,this.__views__),o=a.start,s=(a=a.end)-o,l=i?a:o-1,u=this.__iteratees__,c=u.length,h=0,d=w(s,this.__takeCount__);if(!n||!i&&r==s&&d==s)return en(e,this.__actions__);var f=[];e:for(;s--&&h<d;){for(var p=-1,m=e[l+=t];++p<c;){var g=u[p],_=g.iteratee,g=g.type,_=_(m);if(2==g)m=_;else if(!_){if(1==g)continue e;break e}}f[h++]=m}return f},p.prototype.at=zi,p.prototype.chain=function(){return Hi(this)},p.prototype.commit=function(){return new g(this.value(),this.__chain__)},p.prototype.next=function(){this.__values__===ja&&(this.__values__=Or(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?ja:this.__values__[this.__index__++]}},p.prototype.plant=function(e){for(var t,n=this;n instanceof Be;)var i=Si(n),r=(i.__index__=0,i.__values__=ja,t?r.__wrapped__=i:t=i,i),n=n.__wrapped__;return r.__wrapped__=e,t},p.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof _?(e=e,(e=(e=this.__actions__.length?new _(this):e).reverse()).__actions__.push({func:Yi,args:[Di],thisArg:ja}),new g(e,this.__chain__)):this.thru(Di)},p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=function(){return en(this.__wrapped__,this.__actions__)},p.prototype.first=p.prototype.head,se&&(p.prototype[se]=function(){return this}),p}();ro._=al,(L=function(){return al}.call(P,D,P,C))!==ja&&(C.exports=L)}.call(this)}.call(this,D(27),D(186)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){n=[n(100),n(6),n(2)],t=function(r,a,o){var s=function(t){var n=Number.MIN_VALUE;return function(e){e.position>n&&t(),n=e.position}};function l(e){e.mediaController.off(a.JWPLAYER_MEDIA_PLAY_ATTEMPT,e._onPlayAttempt),e.mediaController.off(a.JWPLAYER_PROVIDER_FIRST_FRAME,e._triggerFirstFrame),e.mediaController.off(a.JWPLAYER_MEDIA_TIME,e._onTime)}return{model:function(e){e.on("change:mediaModel",function(i,e,t){var n;i._qoeItem&&t&&i._qoeItem.end(t.get("state")),i._qoeItem=new r,i._qoeItem.tick(a.JWPLAYER_PLAYLIST_ITEM),i._qoeItem.start(e.get("state")),l(n=i),n._triggerFirstFrame=o.once(function(){var e=n._qoeItem,e=(e.tick(a.JWPLAYER_MEDIA_FIRST_FRAME),e.between(a.JWPLAYER_MEDIA_PLAY_ATTEMPT,a.JWPLAYER_MEDIA_FIRST_FRAME));n.mediaController.trigger(a.JWPLAYER_MEDIA_FIRST_FRAME,{loadTime:e}),l(n)}),n._onTime=s(n._triggerFirstFrame),n._onPlayAttempt=function(){n._qoeItem.tick(a.JWPLAYER_MEDIA_PLAY_ATTEMPT)},n.mediaController.on(a.JWPLAYER_MEDIA_PLAY_ATTEMPT,n._onPlayAttempt),n.mediaController.once(a.JWPLAYER_PROVIDER_FIRST_FRAME,n._triggerFirstFrame),n.mediaController.on(a.JWPLAYER_MEDIA_TIME,n._onTime),e.on("change:state",function(e,t,n){i._qoeItem.end(n),i._qoeItem.start(t)})})}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(7)],t=function(e,t){return e.extend({get:function(e){return this.attributes=this.attributes||{},this.attributes[e]},set:function(e,t){this.attributes=this.attributes||{};var n=this.attributes[e];this.attributes[e]=t,this.trigger("change:"+e,this,t,n)},clone:function(){return e.clone(this.attributes)}},t)}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){"use strict";n.r(t);var i=n(122),r=n.n(i),i=n(2),a=n.n(i),i=n(1),o=n.n(i),i=n(33),s=n.n(i);t.default=class{constructor(e){this.api=null,e&&e.advs&&a.a.isArray(e.advs)&&e.advs.length?(this.processAdvs=e.advs,this.hasProcessAdv=!0,this.el=o.a.createElement(r()())):this.hasProcessAdv=!1,this.activeAdv=null}setApi(e){this.api=e}refreshProcessAdv(t){var e=a.a.find(this.processAdvs,e=>t>=e.begin&&t<=e.end);e?e!==this.activeAdv&&(this.showAdv(e),this.activeAdv=e):this.hideAllProcessAdvs()}showAdv(e){var t=this.element().getElementsByTagName("a")[0],n=t.getElementsByTagName("img")[0],t=(t.setAttribute("href",e.material.landingPage),n.setAttribute("src",e.material.image),{display:"block","z-index":500,opacity:.9,left:"auto",right:"auto",top:"auto",bottom:"auto"});"left"===e.material.horizontalPosition?t.left=10:t.right=10,"top"===e.material.verticalPosition?t.top=10:t.bottom=50,s.a.style(this.element(),t)}hideAllProcessAdvs(){this.element().style.display="none",this.activeAdv=null}element(){if(this.api){var e=this.api.getContainer();if(0<o.a.getElementsByClassName("jw-process-adv",e).length)return o.a.getElementsByClassName("jw-process-adv",e)[0]}return this.el}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=r(n(104)),o=i(n(201)),s=i(n(31)),l=r(n(21)),u=r(n(202)),n=i(n(204));function c(){var t=new a.HandlebarsEnvironment;return l.extend(t,a),t.SafeString=o.default,t.Exception=s.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=u,t.template=function(e){return u.template(e,t)},t}var h=c();h.create=c,n.default(h),h.default=h,t.default=h,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var a=n(21);t.default=function(r){r.registerHelper("blockHelperMissing",function(e,t){var n=t.inverse,i=t.fn;return!0===e?i(this):!1===e||null==e?n(this):a.isArray(e)?0<e.length?(t.ids&&(t.ids=[t.name]),r.helpers.each(e,t)):n(this):(t.data&&t.ids&&((n=a.createFrame(t.data)).contextPath=a.appendContextPath(t.data.contextPath,t.name),t={data:n}),i(e,t))})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var p=n(21),n=n(31),m=(n=n)&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("each",function(i,e){if(!e)throw new m.default("Must pass iterator to #each");var t,r=e.fn,n=e.inverse,a=0,o="",s=void 0,l=void 0;function u(e,t,n){s&&(s.key=e,s.index=t,s.first=0===t,s.last=!!n,l)&&(s.contextPath=l+e),o+=r(i[e],{data:s,blockParams:p.blockParams([i[e],e],[l+e,null])})}if(e.data&&e.ids&&(l=p.appendContextPath(e.data.contextPath,e.ids[0])+"."),p.isFunction(i)&&(i=i.call(this)),e.data&&(s=p.createFrame(e.data)),i&&"object"==typeof i)if(p.isArray(i))for(var c=i.length;a<c;a++)a in i&&u(a,a,a===i.length-1);else if("function"==typeof Symbol&&i[Symbol.iterator]){for(var h=[],d=i[Symbol.iterator](),f=d.next();!f.done;f=d.next())h.push(f.value);for(c=(i=h).length;a<c;a++)u(a,a,a===i.length-1)}else t=void 0,Object.keys(i).forEach(function(e){void 0!==t&&u(t,a-1),t=e,a++}),void 0!==t&&u(t,a-1,!0);return o=0===a?n(this):o})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var n=n(31),i=(n=n)&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(21),n=n(31),r=(n=n)&&n.__esModule?n:{default:n};t.default=function(n){n.registerHelper("if",function(e,t){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),n.registerHelper("unless",function(e,t){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return n.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(r){r.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=t.hash.level?i=t.hash.level:t.data&&null!=t.data.level&&(i=t.data.level),e[0]=i,r.log.apply(r,e)})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,n){return e&&n.lookupProperty(e,t)})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=n(21),n=n(31),a=(n=n)&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new a.default("#with requires exactly one argument");r.isFunction(e)&&(e=e.call(this));var n,i=t.fn;return r.isEmpty(e)?t.inverse(this):(n=t.data,t.data&&t.ids&&((n=r.createFrame(t.data)).contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:n,blockParams:r.blockParams([e],[n&&n.contextPath])}))})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){i.default(e)};var t=n(199),i=(n=t)&&n.__esModule?n:{default:n}},function(e,t,n){"use strict";t.__esModule=!0;var o=n(21);t.default=function(e){e.registerDecorator("inline",function(i,r,a,e){var t=i;return r.partials||(r.partials={},t=function(e,t){var n=a.partials,e=(a.partials=o.extend({},n,r.partials),i(e,t));return a.partials=n,e}),r.partials[e.args[0]]=e.fn,t})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.extend.apply(void 0,[Object.create(null)].concat(t))};var i=n(21)},function(e,t,n){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=d.COMPILER_REVISION;if(!(t>=d.LAST_COMPATIBLE_COMPILER_REVISION&&t<=d.COMPILER_REVISION))throw t<d.LAST_COMPATIBLE_COMPILER_REVISION?(n=d.REVISION_CHANGES[n],t=d.REVISION_CHANGES[t],new h.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+t+").")):new h.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(l,u){if(!u)throw new h.default("No environment passed to template");if(!l||!l.main)throw new h.default("Unknown template object: "+typeof l);l.main.decorator=l.main_d,u.VM.checkRevision(l.compiler);var n=l.compiler&&7===l.compiler[0];var o={strict:function(e,t,n){if(e&&t in e)return o.lookupProperty(e,t);throw new h.default('"'+t+'" not defined in '+e,{loc:n})},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||p.resultIsAllowed(n,o.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(null!=(e[i]&&o.lookupProperty(e[i],t)))return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:function(e,t,n){n.hash&&(t=c.extend({},t,n.hash),n.ids)&&(n.ids[0]=!0),e=u.VM.resolvePartial.call(this,e,t,n);var i=c.extend({},n,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),r=u.VM.invokePartial.call(this,e,t,i);if(null==r&&u.compile&&(n.partials[n.name]=u.compile(e,l.compilerOptions,u),r=n.partials[n.name](t,i)),null==r)throw new h.default("The partial "+n.name+" could not be compiled when running in runtime-only mode");if(n.indent){for(var a=r.split("\n"),o=0,s=a.length;o<s&&(a[o]||o+1!==s);o++)a[o]=n.indent+a[o];r=a.join("\n")}return r},fn:function(e){var t=l[e];return t.decorator=l[e+"_d"],t},programs:[],program:function(e,t,n,i,r){var a=this.programs[e],o=this.fn(e);return a=t||r||i||n?m(this,e,o,t,n,i,r):a||(this.programs[e]=m(this,e,o))},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return n=e&&t&&e!==t?c.extend({},t,e):n},nullContext:Object.seal({}),noop:u.VM.noop,compilerInfo:l.compiler};function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.data,i=(s._setup(t),!t.partial&&l.useData&&(n=function(e,t){t&&"root"in t||((t=t?d.createFrame(t):{}).root=e);return t}(e,n)),void 0),r=l.useBlockParams?[]:void 0;function a(e){return""+l.main(o,e,o.helpers,o.partials,n,r,i)}return l.useDepths&&(i=t.depths?e!=t.depths[0]?[e].concat(t.depths):t.depths:[e]),(a=g(l.main,a,o,t.depths||[],n,r))(e,t)}return s.isTop=!0,s._setup=function(e){var t,i,r;e.partial?(o.protoAccessControl=e.protoAccessControl,o.helpers=e.helpers,o.partials=e.partials,o.decorators=e.decorators,o.hooks=e.hooks):(t=c.extend({},u.helpers,e.helpers),i=t,r=o,Object.keys(i).forEach(function(e){var t,n=i[e];i[e]=(t=r.lookupProperty,f.wrapHelper(n,function(e){return c.extend({lookupProperty:t},e)}))}),o.helpers=t,l.usePartial&&(o.partials=o.mergeIfNeeded(e.partials,u.partials)),(l.usePartial||l.useDecorators)&&(o.decorators=c.extend({},u.decorators,e.decorators)),o.hooks={},o.protoAccessControl=p.createProtoAccessControl(e),t=e.allowCallsToHelperMissing||n,a.moveHelperToHooks(o,"helperMissing",t),a.moveHelperToHooks(o,"blockHelperMissing",t))},s._child=function(e,t,n,i){if(l.useBlockParams&&!n)throw new h.default("must pass block params");if(l.useDepths&&!i)throw new h.default("must pass parent depths");return m(o,e,l[e],t,0,n,i)},s},t.wrapProgram=m,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,i){var r=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var a=void 0;i.fn&&i.fn!==o&&!function(){i.data=d.createFrame(i.data);var n=i.fn;a=i.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=d.createFrame(t.data),t.data["partial-block"]=r,n(e,t)},n.partials&&(i.partials=c.extend({},i.partials,n.partials))}();void 0===e&&a&&(e=a);{if(void 0===e)throw new h.default("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)}},t.noop=o;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(21)),t=n(31),h=(t=t)&&t.__esModule?t:{default:t},d=n(104),a=n(105),f=n(203),p=n(107);function m(i,e,r,a,t,o,s){function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=s;return!s||e==s[0]||e===i.nullContext&&null===s[0]||(n=[e].concat(s)),r(i,e,i.helpers,i.partials,t.data||a,o&&[t.blockParams].concat(o),n)}return(n=g(r,n,i,s,a,o)).program=e,n.depth=s?s.length:0,n.blockParams=t||0,n}function o(){return""}function g(e,t,n,i,r,a){return e.decorator&&(t=e.decorator(t,e={},n,i&&i[0],r,a,i),c.extend(t,e)),t}},function(e,t,n){"use strict";t.__esModule=!0,t.wrapHelper=function(t,n){if("function"!=typeof t)return t;return function(){var e=arguments[arguments.length-1];return arguments[arguments.length-1]=n(e),t.apply(this,arguments)}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},function(e,t,n){n=[n(7),n(73),n(72),n(6),n(16),n(1),n(2)],t=function(e,n,i,t,r,a,o){function s(e,t){this.model=t,this._adModel=(new n).setup({id:t.get("id"),volume:t.get("volume"),fullscreen:t.get("fullscreen"),mute:t.get("mute")}),this._adModel.on("change:state",i,this),t=e.getContainer(),this.swf=t.querySelector("object")}return s.prototype=o.extend({init:function(){var n,i;a.isChrome()&&(i=!(n=-1),this.swf.on("throttle",function(e){var t;clearTimeout(n),"resume"===e.state?i&&(i=!1,this.instreamPlay()):(t=this,n=setTimeout(function(){t._adModel.get("state")===r.PLAYING&&(i=!0,t.instreamPause())},250))},this)),this.swf.on("instream:state",function(e){switch(e.newstate){case r.PLAYING:case r.PAUSED:this._adModel.set("state",e.newstate)}},this).on("instream:time",function(e){this._adModel.set("position",e.position),this._adModel.set("duration",e.duration),this.trigger(t.JWPLAYER_MEDIA_TIME,e)},this).on("instream:complete",function(e){this.trigger(t.JWPLAYER_MEDIA_COMPLETE,e)},this).on("instream:error",function(e){this.trigger(t.JWPLAYER_MEDIA_ERROR,e)},this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(n){this.model.on("change:volume",function(e,t){n.volume(t)},this),this.model.on("change:mute",function(e,t){n.mute(t)},this)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null)},load:function(e){this.swf.triggerFlash("instream:load",e)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},e),s}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(207),n(7),n(2),n(6)],t=function(n,e,d,f){function t(i,r,a,o){var s,l=this,u=n.getQueue(),e=30;function t(){h("安装超时","安装时间大于"+e+"秒，视频不能播放")}function c(){d.each(u,function(e){var n,t;!0!==e.complete&&!0!==e.running&&null!==i&&(t=e.depends,d.all(t,function(e){return u[e].complete}))&&(e.running=!0,(n=e).method(function(e){var t;t=n,"error"===(e=e=e||{}).type?h(e.msg,e.reason,e.code||""):"complete"===e.type?(clearTimeout(s),l.trigger(f.JWPLAYER_READY)):(t.complete=!0,c())},r,i,a,o))})}function h(e,t,n){clearTimeout(s),l.trigger(f.JWPLAYER_SETUP_ERROR,{message:e+": "+t,code:n}),l.destroy()}this.start=function(){s=setTimeout(t,1e3*e),c()},this.destroy=function(){clearTimeout(s),this.off(),u.length=0,a=r=i=null}}return t.prototype=e,t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(47),n(78),n(109),n(79),n(46),n(2),n(1),n(6),n(15),n(34)],t=function(i,n,r,a,o,s,l,u,e,t){var c,h;function d(e){e()}function f(e){e()}function p(e){e()}function m(e){e()}function g(e,t){(c=n.loadPlugins(t.get("id"),t.get("plugins"))).on(u.COMPLETE,e),c.on(u.ERROR,s.partial(y,e)),c.load()}function _(e,t,n){c.setupPlugins(n,t),e()}function y(e,t){R(e,"Could not load plugin",t.message)}function v(t,n){var e=n.get("playlist");s.isString(e)?((h=new r).on(u.JWPLAYER_PLAYLIST_LOADED,function(e){n.set("playlist",e.playlist),n.set("feedid",e.feedid),t()}),h.on(u.JWPLAYER_ERROR,s.partial(A,t)),h.load(e)):t()}function E(e,t,n,i,r){var a,t=t.get("playlist");r(t)?e():(r={},t=function(e){var t="",n="";n=(t=l.isMobile()&&(l.isRtmp(e[0].file)||l.isFlv(e[0].file))?"手机上不能播放rtmp或flv格式的视频":"不支持的视频格式或者媒体问题","111");return{errorMessage:t,errorCode:n}}(t),r.message=t.errorMessage,r.code=t.errorCode,"111"===r.code?(t=e,(a=r)&&a.message&&R(t,"视频加载失败",a.message,a.code||"")):(t=e,(a=r)&&a.message&&R(t,"播放器加载失败",a.message,a.code||"")))}function A(e,t){t&&t.message?R(e,"播放列表加载失败",t.message):R(e,"播放器加载失败","未发现可播放的资源")}function b(e,t){var n=t.get("skin"),i=t.get("skinUrl");s.contains(o.SkinsIncluded,n)?e():(i=i||function(e,t){if(s.contains(o.SkinsLoadable,e))return t+"skins/"+e+".css"}(n,__DEBUG__?t.get("base"):o.repo),s.isString(i)&&!function(e){for(var t=document.styleSheets,n=0,i=t.length;n<i;n++)if(t[n].href===e)return 1}(i)&&(t.set("skin-loading",!0),(n=new a(i,!0)).addEventListener(u.COMPLETE,function(){t.set("skin-loading",!1)}),n.addEventListener(u.ERROR,function(){t.set("skin","bce"),t.set("skin-loading",!1)}),n.load()),s.defer(function(){e()}))}function T(e,t){var n=t.getProviders(),t=t.get("playlist"),n=n.required(t);i.load(n).then(e)}function S(e,t,n,i){i.setup(),e()}function w(e){e({type:"complete"})}function R(e,t,n,i){e({type:"error",msg:t,reason:n,code:i||""})}return{getQueue:function(){return{LOAD_PROMISE_POLYFILL:{method:d,depends:[]},LOAD_BASE64_POLYFILL:{method:f,depends:[]},LOAD_JSON2:{method:p,depends:[]},LOADED_POLYFILLS:{method:m,depends:["LOAD_PROMISE_POLYFILL","LOAD_BASE64_POLYFILL","LOAD_JSON2"]},LOAD_PLUGINS:{method:g,depends:["LOADED_POLYFILLS"]},INIT_PLUGINS:{method:_,depends:["LOAD_PLUGINS","SETUP_VIEW"]},LOAD_PROVIDERS:{method:T,depends:["FILTER_PLAYLIST"]},LOAD_SKIN:{method:b,depends:["LOADED_POLYFILLS"]},LOAD_PLAYLIST:{method:v,depends:["LOADED_POLYFILLS"]},FILTER_PLAYLIST:{method:E,depends:[]},SETUP_VIEW:{method:S,depends:["LOAD_SKIN"]},SEND_READY:{method:w,depends:["INIT_PLUGINS","LOAD_PROVIDERS","SETUP_VIEW"]}}},error:R}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(61),n(1),n(6),n(7),n(2),n(79)],t=function(f,p,h,d,m,g){return function(a,t){var o,s=m.extend(this,d),n=g.loaderstatus.NEW,e=!1,i=m.size(t),l=!1;function u(){e||(e=!0,n=g.loaderstatus.COMPLETE,s.trigger(h.COMPLETE))}function r(){var r;l||(t&&0!==m.keys(t).length||u(),e)||(r=a.getPlugins(),o=m.after(i,u),m.each(t,function(e,t){var t=f.getPluginName(t),t=r[t],n=t.getJS(),i=t.getTarget(),t=t.getStatus();t!==g.loaderstatus.LOADING&&t!==g.loaderstatus.NEW&&(n&&!p.versionCheck(i)&&s.trigger(h.ERROR,{message:"Incompatible player version"}),o())}))}function c(e){var t;l||(t="File not found",e.url&&p.log(t,e.url),this.off(),this.trigger(h.ERROR,{message:t}),r())}this.setupPlugins=function(h,e){var n=[],i=a.getPlugins(),d=e.get("plugins");m.each(d,function(e,t){var s=f.getPluginName(t),l=i[s],t=l.getFlashPath(),u=l.getJS(),c=l.getURL();t&&(t=m.extend({name:s,swf:t,pluginmode:l.getPluginmode()},e),n.push(t)),p.tryCatch(function(){var e,t,n,i,r,a;function o(){var e=n.displayArea;e&&n.resize(e.clientWidth,e.clientHeight)}u&&d[c]&&((e=document.createElement("div")).id=h.id+"_"+s,e.className="jw-plugin jw-reset",t=m.extend({},d[c]),(t=l.getNewInstance(h,t,e)).addToPlayer=(i=h,r=t,a=e,function(){var e=p.getElementsByClassName("jw-overlays",i.getContainer())[0];e&&(e.appendChild(a),a.left=e.style.left,a.top=e.style.top,r.displayArea=e)}),t.resizeHandler=(n=t,function(){o(),setTimeout(o,400)}),h.addPlugin(s,t,e))})instanceof p.Error&&p.log("ERROR: Failed to load "+s+".")}),e.set("flashPlugins",n)},this.load=function(){var e;p.exists(t)&&"object"!==p.typeOf(t)||(n=g.loaderstatus.LOADING,m.each(t,function(e,t){p.exists(t)&&((t=a.addPlugin(t)).on(h.COMPLETE,r),t.on(h.ERROR,c))}),e=a.getPlugins(),m.each(e,function(e){e.load()})),r()},this.destroy=function(){l=!0,this.off()},this.getStatus=function(){return n}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(61),n(108)],t=function(i,r){return function(n){this.addPlugin=function(e){var t=i.getPluginName(e);return n[t]||(n[t]=new r(e)),n[t]},this.getPlugins=function(){return n}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(15),n(49),n(211),n(212),n(110)],t=function(o,e,s,l,u){var c=e.textContent,h=e.getChildNode,d=e.numChildren,f=e.localName,e={};return e.parse=function(e){for(var t=[],n=0;n<d(e);n++){var i=h(e,n);if("channel"===f(i).toLowerCase())for(var r=0;r<d(i);r++){var a=h(i,r);"item"===f(a).toLowerCase()&&t.push(function(e){for(var t={},n=0;n<e.childNodes.length;n++){var i=e.childNodes[n],r=f(i);if(r)switch(r.toLowerCase()){case"enclosure":t.file=o.xmlAttribute(i,"url");break;case"title":t.title=c(i);break;case"guid":t.mediaid=c(i);break;case"pubdate":t.date=c(i);break;case"description":t.description=c(i);break;case"link":t.link=c(i);break;case"category":t.tags?t.tags+=c(i):t.tags=c(i)}}return t=l(e,t),t=s(e,t),new u(t)}(a))}}return t},e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(49),n(15),n(1)],t=function(c,h,d){return function(e,t){for(var n=[],i=[],r=h.xmlAttribute,a="default",o="file",s=0;s<e.childNodes.length;s++){var l,u=e.childNodes[s];"jwplayer"===u.prefix&&("source"===(l=c.localName(u))?(delete t.sources,n.push({file:r(u,o),default:r(u,a),label:r(u,"label"),type:r(u,"type")})):"track"===l?(delete t.tracks,i.push({file:r(u,o),default:r(u,a),kind:r(u,"kind"),label:r(u,"label")})):(t[l]=d.serialize(c.textContent(u)),"file"===l&&t.sources&&delete t.sources)),t.file||(t.file=t.link)}if(n.length)for(t.sources=[],s=0;s<n.length;s++)0<n[s].file.length&&(n[s][a]="true"===n[s][a],n[s].label.length||delete n[s].label,t.sources.push(n[s]));if(i.length)for(t.tracks=[],s=0;s<i.length;s++)0<i[s].file.length&&(i[s][a]="true"===i[s][a],i[s].kind=i[s].kind.length?i[s].kind:"captions",i[s].label.length||delete i[s].label,t.tracks.push(i[s]));return t}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(49),n(15),n(1)],t=function(e,t,l){function u(e,t){var n,i,r,a="tracks",o=[];for(i=0;i<f(e);i++)if("media"===(n=e.childNodes[i]).prefix&&h(n))switch(h(n).toLowerCase()){case"content":c(n,"duration")&&(t.duration=l.seconds(c(n,"duration"))),c(n,"url")&&(t.sources||(t.sources=[]),r={file:c(n,"url"),type:c(n,"type"),width:c(n,"width"),label:c(n,"label")},(s=function(e){for(var t=[],n=0;n<f(e);n++){var i=e.childNodes[n];"jwplayer"===i.prefix&&"mediatypes"===h(i).toLowerCase()&&t.push(d(i))}return t}(n)).length&&(r.mediaTypes=s),t.sources.push(r)),0<f(n)&&(t=u(n,t));break;case"title":t.title=d(n);break;case"description":t.description=d(n);break;case"guid":t.mediaid=d(n);break;case"thumbnail":t.image||(t.image=c(n,"url"));break;case"player":break;case"group":u(n,t);break;case"subtitle":var s={};s.file=c(n,"url"),s.kind="captions",0<c(n,"lang").length&&(s.label=(r=c(n,"lang"),void 0,{zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"}[r]||r)),o.push(s)}for(t.hasOwnProperty(a)||(t[a]=[]),i=0;i<o.length;i++)t[a].push(o[i]);return t}var c=t.xmlAttribute,h=e.localName,d=e.textContent,f=e.numChildren;return u}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(t){var n={kind:"captions",default:!1};return function(e){if(e&&e.file)return t.extend({},n,e)}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(49),n(80),n(215),n(1)],t=function(g,_,y,v){return function(e,a){function o(e){if(e.tracks.length){a.mediaController.off("meta",c),s=[],l={},u={},r=0;for(var t=e.tracks||[],n=0;n<t.length;n++){var i=t[n];i.id=i.name,i.label=i.name||i.language,f(i)}e=p();this.setCaptionsList(e),m()}}a.on("change:playlistItem",d,this),a.on("change:captionsIndex",function(e,t){var n=null;0!==t&&(n=s[t-1]);e.set("captionsTrack",n)},this),a.on("itemReady",function(e){d(0,e),a.mediaController.off("meta",c),a.mediaController.off("subtitlesTracks",o);var t,n,i,r=e.tracks;a.get("provider").name,v.isChrome()||v.isIOS()||v.isSafari();for(i=0;i<r.length;i++)t=r[i],t.file&&/\.(?:web)?vtt(?:\?.*)?$/i.test(t.file),"captions"!==(n=t.kind.toLowerCase())&&"subtitles"!==n||(t.file?(f(t),function(i){v.ajax(i.file,function(e){var t=i,n=e.responseXML?e.responseXML.firstChild:null;if(n)for("xml"===g.localName(n)&&(n=n.nextSibling);n.nodeType===n.COMMENT_NODE;)n=n.nextSibling;try{n&&"tt"===g.localName(n)?t.data=y(e.responseXML):t.data=_(e.responseText)}catch(e){h(e.message+": "+t.file)}},h)}(t)):t.data&&f(t));s.length||(a.mediaController.on("meta",c,this),a.mediaController.on("subtitlesTracks",o,this));e=p();this.setCaptionsList(e),m()},this),a.mediaController.on("subtitlesTracks",o,this),a.mediaController.on("subtitlesTrackData",function(e){var t=l[e.name];if(t){t.source=e.source;for(var n=e.captions||[],i=!1,r=0;r<n.length;r++){var a=n[r],o=e.name+"_"+a.begin+"_"+a.end;u[o]||(u[o]=a,t.data.push(a),i=!0)}i&&t.data.sort(function(e,t){return e.begin-t.begin})}},this),a.mediaController.on("meta",c,this);a.get("sdkplatform");var s=[],l={},u={},r=0;function c(e){var t,n,i,r=e.metadata;!r||"textdata"!==r.type||!r.text||((t=l[r.trackid])||(f(t={kind:"captions",id:r.trackid,data:[]}),i=p(),this.setCaptionsList(i)),i=r.useDTS?(t.source||(t.source=r.source||"mpegts"),n=r.begin,r.begin+"_"+r.text):(n=e.position||a.get("position"),Math.round(10*n)+"_"+r.text),e=u[i])||(e={begin:n,text:r.text},r.end&&(e.end=r.end),u[i]=e,t.data.push(e))}function h(e){v.log("CAPTIONS("+e+")")}function d(e,t){s=[],l={},u={},r=0}function f(e){"number"!=typeof e.id&&(e.id=e.name||e.file||"cc"+s.length),e.data=e.data||[],e.label||(e.label="Unknown CC",1<++r&&(e.label+=" ("+r+")")),s.push(e),l[e.id]=e}function p(){for(var e=[{id:"off",label:"Off"}],t=0;t<s.length;t++)e.push({id:s[t].id,label:s[t].label||"Unknown CC"});return e}function m(){var e=0,t=a.get("captionLabel");if("Off"===t)a.set("captionsIndex",0);else{for(var n,i=0;i<s.length;i++){var r=s[i];if(t&&t===r.label){e=i+1;break}r.default||r.defaulttrack||"default"===r.id?e=i+1:r.autoselect}n=e,s.length?a.setVideoSubtitleTrack(n,s):a.set("captionsIndex",n)}}this.getCurrentIndex=function(){return a.get("captionsIndex")},this.getCaptionsList=function(){return a.get("captionsList")},this.setCaptionsList=function(e){a.set("captionsList",e)}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(15)],t=function(l){var u=l.seconds;return function(e){c(e);var t=[],n=e.getElementsByTagName("p");c(n),n.length||(n=e.getElementsByTagName("tt:p")).length||(n=e.getElementsByTagName("tts:p"));for(var i=0;i<n.length;i++){var r,a,o=n[i],s=o.innerHTML||o.textContent||o.text||"",s=l.trim(s).replace(/>\s+</g,"><").replace(/tts?:/g,"");s&&(a=o.getAttribute("begin"),r=o.getAttribute("dur"),o=o.getAttribute("end"),a={begin:u(a),text:s},o?a.end=u(o):r&&(a.end=a.begin+u(r)),t.push(a))}return t.length||h(),t};function c(e){e||h()}function h(){throw new Error("Invalid DFXP file")}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(110),n(111),n(2),n(47)],t=function(t,s,c,n){function e(e){return e=c.isArray(e)?e:[e],c.compact(c.map(e,t))}e.filterPlaylist=function(e,t,n,i,r,a,o,s,l){var u=[];return c.each(e,function(e){(e=c.extend({},e)).allSources=h(e.sources,n,e.drm||i,e.preload||r,f(e.withCredentials,o),s,l),e.sources=d(e.allSources,t),e.sources.length&&(e.file=e.sources[0].file,(e.preload||r)&&(e.preload=e.preload||r),(e.feedid||a)&&(e.feedid=e.feedid||a),u.push(e))}),u};var h=function(e,t,n,i,r,a,o){return c.compact(c.map(e,function(e){if(c.isObject(e))return null!=t&&(e.androidhls=t),(e.drm||n)&&(e.drm=e.drm||n),(e.preload||i)&&(e.preload=e.preload||i),e.withCredentials=f(e.withCredentials,r),e.isHEVC=!0,e.isNative=!0,s(e)}))},d=function(e,t){t=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(t.choose(i))return i.type}return null}(e,t=t&&t.choose?t:new n({primary:t?"flash":null}));return c.where(e,{type:t})};function f(e,t){return c.isUndefined(e)?t:e}return e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(6),n(7),n(46),n(16),n(218),n(219),n(220),n(222),n(224),n(226),n(239),n(240),n(242),n(243),n(245),n(246),n(2),n(248),n(249),n(251),n(252),n(77),n(50)],t=function(be,Te,Se,we,Re,Ie,Ce,Le,Pe,De,ke,Oe,Me,xe,Ne,Fe,Be,Ue,je,Ge,Ve,He,Ye,ze){var We=be.style,Ke=be.bounds,qe=be.isMobile(),Qe=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Xe={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1===e.indexOf("Safari"),weixin:-1<e.indexOf("MicroMessenger"),qq:" qq"===e.match(/\sQQ/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};return function(r,a){var o,s,l,N,F,u,c,h,d,f,p,t,m,g,_,y,v,E,A,b,i,T,S,w,B,e=-1,U=2e3,j=40,R=!1,n=!1,I=-1,G=-1,C=!1,V=!1,L=Ue.extend(this,Se),H=(this.model=a,this.api=r,o=be.createElement(je({id:a.get("id")})),be.isIE()&&be.addClass(o,"jw-ie"),be.isPoorIE()&&be.addClass(o,"jw-ie-poorie"),a.get("flashUI")&&be.addClass(o,"jw-flashui"),a.get("width")),Y=a.get("height");function z(e){var t=0,n=a.get("duration"),i=a.get("position"),i=("DVR"===be.adaptiveType(n)&&(t=n,n=Math.max(i,we.dvrSeekLimit)),be.between(i+e,t,n));r.seek(i)}function W(e){var t,n=a.get("volume"),e=("-"===e?t=100<n?-50:-10:(t=100<=n?50:10,n<100&&100<n+t&&(t=100-n)),a.getVideo()),n=e&&0===e.getName().name.indexOf("flash")?500:100,e=be.between(a.get("volume")+t,0,n);r.setVolume(e)}function K(e){var t,n=a.get("keyControls");if((t=e).ctrlKey||t.metaKey||!a.get("controls"))return!0;switch(R||M(),e.keyCode){case 27:r.setFullscreen(!1);break;case 13:case 32:n&&r.play({reason:"interaction"});break;case 37:R||z((i=a.get("seek_step"))?1+~i:-5);break;case 39:R||z((i=a.get("seek_step"))||5);break;case 38:W("+");break;case 40:W("-");break;case 67:var i=r.getCaptionsList().length;i&&(i=(r.getCurrentCaptions()+1)%i,r.setCurrentCaptions(i));break;case 77:n&&r.setMute();break;case 70:n&&r.setFullscreen();break;default:n&&48<=e.keyCode&&e.keyCode<=59&&(i=(e.keyCode-48)/10*a.get("duration"),r.seek(i))}return/13|32|37|38|39|40/.test(e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0}function q(){V=!1,be.removeClass(o,"jw-no-focus")}function Q(){V=!0,be.addClass(o,"jw-no-focus")}function X(){V||q(),R||M()}function P(){var e=Ke(o),t=Math.round(e.width),n=Math.round(e.height);return document.body.contains(o)?t&&n&&(t===N&&n===F||(N=t,F=n,clearTimeout(I),I=setTimeout(k,50),a.set("containerWidth",t),a.set("containerHeight",n),L.trigger(Te.JWPLAYER_RESIZE,{width:t,height:n}))):(be.removeEventListener(window,"resize",P),qe&&be.removeEventListener(window,"orientationchange",P)),e}function J(e,t){be.toggleClass(o,"jw-flag-casting",t=t||!1)}function Z(e,t){be.toggleClass(o,"jw-flag-cast-available",t),be.toggleClass(s,"jw-flag-cast-available",t)}function $(e,t){be.replaceClass(o,/jw-stretch-\S+/,"jw-stretch-"+t)}function ee(e,t){be.toggleClass(o,"jw-flag-compact-player",t)}function te(e){e&&!qe&&(be.addEventListener(e.element(),"mousemove",re,!1),be.addEventListener(e.element(),"mouseout",ae,!1))}function ne(){a.get("state")!==Re.IDLE&&a.get("state")!==Re.COMPLETE&&a.get("state")!==Re.PAUSED||!a.get("controls")||r.play({reason:"interaction"}),(n?pe:M)()}function ie(e){e.link?(r.pause(!0),r.setFullscreen(!1),window.open(e.link,e.linktarget)):a.get("controls")&&r.play({reason:"interaction"})}function re(){clearTimeout(e)}function ae(){M()}function D(e){L.trigger(e.type,e)}function oe(e,t){t?(A&&A.destroy(),be.addClass(o,"jw-flag-flash-blocked")):(A&&A.setup(a,o,o),be.removeClass(o,"jw-flag-flash-blocked"))}We(o,{width:0<H.toString().indexOf("%")?H:H+"px",height:0<Y.toString().indexOf("%")?Y:Y+"px"}),i=o.requestFullscreen||o.webkitRequestFullscreen||o.webkitRequestFullScreen||o.mozRequestFullScreen||o.msRequestFullscreen,T=document.exitFullscreen||document.webkitExitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,C=i&&T,this.onChangeSkin=function(e,t){be.replaceClass(o,/jw-skin-\S+/,t?"jw-skin-"+t:"")},this.handleColorOverrides=function(){var r=a.get("id");function e(e,t,n){var i;n&&(e=be.prefix(e,"#"+r+" "),(i={})[t]=n,be.css(e.join(", "),i,r))}var t=a.get("skinColorActive"),n=a.get("skinColorInactive"),i=a.get("skinColorBackground");e([".jw-toggle",".jw-button-color:hover"],"color",t),e([".jw-active-option",".jw-progress",".jw-playlist-container .jw-option.jw-active-option",".jw-playlist-container .jw-option:hover"],"background",t),e([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-tooltip-title",".jw-skip .jw-skip-icon",".jw-playlist-container .jw-icon"],"color",n),e([".jw-cue",".jw-knob"],"background",n),e([".jw-playlist-container .jw-option"],"border-bottom-color",n),e([".jw-background-color",".jw-tooltip-title",".jw-playlist",".jw-playlist-container .jw-option"],"background",i),e([".jw-playlist-container ::-webkit-scrollbar"],"border-color",i)},this.setup=function(){B=new Ye,this.handleColorOverrides(),!0===a.get("skin-loading")&&(be.addClass(o,"jw-flag-skin-loading"),a.once("change:skin-loading",function(){be.removeClass(o,"jw-flag-skin-loading")})),this.onChangeSkin(a,a.get("skin"),""),a.on("change:skin",this.onChangeSkin,this),l=be.getElementsByClassName("jw-media",o)[0],s=be.getElementsByClassName("jw-controls",o)[0];var e=be.getElementsByClassName("jw-preview",o)[0],t=((h=new Oe(a)).setup(e),be.getElementsByClassName("jw-title",o)[0]),t=((_=new Fe(a)).setup(t),be.isPoorIE()?(be.style(be.getElementsByClassName("jw-marquee",o)[0],{display:"none"}),be.style(be.getElementsByClassName("jw-danmaku",o)[0],{display:"none"})):(d=new Me(a,r),a.get("imageAdvs")&&o.appendChild(d.element()),a.get("marquee").show&&(t=be.getElementsByClassName("jw-marquee",o)[0],f=new xe(a,t),be.style(o,{overflow:"hidden"})),a.get("danmaku")&&(this.api.danmaku=y=new Be(o,a))),a.advManage&&a.advManage.hasProcessAdv&&o.appendChild(a.advManage.element()),be.getElementsByClassName("jw-overlays",o)[0]);be.addEventListener(t,"mousemove",M),(p=new Ce(a,l,{useHover:!0})).on("click",function(){if(be.isMobile()){var e=be.hasClass(o,"jw-flag-user-inactive");if(e&&(M(),"playing"===b))return}D({type:Te.JWPLAYER_DISPLAY_CLICK}),a.get("danmaku")&&(e=JSON.parse(JSON.stringify(a.get("danmaku"))),a.set("danmaku",Object.assign(e,{active:!1}))),a.get("controls")&&!a.get("flashUI")&&a.get("allowClickToDisplay")&&r.play({reason:"interaction"})}),p.on("tap",function(){D({type:Te.JWPLAYER_DISPLAY_CLICK}),ne()}),a.get("allowDoubleClickFullscreen")&&p.on("doubleClick",le),p.on("move",M),p.on("over",M),(t=new Le(a)).on("click",function(){D({type:Te.JWPLAYER_DISPLAY_CLICK}),r.play({reason:"interaction"})}),t.on("tap",function(){D({type:Te.JWPLAYER_DISPLAY_CLICK}),ne()}),s.appendChild(t.element()),m=new Pe(a),(g=new De(a)).on(Te.JWPLAYER_LOGO_CLICK,ie),(t=document.createElement("div")).className="jw-controls-right jw-reset",g.setup(t),t.appendChild(m.element()),s.appendChild(t),(v=new Ie(a)).setup(o.id,a.get("captions")),s.parentNode.insertBefore(v.element(),_.element()),a.get("watermark")&&(w=new Ve(a,s,o.id)),t=a.get("height"),qe&&("string"==typeof t||1.5*j<=t)?be.addClass(o,"jw-flag-touch"):(A=new Ne).setup(a,o,o),(c=new ke(r,a,o)).on(Te.JWPLAYER_USER_ACTION,M),c.on(Te.JWPLAYER_CHANGE_LANGs,Ae),a.on("change:scrubbing",ce),a.on("change:compactUI",ee),s.appendChild(c.element()),be.addEventListener(o,"focus",X),be.addEventListener(o,"blur",q),be.addEventListener(o,"keydown",K),o.onmousedown=Q,M(),a.set("mediaContainer",l),a.mediaController.on("fullscreenchange",O);for(var n=Qe.length;n--;)be.addEventListener(document,Qe[n],O,!1);be.removeEventListener(window,"resize",P),be.addEventListener(window,"resize",P,!1),qe&&(be.removeEventListener(window,"orientationchange",P),be.addEventListener(window,"orientationchange",P,!1)),a.on("change:errorEvent",ve),a.on("change:controls",se),se(a,a.get("controls")),a.on("change:state",x),a.on("change:duration",ye,this),a.on("change:flashBlocked",oe),oe(0,a.get("flashBlocked")),r.onPlaylistComplete(me),r.onPlaylistItem(ge),a.on("change:castAvailable",Z),Z(0,a.get("castAvailable")),a.on("change:castActive",J),J(0,a.get("castActive")),a.get("stretching")&&$(0,a.get("stretching")),a.on("change:stretching",$),x(0,Re.IDLE),a.on("change:fullscreen",he),te(c),te(g);var i,t=a.get("aspectratio");t&&(be.addClass(o,"jw-flag-aspect-mode"),i=be.getElementsByClassName("jw-aspect",o)[0],We(i,{paddingTop:t})),r.on(Te.JWPLAYER_READY,function(){P();var e=a.get("isMemoryPlay"),t=a.get("playlistItem").file,t=B.getItem("filePostion."+t);e&&t&&(t=be.timeFormat(t),e=a.get("lang")||"zh",new He({timeout:5e3,playerId:o.id,text:""+ze.default[e].MEMORYPLAY.POSITION_TO+t},"memory-play-container").setup(s)),de(a.get("width"),a.get("height"))}),r.on(Te.JWPLAYER_PERFORMANCE,e=>{c.elements.pictInpict.hide();var t=a.get("liveInfoPanel");t&&t.showH265Info&&(S||(S=new Ge(a)).setup(s),S.setData(e))}),a.on("connecting",function(){L.setAltText("正在与服务器建立连接"),be.toggleClass(o,"jw-flag-live",!0)}),a.on("connectFaild",function(){r.stop(),L.setAltText("连接已断开，请稍后重试"),be.toggleClass(o,"jw-flag-live",!0),be.getElementsByClassName("jw-controlbar",o)[0].style.display="block"}),a.on("alive",function(){"idle"!==L.model.get("state")&&(L.setAltText("直播中"),be.toggleClass(o,"jw-flag-live",!0),e.style.display="none",be.getElementsByClassName("jw-controlbar",o)[0].style.removeProperty("display"))}),a.on("noLiveStream",function(){"idle"!==L.model.get("state")&&a.get("isLive")&&(L.setAltText("无直播流"),be.toggleClass(o,"jw-flag-live",!0),a.get("image")&&(e.style.display="block"),be.getElementsByClassName("jw-controlbar",o)[0].style.display="block")}),a.on("liveStop",function(){r.stop(),L.setAltText("直播结束"),be.toggleClass(o,"jw-flag-live",!0),be.getElementsByClassName("jw-controlbar",o)[0].style.display="block"}),a.on("seekAfterLoadSuccess",function(){L.setAltText("自动跳转到上次的播放时间..."),be.addClass(c.element(),"jw-controlbar-textshow"),setTimeout(function(){be.removeClass(c.element(),"jw-controlbar-textshow")},1e3)}),a.on("change:danmaku",()=>{})};var se=function(e,t){t&&x(0,(R?u:a).get("state")),be.toggleClass(o,"jw-flag-controls-disabled",!t)};function le(){null!==Xe&&null!=Xe.versions&&void 0!==Xe.versions.android&&null!==Xe.versions.android&&!0===Xe.versions.android||a.get("controls")&&r.setFullscreen()}function ue(e){e.get("state")===Re.PAUSED?e.once("change:state",ue):!1===e.get("scrubbing")&&be.removeClass(o,"jw-flag-dragging")}function ce(e,t){e.off("change:state",ue),t?be.addClass(o,"jw-flag-dragging"):ue(e)}var he=function(e,t){var n=a.getVideo();C?(t?i.apply(o):(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msExitFullscreenElement)&&T.apply(document),fe(o,t)):be.isIE()?fe(o,t):(u&&u.getVideo()&&u.getVideo().setFullscreen(t),n.setFullscreen(t)),n&&0===n.getName().name.indexOf("flash")&&n.setFullscreen(t),f&&a.get("marquee").show&&f.reset(o.clientWidth,o.clientHeight)};function de(e,t,n){var i=o.className,n=((n=!!n)&&(i=i.replace(/\s*aspectMode/,""),o.className!==i&&(o.className=i),be.style(o,{display:"block"},n)),be.exists(e)&&be.exists(t)&&(a.set("width",e),a.set("height",t)),i={width:e},be.hasClass(o,"jw-flag-aspect-mode")||(i.height=t),We(o,i,!0),t);E=function(e){if(a.get("aspectratio"))return!1;if(Ue.isString(e)&&-1<e.indexOf("%"))return!1;return function(e){return e&&e<=j*(qe?1.75:1)}(Ue.isNumber(e)?e:a.get("containerHeight"))}(n),c&&!E&&x(n=R?u:a,n.get("state")),be.toggleClass(o,"jw-flag-audio-player",E),k(e,t)}function k(e,t){if(!e||isNaN(Number(e))){if(!l)return;e=l.clientWidth}if(!t||isNaN(Number(t))){if(!l)return;t=l.clientHeight}h&&h.resize(e,t,a.get("stretching")),be.isMSIE(9)&&document.all&&!window.atob&&(e=t="100%");var n,i=a.getVideo();i&&(n=a.get("rotate"),n=Math.abs(c.rotateDeg/90)%2&&n.innerRotate,i.resize(e,t,a.get("stretching"),n)&&(clearTimeout(I),I=setTimeout(k,250)),v.resize(),c.checkCompactMode(e),a.get("state")===Re.PAUSED)&&a.get("imageAdvs")&&a.get("imageAdvs").pause&&d&&!d.isHidden()&&d.resizePauseAdv(e,t)}function O(e){var t=a.get("fullscreen"),e=void 0!==e.jwstate?e.jwstate:C?!(!(e=document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement)||e.id!==a.get("id")):(R?u:a).getVideo().getFullScreen();t!==e&&a.set("fullscreen",e)}function fe(e,t){t?(be.addClass(e,"jw-flag-fullscreen"),We(document.body,{"overflow-y":"hidden"}),M()):(be.removeClass(e,"jw-flag-fullscreen"),We(document.body,{"overflow-y":""})),k()}function pe(){n=!1,clearTimeout(e),c.hideComponents(),be.addClass(o,"jw-flag-user-inactive")}function M(){n||(be.removeClass(o,"jw-flag-user-inactive"),c.checkCompactMode(l.clientWidth)),n=!0,clearTimeout(e),e=setTimeout(pe,U)}function me(){a.get("imageAdvs")&&a.get("imageAdvs").end&&d&&d.loadAdv("end")}function ge(){t&&t.setState(a.get("state")),_e(0,a.mediaModel.get("mediaType")),a.mediaModel.on("change:mediaType",_e,this)}function _e(e,t){var t="audio"===t,n=a.getVideo(),n=n&&0===n.getName().name.indexOf("flash");be.toggleClass(o,"jw-flag-media-audio",t),t&&!n?o.insertBefore(h.el,l):o.insertBefore(h.el,v.element())}function ye(e,t){e=!0===e.get("isLive")||"LIVE"===be.adaptiveType(t)||"DVR"===be.adaptiveType(t);be.toggleClass(o,"jw-flag-live",e),e||L.setAltText("")}function ve(e,t){t?t.name?_.updateText(t.name,t.message):_.updateText(t.message,""):_.playlistItem(e,e.get("playlistItem"))}function Ee(){!0===a.get("autostart")&&(b="idle"===b?"buffering":b),be.replaceClass(o,/jw-state-\S+/,"jw-state-"+b)}function x(e,t){var n;if(b=t,clearTimeout(G),t!==Re.COMPLETE&&Re.IDLE,Ee(),(n=a.getVideo())&&n.isCaster)be.addClass(l,"jw-media-show");else switch(t){case Re.PLAYING:d&&d.startAdvPlayed&&d.hide(),Math.abs(c.rotateDeg/90)%2==0&&k(),f&&a.get("marquee").show&&f.start(),y&&a.get("danmaku").show&&y.start();break;case Re.PAUSED:d&&a.get("imageAdvs")&&a.get("imageAdvs").pause&&d.loadAdv("pause"),M(),f&&a.get("marquee").show&&f.pause(),y&&a.get("danmaku").show&&y.pause();break;case Re.IDLE:f&&a.get("marquee").show&&f.pause(),y&&a.get("danmaku").show&&y.pause();break;case Re.COMPLETE:f&&f.stop()}}function Ae(e){S&&S.changeLang(e)}this.resize=function(e,t){de(e,t,!0),P()},this.resizeMedia=k,this.reset=function(){document.contains(o)&&o.parentNode.replaceChild(void 0,o),be.emptyElement(o)},this.setupInstream=function(e){this.instreamModel=u=e,u.on("change:controls",se,this),u.on("change:state",x,this),R=!0,be.addClass(o,"jw-flag-ads"),M()},this.setAltText=function(e){c.setAltText(e)},this.useExternalControls=function(){be.addClass(o,"jw-flag-ads-hide-controls")},this.destroyInstream=function(){R=!1,u&&(u.off(null,null,this),u=null),this.setAltText(""),be.removeClass(o,"jw-flag-ads"),be.removeClass(o,"jw-flag-ads-hide-controls"),a.getVideo&&a.getVideo().setContainer(l),ye(a,a.get("duration")),p.revertAlternateClickHandlers()},this.addCues=function(e){c&&c.addCues(e)},this.addThumbnails=function(e){c&&c.addThumbnails(e)},this.clickHandler=function(){return p},this.controlsContainer=function(){return s},this.getContainer=this.element=function(){return o},this.getSafeRegion=function(e){var t={x:0,y:0,width:a.get("containerWidth")||0,height:a.get("containerHeight")||0},n=a.get("dock");return n&&n.length&&a.get("controls")&&(t.y=m.element().clientHeight,t.height-=t.y),(e=e||!be.exists(e))&&a.get("controls")&&(t.height-=c.element().clientHeight),t},this.setCaptions=function(e){v.clear(),v.setup(a.get("id"),e),v.resize()},this.destroy=function(){be.removeEventListener(window,"resize",P),be.removeEventListener(window,"orientationchange",P);for(var e=Qe.length;e--;)be.removeEventListener(document,Qe[e],O,O,!1);a.mediaController&&a.mediaController.off("fullscreenchange",O),be.removeEventListener(o,"keydown",K),A&&A.destroy(),t&&(a.off("change:state",t.statusDelegate),t.destroy(),t=null),R&&this.destroyInstream(),g&&g.destroy(),w&&w.destroy(),d&&d.destroy(),be.clearCss(a.get("id"))},this.showAdv=function(e){d&&d.loadAdv(e)},this.beginStartAdv=function(){d&&d.beginStartAdv()},this.sendDanmu=e=>{e&&a.get("danmaku")&&a.get("danmaku").show?this.api.danmaku.send(e):e&&e.trim()&&(!a.get("danmaku")||a.get("danmaku")&&a.get("danmaku").show)},this.setLang=e=>{c&&c.setLang&&c.setLang(e)},this.setWatermark=e=>{e&&w&&w.setWatermarkOptions(e)}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(33),n(16),n(2)],t=function(r,g,a,_){var y=g.style,v={back:!0,fontSize:15,fontFamily:"Arial,sans-serif",fontOpacity:100,color:"#FFF",backgroundColor:"#000",backgroundOpacity:100,edgeStyle:null,windowColor:"#FFF",windowOpacity:0,preprocessor:_.identity};return function(s){var t,l,n,u,c,h,d={};function f(e){var t="jw-captions-window jw-reset";(e=e||"")?(h.innerHTML=e,c.className=t+" jw-captions-window-active"):(c.className=t,r.empty(h))}function i(e,t){if(e&&e.data&&t){t=t,n=(n=e).source,i=t.metadata;var n,i,r=n?!(!i||!_.isNumber(i[n]))&&i[n]:t.position;if(!1!==r){var a=e.data;if(!(0<=l&&p(a,l,r))){for(var o=-1,s=0;s<a.length;s++)if(p(a,s,r)){o=s;break}-1===o?f(""):o!==l&&(l=o,f(d.preprocessor(a[l].text)))}}}}function p(e,t,n){return e[t].begin<=n&&(!e[t].end||e[t].end>=n)&&(t===e.length-1||e[t+1].begin>=n)}function m(e,t,n){n=g.hexToRgba("#000000",n);"dropshadow"===e?t.textShadow="0 2px 1px "+n:"raised"===e?t.textShadow="0 0 5px "+n+", 0 1px 5px "+n+", 0 2px 5px "+n:"depressed"===e?t.textShadow="0 -2px 1px "+n:"uniform"===e&&(t.textShadow="-2px 0 1px "+n+",2px 0 1px "+n+",0 -2px 1px "+n+",0 2px 1px "+n+",-1px 1px 1px "+n+",1px 1px 1px "+n+",1px -1px 1px "+n+",1px 1px 1px "+n)}(u=document.createElement("div")).className="jw-captions jw-reset",this.show=function(){u.className="jw-captions jw-captions-enabled jw-reset"},this.hide=function(){u.className="jw-captions jw-reset"},this.populate=function(e){l=-1,(t=e)?i(e,n):f("")},this.resize=function(){var e=u.clientWidth,e=Math.pow(e/400,.6);e&&(e=d.fontSize*e,y(u,{fontSize:Math.round(e)+"px"}))},this.setup=function(e,t){var n,i,r,a,o;c=document.createElement("div"),h=document.createElement("span"),c.className="jw-captions-window jw-reset",h.className="jw-captions-text jw-reset",d=_.extend({},v,t),t&&(t=d.fontOpacity,a=d.windowOpacity,n=d.edgeStyle,o=d.backgroundColor,i={},r={color:g.hexToRgba(d.color,t),fontFamily:d.fontFamily,fontStyle:d.fontStyle,fontWeight:d.fontWeight,textDecoration:d.textDecoration},a&&(i.backgroundColor=g.hexToRgba(d.windowColor,a)),m(n,r,t),d.back?r.backgroundColor=g.hexToRgba(o,d.backgroundOpacity):null===n&&m("uniform",r),y(c,i),y(h,r),a=e,t=i,o=r,g.css("#"+a+" .jw-video::-webkit-media-text-track-display",t,a),g.css("#"+a+" .jw-video::cue",o,a),o.backgroundColor)&&(t="{background-color: "+o.backgroundColor+" !important;}",g.css("#"+a+" .jw-video::-webkit-media-text-track-display-backdrop",t,a)),c.appendChild(h),u.appendChild(c),this.populate(s.get("captionsTrack")),s.set("captions",d)},this.clear=function(){r.empty(u)},this.element=function(){return u},s.on("change:playlistItem",function(){n=null,l=-1,f("")},this),s.on("change:captionsTrack",function(e,t){this.populate(t)},this),s.mediaController.on("seek",function(){l=-1},this),s.mediaController.on("time seek",function(e){i(t,n=e)},this),s.mediaController.on("subtitlesTrackData",function(){i(t,n)},this),s.on("change:state",function(e,t){switch(t){case a.IDLE:case a.ERROR:case a.COMPLETE:this.hide();break;default:this.show()}},this)}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(14),n(6),n(7),n(2)],t=function(l,u,c,h){return function(t,e,n){h.extend(this,c),i=e,this.element=function(){return i};var i,r,a,e=new l(i,h.extend({enableDoubleTap:!0,useMove:!0},n)),o=(e.on("click tap",s),e.on("doubleClick doubleTap",function(){a?a():o.trigger("doubleClick")}),e.on("move",function(){o.trigger("move")}),e.on("over",function(){o.trigger("over")}),e.on("out",function(){o.trigger("out")}),this.clickHandler=s,this);function s(e){t.get("flashBlocked")||(r?r(e):o.trigger(e.type===u.touchEvents.CLICK?"click":"tap"))}this.setAlternateClickHandlers=function(e,t){r=e,a=t||null},this.revertAlternateClickHandlers=function(){a=r=null}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(7),n(14),n(221),n(2)],t=function(n,i,r,a,o){function e(e){o.extend(this,i),this.model=e,this.el=n.createElement(a({}));var t=this;this.iconUI=new r(this.el).on("click tap",function(e){t.trigger(e.type)})}return o.extend(e.prototype,{element:function(){return this.el}}),e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-display-icon-container jw-background-color jw-reset" style="cursor:none;pointer-events:none">\n    <div class="jw-icon jw-icon-display jw-button-color jw-reset"></div>\n</div>\n'},useData:!0})},function(e,t,n){n=[n(223),n(1),n(2),n(14)],t=function(n,i,r,a){function e(e){this.model=e,this.setup(),this.model.on("change:dock",this.render,this)}return r.extend(e.prototype,{setup:function(){var e=this.model.get("dock"),t=this.click.bind(this),e=n(e);this.el=i.createElement(e),new a(this.el).on("click tap",t)},getDockButton:function(e){return i.hasClass(e.target,"jw-dock-button")?e.target:(i.hasClass(e.target,"jw-dock-text")?e.target.parentElement:e.target).parentElement},click:function(e){var t=this.getDockButton(e).getAttribute("button"),n=this.model.get("dock"),n=r.findWhere(n,{id:t});n&&n.callback&&n.callback(e)},render:function(){var e=this.model.get("dock"),e=n(e),e=i.createElement(e);this.el.innerHTML=e.innerHTML},element:function(){return this.el}}),e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a,o,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="jw-dock-button jw-background-color jw-reset'+(null!=(a=l(n,"if").call(s,null!=t?l(t,"btnClass"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:59},end:{line:3,column:95}}}))?a:"")+'" button="'+e.escapeExpression("function"==typeof(o=null!=(o=l(n,"id")||(null!=t?l(t,"id"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"id",hash:{},data:r,loc:{start:{line:3,column:105},end:{line:3,column:111}}}):o)+'">\n        <div class="jw-icon jw-dock-image jw-reset" '+(null!=(a=l(n,"if").call(s,null!=t?l(t,"img"):t,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:52},end:{line:4,column:110}}}))?a:"")+'></div>\n        <div class="jw-arrow jw-reset"></div>\n'+(null!=(a=l(n,"if").call(s,null!=t?l(t,"tooltip"):t,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:8},end:{line:10,column:15}}}))?a:"")+"    </div>\n"},2:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"btnClass")||(null!=t?a(t,"btnClass"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"btnClass",hash:{},data:r,loc:{start:{line:3,column:76},end:{line:3,column:88}}}):n)},4:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"style='background-image: url(\""+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"img")||(null!=t?a(t,"img"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"img",hash:{},data:r,loc:{start:{line:4,column:93},end:{line:4,column:100}}}):n)+"\")'"},6:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="jw-overlay jw-background-color jw-reset">\n            <span class="jw-text jw-dock-text jw-reset">'+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"tooltip")||(null!=t?a(t,"tooltip"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"tooltip",hash:{},data:r,loc:{start:{line:8,column:56},end:{line:8,column:67}}}):n)+"</span>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-dock jw-reset">\n'+(null!=(n=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:4},end:{line:12,column:13}}}))?n:"")+"</div>"},useData:!0})},function(e,t,n){n=[n(14),n(1),n(6),n(2),n(7),n(225)],t=function(o,s,l,u,e,c){var h=s.style,d={linktarget:"_blank",margin:8,hide:!1,position:"top-right"};return function(n){var i,r,t=new Image,a=u.extend({},n.get("logo"));return u.extend(this,e),this.setup=function(e){(r=u.extend({},d,a)).hide="true"===r.hide.toString(),i=s.createElement(c()),r.file&&(r.hide&&s.addClass(i,"jw-hide"),s.addClass(i,"jw-logo-"+(r.position||d.position)),"top-right"===r.position&&(n.on("change:dock",this.topRight,this),n.on("change:controls",this.topRight,this),this.topRight(n)),n.set("logo",r),t.onload=function(){var e,t={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};r.margin!==d.margin&&3===(e=/(\w+)-(\w+)/.exec(r.position)).length&&(t["margin-"+e[1]]=r.margin,t["margin-"+e[2]]=r.margin),h(i,t),n.set("logoWidth",t.width)},t.src=r.file,new o(i).on("click tap",function(e){s.exists(e)&&e.stopPropagation&&e.stopPropagation(),this.trigger(l.JWPLAYER_LOGO_CLICK,{link:r.link,linktarget:r.linktarget})},this),e.appendChild(i))},this.topRight=function(e){var t=e.get("controls"),n=e.get("dock"),t=t&&(n&&n.length||e.get("sharing")||e.get("related"));h(i,{top:t?"3.5em":0})},this.element=function(){return i},this.position=function(){return r.position},this.destroy=function(){t.onload=null},this}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'src="'+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"file")||(null!=t?a(t,"file"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"file",hash:{},data:r,loc:{start:{line:2,column:48},end:{line:2,column:56}}}):n)+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-logo jw-reset">\n    <img class="jw-logo-image" '+(null!=(n=a(n,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"file"):t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:31},end:{line:2,column:64}}}))?n:"")+">\n</div>"},useData:!0})},function(e,t,n){const o=n(50);n=[n(1),n(2),n(7),n(46),n(14),n(62),n(228),n(231),n(233),n(235),n(236),n(237),n(112)],void 0!==(t=function(r,c,e,t,i,h,d,n,f,p,m,g,_){function y(e,t){var n=document.createElement("div");return n.className="jw-icon jw-icon-inline jw-button-color jw-reset "+e,n.style.display="none",t&&new i(n).on("click tap",function(){t()}),{element:function(){return n},toggle:function(e){e?this.show():this.hide()},show:function(){n.style.display=""},hide:function(){n.style.display="none"}}}function v(e){var t=document.createElement("span");return t.className="jw-text jw-reset "+e,t}function E(e){return new n(e)}function A(e,t){var n=document.createElement("div");return n.className="jw-group jw-controlbar-"+e+"-group jw-reset",c.each(t,function(e){e.element&&(e=e.element()),n.appendChild(e)}),n}function a(e,t,n){this._api=e,this._model=t,this._playerElement=n,this._isMobile=r.isMobile(),this._compactModeMaxSize=400,this._maxCompactWidth=-1,this.playlistIndex=0,this.resolutionIndex=0,this.langMenu=[],this.curSelectLangIndex=0,this.setup(),this.qualityChangeLang=o.default,this.qualitylevels=[],this.qualityIndex=0,this.rotateDeg=0,this.isFullScreen=!1}return c.extend(a.prototype,e,{setup:function(){this.initDefaultResolution(),this.build(),this.initialize()},initDefaultResolution:function(){var e=this._model.get("playlist"),t=e.findIndex(e=>e.default),n=0;-1!=t&&(this._model.set("item",t),n=e[t].sources.findIndex(e=>e.default),n=-1==t?0:n),-1!=n&&(this._model.set("currentLevel",n),this.resolutionIndex=n)},build:function(){var e,t,n,i,r,a,o,s,l=this._model.get("timeShift"),l=l&&l.liveStartTime&&0<Date.now()/1e3-l.liveStartTime,l=(l&&(a=new _(!0,"live-shift-switch")),new d(this._model,this._api,l)),u=new m("jw-icon-more");!1!==this._model.get("visualplaylist")&&(e=new f("jw-icon-playlist")),i=y("jw-icon-volume",this._api.setMute),t=new h("jw-slider-volume","horizontal"),n=new p(this._model,"jw-icon-volume"),this._model.get("danmaku")&&this._model.get("danmaku").show&&(r=new g(this._model,"jw-icon-danmu")),this._model.get("isMirror")&&(o=y("jw-icon-mirror",this._api.setMirror)),this._model.get("rotate")&&(s=y("jw-icon-rotate",this.setRotate.bind(this))),this.elements={alt:v("jw-text-alt"),barLogo:y("jw-icon-barlogo-new",()=>{window.open(this._model.get("controlbar").barLogoUrl)}),play:y("jw-icon-playback",this._api.play.bind(this,{reason:"interaction"})),prev:y("jw-icon-prev",this._api.playlistPrev.bind(this,{reason:"interaction"})),next:y("jw-icon-next",this._api.playlistNext.bind(this,{reason:"interaction"})),playlist:e,elapsed:v("jw-text-elapsed"),split:v("jw-text-split"),time:l,duration:v("jw-text-duration"),playRate:E("jw-icon-playrate"),drawer:u,hd:E("jw-icon-hd"),qualityChange:E("jw-icon-qualityChange"),cc:E("jw-icon-cc"),audiotracks:E("jw-icon-audio-tracks"),mute:i,volume:t,volumetooltip:n,cast:y("jw-icon-cast jw-off",this._api.castToggle),fullscreen:y("jw-icon-fullscreen",this._api.setFullscreen),screenshot:y("jw-icon-screenshot",this._api.setScreenshot),mirror:o,rotate:s,danmuTooltip:r,pictInpict:y("jw-icon-pictureinpicture",this._api.setPictInPict),lang:E("jw-icon-lang"),liveShiftSwitch:a,backLive:v("jw-text-backlive")},this._model.get("danmaku")&&this._model.get("danmaku").show,this.elements.split.innerHTML="/",this.layout={left:[this.elements.barLogo,this.elements.play,this.elements.prev,this.elements.playlist,this.elements.next,this.elements.elapsed,this.elements.split,this.elements.duration,this.elements.liveShiftSwitch,this.elements.backLive],center:[this.elements.time,this.elements.alt,this.elements.sendBox],right:[this.elements.playRate,this.elements.lang,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.drawer,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.mirror,this.elements.rotate,this.elements.fullscreen,this.elements.screenshot,this.elements.danmuBtn,this.elements.danmuTooltip,this.elements.pictInpict],drawer:[this.elements.hd,this.elements.qualityChange,this.elements.cc,this.elements.audiotracks]},this.menus=c.compact([this.elements.playlist,this.elements.hd,this.elements.qualityChange,this.elements.cc,this.elements.audiotracks,this.elements.volumetooltip,this.element.lang]),this.layout.left=c.compact(this.layout.left),this.layout.center=c.compact(this.layout.center),this.layout.right=c.compact(this.layout.right),this.layout.drawer=c.compact(this.layout.drawer),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=A("left",this.layout.left),this.elements.center=A("center",this.layout.center),this.elements.right=A("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right)},initialize:function(){this._model.get("controlbar").barLogo&&this.elements.barLogo.show(),this.elements.play.show(),this.elements.fullscreen.show(),this._model.get("screenshot")?this.elements.screenshot.show():this.elements.screenshot.hide(),this._model.get("pictinpict")&&r.isPictureInpicture()?this.elements.pictInpict.show():this.elements.pictInpict.hide(),this.elements.mute&&this.elements.mute.show(),this._model.get("isMirror")&&this.elements.mirror.show();var e=this._model.get("rotate");e&&(this.elements.rotate.show(),e=!!e.clockwise,rotateButton=y("jw-icon-rotate",this._api.setRotate),e||r.toggleClass(this.elements.rotate.element(),"jw-off",!e)),this.setUpLangMenu(),this.onVolume(this._model,this._model.get("volume")),this.onPlaylist(this._model,this._model.get("playlist")),this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.onMediaModel(this._model,this._model.get("mediaModel")),this.onCastAvailable(this._model,this._model.get("castAvailable")),this.onCastActive(this._model,this._model.get("castActive")),this.onCaptionsList(this._model,this._model.get("captionsList")),this._model.on("change:volume",this.onVolume,this),this._model.on("change:mute",this.onMute,this),this._model.on("change:playlist",this.onPlaylist,this),this._model.on("change:playlistItem",this.onPlaylistItem,this),this._model.on("change:mediaModel",this.onMediaModel,this),this._model.on("change:castAvailable",this.onCastAvailable,this),this._model.on("change:castActive",this.onCastActive,this),this._model.on("change:duration",this.onDuration,this),this._model.on("change:position",this.onElapsed,this),this._model.on("change:fullscreen",this.onFullscreen,this),this._model.on("change:screenshot",this.onScreenshot,this),this._model.on("change:captionsList",this.onCaptionsList,this),this._model.on("change:captionsIndex",this.onCaptionsIndex,this),this._model.on("change:compactUI",this.onCompactUI,this),this._model.on("change:provider",this.onProvider,this),this._model.on("change:danmaku",this.onDanmaku,this),this._model.on("change:mirror",this.onMirror,this),this.elements.volume&&this.elements.volume.on("update",function(e){e=e.percentage;this._api.setVolume(e)},this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",function(e){e=e.percentage;this._api.setVolume(e)},this),this.elements.volumetooltip.on("toggleValue",function(){this._api.setMute()},this)),this.elements.danmuTooltip&&(this.elements.danmuTooltip.on("toggleValue",function(){var e=JSON.parse(JSON.stringify(this._model.get("danmaku")));this._model.set("danmaku",Object.assign(e,{active:!e.active}))}),this.elements.danmuTooltip.on("switch",e=>{var t=JSON.parse(JSON.stringify(this._model.get("danmaku")));this._model.set("danmaku",Object.assign(t,{useMask:!t.useMask})),this._api.danmaku&&this._api.danmaku.updateUseMask(e)}),this.elements.danmuTooltip.on("update",e=>{switch(e.type){case 0:this._api.danmaku&&this._api.danmaku.updateOpacity(e.val);break;case 1:this._api.danmaku&&this._api.danmaku.updateArea(e.val);break;case 2:this._api.danmaku&&this._api.danmaku.updateSpeed(e.val);break;case 3:this._api.danmaku&&this._api.danmaku.updateFontSize(e.val)}})),this.elements.liveShiftSwitch&&setTimeout(()=>{const t="jw-flag-time-shift";this._playerElement.classList.add(t),this.elements.backLive.innerText="返回直播",this.elements.liveShiftSwitch.addEvent(),this.elements.liveShiftSwitch.on("switch",e=>{e?this._playerElement.classList.add(t):this._playerElement.classList.remove(t)})}),this.elements.playlist&&this.elements.playlist.on("select",function(e){this._model.once("itemReady",function(){this.playlistIndex=e,this._model.setCurrentQuality(this.resolutionIndex),this._api.play({reason:"interaction"})},this),this._model.set("autostart",!0),this._api.load(e,this.resolutionIndex)},this),this.elements.playRate.on("select",function(e){e=this._model.get("playRateConfig")[e].label,e=parseFloat(e.substring(1));this._model.setPlaybackRate(e)},this),this.elements.hd.on("select",function(e){this._model.set("autostart",!0),this._model.once("itemReady",function(){this.resolutionIndex=e,this._model.setCurrentQuality(e),this._api.play({reason:"interaction"})},this),this._api.load(this.playlistIndex,e)},this),this.elements.qualityChange.on("select",function(e){this._model.changeHlsQuality(e),this.elements.qualityChange.selectItem(e)},this),this.elements.hd.on("toggleValue",function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0)},this),this.elements.cc.on("select",function(e){this._api.setCurrentCaptions(e)},this),this.elements.cc.on("toggleValue",function(){var e=this._model.get("captionsIndex");this._api.setCurrentCaptions(e?0:1)},this),this.elements.audiotracks.on("select",function(e){this._model.getVideo().setCurrentAudioTrack(e)},this),new i(this.elements.duration).on("click tap",function(){var e;"DVR"===r.adaptiveType(this._model.get("duration"))&&(e=this._model.get("position"),this._api.seek(Math.max(t.dvrSeekLimit,e)))},this),new i(this.el).on("click tap drag",function(){this.trigger("userAction")},this),new i(this.elements.backLive).on("click tap",function(){this._model.gobackLive()},this),this.elements.drawer.on("open-drawer close-drawer",function(e,t){r.toggleClass(this.el,"jw-drawer-expanded",t.isOpen),t.isOpen||this.closeMenus()},this),c.each(this.menus,function(e){e.on("open-tooltip",this.closeMenus,this)},this),this._model.get("danmaku")&&this._model.get("danmaku").show&&setTimeout(()=>{this.onDanmaku(this._model,this._model.get("danmaku"))})},setUpLangMenu(){var e=this._model.get("lang"),t=this._model.get("languages");if(this._model.get("showLang")&&t&&t[e]){this.setLangMenu(0);let t=this;this.elements.lang.on("select",function(e){e=t.langMenu[e];t.setLang(e.id)})}},setLangMenu(){var e,t=this._model.get("lang"),n=this._model.get("languages"),i=[];let r=0;for(e in n)i.push({label:n[t][e],index:i.length,id:e}),t==e&&(r=i.length-1);this.langMenu=i,this.elements.lang.setup(i,r,{toggle:!1})},setHlsQulityLangMenu(e,t,n){this.qualitylevels=e||this.qualitylevels,this.qualityIndex=t||this.qualityIndex;var i=[];for(let e=0;e<this.qualitylevels.length;e++)i.push({label:-1==this.qualitylevels[e].id?this.qualityChangeLang[n].HLSQUALITYCHANGE.AUTO:this.qualitylevels[e].label});this.elements.qualityChange.setup(i,this.qualityIndex,{toggle:!1})},setLang:function(e){if("string"==typeof e)this._model.set("lang",e);else{if(!e.zh&&!e.en)return;var t=e.zh?"zh":"en",n=(this._model.set("lang",t),this._model.get("languages")),n=Object.assign(n,e);this._model.set("languages",n),e=t}this.elements.playlist.changeLang(e),this._model.get("showLang")&&this.setLangMenu();n=this._model.get("playlist")[this.playlistIndex];if(currentLevel=this._model.get("currentLevel"),n&&n.sources){let t=[];n.sources.forEach(e=>{t.push({label:e.label})}),this.elements.hd.setup(t,this.resolutionIndex,{toggle:!1})}this.elements.danmuTooltip&&this.elements.danmuTooltip.changeLang(e),this.elements.qualityChange&&this.setHlsQulityLangMenu(void 0,void 0,e),this.trigger("change_lang",e)},onCaptionsList:function(e,t){e=e.get("captionsIndex");this.elements.cc.setup(t,e),this.clearCompactMode()},onCaptionsIndex:function(e,t){this.elements.cc.selectItem(t)},onPlaylist:function(e,t){var n,i=1<t.length;this.elements.next.toggle(i),this.elements.prev.toggle(i),this.elements.playlist&&(i=e.get("lang"),n=e.get("languages"),this.elements.playlist.setup(t,e.get("item"),i,n))},onPlaylistItem:function(e){this.elements.time.updateBuffer(0),this.elements.time.render(0),this.elements.duration.innerHTML="00:00",this.elements.elapsed.innerHTML="00:00",this.clearCompactMode();e=e.get("item");this.elements.playlist&&this.elements.playlist.selectItem(e),this.elements.audiotracks.setup()},onMediaModel:function(e,t){t.on("change:levels",function(e,t){this.elements.hd.setup(t,e.get("currentLevel"),{toggle:!1}),this.clearCompactMode(),this._model.setCurrentQuality(this.resolutionIndex)},this),t.on("change:hlsQualityListChange",(e,t)=>{var n=this._model.get("lang")||"zh",i=t.findIndex(e=>e.selected);this.setHlsQulityLangMenu(t,i,n)}),t.on("change:currentLevel",function(e,t){this.elements.hd.selectItem(t)},this),t.on("change:audioTracks",function(e,t){t=c.map(t,function(e){return{label:e.name}});this.elements.audiotracks.setup(t,e.get("currentAudioTrack"),{toggle:!1}),this.clearCompactMode()},this),t.on("change:currentAudioTrack",function(e,t){this.elements.audiotracks.selectItem(t)},this),t.on("change:state",function(e,t){"complete"===t&&(this.elements.drawer.closeTooltip(),r.removeClass(this.el,"jw-drawer-expanded"))},this),t.on("change:playbackRate",function(e,t){var n=this._model.get("playRateConfig");let i=-1;for(let e=0;e<n.length;e++)n[e].label==="×"+t&&(i=e);this.elements.playRate.selectItem(i)},this)},onProvider:function(e,t){/(html5|videojs)/.test(t.name)&&e.get("playRate")?this.elements.playRate.setup(e.get("playRateConfig"),0):this.elements.playRate.hide()},onVolume:function(e,t,n){this.renderVolume(e.get("mute"),t,n)},onMute:function(e,t){this.renderVolume(t,e.get("volume"))},renderVolume:function(e,t,n){var i;n=n||t,this.elements.mute&&r.toggleClass(this.elements.mute.element(),"jw-off",e),this.elements.volume&&this.elements.volume.render(e?0:t),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(e?0:t),r.toggleClass(this.elements.volumetooltip.element(),"jw-off",e)),this.elements.volumetooltip&&this.elements.volumetooltip.valuetip&&(i=this.elements.volumetooltip.valuetip,e?i.innerHTML="0%":100===t&&n<t&&this._model.get("provider")&&/^flash/.test(this._model.get("provider").name)?i.innerHTML="100%(按↑可以继续增大音量)":i.innerText=Math.round(t)+"%")},onCastAvailable:function(e,t){this.elements.cast.toggle(t),this.clearCompactMode()},onCastActive:function(e,t){r.toggleClass(this.elements.cast.element(),"jw-off",!t)},onElapsed:function(e,t){e=e.get("duration"),e="DVR"===r.adaptiveType(e)?"-"+r.timeFormat(-e):r.timeFormat(t);this.elements.elapsed.innerHTML=e},onDuration:function(e,t){var n;"DVR"===r.adaptiveType(t)?(n="Live",this.clearCompactMode()):n=r.timeFormat(t),/NaN/.test(n)||(this.elements.duration.innerHTML=n)},onFullscreen:function(e,t){r.isIOS()||(this.isFullScreen=t,r.toggleClass(this.elements.fullscreen.element(),"jw-off",t))},onScreenshot:function(e,t){r.toggleClass(this.elements.screenshot.element(),"jw-off",t)},element:function(){return this.el},getVisibleBounds:function(){var e,t=this.el;return"table"===(getComputedStyle?getComputedStyle(t):t.currentStyle).display?r.bounds(t):(t.style.visibility="hidden",t.style.display="table",e=r.bounds(t),t.style.visibility=t.style.display="",e)},setAltText:function(e){this.elements.alt.innerHTML=e},addCues:function(e){this.elements.time&&(c.each(e,function(e){this.elements.time.addCue(e)},this),0===e.length&&this.elements.time.resetChapters(),this.elements.time.drawCues())},addThumbnails:function(e){this.elements.time&&(c.each(e,function(e){this.elements.time.addThumbnail(e)},this),this.elements.time.drawCues())},closeMenus:function(t){c.each(this.menus,function(e){t&&t.target===e.el||e.closeTooltip(t)})},hideComponents:function(){this.closeMenus(),this.elements.drawer.closeTooltip(),r.removeClass(this.el,"jw-drawer-expanded")},clearCompactMode:function(){this._maxCompactWidth=-1,this._model.set("compactUI",!1),this._containerWidth&&this.checkCompactMode(this._containerWidth)},setCompactModeBounds:function(){var e;0<this.element().offsetWidth&&(e=this.elements.left.offsetWidth+this.elements.right.offsetWidth,"LIVE"===r.adaptiveType(this._model.get("duration"))?this._maxCompactWidth=e+this.elements.alt.offsetWidth:(e=e+(this.elements.center.offsetWidth-this.elements.time.el.offsetWidth),this._maxCompactWidth=e/.8))},checkCompactMode:function(e){this.setCompactModeBounds(),this._containerWidth=e,-1!==this._maxCompactWidth&&(e>=this._compactModeMaxSize&&e>this._maxCompactWidth?this._model.set("compactUI",!1):(e<this._compactModeMaxSize||e<=this._maxCompactWidth)&&this._model.set("compactUI",!0))},onCompactUI:function(e,t){r.removeClass(this.el,"jw-drawer-expanded"),this.elements.drawer.setup(this.layout.drawer,t),(!t||this.elements.drawer.activeContents.length<2)&&c.each(this.layout.drawer,function(e){this.elements.right.insertBefore(e.el,this.elements.drawer.el)},this)},onDanmaku:function(e,t){t.active?this._api.danmaku.enable():this._api.danmaku.disable();var n=document.getElementsByClassName("jw-icon-danmu")[0].getElementsByClassName("jw-overlay ")[0],i=t.active?"block":"none";n.style.display=i,r.toggleClass(this.elements.danmuTooltip.element(),"jw-off",!t.active)},onMirror:function(e){var e=e.get("mirror"),t=(r.toggleClass(this.elements.mirror.element(),"jw-off",e),"jw-state-mirror");e?this._playerElement.classList.add(t):this._playerElement.classList.remove(t)},setRotate:function(e=!0){var t=this._model.get("rotate");if(clockwise=!!t.clockwise,(innerRotate=!!t.innerRotate)||!this.isFullScreen){var i,r,a,o,t=e?clockwise?90:-90:0,t=(this.rotateDeg+=t,360===Math.abs(this.rotateDeg)&&(this.rotateDeg=0),this._model.getVideo());try{e&&!innerRotate&&(r=(i=t.video).style.width,a=i.style.height,i.style.width=a,i.style.height=r,parseInt(r)>parseInt(a)?(o=(parseInt(r)-parseInt(a))/2,i.style.transform=`translate(${o}px, -${o}px) rotate(${this.rotateDeg}deg)`):i.style.transform="rotate("+this.rotateDeg+"deg)");let n=t.video.getElementsByTagName("video");var s,l=(n=0<n.length||0<(n=t.video.getElementsByTagName("canvas")).length?n[0]:n).style.width,u=n.style.height,c="video"==n.tagName.toLowerCase(),h=Math.abs(this.rotateDeg)/90%2==0,d=t.video.clientWidth,f=t.video.clientHeight,p=n.style.width,m=n.style.height;if(innerRotate)if(c)n.style.transform=`rotate(${this.rotateDeg}deg)`;else{let e=1;this.isFullScreen&&!h&&(e=d/parseInt(m))>f/parseInt(p)&&(e=f/parseInt(p)),n.style.transform=`scale(${e}) rotate(${this.rotateDeg}deg)`}else c||h?n.style.transform="none":(s=(parseInt(l)-parseInt(u))/2,n.style.transform=`translate(-${s}px, ${s}px)`),n.style.zIndex=h?"-1":"",h&&!c&&(n.style.position="relative");if("video"===n.tagName.toLowerCase()&&(n.style.width=u,n.style.height=l),innerRotate){let e="",t="";this.isFullScreen&&(c&&!h&&parseInt(m)>d&&(e=(d-parseInt(m))/2+"px"),!c)&&f>parseInt(m)&&(t=(f-parseInt(m))/2+"px"),n.style.marginLeft=e,n.style.marginTop=t}innerRotate||c||n.classList.add("rotate-inner")}catch(e){}}}}),a}.apply(t,n))&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression,e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="'+l("function"==typeof(a=null!=(a=e(n,"className")||(null!=t?e(t,"className"):t))?a:s)?a.call(o,{name:"className",hash:{},data:r,loc:{start:{line:1,column:12},end:{line:1,column:25}}}):a)+" "+l("function"==typeof(a=null!=(a=e(n,"orientation")||(null!=t?e(t,"orientation"):t))?a:s)?a.call(o,{name:"orientation",hash:{},data:r,loc:{start:{line:1,column:26},end:{line:1,column:41}}}):a)+' jw-reset">\n    <div class="jw-slider-container jw-reset">\n        <div class="jw-rail jw-reset"></div>\n        <div class="jw-buffer jw-reset"></div>\n        <div class="jw-progress jw-reset"></div>\n        <div class="jw-knob jw-reset"></div>\n    </div>\n</div>'},useData:!0})},function(e,t,n){n=[n(2),n(1),n(46),n(62),n(39),n(229),n(230)],t=function(h,d,f,i,e,t,n){var r=e.extend({setup:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-reset";var e=document.createElement("div");e.className="jw-time-tip jw-background-color jw-reset",e.appendChild(this.img),e.appendChild(this.text),d.removeClass(this.el,"jw-hidden"),this.addContent(e)},image:function(e){d.style(this.img,e)},update:function(e){this.text.innerHTML=e}}),e=i.extend({constructor:function(e,t,n){this._model=e,this._api=t,this.isLiveShinft=n,this.timeTip=new r("jw-tooltip-time"),this.timeTip.setup(),this.cues=[],this.seekThrottled=h.throttle(this.performSeek,400),this._model.on("change:playlistItem",this.onPlaylistItem,this).on("change:position",this.onPosition,this).on("change:duration",this.onDuration,this).on("change:buffer",this.onBuffer,this),i.call(this,"jw-slider-time","horizontal")},setup:function(){i.prototype.setup.apply(this,arguments),this._model.get("playlistItem")&&this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.elementRail.appendChild(this.timeTip.element()),d.addEventListener(this.el,"mousemove",this.showTimeTooltip.bind(this),!1),d.addEventListener(this.el,"mouseout",this.hideTimeTooltip.bind(this),!1)},limit:function(e){var t,n,i;return this.activeCue&&h.isNumber(this.activeCue.pct)?this.activeCue.pct:(t=this._model.get("duration"),"DVR"===d.adaptiveType(t)?(n=(1-e/100)*t,i=this._model.get("position"),100-100*Math.min(n,Math.max(f.dvrSeekLimit,i))/t):e)},update:function(e){this.seekTo=e,this.seekThrottled(),i.prototype.update.apply(this,arguments)},dragStart:function(){this._model.set("scrubbing",!0),i.prototype.dragStart.apply(this,arguments)},dragEnd:function(){i.prototype.dragEnd.apply(this,arguments),this._model.set("scrubbing",!1)},onSeeked:function(){this._model.get("scrubbing")&&this.performSeek()},onBuffer:function(e,t){this.isLiveShinft||this.updateBuffer(t)},onPosition:function(e,t){this.updateTime(t,e.get("duration"))},onDuration:function(e,t){this.updateTime(e.get("position"),t)},updateTime:function(e,t){var n,i=0;t&&("DVR"===(n=d.adaptiveType(t))?i=(t-e)/t*100:"VOD"===n&&(i=e/t*100)),this.render(i)},onPlaylistItem:function(e,t){this.reset(),e.mediaModel.on("seeked",this.onSeeked,this);e=t.tracks;h.each(e,function(e){e&&e.kind&&"thumbnails"===e.kind.toLowerCase()?this.loadThumbnails(e.file):e&&e.kind&&"chapters"===e.kind.toLowerCase()&&this.loadChapters(e.file)},this)},performSeek:function(){var e,t=this.seekTo,n=this._model.get("duration"),i=d.adaptiveType(n);0===n?this._api.play():"DVR"===i?this._api.seek(e=(100-t)/100*n):this._model.attributes.controlbar.canDrag&&(e=t/100*n,this._api.seek(Math.min(e,n-.25)))},showTimeTooltip:function(e){var t=this._model.get("duration");if(0!==t){var n,i,r=d.bounds(this.elementRail),a=document.documentElement.scrollLeft||document.body.scrollLeft,o=(e.pageX||e.clientX+a)-Math.round(r.left),e=(o=d.between(o,0,Math.round(r.width)))/Math.round(r.width),a=t*e,s=(t<0&&(a=t-a),2),l=20,e=(this.activeCue?(d.removeClass(this.timeTip.el,"jw-tooltip-time-jxm"),n=this.activeCue.text,(i=document.createElement("canvas").getContext("2d")).font="15px Arial",70<(i=i.measureText(n)).width&&(l=.05<e?Math.floor(i.width/70):90,s=100,d.addClass(this.timeTip.el,"jw-tooltip-time-jxm"))):(this.isLiveShinft&&(a=-1<a-t&a-t<=0?0:a-t),n=d.timeFormat(a,!0),t<0&&a>f.dvrSeekLimit&&(n="Live"),d.removeClass(this.timeTip.el,"jw-tooltip-time-jxm")),this.timeTip.update(n),this.showThumbnail(a),d.addClass(this.timeTip.el,"jw-open"),this.chooseThumbnail(a));if(e)if(0<e.indexOf("#xywh"))try{var l=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(e)[4]/2,u=d.between(o,l,r.width-l-s)/r.width;this.timeTip.el.style.left=100*u+"%"}catch(e){}else{var c=new Image;c.onload=h.bind(function(){c.onload=null,l=100;var e=d.between(o,l,r.width-l-s)/r.width;this.timeTip.el.style.left=100*e+"%"},this),c.src=e}else{u=d.between(o,l,r.width-l-s)/r.width;this.timeTip.el.style.left=100*u+"%"}}},hideTimeTooltip:function(){d.removeClass(this.timeTip.el,"jw-open")},reset:function(){this.resetChapters(),this.resetThumbnails()}});return h.extend(e.prototype,t,n),e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(1),n(80)],t=function(i,r,t){function n(e,t){this.time=e,this.text=t,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset",this.el.time=e}return i.extend(n.prototype,{align:function(e){"%"===this.time.toString().slice(-1)?this.pct=this.time:(e=this.time/e*100,this.pct=e+"%"),this.el.style.left=this.pct}}),{loadChapters:function(e){r.ajax(e,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(e){e=t(e.responseText);i.isArray(e)&&(i.each(e,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(e){this.cues.push(new n(e.begin,e.text))},drawCues:function(){var t,n=this._model.mediaModel.get("duration");!n||n<=0?this._model.mediaModel.once("change:duration",this.drawCues,this):i.each((t=this).cues,function(e){e.align(n),r.addEventListener(e.el,"mouseover",function(){t.activeCue=e}),r.addEventListener(e.el,"mouseout",function(){t.activeCue=null}),r.addEventListener(e.el,"click",function(e){t._api.seek(e.target.time)}),t.elementRail.appendChild(e.el)})},resetChapters:function(){i.each(this.cues,function(e){e.el.parentNode&&e.el.parentNode.removeChild(e.el)},this),this.cues=[]}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(1),n(80)],t=function(i,t,n){function r(e){this.begin=e.begin,this.end=e.end,this.img=e.text}return{loadThumbnails:function(e){e&&(this.vttPath=e.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,t.ajax(e,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(e){e=n(e.responseText);i.isArray(e)&&(i.each(e,function(e){this.thumbnails.push(new r(e))},this),this.drawCues())},thumbnailsFailed:function(){},addThumbnail:function(t){var n=!1;i.each(this.thumbnails,function(e){e.begin===t.begin&&e.end===t.end&&(e.img=t.text,n=!0)},this),n||this.thumbnails.push(new r(t))},chooseThumbnail:function(t){var e;return i.find(this.thumbnails,function(e){return e.begin<=t&&e.end>=t})?((e=i.sortedIndex(this.thumbnails,{end:t},i.property("end")))>=this.thumbnails.length&&(e=this.thumbnails.length-1),(e=this.thumbnails[e].img).indexOf("://")<0&&this.vttPath?this.vttPath+"/"+e:e):""},loadThumbnail:function(e){var t={display:"block",margin:"0 auto",backgroundPosition:"0 0",backgroundRepeat:"no-repeat"};if(0<(e=this.chooseThumbnail(e)).indexOf("#xywh"))try{var n=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(e),e=n[1];t.backgroundPosition=-1*n[2]+"px "+-1*n[3]+"px",t.width=n[4],t.height=n[5]}catch(e){return}else e&&(this.individualImage?(t.width=this.individualImage.width,t.height=this.individualImage.height):(this.individualImage=new Image,this.individualImage.onload=i.bind(function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height})},this),this.individualImage.src=e));return""===e&&(t.width=0,t.height=0),t.backgroundImage='url("'+e+'")',t},showThumbnail:function(e){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(e))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(39),n(1),n(2),n(14),n(232)],t=function(e,r,a,o,s){return e.extend({setup:function(e,t,n){this.iconUI||(this.iconUI=new o(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.select.bind(this)),this.reset(),e=a.isArray(e)?e:[],this.list=e,r.toggleClass(this.el,"jw-hidden",e.length<2);var n=2<=e.length||2===e.length&&n&&!1===n.toggle,i=!n&&2===e.length;r.toggleClass(this.el,"jw-toggle",i),r.toggleClass(this.el,"jw-button-color",!i),this.isActive=n||i,n?(r.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener).on("click",this.toggleOpenStateListener),n=s(e),e=r.createElement(n),this.addContent(e),this.contentUI=new o(this.content).on("click tap",this.selectListener)):i&&this.iconUI.on("click tap",this.toggleValueListener),this.selectItem(t)},toggleValue:function(){this.trigger("toggleValue")},select:function(e){e.target.parentElement===this.content&&(e=r.classList(e.target),e=a.find(e,function(e){return 0===e.indexOf("jw-item")}))&&(this.trigger("select",parseInt(e.split("-")[2])),this.closeTooltipListener())},selectItem:function(e){if(this.content)for(var t=0;t<this.content.children.length;t++)r.toggleClass(this.content.children[t],"jw-active-option",e===t);else r.toggleClass(this.el,"jw-off",0===e);var n;this.isHDMenu()&&this.list&&2<=this.list.length&&(n=this.list[e].label,r.getElementsByClassName("jw-hd-label",this.el)[0].innerHTML=n),this.isCCMenu()&&this.list&&2<=this.list.length&&this.list[e]&&(r.getElementsByClassName("jw-cc-label",this.el)[0].innerHTML=this.list[e].label),this.isPlayrateMenu()&&this.list&&this.list[e]&&(r.getElementsByClassName("jw-playrate-label",this.el)[0].innerHTML=this.list[e].label),this.isQualityChange()&&this.list&&2<=this.list.length&&(n=this.list[e].label,r.getElementsByClassName("jw-qualityChange-label",this.el)[0].innerText=n),this.isLangMenu()&&this.list&&2<=this.list.length&&(n=this.list[e].label,r.getElementsByClassName("jw-lang-label",this.el)[0].innerText=n)},reset:function(){r.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()},isHDMenu:function(){return r.hasClass(this.el,"jw-icon-hd")},isPlayrateMenu:function(){return r.hasClass(this.el,"jw-icon-playrate")},isCCMenu:function(){return r.hasClass(this.el,"jw-icon-cc")},isQualityChange:function(){return r.hasClass(this.el,"jw-icon-qualityChange")},isLangMenu:function(){return r.hasClass(this.el,"jw-icon-lang")},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}})}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <li class='jw-text jw-option jw-item-"+a("function"==typeof(n=null!=(n=o(n,"index")||r&&o(r,"index"))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:3,column:45},end:{line:3,column:55}}}):n)+" jw-reset'>"+a(e.lambda(null!=t?o(t,"label"):t,t))+"</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<ul class="jw-menu jw-background-color jw-reset">\n'+(null!=(n=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:4},end:{line:4,column:13}}}))?n:"")+"</ul>"},useData:!0})},function(e,t,n){n=[n(1),n(2),n(39),n(14),n(234)],t=function(r,a,e,o,t){return e.extend({setup:function(e,t,n,i){this.selectedIndex=t,this.playListTitle="播放列表",n&&i&&i[n]&&(this.lang=n,this.languages=i,this.setPlayListLang(e)),this.iconUI||(this.iconUI=new o(this.el,{useHover:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.onSelect.bind(this)),this.reset(),e=a.isArray(e)?e:[],r.toggleClass(this.el,"jw-hidden",e.length<2),2<=e.length&&(this.iconUI=new o(this.el,{useHover:!0}).on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener).on("click",this.toggleOpenStateListener),n=this.menuTemplate(e,t),i=r.createElement(n),this.addContent(i),this.contentUI=new o(this.content),this.contentUI.on("click tap",this.selectListener)),this.originalList=e},menuTemplate:function(e,i){e=a.map(e,function(e,t){var n="";return e.title&&(n=(e=r.createElement(e.title)).textContent||e.data),{active:t===i,label:t+1+".",title:n}});return t({title:this.playListTitle,list:e})},onSelect:function(e){var e=e.target;"UL"!==e.tagName&&("LI"!==e.tagName&&(e=e.parentElement),e=r.classList(e),e=a.find(e,function(e){return 0===e.indexOf("jw-item")}))&&(this.trigger("select",parseInt(e.split("-")[2])),this.closeTooltip())},selectItem:function(e){this.setup(this.originalList,e,this.lang,this.languages)},changeLang:function(e){this.lang=e,this.setup(this.originalList,this.selectedIndex,e,this.languages)},setPlayListLang:function(e){const t=this.lang,n=this.languages;t&&n[t]&&(e.forEach(e=>{e.lineTextKey&&n[t][e.lineTextKey]&&(e.title=n[t][e.lineTextKey]),e.sources&&e.sources.forEach(e=>{e.definitionTextKey&&n[t][e.definitionTextKey]&&(e.label=n[t][e.definitionTextKey])})}),e=n[t].PLAYLIST_TITLE)&&(this.playListTitle=e)},reset:function(){this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(n=a(n,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"active"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.program(4,r,0),data:r,loc:{start:{line:14,column:12},end:{line:24,column:19}}}))?n:""},2:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lambda,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <li class='jw-option jw-text jw-active-option jw-item-"+a("function"==typeof(n=null!=(n=s(n,"index")||r&&s(r,"index"))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:15,column:70},end:{line:15,column:80}}}):n)+' jw-reset\'>\n                    <span class="jw-label jw-reset"><span class="jw-icon jw-icon-play jw-reset"></span></span>\n                    <span class="jw-name jw-reset" title="'+a(o(null!=t?s(t,"title"):t,t))+'">'+a(o(null!=t?s(t,"title"):t,t))+"</span>\n                </li>\n"},4:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lambda,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <li class='jw-option jw-text jw-item-"+a("function"==typeof(n=null!=(n=s(n,"index")||r&&s(r,"index"))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:20,column:53},end:{line:20,column:63}}}):n)+' jw-reset\'>\n                    <span class="jw-label jw-reset">'+a(o(null!=t?s(t,"label"):t,t))+'</span>\n                    <span class="jw-name jw-reset" title="'+a(o(null!=t?s(t,"title"):t,t))+'">'+a(o(null!=t?s(t,"title"):t,t))+"</span>\n                </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-menu jw-playlist-container jw-background-color jw-reset">\n\n    <div class="jw-tooltip-title jw-reset">\n        <span class="jw-icon jw-icon-inline jw-icon-playlist jw-reset"></span>\n        <span class="jw-text jw-reset">'+e.escapeExpression(e.lambda(null!=t?a(t,"title"):t,t))+'</span>\n    </div>\n\n    <ul class="jw-playlist jw-reset">\n'+(null!=(n=a(n,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"list"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:13,column:8},end:{line:25,column:17}}}))?n:"")+"    </ul>\n</div>"},useData:!0})},function(e,t,n){n=[n(39),n(62),n(14),n(1)],t=function(n,i,r,a){return n.extend({constructor:function(e,t){this._model=e,n.call(this,t),this.volumeSlider=new i("jw-slider-volume jw-volume-tip","vertical"),this.addContent(this.volumeSlider.element()),this.addVolumeValueTip(),this.volumeSlider.on("update",function(e){this.trigger("update",e)},this),a.removeClass(this.el,"jw-hidden"),new r(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this)},toggleValue:function(){this.trigger("toggleValue")},addVolumeValueTip:function(){var e=document.createElement("div");e.className="jw-volume-value-tip",a.getElementsByClassName("jw-overlay",this.el)[0].appendChild(e),this.valuetip=e}})}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(39),n(1),n(2),n(14)],t=function(t,n,i,r){return t.extend({constructor:function(e){t.call(this,e),this.container.className="jw-overlay-horizontal jw-reset",this.openClass="jw-open-drawer",this.componentType="drawer"},setup:function(e,t){this.iconUI||(this.iconUI=new r(this.el,{useHover:!0,directSelect:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this)),this.reset(),e=i.isArray(e)?e:[],this.activeContents=i.filter(e,function(e){return e.isActive}),n.toggleClass(this.el,"jw-hidden",!t||this.activeContents.length<2),t&&1<this.activeContents.length&&(n.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener),i.each(e,function(e){this.container.appendChild(e.el)},this))},reset:function(){n.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){const c=n(50);n=[n(39),n(62),n(14),n(1),n(112)],void 0!==(t=function(a,o,s,l,u){return a.extend({constructor:function(e,t){var n,i="zh"==e.get("lang")||"en"==e.get("lang")?e.get("lang"):"zh";for(n in this.danmuLang=c.default[i].DANMU,this._model=e,a.call(this,t),this.initDanmuValue=JSON.parse(JSON.stringify(this._model.get("danmaku"))),this.addDanmTitleEle(),this.danmuEle={opacity:{slider:new o("jw-slider-opacityslider","horizontal",2),type:0,right:"",left:this.danmuLang.DANMUOPACITY,ID:"DANMUOPACITY"},area:{slider:new o("jw-slider-areaslider","horizontal",3),type:1,right:"",left:this.danmuLang.DANMUAREA,ID:"DANMUAREA"},speed:{slider:new o("jw-slider-speedslider","horizontal",3),type:2,right:"",left:this.danmuLang.DANMUSPEED,ID:"DANMUSPEED"},fontSize:{slider:new o("jw-slider-fontslider","horizontal"),type:3,right:null,left:this.danmuLang.DANMUFONT,ID:"DANMUFONT"}},null!=this.initDanmuValue.useMask&&(i={slider:new u(this.initDanmuValue.useMask),type:4,right:null,left:this.danmuLang.INTELLIGENTBLOCKING,ID:"INTELLIGENTBLOCKING"},this.danmuEle=Object.assign(this.danmuEle,{mark:i})),this.danmuEle){var r=this.danmuEle[n];this.addElement(r,n)}null!=this.initDanmuValue.useMask&&setTimeout(()=>{this.danmuEle.mark.slider.addEvent(),this.danmuEle.mark.slider.on("switch",e=>{this.trigger("switch",e)})},10),this.initDanSet(),l.removeClass(this.el,"jw-hidden"),new s(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this)},initDanSet(){var e=this.initDanmuValue.opacity||1,e=this.opacityContent(e),t=this.initDanmuValue.area||.5,t=this.areaContent(t),n=this.initDanmuValue.speed||1,n=this.speedContent(n),i=this.initDanmuValue&&this.initDanmuValue.fontSize?this.initDanmuValue.fontSize:24;return{oVal:e,aVal:t,sVal:n,fzVal:this.fontSizeContent(i)}},addElement(t,e){this.addVolumeValueTip(e);var n=document.createElement("div"),i=(n.className="jw-danmu-slider-left",n.innerHTML=t.left,n.id=t.ID,document.createElement("div"));i.innerHTML=t.right,i.id=t.ID,i.classList.add("jw-danmu-slider-right","jw-danmu-"+e),this.valuetip.appendChild(n),this.valuetip.appendChild(t.slider.element()),this.valuetip.appendChild(i),t.slider.on("update",function(e){this.setDanMuStyle(t.type,e.percentage)},this)},toggleValue:function(){this.openTooltip(),this.trigger("toggleValue")},setDanMuStyle(e,t){switch(e){case 0:var n=this.opacityContent(t/100);this.trigger("update",{val:n,type:e});break;case 1:n=this.areaContent(t/100);this.trigger("update",{val:n,type:e});break;case 2:n=this.speedContent(t/100);this.trigger("update",{val:n,type:e});break;case 3:n=parseInt(14*t/50);this.fontSizeContent(n),this.trigger("update",{val:n/24,type:e})}},opacityContent(t){var n=[{title:"0",percentage:0,value:.2,opacity:0},{title:"1 / 3",percentage:33,value:.4,opacity:.33},{title:"2 / 3",percentage:66,value:.7,opacity:.66},{title:"1",percentage:100,value:1,opacity:1}];let i=n[n.length-1];for(let e=0;e<n.length;e++)if(t<=n[e].value){i=n[e];break}return this.danmuEle.opacity.slider.render(i.percentage),setTimeout(()=>{document.getElementsByClassName("jw-danmu-opacity")[0].innerHTML=i.title},40),i.opacity},areaContent(t){var n=[{title:this.danmuLang.QUARTERSCREEN,percentage:25,value:.25,ID:"QUARTERSCREEN"},{title:this.danmuLang.HALFSCREEN,percentage:50,value:.5,ID:"HALFSCREEN"},{title:this.danmuLang.THREEQUARTERSCREEN,percentage:75,value:.75,ID:"THREEQUARTERSCREEN"},{title:this.danmuLang.FULLSCREEN,percentage:100,value:1,ID:"FULLSCREEN"}];let i=n[0];for(let e=0;e<n.length;e++)if(n[e].value>=t){i=n[e];break}return i=1<=+t?n[n.length-1]:i,this.danmuEle.area.slider.render(i.percentage),setTimeout(()=>{document.getElementsByClassName("jw-danmu-area")[0].innerHTML=i.title,document.getElementsByClassName("jw-danmu-area")[0].id=i.ID},40),i.value},fontSizeContent(e){let t=null,n=null;n=e<=12?(t=this.danmuLang.MINIMAL,"MINIMAL"):e<18?(t=this.danmuLang.MODERATE,"MODERATE"):(t=this.danmuLang.GREAT,"GREAT");var i;return this.danmuEle.fontSize.slider.render(100<(i=50*e/14)?100:i),setTimeout(()=>{document.getElementsByClassName("jw-danmu-fontSize")[0].innerHTML=t,document.getElementsByClassName("jw-danmu-fontSize")[0].id=n},40),e},speedContent(t){var n=[.25,.5,.75,1],i=[25,50,75,100];let r="",a="";for(let e=0;e<n.length;e++)if(t<=n[e]){r=n[e],a=i[e];break}return this.danmuEle.speed.slider.render(a),setTimeout(()=>{document.getElementsByClassName("jw-danmu-speed")[0].innerHTML=r},40),r},addDanmTitleEle(){var e=l.getElementsByClassName("jw-overlay",this.el)[0],t=document.createElement("div");t.innerHTML=`<div class="jw-danmu-title-wrap" id="DANMUSETTING">${this.danmuLang.DANMUSETTING}</div><div class="jw-danmu-reset" id="jw-danmu-reset">${this.danmuLang.RESET}</div>`,t.classList.add("jw-danmu-title"),e.appendChild(t),setTimeout(()=>{document.getElementById("jw-danmu-reset").addEventListener("click",()=>{var{oVal:e,aVal:t,sVal:n,fzVal:i}=this.initDanSet();this.trigger("update",{val:e,type:0}),this.trigger("update",{val:t,type:1}),this.trigger("update",{val:n,type:2}),this.trigger("update",{val:i/24,type:3})})})},addVolumeValueTip:function(e){var t=document.createElement("div");t.classList.add("jw-danmu-container",e),l.getElementsByClassName("jw-overlay",this.el)[0].appendChild(t),this.valuetip=t},changeLang:function(e){for(var t in this.danmuLang=c.default[e].DANMU,this.danmuLang){var n=document.getElementById(t);n&&(n.innerHTML=this.danmuLang[t]),"RESET"===t&&(document.getElementById("jw-danmu-reset").innerHTML=this.danmuLang[t])}}})}.apply(t,n))&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-switch">\n    <input class="jw-switch-checkbox" id="onoffswitch" type="checkbox">\n    <label class="jw-switch-label" for="onoffswitch">\n        <span class="jw-switch-inner"></span>\n        <span class="jw-switch-switch"></span>\n    </label>\n</div>'},useData:!0})},function(e,t,n){n=[n(2),n(1)],t=function(i,s){function e(e){(this.model=e).on("change:playlistItem",n,this),e.on("change:mediaModel",t,this)}function t(n,e){e.off("change:mediaType",null,this),e.on("change:mediaType",function(e,t){"audio"===t&&this.setImage(n.get("playlistItem").image)},this)}function n(e,n){e.get("autostart")&&!s.isMobile()||0<e.get("item")?(this.setImage(null),e.off("change:state",null,this),e.on("change:state",function(e,t){"complete"!==t&&"idle"!==t&&"error"!==t||this.setImage(n.image)},this)):this.setImage(n.image)}return i.extend(e.prototype,{setup:function(e){this.el=e;e=this.model.get("playlistItem");e&&this.setImage(e.image)},setImage:function(e){var t=this.image,n=(t&&(t.onload=null,this.image=null),this.model.off("change:state",null,this),"");i.isString(e)&&(n='url("'+e+'")',(t=this.image=new Image).src=e),s.isPoorIE()?this.el.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'",sizingMethod="scale"':s.style(this.el,{backgroundImage:n})},resize:function(e,t,n){if("uniform"===n){var i,r=e/t,a=this.image,o=null;if(a){if(0===a.width)return i=this,void(a.onload=function(){i.resize(e,t,n)});a=a.width/a.height;Math.abs(r-a)<.09&&(o="cover")}s.style(this.el,{backgroundSize:o})}},element:function(){return this.el}}),e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(241),n(1),n(2),n(14),n(33)],t=function(n,o,s,e,l){function t(e,t){this.model=e,this.api=t,this.imageUrl="",this.setup(),this.isHide=!0,this.startAdvPlayed=!1,this.timer=null}return s.extend(t.prototype,{setup:function(){var e=n(),t=(this.el=o.createElement(e),this),e=o.isMobile()?"touchstart":"click";o.addEventListener(this.el,e,function(){window.open(t.imageUrl)},!1)},loadAdv:function(e){var t,n,i,r,a=this.model.get("imageAdvs");a&&a[e]&&a[e].image&&(n=a[e].image,r=o.getElementsByClassName("jw-media",this.api.getContainer())[0],t=this,i={display:"block","z-index":1e3,width:"100%",height:"100%",top:0,left:0},s.isString(n)?(n=encodeURI(n),i.backgroundImage='url("'+n+'")'):i.backgroundImage="","end"===e&&(i["z-index"]=0),"pause"===e&&(n=r?r.clientHeight:this.model.get("height"),r=r?r.clientWidth:this.model.get("width"),i.width="400px",i.height="300px",i.top=(n-300)/2,i.left=(r-400)/2),l.style(this.el,i),n=o.getElementsByClassName("adv-close",this.el)[0],r=o.getElementsByClassName("adv-countdown",this.el)[0],n.style.display="none",r.style.display="none","start"===e&&(i=a[e].time<=60?a[e].time:60,r.style.display="block",r.innerHTML="广告: "+i+"秒"),"pause"===e&&(r=o.isMobile()?"touchstart":"click",n.addEventListener(r,function(e){e.cancelBubble=!0,e.stopPropagation(),e.preventDefault(),t.el.style.display="none"},!1),n.style.display="block"),this.imageUrl=a[e].url,this.element()&&this.api.getContainer().replaceChild(this.el,this.element()),this.isHide=!1)},beginStartAdv:function(){var e,t,n,i;this.startAdvPlayed?this.model.loadVideo():(e=this.model.get("imageAdvs").start,this.loadAdv("start"),t=e.time<=60?e.time:60,n=this.element(),(i=this).timer=setInterval(function(){var e;0<--t?(e="广告: "+t+"秒",o.getElementsByClassName("adv-countdown",n)[0].innerHTML=e):(clearInterval(i.timer),n.style.display="none",i.isHide=!0,i.startAdvPlayed=!0,i.model.loadVideo())},1e3))},element:function(){var e=this.api.getContainer();return 0<o.getElementsByClassName("jw-adv",e).length?o.getElementsByClassName("jw-adv",e)[0]:this.el},isHidden:function(){return this.isHide},hide:function(){this.isHide=!0,this.element().style.display="none"},resizePauseAdv:function(e,t){l.style(this.element(),{top:(t-300)/2,left:(e-400)/2})},destroy:function(){this.timer&&clearInterval(this.timer),this.timer=null}}),t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-adv jw-reset">\n    <div class="adv-countdown"></div>\n    <div class="adv-close">X</div>\n</div>'},useData:!0})},function(e,t,n){n=[n(1),n(2),n(33)],t=function(r,e,a){function t(e,t){this.model=e,this.element=t,this.times=0,this.init()}return e.extend(t.prototype,{init:function(){if(r.isMSIE(9))return a.style(this.element,{display:"none"}),!1;var e=this.model.get("marquee").text,t=this.model.get("marquee").color,n=this.model.get("marquee").fontSize;e&&(this.element.innerHTML=e),t&&a.style(this.element,{color:t}),n&&a.style(this.element,{fontSize:n,lineHeight:n+8}),this.reset()},start:function(){if(r.isMSIE(9))return!1;a.style(this.element,{animationPlayState:"running",opacity:1,display:"block"})},stop:function(){this.reset(),a.style(this.element,{animationPlayState:"paused",opacity:0,display:"none"})},pause:function(){"running"===this.element.style.animationPlayState&&a.style(this.element,{animationPlayState:"paused"}),a.style(this.element,{opacity:0})},reset:function(e,t){e=e||this.model.get("width"),t=t||this.model.get("height");var n=this.element,e=this.times%2==0?"marquee1":"marquee2",i=this;a.animation(n,e+" 18s infinite"),this.randomTop(n,t),r.addEventListener(n,"webkitAnimationIteration",function(){i.randomTop(n,t)},!1),r.addEventListener(n,"animationiteration",function(){i.randomTop(n,t)},!1),this.times++},randomTop:function(){var e=0;this.model.get("containerHeight")&&(e=this.model.get("containerHeight")),a.style(this.element,{top:100<(e=e)?30+Math.random()*(e-100):e/2})}}),t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(244),n(2),n(14),n(34)],t=function(r,t,i,e,a){function n(){}return i.extend(n.prototype,{buildArray:function(){var e=a.split("+")[0],t={items:[]},n=this.model.get("rightclick"),n=(n&&i.isArray(n)&&0<n.length?i.each(n,function(e){t.items.push({title:e.title,link:e.link})}):t.items.push({title:"About Cyber Player "+e,link:"https://bce.baidu.com/doc/MCT/Web-SDK.html#.E6.92.AD.E6.94.BE.E5.99.A8.20Web.20SDK.20.E7.AE.80.E4.BB.8B"}),this.model.get("provider"));return n&&0<=n.name.indexOf("flash")&&(e="Flash Version "+r.flashVersion(),t.items.push({title:e,link:"http://www.adobe.com/software/flash/about/"})),t},buildMenu:function(){var e=this.buildArray();return r.createElement(t(e))},updateHtml:function(){this.el.innerHTML=this.buildMenu().innerHTML},rightClick:function(e){return this.lazySetup(),this.mouseOverContext||(this.hideMenu(),this.showMenu(e)),!1},getOffset:function(e){var t=e.target,n=e.layerX||e.offsetX,i=e.layerY||e.offsetY;if(r.isIE()&&(r.hasClass(t,"jw-video")||r.hasClass(t,"jw-warning")))return{x:n,y:i+40};for(;t!==this.playerElement;)n+=t.offsetLeft,i+=t.offsetTop,t=t.parentNode;return{x:n=n<=this.playerElement.clientWidth?n:this.playerElement.clientWidth,y:i=i<=this.playerElement.clientHeight?i:this.playerElement.clientHeight}},showMenu:function(e){e=this.getOffset(e);return this.el.style.left=e.x+"px",this.el.style.top=e.y+"px",r.addClass(this.playerElement,"jw-flag-rightclick-open"),r.addClass(this.el,"jw-open"),!1},hideMenu:function(){this.mouseOverContext||(r.removeClass(this.playerElement,"jw-flag-rightclick-open"),r.removeClass(this.el,"jw-open"))},lazySetup:function(){this.el||(this.el=this.buildMenu(),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.model.on("change:provider",this.updateHtml,this),this.elementUI=new e(this.el,{useHover:!0}).on("over",function(){this.mouseOverContext=!0},this).on("out",function(){this.mouseOverContext=!1},this))},setup:function(e,t,n){this.playerElement=t,this.model=e,this.mouseOverContext=!1,this.layer=n,r.isPoorIE()||(t.oncontextmenu=this.rightClick.bind(this))},addOffListener:function(e){r.addEventListener(e,"mousedown",this.hideMenuHandler),r.addEventListener(e,"touchstart",this.hideMenuHandler),r.addEventListener(e,"pointerdown",this.hideMenuHandler)},removeOffListener:function(e){r.removeEventListener(e,"mousedown",this.hideMenuHandler),r.removeEventListener(e,"touchstart",this.hideMenuHandler),r.removeEventListener(e,"pointerdown",this.hideMenuHandler)},destroy:function(){this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model.off("change:provider",this.updateHtml),this.model=null)}}),n}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li class="jw-reset'+(null!=(a=c(n,"if").call(s,null!=t?c(t,"featured"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:27},end:{line:4,column:62}}}))?a:"")+'">\n            <a href="'+u("function"==typeof(o=null!=(o=c(n,"link")||(null!=t?c(t,"link"):t))?o:l)?o.call(s,{name:"link",hash:{},data:r,loc:{start:{line:5,column:21},end:{line:5,column:29}}}):o)+'" class="jw-reset" target="_blank">\n'+(null!=(a=c(n,"if").call(s,null!=t?c(t,"showLogo"):t,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:16},end:{line:8,column:23}}}))?a:"")+"                "+u("function"==typeof(o=null!=(o=c(n,"title")||(null!=t?c(t,"title"):t))?o:l)?o.call(s,{name:"title",hash:{},data:r,loc:{start:{line:9,column:16},end:{line:9,column:25}}}):o)+"\n            </a>\n        </li>\n"},2:function(e,t,n,i,r){return" jw-featured"},4:function(e,t,n,i,r){return'                <span class="jw-icon jw-rightclick-logo jw-reset"></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-rightclick jw-reset">\n    <ul class="jw-reset">\n'+(null!=(n=a(n,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"items"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:4},end:{line:12,column:13}}}))?n:"")+"    </ul>\n</div>"},useData:!0})},function(e,t,n){n=[n(2),n(1)],t=function(e,o){function t(e){this.model=e,this.model.on("change:playlistItem",this.playlistItem,this)}return e.extend(t.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(e){this.el=e;e=this.el.getElementsByTagName("div");this.title=e[0],this.description=e[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(e){var t,n={paddingLeft:0,paddingRight:0},i=e.get("controls"),r=e.get("dock"),a=e.get("logo");a&&(t=+(""+a.margin).replace("px",""),e=e.get("logoWidth")+(isNaN(t)?0:t),"top-left"===a.position?n.paddingLeft=e:"top-right"===a.position&&(n.paddingRight=e)),i&&r&&r.length&&(t=56*r.length,n.paddingRight=Math.max(n.paddingRight,t)),o.style(this.el,n)},playlistItem:function(e,t){var n,i;e.get("displaytitle")||e.get("displaydescription")?(i=n="",t.title&&e.get("displaytitle")&&(n=t.title),t.description&&e.get("displaydescription")&&(i=t.description),this.updateText(n,i)):this.hide()},updateText:function(e,t){this.title.innerHTML=e,this.description.innerHTML=t,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(247),n(2),n(16),n(6)],t=function(i,n,e,r){function t(e){return!e||"string"==typeof e&&("#fff"===(e=e.toLowerCase())||"#ffffff"===e)}function a(){return{disabled:!1,blocked:[],fontSize:24,fontSizeScale:1,opacity:1,speed:1,area:.5,bottomUp:!1,colors:["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#CC0273","#222222","#FFFFFF"],duration:5,items:[],zIndex:5,maxPerinsert:20,poolSize:50,useMask:!1,isDefaultColor:t,discard(e){return!1}}}function o(e,t){this.el,this.opts,this.enabled=!1,this.paused=!1,this.track=0,this.trackHeight=0,this.timer,this._bulletPool=[],this._aliveBullets=new Set,this._scrollBullets=[],this._topBullets=[],this._bottomBullets=[],this._items=[],this._pos=0,this._prevPauseTime=0,this.opts=n.extend(a(),t.get("danmaku")),this.playerEl=e,this._model=t,this._init(),this.opacityStyleObj={0:{class:"jw-danmaku-opacity-4",value:"0"},1:{class:"jw-danmaku-opacity-1",value:"1"},.33:{class:"jw-danmaku-opacity-3",value:"0.33"},.66:{class:"jw-danmaku-opacity-2",value:"0.66"}},this.curOpacityStyleObj=null}return n.extend(o.prototype,{_init:function(){var e=document.createElement("div");e.classList.add("jw-danmaku"),this.el=this.playerEl.appendChild(e),this.el.style.zIndex=String(this.opts.zIndex),this.el.style.opacity=this.opts.opacity,this._items=Array.isArray(this.opts.items)?this.opts.items:[],this.timer={_prevPauseTime:0,_pausedTime:0,_paused:!1,now(){return((this._paused?this._prevPauseTime:Date.now())-this._pausedTime)/1e3},play(){this._paused&&(this._pausedTime+=Date.now()-this._prevPauseTime,this._paused=!1)},pause(){this._paused||(this._prevPauseTime=Date.now(),this._paused=!0)}},this.opts.disabled||this.enable(),setTimeout(()=>{this._updateTrack()})},getWidth(){return this.playerEl.getBoundingClientRect().width},getCurrentTime(){return this._model.get("position")},getPlaybackRate(){return this._model.get("playbackRate")},getFontSize(){return this.opts.fontSize*this.opts.fontSizeScale},getSpeedScale(){return this.getPlaybackRate()*this.opts.speed},getDuration(){return this._model.get("duration")},getItems(){return this._items},isPlaying(){return this._model.get("state")===e.PLAYING},_createBullet(e,t){let n=this._bulletPool.pop();return n?n.init(e,t):n=new i(this.el,this,e,t),this._aliveBullets.add(n),n},_unmountBullet(e){e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el)},_getShortestTrack(){let n=this._scrollBullets[0];if(!n||n.ended)return[0];for(let e=1,t;e<this.track;++e){if(!(t=this._scrollBullets[e])||t.ended)return[e];n.showAt>t.showAt&&(n=t)}return[n.track,n]},_getEmptyTrack(t,n){for(let e=0;e<this.track;++e)if(!n[e]||n[e]<=t)return e;return-1},_shouldDiscard(e){return!(!this.opts.blocked.includes(e.type||"scroll")&&!this.opts.discard(e)&&(!e.color||!this.opts.blocked.includes("color")||this.opts.isDefaultColor(e.color)))},_fire(){if(this.enabled&&this.isPlaying){this.paused&&this.start();var e=this.getCurrentTime(),n=e-.5,i=e+.5,r=this.timer.now(),a=this._items.length,o=this.opts.maxPerinsert;for(let e=0,t;this._pos<a;this._pos++)if(!((t=this._items[this._pos]).time<n)){if(t.time>i)break;if(!this._shouldDiscard(t)){if(!this._insert(t,r))break;if(++e>o)break}}}},_updateTrack(){var e=this.playerEl.getBoundingClientRect().height;this.trackHeight=this.getFontSize()+5,this.track=Math.floor(e*this.opts.area/this.trackHeight)},_handleSeeked(){this.clearScreen(),this._pos=0},_handleAddMask(t){if(this.opts.useMask){let e=(new TextDecoder).decode(t.data);e=(e=e.replaceAll("\n"," ")).replaceAll("#","%23"),this.el.setAttribute("style",e?`-webkit-mask-image: url('data:image/svg+xml;utf8,${e}')`:"")}},_handleSeekStart(){this.el.setAttribute("style","")},_clearMask(){this.el.setAttribute("style","")},_insert(e,t){if(!e.type||"scroll"===e.type){const[i,r]=this._getShortestTrack();var n=!e.force&&r&&r.showAt>t+2;return n?!1:(this._scrollBullets[i]=this._createBullet(e,{track:i,prev:n?void 0:r}),!0)}n="top"===e.type?this._topBullets:this._bottomBullets;let i=this._getEmptyTrack(t,n);return-1!==(i=-1===i&&e.force?0:i)&&(n[i]=this._createBullet(e,{track:i}).endAt,!0)},recycleBullet(e){this._bulletPool.length>this.opts.poolSize?this._unmountBullet(e):this._bulletPool.push(e),this._aliveBullets.delete(e),"scroll"===e.type&&this._scrollBullets[e.track]===e&&(this._scrollBullets[e.track]=void 0)},send(e){var t;this.enabled&&(void 0===e.time&&(e.time=this.getCurrentTime()),e=n.extend({isMe:!0,force:!0},e),t=this.addItem(e),this._model.mediaController.trigger(r.JWPLAYER_DANMAKU_SEND,{data:e}),this._pos>t)&&this._insert(e,this.timer.now())},start(){this.isPlaying&&(this.timer.play(),this._aliveBullets.forEach(e=>e.run(this._prevPauseTime)),this.paused=!1,this.getCurrentTime()>=this.getDuration())&&(this._handleSeeked(),this._clearMask())},pause(){this._prevPauseTime=this.timer.now(),this.timer.pause(),this._aliveBullets.forEach(e=>e.pause(this._prevPauseTime)),this.paused=!0},addItem(t){if(null==t.time)return-1;var n=this._items.length;if(!n||t.time>=this._items[n-1].time)return this._items.push(t),n;if(t.time<=this._items[0].time)return this._items.unshift(t),0;let i=0;for(let e=0;e<n;e++)if(this._items[e].time>t.time){i=1;break}return this._items.splice(i,0,t),i},appendItems(e){this._items=this._items.concat(e)},resetItems(e){this._items=e,this._pos=0},updateOpacity(e=this.opts.opacity){this.curOpacityStyleObj&&this.el.classList.remove(this.curOpacityStyleObj.class),this.curOpacityStyleObj=this.opacityStyleObj[String(e)],this.el.classList.add(this.curOpacityStyleObj.class),this.el.style.opacity=String(e)},updateFontSize(e=this.opts.fontSizeScale){this.opts.fontSizeScale=e,this._updateTrack()},updateArea(e){[.25,.5,.75,1].includes(e)&&(this.opts.area=e,this._updateTrack())},updateBottomUp(t){this.opts.bottomUp=t,this._aliveBullets.forEach(e=>e.updateScrollY(t))},updateSpeed(e){this.opts.speed=e},resetOptions(){this.opts=n.extend(a(),this._model.get("danmaku")),this.updateOpacity(),this.updateFontsize(),this.updateBottomUp(this.opts.bottomUp)},clearScreen(){Array.from(this._aliveBullets).forEach(e=>e.end()),this._topBullets=[],this._bottomBullets=[]},enable(){this.enabled||(this.enabled=!0,this._model&&(this._model.mediaController.on("seek",this._handleSeeked,this),this._model.mediaController.on("sei_info",this._handleAddMask,this),this._model.mediaController.on("seekStart",this._handleSeekStart,this),this._model.on("change:position",this._fire,this)))},disable(){this.enabled=!1,this.clearScreen(),this._model&&(this._model.mediaController.off("seek",this._handleSeeked,this),this._model.mediaController.off("sei_info",this._handleAddMask,this),this._model.mediaController.off("seekStart",this._handleSeekStart,this),this._model.off("change:position",this._fire,this))},dispose(){this.disable(),this._bulletPool=null,this._aliveBullets=null,this._scrollBullets=null,this._topBullets=null,this._bottomBullets=null,this._items=null,this.el=null,this.opts=null},updateUseMask(e){(this.opts.useMask=e)||this.el.setAttribute("style","")}}),o}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){const r="jw-danmaku-item";function t(e,t,n,i){this.el=e.appendChild(document.createElement("div")),this.container=e,this.el.className=r,this.type="scroll",this.left=0,this.width=0,this.length=0,this.showAt=0,this.startAt=0,this.endAt=0,this.speed=0,this.track=0,this.ended=!1,this.color="",this.danmaku=t,this.end=this.end.bind(this),this.init(n,i)}return e.extend(t.prototype,{init(e,t){this.el.textContent=e.text,this.type=e.type||"scroll",this.track=t.track,e.color&&(this.el.style.color=this.color=e.color),e.isMe&&this.el.classList.add("jw-danmaku-item-me");var n,i,e=this.el.style;return e.fontSize=this.danmaku.getFontSize()+"px",this.startAt=this.danmaku.timer.now(),"scroll"===this.type?(this.el.addEventListener("transitionend",this.end),n=this.el.getBoundingClientRect(),this.width=n.width+20,n=this.danmaku.getWidth(),t=t.prev,this.left=n,this.speed=this.danmaku.getSpeedScale()*(n+this.width)/this.danmaku.opts.duration,t&&!t.ended&&(0<=(i=t.length-n-(this.startAt-t.startAt)*t.speed)?(this.speed=t.speed,this.left+=i):(i=this.danmaku.getWidth()/(t.endAt-this.startAt),this.speed>i&&(this.speed=i))),this.length=this.left+this.width,t=this.length/this.speed,this.showAt=this.startAt+(this.length-n)/this.speed,this.endAt=this.startAt+t,this.updateScrollY(),e.left=this.left+"px",e.transition=`transform ${t}s linear`,e.transform=`translate3d(-${this.length}px,0,0)`):(e[this.type]=this._pos(),this.el.classList.add("jw-danmaku-item-center"),i=this.danmaku.getSpeedScale()*this.danmaku.opts.duration,this.endAt=this.startAt+i,this.centerTimer=setTimeout(this.end.bind(this),1e3*i)),this.ended=!1,this.show(),this.danmaku.paused&&this.pause(this.startAt),this},_pos(){return this.track*this.danmaku.trackHeight+2+"px"},updateScrollY(e=this.danmaku.opts.bottomUp){var t;"scroll"===this.type&&((t=this.el.style).top=t.bottom="",t[e?"bottom":"top"]=this._pos())},end(){this.el.removeEventListener("transitionend",this.end),clearTimeout(this.centerTimer),this.el.style.cssText="",this.color="",this.el.className=r,this.ended=!0,this.hide(),this.danmaku.recycleBullet(this)},show(){this.el.style.visibility=""},hide(){this.el&&this.container.contains(this.el)&&this.container.removeChild(this.el)},pause(e){var t;"scroll"===this.type?((t=this.el.style).transition="transform 0s linear",t.transform=`translate3d(-${(e-this.startAt)*this.speed}px,0,0)`):clearTimeout(this.centerTimer)},run(e){var t;"scroll"===this.type?((t=this.el.style).transition=`transform ${this.endAt-e}s linear`,t.transform=`translate3d(-${this.length}px,0,0)`):this.centerTimer=setTimeout(this.end.bind(this),1e3*(this.endAt-e))}}),t}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="'+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"id")||(null!=t?a(t,"id"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:r,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):n)+'" class="jwplayer jw-reset" tabindex="0">\n    <div class="jw-aspect jw-reset"></div>\n    <div class="jw-media jw-reset"></div>\n    <div class="jw-preview jw-reset"></div>\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset"></div>\n        <div class="jw-title-secondary jw-reset"></div>\n    </div>\n    <div class="jw-overlays jw-reset"></div>\n    <div class="jw-controls jw-reset"></div>\n    <div class="jw-warning jw-reset">\n        用户鉴权失败，请先<a target="_blank" href="http://bce.baidu.com">注册</a>成为百度智能云用户\n    </div>\n    <div class="jw-marquee">百度云</div>\n</div>'},useData:!0})},function(e,t,n){const r=n(50);n=[n(1),n(250)],void 0!==(t=function(n,i){return function(e){var t,e="zh"==e.get("lang")||"en"==e.get("lang")?e.get("lang"):"zh";return this.performanceLang=r.default[e].PERFORMANCE,this.container=null,this.setup=function(e){this.container=e,t=n.createElement(i(this.performanceLang)),e.appendChild(t)},this.setData=e=>{for(var t in e){var n=document.getElementById("performance-"+t);n&&(n.innerText=e[t])}},this.changeLang=function(e){this.performanceLang=r.default[e].PERFORMANCE,this.reset(),this.setup(this.container)},this.reset=function(){this.container.removeChild(t),t=null},this.destroy=function(){this.reset(),this.container=null},this}}.apply(t,n))&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lambda,o=e.escapeExpression,e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul id="performance-info" class="performance-info  jw-reset">\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"FORMAT"):t,t))+'</span>\n        <span id="performance-playStyle"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"DECODEEFFICIENCY"):t,t))+'</span>\n        <span>\n             <span id="performance-decodeFrameRate"></span>\n             frames/s\n        </span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"DECODECONSUMPTION"):t,t))+'</span>\n        <span>\n             <span id="performance-decodeTime"></span>\n             ms\n        </span>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"FPS"):t,t))+'</span>\n        <span id="performance-frameRate"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"RESOLUTION"):t,t))+'</span>\n        <span id="performance-resolution">\n            <span id="performance-width"></span>\n            &nbsp; * &nbsp;\n            <span id="performance-height"></span>\n        </span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"ENCODETYPE"):t,t))+'</span>\n        <span id="performance-code"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"BUFFEREND"):t,t))+'</span>\n        <span id="performance-buffer"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"FIRSETIME"):t,t))+'</span>\n        <span id="performance-firstFrameTime"></span>\n    </li>\n</ul>'},useData:!0})},function(e,t,n){n=[n(1)],t=function(i){return class{constructor(e,t,n){this.watermarkOptions=Object.assign({},this.defaultConfig(),e.get("watermark")),this.isLeftToRight=!0,this.isTopToBottom=!0,this.watermarkEle=null,this.contentEle=null,this.playerId=n,this.container=t,this.undateChild(),this.timer=null,this.updateStyle()}getTag(){return{container:this.playerId+"-jw-watermark-container jw-watermark-container",content:this.playerId+"-jw-watermark-content jw-watermark-content"}}defaultConfig(){return{type:"text",speed:0,content:"",opacity:.5,"font-size":"12px",color:"#bdbdbd",left:"0%",top:"70%",rotate:"30deg"}}render(){return`<div class="${this.getTag().container}" >${this.renderContent()}</div>`}renderContent(){var{type:e,content:t}=this.watermarkOptions;return"image"==e?`<img class="${this.getTag().content}" style=${this.setStyle()} src=${this.setImage(t)} />`:`<div class="${this.getTag().content}" style=${this.setStyle()}>${t}</div>`}setImage(e){return 0==e.indexOf("http")?e:0==e.indexOf("://")?document.location.protocol+e:0==e.indexOf("//")?document.location.protocol+":"+e:document.location.protocol+"://"+e}setStyle(){let{left:e,top:t,rotate:n,speed:i,width:r}=this.watermarkOptions;if(0<i&&this.contentEle){var{offsetLeft:a,clientWidth:o,clientHeight:s,offsetTop:l}=this.contentEle;const r=this.watermarkEle.clientWidth,f=this.watermarkEle.clientHeight;var u,c=Math.abs(o/2*Math.sin(parseFloat(n)*(2*Math.PI/360)));e.includes("px")&&(e=parseFloat(e)/r*100),t.includes("px")&&(t=parseFloat(t)/f*100),parseFloat(e)<100&&0<=parseFloat(e)&&this.isLeftToRight&&a+o<r||parseFloat(e)<=0?(r-o<(a=parseFloat(e)+ +i)/100*r?(u=parseInt((r-o)/r*100),this.isLeftToRight=!1):(u=a,this.isLeftToRight=!0),this.watermarkOptions.left=e=u+"%"):(this.watermarkOptions.left=e=parseFloat(e)-+i+"%",this.isLeftToRight=!1),parseFloat(t)<100&&0<=parseFloat(t)&&this.isTopToBottom&&l+s+c<f||parseFloat(t)<=0?(a=f<(o=parseFloat(t)+ +i)/100*f+s?parseFloat((f-s)/f*100):o,this.watermarkOptions.top=t=a+"%",this.isTopToBottom=!0):0<l-c?(this.watermarkOptions.top=t=parseFloat(t)-+i+"%",this.isTopToBottom=!1):this.isTopToBottom=!0}let h="";for(var d in this.watermarkOptions)this.watermarkOptions[d]&&"type"!=d&&"content"!=d&&(h+=`${d}:${this.watermarkOptions[d]};`);return h}updateStyle(){this.timer&&clearInterval(this.timer),this.timer=null,this.timer=setInterval(()=>{this.undateChild()},50)}undateChild(){var e,t,n;this.watermarkOptions.content&&(e=document.getElementsByClassName(this.getTag().container),0==(t=document.getElementsByClassName(this.getTag().content)).length&&0!=e.length&&(this.contentEle=i.createElement(this.renderContent()),e[0].appendChild(this.contentEle)),0!=t.length&&(this.contentEle=t[0],t[0].style=this.setStyle(),n=this.watermarkOptions["textShadow"],n)&&(t[0].style.textShadow=n),0==e.length)&&(this.watermarkEle=i.createElement(this.render()),this.container.appendChild(this.watermarkEle))}setWatermarkOptions(e){e&&e.content&&e.content!=this.watermarkOptions.content&&this.watermarkEle.removeChild(this.contentEle),this.watermarkOptions=Object.assign(this.watermarkOptions,e)}destroy(){this.timer&&clearInterval(this.timer),this.timer=null,this.container&&this.container.removeChild(this.watermarkEle)}}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(63),n(253),n(1)],t=function(e,t,n){return e.extend({constructor:function(e,t){this.config=e,this.className=t,this.container=null,this.closeIconEl=null},setup:function(e){this.container=e,this.el=n.createElement(t(this.config)),this.el.classList.add(this.className),this.container.appendChild(this.el),this.addEvent(),this.config&&this.config.timeout&&setTimeout(function(){this.destroy()}.bind(this),this.config.timeout)},addEvent:function(){var e="closeToastTips-"+this.config.playerId;this.closeIconEl=document.getElementById(e),this.closeIconEl&&this.closeIconEl.addEventListener("click",this.destroy.bind(this))},element:function(){return this.el},destroy:function(){try{this.container&&(this.container.removeChild(this.el),this.el=null,this.closeIconEl&&this.closeIconEl.removeEventListener("click",this.destroy),this.classList=null)}catch(e){}}})}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-toast">\n  <p>'+a(e.lambda(null!=t?o(t,"text"):t,t))+'&nbsp;&nbsp;</p>\n  <span\n    class="jw-icon jw-icon-close-small"\n    id="closeToastTips-'+a("function"==typeof(a=null!=(a=o(n,"playerId")||(null!=t?o(t,"playerId"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"playerId",hash:{},data:r,loc:{start:{line:5,column:23},end:{line:5,column:35}}}):a)+'"\n  ></span>\n</div>\n'},useData:!0})},function(e,t,n){n=[n(255)],t=function(r){return function(e,t,n,i){return r({id:e,skin:t,title:n,body:i})}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13);e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,u="function",c=e.escapeExpression,e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="'+c(typeof(o=null!=(o=e(n,"id")||(null!=t?e(t,"id"):t))?o:l)==u?o.call(s,{name:"id",hash:{},data:r,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):o)+'"class="jw-skin-'+c(typeof(o=null!=(o=e(n,"skin")||(null!=t?e(t,"skin"):t))?o:l)==u?o.call(s,{name:"skin",hash:{},data:r,loc:{start:{line:1,column:31},end:{line:1,column:39}}}):o)+' jw-error jw-reset">\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset">'+(null!=(a=typeof(o=null!=(o=e(n,"title")||(null!=t?e(t,"title"):t))?o:l)==u?o.call(s,{name:"title",hash:{},data:r,loc:{start:{line:3,column:47},end:{line:3,column:58}}}):o)?a:"")+'</div>\n        <div class="jw-title-secondary jw-reset">'+c(typeof(o=null!=(o=e(n,"body")||(null!=t?e(t,"body"):t))?o:l)==u?o.call(s,{name:"body",hash:{},data:r,loc:{start:{line:4,column:49},end:{line:4,column:57}}}):o)+'</div>\n    </div>\n\n    <div class="jw-error-icon-container  jw-reset">\n        <div class="jw-error-display-icon-container  jw-background-color jw-reset">\n            <div class="jw-icon jw-error-icon-display jw-reset"></div>\n        </div>\n    </div>\n</div>\n\n'},useData:!0})},function(e,t,n){n=[n(97),n(34),n(99)],t=function(e,t){var h,d,n,f,p={},i=document.getElementsByTagName("script")[0].parentNode,m=(window.__LOG_API__,0),g=0,_=!1,y=(new Date).getTime()+"",v=!1;function E(e){var t=new Date,n=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),t=t.getMilliseconds(),n=n+"-"+(i<10?"0"+i:i)+"-"+(r<10?"0"+r:r)+" "+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+":"+(s<10?"0"+s:s);return n=e?n+"."+t:n}function A(){return{flashVersion:e.flashVersion(),cyberPlayerVersion:t,ak:d.ak||"",provider:h.get("provider")?h.get("provider").name:"",config:""}}function b(e){var t;v||(t=e.action,delete e.action,e.sendTime=E(),e=function(e){var t,n=[];for(t in e)"object"==typeof e[t]?n.push(t+"="+encodeURIComponent(JSON.stringify(e[t]))):n.push(t+"="+e[t]);return n.join("&")}(e),n&&i.removeChild(n),(n=document.createElement("script")).setAttribute("type","text/javascript"),n.src=__LOG_API__+"/v1/sdk-player"+t+"?"+e,i.insertBefore(n,i.getElementsByTagName("script")[0]))}return function(e,t){if(d=(h=t).getConfiguration(),__DEBUG__||!1===d.withLog)return!1;var n,i,r,a,o,s=0,l=(new Promise(t=>{fetch(__LOG_API__,{method:"get",mode:"no-cors"}).then(function(e){t(!1)}).catch(function(e){t(!0)})}).then(e=>{v=e}),e.on("meta",function(e){for(var t in e.metadata)p[t]=e.metadata[t];p.cdn_ip&&b({action:"/user/web/cdn",url:h.get("file")||h.getCurrentItem().file,cdn:p.cdn_ip})}),e.on("beforePlay",function(){_=v=!1,n=setInterval(function(){s+=100},100)}),e.on("play",function(){_?(clearInterval(n),n=null):(n&&(b({action:"/media/web/available",videoUrl:h.get("file")||h.getCurrentItem().file,type:"play",duration:s,time:E(!0),sessionTime:y,env:A()}),clearInterval(n),n=null),g=h.get("position"),b({action:"/user/web/play",videoUrl:h.get("file")||h.getCurrentItem().file,videoHeight:encodeURIComponent(p.height)||"",videoWidth:encodeURIComponent(p.width)||"",playerHeight:encodeURIComponent(d.height),playerWidth:encodeURIComponent(d.width),duration:p.duration||"",size:p.filesize||"",startPosition:h.get("position"),service:0<this.getDuration()?"vod":"lss",time:E(!0),sessionTime:y,env:A()}),_=!0,f||(f=setInterval(function(){b({action:"/user/web/count",session:y,url:h.get("file")||h.getCurrentItem().file})},6e4),b({action:"/user/web/count",session:y,url:h.get("file")||h.getCurrentItem().file})))}),e.on("seek",function(e){m+=e.position-g,g=e.offset,b({action:"/user/web/seek",videoUrl:h.get("file")||h.getCurrentItem().file,from:e.position,to:e.offset,time:E(!0),sessionTime:y,env:A()})}),e.on("pause",function(){m+=h.get("position")-g,b({action:"/user/web/pause",videoUrl:h.get("file")||h.getCurrentItem().file,time:E(!0),sessionTime:y,env:A()})}),e.on("idle",function(e){"complete"===e.reason&&(m+=h.get("duration")-g,b({action:"/user/web/end",videoUrl:h.get("file")||h.getCurrentItem().file,playInterval:m,time:E(!0),sessionTime:y,env:A()}))}),e.on("stop",function(){v=!0,clearInterval(n),n=null,clearInterval(f),f=null,p.duration&&(m+=h.get("position")-g,b({action:"/user/web/end",videoUrl:h.get("file")||h.getCurrentItem().file,playInterval:m,time:E(!0),sessionTime:y,env:A()}))}),e.on("error",function(e){clearInterval(n),b({action:"/core/web/error",videoUrl:h.get("file")||h.getCurrentItem().file,error:e.code,errorInfo:e.message,time:E(!0),sessionTime:y,env:A()})}),e.on("setupError",function(e){b({action:"/core/web/error",videoUrl:h.get("file")||h.getCurrentItem().file,error:e.code,errorInfo:e.message,time:E(!0),sessionTime:y,env:A()})}),e.on("alive",function(){i=(new Date).getTime()}),e.on("liveStop",function(){r=(new Date).getTime(),b({action:"/user/web/end",videoUrl:h.get("file")||h.getCurrentItem().file,playInterval:(r-i)/1e3,time:E(!0),sessionTime:y,env:A()})}),!0),u=!1,c=0;e.on("alive",function(){u=!0,l?l=!1:a&&(o=(new Date).getTime()-a,c++,b({action:"/user/web/buffer",session:y,url:h.get("file")||h.getCurrentItem().file,bt:o,bc:c,env:A()}),a=null)}),e.on("noLiveStream",function(){u&&(a=a||(new Date).getTime())})}}.apply(t,n);void 0!==t&&(e.exports=t)},function(t,e){!function(e){t.exports=e}.call(this,{})},function(e,t){},function(e,t){},function(e,t,n){n=[n(78),n(2)],t=function(e,i){return function(t,n){i.each(["seek","skipAd","stop","playlistNext","playlistPrev","playlistItem","resize","addButton","removeButton","registerPlugin","attachMedia"],function(e){t[e]=function(){return n[e].apply(n,arguments),t}}),t.registerPlugin=e.registerPlugin}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){return function(n,i){e.each(["buffer","controls","position","duration","fullscreen","volume","mute","item","stretching","playlist","captions","playbackRate","screenshot"],function(e){var t=e.slice(0,1).toUpperCase()+e.slice(1);n["get"+t]=function(){return i._model.get(e)}});e.each(["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia","getHlsCurrentLevel","getMediaInfo","VR"],function(e){n[e]=function(){return i[e]?i[e].apply(i,arguments):null}}),e.each(["setControls","setKeyControls","setFullscreen","setVolume","enableGPU","disableGPU","setMute","setCues","setCaptions","setToken","setThumbnails","setPlaybackRate","setScreenshot","setSeekStep","setCaptureFrameStart","setCaptureFrameEnd","setDanmuStatus","sendDanmu","setPictInPict","setLang","setWatermark","setMirror","setMaxSeekTime","playNext"],function(e){n[e]=function(){return i[e].apply(i,arguments),n}}),n.getPlaylistIndex=n.getItem}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(6)],t=function(i,t){return function(n){var e={onSeekFinished:t.JWPLAYER_MEDIA_SEEK_FINISHED,onBufferChange:t.JWPLAYER_MEDIA_BUFFER,onBufferFull:t.JWPLAYER_MEDIA_BUFFER_FULL,onError:t.JWPLAYER_ERROR,onSetupError:t.JWPLAYER_SETUP_ERROR,onFullscreen:t.JWPLAYER_FULLSCREEN,onMeta:t.JWPLAYER_MEDIA_META,onMute:t.JWPLAYER_MEDIA_MUTE,onPlaylist:t.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:t.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:t.JWPLAYER_PLAYLIST_COMPLETE,onReady:t.JWPLAYER_READY,onCoverImageReady:t.JWPLAYER_H265WEB_COVERLOADED,onResize:t.JWPLAYER_RESIZE,onComplete:t.JWPLAYER_MEDIA_COMPLETE,onSeek:t.JWPLAYER_MEDIA_SEEK,onTime:t.JWPLAYER_MEDIA_TIME,onVolume:t.JWPLAYER_MEDIA_VOLUME,onBeforePlay:t.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:t.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:t.JWPLAYER_DISPLAY_CLICK,onControls:t.JWPLAYER_CONTROLS,onQualityLevels:t.JWPLAYER_MEDIA_LEVELS,onQualityChange:t.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:t.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:t.JWPLAYER_CAPTIONS_CHANGED,onAdError:t.JWPLAYER_AD_ERROR,onAdClick:t.JWPLAYER_AD_CLICK,onAdImpression:t.JWPLAYER_AD_IMPRESSION,onAdTime:t.JWPLAYER_AD_TIME,onAdComplete:t.JWPLAYER_AD_COMPLETE,onAdCompanions:t.JWPLAYER_AD_COMPANIONS,onAdSkipped:t.JWPLAYER_AD_SKIPPED,onAdPlay:t.JWPLAYER_AD_PLAY,onAdPause:t.JWPLAYER_AD_PAUSE,onAdMeta:t.JWPLAYER_AD_META,onCast:t.JWPLAYER_CAST_SESSION,onAudioTrackChange:t.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:t.JWPLAYER_AUDIO_TRACKS,onCuepoint:t.JWPLAYER_CUEPOINT,onSeekForwardForbidden:t.JWPLAYER_SEEK_FORWARD_FORBIDDEN,onConnection:t.JWPLAYER_CONNECTING,onAlive:t.JWPLAYER_ALIVE,onNoLiveStream:t.JWPLAYER_NO_LIVE_STREAM,onLiveStop:t.JWPLAYER_LIVE_STOP,onPlaybackRate:t.JWPLAYER_PLAYBACKRATE,onScreenshot:t.JWPLAYER_SCREENSHOT,onCaptureFrameFinished:t.JWPLAYER_CaptureFrameFinished};i.each({onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle",onStop:"stop"},function(e,t){n[t]=i.partial(n.on,e,i)}),i.each(e,function(e,t){n[t]=i.partial(n.on,e,i)})}}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(34),n(1)],t=function(n,i){function r(){for(var e=i.getElementsByClassName("jw-warning"),t=0;t<e.length;t++)e[t].style.display="block"}function e(e,t){this.config=e,this.api=t}return e.prototype={userCertify:function(){var e,t;return!__DEBUG__&&!1!==this.config.withLog&&(e=this.config.ak||"",/^[a-zA-Z0-9]{32}$/.test(e)||/^[a-zA-Z0-9]{26}$/.test(e)?(e="https://drm.media.baidubce.com/v1/playerAuth?ak="+e+"&player="+("web-html5-"+n)+"&platform="+i.getBrowserInfo()+"&callback="+this._getCallback(),e=encodeURI(e),(t=document.createElement("script")).type="text/javascript",t.src=e,void document.getElementsByTagName("head")[0].appendChild(t)):(r(),!1))},_getCallback:function(){var n="jwplayer_"+(new Date).getTime()+"_"+(1e9*Math.random()>>>0);return window[n]=function(e){try{!(t=e).code||"UNAUTHORIZED"!==t.code&&"BAD_REQUEST"!==t.code||r(),delete window[n]}catch(e){window[n]=null}var t},n}},e}.apply(t,n);void 0!==t&&(e.exports=t)},function(e,t,n){var i=n(265),r=("string"==typeof i&&(i=[[e.i,i,""]]),{hmr:!0});r.transform=void 0,r.insertInto=void 0,n(269)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(266)()).push([e.i,".jw-reset {\n  color: inherit;\n  background-color: transparent;\n  padding: 0;\n  margin: 0;\n  float: none;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  line-height: 1em;\n  list-style: none;\n  text-align: left;\n  text-transform: none;\n  vertical-align: baseline;\n  border: 0;\n  direction: ltr;\n  font-variant: inherit;\n  font-stretch: inherit;\n  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n}\n/*** When not base64 encoded, fallbacks will work so that we won't load both fonts if we don't have to ***/\n/*** TTF is used for support for some older version of Android Stock (4.3 and less) ***/\n/*** https://kekee000.github.io/fonteditor/# icon生成器 ***/\n@font-face {\n  font-family: \"jw-icons\";\n  src: url("+n(267)+') format("woff"), url('+n(268)+') format("truetype");\n  font-weight: normal;\n  font-style: normal;\n}\n.jw-icon-inline,\n.jw-icon-tooltip,\n.jw-icon-display,\n.jw-controlbar .jw-menu .jw-option:before {\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\n/*** ICONS ***/\n.jw-icon-audio-tracks:before {\n  content: "\\E600";\n}\n.jw-icon-buffer:before {\n  content: "\\E601";\n}\n.jw-icon-cast:before {\n  content: "\\E603";\n}\n.jw-icon-cast.jw-off:before {\n  content: "\\E602";\n}\n.jw-icon-cc:before {\n  content: "\\E605";\n}\n.jw-icon-cue:before {\n  content: "\\E606";\n}\n.jw-icon-menu-bullet:before {\n  content: "\\E606";\n}\n.jw-icon-error:before {\n  content: "\\E607";\n}\n.jw-icon-fullscreen:before {\n  content: "\\E608";\n}\n.jw-icon-fullscreen.jw-off:before {\n  content: "\\E613";\n}\n.jw-icon-screenshot:before {\n  content: "\\E619";\n}\n.jw-icon-screenshot.jw-off:before {\n  content: "\\E619";\n}\n.jw-icon-pictureinpicture:before {\n  content: "\\E61C";\n}\n.jw-icon-pictureinpicture.jw-off:before {\n  content: "\\E61C";\n}\n.jw-icon-danmu:before {\n  content: "\\E61A";\n}\n.jw-icon-danmu.jw-off:before {\n  content: "\\E61B";\n}\n.jw-icon-hd:before {\n  content: none;\n}\n.jw-watermark:before,\n.jw-rightclick-logo:before {\n  content: "\\E60B";\n}\n.jw-icon-next:before {\n  content: "\\E60C";\n}\n.jw-icon-pause:before {\n  content: "\\E60D";\n}\n.jw-icon-play:before {\n  content: "\\E60E";\n}\n.jw-icon-prev:before {\n  content: "\\E60F";\n}\n.jw-icon-replay:before {\n  content: "\\E610";\n}\n.jw-icon-volume:before {\n  content: "\\E612";\n}\n.jw-icon-volume.jw-off:before {\n  content: "\\E611";\n}\n.jw-icon-more:before {\n  content: "\\E614";\n}\n.jw-icon-close:before {\n  content: "\\E615";\n}\n.jw-icon-close-small:before {\n  content: "\\E61D";\n}\n.jw-icon-playlist:before {\n  content: "\\E616";\n}\n.jw-icon-barlogo:before {\n  content: "\\E617";\n}\n.jw-icon-barlogo-new:before {\n  content: "\\E618";\n}\n.jw-icon-mirror:before {\n  content: "\\E620";\n  font-weight: 600;\n  font-size: 0.9em;\n  position: relative;\n  bottom: 0.18em;\n}\n.jw-icon-mirror.jw-off:before {\n  content: "\\E621";\n  font-weight: 600;\n}\n.jw-icon-rotate:before {\n  content: "\\E61F";\n  font-size: 1em;\n  position: relative;\n  bottom: 0.15em;\n}\n.jw-icon-rotate.jw-off:before {\n  content: "\\E61E";\n  font-size: 1em;\n}\n.jwplayer {\n  width: 100%;\n  font-size: 16px;\n  position: relative;\n  display: block;\n  min-height: 0;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-family: Arial, Helvetica, sans-serif;\n  background-color: #000;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.jwplayer * {\n  box-sizing: inherit;\n}\n.jwplayer.jw-flag-aspect-mode {\n  height: auto !important;\n}\n.jwplayer.jw-flag-aspect-mode .jw-aspect {\n  display: block;\n}\n.jwplayer .jw-aspect {\n  display: none;\n}\n.jwplayer.jw-no-focus:focus,\n.jwplayer .jw-swf {\n  outline: none;\n}\n.jwplayer.jw-ie:focus {\n  outline: #585858 dotted 1px;\n}\n.jwplayer:hover .jw-display-icon-container {\n  background-color: #333;\n  background: #333;\n  background-size: #333;\n}\n.jw-media,\n.jw-preview,\n.jw-adv,\n.jw-overlays,\n.jw-controls {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n.jwplayer .jw-adv {\n  background-size: 100% 100%;\n  cursor: pointer;\n}\n.jwplayer .jw-adv .adv-countdown {\n  position: absolute;\n  width: 95px;\n  padding-left: 10px;\n  height: 30px;\n  line-height: 30px;\n  background-color: #202020;\n  opacity: 0.7;\n  color: #ee6002;\n  font-size: 14px;\n  top: 0px;\n  right: 0px;\n  display: none;\n}\n.jwplayer .jw-adv .adv-close {\n  position: absolute;\n  height: 22px;\n  line-height: 22px;\n  color: #fff;\n  font-weight: bold;\n  font-size: 14px;\n  width: 20px;\n  top: 0px;\n  right: 5px;\n  display: none;\n  text-align: center;\n}\n.jw-media {\n  overflow: hidden;\n  cursor: pointer;\n}\n.jw-overlays {\n  cursor: auto;\n}\n.jw-media.jw-media-show {\n  visibility: visible;\n  opacity: 1;\n}\n.jw-controls.jw-controls-disabled {\n  display: none;\n}\n.jw-controls .jw-controls-right {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 2em;\n}\n.jw-warning {\n  color: #f00;\n  top: 10px;\n  right: 10px;\n  position: absolute;\n  z-index: 10000;\n  display: none;\n}\n.jw-warning a {\n  color: #108cee;\n}\n.jw-marquee {\n  opacity: 0;\n  color: #fff;\n  width: auto;\n  font-size: 16px;\n  font-weight: bold;\n  white-space: nowrap;\n  position: absolute;\n}\n@-webkit-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-moz-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-o-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-ms-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-webkit-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-moz-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-o-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-ms-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n.jw-text {\n  height: 1em;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 0.75em;\n  font-style: normal;\n  font-weight: normal;\n  color: white;\n  text-align: center;\n  font-variant: normal;\n  font-stretch: normal;\n}\n.jw-plugin {\n  position: absolute;\n  bottom: 2.5em;\n}\n.jw-plugin .jw-banner {\n  max-width: 100%;\n  opacity: 0;\n  cursor: pointer;\n  position: absolute;\n  margin: auto auto 0 auto;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: block;\n}\n.jw-cast-screen {\n  width: 100%;\n  height: 100%;\n}\n.jw-instream {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: none;\n}\n.jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jw-preview,\n.jw-captions,\n.jw-title,\n.jw-overlays,\n.jw-controls {\n  pointer-events: none;\n}\n.jw-overlays > div,\n.jw-media,\n.jw-controlbar,\n.jw-dock,\n.jw-logo,\n.jw-skip,\n.jw-display-icon-container {\n  pointer-events: all;\n}\n.jw-danmaku {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  pointer-events: none;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  mask-position: center;\n  -webkit-mask-repeat: no-repeat;\n  -webkit-mask-size: contain;\n  -webkit-mask-position: center;\n}\n.jw-danmaku-opacity-1 {\n  opacity: 1;\n}\n.jw-danmaku-opacity-2 {\n  opacity: 0.66;\n}\n.jw-danmaku-opacity-3 {\n  opacity: 0.33;\n}\n.jw-danmaku-opacity-4 {\n  opacity: 0;\n}\n.jw-danmaku-item {\n  position: absolute;\n  white-space: nowrap;\n  line-height: 1.125;\n  letter-spacing: 1px;\n  color: #fff;\n  text-shadow: #000000 1px 0px 1px, #000000 0px 1px 1px, #000000 0px -1px 1px, #000000 -1px 0px 1px;\n  will-change: transform;\n}\n.jw-danmaku-item-center {\n  left: 50%;\n  transform: translateX(-50%);\n  will-change: initial;\n  z-index: 1;\n}\n.jw-danmaku-item-me {\n  outline: 2px solid;\n  z-index: 2;\n}\n.jw-danmaku-sendbox {\n  display: flex;\n  align-items: center;\n  margin: 0 10px;\n  padding: 5px 10px;\n  color: white;\n  background: rgba(255, 255, 255, 0.15);\n}\n.jw-danmaku-sendbox input {\n  flex: 1;\n  width: 100px;\n  padding: 0;\n  color: currentColor;\n  background: transparent;\n  border: 0;\n  outline: 0;\n  font-size: 13px;\n}\n.jw-danmaku-sendbox input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n.jw-danmaku-sendbox-btn {\n  color: white;\n  font-size: 12px;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.performance-info {\n  color: #fff;\n  width: 178px;\n  height: 100%;\n  z-index: 8;\n  font-size: 12px;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.5);\n  font-weight: 400;\n  box-sizing: border-box;\n  overflow-y: auto;\n  position: absolute;\n  top: 0;\n}\n.performance-info li {\n  line-height: 35px;\n  color: #fff;\n  display: flex;\n  justify-content: space-between;\n}\n.performance-info #performance-buffer {\n  max-width: 70px;\n  display: inline-block;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  line-height: 35px;\n}\n.jw-watermark-container {\n  left: 0%;\n  top: 0%;\n  width: 100%;\n  height: 100%;\n  display: block;\n  visibility: visible;\n  position: absolute;\n  margin: 0px;\n  padding: 0px;\n}\n.jw-watermark-container .jw-watermark-content {\n  position: absolute;\n  height: fit-content;\n}\n.jw-watermark-container img {\n  width: 20px;\n}\n.jw-toast {\n  width: fit-content;\n  height: fit-content;\n  display: flex;\n  background-color: rgba(0, 0, 0, 0.5);\n  align-items: center;\n  border-radius: 5px;\n  color: #fff;\n  font-size: 14px;\n  padding: 2px 10px;\n  white-space: normal;\n  overflow-wrap: normal;\n  letter-spacing: 0.05em;\n}\n.memory-play-container {\n  position: absolute;\n  bottom: 40px;\n  pointer-events: all;\n  z-index: 1;\n}\n.memory-play-container p {\n  font-weight: 400;\n  color: #fff;\n  opacity: 0.9;\n}\n.memory-play-container .jw-icon-close-small {\n  font-size: 13px;\n  cursor: pointer;\n  font-weight: 800;\n}\n.jwplayer video {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  background: transparent;\n}\n.jwplayer video::-webkit-media-controls-start-playback-button {\n  display: none;\n}\n.jwplayer.jw-stretch-uniform video {\n  object-fit: contain;\n}\n.jwplayer.jw-stretch-none video {\n  object-fit: none;\n}\n.jwplayer.jw-stretch-fill video {\n  object-fit: cover;\n}\n.jwplayer.jw-stretch-exactfit video {\n  object-fit: fill;\n}\n.jwplayer.jw-state-mirror video,\n.jwplayer.jw-state-mirror canvas {\n  transform: rotateY(180deg);\n}\n/* W3C */\n/* icons */\n/* doc */\n/* IE9 SVG, needs conditional override of \'filter\' to \'none\' */\n/* IE9 SVG, needs conditional override of \'filter\' to \'none\' */\n.jw-click {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.jw-preview,\n.jw-adv {\n  position: absolute;\n  display: none;\n  opacity: 1;\n  visibility: visible;\n  width: 100%;\n  height: 100%;\n  background: #000 no-repeat 50% 50%;\n}\n.jwplayer .jw-preview,\n.jw-error .jw-preview,\n.jw-stretch-uniform .jw-preview {\n  background-size: 100% 100%;\n}\n#playerContainer_error {\n  z-index: 1;\n}\n.jw-stretch-none .jw-preview {\n  background-size: auto auto;\n}\n.jw-stretch-fill .jw-preview {\n  background-size: cover;\n}\n.jw-stretch-exactfit .jw-preview {\n  background-size: 100% 100%;\n}\n.jw-display-icon-container,\n.jw-error-display-icon-container {\n  position: relative;\n  top: 50%;\n  display: table;\n  height: 3.5em;\n  width: 3.5em;\n  margin: -1.75em auto 0;\n  cursor: pointer;\n}\n.jw-display-icon-container .jw-icon-display,\n.jw-error-display-icon-container .jw-icon-display,\n.jw-display-icon-container .jw-error-icon-display,\n.jw-error-display-icon-container .jw-error-icon-display {\n  position: relative;\n  display: table-cell;\n  text-align: center;\n  vertical-align: middle !important;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  font-size: 2em;\n}\n.jw-flag-audio-player .jw-display-icon-container,\n.jw-flag-dragging .jw-display-icon-container {\n  display: none;\n}\n.jw-icon {\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\n/* Mixin for common skin styles with variable colors */\n.jw-controlbar {\n  display: table;\n  position: absolute;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  height: 2em;\n  padding: 0 0.25em;\n  z-index: 1;\n}\n.jw-controlbar .jw-hidden {\n  display: none;\n}\n.jw-controlbar.jw-drawer-expanded .jw-controlbar-left-group,\n.jw-controlbar.jw-drawer-expanded .jw-controlbar-center-group {\n  opacity: 0;\n}\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-elapsed,\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-duration,\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-slider-time {\n  display: none;\n}\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-alt {\n  display: inline;\n}\n.jw-background-color {\n  background-color: #414040;\n}\n.jw-group {\n  display: table-cell;\n}\n.jw-controlbar-center-group {\n  width: 100%;\n  padding: 0 0.25em;\n}\n.jw-controlbar-center-group .jw-slider-time,\n.jw-controlbar-center-group .jw-text-alt {\n  padding: 0;\n}\n.jw-controlbar-center-group .jw-text-alt {\n  display: none;\n}\n.jw-controlbar-left-group,\n.jw-controlbar-right-group {\n  white-space: nowrap;\n}\n.jw-knob:hover,\n.jw-icon-inline:hover,\n.jw-icon-tooltip:hover,\n.jw-icon-display:hover,\n.jw-option:before:hover {\n  color: #eee;\n}\n.jw-icon-inline,\n.jw-icon-tooltip,\n.jw-slider-horizontal,\n.jw-text-elapsed,\n.jw-text-duration {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  line-height: 2em;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.jw-icon-inline,\n.jw-icon-tooltip {\n  min-width: 1.25em;\n  text-align: center;\n}\n.jw-icon-playback {\n  min-width: 2.25em;\n}\n.jw-icon-barlogo {\n  font-size: 19px;\n  min-width: 1.75em;\n}\n.jw-icon-barlogo-new {\n  font-size: 20px;\n  min-width: 1.5em;\n  height: 1em;\n  line-height: 1em;\n}\n.jw-icon-volume {\n  min-width: 1.75em;\n  text-align: left;\n}\n.jw-controlbar .jw-icon-volume .jw-overlay {\n  left: 42%;\n}\n.jw-time-tip {\n  line-height: 1em;\n  pointer-events: none;\n}\n.jw-icon-inline:after,\n.jw-icon-tooltip:after {\n  width: 100%;\n  height: 100%;\n  font-size: 1em;\n}\n.jw-icon-cast {\n  display: none;\n}\n.jw-slider-volume.jw-slider-horizontal,\n.jw-icon-inline.jw-icon-volume {\n  display: none;\n}\n.jw-icon-hd .jw-hd-label {\n  font-size: 12px;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n  pointer-events: none;\n}\n.jw-icon-qualityChange {\n  margin: 0px 5px;\n}\n.jw-icon-qualityChange .jw-qualityChange-label {\n  font-size: 14px;\n  pointer-events: none;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n}\n.jw-controlbar .jw-icon-playrate .jw-overlay {\n  bottom: 1.5em;\n}\n.jw-controlbar .jw-icon-playrate .jw-playrate-label {\n  font-size: 0.75em;\n  border-left: 1px solid #666;\n  padding: 0 0.7em;\n  display: inline-block;\n  line-height: 16px;\n  height: 16px;\n  vertical-align: text-top;\n}\n.jw-controlbar .jw-icon-cc:before {\n  content: none;\n}\n.jw-controlbar .jw-icon-cc .jw-cc-label {\n  font-size: 0.75em;\n  padding: 0 0.7em;\n  display: inline-block;\n  line-height: 16px;\n  height: 16px;\n  vertical-align: text-top;\n  pointer-events: none;\n}\n.jw-controlbar .jw-icon-lang {\n  margin: 0px 3px 0px 8px;\n}\n.jw-controlbar .jw-icon-lang .jw-lang-label {\n  font-size: 14px;\n  pointer-events: none;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n}\n.jw-text-backlive {\n  position: absolute;\n  left: 110px;\n  top: 13px;\n  cursor: pointer;\n}\n.jw-dock {\n  margin: 0.75em;\n  display: block;\n  opacity: 1;\n  clear: right;\n}\n.jw-dock:after {\n  content: \'\';\n  clear: both;\n  display: block;\n}\n.jw-dock-button {\n  cursor: pointer;\n  float: right;\n  position: relative;\n  width: 2.5em;\n  height: 2.5em;\n  margin: 0.5em;\n}\n.jw-dock-button .jw-arrow {\n  display: none;\n  position: absolute;\n  bottom: -0.2em;\n  width: 0.5em;\n  height: 0.2em;\n  left: 50%;\n  margin-left: -0.25em;\n}\n.jw-dock-button .jw-overlay {\n  display: none;\n  position: absolute;\n  top: 2.5em;\n  right: 0em;\n  margin-top: 0.25em;\n  padding: 0.5em;\n  white-space: nowrap;\n}\n.jw-dock-button:hover .jw-overlay,\n.jw-dock-button:hover .jw-arrow {\n  display: block;\n}\n.jw-dock-image {\n  width: 100%;\n  height: 100%;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  opacity: 0.75;\n}\n.jw-title {\n  display: none;\n  position: absolute;\n  top: 0;\n  width: 100%;\n  font-size: 0.875em;\n  height: 8em;\n  background: linear-gradient(to bottom, #000000 0, #000000 18%, rgba(0, 0, 0, 0) 100%);\n}\n.jw-title-primary,\n.jw-title-secondary {\n  padding: 0.75em 1.5em;\n  min-height: 2.5em;\n  color: white;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow-x: hidden;\n}\n.jw-title-primary {\n  font-weight: bold;\n}\n.jw-title-secondary {\n  margin-top: -0.5em;\n}\n.jw-slider-container {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  touch-action: none;\n}\n.jw-rail,\n.jw-buffer,\n.jw-progress {\n  position: absolute;\n  cursor: pointer;\n}\n.jw-progress {\n  background-color: #fff;\n}\n.jw-rail {\n  background-color: #aaa;\n}\n.jw-buffer {\n  background-color: #202020;\n}\n.jw-cue,\n.jw-knob {\n  position: absolute;\n  cursor: pointer;\n}\n.jw-cue {\n  background-color: #fff;\n  width: 0.1em;\n  height: 0.4em;\n}\n.jw-knob {\n  background-color: #aaa;\n  width: 0.4em;\n  height: 0.4em;\n}\n.jw-slider-horizontal {\n  width: 4em;\n  height: 1em;\n}\n.jw-slider-horizontal.jw-slider-volume {\n  margin-right: 5px;\n}\n.jw-slider-horizontal .jw-rail,\n.jw-slider-horizontal .jw-buffer,\n.jw-slider-horizontal .jw-progress {\n  width: 100%;\n  height: 0.4em;\n}\n.jw-slider-horizontal .jw-progress,\n.jw-slider-horizontal .jw-buffer {\n  width: 0;\n}\n.jw-slider-horizontal .jw-rail,\n.jw-slider-horizontal .jw-progress,\n.jw-slider-horizontal .jw-slider-container {\n  width: 100%;\n  left: 0;\n}\n.jw-slider-horizontal .jw-knob {\n  left: 0;\n  margin-left: -0.325em;\n}\n.jw-slider-vertical {\n  width: 0.75em;\n  height: 4em;\n  bottom: 0em;\n  position: absolute;\n  padding: 1em;\n}\n.jw-slider-vertical .jw-rail,\n.jw-slider-vertical .jw-buffer,\n.jw-slider-vertical .jw-progress {\n  bottom: 0;\n  height: 100%;\n}\n.jw-slider-vertical .jw-progress,\n.jw-slider-vertical .jw-buffer {\n  height: 0;\n}\n.jw-slider-vertical .jw-slider-container,\n.jw-slider-vertical .jw-rail,\n.jw-slider-vertical .jw-progress {\n  bottom: 0;\n  width: 0.75em;\n  height: 100%;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.jw-slider-vertical .jw-slider-container {\n  height: 4em;\n  position: relative;\n}\n.jw-slider-vertical .jw-knob {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.jw-slider-time {\n  right: 0;\n  left: 1%;\n  width: 98%;\n}\n.jw-tooltip-time {\n  position: absolute;\n}\n.jw-slider-volume .jw-buffer {\n  display: none;\n}\n.jw-slider-breakpoint {\n  position: absolute;\n  top: 1px;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  width: 3px;\n  height: 2px;\n  background-color: #b7becb;\n  border-radius: 50%;\n}\n.jwplayer .jw-process-adv {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n}\n.jwplayer .jw-process-adv img {\n  border: none;\n}\n.jw-captions {\n  position: absolute;\n  display: none;\n  margin: 0 auto;\n  width: 100%;\n  left: 0;\n  bottom: 3em;\n  right: 0;\n  max-width: 90%;\n  text-align: center;\n}\n.jw-captions.jw-captions-enabled {\n  display: block;\n}\n.jw-captions-window {\n  display: none;\n  padding: 0.25em;\n  border-radius: 0.25em;\n}\n.jw-captions-window.jw-captions-window-active {\n  display: inline-block;\n}\n.jw-captions-text {\n  display: inline-block;\n  color: white;\n  background-color: black;\n  word-wrap: break-word;\n  white-space: pre-line;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  text-decoration: none;\n  line-height: 1.3em;\n  padding: 0.1em 0.8em;\n}\n.jwplayer video::-webkit-media-controls {\n  justify-content: flex-start;\n}\n.jwplayer video::-webkit-media-text-track-container {\n  max-height: calc(97% - 6.25 * 2em);\n  line-height: 1.3em;\n}\n.jwplayer.jw-flag-compact-player video::-webkit-media-text-track-container {\n  max-height: calc(97% - 7.5 * 2em);\n}\n.jwplayer .jw-rightclick {\n  display: none;\n  position: absolute;\n  white-space: nowrap;\n}\n.jwplayer .jw-rightclick.jw-open {\n  display: block;\n}\n.jwplayer .jw-rightclick ul {\n  list-style: none;\n  font-weight: bold;\n  border-radius: 0.15em;\n  margin: 0;\n  border: 1px solid #444;\n  padding: 0;\n}\n.jwplayer .jw-rightclick ul li {\n  background-color: #000;\n  border-bottom: 1px solid #444;\n  margin: 0;\n}\n.jwplayer .jw-rightclick ul li .jw-rightclick-logo {\n  font-size: 2em;\n  color: #ff0147;\n  vertical-align: middle;\n  padding-right: 0.3em;\n  margin-right: 0.3em;\n  border-right: 1px solid #444;\n}\n.jwplayer .jw-rightclick ul li a {\n  color: #fff;\n  text-decoration: none;\n  padding: 1em;\n  display: block;\n  font-size: 0.6875em;\n  line-height: 1em;\n}\n.jwplayer .jw-rightclick ul li:last-child {\n  border-bottom: none;\n}\n.jwplayer .jw-rightclick ul li:hover {\n  background-color: #1a1a1a;\n  cursor: pointer;\n}\n.jwplayer .jw-rightclick ul .jw-featured {\n  background-color: #252525;\n  vertical-align: middle;\n}\n.jwplayer .jw-rightclick ul .jw-featured a {\n  color: #777;\n}\n.jw-logo {\n  position: absolute;\n  margin: 0.75em;\n  cursor: pointer;\n  pointer-events: all;\n  background-repeat: no-repeat;\n  background-size: contain;\n  top: auto;\n  right: auto;\n  left: auto;\n  bottom: auto;\n}\n.jw-logo .jw-flag-audio-player {\n  display: none;\n}\n.jw-logo-top-right {\n  top: 0;\n  right: 0;\n}\n.jw-logo-top-left {\n  top: 0;\n  left: 0;\n}\n.jw-logo-bottom-left {\n  bottom: 0;\n  left: 0;\n}\n.jw-logo-bottom-right {\n  bottom: 0;\n  right: 0;\n}\n.jw-watermark {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  text-align: center;\n  font-size: 14em;\n  color: #eee;\n  opacity: 0.33;\n  pointer-events: none;\n}\n.jw-icon-tooltip.jw-open .jw-overlay {\n  opacity: 1;\n  visibility: visible;\n}\n.jw-icon-tooltip.jw-hidden {\n  display: none;\n}\n.jw-overlay-horizontal {\n  display: none;\n}\n.jw-icon-tooltip.jw-open-drawer:before {\n  display: none;\n}\n.jw-icon-tooltip.jw-open-drawer .jw-overlay-horizontal {\n  opacity: 1;\n  display: inline-block;\n  vertical-align: top;\n}\n.jw-overlay:before {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: -50%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0);\n  content: " ";\n}\n.jw-slider-time .jw-overlay:before {\n  height: 1em;\n  top: auto;\n}\n.jw-time-tip,\n.jw-volume-tip,\n.jw-menu {\n  position: relative;\n  left: -50%;\n  border: solid 1px #000;\n  margin: 0;\n}\n.jw-menu {\n  max-height: 10em;\n  overflow-y: auto;\n}\n.jw-volume-value-tip {\n  font-size: 12px;\n  position: absolute;\n  top: -26px;\n  right: 20px;\n  background-color: #000;\n  line-height: 20px;\n  border-radius: 3px;\n  padding: 0 3px;\n  color: #FFF;\n}\n.jw-volume-tip {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n.jw-time-tip {\n  text-align: center;\n  font-family: inherit;\n  color: #aaa;\n  bottom: 1em;\n  border: solid 4px #000;\n}\n.jw-time-tip .jw-text {\n  line-height: 1em;\n}\n.jw-controlbar .jw-overlay {\n  margin: 0;\n  position: absolute;\n  bottom: 2em;\n  left: 50%;\n  opacity: 0;\n  visibility: hidden;\n}\n.jw-controlbar .jw-overlay .jw-contents {\n  position: relative;\n}\n.jw-controlbar .jw-option {\n  position: relative;\n  white-space: nowrap;\n  cursor: pointer;\n  list-style: none;\n  height: 1.5em;\n  font-family: inherit;\n  line-height: 1.5em;\n  color: #aaa;\n  padding: 0 0.5em;\n  font-size: 0.8em;\n}\n.jw-controlbar .jw-option:hover,\n.jw-controlbar .jw-option:before:hover {\n  color: #eee;\n}\n.jw-controlbar .jw-option:before {\n  padding-right: 0.125em;\n}\n.jw-playlist-container ::-webkit-scrollbar-track {\n  background-color: #333;\n  border-radius: 10px;\n}\n.jw-playlist-container ::-webkit-scrollbar {\n  width: 5px;\n  border: 10px solid black;\n  border-bottom: 0;\n  border-top: 0;\n}\n.jw-playlist-container ::-webkit-scrollbar-thumb {\n  background-color: white;\n  border-radius: 5px;\n}\n.jw-tooltip-title {\n  border-bottom: 1px solid #444;\n  text-align: left;\n  padding-left: 0.7em;\n}\n.jw-playlist {\n  max-height: 11em;\n  min-height: 4.5em;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  width: calc(100% - 4px);\n}\n.jw-playlist .jw-option {\n  height: 3em;\n  margin-right: 5px;\n  color: white;\n  padding-left: 1em;\n  font-size: 0.8em;\n}\n.jw-playlist .jw-label,\n.jw-playlist .jw-name {\n  display: inline-block;\n  line-height: 3em;\n  text-align: left;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.jw-playlist .jw-label {\n  width: 1em;\n}\n.jw-playlist .jw-name {\n  width: 11em;\n}\n.jw-skip {\n  cursor: default;\n  position: absolute;\n  float: right;\n  display: inline-block;\n  right: 0.75em;\n  bottom: 3em;\n}\n.jw-skip.jw-skippable {\n  cursor: pointer;\n}\n.jw-skip.jw-hidden {\n  visibility: hidden;\n}\n.jw-skip .jw-skip-icon {\n  display: none;\n  margin-left: -0.75em;\n}\n.jw-skip .jw-skip-icon:before {\n  content: "\\E60C";\n}\n.jw-skip .jw-text,\n.jw-skip .jw-skip-icon {\n  color: #aaa;\n  vertical-align: middle;\n  line-height: 1.5em;\n  font-size: 0.7em;\n}\n.jw-skip.jw-skippable:hover {\n  cursor: pointer;\n}\n.jw-skip.jw-skippable:hover .jw-text,\n.jw-skip.jw-skippable:hover .jw-skip-icon {\n  color: #eee;\n}\n.jw-skip.jw-skippable .jw-skip-icon {\n  display: inline;\n  margin: 0;\n}\n.jwplayer.jw-state-playing.jw-flag-casting .jw-display-icon-container,\n.jwplayer.jw-state-paused.jw-flag-casting .jw-display-icon-container {\n  display: table;\n}\n.jwplayer.jw-flag-casting .jw-display-icon-container {\n  border-radius: 0;\n  border: 1px solid white;\n  position: absolute;\n  top: auto;\n  left: 0.5em;\n  right: 0.5em;\n  bottom: 50%;\n  margin-bottom: -12.5%;\n  height: 50%;\n  width: 50%;\n  padding: 0;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jwplayer.jw-flag-casting .jw-display-icon-container .jw-icon {\n  font-size: 3em;\n}\n.jwplayer.jw-flag-casting.jw-state-complete .jw-preview {\n  display: none;\n}\n.jw-cast {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-size: auto;\n  background-position: 50% 50%;\n}\n.jw-cast-label {\n  position: absolute;\n  left: 0.5em;\n  right: 0.5em;\n  bottom: 75%;\n  margin-bottom: 1.5em;\n  text-align: center;\n}\n.jw-cast-name {\n  color: #cccccc;\n}\n.jw-switch {\n  position: relative;\n  float: left;\n  width: 30px;\n  margin: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  display: inline-block;\n  position: absolute;\n  right: 10px;\n  top: 18px;\n}\n.live-shift-switch {\n  position: absolute;\n  left: inherit;\n  right: initial;\n  top: 11px;\n  margin-left: 25px;\n}\n.live-shift-switch::before {\n  content: \'\\65F6\\79FB\\FF1A\';\n  position: absolute;\n  left: -30px;\n  z-index: 1;\n  color: #fff;\n  font-size: 12px;\n}\n.jw-switch-checkbox {\n  display: none;\n}\n.jw-switch-label {\n  display: block;\n  overflow: hidden;\n  cursor: pointer;\n  border-radius: 20px;\n}\n.jw-switch-inner {\n  display: block;\n  width: 200%;\n  margin-left: -100%;\n  transition: margin 0.3s ease-in 0s;\n}\n.jw-switch-inner::before,\n.jw-switch-inner::after {\n  display: block;\n  float: right;\n  width: 50%;\n  height: 15px;\n  padding: 0;\n  line-height: 15px;\n  font-size: 14px;\n  color: white;\n  font-family: Trebuchet, Arial, sans-serif;\n  font-weight: bold;\n  box-sizing: border-box;\n}\n.jw-switch-inner::after {\n  content: attr(data-on);\n  padding-left: 10px;\n  background-color: #0D5DEC;\n  color: #FFFFFF;\n}\n.jw-switch-inner::before {\n  content: attr(data-off);\n  padding-right: 10px;\n  background-color: #EEEEEE;\n  color: #999999;\n  text-align: right;\n}\n.jw-switch-switch {\n  position: absolute;\n  display: block;\n  width: 12px;\n  height: 12px;\n  margin: 2px 1px 2px 1px;\n  background: #FFFFFF;\n  top: 0;\n  bottom: 0;\n  right: 14px;\n  border: 1px solid #999999;\n  border-radius: 20px;\n  transition: all 0.3s ease-in 0s;\n}\n.jw-switch-checkbox:checked + .jw-switch-label .jw-switch-inner {\n  margin-left: 0;\n}\n.jw-switch-checkbox:checked + .jw-switch-label .jw-switch-switch {\n  right: 0px;\n}\n.jwplayer .view360-container {\n  width: 100%;\n  height: 100%;\n}\n.jwplayer .view360-container canvas {\n  z-index: 1;\n  position: absolute;\n  inset: 0px;\n  margin: auto;\n  width: 100%;\n  height: 100%;\n  outline: none;\n}\n.jwplayer .view360-container video {\n  background: #000;\n}\n.jwplayer .view360-controls {\n  position: relative;\n}\n.jwplayer .view360-controls .view360-controls-float-right {\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  right: 10px;\n  z-index: 1;\n}\n.jwplayer .view360-controls .view360-controls-pie {\n  color: #fff;\n}\n.jwplayer .view360-controls .view360-controls-button {\n  display: none;\n}\n.vr-container .jw-controlbar {\n  display: block !important;\n}\n.jw-state-idle .jw-preview {\n  display: block;\n}\n.jw-state-idle .jw-icon-display:before {\n  content: "\\E60E";\n}\n.jw-state-idle .jw-controlbar {\n  display: none;\n}\n.jw-state-idle .jw-captions {\n  display: none;\n}\n.jw-state-idle .jw-title {\n  display: block;\n}\n.jwplayer.jw-state-playing .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-state-playing .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-playing .jw-icon-playback:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display {\n  position: relative;\n  left: 0.1em;\n}\n.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-paused .jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display {\n  -webkit-animation: spin 2s linear infinite;\n  -moz-animation: spin 2s linear infinite;\n  animation: spin 2s linear infinite;\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E601";\n}\n@-moz-keyframes spin {\n  100% {\n    -moz-transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-text {\n  display: none;\n}\n.jwplayer.jw-state-buffering .jw-icon-playback:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-buffering .jw-preview {\n  display: block;\n  background-image: none !important;\n}\n.jwplayer.jw-state-complete .jw-preview {\n  display: block;\n}\n.jwplayer.jw-state-complete .jw-display-icon-container {\n  z-index: 10;\n}\n.jwplayer.jw-state-complete .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E610";\n}\n.jwplayer.jw-state-complete .jw-display-icon-container .jw-text {\n  display: none;\n}\n.jwplayer.jw-state-complete .jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-complete .jw-captions {\n  display: none;\n}\nbody .jw-error .jw-title,\n.jwplayer.jw-state-error .jw-title {\n  display: block;\n  z-index: 1;\n  pointer-events: auto;\n}\nbody .jw-error .jw-title .jw-title-primary,\n.jwplayer.jw-state-error .jw-title .jw-title-primary {\n  white-space: normal;\n}\nbody .jw-error .jw-title .jw-title-primary a,\n.jwplayer.jw-state-error .jw-title .jw-title-primary a {\n  cursor: pointer;\n  color: #699f00;\n  pointer-events: auto;\n}\nbody .jw-error .jw-preview,\n.jwplayer.jw-state-error .jw-preview {\n  display: block;\n}\nbody .jw-error .jw-controlbar,\n.jwplayer.jw-state-error .jw-controlbar {\n  display: none;\n}\nbody .jw-error .jw-captions,\n.jwplayer.jw-state-error .jw-captions {\n  display: none;\n}\nbody .jw-error:hover .jw-display-icon-container,\n.jwplayer.jw-state-error:hover .jw-display-icon-container {\n  cursor: default;\n  color: #fff;\n  background: #000;\n}\nbody .jw-error .jw-icon-display,\n.jwplayer.jw-state-error .jw-icon-display,\nbody .jw-error .jw-error-icon-display,\n.jwplayer.jw-state-error .jw-error-icon-display {\n  cursor: default;\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\nbody .jw-error .jw-icon-display:before,\n.jwplayer.jw-state-error .jw-icon-display:before,\nbody .jw-error .jw-error-icon-display:before,\n.jwplayer.jw-state-error .jw-error-icon-display:before {\n  content: "\\E607";\n}\nbody .jw-error .jw-icon-display:hover,\n.jwplayer.jw-state-error .jw-icon-display:hover,\nbody .jw-error .jw-error-icon-display:hover,\n.jwplayer.jw-state-error .jw-error-icon-display:hover {\n  color: #fff;\n}\nbody .jw-error {\n  font-size: 16px;\n  background-color: #000;\n  color: #eee;\n  width: 100%;\n  height: 100%;\n  display: table;\n  opacity: 1;\n  position: relative;\n}\nbody .jw-error .jw-icon-container,\nbody .jw-error .jw-error-icon-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\nbody #license_error {\n  position: absolute;\n  top: 0px;\n}\n.jwplayer.jw-flag-cast-available .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-cast-available .jw-icon-cast {\n  display: inline-block;\n}\n.jwplayer.jw-flag-skin-loading .jw-captions,\n.jwplayer.jw-flag-skin-loading .jw-controls,\n.jwplayer.jw-flag-skin-loading .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1000;\n  margin: 0;\n  position: fixed;\n}\n.jwplayer.jw-flag-fullscreen .rotate-inner {\n  transform: none !important;\n}\n.jwplayer.jw-flag-live .jw-controlbar {\n  border-top: 1px solid #333;\n}\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-split,\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,\n.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time,\n.jwplayer.jw-flag-live .jw-controlbar .jw-icon-playrate {\n  display: none;\n}\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt {\n  display: inline;\n}\n.jwplayer.jw-flag-time-shift .jw-controlbar .jw-slider-time {\n  display: inline;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-controlbar,\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-dock {\n  display: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-logo.jw-hide {\n  display: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-plugin,\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-captions {\n  bottom: 0.5em;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-media {\n  cursor: none;\n  -webkit-cursor-visibility: auto-hide;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container {\n  max-height: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-buffering .jw-controlbar {\n  display: none;\n}\n.jwplayer.jw-flag-media-audio .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-plugin,\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-captions {\n  bottom: 3em;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container {\n  max-height: calc(97% - 6.25 * 2em);\n}\n.jw-flag-media-audio .jw-preview {\n  display: block;\n}\n.jwplayer.jw-flag-ads .jw-preview,\n.jwplayer.jw-flag-ads .jw-dock,\n.jwplayer.jw-flag-ads .jw-logo,\n.jwplayer.jw-flag-ads .jw-captions.jw-captions-enabled {\n  display: none;\n}\n.jwplayer.jw-flag-ads video::-webkit-media-text-track-container {\n  display: none;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-text,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-horizontal {\n  display: none;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-playback,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-volume,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-fullscreen {\n  display: inline-block;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt {\n  display: inline;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume.jw-slider-horizontal,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline.jw-icon-volume {\n  display: inline-block;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip.jw-icon-volume {\n  display: none;\n}\n.jwplayer.jw-flag-ads-googleima .jw-controlbar {\n  display: table;\n  bottom: 0;\n}\n.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar {\n  font-size: 1em;\n}\n.jwplayer.jw-flag-ads-googleima.jw-flag-touch.jw-state-paused .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-flag-ads-googleima.jw-skin-seven .jw-controlbar {\n  font-size: 0.9em;\n}\n.jwplayer.jw-flag-ads-vpaid .jw-controlbar {\n  display: none;\n}\n.jwplayer.jw-flag-ads-hide-controls .jw-controls {\n  display: none !important;\n}\n.jwplayer.jw-flag-ads.jw-flag-touch .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-overlay-open .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-overlay-open .jw-controls-right .jw-logo {\n  display: none;\n}\n.jwplayer.jw-flag-overlay-open-sharing .jw-controls,\n.jwplayer.jw-flag-overlay-open-related .jw-controls,\n.jwplayer.jw-flag-overlay-open-sharing .jw-title,\n.jwplayer.jw-flag-overlay-open-related .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-rightclick-open {\n  overflow: visible;\n}\n.jwplayer.jw-flag-rightclick-open .jw-rightclick {\n  z-index: 16777215;\n}\n.jw-flag-controls-disabled .jw-controls {\n  visibility: hidden;\n}\n.jw-flag-controls-disabled .jw-logo {\n  visibility: visible;\n}\n.jw-flag-controls-disabled .jw-media {\n  cursor: auto;\n}\nbody .jwplayer.jw-flag-flash-blocked .jw-title {\n  display: block;\n}\nbody .jwplayer.jw-flag-flash-blocked .jw-controls,\nbody .jwplayer.jw-flag-flash-blocked .jw-overlays,\nbody .jwplayer.jw-flag-flash-blocked .jw-preview {\n  display: none;\n}\n.jw-flag-touch .jw-controlbar,\n.jw-flag-touch .jw-skip,\n.jw-flag-touch .jw-plugin {\n  font-size: 1.5em;\n}\n.jw-flag-touch .jw-captions {\n  bottom: 4.25em;\n}\n.jw-flag-touch video::-webkit-media-text-track-container {\n  max-height: 70%;\n}\n.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before {\n  display: inline;\n}\n.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before {\n  content: "\\E615";\n}\n.jw-flag-touch .jw-display-icon-container {\n  pointer-events: none;\n}\n.jw-flag-touch.jw-state-paused .jw-display-icon-container {\n  display: table;\n}\n.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display-icon-container {\n  display: none;\n}\n.jw-flag-compact-player .jw-text-elapsed,\n.jw-flag-compact-player .jw-text-duration,\n.jw-flag-compact-player .jw-text-split,\n.jw-flag-compact-player .jw-icon-danmu {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player {\n  background-color: transparent;\n}\n.jwplayer.jw-flag-audio-player .jw-media {\n  visibility: hidden;\n}\n.jwplayer.jw-flag-audio-player .jw-media object {\n  width: 1px;\n  height: 1px;\n}\n.jwplayer.jw-flag-audio-player .jw-preview,\n.jwplayer.jw-flag-audio-player .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar {\n  display: table;\n  height: auto;\n  left: 0;\n  bottom: 0;\n  margin: 0;\n  width: 100%;\n  min-width: 100%;\n  opacity: 1;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-fullscreen,\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal,\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-inline.jw-icon-volume {\n  display: inline-block;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip.jw-icon-volume {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player.jw-flag-user-inactive .jw-controlbar {\n  display: table;\n}\n.jw-ie-poorie.jw-flag-media-audio .jw-preview {\n  display: none;\n}\n.jw-ie-poorie .jw-display-icon-container .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/display_play.png\');\n  width: 56px;\n  height: 56px;\n}\n.jw-ie-poorie.jw-state-idle .jw-icon-display,\n.jw-ie-poorie.jw-state-complete .jw-icon-display {\n  visibility: visible;\n}\n.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media {\n  visibility: visible;\n}\n.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media object {\n  width: 100%;\n  height: 100%;\n}\n.background-base {\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-playlist-container .jw-label .jw-icon-play {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/play_small.png\');\n  background-repeat: no-repeat;\n  background-position: left;\n}\n.jw-ie-poorie .jw-controlbar {\n  /*\n        .jw-icon-hd {\n            background-image: url(\'http://cyberplayer.bcelive.com/resource/img/hd.png\');\n            .background-base;\n            // width: 47px;\n            // height: 32px;\n        }\n        */\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-barlogo {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/baiduLogo.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 15px;\n  height: 15px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-barlogo-new {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/bce.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 13px;\n  height: 14px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-playback {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/play.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 15px;\n  height: 15px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-prev {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/prev.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 26px;\n  height: 21px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-next {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/next.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-playlist {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/playlist.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-knob {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/cue.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 10px;\n  height: 10px;\n  background-color: inherit;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-cc {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/cc.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-volume {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/volume.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-fullscreen {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/fullscreen.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controls-right {\n  display: none;\n}\n.jw-ie-poorie .jw-display-icon-container {\n  text-align: center;\n}\n.jw-ie-poorie.jw-state-playing .jw-icon-playback,\n.jw-ie-poorie.jw-state-buffering .jw-icon-playback {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/pause.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie.jw-state-buffering .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/loading.gif\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 56px;\n  height: 56px;\n}\n.jw-ie-poorie.jw-state-error .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/error.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 36px;\n  height: 32px;\n}\n.jw-ie-poorie.jw-state-complete .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/replay.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 28px;\n  height: 32px;\n}\n.jw-flashui .jw-controlbar {\n  display: none;\n}\n.jw-flashui.jw-state-buffering .jw-display-icon-container {\n  display: none;\n}\n.jw-skin-bce {\n  outline: none;\n  /* Controlbar styles */\n  /* Contains icons, time text, and slider */\n  /* Playlist container - need second background-color declaration to overwrite the .jw-background-color class */\n  /* ul container */\n  /* Playlist title */\n  /* Colors, padding for icons and text */\n  /* Styles for play button on idle */\n  /* Rail/slider styles */\n  /* Timeline and horizontal volume slider */\n  /* Volume slider */\n  /* Volume slider container */\n  /* Color of video\'s duration time */\n  /* Icon borders on the right side of the controlbar */\n  /* Icons, text and container styles for the dock, in the upper right corner */\n  /* Styles for active list items */\n  /* A min-width on the volume icon to keep the width from collapsing on toggle */\n  /* For the overlay containers */\n  /* Position and padding of slider thumbnail */\n  /* Position of remaining overlay containers */\n  /* Skip icon and text styles */\n}\n.jw-skin-bce .jw-background-color {\n  background: #000;\n}\n.jw-skin-bce .jw-controlbar {\n  border: none;\n  height: 2.5em;\n}\n.jw-skin-bce .jw-group {\n  vertical-align: middle;\n}\n.jw-skin-bce .jw-playlist {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.jw-skin-bce .jw-playlist-container {\n  left: -43%;\n  background-color: rgba(0, 0, 0, 0.5);\n  /* li list option */\n  /* play icon is always active */\n}\n.jw-skin-bce .jw-playlist-container .jw-option {\n  border-bottom: 1px solid #444;\n  /* Playlist items are black when active, or hovered */\n  /* Number color when li is hovered */\n}\n.jw-skin-bce .jw-playlist-container .jw-option:hover,\n.jw-skin-bce .jw-playlist-container .jw-option.jw-active-option {\n  background-color: black;\n}\n.jw-skin-bce .jw-playlist-container .jw-option:hover .jw-label {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-playlist-container .jw-icon-playlist {\n  margin-left: 0;\n}\n.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play:before {\n  padding-left: 0;\n}\n.jw-skin-bce .jw-icon-playlist .jw-overlay {\n  z-index: 100;\n  bottom: 1.6em;\n}\n.jw-skin-bce .jw-tooltip-title {\n  background-color: #000;\n  color: #fff;\n}\n.jw-skin-bce .jw-text {\n  color: #fff;\n}\n.jw-skin-bce .jw-button-color {\n  color: #fff;\n}\n.jw-skin-bce .jw-button-color:hover {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-toggle {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-toggle.jw-off {\n  color: #fff;\n}\n.jw-skin-bce .jw-controlbar .jw-icon:before,\n.jw-skin-bce .jw-text-elapsed,\n.jw-skin-bce .jw-text-duration {\n  padding: 0 0.7em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-barlogo-new:before {\n  padding: 0;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-prev:before {\n  padding-right: 0.25em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-playlist:before {\n  padding: 0 0.45em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-next:before {\n  padding-left: 0.25em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd:before {\n  content: none;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label {\n  color: #000;\n  background: #FFF;\n  padding: 0 4px;\n  border-radius: 2px;\n  margin: 0 0.7em;\n  margin-top: 1px;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label:hover {\n  background: #108CEE;\n}\n.jw-skin-bce .jw-icon-prev,\n.jw-skin-bce .jw-icon-next {\n  font-size: 0.7em;\n}\n.jw-skin-bce .jw-icon-prev:before {\n  border-left: 1px solid #666;\n}\n.jw-skin-bce .jw-icon-next:before {\n  border-right: 1px solid #666;\n}\n.jw-skin-bce .jw-icon-display {\n  color: #fff;\n}\n.jw-skin-bce .jw-icon-display:before {\n  padding-left: 0;\n}\n.jw-skin-bce .jw-display-icon-container,\n.jw-skin-bce .jw-error-display-icon-container {\n  border-radius: 50%;\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-rail {\n  background-color: #333;\n  box-shadow: none;\n  opacity: 0.5;\n}\n.jw-skin-bce .jw-buffer {\n  background-color: #666F82;\n  opacity: 0.5;\n}\n.jw-skin-bce .jw-progress {\n  background: #108CEE;\n  opacity: 0.3;\n}\n.jw-skin-bce .jw-knob {\n  width: 0.6em;\n  height: 0.6em;\n  background-color: #fff;\n  border-radius: 1em;\n  display: none;\n}\n.jw-skin-bce .jw-slider-volume .jw-knob {\n  display: inline-block;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-slider-container {\n  position: relative;\n  height: 0.95em;\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-rail,\n.jw-skin-bce .jw-slider-horizontal .jw-buffer,\n.jw-skin-bce .jw-slider-horizontal .jw-progress {\n  height: 0.2em;\n  top: 5px;\n  border-radius: 0;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-knob {\n  top: -0.2em;\n  top: 0;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-cue {\n  top: 0.2em;\n  width: 0.4em;\n  height: 0.4em;\n  background-color: #fff;\n  border-radius: 50%;\n  margin-left: -0.325em;\n}\n.jw-skin-bce .jw-slider-vertical .jw-rail,\n.jw-skin-bce .jw-slider-vertical .jw-buffer,\n.jw-skin-bce .jw-slider-vertical .jw-progress {\n  width: 0.2em;\n}\n.jw-skin-bce .jw-slider-vertical .jw-knob {\n  margin-bottom: -0.3em;\n}\n.jw-skin-bce .jw-volume-tip {\n  width: 100%;\n  left: -45%;\n  padding-bottom: 0.7em;\n}\n.jw-skin-bce .jw-text-duration {\n  color: #666F82;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-inline:first-child:before {\n  border: none;\n}\n.jw-skin-bce .jw-dock .jw-dock-button {\n  border-radius: 50%;\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-dock .jw-overlay {\n  border-radius: 2.5em;\n}\n.jw-skin-bce .jw-icon-tooltip .jw-active-option {\n  background-color: #108CEE;\n  color: #fff;\n}\n.jw-skin-bce .jw-time-tip,\n.jw-skin-bce .jw-menu,\n.jw-skin-bce .jw-volume-tip,\n.jw-skin-bce .jw-skip {\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-time-tip {\n  padding: 0.2em;\n  bottom: -18px;\n}\n.jw-skin-bce .jw-menu,\n.jw-skin-bce .jw-volume-tip {\n  bottom: 0.24em;\n}\n.jw-skin-bce .jw-skip {\n  padding: 0.4em;\n  border-radius: 1.75em;\n}\n.jw-skin-bce .jw-skip .jw-text,\n.jw-skin-bce .jw-skip .jw-icon-inline {\n  color: #fff;\n  line-height: 1.75em;\n}\n.jw-skin-bce .jw-skip.jw-skippable:hover .jw-text,\n.jw-skin-bce .jw-skip.jw-skippable:hover .jw-icon-inline {\n  color: #108CEE;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon:before,\n.jw-skin-bce.jw-flag-touch .jw-text-elapsed,\n.jw-skin-bce.jw-flag-touch .jw-text-duration {\n  padding: 0 0.35em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-prev:before {\n  padding: 0 0.125em 0 0.7em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-next:before {\n  padding: 0 0.7em 0 0.125em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-playlist:before {\n  padding: 0 0.225em;\n}\n.jw-skin-bce .jw-slider-time {\n  background: 0 0;\n  position: absolute;\n  top: -8px;\n  height: 8px;\n  line-height: 1em;\n}\n.jw-skin-bce .jw-slider-time .jw-slider-container {\n  height: 8px;\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-knob {\n  display: block;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container {\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-rail,\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-buffer,\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-progress {\n  height: 0.6em;\n  border-radius: 0;\n  top: 0;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-cue {\n  top: 0;\n  width: 0.6em;\n  height: 0.6em;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-elapsed {\n  padding-right: 0;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-split {\n  padding: 0 2px;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-duration {\n  padding-left: 0;\n  color: #FFF;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-center-group .jw-tooltip-time {\n  top: -7px;\n  height: 1em;\n  transform: translate(-10px);\n}\n.jw-skin-bce .jw-controlbar-center-group .jw-overlay {\n  z-index: 100;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate {\n  height: 24px;\n  line-height: 24px;\n  margin-top: -2px;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate .jw-playrate-label {\n  border: 1px solid #333;\n  line-height: 24px;\n  height: 24px;\n  vertical-align: bottom;\n}\n.jw-skin-bce .jw-media {\n  width: 100%;\n  height: 100%;\n}\n.jw-skin-bce .jw-icon-danmu {\n  position: relative;\n  z-index: 11;\n}\n.jw-skin-bce .jw-icon-danmu .jw-overlay {\n  background-color: #000c;\n  box-shadow: 0 1px 15px #0b122342;\n  position: relative;\n  position: absolute;\n  width: 300px;\n  height: 210px;\n  z-index: 1;\n  left: -250px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-title {\n  padding: 15px 10px 0px 10px;\n  display: flex;\n  justify-content: space-between;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-title div {\n  color: #fff;\n  font-size: 15px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-background-color {\n  background-color: transparent;\n}\n.jw-skin-bce .jw-icon-danmu .jw-progress {\n  background-color: #0d5de7;\n  opacity: 1;\n}\n.jw-skin-bce .jw-icon-danmu .jw-knob {\n  display: inline-block;\n  position: absolute;\n  top: 2px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-overlay:before {\n  right: 0px !important;\n  left: initial !important;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container {\n  height: 35px;\n  line-height: 35px;\n  padding: 10px;\n  position: relative;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-slider-horizontal {\n  width: 170px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-left {\n  margin-right: 8px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-left,\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-right {\n  color: #fff;\n  display: inline-block;\n  font-size: 13px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-right {\n  position: absolute;\n  right: 10px;\n}\n',""])},function(e,t){e.exports=function(){var o=[];return o.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},o.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),o.push(a))}},o}},function(e,t){e.exports="data:application/font-woff;base64,d09GRgABAAAAACFsAAoAAAAAISQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgPJRctWNtYXAAAAFUAAABSgAAAUrmWOe1Z2x5ZgAAAqAAABpgAAAaYHAJo79oZWFkAAAdAAAAADYAAAA2L+w/EWhoZWEAAB04AAAAJAAAACQJZQU1aG10eAAAHVwAAACGAAAAhpbECERsb2NhAAAd5AAAAEYAAABGdLJtIG1heHAAAB4sAAAAIAAAACAAMwFxbmFtZQAAHkwAAAGtAAABrRlSpcxwb3N0AAAf/AAAAW4AAAFumY/zTQAEBI4BkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAgAGAwAAAAAAAAAAAAEQAAAAAAAAAAAAAABQZkVkAMDmAeYjAyz/LABcAywA1AAAAAEAAAAAAxgAAAAAACAAAQAAAAMAAAADAAAAHAABAAAAAABEAAMAAQAAABwABAAoAAAABgAEAAEAAuYh5iP//wAA5gHmI///GgAZ3QABAAAAAAAAAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAZwBeA5MCzAAOAAAlLgEnIREhFS4BJzUhESEB4gIEAwGJ/TYJIAgDLP5PXggeCAIQ0QIHAvb9kgAAAAEAaf+8A5IC5QAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxrTRce0ZFe1w0RD9ulFNUlG4/P26UVEZ7XDQBUUZ7XDQ0XHtGVJRuPz9ulFRTlG4/RDRce0UAAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQ///A6ADfgCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAID/mAOAAyAABAAJAAAFESERIQEhESERAoABAP8A/gABAP8AaAOA/IADiPyAA4AAAAAAAQBA/34DwAL+AAMAAAkBEQEDwPyAA4ABPv5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAEIAAgO+A34AIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIACP++AGYCmgOXACkAUAB/AK8BKgE8AVkBcAAAEg4BIg4EFB4IPgouCSImEz4BNz4BNz4BNz4BNz4BJy4CNDUuAQcOAQcOAQcGFBUUFhceARcFJhYnLgEnJgYnLgEjJgYHIiYHDgEHFBYOAQcOAQcOAhQOAQcGFhceARc3PgE3IS4CNDUuAScqAScGNgcOAQcOAhQHDgEXHgEXHgEXMz4BNz4BNzY0PgI0PgE3JAYiBiIOBxQOFRQGFB4KMj4FMh4DMh4CMj4PNC4NIi4VIiYDDgEHBhYHDgEVBjIXHgEXNycXByMuAScuAS8BPgE3PgM3PgE3PgEzPgE/ATMXHgEXMz8BHwEHIyYWJyYiIy4BJzU3M8oGCQYYDQwHAgQDAhMPBwcFGwUNEwQFEwEEAgQCAgQCBQUCBQIIGAcI4hADAQYKBQcBBQEDAQ0NAgEDAgs5HwQbGwUKBAESEwQOBv7iCgoHBx0OCQMIAwUCCQcKAQQCCxYFAQIEAQICAQIDAQIDAQIPEAkSCjEUIQ0CJQYDAgYgDgMIHC0XCg4GCQEDAQEKAQEEAQUIERs2BwwHBQwCAQEEAQIDBv6DDwgLBQUGBQUJBgYODAUHJgkMCQgHBQYRCQQGBRAIBQEHBQUFAgMCBgoZDAMMFVYKBx0JFgw+DgoVCAkFGglCEgcPBQkMBQkEBQUIBQUBBQUBBQIGBBAJBQYKCgkFAw8nBQoGCAUFCQQFBwwGBAMNBAYFCAYJDIwHCgUHAgIBBAMDBAMJDjcBQAKHCxgJBAsIAQILEQMEBQgDAQECAwYDEiQSBDpUAwIHNwEDOwECkAkKCwIEAQ4KBwM6A5cBBhIQGRgYGB8ICiIPBQIFAgIBDAUDHgYFEAYwHQYODQYFBAcJEgX+/gYDAQMIAwYFCQEBAhM3GAIFBgUCHS8JAhQgCxcMCxULGCkPAwUCFQ4OFBEgCwcDAQEDAgQDAQEEFQsBAgMEAgUKBQMEBgcHCAQaNhUJCwcCCRsvGwIDBQIPIAUFBwMGBwoMAQEEBQIdLSUIEQgLEQoEBAQDDgQCAwQBAwUEBCE+BQUGAQUBBwUKDgQSBA0sBg8FBgsBBQ4KAgYIDxEFBwkRCQ4bDxAICg4RGwUFBAkBBAEFAgUBBgEFAQcEAgMCBQEMAQgGBwQUDgcPDDAKDQYIDQUVBQYHBQ0FBw8pCQgHDgYEEAYDDwkHAwcGBQIFAQQE/vYDAwUIAwoDBQQNBw4PBgFikwIGCgsFERY2CRoQAwYFAgICAwEBAQEDAUfXBwEFkwMCxAICAgYBCQ8MmgMAAAMAsgB+A04DawANABsALAAAATU0LwERFBcFNTQvASYFBwYdASU2NREHBh0BFAMnJgcFFxY/ATY3Nh8BFj8BATsnYQwBKiZ8DAF+fCYBKgxhJzZ9DAz+1GEnJn4CAwoJfScmYgGLjSwWN/6tDgeqbywWRwcHRxYsb6oHDgFTNxYsjQ0Bn0cHB6s4FhZIAQEDBUgWFjgAAAAABABA/5QE4gO4AAcADAAUABkAABcmJzY3FhcGJRY3NgEDJic2NxYXBgEAFxY38qMPD6OjDw/+335+PALBPaIPD6KjDw/75AK+PX5+OA+kog8PoqQlaGg7A4H8EA+kog8PoqQD4fx+OmhoAAAACgAN/zQGHAMkACoALgAyADYAOgA+AEIAUQBhAHgAAAUyFhcOASMhLgEnET4BNyEWFxYXFQYHBgcmJyY9ASYnJichBgcGBxEeARcBMzUjFyE1IQEzNSMXITUhEyE1IQczNSMlFhcWFw4BByYnJic2NzYTNjc2NyYnJicGBwYHFhcWExYVFA8BBiMiLwEmNTQ3NjMyHwE3NjIDYhIVAQEVEv1iS2kDA2lLA7pLNDUCAQoLERIKCgIfHyn8RiseHwEBPSsBG01NmwE2/sr+fE1NnAE1/suaATb+yppNTQNoelNSAwOlentSUwMDU1J7WT09AgI9PVlaPTwDAzw9/AwMog0PDwtuCwsNDw8MUYgNHjEVERMVA2lLAjZLaQICNTRLMhILCgEBCgsSMiofHgICHh8q/corPAICH05OTv7wTU1N/vFNTU3CA1JTenulAwNTUnt6U1L+CwM9PFpaPD0CAj08Wlo8PQEsDBAPC6QLC24LDw8NCwtSiAwAAAAKAA3/NAYcAyQAKgAuADIANgA6AD4AQgBRAF4AawAABTIWFw4BIyEuAScRPgE3IRYXFhcVBgcGByYnJj0BJicmJyEGBwYHER4BFwEzNSMXITUhATM1IxchNSERMzUjFyE1ISUWFxYXDgEHJicmJzY3NhMyNzY3AQYHBhUWFxY3Njc2NSYnJiciBwYHA2ISFQEBFRL9YktpAwNpSwO6SzQ1AgEKCxESCgoCHx8p/EYrHh8BAT0rARtNTZsBNv7K/nxNTZwBNf7LTU2aATb+ygLOelNSAwOlentSUwMDU1J7HRoaF/7dDAcIAzw9/BgODQI9PVknIiIdMRURExUDaUsCNktpAgI1NEsyEgsKAQEKCxIyKh8eAgIeHyr9yis8AgIfTk5O/vBNTU3+8U1NTcIDUlN6e6UDA1NSe3pTUv4LCAcNASMYGhodWjw9SxsjIydaPD0CDQ4YAAIAEv80BHIDJAAVACkAAAEyFxYXESMRIREhFSEiJyYnETY3NjMBMhcWFxEGBwYjISInJjURNDc2MwQ5GBAQAXD8gAFQ/ncXDxABARAPFwPwGBAQAQEQEBj+QhgSDw8SGAMkEBEX/ngBT/zxcBARFwOAFxEQ/dAQEBj+sBcREBARFwFQGBAQAAABABEAOAL9AyQALgAACQEWFRQHBgcGIyImJwkBBgcGIyInJicmNTQ3CQEmNTQ3NjMyFwkBNjMyFxYVFAcBvAE1CwsGBgcIBw0F/sr+ygYIBQgHBgcGCwsBNv7KCwsMDhALATYBNgsQDgwLCwGv/skLEA4LBgIEBgYBNv7KBgIEBAIGCw4QCwE2ATYMDw4MCwv+ygE2CwsLDw8KAAACABD/NAPYAzIACwA0AAABFhcVBgchJic1NjcDNDM3NhcWDwE3NhcWFxYXFgcGJyY3NicmJyYnJgcjBxcWBwYvASYnNgJMgw0Ng/5TgwwMgxABoiEjHRtXwXptbkVFDAsxFSolDScJCTg3V1hiArdWHRohI60QAQEBQQyD74INDYLvgwwBJAGvHRohI14BBDg3ZmZ6enAnDhUqWmJhUlAtLQMBUSEjHRuhDhcTAAAAAAIAKv80A6oDMgALADQAAAEWFxUGByEmJzU2NwAXBg8BBicmPwEnIyYHBgcGBwYXFgcGJyY3Njc2NzYfAScmNzYfATIVAxqDDQ2D/lODDAyDAhEBARCtIyEaHVa3AmJYVzc4CQknDSUqFTELDEVFbm16wVcbHSMhogEBQQyD74INDYLvgwwBGBMXDqEbHSMhUQEDLS1QUmFiWioVDidwenpmZjc4BAFeIyEaHa8BAAAAEAAU/zQEHgMkAAMABwALAA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUBESMRBSURJQURBREUAZ7+jAFL/uQTAY4WFhYWFhYWFhYWFhYWFhYWFhYWAaMV/s8Bnf5jAXT+tcwD8JP9NgMJ/LhqAnT9TAL0/QwDEUxMZExMZExMZExMaU1NY0xMZUxMZExMYUxMZExMA2n9DAL0FZP8EJM/A0hq/YoAAA4AFP8wBBQDJAADAAcACwAPABMAFwAbAB8AIwAnACsALwAzADcAABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUTJRElFAGe/owBS/7kEwGOFhYWFhYWFhYWFhYWFhYWFhYWFlMBnf5jzAPwk/02Awn8uGoCdP1MAvT9DAMRTExkTExkTExkTExpTU1jTExlTExkTExhTExkTEwDUJP8EJMAAQAAAAEAAI/vQAJfDzz1CAsEAAAAAADheX2WAAAAAOF5fZb/vv8wBhwDuAAAAAgAAgAAAAAAAAABAAADLP8sAFwGLP++/7sGHAABAAAAAAAAAAAAAAAAAAAAIQQAAGcD5gBpBQAAQAUAAEAGAABABgAAQAQAAOAEgABABAAAQAYAAEAGAAA9A+AAQwSAAEYEAACABAAAQASAAEoDgABDBMAAQATAAEAEAABABgAAQAQAAEIEAABEAlX/vgQAALIFIgBABiwADQYsAA0EggASBBoAEQPoABAD6AAqBC4AFAAUAAAAAAAeAE4AmgD2AhwDSANqA54DwAQ6BLwFfgWWBbAFwAXYBhYGKAaKBqwG5gccB04JNgmCCbgKdgsiC2YLtAwMDGQM0g0wAAAAAQAAACIBcQAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAlgABAAAAAAABAAoAAAABAAAAAAACAAYACgABAAAAAAADABsAEAABAAAAAAAEAAoAKwABAAAAAAAFAB4ANQABAAAAAAAGAAoAUwADAAEECQABABQAXQADAAEECQACAAwAcQADAAEECQADADYAfQADAAEECQAEABQAswADAAEECQAFADwAxwADAAEECQAGABQBA2ZvbnRlZGl0b3JNZWRpdW1Gb250RWRpdG9yIDEuMCA6IGZvbnRlZGl0b3Jmb250ZWRpdG9yVmVyc2lvbiAxLjA7IEZvbnRFZGl0b3IgKHYxLjApZm9udGVkaXRvcgBmAG8AbgB0AGUAZABpAHQAbwByAE0AZQBkAGkAdQBtAEYAbwBuAHQARQBkAGkAdABvAHIAIAAxAC4AMAAgADoAIABmAG8AbgB0AGUAZABpAHQAbwByAGYAbwBuAHQAZQBkAGkAdABvAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADsAIABGAG8AbgB0AEUAZABpAHQAbwByACAAKAB2ADEALgAwACkAZgBvAG4AdABlAGQAaQB0AG8AcgAAAAACAAAAAAAAADIAAAAAAAAAAAAAAAAAAAAAAAAAAAAiACIAAAECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEgASEBIgd1bmlFNjAxB3VuaUU2MDIHdW5pRTYwMwd1bmlFNjA0B3VuaUU2MDUHdW5pRTYwNgd1bmlFNjA3B3VuaUU2MDgHdW5pRTYwOQd1bmlFNjBBB3VuaUU2MEIHdW5pRTYwQwd1bmlFNjBEB3VuaUU2MEUHdW5pRTYwRgd1bmlFNjEwB3VuaUU2MTEHdW5pRTYxMgd1bmlFNjEzB3VuaUU2MTQHdW5pRTYxNQd1bmlFNjE2B3VuaUU2MTcHdW5pRTYxOAd1bmlFNjE5B3VuaUU2MUEHdW5pRTYxQgd1bmlFNjFDB3VuaUU2MUQHdW5pRTYxRQd1bmlFNjFGB3VuaUU2MjAHdW5pRTYyMQAA"},function(e,t){e.exports="data:application/octet-stream;base64,AAEAAAAKAIAAAwAgT1MvMjyUXLUAAACsAAAAYGNtYXDmWOe1AAABDAAAAUpnbHlmcAmjvwAAAlgAABpgaGVhZC/sPxEAABy4AAAANmhoZWEJZQU1AAAc8AAAACRobXR4lsQIRAAAHRQAAACGbG9jYXSybSAAAB2cAAAARm1heHAAMwFxAAAd5AAAACBuYW1lGVKlzAAAHgQAAAGtcG9zdJmP800AAB+0AAABbgAEBI4BkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAgAGAwAAAAAAAAAAAAEQAAAAAAAAAAAAAABQZkVkAMDmAeYjAyz/LABcAywA1AAAAAEAAAAAAxgAAAAAACAAAQAAAAMAAAADAAAAHAABAAAAAABEAAMAAQAAABwABAAoAAAABgAEAAEAAuYh5iP//wAA5gHmI///GgAZ3QABAAAAAAAAAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAZwBeA5MCzAAOAAAlLgEnIREhFS4BJzUhESEB4gIEAwGJ/TYJIAgDLP5PXggeCAIQ0QIHAvb9kgAAAAEAaf+8A5IC5QAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxrTRce0ZFe1w0RD9ulFNUlG4/P26UVEZ7XDQBUUZ7XDQ0XHtGVJRuPz9ulFRTlG4/RDRce0UAAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQ///A6ADfgCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAID/mAOAAyAABAAJAAAFESERIQEhESERAoABAP8A/gABAP8AaAOA/IADiPyAA4AAAAAAAQBA/34DwAL+AAMAAAkBEQEDwPyAA4ABPv5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAEIAAgO+A34AIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIACP++AGYCmgOXACkAUAB/AK8BKgE8AVkBcAAAEg4BIg4EFB4IPgouCSImEz4BNz4BNz4BNz4BNz4BJy4CNDUuAQcOAQcOAQcGFBUUFhceARcFJhYnLgEnJgYnLgEjJgYHIiYHDgEHFBYOAQcOAQcOAhQOAQcGFhceARc3PgE3IS4CNDUuAScqAScGNgcOAQcOAhQHDgEXHgEXHgEXMz4BNz4BNzY0PgI0PgE3JAYiBiIOBxQOFRQGFB4KMj4FMh4DMh4CMj4PNC4NIi4VIiYDDgEHBhYHDgEVBjIXHgEXNycXByMuAScuAS8BPgE3PgM3PgE3PgEzPgE/ATMXHgEXMz8BHwEHIyYWJyYiIy4BJzU3M8oGCQYYDQwHAgQDAhMPBwcFGwUNEwQFEwEEAgQCAgQCBQUCBQIIGAcI4hADAQYKBQcBBQEDAQ0NAgEDAgs5HwQbGwUKBAESEwQOBv7iCgoHBx0OCQMIAwUCCQcKAQQCCxYFAQIEAQICAQIDAQIDAQIPEAkSCjEUIQ0CJQYDAgYgDgMIHC0XCg4GCQEDAQEKAQEEAQUIERs2BwwHBQwCAQEEAQIDBv6DDwgLBQUGBQUJBgYODAUHJgkMCQgHBQYRCQQGBRAIBQEHBQUFAgMCBgoZDAMMFVYKBx0JFgw+DgoVCAkFGglCEgcPBQkMBQkEBQUIBQUBBQUBBQIGBBAJBQYKCgkFAw8nBQoGCAUFCQQFBwwGBAMNBAYFCAYJDIwHCgUHAgIBBAMDBAMJDjcBQAKHCxgJBAsIAQILEQMEBQgDAQECAwYDEiQSBDpUAwIHNwEDOwECkAkKCwIEAQ4KBwM6A5cBBhIQGRgYGB8ICiIPBQIFAgIBDAUDHgYFEAYwHQYODQYFBAcJEgX+/gYDAQMIAwYFCQEBAhM3GAIFBgUCHS8JAhQgCxcMCxULGCkPAwUCFQ4OFBEgCwcDAQEDAgQDAQEEFQsBAgMEAgUKBQMEBgcHCAQaNhUJCwcCCRsvGwIDBQIPIAUFBwMGBwoMAQEEBQIdLSUIEQgLEQoEBAQDDgQCAwQBAwUEBCE+BQUGAQUBBwUKDgQSBA0sBg8FBgsBBQ4KAgYIDxEFBwkRCQ4bDxAICg4RGwUFBAkBBAEFAgUBBgEFAQcEAgMCBQEMAQgGBwQUDgcPDDAKDQYIDQUVBQYHBQ0FBw8pCQgHDgYEEAYDDwkHAwcGBQIFAQQE/vYDAwUIAwoDBQQNBw4PBgFikwIGCgsFERY2CRoQAwYFAgICAwEBAQEDAUfXBwEFkwMCxAICAgYBCQ8MmgMAAAMAsgB+A04DawANABsALAAAATU0LwERFBcFNTQvASYFBwYdASU2NREHBh0BFAMnJgcFFxY/ATY3Nh8BFj8BATsnYQwBKiZ8DAF+fCYBKgxhJzZ9DAz+1GEnJn4CAwoJfScmYgGLjSwWN/6tDgeqbywWRwcHRxYsb6oHDgFTNxYsjQ0Bn0cHB6s4FhZIAQEDBUgWFjgAAAAABABA/5QE4gO4AAcADAAUABkAABcmJzY3FhcGJRY3NgEDJic2NxYXBgEAFxY38qMPD6OjDw/+335+PALBPaIPD6KjDw/75AK+PX5+OA+kog8PoqQlaGg7A4H8EA+kog8PoqQD4fx+OmhoAAAACgAN/zQGHAMkACoALgAyADYAOgA+AEIAUQBhAHgAAAUyFhcOASMhLgEnET4BNyEWFxYXFQYHBgcmJyY9ASYnJichBgcGBxEeARcBMzUjFyE1IQEzNSMXITUhEyE1IQczNSMlFhcWFw4BByYnJic2NzYTNjc2NyYnJicGBwYHFhcWExYVFA8BBiMiLwEmNTQ3NjMyHwE3NjIDYhIVAQEVEv1iS2kDA2lLA7pLNDUCAQoLERIKCgIfHyn8RiseHwEBPSsBG01NmwE2/sr+fE1NnAE1/suaATb+yppNTQNoelNSAwOlentSUwMDU1J7WT09AgI9PVlaPTwDAzw9/AwMog0PDwtuCwsNDw8MUYgNHjEVERMVA2lLAjZLaQICNTRLMhILCgEBCgsSMiofHgICHh8q/corPAICH05OTv7wTU1N/vFNTU3CA1JTenulAwNTUnt6U1L+CwM9PFpaPD0CAj08Wlo8PQEsDBAPC6QLC24LDw8NCwtSiAwAAAAKAA3/NAYcAyQAKgAuADIANgA6AD4AQgBRAF4AawAABTIWFw4BIyEuAScRPgE3IRYXFhcVBgcGByYnJj0BJicmJyEGBwYHER4BFwEzNSMXITUhATM1IxchNSERMzUjFyE1ISUWFxYXDgEHJicmJzY3NhMyNzY3AQYHBhUWFxY3Njc2NSYnJiciBwYHA2ISFQEBFRL9YktpAwNpSwO6SzQ1AgEKCxESCgoCHx8p/EYrHh8BAT0rARtNTZsBNv7K/nxNTZwBNf7LTU2aATb+ygLOelNSAwOlentSUwMDU1J7HRoaF/7dDAcIAzw9/BgODQI9PVknIiIdMRURExUDaUsCNktpAgI1NEsyEgsKAQEKCxIyKh8eAgIeHyr9yis8AgIfTk5O/vBNTU3+8U1NTcIDUlN6e6UDA1NSe3pTUv4LCAcNASMYGhodWjw9SxsjIydaPD0CDQ4YAAIAEv80BHIDJAAVACkAAAEyFxYXESMRIREhFSEiJyYnETY3NjMBMhcWFxEGBwYjISInJjURNDc2MwQ5GBAQAXD8gAFQ/ncXDxABARAPFwPwGBAQAQEQEBj+QhgSDw8SGAMkEBEX/ngBT/zxcBARFwOAFxEQ/dAQEBj+sBcREBARFwFQGBAQAAABABEAOAL9AyQALgAACQEWFRQHBgcGIyImJwkBBgcGIyInJicmNTQ3CQEmNTQ3NjMyFwkBNjMyFxYVFAcBvAE1CwsGBgcIBw0F/sr+ygYIBQgHBgcGCwsBNv7KCwsMDhALATYBNgsQDgwLCwGv/skLEA4LBgIEBgYBNv7KBgIEBAIGCw4QCwE2ATYMDw4MCwv+ygE2CwsLDw8KAAACABD/NAPYAzIACwA0AAABFhcVBgchJic1NjcDNDM3NhcWDwE3NhcWFxYXFgcGJyY3NicmJyYnJgcjBxcWBwYvASYnNgJMgw0Ng/5TgwwMgxABoiEjHRtXwXptbkVFDAsxFSolDScJCTg3V1hiArdWHRohI60QAQEBQQyD74INDYLvgwwBJAGvHRohI14BBDg3ZmZ6enAnDhUqWmJhUlAtLQMBUSEjHRuhDhcTAAAAAAIAKv80A6oDMgALADQAAAEWFxUGByEmJzU2NwAXBg8BBicmPwEnIyYHBgcGBwYXFgcGJyY3Njc2NzYfAScmNzYfATIVAxqDDQ2D/lODDAyDAhEBARCtIyEaHVa3AmJYVzc4CQknDSUqFTELDEVFbm16wVcbHSMhogEBQQyD74INDYLvgwwBGBMXDqEbHSMhUQEDLS1QUmFiWioVDidwenpmZjc4BAFeIyEaHa8BAAAAEAAU/zQEHgMkAAMABwALAA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUBESMRBSURJQURBREUAZ7+jAFL/uQTAY4WFhYWFhYWFhYWFhYWFhYWFhYWAaMV/s8Bnf5jAXT+tcwD8JP9NgMJ/LhqAnT9TAL0/QwDEUxMZExMZExMZExMaU1NY0xMZUxMZExMYUxMZExMA2n9DAL0FZP8EJM/A0hq/YoAAA4AFP8wBBQDJAADAAcACwAPABMAFwAbAB8AIwAnACsALwAzADcAABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUTJRElFAGe/owBS/7kEwGOFhYWFhYWFhYWFhYWFhYWFhYWFlMBnf5jzAPwk/02Awn8uGoCdP1MAvT9DAMRTExkTExkTExkTExpTU1jTExlTExkTExhTExkTEwDUJP8EJMAAQAAAAEAAI/vQAJfDzz1CAsEAAAAAADheX2WAAAAAOF5fZb/vv8wBhwDuAAAAAgAAgAAAAAAAAABAAADLP8sAFwGLP++/7sGHAABAAAAAAAAAAAAAAAAAAAAIQQAAGcD5gBpBQAAQAUAAEAGAABABgAAQAQAAOAEgABABAAAQAYAAEAGAAA9A+AAQwSAAEYEAACABAAAQASAAEoDgABDBMAAQATAAEAEAABABgAAQAQAAEIEAABEAlX/vgQAALIFIgBABiwADQYsAA0EggASBBoAEQPoABAD6AAqBC4AFAAUAAAAAAAeAE4AmgD2AhwDSANqA54DwAQ6BLwFfgWWBbAFwAXYBhYGKAaKBqwG5gccB04JNgmCCbgKdgsiC2YLtAwMDGQM0g0wAAAAAQAAACIBcQAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAlgABAAAAAAABAAoAAAABAAAAAAACAAYACgABAAAAAAADABsAEAABAAAAAAAEAAoAKwABAAAAAAAFAB4ANQABAAAAAAAGAAoAUwADAAEECQABABQAXQADAAEECQACAAwAcQADAAEECQADADYAfQADAAEECQAEABQAswADAAEECQAFADwAxwADAAEECQAGABQBA2ZvbnRlZGl0b3JNZWRpdW1Gb250RWRpdG9yIDEuMCA6IGZvbnRlZGl0b3Jmb250ZWRpdG9yVmVyc2lvbiAxLjA7IEZvbnRFZGl0b3IgKHYxLjApZm9udGVkaXRvcgBmAG8AbgB0AGUAZABpAHQAbwByAE0AZQBkAGkAdQBtAEYAbwBuAHQARQBkAGkAdABvAHIAIAAxAC4AMAAgADoAIABmAG8AbgB0AGUAZABpAHQAbwByAGYAbwBuAHQAZQBkAGkAdABvAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADsAIABGAG8AbgB0AEUAZABpAHQAbwByACAAKAB2ADEALgAwACkAZgBvAG4AdABlAGQAaQB0AG8AcgAAAAACAAAAAAAAADIAAAAAAAAAAAAAAAAAAAAAAAAAAAAiACIAAAECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEgASEBIgd1bmlFNjAxB3VuaUU2MDIHdW5pRTYwMwd1bmlFNjA0B3VuaUU2MDUHdW5pRTYwNgd1bmlFNjA3B3VuaUU2MDgHdW5pRTYwOQd1bmlFNjBBB3VuaUU2MEIHdW5pRTYwQwd1bmlFNjBEB3VuaUU2MEUHdW5pRTYwRgd1bmlFNjEwB3VuaUU2MTEHdW5pRTYxMgd1bmlFNjEzB3VuaUU2MTQHdW5pRTYxNQd1bmlFNjE2B3VuaUU2MTcHdW5pRTYxOAd1bmlFNjE5B3VuaUU2MUEHdW5pRTYxQgd1bmlFNjFDB3VuaUU2MUQHdW5pRTYxRQd1bmlFNjFGB3VuaUU2MjAHdW5pRTYyMQAA"},function(e,t,i){var n,r,a,l={},u=(n=function(){return window&&document&&document.all&&!window.atob},function(){return r=void 0===r?n.apply(this,arguments):r}),o=(a={},function(e,t){if("function"==typeof e)return e();if(void 0===a[e]){t=function(e,t){return(t||document).querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}a[e]=t}return a[e]}),s=null,c=0,h=[],d=i(270);function f(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=l[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(v(i.parts[a],t))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(v(i.parts[a],t));l[i.id]={id:i.id,refs:1,parts:o}}}}function p(e,t){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0],a={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}function m(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=h[h.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");i=o(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){null!==e.parentNode&&(e.parentNode.removeChild(e),0<=(e=h.indexOf(e)))&&h.splice(e,1)}function _(e){var t,n=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce&&(t=i.nc)&&(e.attrs.nonce=t),y(n,e.attrs),m(e,n),n}function y(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function v(t,e){var n,i,r,a,o;if(e.transform&&t.css){if(!(a="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=a}return r=e.singleton?(a=c++,n=s=s||_(e),i=b.bind(null,n,a,!1),b.bind(null,n,a,!0)):t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=e,o=document.createElement("link"),void 0===a.attrs.type&&(a.attrs.type="text/css"),a.attrs.rel="stylesheet",y(o,a.attrs),m(a,o),n=o,i=function(e,t,n){var i=n.css,n=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&n;(t.convertToAbsoluteUrls||r)&&(i=d(i));n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");t=new Blob([i],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(t),r&&URL.revokeObjectURL(r)}.bind(null,n,e),function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=_(e),i=function(e,t){var n=t.css,t=t.media;t&&e.setAttribute("media",t);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){g(n)}),i(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||i(t=e):r()}}e.exports=function(e,o){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(o=o||{}).attrs="object"==typeof o.attrs?o.attrs:{},o.singleton||"boolean"==typeof o.singleton||(o.singleton=u()),o.insertInto||(o.insertInto="head"),o.insertAt||(o.insertAt="bottom");var s=p(e,o);return f(s,o),function(e){for(var t=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,t.push(r)}e&&f(p(e,o),o);for(var r,n=0;n<t.length;n++)if(0===(r=t[n]).refs){for(var a=0;a<r.parts.length;a++)r.parts[a]();delete l[r.id]}}};E=[];var E,A=function(e,t){return E[e]=t,E.filter(Boolean).join("\n")};function b(e,t,n,i){var n=n?"":i.css;e.styleSheet?e.styleSheet.cssText=A(t,n):(i=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i))}},function(e,t){e.exports=function(e){var n,i,t="undefined"!=typeof window&&window.location;if(t)return e&&"string"==typeof e?(n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/"),e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){t=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(t)?e:(e=0===t.indexOf("//")?t:0===t.indexOf("/")?n+t:i+t.replace(/^\.\//,""),"url("+JSON.stringify(e)+")")})):e;throw new Error("fixUrls requires window.location")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=n(22),r=n.n(i);function a(){return r()('/*! WebPlayer built @2024/5/8 16:07:54 */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,r){"use strict";r.r(t);const n={WASM_LOAD_FINISH:0,DECRYPE_CONTENT:1,WAMS_ERROR:111},o={GET_DECRYPE_CONTENT:0,DESTROR_WAMS:1,LOAD_WAMS_JS:111};self.Module={onRuntimeInitialized:function(){self.decrype&&self.decrype.onWasmLoaded()},onAbort:function(e){self.postMessage({t:n.WAMS_ERROR,data:{msg:""+e,errorType:(void 0).NOT_SUPPORT,event:(void 0).WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}},self.wasmPath=null;self.onmessage=e=>{var t=e["data"];switch(t.t){case o.GET_DECRYPE_CONTENT:self.decrype.getDecrypeContent(t.encrypeKey);break;case o.LOAD_WAMS_JS:self.decrype.loadJs(t.pathUrl);break;case o.DESTROR_WAMS:self.decrype.destroy()}},self.decrype=new class{constructor(){this.wasmLoaded=!1,this.privateKey="LbhexgsgihBYYM8rBQUNM9RAYjXdFPdeiwTmww+Mw2gSCXDqexH6B+kfIglVjnAH\\nX9UIgPVtu10e4Ls=\\n"}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:n.WASM_LOAD_FINISH}))}loadJs(e){self.wasmPath=e,self.importScripts(e+"license.js")}getDecrypeContent(e){e=Module.getLicenseStr(e,this.privateKey);self.postMessage({t:n.DECRYPE_CONTENT,data:e})}destroy(){Module.HEAP8&&Module.HEAP8.buffer&&(Module.HEAP8.buffer=null)}}}]);',"Worker",void 0,n.p+"license.worker.worker.js")}const o={LICENSE_ERROR:"linceseError",NOT_SUPPORT:"NotSupport",CHECK_PASS:"CheckPass",EXPIRED_COUNT_DOWM:"expiredCountDown"},s={NO_APPID:"noAppid",NO_LICENSE:"noLicense",ERROR_LICENSE_URL:"errorLicenseUrl",WASM_ERROR:"wasmError",CHECK_SUCCESS:"checkSuccess",DOMAIN_FAIL:"domainFail",IS_EXPIRED:"isExpired",FETCH_ERROR:"fetchError",BASE_FUNC_NOT_SUPPORT:"baseFuncNotSupport",EXPIRED_COUNT_DOWM:"expiredCountDown"},l={CHECK_SUCCESS:0,NO_APPID:51,NO_LICENSE:52,ERROR_LICENSE_URL:53,DOMAIN_FAIL:54,IS_EXPIRED:55,FETCH_ERROR:56,BASE_FUNC_NOT_SUPPORT:57,EXPIRED_COUNT_DOWM:58},u={NO_APPID:"NO_APPID",NO_LICENSE:"NO_LICENSE",ERROR_LICENSE_URL:"ERROR_LICENSE_URL",DOMAIN_FAIL:"DOMAIN_FAIL",CHECK_SUCCESS:"CHECK_SUCCESS",IS_EXPIRED:"IS_EXPIRED",FETCH_ERROR:"FETCH_ERROR",BASE_FUNC_NOT_SUPPORT:"BASE_FUNC_NOT_SUPPORT",EXPIRED_COUNT_DOWM:"EXPIRED_COUNT_DOWM"},c={WASM_LOAD_FINISH:0,DECRYPE_CONTENT:1,WAMS_ERROR:111},h={GET_DECRYPE_CONTENT:0,DESTROR_WAMS:1,LOAD_WAMS_JS:111};var d=n(19),i=n(68),f=n.n(i),i=n(5),p=n.n(i);t.default=class{constructor(e,t){this.licenseUrl=e,this.appid=t,this.worker=null,this.onMessage=null,this.localDomain=["127.0.0.1","localhost"],this.mediaInfo=null,this.isHighVersion=null}async init(){var e;this.localDomain.includes(location.hostname)||/^(\d{1,3}\.){3}\d{1,3}$/.test(location.hostname)?this.onMessage&&this.onMessage({code:l.CHECK_SUCCESS,event:s.CHECK_SUCCESS}):this.appid?this.licenseUrl?(e=this.licenseUrl.split("/").pop(),`player${f()(this.appid)}.license`!=e?this.onMessage&&this.onMessage(this.setError(u.ERROR_LICENSE_URL,o.LICENSE_ERROR)):this.loadlicenseWasm()):this.onMessage&&this.onMessage(this.setError(u.NO_LICENSE,o.LICENSE_ERROR)):this.onMessage&&this.onMessage(this.setError(u.NO_APPID,o.LICENSE_ERROR))}async getlicenseContent(){var e=await fetch(this.licenseUrl);200!==e.status?this.onMessage(this.setError(u.FETCH_ERROR,o.LICENSE_ERROR)):200===e.status&&(e=await e.text(),this.worker.postMessage({t:h.GET_DECRYPE_CONTENT,encrypeKey:e}))}loadlicenseWasm(){this.worker=new a;var e=Object(d.getPlayerPath)();this.worker.postMessage({t:h.LOAD_WAMS_JS,pathUrl:e}),this.worker.onmessage=e=>{var t=e["data"];switch(t.t){case c.WASM_LOAD_FINISH:this.getlicenseContent();break;case c.DECRYPE_CONTENT:this.checkDecrypeContent(t.data);break;case c.WAMS_ERROR:this.onMessage&&this.onMessage(t.data)}}}checkDecrypeContent(e){var{vc:e,expireTime:t,funcCodeList:n}=JSON.parse(e);if(!this._checkHostName(e))return this.onMessage&&this.onMessage(this.setError(u.DOMAIN_FAIL,o.LICENSE_ERROR));this.isHighVersion=!!(n&&1<n.length),this._checkFuncList();return Date.now()-6048e5>new Date(t)?this.onMessage&&this.onMessage(this.setError(u.IS_EXPIRED,o.LICENSE_ERROR)):Date.now()>new Date(t)?(e=parseInt((Date.now()-new Date(t))/864e5),this.onMessage&&this.onMessage(this.setError(u.EXPIRED_COUNT_DOWM,o.LICENSE_ERROR,e))):void(this.onMessage&&this.onMessage(this.setError(u.CHECK_SUCCESS,o.CHECK_PASS)))}_checkHostName(t){var n=[],i=location.hostname.split(".");let r=!1;for(let t=0;t<i.length;t++){var a="";for(let e=t+1;e<i.length;e++)a=a?a+"."+i[e]:i[t]+"."+i[e];a&&(0!=t&&(a="*."+a),n.push(a))}for(let e=0;e<n.length;e++)if(t==f()(n[e]+f()(this.appid))){r=!0;break}return r}setMediaData(e){this.mediaInfo=e,this._checkFuncList()}_checkFuncList(){var e;this.mediaInfo&&!this.isHighVersion&&(e=this.mediaInfo,0==this.isHighVersion)&&(e.formatType&&(e.formatType==p.a.PLAYER_IN_TYPE_TS||e.videoCodec==p.a.CODEC_H265||e.videoCodec==p.a.CODEC_AV1)||e.isVR)&&this.onMessage&&this.onMessage(this.setError(u.BASE_FUNC_NOT_SUPPORT,o.LICENSE_ERROR))}setError(e,t,n){return{code:l[e],event:s[e],errorType:t,type:e,expireDay:n}}destroy(){this.worker&&(this.worker.postMessage({t:h.DESTROR_WAMS}),this.worker)&&this.worker.terminate(),this.worker=null,this.onMessage=null,this.mediaInfo=null,this.isHighVersion=null}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(138)}],i={},r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=333);function r(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var n,i});