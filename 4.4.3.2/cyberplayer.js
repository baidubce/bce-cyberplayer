/*! WebPlayer built @6/25/2024, 8:30:15 PM */
var e,t;e=window,t=function(){return t=[function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));let i={WASM_LOAD_FINISH:0,DECODE_FINISH:1,DEOCDE_INIT_FINISH:2,SET_FRAME:3,WASM_POST_RUN:11,DEMUXER_INIT_FINISH:12,POST_DEMUXER_INFO:13,DEMUXER_FINISH:14,DEMUXER_ERROR:20,BATCH_FINISH_FLAG:21,RELEASE_DECODE_FINISH:22,WAMS_ERROR:111},r={INIT_DECODER:0,DECODE_VIDEO:1,RETURN_VIDEO_BUFFER:2,INIT_DEMUXER:11,DEMUXER_BOX:12,GET_DEMUXER_INFO:13,RELEASE_DECODE:14,RELEASE_DEMUXER:15,FINISH_FLAG:16,LOAD_WAMS_JS:111},a={WASM_LOAD_FINISH:0,SNIFF_INIT_FINISH:1,POST_PROBEDATA:2,POST_NALUDATA:3,POST_AACDATA:4,POST_FRAMEDATA:5,POST_NALU_LENGTH:6,WAMS_ERROR:111},o={INIT_DECODER:0,PUSH_SNIFF_DATA:1,GET_SNIFF_PACKET:2,DECODE_VIDEO:3,GET_NALU_LENGTH:4,GET_SNIFF_FLV_PACKE:5,GET_BUFFER_LENGTH:6,PUSH_SNIFF_FLV_PACKET:7,RELEASE_SNIFF:8,LOAD_WAMS_JS:111}},function(e,t,n){n=[n(15),n(2),n(98),n(72),n(34),n(60),n(99),n(145),n(46),n(146),n(147),n(148)],t=function(e,t,n,i,r,a,o,s,l,u,c,h){var d={log:function(){window.console&&console.log},between:function(e,t,n){return Math.max(Math.min(e,n),t)},foreach:function(e,t){for(var n in e)("function"!==d.typeOf(e.hasOwnProperty)||e.hasOwnProperty(n))&&t(n,e[n])}};return d.indexOf=t.indexOf,d.noop=function(){},d.seconds=e.seconds,d.prefix=e.prefix,d.suffix=e.suffix,t.extend(d,a,o,l,n,s,i,r,u,c,h),d}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){function e(e){return null==e?A.identity:A.isFunction(e)?e:A.property(e)}function t(t){return function(n,i,r){var a={};return i=e(i),E(n,(function(e,o){o=i.call(r,e,o,n),t(a,o,e)})),a}}function n(){}var i={},r=Array.prototype,a=Object.prototype,o=Function.prototype,s=r.slice,l=r.concat,u=a.toString,c=a.hasOwnProperty,h=r.map,d=r.reduce,f=r.forEach,p=r.filter,m=r.every,g=r.some,_=r.indexOf,y=(a=Array.isArray,Object.keys),v=o.bind,A=function(e){return e instanceof A?e:this instanceof A?void 0:new A(e)},E=A.each=A.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,a=e.length;r<a;r++)if(t.call(n,e[r],r,e)===i)return}else{var o=A.keys(e);for(r=0,a=o.length;r<a;r++)if(t.call(n,e[o[r]],o[r],e)===i)return}return e},b=(A.map=A.collect=function(e,t,n){var i=[];if(null!=e){if(h&&e.map===h)return e.map(t,n);E(e,(function(e,r,a){i.push(t.call(n,e,r,a))}))}return i},A.reduce=A.foldl=A.inject=function(e,t,n,i){var r=2<arguments.length;if(null==e&&(e=[]),d&&e.reduce===d)return i&&(t=A.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(E(e,(function(e,a,o){r?n=t.call(i,n,e,a,o):(n=e,r=!0)})),r)return n;throw new TypeError("Reduce of empty array with no initial value")},A.find=A.detect=function(e,t,n){var i;return b(e,(function(e,r,a){if(t.call(n,e,r,a))return i=e,!0})),i},A.filter=A.select=function(e,t,n){var i=[];if(null!=e){if(p&&e.filter===p)return e.filter(t,n);E(e,(function(e,r,a){t.call(n,e,r,a)&&i.push(e)}))}return i},A.reject=function(e,t,n){return A.filter(e,(function(e,i,r){return!t.call(n,e,i,r)}),n)},A.compact=function(e){return A.filter(e,A.identity)},A.every=A.all=function(e,t,n){t=t||A.identity;var r=!0;return null==e?r:m&&e.every===m?e.every(t,n):(E(e,(function(e,a,o){if(!(r=r&&t.call(n,e,a,o)))return i})),!!r)},A.some=A.any=function(e,t,n){t=t||A.identity;var r=!1;return null==e?r:g&&e.some===g?e.some(t,n):(E(e,(function(e,a,o){if(r=r||t.call(n,e,a,o))return i})),!!r)}),w=(A.size=function(e){return null==e?0:(e.length===+e.length?e:A.keys(e)).length},A.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},A.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},A.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},A.groupBy=t((function(e,t,n){A.has(e,t)?e[t].push(n):e[t]=[n]})),A.indexBy=t((function(e,t,n){e[t]=n})),A.sortedIndex=function(t,n,i,r){for(var a=(i=e(i)).call(r,n),o=0,s=t.length;o<s;){var l=o+s>>>1;i.call(r,t[l])<a?o=1+l:s=l}return o},b=A.some=A.any=function(e,t,n){t=t||A.identity;var r=!1;return null==e?r:g&&e.some===g?e.some(t,n):(E(e,(function(e,a,o){if(r=r||t.call(n,e,a,o))return i})),!!r)},A.contains=A.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=A.values(e)),0<=A.indexOf(e,t))},A.pluck=function(e,t){return A.map(e,A.property(t))},A.where=function(e,t){return A.filter(e,A.matches(t))},A.findWhere=function(e,t){return A.find(e,A.matches(t))},A.max=function(e,t,n){var i,r;return!t&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535?Math.max.apply(Math,e):(r=i=-1/0,E(e,(function(e,a,o){a=t?t.call(n,e,a,o):e,r<a&&(i=e,r=a)})),i)},A.difference=function(e){var t=l.apply(r,s.call(arguments,1));return A.filter(e,(function(e){return!A.contains(t,e)}))},A.without=function(e){return A.difference(e,s.call(arguments,1))},A.indexOf=function(e,t,n){if(null!=e){var i=0,r=e.length;if(n){if("number"!=typeof n)return e[i=A.sortedIndex(e,t)]===t?i:-1;i=n<0?Math.max(0,r+n):n}if(_&&e.indexOf===_)return e.indexOf(t,n);for(;i<r;i++)if(e[i]===t)return i}return-1},A.bind=function(e,t){var i,r;if(v&&e.bind===v)return v.apply(e,s.call(arguments,1));if(A.isFunction(e))return i=s.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,i.concat(s.call(arguments)));n.prototype=e.prototype;var a=new n,o=(n.prototype=null,e.apply(a,i.concat(s.call(arguments))));return Object(o)===o?o:a};throw new TypeError},A.partial=function(e){var t=s.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,a=i.length;r<a;r++)i[r]===A&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},A.once=A.partial(A.before,2),A.memoize=function(e,t){var n={};return t=t||A.identity,function(){var i=t.apply(this,arguments);return A.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},A.delay=function(e,t){var n=s.call(arguments,2);return setTimeout((function(){return e.apply(null,n)}),t)},A.defer=function(e){return A.delay.apply(A,[e,1].concat(s.call(arguments,1)))},A.throttle=function(e,t,n){function i(){l=!1===n.leading?0:A.now(),s=null,o=e.apply(r,a),r=a=null}var r,a,o,s=null,l=0;return n=n||{},function(){var u=A.now(),c=(l||!1!==n.leading||(l=u),t-(u-l));return r=this,a=arguments,c<=0?(clearTimeout(s),s=null,l=u,o=e.apply(r,a),r=a=null):s||!1===n.trailing||(s=setTimeout(i,c)),o}},A.keys=function(e){if(!A.isObject(e))return[];if(y)return y(e);var t,n=[];for(t in e)A.has(e,t)&&n.push(t);return n},A.invert=function(e){for(var t={},n=A.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},A.defaults=function(e){return E(s.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e},A.extend=function(e){return E(s.call(arguments,1),(function(t){if(t)for(var n in t)e[n]=t[n]})),e},A.pick=function(e){var t={},n=l.apply(r,s.call(arguments,1));return E(n,(function(n){n in e&&(t[n]=e[n])})),t},A.omit=function(e){var t,n={},i=l.apply(r,s.call(arguments,1));for(t in e)A.contains(i,t)||(n[t]=e[t]);return n},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.isArray=a||function(e){return"[object Array]"==u.call(e)},A.isObject=function(e){return e===Object(e)},E(["Arguments","Function","String","Number","Date","RegExp"],(function(e){A["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}})),A.isArguments(arguments)||(A.isArguments=function(e){return!(!e||!A.has(e,"callee"))}),A.isFunction=function(e){return"function"==typeof e},A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&e!=+e},A.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==u.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,t){return c.call(e,t)},A.identity=function(e){return e},A.constant=function(e){return function(){return e}},A.property=function(e){return function(t){return t[e]}},A.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},A.matches=function(e){return function(t){if(t!==e)for(var n in e)if(e[n]!==t[n])return!1;return!0}},A.now=Date.now||function(){return(new Date).getTime()},A.result=function(e,t){if(null!=e)return t=e[t],A.isFunction(t)?t.call(e):t},0);return A.uniqueId=function(e){var t=++w+"";return e?e+t:t},A}.apply(t,[]),void 0!==t&&(e.exports=t)},,function(e,t,n){n.r(t),n.d(t,"ErrorTypes",(function(){return i})),n.d(t,"ErrorDetails",(function(){return r})),n.d(t,"ErrorEvent",(function(){return a})),n.d(t,"MsgCode",(function(){return o}));let i={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},r={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"open context failed",OPEN_MEDIA_FAILED:"failed to open media",DOWNLOAD_DATA_FAILED:"download data failed"},a={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError",DOWNLOAD_FAILED:"downloadFailed"},o={DEOCDE_NOT_SUPPORT:4,UNKNOW_ERROR:0,PLAY_ERROR:9,DEMUXER_ERROR:10,DOWNLOAD_DATA_FAILED:11}},function(e,t){e.exports={H265WEBJS_COMPILE_MULTI_THREAD_SHAREDBUFFER:0,DEFAULT_PLAYERE_LOAD_TIMEOUT:20,DEFAILT_WEBGL_PLAY_ID:"glplayer",PLAYER_IN_TYPE_MP4:"mp4",PLAYER_IN_TYPE_FLV:"flv",PLAYER_IN_TYPE_HTTPFLV:"httpflv",PLAYER_IN_TYPE_RAW_265:"raw265",PLAYER_IN_TYPE_TS:"ts",PLAYER_IN_TYPE_MPEGTS:"mpegts",PLAYER_IN_TYPE_M3U8:"hls",PLAYER_IN_TYPE_M3U8_VOD:"m3u8",PLAYER_IN_TYPE_M3U8_LIVE:"hls",PLAYER_IN_TYPE_RTC:"rtc",PLAYER_IN_TYPE_DASH:"dash",APPEND_TYPE_STREAM:0,APPEND_TYPE_FRAME:1,APPEND_TYPE_SEQUENCE:2,DEFAULT_WIDTH:600,DEFAULT_HEIGHT:600,DEFAULT_FPS:30,DEFAULT_FRAME_DUR:40,DEFAULT_FIXED:!1,DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNELS:2,DEFAULT_CONSU_SAMPLE_LEN:20,PLAYER_MODE_VOD:"vod",PLAYER_MODE_NOTIME_LIVE:"live",AUDIO_MODE_ONCE:"ONCE",AUDIO_MODE_SWAP:"SWAP",DEFAULT_STRING_LIVE:"LIVE",CODEC_H265:0,CODEC_H264:1,CODEC_AV1:2,CODEC_VVC:3,PLAYER_CORE_TYPE_DEFAULT:0,PLAYER_CORE_TYPE_CNATIVE:1,PLAYER_CNATIVE_VOD_RETRY_MAX:7,URI_PROTOCOL_WEBSOCKET:"ws",URI_PROTOCOL_WEBSOCKET_DESC:"websocket",URI_PROTOCOL_HTTP:"http",URI_PROTOCOL_HTTP_DESC:"http",FETCH_FIRST_MAX_TIMES:5,FETCH_HTTP_FLV_TIMEOUT_MS:7e3,V_CODEC_NAME_AV1:128,V_CODEC_NAME_HEVC:265,V_CODEC_NAME_AVC:264,V_CODEC_NAME_VVC:266,V_CODEC_NAME_UNKN:500,A_CODEC_NAME_AAC:112,A_CODEC_NAME_MP3:113,A_CODEC_NAME_UNKN:500,CACHE_NO_LOADCACHE:1001,CACHE_WITH_PLAY_SIGN:1002,CACHE_WITH_NOPLAY_SIGN:1003,V_CODEC_AVC_DEFAULT_FPS:25}},function(e,t,n){void 0!==(t=function(){return{COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_H265WEB_COVERLOADED:"coverImageLoaded",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_SEEK_START:"seekStart",JWPLAYER_MEDIA_SEEK_FINISHED:"seekFinished",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_SCREENSHOT:"screenshot",JWPLAYER_CaptureFrameFinished:"captureFrameFinished",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_CONNECTING:"connecting",JWPLAYER_CONNECT_FAILD:"connectFaild",JWPLAYER_NO_LIVE_STREAM:"noLiveStream",JWPLAYER_ALIVE:"alive",JWPLAYER_VIDEO_SEI:"sei_info",JWPLAYER_LIVE_STOP:"liveStop",JWPLAYER_PLAYBACKRATE:"playbackRate",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick",JWPLAYER_CUEPOINT:"cuepoint",JWPLAYER_SEEK_FORWARD_FORBIDDEN:"seekForwardForbidden",JWPLAYER_PERFORMANCE:"performance",JWPLAYER_RTCEVENT:"rtcEvent",JWPLAYER_HLS_QUALITYLIST_CHANGE:"hls_qualitylist_change",JWPLAYER_LEVEL_UPDATED:"level_updated",JWPLAYER_CHANGE_LANGs:"change_lang",touchEvents:{DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"}}}.apply(t,[]))&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){var t=[].slice,n=/\s+/,i=function(e,t,i,r){if(i){if("object"==typeof i){for(var a in i)e[t].apply(e,[a,i[a]].concat(r));return!1}if(n.test(i)){for(var o=i.split(n),s=0,l=o.length;s<l;s++)e[t].apply(e,[o[s]].concat(r));return!1}}return!0},r=function(e,t,n){var i,r=-1,a=e.length,o=t[0],s=t[1],l=t[2];switch(t.length){case 0:for(;++r<a;)(i=e[r]).callback.call(i.context||n);return;case 1:for(;++r<a;)(i=e[r]).callback.call(i.context||n,o);return;case 2:for(;++r<a;)(i=e[r]).callback.call(i.context||n,o,s);return;case 3:for(;++r<a;)(i=e[r]).callback.call(i.context||n,o,s,l);return;default:for(;++r<a;)(i=e[r]).callback.apply(i.context||n,t);return}},a=function(e,t,n){for(var i,r=-1,a=e.length;++r<a;)try{(i=e[r]).callback.apply(i.context||n,t)}catch(e){}};return{on:function(e,t,n){return i(this,"on",e,[t,n])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n})),this},once:function(t,n,r){var a,o;return i(this,"once",t,[n,r])&&n?(a=this,(o=e.once((function(){a.off(t,o),n.apply(this,arguments)})))._callback=n,this.on(t,o,r)):this},off:function(t,n,r){var a,o,s,l,u,c,h,d;if(this._events&&i(this,"off",t,[n,r]))if(t||n||r){for(u=0,c=(l=t?[t]:e.keys(this._events)).length;u<c;u++)if(t=l[u],s=this._events[t]){if(this._events[t]=a=[],n||r)for(h=0,d=s.length;h<d;h++)o=s[h],(n&&n!==o.callback&&n!==o.callback._callback||r&&r!==o.context)&&a.push(o);a.length||delete this._events[t]}}else this._events=void 0;return this},trigger:function(){var e,n,a;return this._events&&(e=t.call(arguments,1),i(this,"trigger",n=arguments[0],e))&&(n=this._events[n],a=this._events.all,n&&r(n,e,this),a)&&r(a,arguments,this),this},triggerSafe:function(e){var n,r;return this._events&&(n=t.call(arguments,1),i(this,"trigger",e,n))&&(e=this._events[e],r=this._events.all,e&&a(e,n,this),r)&&a(r,arguments,this),this}}}.apply(t,n),void 0!==t&&(e.exports=t)},,,,,function(e,t,n){let i=[{format:"mp4",value:"mp4",core:(n=n(5)).PLAYER_CORE_TYPE_CNATIVE},{format:"mov",value:"mp4",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"mkv",value:"mp4",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"flv",value:"flv",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"m3u8",value:"hls",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"m3u",value:"hls",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"ts",value:"ts",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"ps",value:"ts",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"mpegts",value:"ts",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"hevc",value:"raw265",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"h265",value:"raw265",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"265",value:"raw265",core:n.PLAYER_CORE_TYPE_DEFAULT},{format:"mp3",value:"mp3",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"aac",value:"aac",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"flac",value:"flac",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"ogg",value:"ogg",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"wav",value:"wav",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"opus",value:"opus",core:n.PLAYER_CORE_TYPE_CNATIVE},{format:"mpd",value:"dash",core:n.PLAYER_CORE_TYPE_DEFAULT}],r=[{format:n.URI_PROTOCOL_HTTP,value:n.URI_PROTOCOL_HTTP_DESC},{format:n.URI_PROTOCOL_WEBSOCKET,value:n.URI_PROTOCOL_WEBSOCKET_DESC}];e.exports={frameDataAlignCrop:function(e,t,n,i,r,a,o,s){if(0==e-i)return[a,o,s];var l=i*r,u=l/4,c=new Uint8Array(l),h=new Uint8Array(u),d=new Uint8Array(u),f=i,p=i/2;for(let t=0;t<r;t++)c.set(a.subarray(t*e,f),t*r);for(let e=0;e<r/2;e++)h.set(o.subarray(e*t,p),e*r/2);for(let e=0;e<r/2;e++)d.set(s.subarray(e*n,p),e*r/2);return[c,h,d]},GetUriFormat:function(e){if(null!=e)for(let r=0;r<i.length;r++){var t=i[r],n="."+t.format;if(0<=e.toLocaleLowerCase().indexOf(n))return t.value}return i[0].value},GetFormatPlayCore:function(e){if(null!=e)for(let n=0;n<i.length;n++){var t=i[n];if(t.value===e)return t.core}return i[0].core},GetUriProtocol:function(e){if(null!=e)for(let i=0;i<r.length;i++){var t=r[i],n=t.format+"[s]{0,}://";if(0<=e.search(n))return t.value}return r[0].value},GetMsTime:function(){return(new Date).getTime()},GetScriptPath:function(e){return e=[(e=(e=e.toString()).match(/^\s*function\s*\(\s*\)\s*\{(([\s\S](?!\}$))*[\s\S])/))[1]],window.URL.createObjectURL(new Blob(e,{type:"text/javascript"}))},BrowserJudge:function(){let e=window.document,t=window.navigator.userAgent.toLowerCase(),n=e.documentMode,i=window.chrome||!1,r={agent:t,isIE:/msie/.test(t),isGecko:0<t.indexOf("gecko")&&t.indexOf("like gecko")<0,isWebkit:0<t.indexOf("webkit"),isStrict:"CSS1Compat"===e.compatMode,supportSubTitle:function(){return"track"in e.createElement("track")},supportScope:function(){return"scoped"in e.createElement("style")},ieVersion:function(){try{return t.match(/msie ([\d.]+)/)[1]||0}catch(e){return n}},operaVersion:function(){try{return window.opera?t.match(/opera.([\d.]+)/)[1]:0<t.indexOf("opr")?t.match(/opr\/([\d.]+)/)[1]:void 0}catch(e){return 0}},versionFilter:function(){if(1!==arguments.length||"string"!=typeof arguments[0])return 1===arguments.length?arguments[0]:0;var e=arguments[0],t=e.indexOf(".");return 0<t&&-1!==(t=e.indexOf(".",t+1))?e.substr(0,t):e}};try{r.type=r.isIE?"IE":window.opera||0<t.indexOf("opr")?"Opera":0<t.indexOf("chrome")?"Chrome":0<t.indexOf("safari")||window.openDatabase?"Safari":0<t.indexOf("firefox")?"Firefox":"unknow",r.version="IE"===r.type?r.ieVersion():"Firefox"===r.type?t.match(/firefox\/([\d.]+)/)[1]:"Chrome"===r.type?t.match(/chrome\/([\d.]+)/)[1]:"Opera"===r.type?r.operaVersion():"Safari"===r.type?t.match(/version\/([\d.]+)/)[1]:"0",r.shell=function(){var e,n;return 0<t.indexOf("maxthon")?(r.version=t.match(/maxthon\/([\d.]+)/)[1]||r.version,"傲游浏览器"):0<t.indexOf("qqbrowser")?(r.version=t.match(/qqbrowser\/([\d.]+)/)[1]||r.version,"QQ浏览器"):0<t.indexOf("se 2.x")?"搜狗浏览器":i&&"Opera"!==r.type?(n=window.external,e=window.clientInformation.languages,n&&"LiebaoGetVersion"in n?"猎豹浏览器":0<t.indexOf("bidubrowser")?(r.version=t.match(/bidubrowser\/([\d.]+)/)[1]||t.match(/chrome\/([\d.]+)/)[1],"百度浏览器"):r.supportSubTitle()&&void 0===e?(n=Object.keys(i.webstore).length,window,1<n?"360极速浏览器":"360安全浏览器"):"Chrome"):r.type},r.name=r.shell(),r.version=r.versionFilter(r.version)}catch(e){}return[r.type,r.version]},ParseGetMediaURL:function(e,t="http"){return"ws"===(t="http"!==t&&"ws"!==t&&"wss"!==t&&(0<=e.indexOf("ws")||0<=e.indexOf("wss"))?"ws":t)||"wss"===t||0<=e.indexOf(t)?e:"/"===e[0]?"/"===e[1]?t+":"+e:window.location.origin+e:":"===e[0]?t+e:(t=window.location.href.split("/"),window.location.href.replace(t[t.length-1],e))},IsSupport265Mse:function(){return MediaSource.isTypeSupported('video/mp4;codecs=hvc1.1.1.L63.B0"')}}},function(e,t,n){e.exports=n(192).default},function(e,t,n){n=[n(7),n(6),n(2),n(1)],t=function(e,t,n,i){var r=!n.isUndefined(window.PointerEvent),a=!r&&i.isMobile(),o=!r&&!a,s=i.isFF()&&i.isOSX();function l(e,t){return(/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]:e)["page"+t]}function u(e,t,n){var r=!i.isPoorIE()&&t instanceof MouseEvent||!t.touches&&!t.changedTouches?t:(t.touches&&t.touches.length?t.touches:t.changedTouches)[0],a=document.documentElement.scrollLeft||document.body.scrollLeft,o=document.documentElement.scrollTop||document.body.scrollTop;return{type:e,target:t.target||t.srcElement,currentTarget:n,pageX:r.pageX||r.clientX+a,pageY:r.pageY||r.clientY+o}}function c(e){(i.isPoorIE()||e instanceof MouseEvent||e instanceof window.TouchEvent)&&(e.preventManipulation&&e.preventManipulation(),e.cancelable)&&e.preventDefault&&e.preventDefault()}function h(e,a){var h,d,f=e,p=!1,m=0,g=0,_=0,y=300;function v(e){(o||r&&"touch"!==e.pointerType)&&R(t.touchEvents.OVER,e)}function A(e){(o||r&&"touch"!==e.pointerType)&&R(t.touchEvents.MOVE,e)}function E(n){(o||r&&"touch"!==n.pointerType&&!e.contains(document.elementFromPoint(n.x,n.y)))&&R(t.touchEvents.OUT,n)}function b(t){var n,u;h=t.target,m=l(t,"X"),g=l(t,"Y"),u=(n=t)||window.event,(i.isPoorIE()||n instanceof MouseEvent)&&("which"in u?3===u.which:"button"in u&&2===u.button)||(r?t.isPrimary&&(a.preventScrolling&&(d=t.pointerId,e.setPointerCapture(d)),i.addEventListener(e,"pointermove",w),i.addEventListener(e,"pointercancel",T),i.addEventListener(e,"pointerup",T)):o&&(i.addEventListener(document,"mousemove",w),s&&"object"===t.target.nodeName.toLowerCase()?i.addEventListener(e,"click",T):i.addEventListener(document,"mouseup",T)),h&&(i.addEventListener(h,"touchmove",w),i.addEventListener(h,"touchcancel",T),i.addEventListener(h,"touchend",T)))}function w(e){var n,i,r=t.touchEvents;p?R(r.DRAG,e):(i=l(e,"X"),n=l(e,"Y"),36<(i-=m)*i+(i=n-g)*i&&(R(r.DRAG_START,e),p=!0,R(r.DRAG,e))),a.preventScrolling&&c(e)}function T(n){var s=t.touchEvents;r?(a.preventScrolling&&e.releasePointerCapture(d),i.removeEventListener(e,"pointermove",w),i.removeEventListener(e,"pointercancel",T),i.removeEventListener(e,"pointerup",T)):o&&(i.removeEventListener(document,"mousemove",w),i.removeEventListener(document,"mouseup",T)),h&&(i.removeEventListener(h,"touchmove",w),i.removeEventListener(h,"touchcancel",T),i.removeEventListener(h,"touchend",T)),p?R(s.DRAG_END,n):a.directSelect&&n.target!==e||-1!==n.type.indexOf("cancel")||(r&&n instanceof window.PointerEvent?(n.pointerType,R(s.CLICK,n)):o?R(s.CLICK,n):(R(s.TAP,n),c(n))),h=null,p=!1}a=a||{},r?(i.addEventListener(e,"pointerdown",b),a.useHover&&(i.addEventListener(e,"pointerover",v),i.addEventListener(e,"pointerout",E)),a.useMove&&i.addEventListener(e,"pointermove",A)):o&&(i.addEventListener(e,"mousedown",b),a.useHover&&(i.addEventListener(e,"mouseover",v),i.addEventListener(e,"mouseout",E)),a.useMove)&&i.addEventListener(e,"mousemove",A),i.addEventListener(e,"touchstart",b);var S=this;function R(e,i){var r,o;!a.enableDoubleTap||e!==t.touchEvents.CLICK&&e!==t.touchEvents.TAP||(_=n.now()-_<y?(o=u(r=e===t.touchEvents.CLICK?t.touchEvents.DOUBLE_CLICK:t.touchEvents.DOUBLE_TAP,i,f),S.trigger(r,o),0):n.now()),o=u(e,i,f),S.trigger(e,o)}return this.triggerEvent=R,this.destroy=function(){i.removeEventListener(e,"touchstart",b),i.removeEventListener(e,"mousedown",b),h&&(i.removeEventListener(h,"touchmove",w),i.removeEventListener(h,"touchcancel",T),i.removeEventListener(h,"touchend",T)),r&&(a.preventScrolling&&e.releasePointerCapture(d),i.removeEventListener(e,"pointerover",v),i.removeEventListener(e,"pointerdown",b),i.removeEventListener(e,"pointermove",w),i.removeEventListener(e,"pointermove",A),i.removeEventListener(e,"pointercancel",T),i.removeEventListener(e,"pointerout",E),i.removeEventListener(e,"pointerup",T)),i.removeEventListener(e,"click",T),i.removeEventListener(e,"mouseover",v),i.removeEventListener(e,"mousemove",A),i.removeEventListener(e,"mouseout",E),i.removeEventListener(document,"mousemove",w),i.removeEventListener(document,"mouseup",T)},this}return n.extend(h.prototype,e),h}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){function t(e,t,n){for(e=""+e,n=n||"0";e.length<t;)e=n+e;return e}return{trim:function(e){return e.replace(/^\s+|\s+$/g,"")},pad:t,xmlAttribute:function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()===t.toLowerCase())return e.attributes[n].value.toString();return""},extension:function(e){return e&&"rtmp"!==e.substr(0,4)?/[\(,]format=m3u8-/i.test(e)?"m3u8":-1<(e=e.split("?")[0].split("#")[0]).lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0:""},hms:function(e){var n=parseInt(e/3600),i=parseInt(e/60)%60;return e%=60,t(n,2)+":"+t(i,2)+":"+t(e.toFixed(3),6)},seconds:function(t){var n,i;return e.isNumber(t)?t:(n=(t=t.replace(",",".")).split(":"),i=0,"s"===t.slice(-1)?i=parseFloat(t):"m"===t.slice(-1)?i=60*parseFloat(t):"h"===t.slice(-1)?i=3600*parseFloat(t):1<n.length?(i=parseFloat(n[n.length-1]),i+=60*parseFloat(n[n.length-2]),3===n.length&&(i+=3600*parseFloat(n[n.length-3]))):i=parseFloat(t),i)},suffix:function(t,n){return e.map(t,(function(e){return e+n}))},prefix:function(t,n){return e.map(t,(function(e){return n+e}))}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){void 0!==(t=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"}}.apply(t,[]))&&(e.exports=t)},function(e,t,n){n.r(t),n.d(t,"Event",(function(){return i})),n.d(t,"PLAYENDSTATUS",(function(){return r})),n.d(t,"PLAYENDMSG",(function(){return a}));let i={EVENT_DOMAIN_IP_FOUND:"domainIPFound",EVENT_PLAYER_CREATED:"playerCreated",EVENT_FIRST_FRAME_RENDERED:"firstFrameRendered",EVENT_FIRST_BUFFER_END:"firstBufferingEnd",EVENT_FRAME_CHARSING_START:"frameChasingStart",EVENT_FRAME_CHARSING_END:"frameChasingEnd",EVENT_BUFFER_MID_START:"bufferingStart",EVENT_BUFFER_MID_END:"bufferingEnd",EVENT_RENDER_STUCK:"renderStuck",EVENT_FRAME_DROP:"frameDrop",EVENT_NETWORK_SPEED_REPORT:"networkSpeed",EVENT_PLAY_COUNT:"keepPlaying",EVENT_UPDATE_CDN:"updateCdn",EVENT_PLAY_END_APM:"playEnd"},r={UNKONW:0,PLAY_FAIL:1,NORMAL:2,ARTIFICIAL_END:3},a={COMPLETE:"complete",DESTROY:"cyberplay is destory"}},function(e,t,n){e.exports=function(){function e(){e=function(){return n};var t,n={},i=Object.prototype,r=i.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o=(A="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",s=A.asyncIterator||"@@asyncIterator",l=A.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(t){u=function(e,t,n){return e[t]=n}}function c(e,n,i,r){var o,s,l,u;return n=n&&n.prototype instanceof _?n:_,n=Object.create(n.prototype),r=new I(r||[]),a(n,"_invoke",{value:(o=e,s=i,l=r,u=d,function(e,n){if(u===p)throw new Error("Generator is already running");if(u===m){if("throw"===e)throw n;return{value:t,done:!0}}for(l.method=e,l.arg=n;;){var i=l.delegate;if(i&&(i=function e(n,i){var r=i.method,a=n.iterator[r];return a===t?(i.delegate=null,"throw"===r&&n.iterator.return&&(i.method="return",i.arg=t,e(n,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g):"throw"===(r=h(a,n.iterator,i.arg)).type?(i.method="throw",i.arg=r.arg,i.delegate=null,g):(a=r.arg)?a.done?(i[n.resultName]=a.value,i.next=n.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}(i,l),i)){if(i===g)continue;return i}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(u===d)throw u=m,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);if(u=p,"normal"===(i=h(o,s,l)).type){if(u=l.done?m:f,i.arg===g)continue;return{value:i.arg,done:l.done}}"throw"===i.type&&(u=m,l.method="throw",l.arg=i.arg)}})}),n}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function _(){}function y(){}function v(){}var A,E,b=(u(A={},o,(function(){return this})),(E=(E=Object.getPrototypeOf)&&E(E(C([]))))&&E!==i&&r.call(E,o)&&(A=E),v.prototype=_.prototype=Object.create(A));function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){var n;a(this,"_invoke",{value:function(i,a){function o(){return new t((function(n,o){!function n(i,a,o,s){var l;if("throw"!==(i=h(e[i],e,a)).type)return(a=(l=i.arg).value)&&"object"==typeof a&&r.call(a,"__await")?t.resolve(a.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(a).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}));s(i.arg)}(i,a,n,o)}))}return n=n?n.then(o,o):o()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e||""===e){var n,i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(i=function i(){for(;++n<e.length;)if(r.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i}).next=i}throw new TypeError(typeof e+" is not iterable")}return a(b,"constructor",{value:y.prototype=v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},n.awrap=function(e){return{__await:e}},w(T.prototype),u(T.prototype,s,(function(){return this})),n.AsyncIterator=T,n.async=function(e,t,i,r,a){void 0===a&&(a=Promise);var o=new T(c(e,t,i,r),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),u(b,l,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t,n=Object(e),i=[];for(t in n)i.push(t);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},n.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;0<=a;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}var o=(a=a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc?null:a)?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,i,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(n=r.completion).type&&(i=n.arg,R(r)),i}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:C(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},n}function t(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function n(e){return function(){var n=this,i=arguments;return new Promise((function(r,a){var o=e.apply(n,i);function s(e){t(o,r,a,s,l,"next",e)}function l(e){t(o,r,a,s,l,"throw",e)}s(void 0)}))}}function i(e,t){for(var n,i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(n=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(r.key))?n:String(n),r)}}function r(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),s(e.prototype.constructor=e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l,u;function c(){}function h(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function d(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");return n=new h(n,i||e,r),i=u?u+t:t,e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],n]:e._events[i].push(n):(e._events[i]=n,e._eventsCount++),e}function f(e,t){0==--e._eventsCount?e._events=new c:delete e._events[t]}function p(){this._events=new c,this._eventsCount=0}me=B={exports:{}},l=Object.prototype.hasOwnProperty,u="~",Object.create&&(c.prototype=Object.create(null),(new c).__proto__||(u=!1)),p.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)l.call(e,t)&&n.push(u?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},p.prototype.listeners=function(e){e=u?u+e:e;var t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,i=t.length,r=new Array(i);n<i;n++)r[n]=t[n].fn;return r},p.prototype.listenerCount=function(e){return e=u?u+e:e,(e=this._events[e])?e.fn?1:e.length:0},p.prototype.emit=function(e,t,n,i,r,a){var o=u?u+e:e;if(!this._events[o])return!1;var s,l=this._events[o],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,a),!0}for(f=1,s=new Array(c-1);f<c;f++)s[f-1]=arguments[f];l.fn.apply(l.context,s)}else for(var h,d=l.length,f=0;f<d;f++)switch(l[f].once&&this.removeListener(e,l[f].fn,void 0,!0),c){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,t);break;case 3:l[f].fn.call(l[f].context,t,n);break;case 4:l[f].fn.call(l[f].context,t,n,i);break;default:if(!s)for(h=1,s=new Array(c-1);h<c;h++)s[h-1]=arguments[h];l[f].fn.apply(l[f].context,s)}return!0},p.prototype.on=function(e,t,n){return d(this,e,t,n,!1)},p.prototype.once=function(e,t,n){return d(this,e,t,n,!0)},p.prototype.removeListener=function(e,t,n,i){if(e=u?u+e:e,this._events[e])if(t){var r=this._events[e];if(r.fn)r.fn!==t||i&&!r.once||n&&r.context!==n||f(this,e);else{for(var a=0,o=[],s=r.length;a<s;a++)(r[a].fn!==t||i&&!r[a].once||n&&r[a].context!==n)&&o.push(r[a]);o.length?this._events[e]=1===o.length?o[0]:o:f(this,e)}}else f(this,e);return this},p.prototype.removeAllListeners=function(e){return e?(e=u?u+e:e,this._events[e]&&f(this,e)):(this._events=new c,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=u,me.exports=p.EventEmitter=p;var m,g,_,y=(me=B.exports)&&me.__esModule&&Object.prototype.hasOwnProperty.call(me,"default")?me.default:me,v=((B={}).REMOTE_STREAM_ADD="remoteStreamAdd",B.CONNECTION_STATE_CHANGE="connectionStateChange",B.CANDIDATE_ERROR="candidateError",B.ON_DATA_CHANNEL_OPEN="onDataChannelOpen",B.ON_DATA_CHANNEL_MSG="onDataChannelMsg",B.ON_DATA_CHANNEL_ERROR="onDataChannelError",B.ON_DATA_CHANNEL_CLOSE="onDataChannelClose",B.RE_CONNECTING="reConnecting",B.RE_CONNECT_FAILED="reConnectFailed",B.RE_CONNECT_SUCCESS="reConnectSuccess",B.ERROR="error",B.DESTROY="destroy",B),A=((me={}).ON_PLAY="play",me.ON_PAUSE="pause",me.ON_VOLUME_CHANGE="volumechange",me.LOADEDMETADATA="loadedmetadata",me.CANPLAY="canplay",me),E=((B={}).APPENDNALU="appendNalu",B.APPENDADTS="appendAdts",B),b=((me={}).HEVC="hevc",me.CODEC="codec",me.WIDTH="width",me.HEIGHT="height",me.FRAMERATE="framerate",me),w=((B={}).PLAYING="playing",B.PAUSED="paused",B),T=((me={}).RECONNECTING="reconnecting",me.RECONNECT_FAILED="reconnectFailed",me.RECONNECT_SUCCESS="reconnectSuccess",me),S=function(){},R={trace:S,debug:S,log:S,warn:S,info:S,error:S},I=R,C=I,L=((B={}).NETWORK_ERROR="networkError",B.CONNECTION_ERROR="connectionError",B.CREATE_PEERCONNECTION_ERROR="createPeerConnectionError",B),P=((me={}).HTTP_LOAD_ERROR="httpLoadError",me),D=((B={})[B.CREATE_PEERCONNECTION_ERROR=100]="CREATE_PEERCONNECTION_ERROR",B),k=(Q.prototype.load=function(e,t){return new Promise((function(n){fetch(e,t).then((function(e){return e.json()})).then((function(t){var i=t.code,r=t.msg;n(0!=i?{type:L.NETWORK_ERROR,details:P.HTTP_LOAD_ERROR,code:i,msg:r,url:e}:t)})).catch((function(t){var i=t?t.code||-1:0;t=t?t.message:null,n({type:L.NETWORK_ERROR,details:P.HTTP_LOAD_ERROR,code:i,msg:t,url:e})}))}))},Q),x=((me=q.prototype).parseData=function(e){var t=this.ReadBig32(e,8),n=(126&(this.pts=t,t=e[16]))>>>1;if((31&t)<24&&49!=n)return this.h265data=this.concatUint8(new Uint8Array([0,0,0,1]),new Uint8Array(e.subarray(16))),32==n?void(this.vps=this.h265data):33==n?void(this.sps=this.h265data):34==n?void(this.pps=this.h265data):void this._onDataAvailable({nalu:this.h265data,pps:this.pps,pts:this.pts,iskeyframe:!1,size:this.h265data.byteLength,type:n});this.CombineFrame(e,n)},me.CombineFrame=function(e,t){var n,i=128&e[18],r=64&e[18],a=63&e[18];128==i?(this.h265data=new Uint8Array(0),this.h265data=this.concatUint8(new Uint8Array([a<<1,1]),new Uint8Array(e.subarray(19)))):64==r?(this.h265data=this.concatUint8(new Uint8Array([0,0,0,1]),this.h265data,new Uint8Array(e.subarray(19))),i=this.vps.length,r=this.sps.length,n=this.pps.length,0<i&&0<r&&0<n&&this.isFirseData&&(this.h265data=this.concatUint8(this.vps,this.sps,this.pps,this.h265data),this.isFirseData=!1),this._onDataAvailable({nalu:this.h265data,pps:this.pps,pts:this.pts,iskeyframe:19==a,size:this.h265data.byteLength,type:t}),this.h265data=new Uint8Array(0)):this.h265data=this.concatUint8(this.h265data,new Uint8Array(e.subarray(19)))},me.ReadBig32=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},me.concatUint8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce((function(e,t){return e+t.byteLength}),0),r=new Uint8Array(i),a=0;return t.forEach((function(e){r.set(e,a),a+=e.byteLength})),r},me.destroy=function(){this.isFirseData=!0,this.pts=0,this.vps=new Uint8Array(0),this.sps=new Uint8Array(0),this.pps=new Uint8Array(0),this.h265data=new Uint8Array(0),this._onDataAvailable=function(){}},r(q,[{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}},{key:"getVps",get:function(){return{vps:this.vps}}},{key:"getSps",get:function(){return{sps:this.sps}}},{key:"getPps",get:function(){return{pps:this.pps}}}]),q),M={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},O=((B=K.prototype).setAudioInfo=function(e){e&&(e=e.split("/"),this.audioInfo.sample=e[1],this.audioInfo.channel=e[2])},B.parseData=function(e){var t=128&e[5];this.pts=this.ReadBig32(e,8),this.aacData=this.concatUint8(this.aacData,new Uint8Array(e.subarray(20))),128==t&&(e[18],e[19],t=this._build_adts_header(this.audioInfo.sample,this.audioInfo.channel,this.aacData.byteLength),e=this.concatUint8(t,this.aacData),this._onDataAvailable({adts:e,pts:this.pts}),this.aacData=new Uint8Array(0))},B._build_adts_header=function(e,t,n){return e=this.sample_req_map[e],n+=7,new Uint8Array([255,241,64|e<<2,n>>11&3|t<<6,n>>3&255,(7&n)<<5|31,252])},B.ReadBig32=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},B.concatUint8=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce((function(e,t){return e+t.byteLength}),0),r=new Uint8Array(i),a=0;return t.forEach((function(e){r.set(e,a),a+=e.byteLength})),r},B.destroy=function(){this.pts=0,this.aacData=new Uint8Array(0),this.sample_req_map=M,this._onDataAvailable=function(){}},r(K,[{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}}]),K),N=(o(W,_=y),(me=W.prototype).addEvent=function(){this.H265Parser.onDataAvailable=this.onDataAvailable.bind(this),this.AACADTSParser.onDataAvailable=this.onAdtsDataAvailable.bind(this)},me.setAudioInfo=function(e){this.AACADTSParser.setAudioInfo(e)},me.appendBuffer=function(e){(96==(127&(e=new Uint8Array(e))[5])?this.H265Parser:this.AACADTSParser).parseData(e)},me.onDataAvailable=function(e){this.emit(E.APPENDNALU,e)},me.onAdtsDataAvailable=function(e){this.emit(E.APPENDADTS,e)},me.destroy=function(){this.hevcData=[],this.H265Parser.destroy(),this.AACADTSParser.destroy()},W),F=((B={})[B.INIT=0]="INIT",B[B.INITED=1]="INITED",B[B.LOADWASMJS=2]="LOADWASMJS",B[B.DECODE=3]="DECODE",B[B.DECODED=4]="DECODED",B[B.RELEASE=5]="RELEASE",B[B.WASMLOADEDED=6]="WASMLOADEDED",B[B.BATCHFINISHFLAG=7]="BATCHFINISHFLAG",B[B.AUDIODECODED=8]="AUDIODECODED",B),B=(o(z,g=y),(me=z.prototype).init=function(e){this._workerMessageCallback=e,this._initDecoder()},me._initDecoder=function(){throw new Error("need override by children")},me.checkToDecode=function(e){!this._inDecoding&&e<=this.needToDecode&&this.doDecode()},me.doDecode=function(){var e=this,t=this._getFramesToDecode();t&&t.length&&(t.forEach((function(t){e._doDecodeFrame(t)})),this._finishFlag())},me._getFramesToDecode=function(){var e=this.parent._nalQueue;if(this._decoderReady&&e){var t=6;if(!(e.frameLength<t)){for(var n=[];0<t;){var i=e.getNalu();n.push(i),t--}return n}}},me._doDecodeFrame=function(e){throw new Error("need override by children")},me._finishFlag=function(){throw new Error("need override by children")},r(z,[{key:"needToDecode",get:function(){return this._inDecoding?0:this._continueDecodeThreshold}}]),z),U=window.VideoDecoder,j=window.AudioDecoder,G=window.EncodedVideoChunk,V=window.EncodedAudioChunk,H=(o(Y,m=B),Y.isSupported=function(){return!!window.VideoDecoder},(me=Y.prototype)._initDecoder=function(){this._initAudioDecoder(),this._initVideoDecoder(),this._decoderReady=!0},me._initVideoDecoder=function(){var e=this;this.videoDecoder=new U({output:function(t){e._workerMessageCallback({t:F.DECODED,frame:t})},error:function(e){}}),this.videoDecoder.configure({codec:"hvc1.1.6.L120"})},me._initAudioDecoder=function(){var t,i=this,r={output:(t=n(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.format&&i._workerMessageCallback({t:F.AUDIODECODED,audioData:n});case 1:case"end":return e.stop()}}),t)}))),function(e){return t.apply(this,arguments)}),error:function(e){}};this.audioDeocder=new j(r),this.audioDeocder.configure({codec:"mp4a.40.5",sampleRate:8e3,numberOfChannels:1})},me.decodeVideo=function(e){e=new G({data:e.nalu,timestamp:e.pts,type:e.isKeyframe?"key":"delta"}),this.videoDecoder.decode(e)},me._decodeAudio=function(e){e=new V({data:e.adts,timestamp:e.pts,type:"key"}),this.audioDeocder.decode(e)},me._doDecodeFrame=function(e){e=new G({data:e.nalu,timestamp:e.pts,type:e.iskeyframe?"key":"delta"}),this.videoDecoder.decode(e)},me._finishFlag=function(){},Y);function Y(e){var t;return(t=m.call(this)||this).videoDecoder=void 0,t.audioDeocder=void 0,t._continueDecodeThreshold=void 0,t.parent=void 0,t.parent=e,t.videoDecoder,t.audioDeocder,t._continueDecodeThreshold=20,t}function z(e){var t;return(t=g.call(this)||this)._inDecoding=void 0,t._decoderReady=void 0,t.parent=void 0,t._workerMessageCallback=void 0,t.parent=e,t._inDecoding=!1,t._decoderReady=!1,t._workerMessageCallback=null,t}function W(){(e=_.call(this)||this).log=void 0,e.warn=void 0,e.error=void 0,e.H265Parser=void 0,e.hevcData=void 0,e.AACADTSParser=void 0;var e,t="[rtc-demuxer-rtp]";return e.log=C.log.bind(C,t),e.warn=C.warn.bind(C,t),e.error=C.error.bind(C,t),e.H265Parser=new x,e.AACADTSParser=new O,e.addEvent(),e.hevcData=[],e}function K(){this.aacData=void 0,this.sample_req_map=void 0,this._onDataAvailable=void 0,this.pts=void 0,this.audioInfo=void 0,this.pts=0,this.aacData=new Uint8Array(0),this.sample_req_map=M,this._onDataAvailable=function(){},this.audioInfo={sample:8e3,channel:1}}function q(){this.isFirseData=void 0,this.pts=void 0,this.vps=void 0,this.sps=void 0,this.pps=void 0,this.h265data=void 0,this._onDataAvailable=void 0,this.isFirseData=!0,this.pts=0,this.vps=new Uint8Array(0),this.sps=new Uint8Array(0),this.pps=new Uint8Array(0),this.h265data=new Uint8Array(0),this._onDataAvailable=function(){}}function Q(){}var X,J,Z=function(e){return X=X||(n=void 0===(n=null)?null:n,r=(i=function(e){var n=atob(t);if(e){for(var i=new Uint8Array(n.length),r=0,a=n.length;r<a;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(void 0!==(i=!(t="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoKICAgKiBAQXV0aG9yOiBkdWFueXVhbnl1YW4wMSBkdWFueXVhbnl1YW4wMUBiYWlkdS5jb20KICAgKiBARGF0ZTogMjAyMy0wOC0wOSAxOTo1NTo1NQogICAqIEBMYXN0RWRpdG9yczogZHVhbnl1YW55dWFuMDEgZHVhbnl1YW55dWFuMDFAYmFpZHUuY29tCiAgICogQExhc3RFZGl0VGltZTogMjAyNC0wMS0xOCAxNjoxNDo1OAogICAqIEBGaWxlUGF0aDogL3dvcmtlci9iYWlkdS9iY2UtbXVsdGltZWRpYS9ydGNQbGF5ZXIvc3JjL2Jhc2UvY29uZmlnLnRzCiAgICogQERlc2NyaXB0aW9uOiDov5nmmK/pu5jorqTorr7nva4s6K+36K6+572uYGN1c3RvbU1hZGVgLCDmiZPlvIBrb3JvRmlsZUhlYWRlcuafpeeci+mFjee9riDov5vooYzorr7nva46IGh0dHBzOi8vZ2l0aHViLmNvbS9PQktvcm8xL2tvcm8xRmlsZUhlYWRlci93aWtpLyVFOSU4NSU4RCVFNyVCRCVBRQogICAqLwoKICB2YXIgREVDT0RFU1RBVFVTID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChERUNPREVTVEFUVVMpIHsKICAgIERFQ09ERVNUQVRVU1tERUNPREVTVEFUVVNbIklOSVQiXSA9IDBdID0gIklOSVQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siSU5JVEVEIl0gPSAxXSA9ICJJTklURUQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siTE9BRFdBU01KUyJdID0gMl0gPSAiTE9BRFdBU01KUyI7CiAgICBERUNPREVTVEFUVVNbREVDT0RFU1RBVFVTWyJERUNPREUiXSA9IDNdID0gIkRFQ09ERSI7CiAgICBERUNPREVTVEFUVVNbREVDT0RFU1RBVFVTWyJERUNPREVEIl0gPSA0XSA9ICJERUNPREVEIjsKICAgIERFQ09ERVNUQVRVU1tERUNPREVTVEFUVVNbIlJFTEVBU0UiXSA9IDVdID0gIlJFTEVBU0UiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siV0FTTUxPQURFREVEIl0gPSA2XSA9ICJXQVNNTE9BREVERUQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siQkFUQ0hGSU5JU0hGTEFHIl0gPSA3XSA9ICJCQVRDSEZJTklTSEZMQUciOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siQVVESU9ERUNPREVEIl0gPSA4XSA9ICJBVURJT0RFQ09ERUQiOwogICAgcmV0dXJuIERFQ09ERVNUQVRVUzsKICB9KHt9KTsgLy/pn7PpopHop6PnoIHlrozmiJAKCiAgLy8gd2FzbeWKoOi9veWujOaIkAogIHZhciB3YXNtUGF0aCA9ICJodHRwczovL2JjZS1jZG4uYmouYmNlYm9zLmNvbS9qd3BsYXllci80LjMuMC4xLyI7IC8v5Zyw5Z2A5Li657q/5LiK5Zyw5Z2A5ZCO6Z2i5ZKM54mI5pys57uR5a6aCiAgc2VsZi5Nb2R1bGUgPSB7CiAgICBvblJ1bnRpbWVJbml0aWFsaXplZDogZnVuY3Rpb24gb25SdW50aW1lSW5pdGlhbGl6ZWQoKSB7CiAgICAgIG9uV2FzbUxvYWRlZCgpOwogICAgfSwKICAgIGxvY2F0ZUZpbGU6IGZ1bmN0aW9uIGxvY2F0ZUZpbGUodXJsKSB7CiAgICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnaHR0cCcpKSByZXR1cm4gdXJsOwogICAgICByZXR1cm4gd2FzbVBhdGggKyB1cmw7CiAgICB9CiAgfTsKICB2YXIgRGVjb2RlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewogICAgICB0aGlzLndhc21Mb2FkZWQgPSB2b2lkIDA7CiAgICAgIHRoaXMudmlkZW9DYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5wbGF5ZXJEYXRhID0gdm9pZCAwOwogICAgICB0aGlzLnZjb2RlY2VyUHRyID0gdm9pZCAwOwogICAgICB0aGlzLndhc21Mb2FkZWQgPSBmYWxzZTsKICAgICAgdGhpcy52aWRlb0NhbGxiYWNrID0gbnVsbDsKICAgICAgdGhpcy5wbGF5ZXJEYXRhID0gewogICAgICAgIHRva2VuOiAiYmFzZTY0OlFYVjBhRzl5T21Ob1lXNW5lV0Z1Ykc5dVozeHVkVzFpWlhKM2IyeG1MRWRwZEdoMVlqcG9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZiblZ0WW1WeWQyOXNaaXhGYldGcGJEcHdiM0p6WTJobFozUXlNMEJtYjNodFlXbHNMbU52YlN4UlVUbzFNekV6TmpVNE56SXNTRzl0WlZCaFoyVTZhSFIwY0RvdkwzaDJhV1JsYnk1MmFXUmxieXhFYVhOamIzSmtPbTUxYldKbGNuZHZiR1lqT0RZNU5DeDNaV05vWVhJNmJuVnRZbVZ5ZDI5c1pqRXhMRUpsYVdwcGJtY3NWMjl5YTBsdU9rSmhhV1IxIiwKICAgICAgICBwbGF5ZXJWZXJzaW9uOiAiNC4yLjAiLAogICAgICAgIHZpZGVvQ29kZWM6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy52Y29kZWNlclB0ciA9IG51bGw7CiAgICB9CiAgICB2YXIgX3Byb3RvID0gRGVjb2Rlci5wcm90b3R5cGU7CiAgICBfcHJvdG8uaW5pdERlY29kZXIgPSBmdW5jdGlvbiBpbml0RGVjb2RlcigpIHsKICAgICAgdmFyIF90aGlzJHBsYXllckRhdGEgPSB0aGlzLnBsYXllckRhdGEsCiAgICAgICAgdG9rZW4gPSBfdGhpcyRwbGF5ZXJEYXRhLnRva2VuLAogICAgICAgIHBsYXllclZlcnNpb24gPSBfdGhpcyRwbGF5ZXJEYXRhLnBsYXllclZlcnNpb24sCiAgICAgICAgdmlkZW9Db2RlYyA9IF90aGlzJHBsYXllckRhdGEudmlkZW9Db2RlYzsKICAgICAgdGhpcy52Y29kZWNlclB0ciA9IE1vZHVsZS5jd3JhcCgicmVnaXN0ZXJQbGF5ZXIiLCAibnVtYmVyIiwgWyJzdHJpbmciLCAic3RyaW5nIl0pKHRva2VuLCBwbGF5ZXJWZXJzaW9uKTsKICAgICAgLy8g6Kej56CB5oiQ5Yqf5Zue6LCDCiAgICAgIHRoaXMudmlkZW9DYWxsYmFjayA9IE1vZHVsZS5hZGRGdW5jdGlvbihmdW5jdGlvbiAoYWRkcl95LCBhZGRyX3UsIGFkZHJfdiwgc3RyaWRlX3ksIHN0cmlkZV91LCBzdHJpZGVfdiwgd2lkdGgsIGhlaWdodCwgcHRzKSB7CiAgICAgICAgdmFyIHlBcnJheSA9IE1vZHVsZS5IRUFQVTguc3ViYXJyYXkoYWRkcl95LCBhZGRyX3kgKyBzdHJpZGVfeSAqIGhlaWdodCk7CiAgICAgICAgdmFyIHVBcnJheSA9IE1vZHVsZS5IRUFQVTguc3ViYXJyYXkoYWRkcl91LCBhZGRyX3UgKyBzdHJpZGVfdSAqIGhlaWdodCAvIDIpOwogICAgICAgIHZhciB2QXJyYXkgPSBNb2R1bGUuSEVBUFU4LnN1YmFycmF5KGFkZHJfdiwgYWRkcl92ICsgc3RyaWRlX3YgKiBoZWlnaHQgLyAyKTsKICAgICAgICB2YXIgZnJhbWUgPSB7CiAgICAgICAgICB5OiBuZXcgVWludDhBcnJheSh5QXJyYXkpLAogICAgICAgICAgdTogbmV3IFVpbnQ4QXJyYXkodUFycmF5KSwKICAgICAgICAgIHY6IG5ldyBVaW50OEFycmF5KHZBcnJheSksCiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICAgIHdpZHRoOiBzdHJpZGVfeSwKICAgICAgICAgIHB0c1NlYzogcHRzICogMS4wIC8gMTAwMCwKICAgICAgICAgIHN0cmlkZV95OiBzdHJpZGVfeSwKICAgICAgICAgIHN0cmlkZV91OiBzdHJpZGVfdSwKICAgICAgICAgIHN0cmlkZV92OiBzdHJpZGVfdgogICAgICAgIH07CiAgICAgICAgLy8gTW9kdWxlLmFzbS5mcmVlKHlBcnJheSk7CiAgICAgICAgeUFycmF5ID0gbnVsbDsKICAgICAgICAvLyBNb2R1bGUuYXNtLmZyZWUodUFycmF5KTsKICAgICAgICB1QXJyYXkgPSBudWxsOwogICAgICAgIC8vIE1vZHVsZS5hc20uZnJlZSh2QXJyYXkpOyAKICAgICAgICB2QXJyYXkgPSBudWxsOwogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgdDogREVDT0RFU1RBVFVTLkRFQ09ERUQsCiAgICAgICAgICBmcmFtZTogZnJhbWUKICAgICAgICB9LCBbZnJhbWUueS5idWZmZXIsIGZyYW1lLnUuYnVmZmVyLCBmcmFtZS52LmJ1ZmZlcl0pOwogICAgICB9LCAidmlpaWlpaWlpZCIpOwogICAgICBNb2R1bGUuY3dyYXAoInNldENvZGVjVHlwZSIsICJudW1iZXIiLCBbIm51bWJlciIsICJudW1iZXIiLCAibnVtYmVyIl0pKHRoaXMudmNvZGVjZXJQdHIsIHZpZGVvQ29kZWMsIHRoaXMudmlkZW9DYWxsYmFjayk7CiAgICAgIE1vZHVsZS5jd3JhcCgiaW5pdGlhbGl6ZURlY29kZXIiLCAibnVtYmVyIiwgWyJudW1iZXIiXSkodGhpcy52Y29kZWNlclB0cik7CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgIHQ6IERFQ09ERVNUQVRVUy5JTklURUQKICAgICAgfSk7CiAgICB9OwogICAgX3Byb3RvLmRlY29kZVZpZGVvID0gZnVuY3Rpb24gZGVjb2RlVmlkZW8oZGF0YSkgewogICAgICB2YXIgbmFsQnVmID0gZGF0YS5uYWx1LAogICAgICAgIHB0cyA9IGRhdGEucHRzOwogICAgICB2YXIgb2Zmc2V0ID0gTW9kdWxlLmFzbS5tYWxsb2MobmFsQnVmLmxlbmd0aCk7CiAgICAgIE1vZHVsZS5IRUFQOC5zZXQobmFsQnVmLCBvZmZzZXQpOwogICAgICBNb2R1bGUuY3dyYXAoImRlY29kZUNvZGVjQ29udGV4dCIsICJudW1iZXIiLCBbIm51bWJlciIsICJudW1iZXIiLCAibnVtYmVyIiwgIm51bWJlciIsICJudW1iZXIiXSkodGhpcy52Y29kZWNlclB0ciwgb2Zmc2V0LCBuYWxCdWYubGVuZ3RoLCBwdHMsIDApOwogICAgICBNb2R1bGUuYXNtLmZyZWUob2Zmc2V0KTsKICAgICAgb2Zmc2V0ID0gbnVsbDsKICAgIH07CiAgICBfcHJvdG8ubG9hZEpzID0gZnVuY3Rpb24gbG9hZEpzKHVybCkgewogICAgICBzZWxmLmltcG9ydFNjcmlwdHModXJsKTsKICAgIH07CiAgICBfcHJvdG8ucmVsZWFzZSA9IGZ1bmN0aW9uIHJlbGVhc2UoKSB7CiAgICAgIE1vZHVsZS5jd3JhcCgicmVsZWFzZSIsICJudW1iZXIiLCBbIm51bWJlciJdKSh0aGlzLnZjb2RlY2VyUHRyKTsKICAgICAgTW9kdWxlLmN3cmFwKCJleGl0TWlzc2lsZSIsICJudW1iZXIiLCBbIm51bWJlciJdKSh0aGlzLnZjb2RlY2VyUHRyKTsKICAgIH07CiAgICBfcHJvdG8ub25XYXNtTG9hZGVkID0gZnVuY3Rpb24gb25XYXNtTG9hZGVkKCkgewogICAgICBpZiAodGhpcy53YXNtTG9hZGVkKSByZXR1cm47CiAgICAgIHRoaXMud2FzbUxvYWRlZCA9IHRydWU7CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgIHQ6IERFQ09ERVNUQVRVUy5XQVNNTE9BREVERUQKICAgICAgfSk7CiAgICAgIC8vICDliqDovb3lrozmiJDliJ3lp4vljJbop6PnoIHlmagKICAgICAgdGhpcy5pbml0RGVjb2RlcigpOwogICAgfTsKICAgIHJldHVybiBEZWNvZGVyOwogIH0oKTsKICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldnQpIHsKICAgIHZhciBkYXRhID0gZXZ0LmRhdGE7CiAgICBzd2l0Y2ggKGRhdGEudCkgewogICAgICBjYXNlIERFQ09ERVNUQVRVUy5JTklUOgogICAgICAgIC8vIHNlbGYuZGVjb2Rlci5pbml0RGVjb2RlcihkYXRhKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuREVDT0RFOgogICAgICAgIHNlbGYuZGVjb2Rlci5kZWNvZGVWaWRlbyhkYXRhLmZyYW1lKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuTE9BRFdBU01KUzoKICAgICAgICBzZWxmLmRlY29kZXIubG9hZEpzKGRhdGEucGF0aFVybCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgREVDT0RFU1RBVFVTLlJFTEVBU0U6CiAgICAgICAgc2VsZi5kZWNvZGVyLnJlbGVhc2UoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuQkFUQ0hGSU5JU0hGTEFHOgogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgdDogREVDT0RFU1RBVFVTLkJBVENIRklOSVNIRkxBRwogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgfQogIH07CiAgc2VsZi5kZWNvZGVyID0gbmV3IERlY29kZXIoKTsKICBmdW5jdGlvbiBvbldhc21Mb2FkZWQoKSB7CiAgICBpZiAoc2VsZi5kZWNvZGVyKSB7CiAgICAgIHNlbGYuZGVjb2Rlci5vbldhc21Mb2FkZWQoKTsKICAgIH0KICB9Cgp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1oZXZjLXdvcmtlci5qcy5tYXAKCg=="))&&i)).indexOf("\n",10)+1,i=i.substring(r)+(n?"//# sourceMappingURL="+n:""),r=new Blob([i],{type:"application/javascript"}),URL.createObjectURL(r)),new Worker(X,e);var t,n,i,r},$=(o(ue,J=B),(me=ue.prototype)._initDecoder=function(){this._bindWorkerEvent(),this.HevcWorker.postMessage({t:F.LOADWASMJS,pathUrl:this.IsSafari?this.wasmUrl:this.simdWasmUrl})},me._doDecodeFrame=function(e){this.HevcWorker.postMessage({t:F.DECODE,frame:e})},me._finishFlag=function(){this.HevcWorker.postMessage({t:F.BATCHFINISHFLAG})},me._bindWorkerEvent=function(){var e=this;this.HevcWorker.onmessage=function(t){var n=t.data;switch(n.t){case F.INITED:e._decoderReady=!0;break;case F.DECODED:e._workerMessageCallback(n),e._inDecoding=!0;break;case F.BATCHFINISHFLAG:if(e._inDecoding=!1,!e._workerMessageCallback)return;e._workerMessageCallback(n)}}},me._offWorkerBind=function(){this.HevcWorker.postMessage({t:F.RELEASE}),this.HevcWorker.onmessage=null,this.HevcWorker.terminate()},me.destroy=function(){this._offWorkerBind()},r(ue,[{key:"IsSafari",get:function(){return/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform)}}]),ue),ee=[],te=((B=le.prototype)._bindEvent=function(){this._worker.addEventListener("message",this._doTask)},B.start=function(e){60<(e=(e=parseInt(e))<10?10:e)?e=60:25<e&&(e=25),this._worker.postMessage({type:"START",interval:e})},B.stop=function(){this._worker.postMessage({type:"DESTROY"})},B.destroy=function(){this._worker&&(this._worker.postMessage({type:"DESTROY"}),this._worker.removeEventListener("message",this._doTask),ee.push(this._worker),this._worker=null,this._task=null)},le),ne=((me=se.prototype).append=function(e){this._frames.push(e)},me.shift=function(){return this._frames.shift()},me.destroy=function(){this._frames.forEach((function(e){var t;null!=(t=e.buffer)&&t.close&&e.buffer.close()})),this._frames=[]},r(se,[{key:"length",get:function(){return this._frames.length}},{key:"frames",get:function(){return this._frames}}]),se),ie=((B=oe.prototype).append=function(e){this.naluList.push(e),this._estimateBitRate()},B._estimateBitRate=function(){},B.getNalu=function(){return this.naluList.shift()},B.destroy=function(){this.naluList=[]},r(oe,[{key:"frameLength",get:function(){return this.naluList.length}}]),oe),re=((me=ae.prototype)._initTrackGenerator=function(){var e=new MediaStreamTrackGenerator({kind:"audio"}),t=new MediaStreamTrackGenerator({kind:"video"}),n=e.writable;this.writerVideo=t.writable.getWriter(),this.writerAudio=n.getWriter(),n=new MediaStream([e,t]),this.video.srcObject=n},me.render=function(e){this.writerVideo.write(e),e.close()},me.renderAudio=function(e){this.writerAudio.write(e)},me.destroy=function(){this.writerVideo=null,this.writerAudio=null},r(ae,[{key:"currentTime",get:function(){return this.video.currentTime}}]),ae);function ae(e){this.video=void 0,this.writerVideo=void 0,this.writerAudio=void 0,this.video=e,this.writerVideo=null,this.writerAudio=null,this._initTrackGenerator()}function oe(e){this.naluList=void 0,this.naluList=[]}function se(){this._frames=void 0,this._frames=[]}function le(e){var t=this;this._task=void 0,this._worker=void 0,this._doTask=function(){var e;null!=(e=t._task)&&e.call(t)},this._task=e,e=new Blob(["\n    var timer;\n\n    function initTimer (interval) {\n      destroy()\n      clearInterval(timer);\n      timer = setInterval(() => {\n          self.postMessage({type: 'NEXT_TICK'});\n      }, interval)\n    }\n\n    function destroy () {\n      clearInterval(timer);\n    }\n\n    self.onmessage = function (e) {\n      var {type,interval} = e.data;\n      switch (type) {\n          case 'START':\n            initTimer(interval);\n            break;\n          case 'DESTROY':\n            destroy();\n            break;\n      }\n    }\n"],{type:"application/javascript"}),this._worker=ee.pop()||new Worker(URL.createObjectURL(e)),this._bindEvent()}function ue(e){var t;return(t=J.call(this)||this).HevcWorker=void 0,t.simdWasmUrl=void 0,t.wasmUrl=void 0,t._continueDecodeThreshold=void 0,t.parent=void 0,t.parent=e,t.HevcWorker=new Z,t.simdWasmUrl="https://bce-cdn.bj.bcebos.com/jwplayer/4.3.0.1/missile-smid-v20230529.js",t.wasmUrl="https://bce-cdn.bj.bcebos.com/jwplayer/4.3.0.1/missile-v20230529.js",t._continueDecodeThreshold=10,t}function ce(e){this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}ce.prototype.bind=function(e,t,n){var i=this.gl;i.activeTexture([i.TEXTURE0,i.TEXTURE1,i.TEXTURE2][e]),i.bindTexture(i.TEXTURE_2D,this.texture),i.uniform1i(i.getUniformLocation(t,n),e)},ce.prototype.fill=function(e,t,n){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,e,t,0,i.LUMINANCE,i.UNSIGNED_BYTE,n)};var he,de,fe,pe,me,ge={renderFrame:function(e,t,n,i,r,a){var o=e.canvas.width,s=r/a*e.canvas.height;e.viewport((o-s)/2,0,s,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.y.fill(r,a,t),e.u.fill(r>>1,a>>1,n),e.v.fill(r>>1,a>>1,i),e.drawArrays(e.TRIANGLE_STRIP,0,4)},setupCanvas:function(e,t){var n,i,r,a;return(e=e.getContext("webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0}))&&(n=e.createProgram(),i=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {"," gl_Position = aVertexPosition;"," vTextureCoord = aTextureCoord;","}"].join("\n"),r=e.createShader(e.VERTEX_SHADER),e.shaderSource(r,i),e.compileShader(r),i=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),a=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(a,i),e.compileShader(a),e.attachShader(n,r),e.attachShader(n,a),e.linkProgram(n),e.useProgram(n),e.getProgramParameter(n,e.LINK_STATUS),i=e.getAttribLocation(n,"aVertexPosition"),e.enableVertexAttribArray(i),r=e.getAttribLocation(n,"aTextureCoord"),e.enableVertexAttribArray(r),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW),e.vertexAttribPointer(i,3,e.FLOAT,!1,0,0),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.y=new ce(e),e.u=new ce(e),e.v=new ce(e),e.y.bind(0,n,"YTexture"),e.u.bind(1,n,"UTexture"),e.v.bind(2,n,"VTexture")),e},releaseContext:function(e){e&&(e.deleteTexture(e.y.texture),e.deleteTexture(e.u.texture),e.deleteTexture(e.v.texture),e.clearColor(0,0,0,0))}},_e=((B=be.prototype)._initAudioCtx=function(){var e=window.AudioContext||window.webkitAudioContext;this._audioCtx=new e,this._audioCtx&&(this._gainNode=this._audioCtx.createGain(),this._gainNode.gain.value=1,this._gainNode.connect(this._audioCtx.destination),this._audioCanAutoplay="running"===this._audioCtx.state,this._bindAudioCtxEvent())},B._bindAudioCtxEvent=function(){var e=this;this._onStateChange=function(){e._audioCtx&&"running"===e._audioCtx.state&&e._ready},this._audioCtx.addEventListener("statechange",this._onStateChange)},B.decode=function(e){e&&this._sampleQueue.push(e),e=this._sampleQueue.length,this._inDecoding||e<10||this._decodeAACWrapper()},B._decodeAACWrapper=(pe=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._inDecoding=!0,n=this._concatAdts(this._sampleQueue.map((function(e){return e.adts})),0),this._sampleQueue=[],e.next=5,this._decodeAAC(n);case 5:this._inDecoding=!1;case 6:case"end":return e.stop()}}),t,this)}))),function(){return pe.apply(this,arguments)}),B._decodeAAC=function(e){var t=this;return new Promise((function(n,i){var r=t._audioCtx.decodeAudioData(e.buffer,(function(e){t._buffers.push(e),t._isRender&&t._isStartPlay||t._startRender(),n()}),i);r.catch&&r.catch(i)}))},B._onSourceBufferEnded=function(){this._isSourceBufferEnd=!0,this._startRender()},B._startRender=function(){"suspended"===this._audioCtx.state&&this._audioCtx.resume().catch((function(e){})),this._isStartPlay=!0;var e=this._getAudioBuffer();if(e){this._isRender=!0;var t=this._audioCtx.createBufferSource();t.buffer=e,t.loop=!1,(this._source=t).addEventListener("ended",this._onSourceBufferEnded),t.connect(this._gainNode);try{this._isSourceBufferEnd=!1,t.start()}catch(e){}}else this._isRender=!1},B._getAudioBuffer=function(){return this._buffers.shift()},B._concatAdts=function(e,t){void 0===t&&(t=0);for(var n=0,i=0,r=e.length;i<r;i++)t&&i%t==0||(n+=e[i].byteLength);for(var a=new Uint8Array(n),o=0,s=0,l=e.length;s<l;s++)t&&s%t==0||(a.set(e[s],o),o+=e[s].byteLength);return a},B.resume=function(){if(this._audioCtx&&"suspended"===this._audioCtx.state)return this._audioCtx.resume().catch((function(e){}))},B.mute=function(e){this._gainNode.gain.value=e?0:1,"running"!=this.audioState&&this.resume()},r(be,[{key:"currentTime",get:function(){return 0}},{key:"audioCanAutoplay",get:function(){return this._audioCanAutoplay}},{key:"audioState",get:function(){return this._audioCtx.state}}]),be),ye=((me=Ee.prototype)._bindEvent=function(){var e=this;this.demuxer.on(E.APPENDNALU,(function(t){e.isWebCodecs?e._decodeController._doDecodeFrame(t):e._nalQueue.append(t)})),this.demuxer.on(E.APPENDADTS,(function(t){e.isWebCodecs?e._decodeController._decodeAudio(t):e.AudioRender.decode(t)}))},me._selectDecoder=function(){this.isWebCodecs?this._decodeController=new H(this):this._decodeController=new $(this)},me._initDecoder=function(){var e;null!=(e=this._decodeController)&&e.init(this._decoderMessageCallback.bind(this)),this.isWebCodecs||this._startRender()},me._decoderMessageCallback=function(e){var t;switch(e.t){case F.DECODED:this._receiveFrame(e.frame);break;case F.BATCHFINISHFLAG:null!=(t=this._decodeController)&&t._decoderReady&&this._startDecode();break;case F.AUDIODECODED:this._frameRender.renderAudio(e.audioData)}},me._initWebgl=function(){this._createCanvas(),this.gl=ge.setupCanvas(this.renderEle,{preserveDrawingBuffer:!1})},me._createCanvas=function(){var e=this.renderEle.parentNode,t=document.createElement("canvas");t.id=this.renderEle.id,t.width=this.renderEle.clientWidth,t.height=this.renderEle.clientHeight,e.appendChild(t),e.removeChild(this.renderEle),this.renderEle=t},me._startRender=function(){this._tickTimer.start(20)},me._render=function(){var e=this._frameQueue.shift();e&&(this.isWebCodecs?this._frameRender.render(e):this.webGlRender(e),this._getFramerate()),this._checkToDecode()},me._getFramerate=function(){this.framerate++,-1==this.oneTime?this.oneTime=(new Date).getTime():1e3<(new Date).getTime()-this.oneTime&&(this.oneTime=(new Date).getTime(),this.renderFramerate=JSON.parse(JSON.stringify(this.framerate)),this.framerate=0)},me.webGlRender=function(e){this._isPaused||(this.VideoInfo[b.WIDTH]||(this.VideoInfo[b.WIDTH]=e.width,this.VideoInfo[b.HEIGHT]=e.height,this.renderEle.width=e.width,this.renderEle.height=e.height,this._addEvent(A.CANPLAY),this._addEvent(A.ON_PLAY)),ge.renderFrame(this.gl,e.y,e.u,e.v,e.width,e.height),this.isWebCodecs)||(e.y=null,e.u=null,e.v=null)},me._startDecode=function(){var e;null!=(e=this._decodeController)&&e.doDecode()},me._checkToDecode=function(){var e;null!=(e=this._decodeController)&&e.checkToDecode(this._frameQueue.length)},me._receiveFrame=function(e){this.isWebCodecs&&this._getFramerate(),this.isWebCodecs?this._frameRender.render(e):this._frameQueue.append(e)},me.mute=function(e){this.AudioRender&&this.AudioRender.mute(e)},me.play=function(){this._isPaused=!1,this._addEvent(A.ON_PLAY)},me.pause=function(){this._isPaused=!0,this._addEvent(A.ON_PAUSE)},me.getPlayStatus=function(){return this._isPaused?w.PAUSED:w.PLAYING},me._addEvent=function(e){this.rtcPlayer.trigger(e,{type:e})},me.destroy=function(){var e;null!=(e=this._tickTimer)&&e.destroy(),(this._tickTimer=null)!=ge&&ge.releaseContext(this.gl),null!=(e=this._nalQueue)&&e.destroy(),null!=(e=this._frameQueue)&&e.destroy(),null!=(e=this._frameRender)&&e.destroy()},r(Ee,[{key:"renderIsVideo",get:function(){var e;return null==(e=this.renderEle)?void 0:e.tagName.toLocaleLowerCase().includes("video")}},{key:"isWebCodecs",get:function(){return H.isSupported()}},{key:"videoInfo",get:function(){var e;return a(this.renderIsVideo?((e={})[b.WIDTH]=this.renderEle.videoWidth,e[b.HEIGHT]=this.renderEle.videoHeight,e):this.VideoInfo,((e={})[b.FRAMERATE]=this.renderFramerate,e))}}]),Ee),ve=((B=Ae.prototype)._initHevcController=function(){this.isEvs&&this.useDataChannel&&(this.demuxer=new N,this.HevcController=new ye(this.demuxer,this.ele,this.rtcPlayer))},B._initPeerConnection=function(){try{this.pc=new RTCPeerConnection,this._addEvent()}catch(t){var e={type:v.ERROR,errorTypes:L.CREATE_PEERCONNECTION_ERROR,msg:t,details:t,code:D.CREATE_PEERCONNECTION_ERROR,url:null==(e=this.postMsg)?void 0:e.requsetUrl};this.callBack&&this.callBack(e),this.rtcPlayer.trigger(v.ERROR,e),this.reconnectTimerFunc()}},B._viedeoEventList=function(){return[A.ON_PLAY,A.ON_PAUSE,A.LOADEDMETADATA,A.CANPLAY,A.ON_VOLUME_CHANGE]},B._addVideoEvent=function(){var e=this,t=this.ele;t&&this._viedeoEventList().forEach((function(n){t.addEventListener(n,e._onVideoEvnet.bind(e))}))},B._removeVideoEvent=function(){var e=this,t=this.ele;t&&this._viedeoEventList().forEach((function(n){t.removeEventListener(n,e._onVideoEvnet.bind(e))}))},B._onVideoEvnet=function(e){e=e.type,this.reconnectStatus!=T.RECONNECT_SUCCESS&&e==A.ON_PLAY||this.rtcPlayer.trigger(e,{type:e})},B._addEvent=function(){var e;this.pc.addEventListener("icecandidate",this._onIceCandidate.bind(this)),this.pc.addEventListener("track",this._onTrack.bind(this)),this.pc.addEventListener("icecandidateerror",this._onIceCandidateError.bind(this)),this.pc.addEventListener("iceconnectionstatechange",this._onConnectionStateChange.bind(this)),this.isEvs&&null!=(e=this.rtcPlayer)&&null!=(e=e.rtcConfig)&&e.usedatachannel&&(this.datachannel=this.pc.createDataChannel("chat"),this.datachannel.binaryType="arraybuffer",this.datachannel.addEventListener("open",this._onDataChannelOpen.bind(this)),this.datachannel.addEventListener("message",this._onDataChannelMsg.bind(this)),this.datachannel.addEventListener("close",this._onDataChannelClose.bind(this)),this.datachannel.addEventListener("error",this._onDataChannelError.bind(this)))},B._onIceCandidate=function(e){},B._onTrack=function(e){!this.isHevcCode&&this.ele instanceof HTMLMediaElement&&(this.ele.srcObject=e.streams[0]),this.isHevcCode||this.rtcPlayer.trigger(v.REMOTE_STREAM_ADD,{MediaStream:e.streams[0]})},B._onIceCandidateError=function(){},B._onConnectionStateChange=function(){this.pc&&("disconnected"===this.pc.iceConnectionState&&(this.reconnectStatus=T.RECONNECTING,this.reConnecting(),this.rtcPlayer.trigger(v.RE_CONNECTING,{type:v.RE_CONNECTING})),this.pc&&"connected"===this.pc.iceConnectionState&&this.reconnectStatus==T.RECONNECTING&&this.reConnectSuccess(),this.rtcPlayer.trigger(v.CONNECTION_STATE_CHANGE,{state:this.pc&&this.pc.iceConnectionState}))},B._onDataChannelOpen=function(){this.rtcPlayer.trigger(v.ON_DATA_CHANNEL_OPEN,{type:v.ON_DATA_CHANNEL_OPEN})},B._onDataChannelMsg=function(e){e=e.data,this.demuxer.appendBuffer(e)},B._onDataChannelClose=function(){this.rtcPlayer.trigger(v.ON_DATA_CHANNEL_CLOSE,{type:v.ON_DATA_CHANNEL_CLOSE})},B._onDataChannelError=function(){this.rtcPlayer.trigger(v.ON_DATA_CHANNEL_ERROR,{type:v.ON_DATA_CHANNEL_ERROR})},B.subscribeLiveStream=(fe=n(e().mark((function t(){var i,r,a,o,s,l=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.postMsg,r=i.serverUrl,a=i.requsetUrl,o=i.headers,s=i.isEvsLive,t.abrupt("return",new Promise(function(){var t=n(e().mark((function t(n,i){var u,c,h,d,f,p,m;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.pc){e.next=2;break}return e.abrupt("return");case 2:return l.pc.addTransceiver("video",{direction:"recvonly",sendEncodings:[]}),l.pc.addTransceiver("audio",{direction:"recvonly",sendEncodings:[]}),e.next=6,l.pc.createOffer();case 6:return u=e.sent,e.next=9,l.pc.setLocalDescription(u);case 9:return c=s?u.sdp:JSON.stringify({streamurl:r,sdp:u.sdp}),e.prev=10,e.next=14,l.fetch.load(a||"",{method:"post",body:c,headers:o});case 14:if(0!=(h=e.sent).code){e.next=40;break}if(d=h.sdp,f={sdp:d,type:"answer"},!d.includes("rtpmap:265 HEVC/90000")){e.next=35;break}l.isHevc=!0,l._initHevcController(),p=d.split("\r\n"),m=0;case 25:if(m<p.length){if(p[m].includes("rtpmap:265 HEVC/90000"))return l.demuxer&&l.demuxer.setAudioInfo(p[m].split("_")[1]),p.splice(m,1),e.abrupt("break",33);e.next=30}else e.next=33;break;case 30:m++,e.next=25;break;case 33:p.push(""),f.sdp=p.join("\r\n");case 35:return e.next=38,l.pc.setRemoteDescription(f);case 38:e.next=41;break;case 40:l.rtcPlayer.trigger(v.ERROR,h);case 41:n(h),e.next=48;break;case 44:e.prev=44,e.t0=e.catch(10),C.warn("subscribeLiveStream fetch: "+e.t0.message),i(e.t0);case 48:case"end":return e.stop()}}),t,null,[[10,44]])})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(){return fe.apply(this,arguments)}),B.getStats=(de=n(e().mark((function t(){var n,i,r,o,s,l,u,c=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={},i=e().mark((function t(){var i,o,s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.pc.getReceivers()[r],e.next=3,i.getStats();case 3:o=e.sent,s=i.track.kind,o.forEach((function(e){"inbound-rtp"!=e.type&&"codec"!==e.type||(n[s]=n[s]?a(n[s],e):e)}));case 6:case"end":return e.stop()}}),t)})),r=0;case 3:if(r<this.pc.getReceivers().length)return t.delegateYield(i(),"t0",5);t.next=8;break;case 5:r++,t.next=3;break;case 8:for(s in o={video:{width:"frameWidth",height:"frameHeight",code:"mimeType",frameRate:"framesPerSecond",playStyle:"rtc",demuxStyle:"rtc",bitRate:"bytesReceived"},audio:{sampleRate:"clockRate",code:"mimeType",bitRate:"bytesReceived",channels:"channels"}})for(l in o[s])u=o[s][l],n&&n[s]&&n[s][u]&&(o[s][l]=n[s][u]);return this.isHevc&&(o=this._HevcMediaInfo()),t.abrupt("return",o);case 12:case"end":return t.stop()}}),t,this)}))),function(){return de.apply(this,arguments)}),B._HevcMediaInfo=function(){var e=null==(e=this.HevcController)?void 0:e.videoInfo;return e[b.CODEC]=b.HEVC,{video:e,audio:{}}},B.sendMsg=function(e){try{this.datachannel.send(e)}catch(e){this.rtcPlayer.trigger(v.ERROR,{type:"datachannelSend",err:e})}},B.reConnecting=(he=n(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reConnectNumber--,this.closeReconnect(),this.reConnectNumber<0)return this.reConnectFailed(),e.abrupt("return");e.next=5;break;case 5:if(this.pc&&"connected"!=this.pc.iceConnectionState||!this.pc)return this.destroyPc(),this._initPeerConnection(),e.next=10,this.subscribeLiveStream();e.next=12;break;case 10:e.next=14;break;case 12:return this.reConnectSuccess(),e.abrupt("return");case 14:this.reconnectTimerFunc();case 15:case"end":return e.stop()}}),t,this)}))),function(){return he.apply(this,arguments)}),B.reconnectTimerFunc=function(){var t=this;this.closeReconnect(),this.reconnectStatus==T.RECONNECTING&&(this.reConnectTimer=setTimeout(n(e().mark((function n(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t.pc&&"connected"!=t.pc.iceConnectionState||!t.pc)&&t.reConnecting();case 1:case"end":return e.stop()}}),n)}))),1e3*this.oneReConnectTime))},B.reConnectFailed=function(){this.closeReconnect(),this._removeVideoEvent(),this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reconnectStatus=T.RECONNECT_FAILED,this.rtcPlayer.trigger(v.RE_CONNECT_FAILED,{type:v.RE_CONNECT_FAILED})},B.reConnectSuccess=function(){this.reconnectStatus==T.RECONNECTING&&(this.closeReconnect(),this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reconnectStatus=T.RECONNECT_SUCCESS,this.rtcPlayer.trigger(v.RE_CONNECT_SUCCESS,{type:v.RE_CONNECT_SUCCESS}))},B.closeReconnect=function(){this.reConnectTimer&&(clearTimeout(this.reConnectTime),this.reConnectTimer=null)},B.closeDataChannel=function(){this.datachannel&&(this.datachannel.close&&this.datachannel.close(),this.datachannel=null)},B.setVolume=function(e){"video"===this.eleTagName&&this.ele&&(this.ele,HTMLMediaElement),this.mute(0===e,e)},B.mute=function(e,t){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?(this.ele.muted=e,null!=t&&(this.ele.volume=e?0:t)):this.HevcController&&this.HevcController.mute(e)},B.getAudioStatus=function(){if("video"===this.eleTagName)return this.rtcPlayer.getEelement&&this.rtcPlayer.getEelement.muted?"muted":"unmuted"},B.play=function(){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.play():this.HevcController&&this.HevcController.play()},B.pause=function(){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.pause():this.HevcController&&this.HevcController.pause()},B.getPlayStatus=function(){return"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.paused?w.PAUSED:w.PLAYING:this.HevcController&&this.HevcController.getPlayStatus()},B.destroyPc=function(){this.closeDataChannel(),this.pc&&(this.pc.close(),this.pc=null)},B.destroy=function(){var e;this.destroyPc(),null!=(e=this.demuxer)&&e.destroy(),null!=(e=this.HevcController)&&e.destroy(),this._removeVideoEvent(),this.reConnectTime=-1,this.reConnectNumber=-1,this.reConnectTimer=null,this.reconnectStatus=T.RECONNECT_SUCCESS,this.rtcPlayer.trigger(v.DESTROY,{type:v.DESTROY})},r(Ae,[{key:"eleTagName",get:function(){var e;return null==(e=this.rtcPlayer.getEelement)?void 0:e.tagName.toLocaleLowerCase()}},{key:"ele",get:function(){return this.rtcPlayer.getEelement}},{key:"isEvs",get:function(){var e=this.rtcPlayer.rtcConfig.serverUrl;return null==e?void 0:e.includes(".rtc")}},{key:"isHevcCode",get:function(){return this.isHevc}},{key:"postMsg",get:function(){var e,t,n,i=this.rtcPlayer.rtcConfig.serverUrl,r=null==i?void 0:i.includes(".rtc");return n=r?(t=i,{"Content-Type":"text/plain;charset=utf-8"}):(e=null==i?void 0:i.replace("webrtc://","http://"),e=new URL(e||""),n="http://",t=(n=this.useHttps?"https://":n)+e.host+"/brtc/v3/pullstream",{"Content-Type":"application/json"}),{requsetUrl:t,headers:n,isEvsLive:r,serverUrl:i}}},{key:"useDataChannel",get:function(){var e;return null==(e=this.rtcPlayer)||null==(e=e.rtcConfig)?void 0:e.usedatachannel}},{key:"useHttps",get:function(){var e;return null==(e=this.rtcPlayer)||null==(e=e.rtcConfig)?void 0:e.usehttps}}]),Ae);function Ae(e,t){this.rtcPlayer=void 0,this.pc={},this.datachannel={},this.demuxer=void 0,this.fetch=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this.reConnectTime=void 0,this.reConnectNumber=void 0,this.reConnectTimer=void 0,this.HevcController=void 0,this.isHevc=void 0,this.oneReConnectTime=void 0,this.reconnectStatus=void 0,this.callBack=void 0,this.rtcPlayer=e,this.callBack=t,this.fetch=new k,e="[rtc-peerconnection]",this.log=C.log.bind(C,e),this.warn=C.warn.bind(C,e),this.error=C.error.bind(C,e),this.reConnectTime=this.rtcPlayer.rtcConfig.reConnectTimeOut||30,this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reConnectTimer=null,this.oneReConnectTime=this.reConnectTime/this.reConnectNumber,this.reconnectStatus=T.RECONNECT_SUCCESS,this.isHevc=!1,this.demuxer=null,this.HevcController=null,this._initPeerConnection(),this._addVideoEvent()}function Ee(e,t,n){this.rtcPlayer=void 0,this.demuxer=void 0,this._decodeController=void 0,this._tickTimer=void 0,this._nalQueue=void 0,this._frameQueue=void 0,this._frameRender=void 0,this.gl=void 0,this.AudioRender=void 0,this.renderEle=void 0,this.VideoInfo=void 0,this._isPaused=void 0,this.framerate=void 0,this.oneTime=void 0,this.renderFramerate=void 0,this.rtcPlayer=n,this.demuxer=e,this.renderEle=t,this._nalQueue=new ie(this),this._frameQueue=new ne,this._decodeController=null,this._isPaused=!1,this.VideoInfo={},this._tickTimer=new te(this._render.bind(this)),this.gl=null,this._frameRender=this.isWebCodecs?new re(this.renderEle):this._initWebgl(),this.AudioRender=new _e,this._selectDecoder(),this._initDecoder(),this._bindEvent(),this.framerate=0,this.oneTime=-1,this.renderFramerate=0}function be(){this._audioCtx=void 0,this._gainNode=void 0,this._audioCanAutoplay=void 0,this._onStateChange=void 0,this._ready=void 0,this._sampleQueue=void 0,this._inDecoding=void 0,this._isSourceBufferEnd=void 0,this._buffers=void 0,this._source=void 0,this._isStartPlay=void 0,this._isRender=void 0,this._audioCtx,this._gainNode,this._audioCanAutoplay,this._onSourceBufferEnded=this._onSourceBufferEnded.bind(this),this._onStateChange,this._ready=!1,this._inDecoding=!1,this._sampleQueue=[],this._isSourceBufferEnd=!1,this._source,this._initAudioCtx(),this._isStartPlay=!1,this._buffers=[],this._isRender=!1}return(me=we.prototype).on=function(e,t,n){this._emitter.on(e,t,n=void 0===n?this:n)},me.once=function(e,t,n){this._emitter.once(e,t,n=void 0===n?this:n)},me.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},me.off=function(e,t,n,i){this._emitter.off(e,t,n=void 0===n?this:n,i)},me.listeners=function(e){return this._emitter.listeners(e)},me.emit=function(e,t,n){return this._emitter.emit(e,t,n)},me.trigger=function(e,t){return this.emit(e,e,t)},me.listenerCount=function(e){return this._emitter.listenerCount(e)},me.subscribeLiveStream=function(){this.peerConnection.subscribeLiveStream()},me.sendMsg=function(e){this.peerConnection.sendMsg(e)},me.closeDataChannel=function(){this.peerConnection.closeDataChannel()},me.getStats=function(){return this.peerConnection.getStats()},me.mute=function(e){this.peerConnection.mute(e)},me.setVolume=function(e){this.peerConnection.setVolume(e)},me.getAudioStatus=function(){return this.peerConnection.getAudioStatus()},me.play=function(){return this.peerConnection.play()},me.pause=function(){return this.peerConnection.pause()},me.getPlayStatus=function(){return this.peerConnection.getPlayStatus()},me.destroy=function(){this.peerConnection.destroy()},r(we,[{key:"getEelement",get:function(){return document.getElementById(this.rtcConfig.id)}}],[{key:"Events",get:function(){return a({},v,A)}}]),we;function we(e,t){if(void 0===e&&(e={}),this._emitter=new y,this.rtcConfig=void 0,this.peerConnection=void 0,self.console){!function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){var n;I[t]=e[t]?e[t].bind(e):(n=self.console[t])?n.bind(self.console,"["+t+"] >"):S}))}(!0,"debug","log","info","warn","error");try{I.log("Debug logs enabled for 'RTC instance' in rtcplayer.js version 1.0.0")}catch(e){I=R}}else I=R;this.rtcConfig=e,this.peerConnection=new ve(this,t)}}()},,function(e,t,n){n.r(t),n.d(t,"getPlayerPath",(function(){return a})),n.d(t,"loadWasm",(function(){return o})),n.d(t,"setPerformance",(function(){return s})),t=n(117);var i=n.n(t),r=(t=n(1),n.n(t));let a=(e=0)=>{var t=document.getElementsByTagName("script"),n=null;for(let e=0;e<t.length;e++)if((t[e].src.includes("cyberplayer.js")||t[e].src.includes("cyberplayer-evs.js"))&&!t[e].src.includes("sdk-player")){n=t[e].src.substring(0,t[e].src.lastIndexOf("/")+1);break}return n},o=e=>{var t=document.getElementsByTagName("html"),n=i.a.simd(),o=a();let s=document.getElementById("cyberplayer-wasm");var l=r.a.isSafari();s&&e(),s||((s=document.createElement("script")).type="text/javascript",s.id="cyberplayer-wasm",s.src=n&&!l?o+"missile-simd.js":o+"missile.js",t[0].appendChild(s)),s.addEventListener("load",(()=>{e()}))},s=e=>{}},,function(e,t,n){t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return a.test(e)?e.replace(r,o):e},t.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,a=/[&<>"'`=]/;function o(e){return i[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString,u=(t.toString=l,function(e){return"function"==typeof e}),c=(u(/x/)&&(t.isFunction=u=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=u,Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)});t.isArray=c},function(e,t,n){e.exports=function(e,t,n,i){var r,a=self||window;try{try{try{r=new a.Blob([e])}catch(o){(r=new(a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder)).append(e),r=r.getBlob()}var o=a.URL||a.webkitURL,s=o.createObjectURL(r),l=new a[t](s,n);return o.revokeObjectURL(s),l}catch(o){return new a[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(o){if(i)return new a[t](i,n);throw Error("Inline worker is not supported")}}},function(e,t,n){var i={},r=(n.r(i),n.d(i,"create",(function(){return p})),n.d(i,"clone",(function(){return m})),n.d(i,"copy",(function(){return g})),n.d(i,"fromValues",(function(){return _})),n.d(i,"set",(function(){return y})),n.d(i,"identity",(function(){return v})),n.d(i,"transpose",(function(){return A})),n.d(i,"invert",(function(){return E})),n.d(i,"adjoint",(function(){return b})),n.d(i,"determinant",(function(){return w})),n.d(i,"multiply",(function(){return T})),n.d(i,"translate",(function(){return S})),n.d(i,"scale",(function(){return R})),n.d(i,"rotate",(function(){return I})),n.d(i,"rotateX",(function(){return C})),n.d(i,"rotateY",(function(){return L})),n.d(i,"rotateZ",(function(){return P})),n.d(i,"fromTranslation",(function(){return D})),n.d(i,"fromScaling",(function(){return k})),n.d(i,"fromRotation",(function(){return x})),n.d(i,"fromXRotation",(function(){return M})),n.d(i,"fromYRotation",(function(){return O})),n.d(i,"fromZRotation",(function(){return N})),n.d(i,"fromRotationTranslation",(function(){return F})),n.d(i,"fromQuat2",(function(){return B})),n.d(i,"getTranslation",(function(){return U})),n.d(i,"getScaling",(function(){return j})),n.d(i,"getRotation",(function(){return G})),n.d(i,"fromRotationTranslationScale",(function(){return V})),n.d(i,"fromRotationTranslationScaleOrigin",(function(){return H})),n.d(i,"fromQuat",(function(){return Y})),n.d(i,"frustum",(function(){return z})),n.d(i,"perspectiveNO",(function(){return W})),n.d(i,"perspective",(function(){return K})),n.d(i,"perspectiveZO",(function(){return q})),n.d(i,"perspectiveFromFieldOfView",(function(){return Q})),n.d(i,"orthoNO",(function(){return X})),n.d(i,"ortho",(function(){return J})),n.d(i,"orthoZO",(function(){return Z})),n.d(i,"lookAt",(function(){return $})),n.d(i,"targetTo",(function(){return ee})),n.d(i,"str",(function(){return te})),n.d(i,"frob",(function(){return ne})),n.d(i,"add",(function(){return ie})),n.d(i,"subtract",(function(){return re})),n.d(i,"multiplyScalar",(function(){return ae})),n.d(i,"multiplyScalarAndAdd",(function(){return oe})),n.d(i,"exactEquals",(function(){return se})),n.d(i,"equals",(function(){return le})),n.d(i,"mul",(function(){return ue})),n.d(i,"sub",(function(){return ce})),{}),a=(n.r(r),n.d(r,"create",(function(){return he})),n.d(r,"clone",(function(){return de})),n.d(r,"length",(function(){return fe})),n.d(r,"fromValues",(function(){return pe})),n.d(r,"copy",(function(){return me})),n.d(r,"set",(function(){return ge})),n.d(r,"add",(function(){return _e})),n.d(r,"subtract",(function(){return ye})),n.d(r,"multiply",(function(){return ve})),n.d(r,"divide",(function(){return Ae})),n.d(r,"ceil",(function(){return Ee})),n.d(r,"floor",(function(){return be})),n.d(r,"min",(function(){return we})),n.d(r,"max",(function(){return Te})),n.d(r,"round",(function(){return Se})),n.d(r,"scale",(function(){return Re})),n.d(r,"scaleAndAdd",(function(){return Ie})),n.d(r,"distance",(function(){return Ce})),n.d(r,"squaredDistance",(function(){return Le})),n.d(r,"squaredLength",(function(){return Pe})),n.d(r,"negate",(function(){return De})),n.d(r,"inverse",(function(){return ke})),n.d(r,"normalize",(function(){return xe})),n.d(r,"dot",(function(){return Me})),n.d(r,"cross",(function(){return Oe})),n.d(r,"lerp",(function(){return Ne})),n.d(r,"hermite",(function(){return Fe})),n.d(r,"bezier",(function(){return Be})),n.d(r,"random",(function(){return Ue})),n.d(r,"transformMat4",(function(){return je})),n.d(r,"transformMat3",(function(){return Ge})),n.d(r,"transformQuat",(function(){return Ve})),n.d(r,"rotateX",(function(){return He})),n.d(r,"rotateY",(function(){return Ye})),n.d(r,"rotateZ",(function(){return ze})),n.d(r,"angle",(function(){return We})),n.d(r,"zero",(function(){return Ke})),n.d(r,"str",(function(){return qe})),n.d(r,"exactEquals",(function(){return Qe})),n.d(r,"equals",(function(){return Xe})),n.d(r,"sub",(function(){return Ze})),n.d(r,"mul",(function(){return $e})),n.d(r,"div",(function(){return et})),n.d(r,"dist",(function(){return tt})),n.d(r,"sqrDist",(function(){return nt})),n.d(r,"len",(function(){return it})),n.d(r,"sqrLen",(function(){return rt})),n.d(r,"forEach",(function(){return at})),{}),o=(n.r(a),n.d(a,"create",(function(){return ot})),n.d(a,"identity",(function(){return st})),n.d(a,"setAxisAngle",(function(){return lt})),n.d(a,"getAxisAngle",(function(){return ut})),n.d(a,"getAngle",(function(){return ct})),n.d(a,"multiply",(function(){return ht})),n.d(a,"rotateX",(function(){return dt})),n.d(a,"rotateY",(function(){return ft})),n.d(a,"rotateZ",(function(){return pt})),n.d(a,"calculateW",(function(){return mt})),n.d(a,"exp",(function(){return gt})),n.d(a,"ln",(function(){return _t})),n.d(a,"pow",(function(){return yt})),n.d(a,"slerp",(function(){return vt})),n.d(a,"random",(function(){return At})),n.d(a,"invert",(function(){return Et})),n.d(a,"conjugate",(function(){return bt})),n.d(a,"fromMat3",(function(){return wt})),n.d(a,"fromEuler",(function(){return Tt})),n.d(a,"str",(function(){return St})),n.d(a,"clone",(function(){return kt})),n.d(a,"fromValues",(function(){return xt})),n.d(a,"copy",(function(){return Mt})),n.d(a,"set",(function(){return Ot})),n.d(a,"add",(function(){return Nt})),n.d(a,"mul",(function(){return Ft})),n.d(a,"scale",(function(){return Bt})),n.d(a,"dot",(function(){return Ut})),n.d(a,"lerp",(function(){return jt})),n.d(a,"length",(function(){return Gt})),n.d(a,"len",(function(){return Vt})),n.d(a,"squaredLength",(function(){return Ht})),n.d(a,"sqrLen",(function(){return Yt})),n.d(a,"normalize",(function(){return zt})),n.d(a,"exactEquals",(function(){return Wt})),n.d(a,"equals",(function(){return Kt})),n.d(a,"rotationTo",(function(){return qt})),n.d(a,"sqlerp",(function(){return Qt})),n.d(a,"setAxes",(function(){return Xt})),{});function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}(arguments[t]));return e}function l(e){return void 0===e}n.r(o),n.d(o,"create",(function(){return Jt})),n.d(o,"clone",(function(){return Zt})),n.d(o,"fromValues",(function(){return $t})),n.d(o,"copy",(function(){return en})),n.d(o,"set",(function(){return tn})),n.d(o,"add",(function(){return nn})),n.d(o,"subtract",(function(){return rn})),n.d(o,"multiply",(function(){return an})),n.d(o,"divide",(function(){return on})),n.d(o,"ceil",(function(){return sn})),n.d(o,"floor",(function(){return ln})),n.d(o,"min",(function(){return un})),n.d(o,"max",(function(){return cn})),n.d(o,"round",(function(){return hn})),n.d(o,"scale",(function(){return dn})),n.d(o,"scaleAndAdd",(function(){return fn})),n.d(o,"distance",(function(){return pn})),n.d(o,"squaredDistance",(function(){return mn})),n.d(o,"length",(function(){return gn})),n.d(o,"squaredLength",(function(){return _n})),n.d(o,"negate",(function(){return yn})),n.d(o,"inverse",(function(){return vn})),n.d(o,"normalize",(function(){return An})),n.d(o,"dot",(function(){return En})),n.d(o,"cross",(function(){return bn})),n.d(o,"lerp",(function(){return wn})),n.d(o,"random",(function(){return Tn})),n.d(o,"transformMat2",(function(){return Sn})),n.d(o,"transformMat2d",(function(){return Rn})),n.d(o,"transformMat3",(function(){return In})),n.d(o,"transformMat4",(function(){return Cn})),n.d(o,"rotate",(function(){return Ln})),n.d(o,"angle",(function(){return Pn})),n.d(o,"zero",(function(){return Dn})),n.d(o,"str",(function(){return kn})),n.d(o,"exactEquals",(function(){return xn})),n.d(o,"equals",(function(){return Mn})),n.d(o,"len",(function(){return Nn})),n.d(o,"sub",(function(){return Fn})),n.d(o,"mul",(function(){return Bn})),n.d(o,"div",(function(){return Un})),n.d(o,"dist",(function(){return jn})),n.d(o,"sqrDist",(function(){return Gn})),n.d(o,"sqrLen",(function(){return Vn})),n.d(o,"forEach",(function(){return Hn}));var u=function(){function e(e,t){var n,i;if(this._canceled=!1,t)try{for(var r=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&i>=e.length?void 0:e)&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.keys(t)),a=r.next();!a.done;a=r.next()){var o=a.value;this[o]=t[o]}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.eventType=e}var t=e.prototype;return t.stop=function(){this._canceled=!0},t.isCanceled=function(){return this._canceled},e}(),c=u,h=(n=function(){function e(){this._eventHandler={}}var t=e.prototype;return t.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=e instanceof u?e.eventType:e;return(i=s(this._eventHandler[i]||[])).length<=0||(e instanceof u?(e.currentTarget=this,i.forEach((function(t){t(e)}))):i.forEach((function(e){e.apply(void 0,s(t))}))),this},t.once=function(e,t){var n,i=this;if("object"==typeof e&&l(t)){var r,a=e;for(r in a)this.once(r,a[r])}else"string"==typeof e&&"function"==typeof t&&(n=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];t.apply(void 0,s(r)),i.off(e,n)},this.on(e,n));return this},t.hasOn=function(e){return!!this._eventHandler[e]},t.on=function(e,t){if("object"==typeof e&&l(t)){var n,i=e;for(n in i)this.on(n,i[n])}else{var r;"string"==typeof e&&"function"==typeof t&&(l(r=this._eventHandler[e])&&(this._eventHandler[e]=[],r=this._eventHandler[e]),r.push(t))}return this},t.off=function(e,t){if(l(e))this._eventHandler={};else if(l(t))if("string"==typeof e)delete this._eventHandler[e];else{var n,i=e;for(n in i)this.off(n,i[n])}else{var r=this._eventHandler[e];if(r)for(var a=r.length,o=0;o<a;++o)if(r[o]===t){r.splice(o,1),a<=1&&delete this._eventHandler[e];break}}return this},e.VERSION="3.0.5",e}(),1e-6),d="undefined"!=typeof Float32Array?Float32Array:Array,f=Math.random;function p(){var e=new d(16);return d!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function m(e){var t=new d(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function _(e,t,n,i,r,a,o,s,l,u,c,h,f,p,m,g){var _=new d(16);return _[0]=e,_[1]=t,_[2]=n,_[3]=i,_[4]=r,_[5]=a,_[6]=o,_[7]=s,_[8]=l,_[9]=u,_[10]=c,_[11]=h,_[12]=f,_[13]=p,_[14]=m,_[15]=g,_}function y(e,t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=m,e[15]=g,e}function v(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t){var n,i,r,a,o,s;return e===t?(n=t[1],i=t[2],r=t[3],a=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=r,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]),e}function E(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],_=n*s-i*o,y=n*l-r*o,v=n*u-a*o,A=i*l-r*s,E=i*u-a*s,b=r*u-a*l,w=c*m-h*p,T=c*g-d*p,S=c*(t=t[15])-f*p,R=h*g-d*m,I=h*t-f*m,C=d*t-f*g,L=_*C-y*I+v*R+A*S-E*T+b*w;return L?(e[0]=(s*C-l*I+u*R)*(L=1/L),e[1]=(r*I-i*C-a*R)*L,e[2]=(m*b-g*E+t*A)*L,e[3]=(d*E-h*b-f*A)*L,e[4]=(l*S-o*C-u*T)*L,e[5]=(n*C-r*S+a*T)*L,e[6]=(g*v-p*b-t*y)*L,e[7]=(c*b-d*v+f*y)*L,e[8]=(o*I-s*S+u*w)*L,e[9]=(i*S-n*I-a*w)*L,e[10]=(p*E-m*v+t*_)*L,e[11]=(h*v-c*E-f*_)*L,e[12]=(s*T-o*R-l*w)*L,e[13]=(n*R-i*T+r*w)*L,e[14]=(m*y-p*A-g*_)*L,e[15]=(c*A-h*y+d*_)*L,e):null}function b(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14];return t=t[15],e[0]=s*(d*t-f*g)-h*(l*t-u*g)+m*(l*f-u*d),e[1]=-(i*(d*t-f*g)-h*(r*t-a*g)+m*(r*f-a*d)),e[2]=i*(l*t-u*g)-s*(r*t-a*g)+m*(r*u-a*l),e[3]=-(i*(l*f-u*d)-s*(r*f-a*d)+h*(r*u-a*l)),e[4]=-(o*(d*t-f*g)-c*(l*t-u*g)+p*(l*f-u*d)),e[5]=n*(d*t-f*g)-c*(r*t-a*g)+p*(r*f-a*d),e[6]=-(n*(l*t-u*g)-o*(r*t-a*g)+p*(r*u-a*l)),e[7]=n*(l*f-u*d)-o*(r*f-a*d)+c*(r*u-a*l),e[8]=o*(h*t-f*m)-c*(s*t-u*m)+p*(s*f-u*h),e[9]=-(n*(h*t-f*m)-c*(i*t-a*m)+p*(i*f-a*h)),e[10]=n*(s*t-u*m)-o*(i*t-a*m)+p*(i*u-a*s),e[11]=-(n*(s*f-u*h)-o*(i*f-a*h)+c*(i*u-a*s)),e[12]=-(o*(h*g-d*m)-c*(s*g-l*m)+p*(s*d-l*h)),e[13]=n*(h*g-d*m)-c*(i*g-r*m)+p*(i*d-r*h),e[14]=-(n*(s*g-l*m)-o*(i*g-r*m)+p*(i*l-r*s)),e[15]=n*(s*d-l*h)-o*(i*d-r*h)+c*(i*l-r*s),e}function w(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14];return(t*o-n*a)*(h*(e=e[15])-d*m)-(t*s-i*a)*(c*e-d*p)+(t*l-r*a)*(c*m-h*p)+(n*s-i*o)*(u*e-d*f)-(n*l-r*o)*(u*m-h*f)+(i*l-r*s)*(u*p-c*f)}function T(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],_=t[14],y=(t=t[15],n[0]),v=n[1],A=n[2],E=n[3];return e[0]=y*i+v*s+A*h+E*m,e[1]=y*r+v*l+A*d+E*g,e[2]=y*a+v*u+A*f+E*_,e[3]=y*o+v*c+A*p+E*t,y=n[4],v=n[5],A=n[6],E=n[7],e[4]=y*i+v*s+A*h+E*m,e[5]=y*r+v*l+A*d+E*g,e[6]=y*a+v*u+A*f+E*_,e[7]=y*o+v*c+A*p+E*t,y=n[8],v=n[9],A=n[10],E=n[11],e[8]=y*i+v*s+A*h+E*m,e[9]=y*r+v*l+A*d+E*g,e[10]=y*a+v*u+A*f+E*_,e[11]=y*o+v*c+A*p+E*t,y=n[12],v=n[13],A=n[14],E=n[15],e[12]=y*i+v*s+A*h+E*m,e[13]=y*r+v*l+A*d+E*g,e[14]=y*a+v*u+A*f+E*_,e[15]=y*o+v*c+A*p+E*t,e}function S(e,t,n){var i,r,a,o,s,l,u,c,h,d,f,p,m=n[0],g=n[1];return n=n[2],t===e?(e[12]=t[0]*m+t[4]*g+t[8]*n+t[12],e[13]=t[1]*m+t[5]*g+t[9]*n+t[13],e[14]=t[2]*m+t[6]*g+t[10]*n+t[14],e[15]=t[3]*m+t[7]*g+t[11]*n+t[15]):(i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=i,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=i*m+s*g+h*n+t[12],e[13]=r*m+l*g+d*n+t[13],e[14]=a*m+u*g+f*n+t[14],e[15]=o*m+c*g+p*n+t[15]),e}function R(e,t,n){var i=n[0],r=n[1];return n=n[2],e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function I(e,t,n,i){var r,a,o,s,l,u,c,d,f,p,m,g,_,y,v,A,E,b,w,T,S=i[0],R=i[1],I=(i=i[2],Math.hypot(S,R,i));return I<h?null:(S*=I=1/I,R*=I,i*=I,I=Math.sin(n),n=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7],p=t[8],m=t[9],g=t[10],_=t[11],v=S*R*(r=1-n)-i*I,A=R*R*r+n,E=i*R*r+S*I,b=S*i*r+R*I,w=R*i*r-S*I,T=i*i*r+n,e[0]=a*(n=S*S*r+n)+u*(y=R*S*r+i*I)+p*(i=i*S*r-R*I),e[1]=o*n+c*y+m*i,e[2]=s*n+d*y+g*i,e[3]=l*n+f*y+_*i,e[4]=a*v+u*A+p*E,e[5]=o*v+c*A+m*E,e[6]=s*v+d*A+g*E,e[7]=l*v+f*A+_*E,e[8]=a*b+u*w+p*T,e[9]=o*b+c*w+m*T,e[10]=s*b+d*w+g*T,e[11]=l*b+f*w+_*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function C(e,t,n){var i=Math.sin(n),r=(n=Math.cos(n),t[4]),a=t[5],o=t[6],s=t[7],l=t[8],u=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*n+l*i,e[5]=a*n+u*i,e[6]=o*n+c*i,e[7]=s*n+h*i,e[8]=l*n-r*i,e[9]=u*n-a*i,e[10]=c*n-o*i,e[11]=h*n-s*i,e}function L(e,t,n){var i=Math.sin(n),r=(n=Math.cos(n),t[0]),a=t[1],o=t[2],s=t[3],l=t[8],u=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*n-l*i,e[1]=a*n-u*i,e[2]=o*n-c*i,e[3]=s*n-h*i,e[8]=r*i+l*n,e[9]=a*i+u*n,e[10]=o*i+c*n,e[11]=s*i+h*n,e}function P(e,t,n){var i=Math.sin(n),r=(n=Math.cos(n),t[0]),a=t[1],o=t[2],s=t[3],l=t[4],u=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*n+l*i,e[1]=a*n+u*i,e[2]=o*n+c*i,e[3]=s*n+h*i,e[4]=l*n-r*i,e[5]=u*n-a*i,e[6]=c*n-o*i,e[7]=h*n-s*i,e}function D(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function k(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t,n){var i,r=n[0],a=n[1],o=(n=n[2],Math.hypot(r,a,n));return o<h?null:(r*=o=1/o,a*=o,n*=o,o=Math.sin(t),t=Math.cos(t),e[0]=r*r*(i=1-t)+t,e[1]=a*r*i+n*o,e[2]=n*r*i-a*o,e[3]=0,e[4]=r*a*i-n*o,e[5]=a*a*i+t,e[6]=n*a*i+r*o,e[7]=0,e[8]=r*n*i+a*o,e[9]=a*n*i-r*o,e[10]=n*n*i+t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function M(e,t){var n=Math.sin(t);return t=Math.cos(t),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t){var n=Math.sin(t);return t=Math.cos(t),e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function N(e,t){var n=Math.sin(t);return t=Math.cos(t),e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(e,t,n){var i=t[0],r=t[1],a=(u=t[2])+u,o=i*(c=i+i),s=i*(h=r+r),l=(i*=a,r*h),u=(r*=a,u*a),c=(t=t[3])*c,h=t*h;return t*=a,e[0]=1-(l+u),e[1]=s+t,e[2]=i-h,e[3]=0,e[4]=s-t,e[5]=1-(o+u),e[6]=r+c,e[7]=0,e[8]=i+h,e[9]=r-c,e[10]=1-(o+l),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function B(e,t){var n=new d(3),i=-t[0],r=-t[1],a=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=i*i+r*r+a*a+o*o;return 0<h?(n[0]=2*(s*o+c*i+l*a-u*r)/h,n[1]=2*(l*o+c*r+u*i-s*a)/h,n[2]=2*(u*o+c*a+s*r-l*i)/h):(n[0]=2*(s*o+c*i+l*a-u*r),n[1]=2*(l*o+c*r+u*i-s*a),n[2]=2*(u*o+c*a+s*r-l*i)),F(e,t,n),e}function U(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function j(e,t){var n=t[0],i=t[1],r=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9];return t=t[10],e[0]=Math.hypot(n,i,r),e[1]=Math.hypot(a,o,s),e[2]=Math.hypot(l,u,t),e}function G(e,t){var n=(j(r=new d(3),t),1/r[0]),i=1/r[1],r=1/r[2],a=t[0]*n,o=t[1]*i,s=t[2]*r,l=t[4]*n,u=t[5]*i,c=t[6]*r,h=(n=t[8]*n,i=t[9]*i,0);return 0<(r=a+u+(t=t[10]*r))?(h=2*Math.sqrt(1+r),e[3]=.25*h,e[0]=(c-i)/h,e[1]=(n-s)/h,e[2]=(o-l)/h):u<a&&t<a?(h=2*Math.sqrt(1+a-u-t),e[3]=(c-i)/h,e[0]=.25*h,e[1]=(o+l)/h,e[2]=(n+s)/h):t<u?(h=2*Math.sqrt(1+u-a-t),e[3]=(n-s)/h,e[0]=(o+l)/h,e[1]=.25*h,e[2]=(c+i)/h):(h=2*Math.sqrt(1+t-a-u),e[3]=(o-l)/h,e[0]=(n+s)/h,e[1]=(c+i)/h,e[2]=.25*h),e}function V(e,t,n,i){var r=(o=t[0])*(c=o+o),a=o*(h=(l=t[1])+l),o=o*(d=(u=t[2])+u),s=l*h,l=l*d,u=u*d,c=(t=t[3])*c,h=t*h,d=(t*=d,i[0]),f=i[1];return i=i[2],e[0]=(1-(s+u))*d,e[1]=(a+t)*d,e[2]=(o-h)*d,e[3]=0,e[4]=(a-t)*f,e[5]=(1-(r+u))*f,e[6]=(l+c)*f,e[7]=0,e[8]=(o+h)*i,e[9]=(l-c)*i,e[10]=(1-(r+s))*i,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function H(e,t,n,i,r){var a=(s=t[0])*(h=s+s),o=s*(d=(u=t[1])+u),s=s*(f=(c=t[2])+c),l=u*d,u=u*f,c=c*f,h=(t=t[3])*h,d=t*d,f=(t*=f,i[0]),p=i[1],m=(i=i[2],r[0]),g=r[1],_=(r=r[2],(1-(l+c))*f),y=(o+t)*f;return f*=s-d,o=(o-t)*p,t=(1-(a+c))*p,c=(u+h)*p,p=(s+d)*i,s=(u-h)*i,d=(1-(a+l))*i,e[0]=_,e[1]=y,e[2]=f,e[3]=0,e[4]=o,e[5]=t,e[6]=c,e[7]=0,e[8]=p,e[9]=s,e[10]=d,e[11]=0,e[12]=n[0]+m-(_*m+o*g+p*r),e[13]=n[1]+g-(y*m+t*g+s*r),e[14]=n[2]+r-(f*m+c*g+d*r),e[15]=1,e}function Y(e,t){var n=t[0],i=t[1],r=(l=t[2])+l,a=(n*=u=n+n,i*u),o=(i*=c=i+i,l*u),s=l*c,l=l*r,u=(t=t[3])*u,c=t*c;return t*=r,e[0]=1-i-l,e[1]=a+t,e[2]=o-c,e[3]=0,e[4]=a-t,e[5]=1-n-l,e[6]=s+u,e[7]=0,e[8]=o+c,e[9]=s-u,e[10]=1-n-i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,t,n,i,r,a,o){var s=1/(n-t),l=1/(r-i),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+i)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}function W(e,t,n,i,r){return t=1/Math.tan(t/2),e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+i)*(n=1/(i-r)),e[14]=2*r*i*n):(e[10]=-1,e[14]=-2*i),e}Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var K=W;function q(e,t,n,i,r){return t=1/Math.tan(t/2),e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=r*(n=1/(i-r)),e[14]=r*i*n):(e[10]=-1,e[14]=-i),e}function Q(e,t,n,i){var r=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=2/(o+(t=Math.tan(t.rightDegrees*Math.PI/180))),l=2/(r+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-t)*s*.5,e[9]=(r-a)*l*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e}function X(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(o+a)*u,e[15]=1,e}var J=X;function Z(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r);return o=1/(a-o),e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=o,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=a*o,e[15]=1,e}function $(e,t,n,i){var r,a,o,s,l=t[0],u=t[1],c=(t=t[2],i[0]),d=i[1],f=(i=i[2],n[0]),p=n[1];return n=n[2],Math.abs(l-f)<h&&Math.abs(u-p)<h&&Math.abs(t-n)<h?v(e):(f=l-f,p=u-p,n=t-n,r=d*(n*=s=1/Math.hypot(f,p,n))-i*(p*=s),i=i*(f*=s)-c*n,c=c*p-d*f,(s=Math.hypot(r,i,c))?(r*=s=1/s,i*=s,c*=s):c=i=r=0,d=p*c-n*i,a=n*r-f*c,o=f*i-p*r,(s=Math.hypot(d,a,o))?(d*=s=1/s,a*=s,o*=s):o=a=d=0,e[0]=r,e[1]=d,e[2]=f,e[3]=0,e[4]=i,e[5]=a,e[6]=p,e[7]=0,e[8]=c,e[9]=o,e[10]=n,e[11]=0,e[12]=-(r*l+i*u+c*t),e[13]=-(d*l+a*u+o*t),e[14]=-(f*l+p*u+n*t),e[15]=1,e)}function ee(e,t,n,i){var r=t[0],a=t[1],o=(t=t[2],i[0]),s=i[1],l=(i=i[2],r-n[0]),u=a-n[1],c=l*l+u*u+(n=t-n[2])*n,h=(0<c&&(l*=c=1/Math.sqrt(c),u*=c,n*=c),s*n-i*u);return 0<(c=h*h+(i=i*l-o*n)*i+(o=o*u-s*l)*o)&&(h*=c=1/Math.sqrt(c),i*=c,o*=c),e[0]=h,e[1]=i,e[2]=o,e[3]=0,e[4]=u*o-n*i,e[5]=n*h-l*o,e[6]=l*i-u*h,e[7]=0,e[8]=l,e[9]=u,e[10]=n,e[11]=0,e[12]=r,e[13]=a,e[14]=t,e[15]=1,e}function te(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ne(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function ie(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function re(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function ae(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function oe(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e[6]=t[6]+n[6]*i,e[7]=t[7]+n[7]*i,e[8]=t[8]+n[8]*i,e[9]=t[9]+n[9]*i,e[10]=t[10]+n[10]*i,e[11]=t[11]+n[11]*i,e[12]=t[12]+n[12]*i,e[13]=t[13]+n[13]*i,e[14]=t[14]+n[14]*i,e[15]=t[15]+n[15]*i,e}function se(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function le(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],_=e[14],y=(e=e[15],t[0]),v=t[1],A=t[2],E=t[3],b=t[4],w=t[5],T=t[6],S=t[7],R=t[8],I=t[9],C=t[10],L=t[11],P=t[12],D=t[13],k=t[14];return t=t[15],Math.abs(n-y)<=h*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-v)<=h*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(r-A)<=h*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(a-E)<=h*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(o-b)<=h*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-w)<=h*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-T)<=h*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-S)<=h*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-R)<=h*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(d-I)<=h*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(f-C)<=h*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(p-L)<=h*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(m-P)<=h*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-D)<=h*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(_-k)<=h*Math.max(1,Math.abs(_),Math.abs(k))&&Math.abs(e-t)<=h*Math.max(1,Math.abs(e),Math.abs(t))}var ue=T,ce=re;function he(){var e=new d(3);return d!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function de(e){var t=new d(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function fe(e){var t=e[0],n=e[1];return e=e[2],Math.hypot(t,n,e)}function pe(e,t,n){var i=new d(3);return i[0]=e,i[1]=t,i[2]=n,i}function me(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ge(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}function _e(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function ye(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function ve(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Ae(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Ee(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function be(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function we(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Te(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Se(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Re(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ie(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function Ce(e,t){var n=t[0]-e[0],i=t[1]-e[1];return t=t[2]-e[2],Math.hypot(n,i,t)}function Le(e,t){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i+(t=t[2]-e[2])*t}function Pe(e){var t=e[0],n=e[1];return t*t+n*n+(e=e[2])*e}function De(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ke(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function xe(e,t){var n=t[0],i=t[1],r=t[2];return 0<(n=n*n+i*i+r*r)&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Me(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Oe(e,t,n){var i=t[0],r=t[1],a=(t=t[2],n[0]),o=n[1];return n=n[2],e[0]=r*n-t*o,e[1]=t*a-i*n,e[2]=i*o-r*a,e}function Ne(e,t,n,i){var r=t[0],a=t[1];return t=t[2],e[0]=r+i*(n[0]-r),e[1]=a+i*(n[1]-a),e[2]=t+i*(n[2]-t),e}function Fe(e,t,n,i,r,a){var o=(u=a*a)*(2*a-3)+1,s=u*(a-2)+a,l=u*(a-1),u=u*(3-2*a);return e[0]=t[0]*o+n[0]*s+i[0]*l+r[0]*u,e[1]=t[1]*o+n[1]*s+i[1]*l+r[1]*u,e[2]=t[2]*o+n[2]*s+i[2]*l+r[2]*u,e}function Be(e,t,n,i,r,a){var o=(s=(l=1-a)*l)*l,s=3*a*s,l=3*(u=a*a)*l,u=u*a;return e[0]=t[0]*o+n[0]*s+i[0]*l+r[0]*u,e[1]=t[1]*o+n[1]*s+i[1]*l+r[1]*u,e[2]=t[2]*o+n[2]*s+i[2]*l+r[2]*u,e}function Ue(e,t){t=t||1;var n=2*f()*Math.PI,i=2*f()-1,r=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*r,e[1]=Math.sin(n)*r,e[2]=i*t,e}function je(e,t,n){var i=t[0],r=t[1],a=(t=t[2],n[3]*i+n[7]*r+n[11]*t+n[15]);return e[0]=(n[0]*i+n[4]*r+n[8]*t+n[12])/(a=a||1),e[1]=(n[1]*i+n[5]*r+n[9]*t+n[13])/a,e[2]=(n[2]*i+n[6]*r+n[10]*t+n[14])/a,e}function Ge(e,t,n){var i=t[0],r=t[1];return t=t[2],e[0]=i*n[0]+r*n[3]+t*n[6],e[1]=i*n[1]+r*n[4]+t*n[7],e[2]=i*n[2]+r*n[5]+t*n[8],e}function Ve(e,t,n){var i=n[0],r=n[1],a=n[2],o=(n=n[3],t[0]),s=t[1],l=r*(t=t[2])-a*s,u=a*o-i*t,c=i*s-r*o,h=r*c-a*u;return a=a*l-i*c,i=i*u-r*l,u*=r=2*n,c*=r,a*=2,i*=2,e[0]=o+(l*=r)+(h*=2),e[1]=s+u+a,e[2]=t+c+i,e}function He(e,t,n,i){var r=[],a=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[0],a[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),a[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Ye(e,t,n,i){var r=[],a=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),a[1]=r[1],a[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function ze(e,t,n,i){var r=[],a=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],a[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),a[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),a[2]=r[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function We(e,t){var n=e[0],i=e[1],r=e[2],a=t[0],o=t[1],s=t[2];return i=(n=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(a*a+o*o+s*s))&&Me(e,t)/n,Math.acos(Math.min(Math.max(i,-1),1))}function Ke(e){return e[0]=0,e[1]=0,e[2]=0,e}function qe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Qe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Xe(e,t){var n=e[0],i=e[1],r=(e=e[2],t[0]),a=t[1];return t=t[2],Math.abs(n-r)<=h*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(i-a)<=h*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-t)<=h*Math.max(1,Math.abs(e),Math.abs(t))}var Je,Ze=ye,$e=ve,et=Ae,tt=Ce,nt=Le,it=fe,rt=Pe,at=(Je=he(),function(e,t,n,i,r,a){var o,s;for(t=t||3,n=n||0,s=i?Math.min(i*t+n,e.length):e.length,o=n;o<s;o+=t)Je[0]=e[o],Je[1]=e[o+1],Je[2]=e[o+2],r(Je,Je,a),e[o]=Je[0],e[o+1]=Je[1],e[o+2]=Je[2];return e});function ot(){var e=new d(4);return d!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function st(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function lt(e,t,n){n*=.5;var i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function ut(e,t){var n=2*Math.acos(t[3]),i=Math.sin(n/2);return h<i?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function ct(e,t){return e=Ut(e,t),Math.acos(2*e*e-1)}function ht(e,t,n){var i=t[0],r=t[1],a=t[2],o=(t=t[3],n[0]),s=n[1],l=n[2];return n=n[3],e[0]=i*n+t*o+r*l-a*s,e[1]=r*n+t*s+a*o-i*l,e[2]=a*n+t*l+i*s-r*o,e[3]=t*n-i*o-r*s-a*l,e}function dt(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=(t=t[3],Math.sin(n));return n=Math.cos(n),e[0]=i*n+t*o,e[1]=r*n+a*o,e[2]=a*n-r*o,e[3]=t*n-i*o,e}function ft(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=(t=t[3],Math.sin(n));return n=Math.cos(n),e[0]=i*n-a*o,e[1]=r*n+t*o,e[2]=a*n+i*o,e[3]=t*n-r*o,e}function pt(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=(t=t[3],Math.sin(n));return n=Math.cos(n),e[0]=i*n+r*o,e[1]=r*n-i*o,e[2]=a*n+t*o,e[3]=t*n-a*o,e}function mt(e,t){var n=t[0],i=t[1];return t=t[2],e[0]=n,e[1]=i,e[2]=t,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-t*t)),e}function gt(e,t){var n=t[0],i=t[1],r=t[2],a=(t=t[3],Math.sqrt(n*n+i*i+r*r)),o=(t=Math.exp(t),0<a?t*Math.sin(a)/a:0);return e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=t*Math.cos(a),e}function _t(e,t){var n=t[0],i=t[1],r=t[2],a=(t=t[3],0<(a=Math.sqrt(n*n+i*i+r*r))?Math.atan2(a,t)/a:0);return e[0]=n*a,e[1]=i*a,e[2]=r*a,e[3]=.5*Math.log(n*n+i*i+r*r+t*t),e}function yt(e,t,n){return _t(e,t),Bt(e,e,n),gt(e,e),e}function vt(e,t,n,i){var r,a,o=t[0],s=t[1],l=t[2],u=(t=t[3],n[0]),c=n[1],d=n[2],f=o*u+s*c+l*d+t*(n=n[3]);return f<0&&(f=-f,u=-u,c=-c,d=-d,n=-n),f=h<1-f?(f=Math.acos(f),r=Math.sin(f),a=Math.sin((1-i)*f)/r,Math.sin(i*f)/r):(a=1-i,i),e[0]=a*o+f*u,e[1]=a*s+f*c,e[2]=a*l+f*d,e[3]=a*t+f*n,e}function At(e){var t=f(),n=f(),i=f(),r=Math.sqrt(1-t);return t=Math.sqrt(t),e[0]=r*Math.sin(2*Math.PI*n),e[1]=r*Math.cos(2*Math.PI*n),e[2]=t*Math.sin(2*Math.PI*i),e[3]=t*Math.cos(2*Math.PI*i),e}function Et(e,t){var n=t[0],i=t[1],r=t[2],a=(a=n*n+i*i+r*r+(t=t[3])*t)?1/a:0;return e[0]=-n*a,e[1]=-i*a,e[2]=-r*a,e[3]=t*a,e}function bt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function wt(e,t){var n,i,r,a=t[0]+t[4]+t[8];return 0<a?(r=Math.sqrt(a+1),e[3]=.5*r,e[0]=(t[5]-t[7])*(r=.5/r),e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r):(t[4]>t[a=0]&&(a=1),n=((a=t[8]>t[3*a+a]?2:a)+1)%3,i=(a+2)%3,r=Math.sqrt(t[3*a+a]-t[3*n+n]-t[3*i+i]+1),e[a]=.5*r,e[3]=(t[3*n+i]-t[3*i+n])*(r=.5/r),e[n]=(t[3*n+a]+t[3*a+n])*r,e[i]=(t[3*i+a]+t[3*a+i])*r),e}function Tt(e,t,n,i){var r=(t*=r=.5*Math.PI/180,n*=r,i*=r,Math.sin(t)),a=(t=Math.cos(t),Math.sin(n)),o=(n=Math.cos(n),Math.sin(i));return i=Math.cos(i),e[0]=r*n*i-t*a*o,e[1]=t*a*i+r*n*o,e[2]=t*n*o-r*a*i,e[3]=t*n*i+r*a*o,e}function St(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}ci=new d(4),d!=Float32Array&&(ci[0]=0,ci[1]=0,ci[2]=0,ci[3]=0);var Rt,It,Ct,Lt,Pt,Dt,kt=function(e){var t=new d(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},xt=function(e,t,n,i){var r=new d(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r},Mt=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Ot=function(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e},Nt=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},Ft=ht,Bt=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},Ut=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},jt=function(e,t,n,i){var r=t[0],a=t[1],o=t[2];return t=t[3],e[0]=r+i*(n[0]-r),e[1]=a+i*(n[1]-a),e[2]=o+i*(n[2]-o),e[3]=t+i*(n[3]-t),e},Gt=function(e){var t=e[0],n=e[1],i=e[2];return e=e[3],Math.hypot(t,n,i,e)},Vt=Gt,Ht=function(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i+(e=e[3])*e},Yt=Ht,zt=function(e,t){var n=t[0],i=t[1],r=t[2],a=n*n+i*i+r*r+(t=t[3])*t;return 0<a&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=i*a,e[2]=r*a,e[3]=t*a,e},Wt=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},Kt=function(e,t){var n=e[0],i=e[1],r=e[2],a=(e=e[3],t[0]),o=t[1],s=t[2];return t=t[3],Math.abs(n-a)<=h*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-s)<=h*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(e-t)<=h*Math.max(1,Math.abs(e),Math.abs(t))},qt=(Rt=he(),It=pe(1,0,0),Ct=pe(0,1,0),function(e,t,n){var i=Me(t,n);return i<-.999999?(Oe(Rt,It,t),it(Rt)<1e-6&&Oe(Rt,Ct,t),xe(Rt,Rt),lt(e,Rt,Math.PI),e):.999999<i?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Oe(Rt,t,n),e[0]=Rt[0],e[1]=Rt[1],e[2]=Rt[2],e[3]=1+i,zt(e,e))}),Qt=(Lt=ot(),Pt=ot(),function(e,t,n,i,r,a){return vt(Lt,t,r,a),vt(Pt,n,i,a),vt(e,Lt,Pt,2*a*(1-a)),e}),Xt=(ci=new d(9),d!=Float32Array&&(ci[1]=0,ci[2]=0,ci[3]=0,ci[5]=0,ci[6]=0,ci[7]=0),ci[0]=1,ci[4]=1,ci[8]=1,Dt=ci,function(e,t,n,i){return Dt[0]=n[0],Dt[3]=n[1],Dt[6]=n[2],Dt[1]=i[0],Dt[4]=i[1],Dt[7]=i[2],Dt[2]=-t[0],Dt[5]=-t[1],Dt[8]=-t[2],zt(e,wt(e,Dt))});function Jt(){var e=new d(2);return d!=Float32Array&&(e[0]=0,e[1]=0),e}function Zt(e){var t=new d(2);return t[0]=e[0],t[1]=e[1],t}function $t(e,t){var n=new d(2);return n[0]=e,n[1]=t,n}function en(e,t){return e[0]=t[0],e[1]=t[1],e}function tn(e,t,n){return e[0]=t,e[1]=n,e}function nn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function rn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function an(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function on(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function sn(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function ln(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function un(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function cn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function hn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function dn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function fn(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e}function pn(e,t){var n=t[0]-e[0];return t=t[1]-e[1],Math.hypot(n,t)}function mn(e,t){var n=t[0]-e[0];return n*n+(t=t[1]-e[1])*t}function gn(e){var t=e[0];return e=e[1],Math.hypot(t,e)}function _n(e){var t=e[0];return t*t+(e=e[1])*e}function yn(e,t){return e[0]=-t[0],e[1]=-t[1],e}function vn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function An(e,t){var n=t[0],i=t[1];return 0<(n=n*n+i*i)&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e}function En(e,t){return e[0]*t[0]+e[1]*t[1]}function bn(e,t,n){return t=t[0]*n[1]-t[1]*n[0],e[0]=e[1]=0,e[2]=t,e}function wn(e,t,n,i){var r=t[0];return t=t[1],e[0]=r+i*(n[0]-r),e[1]=t+i*(n[1]-t),e}function Tn(e,t){t=t||1;var n=2*f()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function Sn(e,t,n){var i=t[0];return t=t[1],e[0]=n[0]*i+n[2]*t,e[1]=n[1]*i+n[3]*t,e}function Rn(e,t,n){var i=t[0];return t=t[1],e[0]=n[0]*i+n[2]*t+n[4],e[1]=n[1]*i+n[3]*t+n[5],e}function In(e,t,n){var i=t[0];return t=t[1],e[0]=n[0]*i+n[3]*t+n[6],e[1]=n[1]*i+n[4]*t+n[7],e}function Cn(e,t,n){var i=t[0];return t=t[1],e[0]=n[0]*i+n[4]*t+n[12],e[1]=n[1]*i+n[5]*t+n[13],e}function Ln(e,t,n,i){var r=t[0]-n[0],a=(t=t[1]-n[1],Math.sin(i));return i=Math.cos(i),e[0]=r*i-t*a+n[0],e[1]=r*a+t*i+n[1],e}function Pn(e,t){var n=e[0],i=(e=e[1],t[0]),r=(t=t[1],Math.sqrt(n*n+e*e)*Math.sqrt(i*i+t*t));return Math.acos(Math.min(Math.max(r&&(n*i+e*t)/r,-1),1))}function Dn(e){return e[0]=0,e[1]=0,e}function kn(e){return"vec2("+e[0]+", "+e[1]+")"}function xn(e,t){return e[0]===t[0]&&e[1]===t[1]}function Mn(e,t){var n=e[0],i=(e=e[1],t[0]);return t=t[1],Math.abs(n-i)<=h*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-t)<=h*Math.max(1,Math.abs(e),Math.abs(t))}var On,Nn=gn,Fn=rn,Bn=an,Un=on,jn=pn,Gn=mn,Vn=_n,Hn=(On=Jt(),function(e,t,n,i,r,a){var o,s;for(t=t||2,n=n||0,s=i?Math.min(i*t+n,e.length):e.length,o=n;o<s;o+=t)On[0]=e[o],On[1]=e[o+1],r(On,On,a),e[o]=On[0],e[o+1]=On[1];return e}),Yn=function(e,t){return(Yn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Yn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Wn=function(){return(Wn=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Kn=(ci="undefined"!=typeof window)?window.navigator.userAgent:"",qn=ci&&!!("getComputedStyle"in window),Qn=/MSIE|Trident|Windows Phone|Edge/.test(Kn),Xn=ci&&!!("addEventListener"in document),Jn="width",Zn="height";function $n(e,t){return e.getAttribute(t)||""}function ei(e){return[].slice.call(e)}function ti(e,t){return void 0===t&&(t="data-"),"loading"in e&&"lazy"===e.getAttribute("loading")||!!e.getAttribute(t+"lazy")}function ni(e,t,n){Xn?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function ii(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function ri(e,t){var n=e["client"+t]||e["offset"+t];return parseFloat(n||(n=e,((qn?window.getComputedStyle(n):n.currentStyle)||{})[t.toLowerCase()]))||0}var ai=[];function oi(e,t){ai.length||ni(window,"resize",li),e.__PREFIX__=t,ai.push(e),si(e)}function si(e,t){void 0===t&&(t="data-"),t=e.__PREFIX__||t;var n,i=parseInt($n(e,""+t+Jn),10)||0,r=parseInt($n(e,""+t+Zn),10)||0;$n(e,t+"fixed")===Zn?(n=ri(e,"Height")||r,e.style[Jn]=i/r*n+"px"):(n=ri(e,"Width")||i,e.style[Zn]=r/i*n+"px")}function li(){ai.forEach((function(e){si(e)}))}Kn=function(e){function t(t,n){void 0===n&&(n={});var i,r=e.call(this)||this;return r.isReady=!1,r.isPreReady=!1,r.hasDataSize=!1,r.hasLoading=!1,r.isSkip=!1,r.onCheck=function(e){r.clear(),e&&"error"===e.type&&r.onError(r.element),r.hasLoading&&r.checkElement()||(e=!r.hasDataSize&&!r.hasLoading,r.onReady(e))},r.options=Wn({prefix:"data-"},n),r.element=t,n=r.options.prefix,r.hasDataSize=(i=n,!!t.getAttribute((i=void 0===n?"data-":i)+"width")),r.isSkip=(i=n,!!t.getAttribute((i=void 0===n?"data-":i)+"skip")),r.hasLoading=ti(t,n),r}zn(t,e);var n=t.prototype;return n.check=function(){return this.isSkip||!this.checkElement()?(this.onAlreadyReady(!0),!1):(this.hasDataSize&&oi(this.element,this.options.prefix),(this.hasDataSize||this.hasLoading)&&this.onAlreadyPreReady(),!0)},n.addEvents=function(){var e=this,t=this.element;this.constructor.EVENTS.forEach((function(n){ni(t,n,e.onCheck)}))},n.clear=function(){var e=this,t=this.element;this.constructor.EVENTS.forEach((function(n){ii(t,n,e.onCheck)})),this.removeAutoSizer()},n.destroy=function(){this.clear(),this.off()},n.removeAutoSizer=function(){var e,t,n;this.hasDataSize&&(t=this.options.prefix,e=this.element,(n=ai.indexOf(e))<0||(t=$n(e,t+"fixed"),delete e.__PREFIX__,e.style[t===Zn?Jn:Zn]="",ai.splice(n,1),ai.length)||ii(window,"resize",li))},n.onError=function(e){this.trigger("error",{element:this.element,target:e})},n.onPreReady=function(){this.isPreReady||(this.isPreReady=!0,this.trigger("preReady",{element:this.element,hasLoading:this.hasLoading,isSkip:this.isSkip}))},n.onReady=function(e){this.isReady||((e=!this.isPreReady&&e)&&(this.isPreReady=!0),this.removeAutoSizer(),this.isReady=!0,this.trigger("ready",{element:this.element,withPreReady:e,hasLoading:this.hasLoading,isSkip:this.isSkip}))},n.onAlreadyError=function(e){var t=this;setTimeout((function(){t.onError(e)}))},n.onAlreadyPreReady=function(){var e=this;setTimeout((function(){e.onPreReady()}))},n.onAlreadyReady=function(e){var t=this;setTimeout((function(){t.onReady(e)}))},t.EVENTS=[],t}(n);var ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}zn(t,e);var n=t.prototype;return n.setHasLoading=function(e){this.hasLoading=e},n.check=function(){return this.isSkip?(this.onAlreadyReady(!0),!1):(this.hasDataSize?(oi(this.element,this.options.prefix),this.onAlreadyPreReady()):this.trigger("requestChildren"),!0)},n.checkElement=function(){return!0},n.destroy=function(){this.clear(),this.trigger("requestDestroy"),this.off()},n.onAlreadyPreReady=function(){e.prototype.onAlreadyPreReady.call(this),this.trigger("reqeustReadyChildren")},t.EVENTS=[],t}(Kn),ci=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.readyCount=0,n.preReadyCount=0,n.totalCount=0,n.totalErrorCount=0,n.isPreReadyOver=!0,n.elementInfos=[],n.options=Wn({loaders:{},prefix:"data-"},t),n}zn(t,e);var n=t.prototype;return n.check=function(e){var t=this,n=this.options.prefix;return this.clear(),this.elementInfos=ei(e).map((function(e,i){var r=t.getLoader(e,{prefix:n});return r.check(),r.on("error",(function(e){t.onError(i,e.target)})).on("preReady",(function(e){var n=((n=t.elementInfos[i]).hasLoading=e.hasLoading,n.isSkip=e.isSkip,t.checkPreReady(i));t.onPreReadyElement(i),n&&t.onPreReady()})).on("ready",(function(e){var n=e.withPreReady,r=e.hasLoading,a=(e=e.isSkip,(a=t.elementInfos[i]).hasLoading=r,a.isSkip=e,r=n&&t.checkPreReady(i),t.checkReady(i));n&&t.onPreReadyElement(i),t.onReadyElement(i),r&&t.onPreReady(),a&&t.onReady()})),{loader:r,element:e,hasLoading:!1,hasError:!1,isPreReady:!1,isReady:!1,isSkip:!1}})),e=this.elementInfos.length,(this.totalCount=e)||setTimeout((function(){t.onPreReady(),t.onReady()})),this},n.getTotalCount=function(){return this.totalCount},n.isPreReady=function(){return this.elementInfos.every((function(e){return e.isPreReady}))},n.isReady=function(){return this.elementInfos.every((function(e){return e.isReady}))},n.hasError=function(){return 0<this.totalErrorCount},n.clear=function(){this.isPreReadyOver=!1,this.totalCount=0,this.preReadyCount=0,this.readyCount=0,this.totalErrorCount=0,this.elementInfos.forEach((function(e){e.loader&&e.loader.destroy()})),this.elementInfos=[]},n.destroy=function(){this.clear(),this.off()},n.getLoader=function(e,t){var n,i,r,a,o=this,s=e.tagName.toLowerCase(),l=this.options.loaders,u=t.prefix,c=Object.keys(l);return l[s]?new l[s](e,t):(n=new ui(e,t),i=ei(e.querySelectorAll(c.join(", "))),n.setHasLoading(i.some((function(e){return ti(e,u)}))),r=!1,a=this.clone().on("error",(function(e){n.onError(e.target)})).on("ready",(function(){n.onReady(r)})),n.on("requestChildren",(function(){l=e,t=c,i=o.options.prefix,s=ei(l.querySelectorAll(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}(["["+i+"skip] ["+i+"width]"],t.map((function(e){return["["+i+"skip] "+e,e+"["+i+"skip]","["+i+"width] "+e].join(", ")}))).join(", ")));var t,i,s,l=ei(l.querySelectorAll("["+i+"width], "+t.join(", "))).filter((function(e){return-1===s.indexOf(e)}));a.check(l).on("preReady",(function(e){(r=e.isReady)||n.onPreReady()}))})).on("reqeustReadyChildren",(function(){a.check(i)})).on("requestDestroy",(function(){a.destroy()})),n)},n.clone=function(){return new t(Wn({},this.options))},n.checkPreReady=function(e){return this.elementInfos[e].isPreReady=!0,++this.preReadyCount,!(this.preReadyCount<this.totalCount)},n.checkReady=function(e){return this.elementInfos[e].isReady=!0,++this.readyCount,!(this.readyCount<this.totalCount)},n.onError=function(e,t){var n=this.elementInfos[e];n.hasError=!0,this.trigger(new c("error",{element:n.element,index:e,target:t,errorCount:this.getErrorCount(),totalErrorCount:++this.totalErrorCount}))},n.onPreReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new c("preReadyElement",{element:t.element,index:e,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isSkip:t.isSkip}))},n.onPreReady=function(){this.isPreReadyOver=!0,this.trigger(new c("preReady",{readyCount:this.readyCount,totalCount:this.totalCount,isReady:this.isReady(),hasLoading:this.hasLoading()}))},n.onReadyElement=function(e){var t=this.elementInfos[e];this.trigger(new c("readyElement",{index:e,element:t.element,hasError:t.hasError,errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:t.hasLoading,isPreReadyOver:this.isPreReadyOver,isSkip:t.isSkip}))},n.onReady=function(){this.trigger(new c("ready",{errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,totalCount:this.totalCount}))},n.getErrorCount=function(){return this.elementInfos.filter((function(e){return e.hasError})).length},n.hasLoading=function(){return this.elementInfos.some((function(e){return e.hasLoading}))},t}(n),hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zn(t,e),t.prototype.checkElement=function(){var e=this.element,t=e.getAttribute("src");if(e.complete){if(t)return e.naturalWidth||this.onAlreadyError(e),!1;this.onAlreadyPreReady()}return this.addEvents(),Qn&&e.setAttribute("src",t),!0},t.EVENTS=["load","error"],t}(Kn),di=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zn(t,e),t.prototype.checkElement=function(){var e=this.element;return!(1<=e.readyState||(e.error?(this.onAlreadyError(e),1):(this.addEvents(),0)))},t.EVENTS=["loadedmetadata","error"],t}(Kn),fi=(Kn=function(e){function t(t){return e.call(this,Wn({loaders:{img:hi,video:di}},t=void 0===t?{}:t))||this}return zn(t,e),t}(ci),Kn);function pi(e,t,n,i){return new(n=n||Promise)((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))}class mi extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,mi.prototype),this.name="View360Error",this.code=t}}var gi,_i,yi,vi=0,Ai=2,Ei=3,bi=4,wi=6,Ti=7,Si=8,Ri=(e,t)=>typeof e+` is not a ${t.map((e=>`"${e}"`)).join(" or ")}.`,Ii=e=>`Element with selector "${e}" not found.`,Ci="The canvas element was not found inside the given root element.",Li="WebGL is not supported on this browser.",Pi='"projection" should be provided before initialization.',Di=(e,t)=>`Failed linking WebGL program - "${e}\nShader compile Log: `+t,ki=(e,t)=>`Insufficient arguments: given "${e}" for "${t}".`;let xi="mousedown",Mi="mousemove",Oi="mouseup",Ni="touchstart",Fi="touchmove",Bi="touchend",Ui="wheel",ji="resize",Gi="contextmenu",Vi="mouseenter",Hi="mouseleave",Yi="keydown",zi="keyup",Wi="click",Ki="webglcontextcreationerror",qi="webglcontextlost",Qi="webglcontextrestored",Xi="deviceorientation",Ji="devicemotion",Zi="orientationchange",$i="play",er="pause",tr="loadeddata",nr="volumechange",ir="timeupdate",rr="durationchange",ar="canplaythrough",or="transitionend",sr="end",lr="div",ur="button",cr=((ci=gi=gi||{})[ci.LEFT=0]="LEFT",ci[ci.MIDDLE=1]="MIDDLE",ci[ci.RIGHT=2]="RIGHT",{GRAB:"grab",GRABBING:"grabbing",NONE:""}),hr=["LEFT","UP","RIGHT","DOWN"],dr=((Kn=_i=_i||{})[Kn.LEFT=37]="LEFT",Kn[Kn.UP=38]="UP",Kn[Kn.RIGHT=39]="RIGHT",Kn[Kn.DOWN=40]="DOWN",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"}),fr=["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","webkitCancelFullScreen","mozRequestFullScreen","msRequestFullscreen"],pr=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],mr=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"],gr=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],_r="view360-ctx-lost",yr="view360-vr-presenting",vr="view360-hotspots",Ar="view360-hotspot",Er="view360-hotspot-visible",br="ready",wr="loadStart",Tr="load",Sr="projectionChange",Rr="resize",Ir="beforeRender",Cr="render",Lr="viewChange",Pr="staticClick",Dr="vrStart",kr="vrEnd",xr="animationEnd",Mr="update",Or={INPUT_START:"inputStart",CHANGE:"change",INPUT_END:"inputEnd",ENABLE:"enable",DISABLE:"disable",STATIC_CLICK:"staticClick"},Nr=Math.PI/180,Fr=180/Math.PI,Br=e=>1-Math.pow(1-e,3),Ur={min:-1/0,max:1/0},jr={min:-90,max:90},Gr={min:.6,max:10},Vr=((ci=yi=yi||{})[ci.ZERO=0]="ZERO",ci[ci.CW_90=1]="CW_90",ci[ci.CCW_90=2]="CCW_90",ci[ci.CW_180=3]="CW_180","view360videotimechange"),Hr="http://www.w3.org/2000/svg",Yr="immersive-vr",zr=null!=(Kn=Number.EPSILON)?Kn:2220446049250313e-31,Wr=e=>"string"==typeof e,Kr=(e,t=lr)=>((t=document.createElement(t)).classList.add(e),t),qr=(e,t)=>{let n=null;if(Wr(e)){if(!(t=(t||document).querySelector(e)))return null;n=t}else(t=e)&&t.nodeType===Node.ELEMENT_NODE&&(n=e);return n},Qr=(e,t,n)=>Math.max(Math.min(e,n),t),Xr=(e,t,n)=>e*(1-n)+t*n,Jr=(e,t,n)=>{var i=Math.abs(n-t);return e<t?e=n-(t-e)%i:n<e&&(e=t+(e-n)%i),e},Zr=e=>"object"==typeof e?e:{},$r=(e,t)=>2*Math.atan(Math.tan(.5*e)/t),ea=()=>{if(document)for(var e of pr)if(document[e])return!0;return!1},ta=()=>{let e=!1;try{e=window.isSecureContext&&DeviceMotionEvent&&!!DeviceMotionEvent&&"requestPermission"in DeviceMotionEvent}catch(t){e=!1}return e},na=(e,t,n,i)=>(a.identity(e),n=Qr(n,-89.99,89.99),a.rotateY(e,e,t*Nr),a.rotateX(e,e,n*Nr),a.rotateZ(e,e,i*Nr),e),ia=e=>{var t,n=e[0],i=e[1],a=e[2],o=n*n+i*i+a*a+(t=e[3])*t;let s,l;return l=.499995*o<(t=n*t-i*a)?(s=Math.PI/2,2*Math.atan2(i,n)):t<-.499995*o?(s=-Math.PI/2,-2*Math.atan2(i,n)):(a=r.fromValues(0,0,1),t=r.fromValues(0,1,0),r.transformQuat(a,a,e),r.transformQuat(t,t,e),o=Math.sqrt(a[0]*a[0]+a[2]*a[2]),s=Math.atan2(-a[1],o),Math.atan2(a[0],a[2])),{pitch:Qr(s*Fr,-90,90),yaw:Jr(l*Fr,0,360)}};class ra{get val(){return this._val}get start(){return this._start}get end(){return this._end}get progress(){return this._progress}get activated(){return this._activated}get duration(){return this._duration}set duration(e){this._duration=e}get loop(){return this._loop}set loop(e){this._loop=e}get range(){return this._range}get easing(){return this._easing}set easing(e){this._easing=e}constructor({duration:e=300,loop:t=!1,range:n={min:0,max:1},easing:i=Br}={}){this._duration=e,this._loop=t,this._range=n,this._easing=i,this._activated=!1,this.reset(0)}update(e){var t,n,i,r,a;return this._activated?(t=this._start,n=this._end,a=this._duration,i=this._val,r=this._loop,e=this._progress+e/a,this._progress=(r?Jr:Qr)(e,0,1),a=this._easing(this._progress),this._val=Xr(t,n,a),!r&&1<=this._progress&&(this._activated=!1),this._val-i):(this._val=this._end,0)}reset(e){var t=this._range;e=Qr(e,t.min,t.max),this._start=e,this._end=e,this._val=e,this._progress=0,this._activated=!1}add(e){var t=this._range;this._start=Qr(this._start+e,t.min,t.max),this._end=Qr(this._end+e,t.min,t.max),this._val=Qr(this._val+e,t.min,t.max)}setNewEndByDelta(e){var t=this._range;this._start=this._val,this._end=Qr(this._end+e,t.min,t.max),this._progress=0,this._activated=!0}setRange(e,t){this._start=Qr(this._start,e,t),this._end=Qr(this._end,e,t),this._range={min:e,max:t}}}class aa{get duration(){return this._motion.duration}set duration(e){this._motion.duration=e}get easing(){return this._motion.easing}set easing(e){this._motion.easing=e}constructor(e,t,n,{duration:i=300,easing:r=Br}={}){this._camera=e,this._motion=new ra({duration:i,easing:r,range:{min:0,max:1}}),this._from=t,this._to=n,this._finishPromise=new Promise((e=>{this._finish=e})),this._motion.setNewEndByDelta(1)}getFinishPromise(){return this._finishPromise}update(e){var t=this._camera,n=this._from,i=this._to,r=((r=this._motion).update(e),e=r.val,a.create()),o=Xr(n.zoom,i.zoom,e);a.slerp(r,n.rotation,i.rotation,e),t.rotate(r,o),1<=e&&this._finish()}}class oa extends n{get aspect(){return this._aspect}get changed(){return this._changed}get yawRange(){return this._initialYawRange}set yawRange(e){this._initialYawRange=e}get pitchRange(){return this._initialPitchRange}set pitchRange(e){this._initialPitchRange=e}get zoomRange(){return this._initialZoomRange}set zoomRange(e){this._initialZoomRange=e}constructor({initialYaw:e,initialPitch:t,initialZoom:n,yawRange:o,pitchRange:s,zoomRange:l,fov:u}){super(),this.yaw=e,this.pitch=t,this.zoom=n,this.rollOffset=0,this.initialYaw=e,this.initialPitch=t,this.initialZoom=n,this.position=r.create(),this.animation=null,this._up=r.fromValues(0,1,0),this._aspect=1,this._initialYawRange=o,this._initialPitchRange=s,this._initialZoomRange=l,this._yawRange=o,this._pitchRange=s,this._zoomRange=l,this.quaternion=a.create(),this._updateQuaternion(),this.viewMatrix=i.create(),this.projectionMatrix=i.create(),this.fov=u,this._maxRenderHeight=-1}destroy(){this.off()}resize(e,t){var n=this._aspect;this._aspect=e/t,this._aspect!==n&&this.updateMatrix()}lookAt({yaw:e=this.yaw,pitch:t=this.pitch,zoom:n=this.zoom}){var i=a.clone(this.quaternion),r=this.zoom;this.yaw=Jr(e,0,360),this.pitch=Qr(t,-90,90),this.zoom=n,this._updateQuaternion(),e=Math.abs(n-r),(!a.equals(this.quaternion,i)||e>=10*zr)&&this.updateMatrix()}rotate(e,t=this.zoom){e=a.normalize(a.create(),e);var n=a.equals(this.quaternion,e),i=(a.copy(this.quaternion,e),this.zoom),{yaw:e,pitch:r}=ia(e);this.yaw=e,this.pitch=r,this.zoom=t,e=Math.abs(t-i),(!n||e>=10*zr)&&this.updateMatrix()}animateTo({yaw:e=this.yaw,pitch:t=this.pitch,zoom:n=this.zoom,duration:i=0,easing:r=Br}={}){return pi(this,void 0,void 0,(function*(){if(this.yaw!==e||this.pitch!==t||this.zoom!==n){var o={rotation:a.clone(this.quaternion),zoom:this.zoom},s={rotation:na(a.create(),e,t,this.rollOffset),zoom:n};let l=new aa(this,o,s,{duration:i,easing:r});return o=l.getFinishPromise(),this.animation=l,o.then((()=>{this.animation=null,this.trigger(xr,{animation:l})})),o}}))}restrictYawRange(e,t){this._yawRange={min:e,max:t}}restrictPitchRange(e,t){this._pitchRange={min:e,max:t}}restrictZoomRange(e,t){this._zoomRange={min:e,max:t}}restrictRenderHeight(e){this._maxRenderHeight=e}resetRange(){this._yawRange=this._initialYawRange,this._pitchRange=this._initialPitchRange,this._zoomRange=this._initialZoomRange,this._maxRenderHeight=-1}getYawRange(e){var t,n=this._yawRange,i=this._maxRenderHeight;if(!n)return Ur;e=.5*this.getHorizontalFov(e);let r=n.min,a=n.max;return 0<i&&(t=$r(e*Nr,this._aspect),i*=.5,t=Math.tan(t),i=Math.sqrt((1+i*i)/(1+t*t)),t=Math.atan(Math.tan(e*Nr)*i)*Fr,r=n.min+t,a=n.max-t),r>a&&(r=0,a=0),{min:r,max:a}}getPitchRange(e){var t=this._pitchRange,n=this._maxRenderHeight;if(!t)return jr;let i=t.min,r=t.max;return 0<n&&(n=.5*this.getVerticalFov(e),i=t.min+n,r=t.max-n),i>r&&(i=0,r=0),{min:Math.max(i,-90),max:Math.min(r,90)}}getZoomRange(){var e=null!=(e=this._zoomRange)?e:Gr,t=this.getHorizontalFov(e.max),n=(e=this.getHorizontalFov(e.min),this.getHorizontalFov(this.zoom));return{min:Math.max(t,1),max:Math.min(e,180),current:n}}getHorizontalFov(e=this.zoom){return this._getZoomedHorizontalFov(e)*Fr}getVerticalFov(e=this.zoom){var t=this._aspect;return e=this._getZoomedHorizontalFov(e),$r(e,t)*Fr}fovToZoom(e){var t=this.fov;return Math.tan(Nr*t*.5)/Math.tan(Nr*e*.5)}updateMatrix(){var e=this._up,t=this._aspect,n=this.viewMatrix,a=this.projectionMatrix,o=this.position,s=this.quaternion,l=r.create(),u=r.fromValues(0,0,-1);r.transformQuat(u,u,s),r.transformQuat(l,e,s),e=this._getZoomedHorizontalFov(),s=$r(e,t),i.lookAt(n,o,u,l),i.perspective(a,s,t,.1,100),this._changed=!0}onFrameRender(){this._changed=!1}_updateQuaternion(){na(this.quaternion,this.yaw,this.pitch,this.rollOffset)}_getZoomedHorizontalFov(e=this.zoom){return 2*Math.atan(Math.tan(Nr*this.fov*.5)/e)}}class sa extends n{constructor(){super(),this._onMouseDown=e=>{var t=this._el;t&&e.button===gi.LEFT&&(e.preventDefault(),(t.focus?t:window).focus(),this._prevPos[0]=e.clientX,this._prevPos[1]=e.clientY,window.addEventListener(Mi,this._onMouseMove,!1),window.addEventListener(Oi,this._onMouseUp,!1),this.trigger(Or.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!1}))},this._onMouseMove=e=>{e.preventDefault();var t=e.clientX,n=(e=e.clientY,this._prevPos),i=t-n[0],r=e-n[1];this.trigger(Or.CHANGE,{delta:{x:i,y:r},isTouch:!1,isKeyboard:!1}),n[0]=t,n[1]=e},this._onMouseUp=()=>{this._prevPos[0]=0,this._prevPos[1]=0,window.removeEventListener(Mi,this._onMouseMove,!1),window.removeEventListener(Oi,this._onMouseUp,!1),this.trigger(Or.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1})},this._el=null,this._prevPos=[0,0]}enable(e){this._el||(e.addEventListener(xi,this._onMouseDown),this._el=e)}disable(){var e=this._el;e&&(e.removeEventListener(xi,this._onMouseDown),window.removeEventListener(Mi,this._onMouseMove,!1),window.removeEventListener(Oi,this._onMouseUp,!1),this._el=null)}}class la extends n{get scrollable(){return this._scrollable}set scrollable(e){this._scrollable=e}constructor(){super(),this._onTouchStart=e=>{var t;1<e.touches.length||this._scrolling||(t=e.touches[0],this._isFirstTouch=!0,this._prevPos[0]=t.clientX,this._prevPos[1]=t.clientY,this.trigger(Or.INPUT_START,{srcEvent:e,isTouch:!0,isKeyboard:!1}))},this._onTouchMove=e=>{if(!(1<e.touches.length||this._scrolling)){var t=e.touches[0],n=this._scrollable,i=this._prevPos,r=t.clientX,a=(t=t.clientY,r-i[0]),o=t-i[1];if(this._isFirstTouch){if(n&&!ea()&&Math.abs(o)>Math.abs(a))return void(this._scrolling=!0);this._isFirstTouch=!1}!1!==e.cancelable&&e.preventDefault(),this.trigger(Or.CHANGE,{delta:{x:a,y:o},isTouch:!0,isKeyboard:!1}),i[0]=r,i[1]=t}},this._onTouchEnd=e=>{var t,n;0===e.touches.length&&(t=e.touches[0],n=this._prevPos,t?(n[0]=t.clientX,n[1]=t.clientY):(n[0]=0,n[1]=0,this.trigger(Or.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:this._scrolling})),!1!==e.cancelable&&e.preventDefault(),this._scrolling=!1)},this._el=null,this._prevPos=[0,0],this._isFirstTouch=!1,this._scrolling=!1,this._scrollable=!1}enable(e){this._el||(e.addEventListener(Ni,this._onTouchStart,{passive:!1}),e.addEventListener(Fi,this._onTouchMove,{passive:!1}),e.addEventListener(Bi,this._onTouchEnd),this._el=e)}disable(){var e=this._el;e&&(e.removeEventListener(Ni,this._onTouchStart),e.removeEventListener(Fi,this._onTouchMove),e.removeEventListener(Bi,this._onTouchEnd),this._el=null)}}class ua extends n{get active(){var e=this._pressed;return e.LEFT||e.UP||e.RIGHT||e.DOWN}constructor(){super(),this._onKeyDown=e=>{var t;e.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD||(this._updateKeyPress(e,!0),(t=this._getPressedKeyCount())<=0)||(e.preventDefault(),1!==t)||e.repeat||this.trigger(Or.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!0})},this._onKeyUp=e=>{e.location!==KeyboardEvent.DOM_KEY_LOCATION_STANDARD||(this._updateKeyPress(e,!1),0<this._getPressedKeyCount())||this.trigger(Or.INPUT_END,{isTouch:!1,isKeyboard:!0,scrolling:!1})},this._el=null,this._clearPressedKeys()}enable(e){this._el||(e.addEventListener(Yi,this._onKeyDown),e.addEventListener(zi,this._onKeyUp),this._el=e,this._clearPressedKeys())}disable(){var e=this._el;e&&(e.removeEventListener(Yi,this._onKeyDown),e.removeEventListener(zi,this._onKeyUp),this._el=null,this._clearPressedKeys())}update(){var e=this._getDeltaByPressedKeys();0===e.x&&0===e.y||this.trigger(Or.CHANGE,{delta:e,isTouch:!1,isKeyboard:!0})}_clearPressedKeys(){this._pressed=hr.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!1})),{})}_updateKeyPress(e,t){var n=this._pressed;(e=null!=e.keyCode?_i[e.keyCode]:dr[e.key])&&(n[e]=t)}_getPressedKeyCount(){return hr.filter((e=>this._pressed[e])).length}_getDeltaByPressedKeys(){var e=this._pressed;let t=0,n=0;return e.LEFT&&(t+=1),e.RIGHT&&--t,e.UP&&(n+=1),e.DOWN&&--n,{x:t,y:n}}}class ca extends n{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._keyboardInput.active||this._xMotion.activated||this._yMotion.activated}get yaw(){return this._xMotion}get pitch(){return this._yMotion}get scrollable(){return this._touchInput.scrollable}set scrollable(e){this._touchInput.scrollable=e}get pointerScale(){return this._pointerScale}set pointerScale(e){this._pointerScale=e}get keyboardScale(){return this._keyboardScale}set keyboardScale(e){this._keyboardScale=e}get duration(){return this._duration}set duration(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}get easing(){return this._easing}set easing(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}get disablePitch(){return this._disablePitch}set disablePitch(e){this._disablePitch=e}get disableYaw(){return this._disableYaw}set disableYaw(e){this._disableYaw=e}get disableKeyboard(){return this._disableKeyboard}set disableKeyboard(e){this._disableKeyboard=e}constructor(e,t,{duration:n=300,easing:i=Br,pointerScale:r=[1,1],keyboardScale:a=[1,1],disablePitch:o=!1,disableYaw:s=!1,disableKeyboard:l=!1}={}){super(),this._onInputStart=e=>{this._changedWhileDragging=!1,this.trigger(Or.INPUT_START,Object.assign(Object.assign({},e),{inputType:"rotate"}))},this._onChange=e=>{var t=e.delta,n=1/this._zoomScale,i=this._screenScale,r=this._keyboardScale,a=this._pointerScale;let o;o=e.isKeyboard?[r[0]*n,r[1]*n]:[a[0]*i[0]*n,a[1]*i[1]*n],e=t.x*o[0],r=t.y*o[1],this._xMotion.setNewEndByDelta(e),this._yMotion.setNewEndByDelta(r),this._changedWhileDragging=!0},this._onInputEnd=e=>{this.trigger(Or.INPUT_END,Object.assign(Object.assign({},e),{inputType:"rotate"})),this._changedWhileDragging||e.isKeyboard||e.scrolling||this.trigger(Or.STATIC_CLICK,{isTouch:e.isTouch}),this._changedWhileDragging=!1},this._controlEl=e,this._pointerScale=r,this._keyboardScale=a,this._duration=n,this._easing=i,this._disablePitch=o,this._disableYaw=s,this._disableKeyboard=l,this._enableBlocked=t,this._mouseInput=new sa,this._touchInput=new la,this._keyboardInput=new ua,this._xMotion=new ra({duration:n,range:Ur,easing:i}),this._yMotion=new ra({duration:n,range:jr,easing:i}),this._screenScale=[1,1],this._zoomScale=1,this._enabled=!1,this._changedWhileDragging=!1,this._bindInputs()}destroy(){this.disable(),this._mouseInput.off(),this._touchInput.off(),this._keyboardInput.off(),this.off(),this._changedWhileDragging=!1}update(e){var t,n,i;this._enabled&&(t=this._xMotion,n=this._yMotion,i=this._keyboardInput,this._disableKeyboard||i.update(),this._disablePitch||n.update(e),this._disableYaw||t.update(e))}updateRange(e,t){var n=e.getYawRange(t);e=e.getPitchRange(t),this._xMotion.setRange(n.min,n.max),this._yMotion.setRange(e.min,e.max)}setZoomScale(e){this._zoomScale=e}resize(e,t,n,i){t=$r(e*Nr,t)*Fr,this._screenScale[0]=e/n,this._screenScale[1]=t/i}enable(){var e;this._enabled||(e=this._controlEl,this._mouseInput.enable(e),this._touchInput.enable(e),this._keyboardInput.enable(e),this._enabled=!0,this._enableBlocked=!1,this.trigger(Or.ENABLE,{control:this,updateCursor:!0}))}disable(){this._enabled&&(this._mouseInput.disable(),this._touchInput.disable(),this._keyboardInput.disable(),this._enabled=!1,this.trigger(Or.DISABLE,{updateCursor:!0}))}sync(e){this.updateRange(e,e.zoom),this._xMotion.reset(e.yaw),this._yMotion.reset(e.pitch)}_bindInputs(){var e=this._mouseInput,t=this._touchInput,n=this._keyboardInput;e.on(Or.INPUT_START,this._onInputStart),e.on(Or.CHANGE,this._onChange),e.on(Or.INPUT_END,this._onInputEnd),t.on(Or.INPUT_START,this._onInputStart),t.on(Or.CHANGE,this._onChange),t.on(Or.INPUT_END,this._onInputEnd),n.on(Or.INPUT_START,this._onInputStart),n.on(Or.CHANGE,this._onChange),n.on(Or.INPUT_END,this._onInputEnd)}}class ha extends n{get scrollable(){return this._scrollable}set scrollable(e){this._scrollable=e}constructor(){super(),this._onWheel=e=>{var t=this._scrollable;0===e.deltaY||t||(e.preventDefault(),e.stopPropagation(),this._inputTimer<0?this.trigger(Or.INPUT_START,{srcEvent:e,isTouch:!1,isKeyboard:!1}):this._clearTimer(),t=this._baseScale*e.deltaY,this.trigger(Or.CHANGE,{delta:t,isTouch:!1,isKeyboard:!1}),this._inputTimer=window.setTimeout((()=>{this.trigger(Or.INPUT_END,{isTouch:!1,isKeyboard:!1,scrolling:!1}),this._inputTimer=-1}),300))},this._el=null,this._baseScale=.04,this._scrollable=!1,this._inputTimer=-1}enable(e){this._el||(e.addEventListener(Ui,this._onWheel,{passive:!1,capture:!1}),this._el=e,this._clearTimer())}disable(){var e=this._el;e&&(e.removeEventListener(Ui,this._onWheel,!1),this._el=null,this._clearTimer())}_clearTimer(){window.clearTimeout(this._inputTimer),this._inputTimer=-1}}class da extends n{constructor(){super(),this._onTouchMove=e=>{var t,n=e.touches;2===n.length&&e.cancelable&&(e.preventDefault(),e.stopPropagation(),t=this._prevDistance,n=[n[0].pageX-n[1].pageX,n[0].pageY-n[1].pageY],n=Math.sqrt(n[0]*n[0]+n[1]*n[1])*this._baseScale,t=this._isFirstTouch?0:n-t,this._isFirstTouch&&this.trigger(Or.INPUT_START,{srcEvent:e,isTouch:!0,isKeyboard:!1}),this._prevDistance=n,this._isFirstTouch=!1,this.trigger(Or.CHANGE,{delta:t,isTouch:!0,isKeyboard:!1}))},this._onTouchEnd=e=>{0===e.touches.length&&(this._isFirstTouch||this.trigger(Or.INPUT_END,{isTouch:!0,isKeyboard:!1,scrolling:!1}),this._prevDistance=-1,this._isFirstTouch=!0)},this._el=null,this._baseScale=-.2,this._prevDistance=-1,this._isFirstTouch=!0}enable(e){this._el||(e.addEventListener(Fi,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(Bi,this._onTouchEnd),this._el=e,this._prevDistance=-1,this._isFirstTouch=!0)}disable(){var e=this._el;e&&(e.removeEventListener(Fi,this._onTouchMove,!1),e.removeEventListener(Bi,this._onTouchEnd),this._el=null)}}class fa extends n{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._motion.activated}get zoom(){return this._motion.val}get scrollable(){return this._wheelInput.scrollable}set scrollable(e){this._wheelInput.scrollable=e}get range(){return this._motion.range}get scale(){return this._scale}set scale(e){this._scale=e}get duration(){return this._motion.duration}get easing(){return this._motion.easing}constructor(e,t,{scale:n=1,duration:i=300,easing:r=Br}={}){super(),this._onInputStart=e=>{this.trigger(Or.INPUT_START,Object.assign(Object.assign({},e),{inputType:"zoom"}))},this._onChange=({delta:e})=>{var t=this._scale;this._motion.setNewEndByDelta(e*t)},this._onInputEnd=e=>{this.trigger(Or.INPUT_END,Object.assign(Object.assign({},e),{inputType:"zoom"}))},this._scale=n,this._controlEl=e,this._enableBlocked=t,this._wheelInput=new ha,this._pinchInput=new da,this._motion=new ra({duration:i,easing:r,range:Ur}),this._enabled=!1,this._bindInputs()}destroy(){this.disable(),this._wheelInput.off(),this._pinchInput.off(),this.off()}update(e){this._enabled&&this._motion.update(e)}enable(){var e;this._enabled||(e=this._controlEl,this._wheelInput.enable(e),this._pinchInput.enable(e),this._enabled=!0,this._enableBlocked=!1,this.trigger(Or.ENABLE,{control:this,updateCursor:!1}))}disable(){this._enabled&&(this._wheelInput.disable(),this._pinchInput.disable(),this._enabled=!1,this.trigger(Or.DISABLE,{updateCursor:!1}))}sync(e){var t=this._motion;e=e.getZoomRange(),t.setRange(e.min,e.max),t.reset(e.current)}_bindInputs(){var e=this._wheelInput,t=this._pinchInput;e.on(Or.INPUT_START,this._onInputStart),e.on(Or.CHANGE,this._onChange),e.on(Or.INPUT_END,this._onInputEnd),t.on(Or.INPUT_START,this._onInputStart),t.on(Or.CHANGE,this._onChange),t.on(Or.INPUT_END,this._onInputEnd)}}let pa={PITCH_DELTA:1,YAW_DELTA_BY_ROLL:2,YAW_DELTA_BY_YAW:3};pa[pa.PITCH_DELTA]={targetAxis:[0,1,0],meshPoint:[0,0,1]},pa[pa.YAW_DELTA_BY_ROLL]={targetAxis:[0,1,0],meshPoint:[1,0,0]},pa[pa.YAW_DELTA_BY_YAW]={targetAxis:[1,0,0],meshPoint:[0,0,1]};class ma extends n{get enabled(){return this._enabled}get orientationUpdated(){return this._orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(e){this._ignoreRoll=e}constructor(){super(),this._onDeviceOrientation=e=>{var t=this._orientation,{alpha:e,beta:n,gamma:i}=e;null!=e&&null!=n&&null!=i&&(t.alpha=e,t.beta=n,t.gamma=i,this._orientationUpdated=!0,this._needsCalibrate)&&(this._needsCalibrate=!1,this._calibrateSensor())},this._updateScreenOrientation=()=>{window.screen&&window.screen.orientation&&void 0!==window.screen.orientation.angle?this._screenOrientation=screen.orientation.angle:void 0!==window.orientation?this._screenOrientation=0<=window.orientation?window.orientation:360+window.orientation:this._screenOrientation=0},this.quaternion=a.create(),this._orientation={alpha:0,beta:90,gamma:0},this._yawOrigin=0,this._yawOffset=0,this._orientationUpdated=!1,this._screenOrientation=0,this._needsCalibrate=!0,this._enabled=!1}enable(){this._enabled||(window.addEventListener(Xi,this._onDeviceOrientation),window.addEventListener(Zi,this._updateScreenOrientation),this._updateScreenOrientation(),this._orientationUpdated=!1,this._needsCalibrate=!0,this._enabled=!0)}disable(){this._enabled&&(window.removeEventListener(Xi,this._onDeviceOrientation),window.removeEventListener(Zi,this._updateScreenOrientation),this._enabled=!1)}update(){this._updateRotation(),this._orientationUpdated=!1}collectDelta(){var e;return this._orientationUpdated?(e=a.clone(this.quaternion),this._updateRotation(),this._orientationUpdated=!1,this._toEulerDelta(e,this.quaternion)):{pitch:0,yaw:0}}setInitialRotation(e){this._yawOrigin=e}_calibrateSensor(){var e=this._yawOrigin,t=this.quaternion;t=(this._yawOffset=0,this._updateRotation(),ia(t)).yaw,this._yawOffset=t-e,this._updateRotation(),this._needsCalibrate=!1}_updateRotation(){var e=this.quaternion,{alpha:t,beta:n,gamma:i}=this._orientation,t=(a.identity(e),a.rotateY(e,e,(t-this._yawOffset)*Nr),a.rotateX(e,e,n*Nr),a.rotateZ(e,e,-i*Nr),a.create()),n=.5*-this._screenOrientation*Nr,i=a.fromValues(-Math.sqrt(.5),0,0,Math.sqrt(.5));a.set(t,0,Math.sin(n),0,Math.cos(n)),a.multiply(e,e,t),a.multiply(e,e,i),a.normalize(e,e)}_toEulerDelta(e,t){return{yaw:this._getDeltaYaw(e,t),pitch:this._getDeltaPitch(e,t)}}_getDeltaYaw(e,t){var n=this._getRotationDelta(e,t,pa.YAW_DELTA_BY_YAW);return this._getRotationDelta(e,t,pa.YAW_DELTA_BY_ROLL)*Math.sin(this._extractPitchFromQuat(t))+n}_getDeltaPitch(e,t){return this._getRotationDelta(e,t,pa.PITCH_DELTA)}_getRotationDelta(e,t,n){var i=r.fromValues(pa[n].targetAxis[0],pa[n].targetAxis[1],pa[n].targetAxis[2]),o=pa[n].meshPoint,s=(e=a.clone(e),t=a.clone(t),a.normalize(e,e),a.normalize(t,t),r.fromValues(0,0,1)),l=r.fromValues(0,0,1),u=(i=0<(r.transformQuat(s,s,e),r.transformQuat(l,l,t),r.transformQuat(i,i,t),i=r.dot(i,r.cross(r.create(),s,l)))?1:-1,r.fromValues(o[0],o[1],o[2]));let c;c=n!==pa.YAW_DELTA_BY_YAW?r.fromValues(0,i,0):r.fromValues(i,0,0),r.transformQuat(u,u,t),r.transformQuat(c,c,t);var h=c,d=r.create(),f=(r.cross(d,u,h),r.normalize(d,d),u=d[0],h=d[1],d[2]);l=r.fromValues(o[0],o[1],o[2]),r.transformQuat(l,l,t),s=r.fromValues(o[0],o[1],o[2]),r.transformQuat(s,s,e),t=Math.abs(s[0]*u+s[1]*h+s[2]*f),o=r.create(),r.subtract(o,s,r.scale(r.create(),d,t));let p,m=(o[0]*l[0]+o[1]*l[1]+o[2]*l[2])/(r.length(o)*r.length(l));return 1<m&&(m=1),e=Math.acos(m),t=u*(s=r.cross(r.create(),l,o))[0]+h*s[1]+f*s[2],e*(p=n!==pa.YAW_DELTA_BY_YAW?0<t?1:-1:t<0?1:-1)*i*Fr}_extractPitchFromQuat(e){var t=r.fromValues(0,0,1);return r.transformQuat(t,t,e),-1*Math.atan2(t[1],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[2],2)))}}class ga extends n{get enabled(){return this._input.enabled}get enableBlocked(){return this._enableBlocked}get animating(){return this._input.enabled&&this._input.orientationUpdated}get ignoreRoll(){return this._ignoreRoll}set ignoreRoll(e){this._ignoreRoll=e}static isAvailable(){return pi(this,void 0,void 0,(function*(){try{if(!DeviceMotionEvent)return!1}catch(e){return!1}let e;return Promise.race([new Promise((t=>{e=e=>{t(e.rotationRate&&null!=e.rotationRate.alpha)},window.addEventListener(Ji,e)})),new Promise((e=>{setTimeout((()=>e(!1)),1e3)}))]).then((t=>(window.removeEventListener(Ji,e),t)))}))}static requestSensorPermission(){return pi(this,void 0,void 0,(function*(){return!ta()||DeviceMotionEvent.requestPermission().then((e=>"granted"===e)).catch((()=>!1))}))}constructor(e,{ignoreRoll:t=!0}={}){super(),this._enableBlocked=e,this._ignoreRoll=t,this._input=new ma}destroy(){this.disable(),this._input.off(),this.off()}update(e,t,n,i){this._ignoreRoll?this._updateYawPitch(e,t,n,i):this._updateQuaternion(e,i)}enable(){this._input.enabled||(this._input.enable(),this._enableBlocked=!1,this.trigger(Or.ENABLE,{control:this,updateCursor:!1}))}disable(){this._input.enabled&&(this._input.disable(),this.trigger(Or.DISABLE,{updateCursor:!1}))}sync(){}_updateYawPitch(e,t,n,i){var r,a=this._input;a.enabled&&(({yaw:a,pitch:r}=a.collectDelta()),t.add(a),n.add(r),e.lookAt({yaw:t.val,pitch:n.val,zoom:i}))}_updateQuaternion(e,t){var n=this._input;n.enabled&&(n.update(),e.rotate(n.quaternion,t))}}class _a{get useGrabCursor(){return this._useGrabCursor}set useGrabCursor(e){e!==this._useGrabCursor&&((this._useGrabCursor=e)&&this._enabled?this._setCursor(cr.GRAB):e||this._setCursor(cr.NONE))}get disableContextMenu(){return this._disableContextMenu}set disableContextMenu(e){e!==this._disableContextMenu&&((this._disableContextMenu=e)&&this._enabled?this._blockContextMenu():e||this._restoreContextMenu())}get scrollable(){return this._rotateControl.scrollable}set scrollable(e){this._rotateControl.scrollable=e}get wheelScrollable(){return this._zoomControl.scrollable}set wheelScrollable(e){this._zoomControl.scrollable=e}get ignoreZoomScale(){return this._ignoreZoomScale}set ignoreZoomScale(e){this._ignoreZoomScale=e}get enabled(){return this._enabled}get rotate(){return this._rotateControl}get zoom(){return this._zoomControl}get gyro(){return this._gyroControl}get animating(){return this._rotateControl.animating||this._zoomControl.animating||this._gyroControl.animating}constructor(e,t,{useGrabCursor:n,scrollable:i,wheelScrollable:r,disableContextMenu:a,rotate:o,zoom:s,gyro:l}){this._preventContextMenu=e=>{e.preventDefault()},this._onInputStart=e=>{this._useGrabCursor&&!e.isKeyboard&&this._setCursor(cr.GRABBING)},this._onInputEnd=e=>{this._useGrabCursor&&!e.isKeyboard&&this._setCursor(cr.GRAB)},this._onEnable=({control:e,updateCursor:t})=>{t&&this._useGrabCursor&&this._setCursor(cr.GRAB),e.sync(this._camera)},this._onDisable=({updateCursor:e})=>{e&&this._setCursor(cr.NONE)},this._onCameraAnimationEnd=({animation:e})=>{e.getFinishPromise().then((()=>{this.sync()}))},this._useGrabCursor=n,this._disableContextMenu=a,this._camera=t,this._controlEl=e,this._ignoreZoomScale=!1,this._enabled=!1,this._rotateControl=new ca(e,!o,Zr(o)),this._zoomControl=new fa(e,!s,Zr(s)),this._gyroControl=new ga(!l,Zr(l)),this._rotateControl.scrollable=i,this._zoomControl.scrollable=r,this._bindEvents()}destroy(){this.disable(),this._rotateControl.destroy(),this._zoomControl.destroy(),this._setCursor(cr.NONE)}resize(e,t){var n=this._camera;this._rotateControl.resize(n.fov,n.aspect,e,t)}enable(){return pi(this,void 0,void 0,(function*(){this._enabled||(this._rotateControl.enableBlocked||this._rotateControl.enable(),this._zoomControl.enableBlocked||this._zoomControl.enable(),this._gyroControl.enableBlocked||(yield ga.isAvailable())&&this._gyroControl.enable(),this.sync(),this._disableContextMenu&&this._blockContextMenu(),this._enabled=!0)}))}disable(){this._enabled&&(this._rotateControl.disable(),this._zoomControl.disable(),this._gyroControl.disable(),this._restoreContextMenu(),this._enabled=!1)}update(e){var t=this._camera,n=this._rotateControl,i=this._zoomControl,r=this._gyroControl,a=(i.update(e),a=t.fov,i=i.zoom,Math.tan(Nr*a*.5)/Math.tan(Nr*i*.5));i=this._ignoreZoomScale?1:Math.max(a,1),n.setZoomScale(i),n.updateRange(t,a),n.update(e),i=n.yaw,e=n.pitch,r.enabled?r.update(t,i,e,a):t.lookAt({yaw:i.val,pitch:e.val,zoom:a})}sync(){var e=this._camera;this._zoomControl.sync(e),this._rotateControl.sync(e)}_blockContextMenu(){this._controlEl.addEventListener(Gi,this._preventContextMenu)}_restoreContextMenu(){this._controlEl.removeEventListener(Gi,this._preventContextMenu)}_setCursor(e){!this._useGrabCursor&&e!==cr.NONE||(this._controlEl.style.cursor=e)}_bindEvents(){var e=this._rotateControl,t=this._zoomControl;e.on(Or.INPUT_START,this._onInputStart),e.on(Or.INPUT_END,this._onInputEnd),e.on(Or.ENABLE,this._onEnable),e.on(Or.DISABLE,this._onDisable),t.on(Or.ENABLE,this._onEnable),t.on(Or.DISABLE,this._onDisable),this._camera.on(xr,this._onCameraAnimationEnd)}}class ya{constructor({width:e,height:t,flipY:n}){this.width=e,this.height=t,this.flipY=n,this.wrapS=WebGLRenderingContext.CLAMP_TO_EDGE,this.wrapT=WebGLRenderingContext.CLAMP_TO_EDGE}destroy(){}isVideo(){return!1}isCube(){return!1}}class va extends ya{constructor({source:e,width:t,height:n,flipY:i}){super({width:t,height:n,flipY:i}),this.source=e}}class Aa extends va{destroy(){var e=this.source;e.pause(),e.removeAttribute("src"),e.load()}isVideo(){return!0}isPaused(){var e=this.source;return e.paused||e.ended||e.readyState<=2}hasAudio(){var e=this.source;return e.audioTracks?0<e.audioTracks.length:null!=e.webkitAudioDecodedByteCount?0<e.webkitAudioDecodedByteCount:null==e.mozHasAudio||e.mozHasAudio}}class Ea extends ya{constructor({sources:e,width:t,height:n,flipY:i}){super({width:t,height:n,flipY:i}),this.sources=e}isCube(){return!0}}class ba{constructor(){this._loadChecker=new fi}load(e,t){return pi(this,void 0,void 0,(function*(){var n;return t?this.loadVideo(e,Zr(t)):Array.isArray(e)&&1<e.length?this.loadCubeImage(e):(n=Array.isArray(e)?e[0]:e,this.loadImage(n))}))}loadImage(e){return pi(this,void 0,void 0,(function*(){let t=this._toImageArray(e);return this._load(t,(e=>{var n=t[0];e(new va({source:n,width:n.naturalWidth,height:n.naturalHeight,flipY:!0}))}))}))}loadCubeImage(e){return pi(this,void 0,void 0,(function*(){let t=this._toImageArray(e);return this._load(t,(e=>{e(new Ea({sources:t,width:t[0].naturalWidth,height:t[0].naturalHeight,flipY:!1}))}))}))}loadVideo(e,t){return pi(this,void 0,void 0,(function*(){let n=Object.assign({autoplay:!0,muted:!0,loop:!1,volume:1},t),i=this._toVideoElement(e,n);return this._load([i],(e=>{var{autoplay:t,muted:r}=n;i.currentTime=0,t&&r&&i.play().catch((()=>{})),e(new Aa({source:i,width:i.videoWidth,height:i.videoHeight,flipY:!0}))}))}))}_load(e,t){let n=this._loadChecker;return new Promise(((i,r)=>{n.once("ready",(e=>{0<e.errorCount||t(i)})),n.once("error",r),n.check(e)}))}_toImageArray(e){return(Array.isArray(e)?e:[e]).map((e=>{var t;return Wr(e)?((t=new Image).crossOrigin="anonymous",t.src=e,t):e}))}_toVideoElement(e,{muted:t,loop:n,volume:i}){if(e instanceof HTMLVideoElement)return e;let r=document.createElement("video");return r.crossOrigin="anonymous",r.playsInline=!0,r.setAttribute("webkit-playsinline",""),r.muted=t,r.volume=i,r.loop=n,Array.isArray(e)?e.forEach((e=>this._appendSourceElement(r,e))):this._appendSourceElement(r,e),0<r.querySelectorAll("source").length&&r.readyState<1&&r.load(),r}_appendSourceElement(e,t){if(t instanceof HTMLSourceElement)return t;var n=document.createElement("source");n.src=t,e.appendChild(n)}}class wa{constructor(e,t=window){this.maxDeltaTime=e,this._context=t,this._rafId=-1,this._rafTimer=-1,this._lastUpdateTime=-1}start(e){let t=this._context;if(t&&e&&!(0<=this._rafId||0<=this._rafTimer)){let n=(i,r)=>{var a=Date.now(),o=Math.min(a-this._lastUpdateTime,1e3*this.maxDeltaTime);e(o,r),this._lastUpdateTime=a,this._rafId=t.requestAnimationFrame(n)};this._lastUpdateTime=Date.now(),this._rafId=t.requestAnimationFrame(n)}}stop(){0<=this._rafId&&this._context.cancelAnimationFrame(this._rafId),0<=this._rafTimer&&clearTimeout(this._rafTimer),this._rafId=-1,this._rafTimer=-1}changeContext(e){this.stop(),this._context=e}}class Ta{get useResizeObserver(){return this._useResizeObserver}get enabled(){return this._enabled}constructor(e,t){this._skipFirstResize=(()=>{let e=!0;return()=>{e?e=!1:this._onResize()}})(),this._useResizeObserver=e,this._enabled=!1,this._resizeObserver=null,this._onResize=t}enable(e){var t;return this._enabled&&this.disable(),this._useResizeObserver&&window.ResizeObserver?(t=0!==(t=e.getBoundingClientRect()).width||0!==t.height,(t=new ResizeObserver(t?this._skipFirstResize:this._onResize)).observe(e),this._resizeObserver=t):window.addEventListener(ji,this._onResize),this._enabled=!0,this}disable(){var e;return this._enabled&&((e=this._resizeObserver)?(e.disconnect(),this._resizeObserver=null):window.removeEventListener(ji,this._onResize),this._enabled=!1),this}}class Sa{get enabled(){return this._enabled}get enableBlocked(){return this._enableBlocked}get playing(){return this._enabled&&!this._interrupted}get delay(){return this._delay}set delay(e){this._delay=e}get delayOnMouseLeave(){return this._delayOnMouseLeave}set delayOnMouseLeave(e){this._delayOnMouseLeave=e}get speed(){return this._speed}set speed(e){this._speed=e}get pauseOnHover(){return this._pauseOnHover}set pauseOnHover(e){this._pauseOnHover=e}get canInterrupt(){return this._canInterrupt}set canInterrupt(e){this._canInterrupt=e}get disableOnInterrupt(){return this._disableOnInterrupt}set disableOnInterrupt(e){this._disableOnInterrupt=e}constructor(e,t,n){this._onInputStart=()=>{this._canInterrupt&&(this._interrupted=!0,this._clearTimeout())},this._onInputEnd=()=>{this._setUninterruptedAfterDelay(this._delay)},this._onGyroEnable=()=>{this.disable()},this._onMouseEnter=()=>{this._pauseOnHover&&(this._interrupted=!0,this._hovering=!0)},this._onMouseLeave=()=>{this._pauseOnHover&&(this._hovering=!1,this._setUninterruptedAfterDelay(this._delayOnMouseLeave))},this._camera=e.camera,this._control=e.control,this._element=t,this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1;var{delay:e=2e3,delayOnMouseLeave:t=0,speed:i=1,pauseOnHover:r=!1,canInterrupt:a=!0,disableOnInterrupt:o=!1}=Zr(n);this._enableBlocked=!n,this._delay=e,this._delayOnMouseLeave=t,this._speed=i,this._pauseOnHover=r,this._canInterrupt=a,this._disableOnInterrupt=o}destroy(){this.disable()}update(e){var t;this._enabled&&(this._interrupted?this._disableOnInterrupt&&this.disable():(t=this._camera,e=-this._speed*e/100,t.yaw=Jr(t.yaw+e,0,360)))}enable(){var e=this._control,t=this._element;this._enabled||e.gyro.enabled||(e.rotate.on(Or.INPUT_START,this._onInputStart),e.rotate.on(Or.INPUT_END,this._onInputEnd),e.zoom.on(Or.INPUT_START,this._onInputStart),e.zoom.on(Or.INPUT_END,this._onInputEnd),e.gyro.on(Or.ENABLE,this._onGyroEnable),t.addEventListener(Vi,this._onMouseEnter,!1),t.addEventListener(Hi,this._onMouseLeave,!1),this._enabled=!0,this._enableBlocked=!1)}enableAfterDelay(){this.enable(),this._interrupted=!0,this._setUninterruptedAfterDelay(this._delay)}disable(){var e,t;this._enabled&&(e=this._control,t=this._element,e.rotate.off(Or.INPUT_START,this._onInputStart),e.rotate.off(Or.INPUT_END,this._onInputEnd),e.zoom.off(Or.INPUT_START,this._onInputStart),e.zoom.off(Or.INPUT_END,this._onInputEnd),e.gyro.off(Or.ENABLE,this._onGyroEnable),t.removeEventListener(Vi,this._onMouseEnter,!1),t.removeEventListener(Hi,this._onMouseLeave,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout())}_setUninterruptedAfterDelay(e){this._hovering||(this._clearTimeout(),0<e?this._interruptionTimer=window.setTimeout((()=>{this._interrupted=!1,this._interruptionTimer=-1}),e):(this._interrupted=!1,this._interruptionTimer=-1))}_clearTimeout(){0<=this._interruptionTimer&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)}}class Ra extends n{constructor(e,t={}){super(),this.destroy=()=>{this.exit(),this.off()},this._onSessionEnd=()=>{this.exit(),this.trigger(kr)},this._xrSession=null,this._xrRefSpace=null,this._ctx=e,this._options=t}isAvailable(){return pi(this,void 0,void 0,(function*(){var e=window.navigator.xr;return!!e&&e.isSessionSupported(Yr).then((e=>e)).catch((()=>!1))}))}enter(){return pi(this,void 0,void 0,(function*(){var e,t=this._ctx,n=window.navigator.xr;n&&(yield ga.requestSensorPermission(),e=Object.assign({requiredFeatures:["local"]},this._options),yield t.makeXRCompatible(),n=yield n.requestSession(Yr,e),t.bindXRLayer(n),e=yield n.requestReferenceSpace("local"),this._setSession(n,e),this.trigger(Dr,{session:n}))}))}exit(){var e=this._xrSession;e&&e.end().catch((()=>{})),this._xrSession=null,this._xrRefSpace=null}canRender(e){var t=this._xrRefSpace;return!!t&&!!e.getViewerPose(t)}getEyeParams(e){var t=e.session;if(!(e=e.getViewerPose(this._xrRefSpace)))return null;let n=t.renderState.baseLayer;return n?e.views.map((e=>({viewport:n.getViewport(e),vMatrix:e.transform.inverse.matrix,pMatrix:e.projectionMatrix}))):null}_setSession(e,t){this._xrSession=e,this._xrRefSpace=t,e.addEventListener(sr,this._onSessionEnd)}}class Ia{constructor(e,t){this.element=e,this.position=t}}class Ca{constructor(e,t,{zoom:n=!1}){this._containerEl=qr("."+vr,e),this._renderer=t,this._hotspots=[],this._zoom=n}refresh(){var e=this._containerEl;e&&(e=[].slice.apply(e.querySelectorAll("."+Ar)),this._hotspots=e.map((e=>this._parseHotspot(e))))}render(e){var t=this._hotspots;let n=.5*this._renderer.width,i=.5*this._renderer.height;var a=e.zoom;let s=this._zoom?`scale(${a})`:"";t.forEach((t=>{var a=t.position,l=r.create();r.copy(l,a),r.transformMat4(l,l,e.viewMatrix),r.transformMat4(l,l,e.projectionMatrix),1<l[2]||l[2]<0?t.element.classList.remove(Er):(a=o.fromValues(l[0]*n+n,-l[1]*i+i),t.element.classList.add(Er),t.element.style.transform=["translate(-50%, -50%)",`translate(${a[0]}px, ${a[1]}px)`,s].join(" "))}))}_parseHotspot(e){var t=e.dataset.yaw,n=e.dataset.pitch,i=e.dataset.position;if(t||n)return t=t?parseFloat(t):0,n=n?parseFloat(n):0,t=this._yawPitchToVec3(t,n),new Ia(e,t);if(i){if(n=i.split(" ").map((e=>parseFloat(e))),n.length<3)throw new mi(ki(i,'hotspot attribute "data-position"'),Si);return new Ia(e,r.fromValues(n[0],n[1],n[2]))}return t=r.fromValues(0,0,-1),new Ia(e,t)}_yawPitchToVec3(e,t){e*=Nr,t*=Nr;var n=r.create();return n[1]=Math.sin(t),n[2]=Math.cos(t),n[0]=n[2]*Math.sin(-e),n[2]=-n[2]*Math.cos(-e),n}}class La{get count(){return this.geometry.indicies.count}constructor(e,t,n){this.obj=e,this.geometry=t,this.buffers=n}}class Pa{get canvas(){return this._canvas}get maxTextureSize(){return this._maxTextureSize}get isWebGL2(){return this._isWebGL2}get supportVAO(){return this._isWebGL2||!!this._extensions.vao}get lost(){return this._contextLost}get debug(){return this._debug}constructor(e,t){this._onContextLost=()=>{this._canvas.classList.add(_r),this._contextLost=!0},this._onContextRestore=()=>{this._canvas.classList.remove(_r),this._contextLost=!1},this._canvas=e,this._contextLost=!1,this._debug=t,this._extensions={vao:null,loseContext:null}}init(){var e=this._canvas,{gl:t,isWebGL2:n}=this._getContext(e);this._gl=t,this._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this._isWebGL2=n,this._isWebGL2||(this._extensions.vao=t.getExtension("OES_vertex_array_object")),this._extensions.loseContext=t.getExtension("WEBGL_lose_context"),e.addEventListener(qi,this._onContextLost),e.addEventListener(Qi,this._onContextRestore)}destroy(){var e=this._gl,t=this._canvas;e&&(e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),t.removeEventListener(qi,this._onContextLost),t.removeEventListener(Qi,this._onContextRestore)}forceLoseContext(){var e=this._extensions.loseContext;e&&e.loseContext()}forceRestoreContext(){var e=this._extensions.loseContext;e&&e.restoreContext()}clear(){var e=this._gl;e.clear(e.COLOR_BUFFER_BIT)}resize(){var e=this._gl;e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight)}viewport(e,t,n,i){this._gl.viewport(e,t,n,i)}createVAO(e,t){var n=this._createNativeVAO();return e=new La(n,e,{indicies:this._createBuffer(),position:this._createBuffer(),uv:this._createBuffer()}),n&&(this._bindNativeVAO(n),this._supplyGeometryData(e,t),this._bindNativeVAO(null),this._unbindBuffers()),e}draw(e,t){var n=this._gl;e.obj?this._bindNativeVAO(e.obj):this._supplyGeometryData(e,t),n.drawElements(n.TRIANGLES,e.count,n.UNSIGNED_SHORT,0),e.obj?this._bindNativeVAO(null):this._unbindBuffers()}releaseVAO(e){e.obj&&this._deleteNativeVAO(e.obj),this._deleteBuffer(e.buffers.indicies),this._deleteBuffer(e.buffers.position),this._deleteBuffer(e.buffers.uv)}getUniformLocations(e,t){let n=this._gl;return t=Object.keys(t).reduce(((t,i)=>(t[i]=n.getUniformLocation(e,i),t)),{}),Object.assign(Object.assign({},this._getCommonUniformLocations(e)),t)}updateCommonUniforms(e,t,n){var r=this._gl,a=(n=n.uniformLocations,e=e.matrix,i.create());i.multiply(a,t.viewMatrix,e),r.uniformMatrix4fv(n.uMVMatrix,!1,a),r.uniformMatrix4fv(n.uPMatrix,!1,t.projectionMatrix)}updateVRUniforms(e,t,n,i){var r=this._gl;e=e.uniformLocations,r.uniformMatrix4fv(e.uMVMatrix,!1,t),r.uniformMatrix4fv(e.uPMatrix,!1,n),e.uEye&&r.uniform1f(e.uEye,i)}updateUniforms(e){var t,n=this._gl,i=e.uniforms,r=e.uniformLocations;for(t in i){var a=i[t],o=r[t];a&&a.needsUpdate&&a.update(n,o,this._isWebGL2)}}releaseShaderResources(e){var t,n=this._gl,i=e.uniforms;for(t in i){var r=i[t];r&&r.needsUpdate&&r.destroy(n)}n.deleteProgram(e.program)}useProgram(e){this._gl.useProgram(e.program)}createProgram(e,t){var n=this._gl,i=n.createProgram();if(e=this._compileShader(n.VERTEX_SHADER,e),t=this._compileShader(n.FRAGMENT_SHADER,t),n.attachShader(i,e),n.attachShader(i,t),n.bindAttribLocation(i,0,"position"),n.bindAttribLocation(i,1,"uv"),n.linkProgram(i),!this._debug||n.getProgramParameter(i,n.LINK_STATUS))return n.deleteShader(e),n.deleteShader(t),i;{let r=null;throw n.getShaderParameter(e,n.COMPILE_STATUS)?n.getShaderParameter(t,n.COMPILE_STATUS)||(r=n.getShaderInfoLog(t)):r=n.getShaderInfoLog(e),new mi(Di(n.getProgramInfoLog(i),r),Ti)}}createWebGLTexture(e){var t=this._gl,n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e.wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,e.wrapT),!e.isVideo()&&this._isWebGL2&&t.texStorage2D(t.TEXTURE_2D,1,t.RGBA8,e.width,e.height),n}createWebGLCubeTexture(e,t){var n=this._gl,i=n.createTexture();return n.bindTexture(n.TEXTURE_CUBE_MAP,i),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_S,e.wrapS),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_T,e.wrapT),this._isWebGL2&&n.texStorage2D(n.TEXTURE_CUBE_MAP,1,n.RGBA8,t,t),i}makeXRCompatible(){return pi(this,void 0,void 0,(function*(){var e=this._gl,t=e.getContextAttributes();t&&!0!==t.xrCompatible&&(yield e.makeXRCompatible())}))}bindXRLayer(e){var t=this._gl;t=new XRWebGLLayer(e,t),e.updateRenderState({baseLayer:t})}bindXRFrame(e){var t=this._gl;e=e.session.renderState.baseLayer,t.bindFramebuffer(t.FRAMEBUFFER,e.framebuffer)}useDefaultFrameBuffer(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}_createBuffer(){return this._gl.createBuffer()}_deleteBuffer(e){return this._gl.deleteBuffer(e)}_createNativeVAO(){var e=this._gl;return this._isWebGL2?e.createVertexArray():(null==(e=this._extensions.vao)?void 0:e.createVertexArrayOES())||null}_bindNativeVAO(e){var t=this._gl;this._isWebGL2?t.bindVertexArray(e):null!=(t=this._extensions.vao)&&t.bindVertexArrayOES(e)}_deleteNativeVAO(e){var t=this._gl;this._isWebGL2?t.deleteVertexArray(e):null!=(t=this._extensions.vao)&&t.deleteVertexArrayOES(e)}_supplyGeometryData(e,t){var n=e.geometry;this._supplyIndiciesData(n.indicies,e.buffers.indicies),this._supplyAttributeData(n.vertices,t.program,"position",e.buffers.position),this._supplyAttributeData(n.uvs,t.program,"uv",e.buffers.uv)}_unbindBuffers(){var e=this._gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindBuffer(e.ARRAY_BUFFER,null)}_supplyIndiciesData(e,t){var n=this._gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.data,n.STATIC_DRAW)}_supplyAttributeData(e,t,n,i){var r=this._gl;(t=r.getAttribLocation(t,n))<0||(r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,e.data,r.STATIC_DRAW),r.vertexAttribPointer(t,e.itemSize,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t))}_compileShader(e,t){var n=this._gl;return e=n.createShader(e),n.shaderSource(e,t),n.compileShader(e),e}_getCommonUniformLocations(e){var t=this._gl;return{uMVMatrix:t.getUniformLocation(e,"uMVMatrix"),uPMatrix:t.getUniformLocation(e,"uPMatrix")}}_getContext(e){let t=null,n=!1;var i,r={preserveDrawingBuffer:!1,antialias:!1},a=e=>e.statusMessage;for(i of(e.addEventListener(Ki,a),["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"])){try{t=e.getContext(i,r),n="webgl2"===i}catch(e){}if(t)break}if(e.removeEventListener(Ki,a),t)return{gl:t,isWebGL2:n};throw new mi(Li,bi)}}class Da{get canvas(){return this._canvas}get width(){return this._elementSize.x}get height(){return this._elementSize.y}get pixelRatio(){return this._pixelRatio}get aspect(){return this._elementSize.x/this._elementSize.y}constructor(e,t){this._canvas=e,this._elementSize={x:0,y:0},this._pixelRatio=1,this.ctx=new Pa(e,t)}destroy(){var e=this._canvas;this.ctx.destroy(),e.width=1,e.height=1}resize(){var e=this._canvas,t=this._elementSize,n=window.devicePixelRatio;t.x=e.clientWidth,t.y=e.clientHeight,e.width=t.x*n,e.height=t.y*n,this._pixelRatio=n,this.ctx.resize()}render(e,t){var n=this.ctx;n.lost||(n.clear(),n.useProgram(e.program),n.updateCommonUniforms(e,t,e.program),e.update({camera:t}),n.updateUniforms(e.program),n.draw(e.vao,e.program))}renderVR(e,t,n){let r=this.ctx;(t=t.getEyeParams(n))&&e&&(r.bindXRFrame(n),r.useProgram(e.program),r.updateUniforms(e.program),t.forEach(((t,n)=>{var a=t.viewport,o=i.multiply(i.create(),t.vMatrix,e.matrix);r.viewport(a.x,a.y,a.width,a.height),r.updateVRUniforms(e.program,o,t.pMatrix,n),r.draw(e.vao,e.program)})))}}class ka extends n{get rootEl(){return this._rootEl}get renderer(){return this._renderer}get camera(){return this._camera}get control(){return this._control}get vr(){return this._vr}get hotspot(){return this._hotspot}get plugins(){return this._plugins}get projection(){return this._projection}set projection(e){this._initialized&&e?this.load(e):this._projection=e}get mesh(){return this._mesh}get initialized(){return this._initialized}get autoplay(){return this._autoplay}get autoInit(){return this._autoInit}get autoResize(){return this._autoResize}get canvasSelector(){return this._canvasSelector}get useResizeObserver(){return this._useResizeObserver}get tabIndex(){return this._tabIndex}set tabIndex(e){var t=this._renderer.canvas;null!=(this._tabIndex=e)?t.tabIndex=e:t.removeAttribute("tabindex")}get maxDeltaTime(){return this._animator.maxDeltaTime}set maxDeltaTime(e){this._animator.maxDeltaTime=e}get debug(){return this._debug}set debug(e){this._debug=e}get initialYaw(){return this._camera.initialYaw}set initialYaw(e){this._camera.initialYaw=e}get initialPitch(){return this._camera.initialPitch}set initialPitch(e){this._camera.initialPitch=e}get initialZoom(){return this._camera.initialZoom}set initialZoom(e){this._camera.initialZoom=e}get yawRange(){return this._camera.yawRange}set yawRange(e){this._camera.yawRange=e,this._projection&&this._projection.updateCamera(this._camera)}get pitchRange(){return this._camera.pitchRange}set pitchRange(e){this._camera.pitchRange=e,this._projection&&this._projection.updateCamera(this._camera)}get zoomRange(){return this._camera.zoomRange}set zoomRange(e){this._camera.zoomRange=e,this._projection&&this._projection.updateCamera(this._camera)}get fov(){return this._camera.fov}set fov(e){var t=this._camera,n=this._control;t.fov=e,t.updateMatrix(),n.sync()}get rotate(){return this._control.rotate}get zoom(){return this._control.zoom}get gyro(){return this._control.gyro}get useGrabCursor(){return this._control.useGrabCursor}set useGrabCursor(e){this._control.useGrabCursor=e}get disableContextMenu(){return this._control.disableContextMenu}set disableContextMenu(e){this._control.disableContextMenu=e}get scrollable(){return this._control.scrollable}set scrollable(e){this._control.scrollable=e}get wheelScrollable(){return this._control.wheelScrollable}set wheelScrollable(e){this._control.wheelScrollable=e}constructor(e,{projection:t=null,initialYaw:n=0,initialPitch:i=0,initialZoom:r=1,yawRange:a=null,pitchRange:o=null,zoomRange:s=null,fov:l=90,useGrabCursor:u=!0,disableContextMenu:c=!1,rotate:h=!0,zoom:d=!0,gyro:f=!1,scrollable:p=!0,wheelScrollable:m=!1,autoplay:g=!1,hotspot:_={},autoInit:y=!0,autoResize:v=!0,canvasSelector:A="canvas",useResizeObserver:E=!0,on:b={},plugins:w=[],maxDeltaTime:T=1/30,tabIndex:S=0,debug:R=!1}={}){super(),this.renderFrame=e=>{var t=this._camera,n=this._renderer,i=this._control,r=this._hotspot,a=this._autoplay,o=this._mesh;o&&(this._emit(Ir),a.playing&&(a.update(e),i.sync()),(t.animation||i).update(e),n.render(o,t),r.render(t),t.changed&&this._emit(Lr,{yaw:t.yaw,pitch:t.pitch,zoom:t.zoom,quaternion:[t.quaternion[0],t.quaternion[1],t.quaternion[2],t.quaternion[3]]}),t.onFrameRender(),this._emit(Cr))},this._renderFrameOnDemand=e=>{var t=this._camera,n=this._control,i=this._autoplay,r=null==(r=this._mesh)?void 0:r.getTexture();this._initialized&&r&&(t.animation||n.animating||i.playing||r.isVideo())&&this.renderFrame(e)},this._renderVRFrame=(e,t)=>{var n=this._vr,i=this._mesh,r=this._renderer;i&&(this._emit(Ir),r.renderVR(i,n,t),this._emit(Cr))},this._rootEl=((e,t)=>{if(t=qr(e,t))return t;throw Wr(e)?new mi(Ii(e),Ai):new mi(Ri(e,["HTMLElement","string"]),vi)})(e),this._plugins=w,this._initialized=!1,this._autoInit=y,this._autoResize=v,this._canvasSelector=A,this._useResizeObserver=E,this._tabIndex=S,this._debug=R,e=((e,t)=>{if(e=e.querySelector(t))return e;throw new mi(Ci,Ei)})(this._rootEl,A),this._renderer=new Da(e,R),this._camera=new oa({initialYaw:n,initialPitch:i,initialZoom:r,fov:l,yawRange:a,pitchRange:o,zoomRange:s}),this._control=new _a(e,this._camera,{useGrabCursor:u,scrollable:p,wheelScrollable:m,disableContextMenu:c,rotate:h,zoom:d,gyro:f}),this._animator=new wa(T),this._autoplay=new Sa(this,e,g),this._projection=t,this._mesh=null,this._autoResizer=new Ta(E,(()=>this.resize())),this._vr=new Ra(this._renderer.ctx),this._hotspot=new Ca(this._rootEl,this._renderer,_),this._addEventHandlers(b),t&&y&&this.init()}destroy(){this._camera.destroy(),this._animator.stop(),this._renderer.destroy(),this._control.destroy(),this._autoResizer.disable(),this._mesh&&(this._mesh.destroy(this._renderer.ctx),this._mesh=null),this._plugins.forEach((e=>e.destroy(this))),this._initialized=!1}init(){return pi(this,void 0,void 0,(function*(){if(!this._projection)throw new mi(Pi,wi);var e=this._renderer,t=this._camera,n=this._control,i=this._animator,r=this._hotspot,a=this._projection,o=e.canvas;this._bindComponentEvents(),e.ctx.init(),this._resizeComponents(),t.updateMatrix(),this._autoResize&&this._autoResizer.enable(o),this._autoplay.enableBlocked||this._autoplay.enable(),this._plugins.forEach((e=>{e.init(this)})),e=yield this._loadTexture(a),this._applyProjection(a,e),r.refresh(),i.start(this._renderFrameOnDemand),yield n.enable(),null==this._tabIndex||o.hasAttribute("tabIndex")||(o.tabIndex=this._tabIndex),this._initialized=!0,this.renderFrame(0),this._emit(br)}))}load(e){return pi(this,void 0,void 0,(function*(){var t;return!!e&&(this._initialized?(t=yield this._loadTexture(e),this._applyProjection(e,t),this.renderFrame(0)):(this._projection=e,this.init()),!0)}))}resize(){var e,t;this._initialized&&(this._resizeComponents(),this.renderFrame(0),({width:e,height:t}=this._renderer),this._emit(Rr,{width:e,height:t}))}addPlugins(...e){this._initialized&&e.forEach((e=>{e.init(this)})),this._plugins.push(...e)}removePlugins(...e){e.forEach((e=>{var t=this._plugins.indexOf(e);t<0||(e.destroy(this),this._plugins.splice(t,1))}))}_emit(e,...t){t=t?t[0]:{},this.trigger(e,Object.assign({type:e,target:this},t))}_applyProjection(e,t){var n=this._camera,i=this._control,r=this._renderer,a=((a=this._mesh)&&a.destroy(r.ctx),e.createMesh(r.ctx,t));e.updateCamera(n),e.updateControl(i),this._mesh=a,this._emit(Sr,{projection:e})}_loadTexture(e){return pi(this,void 0,void 0,(function*(){var t=new ba,{src:n,video:i}=e;return this._emit(wr,{src:n,video:i}),t=yield t.load(n,i),this._emit(Tr,{src:n,video:i}),t}))}_resizeComponents(){var e=this._renderer,t=this._camera,n=this._control;e.resize(),t.resize(e.width,e.height),n.resize(e.width,e.height)}_addEventHandlers(e){Object.keys(e).forEach((t=>{this.on(t,e[t])}))}_bindComponentEvents(){let e=this._rootEl,t=this._control,n=this._animator,i=this._renderer;var r=this._vr;[Or.STATIC_CLICK,Or.INPUT_START,Or.INPUT_END].forEach((e=>{t.rotate.on(e,(t=>{this._emit(e,t)})),t.zoom.on(e,(t=>{this._emit(e,t)}))})),r.on(Dr,(t=>{e.classList.add(yr),n.changeContext(t.session),n.start(this._renderVRFrame),this._emit(Dr)})),r.on(kr,(()=>{e.classList.remove(yr),i.ctx.useDefaultFrameBuffer(),n.changeContext(window),n.start(this._renderFrameOnDemand),this.resize(),this._emit(kr)}))}}ka.VERSION="4.0.0-beta.7";class xa extends n{constructor(){super(),this.matrix=i.create(),this.rotation=a.create(),this.position=r.fromValues(0,0,0),this.scale=r.fromValues(1,1,1)}updateMatrix(){i.fromRotationTranslationScale(this.matrix,this.rotation,this.position,this.scale)}update(e){this.trigger(Mr,e)}}class Ma{constructor(e){this.position=e.position,this.order=e.order}}let Oa={CONTROLS_ROOT:"view360-controls",CONTROLS_BG:"view360-controls-background",CONTROLS_MAIN:"view360-controls-main",CONTROLS_TOP:"view360-controls-top",CONTROLS_BOTTOM:"view360-controls-bottom",CONTROLS_MID:"view360-controls-mid",CONTROLS_LEFT:"view360-controls-left",CONTROLS_RIGHT:"view360-controls-right",CONTROLS_FLOAT_LEFT:"view360-controls-float-left",CONTROLS_FLOAT_RIGHT:"view360-controls-float-right",CONTROLS_BUTTON:"view360-controls-button",PROGRESS_ROOT:"view360-controls-progress",VOLUME_ROOT:"view360-controls-volume",RANGE_ROOT:"view360-range",RANGE_TRACK:"view360-range-track",RANGE_THUMB:"view360-range-thumb",RANGE_FILLER:"view360-range-filler",PLAY_BUTTON:"view360-controls-play",PAUSE_BUTTON:"view360-controls-pause",UNMUTED_BUTTON:"view360-controls-unmuted",MUTED_BUTTON:"view360-controls-muted",FULLSCREEN_BUTTON:"view360-controls-fullscreen",FULLSCREEN_EXIT_BUTTON:"view360-controls-fullscreen-exit",VR_BUTTON:"view360-controls-vr",GYRO_ENABLED:"view360-controls-gyro-enabled",GYRO_DISABLED:"view360-controls-gyro-disabled",VIDEO_TIME_DISPLAY:"view360-controls-time",PIEVIEW_ROOT:"view360-controls-pie",FIXED:"view360-controls-fixed",UNAVAILABLE:"view360-controls-unavailable",HIDDEN:"view360-controls-hidden"},Na={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",MAIN_TOP:"main-top",MAIN_BOTTOM:"main-bottom",MAIN_LEFT:"main-left",MAIN_RIGHT:"main-right"};class Fa extends n{constructor(){super(),this._onHold=({srcEvent:e,isTouch:t})=>{var n=this._bbox;n&&(t=(t?e.touches[0]:e).pageX,e=n.x+(null!=(e=window.scrollX)?e:window.pageXOffset),e=((t=Qr(t,e,e+n.width))-e)/n.width,this._motion.reset(t),this.thumbEl.classList.add(this._fixedClass),this.trigger(Or.INPUT_START,e))},this._onChange=({delta:e})=>{var t=this._motion,n=this._bbox;n&&(t.setNewEndByDelta(e.x),t.update(1),e=n.x+(null!=(e=window.scrollX)?e:window.pageXOffset),t=(Qr(t.val,e,e+n.width)-e)/n.width,this.trigger(Or.CHANGE,t))},this._onRelease=()=>{this._bbox&&(this.thumbEl.classList.remove(this._fixedClass),this.trigger(Or.INPUT_END))};var e=document.createElement(lr),t=document.createElement(lr),n=document.createElement(lr),i=document.createElement(lr);e.draggable=!1,t.appendChild(i),t.appendChild(n),e.appendChild(t),this.rootEl=e,this.trackEl=t,this.thumbEl=n,this.fillerEl=i,this._mouseInput=new sa,this._touchInput=new la,this._motion=new ra({duration:1,range:Ur,easing:e=>e}),this._bbox={x:0,y:0,width:0,height:0,left:0,right:0,bottom:0,top:0},this._fixedClass=Oa.FIXED}init(e){var t=this._mouseInput,n=this._touchInput;this.rootEl.classList.add(e.RANGE_ROOT),this.trackEl.classList.add(e.RANGE_TRACK),this.thumbEl.classList.add(e.RANGE_THUMB),this.fillerEl.classList.add(e.RANGE_FILLER),this._fixedClass=e.FIXED,t.on(Or.INPUT_START,this._onHold),n.on(Or.INPUT_START,this._onHold),t.on(Or.INPUT_END,this._onRelease),n.on(Or.INPUT_END,this._onRelease),t.on(Or.CHANGE,this._onChange),n.on(Or.CHANGE,this._onChange),t.enable(this.rootEl),n.enable(this.rootEl),this.resize()}destroy(){var e=this._mouseInput,t=this._touchInput;this.rootEl.className="",this.trackEl.className="",this.thumbEl.className="",this.fillerEl.className="",e.off(),t.off(),e.disable(),t.disable()}resize(){this._bbox=this.trackEl.getBoundingClientRect()}updateStyle(e){var t=this._bbox.width;e=Qr(e,0,1),this.fillerEl.style.width=100*e+"%",this.thumbEl.style.transform=`translateX(${e*t}px)`}}class Ba extends Ma{get element(){return this._rangeControl.rootEl}constructor({position:e=Na.MAIN_TOP,order:t=9999}={}){super({position:e,order:t}),this._onResize=()=>{this._rangeControl.resize()},this._onTimeUpdate=()=>{var e=this._video;e&&(this._currentTime=e.source.currentTime,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onDurationChange=()=>{var e=this._video;e&&(this._duration=e.source.duration,this._rangeControl.updateStyle(this._currentTime/this._duration))},this._onHold=e=>{var t,n=this._video,i=this._controlBar;n&&i&&(t=n.isPaused(),n.source.pause(),e=n.source.duration*e,n.source.currentTime=e,n.source.dispatchEvent(new CustomEvent(Vr,{detail:{time:e}})),i.rootEl.classList.add(i.className.FIXED),this._wasPaused=!this._playPromise&&t)},this._onControl=e=>{var t=this._video;t&&(e=t.source.duration*e,t.source.currentTime=e,t.source.dispatchEvent(new CustomEvent(Vr,{detail:{time:e}})))},this._onRelease=()=>{var e=this._video,t=this._controlBar;e&&t&&(this._wasPaused||this._playPromise||(this._playPromise=e.source.play().catch((()=>{})),this._playPromise.then((()=>{this._playPromise=null})),t.rootEl.classList.remove(t.className.FIXED))),this._wasPaused=!1},this.position=e,this.order=t,this._controlBar=null,this._rangeControl=new Fa,this._video=null,this._wasPaused=!1,this._currentTime=0,this._duration=0,this._playPromise=null}init(e,t){var n=null==(n=e.mesh)?void 0:n.getTexture(),i=this.element,r=this._rangeControl,a=t.className.UNAVAILABLE;n&&n.isVideo()?(i.classList.remove(a),i.classList.add(t.className.PROGRESS_ROOT),e.on(Rr,this._onResize),n.source.addEventListener(ir,this._onTimeUpdate),n.source.addEventListener(rr,this._onDurationChange),n.source.addEventListener(Vr,this._onTimeUpdate),r.init(t.className),r.on(Or.INPUT_START,this._onHold),r.on(Or.CHANGE,this._onControl),r.on(Or.INPUT_END,this._onRelease),this._video=n,this._currentTime=n.source.currentTime,this._duration=n.source.duration,this._controlBar=t,r.updateStyle(this._currentTime/this._duration)):i.classList.add(a)}destroy(e){var t=this._video;e.off(Rr,this._onResize),t&&(t.source.removeEventListener(ir,this._onTimeUpdate),t.source.removeEventListener(rr,this._onDurationChange),t.source.removeEventListener(Vr,this._onTimeUpdate)),this._rangeControl.destroy(),this._video=null,this._playPromise=null}}class Ua extends Ma{constructor({position:e=Na.MAIN_LEFT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._video;e&&(this._paused?e.source.play():e.source.pause())},this._onPlay=()=>{var e,t;this._controlBar&&(e=this.element,t=this._controlBar.className,e.classList.add(t.PAUSE_BUTTON),e.classList.remove(t.PLAY_BUTTON),e.title="Pause Video",this._paused=!1)},this._onPause=()=>{var e,t;this._controlBar&&(e=this.element,t=this._controlBar.className,e.classList.add(t.PLAY_BUTTON),e.classList.remove(t.PAUSE_BUTTON),e.title="Play Video",this._paused=!0)},this.element=document.createElement(ur),this._video=null,this._paused=!0,this._controlBar=null}init(e,t){var n=this.element,i=(e=null==(e=e.mesh)?void 0:e.getTexture(),t.className),r=i.UNAVAILABLE;e&&e.isVideo()?(n.classList.add(i.CONTROLS_BUTTON),n.classList.remove(r),i=e.isPaused(),this._video=e,this._paused=i,this._controlBar=t,i?this._onPause():this._onPlay(),n.addEventListener(Wi,this._onClick),e.source.addEventListener($i,this._onPlay),e.source.addEventListener(er,this._onPause)):n.classList.add(r)}destroy(){var e=this._video,t=this.element;e&&(t.className="",t.removeEventListener(Wi,this._onClick),e.source.removeEventListener($i,this._onPlay),e.source.removeEventListener(er,this._onPause),this._video=null,this._paused=!0,this._controlBar=null)}}class ja extends Ma{get element(){return this._rootEl}constructor({position:e=Na.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onResize=()=>{this._rangeControl.resize(),this._updateDisplay()},this._onClick=()=>{var e=this._video;e&&!this._rootEl.disabled&&(e.source.muted=!e.source.muted)},this._onVolumeChange=()=>{var e=this._buttonEl,t=this._video,n=this._controlBar;t&&n&&(n=n.className,t.source.muted||0===t.source.volume?(e.classList.add(n.MUTED_BUTTON),e.classList.remove(n.UNMUTED_BUTTON)):(e.classList.add(n.UNMUTED_BUTTON),e.classList.remove(n.MUTED_BUTTON)),this._updateDisplay())},this._onHold=e=>{var t,n=this._video,i=this._controlBar;n&&i&&(t=i.className,n.source.volume=e,this._rootEl.classList.add(t.FIXED),i.containerEl.classList.add(t.FIXED),this._updateDisplay())},this._onChange=e=>{var t=this._video;t&&(t.source.volume=e,t.source.muted=!(0<e),this._updateDisplay())},this._onRelease=()=>{var e,t=this._controlBar;t&&(e=t.className,this._rootEl.classList.remove(e.FIXED),t.containerEl.classList.remove(e.FIXED))},this._updateDisplay=()=>{var e=this._video,t=this._rootEl;e&&(e.hasAudio()?(t.disabled=!1,e=e.source.muted?0:e.source.volume,this._rangeControl.updateStyle(e)):t.disabled=!0)},this._controlBar=null,this._rangeControl=new Fa,this._createElements(),this._video=null}init(e,t){var n=null==(n=e.mesh)?void 0:n.getTexture(),i=this._rootEl,r=this._buttonEl,a=this._rangeControl,o=t.className,s=o.UNAVAILABLE;n&&n.isVideo()?(i.classList.remove(s),i.classList.add(o.CONTROLS_BUTTON),i.classList.add(o.VOLUME_ROOT),r.classList.add(o.CONTROLS_BUTTON),n.source.muted?r.classList.add(o.MUTED_BUTTON):r.classList.add(o.UNMUTED_BUTTON),e.on(Rr,this._onResize),i.addEventListener(or,this._onResize),r.addEventListener(Wi,this._onClick),n.source.addEventListener(nr,this._onVolumeChange),n.source.addEventListener(tr,this._updateDisplay),n.source.addEventListener(ar,this._updateDisplay),a.init(o),a.on(Or.INPUT_START,this._onHold),a.on(Or.CHANGE,this._onChange),a.on(Or.INPUT_END,this._onRelease),this._controlBar=t,this._video=n,this._updateDisplay()):i.classList.add(s)}destroy(e){var t=this._video,n=this._buttonEl,i=this._rootEl;i.className="",n.className="",e.off(Rr,this._onResize),i.removeEventListener(or,this._onResize),n.removeEventListener(Wi,this._onClick),t&&(t.source.removeEventListener(nr,this._onVolumeChange),t.source.removeEventListener(tr,this._updateDisplay),t.source.removeEventListener(ar,this._updateDisplay)),this._controlBar=null,this._rangeControl.destroy(),this._video=null}_createElements(){var e=document.createElement(ur),t=document.createElement(lr);e.appendChild(this._rangeControl.rootEl),e.appendChild(t),e.title="Toggle Mute",this._rootEl=e,this._buttonEl=t}}class Ga extends Ma{constructor({position:e=Na.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._targetEl;e&&(ea()?this._exitFullscreen():this._requestFullscreen(e))},this._onFullscreenChange=()=>{var e=this.element,t=this._controlBar;t&&(t=t.className,ea()?(e.classList.add(t.FULLSCREEN_EXIT_BUTTON),e.classList.remove(t.FULLSCREEN_BUTTON)):(e.classList.add(t.FULLSCREEN_BUTTON),e.classList.remove(t.FULLSCREEN_EXIT_BUTTON)))},this.element=document.createElement(ur),this.element.title="Toggle Fullscreen",this._controlBar=null,this._targetEl=null}init(e,t){var n=this.element,i=t.className;this._fullscreenAvailable()?(n.classList.add(i.CONTROLS_BUTTON),n.classList.remove(i.UNAVAILABLE),n.addEventListener(Wi,this._onClick),this._addFullscreenHandlers(),ea()?n.classList.add(i.FULLSCREEN_EXIT_BUTTON):n.classList.add(i.FULLSCREEN_BUTTON),this._controlBar=t,this._targetEl=e.rootEl):n.classList.add(i.UNAVAILABLE)}destroy(){var e=this.element;e.className="",e.removeEventListener(Wi,this._onClick),this._removeFullscreenHandlers(),this._controlBar=null,this._targetEl=null}_fullscreenAvailable(){return fr.some((e=>!!document[e]))}_requestFullscreen(e){for(var t of fr)if(t=e[t])return void t.call(e)}_exitFullscreen(){for(var e of mr)if(e=document[e])return void e.call(document)}_addFullscreenHandlers(){gr.forEach((e=>{document.addEventListener(e,this._onFullscreenChange)}))}_removeFullscreenHandlers(){gr.forEach((e=>{document.removeEventListener(e,this._onFullscreenChange)}))}}class Va extends Ma{constructor({position:e=Na.MAIN_LEFT,order:t=9999}={}){super({position:e,order:t}),this._onTimeUpdate=()=>{var e=this._video;e&&(this._currentTime=e.source.currentTime,this._updateDisplay())},this._onDurationChange=()=>{var e=this._video;e&&(this._duration=e.source.duration,this._updateDisplay())},this._onCustomTimeChange=e=>{this._currentTime=e.detail.time,this._updateDisplay()},this.element=document.createElement(lr),this._video=null,this._currentTime=0,this._duration=0}init(e,t){e=null==(e=e.mesh)?void 0:e.getTexture();var n=this.element;t=t.className,e&&e.isVideo()?(n.classList.add(t.VIDEO_TIME_DISPLAY),n.classList.remove(t.UNAVAILABLE),e.source.addEventListener(ir,this._onTimeUpdate),e.source.addEventListener(rr,this._onDurationChange),e.source.addEventListener(Vr,this._onCustomTimeChange),this._video=e,this._currentTime=e.source.currentTime,this._duration=e.source.duration,this._updateDisplay()):n.classList.add(t.UNAVAILABLE)}destroy(){var e=this._video;e&&(this.element.className="",e.source.removeEventListener(ir,this._onTimeUpdate),e.source.removeEventListener(rr,this._onDurationChange),e.source.removeEventListener(Vr,this._onCustomTimeChange),this._video=null)}_updateDisplay(){var e=this._currentTime,t=Math.floor(e/60),n=(e=(e=Math.floor(e-60*t))<10?"0"+e:e,this._duration),i=Math.floor(n/60);n=Math.floor(n-60*i),this.element.innerText=t+`:${e} / ${i}:`+(n<10?"0"+n:n)}}class Ha extends Ma{constructor({resetCamera:e=!0,position:t=Na.TOP_RIGHT,order:n=9999}={}){super({position:t,order:n}),this._onClick=()=>{var e,t,n,i=this._viewer,r=this.resetCamera;i&&r&&(({yaw:r=i.initialYaw,pitch:e=i.initialPitch,zoom:t=i.initialZoom,duration:n=500}=Zr(r)),i.camera.animateTo({yaw:r,pitch:e,zoom:t,duration:n}))},this._updatePie=({target:e})=>{var t=this._piePathEl,n=this._rangeCircleEl,i=(e=e.camera).getHorizontalFov(),r=e.getYawRange(e.zoom),a=.5*i,o=24*Math.PI;i=o*i/360,e=o*(e.yaw+a+90)/360,t.setAttribute("stroke-dasharray",i+" "+(o-i)),t.setAttribute("stroke-dashoffset",""+e),isFinite(r.min)&&isFinite(r.max)?(o=45*Math.PI,i=(Jr(r.min,-180,180)-a)/360,t=(Jr(r.max,-180,180)+a)/360,e=o*Math.abs(t-i),r=-o*(i-.25),n.setAttribute("stroke-dasharray",e+" "+(o-e)),n.setAttribute("stroke-dashoffset",""+r)):(n.setAttribute("stroke-dasharray",""),n.setAttribute("stroke-dashoffset",""))},this.element=document.createElement(lr),this.element.title="Reset view",this.resetCamera=e,this._createPieElements(),this._viewer=null}init(e,t){var n=this.element;e.initialized?this._updatePie({target:e}):e.once(br,this._updatePie),t=t.className.PIEVIEW_ROOT,n.classList.add(t),this.resetCamera&&n.addEventListener(Wi,this._onClick),e.on(Lr,this._updatePie),this._viewer=e}destroy(e){var t=this.element;t.removeEventListener(Wi,this._onClick),t.className="",e.off(br,this._updatePie),e.off(Lr,this._updatePie),this._viewer=null}_createPieElements(){var e=this.element,t=document.createElementNS(Hr,"svg"),n=(t.setAttribute("viewBox","0 0 48 48"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),document.createElementNS(Hr,"circle")),i=(n.setAttribute("stroke","currentColor"),n.setAttribute("fill","transparent"),n.setAttribute("cx","24"),n.setAttribute("cy","24"),n.setAttribute("r","12"),n.setAttribute("stroke-width","24"),t.appendChild(n),document.createElementNS(Hr,"circle"));i.setAttribute("stroke","currentColor"),i.setAttribute("fill","transparent"),i.setAttribute("cx","24"),i.setAttribute("cy","24"),i.setAttribute("r","22.5"),i.setAttribute("stroke-width","3"),t.appendChild(i),e.appendChild(t),this._piePathEl=n,this._rangeCircleEl=i}}class Ya extends Ma{constructor({position:e=Na.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._viewer;e&&e.vr.enter()},this.element=document.createElement(ur),this.element.title="Enter VR",this._viewer=null}init(e,t){let n=this.element,i=t.className;n.classList.add(i.UNAVAILABLE),n.classList.add(i.VR_BUTTON),n.classList.add(i.CONTROLS_BUTTON),e.vr.isAvailable().then((e=>{e&&n.classList.remove(i.UNAVAILABLE)})),n.addEventListener(Wi,this._onClick),this._viewer=e}destroy(){var e=this.element;e.className="",e.removeEventListener(Wi,this._onClick),this._viewer=null}}class za extends Ma{constructor({position:e=Na.MAIN_RIGHT,order:t=9999}={}){super({position:e,order:t}),this._onClick=()=>{var e=this._viewer;let t=this._controlBar;if(e&&t){let n=e.control.gyro;n.enabled?n.disable():ga.requestSensorPermission().then((e=>{e?n.enable():this.element.classList.add(t.className.UNAVAILABLE)}))}},this._updateStyle=()=>{var e=this.element,t=this._viewer,n=this._controlBar;t&&n&&(t=t.control.gyro,n=n.className,t.enabled?(e.classList.add(n.GYRO_ENABLED),e.classList.remove(n.GYRO_DISABLED)):(e.classList.add(n.GYRO_DISABLED),e.classList.remove(n.GYRO_ENABLED)))},this.element=document.createElement(lr),this.element.title="Toggle gyroscope control"}init(e,t){let n=this.element,i=t.className,r=(n.addEventListener(Wi,this._onClick),n.classList.add(i.CONTROLS_BUTTON),n.classList.add(i.UNAVAILABLE),()=>{n.classList.remove(i.UNAVAILABLE),e.control.gyro.on(Or.ENABLE,this._updateStyle),e.control.gyro.on(Or.DISABLE,this._updateStyle)});ta()?r():ga.isAvailable().then((e=>{e&&r()})),this._controlBar=t,this._viewer=e,this._updateStyle()}destroy(e){var t=this.element;e.control.gyro.off(Or.ENABLE,this._updateStyle),e.control.gyro.off(Or.DISABLE,this._updateStyle),t.removeEventListener(Wi,this._onClick),t.className="",this._controlBar=null,this._viewer=null}}class Wa{get enabled(){return!!this._targetEl}get hidden(){return this._controlBar.containerEl.classList.contains(this._hiddenClass)}get _hiddenClass(){return this._controlBar.className.HIDDEN}get _fixedClass(){return this._controlBar.className.FIXED}constructor(e,{initialDelay:t=3e3,delay:n=0,idleDelay:i=3e3}){this._onMouseEnter=()=>{this._isCursorInside=!0,this.show()},this._onMouseLeave=()=>{this._isCursorInside=!1,this._hideAfterDelay()},this._onMouseMove=()=>{this._isFullscreen&&this.showTemporaliy()},this._onHold=e=>{this._isGrabbing=!0,"mouse"===e.pointerType&&(this._isCursorInside=!0),window.addEventListener(Oi,this._onRelease),this.show()},this._onRelease=()=>{this._isGrabbing=!1,window.removeEventListener(Oi,this._onRelease),this._hideAfterDelay()},this._onVideoPlay=()=>{this._targetEl&&this._controlBar.containerEl.classList.remove(this._fixedClass)},this._onVideoPause=()=>{this._targetEl&&this._controlBar.containerEl.classList.add(this._fixedClass)},this._onFullscreenChange=()=>{this._isFullscreen=ea(),this._isFullscreen&&this._hideAfterDelay()},this._controlBar=e,this._initialDelay=t,this._delay=n,this._idleDelay=i,this._timer=-1,this._isCursorInside=!1,this._isGrabbing=!1,this._isFullscreen=!1,this._video=null,this._targetEl=null}enable(e){this._targetEl&&this.disable(e);var t=this._initialDelay,n=e.rootEl;this._targetEl=e.rootEl,this._timer=window.setTimeout((()=>{this.hide()}),t),n.addEventListener(xi,this._onHold),n.addEventListener(Vi,this._onMouseEnter),n.addEventListener(Mi,this._onMouseMove),n.addEventListener(Hi,this._onMouseLeave),this._addFullscreenHandlers(),(n=null==(t=e.mesh)?void 0:t.getTexture())&&n.isVideo()&&(n.isPaused()&&this._controlBar.containerEl.classList.add(this._fixedClass),n.source.addEventListener($i,this._onVideoPlay),n.source.addEventListener(er,this._onVideoPause),this._video=n)}disable(e){var t,n;this._targetEl&&(t=this._controlBar,e=e.rootEl,n=this._video,e.removeEventListener(xi,this._onHold),window.removeEventListener(Oi,this._onRelease),e.removeEventListener(Vi,this._onMouseEnter),e.removeEventListener(Mi,this._onMouseMove),e.removeEventListener(Hi,this._onMouseLeave),this._removeFullscreenHandlers(),window.clearTimeout(this._timer),t.containerEl.classList.remove(this._fixedClass),n&&(n.source.removeEventListener($i,this._onVideoPlay),n.source.removeEventListener(er,this._onVideoPause)),this._isCursorInside=!1,this._isGrabbing=!1,this._video=null,this._targetEl=null)}show(){this._clearHideTimer(),this._controlBar.containerEl.classList.remove(this._hiddenClass)}showTemporaliy(){this.show(),this._hideAfterDelay(this._idleDelay)}hide(){this._clearHideTimer(),this._controlBar.containerEl.classList.add(this._hiddenClass)}_clearHideTimer(){this._timer&&(window.clearTimeout(this._timer),this._timer=-1)}_hideAfterDelay(e=this._delay){this._isGrabbing||!this._isFullscreen&&this._isCursorInside||(this._clearHideTimer(),e<=0?this.hide():this._timer=window.setTimeout((()=>{this.hide()}),e))}_addFullscreenHandlers(){gr.forEach((e=>{document.addEventListener(e,this._onFullscreenChange)}))}_removeFullscreenHandlers(){gr.forEach((e=>{document.removeEventListener(e,this._onFullscreenChange)}))}}class Ka{constructor(){this._onKeyDown=e=>{var t=this._video;if(t){e.preventDefault(),e.stopPropagation();var n=t.source,i=null!=e.keyCode?_i[e.keyCode]:dr[e.key];switch(i){case"LEFT":case"RIGHT":return this._changeVideoTime(n,"RIGHT"===i);case"UP":case"DOWN":return this._changeVideoVolume(n,"UP"===i)}(32===e.keyCode||" "===e.key)&&this._toggleVideo(t)}}}enable(e,t){this._video=t,e.addEventListener(Yi,this._onKeyDown,!0)}disable(e){this._video=null,e.removeEventListener(Yi,this._onKeyDown,!0)}_changeVideoTime(e,t){e.currentTime+=t?5:-5,e.dispatchEvent(new CustomEvent(Vr,{detail:{time:e.currentTime}}))}_changeVideoVolume(e,t){t=t?.1:-.1,e.muted?e.volume=Qr(t,0,1):e.volume=Qr(e.volume+t,0,1),0<e.volume?e.muted=!1:e.muted=!0}_toggleVideo(e){e.isPaused()?e.source.play():e.source.pause()}}class qa{get rootEl(){return this._rootEl}get containerEl(){return this._containerEl}get backgroundEl(){return this._bgEl}get items(){return this._items}get customItems(){return this._customItems}constructor({autoHide:e,showBackground:t,clickToPlay:n=!0,keyboardControls:i=!0,progressBar:r=!0,playButton:a=!0,volumeButton:o=!0,fullscreenButton:s=!0,videoTime:l=!0,pieView:u=!0,vrButton:c=!0,gyroButton:h=!0,className:d={},customItems:f=[]}={}){this._onStaticClick=({target:e,isTouch:t})=>{var n=this._autoHider;t?n.enabled&&(n.hidden?n.showTemporaliy():n.hide()):this.clickToPlay&&(n=null==(t=e.mesh)?void 0:t.getTexture())&&n.isVideo()&&(n.isPaused()?n.source.play():n.source.pause())},this._onNewSrcLoad=({target:e})=>{let t=this._items;this._updateBackground(e),this._updateAutoHide(e),this._updateKeyboardHandler(e),Object.keys(t).forEach((n=>{t[n].forEach((t=>{t.destroy(e,this),t.init(e,this)}))}))},this.autoHide=e,this.showBackground=t,this.clickToPlay=n,this.keyboardControls=i,this.progressBar=r,this.playButton=a,this.volumeButton=o,this.fullscreenButton=s,this.videoTime=l,this.pieView=u,this.vrButton=c,this.gyroButton=h,this.className=Object.assign(Object.assign({},qa.DEFAULT_CLASS),d),n=null!=(t=d.CONTROLS_ROOT)?t:qa.DEFAULT_CLASS.CONTROLS_ROOT,this._rootEl=Kr(n),this._createPositionWrappers(),this._items=Object.keys(qa.POSITION).reduce(((e,t)=>(e[qa.POSITION[t]]=[],e)),{}),this._customItems=f,this._autoHider=new Wa(this,Zr(e)),this._videoControl=new Ka,f.forEach((e=>{this._items[e.position].push(e)}))}init(e){var t=e.rootEl,n=this._rootEl,i=this._createDefaultItems();this._updateBackground(e),this._updateAutoHide(e),this._updateKeyboardHandler(e),t.appendChild(n),this._addItem(e,i),this._addItem(e,this._customItems),e.on(Sr,this._onNewSrcLoad),e.on(Pr,this._onStaticClick)}destroy(e){var t=e.rootEl,n=this._rootEl;let i=this._items;n.parentElement===t&&t.removeChild(n),Object.keys(i).forEach((t=>{i[t].forEach((t=>{t.destroy(e,this)})),i[t]=[]})),this._clearItemElements(),this._autoHider.disable(e),this._videoControl.disable(t),e.off(Sr,this._onNewSrcLoad),e.off(Pr,this._onStaticClick)}_addItem(e,t){for(let o of t){var n,i=this._items[o.position],r=this._wrapperEl[o.position],a=((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n]))return n;return-1})(i,(e=>e.order>o.order));0<=a?(n=i[a].element,i.splice(a,0,o),r.insertBefore(o.element,n)):(i.push(o),r.appendChild(o.element)),o.init(e,this)}}_createPositionWrappers(){var e=Object.assign(Object.assign({},qa.DEFAULT_CLASS),this.className),t=this._rootEl,n=Kr(e.CONTROLS_BG),i=Kr(e.CONTROLS_FLOAT_LEFT),r=Kr(e.CONTROLS_FLOAT_RIGHT),a=(t.appendChild(i),t.appendChild(r),Kr(e.CONTROLS_MAIN)),o=Kr(e.CONTROLS_TOP),s=Kr(e.CONTROLS_BOTTOM),l=Kr(e.CONTROLS_MID),u=Kr(e.CONTROLS_LEFT);e=Kr(e.CONTROLS_RIGHT),l.appendChild(u),l.appendChild(e),a.appendChild(n),a.appendChild(o),a.appendChild(l),a.appendChild(s),t.appendChild(a),this._bgEl=n,this._containerEl=a,this._wrapperEl={[qa.POSITION.MAIN_TOP]:o,[qa.POSITION.MAIN_LEFT]:u,[qa.POSITION.MAIN_RIGHT]:e,[qa.POSITION.MAIN_BOTTOM]:s,[qa.POSITION.TOP_LEFT]:i,[qa.POSITION.TOP_RIGHT]:r}}_clearItemElements(){Object.keys(qa.POSITION).map((e=>qa.POSITION[e])).map((e=>this._wrapperEl[e])).forEach((e=>{for(;e.firstChild;)e.removeChild(e.firstChild)}))}_updateAutoHide(e){var t=this.autoHide,n=this._autoHider;null!=t?t?n.enable(e):n.disable(e):(t=null==(t=e.mesh)?void 0:t.getTexture())&&t.isVideo()?n.enable(e):n.disable(e)}_updateBackground(e){var t=this._bgEl,n=this.showBackground,i=null!=(i=this.className.HIDDEN)?i:qa.DEFAULT_CLASS.HIDDEN;null!=n?n?t.classList.remove(i):t.classList.add(i):(e=null==(n=e.mesh)?void 0:n.getTexture())&&e.isVideo()?t.classList.remove(i):t.classList.add(i)}_updateKeyboardHandler(e){var t=e.rootEl,n=this._videoControl;e=null==(e=e.mesh)?void 0:e.getTexture(),this.keyboardControls&&e&&e.isVideo()?n.enable(t,e):n.disable(t)}_createDefaultItems(){var e=[];return this.progressBar&&e.push(new Ba(Zr(this.progressBar))),this.playButton&&e.push(new Ua(Zr(this.playButton))),this.volumeButton&&e.push(new ja(Zr(this.volumeButton))),this.gyroButton&&e.push(new za(Zr(this.gyroButton))),this.vrButton&&e.push(new Ya(Zr(this.vrButton))),this.fullscreenButton&&e.push(new Ga(Zr(this.fullscreenButton))),this.videoTime&&e.push(new Va(Zr(this.videoTime))),this.pieView&&e.push(new Ha(Zr(this.pieView))),e}}qa.DEFAULT_CLASS=Oa,qa.POSITION=Na;class Qa{constructor({src:e,video:t=!1}){this.src=e,this.video=t}updateCamera(e){e.resetRange()}updateControl(e){e.ignoreZoomScale=!1}}class Xa{constructor(){this.needsUpdate=!0}destroy(e){}}class Ja extends xa{constructor(e,t){super(),this.vao=e,this.program=t}destroy(e){e.releaseVAO(this.vao),e.releaseShaderResources(this.program)}getTexture(){return this.program.uniforms.uTexture.texture}}class Za{constructor(e,t,n,i){this.program=e.createProgram(t,n),this.uniforms=i,this.uniformLocations=e.getUniformLocations(this.program,i)}}class $a{constructor(e,t){this.data=e,this.itemSize=t,this.count=e.length/t}}class eo{constructor(e,t,n){this.vertices=new $a(new Float32Array(e),3),this.indicies=new $a(new Uint16Array(t),1),this.uvs=new $a(new Float32Array(n),2)}}class to extends Xa{constructor(e,t){super(),this.texture=t,this._webglTexture=e.createWebGLTexture(t)}destroy(e){this.texture.destroy(),e.deleteTexture(this._webglTexture)}update(e,t,n){var i=this.texture,r=i.isVideo();e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.uniform1i(t,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._webglTexture),!r&&n?e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,i.source):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i.source),r||(this.needsUpdate=!1)}}var no="#define GLSLIFY 1\nuniform sampler2D uTexture;varying highp vec2 vUV;void main(){gl_FragColor=texture2D(uTexture,vUV.st);}";class io extends eo{constructor(){var e=-.5*Math.PI,t=[],n=[],i=[];let r,a;for(r=0;r<=60;r++){var o=(r/60-.5)*Math.PI,s=Math.sin(o),l=Math.cos(o);for(a=0;a<=60;a++){var u=2*(a/60-.5)*Math.PI+e,c=Math.sin(u),h=(u=Math.cos(u)*l,s),d=(c*=l,a/60),f=r/60;t.push(d,f),n.push(u,h,c),60!==a&&60!==r&&(d=61*r+a,i.push(d,d+1,f=d+60+1,f,d+1,f+1))}}super(n,i,t)}}class ro extends Qa{constructor(e){super(e)}createMesh(e,t){t={uTexture:new to(e,t)};var n=new io;return t=new Za(e,"#define GLSLIFY 1\nattribute vec3 position;attribute vec2 uv;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying highp vec2 vUV;void main(){vUV=uv;gl_Position=uPMatrix*uMVMatrix*vec4(position,1.0);}",no,t),e=e.createVAO(n,t),new Ja(e,t)}}class ao extends Xa{constructor(e){super(),this.val=e}update(e,t){e.uniform1f(t,this.val),this.needsUpdate=!1}}class oo extends Xa{constructor(e){super(),this.val=e}update(e,t){e.uniform4fv(t,this.val.reduce(((e,t)=>[...e,...t]),[])),this.needsUpdate=!1}}(class e extends Qa{constructor(e){super(e),this._mode=e.mode}createMesh(t,n){let i,r;r=this._mode===e.MODE.LEFT_RIGHT?(i=[.5,1,0,0],[.5,1,.5,0]):(i=[1,.5,0,0],[1,.5,0,.5]),n={uTexture:new to(t,n),uEye:new ao(0),uTexScaleOffset:new oo([i,r])};var a=new io;return n=new Za(t,"#define GLSLIFY 1\nattribute vec3 position;attribute vec2 uv;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform vec4 uTexScaleOffset[2];uniform float uEye;varying highp vec2 vUV;void main(){vec4 scaleOffset=uTexScaleOffset[int(uEye)];vUV=uv.xy*scaleOffset.xy+scaleOffset.zw;gl_Position=uPMatrix*uMVMatrix*vec4(position,1.0);}",no,n),t=t.createVAO(a,n),new Ja(t,n)}}).MODE={LEFT_RIGHT:"left_right",TOP_BOTTOM:"top_bottom"};let so=0,lo=1,uo=2;t.a=class{constructor(e,t){this.video=e.video,this.viewer=null,this.container=e.container,this.autoPlay=null==e.autoPlay||e.autoPlay,this.viewerContainer=null,this.viewOptions=t||{},this.viewerCanvas=null,this.attachVr()}get vrViewer(){return{animateTo:this.animateTo.bind(this),enterVR:this.enterVR.bind(this),exitVR:this.exitVR.bind(this),gyro:this.gyro.bind(this),vr:this.vr.bind(this)}}attachVr(){return this.video&&this.container?(this._createViewerContainer(),this._loadVr(),so):lo}_loadVr(){if(!this.viewerContainer)return uo;this.container.classList.add("vr-container"),this.viewer=new ka("#"+this.viewerContainer.id,{...this.viewOptions,gyro:new ga(!0),plugins:[new qa({autoHide:!1,showBackground:!1,progressBar:!1,playButton:!1,volumeButton:!1,fullscreenButton:!1,videoTime:!1,pieView:{order:0},gyroButton:{position:"top-right",order:1},vrButton:{position:"top-right",order:2}})]})}loadVideo(){this.viewer.load(new ro({src:this.video,video:{autoplay:this.autoPlay}}))}_createViewerContainer(){this.viewerContainer=document.createElement("div"),this.viewerContainer.className="view360-container",this.viewerContainer.id=this.container.id+"_viewer",this.viewerCanvas=document.createElement("canvas"),this.viewerCanvas.className="view360-canvas",this.viewerContainer.appendChild(this.viewerCanvas),this.viewerContainer.appendChild(this.video),this.video.style.zIndex="-1",this.container.insertBefore(this.viewerContainer,this.container.firstChild)}animateTo(e){this.viewer.camera.animateTo(e)}gyro(){return this.viewer.gyro.isAvailable=async()=>ga.isAvailable(),this.viewer.gyro.requestSensorPermission=async()=>ga.requestSensorPermission(),this.viewer.gyro}vr(){return this.viewer.vr}enterVR(){this.video.style.zIndex="-1",this.viewerContainer.querySelector(".view360-controls").style.display="block",this.container.classList.add("vr-container")}exitVR(){this.video.style.zIndex="1",this.viewerContainer.querySelector(".view360-controls").style.display="none",this.container.classList.remove("vr-container")}destroy(){this.video&&this.video.remove&&this.video.remove(),this.viewerContainer&&this.viewerContainer.removeChild(this.viewerCanvas),this.container&&this.container.removeChild(this.viewerContainer),this.viewer&&this.viewer.destroy(),this.viewer=null,this.viewerContainer=null}}},,function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,function(e,t,n){n.d(t,"a",(function(){return r})),t=n(23);var i=n.n(t);function r(){return i()('/*! WebPlayer built @6/25/2024, 8:30:15 PM */!function(r){var n={};function i(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,i),t.l=!0,t)).exports}i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t){e.exports={DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNEL:1,H264AUD:[0,0,0,1,9,224],H265AUD:[0,0,0,1,70,1,80],DEF_AAC:"aac",DEF_MP3:"mp3",DEF_H265:"h265",DEF_HEVC:"hevc",DEF_H264:"h264",DEF_AVC:"avc",CODEC_OFFSET_TABLE:["hevc","h265","avc","h264","aac","mp3"]}},function(e,t,r){r=[r(3)],t=function(e){var r={},n=e.memoize(function(e){return null!==navigator.userAgent.toLowerCase().match(e)});function t(e){return function(){return n(e)}}var i=r.isInt=function(e){return parseFloat(e)%1==0},o=(r.isFlashSupported=function(){var e=r.flashVersion();return e&&e>=__FLASH_VERSION__},r.isFF=t(/firefox/i),r.isIPod=t(/iP(hone|od)/i),r.isIPad=t(/iPad/i),r.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\\.0\\.\\d* Safari/i),r.isOSX=t(/Mac OS X/i),r.isEdge=t(/\\sedge\\/\\d+/i),r.isIETrident=function(e){return!!r.isEdge()||(e?(e=parseFloat(e).toFixed(1),n(new RegExp("trident/.+rv:\\\\s*"+e,"i"))):n(/trident/i))}),a=r.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),n(new RegExp("msie\\\\s*"+e,"i"))):n(/msie/i)},s=t(/chrome/i),u=(r.isChrome=function(){return s()&&!r.isEdge()},r.isChrome66=function(){var e=window.navigator.userAgent.toLowerCase().match(/chrome\\/([\\d.]+)/);return!!(this.isChrome()&&e&&e[1]&&66<=parseInt(e[1]))},r.isIE=function(e){return e?(11<=(e=parseFloat(e).toFixed(1))?o:a)(e):a()||o()},r.isSafari=function(){return n(/safari/i)&&!n(/chrome/i)&&!n(/chromium/i)&&!n(/android/i)},r.isIOS=function(e){return n(e?new RegExp("iP(hone|ad|od).+\\\\s(OS\\\\s"+e+"|.*\\\\sVersion/"+e+")","i"):/iP(hone|ad|od)/i)}),l=(r.isAndroidNative=function(e){return l(e,!0)},r.isAndroid=function(e,t){return!(t&&n(/chrome\\/[123456789]/i)&&!n(/chrome\\/18/))&&(e?(i(e)&&!/\\./.test(e)&&(e+="."),n(new RegExp("Android\\\\s*"+e,"i"))):n(/Android/i))});return r.isMobile=function(){return u()||l()},r.isWeChat=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},r.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},r.flashVersion=function(){if(r.isAndroid())return 0;var e,t=navigator.plugins;if(t&&(e=t["Shockwave Flash"])&&e.description)return parseFloat(e.description.replace(/\\D+(\\d+\\.?\\d*).*/,"$1"));if(void 0===window.ActiveXObject)return 0;try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\\s*,\\s*/,"."))}catch(e){return 0}return e},r.getBrowserInfo=function(){var e,t=window.navigator.userAgent.toLowerCase();return this.isIE()?t.match(/msie ([\\d.]+)/)?"IE-"+t.match(/msie ([\\d.]+)/)[1]:"IE-unknown":this.isChrome()?(e=t.match(/chrome\\/([\\d.]+)/))&&1<e.length?"Chrome-"+e[1]:"Chrome-unknown":this.isFF()?"Firefox-"+t.match(/firefox\\/([\\d.]+)/)[1]:this.isSafari()?"Safari"+((e=t.match(/version\\/([\\d.]+)/))&&e.length?"-"+t.match(/version\\/([\\d.]+)/)[1]:""):u()?"ios":l()?"android":"other"},r.isPoorIE=function(){return this.isIE()&&(a(8)||a(7)||a(6)||document.documentMode&&document.documentMode<=8)},r.getChromeVersion=function(){var e=window.navigator.userAgent.toLowerCase();return this.isChrome()&&(e=e.match(/chrome\\/([\\d.]+)/))&&1<e.length?e[1]:-1},r.browserJudge=function(){let e=window.document;let r=window.navigator.userAgent.toLowerCase(),t=e.documentMode,n=window.chrome||!1,i={agent:r,isIE:/msie/.test(r),isGecko:0<r.indexOf("gecko")&&r.indexOf("like gecko")<0,isWebkit:0<r.indexOf("webkit"),isStrict:"CSS1Compat"===e.compatMode,supportSubTitle:function(){return"track"in e.createElement("track")},supportScope:function(){return"scoped"in e.createElement("style")},ieVersion:function(){try{return r.match(/msie ([\\d.]+)/)[1]||0}catch(e){return t}},operaVersion:function(){try{return window.opera?r.match(/opera.([\\d.]+)/)[1]:0<r.indexOf("opr")?r.match(/opr\\/([\\d.]+)/)[1]:void 0}catch(e){return 0}},versionFilter:function(){if(1!==arguments.length||"string"!=typeof arguments[0])return 1===arguments.length?arguments[0]:0;var e=arguments[0],t=e.indexOf(".");if(0<t){t=e.indexOf(".",t+1);if(-1!==t)return e.substr(0,t)}return e}};try{i.type=i.isIE?"IE":window.opera||0<r.indexOf("opr")?"Opera":0<r.indexOf("chrome")?"Chrome":0<r.indexOf("safari")||window.openDatabase?"Safari":0<r.indexOf("firefox")?"Firefox":"unknow",i.version="IE"===i.type?i.ieVersion():"Firefox"===i.type?r.match(/firefox\\/([\\d.]+)/)[1]:"Chrome"===i.type?r.match(/chrome\\/([\\d.]+)/)[1]:"Opera"===i.type?i.operaVersion():"Safari"===i.type?r.match(/version\\/([\\d.]+)/)[1]:"0",i.shell=function(){var e,t;return 0<r.indexOf("maxthon")?(i.version=r.match(/maxthon\\/([\\d.]+)/)[1]||i.version,"傲游浏览器"):0<r.indexOf("qqbrowser")?(i.version=r.match(/qqbrowser\\/([\\d.]+)/)[1]||i.version,"QQ浏览器"):0<r.indexOf("se 2.x")?"搜狗浏览器":n&&"Opera"!==i.type?(t=window.external,e=window.clientInformation.languages,t&&"LiebaoGetVersion"in t?"猎豹浏览器":0<r.indexOf("bidubrowser")?(i.version=r.match(/bidubrowser\\/([\\d.]+)/)[1]||r.match(/chrome\\/([\\d.]+)/)[1],"百度浏览器"):i.supportSubTitle()&&void 0===e?(t=Object.keys(n.webstore).length,0 in window,1<t?"360极速浏览器":"360安全浏览器"):"Chrome"):i.type},i.name=i.shell(),i.version=i.versionFilter(i.version)}catch(e){}return[i.type,i.version]},r.isSupportWASM=function(){var e=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})();if(!1===e)return!1;if(!0===e){var e=r.browserJudge(),t=e[0],e=e[1];if("Chrome"===t&&e<85)return!1;if(0<=t.indexOf("360"))return!1;if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&13<e)return!1}return!0},r.isPictureInpicture=()=>document.pictureInPictureEnabled,r}.apply(t,r);void 0!==t&&(e.exports=t)},function(e,t,r){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,r){t=function(){function u(e){return null==e?b.identity:b.isFunction(e)?e:b.property(e)}function e(a){return function(r,n,i){var o={};return n=u(n),M(r,function(e,t){t=n.call(i,e,t,r);a(o,t,e)}),o}}function a(){}var s={},i=Array.prototype,t=Object.prototype,r=Function.prototype,l=i.slice,o=i.concat,n=t.toString,c=t.hasOwnProperty,f=i.map,d=i.reduce,m=i.forEach,h=i.filter,p=i.every,E=i.some,y=i.indexOf,t=Array.isArray,v=Object.keys,A=r.bind,b=function(e){return e instanceof b?e:this instanceof b?void 0:new b(e)},M=b.each=b.forEach=function(e,t,r){if(null!=e)if(m&&e.forEach===m)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(t.call(r,e[n],n,e)===s)return}else for(var o=b.keys(e),n=0,i=o.length;n<i;n++)if(t.call(r,e[o[n]],o[n],e)===s)return;return e},w=(b.map=b.collect=function(e,n,i){var o=[];if(null!=e){if(f&&e.map===f)return e.map(n,i);M(e,function(e,t,r){o.push(n.call(i,e,t,r))})}return o},b.reduce=b.foldl=b.inject=function(e,n,i,o){var a=2<arguments.length;if(null==e&&(e=[]),d&&e.reduce===d)return o&&(n=b.bind(n,o)),a?e.reduce(n,i):e.reduce(n);if(M(e,function(e,t,r){a?i=n.call(o,i,e,t,r):(i=e,a=!0)}),a)return i;throw new TypeError("Reduce of empty array with no initial value")},b.find=b.detect=function(e,n,i){var o;return w(e,function(e,t,r){if(n.call(i,e,t,r))return o=e,!0}),o},b.filter=b.select=function(e,n,i){var o=[];if(null!=e){if(h&&e.filter===h)return e.filter(n,i);M(e,function(e,t,r){n.call(i,e,t,r)&&o.push(e)})}return o},b.reject=function(e,n,i){return b.filter(e,function(e,t,r){return!n.call(i,e,t,r)},i)},b.compact=function(e){return b.filter(e,b.identity)},b.every=b.all=function(e,n,i){n=n||b.identity;var o=!0;return null==e?o:p&&e.every===p?e.every(n,i):(M(e,function(e,t,r){if(!(o=o&&n.call(i,e,t,r)))return s}),!!o)},b.some=b.any=function(e,n,i){n=n||b.identity;var o=!1;return null==e?o:E&&e.some===E?e.some(n,i):(M(e,function(e,t,r){if(o=o||n.call(i,e,t,r))return s}),!!o)}),w=(b.size=function(e){return null==e?0:(e.length===+e.length?e:b.keys(e)).length},b.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},b.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},b.before=function(e,t){var r;return function(){return 0<--e&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},b.groupBy=e(function(e,t,r){b.has(e,t)?e[t].push(r):e[t]=[r]}),b.indexBy=e(function(e,t,r){e[t]=r}),b.sortedIndex=function(e,t,r,n){for(var i=(r=u(r)).call(n,t),o=0,a=e.length;o<a;){var s=o+a>>>1;r.call(n,e[s])<i?o=1+s:a=s}return o},b.some=b.any=function(e,n,i){n=n||b.identity;var o=!1;return null==e?o:E&&e.some===E?e.some(n,i):(M(e,function(e,t,r){if(o=o||n.call(i,e,t,r))return s}),!!o)}),g=(b.contains=b.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=b.values(e)),0<=b.indexOf(e,t))},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matches(t))},b.findWhere=function(e,t){return b.find(e,b.matches(t))},b.max=function(e,n,i){var o,a;return!n&&b.isArray(e)&&e[0]===+e[0]&&e.length<65535?Math.max.apply(Math,e):(a=o=-1/0,M(e,function(e,t,r){t=n?n.call(i,e,t,r):e;a<t&&(o=e,a=t)}),o)},b.difference=function(e){var t=o.apply(i,l.call(arguments,1));return b.filter(e,function(e){return!b.contains(t,e)})},b.without=function(e){return b.difference(e,l.call(arguments,1))},b.indexOf=function(e,t,r){if(null!=e){var n=0,i=e.length;if(r){if("number"!=typeof r)return e[n=b.sortedIndex(e,t)]===t?n:-1;n=r<0?Math.max(0,i+r):r}if(y&&e.indexOf===y)return e.indexOf(t,r);for(;n<i;n++)if(e[n]===t)return n}return-1},b.bind=function(r,n){var i,o;if(A&&r.bind===A)return A.apply(r,l.call(arguments,1));if(b.isFunction(r))return i=l.call(arguments,2),o=function(){if(!(this instanceof o))return r.apply(n,i.concat(l.call(arguments)));a.prototype=r.prototype;var e=new a,t=(a.prototype=null,r.apply(e,i.concat(l.call(arguments))));return Object(t)===t?t:e};throw new TypeError},b.partial=function(i){var o=l.call(arguments,1);return function(){for(var e=0,t=o.slice(),r=0,n=t.length;r<n;r++)t[r]===b&&(t[r]=arguments[e++]);for(;e<arguments.length;)t.push(arguments[e++]);return i.apply(this,t)}},b.once=b.partial(b.before,2),b.memoize=function(t,r){var n={};return r=r||b.identity,function(){var e=r.apply(this,arguments);return b.has(n,e)?n[e]:n[e]=t.apply(this,arguments)}},b.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},b.defer=function(e){return b.delay.apply(b,[e,1].concat(l.call(arguments,1)))},b.throttle=function(r,n,i){function o(){c=!1===i.leading?0:b.now(),l=null,u=r.apply(a,s),a=s=null}var a,s,u,l=null,c=0;i=i||{};return function(){var e=b.now(),t=(c||!1!==i.leading||(c=e),n-(e-c));return a=this,s=arguments,t<=0?(clearTimeout(l),l=null,c=e,u=r.apply(a,s),a=s=null):l||!1===i.trailing||(l=setTimeout(o,t)),u}},b.keys=function(e){if(!b.isObject(e))return[];if(v)return v(e);var t,r=[];for(t in e)b.has(e,t)&&r.push(t);return r},b.invert=function(e){for(var t={},r=b.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},b.defaults=function(r){return M(l.call(arguments,1),function(e){if(e)for(var t in e)void 0===r[t]&&(r[t]=e[t])}),r},b.extend=function(r){return M(l.call(arguments,1),function(e){if(e)for(var t in e)r[t]=e[t]}),r},b.pick=function(t){var r={},e=o.apply(i,l.call(arguments,1));return M(e,function(e){e in t&&(r[e]=t[e])}),r},b.omit=function(e){var t,r={},n=o.apply(i,l.call(arguments,1));for(t in e)b.contains(n,t)||(r[t]=e[t]);return r},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.isArray=t||function(e){return"[object Array]"==n.call(e)},b.isObject=function(e){return e===Object(e)},M(["Arguments","Function","String","Number","Date","RegExp"],function(t){b["is"+t]=function(e){return n.call(e)=="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return!(!e||!b.has(e,"callee"))}),b.isFunction=function(e){return"function"==typeof e},b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!=+e},b.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==n.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return c.call(e,t)},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.property=function(t){return function(e){return e[t]}},b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matches=function(r){return function(e){if(e!==r)for(var t in r)if(r[t]!==e[t])return!1;return!0}},b.now=Date.now||function(){return(new Date).getTime()},b.result=function(e,t){if(null!=e)return t=e[t],b.isFunction(t)?t.call(e):t},0);return b.uniqueId=function(e){var t=++g+"";return e?e+t:t},b}.apply(t,[]);void 0!==t&&(e.exports=t)},function(e,t,r){r.r(t);let n={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},i={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"open context failed",OPEN_MEDIA_FAILED:"failed to open media",DOWNLOAD_DATA_FAILED:"download data failed"},o={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError",DOWNLOAD_FAILED:"downloadFailed"};let m={WASM_LOAD_FINISH:0,DECODE_FINISH:1,DEOCDE_INIT_FINISH:2,SET_FRAME:3,WASM_POST_RUN:11,DEMUXER_INIT_FINISH:12,POST_DEMUXER_INFO:13,DEMUXER_FINISH:14,DEMUXER_ERROR:20,BATCH_FINISH_FLAG:21,RELEASE_DECODE_FINISH:22,WAMS_ERROR:111},a={INIT_DECODER:0,DECODE_VIDEO:1,RETURN_VIDEO_BUFFER:2,INIT_DEMUXER:11,DEMUXER_BOX:12,GET_DEMUXER_INFO:13,RELEASE_DECODE:14,RELEASE_DEMUXER:15,FINISH_FLAG:16,LOAD_WAMS_JS:111};var t=r(1),s=r.n(t),t=r(2),u=r.n(t),t=r(0),h=r.n(t);self.Module={onRuntimeInitialized:function(){self.decoder&&self.decoder.onWasmLoaded()},postRun:function(){self.decoder&&self.decoder.onPostRun()},onAbort:function(e){self.postMessage({t:m.WAMS_ERROR,data:{msg:""+i.WASM_ERROR+e,errorType:n.NOT_SUPPORT,event:o.WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}},self.wasmPath=null;self.onmessage=e=>{var t=e["data"];switch(t.t){case a.INIT_DECODER:self.decoder.initDecoder(t.data);break;case a.DECODE_VIDEO:self.decoder.decodeVideo(t);break;case a.RETURN_VIDEO_BUFFER:self.decoder.returnVideoBuffer(t.f);break;case a.INIT_DEMUXER:self.decoder.initDemuxer();break;case a.DEMUXER_BOX:self.decoder.demuxCore(t);break;case a.GET_DEMUXER_INFO:self.decoder.getReadLayer(t);break;case a.RELEASE_DECODE:self.decoder.release(t);break;case a.RELEASE_DEMUXER:self.decoder.releaseTsDemuxer();case a.LOAD_WAMS_JS:self.decoder.loadJs(t.pathUrl,t.isSafari);break;case a.FINISH_FLAG:self.postMessage({t:m.BATCH_FINISH_FLAG})}},self.decoder=new class{constructor(){this.wasmLoaded=!1,this.videoCallback=null,this.vcodecerPtr=null,this.playerData=null,this.videoFrameBuffer=[],this.time=null,this.decodeTime=null,this.oneScondTime=(new Date).getTime(),this.frameRate=null,this.naluLayer={vps:null,sps:null,pps:null,sei:null},this.vlcLayer={vlc:null},this.offsetDemux=null,this.mediaAttr={},this.extensionInfo={vWidth:0,vHeight:0},this.isReadDemuxData=!1,this.isRelease=!1}initDecoder(e){this.isRelease=!1,this.playerData=e,this.vcodecerPtr=Module.cwrap("registerPlayer","number",["string","string"])(e.token,e.playerVersion);let f=this;this.videoCallback=Module.addFunction(function(e,t,r,n,i,o,a,s,u){e=Module.HEAPU8.subarray(e,e+n*s),t=Module.HEAPU8.subarray(t,t+i*s/2),r=Module.HEAPU8.subarray(r,r+o*s/2);0<self.decoder.videoFrameBuffer.length&&self.decoder.videoFrameBuffer[0].y.length<n*s&&(self.decoder.videoFrameBuffer=[]);let l=null,c;0<self.decoder.videoFrameBuffer.length?((l={t:m.DECODE_FINISH,y:self.decoder.videoFrameBuffer[0].y,u:self.decoder.videoFrameBuffer[0].u,v:self.decoder.videoFrameBuffer[0].v,height:s,width:n,ptsSec:+u/1e3,stride_y:n,stride_u:i,stride_v:o}).y.set(e),l.u.set(t),l.v.set(r),self.decoder.videoFrameBuffer.shift()):l={t:m.DECODE_FINISH,y:new Uint8Array(e),u:new Uint8Array(t),v:new Uint8Array(r),height:s,width:n,ptsSec:+u/1e3,stride_y:n,stride_u:i,stride_v:o},f.frameRate++,f.oneScondTime&&1e3<(new Date).getTime()-f.oneScondTime&&(c=JSON.parse(JSON.stringify(f.frameRate)),f.frameRate=0,f.oneScondTime=(new Date).getTime(),self.postMessage({t:m.SET_FRAME,frameRate:c,decodeTime:parseInt(1e3/c)})),self.postMessage(l,[l.y.buffer,l.u.buffer,l.v.buffer])},"viiiiiiiid"),Module.cwrap("setCodecType","number",["number","number","number"])(this.vcodecerPtr,e.videoCodec,this.videoCallback),Module.cwrap("initializeDecoder","number",["number"])(this.vcodecerPtr),self.postMessage({t:m.DEOCDE_INIT_FINISH})}decodeVideo(e){var{nalBuf:e,pts:t,flushDecoder:r}=e,n=Module._malloc(e.length),t=(Module.HEAP8.set(e,n),parseInt(1e3*t));Module.cwrap("decodeCodecContext","number",["number","number","number","number","number"])(this.vcodecerPtr,n,e.length,t,r),Module._free(n)}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:m.WASM_LOAD_FINISH}))}returnVideoBuffer(e){this.videoFrameBuffer.length<10&&this.videoFrameBuffer.push(e)}loadJs(e,t){var r=u.a.simd(),n=s.a.isChrome()&&s.a.isMobile();let i=e+"missile.js";navigator.userAgent.toLocaleLowerCase().includes("iphone")?i=e+"missile-min.js":!r||t||n?n&&(i=e+"missile-min-simd.js"):i=e+"missile-simd.js",self.wasmPath=e,self.importScripts(i)}onPostRun(){self.postMessage({t:m.WASM_POST_RUN})}initDemuxer(){Module.cwrap("initTsMissile","number",[])(),Module.cwrap("initializeDemuxer","number",[])(),self.postMessage({t:m.DEMUXER_INIT_FINISH})}releaseTsDemuxer(){Module.cwrap("exitTsMissile","number",[])()}releaseOffset(){void 0!==this.offsetDemux&&null!==this.offsetDemux&&(Module._free(this.offsetDemux),this.offsetDemux=null)}demuxBox(e){var{d:e,isLive:t}=e,e=(this.offsetDemux=Module._malloc(e.length),Module.HEAP8.set(e,this.offsetDemux),Module.cwrap("demuxBox","number",["number","number","number"])(this.offsetDemux,e.length,t));0<=e?(this.setMediaInfo(),this.setExtensionInfo(),postMessage({t:m.DEMUXER_FINISH,mediaAttr:this.mediaAttr,extensionInfo:this.extensionInfo})):postMessage({t:m.DEMUXER_ERROR,type:"demux",message:"demux error"}),this.releaseOffset()}setMediaInfo(){var e=Module.cwrap("getMediaInfo","number",[])(),t=Module.HEAPU32[e/4],r=Module.HEAPU32[e/4+1],n=Module.HEAPF64[e/8+1],i=Module.HEAPF64[e/8+1+1],o=Module.HEAPF64[e/8+1+1+1],a=Module.HEAPF64[e/8+1+1+1+1],e=Module.HEAPU32[e/4+2+2+2+2+2],n=(this.mediaAttr.vFps=n,this.mediaAttr.vGop=e,this.mediaAttr.vDuration=i,this.mediaAttr.aDuration=o,this.mediaAttr.duration=a,Module.cwrap("getAudioCodecID","number",[])()),e=(0<=n?(this.mediaAttr.aCodec=h.a.CODEC_OFFSET_TABLE[n],this.mediaAttr.sampleRate=0<t?t:h.a.DEFAULT_SAMPLERATE,this.mediaAttr.sampleChannel=0<=r?r:h.a.DEFAULT_CHANNEL):(this.mediaAttr.sampleRate=0,this.mediaAttr.sampleChannel=0,this.mediaAttr.audioNone=!0),Module.cwrap("getVideoCodecID","number",[])());0<=e&&(this.mediaAttr.vCodec=h.a.CODEC_OFFSET_TABLE[e])}setExtensionInfo(){var e=Module.cwrap("getExtensionInfo","number",[])(),t=Module.HEAPU32[e/4],e=Module.HEAPU32[e/4+1];this.extensionInfo.vWidth=t,this.extensionInfo.vHeight=e}demuxCore(e){this.releaseOffset(),this.refreshDemuxer(),this.demuxBox(e)}refreshDemuxer(){this.releaseTsDemuxer(),this.initDemuxer()}getReadLayer(){var e=Module.cwrap("getPacket","number",[])(),t=Module.HEAPU32[e/4],r=Module.HEAPU32[e/4+1],n=Module.HEAPF64[e/8+1],i=Module.HEAPF64[e/8+1+1],o=Module.HEAPU32[e/4+1+1+2+2];if(0==t||1==t){var e=Module.HEAPU32[e/4+1+1+2+2+1],e=Module.HEAPU8.subarray(e,e+r),a=new Uint8Array(e),s=Module.cwrap("getSPSLen","number",[])(),u=Module.cwrap("getSPS","number",[])();if(!(s<0)){var l,u=Module.HEAPU8.subarray(u,u+s),s=(this.naluLayer.sps=new Uint8Array(s),this.naluLayer.sps.set(u,0),Module.cwrap("getPPSLen","number",[])()),c=Module.cwrap("getPPS","number",[])(),c=Module.HEAPU8.subarray(c,c+s),s=(this.naluLayer.pps=new Uint8Array(s),this.naluLayer.pps.set(c,0),Module.cwrap("getSEILen","number",[])()),f=Module.cwrap("getSEI","number",[])(),f=Module.HEAPU8.subarray(f,f+s),s=(this.naluLayer.sei=new Uint8Array(s),this.naluLayer.sei.set(f,0),Module.cwrap("getVLCLen","number",[])()),d=Module.cwrap("getVLC","number",[])(),d=Module.HEAPU8.subarray(d,d+s);this.vlcLayer.vlc=new Uint8Array(s),this.vlcLayer.vlc.set(d,0),this.mediaAttr.vCodec==h.a.DEF_HEVC||this.mediaAttr.vCodec==h.a.DEF_H265?(s=Module.cwrap("getVPSLen","number",[])(),l=Module.cwrap("getVPS","number",[])(),l=Module.HEAPU8.subarray(l,l+s),this.naluLayer.vps=new Uint8Array(s),this.naluLayer.vps.set(l,0),Module._free(l),l=null):this.mediaAttr.vCodec!=h.a.DEF_AVC&&(this.mediaAttr.vCodec,h.a.DEF_H264);try{postMessage({t:m.POST_DEMUXER_INFO,type:t,size:r,ptime:n,dtime:i,keyframe:o,src:a,layer:{nalu:this.naluLayer,vlc:this.vlcLayer}},[a.buffer,this.vlcLayer.vlc.buffer]),this.getReadLayer()}catch(e){}Module._free(e),Module._free(u),Module._free(c),Module._free(f),Module._free(d)}}}release(e){this.isRelease||(this.isRelease=!0,Module.cwrap("release","number",["number"])(this.vcodecerPtr),Module.cwrap("exitMissile","number",["number"])(this.vcodecerPtr),self.postMessage({t:m.RELEASE_DECODE_FINISH,isSeek:e.isSeek}))}}}]);',"Worker",void 0,n.p+"decoder.worker.worker.js")}},function(e,t){e.exports={PLAYER_VERSION:"4.3.1.0"}},function(e,t,n){let i=n(39);e.exports=()=>{let e={videoBuffer:[],audioBuffer:[],idrIdxBuffer:[],videoptsec:-1,appendFrame:(t,n,r=!0,a=!1)=>{n=new i.BufferFrame(t,a,n,r);let o=parseInt(t);return r?(o==e.videoptsec&&(o+=1),e.videoBuffer.length-1>=o?e.videoBuffer[o].push(n):e.videoBuffer.push([n]),a&&!e.idrIdxBuffer.includes(t)&&e.idrIdxBuffer.push(t)):e.audioBuffer.length-1>=o&&null!=e.audioBuffer[o]&&null!=e.audioBuffer[o]?e.audioBuffer[o]&&e.audioBuffer[o].push(n):e.audioBuffer.push([n]),!0},appendFrameWithDts:(t,n,r,a=!0,o=!1)=>(t=i.ConstructWithDts(t,n,o,r,a),r=parseInt(n),a?(e.videoBuffer.length-1>=r?e.videoBuffer[r].push(t):e.videoBuffer.push([t]),o&&!e.idrIdxBuffer.includes(n)&&e.idrIdxBuffer.push(n)):e.audioBuffer.length-1>=r&&null!=e.audioBuffer[r]&&null!=e.audioBuffer[r]?e.audioBuffer[r]&&e.audioBuffer[r].push(t):e.audioBuffer.push([t]),!0),appendFrameByBufferFrame:t=>{var n=t.pts,i=parseInt(n);return t.video?(e.videoBuffer.length-1>=i?e.videoBuffer[i].push(t):e.videoBuffer.push([t]),isKey&&!e.idrIdxBuffer.includes(n)&&e.idrIdxBuffer.push(n)):e.audioBuffer.length-1>=i?e.audioBuffer[i].push(t):e.audioBuffer.push([t]),!0},cleanPipeline:()=>{e.videoBuffer.length=0,e.audioBuffer.length=0,e.videoptsec=-1,e.videoBuffer=[],e.audioBuffer=[]},vFrame:(t=-1)=>{if(!(t<0||t>e.videoBuffer.length-1))return e.videoptsec=t,e.videoBuffer[t]},aFrame:(t=-1)=>{if(!(t<0||t>e.audioBuffer.length-1))return e.audioBuffer[t]},seekIDR:(t=-1)=>{if(t<0)return null;if(e.idrIdxBuffer.includes(t))return t;for(let i=0;i<e.idrIdxBuffer.length;i++)if(i===e.idrIdxBuffer.length-1||e.idrIdxBuffer[i]<t&&e.idrIdxBuffer[i+1]>t||0===i&&e.idrIdxBuffer[i]>=t){for(let t=1;0<=t;t--){var n=i-t;if(0<=n)return e.idrIdxBuffer[n]}return e.idrIdxBuffer[i]}},remove:()=>{e.audioBuffer=[],e.videoBuffer=[],e.idrIdxBuffer=[]}};return e}},function(e,t,n){t.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){for(var n=void 0,a=void 0,o=void 0,s=void 0,l=((t=t&&t.loc)&&(n=t.start.line,a=t.end.line,o=t.start.column,s=t.end.column,e+=" - "+n+":"+o),Error.prototype.constructor.call(this,e)),u=0;u<i.length;u++)this[i[u]]=l[i[u]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{t&&(this.lineNumber=n,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:s,enumerable:!0})):(this.column=o,this.endColumn=s))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},,function(e,t,n){n=[n(15),n(144)],t=function(e,t){function n(t,n){if(null!=t){void 0===t.length&&(t=[t]);var i,r={};for(i in n)r[i]=function(t,n,i){return""===n||null==n?"":(i=i?" !important":"","string"==typeof n&&isNaN(n)?/png|gif|jpe?g/i.test(n)&&n.indexOf("url")<0?"url("+n+")":n+i:0===n||"z-index"===t||"opacity"===t?n+i:/color/i.test(t)?"#"+e.pad(n.toString(16).replace(/^0x/i,""),6)+i:Math.ceil(n)+"px"+i)}(i,n[i]);for(var a=0;a<t.length;a++){var o,s=t[a];if(null!=s)for(i in r)o=function(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}(i),s.style[o]!==r[i]&&(s.style[o]=r[i])}}}return{css:function(e,i,r){r=r||"all-players";var a,o="";"object"==typeof i?(n(a=document.createElement("div"),i),o="{"+a.style.cssText+"}"):"string"==typeof i&&(o=i),t.style([[e,e+o]],r)},style:n,clearCss:t.clear,transform:function(e,t){n(e,{transform:t,webkitTransform:t,msTransform:t,mozTransform:t,oTransform:t})},animation:function(e,t){n(e,{animation:t,webkitAnimation:t,msAnimation:t,mozAnimation:t,oAnimation:t})},hexToRgba:function(e,t){var n="rgb";return e?3===(e=String(e).replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)):e="000000",e=[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)],void 0!==t&&100!==t&&(n+="a",e.push(t/100)),n+"("+e.join(",")+")"}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){void 0!==(t=function(){return"4.4.3.2"}.apply(t,[]))&&(e.exports=t)},function(e,t,n){(function(t){n(37),t.CACHE_APPEND_STATUS_CODE={FAILED:-1,OVERFLOW:-2,OK:0,NOT_FULL:1,FULL:2,NULL:3},e.exports=(e=60)=>{let t={limit:e,yuvCache:[],appendCacheByCacheYuv:e=>{e.pts,t.yuvCache.push(e)},getState:()=>t.yuvCache.length<=0?CACHE_APPEND_STATUS_CODE.NULL:t.yuvCache.length>=t.limit?CACHE_APPEND_STATUS_CODE.FULL:CACHE_APPEND_STATUS_CODE.NOT_FULL,cleanPipeline:()=>{t.yuvCache.length=0},vYuv:()=>t.yuvCache.length<=0?null:t.yuvCache.shift(),getYuv:()=>t.yuvCache.length<=0?null:t.yuvCache[0],deletePassed:e=>{if(!e)return!1;t.yuvCache=t.yuvCache.filter((t=>t.pts>e))}};return t}}).call(this,n(26))},function(e,t){t.CacheYuvStruct=class{constructor(e,t,n,i,r,a){this.pts=e,this.width=t,this.height=n,this.y=i,this.u=r,this.v=a}setYuv(e,t,n,i,r,a){this.pts=e,this.width=t,this.height=n,this.y=i,this.u=r,this.v=a}}},function(e,t,n){function i(e){this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}n(12),i.prototype.bind=function(e,t,n){var i=this.gl;i.activeTexture([i.TEXTURE0,i.TEXTURE1,i.TEXTURE2][e]),i.bindTexture(i.TEXTURE_2D,this.texture),i.uniform1i(i.getUniformLocation(t,n),e)},i.prototype.fill=function(e,t,n){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,e,t,0,i.LUMINANCE,i.UNSIGNED_BYTE,n)},e.exports={renderFrame:function(e,t,n,i,r,a){e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.y.fill(r,a,t),e.u.fill(r>>1,a>>1,n),e.v.fill(r>>1,a>>1,i),e.drawArrays(e.TRIANGLE_STRIP,0,4)},setupCanvas:function(e,t){var n,r,a,o;return(e=e.getContext("webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0}))&&(n=e.createProgram(),r=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {"," gl_Position = aVertexPosition;"," vTextureCoord = aTextureCoord;","}"].join("\n"),a=e.createShader(e.VERTEX_SHADER),e.shaderSource(a,r),e.compileShader(a),r=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),o=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(o,r),e.compileShader(o),e.attachShader(n,a),e.attachShader(n,o),e.linkProgram(n),e.useProgram(n),e.getProgramParameter(n,e.LINK_STATUS),r=e.getAttribLocation(n,"aVertexPosition"),e.enableVertexAttribArray(r),a=e.getAttribLocation(n,"aTextureCoord"),e.enableVertexAttribArray(a),o=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),o=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.y=new i(e),e.u=new i(e),e.v=new i(e),e.y.bind(0,n,"YTexture"),e.u.bind(1,n,"UTexture"),e.v.bind(2,n,"VTexture")),e},releaseContext:function(e){e.deleteTexture(e.y.texture),e.deleteTexture(e.u.texture),e.deleteTexture(e.v.texture)}}},function(e,t){class n{constructor(e,t,n,i){this.pts=e,this.dts=e,this.isKey=t,this.frameData=n,this.video=i}setFrame(e,t,n,i){this.pts=e,this.isKey=t,this.frameData=n,this.video=i}}t.BufferFrame=n,t.ConstructWithDts=(e,t,i,r,a)=>((e=new n(e,i,r,a)).dts=t,e)},function(e,t,n){n=[n(64),n(1)],t=function(e,t){return e.extend({constructor:function(e){var t,n;this.el=document.createElement("div"),this.el.className="jw-icon jw-icon-tooltip "+e+" jw-button-color jw-reset jw-hidden",this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip","jw-icon-hd"===e?((t=document.createElement("span")).className="jw-hd-label",this.el.appendChild(t)):"jw-icon-playrate"===e?((t=document.createElement("span")).className="jw-playrate-label",this.el.appendChild(t)):"jw-icon-cc"===e?((t=document.createElement("span")).className="jw-cc-label",this.el.appendChild(t)):"jw-icon-qualityChange"===e?((n=document.createElement("span")).className="jw-qualityChange-label",this.el.appendChild(n)):"jw-icon-lang"===e&&((n=document.createElement("span")).className="jw-lang-label",this.el.appendChild(n)),this.el.appendChild(this.container)},addContent:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)},removeContent:function(){this.content&&(this.container.removeChild(this.content),this.content=null)},hasContent:function(){return!!this.content},element:function(){return this.el},openTooltip:function(e){this.trigger("open-"+this.componentType,e,{isOpen:!0}),this.isOpen=!0,t.toggleClass(this.el,this.openClass,this.isOpen)},closeTooltip:function(e){this.trigger("close-"+this.componentType,e,{isOpen:!1}),this.isOpen=!1,t.toggleClass(this.el,this.openClass,this.isOpen)},toggleOpenState:function(e){this.isOpen?this.closeTooltip(e):this.openTooltip(e)}})}.apply(t,n),void 0!==t&&(e.exports=t)},,,,,,function(e,t,n){n=[n(2),n(15)],t=function(e,t){var n={exists:function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},isHTTPS:function(){return 0===window.location.href.indexOf("https")},isRtmp:function(e,t){return e&&(0===e.indexOf("rtmp")||"rtmp"===t)},isHls:function(e,n){return e&&("m3u8"===t.extension(e)||"hls"===t.extension(e)||"hls"===n)},isFlv:function(e,n){return e&&("flv"===t.extension(e)||"flv"===n)},isMp4:function(e,n){return e&&("mp4"===t.extension(e)||"mp4"===n)},isMov:function(e,n){return e&&("mov"===t.extension(e)||"mov"===n)},isMpegTs:function(e,n){return e&&("ts"===t.extension(e)||"ts"===n)},isHtml5Flv:function(e,t=""){return n.isFlv(e,t)&&n.isFlvjsSupported()},isFlvjsSupported:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},isMutipleHls:function(t){if(e.isArray(t)&&1<t.length){var i=0;if(e.each(t,(function(e){n.isHls(e.file,e.type)&&i++})),i===t.length)return!0}return!1},typeOf:function(t){var n;return null===t?"null":"object"==(n=typeof t)&&e.isArray(t)?"array":n},isMpd:function(e,n){return e&&("mpd"===t.extension(e)||"mpd"===n)},isRtc:function(e){return"rtc"==e},isMp3:function(e,n){return e&&("mp3"===t.extension(e)||"mp3"===n)},isAac:function(e,n){return e&&("aac"===t.extension(e)||"aac"===n)},isFlac:function(e,n){return e&&("flac"===t.extension(e)||"flac"===n)},isOgg:function(e,n){var i=document.createElement("audio").canPlayType('audio/ogg;codecs="vorbis"');return e&&("ogg"===t.extension(e)||"ogg"===n)&&i},isWav:function(e,n){return e&&("wav"===t.extension(e)||"wav"===n)},isOpus:function(e,n){return e&&("opus"===t.extension(e)||"opus"===n)}};return n}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){void 0!==(t=function(){return{repo:"https://bce.bdstatic.com/jwplayer/",SkinsIncluded:["bce"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","seven","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(t,[]))&&(e.exports=t)},function(e,t,n){n=[n(101),n(102),n(154),n(2)],t=function(e,t,n,i){function r(e){this.providers=t.slice(),this.config=e||{}}return r.registerProvider=function(r){var a=r.getName().name;if(!n[a]){if(!i.find(t,i.matches({name:a}))){if(!i.isFunction(r.supports))throw{message:"Tried to register a provider with an invalid object"};t.unshift({name:a,supports:r.supports})}var o=function(){};o.prototype=e,r.prototype=new o,n[a]=r}},r.load=function(e){return Promise.all(i.map(e,(function(e){return new Promise((function(t){e.name,t()})).then((function(e){e&&r.registerProvider(e)}))})))},i.extend(r.prototype,{providerSupports:function(e,t){return e.supports(t)},required:function(e,t){return e=e.slice(),i.compact(i.map(this.providers,(function(n){for(var i=!1,r=e.length;r--;){var a=e[r];(a=n.supports(a.sources[0],t))&&e.splice(r,1),i=i||a}if(i)return n})))},choose:function(e){e=i.isObject(e)?e:{};for(var t=this.providers.length,r=0;r<t;r++){var a=this.providers[r];if(this.providerSupports(a,e))return{priority:t-r-1,name:a.name,type:e.type,provider:n[a.name]}}return null}}),r}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){let i=window.AudioContext||window.webkitAudioContext,r=n(5),a=n(12);e.exports=e=>{let t={options:{sampleRate:e.sampleRate||r.DEFAULT_SAMPLERATE,appendType:e.appendType||r.APPEND_TYPE_STREAM,playMode:e.playMode||r.AUDIO_MODE_SWAP},sourceChannel:-1,audioCtx:new i({latencyHint:"interactive",sampleRate:e.sampleRate}),gainNode:null,sourceList:[],startStatus:!1,sampleQueue:[],nextBuffer:null,playTimestamp:0,playStartTime:0,durationMs:-1,isLIVE:!1,voice:1,onLoadCache:null,videoPTS:null,isDecodeError:!1,shifter:null,playbackRate:1,isDestroy:!1,resetStartParam:()=>{t.playTimestamp=0,t.playStartTime=0},setOnLoadCache:e=>{t.onLoadCache=e},setDurationMs:(e=-1)=>{t.durationMs=e},setVoice:(e=1,n)=>{var i;"running"!=t.audioCtx.state&&(t.videoPTS=n,-1<(i=t.sampleQueue.findIndex((e=>e.pts>=n)))&&t.sampleQueue.splice(0,i),t.audioCtx.resume()),t.voice=e,t.gainNode.gain.value=e},setPlaybackRate:(e=1)=>{t.playbackRate=e},setVideoPTS:e=>{t.videoPTS&&(t.videoPTS=e)},getAlignVPTS:()=>0===t.playStartTime?0:t.playTimestamp+(a.GetMsTime()-t.playStartTime)/1e3,swapSource:(e=-1,n=-1)=>{if(0==t.startStatus)return null;if(e<0||e>=t.sourceList.length)return null;if(n<0||n>=t.sourceList.length)return null;try{t.sourceChannel===e&&null!==t.sourceList[e]&&(t.sourceList[e].disconnect(t.gainNode),t.sourceList[e]=null)}catch(e){}return t.sourceChannel=n,-2==(n=t.decodeSample(n,e))&&t.isLIVE&&(t.getAlignVPTS()>=t.durationMs/1e3-.04?t.pause():null!==t.onLoadCache&&t.onLoadCache()),n},addSample:(e=null)=>!(null==e||!e||null==e||(0==t.sampleQueue.length&&(t.seekPos=e.pts),t.sampleQueue.push(e),0)),runNextBuffer:()=>{window.setInterval((()=>{if(!(null!=t.nextBuffer||t.sampleQueue.length<r.DEFAULT_CONSU_SAMPLE_LEN)){var e;t.nextBuffer={data:null,pts:-1};for(let n=0;n<r.DEFAULT_CONSU_SAMPLE_LEN;n++){e=t.sampleQueue.shift();let n=null;if(n=t.options.appendType==r.APPEND_TYPE_STREAM?e:e.data,t.nextBuffer.pts<0&&(t.nextBuffer.pts=e.pts),null==t.nextBuffer.data?t.nextBuffer.data=new Uint8Array(n):((e=new Uint8Array(n.length+t.nextBuffer.data.length)).set(t.nextBuffer.data,0),e.set(n,t.nextBuffer.data.length),t.nextBuffer.data=e),t.sampleQueue.length<=0)break}}}),20)},decodeSample:(e=-1,n=-1)=>{if(e<0||e>=t.sourceList.length)return-1;if(null!=t.sourceList[e]&&null!=t.sourceList[e]&&t.sourceList[e]||(t.sourceList[e]=t.audioCtx.createBufferSource(),t.sourceList[e].onended=function(){var i=t.swapSource(e,n);-2!=i&&1!=i||t.isDestroy||t.play(!0)}),0==t.sampleQueue.length)return t.isLIVE?(t.sourceList[e].connect(t.gainNode),t.sourceList[e].start(),t.sourceList[e].onended=function(){t.swapSource(e,n)},t.sourceList[e].stop(),0):-2;if(!t.sourceList[e].buffer){if(null==t.nextBuffer||t.nextBuffer.data.length<1)return t.sourceList[e].connect(t.gainNode),t.sourceList[e].start(),t.sourceList[e].startState=!0,t.sourceList[e].stop(),1;var i=t.nextBuffer.data.buffer;(!t.videoPTS||t.videoPTS<=t.nextBuffer.pts)&&(t.videoPTS=null,t.playTimestamp=t.nextBuffer.pts,t.playStartTime=a.GetMsTime());try{t.audioCtx.decodeAudioData(i,(function(n){null!==t.sourceList[e]&&(t.sourceList[e].playbackRate.value=t.playbackRate,t.sourceList[e].buffer=n,t.sourceList[e].connect(t.gainNode),t.sourceList[e].context.resume(),t.sourceList[e].start(),t.sourceList[e].startState=!0)}),(function(e){t.isDecodeError=!0}))}catch(i){return t.nextBuffer=null,t.isDecodeError=!0,-3}t.nextBuffer=null}return 0},decodeWholeSamples:(e=-1)=>{if((t.sourceChannel=e)<0||e>=t.sourceList.length)return-1;if(null!=t.sourceList[e]&&null!=t.sourceList[e]&&t.sourceList[e]||(t.sourceList[e]=t.audioCtx.createBufferSource(),t.sourceList[e].onended=function(){}),0==t.sampleQueue.length)return-2;let n=null;var i;for(let e=0;e<t.sampleQueue.length;e++){i=t.sampleQueue.shift();let e=null;if(e=t.options.appendType==r.APPEND_TYPE_STREAM?i:i.data,n=null==n?new Uint8Array(e):((i=new Uint8Array(e.length+n.length)).set(n,0),i.set(e,n.length),i),t.sampleQueue.length<=0)break}var a=n;if(null==a||a.length<1)return t.sourceList[e].connect(t.gainNode),t.sourceList[e].start(),t.sourceList[e].stop(),1;a=a.buffer;try{t.audioCtx.decodeAudioData(a,(function(n){t.sourceList[e].buffer=n,t.sourceList[e].connect(t.gainNode),t.audioCtx.resume(),t.sourceList[e].start(),t.sourceList[e].startState=!0}),(function(e){e.err}))}catch(a){return-3}return 0},play:e=>{if(!t.isDecodeError&&(0==t.startStatus||e)){t.startStatus=!0;let e=0;"running"!=t.audioCtx.state&&t.audioCtx.resume(),-2!=(e=t.options.playMode==r.AUDIO_MODE_ONCE?t.decodeWholeSamples(0):t.swapSource(0,1))&&1!=e||t.isDestroy||(t.pause(),setTimeout((()=>{t.play()}),50))}},pause:()=>{t.startStatus=!1;for(let e=0;e<t.sourceList.length;e++)if(void 0!==t.sourceList[e]&&null!==t.sourceList[e])try{void 0!==t.sourceList[e].buffer&&null!==t.sourceList[e].buffer&&(t.sourceList[e].stop(),t.sourceList[e].disconnect(t.gainNode)),t.sourceList[e]=null}catch(e){}},stop:()=>{t.pause(),t.cleanQueue(),t.nextBuffer=null,t.sourceChannel=-1,t.isDestroy=!0},cleanQueue:()=>{t.sampleQueue.length=0,t.nextBuffer=null;for(let e=0;e<t.sourceList.length;e++)try{void 0!==t.sourceList[e].buffer&&null!==t.sourceList[e].buffer&&(t.sourceList[e].stop(),t.sourceList[e].disconnect(t.gainNode)),t.sourceList[e]=null}catch(e){}},getLastData:()=>t.sampleQueue.slice(-1)[0],seek:e=>{t.nextBuffer=null,t.sampleQueue=t.sampleQueue.filter((t=>t.pts>=e))}};return t.sourceList.push(t.audioCtx.createBufferSource()),t.sourceList.push(t.audioCtx.createBufferSource()),t.sourceList[0].onended=function(){var e=t.swapSource(0,1);-2!=e&&1!=e||t.isDestroy||t.play(!0)},t.sourceList[1].onended=function(){var e=t.swapSource(1,0);-2!=e&&1!=e||t.isDestroy||t.play(!0)},t.gainNode=t.audioCtx.createGain(),t.gainNode.gain.value=t.voice,t.gainNode.connect(t.audioCtx.destination),"running"!=t.audioCtx.state&&t.audioCtx.resume(),t.runNextBuffer(),t}},function(e,t,n){n=[n(15)],t=function(e){return{localName:function(e){return e&&(e.localName||e.baseName)||""},textContent:function(t){return t?t.textContent?e.trim(t.textContent):t.text?e.trim(t.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t){t.default={zh:{DANMU:{DANMUSETTING:"弹幕设置",RESET:"重置",DANMUOPACITY:"不透明度",DANMUAREA:"显示区域",DANMUSPEED:"弹幕速度",DANMUFONT:"字体大小",INTELLIGENTBLOCKING:"智能挡板",MINIMAL:"极小",MODERATE:"适中",GREAT:"极大",QUARTERSCREEN:"1/4",THREEQUARTERSCREEN:"3/4",HALFSCREEN:"1/2",FULLSCREEN:"1"},PERFORMANCE:{FORMAT:"格式",FPS:"帧率",RESOLUTION:"分辨率",ENCODETYPE:"编码方式",BUFFEREND:"buffer水位线",FIRSETIME:"首帧时间",DECODEEFFICIENCY:"解码效率",DECODECONSUMPTION:"解码消耗"},HLSQUALITYCHANGE:{AUTO:"自动"},ERRORTIPS:{NOTSUPPORT:"音/视频格式不支持，或未找到可用资源"},LICENSE:{NO_APPID:"license验证失败:请在配置文件中填写appid",NO_LICENSE:"license验证失败:请在配置文件中配置licenseUrl",ERROR_LICENSE_URL:"license验证失败:签名校验错误",DOMAIN_FAIL:"license验证失败:证书与域名不匹配",IS_EXPIRED:"license验证失败:证书已过期",FETCH_ERROR:"license验证失败:读取不到证书",BASE_FUNC_NOT_SUPPORT:"该功能不支持,请升级为高级版证书",EXPIRED_COUNT_DOWM:"证书已过期:",DAY:"天"},MEMORYPLAY:{POSITION_TO:"已为您定位至"}},en:{DANMU:{DANMUSETTING:"Barrage settings",RESET:"Reset",DANMUOPACITY:"Opacity",DANMUAREA:"Display  area",DANMUSPEED:"Barrage speed",DANMUFONT:"Font size",INTELLIGENTBLOCKING:"Intelligent blocking",MINIMAL:"Minimal",MODERATE:"Moderate",GREAT:"Great",QUARTERSCREEN:"1/4",THREEQUARTERSCREEN:"3/4",HALFSCREEN:"1/2",FULLSCREEN:"1"},PERFORMANCE:{FORMAT:"format",FPS:"fps",RESOLUTION:"resolution",ENCODETYPE:"encodeType",BUFFEREND:"bufferEnd",FIRSETIME:"firstTime",DECODEEFFICIENCY:"decodeEfficiency",DECODECONSUMPTION:"decodeConsumption"},HLSQUALITYCHANGE:{AUTO:"Auto"},ERRORTIPS:{NOTSUPPORT:"Audio/video is not supported or no playable source found"},LICENSE:{NO_APPID:"license error:Lack appid.",NO_LICENSE:"license error:Lack license url.",ERROR_LICENSE_URL:"license error:License verification failed.",DOMAIN_FAIL:"license error:Domain verification failed.",IS_EXPIRED:"license error:The license has expired.",FETCH_ERROR:"license error:Get license data failed.",BASE_FUNC_NOT_SUPPORT:"This feature is not supported, please upgrade to the advanced version certificate",EXPIRED_COUNT_DOWM:"The license has expired:",DAY:"day"},MEMORYPLAY:{POSITION_TO:"Has located for you to "}}}},,function(e,t,n){n.d(t,"a",(function(){return r})),t=n(23);var i=n.n(t);function r(){return i()('/*! WebPlayer built @6/25/2024, 8:30:15 PM */!function(r){var a={};function n(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}n.m=r,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,r){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,r){r.r(t);let a={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},n={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"open context failed",OPEN_MEDIA_FAILED:"failed to open media",DOWNLOAD_DATA_FAILED:"download data failed"},i={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError",DOWNLOAD_FAILED:"downloadFailed"};let d={WASM_LOAD_FINISH:0,SNIFF_INIT_FINISH:1,POST_PROBEDATA:2,POST_NALUDATA:3,POST_AACDATA:4,POST_FRAMEDATA:5,POST_NALU_LENGTH:6,WAMS_ERROR:111},s={INIT_DECODER:0,PUSH_SNIFF_DATA:1,GET_SNIFF_PACKET:2,DECODE_VIDEO:3,GET_NALU_LENGTH:4,GET_SNIFF_FLV_PACKE:5,GET_BUFFER_LENGTH:6,PUSH_SNIFF_FLV_PACKET:7,RELEASE_SNIFF:8,LOAD_WAMS_JS:111},l=r(0);var o=r.n(l);self.Module={onRuntimeInitialized:function(){self.decoder&&self.decoder.onWasmLoaded()},onAbort:function(e){self.postMessage({t:d.WAMS_ERROR,data:{msg:""+n.WASM_ERROR+e,errorType:a.NOT_SUPPORT,event:i.WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}};self.onmessage=e=>{var t=e["data"];switch(t.t){case s.INIT_DECODER:self.decoder.initDecoder(t.data);break;case s.PUSH_SNIFF_DATA:self.decoder.pushSniffData(t.d,t.probeSize);break;case s.GET_SNIFF_PACKET:self.decoder.getSniffStreamPacket(t.p);break;case s.DECODE_VIDEO:self.decoder.decodeVideo(t);break;case s.GET_NALU_LENGTH:self.decoder.getNaluListLength();break;case s.GET_SNIFF_FLV_PACKE:self.decoder.getSniffHttpFlvPacket();break;case s.GET_BUFFER_LENGTH:self.decoder.getBufferLengthApi();break;case s.PUSH_SNIFF_FLV_PACKET:self.decoder.pushSniffHttpFlvData(t);break;case s.RELEASE_SNIFF:self.decoder.releaseSniffStream();break;case s.LOAD_WAMS_JS:self.decoder.loadJs(t.pathUrl,t.isSafari)}},self.decoder=new class{constructor(){this.wasmLoaded=!1,this.corePtr=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.time=null}initDecoder(e){let o=this;var{token:e,VersionModule:t,ignoreAudio:r,playModeEnum:a,defaultFps:n,mode:i}=e,e=(this.corePtr=Module.cwrap(1==i?"AVSniffHttpFlvInit":"AVSniffStreamInit","number",["string","string"])(e,t),1==i?"vdiidiiiiii":"vdiidiiiii"),t=(this._ptr_probeCallback=Module.addFunction(function(e,t,r,a,n,i,s,l,o,u=0){e={t:d.POST_PROBEDATA,duration:e,width:t,height:r,fps:a,audioIdx:n,sample_rate:i,channels:s,vcodec_name_id:l,sample_fmt:o,trans_to_gcore:u};self.postMessage(e)},e),this._ptr_frameCallback=Module.addFunction(function(e,t,r,a,n,i,s,l,o,u){e=Module.HEAPU8.subarray(e,e+a*l),t=Module.HEAPU8.subarray(t,t+n*l/2),r=Module.HEAPU8.subarray(r,r+i*l/2),e=new Uint8Array(e),t=new Uint8Array(t),r=new Uint8Array(r),e={t:d.POST_FRAMEDATA,buf_y:e,buf_u:t,buf_v:r,line1:a,line2:n,line3:i,width:s,height:l,pts:o,tag:u};self.postMessage(e,[e.buf_y.buffer,e.buf_u.buffer,e.buf_v.buffer])},"viiiiiiiidi"),1==i?"viiiiidd":"viiiiiddi");this._ptr_naluCallback=Module.addFunction(function(e,t,r,a,n,i,s,l){e=Module.HEAPU8.subarray(e,e+t),e=new Uint8Array(e),e={t:d.POST_NALUDATA,d:e,len:t,isKey:r,width:a,height:n,pts:i,dts:s,isRawStream:l};self.postMessage(e,[e.d.buffer]),o.time,o.time=(new Date).getTime()},t),this._ptr_sampleCallback=Module.addFunction(function(){},"vi"),this._ptr_aacCallback=Module.addFunction(function(e,t,r,a){e=Module.HEAPU8.subarray(e,e+t),e=new Uint8Array(e),e={t:d.POST_AACDATA,d:e,line1:t,channel:r,pts:a};self.postMessage(e,[e.d.buffer])},"viiid"),1==i?Module.cwrap("initializeSniffHttpFlvModule","number",["number","number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_frameCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback,r):Module.cwrap("initializeSniffStreamModuleWithAOpt","number",["number","number","number","number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_frameCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback,r,a,n),self.postMessage({t:d.SNIFF_INIT_FINISH})}pushSniffData(e,t){var e=new Uint8Array(e),r=Module._malloc(e.length);Module.HEAP8.set(e,r),Module.cwrap("pushSniffStreamData","number",["number","number","number","number"])(this.corePtr,r,e.length,t)}getSniffStreamPacket(e){(1==e?Module.cwrap("getSniffStreamPkg","number",["number"]):Module.cwrap("getSniffStreamPkgNoCheckProbe","number",["number"]))(this.corePtr)}getSniffHttpFlvPacket(){Module.cwrap("getSniffHttpFlvPkg","number",["number"])(this.corePtr)}decodeVideo(e){var{d:e,ptsMS:t,dtsMS:r,frameCallTag:a}=e,n=Module._malloc(e.length),n=(Module.HEAP8.set(e,n),Module.cwrap("decodeVideoFrame","number",["number","number","number","number","number"])(this.corePtr,n,e.length,t,r,a));self.postMessage({t:6,l:n})}getNaluListLength(){var e=Module.cwrap("naluLListLength","number",["number"])(this.corePtr);self.postMessage({t:d.POST_NALU_LENGTH,l:e})}getBufferLengthApi(){var e=Module.cwrap("getBufferLengthApi","number",["number"])(this.corePtr);self.postMessage({t:d.POST_NALU_LENGTH,l:e})}pushSniffHttpFlvData(e){var{d:e,probeSize:t}=e,r=Module._malloc(e.length);Module.HEAP8.set(e,r),Module.cwrap("pushSniffHttpFlvData","number",["number","number","number","number"])(this.corePtr,r,e.length,t)}releaseSniffStream(){void 0!==this.corePtr&&null!==this.corePtr&&(Module.cwrap("releaseSniffStream","number",["number"])(this.corePtr),this.corePtr=null)}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:d.WASM_LOAD_FINISH}))}loadJs(e,t){var r=o.a.simd(),r=navigator.userAgent.toLocaleLowerCase().includes("iphone")?e+"missile-min.js":r&&!t?e+"missile-simd.js":e+"missile.js";self.wasmPath=e,self.importScripts(r)}}}]);',"Worker",void 0,n.p+"cNativeCoreDecoder.worker.worker.js")}},,,,,,,function(e,t,n){n=[n(2),n(46)],t=function(e,t){var n={};function i(t){return e.some(t,(function(e){return"parsererror"===e.nodeName}))}return n.getAbsolutePath=function(e,n){if(t.exists(n)||(n=document.location.href),t.exists(e)){if(/^(?:(?:https?|file)\:)?\/\//.test(e))return e;for(var i,r=n.substring(0,n.indexOf("://")+3),a=n.substring(r.length,n.indexOf("/",r.length+1)),o=(i=0===e.indexOf("/")?e.split("/"):(n=(n=n.split("?")[0]).substring(r.length+a.length+1,n.lastIndexOf("/"))).split("/").concat(e.split("/")),[]),s=0;s<i.length;s++)i[s]&&t.exists(i[s])&&"."!==i[s]&&(".."===i[s]?o.pop():o.push(i[s]));return r+a+"/"+o.join("/")}},n.getScriptPath=e.memoize((function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src;if(i&&0<=i.indexOf(e))return i.substr(0,i.indexOf(e))}return""})),n.parseXML=function(e){var t=null;try{"DOMParser"in window?(i((t=(new window.DOMParser).parseFromString(e,"text/xml")).childNodes)||t.childNodes&&i(t.childNodes[0].childNodes))&&(t=null):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){}return t},n.serialize=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e},n.parseDimension=function(e){return"string"==typeof e?""===e?0:-1<e.lastIndexOf("%")?e:parseInt(e.replace("px",""),10):e},n.timeFormat=function(e,t){return e<=0&&!t?"00:00":(t=e<0?"-":"",e=Math.abs(e),t+((t=Math.floor(e/3600))?t+":":"")+((t=Math.floor((e-3600*t)/60))<10?"0":"")+t+":"+((t=Math.floor(e%60))<10?"0":"")+t)},n.adaptiveType=function(e){if(0!==e){if(e<=-120)return"DVR";if(e<0||e===1/0)return"LIVE"}return"VOD"},n.getUrlParams=function(e){if(e=e.split("?")[1]){var t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){var i=n[e].split("=");t[i[0]]=i[1]}return t}},n}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){let i=window.AudioContext||window.webkitAudioContext;n(5);let r=n(12);t.AudioPcmPlayer=class{constructor(){this._sample_rate=44100,this._seg_dur=.1,this._channels=1,this._swapStartPlay=!0,this.playStartTime=-1,this.playTimestamp=0,this._now_seg_dur=-1,this._push_start_idx=0,this._playInterval=null,this._pcm_array_buf=null,this._pcm_array_frame=[],this._once_pop_len=parseInt(this._sample_rate*this._seg_dur),this._active_node=null,this._ctx=new i,this._gain=this._ctx.createGain(),this._gain.gain.value=1,this._gain.connect(this._ctx.destination)}setVoice(e){this._gain.gain.value=e}pushBufferFrame(e,t){}pushBuffer(e){let t=null;var n=(e=e.buffer).byteLength%4;t=0!=n?((n=new Uint8Array(e.byteLength+n)).set(new Uint8Array(e),0),new Float32Array(n.buffer)):new Float32Array(e);let i=null;if(2<=this._channels){n=t.length/2,i=new Float32Array(n);let e=0;for(let n=0;n<t.length;n+=2)i[e]=t[n],e++}else i=new Float32Array(t);null===this._pcm_array_buf?this._pcm_array_buf=new Float32Array(i):((e=new Float32Array(this._pcm_array_buf.length+i.length)).set(this._pcm_array_buf,0),e.set(i,this._pcm_array_buf.length),this._pcm_array_buf=e)}readingLoopWithF32(){if(!(null!==this._pcm_array_buf&&this._pcm_array_buf.length>this._push_start_idx))return-1;{this.playStartTime<0&&(this.playStartTime=r.GetMsTime(),this.playTimestamp=r.GetMsTime()),this._swapStartPlay=!1;let n=this._push_start_idx+this._once_pop_len;n>this._pcm_array_buf.length&&(n=this._pcm_array_buf.length);var e=this._pcm_array_buf.slice(this._push_start_idx,n),t=(this._push_start_idx+=e.length,this._now_seg_dur=+e.length/this._sample_rate*1e3,this._ctx.createBuffer(1,e.length,this._sample_rate));t.copyToChannel(e,0),this._active_node=this._ctx.createBufferSource(),this._active_node.buffer=t,this._active_node.connect(this._gain),this.playStartTime=r.GetMsTime(),this._active_node.start(0),this.playTimestamp+=this._now_seg_dur}return 0}getAlignVPTS(){return this.playTimestamp}pause(){null!==this._playInterval&&(window.clearInterval(this._playInterval),this._playInterval=null)}play(){let e=this;this._playInterval=window.setInterval((()=>{e.readingLoopWithF32()}),10)}}},function(e,t,n){n=[n(15)],t=function(e){var t={},n=t.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return t.getPluginPathType=function(t){var i,r;if("string"==typeof t)return 0<(i=(t=t.split("?")[0]).indexOf("://"))?n.ABSOLUTE:(r=t.indexOf("/"),t=e.extension(t),!(i<0&&r<0)||t&&isNaN(t)?n.RELATIVE:n.CDN)},t.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},t.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},t}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(64),n(14),n(229),n(1)],t=function(e,t,n,i){return e.extend({constructor:function(e,t,n){this.className=e+" jw-background-color jw-reset",this.orientation=t,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this),this.setup(n)},setup:function(e){var r={default:this.default,className:this.className,orientation:"jw-slider-"+this.orientation};this.el=i.createElement(n(r)),this.elementRail=i.getElementsByClassName("jw-slider-container",this.el)[0],this.elementBuffer=i.getElementsByClassName("jw-buffer",this.el)[0],this.elementProgress=i.getElementsByClassName("jw-progress",this.el)[0],this.elementThumb=i.getElementsByClassName("jw-knob",this.el)[0],this.elementJwRail=i.getElementsByClassName("jw-rail",this.el)[0],this.userInteract=new t(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener),e&&this.addBreakpointElement(e)},dragStart:function(){this.trigger("dragStart"),this.railBounds=i.bounds(this.elementRail)},dragEnd:function(e){this.dragMove(e),this.trigger("dragEnd")},dragMove:function(e){var t=this.railBounds=this.railBounds||i.bounds(this.elementRail),n="horizontal"===this.orientation?(n=e.pageX)<t.left?0:n>t.right?100:100*i.between((n-t.left)/t.width,0,1):(n=e.pageY)>=t.bottom?0:n<=t.top?100:100*i.between((t.height-(n-t.top))/t.height,0,1);return t=this.limit(n),this.render(t),"drag"===e.type&&i.hasClass(e.currentTarget,"jw-slider-time")||this.update(t),!1},tap:function(e){this.railBounds=i.bounds(this.elementRail),this.dragMove(e)},limit:function(e){return e},update:function(e){this.trigger("update",{percentage:e})},render:function(e){e=parseInt(Math.max(0,Math.min(e,100))),"horizontal"===this.orientation?(this.elementThumb.style.left=e+"%",this.elementProgress.style.width=e+"%"):(this.elementThumb.style.bottom=e+"%",this.elementProgress.style.height=e+"%")},updateBuffer:function(e){e&&(this.elementBuffer.style.width=e+"%")},element:function(){return this.el},addBreakpointElement:function(e){var t=parseInt(100/(e+1));for(let r=1;r<e+1;r++){var n=t*r,i=document.createElement("div");i.classList.add("jw-slider-breakpoint"),i.style.left=n-2+"%",this.elementJwRail.appendChild(i)}}})}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(7),n(2)],t=function(e,t){function n(){}return n.extend=function(e,n){function i(){this.constructor=a}var r=this,a=e&&t.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)};return t.extend(a,r,n),i.prototype=r.prototype,a.prototype=new i,e&&t.extend(a.prototype,e),a.__super__=r.prototype,a},t.extend(n.prototype,e),n}.apply(t,n),void 0!==t&&(e.exports=t)},,,,function(e,t,n){n.d(t,"a",(function(){return r}));let i=n(1);function r(e){i.isWeChat()&&i.isIOS()&&e&&document.addEventListener("WeixinJSBridgeReady",(()=>{e.muted=!0,e.play()}))}},function(e,t,n){(function(t,i){function r(e){var t=typeof e;if("string"==t)return[e,!0];if("object"==t&&null!==e){if(d&&e.constructor===ArrayBuffer)return[new Uint8Array(e),!1];if(v(e)||A(e))return[e,!1]}throw new Error(l)}function a(e){return function(t){return new E(!0).update(t)[e]()}}function o(e){return function(t,n){return new b(t,!0).update(n)[e]()}}var s,l="input is invalid type",u=(c="object"==typeof window)?window:{},c=!(c=!u.JS_MD5_NO_WINDOW&&c)&&"object"==typeof self,h=!u.JS_MD5_NO_NODE_JS&&"object"==typeof t&&t.versions&&t.versions.node,d=(h?u=i:c&&(u=self),c=!u.JS_MD5_NO_COMMON_JS&&"object"==typeof e&&e.exports,t=n(260),!u.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer),f="0123456789abcdef".split(""),p=[128,32768,8388608,-2147483648],m=[0,8,16,24],g=["hex","array","digest","buffer","arrayBuffer","base64"],_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),y=[],v=(d&&(i=new ArrayBuffer(68),s=new Uint8Array(i),y=new Uint32Array(i)),Array.isArray),A=(!u.JS_MD5_NO_NODE_JS&&v||(v=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),ArrayBuffer.isView);function E(e){e?(y[0]=y[16]=y[1]=y[2]=y[3]=y[4]=y[5]=y[6]=y[7]=y[8]=y[9]=y[10]=y[11]=y[12]=y[13]=y[14]=y[15]=0,this.blocks=y,this.buffer8=s):d?(e=new ArrayBuffer(68),this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}function b(e,t){var n=r(e);if(e=n[0],n[1]){for(var i,a=[],o=e.length,s=0,l=0;l<o;++l)(i=e.charCodeAt(l))<128?a[s++]=i:(i<2048?a[s++]=192|i>>>6:(i<55296||57344<=i?a[s++]=224|i>>>12:(i=65536+((1023&i)<<10|1023&e.charCodeAt(++l)),a[s++]=240|i>>>18,a[s++]=128|i>>>12&63),a[s++]=128|i>>>6&63),a[s++]=128|63&i);e=a}64<e.length&&(e=new E(!0).update(e).array());var u=[],c=[];for(l=0;l<64;++l){var h=e[l]||0;u[l]=92^h,c[l]=54^h}E.call(this,t),this.update(c),this.oKeyPad=u,this.inner=!0,this.sharedMemory=t}!d||!u.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&A||(A=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer}),E.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");for(var t,n,i=r(e),a=(e=i[0],i[1]),o=0,s=e.length,l=this.blocks,u=this.buffer8;o<s;){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),a)if(d)for(n=this.start;o<s&&n<64;++o)(t=e.charCodeAt(o))<128?u[n++]=t:(t<2048?u[n++]=192|t>>>6:(t<55296||57344<=t?u[n++]=224|t>>>12:(t=65536+((1023&t)<<10|1023&e.charCodeAt(++o)),u[n++]=240|t>>>18,u[n++]=128|t>>>12&63),u[n++]=128|t>>>6&63),u[n++]=128|63&t);else for(n=this.start;o<s&&n<64;++o)(t=e.charCodeAt(o))<128?l[n>>>2]|=t<<m[3&n++]:(t<2048?l[n>>>2]|=(192|t>>>6)<<m[3&n++]:(t<55296||57344<=t?l[n>>>2]|=(224|t>>>12)<<m[3&n++]:(t=65536+((1023&t)<<10|1023&e.charCodeAt(++o)),l[n>>>2]|=(240|t>>>18)<<m[3&n++],l[n>>>2]|=(128|t>>>12&63)<<m[3&n++]),l[n>>>2]|=(128|t>>>6&63)<<m[3&n++]),l[n>>>2]|=(128|63&t)<<m[3&n++]);else if(d)for(n=this.start;o<s&&n<64;++o)u[n++]=e[o];else for(n=this.start;o<s&&n<64;++o)l[n>>>2]|=e[o]<<m[3&n++];this.lastByteIndex=n,this.bytes+=n-this.start,64<=n?(this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this},E.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,(e=this.blocks)[(t=this.lastByteIndex)>>>2]|=p[3&t],56<=t&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash())},E.prototype.hash=function(){var e,t,n,i,r,a=this.blocks,o=this.first?((o=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879|0)^(t=((t=(-271733879^(n=((n=(-1732584194^2004318071&e)+a[1]-117830708)<<12|n>>>20)+e|0)&(-271733879^e))+a[2]-1126478375)<<17|t>>>15)+n|0)&(n^e))+a[3]-1316259209)<<22|o>>>10)+t|0:(e=this.h0,o=this.h1,t=this.h2,((o+=((e=((e+=((n=this.h3)^o&(t^n))+a[0]-680876936)<<7|e>>>25)+o|0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[1]-389564586)<<12|n>>>20)+e|0)&(e^o))+a[2]+606105819)<<17|t>>>15)+n|0)&(n^e))+a[3]-1044525330)<<22|o>>>10)+t|0);o=((o+=((e=((e+=(n^o&(t^n))+a[4]-176418897)<<7|e>>>25)+o|0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[5]+1200080426)<<12|n>>>20)+e|0)&(e^o))+a[6]-1473231341)<<17|t>>>15)+n|0)&(n^e))+a[7]-45705983)<<22|o>>>10)+t|0,o=((o+=((e=((e+=(n^o&(t^n))+a[8]+1770035416)<<7|e>>>25)+o|0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[9]-1958414417)<<12|n>>>20)+e|0)&(e^o))+a[10]-42063)<<17|t>>>15)+n|0)&(n^e))+a[11]-1990404162)<<22|o>>>10)+t|0,o=((o+=((e=((e+=(n^o&(t^n))+a[12]+1804603682)<<7|e>>>25)+o|0)^(t=((t+=(o^(n=((n+=(t^e&(o^t))+a[13]-40341101)<<12|n>>>20)+e|0)&(e^o))+a[14]-1502002290)<<17|t>>>15)+n|0)&(n^e))+a[15]+1236535329)<<22|o>>>10)+t|0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[1]-165796510)<<5|e>>>27)+o|0)^o))+a[6]-1069501632)<<9|n>>>23)+e|0)^e&((t=((t+=(e^o&(n^e))+a[11]+643717713)<<14|t>>>18)+n|0)^n))+a[0]-373897302)<<20|o>>>12)+t|0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[5]-701558691)<<5|e>>>27)+o|0)^o))+a[10]+38016083)<<9|n>>>23)+e|0)^e&((t=((t+=(e^o&(n^e))+a[15]-660478335)<<14|t>>>18)+n|0)^n))+a[4]-405537848)<<20|o>>>12)+t|0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[9]+568446438)<<5|e>>>27)+o|0)^o))+a[14]-1019803690)<<9|n>>>23)+e|0)^e&((t=((t+=(e^o&(n^e))+a[3]-187363961)<<14|t>>>18)+n|0)^n))+a[8]+1163531501)<<20|o>>>12)+t|0,o=((o+=((n=((n+=(o^t&((e=((e+=(t^n&(o^t))+a[13]-1444681467)<<5|e>>>27)+o|0)^o))+a[2]-51403784)<<9|n>>>23)+e|0)^e&((t=((t+=(e^o&(n^e))+a[7]+1735328473)<<14|t>>>18)+n|0)^n))+a[12]-1926607734)<<20|o>>>12)+t|0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[5]-378558)<<4|e>>>28)+o|0))+a[8]-2022574463)<<11|n>>>21)+e|0)^e)^(t=((t+=(r^o)+a[11]+1839030562)<<16|t>>>16)+n|0))+a[14]-35309556)<<23|o>>>9)+t|0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[1]-1530992060)<<4|e>>>28)+o|0))+a[4]+1272893353)<<11|n>>>21)+e|0)^e)^(t=((t+=(r^o)+a[7]-155497632)<<16|t>>>16)+n|0))+a[10]-1094730640)<<23|o>>>9)+t|0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[13]+681279174)<<4|e>>>28)+o|0))+a[0]-358537222)<<11|n>>>21)+e|0)^e)^(t=((t+=(r^o)+a[3]-722521979)<<16|t>>>16)+n|0))+a[6]+76029189)<<23|o>>>9)+t|0,o=((o+=((r=(n=((n+=((i=o^t)^(e=((e+=(i^n)+a[9]-640364487)<<4|e>>>28)+o|0))+a[12]-421815835)<<11|n>>>21)+e|0)^e)^(t=((t+=(r^o)+a[15]+530742520)<<16|t>>>16)+n|0))+a[2]-995338651)<<23|o>>>9)+t|0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[0]-198630844)<<6|e>>>26)+o|0)|~t))+a[7]+1126891415)<<10|n>>>22)+e|0)^((t=((t+=(e^(n|~o))+a[14]-1416354905)<<15|t>>>17)+n|0)|~e))+a[5]-57434055)<<21|o>>>11)+t|0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[12]+1700485571)<<6|e>>>26)+o|0)|~t))+a[3]-1894986606)<<10|n>>>22)+e|0)^((t=((t+=(e^(n|~o))+a[10]-1051523)<<15|t>>>17)+n|0)|~e))+a[1]-2054922799)<<21|o>>>11)+t|0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[8]+1873313359)<<6|e>>>26)+o|0)|~t))+a[15]-30611744)<<10|n>>>22)+e|0)^((t=((t+=(e^(n|~o))+a[6]-1560198380)<<15|t>>>17)+n|0)|~e))+a[13]+1309151649)<<21|o>>>11)+t|0,o=((o+=((n=((n+=(o^((e=((e+=(t^(o|~n))+a[4]-145523070)<<6|e>>>26)+o|0)|~t))+a[11]-1120210379)<<10|n>>>22)+e|0)^((t=((t+=(e^(n|~o))+a[2]+718787259)<<15|t>>>17)+n|0)|~e))+a[9]-343485551)<<21|o>>>11)+t|0,this.first?(this.h0=e+1732584193|0,this.h1=o-271733879|0,this.h2=t-1732584194|0,this.h3=n+271733878|0,this.first=!1):(this.h0=this.h0+e|0,this.h1=this.h1+o|0,this.h2=this.h2+t|0,this.h3=this.h3+n|0)},E.prototype.toString=E.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return f[e>>>4&15]+f[15&e]+f[e>>>12&15]+f[e>>>8&15]+f[e>>>20&15]+f[e>>>16&15]+f[e>>>28&15]+f[e>>>24&15]+f[t>>>4&15]+f[15&t]+f[t>>>12&15]+f[t>>>8&15]+f[t>>>20&15]+f[t>>>16&15]+f[t>>>28&15]+f[t>>>24&15]+f[n>>>4&15]+f[15&n]+f[n>>>12&15]+f[n>>>8&15]+f[n>>>20&15]+f[n>>>16&15]+f[n>>>28&15]+f[n>>>24&15]+f[i>>>4&15]+f[15&i]+f[i>>>12&15]+f[i>>>8&15]+f[i>>>20&15]+f[i>>>16&15]+f[i>>>28&15]+f[i>>>24&15]},E.prototype.array=E.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&n,n>>>8&255,n>>>16&255,n>>>24&255,255&i,i>>>8&255,i>>>16&255,i>>>24&255]},E.prototype.buffer=E.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},E.prototype.base64=function(){for(var e,t,n,i="",r=this.array(),a=0;a<15;)e=r[a++],t=r[a++],n=r[a++],i+=_[e>>>2]+_[63&(e<<4|t>>>4)]+_[63&(t<<2|n>>>6)]+_[63&n];return e=r[a],i+(_[e>>>2]+_[e<<4&63]+"==")},(b.prototype=new E).finalize=function(){var e;E.prototype.finalize.call(this),this.inner&&(this.inner=!1,e=this.array(),E.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(e),E.prototype.finalize.call(this))};var w=function(){var e=a("hex");(e=h?function(e){var t,i=n(261),r=n(262).Buffer;return t=r.from&&!u.JS_MD5_NO_BUFFER_FROM?r.from:function(e){return new r(e)},function(n){if("string"==typeof n)return i.createHash("md5").update(n,"utf8").digest("hex");if(null==n)throw new Error(l);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),v(n)||A(n)||n.constructor===r?i.createHash("md5").update(t(n)).digest("hex"):e(n)}}(e):e).create=function(){return new E},e.update=function(t){return e.create().update(t)};for(var t=0;t<g.length;++t){var i=g[t];e[i]=a(i)}return e}();(w.md5=w).md5.hmac=function(){var e=o("hex");e.create=function(e){return new b(e)},e.update=function(t,n){return e.create(t).update(n)};for(var t=0;t<g.length;++t){var n=g[t];e[n]=o(n)}return e}(),c?e.exports=w:(u.md5=w,t&&void 0!==(i=function(){return w}.call(w,n,w,e))&&(e.exports=i))}).call(this,n(75),n(26))},,,function(e,t,n){n=[n(15),n(2),n(142),n(143)],t=function(e,t,n,i){function r(e){return t.isString(e.className)?e.className.split(" "):[]}function a(t,n){n=e.trim(n),t.className!==n&&(t.className=n)}var o={createElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},styleDimension:function(e){return e+(0<e.toString().indexOf("%")?"":"px")},classList:function(e){return e.classList||r(e)}};return o.hasClass=n.hasClass,o.addClass=function(e,n){var i=r(e);n=t.isArray(n)?n:n.split(" "),t.each(n,(function(e){t.contains(i,e)||i.push(e)})),a(e,i.join(" "))},o.removeClass=function(e,n){var i=r(e);n=t.isArray(n)?n:n.split(" "),a(e,t.difference(i,n).join(" "))},o.replaceClass=function(e,t,n){var i=e.className||"";t.test(i)?i=i.replace(t,n):n&&(i+=" "+n),a(e,i)},o.toggleClass=function(e,n,i){var r=o.hasClass(e,n);(i=t.isBoolean(i)?i:!r)!==r&&(i?o.addClass(e,n):o.removeClass(e,n))},o.emptyElement=function(e){if(e)for(var t=0;0<e.childElementCount-t;)e.children[t].hasAttribute("remove-ignore")&&e.children[t].getAttribute("remove-ignore")===i.DOM_REMOVE_IGNORE?t++:e.removeChild(e.children[t])},o.addStyleSheet=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},o.empty=function(e){if(e)for(var t=0;0<e.childElementCount-t;)e.children[t].hasAttribute("remove-ignore")&&e.children[t].getAttribute("remove-ignore")===i.DOM_REMOVE_IGNORE?t++:e.removeChild(e.children[t])},o.bounds=function(e){var t,n,i={left:0,right:0,width:0,height:0,top:0,bottom:0};return e&&document.body.contains(e)&&(e=e.getBoundingClientRect(e),t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,e.width||e.height||e.left||e.top)&&(i.left=e.left+n,i.right=e.right+n,i.top=e.top+t,i.bottom=e.bottom+t,i.width=e.right-e.left,i.height=e.bottom-e.top),i},o}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(16)],t=function(e){function t(t){return t===e.COMPLETE||t===e.ERROR?e.IDLE:t}return function(e,n,i){var r;(n=t(n))!==(i=t(i))&&(n={type:r=n.replace(/(?:ing|d)$/,""),newstate:n,oldstate:i,reason:e.mediaModel.get("state")},"play"===r&&(n.playReason=e.get("playReason")),this.trigger(r,n))}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(48),n(78),n(189),n(2),n(7),n(190),n(6),n(16),n(191)],t=function(e,t,n,i,r,a,o,s,l,u){function c(){var o,c,d,f,p=this,m=e.noop;function g(e,t){var n=r.extend({},t,{type:e});switch(e){case"flashThrottle":var i="resume"!==t.state;this.set("flashThrottle",i),this.set("flashBlocked",i);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":case"mute":return void this.set(e,t[e]);case s.JWPLAYER_MEDIA_TYPE:return void(this.mediaModel.get("mediaType")!==t.mediaType&&(this.mediaModel.set("mediaType",t.mediaType),this.mediaController.trigger(e,n)));case s.JWPLAYER_PLAYER_STATE:return void this.mediaModel.set("state",t.newstate);case s.JWPLAYER_MEDIA_BUFFER:this.set("buffer",t.bufferPercent);case s.JWPLAYER_MEDIA_META:i=t.duration,r.isNumber(i)&&(this.mediaModel.set("duration",i),this.set("duration",i)),t.duration===1/0&&this.trigger("alive");break;case s.JWPLAYER_MEDIA_BUFFER_FULL:this.mediaModel.get("playAttempt")&&this.playVideo(),this.mediaModel.on("change:playAttempt",(function(){this.playVideo()}),this);break;case s.JWPLAYER_MEDIA_TIME:this.mediaModel.set("position",t.position),this.set("position",t.position),r.isNumber(t.duration)&&(this.mediaModel.set("duration",t.duration),this.set("duration",t.duration),0<t.duration&&this.recordMediaPosition(t.position,t.duration),t.duration===1/0)&&this.trigger("alive"),this.advManage&&this.get("imageAdvs").advs&&this.advManage.refreshProcessAdv(t.position);break;case s.JWPLAYER_PROVIDER_CHANGED:this.set("provider",c.getName());break;case s.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(t.currentQuality,t.levels),this.mediaModel.set("levels",t.levels);break;case s.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(t.currentQuality,t.levels),this.persistQualityLevel(t.currentQuality,t.levels);break;case s.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(t.currentTrack,t.tracks),this.mediaModel.set("audioTracks",t.tracks);break;case s.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(t.currentTrack,t.tracks);break;case s.JWPLAYER_CONNECTING:this.trigger("connecting");break;case s.JWPLAYER_CONNECT_FAILD:this.trigger("connectFaild");break;case s.JWPLAYER_ALIVE:this.trigger("alive");break;case s.JWPLAYER_NO_LIVE_STREAM:this.trigger("noLiveStream");break;case s.JWPLAYER_LIVE_STOP:this.trigger("liveStop");break;case"stop":this.set("duration",0);break;case"subtitlesTrackChanged":this.setVideoSubtitleTrack(t.currentTrack,t.tracks);break;case"visualQuality":i=r.extend({},t),this.mediaModel.set("visualQuality",i);break;case s.JWPLAYER_PLAYBACKRATE:this.set("playbackRate",t.playbackRate),this.mediaModel.set("playbackRate",t.playbackRate);break;case s.JWPLAYER_HLS_QUALITYLIST_CHANGE:this.mediaModel.set("hlsQualityListChange",t.levels)}this.mediaController.trigger(e,n)}this.mediaController=r.extend({},a),this.mediaModel=new h,this.advManage=null,i.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(t){if(f=new n,r.extend(this.attributes,t,{item:0,state:l.IDLE,flashBlocked:!1,fullscreen:!1,compactUI:!1,scrubbing:!1,duration:t.duration||0,position:0,buffer:0}),e.isMobile()&&!t.mobileSdk)try{var i=new AudioContext;i&&("running"!==i.state||e.isWeChat())&&this.set("autostart",!1)}catch(t){this.set("autostart",!1)}return this.get("imageAdvs")&&(this.advManage=new u.default(this.get("imageAdvs"))),this.updateProviders(),this},this.getConfiguration=function(){return r.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){o=new t(this.getConfiguration())},this.recordMediaPosition=function(e,t){var n=d&&d.sources&&d.sources[0],i=this;n&&n.file&&!isNaN(e)&&!isNaN(t)&&0<t&&!1!==isFinite(t)&&r.each(d.sources,(function(n){parseInt(e)<parseInt(t)&&2<e?i.mediaModel.get("isMemoryPlay")&&f.setItem("filePostion."+n.file,e):parseInt(e)>=parseInt(t)&&f.clearItem("filePostion."+n.file)}))},this.getLastPosition=function(t){var n=0;return t&&"array"===e.typeOf(t.sources)&&0<t.sources.length&&f.getItem("filePostion."+t.sources[0].file)?f.getItem("filePostion."+t.sources[0].file):n},this.setQualityLevel=function(e,t){-1<e&&1<t.length&&this.mediaModel.set("currentLevel",parseInt(e))},this.setCurrentQuality=function(e){c.setCurrentQuality(e)},this.persistQualityLevel=function(e,t){t=(t[e]||{}).label,this.set("qualityLabel",t)},this.setCurrentAudioTrack=function(e,t){-1<e&&0<t.length&&e<t.length&&this.mediaModel.set("currentAudioTrack",parseInt(e))},this.onMediaContainer=function(){var e=this.get("mediaContainer");m.setContainer(e)},this.changeVideoProvider=function(e){var t;this.off("change:mediaContainer",this.onMediaContainer),c&&(c.off(null,null,this),c.getContainer())&&c.remove(),e?(m=new e(p.get("id"),p.getConfiguration()),(t=this.get("mediaContainer"))?m.setContainer(t):this.once("change:mediaContainer",this.onMediaContainer),this.once("change:provider",(function(){this.setVolume(this.get("volume"))}),this),this.set("provider",m.getName()),-1===m.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),(c=m).volume(p.get("volume")),c.mute(p.get("mute")),c.on("all",g,this)):(c=m=e,this.set("provider",void 0))},this.destroy=async function(){c&&(c.off(null,null,this),await c.destroy())},this.getVideo=function(){return c},this.setFullscreen=function(e){(e=!!e)!==p.get("fullscreen")&&p.set("fullscreen",e)},this.chooseProvider=function(e){return o.choose(e).provider},this.setActiveItem=function(e,t,n){c&&c.extPlayerPTS&&(e.starttime=c.extPlayerPTS,this.set("starttime",e.starttime||0)),this.mediaModel.off(),this.mediaModel=new h,this.set("mediaModel",this.mediaModel);let i=e.starttime||0;n&&n.url&&(i=n.starttime||0,e.starttime=i,this.set("starttime",i),this.set("duration",n.duration||0),this.set("playAttempt",!1)),this.set("position",i),this.set("duration",this.get("duration")?this.get("duration"):e.duration||0),this.setProvider(e,t)},this.setProvider=function(e,t){t=null!=t?Number(t):0,void 0!==(t=e&&e.sources&&e.sources[t])&&(d=e,t=this.chooseProvider(t),p.changeVideoProvider(t),m)&&(m.init&&m.init(e,this.attributes),this.trigger("itemReady",e))},this.getCurrentItem=function(){return d},this.getProviders=function(){return o},this.resetProvider=function(){m=null},this.setVolume=function(e){e=Math.round(e),e=c&&"html5"===c.getName().name?Math.min(e,100):Math.min(e,500),p.set("volume",e),c&&c.volume(e),(e=0===e)!==p.get("mute")&&p.setMute(e)},this.enableGPU=function(){c.enableGPU()},this.disableGPU=function(){c.disableGPU()},this.setToken=function(e){var t=[];"string"==typeof arguments[0]&&"string"==typeof arguments[1]&&(t[0]={file:arguments[0],tokenText:arguments[1]},e=t),c.setToken&&c.setToken(e)},this.setMute=function(t){e.exists(t)||(t=!this.get("mute")),this.set("mute",t),c&&c.mute(t),t||(t=0==this.get("volume")&&this.attributes.origin_volume?this.attributes.origin_volume:0!=this.get("volume")?this.get("volume"):10,this.setVolume(t))},this.loadVideo=function(e){e||(t=this.get("item"),e=this.get("playlist")[t]),void 0!==this.get("starttime")&&(e.starttime=this.get("starttime"));var t=this.get("isMemoryPlay");t&&(this.mediaModel.set("isMemoryPlay",!0),e.starttime=this.getLastPosition(e)),this.set("position",e.starttime||0),this.set("duration",e.duration||0),this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(s.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),c.load(e)},this.stopVideo=function(){c&&c.stop()},this.playVideo=function(){c.play()},this.prevFrame=function(){return c.prevFrame()},this.nextFrame=function(){return c.nextFrame()},this.snapshot=function(e){return c.snapshot(e)},this.test1=function(){c.test1()},this.persistCaptionsTrack=function(){var e=this.get("captionsTrack");e?this.set("captionLabel",e.label):this.set("captionLabel","Off")},this.setDanmuStatus=function(){var e=JSON.parse(JSON.stringify(p.get("danmaku")));p.set("danmaku",Object.assign(e,{active:!e.active}))},this.setVideoSubtitleTrack=function(e,t){this.set("captionsIndex",e),e&&t&&e<=t.length&&t[e-1].data&&this.set("captionsTrack",t[e-1]),c&&c.setSubtitlesTrack&&c.setSubtitlesTrack(e)},this.persistVideoSubtitleTrack=function(e){this.setVideoSubtitleTrack(e),this.persistCaptionsTrack()},this.setPlaybackRate=function(e){c.setPlaybackRate(e)},this.changeHlsQuality=function(e){c.changeHlsQuality(e)},this.getMediaInfo=function(){return c.getMediaInfo()},this.gobackLive=function(){c.gobackLive()},this.setMaxSeekTime=function(e){c.setMaxSeekTime(e)},this.VR=function(){return c.VR()}}var h=c.MediaModel=function(){this.set("state",l.IDLE)};return r.extend(c.prototype,o),r.extend(h.prototype,o),c}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t){var n,i;function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}e=e.exports={};try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var s,l=[],u=!1,c=-1;function h(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length)&&d()}function d(){if(!u){for(var e=o(h),t=(u=!0,l.length);t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){n.r(t),function(e){var i=n(119),r=n(20),a=n(29),o=n(0),s=n(1),l=n.n(s);let u=n(178),c=n(179);t.default={MPEG_JS_Module:class{constructor(e){this.configFormat={},this.isLive=0,this.mediaAttr={sampleRate:0,sampleChannel:0,vFps:0,vGop:0,vDuration:0,aDuration:0,duration:0,aCodec:"",vCodec:"",audioNone:!1},this.extensionInfo={vWidth:0,vHeight:0},this.controller=new AbortController,this.offsetDemux=null,this.wasmState=0,this.naluLayer=null,this.vlcLayer=null,this.onReady=null,this.onDemuxed=null,this.onDemuxedFailed=null,this.aacDec=null,this.demux=null,this.onNalu=null,this.onError=null,this.onWasmError=null}makeWasm(){var e=Object(r.getPlayerPath)();this.demux=new a.a,this.demux.postMessage({t:o.d.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.demux.onmessage=e=>{var t=e.data;switch(t.t){case o.c.WASM_LOAD_FINISH:case o.c.WASM_POST_RUN:null!=this.onReady&&0==this.wasmState&&(this.wasmState=1,this.onReady());break;case o.c.DEMUXER_INIT_FINISH:break;case o.c.POST_DEMUXER_INFO:let n=null;n=1==e.data.type&&this.mediaAttr.aCodec==c.DEF_AAC?this.aacDec.sliceAACFrames(e.data.ptime,e.data.src):e.data.src.buffer,e.data.data=n,this.onNalu(e.data);break;case o.c.DEMUXER_FINISH:this.mediaAttr=t.mediaAttr,this.extensionInfo=t.extensionInfo,null==this.aacDec?this.aacDec=new u.AACDecoder(this.mediaAttr):this.aacDec.updateConfig(this.mediaAttr),null!=this.onDemuxed&&this.onDemuxed();break;case o.c.DEMUXER_ERROR:this.onError&&this.onError(t);break;case o.c.WAMS_ERROR:this.onWasmError&&this.onWasmError(t.data)}}}initDemuxer(){let t=this;if(window.WebAssembly)this.makeWasm(),1===e.STATIC_MEM_wasmDecoderState?(t.wasmState=1,t.onReady()):(Module.onRuntimeInitialized=()=>{null!=t.onReady&&0==t.wasmState&&(t.wasmState=1,t.onReady())},Module.postRun=()=>{null!=t.onReady&&0==t.wasmState&&(t.wasmState=1,t.onReady())});else{let e="unsupport WASM!";/iPhone|iPad/.test(window.navigator.userAgent)&&(e+=" ios:min-version 11")}return this.WorkerFetch(),!0}WorkerFetch(){this.downloaderWorker=new i.a,this.downloaderWorker.onmessage=e=>{this._demuxCore(e.data)}}demuxURL(e){this.downloaderWorker.postMessage({videoURL:e,type:"pushUrl"})}demuxUint8Buf(e){this._demuxCore(e)}_demuxerTsInit(e){let t=this;var n=this.controller.signal;fetch(e,{signal:n}).then((e=>e.arrayBuffer())).then((e=>{e.fileStart=0,null!=(e=new Uint8Array(e))&&t._demuxCore(e)})).catch((n=>{t._releaseOffset(),t.onDemuxedFailed&&t.onDemuxedFailed(n,e)}))}_releaseOffset(){void 0!==this.offsetDemux&&null!==this.offsetDemux&&(Module._free(this.offsetDemux),this.offsetDemux=null)}_demuxCore(e){this.demux.postMessage({t:o.d.DEMUXER_BOX,d:e,isLive:this.isLive},[e.buffer])}_setMediaInfo(){var e=Module.cwrap("getMediaInfo","number",[])(),t=Module.HEAPU32[e/4],n=Module.HEAPU32[e/4+1],i=Module.HEAPF64[e/8+1],r=Module.HEAPF64[e/8+1+1],a=Module.HEAPF64[e/8+1+1+1],o=Module.HEAPF64[e/8+1+1+1+1];e=Module.HEAPU32[e/4+2+2+2+2+2],0<=(0<=(this.mediaAttr.vFps=i,this.mediaAttr.vGop=e,this.mediaAttr.vDuration=r,this.mediaAttr.aDuration=a,this.mediaAttr.duration=o,i=Module.cwrap("getAudioCodecID","number",[])())?(this.mediaAttr.aCodec=c.CODEC_OFFSET_TABLE[i],this.mediaAttr.sampleRate=0<t?t:c.DEFAULT_SAMPLERATE,this.mediaAttr.sampleChannel=0<=n?n:c.DEFAULT_CHANNEL):(this.mediaAttr.sampleRate=0,this.mediaAttr.sampleChannel=0,this.mediaAttr.audioNone=!0),e=Module.cwrap("getVideoCodecID","number",[])())&&(this.mediaAttr.vCodec=c.CODEC_OFFSET_TABLE[e]),null==this.aacDec?this.aacDec=new u.AACDecoder(this.mediaAttr):this.aacDec.updateConfig(this.mediaAttr)}_setExtensionInfo(){var e=Module.cwrap("getExtensionInfo","number",[])(),t=Module.HEAPU32[e/4];e=Module.HEAPU32[e/4+1],this.extensionInfo.vWidth=t,this.extensionInfo.vHeight=e}readMediaInfo(){return this.mediaAttr}readExtensionInfo(){return this.extensionInfo}readAudioNone(){return this.mediaAttr.audioNone}_readLayer(){null===this.naluLayer?this.naluLayer={vps:null,sps:null,pps:null,sei:null}:(this.naluLayer.vps=null,this.naluLayer.sps=null,this.naluLayer.pps=null,this.naluLayer.sei=null),null===this.vlcLayer?this.vlcLayer={vlc:null}:this.vlcLayer.vlc=null;var e,t,n,i,r=Module.cwrap("getSPSLen","number",[])(),a=Module.cwrap("getSPS","number",[])();if(!(r<0))return a=Module.HEAPU8.subarray(a,a+r),this.naluLayer.sps=new Uint8Array(r),this.naluLayer.sps.set(a,0),r=Module.cwrap("getPPSLen","number",[])(),e=Module.cwrap("getPPS","number",[])(),e=Module.HEAPU8.subarray(e,e+r),this.naluLayer.pps=new Uint8Array(r),this.naluLayer.pps.set(e,0),r=Module.cwrap("getSEILen","number",[])(),t=Module.cwrap("getSEI","number",[])(),t=Module.HEAPU8.subarray(t,t+r),this.naluLayer.sei=new Uint8Array(r),this.naluLayer.sei.set(t,0),r=Module.cwrap("getVLCLen","number",[])(),n=Module.cwrap("getVLC","number",[])(),n=Module.HEAPU8.subarray(n,n+r),this.vlcLayer.vlc=new Uint8Array(r),this.vlcLayer.vlc.set(n,0),this.mediaAttr.vCodec==c.DEF_HEVC||this.mediaAttr.vCodec==c.DEF_H265?(r=Module.cwrap("getVPSLen","number",[])(),i=Module.cwrap("getVPS","number",[])(),i=Module.HEAPU8.subarray(i,i+r),this.naluLayer.vps=new Uint8Array(r),this.naluLayer.vps.set(i,0),Module._free(i),i=null):this.mediaAttr.vCodec!=c.DEF_AVC&&(this.mediaAttr.vCodec,c.DEF_H264),Module._free(a),a=null,Module._free(e),e=null,Module._free(t),t=null,Module._free(n),n=null,{nalu:this.naluLayer,vlc:this.vlcLayer}}isHEVC(){return this.mediaAttr.vCodec==c.DEF_HEVC||this.mediaAttr.vCodec==c.DEF_H265}readPacket(){this.demux.postMessage({t:o.d.GET_DEMUXER_INFO})}_refreshDemuxer(){this.releaseTsDemuxer(),this._initDemuxer()}_initDemuxer(){Module.cwrap("initTsMissile","number",[])(),Module.cwrap("initializeDemuxer","number",[])()}releaseTsDemuxer(){}release(){this.downloaderWorker.postMessage({type:"destory"}),this.downloaderWorker&&this.downloaderWorker.terminate(),this.demux.postMessage({t:o.d.RELEASE_DEMUXER}),this.demux.postMessage({t:o.d.RELEASE_DECODE}),this.demux&&this.demux.terminate()}}}}.call(this,n(26))},function(e,t,n){let i=n(103),r=[i.HEVC_NAL_VPS,i.HEVC_NAL_SPS,i.HEVC_NAL_PPS,i.HEVC_NAL_SEI_PREFIX,i.HEVC_NAL_SEI_SUFFIX];e.exports={IS_HEV_PS_INFO_CHAR:e=>(e=(126&e)>>1,r.indexOf(e)),GET_NALU_TYPE:e=>1<=(e=(126&e)>>1)&&e<=9?i.DEFINE_P_FRAME:16<=e&&e<=21?i.DEFINE_KEY_FRAME:0<=(e=r.indexOf(e))?r[e]:i.DEFINE_OTHERS_FRAME,PACK_NALU:e=>{var t=e.nalu,n=(e=e.vlc.vlc,null==t.vps&&(t.vps=new Uint8Array),new Uint8Array(t.vps.length+t.sps.length+t.pps.length+t.sei.length+e.length));return n.set(t.vps,0),n.set(t.sps,t.vps.length),n.set(t.pps,t.vps.length+t.sps.length),n.set(t.sei,t.vps.length+t.sps.length+t.pps.length),n.set(e,t.vps.length+t.sps.length+t.pps.length+t.sei.length),n}}},function(e,t,n){n=[n(2),n(1)],t=function(e,t){var n={getItem:t.noop,setItem:t.noop,removeItem:t.noop};try{n=window.localStorage}catch(a){}function i(e){return("baiducyberplayer."+e).toString()}function r(e,t){try{n[i(e)]=t}catch(e){__DEBUG__}}function a(){this.persistItems=["volume","mute","captionLabel","qualityLabel","playbackRate"]}return e.extend(a.prototype,{getAllItems:function(){return e.reduce(this.persistItems,(function(e,r){var a=n[i(r)];return a&&(e[r]=t.serialize(a)),e}),{})},track:function(t){e.each(this.persistItems,(function(e){t.on("change:"+e,(function(t,n){r(e,n)}))}))},clear:function(){e.each(this.persistItems,(function(e){n.removeItem(i(e))}))},setItem:r,getItem:function(e){return n[i(e)]},clearItem:function(e){return n.removeItem(i(e))}}),a}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(210),n(211),n(108),n(62)],t=function(e,t,n,i){var r={},a={};return{loadPlugins:function(n,i){return a[n]=new e(new t(r),i),a[n]},registerPlugin:function(e,t,a,o){var s=i.getPluginName(e);r[s]||(r[s]=new n(e)),r[s].registerPlugin(e,t,a,o)}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(6),n(7),n(2)],t=function(e,t,n){function i(i,o){var s=n.extend(this,t),l=a.NEW;function u(t){l=a.ERROR,s.trigger(e.ERROR,t)}function c(t){l=a.COMPLETE,s.trigger(e.COMPLETE,t)}this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},this.makeScriptTag=function(e){var t=document.createElement("script");return t.src=e,t},this.makeTag=o?this.makeStyleLink:this.makeScriptTag,this.load=function(){var t,n,s,h;l===a.NEW&&((t=r[i])&&(l=t.getStatus())<2?(t.on(e.ERROR,u),t.on(e.COMPLETE,c)):(n=document.getElementsByTagName("head")[0]||document.documentElement,s=this.makeTag(i),h=!1,s.onload=s.onreadystatechange=function(e){h||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(h=!0,c(e),s.onload=s.onreadystatechange=null,n&&s.parentNode&&!o&&n.removeChild(s))},s.onerror=u,n.insertBefore(s,n.firstChild),l=a.LOADING,r[i]=this))},this.getStatus=function(){return l}}var r={},a={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};return i.loaderstatus=a,i}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(15)],t=function(e,t){var n=e.seconds;return function(e){var i=[],r=(e=(e=(e=t.trim(e)).replace(/\n\n \n\n/g,"\r\n\r\n")).replace(/\n \n\n/g,"\r\n\r\n")).split("\r\n\r\n");1===r.length&&(r=e.split("\n\n"));for(var a,o=0;o<r.length;o++)"WEBVTT"!==r[o]&&(r[o]=r[o].replace(/\n\n/g,"\r\n"),(a=function(e){var t,i,r={},a=e.split("\r\n");return 1===a.length&&(a=e.split("\n")),e=1,0<a[0].indexOf(" --\x3e ")&&(e=0),a.length>e+1&&a[e+1]&&0<(i=(t=a[e]).indexOf(" --\x3e "))&&(r.begin=n(t.substr(0,i)),r.end=n(t.substr(i+5)),r.text=a.slice(e+1).join("<br/>")),r}(r[o])).text)&&i.push(a);return i}}.apply(t,n),void 0!==t&&(e.exports=t)},,,,,,,,,,,,,,,,,function(e,t,n){n=[n(2)],t=function(e){var t={},n=e.memoize((function(e){return null!==navigator.userAgent.toLowerCase().match(e)}));function i(e){return function(){return n(e)}}var r=t.isInt=function(e){return parseFloat(e)%1==0},a=(t.isFlashSupported=function(){var e=t.flashVersion();return e&&e>=__FLASH_VERSION__},t.isFF=i(/firefox/i),t.isIPod=i(/iP(hone|od)/i),t.isIPad=i(/iPad/i),t.isSafari602=i(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),t.isOSX=i(/Mac OS X/i),t.isEdge=i(/\sedge\/\d+/i),t.isIETrident=function(e){return!!t.isEdge()||(e?(e=parseFloat(e).toFixed(1),n(new RegExp("trident/.+rv:\\s*"+e,"i"))):n(/trident/i))}),o=t.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),n(new RegExp("msie\\s*"+e,"i"))):n(/msie/i)},s=i(/chrome/i),l=(t.isChrome=function(){return s()&&!t.isEdge()},t.isChrome66=function(){var e=window.navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/);return!!(this.isChrome()&&e&&e[1]&&66<=parseInt(e[1]))},t.isIE=function(e){return e?(11<=(e=parseFloat(e).toFixed(1))?a:o)(e):o()||a()},t.isSafari=function(){return n(/safari/i)&&!n(/chrome/i)&&!n(/chromium/i)&&!n(/android/i)},t.isIOS=function(e){return n(e?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+e+"|.*\\sVersion/"+e+")","i"):/iP(hone|ad|od)/i)}),u=(t.isAndroidNative=function(e){return u(e,!0)},t.isAndroid=function(e,t){return!(t&&n(/chrome\/[123456789]/i)&&!n(/chrome\/18/))&&(e?(r(e)&&!/\./.test(e)&&(e+="."),n(new RegExp("Android\\s*"+e,"i"))):n(/Android/i))});return t.isMobile=function(){return l()||u()},t.isWeChat=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},t.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},t.flashVersion=function(){if(t.isAndroid())return 0;var e,n=navigator.plugins;if(n&&(e=n["Shockwave Flash"])&&e.description)return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if(void 0===window.ActiveXObject)return 0;try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(e){return 0}return e},t.getBrowserInfo=function(){var e,t=window.navigator.userAgent.toLowerCase();return this.isIE()?t.match(/msie ([\d.]+)/)?"IE-"+t.match(/msie ([\d.]+)/)[1]:"IE-unknown":this.isChrome()?(e=t.match(/chrome\/([\d.]+)/))&&1<e.length?"Chrome-"+e[1]:"Chrome-unknown":this.isFF()?"Firefox-"+t.match(/firefox\/([\d.]+)/)[1]:this.isSafari()?"Safari"+((e=t.match(/version\/([\d.]+)/))&&e.length?"-"+t.match(/version\/([\d.]+)/)[1]:""):l()?"ios":u()?"android":"other"},t.isPoorIE=function(){return this.isIE()&&(o(8)||o(7)||o(6)||document.documentMode&&document.documentMode<=8)},t.getChromeVersion=function(){var e=window.navigator.userAgent.toLowerCase();return this.isChrome()&&(e=e.match(/chrome\/([\d.]+)/))&&1<e.length?e[1]:-1},t.browserJudge=function(){let e=window.document,t=window.navigator.userAgent.toLowerCase(),n=e.documentMode,i=window.chrome||!1,r={agent:t,isIE:/msie/.test(t),isGecko:0<t.indexOf("gecko")&&t.indexOf("like gecko")<0,isWebkit:0<t.indexOf("webkit"),isStrict:"CSS1Compat"===e.compatMode,supportSubTitle:function(){return"track"in e.createElement("track")},supportScope:function(){return"scoped"in e.createElement("style")},ieVersion:function(){try{return t.match(/msie ([\d.]+)/)[1]||0}catch(e){return n}},operaVersion:function(){try{return window.opera?t.match(/opera.([\d.]+)/)[1]:0<t.indexOf("opr")?t.match(/opr\/([\d.]+)/)[1]:void 0}catch(e){return 0}},versionFilter:function(){if(1!==arguments.length||"string"!=typeof arguments[0])return 1===arguments.length?arguments[0]:0;var e=arguments[0],t=e.indexOf(".");return 0<t&&-1!==(t=e.indexOf(".",t+1))?e.substr(0,t):e}};try{r.type=r.isIE?"IE":window.opera||0<t.indexOf("opr")?"Opera":0<t.indexOf("chrome")?"Chrome":0<t.indexOf("safari")||window.openDatabase?"Safari":0<t.indexOf("firefox")?"Firefox":"unknow",r.version="IE"===r.type?r.ieVersion():"Firefox"===r.type?t.match(/firefox\/([\d.]+)/)[1]:"Chrome"===r.type?t.match(/chrome\/([\d.]+)/)[1]:"Opera"===r.type?r.operaVersion():"Safari"===r.type?t.match(/version\/([\d.]+)/)[1]:"0",r.shell=function(){var e,n;return 0<t.indexOf("maxthon")?(r.version=t.match(/maxthon\/([\d.]+)/)[1]||r.version,"傲游浏览器"):0<t.indexOf("qqbrowser")?(r.version=t.match(/qqbrowser\/([\d.]+)/)[1]||r.version,"QQ浏览器"):0<t.indexOf("se 2.x")?"搜狗浏览器":i&&"Opera"!==r.type?(n=window.external,e=window.clientInformation.languages,n&&"LiebaoGetVersion"in n?"猎豹浏览器":0<t.indexOf("bidubrowser")?(r.version=t.match(/bidubrowser\/([\d.]+)/)[1]||t.match(/chrome\/([\d.]+)/)[1],"百度浏览器"):r.supportSubTitle()&&void 0===e?(n=Object.keys(i.webstore).length,window,1<n?"360极速浏览器":"360安全浏览器"):"Chrome"):r.type},r.name=r.shell(),r.version=r.versionFilter(r.version)}catch(e){}return[r.type,r.version]},t.isSupportWASM=function(){if(!1===(n=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})()))return!1;if(!0===n){var e=(n=t.browserJudge())[0],n=n[1];if("Chrome"===e&&n<85)return!1;if(0<=e.indexOf("360"))return!1;if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&13<n)return!1}return!0},t.isPictureInpicture=()=>document.pictureInPictureEnabled,t}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){var t={},n={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};return t.utf8ArrayToStr=function(e,t){for(var n,i,r,a="",o=e.length,s=t||0;s<o;)if(0!==(n=e[s++])&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=e[s++],a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e[s++],r=e[s++],a+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r)}return a},t.utf16BigEndianArrayToStr=function(e,t){for(var n="",i=e.length-1,r=t||0;r<i;)254===e[r]&&255===e[r+1]||(n+=String.fromCharCode((e[r]<<8)+e[r+1])),r+=2;return n},t.syncSafeInt=function(e){return 127&(e=t.arrayToInt(e))|(32512&e)>>1|(8323072&e)>>2|(2130706432&e)>>3},t.arrayToInt=function(e){for(var t="0x",n=0;n<e.length;n++)t+=e[n].toString(16);return parseInt(t)},t.parseID3=function(i){return e.reduce(i,(function(i,r){if(!("value"in r)&&"data"in r&&r.data instanceof ArrayBuffer){for(var a=new Uint8Array(r.data),o=a.length,s=(r={value:{key:"",data:""}},10);s<14&&s<a.length&&0!==a[s];)r.value.key+=String.fromCharCode(a[s]),s++;var l,u=19,c=a[u],h=(3!==c&&0!==c||(c=a[++u],o--),0);if(1!==c&&2!==c)for(var d=u+1;d<o;d++)if(0===a[d]){h=d-u;break}0<h?(c=t.utf8ArrayToStr(a.subarray(u,u+=h),0),"PRIV"===r.value.key?("com.apple.streaming.transportStreamTimestamp"===c?(l=1&t.syncSafeInt(a.subarray(u,u+=4)),f=t.syncSafeInt(a.subarray(u,u+=4)),l&&(f+=4294967296),r.value.data=f):r.value.data=t.utf8ArrayToStr(a,u+1),r.value.info=c):(r.value.info=c,r.value.data=t.utf8ArrayToStr(a,u+1))):(l=a[u],r.value.data=1===l||2===l?t.utf16BigEndianArrayToStr(a,u+1):t.utf8ArrayToStr(a,u+1))}var f;return n.hasOwnProperty(r.value.key)&&(i[n[r.value.key]]=r.value.data),r.value.info?(f=i[r.value.key],e.isObject(f)||(i[r.value.key]=f={}),f[r.value.info]=r.value.data):i[r.value.key]=r.value.data,i}),{})},t}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){return function(){var t={},n={},i={},r={};return{start:function(n){t[n]=e.now(),i[n]=i[n]+1||1},end:function(i){var r;t[i]&&(r=e.now()-t[i],n[i]=n[i]+r||r)},dump:function(){return{counts:i,sums:n,events:r}},tick:function(t,n){r[t]=n||e.now()},between:function(e,t){return r[t]&&r[e]?r[t]-r[e]:-1}}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(6),n(16),n(2)],t=function(e,t,n,i){return e=e.noop,{supports:i=i.constant(!1),prevFrame:e,nextFrame:e,snapshot:e,test1:e,play:e,load:e,stop:e,volume:e,mute:e,seek:e,resize:e,remove:e,destroy:e,setVisibility:e,setFullscreen:i,getFullscreen:e,getContainer:e,setContainer:i,getName:e,getQualityLevels:e,getCurrentQuality:e,setCurrentQuality:e,getAudioTracks:e,getCurrentAudioTrack:e,setCurrentAudioTrack:e,checkComplete:e,setControls:e,attachMedia:e,detachMedia:e,setState:function(e){var i=this.state||n.IDLE;(this.state=e)!==i&&this.trigger(t.JWPLAYER_PLAYER_STATE,{newstate:e})},sendMediaType:function(e){e=e[0].type,this.trigger(t.JWPLAYER_MEDIA_TYPE,{mediaType:"oga"===e||"aac"===e||"mp3"===e||"mpeg"===e||"vorbis"===e?"audio":"video"})}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(2),n(153),n(46)],t=function(e,t,n,i){return[{name:"cybercore",supports:function(e){return!!(i.isHls(e.file,"")||i.isMp4(e.file,"")||i.isMov(e.file,"")||i.isFlv(e.file,"")||i.isMpegTs(e.file,"")||i.isMpd(e.file,"")||i.isRtc(e.type)||i.isMp3(e.file,"")||i.isAac(e.file,"")||i.isFlac(e.file,"")||i.isOgg(e.file,"")||i.isWav(e.file,"")||i.isOpus(e.file,""))&&e.isHEVC}}]}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t){e.exports={HEVC_NAL_TRAIL_N:0,HEVC_NAL_TRAIL_R:1,HEVC_NAL_TSA_N:2,HEVC_NAL_TSA_R:3,HEVC_NAL_STSA_N:4,HEVC_NAL_STSA_R:5,HEVC_NAL_RADL_N:6,HEVC_NAL_RADL_R:7,HEVC_NAL_RASL_N:8,HEVC_NAL_RASL_R:9,HEVC_NAL_VCL_N10:10,HEVC_NAL_VCL_R11:11,HEVC_NAL_VCL_N12:12,HEVC_NAL_VCL_R13:13,HEVC_NAL_VCL_N14:14,HEVC_NAL_VCL_R15:15,HEVC_NAL_BLA_W_LP:16,HEVC_NAL_BLA_W_RADL:17,HEVC_NAL_BLA_N_LP:18,HEVC_NAL_IDR_W_RADL:19,HEVC_NAL_IDR_N_LP:20,HEVC_NAL_CRA_NUT:21,HEVC_NAL_IRAP_VCL22:22,HEVC_NAL_IRAP_VCL23:23,HEVC_NAL_RSV_VCL24:24,HEVC_NAL_RSV_VCL25:25,HEVC_NAL_RSV_VCL26:26,HEVC_NAL_RSV_VCL27:27,HEVC_NAL_RSV_VCL28:28,HEVC_NAL_RSV_VCL29:29,HEVC_NAL_RSV_VCL30:30,HEVC_NAL_RSV_VCL31:31,HEVC_NAL_VPS:32,HEVC_NAL_SPS:33,HEVC_NAL_PPS:34,HEVC_NAL_AUD:35,HEVC_NAL_EOS_NUT:36,HEVC_NAL_EOB_NUT:37,HEVC_NAL_FD_NUT:38,HEVC_NAL_SEI_PREFIX:39,HEVC_NAL_SEI_SUFFIX:40,HEVC_NAL_RSV_NVCL41:41,HEVC_NAL_RSV_NVCL42:42,HEVC_NAL_RSV_NVCL43:43,HEVC_NAL_RSV_NVCL44:44,HEVC_NAL_RSV_NVCL45:45,HEVC_NAL_RSV_NVCL46:46,HEVC_NAL_RSV_NVCL47:47,HEVC_NAL_UNSPEC48:48,HEVC_NAL_UNSPEC49:49,HEVC_NAL_UNSPEC50:50,HEVC_NAL_UNSPEC51:51,HEVC_NAL_UNSPEC52:52,HEVC_NAL_UNSPEC53:53,HEVC_NAL_UNSPEC54:54,HEVC_NAL_UNSPEC55:55,HEVC_NAL_UNSPEC56:56,HEVC_NAL_UNSPEC57:57,HEVC_NAL_UNSPEC58:58,HEVC_NAL_UNSPEC59:59,HEVC_NAL_UNSPEC60:60,HEVC_NAL_UNSPEC61:61,HEVC_NAL_UNSPEC62:62,HEVC_NAL_UNSPEC63:63,SOURCE_CODE_VPS:64,SOURCE_CODE_SPS:66,SOURCE_CODE_PPS:68,SOURCE_CODE_SEI:78,SOURCE_CODE_IDR:38,SOURCE_CODE_P:2,SOURCE_CODE_SEI_END:128,DEFINE_STARTCODE:new Uint8Array([0,0,0,1]),DEFINE_KEY_FRAME:21,DEFINE_P_FRAME:9,DEFINE_OTHERS_FRAME:153}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=h;var r=n(22),a=i(n(32)),o=n(105),s=n(200),l=i(n(106)),u=n(107),c=(t.VERSION="4.7.8",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"},"[object Object]");function h(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},o.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(r.toString.call(e)===c){if(t)throw new a.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===c)r.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===c){if(t)throw new a.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}},n=l.default.log,t.log=n,t.createFrame=r.createFrame,t.logger=l.default},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){r.default(e),a.default(e),o.default(e),s.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var r=i(n(193)),a=i(n(194)),o=i(n(195)),s=i(n(196)),l=i(n(197)),u=i(n(198)),c=i(n(199))},function(e,t,n){t.__esModule=!0;var i=n(22),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){var t;return"string"==typeof e?0<=(t=i.indexOf(r.methodMap,e.toLowerCase()))?t:parseInt(e,10):e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){e=r.methodMap[e],console[e]||(e="log");for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]}}};t.default=r,e.exports=t.default},function(e,t,n){t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null),n=(t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1,Object.create(null));return n.__proto__=!1,{properties:{whitelist:i.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:i.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(!0!==a[e=t]&&(a[e]=!0,r.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1)}("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(a).forEach((function(e){delete a[e]}))};var i=n(202),r=(t=n(106),(n=t)&&n.__esModule?n:{default:n}),a=Object.create(null)},function(e,t,n){n=[n(1),n(62),n(6),n(7),n(80),n(2)],t=function(e,t,n,i,r,a){return function(o){var s,l,u,c,h=a.extend(this,i),d=r.loaderstatus.NEW;function f(){switch(t.getPluginPathType(o)){case t.pluginPathType.ABSOLUTE:return o;case t.pluginPathType.RELATIVE:return e.getAbsolutePath(o,window.location.href)}}function p(){a.defer((function(){d=r.loaderstatus.COMPLETE,h.trigger(n.COMPLETE)}))}function m(){d=r.loaderstatus.ERROR,h.trigger(n.ERROR,{url:o})}this.load=function(){var e;d===r.loaderstatus.NEW&&(0<o.lastIndexOf(".swf")?(s=o,d=r.loaderstatus.COMPLETE,h.trigger(n.COMPLETE)):t.getPluginPathType(o)===t.pluginPathType.CDN?(d=r.loaderstatus.COMPLETE,h.trigger(n.COMPLETE)):(d=r.loaderstatus.LOADING,(e=new r(f())).on(n.COMPLETE,p),e.on(n.ERROR,m),e.load()))},this.registerPlugin=function(e,t,i,a){c&&(clearTimeout(c),c=void 0),u=t,i&&a?(s=a,l=i):"string"==typeof i?s=i:"function"==typeof i?l=i:i||a||(s=e),d=r.loaderstatus.COMPLETE,h.trigger(n.COMPLETE)},this.getStatus=function(){return d},this.getPluginName=function(){return t.getPluginName(o)},this.getFlashPath=function(){if(s)switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return 0<o.lastIndexOf(".swf")?e.getAbsolutePath(s,window.location.href):e.getAbsolutePath(s,f())}return null},this.getJS=function(){return l},this.getTarget=function(){return u},this.getPluginmode=function(){return 2},this.getNewInstance=function(e,t,n){return new l(e,t,n)},this.getURL=function(){return o}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(50),n(212),n(1),n(6),n(7),n(2)],t=function(e,t,n,i,r,a){return function(){var o=a.extend(this,r);function s(r){n.tryCatch((function(){var n,s=r.responseXML?r.responseXML.childNodes:null,l="";if(s){for(var c=0;c<s.length&&8===(l=s[c]).nodeType;c++);"xml"===e.localName(l)&&(l=l.nextSibling),"rss"===e.localName(l)&&(n={playlist:t.parse(l)})}if(!n)try{var h=JSON.parse(r.responseText);if(a.isArray(h))n={playlist:h};else{if(!a.isArray(h.playlist))throw null;n=h}}catch(n){return void u("Not a valid RSS/JSON feed")}o.trigger(i.JWPLAYER_PLAYLIST_LOADED,n)}))instanceof n.Error&&u()}function l(e){u("Playlist load error: "+e)}function u(e){o.trigger(i.JWPLAYER_ERROR,{message:e||"文件加载失败"})}this.load=function(e){n.ajax(e,s,l)},this.destroy=function(){this.off()}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(111),n(215)],t=function(e,t,n){var i={sources:[],tracks:[]};return function(r){e.isArray((r=r||{}).tracks)||delete r.tracks;var a=e.extend({},i,r);e.isObject(a.sources)&&!e.isArray(a.sources)&&(a.sources=[t(a.sources)]),e.isArray(a.sources)&&0!==a.sources.length||(r.levels?a.sources=r.levels:a.sources=[t(r)]);for(var o=0;o<a.sources.length;o++){var s,l=a.sources[o];l&&(s=l.default,l.default=!!s&&"true"===s.toString(),a.sources[o].label||(a.sources[o].label=o.toString()),a.sources[o]=t(a.sources[o]))}return a.sources=e.compact(a.sources),e.isArray(a.tracks)||(a.tracks=[]),e.isArray(a.captions)&&(a.tracks=a.tracks.concat(a.captions),delete a.captions),a.tracks=e.compact(e.map(a.tracks,n)),a}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(15),n(2)],t=function(e,t,n){var i={default:!1,isHEVC:!1,isNative:!1};return function(r){if(r&&r.file){(e.isRtmp(r.file)||e.isFlv(r.file))&&e.isMobile()&&r.fallbackfile&&e.isHls(r.fallbackfile)&&(r.file=r.fallbackfile),e.isMobile()||e.isFlvjsSupported()||!e.isHls(r.file)&&!e.isFlv(r.file)||!r.fallbackfile||(r.file=r.fallbackfile);var a=n.extend({},i,r);if(a.file=t.trim(""+a.file),r=/^[^\/]+\/(?:x-)?([^\/]+)$/,e.isRtmp(a.file)?a.type="rtmp":r.test(a.type)?a.type=a.type.replace(r,"$1"):a.type?a.isrtc&&(a.type="rtc"):a.type=t.extension(a.file),a.type){switch(a.type){case"m3u8":case"vnd.apple.mpegurl":a.type="hls";break;case"dash+xml":a.type="dash";break;case"smil":a.type="rtmp";break;case"m4a":a.type="aac"}return n.each(a,(function(e,t){""===e&&delete a[t]})),a}}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(64),n(14),n(240),n(1)],t=function(e,t,n,i){return e.extend({constructor:function(e,t){this.defaultStatus=e,this.className=t,this.setup()},setup:function(){this.el=i.createElement(n()),this.el.classList.add(this.className)},addEvent:function(){document.getElementById("onoffswitch").checked=!!this.defaultStatus,document.getElementById("onoffswitch").addEventListener("click",(()=>{document.getElementById("onoffswitch").checked?this.trigger("switch",!0):this.trigger("switch",!1)}))},element:function(){return this.el}})}.apply(t,n),void 0!==t&&(e.exports=t)},,,,,function(e,t,n){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,n){var i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},a=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}var o,s,l;g(e,t,a,{once:!0}),"error"!==t&&(s=r,l={once:!0},"function"==typeof(o=e).on)&&g(o,"error",s,l)}))},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,a;return u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=c(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function d(e,t,n){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n}),t.listener=n,e.wrapFn=t}function f(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return m(e,e.length)}function p(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){if((o=0<t.length?t[0]:o)instanceof Error)throw o;throw(i=new Error("Unhandled error."+(o?" ("+o.message+")":""))).context=o,i}var o=a[e];if(void 0===o)return!1;if("function"==typeof o)r(o,this,t);else{var s=o.length,l=m(o,s);for(n=0;n<s;++n)r(l[n],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var n,i,r,a,o;if(u(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{for(var s=n,l=r;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0!==n)if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},function(e,t,n){n.d(t,"a",(function(){return r})),t=n(23);var i=n.n(t);function r(){return i()('/*! WebPlayer built @6/25/2024, 8:30:15 PM */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){self.controller=new AbortController,self.onmessage=e=>{var t,e=e["data"];"pushUrl"==e.type?(t=self.controller.signal,fetch(e.videoURL,{signal:t}).then(e=>e.arrayBuffer()).then(e=>{e=new Uint8Array(e);postMessage(e,[e.buffer])}).catch(e=>{})):"destory"==e.type&&self.controller.signal.about()}}]);',"Worker",void 0,n.p+"fetch.worker.worker.js")}},function(e,t,n){n.d(t,"a",(function(){return o})),t=n(18);var i=n.n(t),r=n(68),a=n(4);class o{constructor(e,t){this.config=e,this.configFormat=t,this.myPlayer=null,this.playerId=t.playerId,this.myPlayerID=t.playerId+"-rtc",this.duration=1/0,this.loadSuccess=!1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onRtcEvent=null,this.onError=null}makeIt(){let e=this;this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.videoTag.width=this.configFormat.playerW,this.videoTag.height=this.configFormat.playerH,!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",this.videoTag.autoplay="autoplay",window.onclick=document.body.onclick=function(t){e.videoTag.muted=!1});var t=document.querySelector("#"+this.configFormat.playerId);this.config.id=this.myPlayerID,t.insertBefore(this.videoTag,t.firstChild),Object(r.a)(this.videoTag),this.myPlayer=new i.a(this.config,(e=>{"error"===e.type&&setTimeout((()=>{this.onRtcEvent&&this.onRtcEvent(e),this.onError({msg:a.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:a.ErrorTypes.NOT_SUPPORT,info:e})}))})),this.myPlayer.subscribeLiveStream(),this.myPlayer.on(i.a.Events.RE_CONNECT_SUCCESS,(()=>{this.play()})),this.myPlayer.on(i.a.Events.ERROR,((e,t)=>{this.onError&&this.onError(Object.assign({event:e},t))}));for(let e in i.a.Events)this.myPlayer.on(i.a.Events[e],((t,n)=>{i.a.Events[e]===i.a.Events.CANPLAY&&this._onLoaded(),i.a.Events[e]===i.a.Events.ON_PLAY&&this.loadSuccess&&this.onPlayState&&this.onPlayState(!0),i.a.Events[e]===i.a.Events.ON_PAUSE&&this.onPlayState&&this.onPlayState(!1),this.onRtcEvent&&this.onRtcEvent(Object.assign({event:t},n))}));this.onMakeItReady&&this.onMakeItReady()}async _onLoaded(){!0!==this.loadSuccess&&(this.onLoadFinish&&await this.onLoadFinish(),this.onReadyShowDone&&this.onReadyShowDone(),this.loadSuccess=!0,this.configFormat.autoPlay)&&this.onPlayState&&this.onPlayState(!0)}_refreshVideoTagEvent(){this.videoTag=document.getElementById(this.myPlayerID).querySelector("video")}async getSize(){var e=(await this.myPlayer.getStats()).video;return{width:this.videoTag.videoWidth||e&&e.width||640,height:this.videoTag.videoHeight||e&&e.height||320}}play(){this.myPlayer&&this.myPlayer.play()}setVoice(e){this.myPlayer&&this.myPlayer.setVolume(e)}pause(){this.myPlayer&&this.myPlayer.pause()}isPlayingState(){return!(!this.myPlayer||"play"!=this.myPlayer.getPlayStatus())}async getMediaInfo(){return this.myPlayer&&await this.myPlayer.getStats()}release(){this.loadSuccess=!1,this.myPlayer.destroy(),this.myPlayerID=null,this.myPlayer=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null}}},function(e,t,n){n.d(t,"a",(function(){return r})),t=n(23);var i=n.n(t);function r(){return i()('/*! WebPlayer built @6/25/2024, 8:30:15 PM */!function(t){var o={};function n(e){var r;return(o[e]||(r=o[e]={i:e,l:!1,exports:{}},t[e].call(r.exports,r,r.exports,n),r.l=!0,r)).exports}n.m=t,n.c=o,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)n.d(t,o,function(e){return r[e]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=0)}([function(e,r,t){t.r(r);let l={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},a={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"open context failed",OPEN_MEDIA_FAILED:"failed to open media",DOWNLOAD_DATA_FAILED:"download data failed"},f={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError",DOWNLOAD_FAILED:"downloadFailed"},s={DEOCDE_NOT_SUPPORT:4,UNKNOW_ERROR:0,PLAY_ERROR:9,DEMUXER_ERROR:10,DOWNLOAD_DATA_FAILED:11};self.onmessage=e=>{let r=e["data"];var n,t;0==r.type?(self.controller&&self.controller.abort(),self.controller=new AbortController,e=self.controller.signal,n=0,(t=new Headers).append("Range",`bytes=${r.offset}-`),t=r.offset?{signal:e,headers:t}:{signal:e},fetch(r.videoURL,t).then(e=>{function o(t){return t.read().then(function(e){var r;if(!e.done)return e=e.value,r=JSON.parse(JSON.stringify(e.byteLength)),self.postMessage({type:0,fileStart:n,buffer:e.buffer},[e.buffer]),n+=r,o(t);self.postMessage({type:1})})}return 200!=e.status&&self.postMessage({type:2,error:{msg:a.DOWNLOAD_DATA_FAILED,event:f.DOWNLOAD_FAILED,url:r.videoURL,errorType:l.NETWORK_ERROR,code:s.DOWNLOAD_DATA_FAILED}}),o(e.body.getReader())}).catch(e=>{})):1==r.type&&self.controller&&self.controller.abort()}}]);',"Worker",void 0,n.p+"downloader.worker.worker.js")}},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-process-adv jw-reset">\n    <a target="_blank"><img/></a>\n</div>'},useData:!0})},function(e,t,n){(function(t){e.exports=function(){"use strict";function e(){e=function(){return n};var t,n={},i=Object.prototype,r=i.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(t){c=function(e,t,n){return e[t]=n}}function h(e,t,n,i){var r=t&&t.prototype instanceof y?t:y,o=Object.create(r.prototype),s=new D(i||[]);return a(o,"_invoke",{value:I(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var f="suspendedStart",p="suspendedYield",m="executing",g="completed",_={};function y(){}function v(){}function A(){}var E={};c(E,s,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(k([])));w&&w!==i&&r.call(w,s)&&(E=w);var T=A.prototype=y.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(i,a,o,s){var l=d(e[i],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function I(e,n,i){var r=f;return function(a,o){if(r===m)throw Error("Generator is already running");if(r===g){if("throw"===a)throw o;return{value:t,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=C(s,i);if(l){if(l===_)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=m;var u=d(e,n,i);if("normal"===u.type){if(r=i.done?g:p,u.arg===_)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=g,i.method="throw",i.arg=u.arg)}}}function C(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),_;var a=d(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,_;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function k(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(typeof e+" is not iterable")}return v.prototype=A,a(T,"constructor",{value:A,configurable:!0}),a(A,"constructor",{value:v,configurable:!0}),v.displayName=c(A,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,c(e,u,"GeneratorFunction")),e.prototype=Object.create(T),e},n.awrap=function(e){return{__await:e}},S(R.prototype),c(R.prototype,l,(function(){return this})),n.AsyncIterator=R,n.async=function(e,t,i,r,a){void 0===a&&(a=Promise);var o=new R(h(e,t,i,r),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(T),c(T,u,"Generator"),c(T,s,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},n.values=k,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;P(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:k(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),_}},n}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}function i(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u={exports:{}},c=u,h=u.exports,d="object"==typeof window?window:s,f=void 0,p="function",m="undefined",g="object",_="string",y="major",v="model",A="name",E="type",b="vendor",w="version",T="architecture",S="console",R="mobile",I="tablet",C="smarttv",L="wearable",P="embedded",D="Amazon",k="Apple",x="ASUS",M="BlackBerry",O="Browser",N="Chrome",F="Firefox",B="Google",U="Huawei",j="LG",G="Microsoft",V="Motorola",H="Opera",Y="Samsung",z="Sharp",W="Sony",K="Xiaomi",q="Zebra",Q="Facebook",X="Chromium OS",J="Mac OS",Z=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},$=function(e,t){return typeof e===_&&-1!==ee(t).indexOf(ee(e))},ee=function(e){return e.toLowerCase()},te=function(e,t){if(typeof e===_)return e=e.replace(/^\s\s*/,""),typeof t===m?e:e.substring(0,500)},ne=function(e,t){for(var n,i,r,a,o,s,l=0;l<t.length&&!o;){var u=t[l],c=t[l+1];for(n=i=0;n<u.length&&!o&&u[n];)if(o=u[n++].exec(e))for(r=0;r<c.length;r++)s=o[++i],typeof(a=c[r])===g&&a.length>0?2===a.length?typeof a[1]==p?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3===a.length?typeof a[1]!==p||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):f:this[a[0]]=s?a[1].call(this,s,a[2]):f:4===a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):f):this[a]=s||f;l+=2}},ie=function(e,t){for(var n in t)if(typeof t[n]===g&&t[n].length>0){for(var i=0;i<t[n].length;i++)if($(t[n][i],e))return"?"===n?f:n}else if($(t[n],e))return"?"===n?f:n;return e},re={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ae={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[A,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[A,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[A,w],[/opios[\/ ]+([\w\.]+)/i],[w,[A,H+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[w,[A,H+" GX"]],[/\bopr\/([\w\.]+)/i],[w,[A,H]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[w,[A,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[A,w],[/\bddg\/([\w\.]+)/i],[w,[A,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[A,"UC"+O]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[w,[A,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[A,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[A,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[w,[A,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[w,[A,"Smart Lenovo "+O]],[/(avast|avg)\/([\w\.]+)/i],[[A,/(.+)/,"$1 Secure "+O],w],[/\bfocus\/([\w\.]+)/i],[w,[A,F+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[A,H+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[A,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[A,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[A,H+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[A,"MIUI "+O]],[/fxios\/([-\w\.]+)/i],[w,[A,F]],[/\bqihu|(qi?ho?o?|360)browser/i],[[A,"360 "+O]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[A,/(.+)/,"$1 "+O],w],[/samsungbrowser\/([\w\.]+)/i],[w,[A,Y+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[A,/_/g," "],w],[/metasr[\/ ]?([\d\.]+)/i],[w,[A,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[A,"Sogou Mobile"],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[A,w],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[A],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[A,Q],w],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[A,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[A,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[w,[A,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[A,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[A,N+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[A,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[A,w],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w,[A,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w,A],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[A,[w,ie,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[A,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[A,"Netscape"],w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[A,F+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[A,w],[/(cobalt)\/([\w\.]+)/i],[A,[w,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[T,"amd64"]],[/(ia32(?=;))/i],[[T,ee]],[/((?:i[346]|x)86)[;\)]/i],[[T,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[T,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[T,"armhf"]],[/windows (ce|mobile); ppc;/i],[[T,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[T,/ower/,"",ee]],[/(sun4\w)[;\)]/i],[[T,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[T,ee]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[b,Y],[E,I]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[b,Y],[E,R]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[b,k],[E,R]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[b,k],[E,I]],[/(macintosh);/i],[v,[b,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[b,z],[E,R]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[b,U],[E,I]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[b,U],[E,R]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[b,K],[E,R]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[b,K],[E,I]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[b,"OPPO"],[E,R]],[/\b(opd2\d{3}a?) bui/i],[v,[b,"OPPO"],[E,I]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[b,"Vivo"],[E,R]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[b,"Realme"],[E,R]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[b,V],[E,R]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[b,V],[E,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[b,j],[E,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[b,j],[E,R]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[b,"Lenovo"],[E,I]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[b,"Nokia"],[E,R]],[/(pixel c)\b/i],[v,[b,B],[E,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[b,B],[E,R]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[b,W],[E,R]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[b,W],[E,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[b,"OnePlus"],[E,R]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[b,D],[E,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[b,D],[E,R]],[/(playbook);[-\w\),; ]+(rim)/i],[v,b,[E,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[b,M],[E,R]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[b,x],[E,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[b,x],[E,R]],[/(nexus 9)/i],[v,[b,"HTC"],[E,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[v,/_/g," "],[E,R]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[b,"Acer"],[E,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[b,"Meizu"],[E,R]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[b,"Ulefone"],[E,R]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,v,[E,R]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,v,[E,I]],[/(surface duo)/i],[v,[b,G],[E,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[b,"Fairphone"],[E,R]],[/(u304aa)/i],[v,[b,"AT&T"],[E,R]],[/\bsie-(\w*)/i],[v,[b,"Siemens"],[E,R]],[/\b(rct\w+) b/i],[v,[b,"RCA"],[E,I]],[/\b(venue[\d ]{2,7}) b/i],[v,[b,"Dell"],[E,I]],[/\b(q(?:mv|ta)\w+) b/i],[v,[b,"Verizon"],[E,I]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[b,"Barnes & Noble"],[E,I]],[/\b(tm\d{3}\w+) b/i],[v,[b,"NuVision"],[E,I]],[/\b(k88) b/i],[v,[b,"ZTE"],[E,I]],[/\b(nx\d{3}j) b/i],[v,[b,"ZTE"],[E,R]],[/\b(gen\d{3}) b.+49h/i],[v,[b,"Swiss"],[E,R]],[/\b(zur\d{3}) b/i],[v,[b,"Swiss"],[E,I]],[/\b((zeki)?tb.*\b) b/i],[v,[b,"Zeki"],[E,I]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],v,[E,I]],[/\b(ns-?\w{0,9}) b/i],[v,[b,"Insignia"],[E,I]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[b,"NextBook"],[E,I]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],v,[E,R]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],v,[E,R]],[/\b(ph-1) /i],[v,[b,"Essential"],[E,R]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[b,"Envizen"],[E,I]],[/\b(trio[-\w\. ]+) b/i],[v,[b,"MachSpeed"],[E,I]],[/\btu_(1491) b/i],[v,[b,"Rotor"],[E,I]],[/(shield[\w ]+) b/i],[v,[b,"Nvidia"],[E,I]],[/(sprint) (\w+)/i],[b,v,[E,R]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[b,G],[E,R]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[b,q],[E,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[b,q],[E,R]],[/smart-tv.+(samsung)/i],[b,[E,C]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[b,Y],[E,C]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,j],[E,C]],[/(apple) ?tv/i],[b,[v,k+" TV"],[E,C]],[/crkey/i],[[v,N+"cast"],[b,B],[E,C]],[/droid.+aft(\w+)( bui|\))/i],[v,[b,D],[E,C]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[b,z],[E,C]],[/(bravia[\w ]+)( bui|\))/i],[v,[b,W],[E,C]],[/(mitv-\w{5}) bui/i],[v,[b,K],[E,C]],[/Hbbtv.*(technisat) (.*);/i],[b,v,[E,C]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,te],[v,te],[E,C]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[E,C]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,v,[E,S]],[/droid.+; (shield) bui/i],[v,[b,"Nvidia"],[E,S]],[/(playstation [345portablevi]+)/i],[v,[b,W],[E,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[b,G],[E,S]],[/((pebble))app/i],[b,v,[E,L]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[b,k],[E,L]],[/droid.+; (glass) \d/i],[v,[b,B],[E,L]],[/droid.+; (wt63?0{2,3})\)/i],[v,[b,q],[E,L]],[/(quest( \d| pro)?)/i],[v,[b,Q],[E,L]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[E,P]],[/(aeobc)\b/i],[v,[b,D],[E,P]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[E,R]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[E,I]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[E,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[E,R]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[A,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[A,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[A,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,A]],os:[[/microsoft (windows) (vista|xp)/i],[A,w],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[A,[w,ie,re]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[w,ie,re],[A,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[A,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[A,J],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w,A],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[A,w],[/\(bb(10);/i],[w,[A,M]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[A,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[A,F+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[A,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[w,[A,"watchOS"]],[/crkey\/([\d\.]+)/i],[w,[A,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[A,X],w],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[A,w],[/(sunos) ?([\w\.\d]*)/i],[[A,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[A,w]]},oe=function(e,t){if(typeof e===g&&(t=e,e=f),!(this instanceof oe))return new oe(e,t).getResult();var n=typeof d!==m&&d.navigator?d.navigator:f,i=e||(n&&n.userAgent?n.userAgent:""),r=n&&n.userAgentData?n.userAgentData:f,a=t?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(ae,t):ae,o=n&&n.userAgent==i;return this.getBrowser=function(){var e,t={};return t[A]=f,t[w]=f,ne.call(t,i,a.browser),t[y]=typeof(e=t[w])===_?e.replace(/[^\d\.]/g,"").split(".")[0]:f,o&&n&&n.brave&&typeof n.brave.isBrave==p&&(t[A]="Brave"),t},this.getCPU=function(){var e={};return e[T]=f,ne.call(e,i,a.cpu),e},this.getDevice=function(){var e={};return e[b]=f,e[v]=f,e[E]=f,ne.call(e,i,a.device),o&&!e[E]&&r&&r.mobile&&(e[E]=R),o&&"Macintosh"==e[v]&&n&&typeof n.standalone!==m&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[v]="iPad",e[E]=I),e},this.getEngine=function(){var e={};return e[A]=f,e[w]=f,ne.call(e,i,a.engine),e},this.getOS=function(){var e={};return e[A]=f,e[w]=f,ne.call(e,i,a.os),o&&!e[A]&&r&&r.platform&&"Unknown"!=r.platform&&(e[A]=r.platform.replace(/chrome os/i,X).replace(/macos/i,J)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===_&&e.length>500?te(e,500):e,this},this.setUA(i),this},se=(oe.VERSION="1.0.38",oe.BROWSER=Z([A,w,y]),oe.CPU=Z([T]),oe.DEVICE=Z([v,b,E,S,R,C,I,L,P]),oe.ENGINE=oe.OS=Z([A,w]),(h=c.exports?c.exports=oe:h).UAParser=oe,typeof d!==m&&(d.jQuery||d.Zepto));if(se&&!se.ua){var le=new oe;se.ua=le.getResult(),se.ua.get=function(){return le.getUA()},se.ua.set=function(e){le.setUA(e);var t=le.getResult();for(var n in t)se.ua[n]=t[n]}}var ue,ce=l(u.exports),he={exports:{}},de=function(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];return n.push.apply(n,arguments),new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})})),n}(Object.freeze({__proto__:null,default:{}}));function fe(){return ue||(ue=1,function(e,t){e.exports=function(){var e=e||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==s&&s.crypto&&(n=s.crypto),!n)try{n=de}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},o=a.lib={},l=o.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=o.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var a=0;a<r;a++){var o=n[a>>>2]>>>24-a%4*8&255;t[i+a>>>2]|=o<<24-(i+a)%4*8}else for(var s=0;s<r;s+=4)t[i+s>>>2]=n[s>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new u.init(t,e)}}),c=a.enc={},h=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var a=t[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(n,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var a=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(n,t)}},f=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=o.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,r=i.words,a=i.sigBytes,o=this.blockSize,s=a/(4*o),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,c=e.min(4*l,a);if(l){for(var h=0;h<l;h+=o)this._doProcessBlock(r,h);n=r.splice(0,l),i.sigBytes-=c}return new u.init(n,c)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=p.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}});var m=a.algo={};return a}(Math);return e}()}(he)),he.exports}var pe,me={exports:{}};function ge(){return pe||(pe=1,function(e,t){e.exports=function(e){return n=(t=e).lib,i=n.Base,r=n.WordArray,(a=t.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var a=e[i];n.push(a.high),n.push(a.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),e;var t,n,i,r,a}(fe())}(me)),me.exports}var _e,ye,ve,Ae={exports:{}},Ee={exports:{}},be={exports:{}};function we(){return ve||(ve=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var r=[],a=0;a<n;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)r.push(i.charAt(o>>>6*(3-s)&63));var l=i.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,i=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var a=0;a<i.length;a++)r[i.charCodeAt(a)]=a}var o=i.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,i){for(var r=[],a=0,o=0;o<t;o++)if(o%4){var s=i[e.charCodeAt(o-1)]<<o%4*2|i[e.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=s<<24-a%4*8,a++}return n.create(r,a)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}(fe())}(be)),be.exports}var Te,Se,Re={exports:{}},Ie={exports:{}};function Ce(){return Se||(Se=1,function(e,t){e.exports=function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,a=i.Hasher,o=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=o.MD5=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,o=e[t+0],l=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],_=e[t+6],y=e[t+7],v=e[t+8],A=e[t+9],E=e[t+10],b=e[t+11],w=e[t+12],T=e[t+13],S=e[t+14],R=e[t+15],I=a[0],C=a[1],L=a[2],P=a[3];I=u(I,C,L,P,o,7,s[0]),P=u(P,I,C,L,l,12,s[1]),L=u(L,P,I,C,f,17,s[2]),C=u(C,L,P,I,p,22,s[3]),I=u(I,C,L,P,m,7,s[4]),P=u(P,I,C,L,g,12,s[5]),L=u(L,P,I,C,_,17,s[6]),C=u(C,L,P,I,y,22,s[7]),I=u(I,C,L,P,v,7,s[8]),P=u(P,I,C,L,A,12,s[9]),L=u(L,P,I,C,E,17,s[10]),C=u(C,L,P,I,b,22,s[11]),I=u(I,C,L,P,w,7,s[12]),P=u(P,I,C,L,T,12,s[13]),L=u(L,P,I,C,S,17,s[14]),I=c(I,C=u(C,L,P,I,R,22,s[15]),L,P,l,5,s[16]),P=c(P,I,C,L,_,9,s[17]),L=c(L,P,I,C,b,14,s[18]),C=c(C,L,P,I,o,20,s[19]),I=c(I,C,L,P,g,5,s[20]),P=c(P,I,C,L,E,9,s[21]),L=c(L,P,I,C,R,14,s[22]),C=c(C,L,P,I,m,20,s[23]),I=c(I,C,L,P,A,5,s[24]),P=c(P,I,C,L,S,9,s[25]),L=c(L,P,I,C,p,14,s[26]),C=c(C,L,P,I,v,20,s[27]),I=c(I,C,L,P,T,5,s[28]),P=c(P,I,C,L,f,9,s[29]),L=c(L,P,I,C,y,14,s[30]),I=h(I,C=c(C,L,P,I,w,20,s[31]),L,P,g,4,s[32]),P=h(P,I,C,L,v,11,s[33]),L=h(L,P,I,C,b,16,s[34]),C=h(C,L,P,I,S,23,s[35]),I=h(I,C,L,P,l,4,s[36]),P=h(P,I,C,L,m,11,s[37]),L=h(L,P,I,C,y,16,s[38]),C=h(C,L,P,I,E,23,s[39]),I=h(I,C,L,P,T,4,s[40]),P=h(P,I,C,L,o,11,s[41]),L=h(L,P,I,C,p,16,s[42]),C=h(C,L,P,I,_,23,s[43]),I=h(I,C,L,P,A,4,s[44]),P=h(P,I,C,L,w,11,s[45]),L=h(L,P,I,C,R,16,s[46]),I=d(I,C=h(C,L,P,I,f,23,s[47]),L,P,o,6,s[48]),P=d(P,I,C,L,y,10,s[49]),L=d(L,P,I,C,S,15,s[50]),C=d(C,L,P,I,g,21,s[51]),I=d(I,C,L,P,w,6,s[52]),P=d(P,I,C,L,p,10,s[53]),L=d(L,P,I,C,E,15,s[54]),C=d(C,L,P,I,l,21,s[55]),I=d(I,C,L,P,v,6,s[56]),P=d(P,I,C,L,R,10,s[57]),L=d(L,P,I,C,_,15,s[58]),C=d(C,L,P,I,T,21,s[59]),I=d(I,C,L,P,m,6,s[60]),P=d(P,I,C,L,b,10,s[61]),L=d(L,P,I,C,f,15,s[62]),C=d(C,L,P,I,A,21,s[63]),a[0]=a[0]+I|0,a[1]=a[1]+C|0,a[2]=a[2]+L|0,a[3]=a[3]+P|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var a=t.floor(i/4294967296),o=i;n[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,u=0;u<4;u++){var c=l[u];l[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,i,r,a,o){var s=e+(t&n|~t&i)+r+o;return(s<<a|s>>>32-a)+t}function c(e,t,n,i,r,a,o){var s=e+(t&i|n&~i)+r+o;return(s<<a|s>>>32-a)+t}function h(e,t,n,i,r,a,o){var s=e+(t^n^i)+r+o;return(s<<a|s>>>32-a)+t}function d(e,t,n,i,r,a,o){var s=e+(n^(t|~i))+r+o;return(s<<a|s>>>32-a)+t}n.MD5=a._createHelper(l),n.HmacMD5=a._createHmacHelper(l)}(Math),e.MD5}(fe())}(Ie)),Ie.exports}var Le,Pe={exports:{}};function De(){return Le||(Le=1,function(e,t){e.exports=function(e){return n=(t=e).lib,i=n.WordArray,r=n.Hasher,a=t.algo,o=[],s=a.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],s=n[3],l=n[4],u=0;u<80;u++){if(u<16)o[u]=0|e[t+u];else{var c=o[u-3]^o[u-8]^o[u-14]^o[u-16];o[u]=c<<1|c>>>31}var h=(i<<5|i>>>27)+l+o[u];h+=u<20?1518500249+(r&a|~r&s):u<40?1859775393+(r^a^s):u<60?(r&a|r&s|a&s)-1894007588:(r^a^s)-899497514,l=s,s=a,a=r<<30|r>>>2,r=i,i=h}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(s),t.HmacSHA1=r._createHmacHelper(s),e.SHA1;var t,n,i,r,a,o,s}(fe())}(Pe)),Pe.exports}var ke,xe={exports:{}};function Me(){return ke||(ke=1,function(e,t){e.exports=function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,a=i.Hasher,o=n.algo,s=[],l=[];!function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(s[r]=n(t.pow(i,.5))),l[r]=n(t.pow(i,1/3)),r++),i++}();var u=[],c=o.SHA256=a.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],h=n[6],d=n[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[f-2],_=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[f]=m+u[f-7]+_+u[f-16]}var y=i&r^i&a^r&a,v=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),A=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&h)+l[f]+u[f];d=h,h=c,c=s,s=o+A|0,o=a,a=r,r=i,i=A+(v+y)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0,n[5]=n[5]+c|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=a._createHelper(c),n.HmacSHA256=a._createHmacHelper(c)}(Math),e.SHA256}(fe())}(xe)),xe.exports}var Oe,Ne,Fe={exports:{}};function Be(){return Ne||(Ne=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.Hasher,i=t.x64,r=i.Word,a=i.WordArray,o=t.algo;function s(){return r.create.apply(r,arguments)}var l=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var c=o.SHA512=n.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],h=n[6],d=n[7],f=i.high,p=i.low,m=r.high,g=r.low,_=a.high,y=a.low,v=o.high,A=o.low,E=s.high,b=s.low,w=c.high,T=c.low,S=h.high,R=h.low,I=d.high,C=d.low,L=f,P=p,D=m,k=g,x=_,M=y,O=v,N=A,F=E,B=b,U=w,j=T,G=S,V=R,H=I,Y=C,z=0;z<80;z++){var W,K,q=u[z];if(z<16)K=q.high=0|e[t+2*z],W=q.low=0|e[t+2*z+1];else{var Q=u[z-15],X=Q.high,J=Q.low,Z=(X>>>1|J<<31)^(X>>>8|J<<24)^X>>>7,$=(J>>>1|X<<31)^(J>>>8|X<<24)^(J>>>7|X<<25),ee=u[z-2],te=ee.high,ne=ee.low,ie=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,re=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ae=u[z-7],oe=ae.high,se=ae.low,le=u[z-16],ue=le.high,ce=le.low;K=(K=(K=Z+oe+((W=$+se)>>>0<$>>>0?1:0))+ie+((W+=re)>>>0<re>>>0?1:0))+ue+((W+=ce)>>>0<ce>>>0?1:0),q.high=K,q.low=W}var he,de=F&U^~F&G,fe=B&j^~B&V,pe=L&D^L&x^D&x,me=P&k^P&M^k&M,ge=(L>>>28|P<<4)^(L<<30|P>>>2)^(L<<25|P>>>7),_e=(P>>>28|L<<4)^(P<<30|L>>>2)^(P<<25|L>>>7),ye=(F>>>14|B<<18)^(F>>>18|B<<14)^(F<<23|B>>>9),ve=(B>>>14|F<<18)^(B>>>18|F<<14)^(B<<23|F>>>9),Ae=l[z],Ee=Ae.high,be=Ae.low,we=H+ye+((he=Y+ve)>>>0<Y>>>0?1:0),Te=_e+me;H=G,Y=V,G=U,V=j,U=F,j=B,F=O+(we=(we=(we=we+de+((he+=fe)>>>0<fe>>>0?1:0))+Ee+((he+=be)>>>0<be>>>0?1:0))+K+((he+=W)>>>0<W>>>0?1:0))+((B=N+he|0)>>>0<N>>>0?1:0)|0,O=x,N=M,x=D,M=k,D=L,k=P,L=we+(ge+pe+(Te>>>0<_e>>>0?1:0))+((P=he+Te|0)>>>0<he>>>0?1:0)|0}p=i.low=p+P,i.high=f+L+(p>>>0<P>>>0?1:0),g=r.low=g+k,r.high=m+D+(g>>>0<k>>>0?1:0),y=a.low=y+M,a.high=_+x+(y>>>0<M>>>0?1:0),A=o.low=A+N,o.high=v+O+(A>>>0<N>>>0?1:0),b=s.low=b+B,s.high=E+F+(b>>>0<B>>>0?1:0),T=c.low=T+j,c.high=w+U+(T>>>0<j>>>0?1:0),R=h.low=R+V,h.high=S+G+(R>>>0<V>>>0?1:0),C=d.low=C+Y,d.high=I+H+(C>>>0<Y>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(i+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(c),t.HmacSHA512=n._createHmacHelper(c)}(),e.SHA512}(fe(),ge())}(Fe)),Fe.exports}var Ue,je,Ge,Ve,He={exports:{}},Ye={exports:{}};function ze(){return Ve||(Ve=1,function(e,t){e.exports=function(e){var t,n,i;n=(t=e).lib.Base,i=t.enc.Utf8,t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,l=o.words,u=0;u<n;u++)s[u]^=1549556828,l[u]^=909522486;a.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(fe())}(Ye)),Ye.exports}var We,Ke,qe={exports:{}};function Qe(){return Ke||(Ke=1,function(e,t){e.exports=function(e){return i=(n=(t=e).lib).Base,r=n.WordArray,o=(a=t.algo).MD5,s=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,a=i.hasher.create(),o=r.create(),s=o.words,l=i.keySize,u=i.iterations;s.length<l;){n&&a.update(n),n=a.update(e).finalize(t),a.reset();for(var c=1;c<u;c++)n=a.finalize(n),a.reset();o.concat(n)}return o.sigBytes=4*l,o}}),t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)},e.EvpKDF;var t,n,i,r,a,o,s}(fe(),De(),ze())}(qe)),qe.exports}var Xe,Je={exports:{}};function Ze(){return Xe||(Xe=1,function(e,t){e.exports=function(e){e.lib.Cipher||function(t){var n=e,i=n.lib,r=i.Base,a=i.WordArray,o=i.BufferedBlockAlgorithm,s=n.enc;s.Utf8;var l=s.Base64,u=n.algo.EvpKDF,c=i.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:_}return function(t){return{encrypt:function(n,i,r){return e(i).encrypt(t,n,i,r)},decrypt:function(n,i,r){return e(i).decrypt(t,n,i,r)}}}}()});i.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=n.mode={},d=i.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var e=d.extend();function t(e,t,n){var i,r=this._iv;r?(i=r,this._iv=void 0):i=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),e.Decryptor=e.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,a=e.slice(n,n+r);i.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=a}}),e}(),p=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=n-e.sigBytes%n,r=i<<24|i<<16|i<<8|i,o=[],s=0;s<i;s+=4)o.push(r);var l=a.create(o,i);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};i.BlockCipher=c.extend({cfg:c.cfg.extend({mode:f,padding:p}),reset:function(){var e;c.reset.call(this);var t=this.cfg,n=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(i,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var m=i.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),g=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),i=n.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=a.create(i.slice(2,4)),i.splice(0,4),n.sigBytes-=16),m.create({ciphertext:n,salt:t})}},_=i.SerializableCipher=r.extend({cfg:r.extend({format:g}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var r=e.createEncryptor(n,i),a=r.finalize(t),o=r.cfg;return m.create({ciphertext:a,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={execute:function(e,t,n,i,r){if(i||(i=a.random(8)),r)o=u.create({keySize:t+n,hasher:r}).compute(e,i);else var o=u.create({keySize:t+n}).compute(e,i);var s=a.create(o.words.slice(t),4*n);return o.sigBytes=4*t,m.create({key:o,iv:s,salt:i})}},v=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:y}),encrypt:function(e,t,n,i){var r=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize,i.salt,i.hasher);i.iv=r.iv;var a=_.encrypt.call(this,e,t,r.key,i);return a.mixIn(r),a},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var r=i.kdf.execute(n,e.keySize,e.ivSize,t.salt,i.hasher);return i.iv=r.iv,_.decrypt.call(this,e,t,r.key,i)}})}()}(fe(),Qe())}(Je)),Je.exports}var $e,et,tt,nt,it,rt,at,ot,st,lt,ut,ct,ht,dt,ft,pt,mt,gt={exports:{}},_t={exports:{}},yt={exports:{}},vt={exports:{}},At={exports:{}},Et={exports:{}},bt=l({exports:{}}.exports=function(e){return e}(fe(),ge(),_e||(_e=1,function(e,t){e.exports=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,i=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],r=0;r<t;r++)i[r>>>2]|=e[r]<<24-r%4*8;n.call(this,i,t)}else n.apply(this,arguments)};i.prototype=t}}(),e.lib.WordArray}(fe())}(Ae)),ye||(ye=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.WordArray,i=t.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r+=2){var a=t[r>>>2]>>>16-r%4*8&65535;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return n.create(i,2*t)}},i.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],a=0;a<n;a+=2){var o=r(t[a>>>2]>>>16-a%4*8&65535);i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>1]|=r(e.charCodeAt(a)<<16-a%2*16);return n.create(i,2*t)}}}(),e.enc.Utf16}(fe())}(Ee)),we(),Te||(Te=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.WordArray;function i(e,t,i){for(var r=[],a=0,o=0;o<t;o++)if(o%4){var s=i[e.charCodeAt(o-1)]<<o%4*2|i[e.charCodeAt(o)]>>>6-o%4*2;r[a>>>2]|=s<<24-a%4*8,a++}return n.create(r,a)}t.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,i=e.sigBytes,r=t?this._safe_map:this._map;e.clamp();for(var a=[],o=0;o<i;o+=3)for(var s=(n[o>>>2]>>>24-o%4*8&255)<<16|(n[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|n[o+2>>>2]>>>24-(o+2)%4*8&255,l=0;l<4&&o+.75*l<i;l++)a.push(r.charAt(s>>>6*(3-l)&63));var u=r.charAt(64);if(u)for(;a.length%4;)a.push(u);return a.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,r=t?this._safe_map:this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var o=0;o<r.length;o++)a[r.charCodeAt(o)]=o}var s=r.charAt(64);if(s){var l=e.indexOf(s);-1!==l&&(n=l)}return i(e,n,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url}(fe())}(Re)),Ce(),De(),Me(),Oe||(Oe=1,function(e,t){e.exports=function(e){return n=(t=e).lib.WordArray,i=t.algo,r=i.SHA256,a=i.SHA224=r.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=r._createHelper(a),t.HmacSHA224=r._createHmacHelper(a),e.SHA224;var t,n,i,r,a}(fe(),Me())}({exports:{}})),Be(),Ue||(Ue=1,function(e,t){e.exports=function(e){return n=(t=e).x64,i=n.Word,r=n.WordArray,a=t.algo,o=a.SHA512,s=a.SHA384=o.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=o._createHelper(s),t.HmacSHA384=o._createHmacHelper(s),e.SHA384;var t,n,i,r,a,o,s}(fe(),ge(),Be())}({exports:{}})),je||(je=1,function(e,t){e.exports=function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,a=i.Hasher,o=n.x64.Word,s=n.algo,l=[],u=[],c=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,a=0;a<24;a++){for(var s=0,h=0,d=0;d<7;d++){if(1&r){var f=(1<<d)-1;f<32?h^=1<<f:s^=1<<f-32}128&r?r=r<<1^113:r<<=1}c[a]=o.create(s,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=o.create()}();var d=s.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,r=0;r<i;r++){var a=e[t+2*r],o=e[t+2*r+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(C=n[r]).high^=o,C.low^=a}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var f=0,p=0,m=0;m<5;m++)f^=(C=n[d+5*m]).high,p^=C.low;var g=h[d];g.high=f,g.low=p}for(d=0;d<5;d++){var _=h[(d+4)%5],y=h[(d+1)%5],v=y.high,A=y.low;for(f=_.high^(v<<1|A>>>31),p=_.low^(A<<1|v>>>31),m=0;m<5;m++)(C=n[d+5*m]).high^=f,C.low^=p}for(var E=1;E<25;E++){var b=(C=n[E]).high,w=C.low,T=l[E];T<32?(f=b<<T|w>>>32-T,p=w<<T|b>>>32-T):(f=w<<T-32|b>>>64-T,p=b<<T-32|w>>>64-T);var S=h[u[E]];S.high=f,S.low=p}var R=h[0],I=n[0];for(R.high=I.high,R.low=I.low,d=0;d<5;d++)for(m=0;m<5;m++){var C=n[E=d+5*m],L=h[E],P=h[(d+1)%5+5*m],D=h[(d+2)%5+5*m];C.high=L.high^~P.high&D.high,C.low=L.low^~P.low&D.low}C=n[0];var k=c[s];C.high^=k.high,C.low^=k.low}},_doFinalize:function(){var e=this._data,n=e.words;this._nDataBytes;var i=8*e.sigBytes,a=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(t.ceil((i+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var o=this._state,s=this.cfg.outputLength/8,l=s/8,u=[],c=0;c<l;c++){var h=o[c],d=h.high,f=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),u.push(f),u.push(d)}return new r.init(u,s)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=a._createHelper(d),n.HmacSHA3=a._createHmacHelper(d)}(Math),e.SHA3}(fe(),ge())}(He)),Ge||(Ge=1,function(e,t){e.exports=function(e){
/** @preserve
            			(c) 2012 by Cédric Mesnil. All rights reserved.
          
            			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
          
            			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
            			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
          
            			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
            			*/
return function(t){var n=e,i=n.lib,r=i.WordArray,a=i.Hasher,o=n.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=r.create([0,1518500249,1859775393,2400959708,2840853838]),d=r.create([1352829926,1548603684,1836072691,2053994217,0]),f=o.RIPEMD160=a.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a,o,f,A,E,b,w,T,S,R,I,C=this._hash.words,L=h.words,P=d.words,D=s.words,k=l.words,x=u.words,M=c.words;for(b=a=C[0],w=o=C[1],T=f=C[2],S=A=C[3],R=E=C[4],n=0;n<80;n+=1)I=a+e[t+D[n]]|0,I+=n<16?p(o,f,A)+L[0]:n<32?m(o,f,A)+L[1]:n<48?g(o,f,A)+L[2]:n<64?_(o,f,A)+L[3]:y(o,f,A)+L[4],I=(I=v(I|=0,x[n]))+E|0,a=E,E=A,A=v(f,10),f=o,o=I,I=b+e[t+k[n]]|0,I+=n<16?y(w,T,S)+P[0]:n<32?_(w,T,S)+P[1]:n<48?g(w,T,S)+P[2]:n<64?m(w,T,S)+P[3]:p(w,T,S)+P[4],I=(I=v(I|=0,M[n]))+R|0,b=R,R=S,S=v(T,10),T=w,w=I;I=C[1]+f+S|0,C[1]=C[2]+A+R|0,C[2]=C[3]+E+b|0,C[3]=C[4]+a+w|0,C[4]=C[0]+o+T|0,C[0]=I},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,a=r.words,o=0;o<5;o++){var s=a[o];a[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function m(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function _(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function v(e,t){return e<<t|e>>>32-t}n.RIPEMD160=a._createHelper(f),n.HmacRIPEMD160=a._createHmacHelper(f)}(),e.RIPEMD160}(fe())}({exports:{}})),ze(),We||(We=1,function(e,t){e.exports=function(e){return i=(n=(t=e).lib).Base,r=n.WordArray,o=(a=t.algo).SHA256,s=a.HMAC,l=a.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=s.create(n.hasher,e),a=r.create(),o=r.create([1]),l=a.words,u=o.words,c=n.keySize,h=n.iterations;l.length<c;){var d=i.update(t).finalize(o);i.reset();for(var f=d.words,p=f.length,m=d,g=1;g<h;g++){m=i.finalize(m),i.reset();for(var _=m.words,y=0;y<p;y++)f[y]^=_[y]}a.concat(d),u[0]++}return a.sigBytes=4*c,a}}),t.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)},e.PBKDF2;var t,n,i,r,a,o,s,l}(fe(),Me(),ze())}({exports:{}})),Qe(),Ze(),$e||($e=1,function(e,t){e.exports=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,i){var r,a=this._iv;a?(r=a.slice(0),this._iv=void 0):r=this._prevBlock,i.encryptBlock(r,0);for(var o=0;o<n;o++)e[t+o]^=r[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize;n.call(this,e,t,r,i),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,a=e.slice(t,t+r);n.call(this,e,t,r,i),this._prevBlock=a}}),t}(),e.mode.CFB}(fe(),Ze())}(gt)),et||(et=1,function(e,t){e.exports=function(e){return e.mode.CTR=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0);var o=a.slice(0);n.encryptBlock(o,0),a[i-1]=a[i-1]+1|0;for(var s=0;s<i;s++)e[t+s]^=o[s]}}),t.Decryptor=n,t),e.mode.CTR;var t,n}(fe(),Ze())}(_t)),tt||(tt=1,function(e,t){e.exports=function(e){
/** @preserve
            			 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
            			 * derived from CryptoJS.mode.CTR
            			 * Jan Hruby jhruby.web@gmail.com
            			 */
return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,n=e>>8&255,i=255&e;255===t?(t=0,255===n?(n=0,255===i?i=0:++i):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=i}return e}function i(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0),i(o);var s=o.slice(0);n.encryptBlock(s,0);for(var l=0;l<r;l++)e[t+l]^=s[l]}});return t.Decryptor=r,t}(),e.mode.CTRGladman}(fe(),Ze())}(yt)),nt||(nt=1,function(e,t){e.exports=function(e){return e.mode.OFB=(n=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=this._iv,a=this._keystream;r&&(a=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(a,0);for(var o=0;o<i;o++)e[t+o]^=a[o]}}),t.Decryptor=n,t),e.mode.OFB;var t,n}(fe(),Ze())}(vt)),it||(it=1,function(e,t){e.exports=function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB;var t}(fe(),Ze())}({exports:{}})),rt||(rt=1,function(e,t){e.exports=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,i=4*t,r=i-n%i,a=n+r-1;e.clamp(),e.words[a>>>2]|=r<<24-a%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923}(fe(),Ze())}({exports:{}})),at||(at=1,function(e,t){e.exports=function(e){return e.pad.Iso10126={pad:function(t,n){var i=4*n,r=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126}(fe(),Ze())}({exports:{}})),ot||(ot=1,function(e,t){e.exports=function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971}(fe(),Ze())}({exports:{}})),st||(st=1,function(e,t){e.exports=function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding}(fe(),Ze())}({exports:{}})),lt||(lt=1,function(e,t){e.exports=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}(fe(),Ze())}({exports:{}})),ut||(ut=1,function(e,t){e.exports=function(e){return n=(t=e).lib.CipherParams,i=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return n.create({ciphertext:t})}},e.format.Hex;var t,n,i}(fe(),Ze())}({exports:{}})),ct||(ct=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.BlockCipher,i=t.algo,r=[],a=[],o=[],s=[],l=[],u=[],c=[],h=[],d=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,r[n]=p,a[p]=n;var m=e[n],g=e[m],_=e[g],y=257*e[p]^16843008*p;o[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,l[n]=y<<8|y>>>24,u[n]=y,y=16843009*_^65537*g^257*m^16843008*n,c[p]=y<<24|y>>>8,h[p]=y<<16|y>>>16,d[p]=y<<8|y>>>24,f[p]=y,n?(n=m^e[e[e[_^m]]],i^=e[e[i]]):n=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],o=0;o<i;o++)o<n?a[o]=t[o]:(u=a[o-1],o%n?n>6&&o%n==4&&(u=r[u>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u]):(u=r[(u=u<<8|u>>>24)>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u],u^=p[o/n|0]<<24),a[o]=a[o-n]^u);for(var s=this._invKeySchedule=[],l=0;l<i;l++){if(o=i-l,l%4)var u=a[o];else u=a[o-4];s[l]=l<4||o<=4?u:c[r[u>>>24]]^h[r[u>>>16&255]]^d[r[u>>>8&255]]^f[r[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,l,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,h,d,f,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,r,a,o,s){for(var l=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],h=e[t+2]^n[2],d=e[t+3]^n[3],f=4,p=1;p<l;p++){var m=i[u>>>24]^r[c>>>16&255]^a[h>>>8&255]^o[255&d]^n[f++],g=i[c>>>24]^r[h>>>16&255]^a[d>>>8&255]^o[255&u]^n[f++],_=i[h>>>24]^r[d>>>16&255]^a[u>>>8&255]^o[255&c]^n[f++],y=i[d>>>24]^r[u>>>16&255]^a[c>>>8&255]^o[255&h]^n[f++];u=m,c=g,h=_,d=y}m=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^n[f++],g=(s[c>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[f++],_=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^n[f++],y=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&h])^n[f++],e[t]=m,e[t+1]=g,e[t+2]=_,e[t+3]=y},keySize:8});t.AES=n._createHelper(m)}(),e.AES}(fe(),we(),Ce(),Qe(),Ze())}({exports:{}})),ht||(ht=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib,i=n.WordArray,r=n.BlockCipher,a=t.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var i=o[n]-1;t[n]=e[i>>>5]>>>31-i%32&1}for(var r=this._subKeys=[],a=0;a<16;a++){var u=r[a]=[],c=l[a];for(n=0;n<24;n++)u[n/6|0]|=t[(s[n]-1+c)%28]<<31-n%6,u[4+(n/6|0)]|=t[28+(s[n+24]-1+c)%28]<<31-n%6;for(u[0]=u[0]<<1|u[0]>>>31,n=1;n<7;n++)u[n]=u[n]>>>4*(n-1)+3;u[7]=u[7]<<5|u[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=r[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var i=0;i<16;i++){for(var r=n[i],a=this._lBlock,o=this._rBlock,s=0,l=0;l<8;l++)s|=u[l][((o^r[l])&c[l])>>>0];this._lBlock=o,this._rBlock=a^s}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function f(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=r._createHelper(h);var p=a.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=h.createEncryptor(i.create(t)),this._des2=h.createEncryptor(i.create(n)),this._des3=h.createEncryptor(i.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(p)}(),e.TripleDES}(fe(),we(),Ce(),Qe(),Ze())}(At)),dt||(dt=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.StreamCipher,i=t.algo,r=i.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,i=this._S=[],r=0;r<256;r++)i[r]=r;r=0;for(var a=0;r<256;r++){var o=r%n,s=t[o>>>2]>>>24-o%4*8&255;a=(a+i[r]+s)%256;var l=i[r];i[r]=i[a],i[a]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,n=this._j,i=0,r=0;r<4;r++){n=(n+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[n],e[n]=a,i|=e[(e[t]+e[n])%256]<<24-8*r}return this._i=t,this._j=n,i}t.RC4=n._createHelper(r);var o=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});t.RC4Drop=n._createHelper(o)}(),e.RC4}(fe(),we(),Ce(),Qe(),Ze())}({exports:{}})),ft||(ft=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.StreamCipher,i=t.algo,r=[],a=[],o=[],s=i.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)r[n]^=i[n+4&7];if(t){var a=t.words,o=a[0],s=a[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=u>>>16|4294901760&c,d=c<<16|65535&u;for(r[0]^=u,r[1]^=h,r[2]^=c,r[3]^=d,r[4]^=u,r[5]^=h,r[6]^=c,r[7]^=d,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],r=65535&i,s=i>>>16,l=((r*r>>>17)+r*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);o[n]=l^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit}(fe(),we(),Ce(),Qe(),Ze())}({exports:{}})),pt||(pt=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.StreamCipher,i=t.algo,r=[],a=[],o=[],s=i.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)l.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var a=t.words,o=a[0],s=a[1],u=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=u>>>16|4294901760&c,d=c<<16|65535&u;for(i[0]^=u,i[1]^=h,i[2]^=c,i[3]^=d,i[4]^=u,i[5]^=h,i[6]^=c,i[7]^=d,r=0;r<4;r++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],r=65535&i,s=i>>>16,l=((r*r>>>17)+r*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);o[n]=l^u}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy}(fe(),we(),Ce(),Qe(),Ze())}({exports:{}})),mt||(mt=1,function(e,t){e.exports=function(e){return function(){var t=e,n=t.lib.BlockCipher,i=t.algo;const r=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function l(e,t){let n=t>>24&255,i=t>>16&255,r=t>>8&255,a=255&t,o=e.sbox[0][n]+e.sbox[1][i];return o^=e.sbox[2][r],o+=e.sbox[3][a],o}function u(e,t,n){let i,a=t,o=n;for(let t=0;t<r;++t)a^=e.pbox[t],o=l(e,a)^o,i=a,a=o,o=i;return i=a,a=o,o=i,o^=e.pbox[r],a^=e.pbox[r+1],{left:a,right:o}}var c=i.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;!function(e,t,n){for(let t=0;t<4;t++){e.sbox[t]=[];for(let n=0;n<256;n++)e.sbox[t][n]=o[t][n]}let i=0;for(let o=0;o<r+2;o++)e.pbox[o]=a[o]^t[i],i++,i>=n&&(i=0);let s=0,l=0,c=0;for(let t=0;t<r+2;t+=2)c=u(e,s,l),s=c.left,l=c.right,e.pbox[t]=s,e.pbox[t+1]=l;for(let t=0;t<4;t++)for(let n=0;n<256;n+=2)c=u(e,s,l),s=c.left,l=c.right,e.sbox[t][n]=s,e.sbox[t][n+1]=l}(s,t,n)}},encryptBlock:function(e,t){var n=u(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=function(e,t,n){let i,a=t,o=n;for(let t=r+1;t>1;--t)a^=e.pbox[t],o=l(e,a)^o,i=a,a=o,o=i;return i=a,a=o,o=i,o^=e.pbox[1],a^=e.pbox[0],{left:a,right:o}}(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(c)}(),e.Blowfish}(fe(),we(),Ce(),Qe(),Ze())}(Et)))),wt=function(){return(new Date).getTime()+function(e){for(var t="",n=0;n<16;n++){var i="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));t=t?t+i:i}return t}()},Tt=function(){var e=(new ce).setUA(navigator.userAgent).getResult();return e},St=function(){var e=Tt();return It(e.browser.name+"/"+e.browser.version)},Rt=function(){var e=Tt();return St()+" "+It(e.os.name)},It=function(e){return bt.AES.encrypt(e,bt.enc.Utf8.parse("587a0fb0c91ae061e66adbf2ec56f0b8"),{mode:bt.mode.ECB,padding:bt.pad.Pkcs7}).toString()},Ct={MAX_POST_SIZE:3145728,POST_INTERVAL:1e4,APM_REPORT_URL:"https://dq.jomodns.com:443/sdk_push_stat",LICENSE_KEY:"6ab8e94e75b94316ae7cf4bfb6bd46e7",DEVICEMODE:"C115C59D84DCD17680230D458F1698A0 E411A90694E7E490EE11B4B8651F00AC",MANUFACTURER:"C115C59D84DCD17680230D458F1698A0",SEND_STATUS:{NOT_SENDED:0,SEND_SUCCESS:0,SEND_FAIL:1},HTTP_STATUS:{ERROR:500},FETCH_TIMEOUT:1e4},Lt=function(){function e(e){this.deviceInfoData=void 0,this.deviceDetailData=void 0,this.UAParserRes=void 0,this.deviceInfoData=[],this.UAParserRes=Tt(),this.deviceDetailData={osName:"Web",osVersion:this.UAParserRes.os.version||"V1.0.0",deviceModel:Ct.DEVICEMODE,agentName:(this.UAParserRes.os.name||navigator.platform)+"/"+this.UAParserRes.browser.name+"/"+this.UAParserRes.browser.version,agentVersion:this.UAParserRes.browser.version+"/"+(null==e?void 0:e.version),deviceId:Rt(),notUse1:"",notUse2:"",manufacturer:Ct.MANUFACTURER,extraInfo:{size:"normal",CUID:St()}},this.setDeviceInfo()}var t=e.prototype;return t.setDeviceInfo=function(){var e=this.deviceDetailData,t=e.osName,n=e.osVersion,i=e.deviceModel,r=e.agentName,a=e.agentVersion,o=e.deviceId,s=e.notUse1,l=e.notUse2,u=e.manufacturer;this.deviceInfoData=[t,n,i,r,a,o,s,l,u]},t.destroy=function(){this.deviceInfoData=[],this.deviceDetailData=null},a(e,[{key:"getDeviceInfo",get:function(){return this.deviceInfoData}}])}(),Pt=function(){function e(e){this.tracesData=void 0,this.CommData=void 0,this.tracesObject=void 0,this.eventData=void 0,this.tracesData=[],this.CommData={url:e.url,vvid:"",isLive:e.isLive||!1,playerVersion:e.version,decodeMode:e.decodeMode||"sw",ak:"",bitrate:0,playID:(null==e?void 0:e.playID)||""},this.tracesObject={TraceId:"",CommData:this.CommData,Events:[]},this.eventData={},this.createTracesObject()}var t=e.prototype;return t.createTracesObject=function(){this.tracesObject.TraceId=wt(),this.CommData.vvid=this.tracesObject.TraceId,this.setTracesData(),this.tracesObject},t.setTracesData=function(){this.tracesData.push(this.tracesObject)},t.addTracesEvent=function(e){var t,n;null==(t=this.tracesObject)||null==(n=t.Events)||n.push(o(e,this.eventData))},t.clearTracesEvent=function(){this.tracesObject.Events=[]},t.clearTracesData=function(){this.clearTracesEvent(),this.tracesData=[]},t.reSetTracesData=function(e,t){if(!e.url)return!1;this.CommData.url=e.url,e.isLive&&(this.CommData.isLive=e.isLive),e.decodeMode&&(this.CommData.decodeMode=e.decodeMode),this.tracesObject.TraceId=wt(),this.CommData.vvid=this.tracesObject.TraceId,t&&this.addTracesEvent(t)},a(e,[{key:"Traces",get:function(){return{Traces:this.tracesData}}},{key:"tracesEventsLength",get:function(){var e;return null==(e=this.tracesObject.Events)?void 0:e.length}},{key:"playUrl",get:function(){return this.CommData.url}}])}(),Dt=function(){function e(e){var t;this.applicationData=void 0,this.applicationData=["cyberPlayer",e.version?e.version:"w1.0.0",(t=window.location.hostname,/^(\d{1,3}\.){3}\d{1,3}$/.test(t)||"localhost"==window.location.hostname?"cyberplayer.bcelive.com":window.location.hostname)]}return e.prototype.destroy=function(){this.applicationData=null},a(e,[{key:"Application",get:function(){return this.applicationData}}])}(),kt=function(){function e(){var e,t,n,i,r;this.extrasData=void 0,this.extrasData={wanType:null==(e=navigator)||null==(t=e.connection)?void 0:t.effectiveType,carrier:null==(n=navigator)||null==(i=n.connection)||null==(r=i.carrier)?void 0:r.name,timestamp:Date.now(),gateToken:Ct.LICENSE_KEY}}return e.prototype.destroy=function(){this.extrasData=null},a(e,[{key:"getExtrasData",get:function(){return this.extrasData}}])}(),xt=function(){function e(e){this.PushStatData=void 0,this.DeviceInfo=void 0,this.TracesInfo=void 0,this.ApplicationInfo=void 0,this.Extras=void 0,this.MachineMeasurements=void 0,this.PushStatData=[],this.DeviceInfo=new Lt(e),this.TracesInfo=new Pt(e),this.ApplicationInfo=new Dt(e),this.Extras=new kt,this.setPushStat()}var t=e.prototype;return t.setPushStat=function(){this.PushStatData=[[0,0],this.deviceInfo,this.getTracesInfo,[],[],{},[],[],this.applicationInfo,[],[],this.extras]},t.setTracesEventData=function(e){this.TracesInfo.addTracesEvent(e)},t.clearTracesEventData=function(){this.TracesInfo.clearTracesEvent()},t.clearTracesData=function(){this.TracesInfo.clearTracesData()},t.reSetTracesData=function(e,t){this.TracesInfo.reSetTracesData(e,t)},t.destroy=function(){this.clearTracesData(),this.DeviceInfo&&this.DeviceInfo.destroy(),this.ApplicationInfo&&this.ApplicationInfo.destroy(),this.Extras&&this.Extras.destroy()},a(e,[{key:"reportData",get:function(){var e;return 0!=(null==(e=this.TracesInfo)?void 0:e.tracesEventsLength)&&this.PushStatData}},{key:"deviceInfo",get:function(){var e;return null==(e=this.DeviceInfo)?void 0:e.getDeviceInfo}},{key:"getTracesInfo",get:function(){var e;return null==(e=this.TracesInfo)?void 0:e.Traces}},{key:"applicationInfo",get:function(){var e;return null==(e=this.ApplicationInfo)?void 0:e.Application}},{key:"extras",get:function(){var e;return null==(e=this.Extras)?void 0:e.getExtrasData}},{key:"machineMeasurements",get:function(){var e;return null==(e=this.MachineMeasurements)?void 0:e.AgentHealth}},{key:"playUrl",get:function(){return this.TracesInfo.playUrl}}])}(),Mt=function(){function e(e,t){var n=this;this._worker=void 0,this._task=void 0,this._doTask=function(){var e;null==(e=n._task)||e.call(n)},this._task=e;var i=new Blob(["\n    var timer;\n\n    function initTimer (interval) {\n      destroy()\n      clearInterval(timer);\n      timer = setInterval(() => {\n          self.postMessage({type: 'NEXT_TICK'});\n      }, interval)\n    }\n\n    function destroy () {\n      clearInterval(timer);\n    }\n\n    self.onmessage = function (e) {\n      var {type,interval} = e.data;\n      switch (type) {\n          case 'START':\n            initTimer(interval);\n            break;\n          case 'DESTROY':\n            destroy();\n            break;\n      }\n    }\n"],{type:"application/javascript"});this._worker=new Worker(URL.createObjectURL(i)),this._bindEvent(),this.start(t)}var t=e.prototype;return t._bindEvent=function(){this._worker.addEventListener("message",this._doTask)},t.start=function(e){this._worker.postMessage({type:"START",interval:e})},t.stop=function(){this._worker.postMessage({type:"DESTROY"})},t.destroy=function(){this._worker&&(this._worker.postMessage({type:"DESTROY"}),this._worker.removeEventListener("message",this._doTask),this._worker=null,this._task=null)},e}();function Ot(e){let t=e.length;for(;--t>=0;)e[t]=0}const Nt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ft=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Bt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ut=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jt=new Array(576),Gt=(Ot(jt),new Array(60)),Vt=(Ot(Gt),new Array(512)),Ht=(Ot(Vt),new Array(256)),Yt=(Ot(Ht),new Array(29)),zt=(Ot(Yt),new Array(30));function Wt(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let Kt,qt,Qt;function Xt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Ot(zt);let Jt=e=>e<256?Vt[e]:Vt[256+(e>>>7)],Zt=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},$t=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Zt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},en=(e,t,n)=>{$t(e,n[2*t],n[2*t+1])},tn=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},nn=(e,t,n)=>{const i=new Array(16);let r,a,o=0;for(r=1;r<=15;r++)o=o+n[r-1]<<1,i[r]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=tn(i[t]++,t))}},rn=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},an=e=>{e.bi_valid>8?Zt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},on=(e,t,n,i)=>{const r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]},sn=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&on(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!on(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},ln=(e,t,n)=>{let i,r,a,o,s=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+s++],i+=(255&e.pending_buf[e.sym_buf+s++])<<8,r=e.pending_buf[e.sym_buf+s++],0===i?en(e,r,t):(a=Ht[r],en(e,a+256+1,t),o=Nt[a],0!==o&&(r-=Yt[a],$t(e,r,o)),i--,a=Jt(i),en(e,a,n),o=Ft[a],0!==o&&(i-=zt[a],$t(e,i,o)))}while(s<e.sym_next);en(e,256,t)},un=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,l,u=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[2*l+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)sn(e,n,o);l=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],sn(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*l]=n[2*o]+n[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=l,e.heap[1]=l++,sn(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let u,c,h,d,f,p,m=0;for(d=0;d<=15;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)c=e.heap[u],d=n[2*n[2*c+1]+1]+1,d>l&&(d=l,m++),n[2*c+1]=d,c>i||(e.bl_count[d]++,f=0,c>=s&&(f=o[c-s]),p=n[2*c],e.opt_len+=p*(d+f),a&&(e.static_len+=p*(r[2*c+1]+f)));if(0!==m){do{for(d=l-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(d=l;0!==d;d--)for(c=e.bl_count[d];0!==c;)h=e.heap[--u],h>i||(n[2*h+1]!==d&&(e.opt_len+=(d-n[2*h+1])*n[2*h],n[2*h+1]=d),c--)}})(e,t),nn(n,u,e.bl_count)},cn=(e,t,n)=>{let i,r,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++s<l&&r===o||(s<u?e.bl_tree[2*r]+=s:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=r,0===o?(l=138,u=3):r===o?(l=6,u=3):(l=7,u=4))},hn=(e,t,n)=>{let i,r,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++s<l&&r===o)){if(s<u)do{en(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==a&&(en(e,r,e.bl_tree),s--),en(e,16,e.bl_tree),$t(e,s-3,2)):s<=10?(en(e,17,e.bl_tree),$t(e,s-3,3)):(en(e,18,e.bl_tree),$t(e,s-11,7));s=0,a=r,0===o?(l=138,u=3):r===o?(l=6,u=3):(l=7,u=4)}},dn=!1,fn=(e,t,n,i)=>{$t(e,0+(i?1:0),3),an(e),Zt(e,n),Zt(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},pn={_tr_init:e=>{dn||((()=>{let e,t,n,i,r;const a=new Array(16);for(n=0,i=0;i<28;i++)for(Yt[i]=n,e=0;e<1<<Nt[i];e++)Ht[n++]=i;for(Ht[n-1]=i,r=0,i=0;i<16;i++)for(zt[i]=r,e=0;e<1<<Ft[i];e++)Vt[r++]=i;for(r>>=7;i<30;i++)for(zt[i]=r<<7,e=0;e<1<<Ft[i]-7;e++)Vt[256+r++]=i;for(t=0;t<=15;t++)a[t]=0;for(e=0;e<=143;)jt[2*e+1]=8,e++,a[8]++;for(;e<=255;)jt[2*e+1]=9,e++,a[9]++;for(;e<=279;)jt[2*e+1]=7,e++,a[7]++;for(;e<=287;)jt[2*e+1]=8,e++,a[8]++;for(nn(jt,287,a),e=0;e<30;e++)Gt[2*e+1]=5,Gt[2*e]=tn(e,5);Kt=new Wt(jt,Nt,257,286,15),qt=new Wt(Gt,Ft,0,30,15),Qt=new Wt(new Array(0),Bt,0,19,7)})(),dn=!0),e.l_desc=new Xt(e.dyn_ltree,Kt),e.d_desc=new Xt(e.dyn_dtree,qt),e.bl_desc=new Xt(e.bl_tree,Qt),e.bi_buf=0,e.bi_valid=0,rn(e)},_tr_stored_block:fn,_tr_flush_block:(e,t,n,i)=>{let r,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),un(e,e.l_desc),un(e,e.d_desc),o=(e=>{let t;for(cn(e,e.dyn_ltree,e.l_desc.max_code),cn(e,e.dyn_dtree,e.d_desc.max_code),un(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Ut[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=n+5,n+4<=r&&-1!==t?fn(e,t,n,i):4===e.strategy||a===r?($t(e,2+(i?1:0),3),ln(e,jt,Gt)):($t(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for($t(e,t-257,5),$t(e,n-1,5),$t(e,i-4,4),r=0;r<i;r++)$t(e,e.bl_tree[2*Ut[r]+1],3);hn(e,e.dyn_ltree,t-1),hn(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),ln(e,e.dyn_ltree,e.dyn_dtree)),rn(e),i&&an(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Ht[n]+256+1)]++,e.dyn_dtree[2*Jt(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{$t(e,2,3),en(e,256,jt),(e=>{16===e.bi_valid?(Zt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var mn=(e,t,n,i)=>{let r=65535&e,a=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{r=r+t[i++]|0,a=a+r|0}while(--o);r%=65521,a%=65521}return r|a<<16};const gn=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var _n=(e,t,n,i)=>{const r=gn,a=i+n;e^=-1;for(let n=i;n<a;n++)e=e>>>8^r[255&(e^t[n])];return~e},yn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:An,_tr_stored_block:En,_tr_flush_block:bn,_tr_tally:wn,_tr_align:Tn}=pn,{Z_NO_FLUSH:Sn,Z_PARTIAL_FLUSH:Rn,Z_FULL_FLUSH:In,Z_FINISH:Cn,Z_BLOCK:Ln,Z_OK:Pn,Z_STREAM_END:Dn,Z_STREAM_ERROR:kn,Z_DATA_ERROR:xn,Z_BUF_ERROR:Mn,Z_DEFAULT_COMPRESSION:On,Z_FILTERED:Nn,Z_HUFFMAN_ONLY:Fn,Z_RLE:Bn,Z_FIXED:Un,Z_DEFAULT_STRATEGY:jn,Z_UNKNOWN:Gn,Z_DEFLATED:Vn}=vn,Hn=258,Yn=262,zn=42,Wn=113,Kn=666,qn=(e,t)=>(e.msg=yn[t],t),Qn=e=>2*e-(e>4?9:0),Xn=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Jn=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=r?n-r:0}while(--t);t=r,i=t;do{n=e.prev[--i],e.prev[i]=n>=r?n-r:0}while(--t)},Zn=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,$n=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ei=(e,t)=>{bn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,$n(e.strm)},ti=(e,t)=>{e.pending_buf[e.pending++]=t},ni=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ii=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=mn(e.adler,t,r,n):2===e.state.wrap&&(e.adler=_n(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},ri=(e,t)=>{let n,i,r=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-Yn?e.strstart-(e.w_size-Yn):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+Hn;let f=u[a+o-1],p=u[a+o];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,u[n+o]===p&&u[n+o-1]===f&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do{}while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<d);if(i=Hn-(d-a),a=d-Hn,i>o){if(e.match_start=t,o=i,i>=s)break;f=u[a+o-1],p=u[a+o]}}}while((t=h[t&c])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead},ai=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Yn)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Jn(e),i+=t),0===e.strm.avail_in)break;if(n=ii(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Zn(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Zn(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Yn&&0!==e.strm.avail_in)},oi=(e,t)=>{let n,i,r,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>r&&(n=r),n<a&&(0===n&&t!==Cn||t===Sn||n!==i+e.strm.avail_in))break;o=t===Cn&&n===i+e.strm.avail_in?1:0,En(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,$n(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(ii(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Sn&&t!==Cn&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(ii(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,a=r>e.w_size?e.w_size:r,i=e.strstart-e.block_start,(i>=a||(i||t===Cn)&&t!==Sn&&0===e.strm.avail_in&&i<=r)&&(n=i>r?r:i,o=t===Cn&&0===e.strm.avail_in&&n===i?1:0,En(e,e.block_start,n,o),e.block_start+=n,$n(e.strm)),o?3:1)},si=(e,t)=>{let n,i;for(;;){if(e.lookahead<Yn){if(ai(e),e.lookahead<Yn&&t===Sn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Yn&&(e.match_length=ri(e,n)),e.match_length>=3)if(i=wn(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+1]);else i=wn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ei(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Cn?(ei(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ei(e,!1),0===e.strm.avail_out)?1:2},li=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<Yn){if(ai(e),e.lookahead<Yn&&t===Sn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Yn&&(e.match_length=ri(e,n),e.match_length<=5&&(e.strategy===Nn||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=wn(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Zn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(ei(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=wn(e,0,e.window[e.strstart-1]),i&&ei(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=wn(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Cn?(ei(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ei(e,!1),0===e.strm.avail_out)?1:2};function ui(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const ci=[new ui(0,0,0,0,oi),new ui(4,4,8,4,si),new ui(4,5,16,8,si),new ui(4,6,32,32,si),new ui(4,4,16,16,li),new ui(8,16,32,32,li),new ui(8,16,128,128,li),new ui(8,32,128,256,li),new ui(32,128,258,1024,li),new ui(32,258,258,4096,li)];function hi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Vn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Xn(this.dyn_ltree),Xn(this.dyn_dtree),Xn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Xn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Xn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const di=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==zn&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Wn&&t.status!==Kn?1:0},fi=e=>{if(di(e))return qn(e,kn);e.total_in=e.total_out=0,e.data_type=Gn;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?zn:Wn,e.adler=2===t.wrap?0:1,t.last_flush=-2,An(t),Pn},pi=e=>{const t=fi(e);var n;return t===Pn&&((n=e.state).window_size=2*n.w_size,Xn(n.head),n.max_lazy_match=ci[n.level].max_lazy,n.good_match=ci[n.level].good_length,n.nice_match=ci[n.level].nice_length,n.max_chain_length=ci[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},mi=(e,t,n,i,r,a)=>{if(!e)return kn;let o=1;if(t===On&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>9||n!==Vn||i<8||i>15||t<0||t>9||a<0||a>Un||8===i&&1!==o)return qn(e,kn);8===i&&(i=9);const s=new hi;return e.state=s,s.strm=e,s.status=zn,s.wrap=o,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=n,pi(e)};var gi={deflateInit:(e,t)=>mi(e,t,Vn,15,8,jn),deflateInit2:mi,deflateReset:pi,deflateResetKeep:fi,deflateSetHeader:(e,t)=>di(e)||2!==e.state.wrap?kn:(e.state.gzhead=t,Pn),deflate:(e,t)=>{if(di(e)||t>Ln||t<0)return e?qn(e,kn):kn;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Kn&&t!==Cn)return qn(e,0===e.avail_out?Mn:kn);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if($n(e),0===e.avail_out)return n.last_flush=-1,Pn}else if(0===e.avail_in&&Qn(t)<=Qn(i)&&t!==Cn)return qn(e,Mn);if(n.status===Kn&&0!==e.avail_in)return qn(e,Mn);if(n.status===zn&&0===n.wrap&&(n.status=Wn),n.status===zn){let t=Vn+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=Fn||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=32),t+=31-t%31,ni(n,t),0!==n.strstart&&(ni(n,e.adler>>>16),ni(n,65535&e.adler)),e.adler=1,n.status=Wn,$n(e),0!==n.pending)return n.last_flush=-1,Pn}if(57===n.status)if(e.adler=0,ti(n,31),ti(n,139),ti(n,8),n.gzhead)ti(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ti(n,255&n.gzhead.time),ti(n,n.gzhead.time>>8&255),ti(n,n.gzhead.time>>16&255),ti(n,n.gzhead.time>>24&255),ti(n,9===n.level?2:n.strategy>=Fn||n.level<2?4:0),ti(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ti(n,255&n.gzhead.extra.length),ti(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=_n(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ti(n,0),ti(n,0),ti(n,0),ti(n,0),ti(n,0),ti(n,9===n.level?2:n.strategy>=Fn||n.level<2?4:0),ti(n,3),n.status=Wn,$n(e),0!==n.pending)return n.last_flush=-1,Pn;if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=_n(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,$n(e),0!==n.pending)return n.last_flush=-1,Pn;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=_n(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=_n(e.adler,n.pending_buf,n.pending-i,i)),$n(e),0!==n.pending)return n.last_flush=-1,Pn;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ti(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=_n(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=_n(e.adler,n.pending_buf,n.pending-i,i)),$n(e),0!==n.pending)return n.last_flush=-1,Pn;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ti(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=_n(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&($n(e),0!==n.pending))return n.last_flush=-1,Pn;ti(n,255&e.adler),ti(n,e.adler>>8&255),e.adler=0}if(n.status=Wn,$n(e),0!==n.pending)return n.last_flush=-1,Pn}if(0!==e.avail_in||0!==n.lookahead||t!==Sn&&n.status!==Kn){let i=0===n.level?oi(n,t):n.strategy===Fn?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(ai(e),0===e.lookahead)){if(t===Sn)return 1;break}if(e.match_length=0,n=wn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ei(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Cn?(ei(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ei(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Bn?((e,t)=>{let n,i,r,a;const o=e.window;for(;;){if(e.lookahead<=Hn){if(ai(e),e.lookahead<=Hn&&t===Sn)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){a=e.strstart+Hn;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<a);e.match_length=Hn-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=wn(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=wn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ei(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Cn?(ei(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ei(e,!1),0===e.strm.avail_out)?1:2})(n,t):ci[n.level].func(n,t);if(3!==i&&4!==i||(n.status=Kn),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),Pn;if(2===i&&(t===Rn?Tn(n):t!==Ln&&(En(n,0,0,!1),t===In&&(Xn(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),$n(e),0===e.avail_out))return n.last_flush=-1,Pn}return t!==Cn?Pn:n.wrap<=0?Dn:(2===n.wrap?(ti(n,255&e.adler),ti(n,e.adler>>8&255),ti(n,e.adler>>16&255),ti(n,e.adler>>24&255),ti(n,255&e.total_in),ti(n,e.total_in>>8&255),ti(n,e.total_in>>16&255),ti(n,e.total_in>>24&255)):(ni(n,e.adler>>>16),ni(n,65535&e.adler)),$n(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Pn:Dn)},deflateEnd:e=>{if(di(e))return kn;const t=e.state.status;return e.state=null,t===Wn?qn(e,xn):Pn},deflateSetDictionary:(e,t)=>{let n=t.length;if(di(e))return kn;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==zn||i.lookahead)return kn;if(1===r&&(e.adler=mn(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(Xn(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ai(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Zn(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,ai(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,i.wrap=r,Pn},deflateInfo:"pako deflate (from Nodeca project)"};const _i=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var yi={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)_i(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];n.set(r,i),i+=r.length}return n}};let vi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){vi=!1}const Ai=new Uint8Array(256);for(let e=0;e<256;e++)Ai[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ai[254]=Ai[254]=1;var Ei={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,a,o=e.length,s=0;for(r=0;r<o;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,r=0;a<s;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const a=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){a[r++]=t;continue}let o=Ai[t];if(o>4)a[r++]=65533,i+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&i<n;)t=t<<6|63&e[i++],o--;o>1?a[r++]=65533:t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&vi)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(a,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Ai[e[n]]>t?n:t}},bi=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const wi=Object.prototype.toString,{Z_NO_FLUSH:Ti,Z_SYNC_FLUSH:Si,Z_FULL_FLUSH:Ri,Z_FINISH:Ii,Z_OK:Ci,Z_STREAM_END:Li,Z_DEFAULT_COMPRESSION:Pi,Z_DEFAULT_STRATEGY:Di,Z_DEFLATED:ki}=vn;function xi(e){this.options=yi.assign({level:Pi,method:ki,chunkSize:16384,windowBits:15,memLevel:8,strategy:Di},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new bi,this.strm.avail_out=0;let n=gi.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ci)throw new Error(yn[n]);if(t.header&&gi.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ei.string2buf(t.dictionary):"[object ArrayBuffer]"===wi.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=gi.deflateSetDictionary(this.strm,e),n!==Ci)throw new Error(yn[n]);this._dict_set=!0}}function Mi(e,t){const n=new xi(t);if(n.push(e,!0),n.err)throw n.msg||yn[n.err];return n.result}xi.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Ii:Ti,"string"==typeof e?n.input=Ei.string2buf(e):"[object ArrayBuffer]"===wi.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a===Si||a===Ri)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=gi.deflate(n,a),r===Li)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=gi.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ci;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},xi.prototype.onData=function(e){this.chunks.push(e)},xi.prototype.onEnd=function(e){e===Ci&&(this.result=yi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Oi={Deflate:xi,deflate:Mi,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Mi(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Mi(e,t)},constants:vn};const Ni=16209;var Fi=function(e,t){let n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y,v,A,E,b,w,T,S;const R=e.state;n=e.next_in,T=e.input,i=n+(e.avail_in-5),r=e.next_out,S=e.output,a=r-(t-e.avail_out),o=r+(e.avail_out-257),s=R.dmax,l=R.wsize,u=R.whave,c=R.wnext,h=R.window,d=R.hold,f=R.bits,p=R.lencode,m=R.distcode,g=(1<<R.lenbits)-1,_=(1<<R.distbits)-1;e:do{f<15&&(d+=T[n++]<<f,f+=8,d+=T[n++]<<f,f+=8),y=p[d&g];t:for(;;){if(v=y>>>24,d>>>=v,f-=v,v=y>>>16&255,0===v)S[r++]=65535&y;else{if(!(16&v)){if(64&v){if(32&v){R.mode=16191;break e}e.msg="invalid literal/length code",R.mode=Ni;break e}y=p[(65535&y)+(d&(1<<v)-1)];continue t}for(A=65535&y,v&=15,v&&(f<v&&(d+=T[n++]<<f,f+=8),A+=d&(1<<v)-1,d>>>=v,f-=v),f<15&&(d+=T[n++]<<f,f+=8,d+=T[n++]<<f,f+=8),y=m[d&_];;){if(v=y>>>24,d>>>=v,f-=v,v=y>>>16&255,16&v){if(E=65535&y,v&=15,f<v&&(d+=T[n++]<<f,f+=8,f<v&&(d+=T[n++]<<f,f+=8)),E+=d&(1<<v)-1,E>s){e.msg="invalid distance too far back",R.mode=Ni;break e}if(d>>>=v,f-=v,v=r-a,E>v){if(v=E-v,v>u&&R.sane){e.msg="invalid distance too far back",R.mode=Ni;break e}if(b=0,w=h,0===c){if(b+=l-v,v<A){A-=v;do{S[r++]=h[b++]}while(--v);b=r-E,w=S}}else if(c<v){if(b+=l+c-v,v-=c,v<A){A-=v;do{S[r++]=h[b++]}while(--v);if(b=0,c<A){v=c,A-=v;do{S[r++]=h[b++]}while(--v);b=r-E,w=S}}}else if(b+=c-v,v<A){A-=v;do{S[r++]=h[b++]}while(--v);b=r-E,w=S}for(;A>2;)S[r++]=w[b++],S[r++]=w[b++],S[r++]=w[b++],A-=3;A&&(S[r++]=w[b++],A>1&&(S[r++]=w[b++]))}else{b=r-E;do{S[r++]=S[b++],S[r++]=S[b++],S[r++]=S[b++],A-=3}while(A>2);A&&(S[r++]=S[b++],A>1&&(S[r++]=S[b++]))}break}if(64&v){e.msg="invalid distance code",R.mode=Ni;break e}y=m[(65535&y)+(d&(1<<v)-1)]}}break}}while(n<i&&r<o);A=f>>3,n-=A,f-=A<<3,d&=(1<<f)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<o?o-r+257:257-(r-o),R.hold=d,R.bits=f};const Bi=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ui=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ji=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Gi=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Vi=(e,t,n,i,r,a,o,s)=>{const l=s.bits;let u,c,h,d,f,p,m=0,g=0,_=0,y=0,v=0,A=0,E=0,b=0,w=0,T=0,S=null;const R=new Uint16Array(16),I=new Uint16Array(16);let C,L,P,D=null;for(m=0;m<=15;m++)R[m]=0;for(g=0;g<i;g++)R[t[n+g]]++;for(v=l,y=15;y>=1&&0===R[y];y--);if(v>y&&(v=y),0===y)return r[a++]=20971520,r[a++]=20971520,s.bits=1,0;for(_=1;_<y&&0===R[_];_++);for(v<_&&(v=_),b=1,m=1;m<=15;m++)if(b<<=1,b-=R[m],b<0)return-1;if(b>0&&(0===e||1!==y))return-1;for(I[1]=0,m=1;m<15;m++)I[m+1]=I[m]+R[m];for(g=0;g<i;g++)0!==t[n+g]&&(o[I[t[n+g]]++]=g);if(0===e?(S=D=o,p=20):1===e?(S=Bi,D=Ui,p=257):(S=ji,D=Gi,p=0),T=0,g=0,m=_,f=a,A=v,E=0,h=-1,w=1<<v,d=w-1,1===e&&w>852||2===e&&w>592)return 1;for(;;){C=m-E,o[g]+1<p?(L=0,P=o[g]):o[g]>=p?(L=D[o[g]-p],P=S[o[g]-p]):(L=96,P=0),u=1<<m-E,c=1<<A,_=c;do{c-=u,r[f+(T>>E)+c]=C<<24|L<<16|P}while(0!==c);for(u=1<<m-1;T&u;)u>>=1;if(0!==u?(T&=u-1,T+=u):T=0,g++,0==--R[m]){if(m===y)break;m=t[n+o[g]]}if(m>v&&(T&d)!==h){for(0===E&&(E=v),f+=_,A=m-E,b=1<<A;A+E<y&&(b-=R[A+E],!(b<=0));)A++,b<<=1;if(w+=1<<A,1===e&&w>852||2===e&&w>592)return 1;h=T&d,r[h]=v<<24|A<<16|f-a}}return 0!==T&&(r[f+T]=m-E<<24|64<<16),s.bits=v,0};const{Z_FINISH:Hi,Z_BLOCK:Yi,Z_TREES:zi,Z_OK:Wi,Z_STREAM_END:Ki,Z_NEED_DICT:qi,Z_STREAM_ERROR:Qi,Z_DATA_ERROR:Xi,Z_MEM_ERROR:Ji,Z_BUF_ERROR:Zi,Z_DEFLATED:$i}=vn,er=16180,tr=16190,nr=16191,ir=16192,rr=16194,ar=16199,or=16200,sr=16206,lr=16209,ur=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function cr(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let hr,dr,fr=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<er||t.mode>16211?1:0},pr=e=>{if(fr(e))return Qi;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=er,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Wi},mr=e=>{if(fr(e))return Qi;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,pr(e)},gr=(e,t)=>{let n;if(fr(e))return Qi;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Qi:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,mr(e))},_r=(e,t)=>{if(!e)return Qi;const n=new cr;e.state=n,n.strm=e,n.window=null,n.mode=er;const i=gr(e,t);return i!==Wi&&(e.state=null),i},yr=!0,vr=e=>{if(yr){hr=new Int32Array(512),dr=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Vi(1,e.lens,0,288,hr,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Vi(2,e.lens,0,32,dr,0,e.work,{bits:5}),yr=!1}e.lencode=hr,e.lenbits=9,e.distcode=dr,e.distbits=5},Ar=(e,t,n,i)=>{let r;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(t.subarray(n-i,n-i+r),a.wnext),(i-=r)?(a.window.set(t.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};var Er={inflateReset:mr,inflateReset2:gr,inflateResetKeep:pr,inflateInit:e=>_r(e,15),inflateInit2:_r,inflate:(e,t)=>{let n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y,v,A,E,b,w,T=0;const S=new Uint8Array(4);let R,I;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(fr(e)||!e.output||!e.input&&0!==e.avail_in)return Qi;n=e.state,n.mode===nr&&(n.mode=ir),o=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,u=n.hold,c=n.bits,h=s,d=l,w=Wi;e:for(;;)switch(n.mode){case er:if(0===n.wrap){n.mode=ir;break}for(;c<16;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,S[0]=255&u,S[1]=u>>>8&255,n.check=_n(n.check,S,2,0),u=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=lr;break}if((15&u)!==$i){e.msg="unknown compression method",n.mode=lr;break}if(u>>>=4,c-=4,b=8+(15&u),0===n.wbits&&(n.wbits=b),b>15||b>n.wbits){e.msg="invalid window size",n.mode=lr;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:nr,u=0,c=0;break;case 16181:for(;c<16;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(n.flags=u,(255&n.flags)!==$i){e.msg="unknown compression method",n.mode=lr;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=lr;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=_n(n.check,S,2,0)),u=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,n.check=_n(n.check,S,4,0)),u=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=_n(n.check,S,2,0)),u=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(S[0]=255&u,S[1]=u>>>8&255,n.check=_n(n.check,S,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>s&&(f=s),f&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+f),b)),512&n.flags&&4&n.wrap&&(n.check=_n(n.check,i,f,a)),s-=f,a+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;f=0;do{b=i[a+f++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b))}while(b&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=_n(n.check,i,f,a)),s-=f,a+=f,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;f=0;do{b=i[a+f++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b))}while(b&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=_n(n.check,i,f,a)),s-=f,a+=f,b)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=lr;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=nr;break;case 16189:for(;c<32;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}e.adler=n.check=ur(u),u=0,c=0,n.mode=tr;case tr:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=u,n.bits=c,qi;e.adler=n.check=1,n.mode=nr;case nr:if(t===Yi||t===zi)break e;case ir:if(n.last){u>>>=7&c,c-=7&c,n.mode=sr;break}for(;c<3;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}switch(n.last=1&u,u>>>=1,c-=1,3&u){case 0:n.mode=16193;break;case 1:if(vr(n),n.mode=ar,t===zi){u>>>=2,c-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=lr}u>>>=2,c-=2;break;case 16193:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=lr;break}if(n.length=65535&u,u=0,c=0,n.mode=rr,t===zi)break e;case rr:n.mode=16195;case 16195:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;r.set(i.subarray(a,a+f),o),s-=f,a+=f,l-=f,o+=f,n.length-=f;break}n.mode=nr;break;case 16196:for(;c<14;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=lr;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}n.lens[C[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},w=Vi(0,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,w){e.msg="invalid code lengths set",n.mode=lr;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[u&(1<<n.lenbits)-1],g=T>>>24,_=T>>>16&255,y=65535&T,!(g<=c);){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(y<16)u>>>=g,c-=g,n.lens[n.have++]=y;else{if(16===y){for(I=g+2;c<I;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=lr;break}b=n.lens[n.have-1],f=3+(3&u),u>>>=2,c-=2}else if(17===y){for(I=g+3;c<I;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}u>>>=g,c-=g,b=0,f=3+(7&u),u>>>=3,c-=3}else{for(I=g+7;c<I;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}u>>>=g,c-=g,b=0,f=11+(127&u),u>>>=7,c-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=lr;break}for(;f--;)n.lens[n.have++]=b}}if(n.mode===lr)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=lr;break}if(n.lenbits=9,R={bits:n.lenbits},w=Vi(1,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,w){e.msg="invalid literal/lengths set",n.mode=lr;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},w=Vi(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,w){e.msg="invalid distances set",n.mode=lr;break}if(n.mode=ar,t===zi)break e;case ar:n.mode=or;case or:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=u,n.bits=c,Fi(e,d),o=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,u=n.hold,c=n.bits,n.mode===nr&&(n.back=-1);break}for(n.back=0;T=n.lencode[u&(1<<n.lenbits)-1],g=T>>>24,_=T>>>16&255,y=65535&T,!(g<=c);){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(_&&!(240&_)){for(v=g,A=_,E=y;T=n.lencode[E+((u&(1<<v+A)-1)>>v)],g=T>>>24,_=T>>>16&255,y=65535&T,!(v+g<=c);){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=g,c-=g,n.back+=g,n.length=y,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=nr;break}if(64&_){e.msg="invalid literal/length code",n.mode=lr;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;c<I;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;T=n.distcode[u&(1<<n.distbits)-1],g=T>>>24,_=T>>>16&255,y=65535&T,!(g<=c);){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(!(240&_)){for(v=g,A=_,E=y;T=n.distcode[E+((u&(1<<v+A)-1)>>v)],g=T>>>24,_=T>>>16&255,y=65535&T,!(v+g<=c);){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=g,c-=g,n.back+=g,64&_){e.msg="invalid distance code",n.mode=lr;break}n.offset=y,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;c<I;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=lr;break}n.mode=16204;case 16204:if(0===l)break e;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=lr;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=r,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{r[o++]=m[p++]}while(--f);0===n.length&&(n.mode=or);break;case 16205:if(0===l)break e;r[o++]=n.length,l--,n.mode=or;break;case sr:if(n.wrap){for(;c<32;){if(0===s)break e;s--,u|=i[a++]<<c,c+=8}if(d-=l,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?_n(n.check,r,d,o-d):mn(n.check,r,d,o-d)),d=l,4&n.wrap&&(n.flags?u:ur(u))!==n.check){e.msg="incorrect data check",n.mode=lr;break}u=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break e;s--,u+=i[a++]<<c,c+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=lr;break}u=0,c=0}n.mode=16208;case 16208:w=Ki;break e;case lr:w=Xi;break e;case 16210:return Ji;default:return Qi}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=u,n.bits=c,(n.wsize||d!==e.avail_out&&n.mode<lr&&(n.mode<sr||t!==Hi))&&Ar(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?_n(n.check,r,d,e.next_out-d):mn(n.check,r,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===nr?128:0)+(n.mode===ar||n.mode===rr?256:0),(0===h&&0===d||t===Hi)&&w===Wi&&(w=Zi),w},inflateEnd:e=>{if(fr(e))return Qi;let t=e.state;return t.window&&(t.window=null),e.state=null,Wi},inflateGetHeader:(e,t)=>{if(fr(e))return Qi;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,Wi):Qi},inflateSetDictionary:(e,t)=>{const n=t.length;let i,r,a;return fr(e)?Qi:(i=e.state,0!==i.wrap&&i.mode!==tr?Qi:i.mode===tr&&(r=1,r=mn(r,t,n,0),r!==i.check)?Xi:(a=Ar(e,t,n,n),a?(i.mode=16210,Ji):(i.havedict=1,Wi)))},inflateInfo:"pako inflate (from Nodeca project)"},br=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const wr=Object.prototype.toString,{Z_NO_FLUSH:Tr,Z_FINISH:Sr,Z_OK:Rr,Z_STREAM_END:Ir,Z_NEED_DICT:Cr,Z_STREAM_ERROR:Lr,Z_DATA_ERROR:Pr,Z_MEM_ERROR:Dr}=vn;function kr(e){this.options=yi.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new bi,this.strm.avail_out=0;let n=Er.inflateInit2(this.strm,t.windowBits);if(n!==Rr)throw new Error(yn[n]);if(this.header=new br,Er.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ei.string2buf(t.dictionary):"[object ArrayBuffer]"===wr.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Er.inflateSetDictionary(this.strm,t.dictionary),n!==Rr)))throw new Error(yn[n])}function xr(e,t){const n=new kr(t);if(n.push(e),n.err)throw n.msg||yn[n.err];return n.result}kr.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Sr:Tr,"[object ArrayBuffer]"===wr.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=Er.inflate(n,o),a===Cr&&r&&(a=Er.inflateSetDictionary(n,r),a===Rr?a=Er.inflate(n,o):a===Pr&&(a=Cr));n.avail_in>0&&a===Ir&&n.state.wrap>0&&0!==e[n.next_in];)Er.inflateReset(n),a=Er.inflate(n,o);switch(a){case Lr:case Pr:case Cr:case Dr:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===Ir))if("string"===this.options.to){let e=Ei.utf8border(n.output,n.next_out),t=n.next_out-e,r=Ei.buf2string(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Rr||0!==s){if(a===Ir)return a=Er.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},kr.prototype.onData=function(e){this.chunks.push(e)},kr.prototype.onEnd=function(e){e===Rr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=yi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const{Deflate:Mr,deflate:Or,deflateRaw:Nr,gzip:Fr}=Oi,{Inflate:Br,inflate:Ur,inflateRaw:jr,ungzip:Gr}={Inflate:kr,inflate:xr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,xr(e,t)},ungzip:xr,constants:vn};var Vr={Deflate:Mr,deflate:Or,deflateRaw:Nr,gzip:Fr,Inflate:Br,inflate:Ur,inflateRaw:jr,ungzip:Gr,constants:vn},Hr=function(e){return e.DO_TASK="dotask",e.ERROR="error",e}({}),Yr=function(){function e(e){var t,n;this.options=void 0,this.isSendRequset=void 0,this.emitter=void 0,this.emitter=e,this.options={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","X-App-License-Key":Ct.LICENSE_KEY,"X-UAQ-UUID":Rt(),"X-UAQ-Channel":St(),"X-UAQ-WanType":(null==(t=navigator)||null==(n=t.connection)?void 0:n.effectiveType)||"wifi"}},this.isSendRequset=!1}return e.prototype.sendReport=function(e){var t=this,n=Vr.gzip(JSON.stringify({version:1,value:[e],uploadSource:0})),i=o(this.options,{body:n});return new Promise((function(e){t.isSendRequset=!0,fetch(Ct.APM_REPORT_URL,i).then((function(n){t.isSendRequset=!1,e(n)})).then((function(n){t.isSendRequset=!1,e(n)})).catch((function(){t.emitter.emit(Hr.ERROR,{status:Ct.HTTP_STATUS.ERROR}),t.isSendRequset=!1,e({status:Ct.HTTP_STATUS.ERROR})}))}))},a(e,[{key:"isSend",get:function(){return this.isSendRequset}}])}(),zr={exports:{}},Wr=zr,Kr=Object.prototype.hasOwnProperty,qr="~";function Qr(){}function Xr(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Jr(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new Xr(n,i||e,r),o=qr?qr+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],a]:e._events[o].push(a):(e._events[o]=a,e._eventsCount++),e}function Zr(e,t){0==--e._eventsCount?e._events=new Qr:delete e._events[t]}function $r(){this._events=new Qr,this._eventsCount=0}Object.create&&(Qr.prototype=Object.create(null),(new Qr).__proto__||(qr=!1)),$r.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)Kr.call(e,t)&&n.push(qr?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},$r.prototype.listeners=function(e){var t=qr?qr+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,a=new Array(r);i<r;i++)a[i]=n[i].fn;return a},$r.prototype.listenerCount=function(e){var t=qr?qr+e:e,n=this._events[t];return n?n.fn?1:n.length:0},$r.prototype.emit=function(e,t,n,i,r,a){var o=qr?qr+e:e;if(!this._events[o])return!1;var s,l,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,r),!0;case 6:return u.fn.call(u.context,t,n,i,r,a),!0}for(l=1,s=new Array(c-1);l<c;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var h,d=u.length;for(l=0;l<d;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!s)for(h=1,s=new Array(c-1);h<c;h++)s[h-1]=arguments[h];u[l].fn.apply(u[l].context,s)}}return!0},$r.prototype.on=function(e,t,n){return Jr(this,e,t,n,!1)},$r.prototype.once=function(e,t,n){return Jr(this,e,t,n,!0)},$r.prototype.removeListener=function(e,t,n,i){var r=qr?qr+e:e;if(!this._events[r])return this;if(!t)return Zr(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||Zr(this,r);else{for(var o=0,s=[],l=a.length;o<l;o++)(a[o].fn!==t||i&&!a[o].once||n&&a[o].context!==n)&&s.push(a[o]);s.length?this._events[r]=1===s.length?s[0]:s:Zr(this,r)}return this},$r.prototype.removeAllListeners=function(e){var t;return e?(t=qr?qr+e:e,this._events[t]&&Zr(this,t)):(this._events=new Qr,this._eventsCount=0),this},$r.prototype.off=$r.prototype.removeListener,$r.prototype.addListener=$r.prototype.on,$r.prefixed=qr,$r.EventEmitter=$r,Wr.exports=$r;var ea=l(zr.exports);function ta(e){this.APM_REPORT_URL=void 0,this.PushStat=void 0,this.TickTimer=void 0,this.httpRequest=void 0,this.SendStatus=void 0,this.emitter=void 0,this.Event=void 0,this.APM_REPORT_URL=Ct.APM_REPORT_URL,this.PushStat=new xt(e),this.TickTimer=new Mt(this.doTask.bind(this),Ct.POST_INTERVAL),this.SendStatus=Ct.SEND_STATUS.NOT_SENDED,this.emitter=new ea,this.httpRequest=new Yr(this.emitter),this.Event=Hr,this.addEvent()}var na=ta.prototype;return na.addEvent=function(){var e=this;this.emitter&&this.emitter.on(Hr.ERROR,(function(){e.SendStatus=Ct.SEND_STATUS.SEND_FAIL}))},na.reportEventData=function(e){this.PushStat.setTracesEventData(e)},na.setPlayConfig=function(e,t){this.playUrl!=e.url&&(this.playUrl&&this.playUrl!==e.url&&this.doTask(),this.PushStat&&this.PushStat.reSetTracesData(e,t))},na.clearEventList=function(){this.PushStat.clearTracesEventData()},na.doTask=function(){var t,n=(t=e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pushStatData,this.emitter.emit(Hr.DO_TASK),!this.pushStatData||this.SendStatus==Ct.SEND_STATUS.SEND_FAIL){e.next=8;break}return e.next=5,this.httpRequest.sendReport(this.pushStatData);case 5:(n=e.sent)&&n.status&&200===n.status?this.SendStatus=Ct.SEND_STATUS.SEND_SUCCESS:this.SendStatus=Ct.SEND_STATUS.SEND_FAIL,this.clearEventList();case 8:case"end":return e.stop()}}),t,this)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(e){i(o,r,a,s,l,"next",e)}function l(e){i(o,r,a,s,l,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}(),na.destroy=function(){var e,t;this.doTask(),this.emitter.off(Hr.DO_TASK),null==(e=this.TickTimer)||e.destroy(),null==(t=this.PushStat)||t.destroy()},a(ta,[{key:"apmReportUrl",get:function(){return Ct.APM_REPORT_URL},set:function(e){this.APM_REPORT_URL=e}},{key:"pushStatData",get:function(){var e;return null==(e=this.PushStat)?void 0:e.reportData}},{key:"playUrl",get:function(){var e;return null==(e=this.PushStat)?void 0:e.playUrl}},{key:"setReportUrl",set:function(e){Ct.APM_REPORT_URL=e}}])}()}).call(this,n(26))},,,,,,,,,,,,,,,,function(e,t,n){n=[n(140),n(267)],t=function(e){return window.__DEBUG__=!1,window.__LOG_API__="https://drm.media.baidubce.com:8888",window.cyberplayer=e.selectPlayer,e.selectPlayer}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(141),n(2),n(48),n(102),n(79)],t=function(e,t,n,i,r){function a(t){var n,i;return t?"string"==typeof t?(n=o(t))||(i=document.getElementById(t)):"number"==typeof t?n=c[t]:t.nodeType&&(n=o((i=t).id)):n=c[0],n||(i?(t=new e(i,s),h++,t.uniqueId=h,c.push(t),t):{registerPlugin:r.registerPlugin})}function o(e){for(var t=0;t<c.length;t++)if(c[t].id===e)return c[t];return null}function s(e){for(var t=c.length;t--;)if(c[t].uniqueId===e.uniqueId){c.splice(t,1);break}}var l,u,c=[],h=0;n={selectPlayer:a,registerProvider:n.registerProvider,availableProviders:i,registerPlugin:r.registerPlugin},a.api=n,_hmt=[];try{navigator.onLine?((l=document.createElement("script")).onerror=function(){_hmt=null},l.src="https://hm.baidu.com/hm.js?20ba3a41aeedac500c94bdef787f57e6",(u=document.getElementsByTagName("script")[0]).parentNode.insertBefore(l,u),_hmt.push(["_setAutoPageview",!1])):_hmt=null}catch(t){_hmt=null}return n}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(6),n(16),n(7),n(1),n(100),n(2),n(149),n(263),n(264),n(265),n(266),n(35),n(4),n(51)],t=function(e,t,n,i,r,a,o,s,l,u,c,h,d,f){return function(c,p){function m(){_=new o(c),s(y,_),l(y,_),_.on(e.JWPLAYER_PLAYLIST_ITEM,(function(){v={}})),_.on(e.JWPLAYER_MEDIA_META,(function(e){a.extend(v,e)})),_.on(e.JWPLAYER_READY,(function(e){A.tick("ready"),e.setupTime=A.between("setup","ready")})),_.on("all",y.trigger),_.on(e.JWPLAYER_ERROR,(function(e){let{errorType:t,type:n,expireDay:r}=e;var a=y.getConfig()&&y.getConfig().options;let o=a&&a.lang?a.lang:"zh";if("mediaError"===e.type&&i.isMp4(e.videoSrc)&&e.detail&&("DEMUXER_ERROR_COULD_NOT_OPEN: FFmpegDemuxer: open context failed"===e.detail.message||4===e.detail.code))a.primary="justflash",_.setup(a,y);else if(t&&t==d.ErrorTypes.NOT_SUPPORT)_.setupError({message:f.default[o].ERRORTIPS.NOTSUPPORT});else if("linceseError"===t)if("EXPIRED_COUNT_DOWM"!=n)setTimeout((function(){y.remove(),_.setupError({message:f.default[o].LICENSE[n]},"license_error")}));else for(var s=f.default[o].LICENSE[n]+""+r+f.default[o].LICENSE.DAY,l=i.getElementsByClassName("jw-warning"),u=0;u<l.length;u++){var c=l[u];c.innerText=s,c.style.display="block"}}))}async function g(){v={},y.off(),localStorage.setItem("baiducyberplayer.playbackRate",1),localStorage.setItem("baiducyberplayer.mute",!0),_&&_.off(),_&&_.playerDestroy&&await _.playerDestroy()}var _,y=this,v={},A=(a.extend(this,n),this.utils=i,this._=a,this.Events=n,this.version=h,this.trigger=function(e,t){return(t=a.isObject(t)?a.extend({},t):{}).type=e,(window.jwplayer&&window.jwplayer.debug?n.trigger:n.triggerSafe).call(y,e,t)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this),m(),u(this),this.id=c.id,this._qoe=new r);return A.tick("init"),this.getPlugin=function(e){return y.plugins&&y.plugins[e]},this.addPlugin=function(e,t){this.plugins=this.plugins||{},this.plugins[e]=t,this.onReady(t.addToPlayer),t.resize&&this.onResize(t.resizeHandler)},this.setup=function(e){return A.tick("setup"),g(),m(),i.foreach(e.events,(function(e,t){"function"==typeof(e=y[e])&&e.call(y,t)})),e.id=y.id,_.setup(e,this),y},this.qoe=function(){var t=_.getItemQoe();return{setupTime:A.between("setup","ready"),firstFrame:t.between(e.JWPLAYER_MEDIA_PLAY_ATTEMPT,e.JWPLAYER_MEDIA_FIRST_FRAME),player:A.dump(),item:t.dump()}},this.getContainer=function(){return _.getContainer?_.getContainer():c},this.getMeta=this.getItemMeta=function(){return v},this.getPlaylistItem=function(e){var t;return i.exists(e)?(t=y.getPlaylist())?t[e]:null:_._model.get("playlistItem")},this.getRenderingMode=function(){return"html5"},this.load=function(e,t){var n=this.getPlugin("vast")||this.getPlugin("googima");return n&&n.destroy(),_.load(e,t),y},this.prevFrame=function(){return _.prevFrame()},this.nextFrame=function(){return _.nextFrame()},this.snapshot=function(e){return _.snapshot(e)},this.test1=function(){return _.test1(),y},this.play=function(e,n){return n=(n=a.isBoolean(e)?n:e)||{reason:"external"},!0===e?_.play(n):!1===e||(e=y.getState())===t.PLAYING?_.pause():_.play(n),y},this.pause=function(e){return a.isBoolean(e)?this.play(!e):this.play()},this.createInstream=function(){return _.createInstream()},this.castToggle=function(){_&&_.castToggle&&_.castToggle()},this.playAd=this.pauseAd=i.noop,this.remove=async function(){return p(y),y.trigger("remove"),await g(),y},this}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){return{hasClass:function(e,t){return t=" "+t+" ",1===e.nodeType&&0<=(" "+e.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(t)}}}.apply(t,[]),void 0!==t&&(e.exports=t)},function(e,t,n){void 0!==(t=function(){return{DOM_REMOVE_IGNORE:"dom-remove-ignore"}}.apply(t,[]))&&(e.exports=t)},function(e,t,n){n=function(e,t,n){var i,r,a={},o={},s=(i=function(){return document.head||document.getElementsByTagName("head")[0]},function(){return r=void 0===r?i.apply(this,arguments):r});function l(e){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-jwplayer-id",e),e=t,s().appendChild(e),t}function u(e,t){e=(n=(n=o[e])||(o[e]={element:l(e),counter:0})).counter++;var n=n.element,i=d.bind(null,n,e,!1),r=d.bind(null,n,e,!0);return i(t),function(e){e?e.css===t.css&&e.media===t.media||i(t=e):r()}}n.exports={style:function(e,t){!function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=(a[e]||{})[i.id];if(r){for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(u(e,i.parts[o]))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(u(e,i.parts[o]));a[e]=a[e]||{},a[e][i.id]={id:i.id,parts:s}}}}(t,function(e){for(var t=[],n={},i=0;i<e.length;i++){var r,a=(r=e[i])[0],o={css:o=r[1],media:r=r[2]};n[a]?n[a].parts.push(o):t.push(n[a]={id:a,parts:[o]})}return t}(e))},clear:function(e){var t=a[e];if(t){for(var n=Object.keys(t),i=0;i<n.length;i+=1)for(var r=t[n[i]],o=0;o<r.parts.length;o+=1)r.parts[o]();delete a[e]}}},c=[];var c,h=function(e,t){return c[e]=t,c.filter(Boolean).join("\n")};function d(e,t,n,i){n=n?"":i.css,e.styleSheet?e.styleSheet.cssText=h(t,n):(i=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i))}}.call(t,n,t,e),void 0!==n&&(e.exports=n)},function(e,t,n){n=[n(2),n(60)],t=function(e,t){function n(){}function i(e){var t=document.createElement("a"),n=document.createElement("a");t.href=location.href;try{return n.href=e,n.href=n.href,t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(e){}return!0}var r=!1,a=function(t,l,u,c){e.isObject(t)&&(t=(c=t).url);var h,d,f,p=e.extend({xhr:null,url:t,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:l||n,onerror:u||n,mimeType:c&&!c.responseType?"text/xml":"",requireValidXML:!1,responseType:c&&c.plainText?"text":""},c);if("XDomainRequest"in window&&i(t))(h=p.xhr=new window.XDomainRequest).onload=s(p),h.ontimeout=h.onprogress=n,r=!0;else{if(!("XMLHttpRequest"in window))return void p.onerror("",t);(h=p.xhr=new window.XMLHttpRequest).onreadystatechange=(d=p,function(e){var t,n=e&&e.currentTarget||d.xhr;if(4===n.readyState)return clearTimeout(d.timeoutId),400<=n.status?(t=404===n.status?"File not found":n.status+"("+n.statusText+")",d.onerror(t,d.url,n)):200===n.status?s(d)(e):void 0})}f=p,l=function(t){var n;t=t&&t.currentTarget||f.xhr,clearTimeout(f.timeoutId),f.retryWithoutCredentials&&f.xhr.withCredentials?(o(t),n=e.extend({},f,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1}),a(n)):f.onerror("文件加载失败",f.url,t)},h.onerror=l,"overrideMimeType"in h?p.mimeType&&h.overrideMimeType(p.mimeType):r=!0;try{t=t.replace(/#.*$/,""),h.open("GET",t,!0)}catch(t){return l(t),h}if(p.responseType)try{h.responseType=p.responseType}catch(t){}p.timeout&&(p.timeoutId=setTimeout((function(){o(h),p.onerror("Timeout",t,h)}),p.timeout),h.onabort=function(){clearTimeout(p.timeoutId)});try{p.withCredentials&&"withCredentials"in h&&(h.withCredentials=!0),h.send()}catch(t){l(t)}return h};function o(e){e.onload=null,e.onprogress=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()}function s(n){return function(i){if(i=i&&i.currentTarget||n.xhr,clearTimeout(n.timeoutId),n.responseType){if("json"===n.responseType){var a=i,o=n;if(!a.response||e.isString(a.response)&&'"'!==a.responseText.substr(1))try{a=e.extend({},a,{response:JSON.parse(a.responseText)})}catch(i){return void o.onerror("Invalid JSON",o.url,a)}return o.oncomplete(a)}}else{var s;if(o=i.responseXML)try{s=o.firstChild}catch(i){}if(o&&s)return l(i,o,n);if(r&&i.responseText&&!o&&(o=t.parseXML(i.responseText))&&o.firstChild)return l(i,o,n);if(n.requireValidXML)return void n.onerror("Invalid XML",n.url,i)}n.oncomplete(i)}}function l(t,n,i){var r=n.documentElement;if(!i.requireValidXML||"parsererror"!==r.nodeName&&!r.getElementsByTagName("parsererror").length)return t.responseXML||(t=e.extend({},t,{responseXML:n})),i.oncomplete(t);i.onerror("Invalid XML",i.url,t)}return{ajax:a,crossdomain:i}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(47),n(2),n(46),n(60),n(35)],t=function(e,t,n,i,r){var a={};return a.repo=t.memoize((function(){var t=r.split("+")[0];return t=e.repo+t+"/",n.isHTTPS()?t.replace(/^http:/,"https:"):t})),a.versionCheck=function(e){e=("0"+e).split(/\W/);var t=r.split(/\W/),n=parseFloat(e[0]),i=parseFloat(t[0]);return!(i<n||n===i&&parseFloat("0"+e[1])>parseFloat(t[1]))},a.loadFrom=function(){return __DEBUG__?i.getScriptPath("cyberplayer.js"):a.repo()},a}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){function e(e,t){this.name=e,this.message=t.message||t.toString(),this.error=t}return{tryCatch:function(t,n,i){if(n=n||this,i=i||[],window.jwplayer&&window.jwplayer.debug)return t.apply(n,i);try{return t.apply(n,i)}catch(n){return new e(t.name,n)}},Error:e}}.apply(t,[]),void 0!==t&&(e.exports=t)},function(e,t,n){t=function(){var e={getElementsByClassName:function(e,t,n){if(n=n||"*",(t=t||document).getElementsByClassName)return t.getElementsByClassName(e);for(var i=[],r=t.getElementsByTagName(n),a=r.length,o=new RegExp("(^|\\s)"+e+"(\\s|$)"),s=0;s<a;s++)o.test(r[s].className)&&i.push(r[s]);return i},addEventListener:function(e,t,n,i){i=i||!1,(e=e||document).addEventListener?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n,i){i=i||!1,(e=e||document).removeEventListener?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n)},arrayFilter:function(){Array.prototype.filter||(Array.prototype.filter=function(e){if(null==this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();for(var i,r=[],a=arguments[1],o=0;o<n;o++)o in t&&(i=t[o],e.call(a,i,o,t))&&r.push(i);return r})},funcBind:function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){return i.apply(this instanceof r&&e?this:e||window,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),i=this,r=function(){};return r.prototype=this.prototype,t.prototype=new r,t})}};return e.arrayFilter(),e.funcBind(),e}.apply(t,[]),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(150),n(151),n(2),n(208),n(216),n(74),n(78),n(218),n(109),n(1),n(219),n(48),n(7),n(73),n(16),n(6),n(256),n(258),n(302)],t=function(e,t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y){function v(e){return function(){var t=Array.prototype.slice.call(arguments,0);this._model.getVideo()?this["_"+e].apply(this,t):this.eventsQueue.push([e,t])}}function A(e){this.originalContainer=this.currentContainer=e,this.errorElement=null,this.eventsQueue=[],this.isFirstTriggerPlay=!0,n.extend(this,d),this._model=new a,this.volume=-1,this.mute=-1,this.useLicense=!0}return A.prototype={prevFrame:v("prevFrame"),nextFrame:v("nextFrame"),snapshot:v("snapshot"),test1:v("test1"),play:v("play"),pause:v("pause"),setVolume:v("setVolume"),enableGPU:v("enableGPU"),disableGPU:v("disableGPU"),setToken:v("setToken"),setMute:v("setMute"),seek:v("seek"),stop:v("stop"),load:v("load"),playlistNext:v("next"),playlistPrev:v("prev"),playlistItem:v("item"),setFullscreen:v("setFullscreen"),setScreenshot:v("setScreenshot"),setPictInPict:v("setPictInPict"),setCaptureFrameStart:v("setCaptureFrameStart"),setCaptureFrameEnd:v("setCaptureFrameEnd"),setCurrentCaptions:v("setCurrentCaptions"),setCurrentQuality:v("setCurrentQuality"),setDanmuStatus:v("setDanmuStatus"),sendDanmu:v("sendDanmu"),setWatermark:v("setWatermark"),setMirror:v("setMirror"),setMaxSeekTime:v("setMaxSeekTime"),playNext:v("playNext"),setup:function(a,d){!0!==a.autostart||u.isMobile()||(a.origin_volume=a.volume,a.volume=0);var g,v,A,E,b,w,T=this._model,S=!1,R=!1,I=!0,C=this,L=(this.recording=!1,function(){return T.getVideo()}),P=new o,D=(P.track(T),new e(a,P));function k(){T.mediaModel.on("change:state",(function(e,t){"playing"!==t||!u.isChrome66()&&!u.isMobile()||0!==d.getVolume()||T.get("autostart")||T.setVolume(D.originVolume),t=t===p.LOADING||t===p.STALLED?p.BUFFERING:t,T.set("state",t)}))}function x(){C.trigger(m.JWPLAYER_READY,{setupTime:0}),C.trigger(m.JWPLAYER_PLAYLIST_LOADED,{playlist:T.get("playlist")}),C.trigger(m.JWPLAYER_PLAYLIST_ITEM,{index:T.get("item"),item:T.get("playlistItem")}),C.trigger(m.JWPLAYER_CAPTIONS_LIST,{tracks:T.get("captionsList"),track:T.get("captionsIndex")}),T.get("autostart")&&(!u.isPoorIE()&&T.get("imageAdvs")&&T.get("imageAdvs").start?g.beginStartAdv():O({reason:"autostart"})),M()}function M(){for(;0<C.eventsQueue.length;){var e=(t=C.eventsQueue.shift())[0],t=t[1]||[];C["_"+e].apply(C,t)}}function O(e){var t;if(e&&T.set("playReason",e.reason),T.get("state")!==p.ERROR){var i=C._instreamAdapter&&C._instreamAdapter.getState();if(n.isString(i))return d.pauseAd(!1);if(T.get("state")===p.COMPLETE&&(N(!0),G(0)),!S){S=!0;let t=T.getVideo().getCurrentQuality();var r=T.get("playlistItem");let n=!1;if(t<0&&r&&T.get("qualityLabel")){for(let e=0;e<r.sources.length;e++)r.sources[e].label.toString()===T.get("qualityLabel").toString()&&(t=e);"flash"===T.getVideo().getName().name&&(n=!0)}if(t<0&&(t=0),(e&&"interaction"!=e.reason||C.isFirstTriggerPlay)&&(C.isFirstTriggerPlay=!1,C.trigger(m.JWPLAYER_MEDIA_BEFOREPLAY,{file:T.get("file")||T.get("playlistItem").sources[t].file,currentQuality:n?++t:t})),S=!1,w)return w=!1,void(b=null)}if(!0===T.get("hevc"))I=!1,t=u.tryCatch((function(){T.playVideo()}));else if(B()){if(I=!1,0===T.get("playlist").length)return!1;!u.isPoorIE()&&T.get("imageAdvs")&&T.get("imageAdvs").start?g.beginStartAdv():t=u.tryCatch((function(){T.loadVideo()}))}else if(T.get("state")===p.PAUSED){if(I&&!T.get("autostart"))return I=!1,void(t=u.tryCatch((function(){T.loadVideo()})));I=!1,t=u.tryCatch((function(){T.playVideo()}))}return!(t instanceof u.Error&&(C.triggerError(t),b=null,1))}}function N(e){T.off("itemReady",O),e=!e;var t=(b=null,u.tryCatch((function(){T.stopVideo()}),C));return t instanceof u.Error?(C.triggerError(t),!1):(e&&(R=!0),S&&(w=!0),!0)}function F(){b=null;var e=C._instreamAdapter&&C._instreamAdapter.getState();if(n.isString(e))return d.pauseAd(!0);switch(T.get("state")){case p.ERROR:return!1;case p.PLAYING:case p.BUFFERING:var t=u.tryCatch((function(){L().pause()}),this);if(t instanceof u.Error)return C.triggerError(t),!1;break;default:S&&(w=!0)}return!0}function B(){var e=T.get("state");return e===p.IDLE||e===p.COMPLETE||e===p.ERROR}function U(e,t,n){N(!0),G(e,null,n),O(t)}function j(e){return e=s(e),e=s.filterPlaylist(e,T.getProviders(),T.get("androidhls"),T.get("drm"),T.get("preload"),T.get("feedid"),T.get("withCredentials"),T.get("hevc"),T.get("native")),T.set("playlist",e),!(!n.isArray(e)||0===e.length)||(C.triggerError({message:"Error loading playlist: No playable sources found"}),!1)}function G(e,t,n){void 0!==_hmt&&null!==_hmt&&_hmt.push(["_trackPageview","/init/playerItem/hevc/"+(!0===T.get("hevc"))]);var i=T.get("playlist");e=((e=parseInt(e,10)||0)+i.length)%i.length,T.set("item",e),null!=t&&i[e].sources&&i[e].sources[t]&&(i[e].file=i[e].sources[t].file),n&&n.url&&T.set("file",n.url),T.set("playlistItem",i[e]),T.setActiveItem(i[e],t,n)}function V(e){U(T.get("item")+1,e||{reason:"external"})}function H(){B()&&(R?R=!1:(b=H,T.get("item")===T.get("playlist").length-1?T.get("repeat")?V({reason:"repeat"}):(T.set("state",p.COMPLETE),C.trigger(m.JWPLAYER_PLAYLIST_COMPLETE,{})):V({reason:"playlist"})))}function Y(){return L()?L().getCurrentQuality():-1}function z(){return L()?L().getQualityLevels():null}function W(){return A.getCurrentIndex()}function K(){return A.getCaptionsList()}T.setup(D,P),T.advManage&&T.advManage.setApi(d),u.isSupportWASM()&&this.useLicense&&(this._license=new y.default(D.licenseUrl,D.appid),this._license.onMessage=e=>{0!=e.code&&this.trigger(m.JWPLAYER_ERROR,e)},this._license.init()),g=this._view=new c(d,T),v=new _(d,T),A=new r(d,T),(E=new i(d,T,g,j)).on(m.JWPLAYER_READY,(function(){let e=T.get("playlist"),t=e.findIndex((e=>e.default));var i=0;-1!=t&&(T.set("item",t),i=-1==(i=e[t].sources.findIndex((e=>e.default)))?0:i),E=null,g.on("all",C.trigger.bind(C)),this.showView(g.element()),G(T.get("item"),i),T.on("change:state",f,this),T.on("change:castState",(function(e,t){C.trigger(m.JWPLAYER_CAST_SESSION,t)})),T.on("change:fullscreen",(function(e,t){C.trigger(m.JWPLAYER_FULLSCREEN,{fullscreen:t})})),T.on("change:screenshot",(function(e,t){C.trigger(m.JWPLAYER_SCREESHOT,{img:t})})),T.on("itemReady",(function(){C.trigger(m.JWPLAYER_PLAYLIST_ITEM,{index:T.get("item"),item:T.get("playlistItem")})})),T.on("change:playlist",(function(e,t){t.length&&C.trigger(m.JWPLAYER_PLAYLIST_LOADED,{playlist:t})})),T.on("change:volume",(function(e,t){C.volume!=t&&(C.volume=t,C.trigger(m.JWPLAYER_MEDIA_VOLUME,{volume:t}))})),T.on("change:mute",(function(e,t){C.mute!=t&&(C.mute=t,C.trigger(m.JWPLAYER_MEDIA_MUTE,{mute:t}))})),T.on("change:controls",(function(e,t){C.trigger(m.JWPLAYER_CONTROLS,{controls:t})})),T.on("change:scrubbing",(function(e,t){(t?F:O)()})),T.on("change:captionsList",(function(e,t){C.trigger(m.JWPLAYER_CAPTIONS_LIST,{tracks:t,track:W()})})),T.on("change:danmaku",((e,t)=>{})),T.mediaModel.set("mediaType",null),T.mediaController.on("all",C.trigger.bind(C)),n.defer(x)}),this),E.on(m.JWPLAYER_SETUP_ERROR,this.setupError,this),T.mediaController.on(m.JWPLAYER_MEDIA_COMPLETE,(function(){n.defer(H)})),T.mediaController.on(m.JWPLAYER_MEDIA_ERROR,this.triggerError,this),T.mediaController.on(m.JWPLAYER_MEDIA_META,(e=>{e.formatType&&this._license&&this._license.setMediaData&&this._license.setMediaData(e)})),k(),T.on("change:mediaModel",k),this._prevFrame=function(){return void 0!==T.get("hevc")&&!0===T.get("hevc")&&T.prevFrame()},this._nextFrame=function(){return void 0!==T.get("hevc")&&!0===T.get("hevc")&&T.nextFrame()},this._snapshot=function(e){return!0===T.get("hevc")&&T.snapshot(e)},this._test1=function(){T.test1()},this._play=O,this._pause=F,this._seek=function(e){T.get("state")!==p.ERROR&&(this.getConfig().disableSeekForward&&e>this._model.get("position")?C.trigger(m.JWPLAYER_SEEK_FORWARD_FORBIDDEN):(T.get("scrubbing")||T.get("state")===p.PLAYING||O(!0),L().seek(e)))},this._stop=N,this._load=function e(t,n){switch(T.get("state")===p.ERROR&&T.set("state",p.IDLE),N(!0),T.get("autostart")&&T.once("itemReady",O),typeof t){case"string":!function(t){var n=new l;n.on(m.JWPLAYER_PLAYLIST_LOADED,(function(t){e(t.playlist)})),n.on(m.JWPLAYER_ERROR,(function(e){e.message="播放列表加载失败: "+e.message,this.triggerError(e)}),this),n.load(t)}(t);break;case"object":var i=s(t),r=T.get("edition");i=T.getProviders().required(i,r),h.load(i,r).then((function(){C.getProvider()||(T.setProvider(T.get("playlistItem")),M())})),j(t)&&G(0);break;case"number":G(t,n)}},this._next=V,this._prev=function(e){U(T.get("item")-1,e||{reason:"external"})},this._item=U,this._setCurrentCaptions=function(e){e=parseInt(e,10)||0,T.persistVideoSubtitleTrack(e),C.trigger(m.JWPLAYER_CAPTIONS_CHANGED,{tracks:K(),track:e})},this._setCurrentQuality=function(e){L()&&(e=parseInt(e,10)||0,L().setCurrentQuality(e))},this._setFullscreen=function(e){n.isBoolean(e)||(e=!T.get("fullscreen")),T.set("fullscreen",!!u.isIOS()||e),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",e)},this._setScreenshot=function(){var e,t,n;void 0!==T.get("hevc")&&!0===T.get("hevc")?(document.getElementById("snapshot-player")&&document.getElementById("snapshot-player").remove(),e=document.createElement("canvas"),document.body.appendChild(e),e.setAttribute("id","snapshot-player"),e.setAttribute("crossOrigin","anonymous"),T.snapshot(e),C.trigger(m.JWPLAYER_SCREENSHOT,e)):((e=document.getElementById(this._model.get("id")).querySelector("video"))||(n=document.getElementById(this._model.get("id")).querySelector("canvas")),(t=document.createElement("img")).setAttribute("crossOrigin","anonymous"),t.src="",n?t.src=n.toDataURL("image/jpg"):(e.setAttribute("crossOrigin","anonymous"),n=document.createElement("canvas"),void 0!==e.videoWidth&&(n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0,n.width,n.height),t.src=n.toDataURL())),C.trigger(m.JWPLAYER_SCREENSHOT,t))},this._setPictInPict=function(e){n.isBoolean(e)||(e=!T.get("pictinpict")),(e=document.querySelector("video"))&&e!==document.pictureInPictureElement?(e.requestPictureInPicture(),T.set("pictinpict",!0)):(document.exitPictureInPicture(),T.set("pictinpict",!1))},this._setCaptureFrameStart=function(){if(!this.recording){let i=m.JWPLAYER_CaptureFrameFinished;if(this.recording_start=window.performance.now(),t=document.getElementById(this._model.get("id")).querySelector("video"))if(t.captureStream){var e=(t=t.captureStream()).getVideoTracks()[0],t=t.getAudioTracks()[0],n=new MediaStream;n.addTrack(e),0!==a.volume&&n.addTrack(t);try{this.mediaRecorder=new MediaRecorder(n,{mimeType:"video/webm;codecs=vp8"})}catch(t){return void this.trigger(i,{recorder_video_url:"",code:-1,error:t})}this.captureFrameData=[];let r=this;this.mediaRecorder.ondataavailable=function(e){e.data&&0<e.data.size&&r.captureFrameData.push(e.data)},this.mediaRecorder.onstop=function(){r.CaptureFrameFinished(),r.mediaRecorder=null},this.mediaRecorder.onerror=function(e){r.trigger(i,{recorder_video_url:"",code:-2,error:e})},this.recording=!this.recording,this.mediaRecorder.start()}else this.trigger(i,{recorder_video_url:"",code:-4,error:"captureStream error"});else this.trigger(i,{recorder_video_url:"",code:-3,error:"playback error"})}},this._setCaptureFrameEnd=function(){if(this.recording){this.recording_end=window.performance.now(),this.recording=!this.recording;let t=this;var e=this.recording_end-this.recording_start;setTimeout((()=>{t.mediaRecorder.stop()}),e/2)}},this.CaptureFrameFinished=function(){let e=m.JWPLAYER_CaptureFrameFinished;return new Promise((t=>{setTimeout((()=>{var n=new Blob(this.captureFrameData,{type:"video/webm"});this.videoUrl=window.URL.createObjectURL(n),C.trigger(e,{recorder_video_url:this.videoUrl,blobSize:n.size,code:0}),t()}))}))},this.detachMedia=function(){var e=T.getVideo();return e&&(e=e.detachMedia())instanceof HTMLVideoElement?e:null},this.attachMedia=function(){var e=u.tryCatch((function(){T.getVideo().attachMedia()}));e instanceof u.Error?u.log("Error calling _attachMedia",e):"function"==typeof b&&b()},this.getCurrentQuality=Y,this.getQualityLevels=z,this.setCurrentAudioTrack=function(e){L()&&(e=parseInt(e,10)||0,L().setCurrentAudioTrack(e))},this.getCurrentAudioTrack=function(){return L()?L().getCurrentAudioTrack():-1},this.getAudioTracks=function(){return L()?L().getAudioTracks():null},this.getCurrentCaptions=W,this.getCaptionsList=K,this.getVisualQuality=function(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");if(t=z()){var e=Y(),t=t[e];if(t)return{level:n.extend({index:e},t),mode:"",reason:""}}return null},this.getConfig=function(){if(this._model)return this._model.getConfiguration()},this.getState=function(){var e=C._instreamAdapter&&C._instreamAdapter.getState();return n.isString(e)?e:T.get("state")},this.getHlsCurrentLevel=function(){return L()?L().getHlsCurrentLevel():null},this.setMirror=function(){var e=T.get("mirror");T.set("mirror",!e)},this.setVolume=T.setVolume.bind(T),this.setMute=T.setMute.bind(T),this.enableGPU=T.enableGPU,this.disableGPU=T.disableGPU,this.setToken=T.setToken,this.setPlaybackRate=T.setPlaybackRate,this.setDanmuStatus=T.setDanmuStatus,this.setMaxSeekTime=T.setMaxSeekTime,this.playNext=function(e){e&&e.url&&(this.removeError(),U(T.get("item"),{reason:"external"},e))},this.getProvider=function(){return T.get("provider")},this.getWidth=function(){return T.get("containerWidth")},this.getHeight=function(){return T.get("containerHeight")},this.getMediaInfo=function(){return T.getMediaInfo()},this.VR=function(){return T.VR()},this.getContainer=function(){return this.currentContainer},this.resize=g.resize,this.getSafeRegion=g.getSafeRegion,this.setCues=g.addCues,this.setThumbnails=g.addThumbnails,this.setCaptions=g.setCaptions,this.sendDanmu=g.sendDanmu,this.setLang=g.setLang,this.setWatermark=g.setWatermark,this.addButton=function(e,t,i,r,a){e={img:e,tooltip:t,callback:i,id:r,btnClass:a},t=(t=T.get("dock"))?t.slice(0):[],(t=n.reject(t,n.matches({id:e.id}))).push(e),T.set("dock",t)},this.removeButton=function(e){var t=T.get("dock")||[];t=n.reject(t,n.matches({id:e})),T.set("dock",t)},this.checkBeforePlay=function(){return S},this.getItemQoe=function(){return T._qoeItem},this.setControls=function(e){n.isBoolean(e)||(e=!T.get("controls")),T.set("controls",e);var t=T.getVideo();t&&t.setControls(e)},this.setSeekStep=function(e){T.set("seek_step",e)},this.setKeyControls=function(e){T.set("keyControls",e)},this.playerDestroy=async function(){this.errorElement=null,v&&v.APM&&v.APM.destroy(),this.stop(),this.showView(this.originalContainer),g&&g.destroy(),T&&await T.destroy(),E&&(E.destroy(),E=null),this._license&&this._license.destroy&&this._license.destroy()},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return T.getVideo().checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new t(this,T,g),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){C._instreamAdapter&&C._instreamAdapter.destroy()},E.start()},showView:function(e,t){(document.documentElement.contains(this.currentContainer)||(this.currentContainer=document.getElementById(this._model.get("id")),this.currentContainer))&&(this.currentContainer.parentElement&&(t||(this.errorElement&&e.appendChild(this.errorElement),this.currentContainer.parentElement.replaceChild(e,this.currentContainer)),t)?this.currentContainer.appendChild(e):this.currentContainer=e)},triggerError:function(e){this._model.set("errorEvent",e),this._model.set("state",p.ERROR),this._model.once("change:state",(function(){this._model.set("errorEvent",void 0)}),this),this.trigger(m.JWPLAYER_ERROR,e)},setupError:function(e,t){var i=e.message,r=(t=u.createElement(g(t||this._model.get("id")+"_error",this._model.get("skin"),i)),this._model.get("width")),a=this._model.get("height"),o=(u.style(t,{width:0<r.toString().indexOf("%")?r:r+"px",height:0<a.toString().indexOf("%")?a:a+"px"}),document.getElementById(this._model.get("id")).appendChild(t),this.errorElement=t,this);n.defer((function(){o.trigger(m.JWPLAYER_SETUP_ERROR,{message:i,code:e.code})}))},removeError:function(){var e=document.getElementById(this._model.get("id"));try{this.errorElement&&(e.removeChild(this.errorElement),this.errorElement=null)}catch(e){}}},A}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){var i=[n(1),n(2)];t=function(e,t){var i={autostart:!1,controls:!0,keyControls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,repeat:!1,castAvailable:!1,skin:"bce",stretching:"uniform",mute:!1,volume:100,width:480,height:270,controlbar:{barLogo:!1,barLogoUrl:"https://cloud.baidu.com/solution/media.html",canDrag:!0},marquee:{show:!1,text:"百度云",fontSize:12,color:"#FFF"},startseek:!0,flashUI:!1,playRate:!0,playbackRate:1,playRateConfig:[{label:"×0.5"},{label:"×1"},{label:"×1.5"},{label:"×2"},{label:"×3"},{label:"×4"},{label:"×5"},{label:"×8"}],isLive:!1,allowDoubleClickFullscreen:!0,allowClickToDisplay:!0,retryCount:0,tokenEncrypt:!1,crossoriginAnonymous:!1,withLog:!0};function r(e){return e.slice&&"px"===e.slice(-2)?e.slice(0,-2):e}return function(a,o){var s;return a.autoStart&&(a.autostart=!0),"over"!==a.controls&&"none"!==a.controls||(a.controls="over"===a.controls),a.startParam&&(a.startparam=a.startParam),o=o&&o.getAllItems(),o=t.extend({},(window.jwplayer||{}).defaults,o,a),s=o,t.each(s,(function(t,n){s[n]=e.serialize(t)})),(o=t.extend({},i,o)).options=a,void 0===o.controlbar.canDrag&&(o.controlbar.canDrag=!0),"."===o.base&&(o.base=e.getScriptPath("cyberplayer.js")),o.playRate||(o.playbackRate=1),o.base=(o.base||e.loadFrom()).replace(/\/?$/,"/"),n.p=o.base,o.width=r(o.width),o.height=r(o.height),o.flashplayer=o.flashplayer||e.getScriptPath("cyberplayer.js")+"cyberplayer.flash.swf","http:"===window.location.protocol&&(o.flashplayer=o.flashplayer.replace("https","http")),o.aspectratio=function(t,n){if(-1===n.toString().indexOf("%"))return 0;if("string"!=typeof t||!e.exists(t))return 0;if(/^\d*\.?\d+%$/.test(t))return t;if(-1===(n=t.indexOf(":")))return 0;var i=parseFloat(t.substr(0,n));return t=parseFloat(t.substr(n+1)),i<=0||t<=0?0:t/i*100+"%"}(o.aspectratio,o.width),t.isObject(o.skin)&&(o.skinUrl=o.skin.url,o.skinColorInactive=o.skin.inactive,o.skinColorActive=o.skin.active,o.skinColorBackground=o.skin.background,o.skin=t.isString(o.skin.name)?o.skin.name:i.skin),t.isString(o.skin)&&0<o.skin.indexOf(".xml")&&(o.skin=o.skin.replace(".xml","")),o.aspectratio||delete o.aspectratio,o.playlist||(!(a=t.pick(o,["title","description","type","mediaid","image","file","sources","tracks","preload","fallbackfile"])).file&&o.RtcPlugin&&(a=Object.assign(a,{file:o.RtcPlugin.serverUrl,isrtc:!0},o.RtcPlugin)),o.playlist=[a]),e.isPoorIE()&&(a=o,(e.isMSIE(7)||e.isMSIE(6))&&(a.flashUI=!0),a.skin="bce",a.startseek=!1,delete a.skinColorInactive,delete a.skinColorActive,delete a.skinColorBackground,o=a),(e.isChrome66()||e.isMobile())&&(o.originVolume=o.volume,o.volume=0),o}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(152),n(207),n(6),n(16),n(1),n(7),n(2)],t=function(e,t,n,i,r,a,o){function s(a,s,u){var c,h,d,f,p,m=new(0<=(s.get("provider").name||"").indexOf("flash")?t:e)(a,s),g=0,_={},y=o.bind((function(e){(e=e||{}).hasControls=!!s.get("controls"),this.trigger(n.JWPLAYER_INSTREAM_CLICK,e),m&&m._adModel&&(m._adModel.get("state")===i.PAUSED?e.hasControls&&m.instreamPlay():m.instreamPause())}),this),v=o.bind((function(){m&&m._adModel&&m._adModel.get("state")===i.PAUSED&&s.get("controls")&&(a.setFullscreen(),a.play())}),this);function A(e,t){"complete"!==e&&(t=t||{},_.tag&&!t.tag&&(t.tag=_.tag),this.trigger(e,t))}function E(e){m._adModel.set("duration",e.duration),m._adModel.set("position",e.position)}function b(e){var t,i,r={};_.tag&&(r.tag=_.tag),c&&g+1<c.length?(this.trigger(n.JWPLAYER_MEDIA_COMPLETE,r),m._adModel.set("state","buffering"),s.set("skipButton",!1),t=c[++g],h&&(i=h[g]),this.loadItem(t,i)):(e.type===n.JWPLAYER_MEDIA_COMPLETE&&(this.trigger(n.JWPLAYER_MEDIA_COMPLETE,r),this.trigger(n.JWPLAYER_PLAYLIST_COMPLETE,{})),this.destroy())}this.type="instream",this.init=function(){d=s.getVideo(),f=s.get("position"),p=s.get("playlist")[s.get("item")],m.on("all",A,this),m.on(n.JWPLAYER_MEDIA_TIME,E,this),m.on(n.JWPLAYER_MEDIA_COMPLETE,b,this),m.init(),d.detachMedia(),s.mediaModel.set("state",i.BUFFERING),a.checkBeforePlay()||0===f&&!d.checkComplete()?(f=0,s.set("preInstreamState","instream-preroll")):d&&d.checkComplete()||s.get("state")===i.COMPLETE?s.set("preInstreamState","instream-postroll"):s.set("preInstreamState","instream-midroll");var e=s.get("state");return e!==i.PLAYING&&e!==i.BUFFERING||d.pause(),u.setupInstream(m._adModel),m._adModel.set("state",i.BUFFERING),u.clickHandler().setAlternateClickHandlers(r.noop,null),this.setText("Loading ad"),this},this.loadItem=function(e,t){r.isAndroid(2.3)?this.trigger({type:n.JWPLAYER_ERROR,message:"流加载失败：在Android 2.3上不能加载流"}):(o.isArray(e)&&(h=t,e=(c=e)[g],h)&&(t=h[g]),this.trigger(n.JWPLAYER_PLAYLIST_ITEM,{index:g,item:e}),_=o.extend({},l,t),m.load(e),this.addClickHandler(),(t=e.skipoffset||_.skipoffset)&&(m._adModel.set("skipMessage",_.skipMessage),m._adModel.set("skipText",_.skipText),m._adModel.set("skipOffset",t),s.set("skipButton",!0)))},this.applyProviderListeners=function(e){m.applyProviderListeners(e),this.addClickHandler()},this.play=function(){m.instreamPlay()},this.pause=function(){m.instreamPause()},this.hide=function(){m.hide()},this.addClickHandler=function(){u.clickHandler().setAlternateClickHandlers(y,v),m.on(n.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(e){var t=n.JWPLAYER_AD_SKIPPED;this.trigger(t,e),b.call(this,{type:t})},this.metaHandler=function(e){e.width&&e.height&&u.resizeMedia()},this.destroy=function(){if(this.off(),s.set("skipButton",!1),m)switch(u.clickHandler()&&u.clickHandler().revertAlternateClickHandlers(),m.instreamDestroy(),u.destroyInstream(),m=null,a.attachMedia(),s.get("preInstreamState")){case"instream-preroll":case"instream-midroll":var e=o.extend({},p);e.starttime=f,s.loadVideo(e),r.isMobile()&&s.mediaModel.get("state")===i.BUFFERING&&d.setState(i.BUFFERING),d.play();break;case"instream-postroll":case"instream-idle":d.stop()}},this.getState=function(){return!(!m||!m._adModel)&&m._adModel.get("state")},this.setText=function(e){u.setAltText(e||"")},this.hide=function(){u.useExternalControls()}}var l={skipoffset:null,tag:null};return o.extend(s.prototype,a),s}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(7),n(73),n(6),n(16),n(74)],t=function(e,t,n,i,r,a){return function(o,s){var l,u,c=e.extend(this,t);function h(t){t=t||l.getVideo(),u!==t&&(u=t)&&(t.off(),t.on("all",(function(t,n){n=e.extend({},n,{type:t}),this.trigger(t,n)}),c),t.on(i.JWPLAYER_MEDIA_BUFFER_FULL,p),t.on(i.JWPLAYER_PLAYER_STATE,d),t.attachMedia(),t.volume(s.get("volume")),t.mute(s.get("mute")),l.on("change:state",n,c))}function d(e){switch(e.newstate){case r.PLAYING:case r.PAUSED:l.set("state",e.newstate)}}function f(e){s.trigger(e.type,e),c.trigger(i.JWPLAYER_FULLSCREEN,{fullscreen:e.jwstate})}function p(){l.getVideo().play()}return o.on(i.JWPLAYER_FULLSCREEN,(function(e){this.trigger(i.JWPLAYER_FULLSCREEN,e)}),c),this.init=function(){(l=(new a).setup({id:s.get("id"),volume:s.get("volume"),fullscreen:s.get("fullscreen"),mute:s.get("mute")})).on("fullscreenchange",f),this._adModel=l},c.load=function(e){l.set("item",0),l.set("playlistItem",e),l.setActiveItem(e),h(),l.off(i.JWPLAYER_ERROR),l.on(i.JWPLAYER_ERROR,(function(e){this.trigger(i.JWPLAYER_ERROR,e)}),c),l.loadVideo(e)},c.applyProviderListeners=function(e){h(e),e.off(i.JWPLAYER_ERROR),e.on(i.JWPLAYER_ERROR,(function(e){this.trigger(i.JWPLAYER_ERROR,e)}),c),s.on("change:volume",(function(e,t){u.volume(t)}),c),s.on("change:mute",(function(e,t){u.mute(t)}),c)},this.instreamDestroy=function(){l&&(l.off(),this.off(),u&&(u.detachMedia(),u.off(),l.getVideo())&&u.destroy(),l=null,o.off(null,null,this),o=null)},c.instreamPlay=function(){l.getVideo()&&l.getVideo().play(!0)},c.instreamPause=function(){l.getVideo()&&l.getVideo().pause(!0)},c}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){void 0!==(t=function(){return document.createElement("video")}.apply(t,[]))&&(e.exports=t)},function(e,t,n){n=[n(155)],t=function(e){return{cybercore:e}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n(12),n=[n(34),n(1),n(72),n(2),n(6),n(16),n(101),n(7),n(156),n(46),n(157),n(12)],t=function(e,t,n,i,r,a,o,s,l,u,c,h){var d=window.clearTimeout,f=t.isIE(),p=(t.isMSIE(),t.isMobile(),t.isFF(),t.isAndroidNative());function m(n,u){let m=u.file,g=u.isMemoryPlay?localStorage.getItem("baiducyberplayer.filePostion."+u.file):u.starttime||null;!m&&u.playlist.length&&(_=u.item||0,m=u.playlist[_].file);var _=u.width,y=u.height;let v=u.autostart;var A=u.repeat,E=u.duration;let b=u.controls,w=(this.isInitSeek=!0,40960),T=0;u.hevcProbe?w=u.hevcProbe:T=.1;var S=this;function R(){return S.extPlayerMediaInfo&&(void 0===S.extPlayerMediaInfo.meta.size.width||null===S.extPlayerMediaInfo.meta.size.width||0===S.extPlayerMediaInfo.meta.size.width||void 0===S.extPlayerMediaInfo.meta.size.height||null===S.extPlayerMediaInfo.meta.size.height||0===S.extPlayerMediaInfo.meta.size.height||!S.extPlayerGL)}function I(){S.extPlayer.setVoice(S.vol/100);var e={duration:S.extPlayerDur,height:S.extPlayerMediaInfo.meta.size.height,width:S.extPlayerMediaInfo.meta.size.width,videoCodec:S.extPlayerMediaInfo.meta.videoCodec,formatType:S.extPlayerMediaInfo.formatType,isVR:!!u.VRPlugin,isLive:"vod"!=S.extPlayerMediaInfo.videoType,decodeMode:S.extPlayerMediaInfo.useSoftDecoding?"sw":"hw"};if(!(S.extPlayer&&S.extPlayer.configFormat&&S.extPlayer.configFormat.useSoftDecoding)&&0<g&&g<=S.extPlayerDur&&v?f?(S.pause(),S.setState(a.PLAYING),S.isInitSeek=!1):S.extPlayer.seek(g,null,!0):S.isFirstSeek=!0,S.trigger(r.JWPLAYER_MEDIA_META,e),G(S.extPlayerDur),(e=document.querySelector(".jw-display-icon-container"))&&(e.parentNode.style="pointer-events:none",e.style.display=""),!0===v&&S.isMuted&&(S.mute(!0),S.extPlayer.player.isPlayingState)&&!S.extPlayer.player.isPlayingState()&&S.play(!0),D||(D=!0,S.trigger(r.JWPLAYER_MEDIA_BUFFER_FULL)),S.extPlayerGL.setAttribute("disableRemotePlayback",""),S.extPlayerGL.setAttribute("x-webkit-airplay","allow"),S.extPlayerGL.setAttribute("webkit-playsinline",""),S.extPlayerGL.setAttribute("playsinline",""),S.extPlayerGL.setAttribute("x5-playsinline",""),S.extPlayerGL.setAttribute("crossOrigin","anonymous"),!0===b&&u.playRate){let i="jw-icon jw-icon-tooltip jw-icon-playrate jw-button-color jw-reset",r="jw-text jw-option jw-item-0 jw-reset",a=S.extPlayerContainer.querySelector(".jw-icon-playrate"),o=(a.style.display="",a.setAttribute("class","jw-icon jw-icon-tooltip jw-icon-playrate jw-button-color jw-reset"),a.contains(document.querySelector(".jw-menu-playrate"))&&document.querySelector(".jw-menu-playrate").parentElement.removeChild(document.querySelector(".jw-menu-playrate")),a.openShow=!1,a.onclick=function(e){!1===a.openShow?a.setAttribute("class",i+" jw-open"):a.setAttribute("class",i),a.openShow=!a.openShow},S.extPlayerContainer.querySelector(".jw-playrate-label"));o.textContent="x1",e=a.querySelector("div.jw-overlay");var t=document.createElement("ul"),n=(t.setAttribute("class","jw-menu jw-menu-playrate jw-background-color jw-reset"),e.appendChild(t),u.playRateConfig||[{label:"×0.5"},{label:"×1"},{label:"×2"},{label:"×3"},{label:"×4"},{label:"×8"}]);for(let e=0;e<n.length;e++){let i=n[e].label,a=document.createElement("li");a.setAttribute("class",r+"jw-active-option"),a.textContent=i,a.onmouseenter=function(){a.setAttribute("class",r+" jw-active-option")},a.onmouseleave=function(){a.setAttribute("class",r)},a.onclick=function(e){o.textContent=i,S.setPlaybackRate(i.slice(1))},t.appendChild(a)}1!=S.playbackRate&&S.setPlaybackRate(JSON.stringify(S.playbackRate))}}_={player:n,width:_,height:y,token:"base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1",danmaku:u.danmaku,extInfo:{probeSize:w,coreProbePart:T,moovStartFlag:!0,ignoreAudio:u.audioNone||0,autoPlay:v,repeat:A,duration:E,hevc:!u.native},useSoftDecoding:!!u.useSoftDecoding,RtcPlugin:u.RtcPlugin,openToken:u.openToken,maxBufferLength:u.maxBufferLength,headers:u.headers,timeShift:u.timeShift,enableDecoderDegrade:0!=u.enableDecoderDegrade,startPosition:u.starttime,VRPlugin:u.VRPlugin},this.videoURL=m,this.alreadyMvNode=!1,this.extNeedManualClickBoot=!1,this.extPlayerContainer=null,this.extPlayerPTS=0,this.extPlayerDur=0,this.vol=u.volume||u.options.origin_volume||u.options.volume,this.isMuted=u.mute,this.playbackRate=u.playbackRate,this.extPlayerGL=null,this.extPlayerLoadOK=!1,this.extPlayerMediaInfo=null,this.hlsTokenObj=null,this.isFirstSeek=!1,this.maxSeekTime=-1,this.extPlayer=c.default.createPlayer(m,_),this.extPlayer.onMakeItReady=()=>{var e=document.querySelector("#"+n),t=e.getElementsByTagName("div");S.extPlayerGL=e.getElementsByTagName("video")[0],!1===S.alreadyMvNode&&S.extPlayerGL&&t[0]&&S.extPlayerGL!==t[0]&&(S.alreadyMvNode=!0,S.extPlayerGL.parentNode===e?S.extPlayerGL.parentNode.insertBefore(S.extPlayerGL,t[0]):S.extPlayerGL.parentNode.parentNode.insertBefore(S.extPlayerGL.parentNode,t[0])),!0===v&&S.setState(a.LOADING),u.image&&S.trigger(r.JWPLAYER_H265WEB_COVERLOADED)},this.extPlayer.onPerformance=e=>{this.trigger(r.JWPLAYER_PERFORMANCE,e)},this.extPlayer.onNetworkError=e=>{S.trigger(r.JWPLAYER_MEDIA_ERROR,{message:message,code:"111",detail:"network error",videoSrc:m})},this.extPlayer.onReadyShowDone=()=>{this.extPlayerLoadOK=!0;let e=4;if(R()){let t=window.setInterval((function(){var i;0===e&&(window.clearInterval(t),t=null),R()?(--e,S.extPlayerContainer=document.querySelector("#"+n),u.native||!0!==S.extPlayerMediaInfo.useSoftDecoding?(S.extPlayerGL=S.extPlayerContainer.getElementsByTagName("video")[0],S.extPlayerGL||S.extPlayer.onMakeItReady(),!0===v&&(S.extPlayerGL.muted=!0,S.volume(0)),void 0!==S.extPlayerGL&&null!==S.extPlayerGL&&S.extPlayerGL&&(i=S.extPlayerContainer.getElementsByTagName("div"),!1===S.alreadyMvNode&&S.extPlayerGL!==i[0]&&(S.alreadyMvNode=!0,S.extPlayerGL.parentNode.insertBefore(S.extPlayerGL,i[0])),void 0!==S.extPlayerMediaInfo.meta.size.width&&null!==S.extPlayerMediaInfo.meta.size.width&&0!==S.extPlayerMediaInfo.meta.size.width&&void 0!==S.extPlayerMediaInfo.meta.size.height&&null!==S.extPlayerMediaInfo.meta.size.height&&0!==S.extPlayerMediaInfo.meta.size.height||(S.extPlayerMediaInfo.meta.size.width=S.extPlayerGL.videoWidth,S.extPlayerMediaInfo.meta.size.height=S.extPlayerGL.videoHeight))):(S.extPlayerGL=S.extPlayerContainer.getElementsByTagName("canvas")[0],S.extPlayerGL.setAttribute("crossOrigin","anonymous"))):(window.clearInterval(t),t=null,I())}),500)}else I()},this.extPlayer.onLoadFinish=e=>{this.extNeedManualClickBoot=!1;try{this.extPlayerMediaInfo=this.extPlayer.mediaInfo(),this.extPlayerDur=this.extPlayerMediaInfo.meta.durationMs/1e3}catch(e){}if(this.extPlayerContainer=document.querySelector("#"+n),void 0===this.extPlayerGL||null===this.extPlayerGL)if(!0===this.extPlayerMediaInfo.useSoftDecoding)this.extPlayerGL=this.extPlayerContainer.getElementsByTagName("canvas")[0],this.extPlayerGL.setAttribute("crossOrigin","anonymous");else if(this.extPlayerGL=this.extPlayerContainer.getElementsByTagName("video")[0],void 0!==this.extPlayerGL&&null!==this.extPlayerGL&&this.extPlayerGL){var t=this.extPlayerContainer.getElementsByTagName("div");if(!1===this.alreadyMvNode&&this.extPlayerGL!==t[0]){this.alreadyMvNode=!0;try{this.extPlayerGL.parentNode.insertBefore(this.extPlayerGL,t[0])}catch(e){}}void 0!==this.extPlayerMediaInfo.meta.size.width&&null!==this.extPlayerMediaInfo.meta.size.width&&0!==this.extPlayerMediaInfo.meta.size.width&&void 0!==this.extPlayerMediaInfo.meta.size.height&&null!==this.extPlayerMediaInfo.meta.size.height&&0!==this.extPlayerMediaInfo.meta.size.height||(this.extPlayerMediaInfo.meta.size.width=this.extPlayerGL.videoWidth,this.extPlayerMediaInfo.meta.size.height=this.extPlayerGL.videoHeight)}t={duration:this.extPlayerDur,height:this.extPlayerMediaInfo.meta.size.height,width:this.extPlayerMediaInfo.meta.size.width,videoCodec:S.extPlayerMediaInfo.meta.videoCodec,formatType:S.extPlayerMediaInfo.formatType,isLive:"vod"!=S.extPlayerMediaInfo.videoType,decodeMode:S.extPlayerMediaInfo.useSoftDecoding?"sw":"hw"},!1===e?this.setState(a.LOADING):(this.extPlayer.setVoice(this.vol/100),this.mute(0==this.vol),!0===v||u.image||this.extPlayer.isPlaying()||this.setState(a.PAUSED)),this.trigger(r.JWPLAYER_MEDIA_META,t),G(this.extPlayerDur)},this.extPlayer.onLoadCache=()=>{this.setState(a.LOADING)},this.extPlayer.onLoadCacheFinshed=()=>{this.extPlayer.isPlaying()?this.setState(a.PLAYING):this.setState(a.PAUSED)},this.extPlayer.onPlayState=e=>{!0===e?0<g&&g<=S.extPlayerDur&&this.isInitSeek||S.setState(a.PLAYING):S.setState(a.PAUSED)},this.extPlayer.onPlayTime=(e,t,n)=>{this.extPlayerPTS=e;var i=this.extPlayerPTS;P=i=L<0?-(!0-i):i,this.state===a.PLAYING&&this.trigger(r.JWPLAYER_MEDIA_TIME,{position:t?t+e:P,duration:n||(t?t+L:L)})},this.extPlayer.onSeiInfo=e=>{this.state===a.PLAYING&&this.trigger(r.JWPLAYER_VIDEO_SEI,e)},this.extPlayer.onCacheProcess=e=>{var t,n;e=Math.min(+e/L,1),t=this.extPlayerPTS,n=L,e===O&&n===L||(O=e,S.trigger(r.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:n}))},this.extPlayer.onSeekStart=e=>{this.seeking=!0,this.extPlayer.isPlaying()&&this.setState(a.LOADING),this.trigger(r.JWPLAYER_MEDIA_SEEK_START),e||this.mute(!0)},this.extPlayer.onSeekFinish=(e,t)=>{this.seeking=!1,(this.extPlayer.isPlaying()&&e&&!t||0<g&&g<=S.extPlayerDur&&this.isInitSeek&&e&&!t)&&(this.isInitSeek=!1,this.extPlayer.isPlaying())&&this.setState(a.PLAYING),e&&this.mute(!1),this.trigger(r.JWPLAYER_MEDIA_SEEK_FINISHED)},this.extPlayer.onPlayFinish=()=>{d(M),S.setState(a.PAUSED),B=!1,S.trigger(r.JWPLAYER_MEDIA_COMPLETE)},this.extPlayer.onRtcEvent=e=>{this.trigger(r.JWPLAYER_RTCEVENT,e)},this.extPlayer.onLiveShift=()=>{S.isMuted=!1,S.extPlayerGL=null},this.extPlayer.onError=e=>{setTimeout((()=>{this.trigger(r.ERROR,e)}))},this.extPlayer.onRender=(e,t,n,i,r)=>{},this.extPlayer.onQualityLevels=e=>{this.trigger(r.JWPLAYER_HLS_QUALITYLIST_CHANGE,{levels:e})},this.extPlayer.onLevelUpdates=e=>{this.trigger(r.JWPLAYER_LEVEL_UPDATED,{data:e})},this.extPlayer.onPause=()=>{this.pause()},this.extPlayer.onPlay=()=>{this.play()},this.cybercorePlay=(e=!1)=>{this.extPlayer&&!this.extPlayer.isPlaying()?("ts"===h.GetUriFormat(this.videoURL)||g||this.setState(a.PLAYING),this.extPlayer.play(),!0===this.autoPlayWithInterrupt&&(0===this.vol&&(this.vol=u.options.origin_volume),this.volume(this.vol),0<this.vol)&&this.mute(!1)):!1===e?(this.setState(a.PAUSED),this.extPlayer.pause()):(g||this.setState(a.PLAYING),this.extPlayer.play(),!0===this.autoPlayWithInterrupt&&this.volume(this.vol))},this.cybercorePause=()=>{this.extPlayer.pause(),!0===v&&(this.autoPlayWithInterrupt=!0)},this.state=a.IDLE,this.seeking=!1,i.extend(this,s,l),this.trigger=function(e,t){if(N)return s.trigger.call(this,e,t)},this.setState=function(e){return o.setState.call(this,e)},this.setControls=function(e){},S=this;var C,L,P,D,k,x=0,M=-1,O=-1,N=!0,F=-1,B=(y=!!u.sdkplatform,!1),U={level:{}},j=null;function G(e){L=e,x&&e&&e!==1/0&&S.seek(x)}function V(e){var n;return"array"===t.typeOf(e)&&0<e.length?i.map(e,(function(e,t){return{label:e.label||t}})):n}A=document.getElementById(n),this.isSDK=y,this.itemTracks=null,this.video=A,this.stop=function(){d(M),N&&(this.setState(a.IDLE),this.extPlayerLoadOK=!1)},this.destroy=async function(){await this.remove(),this.alreadyMvNode=!1},this.init=function(e,t){N&&(k=e.sources,e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),P=e.starttime||0,L=e.duration||0,U.reason="",this.itemTracks,j=t)},this.load=function(e){var t;N&&(function(e){F=function(e){var t=Math.max(0,F),n=u.qualityLabel;if(e)for(var i=0;i<e.length;i++)if(e[i].default&&(t=i),n&&e[i].label===n)return i;return U.reason="initial choice",U.level={},t}(k=e),(e=V(e))&&S.trigger(r.JWPLAYER_MEDIA_LEVELS,{levels:e,currentQuality:F})}(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),t=e.starttime||0,e.duration,g=t,!(S.extPlayer&&S.extPlayer.configFormat&&S.extPlayer.configFormat.useSoftDecoding))&&S.isInitSeek&&!v&&g&&0<g&&(!S.extPlayerDur||S.extPlayerDur&&g<S.extPlayerDur)&&S.extPlayer&&S.extPlayer.player&&(S.seek(g),S.isFirstSeek=!0)},this.test1=function(){},this.play=function(e=!0){S.seeking?(S.setState(a.LOADING),S.once(r.JWPLAYER_MEDIA_SEEKED,S.play)):([e=!1]=[e],S.cybercorePlay(e))},this.prevFrame=function(){this.pause(),S.extPlayer.seek(P-.033)},this.nextFrame=function(){S.extPlayer.playNextFrame()},this.snapshot=function(e){return null!=e&&(S.extPlayer.snapshot(e),!0)},this.pause=function(){d(M),this.cybercorePause(),this.setState(a.PAUSED)},this.seek=function(e){-1!=this.maxSeekTime&&this.maxSeekTime<e?this.trigger(r.JWPLAYER_MEDIA_SEEK,{position:this.extPlayerPTS,offset:e}):(!0===v&&(this.autoPlayWithInterrupt=!0,0===this.vol&&(this.vol=u.options.origin_volume),this.volume(this.vol),this.mute(0===this.vol)),N&&(this.extPlayer.seek(e),this.trigger(r.JWPLAYER_MEDIA_SEEK,{position:this.extPlayerPTS,offset:e})))},this.volume=function(e){this.extPlayerLoadOK&&(e=t.between(e/100,0,1),!0===this.extPlayerLoadOK&&(this.extPlayer.setVoice(e),this.trigger("volume",{volume:Math.round(100*e)})),this.vol=100*e,0===e)&&S.trigger("mute",{mute:!0})},this.enableGPU=function(){throw"只有使用Flash播放才支持开启GPU"},this.disableGPU=function(){throw"只有使用Flash播放才支持开启GPU"},this.mute=function(e){this.extPlayerLoadOK&&!0===this.extPlayerLoadOK&&(!0===e?(this.extPlayer.setVoice(0),this.trigger("volume",{volume:Math.round(0)}),this.trigger("mute",{mute:!0})):(this.extPlayer.setVoice(this.vol/100),this.extPlayer.player.videoTag&&(this.extPlayer.player.videoTag.muted=!1),this.trigger("volume",{volume:this.vol}),this.trigger("mute",{mute:!1})))},this.VR=function(){return this.extPlayer&&this.extPlayer.VR&&this.extPlayer.VR()},this.checkComplete=function(){return B},this.detachMedia=function(){d(M),this.disableTextTrack(),N=!1},this.setContainer=function(e){C=e},this.getContainer=function(){return C},this.remove=async function(){d(M),this.extPlayerLoadOK=!1,this.maxSeekTime=-1,null!==this.extPlayer&&(this.extPlayer.pause(),await this.extPlayer.release(),this.extPlayer=null,void 0!==this.extPlayerGL&&null!==this.extPlayerGL&&this.extPlayerGL.remove&&this.extPlayerGL.remove(),this.extPlayerGL=null)},this.setVisibility=function(t){(t=!!t)||p?e.style(C,{visibility:"visible",opacity:1}):e.style(C,{visibility:"",opacity:0})},this.resize=function(e,t,i,r){if(null!==this.extPlayerMediaInfo&&null!==this.extPlayerGL){if(!1===this.extPlayerMediaInfo.meta.isHEVC&&this.extPlayerMediaInfo.meta.size.width<=0&&(this.extPlayerMediaInfo.meta.size.width=this.extPlayerGL.videoWidth,this.extPlayerMediaInfo.meta.size.height=this.extPlayerGL.videoHeight),!(e&&t&&this.extPlayerMediaInfo.meta.size.width&&this.extPlayerMediaInfo.meta.size.height))return!1;mediaW=this.extPlayerMediaInfo.meta.size.width,mediaH=this.extPlayerMediaInfo.meta.size.height;var a=document.getElementById(n+"-rtc");a&&"canvas"==a.tagName.toLocaleLowerCase()||this.extPlayerMediaInfo.useSoftDecoding?(a&&(this.extPlayerGL=a),a=e,o=t,s=S.getFullScreen(),l=S.extPlayerContainer.style.transform&&(-1<S.extPlayerContainer.style.transform.indexOf("90deg)")||-1<S.extPlayerContainer.style.transform.indexOf("270deg)")),u=!s&&l?o:a,s=!s&&l?a:o,l=mediaW/u>mediaH/o,a=u/mediaW,o=s/mediaH,l=l?a:o,a=parseInt(mediaW*l,10),o=parseInt(mediaH*l,10),l=[parseInt((s-o)/2,10),parseInt((u-a)/2,10),a,o],this.extPlayerGL.style.marginTop=l[0]+"px",this.extPlayerGL.style.marginLeft=l[1]+"px",this.extPlayerGL.style.width=l[2]+"px",this.extPlayerGL.style.height=l[3]+"px",this.extPlayerGL.style.pointerEvents="none"):(s=0==r?t:e,this.extPlayerGL.style.width=(u=0==r?e:t)+"px",this.extPlayerGL.style.height=s+"px",a=this.extPlayerContainer.clientWidth,this.extPlayerGL.style.marginLeft=a<u?(a-u)/2+"px":"")}var o,s,l,u;return!1},this.getSize=function(e,t){var n=this.extPlayerContainer.clientWidth,i=this.extPlayerContainer.clientHeight;return[e=e<n?e:n,t=t<i?t:i]},this.setFullscreen=function(e){let n,i=this.extPlayerGL;return(e=!!e)?!(t.tryCatch((function(){var e=i.webkitEnterFullscreen||i.webkitEnterFullScreen;e&&e.apply(i)}))instanceof t.Error)&&S.getFullScreen(i):((n=i.webkitExitFullscreen||i.webkitExitFullScreen)&&n.apply(i),e)},S.getFullScreen=function(){var e=this.extPlayerGL,t=-1<S.extPlayerContainer.getAttribute("class").indexOf("jw-flag-fullscreen");return e&&!!e.webkitDisplayingFullscreen||t},this.setCurrentQuality=function(e){F!==e&&0<=e&&k&&k.length>e&&(F=e,U.reason="api",U.level={},this.trigger(r.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:V(k),file:k[F].file}),u.qualityLabel=k[e].label)},this.getCurrentQuality=function(){return F},this.getQualityLevels=function(){return V(k)},this.getName=function(){return{name:"cybercore"}},this.setCurrentAudioTrack=function(e){},this.getAudioTracks=function(){return[]},this.getCurrentAudioTrack=function(){return-1},this.setPlaybackRate=function(e){j.isLive||(!1===this.extPlayer.setPlaybackRate(e)&&this.extPlayerGL&&(this.extPlayerGL.playbackRate=e),this.extPlayerContainer&&(this.extPlayerContainer.querySelector(".jw-playrate-label").innerText="x"+e),this.trigger(r.JWPLAYER_PLAYBACKRATE,{playbackRate:Number(e)}))},this.changeHlsQuality=e=>{this.extPlayer.changeHlsQuality(e)},this.gobackLive=()=>{this.extPlayer&&this.extPlayer.gobackLive&&this.extPlayer.gobackLive()},this.getHlsCurrentLevel=()=>S.extPlayer&&S.extPlayer.player&&S.extPlayer.player.getCurrentLevel(),this.setToken=async e=>{if(!this.hlsTokenObj||!this.hlsTokenObj[e[0].file]){this.hlsTokenObj={};for(var t=0;t<e.length;t++)this.hlsTokenObj[e[t].file]=e[t].tokenText;S.extPlayer&&await S.extPlayer.release(),S.extPlayer.do(this.hlsTokenObj),S.isMuted=!0}},this.getMediaInfo=()=>S.extPlayer&&S.extPlayer.player&&S.extPlayer.player.getMediaInfo&&S.extPlayer.player.getMediaInfo(),this.setMaxSeekTime=e=>{this.maxSeekTime=e},u.tokenEncrypt||S.extPlayer.do()}function g(){}return t.isIOS(7),t.isIOS(8),g.prototype=o,m.prototype=new g,m.getName=function(){return{name:"cybercore"}},m}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(99),n(1),n(72)],t=function(e,t,n,i){var r=null,a=null,o=-1,s=0;function l(n){var i,r;(n=n.currentTarget.activeCues)&&n.length&&(i=n[n.length-1].startTime,r=[],e.each(n,(function(e){e.startTime<i||(e.data?r.push(e):e.text&&this.trigger("meta",{metadataTime:i,metadata:JSON.parse(e.text)}))}),this),r.length)&&(n=t.parseID3(r),this.trigger("meta",{metadataTime:i,metadata:n}))}function u(){r=[],a={}}function c(){if(r){for(var e=-1,t=0;t<r.length;t++)if("showing"===r[t].mode){e=t;break}this.setSubtitlesTrack(e+1)}else this.setTextTracks()}function h(){r&&r[o]&&(r[o].mode="disabled")}return{addTracksListener:function(e,t,n){n=n.bind(this),e.addEventListener?e.addEventListener(t,n):e["on"+t]=n},clearTracks:function(){a=r=null,s=0},disableTextTrack:h,getSubtitlesTrack:function(){return o},removeTracksListener:function(e,t,n){e&&(e.removeEventListener?e.removeEventListener(t,n):e["on"+t]=null)},setTextTracks:function(){var e=this.video.textTracks;if(o=-1,e){if(r||u(),e.length){var t=0,n=e.length;for(s=0;t<n;t++){var i,h=e[t];a[t+h.kind]||("metadata"===h.kind?(h.oncuechange=l.bind(this),h.mode="showing","ID3 Metadata"===(a[t+h.kind]=h).label&&s++):"subtitles"!==h.kind&&"captions"!==h.kind||(i=h.mode,h.mode="hidden",!h.cues.length&&"caterpillar"===this.getName().name&&"Unknown CC"===h.label)||(h.mode=i,r.push(h),"Unknown CC"!==(a[t+h.kind]=h).label)||s++)}}this.addTracksListener(e,"change",c),r&&r.length&&this.trigger("subtitlesTracks",{tracks:r})}},setupSideloadedTracks:function(t){var o=n.isChrome()||n.isIOS()||n.isSafari();!this._isSDK&&o&&t&&!function(e){return e===this.itemTracks&&r&&r.length===s+this.itemTracks.length}.call(this,t)&&(h(),i.emptyElement(this.video),r&&(o=e.filter(r,(function(e){return"Unknown CC"===e.label||"ID3 Metadata"===e.label})),u(),e.each(o,(function(e,t){a[t+e]=e})),r=o),this.itemTracks=t,function(e){if(e){var t=!1;r||u();for(var i=0;i<e.length;i++){var o,s=e[i];/\.(?:web)?vtt(?:\?.*)?$/i.test(s.file)?/subtitles|captions|descriptions|chapters|metadata/i.test(s.kind)&&(t||!this.video.hasAttribute("crossorigin")&&n.crossdomain(s.file)&&(this.video.setAttribute("crossorigin","anonymous"),t=!0),(o=document.createElement("track")).src=s.file,o.kind=s.kind,o.srclang=s.language||"",o.label=s.label,o.mode="disabled",o.id=s.defaulttrack?"default":"",this.video.appendChild(o)):(r.push(s),a[i+s.kind]=o)}}}.call(this,t))},setSubtitlesTrack:function(t){r&&(0===t&&e.each(r,(function(e){e.mode="disabled"})),o!==t-1)&&(h(),r[o=t-1]&&(r[o].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:o+1,tracks:r}))},textTrackChangeHandler:c}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n.r(t),function(e){n.d(t,"default",(function(){return i})),n(158);class i{static createPlayer(e,t){return window.newcybercorejs(e,t)}static clear(){e.STATICE_MEM_playerCount=-1,e.STATICE_MEM_playerIndexPtr=0}}}.call(this,n(26))},function(e,t,n){n.r(t),function(e){var i=n(120),r=n(121),a=n(4);let o=n(159),s=n(160),l=n(161),u=n(162),c=n(163),h=n(165),d=n(166),f=n(168),p=n(170),m=n(172),g=n(12);n(76);let _=n(180),y=n(182),v=n(183),A=n(5);n(185);let E=n(186);n(36);let b=n(38),w=n(1);var{}=n(187);let T=n(20).loadWasm;n(5);let S={moovStartFlag:!0,readyShow:!0,rawFps:24,autoCrop:!1,core:A.PLAYER_CORE_TYPE_DEFAULT,coreProbePart:0,checkProbe:!0,ignoreAudio:0,probeSize:4096,autoPlay:!1,repeat:!1,cacheLength:50,loadTimeout:30,hevc:!0},R=(e,t)=>t-1e3/e;void 0!==e.Module&&null!==e.Module||(e.Module={}),Module.onRuntimeInitialized=()=>{e.STATIC_MEM_wasmDecoderState=1},window.g_players={},window.addEventListener("wasmLoaded",(function(){e.STATIC_MEM_wasmDecoderState=1})),e.onWASMLoaded=function(){e.STATIC_MEM_wasmDecoderState=1};class I{constructor(t,n){if(e.STATICE_MEM_playerCount+=1,this.playerIndex=e.STATICE_MEM_playerCount,this.mp4Obj=null,this.mpegTsObj=null,this.hlsObj=null,this.hlsConf={hlsType:A.PLAYER_IN_TYPE_M3U8_VOD},this.snapshotCanvasContext=null,this.snapshotYuvLastFrame={width:0,height:0,luma:null,chromaB:null,chromaR:null},this.videoURL=t,this.sei_maps=[],this.configFormat={playerId:n.player||A.DEFAILT_WEBGL_PLAY_ID,playerW:n.width||A.DEFAULT_WIDTH,playerH:n.height||A.DEFAULT_HEIGHT,type:n.type||g.GetUriFormat(this.videoURL),accurateSeek:n.accurateSeek||!0,playIcon:n.playIcon||"assets/icon-play@300.png",loadIcon:n.loadIcon||"assets/icon-loading.gif",token:n.token||null,danmaku:n.danmaku,repeat:n.repeat,duration:n.duration,audioNone:n.audioNone,extInfo:S,useSoftDecoding:n.useSoftDecoding||!1,RtcPlugin:n.RtcPlugin,openToken:n.openToken,maxBufferLength:n.maxBufferLength,headers:n.headers,timeShift:n.timeShift,enableDecoderDegrade:n.enableDecoderDegrade,startPosition:n.startPosition,VRPlugin:n.VRPlugin},n.RtcPlugin&&(this.configFormat.type="rtc"),this.mediaExtFormat=this.configFormat.type,this.mediaExtProtocol=null,void 0!==this.videoURL&&null!==this.videoURL&&(this.mediaExtProtocol=g.GetUriProtocol(this.videoURL)),n.extInfo.duration&&(this.configFormat.extInfo.duration=n.extInfo.duration),n.extInfo.ignoreAudio&&(this.configFormat.extInfo.ignoreAudio=1),null==this.configFormat.token);else{for(var i in this.configFormat.extInfo.core=g.GetFormatPlayCore(this.configFormat.type),n.extInfo)i in this.configFormat.extInfo&&(this.configFormat.extInfo[i]=n.extInfo[i]);this.playMode=A.PLAYER_MODE_VOD,this.seekTarget=0,this.playParam=null,this.timerFeed=null,this.player=null,this.volume=1,this.rawModePts=0,this.loadTimeoutInterval=null,this.loadTimeoutSecNow=this.configFormat.extInfo.loadTimeout,this.autoScreenClose=!0,this.feedMP4Data=null,this.workerFetch=null,this.workerParse=null,this.onPlayTime=null,this.onLoadFinish=null,this.onSeekStart=null,this.onSeekFinish=null,this.onRender=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onPlayFinish=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.onOpenFullScreen=null,this.onCloseFullScreen=null,this.onError=null,this.onProbeError=null,this.onMakeItReady=null,this.onPlayState=null,this.onPerformance=null,this._g_init=null,this.onRtcEvent=null,this.onLiveShift=null,this.filterConfigParams();let e=this;document.addEventListener("fullscreenchange",(function(t){e._isFullScreen()?e.onOpenFullScreen&&e.onOpenFullScreen():(!0===e.autoScreenClose&&e.closeFullScreen(!0),e.onCloseFullScreen&&e.onCloseFullScreen())})),this.screenW=window.screen.width,this.screenH=window.screen.height,this.controller=null,this.downLoadWorker=null,this.onQualityLevels=null,this.onLevelUpdates=null,this.isCacheLimit=!1,this.init()}}init(){window.onmessage=e=>{var{event:e,handler:t}=e.data;"WeixinJSBridgeReady"===e&&(t&&"WeixinJSBridge"===t?this.play():t&&"iframeOnload"===t&&this.player&&this.player.onLoadFinish())}}filterConfigParams(){void 0!==this.configFormat.extInfo.checkProbe&&null!==this.configFormat.extInfo.checkProbe||(this.configFormat.extInfo.checkProbe=!0),this.configFormat.type===A.PLAYER_IN_TYPE_FLV?(this.configFormat.extInfo.core=A.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=A.PLAYER_IN_TYPE_MP4):this.configFormat.type===A.PLAYER_IN_TYPE_HTTPFLV&&(this.configFormat.extInfo.core=A.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=A.PLAYER_IN_TYPE_MP4,this.playMode=A.PLAYER_MODE_NOTIME_LIVE)}do(e){e&&(this.configFormat=Object.assign(this.configFormat,{authToken:e}));let t=!1;0<this.configFormat.extInfo.ignoreAudio&&(t=!0),this.configFormat.type===A.PLAYER_IN_TYPE_RAW_265&&(t=!0,this.playMode=A.PLAYER_MODE_NOTIME_LIVE),this.playParam={durationMs:0,fps:0,sampleRate:0,size:{width:0,height:0},audioNone:t,videoCodec:null},E.UI.createPlayerRender(this.configFormat.playerId,this.configFormat.playerW,this.configFormat.playerH),this._makeMP4Player(!0)}async release(){return window.clearInterval(this.timerFeed),this.timerFeed=null,this.playParam&&this.playParam.videoCodec===A.CODEC_H265&&this.player?(this.configFormat&&this.configFormat.type==A.PLAYER_IN_TYPE_M3U8&&void 0!==this.hlsObj&&null!==this.hlsObj&&this.hlsObj.release(),this.player&&this.player.release()):await this.player&&this.player.release(),void 0!==this.snapshotCanvasContext&&null!==this.snapshotCanvasContext&&(b.releaseContext(this.snapshotCanvasContext),this.snapshotCanvasContext=null,void 0!==this.snapshotYuvLastFrame)&&null!==this.snapshotYuvLastFrame&&(this.snapshotYuvLastFrame.luma=null,this.snapshotYuvLastFrame.chromaB=null,this.snapshotYuvLastFrame.chromaR=null,this.snapshotYuvLastFrame.width=0,this.snapshotYuvLastFrame.height=0),void 0!==this.workerFetch&&null!==this.workerFetch&&(this.workerFetch.postMessage({cmd:"stop",params:"",type:this.mediaExtProtocol}),this.workerFetch.onmessage=null),void 0!==this.workerParse&&null!==this.workerParse&&(this.workerParse.postMessage({cmd:"stop",params:""}),this.workerParse.onmessage=null),this.workerFetch=null,this.workerParse=null,this.configFormat.extInfo.readyShow=!0,this.flvDemuxer&&this.flvDemuxer.release(),window.onclick=document.body.onclick=null,window.g_players={},this.mp4Obj&&this.mp4Obj.remove&&this.mp4Obj.remove(),this.downLoadWorker&&(this.downLoadWorker.postMessage({type:1}),this.downLoadWorker.terminate()),this.player=null,!(this.configFormat.extInfo.duration=null)}debugYUV(e){this.player.debugYUV(e)}setPlaybackRate(e=1){return!(e<=0||void 0===this.player||null===this.player)&&this.player.setPlaybackRate(e)}changeHlsQuality(e){this.player&&this.player.changeHlsQuality&&this.player.changeHlsQuality(e),this.player&&this.player.setQuality&&this.player.setQuality(e)}gobackLive(){this.player&&this.player.gobackLive()}getPlaybackRate(){return void 0!==this.player&&null!==this.player&&(this.playParam.videoCodec===A.CODEC_H265?1:this.player.getPlaybackRate())}setRenderScreen(e=!1){return void 0!==this.player&&null!==this.player&&(this.player.setScreen(e),!0)}play(){var e;return void 0!==this.player&&null!==this.player&&(this.configFormat&&this.configFormat.useSoftDecoding?(e={seekPos:this._getSeekTarget(),mode:this.playMode,accurateSeek:this.configFormat.accurateSeek,seekEvent:!1,realPlay:!0},this.player.play(e)):this.player.play(),!0)}pause(){return void 0!==this.player&&null!==this.player&&(this.player.pause(),!0)}isPlaying(){return void 0!==this.player&&null!==this.player&&this.player.isPlayingState()}setVoice(e){return!((e=0<e?e:0)<0||void 0===this.player||null===this.player||(this.volume=e,this.player&&this.player.setVoice(e),0))}getVolume(){return this.volume}mediaInfo(){var e={meta:this.playParam,videoType:this.playMode,formatType:this.configFormat.type,useSoftDecoding:this.configFormat.useSoftDecoding};return e.meta.isHEVC=0===this.playParam.videoCodec,e}VR(){return this.player&&this.player.VR}snapshot(e=null){return null!==e&&void 0!==this.playParam&&null!==this.playParam&&(w.isFF()?(this.player.setScreen(!0),e.width=this.snapshotYuvLastFrame.width,e.height=this.snapshotYuvLastFrame.height,void 0!==this.snapshotCanvasContext&&null!==this.snapshotCanvasContext||(this.snapshotCanvasContext=b.setupCanvas(e,{preserveDrawingBuffer:!1})),b.renderFrame(this.snapshotCanvasContext,this.snapshotYuvLastFrame.luma,this.snapshotYuvLastFrame.chromaB,this.snapshotYuvLastFrame.chromaR,this.snapshotYuvLastFrame.width,this.snapshotYuvLastFrame.height)):(e.width=this.playParam.size.width,e.height=this.playParam.size.height,e.getContext("2d").drawImage(this.player.videoTag,0,0,e.width,e.height))),null}_seekHLS(e,t,n){if(void 0===this.player||null===this.player)return!1;setTimeout((function(){t.player.getCachePTS()>e?n():t._seekHLS(e,t,n)}),100)}_seek(e,t,n,i){this.hlsObj&&this.hlsObj.toSeek(e,n,i),t()}seek(e,t,n=0){if(void 0===this.player||null===this.player)return!1;let i=this,r=(this.seekTarget=e,this.onSeekStart&&this.onSeekStart(e),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null),this._getSeekTarget());var a;if(!this.configFormat.useSoftDecoding)return a=this.player.seek(e),this.onSeekFinish&&this.onSeekFinish(a,!0),a;if(this.mediaExtFormat===A.PLAYER_IN_TYPE_FLV)i.player.releaseDecode((()=>{this.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},(()=>{t&&t()}),(()=>{this.flvDemuxer&&this.flvDemuxer.limitDownloads(!1)}),null,!1),this.flvDemuxer&&this.flvDemuxer.limitDownloads(!0),this.flvDemuxer&&this.flvDemuxer.seek(e)}),{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek});else{if(i.configFormat.type!=A.PLAYER_IN_TYPE_MP4){if(this.configFormat.extInfo.core===A.PLAYER_CORE_TYPE_CNATIVE)this.pause(),this._seekHLS(e,this,(function(){i.player.seek((()=>{}),{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek})}));else{if(i.configFormat.type==A.PLAYER_IN_TYPE_M3U8)return void i.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},(()=>{t&&t()}),(()=>{i._seek(e,(()=>{}),0<i.player.timeShiftData,i.player.durationMs)}),null,!0);if(i.configFormat.type==A.PLAYER_IN_TYPE_TS)return void i.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},(()=>{t&&t()}),(()=>{var t=i.mpegTsObj.seek(e);this._avFeedMP4Data(t,t),this.isCacheLimit=!1}),null,!0);this._seekHLS(e,this,(function(){i.player.seek((()=>{i.configFormat.type==A.PLAYER_IN_TYPE_MP4?i.mp4Obj.seek(e):i.configFormat.type==A.PLAYER_IN_TYPE_TS||i.configFormat.type==A.PLAYER_IN_TYPE_MPEGTS?(t=i.mpegTsObj.seek(e),i._avFeedMP4Data(t,t),i.isCacheLimit=!1):i.configFormat.type==A.PLAYER_IN_TYPE_M3U8&&(i.hlsObj.onSamples=null,i.hlsObj.seek(e));var t=function(){let t=0;return t=i.configFormat.accurateSeek?e:i._getBoxBufSeekIDR(),parseInt(t)}(),n=parseInt(i._getBoxBufSeekIDR())||0;i._avFeedMP4Data(n,t)}),{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek})}))}return!0}i.player.releaseDecode((()=>{i.player.seek(null,{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek},(()=>{t&&t()}),(()=>{var t=i.mp4Obj.seek(e);this._avFeedMP4Data(t,t),0!=e&&(this.isCacheLimit=!1)}))}),{seekTime:r,mode:i.playMode,accurateSeek:i.configFormat.accurateSeek})}}fullScreen(){var e,t,n;this.autoScreenClose=!0,this.player.vCodecID===A.V_CODEC_NAME_HEVC?(t=(e=document.querySelector("#"+this.configFormat.playerId)).getElementsByTagName("canvas")[0],e.style.width=this.screenW+"px",e.style.height=this.screenH+"px",n=this._checkScreenDisplaySize(this.screenW,this.screenH,this.playParam.size.width,this.playParam.size.height),t.style.marginTop=n[0]+"px",t.style.marginLeft=n[1]+"px",t.style.width=n[2]+"px",t.style.height=n[3]+"px",this._requestFullScreen(e)):this._requestFullScreen(this.player.videoTag)}closeFullScreen(e=!1){var t,n;!1===e&&(this.autoScreenClose=!1,this._exitFull()),this.player.vCodecID===A.V_CODEC_NAME_HEVC&&(t=(e=document.querySelector("#"+this.configFormat.playerId)).getElementsByTagName("canvas")[0],n=e.style.transform&&(-1<e.style.transform.indexOf("90deg)")||-1<e.style.transform.indexOf("270deg)")),e.style.width=n?this.configFormat.playerH+"px":this.configFormat.playerW+"px",e.style.height=n?this.configFormat.playerW+"px":this.configFormat.playerH+"px",e=this._checkScreenDisplaySize(this.configFormat.playerW,this.configFormat.playerH,this.playParam.size.width,this.playParam.size.height),t.style.marginTop=e[0]+"px",t.style.marginLeft=e[1]+"px",t.style.width=e[2]+"px",t.style.height=e[3]+"px")}playNextFrame(){return this.pause(),void 0!==this.playParam&&null!==this.playParam&&(0===this.playParam.videoCodec?this.player.playYUV():this.player.nativeNextFrame(),!0)}resize(e,t){var n,i,r;if(void 0===this.player||null===this.player)return!1;{if(!(e&&t&&this.playParam.size.width&&this.playParam.size.height))return!1;let u=this.playParam.size.width,c=this.playParam.size.height;var a,o,s=0===this.playParam.videoCodec,l=document.querySelector("#"+this.configFormat.playerId);return l.style.width=e+"px",l.style.height=t+"px",1==s?(s=l.getElementsByTagName("canvas")[0],a=u/(n=e)>c/(o=t),i=(n/u).toFixed(2),r=(o/c).toFixed(2),a=a?i:r,i=parseInt(u*a,10),r=parseInt(c*a,10),a=[parseInt((o-r)/2,10),parseInt((n-i)/2,10),i,r],s.style.marginTop=a[0]+"px",s.style.marginLeft=a[1]+"px",s.style.width=a[2]+"px",s.style.height=a[3]+"px"):((o=l.getElementsByTagName("video")[0]).style.width=e+"px",o.style.height=t+"px"),!0}}_checkScreenDisplaySize(e,t,n,i){var r=i/t<n/e,a=(e/n).toFixed(2),o=(t/i).toFixed(2);return r=r?a:o,a=this.fixed?e:parseInt(n*r),o=this.fixed?t:parseInt(i*r),[parseInt((t-o)/2),parseInt((e-a)/2),a,o]}_isFullScreen(){var e=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement;return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled,null!=e}_requestFullScreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullScreen()}_exitFull(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}_durationText(e){return e<0?"Play":(e=Math.round(e),Math.floor(e/3600)+":"+Math.floor(e%3600/60)+":"+Math.floor(e%60))}_getSeekTarget(){return this.configFormat.accurateSeek?this.seekTarget:this._getBoxBufSeekIDR()}_getBoxBufSeekIDR(){return this.configFormat.type==A.PLAYER_IN_TYPE_MP4?this.mp4Obj.seekPos:this.configFormat.type==A.PLAYER_IN_TYPE_TS||this.configFormat.type==A.PLAYER_IN_TYPE_MPEGTS?this.mpegTsObj.seekPos:this.configFormat.type==A.PLAYER_IN_TYPE_M3U8?this.hlsObj.seekPos:void 0}_playControl(){this.isPlaying()?this.pause():this.play()}_avFeedMP4Data(e=0,t=0,n=null){if(void 0===this.player||null===this.player)return!1;let i=parseInt(this.playParam.durationMs/1e3);this.player.clearAllCache(),this.timerFeed=window.setInterval((()=>{let r=null,a=null,o=!0,s=!0;if(this.configFormat.type==A.PLAYER_IN_TYPE_MP4?(this.isCacheLimit||(r=this.mp4Obj.popBuffer(1,e)),a=this.mp4Obj.audioNone?null:this.mp4Obj.popBuffer(2,t)):this.configFormat.type==A.PLAYER_IN_TYPE_TS||this.configFormat.type==A.PLAYER_IN_TYPE_MPEGTS?(this.isCacheLimit||(r=this.mpegTsObj.popBuffer(1,e)),a=this.mpegTsObj.getAudioNone()?null:this.mpegTsObj.popBuffer(2,t)):this.configFormat.type==A.PLAYER_IN_TYPE_M3U8&&(this.isCacheLimit||(r=this.hlsObj.popBuffer(1,e)),a=this.hlsObj.audioNone?null:this.hlsObj.popBuffer(2,t),e<i-1&&e>=this.hlsObj.getLastIdx()&&(o=!1),t<i-1)&&t>=this.hlsObj.getALastIdx()&&(s=!1),!0===o&&null!=r)for(let e=0;e<r.length;e++)r[e].data=structuredClone(r[e].frameData),this.player.appendHevcFrame(r[e]);if(!0===s&&null!=a)for(let e=0;e<a.length;e++)a[e].data=structuredClone(a[e].frameData),this.player.appendAACFrame(a[e]);this.playMode!==A.PLAYER_MODE_NOTIME_LIVE&&this.configFormat.type!==A.PLAYER_IN_TYPE_M3U8&&this.onCacheProcess&&this.onCacheProcess(this.player.getCachePTS()),!0===o&&null!=r&&(this.configFormat.extInfo.readyShow&&(this.configFormat.type===A.PLAYER_IN_TYPE_M3U8?this.configFormat.extInfo.readyShow=!1:this.configFormat.extInfo.core!==A.PLAYER_CORE_TYPE_CNATIVE&&(this.player.cacheYuvBuf.getState(),CACHE_APPEND_STATUS_CODE.NULL,!0===this.player.playYUV(!0,!0))&&(this.configFormat.extInfo.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone()),e++),!0===s&&null!=a&&t++,e>i&&(window.clearInterval(this.timerFeed),(this.timerFeed=null)!=n)&&n()}),5)}_isSupportWASM(){window.document;var e=window.navigator,t="ipad"==(h=e.userAgent.toLowerCase()).match(/ipad/i),n="iphone os"==h.match(/iphone os/i),i="iPad"==h.match(/iPad/i),r="iPhone os"==h.match(/iPhone os/i),a="midp"==h.match(/midp/i),o="rv:1.2.3.4"==h.match(/rv:1.2.3.4/i),s="ucweb"==h.match(/ucweb/i),l="android"==h.match(/android/i),u="Android"==h.match(/Android/i),c="windows ce"==h.match(/windows ce/i),h="windows mobile"==h.match(/windows mobile/i);if(t||n||i||r||a||o||s||l||u||c||h)return!1;if(t=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})(),!1===t)return!1;if(!0===t){if(i=(n=g.BrowserJudge())[0],r=n[1],"Chrome"===i&&r<85)return!1;if(0<=i.indexOf("360"))return!1;if(/Safari/.test(e.userAgent)&&!/Chrome/.test(e.userAgent)&&13<r)return!1}return!0}_makeMP4Player(e=!1){if(-1!=["mp3","ogg","flac","aac","wav","opus"].indexOf(this.configFormat.type))this._makeNativePlayer();else{if(!1===this._isSupportWASM()||!0===e){if(this.configFormat.type==A.PLAYER_IN_TYPE_MP4)this.mediaExtFormat===A.PLAYER_IN_TYPE_FLV?this.configFormat.useSoftDecoding?this._flvSoftPlayer():this._flvJsPlayer(this.playParam.durationMs,this.playParam.audioNone):this.configFormat.danmaku&&null!=this.configFormat.danmaku.useMask?this._mp4EntryVodStream():this._makeNativePlayer();else if(this.configFormat.type==A.PLAYER_IN_TYPE_TS||this.configFormat.type==A.PLAYER_IN_TYPE_MPEGTS)this.configFormat.extInfo.duration?this._mpegTsNv3rdPlayer(1e3*this.configFormat.extInfo.duration,!1):this._mpegTsEntry();else if(this.configFormat.type==A.PLAYER_IN_TYPE_M3U8)this._m3u8Entry();else{if(this.configFormat.type===A.PLAYER_IN_TYPE_RAW_265)return-1;this.configFormat.type==A.PLAYER_IN_TYPE_RTC?this._rtcPlayer():this.configFormat.type==A.PLAYER_IN_TYPE_DASH&&this._dashJsPlayer()}return 1}this.mediaExtProtocol===A.URI_PROTOCOL_WEBSOCKET_DESC?this.configFormat.type===A.PLAYER_IN_TYPE_RAW_265?this._raw265Entry():this._cWsFLVDecoderEntry():null!=this.configFormat.extInfo.core&&null!==this.configFormat.extInfo.core&&this.configFormat.extInfo.core===A.PLAYER_CORE_TYPE_CNATIVE?this.mediaExtFormat===A.PLAYER_IN_TYPE_MP4?this._mp4EntryVodStream():this._cDemuxDecoderEntry():this.configFormat.type==A.PLAYER_IN_TYPE_MP4?this.configFormat.extInfo.moovStartFlag?this._mp4EntryVodStream():this._mp4Entry():this.configFormat.type==A.PLAYER_IN_TYPE_TS||this.configFormat.type==A.PLAYER_IN_TYPE_MPEGTS?this._mpegTsEntry():this.configFormat.type==A.PLAYER_IN_TYPE_M3U8?this._m3u8Entry():this.configFormat.type===A.PLAYER_IN_TYPE_RAW_265&&this._raw265Entry()}return 0}_makeMP4PlayerViewEvent(e,t,n,i,r=!1,a=null,o){let s=this;var l,u;this.playParam.durationMs=0==e?1/0:e,this.playParam.fps=t,this.playParam.sampleRate=n,this.playParam.size=i,this.playParam.audioNone=r,this.playParam.videoCodec=a||A.CODEC_H265,(this.configFormat.type==A.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==A.PLAYER_IN_TYPE_M3U8_LIVE||this.configFormat.type==A.PLAYER_IN_TYPE_RAW_265)&&(this.playMode=A.PLAYER_MODE_NOTIME_LIVE),s.configFormat.extInfo.autoCrop&&(l=document.querySelector("#"+this.configFormat.playerId),i=i.width/i.height,(u=this.configFormat.playerW/this.configFormat.playerH)<i?l.style.height=this.configFormat.playerW/i+"px":i<u&&(l.style.width=this.configFormat.playerH*i+"px")),this.player.setConfig({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:n,fps:t,appendHevcType:A.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:r,token:this.configFormat.token,videoCodec:a,repeat:this.configFormat.extInfo&&this.configFormat.extInfo.repeat}),this.player.onPlayingTime=(t,n,i)=>{s._durationText(t),s._durationText(e/1e3),null!=s.onPlayTime&&s.onPlayTime(t,n,i)},this.player.onPlayingFinish=e=>{this.pause(),this.seek(0,(()=>{e&&e()})),this.configFormat.useSoftDecoding=!0,null!=this.onPlayFinish&&this.onPlayFinish()},this.player.onSeekStart=()=>{var e;null!=s.onSeekStart&&(e=this.player.timeShiftData&&0<this.player.timeShiftData,s.onSeekStart(e))},this.player.onSeekFinish=()=>{null!=s.onSeekFinish&&s.onSeekFinish()},this.player.onRender=(e,t,n,i,r)=>{window.performance.now(),s._g_init,null!=s.onRender&&s.onRender(e,t,n,i,r)},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},s.player.setDurationMs(e),s.player.setFrameRate(t),null!=s.onLoadFinish&&(s.onLoadFinish(),s.configFormat.type!=A.PLAYER_IN_TYPE_M3U8&&s.configFormat.type!=A.PLAYER_IN_TYPE_MP4||s.onReadyShowDone&&s.onReadyShowDone()),this.player.onInitDecodeComplete=()=>{o&&o()}}_makeNativePlayer(e=0,t=0,n=0,i,r=0,o){if(!this.configFormat.useSoftDecoding){let l=this,u=(this.playParam.durationMs=e,this.playParam.fps=t,this.playParam.sampleRate=n,this.playParam.size=i,this.playParam.audioNone=this.configFormat.extInfo.ignoreAudio||r,this.playParam.videoCodec=o||A.CODEC_H264,this.configFormat.type==A.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==A.PLAYER_IN_TYPE_M3U8_LIVE&&(this.playMode=A.PLAYER_MODE_NOTIME_LIVE),this.configFormat.useSoftDecoding=!1,this.player=new s.Mp4Player({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:n,fps:t,appendHevcType:A.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:this.playParam.audioNone,token:this.configFormat.token,videoCodec:o,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,VRPlugin:this.configFormat.VRPlugin}),0),c=window.setInterval((function(){u++,void 0!==l.player&&null!==l.player||(window.clearInterval(c),c=null),u>A.DEFAULT_PLAYERE_LOAD_TIMEOUT&&(l.player.release(),l.onPlayState&&l.onPlayState(!0),l.onError({msg:"reconnect is timeout",event:"timeout",url:l.videoURL,type:"networkError"}),l.player=null,window.clearInterval(c),c=null)}),1e3);return this.player.onSeekStart=()=>{null!=l.onSeekStart&&l.onSeekStart()},this.player.onPlayingTime=t=>{var n;l._durationText(t),l._durationText(e/1e3),this.player.sei_maps&&null!=l.onSeiInfo&&(n=this.player.sei_maps.findIndex((e=>e.pts>t)),l.onSeiInfo(this.player.sei_maps[n])),null!=l.onPlayTime&&l.onPlayTime(t)},this.player.onSeiTimer=e=>{var t;this.player.sei_maps&&null!=l.onSeiInfo&&(t=this.player.sei_maps.findIndex((t=>t.pts>e)),l.onSeiInfo(this.player.sei_maps[t]))},this.player.onSeiInfo=e=>{null!=l.onSeiInfo&&l.onSeiInfo(e)},this.player.onPlayingFinish=()=>{null!=l.onPlayFinish&&l.onPlayFinish()},this.player.onMakeItReady=()=>{null!=l.onMakeItReady&&l.onMakeItReady()},this.player.onLoadFinish=()=>{window.clearInterval(c),c=null,l.playParam.durationMs=1e3*l.player.duration,l.playParam.size=l.player.getSize(),l.onLoadFinish&&l.onLoadFinish(),l.onReadyShowDone&&l.onReadyShowDone(),l.configFormat.useSoftDecoding=!1},this.player.onPlayState=e=>{l.onPlayState&&l.onPlayState(e)},this.player.onCacheProcess=e=>{l.onCacheProcess&&l.onCacheProcess(e)},this.player.onSeekFinish=e=>{l.onSeekFinish&&l.onSeekFinish(e)},this.player.onError=e=>{var t=e.code===a.MsgCode.DEOCDE_NOT_SUPPORT;window.clearInterval(c),this.configFormat.enableDecoderDegrade&&t&&"mp4"===this.configFormat.type?(this.player.release(),this.configFormat.useSoftDecoding=!0,this._mp4EntryVodStream()):l.onError(e)},this.player.makeIt(this.videoURL),this.player}this._mp4EntryVodStream()}_initMp4BoxObject(){this.timerFeed=null,this.mp4Obj=new _,this.mp4Obj.onMp4BoxReady=e=>{var t=this.mp4Obj.getFPS();let n,i=R(t,this.mp4Obj.getDurationMs());var r=this.mp4Obj.getSampleRate(),a=this.mp4Obj.getSize(),o=this.mp4Obj.getVideoCoder();if(this.configFormat.useSoftDecoding){let e=!1;this.initDecoder(),this._makeMP4PlayerViewEvent(i,t,r,a,this.mp4Obj.audioNone,o,(()=>{e||(e=!0,parseInt(i/1e3),this._avFeedMP4Data(0,0))}))}else n=this._makeNativePlayer(i,t,r,a,this.mp4Obj.audioNone,o);this.mp4Obj.on("parse_sei",(function(e){n&&n.sei_maps.push(e)}))}}_mp4Entry(){let e=this;fetch(this.videoURL).then((e=>e.arrayBuffer())).then((t=>{e._initMp4BoxObject(),this.mp4Obj.demux(),this.mp4Obj.appendBufferData(t,0),this.mp4Obj.finishBuffer(),this.mp4Obj.seek(-1)}))}_mp4EntryVodStream(){this.timerFeed=null,this.mp4Obj=new _,this._initMp4BoxObject(),this.mp4Obj.demux(),this._downLoadeWorker(null,(e=>{this.onError&&this.onError(e)}))}_downLoadeWorker(e,t){this.downLoadWorker=new r.a,this.downLoadWorker.postMessage({type:0,videoURL:this.videoURL,offset:e||0}),this.downLoadWorker.onmessage=e=>{switch(e.data.type){case 0:this.mp4Obj.appendBufferData(e.data.buffer,e.data.fileStart,t);break;case 1:this.mp4Obj.finishBuffer(),this.mp4Obj.seek(-1);break;case 2:this.mp4Obj.remove(),t&&t(e.data&&e.data.error)}}}_downLoader(e){let t=this,n=0;t.controller&&t.controller.abort(),t.controller=new AbortController;var i=t.controller.signal;fetch(this.videoURL,e?{headers:{Range:`bytes=${e}-`},signal:i}:{signal:i}).then((function(e){return function e(i){return i.read().then((function(r){if(!r.done)return r=r.value,t.mp4Obj.appendBufferData(r.buffer,n),n+=r.byteLength,e(i);t.mp4Obj.finishBuffer(),t.mp4Obj.seek(-1),window.clearInterval(networkInterval)}))}(e.body.getReader())})).catch((function(e){}))}_cDemuxDecoderEntry(e=0,t=!1){let n=this,i=!1,r=new AbortController,a=r.signal,o={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,token:this.configFormat.token,readyShow:this.configFormat.extInfo.readyShow,checkProbe:this.configFormat.extInfo.checkProbe,ignoreAudio:this.configFormat.extInfo.ignoreAudio,playMode:this.playMode,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,defaultFps:this.configFormat.extInfo.rawFps,cacheLength:this.configFormat.extInfo.cacheLength},s=(this.player=new l.default.CNativeCore(o),window.g_players[this.player.corePtr]=this.player,n.configFormat.useSoftDecoding=!0,this.player.onReadyShowDone=()=>{n.configFormat.extInfo.readyShow=!1,n.onReadyShowDone&&n.onReadyShowDone()},this.player.onRelease=()=>{r&&r.abort()},this.player.onProbeFinish=()=>{i=!0,n.playParam.fps=n.player.config.fps,n.playParam.durationMs=R(n.playParam.fps,1e3*n.player.duration),n.player.duration<0&&(n.playMode=A.PLAYER_MODE_NOTIME_LIVE,n.playParam.durationMs=-1),n.playParam.sampleRate=n.player.config.sampleRate,n.playParam.size={width:n.player.width,height:n.player.height},n.playParam.audioNone=n.player.audioNone,n.player.vCodecID===A.V_CODEC_NAME_HEVC?(n.playParam.videoCodec=A.CODEC_H265,n.playParam.audioIdx<0&&(n.playParam.audioNone=!0),this.configFormat.useSoftDecoding||!0!==g.IsSupport265Mse()||!1!==t||n.mediaExtFormat!==A.PLAYER_IN_TYPE_MP4&&n.mediaExtFormat!==A.PLAYER_IN_TYPE_FLV?n.onLoadFinish&&n.onLoadFinish():(r.abort(),n.player.release(),n.player=null,n.mediaExtFormat===A.PLAYER_IN_TYPE_MP4?n._makeNativePlayer(n.playParam.durationMs,n.playParam.fps,n.playParam.sampleRate,n.playParam.size,!1,n.playParam.videoCodec):n.mediaExtFormat===A.PLAYER_IN_TYPE_FLV&&n._flvJsPlayer(n.playParam.durationMs,n.playParam.audioNone))):(n.playParam.videoCodec=A.CODEC_H264,r.abort(),n.player.release(),n.player=null,n.mediaExtFormat===A.PLAYER_IN_TYPE_MP4?n._makeNativePlayer(n.playParam.durationMs,n.playParam.fps,n.playParam.sampleRate,n.playParam.size,!1,n.playParam.videoCodec):n.mediaExtFormat===A.PLAYER_IN_TYPE_FLV?n._flvJsPlayer(n.playParam.durationMs,n.playParam.audioNone):n.onLoadFinish&&n.onLoadFinish())},this.player.onPlayingTime=e=>{n._durationText(e),n._durationText(n.player.duration),null!=n.onPlayTime&&n.onPlayTime(e)},this.player.onPlayingFinish=()=>{n.pause(),null!=n.onPlayTime&&n.onPlayTime(0),n.onPlayFinish&&n.onPlayFinish(),n.player.reFull=!0,n.seek(0)},this.player.onCacheProcess=e=>{this.onCacheProcess&&this.onCacheProcess(e)},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,t,i,r,a)=>{n.snapshotYuvLastFrame.luma=null,n.snapshotYuvLastFrame.chromaB=null,n.snapshotYuvLastFrame.chromaR=null,n.snapshotYuvLastFrame.width=e,n.snapshotYuvLastFrame.height=t,n.snapshotYuvLastFrame.luma=new Uint8Array(i),n.snapshotYuvLastFrame.chromaB=new Uint8Array(r),n.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=n.onRender&&n.onRender(e,t,i,r,a)},this.player.onSeekFinish=()=>{null!=this.onSeekFinish&&this.onSeekFinish()},this.player.onPerformance=e=>{n.onPerformance&&n.onPerformance(e)},!(this.player.onWasmError=e=>{n.onError&&n.onError(e)})),u=!1,c=0;this.player.onWasmFinished=()=>{!function t(l){setTimeout((function(){!1===s&&(r.abort(),r=null,a=null,l>=A.FETCH_FIRST_MAX_TIMES?(n.player.release(),n.onPlayState&&n.onPlayState(!0),n.onError&&n.onError({msg:"fetch is timeout",event:"timeout",url:n.videoURL,type:"networkError"})):(r=new AbortController,a=r.signal,t(l+1)))}),A.FETCH_HTTP_FLV_TIMEOUT_MS),fetch(n.videoURL,{signal:a,headers:new Headers(n.configFormat.headers)}).then((function(t){if(!t.ok)return!1;if(s=!0,t.headers.has("Content-Length"))c=t.headers.get("Content-Length"),n.configFormat.extInfo.coreProbePart<=0?n.player&&n.player.setProbeSize(n.configFormat.extInfo.probeSize):n.player&&n.player.setProbeSize(c*n.configFormat.extInfo.coreProbePart);else{if(n.mediaExtFormat===A.PLAYER_IN_TYPE_FLV)return r.abort(),n.player.release(),n.player=null,n._cLiveFLVDecoderEntry(o),!0;n.player&&n.player.setProbeSize(40960)}let a=function(t){return t.read().then((function(r){return r.done&&setTimeout((()=>!0!==i?(n.player.release(),n.player=null,e<A.PLAYER_CNATIVE_VOD_RETRY_MAX?(e+=1,n._cDemuxDecoderEntry(e),!0):(n._mp4EntryVodStream(),!1)):u=!0),100),r.value.buffer,n.player&&n.player.pushBuffer(r.value.buffer)<0?(n.player.release(),n.player=null,e<A.PLAYER_CNATIVE_VOD_RETRY_MAX?(e+=1,n._cDemuxDecoderEntry(e),!0):(n._mp4EntryVodStream(),!1)):a(t)}))};return a(t.body.getReader())})).catch((function(e){e.toString().includes("user aborted")}))}(0)}}_cLiveG711DecoderEntry(e){let t=this;e.probeSize=this.configFormat.extInfo.probeSize,this.player=new c.CHttpG711Core(e),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=()=>{t.playParam.fps=t.player.mediaInfo.fps,t.playParam.durationMs=-1,t.playMode=A.PLAYER_MODE_NOTIME_LIVE,t.playParam.sampleRate=t.player.mediaInfo.sampleRate,t.playParam.size={width:t.player.mediaInfo.width,height:t.player.mediaInfo.height},t.playParam.audioNone=t.player.mediaInfo.audioNone,t.player.vCodecID===A.V_CODEC_NAME_HEVC?(t.playParam.audioIdx<0&&(t.playParam.audioNone=!0),t.playParam.videoCodec=A.CODEC_H265,t.onLoadFinish&&t.onLoadFinish()):(t.playParam.videoCodec=A.CODEC_H264,t.player.release(),t.player=null,t._flvJsPlayer(t.playParam.durationMs,t.playParam.audioNone))},this.player.onError=e=>{t.onError&&t.onError(e)},this.player.onReadyShowDone=()=>{t.configFormat.extInfo.readyShow=!1,t.onReadyShowDone&&t.onReadyShowDone()},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,n,i,r,a)=>{t.snapshotYuvLastFrame.luma=null,t.snapshotYuvLastFrame.chromaB=null,t.snapshotYuvLastFrame.chromaR=null,t.snapshotYuvLastFrame.width=e,t.snapshotYuvLastFrame.height=n,t.snapshotYuvLastFrame.luma=new Uint8Array(i),t.snapshotYuvLastFrame.chromaB=new Uint8Array(r),t.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=t.onRender&&t.onRender(e,n,i,r,a)},this.player.onPlayState=e=>{t.onPlayState&&t.onPlayState(e)},this.player.start(this.videoURL)}_cLiveFLVDecoderEntry(e){let t=this;e.probeSize=this.configFormat.extInfo.probeSize,this.player=new u.default.CHttpLiveCore(e),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=(n=0)=>{if(1===n)t.player.release(),t.player=null,t._cLiveG711DecoderEntry(e);else if(t.playParam.fps=t.player.mediaInfo.fps,t.playParam.durationMs=-1,t.playMode=A.PLAYER_MODE_NOTIME_LIVE,t.playParam.sampleRate=t.player.mediaInfo.sampleRate,t.playParam.size={width:t.player.mediaInfo.width,height:t.player.mediaInfo.height},t.playParam.audioNone=t.player.mediaInfo.audioNone,t.player.vCodecID===A.V_CODEC_NAME_HEVC)t.playParam.videoCodec=A.CODEC_H265,t.playParam.audioIdx<0&&(t.playParam.audioNone=!0),this.configFormat.useSoftDecoding||!0!==g.IsSupport265Mse()||t.mediaExtFormat!==A.PLAYER_IN_TYPE_FLV?t.onLoadFinish&&t.onLoadFinish():(t.player.release(),t.player=null,t.mediaExtFormat===A.PLAYER_IN_TYPE_FLV&&t._flvJsPlayer(t.playParam.durationMs,t.playParam.audioNone));else if(t.playParam.videoCodec=A.CODEC_H264,t.player.release(),t.player=null,t.mediaExtFormat===A.PLAYER_IN_TYPE_FLV)t._flvJsPlayer(t.playParam.durationMs,t.playParam.audioNone);else{if(t.mediaExtFormat!==A.PLAYER_IN_TYPE_TS&&t.mediaExtFormat!==A.PLAYER_IN_TYPE_MPEGTS)return-1;t._mpegTsNv3rdPlayer(t.playParam.durationMs,t.playParam.audioNone)}},this.player.onError=e=>{t.onError&&t.onError(e)},this.player.onReadyShowDone=()=>{t.configFormat.extInfo.readyShow=!1,t.onReadyShowDone&&t.onReadyShowDone(),this.configFormat.useSoftDecoding=!0},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,n,i,r,a)=>{t.snapshotYuvLastFrame.luma=null,t.snapshotYuvLastFrame.chromaB=null,t.snapshotYuvLastFrame.chromaR=null,t.snapshotYuvLastFrame.width=e,t.snapshotYuvLastFrame.height=n,t.snapshotYuvLastFrame.luma=new Uint8Array(i),t.snapshotYuvLastFrame.chromaB=new Uint8Array(r),t.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=t.onRender&&t.onRender(e,n,i,r,a)},this.player.onPlayState=e=>{t.onPlayState&&t.onPlayState(e)},this.player.start(this.videoURL),this.player.onPerformance=e=>{t.onPerformance&&t.onPerformance(e)}}_cWsFLVDecoderEntry(){let e=this;var t={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,token:this.configFormat.token,readyShow:this.configFormat.extInfo.readyShow,checkProbe:this.configFormat.extInfo.checkProbe,ignoreAudio:this.configFormat.extInfo.ignoreAudio,playMode:this.playMode,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat};t.probeSize=this.configFormat.extInfo.probeSize,this.player=new h.CWsLiveCore(t),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=()=>{e.playParam.fps=e.player.mediaInfo.fps,e.playParam.durationMs=-1,e.playMode=A.PLAYER_MODE_NOTIME_LIVE,e.playParam.sampleRate=e.player.mediaInfo.sampleRate,e.playParam.size={width:e.player.mediaInfo.width,height:e.player.mediaInfo.height},e.playParam.audioNone=e.player.mediaInfo.audioNone,e.player.vCodecID===A.V_CODEC_NAME_HEVC?(e.playParam.audioIdx<0&&(e.playParam.audioNone=!0),e.playParam.videoCodec=A.CODEC_H265,!0===g.IsSupport265Mse()&&e.mediaExtFormat===A.PLAYER_IN_TYPE_FLV?(e.player.release(),e.player=null,e._flvJsPlayer(e.playParam.durationMs,e.playParam.audioNone)):e.onLoadFinish&&e.onLoadFinish()):(e.playParam.videoCodec=A.CODEC_H264,e.player.release(),e.player=null,e._flvJsPlayer(e.playParam.durationMs,e.playParam.audioNone))},this.player.onError=t=>{e.onError&&e.onError(t)},this.player.onReadyShowDone=()=>{e.configFormat.extInfo.readyShow=!1,e.onReadyShowDone&&e.onReadyShowDone()},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(t,n,i,r,a)=>{e.snapshotYuvLastFrame.luma=null,e.snapshotYuvLastFrame.chromaB=null,e.snapshotYuvLastFrame.chromaR=null,e.snapshotYuvLastFrame.width=t,e.snapshotYuvLastFrame.height=n,e.snapshotYuvLastFrame.luma=new Uint8Array(i),e.snapshotYuvLastFrame.chromaB=new Uint8Array(r),e.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=e.onRender&&e.onRender(t,n,i,r,a)},this.player.start(this.videoURL)}_mpegTsEntry(){let e=this,t=new AbortController,n=t.signal;this.timerFeed=null,this.mpegTsObj=new y.MpegTs,this.mpegTsObj.bindReady(e),this.mpegTsObj.onDemuxed=this._mpegTsEntryReady.bind(this),this.mpegTsObj.onReady=()=>{let i=null;fetch(e.videoURL,{signal:n,headers:new Headers(this.configFormat.headers)}).then((function(r){if(r.headers.has("Content-Length")){e.onMakeItReady&&e.onMakeItReady();let t=function(n){return n.read().then((function(r){var a;if(!r.done)return r=r.value,null===i?i=r:(a=i.length+r.length,(a=new Uint8Array(a)).set(i),a.set(r,i.length),i=new Uint8Array(a),a=r=null),t(n);e.mpegTsObj.demux(i)}))};return t(r.body.getReader())}t.abort(),n=null,t=null,r={width:e.configFormat.playerW,height:e.configFormat.playerH,playerId:e.configFormat.playerId,token:e.configFormat.token,readyShow:e.configFormat.extInfo.readyShow,checkProbe:e.configFormat.extInfo.checkProbe,ignoreAudio:e.configFormat.extInfo.ignoreAudio,playMode:e.playMode,autoPlay:e.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat},e._cLiveFLVDecoderEntry(r)})).catch((function(e){e.toString().includes("user aborted")}))},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.initMPEG()}_mpegTsEntryReady(e){let t=e,n=t.mpegTsObj.getVCodec(),i=t.mpegTsObj.getACodec(),r=t.mpegTsObj.getDurationMs(),a=t.mpegTsObj.getFPS(),o=t.mpegTsObj.getSampleRate(),s=t.mpegTsObj.getSize();e=this.mpegTsObj.isHEVC(),this.configFormat.useSoftDecoding||w.isFF()&&(!w.isFF()||e)?(t.initDecoder(),setTimeout((()=>{var e={hevc:0,h264:1}[n];t._makeMP4PlayerViewEvent(r,a,o,s,""===i,e),t._avFeedMP4Data(0,0)}),1e3)):(this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null,this.playParam.durationMs=r,this.playParam.fps=a,this.playParam.sampleRate=o,this.playParam.size=s,this.playParam.audioNone=""===i,this.playParam.videoCodec=e?0:1,this._mpegTsNv3rdPlayer(this.playParam.durationMs,this.playParam.audioNone))}_m3u8Entry(e=!1){let t=this;if(!this.configFormat.useSoftDecoding||e)return this._HjsJsPlayer();let n,i=!1,r=0;this._g_init=window.performance.now(),this.hlsObj=new v.M3u8({headers:this.configFormat.headers},this.videoURL),this.hlsObj.bindReady(t),this.initDecoder(),this.isHjsJsPlayer=!1,this.hlsObj.onFinished=(e,a)=>{!1===i&&(window.performance.now(),t._g_init,r=t.hlsObj.getDurationMs(),n=r/1e3,t.hlsConf.hlsType=a.type,i=!0)},this.hlsObj.onCacheProcess=e=>{this.playMode!==A.PLAYER_MODE_NOTIME_LIVE&&this.onCacheProcess&&this.onCacheProcess(e)},this.hlsObj.onDemuxed=e=>{if(!this.player||!this.player.config.token){t.hlsObj.isHevcParam;var n=t.hlsObj.getVCodec();if(w.isFF()&&"h264"==n)this.hlsObj.release(),this._m3u8Entry(!0),this.configFormat.useSoftDecoding=!1;else{var i=t.hlsObj.getACodec(),a=t.hlsObj.getFPS(),o=t.hlsObj.getSampleRate(),s=t.hlsObj.getSize(),l=t.hlsObj.getSampleChannel();let e=!1;e=l<=0||""===i,window.performance.now(),t._g_init,l={hevc:0,h264:1}[n],t._makeMP4PlayerViewEvent(r,a,o,s,e,l),window.performance.now(),t._g_init}}},this.hlsObj.onSamples=this._hlsOnSamples.bind(this),this.hlsObj.onError=()=>{w.isFF()&&!this.isHjsJsPlayer&&(this.isHjsJsPlayer=!0,this.hlsObj.release(),this._m3u8Entry(!0),this.configFormat.useSoftDecoding=!1)},this.hlsObj.onWasmError=e=>{this.onError&&this.onError(e)},this.hlsObj.demux(this.videoURL),window.performance.now(),this._g_init}_hlsOnSamples(e,t){window.performance.now(),this._g_init,t.data=structuredClone(t.frameData),!0===t.video?this.player&&this.player.appendHevcFrame&&this.player.appendHevcFrame(t):!1===this.hlsObj.audioNone&&this.player&&this.player.appendAACFrame&&this.player.appendAACFrame(t)}_HjsJsPlayer(e=-1){let t=this;e={probeDurationMS:e,width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,playMode:this.playMode,danmaku:this.configFormat.danmaku,authToken:this.configFormat.authToken,openToken:this.configFormat.openToken,maxBufferLength:this.configFormat.maxBufferLength,headers:this.configFormat.headers,timeShift:this.configFormat.timeShift,startPosition:this.configFormat.startPosition,VRPlugin:this.configFormat.VRPlugin},this.player=new d.NvHLSjsCore(e,this.videoURL),this.player.onMakeItReady=()=>{t.onMakeItReady&&t.onMakeItReady()},this.player.onLoadFinish=()=>{t.playParam.size=t.player.getSize(),t.playParam.videoCodec=t.player.videoCodec,t.player.duration===1/0||t.player.duration<0?(t.playParam.durationMs=-1,t.playMode=A.PLAYER_MODE_NOTIME_LIVE):(t.playParam.durationMs=1e3*t.player.duration,t.playMode=A.PLAYER_MODE_VOD),t.onLoadFinish&&t.onLoadFinish()},this.player.onReadyShowDone=()=>{t.onReadyShowDone&&t.onReadyShowDone()},this.player.onPlayingFinish=()=>{t.pause(),t.seek(0),null!=t.onPlayFinish&&t.onPlayFinish()},this.player.onPlayingTime=(e,n,i)=>{t._durationText(e),t._durationText(t.player.duration),null!=t.onPlayTime&&t.onPlayTime(e,n,i)},this.player.onSeekFinish=e=>{t.onSeekFinish&&t.onSeekFinish(e)},this.player.onPlayState=e=>{t.onPlayState&&t.onPlayState(e)},this.player.onCacheProcess=e=>{t.onCacheProcess&&t.onCacheProcess(e)},this.player.onQualityLevels=e=>{t.onQualityLevels&&t.onQualityLevels(e)},this.player.onLevelUpdates=e=>{t.onLevelUpdates&&t.onLevelUpdates(e)},this.player.onError=e=>{var n=e.msg&&"bufferAddCodecError"===e.msg.details&&"video/mp4;codecs=hvc1.1.1.L120.B0"===e.msg.mimeType,i=e.isAppleMpegurl;this.configFormat.enableDecoderDegrade&&n?(this.player.release(),this.configFormat.useSoftDecoding=!0,this._m3u8Entry(!1)):i?this._makeNativePlayer():t.onError&&t.onError(e)},this.player.onLiveShift=e=>{t.onLiveShift&&t.onLiveShift(e)},this.player.makeIt(this.videoURL)}_flvJsPlayer(e=-1,t=!1){let n=this;e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,duration:e,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,audioNone:t,headers:this.configFormat.headers,VRPlugin:this.configFormat.VRPlugin},this.player=new f.NvFlvjsCore(e),this.player.onLoadFinish=()=>{n.playParam.size=n.player.getSize(),n.playParam.videoCodec=n.player.videoCodec,!n.player.duration||NaN===n.player.duration||n.player.duration===1/0||n.player.duration<0?(n.playParam.durationMs=-1,n.playMode=A.PLAYER_MODE_NOTIME_LIVE):(n.playParam.durationMs=1e3*n.player.duration,n.playMode=A.PLAYER_MODE_VOD),n.onLoadFinish&&n.onLoadFinish()},this.player.onReadyShowDone=()=>{n.onReadyShowDone&&n.onReadyShowDone()},this.player.onPlayingTime=(e,t)=>{n._durationText(e),n._durationText(n.player.duration),null!=n.onPlayTime&&n.onPlayTime(e,t)},this.player.onPlayingFinish=()=>{n.pause(),n.seek(0),null!=n.onPlayFinish&&n.onPlayFinish()},this.player.onPlayState=e=>{n.onPlayState&&n.onPlayState(e)},this.player.onCacheProcess=e=>{n.onCacheProcess&&n.onCacheProcess(e)},this.player.onError=e=>{var t=e.msg&&e.msg.code===a.MsgCode.PLAY_ERROR;n.configFormat.enableDecoderDegrade&&t?(n.player.release(),n._flvSoftPlayer()):n.onError&&n.onError(e)},this.player.onSeekFinish=e=>{n.onSeekFinish&&n.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_flvSoftPlayer(e=0,t=!1){t={audioNone:t,headers:this.configFormat.headers,onlyDemux:!0},this.initDecoder(),this.flvDemuxer=new f.NvFlvjsCore(t),this.flvDemuxer.makeIt(this.videoURL);let n=!1;this.flvDemuxer.onMediaInfo=e=>{var{duration:e,fps:t,audiosamplerate:i,width:r,height:a}=e,o=(0==e&&(this.playMode=A.PLAYER_MODE_NOTIME_LIVE),!i);this.flvDemuxer.seek(0),this._makeMP4PlayerViewEvent(1e3*e,t,i,{width:r,height:a},o,A.CODEC_H265,(()=>{n||(n=!0,this.flvDemuxer.onDemuxeData((e=>{e.isKey=e.isKeyframe,e.video=!0,e.data=structuredClone(e.videoData),this.player.appendHevcFrame(e)}),(e=>{e.isKey=!0,e.video=!1,this.player.appendAACFrame(e)})))}))}}_mpegTsNv3rdPlayer(e=-1,t=!1){let n=this;e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,duration:e,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,audioNone:t,headers:this.configFormat.headers,VRPlugin:this.configFormat.VRPlugin},this.player=new p.NvMpegTsCore(e),this.player.onLoadFinish=e=>{n.configFormat.useSoftDecoding=!1,n.playParam.size=n.player.getSize(),n.playParam.videoCodec=n.player.videoCodec,!n.player.duration||NaN===n.player.duration||n.player.duration===1/0||n.player.duration<0?(n.playParam.durationMs=-1,n.playMode=A.PLAYER_MODE_NOTIME_LIVE):(n.playParam.durationMs=1e3*n.player.duration,n.playMode=A.PLAYER_MODE_VOD),n.onLoadFinish&&n.onLoadFinish(e)},this.player.onReadyShowDone=()=>{n.onReadyShowDone&&n.onReadyShowDone()},this.player.onMakeItReady=()=>{null!=n.onMakeItReady&&n.onMakeItReady()},this.player.onPlayingTime=e=>{n._durationText(e),n._durationText(n.player.duration),null!=n.onPlayTime&&n.onPlayTime(e)},this.player.onPlayingFinish=()=>{n.pause(),n.seek(0),null!=n.onPlayFinish&&n.onPlayFinish()},this.player.onPlayState=e=>{n.onPlayState&&n.onPlayState(e)},this.player.onCacheProcess=e=>{n.onCacheProcess&&n.onCacheProcess(e)},this.player.onError=e=>{var t=e.msg&&e.msg.code===a.MsgCode.PLAY_ERROR;n.configFormat.enableDecoderDegrade&&t?(n.configFormat.extInfo.duration=null,n.player.release(),n._mpegTsEntry()):(n.player.release(),n.onPlayState&&n.onPlayState(!0),n.onError&&n.onError(e))},this.player.onSeekFinish=e=>{n.onSeekFinish&&n.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_dashJsPlayer(){var e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,headers:this.configFormat.headers,VRPlugin:this.configFormat.VRPlugin};this.player=new m.NvDashJsCore(e),this.player.onLoadFinish=e=>{this.configFormat.useSoftDecoding=!1,this.playParam.videoCodec=this.player.videoCodec,this.playParam.size=this.player.getSize(),!this.player.duration||NaN===this.player.duration||this.player.duration===1/0||this.player.duration<0?(this.playParam.durationMs=-1,this.playMode=A.PLAYER_MODE_NOTIME_LIVE):(this.playParam.durationMs=1e3*this.player.duration,this.playMode=A.PLAYER_MODE_VOD),this.onLoadFinish&&this.onLoadFinish(e)},this.player.onReadyShowDone=()=>{this.onReadyShowDone&&this.onReadyShowDone()},this.player.onMakeItReady=()=>{this.onMakeItReady&&this.onMakeItReady()},this.player.onPlayingTime=e=>{this.onPlayTime&&this.onPlayTime(e)},this.player.onPlayingFinish=()=>{this.pause(),this.seek(0),this.onPlayFinish&&this.onPlayFinish()},this.player.onPlayState=e=>{this.onPlayState&&this.onPlayState(e)},this.player.onCacheProcess=e=>{this.onCacheProcess&&this.onCacheProcess(e)},this.player.onQualityLevels=e=>{this.onQualityLevels&&this.onQualityLevels(e)},this.player.onLevelUpdates=e=>{this.onLevelUpdates&&this.onLevelUpdates(e)},this.player.onError=e=>{this.onPlayState&&this.onPlayState(!0),this.onError&&this.onError(e)},this.player.onSeekFinish=e=>{this.onSeekFinish&&this.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_raw265Entry(){let e=this,t=function(){setTimeout((()=>{e.workerParse.postMessage({cmd:"get-nalu",data:null,msg:"get-nalu"}),!0===e.workerFetch.onMsgFetchFinished&&!0===e.workerParse.frameListEmpty&&!1===e.workerParse.streamEmpty&&e.workerParse.postMessage({cmd:"last-nalu",data:null,msg:"last-nalu"}),!0===e.workerParse.parseEmpty&&(e.workerParse.stopNaluInterval=!0),!0!==e.workerParse.stopNaluInterval&&t()}),1e3)},n=function(){setTimeout((()=>{e.configFormat.extInfo.readyShow&&(e.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL?(e.player.playFrameYUV(!0,!0),e.configFormat.extInfo.readyShow=!1,e.onReadyShowDone&&e.onReadyShowDone()):n())}),1e3)};this._makeMP4PlayerViewEvent(-1,this.configFormat.extInfo.rawFps,-1,{width:this.configFormat.playerW,height:this.configFormat.playerH},!0,A.CODEC_H265),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null),e.workerFetch=new Worker(g.GetScriptPath((function(){let e=new AbortController,t=e.signal,n=null;onmessage=i=>{var r=i.data;let a=null;switch(a=void 0===r.cmd||null===r.cmd?"":r.cmd){case"start":var o=r.url;if("http"===r.type){var s=o;let e=!1;fetch(s,{signal:t}).then((function(t){let n=function(t){return t.read().then((function(i){if(!i.done)return i=i.value,postMessage({cmd:"fetch-chunk",data:i,msg:"fetch-chunk"}),n(t);e=!0,postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}))};return n(t.body.getReader())})).catch((function(e){}))}else"websocket"===r.type&&(s=o,(n=new WebSocket(s)).binaryType="arraybuffer",n.onopen=function(e){n.send("Hello WebSockets!")},n.onmessage=function(e){e.data instanceof ArrayBuffer&&0<(e=e.data).byteLength&&postMessage({cmd:"fetch-chunk",data:new Uint8Array(e),msg:"fetch-chunk"})},n.onclose=function(e){postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})});postMessage({cmd:"default",data:"WORKER STARTED",msg:"default"});break;case"stop":"http"===r.type?e.abort():"websocket"===r.type&&n&&n.close(),close()}}}))),e.workerFetch.onMsgFetchFinished=!1,e.workerFetch.onmessage=function(n){var i=n.data;let r=null;switch(r=void 0===i.cmd||null===i.cmd?"":i.cmd){case"fetch-chunk":var a=i.data;e.workerParse.postMessage({cmd:"append-chunk",data:a,msg:"append-chunk"});break;case"fetch-fin":e.workerFetch.onMsgFetchFinished=!0,t()}},e.workerParse=new Worker(g.GetScriptPath((function(){let e=function(){let e=new Object;return e.frameList=[],e.stream=null,e.frameListEmpty=function(){return e.frameList.length<=0},e.streamEmpty=function(){return null===e.stream||e.stream.length<=0},e.checkEmpty=function(){return!0===e.streamEmpty()&&!0===e.frameListEmpty()},e.pushFrameRet=function(t){return!(!t||null==t||(e.frameList&&null!=e.frameList&&null!=e.frameList||(e.frameList=[]),e.frameList.push(t),0))},e.nextFrame=function(){return!e.frameList&&null==e.frameList||null==e.frameList&&e.frameList.length<1?null:e.frameList.shift()},e.clearFrameRet=function(){e.frameList=null},e.setStreamRet=function(t){e.stream=t},e.getStreamRet=function(){return e.stream},e.appendStreamRet=function(t){if(!t||void 0===t||null==t)return!1;if(e.stream&&void 0!==e.stream&&null!=e.stream){var n=e.stream.length,i=t.length;(i=new Uint8Array(n+i)).set(e.stream,0),i.set(t,n),e.stream=i;for(let t=0;t<9999;t++){var r=e.nextNalu();if(!1===r||null==r)break;e.frameList.push(r)}}else e.stream=t;return!0},e.subBuf=function(t,n){return t=new Uint8Array(e.stream.subarray(t,n+1)),e.stream=new Uint8Array(e.stream.subarray(n+1)),t},e.lastNalu=function(){var t=e.subBuf(0,e.stream.length);e.frameList.push(t)},e.nextNalu=function(t=1){if(!(null==e.stream||e.stream.length<=4)){let i=-1;for(let r=0;r<e.stream.length;r++){if(r+5>=e.stream.length)return!1;if(0==e.stream[r]&&0==e.stream[r+1]&&1==e.stream[r+2]||0==e.stream[r]&&0==e.stream[r+1]&&0==e.stream[r+2]&&1==e.stream[r+3]){var n=r;if(r+=3,-1==i)i=n;else{if(t<=1)return e.subBuf(i,n-1);--t}}}}return!1},e.nextNalu2=function(t=1){if(!(null==e.stream||e.stream.length<=4)){let r=-1,a=null;for(let o=0;o<e.stream.length;o++){if(o+5>=e.stream.length)return-1!=r&&(a=e.subBuf(r,e.stream.length-1));var n="0 0 1"==e.stream.slice(o,o+3).join(" "),i="0 0 0 1"==e.stream.slice(o,o+4).join(" ");if(n||i)if(n=o,o+=3,-1==r)r=n;else{if(t<=1)return a=e.subBuf(r,n-1);--t}}}return!1},e}();onmessage=t=>{var n=t.data;let i=null;switch(i=void 0===n.cmd||null===n.cmd?"":n.cmd){case"append-chunk":var r=n.data;e.appendStreamRet(r),r=e.nextFrame(),postMessage({cmd:"return-nalu",data:r,msg:"return-nalu",parseEmpty:e.checkEmpty(),streamEmpty:e.streamEmpty(),frameListEmpty:e.frameListEmpty()});break;case"get-nalu":r=e.nextFrame(),postMessage({cmd:"return-nalu",data:r,msg:"return-nalu",parseEmpty:e.checkEmpty(),streamEmpty:e.streamEmpty(),frameListEmpty:e.frameListEmpty()});break;case"last-nalu":r=e.lastNalu(),postMessage({cmd:"return-nalu",data:r,msg:"return-nalu",parseEmpty:e.checkEmpty(),streamEmpty:e.streamEmpty(),frameListEmpty:e.frameListEmpty()});break;case"stop":postMessage("parse - WORKER STOPPED: "+n),close()}}}))),e.workerParse.stopNaluInterval=!1,e.workerParse.parseEmpty=!1,e.workerParse.streamEmpty=!1,e.workerParse.frameListEmpty=!1,e.workerParse.onmessage=t=>{var n,i,r;let a=null;"return-nalu"===(a=void 0===(t=t.data).cmd||null===t.cmd?"":t.cmd)&&(n=t.data,i=t.parseEmpty,r=t.streamEmpty,t=t.frameListEmpty,e.workerParse.parseEmpty=i,e.workerParse.streamEmpty=r,e.workerParse.frameListEmpty=t,!1===n||null==n?!0===e.workerFetch.onMsgFetchFinished&&!0===i&&(e.workerParse.stopNaluInterval=!0):(e.append265NaluFrame(n),e.workerParse.postMessage({cmd:"get-nalu",data:null,msg:"get-nalu"})))},this.workerFetch.postMessage({cmd:"start",url:g.ParseGetMediaURL(this.videoURL),type:this.mediaExtProtocol,msg:"start"}),n()}append265NaluFrame(e){e={data:e,pts:this.rawModePts},this.player.appendHevcFrame(e),this.configFormat.extInfo.readyShow&&this.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL&&(this.player.playFrameYUV(!0,!0),this.configFormat.extInfo.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone(),this.rawModePts+=1/this.configFormat.extInfo.rawFps}_rtcPlayer(){let e=this;this.player=new i.a(this.configFormat.RtcPlugin,this.configFormat),this.player.onMakeItReady=()=>{e.onMakeItReady&&e.onMakeItReady()},this.player.onLoadFinish=async()=>{e.playParam.size=await e.player.getSize(),e.playParam.durationMs=e.player.duration,e.playParam.videoCodec=1,e.onLoadFinish&&e.onLoadFinish(),e.onReadyShowDone&&e.onReadyShowDone()},this.player.onReadyShowDone=()=>{e.onReadyShowDone&&e.onReadyShowDone()},this.player.onPlayingFinish=()=>{null!=e.onPlayFinish&&e.onPlayFinish()},this.player.onRtcEvent=t=>{null!=e.onRtcEvent&&e.onRtcEvent(t)},this.player.onPlayState=t=>{e.onPlayState&&e.onPlayState(t)},this.player.onError=t=>{e.onPlayState&&e.onPlayState(!1),e.onError&&e.onError(t)},this.player.makeIt()}initDecoder(){let e=this;this.player=o.default.Player({FormatType:this.mediaExtFormat}),this.player.onPerformance=t=>{e.onPerformance&&e.onPerformance(t)},this.player.onCacheLimit=e=>{this.hlsObj&&this.hlsObj.limitDownloads(e),this.isCacheLimit=e},this.player.onPause=()=>{e.onPause()},this.player.onPlay=()=>{e.onPlay()},this.player.onWasmError=t=>{e.onError&&e.onError(t),e.player.release&&e.player.release()},this.player.onNewSeek=e=>{this.seek(e)},this.configFormat.useSoftDecoding=!0}loadJsWasm(e){T(e)}}t.default={cybercorejs:I},e.newcybercorejs=(e,t)=>new I(e,t)}.call(this,n(26))},function(e,t,n){n.r(t);var i=n(20),r=n(29),a=n(0),o=n(1),s=n.n(o);let l=n(12),u=n(49),c=n(36),h=n(37),d=n(38),f=n(5),p=n(30);t.default={Player:e=>{let t={config:{width:e&&e.width||f.DEFAULT_WIDTH,height:e&&e.height||f.DEFAULT_HEIGHT,fps:e&&e.fps||f.DEFAULT_FPS,fixed:e&&e.fixed||f.DEFAULT_FIXED,sampleRate:e&&e.sampleRate||f.DEFAULT_SAMPLERATE,appendHevcType:e&&e.appendHevcType||f.APPEND_TYPE_STREAM,frameDurMs:e&&e.frameDur||f.DEFAULT_FRAME_DUR,playerId:e&&e.playerId||f.DEFAILT_WEBGL_PLAY_ID,audioNone:e&&e.audioNone||!1,token:e&&e.token||null,videoCodec:e&&e.videoCodec||f.CODEC_H265},vcodecerPtr:null,videoCallback:null,frameList:[],cacheInterval:null,cacheYuvBuf:c(5),nowPacket:null,stream:new Uint8Array,vCodecID:f.V_CODEC_NAME_HEVC,audio:null,liveStartMs:-1,durationMs:-1,videoPTS:0,loop:null,debugYUVSwitch:!1,debugID:null,cacheLoop:null,playParams:{seekPos:-1,mode:f.PLAYER_MODE_VOD,accurateSeek:!0,seekEvent:!1,realPlay:!0},calcuteStartTime:-1,fix_poc_err_skip:0,frameTime:0,frameTimeSec:0,preCostTime:0,realVolume:1,isPlaying:!1,isCaching:f.CACHE_NO_LOADCACHE,isNewSeek:!1,flushDecoder:0,isCheckDisplay:!1,isPlayLoadingFinish:0,vCachePTS:0,aCachePTS:0,showScreen:!1,noCacheFrame:0,onPlayingTime:null,onPlayingFinish:null,onSeekFinish:null,onLoadCache:null,onLoadCacheFinshed:null,onRender:null,resampleFps:0,seekTime:null,isSeekBack:null,appendAudioStatus:0,appendVideoStatus:0,yuvVideoStatus:0,performance:{frameRate:30,buffer:0,broken:[],bitRate:0,seek:[],decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0,decodeTime:null},seekInitTime:0,oneScondTime:(new Date).getTime(),frameRate:0,startPlayTime:0,onPerformance:null,onCacheLimit:null,curDecoderTime:null,onInitDecodeComplete:null,seekFinishCallBack:!1,onWasmError:null,wasmLoadFinish:!1,wasmInitFinshedCallback:null,isAudioSeek:!1,formatType:e.FormatType,isWasmInitFinshed:!1,_inDecoding:!1,_isFirstDecoding:!0,_isPlay:!0,_isSeekKey:!1,_seekIdrArray:[],onNewSeek:null,decodeReleaseCallback:null,renderFrameTime:null,initPerformance:()=>{t.performance={frameRate:30,buffer:0,broken:[],bitRate:0,seek:[]}},setConfig:e=>{t.config=Object.assign(t.config,e),null==t.config.token||(t.config.token&&t.decoder&&t.wasmLoadFinish&&t.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:t.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:t.config.videoCodec}}),t.makeIt(),t.cacheThread())},setScreen:(e=!1)=>{null!=t&&(t.showScreen=e)},setSize:(e,n)=>{t.config.width=e||f.DEFAULT_WIDTH,t.config.height=n||f.DEFAULT_HEIGHT},setFrameRate:(e=25)=>{t.config.fps=e,t.config.frameDurMs=1e3/e},setDurationMs:(e=-1)=>{t.durationMs=e,0==t.config.audioNone&&t.audio.setDurationMs(e)},setPlayingCall:e=>{t.onPlayingTime=e},setVoice:e=>{t.realVolume=e,0==t.config.audioNone&&t.audio.setVoice(t.realVolume,t.videoPTS)},setPlaybackRate:(e=1)=>{t.config.audioNone&&(t.frameTime=1e3/t.config.fps/Number(e)),t.audio.setPlaybackRate(Number(e))},isPlayingState:()=>t.isPlaying||t.isCaching===f.CACHE_WITH_PLAY_SIGN,appendAACFrame:e=>{!0===t.isSeekBack&&(e.pts<t.seekTime&&0==t.appendAudioStatus&&(t.appendAudioStatus=-2),-2==t.appendAudioStatus)&&e.pts>t.seekTime&&(t.appendAudioStatus=-1),t.formatType!=f.PLAYER_IN_TYPE_FLV&&(!1===t.isSeekBack&&e.pts-t.seekTime<0||!0===t.isSeekBack&&-1!=t.appendVideoStatus)||(t.audio.addSample(e),t.aCachePTS=Math.max(e.pts,t.aCachePTS))},appendHevcFrame:e=>{var n;t.config.appendHevcType==f.APPEND_TYPE_STREAM?t.stream=new Uint8Array([...t.stream].concat(...e)):t.config.appendHevcType==f.APPEND_TYPE_FRAME&&(!0===t.isSeekBack&&(e.pts<t.seekTime&&0==t.appendVideoStatus&&(t.appendVideoStatus=-2),-2==t.appendVideoStatus)&&e.pts>t.seekTime&&(t.appendVideoStatus=-1),t.formatType!=f.PLAYER_IN_TYPE_FLV&&!1===t.isSeekBack&&t.seekTime&&e.isKey&&t._seekIdrArray.push(e.pts),t.formatType!=f.PLAYER_IN_TYPE_FLV&&(!1===t.isSeekBack&&e.pts-t.seekTime<0||!0===t.isSeekBack&&-1!=t.appendVideoStatus)||(t.seekTime&&e.isKey&&(t._isSeekKey=!0,t._seekIdrArray=[]),t.formatType!=f.PLAYER_IN_TYPE_FLV&&t.seekTime&&!t._isSeekKey?(n=t.durationMs/1e3,parseInt(e.pts)==parseInt(n)&&0<t._seekIdrArray.length&&(t.onNewSeek&&t.onNewSeek(t._seekIdrArray[t._seekIdrArray.length-1]),t._seekIdrArray=[])):(t.frameList.push(e),t._isFirstDecoding&&8<t.frameList.length&&t.checkToDecode(),t.vCachePTS=Math.max(e.pts,t.vCachePTS))))},checkToDecode:()=>{t._inDecoding||t.doDecode()},doDecode:()=>{if(t._isPlay&&(t.isWasmInitFinshed||t.formatType==f.PLAYER_IN_TYPE_FLV)){var e=t._getFramesToDecode();if(e&&e.length){for(let n=0;n<e.length;n++)t.decodeNalu1Frame(e[n].data,e[n].pts,!0,e[n].isKey);t._inDecoding=!0,t.decoder.postMessage({t:a.d.FINISH_FLAG})}}},_getFramesToDecode:()=>{if(t.frameList.length){let i=8;for(var e=[];0<i;){var n=t.frameList.shift();if(!n)break;e.push(n),i--}return e}},deletePassed:e=>{var n;t.seekTime||-1!=(n=t.frameList.findIndex((t=>t.pts<=e&&t.isKey)))&&(t.frameList=t.frameList.slice(n,t.frameList.length))},getCachePTS:()=>Math.max(t.vCachePTS,t.aCachePTS),endAudio:()=>{0==t.config.audioNone&&t.audio&&t.audio.stop()},cleanSample:()=>{0==t.config.audioNone&&t.audio&&t.audio.cleanQueue()},cleanVideoQueue:()=>{t.config.appendHevcType==f.APPEND_TYPE_STREAM?t.stream=new Uint8Array:t.config.appendHevcType==f.APPEND_TYPE_FRAME&&(t.frameList=[],t.frameList.length=0)},cleanCacheYUV:()=>{t.cacheYuvBuf.cleanPipeline()},pause:()=>{t.loop&&window.clearInterval(t.loop),cancelAnimationFrame(t.requestAnimationFrameId),t.loop=null,0==t.config.audioNone&&t.audio&&t.audio.pause(),t.isPlaying=!1,t.isCaching===f.CACHE_WITH_PLAY_SIGN&&(t.isCaching=f.CACHE_WITH_NOPLAY_SIGN)},checkFinished:(e=f.PLAYER_MODE_VOD)=>e==f.PLAYER_MODE_VOD&&t.cacheYuvBuf.yuvCache.length<=0&&Number(t.videoPTS.toFixed(1))>=Number(((t.durationMs-t.config.frameDurMs)/1e3).toFixed(1))&&(t.onPlayingTime&&t.onPlayingTime(Number(t.videoPTS.toFixed(1))),t.endAudio(),null!=t.onPlayingFinish&&t.onPlayingFinish((()=>{t.config&&t.config.repeat?t.onPlay():(t.onCacheLimit&&t.onCacheLimit(!0),t._isPlay=!1)})),!0),clearAllCache:()=>{t.nowPacket=null,t.vCachePTS=0,t.aCachePTS=0,t._inDecoding=!1,t._isFirstDecoding=!0,t.cleanSample(),t.cleanVideoQueue(),t.cleanCacheYUV()},releaseDecode:(e,n)=>{t.frameList=[],t.isAudioSeek=!1,null!=t.onLoadCache&&t.onLoadCache(),t.stopCacheThread(),t.clearAllCache(),t.isNewSeek=!0,t.flushDecoder=1,t.isSeekBack=t.videoPTS>n.seekTime,t.decoder.postMessage({t:a.d.RELEASE_DECODE,isSeek:!0}),t.decodeReleaseCallback=e},seek:(e,n={},i,r,o,s)=>{t.frameList=[],s?(t.decoder&&t.decoder.terminate(),t.makeWasm()):t.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:t.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:t.config.videoCodec}}),o&&o(!0),t.isAudioSeek=!1,t.seekInitTime=(new Date).getTime(),t.performance.seek.push({seekPts:n.seekTime,fromSeekPts:t.videoPTS,time:0}),s=t.isPlaying,t.pause(),t.stopCacheThread(),t.clearAllCache(),e&&e(),t.isNewSeek=!0,t.flushDecoder=1,t.isSeekBack=t.videoPTS>n.seekTime,t.videoPTS=0,o={seekPos:n.seekTime||-1,mode:n.mode||f.PLAYER_MODE_VOD,accurateSeek:n.accurateSeek||!0,seekEvent:n.seekEvent||!0,realPlay:s},t._isSeekKey=!1,t.seekTime=n.seekTime,r&&(t.wasmInitFinshedCallback=r),t.cacheThread(),t.play(o),i&&(t.seekFinishCallBack=i)},getNalu1Packet:(e=!0)=>{window.performance.now();let n=null,i=-1,r=!1;if(t.config.appendHevcType==f.APPEND_TYPE_STREAM)n=t.nextNalu();else{if(t.config.appendHevcType!=f.APPEND_TYPE_FRAME)return null;var a=t.frameList.shift();if(!a)return null;n=a.data,i=a.pts,r=a.isKey,e&&(t.videoPTS=i)}return window.performance.now(),{nalBuf:n,pts:i,isKey:r}},decodeNalu1Frame:(e,n,i=0,r)=>{var o={t:a.d.DECODE_VIDEO,nalBuf:e,pts:n,flushDecoder:t.flushDecoder};t.decoder.postMessage(o,[e.buffer]),t.curDecoderTime=n},cacheThread:()=>{t.stopCacheThread(),t.cacheLoop=window.setInterval((()=>{}),10)},stopCacheThread:()=>{null!==t.cacheLoop&&(window.clearInterval(t.cacheLoop),t.cacheLoop=null)},loadCache:()=>{if(!(0<((t.durationMs-t.config.frameDurMs)/1e3-t.videoPTS.toFixed(1)<1))){var e=t.isPlaying;t.cacheYuvBuf.yuvCache.length<=3&&(t.performance.broken.push({start:(new Date).getTime,end:null,time:null}),t.isCaching=e?f.CACHE_WITH_PLAY_SIGN:f.CACHE_WITH_NOPLAY_SIGN,e=t.frameDur,null===t.cacheInterval&&(t.cacheInterval=window.setInterval((()=>{var e,n;5<=t.cacheYuvBuf.yuvCache.length&&(null!=t.onLoadCacheFinshed&&t.onLoadCacheFinshed(),(e=t.performance.broken[t.performance.broken.length-1])&&e.start&&!e.end&&(n=(new Date).getTime(),e.end=n,e.time=n-e.start),window.clearInterval(t.cacheInterval),t.cacheInterval=null,t.isCaching===f.CACHE_WITH_PLAY_SIGN&&t.play(t.playParams),t.isCaching=f.CACHE_NO_LOADCACHE)}),e)))}},playFunc:()=>{let e=!0;if(t.calcuteStartTime=l.GetMsTime(),t.config.audioNone){let n=0;if(t.renderFrameTime&&(n=Date.now()-t.renderFrameTime),t.renderFrameTime&&t.config.audioNone&&3<=t.frameTime-n)return;t.renderFrameTime=Date.now(),t.playFrameYUV(e,t.playParams.accurateSeek),null!=t.onLoadCacheFinshed&&t.onLoadCacheFinshed()}else{0<t.fix_poc_err_skip&&(t.fix_poc_err_skip--,e=!1),t.audio.setVideoPTS(t.videoPTS);var n=t.videoPTS-t.audio.getAlignVPTS();if(0<n)return void(t.playParams.seekEvent&&!t.config.audioNone&&t.audio.setVoice(0));if(e){if(!(e=-1*n<=+t.frameTimeSec)){var i=parseInt(n/t.frameTimeSec);for(let e=0;e<i;e++)t.playFrameYUV(!1,t.playParams.accurateSeek);null!=t.onLoadCacheFinshed&&t.onLoadCacheFinshed(),t.playFrameYUV(!0,t.playParams.accurateSeek)}null!=t.onLoadCacheFinshed&&t.onLoadCacheFinshed(),t.playFrameYUV(e,t.playParams.accurateSeek)}}return t.playParams.seekEvent&&(t.playParams.seekEvent=!1,t.onSeekFinish(),t.isPlaying||(t.playFrameYUV(!0,t.playParams.accurateSeek),t.pause()),t.config.audioNone||t.audio.setVoice(t.realVolume)),t.checkToDecode(),t.onPlayingTime&&t.onPlayingTime(t.videoPTS),t.checkFinished(t.playParams.mode),!0},play:e=>{if(t.onCacheLimit&&t.onCacheLimit(!1),t._isPlay=!0,t.playParams=e,t.calcuteStartTime=l.GetMsTime(),t.noCacheFrame=0,t.isPlaying=t.playParams.realPlay,t.performance.code={0:"hevc",1:"avc",2:"av1",3:"vvc"}[t.config.videoCodec],t.performance.playStyle=t.formatType+"_"+t.playParams.mode,!0===t.config.audioNone&&t.playParams.mode==f.PLAYER_MODE_NOTIME_LIVE){t.liveStartMs=l.GetMsTime(),t.frameTime=Math.floor(1e3/t.config.fps),t.frameTimeSec=t.frameTime/1e3;let e=0;t.loop=window.setInterval((()=>{(l.GetMsTime()-t.liveStartMs)/t.frameTime>=e&&(t.playFrameYUV(!0,t.playParams.accurateSeek),e+=1)}),1)}else t.videoPTS>=t.playParams.seekPos&&!t.isNewSeek||0===t.playParams.seekPos||0===t.playParams.seekPos?(t.frameTime=1e3/t.config.fps,t.frameTimeSec=t.frameTime/1e3,t.isPlaying&&0==t.config.audioNone&&t.audio&&(t.audio.isDestroy=!1),t.isPlaying&&0==t.config.audioNone&&t.audio.play(!0),t.realVolume=t.config.audioNone?0:t.audio.voice,t.playParams.seekEvent&&(t.fix_poc_err_skip=10),cancelAnimationFrame(t.requestAnimationFrameId),t.displayLoop()):(t.loop=window.setInterval((()=>{t.playFrameYUV(!1,t.playParams.accurateSeek),t.checkFinished(t.playParams.mode)?(window.clearInterval(t.loop),t.loop=null):(t.checkToDecode(),t.videoPTS>t.playParams.seekPos&&(window.clearInterval(t.loop),t.loop=null,t.play(t.playParams),t.isSeekBack=null,t.seekTime=null,t.appendAudioStatus=0,t.appendVideoStatus=0,t.yuvVideoStatus=0,t.performance.seek[t.performance.seek.length-1].time=(new Date).getTime()-t.seekInitTime,t.seekFinishCallBack)&&t.seekFinishCallBack())}),10),t.isNewSeek=!1)},setIdrSeekTime:e=>{t.seekTime=e,t.playParams.seekPos=e},displayLoop:()=>{var e=l.GetMsTime();t.requestAnimationFrameId=requestAnimationFrame(t.displayLoop.bind(void 0)),t.playFunc(),t.preCostTime=l.GetMsTime()-e},stop:()=>{t.release(),t.stream=new Uint8Array},release:()=>new Promise((e=>{void 0!==t.yuv&&null!==t.yuv&&(d.releaseContext(t.yuv),t.yuv=null),t.frameList=[],t.decoder.postMessage({t:a.d.RELEASE_DECODE}),t.decodeReleaseCallback=e,t.endAudio(),t.cacheLoop&&window.clearInterval(t.cacheLoop),t.cacheLoop=null,t.loop&&window.clearInterval(t.loop),t.loop=null,t.pause(),null!==t.videoCallback&&Module.removeFunction(t.videoCallback),t.videoCallback=null,t.stream=null,t.clearAllCache(),t.frameList.length=0,t.durationMs=-1,t.videoPTS=0,t.isPlaying=!1,t.canvas&&t.canvas.remove(),t.canvas=null,t.decoder&&t.decoder.terminate(),window.onclick=document.body.onclick=null})),nextNalu:(e=1)=>{if(!(t.stream.length<=4)){let r=-1;for(let a=0;a<t.stream.length;a++){if(a+5>=t.stream.length)return-1!=r&&(n=t.stream.subarray(r),t.stream=new Uint8Array,n);var n="0 0 1"==t.stream.slice(0,3).join(" "),i="0 0 0 1"==t.stream.slice(0,4).join(" ");if(n||i){if(-1==r)r=a;else{if(e<=1)return i=t.stream.subarray(r,a),t.stream=t.stream.subarray(a),i;--e}a+=3}}}return!1},decodeSendPacket:e=>{var n=Module._malloc(e.length);return Module.HEAP8.set(e,n),e=Module.cwrap("decodeSendPacket","number",["number","number","number"])(t.vcodecerPtr,n,e.length),Module._free(n),e},decodeRecvFrame:()=>Module.cwrap("decodeRecv","number",["number"])(t.vcodecerPtr),playYUV:()=>t.playFrameYUV(!0,!0),playFrameYUV:(e=!1,n=!1)=>{var i=t.cacheYuvBuf.vYuv();if(null==i)return t.noCacheFrame+=1,e&&!t.playParams.seekEvent&&t.loadCache(),!1;80<t.cacheYuvBuf.yuvCache.length||100<t.frameList.length?t.onCacheLimit&&t.onCacheLimit(!0):t.onCacheLimit&&t.onCacheLimit(!1),t.noCacheFrame=0,t.cacheYuvBuf.deletePassed(t.audio&&t.audio.getAlignVPTS()),t.deletePassed(t.audio&&t.audio.getAlignVPTS());var r=i.pts;return t.videoPTS=r,(!e&&n||e)&&e&&(t.onRender(i.width,i.height,i.y,i.u,i.v),t.drawImage(i.width,i.height,i.y,i.u,i.v)),e&&!t.playParams.seekEvent&&t.isPlaying&&t.loadCache(),!0},drawImage:(e,n,i,r,a)=>{window.performance.now(),t.canvas.width===e&&t.canvas.height==n||(t.canvas.width=e,t.canvas.height=n),t.showScreen&&null!=t.onRender&&t.onRender(e,n,i,r,a),t.isCheckDisplay||t.checkDisplaySize(e,n),d.renderFrame(t.yuv,i,r,a,e,n),t.frameRate++,-1==t.performance.firstFrameTime&&(t.performance.firstFrameTime=(new Date).getTime()-t.startPlayTime),t.oneScondTime&&1e3<(new Date).getTime()-t.oneScondTime&&(i=JSON.parse(JSON.stringify(t.frameRate)),t.frameRate=0,t.oneScondTime=(new Date).getTime(),t.performance.frameRate=i,0<t.cacheYuvBuf.yuvCache.length&&(t.performance.buffer=t.cacheYuvBuf.yuvCache[t.cacheYuvBuf.yuvCache.length-1].pts-t.cacheYuvBuf.yuvCache[0].pts),t.onPerformance)&&t.onPerformance(t.performance)},debugYUV:e=>{t.debugYUVSwitch=!0,t.debugID=e},checkDisplaySize:(e,n)=>{var i=e/t.config.width>n/t.config.height,r=t.config.width/e,a=t.config.height/n;return i=i?r:a,a=(r=t.config.fixed)?t.config.width:parseInt(e*i),e=r?t.config.height:parseInt(n*i),t.canvas.offsetWidth==a&&t.canvas.offsetHeight==e||(r=parseInt((t.canvasBox.offsetHeight-e)/2),n=parseInt((t.canvasBox.offsetWidth-a)/2),t.canvas.style.marginTop=r+"px",t.canvas.style.marginLeft=n+"px",t.canvas.style.width=a+"px",t.canvas.style.height=e+"px"),t.isCheckDisplay=!0,[a,e]},makeWasm:()=>{t.isWasmInitFinshed=!1;var e=Object(i.getPlayerPath)();t.decoder=new r.a,t.decoder.postMessage({t:a.d.LOAD_WAMS_JS,pathUrl:e,isSafari:s.a.isSafari()}),t.decoder.onmessage=e=>{var n=e.data;switch(n.t){case a.c.WASM_LOAD_FINISH:t.startPlayTime=(new Date).getTime(),t.wasmLoadFinish=!0,t.config.token&&t.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:t.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:t.config.videoCodec}}),t.checkToDecode();break;case a.c.DECODE_FINISH:!0===t.isSeekBack&&-1!=t.yuvVideoStatus&&(!(n.ptsSec-t.seekTime<0||5<n.ptsSec-t.seekTime||-3==t.yuvVideoStatu)||(t.yuvVideoStatus=-3,n.ptsSec<t.seekTime&&0==t.yuvVideoStatus&&(t.yuvVideoStatus=-2),-2==t.yuvVideoStatus&&streamBytes.pts>t.seekTime))&&(t.yuvVideoStatus=-1),t.decodeFramecount--,t.performance.width||(t.performance.width=n.width,t.performance.height=n.height),t.seekTime&&!t.isAudioSeek&&(t.isAudioSeek=!0,t.audio)&&t.audio.seek&&t.audio.seek(n.ptsSec);var i=new h.CacheYuvStruct(n.ptsSec,n.width,n.height,n.y,n.u,n.v);t.cacheYuvBuf.appendCacheByCacheYuv(i),80<t.cacheYuvBuf.yuvCache.length||15<t.curDecoderTime-n.ptsSec||100<t.frameList.length?t.onCacheLimit&&t.onCacheLimit(!0):t.onCacheLimit&&t.onCacheLimit(!1);break;case a.c.DEOCDE_INIT_FINISH:t.isWasmInitFinshed=!0,t.onInitDecodeComplete&&t.onInitDecodeComplete(),t.wasmInitFinshedCallback&&t.wasmInitFinshedCallback();break;case a.c.SET_FRAME:t.performance.decodeFrameRate=n.frameRate,t.performance.decodeTime=n.decodeTime;break;case a.c.WAMS_ERROR:t.onWasmError&&t.onWasmError(n.data);break;case a.c.BATCH_FINISH_FLAG:t._inDecoding=!1;break;case a.c.RELEASE_DECODE_FINISH:t.decodeReleaseCallback&&t.decodeReleaseCallback(),t.onCacheLimit&&t.onCacheLimit(!0)}}},makeIt:()=>{var e=document.querySelector("div#"+t.config.playerId),n=document.createElement("canvas");n.style.width=e.clientWidth+"px",n.style.height=e.clientHeight+"px",n.style.top="0px",n.style.left="0px",e.appendChild(n),t.canvasBox=e,t.canvas=n,t.yuv=d.setupCanvas(n,{preserveDrawingBuffer:!1}),0==t.config.audioNone&&(t.audio=u({sampleRate:t.config.sampleRate,appendType:t.config.appendHevcType})),t.isPlayLoadingFinish=1},bindEvents:()=>{document.addEventListener("visibilitychange",t._onVisibilityChange.bind(void 0))},_onVisibilityChange:()=>{"visible"!==document.visibilityState||t.isPlayingState()?t.onPause():t.onPlay()}};return t.makeWasm(),t.bindEvents(),t}}},function(e,t,n){n.r(t),n.d(t,"Mp4Player",(function(){return s}));var i=n(4),r=n(68),a=n(24);let o=n(5);n(1);var s=class{constructor(e){this.configFormat={width:e.width||o.DEFAULT_WIDTH,height:e.height||o.DEFAULT_HEIGHT,fps:e.fps||o.DEFAULT_FPS,fixed:e.fixed||o.DEFAULT_FIXED,sampleRate:e.sampleRate||o.DEFAULT_SAMPLERATE,appendHevcType:e.appendHevcType||o.APPEND_TYPE_STREAM,frameDurMs:e.frameDur||o.DEFAULT_FRAME_DUR,playerId:e.playerId||o.DEFAILT_WEBGL_PLAY_ID,audioNone:e.audioNone||!1,token:e.token||null,videoCodec:e.videoCodec||o.CODEC_H265,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1},this.videoTag=null,this.isPlaying=!1,this.duration=-1,this.bufferInterval=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onPlayState=null,this.onCacheProcess=null,this.onSeekFinish=null,this.onSeiInfo=null,this.sei_maps=[],this.sei_count=0,this.seiTimer=null,this.onSeiTimer=null,this.onSeekStart=null,this.seekResult=null,this.onError=null,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}makeIt(e){let t=this;var n;this.videoTag=null,this.videoTag=document.createElement("video"),this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),this.videoTag.setAttribute("crossOrigin","anonymous"),this.videoTag.setAttribute("webkit-playsinline","true"),this.videoTag.setAttribute("playsinline","true"),!0===this.configFormat.autoPlay&&(this.play(),window.onclick=document.body.onclick=function(e){t.videoTag.muted=!1}),this.configFormat.audioNone&&(this.videoTag.setAttribute("muted","true"),this.videoTag.setAttribute("autoplay","autoplay")),Object(r.a)(this.videoTag),this.VRPlugin?(n=document.querySelector("#"+this.configFormat.playerId),this.VrPlayer=new a.a({video:this.videoTag,container:n,autoPlay:this.configFormat.autoPlay},this.VRPlugin)):this.insertVideo(),this.videoTag.onplay=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e),t.seiTimer&&(clearInterval(t.seiTimer),t.seiTimer=null),t.seiTimer=setInterval((()=>{t.onSeiTimer&&t.onSeiTimer(t.videoTag.currentTime)}),30)},this.videoTag.onpause=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e)},this.videoTag.ontimeupdate=()=>{t.onPlayingTime&&t.onPlayingTime(t.videoTag.currentTime)},this.videoTag.onended=()=>{t.sei_count=0,t.onPlayingFinish&&t.onPlayingFinish()},this.videoTag.onloadedmetadata=e=>{t.VrPlayer&&t.VrPlayer.loadVideo&&t.VrPlayer.loadVideo(),t.duration=t.videoTag.duration,t.insertVideo(),t.onLoadFinish&&t.onLoadFinish(),null!==t.bufferInterval&&(window.clearInterval(t.bufferInterval),t.bufferInterval=null),t.bufferInterval=window.setInterval((function(){var e,n;t.videoTag.buffered.length&&((e=t.videoTag.buffered.end(t.videoTag.buffered.length-1))>=t.duration-.04&&(t.onCacheProcess&&t.onCacheProcess(t.duration),window.clearInterval(t.bufferInterval)),t.seekReadyPts&&e>t.seekReadyPts&&(n=t.seek(t.seekReadyPts),t.seekResult=n,t.seekReadyPts=null),t.onCacheProcess)&&t.onCacheProcess(e)}),200)},this.videoTag.onerror=n=>{var r=n.target.error,a=-1<r.message.toLowerCase().indexOf(i.ErrorDetails.DEMUXER_ERROR),o=!a&&r&&r.code===i.MsgCode.DEOCDE_NOT_SUPPORT;t.onError&&t.onError({msg:o?i.ErrorDetails.NOT_SUPPORT_DETAIL:r,code:a?i.MsgCode.DEMUXER_ERROR:r&&r.code||i.MsgCode.UNKNOW_ERROR,event:n.type,url:e,errorType:o||a?i.ErrorTypes.NOT_SUPPORT:n.type})},this.videoTag.onseeking=()=>{this.onSeekStart&&this.onSeekStart()},this.videoTag.onseeked=()=>{t.onSeekFinish&&t.onSeekFinish(t.seekResult||!0)},this.videoTag.src=e,this.videoTag.style.width="100%",this.videoTag.style.height="100%",this.onMakeItReady&&this.onMakeItReady()}insertVideo(){var e,t=document.querySelector("#"+this.configFormat.playerId);t.getElementsByTagName("video")[0]||(e=t.getElementsByTagName("div"),t.insertBefore(this.videoTag,e[0]))}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.configFormat.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.configFormat.height}}play(){var e=this.videoTag.play();void 0!==e&&e.then((e=>{})).catch((e=>{}))}seek(e){try{this.videoTag.currentTime=e}catch(t){return this.videoTag.currentTime=0,this.seekReadyPts=e,this.seekResult=!1}}pause(){this.videoTag&&this.videoTag.pause&&this.videoTag.pause()}setVoice(e){this.videoTag.volume=e,this.videoTag.muted=0==e}isPlayingState(){return this.videoTag&&!this.videoTag.paused}release(){this.VrPlayer&&this.VrPlayer.destroy(),this.videoTag&&(["src","onplay","onpause","ontimeupdate","onended","onloadedmetadata","onerror","onseeking","onseeked"].forEach((e=>{this.videoTag[e]&&(this.videoTag[e]=null)})),this.videoTag.currentTime&&(this.videoTag.currentTime=0),this.pause());var e=document.querySelector("#"+this.configFormat.playerId);if(e)try{e.removeChild(this.videoTag)}catch(e){}this.videoTag&&this.videoTag.remove&&this.videoTag.remove(),this.videoTag=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onPlayState=null,this.sei_maps=[],this.sei_count=0,null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this.seiTimer&&(clearInterval(this.seiTimer),this.seiTimer=null),window.onclick=document.body.onclick=null}nativeNextFrame(){void 0!==this.videoTag&&null!==this.videoTag&&(this.videoTag.currentTime+=1/this.configFormat.fps)}}},function(e,t,n){n.r(t);var i=n(53),r=n(0),a=n(29),o=n(20),s=n(1),l=n.n(s);let u=n(39),c=n(31);n(36),n(37);let h=n(38),d=n(12);n(61);let f=n(49),p=n(5),m=n(30);class g{constructor(e,t,n,i,r,a,o,s,l){this.pts=l,this.data_y=e,this.data_u=t,this.data_v=n,this.line1=i,this.line2=r,this.line3=a,this.width=o,this.height=s,this.byteAlignIncr=this.line1-this.width}}t.default={CNativeCore:class{constructor(e){this.config={width:e.width||p.DEFAULT_WIDTH,height:e.height||p.DEFAULT_HEIGHT,fps:e.fps||p.DEFAULT_FPS,sampleRate:e.sampleRate||p.DEFAULT_SAMPLERATE,playerId:e.playerId||p.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,readyShow:e.readyShow||!1,checkProbe:e.checkProbe,ignoreAudio:e.ignoreAudio,playMode:e.playMode||p.PLAYER_MODE_VOD,autoPlay:e.autoPlay||!1,defaultFps:e.defaultFps||-1,cacheLength:e.cacheLength||50,videoCodec:e&&e.videoCodec||p.CODEC_H265},this.config.cacheLength=Math.max(this.config.cacheLength,5),this.probeSize=4524611,this.audioWAudio=null,this.audioVoice=1,this.frameCallTag=0,this.seekTarget=0,this.avSeekVState=!1,this.isNewSeek=!1,this.openFrameCall=!0,this.bufRecvStat=!1,this.bufObject=c(),this.bufLastVDTS=0,this.bufLastADTS=0,this.yuvMaxTime=0,this.loopMs=10,this.isCacheV=p.CACHE_NO_LOADCACHE,this.playVPipe=[],this._videoQueue=[],this._VIDEO_CACHE_LEN=this.config.cacheLength,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.duration=-1,this.channels=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.isCheckDisplay=!1,this.frameTime=1e3/this.config.fps,this.vCodecID=p.V_CODEC_NAME_UNKN,this.audioIdx=-1,this.audioNone=!1,this.frameDur=0,this.canvasBox=null,this.canvas=null,this.yuv=null,this.retryAuSampleNo=0,this.cacheStatus=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.reFull=!1,this.bufOK=!1,this.avRecvInterval=null,this.avFeedVideoInterval=null,this.avFeedAudioInterval=null,this.decVFrameInterval=null,this.playFrameInterval=null,this.onProbeFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.onRelease=null,this.playModeEnum=this.config.playMode===p.PLAYER_MODE_NOTIME_LIVE?1:0,this.decoder=null,this.demuxWorker=null,this.isWasmInit=!1,this.isDemuxWasmInit=!1,this.makeWasm(),this.onWasmFinished=null,this.naluLListLength=0,this.time=0,this.resampleFps=0,this.requestAnimationFrameId=null,this.calcuteStartTime=0,this.nowTimestamp=0,this.playFrameCostTime=0,this.performance={frameRate:30,buffer:0,broken:[],bitRate:0,seek:[],decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0,decodeTime:null},this.seekInitTime=0,this.oneScondTime=(new Date).getTime(),this.frameRate=0,this.startPlayTime=0,this.onPerformance=null,this.onWasmError=null}makeWasm(){var e=Object(o.getPlayerPath)();this.demuxWorker=new i.a,this.demuxWorker.postMessage({t:r.b.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.demuxWorker.onmessage=e=>{var t=e.data;switch(t.t){case r.a.WASM_LOAD_FINISH:-1==this.performance.firstFrameTime&&(this.startPlayTime=(new Date).getTime()),this.config.token&&this.demuxWorker.postMessage({t:r.b.INIT_DECODER,data:{token:this.config.token,playerVersion:m.PLAYER_VERSION,ignoreAudio:this.config.ignoreAudio,playModeEnum:this.playModeEnum,defaultFps:this.config.defaultFps}});break;case r.a.SNIFF_INIT_FINISH:this.isDemuxWasmInit=!0,this.isWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case r.a.POST_PROBEDATA:var{duration:n,width:i,height:a,fps:o,audioIdx:s,sample_rate:l,channels:u,vcodec_name_id:c,sample_fmt:h}=t;this._probeFinCallback(n,i,a,o,s,l,u,c,h);break;case r.a.POST_NALUDATA:var{d:n,len:i,isKey:a,pts:o,dts:s,isRawStream:l}=t;this._naluCallback(n,i,a,t.width,t.height,o,s,l);break;case r.a.POST_AACDATA:var{line1:u,channel:c}=t;this._aacFrameCallback(t.d,u,c,t.pts);break;case r.a.POST_FRAMEDATA:this._frameCallback(t.buf_y,t.buf_u,t.buf_v,t.line1,t.line2,t.line3,t.width,t.height,t.pts,t.tag);break;case r.a.POST_NALU_LENGTH:this.naluLListLength=t.l;break;case r.a.WAMS_ERROR:this.onWasmError&&this.onWasmError(t.data)}},this.decoder=new a.a,this.decoder.postMessage({t:r.d.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.decoder.onmessage=e=>{var t,n=e.data;switch(n.t){case r.c.WASM_LOAD_FINISH:this.config.token&&this.decoder.postMessage({t:r.d.INIT_DECODER,data:{token:this.config.token,playerVersion:m.PLAYER_VERSION,videoCodec:this.videoCodec}});break;case r.c.DECODE_FINISH:3<this.resampleFps?(this.resampleFps=0,t={t:r.d.RETURN_VIDEO_BUFFER,f:n},this.decoder.postMessage(t,[t.f.y.buffer,t.f.u.buffer,t.f.v.buffer])):(this.performance.width||(this.performance.width=n.width,this.performance.height=n.height),this.resampleFps++,this._frameCallback(n.y,n.u,n.v,n.stride_y,n.stride_u,n.stride_v,n.width,n.height,n.ptsSec,this.frameCallTag));break;case r.c.DEOCDE_INIT_FINISH:this.isWasmInit=!0,this.isDemuxWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case r.c.SET_FRAME:this.performance.decodeFrameRate=n.frameRate,this.performance.decodeTime=n.decodeTime}}}_createWorker1(){let e=this;this.worker1=new i.a("./dist/dc-worker-dist.js"),this.worker1ready=!1,this.worker1decing=!1,this.worker1.onmessage=function(t){var n=(t=t.data).cmd,i=t.params;switch(n){case"onRuntimeInitialized":e.worker1.postMessage({cmd:"AVSniffStreamInit",params:[e.config.token,m.PLAYER_VERSION]});break;case"onInitDecOK":e.worker1ready=!0;break;case"decodeVideoFrame_Start":e.worker1decing=!0;break;case"decodeVideoFrame_End":e.worker1decing=!1;break;case"_frameCallback":e._handleFrameYUVCallback(i.buf_y,i.buf_u,i.buf_v,i.line1,i.line2,i.line3,i.width,i.height,i.pts,i.tag);break;case"stop_End":e.worker1.onmessage=null,e.worker1=null}}}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return null!==this.playFrameInterval&&(window.clearInterval(this.playFrameInterval),this.playFrameInterval=null),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),this._clearDecInterval(),this._removeBindFuncPtr(),this.demuxWorker.postMessage({t:r.b.RELEASE_SNIFF}),this.demuxWorker&&this.demuxWorker.terminate(),this.decoder.postMessage({t:r.d.RELEASE_DECODE}),this.decoder&&this.decoder.terminate(),this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,this.bufRecvStat=!1,this.bufObject.cleanPipeline(),this.playVPipe.length=0,this.loopMs=10,void 0!==this.yuv&&null!==this.yuv&&(h.releaseContext(this.yuv),this.yuv=null),void 0!==this.canvas&&null!==this.canvas&&(this.canvas.remove(),this.canvas=null),this.config.readyShow=!0,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],this.onRelease&&this.onRelease(),-1}setScreen(e=!1){this.showScreen=e}getCachePTS(){return 1!==this.config.ignoreAudio&&this.audioWAudio?Math.max(this.vCachePTS,this.aCachePTS):this.vCachePTS}getMaxPTS(){return Math.max(this.vCachePTS,this.aCachePTS)}isPlayingState(){return this.isPlaying}_clearDecInterval(){this.decVFrameInterval&&window.clearInterval(this.decVFrameInterval),this.decVFrameInterval=null}_checkPlayFinished(){return!(this.config.playMode!==p.PLAYER_MODE_VOD||!(!0===this.bufRecvStat&&(this.playPTS>=this.bufLastVDTS||this.audioWAudio&&this.playPTS>=this.bufLastADTS)||this.duration-this.playPTS<this.frameDur)||(this.pause(),this._clearDecInterval(),this.onPlayingTime&&this.onPlayingTime(this.duration),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.onPlayingFinish&&this.onPlayingFinish(),this.setPerformanceBrokenEnd(),0))}play(){let e=this;if(this.performance.playStyle="flv_vod",this.performance.code="hevc",this.isCacheV===p.CACHE_WITH_NOPLAY_SIGN&&(this.isCacheV=p.CACHE_WITH_PLAY_SIGN),this.isPlaying=!0,!this.playFrameInterval||null===this.playFrameInterval||null==this.playFrameInterval){let t=0,n=0,i=0,r=+this.frameTime;this.config.playMode===p.PLAYER_MODE_NOTIME_LIVE?this.playFrameInterval=window.setInterval((()=>{var r;n=d.GetMsTime(),0<e._videoQueue.length&&n-t>=e.frameTime-i&&(r=e._videoQueue.shift(),h.renderFrame(e.yuv,r.data_y,r.data_u,r.data_v,r.line1,r.height),this.setPerformance(),(i=d.GetMsTime()-n)>=e.frameTime&&(i=e.frameTime),t=n)}),2):this.playFrameInterval=window.setInterval((()=>{if(n=d.GetMsTime(),0<this._videoQueue.length&&n-t>=this.frameTime-i){var e=this._videoQueue[0].pts;let o=0;if(this.isNewSeek||null===this.audioWAudio||void 0===this.audioWAudio||(o=1e3*(e-this.audioWAudio.getAlignVPTS()),this.playPTS=Math.max(this.audioWAudio.getAlignVPTS(),this.playPTS)),t=n,0<o)return;if(this.playPTS=Math.max(e,this.playPTS),this.isNewSeek&&this.seekTarget-this.frameDur>e)return i=this.frameTime,void this._videoQueue.shift();this.isNewSeek&&(this.audioWAudio&&this.audioWAudio.setVoice(this.audioVoice),this.audioWAudio&&this.audioWAudio.play(),i=0,this.isNewSeek=!1,this.seekTarget=0,this.performance.seek[this.performance.seek.length-1].time=(new Date).getTime()-this.seekInitTime);var a=this._videoQueue.shift();if(this.showScreen&&this.onRender&&this.onRender(a.line1,a.height,a.data_y,a.data_u,a.data_v),h.renderFrame(this.yuv,a.data_y,a.data_u,a.data_v,a.line1,a.height),this.setPerformance(),this.onPlayingTime&&this.onPlayingTime(e),!this.isNewSeek&&this.audioWAudio&&(o<0&&-1*o<=r||0<=o)){if(this.config.playMode===p.PLAYER_MODE_VOD)if(e>=this.duration)this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.onPlayingFinish&&this.onPlayingFinish(),this._clearDecInterval(),this.pause();else if(this._checkPlayFinished())return;i=d.GetMsTime()-n}else!this.isNewSeek&&this.audioWAudio&&(i=this.frameTime)}this._checkPlayFinished()}),30)}this.isNewSeek||this.audioWAudio&&this.audioWAudio.play()}displayLoop(e){this.playFunc(e),this.requestAnimationFrameId=requestAnimationFrame(this.displayLoop.bind(this))}playFunc(e){if(this.nowTimestamp=d.GetMsTime(),0<this._videoQueue.length&&this.nowTimestamp-this.calcuteStartTime>=this.frameTime-this.playFrameCostTime){var t=this._videoQueue[0].pts;let i=0;if(this.isNewSeek||null===this.audioWAudio||void 0===this.audioWAudio||(i=1e3*(t-this.audioWAudio.getAlignVPTS()),this.playPTS=Math.max(this.audioWAudio.getAlignVPTS(),this.playPTS)),this.calcuteStartTime=this.nowTimestamp,0<i)return;if(this.playPTS=Math.max(t,this.playPTS),this.isNewSeek&&this.seekTarget-this.frameDur>t)return this.playFrameCostTime=this.frameTime,void this._videoQueue.shift();this.isNewSeek&&(this.audioWAudio&&this.audioWAudio.setVoice(this.audioVoice),this.audioWAudio&&this.audioWAudio.play(),this.playFrameCostTime=0,this.isNewSeek=!1,this.seekTarget=0);var n=this._videoQueue.shift();if(this.showScreen&&this.onRender&&this.onRender(n.line1,n.height,n.data_y,n.data_u,n.data_v),h.renderFrame(this.yuv,n.data_y,n.data_u,n.data_v,n.line1,n.height),this.setPerformance(),this.onPlayingTime&&this.onPlayingTime(t),!this.isNewSeek&&this.audioWAudio&&(i<0&&-1*i<=e||0<=i)){if(this.config.playMode===p.PLAYER_MODE_VOD)if(t>=this.duration)this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.onPlayingFinish&&this.onPlayingFinish(),this.setPerformanceBrokenEnd(),this._clearDecInterval(),this.pause();else if(this._checkPlayFinished())return;this.playFrameCostTime=d.GetMsTime()-this.nowTimestamp}else!this.isNewSeek&&this.audioWAudio&&(i<0&&-1*i>e?this.playFrameCostTime=this.frameTime:this.layFrameCostTime=this.frameTime)}this._checkPlayFinished()}pause(){this.isPlaying=!1,this._pause(),this.isCacheV===p.CACHE_WITH_PLAY_SIGN&&(this.isCacheV=p.CACHE_WITH_NOPLAY_SIGN)}_pause(){this.playFrameInterval&&window.clearInterval(this.playFrameInterval),this.playFrameInterval=null,this.audioWAudio&&this.audioWAudio.pause()}seek(e,t={}){this.seekInitTime=(new Date).getTime(),this.performance.seek.push({seekPts:t.seekTime,fromSeekPts:this._videoQueue[0]&&this._videoQueue[0].pts||0,time:0}),this.openFrameCall=!1,this.pause(),this._clearDecInterval(),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),this.yuvMaxTime=0,this.playVPipe.length=0,this._videoQueue.length=0,this.audioWAudio&&this.audioWAudio.stop(),e&&e(),this.isNewSeek=!0,this.avSeekVState=!0,this.seekTarget=t.seekTime,null!==this.audioWAudio&&void 0!==this.audioWAudio&&(this.audioWAudio.setVoice(0),this.audioWAudio.resetStartParam(),this.audioWAudio.stop()),this._avFeedData(t.seekTime),setTimeout((()=>{this.yuvMaxTime=0,this._videoQueue.length=0,this.openFrameCall=!0,this.frameCallTag+=1,this._decVFrameIntervalFunc()}),1e3)}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}cacheIsFull(){return this._videoQueue.length>=this._VIDEO_CACHE_LEN}_checkDisplaySize(e,t,n){e=this.config.width+Math.ceil((t-e)/2);var i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2);return i=i?r:a,a=(r=this.config.fixed)?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i),this.canvas.offsetWidth==a&&this.canvas.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.canvas.style.marginTop=(t=t<0?0:t)+"px",this.canvas.style.marginLeft=r+"px",this.canvas.style.width=a+"px",this.canvas.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_createYUVCanvas(){this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.canvas=document.createElement("canvas"),this.canvas.style.width=this.canvasBox.clientWidth+"px",this.canvas.style.height=this.canvasBox.clientHeight+"px",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvasBox.appendChild(this.canvas),this.yuv=h.setupCanvas(this.canvas,{preserveDrawingBuffer:!1})}_avRecvPackets(){this.bufObject.cleanPipeline(),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),!0===this.config.checkProbe?this.avRecvInterval=window.setInterval((()=>{this.demuxWorker.postMessage({t:r.b.GET_SNIFF_PACKET,p:1}),this._avCheckRecvFinish()}),5):this.avRecvInterval=window.setInterval((()=>{this.demuxWorker.postMessage({t:r.b.GET_SNIFF_PACKET,p:0}),this._avCheckRecvFinish()}),5),this._avFeedData(0,!1)}_avCheckRecvFinish(){this.config.playMode===p.PLAYER_MODE_VOD&&this.duration-this.getMaxPTS()<this.frameDur&&this._avSetRecvFinished()}_avSetRecvFinished(){this.bufRecvStat=!0,null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),this.bufOK=!0}_afterAvFeedSeekToStartWithFinishedBuffer(e){let t=this,n=window.setInterval((()=>{t._videoQueue.length>=t._VIDEO_CACHE_LEN&&(t.onSeekFinish&&t.onSeekFinish(),t.onPlayingTime&&t.onPlayingTime(e),t.play(),window.clearInterval(n),n=null)}),10);return!0}_afterAvFeedSeekToStartWithUnFinBuffer(e){let t=this,n=window.setInterval((()=>{t._videoQueue.length>=t._VIDEO_CACHE_LEN&&(t.onSeekFinish&&t.onSeekFinish(),t.onPlayingTime&&t.onPlayingTime(e),!1===t.reFull?t.play():t.reFull=!1,window.clearInterval(n),n=null)}),10);return!0}_avFeedData(e){let t=this;if(this.playVPipe.length=0,this.audioWAudio&&this.audioWAudio.cleanQueue(),e<=0&&!1===this.bufOK){let n=0;if(t.avFeedVideoInterval=window.setInterval((()=>{var i=t.bufObject.videoBuffer.length;if(i-1>n||0<t.duration&&t.duration-t.getMaxPTS()<t.frameDur&&i-1==n){var r=t.bufObject.videoBuffer[n].length;if(0<r){for(let e=0;e<r;e++)t.playVPipe.push(u.ConstructWithDts(t.bufObject.videoBuffer[n][e].pts,t.bufObject.videoBuffer[n][e].dts,t.bufObject.videoBuffer[n][e].isKey,t.bufObject.videoBuffer[n][e].data,!0));n+=1}t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.bufLastVDTS&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null);t.avSeekVState&&t.config.playMode===p.PLAYER_MODE_VOD&&(t._afterAvFeedSeekToStartWithFinishedBuffer(e),t.avSeekVState=!1)}),5),void 0!==t.audioWAudio&&null!==t.audioWAudio&&t.config.ignoreAudio<1){let e=0;t.avFeedAudioInterval=window.setInterval((()=>{var n=t.bufObject.audioBuffer.length;if(n-1>e||t.duration-t.getMaxPTS()<t.frameDur&&n-1==e){var i=t.bufObject.audioBuffer[e].length;for(let n=0;n<i;n++)t.audioWAudio.addSample(new u.BufferFrame(t.bufObject.audioBuffer[e][n].pts,t.bufObject.audioBuffer[e][n].isKey,t.bufObject.audioBuffer[e][n].data,!1));e+=1,t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.bufLastADTS&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}),5)}}else{var n=this.bufObject.seekIDR(e);n=parseInt(n,10),this.playPTS=0;let i=n;if(this.avFeedVideoInterval=window.setInterval((()=>{var n=t.bufObject.videoBuffer.length;if(n-1>i||t.duration-t.getMaxPTS()<t.frameDur&&n-1==i){var r=t.bufObject.videoBuffer[i].length;if(0<r){for(let e=0;e<r;e++)t.playVPipe.push(u.ConstructWithDts(t.bufObject.videoBuffer[i][e].pts,t.bufObject.videoBuffer[i][e].dts,t.bufObject.videoBuffer[i][e].isKey,t.bufObject.videoBuffer[i][e].data,!0));i+=1}t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.bufLastVDTS&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null);t.avSeekVState&&t.config.playMode===p.PLAYER_MODE_VOD&&(t._afterAvFeedSeekToStartWithUnFinBuffer(e),t.avSeekVState=!1)}),5),this.audioWAudio&&this.config.ignoreAudio<1){let n=parseInt(e,10);this.avFeedAudioInterval=window.setInterval((()=>{var e=t.bufObject.audioBuffer.length;if(e-1>n||t.duration-t.getMaxPTS()<t.frameDur&&e-1==n){var i=t.bufObject.audioBuffer[n].length;for(let e=0;e<i;e++)t.bufObject.audioBuffer[n][e].pts<t.seekTarget||t.audioWAudio.addSample(new u.BufferFrame(t.bufObject.audioBuffer[n][e].pts,t.bufObject.audioBuffer[n][e].isKey,t.bufObject.audioBuffer[n][e].data,!1));n+=1,t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.bufLastADTS&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}),5)}}}_probeFinCallback(e,t,n,i,r,a,o,s,l){let u=this;this._createYUVCanvas(),this.config.fps=+i,this.frameTime=1e3/this.config.fps,this.width=t,this.height=n,this.frameDur=1/this.config.fps,this.duration=e-this.frameDur,this.vCodecID=s,this.config.sampleRate=a,this.channels=o,this.audioIdx=r,this.duration<0&&(this.config.playMode=p.PLAYER_MODE_NOTIME_LIVE),0<=r&&this.config.ignoreAudio<1?this.audioNone=!1:this.audioNone=!0,p.V_CODEC_NAME_HEVC!==this.vCodecID&&p.V_CODEC_NAME_AV1!==this.vCodecID||(!1===this.audioNone&&(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=f({sampleRate:a,appendType:p.APPEND_TYPE_FRAME}),this.audioWAudio.setDurationMs(1e3*e),this.onLoadCache)&&this.audioWAudio.setOnLoadCache((()=>{if(u.retryAuSampleNo<=5){u.pause(),u.onLoadCache&&u.onLoadCache(),u.setPerformanceBrokenStart();let e=window.setInterval((()=>{2<u.audioWAudio.sampleQueue.length?(u.onLoadCacheFinshed&&u.onLoadCacheFinshed(),u.setPerformanceBrokenEnd(),u.play(),u.retryAuSampleNo=0,window.clearInterval(e),e=null):(u.retryAuSampleNo+=1,5<u.retryAuSampleNo&&(u.play(),u.onLoadCacheFinshed&&u.onLoadCacheFinshed(),u.setPerformanceBrokenEnd(),window.clearInterval(e),e=null))}),1e3)}})),this._avRecvPackets(),this._decVFrameIntervalFunc()),this.onProbeFinish&&this.onProbeFinish()}_ptsFixed2(e){return Math.ceil(100*e)/100}_naluCallback(e,t,n,i,r,a,o,s){let l=this._ptsFixed2(a);0<s&&(l=a),this.bufObject.appendFrameWithDts(l,o,e,!0,n),this.bufLastVDTS=Math.max(o,this.bufLastVDTS),this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}_samplesCallback(e,t,n,i){}_aacFrameCallback(e,t,n,i){i=this._ptsFixed2(i),this.audioWAudio&&(this.bufObject.appendFrame(i,e,!1,!0),this.bufLastADTS=Math.max(i,this.bufLastADTS),this.aCachePTS=Math.max(i,this.aCachePTS),this.onCacheProcess)&&this.onCacheProcess(this.getCachePTS())}_setLoadCache(){var e;return null===this.avFeedVideoInterval&&null===this.avFeedAudioInterval&&this.playVPipe.length<=0?1:(e=this.isPlaying,this.pause(),this.onLoadCache&&this.onLoadCache(),this.isCacheV=e?p.CACHE_WITH_PLAY_SIGN:p.CACHE_WITH_NOPLAY_SIGN,0)}_setLoadCacheFinished(){this.isCacheV!==p.CACHE_NO_LOADCACHE&&(this.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.isCacheV=p.CACHE_NO_LOADCACHE)}_createDecVframeInterval(e=10){let t=this;null!==this.decVFrameInterval&&(window.clearInterval(this.decVFrameInterval),this.decVFrameInterval=null),this.naluLListLength=0,this.loopMs=e,this.decVFrameInterval=window.setInterval((()=>{var e,n;t._videoQueue.length<1?t._setLoadCache():t._videoQueue.length>=t._VIDEO_CACHE_LEN&&t._setLoadCacheFinished(),t._videoQueue.length<t._VIDEO_CACHE_LEN&&this.naluLListLength<=t._VIDEO_CACHE_LEN&&0<t.playVPipe.length&&(100===t.loopMs&&t._createDecVframeInterval(10),n=(e=t.playVPipe.shift()).data,t.yuvMaxTime=Math.max(e.pts,t.yuvMaxTime),n={t:r.d.DECODE_VIDEO,nalBuf:n,pts:e.pts,flushDecoder:0},this.decoder.postMessage(n))}),e)}_decVFrameIntervalFunc(){null==this.decVFrameInterval&&this._createDecVframeInterval(10)}_frameCallback(e,t,n,i,r,a,o,s,l,u){if(this.canvas){if(!1===this.openFrameCall)return-1;if(u!==this.frameCallTag)return-2;if(l>this.yuvMaxTime+this.frameDur)return-3;if(this.isNewSeek&&this.seekTarget-l>3*this.frameDur)return-4;var c=this._videoQueue.length;if(this.canvas.width==i&&this.canvas.height==s||(this.canvas.width=i,this.canvas.height=s,this.isCheckDisplay)||this._checkDisplaySize(o,i,s),this.playPTS>l)return-5;var h=new g(e,t,n,i,r,a,o,s,l);if(c<=0||l>this._videoQueue[c-1].pts)this._videoQueue.push(h);else if(l<this._videoQueue[0].pts)this._videoQueue.splice(0,0,h);else if(l<this._videoQueue[c-1].pts)for(let e=0;e<c;e++)if(l>this._videoQueue[e].pts&&e+1<c&&l<this._videoQueue[e+1].pts){this._videoQueue.splice(e+1,0,h);break}return this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS()),this.config.readyShow&&!0===this.playYUV()&&(this.config.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone(),0}}_handleFrameYUVCallback(e,t,n,i,r,a,o,s,l,u){if(e=new Uint8Array(e),t=new Uint8Array(t),n=new Uint8Array(n),!(!1===this.openFrameCall||u!==this.frameCallTag||l>this.yuvMaxTime+this.frameDur||this.isNewSeek&&this.seekTarget-l>3*this.frameDur)){var c=this._videoQueue.length;if(this.canvas.width==i&&this.canvas.height==s||(this.canvas.width=i,this.canvas.height=s,this.isCheckDisplay)||this._checkDisplaySize(o,i,s),!(this.playPTS>l)){var h=new g(e,t,n,i,r,a,o,s,l);if(c<=0||l>this._videoQueue[c-1].pts)this._videoQueue.push(h);else if(l<this._videoQueue[0].pts)this._videoQueue.splice(0,0,h);else if(l<this._videoQueue[c-1].pts)for(let e=0;e<c;e++)if(l>this._videoQueue[e].pts&&e+1<c&&l<this._videoQueue[e+1].pts){this._videoQueue.splice(e+1,0,h);break}this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS()),this.config.readyShow&&!0===this.playYUV()&&(this.config.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone()}}}playYUV(){var e;return 0<this._videoQueue.length&&(e=this._videoQueue.shift(),this.onRender&&this.onRender(e.line1,e.height,e.data_y,e.data_u,e.data_v),h.renderFrame(this.yuv,e.data_y,e.data_u,e.data_v,e.line1,e.height),!0)}setProbeSize(e){this.probeSize=e}setPerformance(){var e;this.frameRate++,-1==this.performance.firstFrameTime&&(this.performance.firstFrameTime=(new Date).getTime()-this.startPlayTime),this.oneScondTime&&1e3<(new Date).getTime()-this.oneScondTime&&(e=JSON.parse(JSON.stringify(this.frameRate)),this.frameRate=0,this.oneScondTime=(new Date).getTime(),this.performance.frameRate=e,0<this._videoQueue.length&&(this.performance.buffer=this._videoQueue[this._videoQueue.length-1].pts-this._videoQueue[0].pts),this.onPerformance)&&this.onPerformance(this.performance)}setPerformanceBrokenStart(){this.performance.broken.push({start:(new Date).getTime(),end:null,time:null})}setPerformanceBrokenEnd(){var e,t=this.performance.broken[this.performance.broken.length-1];t&&null==t.end&&(e=(new Date).getTime(),t.end=e,t.time=e-t.start)}pushBuffer(e){return this.demuxWorker.postMessage({t:r.b.PUSH_SNIFF_DATA,d:e,probeSize:this.probeSize},[e]),0}}}},function(e,t,n){n.r(t);var i=n(118),r=n.n(i),a=n(53),o=n(0),s=n(29),l=n(20),u=(i=n(1),n.n(i));n(39),n(31),n(36),n(37);let c=n(38),h=n(12);n(61);let d=n(49),f=n(5),p=n(30);t.default={CHttpLiveCore:class{constructor(e){let t=this;this.config={width:e.width||f.DEFAULT_WIDTH,height:e.height||f.DEFAULT_HEIGHT,fps:e.fps||f.DEFAULT_FPS,sampleRate:e.sampleRate||f.DEFAULT_SAMPLERATE,playerId:e.playerId||f.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},this.mediaInfo={noFPS:!1,fps:f.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=f.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.AVDecodeInterval=null,this.decVFrameInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.isCacheV=f.CACHE_NO_LOADCACHE,this.muted=this.config.autoPlay,!0===this.config.autoPlay&&this.config.ignoreAudio<1&&(window.onclick=document.body.onclick=function(e){t.muted=!1,t._reinitAudioModule(t.mediaInfo.sampleRate),!0===t.isPlayingState()&&(t.pause(),t.play()),window.onclick=document.body.onclick=null}),this.frameTimeSec=1/this.config.fps,this.frameTime=1e3*this.frameTimeSec,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.onPlayState=null,this.decoder=null,this.demuxWorker=null,this.isWasmInit=!1,this.isDemuxWasmInit=!1,this._emitter=new r.a,this.makeWasm(),this.onWasmFinished=null,this.naluLListLength=0,this.time=0,this.resampleFps=0,this.requestAnimationFrameId=null,this.calcuteStartTime=0,this.nowTimestamp=0,this.playFrameCostTime=0,this.performance={frameRate:30,buffer:0,broken:[],bitRate:0,decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0},this.oneScondTime=(new Date).getTime(),this.frameRate=0,this.startPlayTime=0,this.onPerformance=null}makeWasm(){var e=Object(l.getPlayerPath)();this.demuxWorker=new a.a,this.demuxWorker.postMessage({t:o.b.LOAD_WAMS_JS,pathUrl:e,isSafari:u.a.isSafari()}),this.demuxWorker.onmessage=e=>{var t=e.data;switch(t.t){case o.a.WASM_LOAD_FINISH:-1==this.performance.firstFrameTime&&(this.startPlayTime=(new Date).getTime()),this.config.token&&this.demuxWorker.postMessage({t:o.b.INIT_DECODER,data:{token:this.config.token,playerVersion:p.PLAYER_VERSION,ignoreAudio:this.config.ignoreAudio,playModeEnum:this.playModeEnum,defaultFps:this.config.defaultFps,mode:1}});break;case o.a.SNIFF_INIT_FINISH:this.isDemuxWasmInit=!0,this._emitter.emit("isDemuxWasmInit",!0),this.isWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case o.a.POST_PROBEDATA:var{duration:n,width:i,height:r,fps:a,audioIdx:s,sample_rate:l,channels:u,vcodec_name_id:c,sample_fmt:h,trans_to_gcore:d}=t;this._callbackProbe(n,i,r,a,s,l,u,c,h,d);break;case o.a.POST_NALUDATA:var{d:n,len:i,isKey:r,pts:a,dts:s,isRawStream:l}=t;this._callbackNALU(n,i,r,t.width,t.height,a,s,l);break;case o.a.POST_AACDATA:var{line1:u,channel:c}=t;this._callbackAAC(t.d,u,c,t.pts);break;case o.a.POST_FRAMEDATA:this._frameCallback(t.buf_y,t.buf_u,t.buf_v,t.line1,t.line2,t.line3,t.width,t.height,t.pts,t.tag);break;case o.a.POST_NALU_LENGTH:this.naluLListLength=t.l}},this.decoder=new s.a,this.decoder.postMessage({t:o.d.LOAD_WAMS_JS,pathUrl:e,isSafari:u.a.isSafari()}),this.decoder.onmessage=e=>{var t,n=e.data;switch(n.t){case o.c.WASM_LOAD_FINISH:this.config.token&&this.decoder.postMessage({t:o.d.INIT_DECODER,data:{token:this.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:this.videoCodec}});break;case o.c.DECODE_FINISH:3<this.resampleFps?(this.resampleFps=0,t={t:o.d.RETURN_VIDEO_BUFFER,f:n},this.decoder.postMessage(t,[t.f.y.buffer,t.f.u.buffer,t.f.v.buffer])):(this.resampleFps++,this.performance.width||(this.performance.width=n.width,this.performance.height=n.height),this._callbackYUV(n.y,n.u,n.v,n.stride_y,n.stride_u,n.stride_v,n.width,n.height,n.ptsSec,this.frameCallTag));break;case o.c.DEOCDE_INIT_FINISH:this.isWasmInit=!0,this.isDemuxWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case o.c.SET_FRAME:this.performance.decodeFrameRate=n.frameRate}}}_workerFetch_onmessage(e,t){var n=e.data;let i=null;switch(i=void 0===n.cmd||null===n.cmd?"":n.cmd){case"startok":t.getPackageTimeMS=h.GetMsTime(),void 0!==t.AVGetInterval&&null!==t.AVGetInterval||(t.AVGetInterval=window.setInterval((function(){t.demuxWorker.postMessage({t:o.b.GET_BUFFER_LENGTH}),t.naluLListLength>t.config.probeSize?(t.demuxWorker.postMessage({t:o.b.GET_SNIFF_FLV_PACKE}),--t.pushPkg):0<t.getPackageTimeMS&&h.GetMsTime()-t.getPackageTimeMS>=f.FETCH_HTTP_FLV_TIMEOUT_MS&&(t.getPackageTimeMS=h.GetMsTime(),t.workerFetch.postMessage({cmd:"retry",data:null,msg:"retry"}))}),5));break;case"fetch-chunk":let e=n.data;t.download_length+=e.length,setTimeout((function(){t.demuxWorker.postMessage({t:o.b.PUSH_SNIFF_FLV_PACKET,d:e,probeSize:t.config.probeSize},[e.buffer])}),0),t.totalLen+=e.length,0<e.length&&(t.getPackageTimeMS=h.GetMsTime()),t.pushPkg++;break;case"close":t.AVGetInterval&&clearInterval(t.AVGetInterval),t.AVGetInterval=null;break;case"fetch-fin":break;case"fetch-error":t.onError&&t.onError(n.data)}}_checkDisplaySize(e,t,n){e=this.config.width+Math.ceil((t-e)/2);var i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2);return i=i?r:a,a=(r=this.config.fixed)?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i),this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_reinitAudioModule(e=44100){0<this.config.ignoreAudio||(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=d({sampleRate:e,appendType:f.APPEND_TYPE_FRAME}),this.audioWAudio.isLIVE=!0)}_callbackProbe(e,t,n,i,r,a,o,s,l,u=0){if(1===u)this.onProbeFinish&&this.onProbeFinish(u);else{let e=i;100<i&&(e=f.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=s,this.config.fps=e,this.mediaInfo.fps=e,this.mediaInfo.size.width=t,this.mediaInfo.size.height=n,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+5)),this.chaseFrame=0,this.CanvasObj.width==t&&this.CanvasObj.height==n||(this.CanvasObj.width=t,this.CanvasObj.height=n,this.isCheckDisplay)||this._checkDisplaySize(t,t,n),0<=r&&!1===this.mediaInfo.noFPS?(this.config.sampleRate=a,this.mediaInfo.sampleRate=a,this.config.ignoreAudio<1&&!1===this.muted&&this._reinitAudioModule(this.mediaInfo.sampleRate)):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}}_callbackYUV(e,t,n,i,r,a,o,s,l,u){this.YuvBuf.push({bufY:e,bufU:t,bufV:n,line_y:i,h:s,pts:l}),this.checkCacheState(),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||!0!==this.config.autoPlay||(this.play(),setTimeout((function(){}),3e3)))}_callbackNALU(e,t,n,i,r,a,o){if(!1===this.readyKeyFrame){if(n<=0)return;this.readyKeyFrame=!0}this.NaluBuf.push({bufData:e,len:t,isKey:n,w:i,h:r,pts:1e3*a,dts:1e3*o})}_callbackPCM(e){this.config.ignoreAudio}_callbackAAC(e,t,n,i){0<this.config.ignoreAudio||(i=this._ptsFixed2(i),this.audioWAudio&&!1===this.muted&&(this.audioWAudio.addSample({pts:i,data:e}),this.checkCacheState()))}_decode(e=0){let t=this;setTimeout((()=>{var e,n;null!==t.workerFetch&&(null!=(e=t.NaluBuf.shift())&&(n=e.bufData,n={t:o.d.DECODE_VIDEO,nalBuf:n,pts:e.pts,flushDecoder:0},this.decoder.postMessage(n)),t._decode())}),1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.muted||0<this.config.ignoreAudio||!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.cache_status=!0),e}setVoice(e){this.config.ignoreAudio<1&&(this.audioWAudio||(this.muted=!1,this._reinitAudioModule(this.mediaInfo.sampleRate)),this.audioVoice=e,this.audioWAudio)&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(c.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.config.ignoreAudio<1&&this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.chaseFrame=0,this.onPlayState&&this.onPlayState(this.isPlayingState())}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),c.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){this.performance.playStyle="flv_live",this.performance.code="hevc";let e=this;if(this.chaseFrame=0,!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout((()=>{this.play()}),100),!1;let t=+e.frameTime;if(void 0===this.playInterval||null===this.playInterval){let n=0,i=0,r=0;if(this.config.ignoreAudio<1&&!1===this.mediaInfo.audioNone&&null!=this.audioWAudio&&!1===this.mediaInfo.noFPS)this.playInterval=setInterval((function(){var a,o;i=h.GetMsTime(),e.cache_status?i-n>=e.frameTime-r&&(0<e.YuvBuf[0].pts-1e3*e.audioWAudio.getAlignVPTS()||(null!=(a=e.YuvBuf.shift())&&null!==a&&(o=0,r=null===e.audioWAudio||void 0===e.audioWAudio||(o=1e3*(a.pts-e.audioWAudio.getAlignVPTS()))<0&&-1*o<=t||0<o&&o<=t||0==o||0<o&&o>t?h.GetMsTime()-i+1:e.frameTime,e.showScreen&&e.onRender&&e.onRender(a.line_y,a.h,a.bufY,a.bufU,a.bufV),c.renderFrame(e.AVGLObj,a.bufY,a.bufU,a.bufV,a.line_y,a.h),e.setPerformance()),(e.YuvBuf.length<=0||e.audioWAudio&&e.audioWAudio.sampleQueue.length<=0)&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.audioWAudio&&e.audioWAudio.pause(),e.setPerformanceBrokenStart()),n=i)):r=e.frameTime}),30),this.audioWAudio&&this.audioWAudio.play();else{let t=-1;this.playInterval=setInterval((function(){if(i=h.GetMsTime(),e.cache_status){let o=-1;var a;0<t&&(o=i-n,e.frameTime,e.chaseFrame<=0)&&0<r&&(e.chaseFrame=Math.floor(r/e.frameTime)),!(t<=0||o>=e.frameTime||0<e.chaseFrame)||h.GetMsTime()&&h.GetMsTime()<e.YuvBuf[0].pts||(t=1,null!=(a=e.YuvBuf.shift())&&null!==a&&(e.showScreen&&e.onRender&&e.onRender(a.line_y,a.h,a.bufY,a.bufU,a.bufV),c.renderFrame(e.AVGLObj,a.bufY,a.bufU,a.bufV,a.line_y,a.h),e.setPerformance(),r=h.GetMsTime()-i+1),e.YuvBuf.length<=0&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.setPerformanceBrokenStart()),n=i,0<e.chaseFrame&&(e.chaseFrame--,0===e.chaseFrame)&&(r=e.frameTime))}else r=e.frameTime,t=-1,e.chaseFrame=0,n=0,i=0,r=0}),30)}}this.onPlayState&&this.onPlayState(this.isPlayingState())}isLoad(e){this.isDemuxWasmInit?e():this._emitter.addListener("isDemuxWasmInit",(()=>{e()}))}start(e){let t=this;this.isLoad((()=>{this.workerFetch=new Worker(h.GetScriptPath((function(){let e=null,t=new AbortController,n=t.signal;self;let i=e=>{let t=!1;fetch(e,{signal:n}).then((function(e){let n=function(e){return e.read().then((function(i){if(!i.done)return i=i.value,self.postMessage({cmd:"fetch-chunk",data:i,msg:"fetch-chunk"}),n(e);t=!0,self.postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}))};return n(e.body.getReader())})).catch((function(e){e.toString().includes("user aborted")||(e=" httplive request error:"+e+" start to retry",self.postMessage({cmd:"fetch-error",data:e,msg:"fetch-error"}))}))};self.onmessage=r=>{var a=r.data;let o=null;switch(o=void 0===a.cmd||null===a.cmd?"":a.cmd){case"start":e=a.data,i(e),self.postMessage({cmd:"startok",data:"WORKER STARTED",msg:"startok"});break;case"stop":t.abort(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"});break;case"retry":t.abort(),t=null,n=null,t=new AbortController,n=t.signal,setTimeout((function(){i(e)}),3e3)}}}))),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this.AVGLObj=c.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),this._decode()}))}setPerformance(){var e;this.frameRate++,-1==this.performance.firstFrameTime&&(this.performance.firstFrameTime=(new Date).getTime()-this.startPlayTime),this.oneScondTime&&1e3<(new Date).getTime()-this.oneScondTime&&(e=JSON.parse(JSON.stringify(this.frameRate)),this.frameRate=0,this.oneScondTime=(new Date).getTime(),this.performance.frameRate=e,0<this.YuvBuf.length&&(this.performance.buffer=(this.YuvBuf[this.YuvBuf.length-1].pts-this.YuvBuf[0].pts)/100),this.onPerformance)&&this.onPerformance(this.performance)}setPerformanceBrokenStart(){this.performance.broken.push({start:(new Date).getTime(),end:null,time:null})}setPerformanceBrokenEnd(){var e,t=this.performance.broken[this.performance.broken.length-1];t&&null==t.end&&(e=(new Date).getTime(),t.end=e,t.time=e-t.start)}}}},function(e,t,n){n(39),n(31),n(36),n(37);let i=n(38),r=n(12);n(61),n(49);let a=n(164),o=n(5);n(30),t.CHttpG711Core=class{constructor(e){let t=this;this.config={width:e.width||o.DEFAULT_WIDTH,height:e.height||o.DEFAULT_HEIGHT,fps:e.fps||o.DEFAULT_FPS,sampleRate:e.sampleRate||o.DEFAULT_SAMPLERATE,playerId:e.playerId||o.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},this.config.probeSize,this.config.ignoreAudio,this.mediaInfo={noFPS:!1,fps:o.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=o.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.muted=this.config.autoPlay,!0===this.config.autoPlay&&this.config.ignoreAudio<1&&(window.onclick=document.body.onclick=function(e){t.muted=!1,t._reinitAudioModule(t.mediaInfo.sampleRate),!0===t.isPlayingState()&&(t.pause(),t.play()),window.onclick=document.body.onclick=null}),this.frameTime=1e3/this.config.fps,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.onPlayState=null,this.corePtr=Module.cwrap("AVSniffHttpG711Init","number",["string","string"])(this.config.token,"0.0.0")}_workerFetch_onmessage(e,t){var n=e.data;let i=null;switch(i=void 0===n.cmd||null===n.cmd?"":n.cmd){case"startok":t.getPackageTimeMS=r.GetMsTime(),void 0!==t.AVGetInterval&&null!==t.AVGetInterval||(t.AVGetInterval=window.setInterval((function(){Module.cwrap("getG711BufferLengthApi","number",["number"])(t.corePtr)<=t.config.probeSize&&0<t.getPackageTimeMS&&r.GetMsTime()-t.getPackageTimeMS>=o.FETCH_HTTP_FLV_TIMEOUT_MS&&(t.getPackageTimeMS=r.GetMsTime(),t.workerFetch.postMessage({cmd:"retry",data:null,msg:"retry"}))}),5));break;case"fetch-chunk":let e=n.data,i=void(t.download_length+=e.length);setTimeout((function(){var n=Module._malloc(e.length);Module.HEAP8.set(e,n),i=Module.cwrap("pushSniffG711FlvData","number",["number","number","number","number"])(t.corePtr,n,e.length,t.config.probeSize),Module._free(n)}),0),t.totalLen+=e.length,0<e.length&&(t.getPackageTimeMS=r.GetMsTime()),t.pushPkg++;break;case"close":t.AVGetInterval&&clearInterval(t.AVGetInterval),t.AVGetInterval=null;case"fetch-fin":break;case"fetch-error":t.onError&&t.onError(n.data)}}_checkDisplaySize(e,t,n){e=this.config.width+Math.ceil((t-e)/2);var i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2);return i=i?r:a,a=(r=this.config.fixed)?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i),this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_reinitAudioModule(e=0){void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=a()}_callbackProbe(e,t,n,i,r,a,s,l,u){var c=Module.HEAPU8.subarray(u,u+10);let h="";for(let e=0;e<c.length;e++)h+=String.fromCharCode(c[e]);let d=i;100<i&&(d=o.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=l,this.config.fps=d,this.mediaInfo.fps=d,this.mediaInfo.size.width=t,this.mediaInfo.size.height=n,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+2)),this.CanvasObj.width==t&&this.CanvasObj.height==n||(this.CanvasObj.width=t,this.CanvasObj.height=n,this.isCheckDisplay)||this._checkDisplaySize(t,t,n),0<=r&&!1===this.mediaInfo.noFPS?(this.config.sampleRate=a,this.mediaInfo.sampleRate=a,!1===this.muted&&this._reinitAudioModule(this.mediaInfo.sampleRate)):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}_callbackYUV(e,t,n,i,r,a,o,s,l,u){e=Module.HEAPU8.subarray(e,e+i*s);var c=new Uint8Array(e);t=Module.HEAPU8.subarray(t,t+r*s/2),r=new Uint8Array(t),n=Module.HEAPU8.subarray(n,n+a*s/2),a=new Uint8Array(n),this.YuvBuf.push({bufY:c,bufU:r,bufV:a,line_y:i,h:s,pts:l}),this.checkCacheState(),Module._free(e),Module._free(t),Module._free(n),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||!0!==this.config.autoPlay||(this.play(),setTimeout((function(){}),3e3)))}_callbackNALU(e,t,n,i,r,a,o){if(!1===this.readyKeyFrame){if(n<=0)return;this.readyKeyFrame=!0}e=Module.HEAPU8.subarray(e,e+t);var s=new Uint8Array(e);this.NaluBuf.push({bufData:s,len:t,isKey:n,w:i,h:r,pts:1e3*a,dts:1e3*o}),Module._free(e)}_callbackPCM(e,t,n,i){e=Module.HEAPU8.subarray(e,e+t),t=new Uint8Array(e).buffer;let r=null;n={pts:e=this._ptsFixed2(n),data:r=0!=(n=t.byteLength%4)?((e=new Uint8Array(t.byteLength+n)).set(new Uint8Array(t),0),new Float32Array(e.buffer)):new Float32Array(t)},this.audioWAudio.addSample(n),this.checkCacheState()}_decode(){let e=this;setTimeout((()=>{null!==e.workerFetch&&(Module.cwrap("decodeG711Frame","number",["number"])(e.corePtr),e._decode())}),1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.cache_status=!0),e}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),void 0!==this.corePtr&&null!==this.corePtr&&Module.cwrap("releaseG711","number",["number"])(this.corePtr),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(i.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.onPlayState&&this.onPlayState(this.isPlayingState())}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),i.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){let e=this;if(!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout((()=>{e.play()}),100),!1;let t=+e.frameTime;if(void 0===this.playInterval||null===this.playInterval){let n,a=0,o=0;!1===this.mediaInfo.audioNone&&this.audioWAudio&&!1===this.mediaInfo.noFPS?(this.playInterval=setInterval((function(){var s,l;n=r.GetMsTime(),e.cache_status?n-a>=e.frameTime-o&&(null!=(s=e.YuvBuf.shift())&&null!==s&&(l=0,o=null===e.audioWAudio||void 0===e.audioWAudio||(l=1e3*(s.pts-e.audioWAudio.getAlignVPTS()))<0&&-1*l<=t||0<l&&l<=t||0==l||0<l&&l>t?r.GetMsTime()-n+1:e.frameTime,e.showScreen&&e.onRender&&e.onRender(s.line_y,s.h,s.bufY,s.bufU,s.bufV),i.renderFrame(e.AVGLObj,s.bufY,s.bufU,s.bufV,s.line_y,s.h)),e.YuvBuf.length<=0&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.audioWAudio)&&e.audioWAudio.pause(),a=n):o=e.frameTime}),1),this.audioWAudio&&this.audioWAudio.play()):this.playInterval=setInterval((function(){var t=e.YuvBuf.shift();null!=t&&null!==t&&(e.showScreen&&e.onRender&&e.onRender(t.line_y,t.h,t.bufY,t.bufU,t.bufV),i.renderFrame(e.AVGLObj,t.bufY,t.bufU,t.bufV,t.line_y,t.h)),e.YuvBuf.length<=0&&(e.cache_status=!1)}),e.frameTime)}this.onPlayState&&this.onPlayState(this.isPlayingState())}start(e){let t=this;this.workerFetch=new Worker(r.GetScriptPath((function(){let e=null,t=new AbortController,n=t.signal;self;let i=e=>{let t=!1;fetch(e,{signal:n}).then((function(e){let n=function(e){return e.read().then((function(i){if(!i.done)return i=i.value,self.postMessage({cmd:"fetch-chunk",data:i,msg:"fetch-chunk"}),n(e);t=!0,self.postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}))};return n(e.body.getReader())})).catch((function(e){e.toString().includes("user aborted")||(e=" httplive request error:"+e+" start to retry",self.postMessage({cmd:"fetch-error",data:e,msg:"fetch-error"}))}))};self.onmessage=r=>{var a=r.data;let o=null;switch(o=void 0===a.cmd||null===a.cmd?"":a.cmd){case"start":e=a.data,i(e),self.postMessage({cmd:"startok",data:"WORKER STARTED",msg:"startok"});break;case"stop":t.abort(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"});break;case"retry":t.abort(),t=null,n=null,t=new AbortController,n=t.signal,setTimeout((function(){i(e)}),3e3)}}}))),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this._ptr_probeCallback=Module.addFunction(this._callbackProbe.bind(this),"vdiidiiiiii"),this._ptr_yuvCallback=Module.addFunction(this._callbackYUV.bind(this),"vi"),this._ptr_sampleCallback=Module.addFunction(this._callbackPCM.bind(this),"vi"),Module.cwrap("initializeSniffG711Module","number",["number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_yuvCallback,this._ptr_sampleCallback,0,1),this.AVGLObj=i.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),0===o.H265WEBJS_COMPILE_MULTI_THREAD_SHAREDBUFFER&&this._decode()}}},function(e,t,n){let i=window.AudioContext||window.webkitAudioContext,r=n(5),a=n(12);e.exports=()=>{let e={options:{sampleRate:r.DEFAULT_SAMPLERATE,appendType:r.APPEND_TYPE_FRAME,playMode:r.AUDIO_MODE_SWAP},sourceChannel:-1,audioCtx:new i({latencyHint:"interactive",sampleRate:r.DEFAULT_SAMPLERATE}),gainNode:null,sourceList:[],startStatus:!1,sampleQueue:[],nextBuffer:null,playTimestamp:0,playStartTime:0,durationMs:-1,isLIVE:!1,voice:1,onLoadCache:null,resetStartParam:()=>{e.playTimestamp=0,e.playStartTime=0},setOnLoadCache:t=>{e.onLoadCache=t},setDurationMs:(t=-1)=>{e.durationMs=t},setVoice:(t=1)=>{e.voice=t,e.gainNode.gain.value=t},getAlignVPTS:()=>e.playTimestamp+(a.GetMsTime()-e.playStartTime)/1e3,swapSource:(t=-1,n=-1)=>{if(0==e.startStatus)return null;if(t<0||t>=e.sourceList.length)return null;if(n<0||n>=e.sourceList.length)return null;try{e.sourceChannel===t&&null!==e.sourceList[t]&&(e.sourceList[t].disconnect(e.gainNode),e.sourceList[t]=null)}catch(t){}e.sourceChannel=n,-2==(n=e.decodeSample(n,t))&&e.isLIVE&&(e.getAlignVPTS()>=e.durationMs/1e3-.04?e.pause():null!==e.onLoadCache&&e.onLoadCache())},addSample:(t=null)=>!(null==t||!t||null==t||(0==e.sampleQueue.length&&(e.seekPos=t.pts),e.sampleQueue.push(t),0)),runNextBuffer:()=>{window.setInterval((()=>{if(!(null!=e.nextBuffer||e.sampleQueue.length<r.DEFAULT_CONSU_SAMPLE_LEN)){var t;e.nextBuffer={data:null,pts:-1};for(let n=0;n<r.DEFAULT_CONSU_SAMPLE_LEN;n++){t=e.sampleQueue.shift();let n=null;if(n=e.options.appendType==r.APPEND_TYPE_STREAM?t:t.data,e.nextBuffer.pts<0&&(e.nextBuffer.pts=t.pts),null==e.nextBuffer.data?e.nextBuffer.data=new Float32Array(n):((t=new Float32Array(n.length+e.nextBuffer.data.length)).set(e.nextBuffer.data,0),t.set(n,e.nextBuffer.data.length),e.nextBuffer.data=t),e.sampleQueue.length<=0)break}e.nextBuffer.data.length}}),10)},decodeSample:(t=-1,n=-1)=>{if(t<0||t>=e.sourceList.length)return-1;if(null!=e.sourceList[t]&&null!=e.sourceList[t]&&e.sourceList[t]||(e.sourceList[t]=e.audioCtx.createBufferSource(),e.sourceList[t].onended=function(){e.swapSource(t,n)}),0==e.sampleQueue.length)return e.isLIVE?(e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].onended=function(){e.swapSource(t,n)},e.sourceList[t].stop(),0):-2;if(e.sourceList[t].buffer)e.swapSource(t,n);else{if(null==e.nextBuffer||e.nextBuffer.data.length<1)return e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].startState=!0,e.sourceList[t].stop(),1;var i=e.nextBuffer.data;e.playTimestamp=e.nextBuffer.pts,e.playStartTime=a.GetMsTime();try{var r=e.audioCtx.createBuffer(1,i.length,e.options.sampleRate);r.copyToChannel(i,0),null!==e.sourceList[t]&&(e.sourceList[t].buffer=r,e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].startState=!0)}catch(t){return e.nextBuffer=null,-3}e.nextBuffer=null}return 0},decodeWholeSamples:(t=-1)=>{if((e.sourceChannel=t)<0||t>=e.sourceList.length)return-1;if(null!=e.sourceList[t]&&null!=e.sourceList[t]&&e.sourceList[t]||(e.sourceList[t]=e.audioCtx.createBufferSource(),e.sourceList[t].onended=function(){}),0==e.sampleQueue.length)return-2;let n=null;var i;for(let t=0;t<e.sampleQueue.length;t++){i=e.sampleQueue.shift();let t=null;if(t=e.options.appendType==r.APPEND_TYPE_STREAM?i:i.data,n=null==n?new Uint8Array(t):((i=new Uint8Array(t.length+n.length)).set(n,0),i.set(t,n.length),i),e.sampleQueue.length<=0)break}var a=n;if(null==a||a.length<1)return e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].stop(),1;a=a.buffer;try{var o=e.audioCtx.createBuffer(1,a.byteLength,e.options.sampleRate);o.copyToChannel(a,0),e.sourceList[t].buffer=o,e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].startState=!0}catch(t){return-3}return 0},play:()=>{if(0==e.startStatus){e.startStatus=!0;let t=0;-2==(t=e.options.playMode==r.AUDIO_MODE_ONCE?e.decodeWholeSamples(0):e.swapSource(0,1))&&e.pause()}},pause:()=>{e.startStatus=!1;for(let t=0;t<e.sourceList.length;t++)if(void 0!==e.sourceList[t]&&null!==e.sourceList[t])try{void 0!==e.sourceList[t].buffer&&null!==e.sourceList[t].buffer&&(e.sourceList[t].stop(),e.sourceList[t].disconnect(e.gainNode)),e.sourceList[t]=null}catch(e){}},stop:()=>{e.pause(),e.cleanQueue(),e.nextBuffer=null,e.sourceChannel=-1},cleanQueue:()=>{for(let t=e.sampleQueue.length=0;t<e.sourceList.length;t++)try{void 0!==e.sourceList[t].buffer&&null!==e.sourceList[t].buffer&&(e.sourceList[t].stop(),e.sourceList[t].disconnect(e.gainNode)),e.sourceList[t]=null}catch(e){}}};return e.sourceList.push(e.audioCtx.createBufferSource()),e.sourceList.push(e.audioCtx.createBufferSource()),e.sourceList[0].onended=function(){e.swapSource(0,1)},e.sourceList[1].onended=function(){e.swapSource(1,0)},e.gainNode=e.audioCtx.createGain(),e.gainNode.gain.value=e.voice,e.gainNode.connect(e.audioCtx.destination),e.runNextBuffer(),e}},function(e,t,n){n(39),n(31),n(36),n(37);let i=n(38),r=n(12);n(61);let a=n(49),o=n(5);n(30),t.CWsLiveCore=class{constructor(e){this.config={width:e.width||o.DEFAULT_WIDTH,height:e.height||o.DEFAULT_HEIGHT,fps:e.fps||o.DEFAULT_FPS,sampleRate:e.sampleRate||o.DEFAULT_SAMPLERATE,playerId:e.playerId||o.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},this.config.probeSize,this.config.ignoreAudio,this.mediaInfo={noFPS:!1,fps:o.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=o.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.frameTime=1e3/this.config.fps,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.corePtr=Module.cwrap("AVSniffHttpFlvInit","number",["string","string"])("base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1","0.0.0")}_workerFetch_onmessage(e,t){var n=e.data;let i=null;switch(i=void 0===n.cmd||null===n.cmd?"":n.cmd){case"fetch-chunk":let e=n.data,i=void(t.download_length+=e.length);setTimeout((function(){var n=Module._malloc(e.length);Module.HEAP8.set(e,n),i=Module.cwrap("pushSniffHttpFlvData","number",["number","number","number","number"])(t.corePtr,n,e.length,t.config.probeSize),Module._free(n)}),0),t.totalLen+=e.length,0<e.length&&(t.getPackageTimeMS=r.GetMsTime()),t.pushPkg++,void 0!==t.AVGetInterval&&null!==t.AVGetInterval||(t.AVGetInterval=window.setInterval((function(){Module.cwrap("getBufferLengthApi","number",["number"])(t.corePtr)>t.config.probeSize&&(Module.cwrap("getSniffHttpFlvPkg","number",["number"])(t.corePtr),--t.pushPkg)}),5));break;case"close":t.AVGetInterval&&clearInterval(t.AVGetInterval),t.AVGetInterval=null;case"fetch-fin":break;case"fetch-error":t.onError&&t.onError(n.data)}}_checkDisplaySize(e,t,n){e=this.config.width+Math.ceil((t-e)/2);var i=t/this.config.width>n/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/n).toFixed(2);return i=i?r:a,a=(r=this.config.fixed)?e:parseInt(t*i),e=r?this.config.height:parseInt(n*i),this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_callbackProbe(e,t,n,i,r,s,l,u,c){var h=Module.HEAPU8.subarray(c,c+10);let d="";for(let e=0;e<h.length;e++)d+=String.fromCharCode(h[e]);let f=i;100<i&&(f=o.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=u,this.config.fps=f,this.mediaInfo.fps=f,this.mediaInfo.size.width=t,this.mediaInfo.size.height=n,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+2)),this.CanvasObj.width==t&&this.CanvasObj.height==n||(this.CanvasObj.width=t,this.CanvasObj.height=n,this.isCheckDisplay)||this._checkDisplaySize(t,t,n),0<=r&&!1===this.mediaInfo.noFPS&&this.config.ignoreAudio<1?(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.config.sampleRate=s,this.mediaInfo.sampleRate=s,this.audioWAudio=a({sampleRate:this.mediaInfo.sampleRate,appendType:o.APPEND_TYPE_FRAME}),this.audioWAudio.isLIVE=!0):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}_callbackYUV(e,t,n,i,r,a,o,s,l){e=Module.HEAPU8.subarray(e,e+i*s);var u=new Uint8Array(e);t=Module.HEAPU8.subarray(t,t+r*s/2),r=new Uint8Array(t),n=Module.HEAPU8.subarray(n,n+a*s/2),a=new Uint8Array(n),this.YuvBuf.push({bufY:u,bufU:r,bufV:a,line_y:i,h:s,pts:l}),this.checkCacheState(),Module._free(e),Module._free(t),Module._free(n),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||this.play())}_callbackNALU(e,t,n,i,r,a,o){if(!1===this.readyKeyFrame){if(n<=0)return;this.readyKeyFrame=!0}e=Module.HEAPU8.subarray(e,e+t);var s=new Uint8Array(e);this.NaluBuf.push({bufData:s,len:t,isKey:n,w:i,h:r,pts:1e3*a,dts:1e3*o}),Module._free(e)}_callbackPCM(e){}_callbackAAC(e,t,n,i){i=this._ptsFixed2(i),this.audioWAudio&&(e=Module.HEAPU8.subarray(e,e+t),t=new Uint8Array(e),this.audioWAudio.addSample({pts:i,data:t}),this.checkCacheState())}_decode(){let e=this;setTimeout((()=>{var t,n;null!==e.workerFetch&&(null!=(t=e.NaluBuf.shift())&&(n=Module._malloc(t.bufData.length),Module.HEAP8.set(t.bufData,n),Module.cwrap("decodeHttpFlvVideoFrame","number",["number","number","number","number","number"])(e.corePtr,n,t.bufData.length,t.pts,t.dts,0),Module._free(n),n=null),e._decode())}),1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.cache_status=!0),e}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),void 0!==this.corePtr&&null!==this.corePtr&&Module.cwrap("releaseHttpFLV","number",["number"])(this.corePtr),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(i.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),i.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){let e=this;if(!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout((()=>{this.play()}),100),!1;if(void 0===this.playInterval||null===this.playInterval){let t,n=0,a=0;!1===this.mediaInfo.audioNone&&this.audioWAudio&&!1===this.mediaInfo.noFPS?(this.playInterval=setInterval((function(){if(t=r.GetMsTime(),e.cache_status){if(t-n>=e.frameTime-a){var o=e.YuvBuf.shift();if(null!=o&&null!==o){let n=0;null!==e.audioWAudio&&void 0!==e.audioWAudio&&(n=1e3*(o.pts-e.audioWAudio.getAlignVPTS())),a=!e.audioWAudio||n<0&&-1*n<=e.frameTime||0<=n?r.GetMsTime()-t+1:e.frameTime,e.showScreen&&e.onRender&&e.onRender(o.line_y,o.h,o.bufY,o.bufU,o.bufV),i.renderFrame(e.AVGLObj,o.bufY,o.bufU,o.bufV,o.line_y,o.h)}(e.YuvBuf.length<=0||e.audioWAudio&&e.audioWAudio.sampleQueue.length<=0)&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.audioWAudio)&&e.audioWAudio.pause(),n=t}}else a=e.frameTime}),1),this.audioWAudio&&this.audioWAudio.play()):this.playInterval=setInterval((function(){var t=e.YuvBuf.shift();null!=t&&null!==t&&(e.showScreen&&e.onRender&&e.onRender(t.line_y,t.h,t.bufY,t.bufU,t.bufV),i.renderFrame(e.AVGLObj,t.bufY,t.bufU,t.bufV,t.line_y,t.h)),e.YuvBuf.length<=0&&(e.cache_status=!1)}),e.frameTime)}}start(e){let t=this;this.workerFetch=new Worker(r.GetScriptPath((function(){var e=null;self,self.onmessage=t=>{var n=t.data;let i=null;switch(i=void 0===n.cmd||null===n.cmd?"":n.cmd){case"start":var r=n.data;(e=new WebSocket(r)).binaryType="arraybuffer",e.onopen=function(t){e.send("Hello WebSockets!")},e.onmessage=function(e){e.data instanceof ArrayBuffer&&0<(e=e.data).byteLength&&postMessage({cmd:"fetch-chunk",data:new Uint8Array(e),msg:"fetch-chunk"})},e.onclose=function(e){};break;case"stop":e&&e.close(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"})}}}))),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this._ptr_probeCallback=Module.addFunction(this._callbackProbe.bind(this),"vdiidiiiiii"),this._ptr_yuvCallback=Module.addFunction(this._callbackYUV.bind(this),"vi"),this._ptr_naluCallback=Module.addFunction(this._callbackNALU.bind(this),"vi"),this._ptr_sampleCallback=Module.addFunction(this._callbackPCM.bind(this),"vi"),this._ptr_aacCallback=Module.addFunction(this._callbackAAC.bind(this),"vi"),Module.cwrap("initializeSniffHttpFlvModule","number",["number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_yuvCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback),this.AVGLObj=i.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),this._decode()}}},function(e,t,n){n.r(t),n.d(t,"NvHLSjsCore",(function(){return l}));var i=n(4),r=n(24);let a=n(5),o=n(167),s=n(60);var l=class{constructor(e,t){this.configFormat={probeDurationMS:e.probeDurationMS,width:e.width||a.DEFAULT_WIDTH,height:e.height||a.DEFAULT_HEIGHT,playerId:e.playerId||a.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,danmaku:e.danmaku,authToken:e.authToken,openToken:e.openToken,maxBufferLength:e.maxBufferLength,startPosition:e.startPosition},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-vjs",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.vCodecID=a.V_CODEC_NAME_AVC,this.audioNone=!1,this.metadata={},this.showScreen=!1,this.playPTS=0,this.loadSuccess=!1,this.bufferInterval=null,this.bootInterval=null,this.qualityList=[],this.manualLevel=-1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onCacheProcess=null,this.onQualityLevels=null,this.onError=null,this.onLevelUpdates=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.bufferCodecsInfo=null,this.headers=e.headers,this.timeShift=e.timeShift,this.timeShiftData=this.timeShift&&this.timeShift.liveStartTime?Date.now()/1e3-this.timeShift.liveStartTime:null,this.liveStartTime=this.timeShiftData,this.url=t,this.onLiveShift=null,this.isPause=!1,this.videoCodec=a.CODEC_H264,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}makeIt(e){let t=this;this.configFormat.width,this.configFormat.height,this.configFormat.autoPlay;var n,s,l=document.querySelector("#"+this.configFormat.playerId),u=document.createElement("video");u.id=this.myPlayerID,this.videoTag=u,o.isSupported()?(this.configFormat.repeatPlay&&u.setAttribute("loop","loop"),this.VRPlugin?this.VrPlayer=new r.a({video:this.videoTag,container:l,autoPlay:this.configFormat.autoPlay},this.VRPlugin):l.insertBefore(u,l.firstChild),!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",window.onclick=document.body.onclick=function(e){t.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.onplay=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e)},this.videoTag.onpause=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e)},this.videoTag.ontimeupdate=()=>{t.onPlayingTime&&t.onPlayingTime(t.videoTag.currentTime)},this.videoTag.onended=()=>{t.onPlayingFinish&&t.onPlayingFinish()},this.videoTag.onseeked=function(){t.onSeekFinish&&t.onSeekFinish(t.seekResult)},l=this.configFormat.maxBufferLength,s={},s=this.configFormat.authToken&&this.configFormat.authToken[e]||this.configFormat.openToken?(n=this.configFormat.authToken[e],l?{token:n,maxBufferLength:l}:{token:n}):l?{maxBufferLength:l}:{},this.headers&&(s=Object.assign({},s,{xhrSetup:e=>{for(var t in this.headers)e.setRequestHeader(t,this.headers[t])}})),null!=this.configFormat.startPosition&&(Object.assign(s,{startPosition:this.configFormat.startPosition}),0==this.configFormat.startPosition)&&Object.assign(s,{liveSyncDurationCount:100}),t.myPlayer=new o(Object.assign(s)),t.myPlayer.attachMedia(u),t.myPlayer.on(o.Events.MEDIA_ATTACHED,(function(n,i){t.myPlayer.loadSource(e)})),t.myPlayer.on(o.Events.LEVEL_LOADED,(function(e,n){0<t.timeShiftData?t.duration=t.timeShiftData:t.duration=n.details.totalduration})),t.myPlayer.on(o.Events.LEVEL_UPDATED,(function(e){t.onLevelUpdates(t.getCurrentLevel())})),t.myPlayer.on(o.Events.BUFFER_APPENDING,(function(e,t){})),t.myPlayer.on(o.Events.BUFFER_CODECS,(function(e,n){t.bufferCodecsInfo=n,t.metadata=n.video?n.video.metadata:{width:1,height:1},n.vide&&n.video.codec&&-1<n.video.codec.indexOf("hvc1")&&(t.vCodecID=a.V_CODEC_NAME_HEVC,t.videoCodec=a.CODEC_H265),t.VrPlayer&&t.VrPlayer.loadVideo&&t.VrPlayer.loadVideo(),(n=document.querySelector("#"+t.configFormat.playerId)).getElementsByTagName("video")[0]||n.getElementsByTagName("div"),!0!==t.loadSuccess&&(t.onLoadFinish&&t.onLoadFinish(),t.onReadyShowDone&&t.onReadyShowDone(),t.loadSuccess=!0)})),t.myPlayer.on(o.Events.MANIFEST_PARSED,(function(e,n){var i=n.levels;if(t.qualityList=[],1<i.length){n={id:-1,label:"自动",index:0,selected:-1===t.manualLevel},t.qualityList.push(n);for(let e=0;e<i.length;e++){var r={id:e,label:(r=i[e]).height+"P",index:e+1,selected:e===t.manualLevel,with:r.width,height:r.height,bitrate:r.bitrate};t.qualityList.push(r)}t.onQualityLevels&&t.onQualityLevels(t.qualityList)}})),t.myPlayer.on(o.Events.ERROR,((e,n)=>{if(n.fatal)switch(n.type){case o.ErrorTypes.NETWORK_ERROR:t.onError({msg:n.response,event:n.details,url:n.url,type:n.type});break;case o.ErrorTypes.MEDIA_ERROR:case o.ErrorTypes.MUX_ERROR:t.onError({msg:n,url:n.url,type:n.type});break;default:o.ErrorTypes.OTHER_ERROR,t.onError({msg:n,url:n.url,type:i.ErrorTypes.OTHER})}else t.onError({msg:n,url:n.url,type:i.ErrorTypes.OTHER})})),t.onMakeItReady&&t.onMakeItReady()):(n=this.videoTag.canPlayType("application/vnd.apple.mpegurl"),this.release(),t.onError({url:e,msg:i.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:i.ErrorTypes.NOT_SUPPORT,isAppleMpegurl:n}))}_refreshVideoTagEvent(){this.videoTag=document.getElementById(this.myPlayerID).querySelector("video")}setPlaybackRate(e=1){return!(e<=0||void 0===this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return void 0===this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:this.videoTag.videoWidth||this.metadata.width,height:this.videoTag.videoHeight||this.metadata.height}}play(){let e=this;e.isPause&&0<e.timeShiftData&&e.shiftRequestUrl?(e.isPause=!1,this.seekTimeShift(e.liveStartTime,e.shiftRequestUrl)):(e.videoTag.play(),e.isPause=!1,e.videoTag.ontimeupdate=function(){var t,n;e.videoTag&&0!=e.videoTag.buffered.length&&((t=e.videoTag.buffered.end(e.videoTag.buffered.length-1))>=e.duration-.04?e.onCacheProcess&&e.onCacheProcess(e.duration):e.onCacheProcess&&e.onCacheProcess(t),n=e.videoTag.currentTime>e.duration?e.duration:e.videoTag.currentTime,0<e.timeShiftData&&(e.duration=e.videoTag.currentTime+e.timeShiftData,n=e.liveStartTime+e.videoTag.currentTime),e.onPlayingTime(n,null,e.duration),e.seekReadyPts&&t>e.seekReadyPts&&(n=e.seek(e.seekReadyPts),e.seekResult=n,e.seekReadyPts=null),e.getFrameRate())})}seek(e){var t,n;if(!(0<this.timeShiftData))return this.videoTag.currentTime=e,-1!=(n=(t=this.videoTag.buffered).length-1)&&t.end(n)<e?(this.seekReadyPts=e,!1):this.seekResult=!0;this.seekTimeShift(e)}pause(){0<this.timeShiftData&&(this.isPause=!0,this.myPlayer.stopLoad()),this.videoTag&&this.videoTag.pause()}setVoice(e){this.videoTag.volume=e}isPlayingState(){return!this.videoTag.paused}changeHlsQuality(e){var t=this.qualityList.find((t=>t.index===e));t&&this.manualLevel!==t.id&&(this.manualLevel=t.id,this.myPlayer.nextLevel=t.id)}getCurrentLevel(){if(0==this.qualityList.length)return!1;let e=this.myPlayer&&this.myPlayer.loadLevel;return this.qualityList.find((t=>e==t.id))}getMediaInfo(){var e,t;if(this.myPlayer)return({videoPts:e,audioPts:t}=this.getPts()),{video:{width:this.getSize().width,height:this.getSize().height,codec:this.bufferCodecsInfo&&this.bufferCodecsInfo.video&&this.bufferCodecsInfo.video.codec,frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"hls_live":"hls_vod",demuxStyle:"hls",bitRate:this.myPlayer.bandwidthEstimate/1024/8,videoPts:e},audio:{bitRate:this.myPlayer.bandwidthEstimate,sampleRate:this.bufferCodecsInfo&&this.bufferCodecsInfo.audio&&this.bufferCodecsInfo.audio.metadata.samplerate,codec:this.bufferCodecsInfo&&this.bufferCodecsInfo.audio&&this.bufferCodecsInfo.audio.metadata.segmentCodec,audioPts:t}}}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getPts(){var e;return{audioPts:e=(e=this.myPlayer&&this.myPlayer.abrController.fragCurrent)&&e.endPTS,videoPts:e}}seekTimeShift(e,t){this.onLiveShift&&this.onLiveShift();var n=parseInt(Date.now()/1e3-(this.duration-e)),i=parseInt(Date.now()/1e3);n=s.getUrlParams(this.url)?this.url+`&starttime=${n}&requesttime=`+i:this.url+`?starttime=${n}&requesttime=`+i,n=t||(!1===e?this.url:n),this.timeShiftDestroy(),this.makeIt(n),this.shiftRequestUrl=n,this.play(),this.liveStartTime=0==e?this.duration:e,this.timeShiftData=this.duration}timeShiftDestroy(){this.loadSuccess=!1,this.myPlayer.destroy(),document.querySelector("#"+this.configFormat.playerId).removeChild(this.videoTag),this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.qualityList=[]}gobackLive(){this.seekTimeShift(!1)}release(){this.loadSuccess=!1,this.VrPlayer&&this.VrPlayer.destroy(),void 0!==this.bootInterval&&null!==this.bootInterval&&(window.clearInterval(this.bootInterval),this.bootInterval=null),this.myPlayer&&this.myPlayer.destroy(),this.myPlayerID=null,this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.qualityList=[],this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,(this.onQualityLevels=null)!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),window.onclick=document.body.onclick=null}}},function(e,t,n){!function t(n){e.exports=function(){function e(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function i(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){var n=t,r=i[e];(e=p(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,p(i.key),i)}}function a(e,t,n){t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return(c=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(e){}}}()?Reflect.construct.bind():function(e,t,n){var i=[null];return i.push.apply(i,t),t=new(Function.bind.apply(e,i)),n&&u(t,n.prototype),t}).apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function f(e,t){var n,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e){var t;if(e)return"string"==typeof e?d(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==typeof e?e:String(e)}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}g=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,_=/^(?=([^\/?#]*))\1([^]*)$/,y=/(?:\/|^)\.(?=\/)/g,v=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,A={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=A.parseURL(e);if(i)return i.path=A.normalizePath(i.path),A.buildURLFromParts(i);throw new Error("Error trying to parse base URL.")}if(!(i=A.parseURL(t)))throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=A.normalizePath(i.path),A.buildURLFromParts(i)):t;if(!(t=A.parseURL(e)))throw new Error("Error trying to parse base URL.");var r;return!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=_.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/"),e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment},i.netLoc||(e.netLoc=t.netLoc,"/"===i.path[0])||(i.path?(r=(r=t.path).substring(0,r.lastIndexOf("/")+1)+i.path,e.path=A.normalizePath(r)):(e.path=t.path,i.params||(e.params=t.params,i.query)||(e.query=t.query))),null===e.path&&(e.path=n.alwaysNormalize?A.normalizePath(i.path):i.path),A.buildURLFromParts(e)},parseURL:function(e){return(e=g.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(y,"");e.length!==(e=e.replace(v,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};var g,_,y,v,A,E=A,b=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},w=((V={}).MEDIA_ATTACHING="hlsMediaAttaching",V.MEDIA_ATTACHED="hlsMediaAttached",V.MEDIA_DETACHING="hlsMediaDetaching",V.MEDIA_DETACHED="hlsMediaDetached",V.BUFFER_RESET="hlsBufferReset",V.BUFFER_CODECS="hlsBufferCodecs",V.BUFFER_CREATED="hlsBufferCreated",V.BUFFER_APPENDING="hlsBufferAppending",V.BUFFER_APPENDED="hlsBufferAppended",V.BUFFER_EOS="hlsBufferEos",V.BUFFER_FLUSHING="hlsBufferFlushing",V.BUFFER_FLUSHED="hlsBufferFlushed",V.MANIFEST_LOADING="hlsManifestLoading",V.MANIFEST_LOADED="hlsManifestLoaded",V.MANIFEST_PARSED="hlsManifestParsed",V.LEVEL_SWITCHING="hlsLevelSwitching",V.LEVEL_SWITCHED="hlsLevelSwitched",V.LEVEL_LOADING="hlsLevelLoading",V.LEVEL_LOADED="hlsLevelLoaded",V.LEVEL_UPDATED="hlsLevelUpdated",V.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",V.LEVELS_UPDATED="hlsLevelsUpdated",V.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",V.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",V.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",V.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",V.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",V.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",V.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",V.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",V.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",V.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",V.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",V.CUES_PARSED="hlsCuesParsed",V.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",V.INIT_PTS_FOUND="hlsInitPtsFound",V.FRAG_LOADING="hlsFragLoading",V.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",V.FRAG_LOADED="hlsFragLoaded",V.FRAG_DECRYPTED="hlsFragDecrypted",V.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",V.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",V.FRAG_PARSING_METADATA="hlsFragParsingMetadata",V.FRAG_PARSED="hlsFragParsed",V.FRAG_BUFFERED="hlsFragBuffered",V.FRAG_CHANGED="hlsFragChanged",V.FPS_DROP="hlsFpsDrop",V.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",V.ERROR="hlsError",V.DESTROYING="hlsDestroying",V.KEY_LOADING="hlsKeyLoading",V.KEY_LOADED="hlsKeyLoaded",V.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",V.BACK_BUFFER_REACHED="hlsBackBufferReached",V.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",V),T=((V={}).NETWORK_ERROR="networkError",V.MEDIA_ERROR="mediaError",V.KEY_SYSTEM_ERROR="keySystemError",V.MUX_ERROR="muxError",V.OTHER_ERROR="otherError",V),S=((V={}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",V.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",V.KEY_SYSTEM_NO_SESSION="keySystemNoSession",V.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",V.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",V.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",V.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",V.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",V.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",V.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",V.MANIFEST_LOAD_ERROR="manifestLoadError",V.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",V.MANIFEST_PARSING_ERROR="manifestParsingError",V.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",V.LEVEL_EMPTY_ERROR="levelEmptyError",V.LEVEL_LOAD_ERROR="levelLoadError",V.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",V.LEVEL_PARSING_ERROR="levelParsingError",V.LEVEL_SWITCH_ERROR="levelSwitchError",V.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",V.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",V.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",V.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",V.FRAG_LOAD_ERROR="fragLoadError",V.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",V.FRAG_DECRYPT_ERROR="fragDecryptError",V.FRAG_PARSING_ERROR="fragParsingError",V.FRAG_GAP="fragGap",V.REMUX_ALLOC_ERROR="remuxAllocError",V.KEY_LOAD_ERROR="keyLoadError",V.KEY_LOAD_TIMEOUT="keyLoadTimeOut",V.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",V.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",V.BUFFER_APPEND_ERROR="bufferAppendError",V.BUFFER_APPENDING_ERROR="bufferAppendingError",V.BUFFER_STALLED_ERROR="bufferStalledError",V.BUFFER_FULL_ERROR="bufferFullError",V.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",V.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",V.INTERNAL_EXCEPTION="internalException",V.INTERNAL_ABORTED="aborted",V.UNKNOWN="unknown",V),R=function(){},I={trace:R,debug:R,log:R,warn:R,info:R,error:R},C=I;function L(e,t){if(self.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){var n;C[t]=e[t]?e[t].bind(e):(n=self.console[t])?n.bind(self.console,"["+t+"] >"):R}))}(e,"debug","log","info","warn","error");try{C.log('Debug logs enabled for "'+t+'" in hls.js version '+void 0)}catch(e){C=I}}else C=I}var P=C,D=/^(\d+)x(\d+)$/,k=/(.+?)=(".*?"|.*?)(?:,|$)/g,x=((V=M.prototype).decimalInteger=function(e){return(e=parseInt(this[e],10))>Number.MAX_SAFE_INTEGER?1/0:e},V.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},V.hexadecimalIntegerAsNumber=function(e){return(e=parseInt(this[e],16))>Number.MAX_SAFE_INTEGER?1/0:e},V.decimalFloatingPoint=function(e){return parseFloat(this[e])},V.optionalFloat=function(e,t){return(e=this[e])?parseFloat(e):t},V.enumeratedString=function(e){return this[e]},V.bool=function(e){return"YES"===this[e]},V.decimalResolution=function(e){if(null!==(e=D.exec(this[e])))return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},M.parseAttrList=function(e){var t,n={};for(k.lastIndex=0;null!==(t=k.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1].trim()]=i}return n},M);function M(e){for(var t in e="string"==typeof e?M.parseAttrList(e):e)e.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}a(X,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){var e;return this._endDate||(null!==(e=this.duration)?new Date(this._startDate.getTime()+1e3*e):null)}},{key:"duration",get:function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(b(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&b(this.startDate.getTime())&&(null===this.duration||0<=this.duration)&&(!this.endOnNext||!!this.class)}}]);var O,N,F=X,B=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},U="audio",j="video",G="audiovideo",V=(Q.prototype.setByteRange=function(e,t){var n=[];1===(e=e.split("@",2)).length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(e[1]),n[1]=parseInt(e[0])+n[0],this._byteRange=n},a(Q,[{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=E.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),Q),H=(s(q,N=V),(on=q.prototype).setKeyFormat=function(e){this.levelkeys&&(e=this.levelkeys[e])&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))},on.abortRequests=function(){var e;null!=(e=this.loader)&&e.abort(),null!=(e=this.keyLoader)&&e.abort()},on.setElementaryStreamInfo=function(e,t,n,i,r,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,i),s.endDTS=Math.max(s.endDTS,r)):o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:a}},on.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[U]=null,e[j]=null,e[G]=null},a(q,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else if(1===(e=Object.keys(this.levelkeys)).length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){var e;return null!==this.programDateTime&&b(this.programDateTime)?(e=b(this.duration)?this.duration:0,this.programDateTime+1e3*e):null}},{key:"encrypted",get:function(){if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var e=Object.keys(this.levelkeys),t=e.length;if(1<t||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}}]),q),Y=(s(K,O=V),a(K,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),K),z=(W.prototype.reloaded=function(e){var t,n;e?(t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex,this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<n,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay):(this.advanced=!0,this.updated=!0)},a(W,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&b(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),W);function W(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}function K(e,t,n,i,r){return(n=O.call(this,n)||this).fragOffset=0,n.duration=0,n.gap=!1,n.independent=!1,n.relurl=void 0,n.fragment=void 0,n.index=void 0,n.stats=new B,n.duration=e.decimalFloatingPoint("DURATION"),n.gap=e.bool("GAP"),n.independent=e.bool("INDEPENDENT"),n.relurl=e.enumeratedString("URI"),n.fragment=t,n.index=i,(t=e.enumeratedString("BYTERANGE"))&&n.setByteRange(t,r),r&&(n.fragOffset=r.fragOffset+r.duration),n}function q(e,t){return(t=N.call(this,t)||this)._decryptdata=null,t.rawProgramDateTime=null,t.programDateTime=null,t.tagList=[],t.duration=0,t.sn=0,t.levelkeys=void 0,t.type=void 0,t.loader=null,t.keyLoader=null,t.level=-1,t.cc=0,t.startPTS=void 0,t.endPTS=void 0,t.startDTS=void 0,t.endDTS=void 0,t.start=0,t.deltaPTS=void 0,t.maxStartPTS=void 0,t.minEndPTS=void 0,t.stats=new B,t.urlId=0,t.data=void 0,t.bitrateTest=!1,t.title=null,t.initSegment=null,t.endList=void 0,t.gap=void 0,t.type=e,t}function Q(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[U]=null,t[j]=null,t[G]=null,t),this.baseurl=e}function X(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var n,i=t.attr;for(n in i)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==i[n]){P.warn('DATERANGE tag attribute: "'+n+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=n;break}e=o(new x({}),i,e)}this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr&&(t=new Date(this.attr["END-DATE"]),b(t.getTime()))&&(this._endDate=t)}function J(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function Z(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(function(e){return e.charCodeAt(0)}))}var $={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ee="org.w3.clearkey",te="com.apple.streamingkeydelivery",ne="com.microsoft.playready",ie="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function re(e){switch(e){case te:return $.FAIRPLAY;case ne:return $.PLAYREADY;case ie:return $.WIDEVINE;case ee:return $.CLEARKEY}}var ae="edef8ba979d64acea3c827dcd51d21ed";function oe(e){switch(e){case $.FAIRPLAY:return te;case $.PLAYREADY:return ne;case $.WIDEVINE:return ie;case $.CLEARKEY:return ee}}function se(e){var t=e.drmSystems,n=(e=e.widevineLicenseUrl,t?[$.FAIRPLAY,$.WIDEVINE,$.PLAYREADY,$.CLEARKEY].filter((function(e){return!!t[e]})):[]);return!n[$.WIDEVINE]&&e&&n.push($.WIDEVINE),n}var le="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function ue(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}function ce(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function he(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function de(e,t){for(var n=t,i=0;ce(e,t);)i=(i+=10)+_e(e,t+6),he(e,t+10)&&(i+=10),t+=i;if(0<i)return e.subarray(n,n+i)}function fe(e){for(var t=me(e),n=0;n<t.length;n++)if(pe(r=t[n])){if(8===r.data.byteLength){var i=1&(r=new Uint8Array(r.data))[3],r=(r[4]<<23)+(r[5]<<15)+(r[6]<<7)+r[7];return r/=45,i&&(r+=47721858.84),Math.round(r)}return}}function pe(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function me(e){for(var t,n=0,i=[];ce(e,n);){for(var r=_e(e,n+6),a=(n+=10)+r;n+8<a;){t=e.subarray(n),s=o=void 0;var o={type:o=String.fromCharCode(t[0],t[1],t[2],t[3]),size:s=_e(t,4),data:t.subarray(10,10+s)},s=("PRIV"===(t=o).type?ye:"W"===t.type[0]?Ae:ve)(t);s&&i.push(s),n+=o.size+10}he(e,n)&&(n+=10)}return i}var ge,_e=function(e,t){var n=0;return n=(127&e[t])<<21,(n=(n|=(127&e[t+1])<<14)|(127&e[t+2])<<7)|127&e[t+3]},ye=function(e){var t,n;if(!(e.size<2))return t=Ee(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1)),{key:e.type,info:t,data:n.buffer}},ve=function(e){var t,n;if(!(e.size<2))return"TXXX"===e.type?(t=1,t+=(n=Ee(e.data.subarray(1),!0)).length+1,t=Ee(e.data.subarray(t)),{key:e.type,info:n,data:t}):(n=Ee(e.data.subarray(1)),{key:e.type,data:n})},Ae=function(e){var t,n;return"WXXX"===e.type?e.size<2?void 0:(t=1,t+=(n=Ee(e.data.subarray(1),!0)).length+1,t=Ee(e.data.subarray(t)),{key:e.type,info:n,data:t}):(n=Ee(e.data),{key:e.type,data:n})},Ee=function(e,t){var n,i;if(void 0===t&&(t=!1),ge=ge||void 0===self.TextDecoder?ge:new self.TextDecoder("utf-8"))return n=ge.decode(e),t?-1!==(i=n.indexOf("\0"))?n.substring(0,i):n:n.replace(/\0/g,"");for(var r,a,o,s=e.length,l="",u=0;u<s;){if(0===(r=e[u++])&&t)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:a=e[u++],l+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=e[u++],o=e[u++],l+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&o)}}return l};function be(e){for(var t="",n=0;n<e.length;n++){var i=e[n].toString(16);t+=i=i.length<2?"0"+i:i}return t}var we=Math.pow(2,32)-1,Te=[].push,Se={video:1,audio:2,id3:3,text:4};function Re(e){return String.fromCharCode.apply(null,e)}function Ie(e,t){return(e=e[t]<<8|e[t+1])<0?65536+e:e}function Ce(e,t){return(e=Le(e,t))<0?4294967296+e:e}function Le(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Pe(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function De(e,t){var n=[];if(t.length)for(var i=e.byteLength,r=0;r<i;){var a,o=1<(o=Ce(e,r))?r+o:i;Re(e.subarray(r+4,r+8))===t[0]&&(1===t.length?n.push(e.subarray(r+8,o)):(a=De(e.subarray(r+8,o),t.slice(1))).length&&Te.apply(n,a)),r=o}return n}function ke(e){for(var t=[],n=De(e,["moov","trak"]),r=0;r<n.length;r++){var a,o,s=n[r],l=De(s,["tkhd"])[0];l&&(l=Ce(l,0===l[0]?12:20),a=De(s,["mdia","mdhd"])[0])&&(a=Ce(a,0===a[0]?12:20),o=De(s,["mdia","hdlr"])[0])&&(o=Re(o.subarray(8,12)),o={soun:U,vide:j}[o])&&(s=function(e){var t,n=e.subarray(8),i=n.subarray(86),r=Re(n.subarray(4,8)),a=r,o="enca"===r||"encv"===r;switch(o&&(t=De(n,[r])[0],De(t.subarray("enca"===r?28:78),["sinf"]).forEach((function(e){var t=De(e,["schm"])[0];!t||"cbcs"!==(t=Re(t.subarray(4,8)))&&"cenc"!==t||(t=De(e,["frma"])[0])&&(a=Re(t))}))),a){case"avc1":case"avc2":case"avc3":case"avc4":a+="."+xe(e[111])+xe(e[112])+xe(e[113]);break;case"mp4a":var s=De(n,[r])[0];(s=De(s.subarray(28),["esds"])[0])&&12<s.length&&0!==s[11]&&(a=(a+="."+xe(s[11]))+"."+(s[12]>>>2&63).toString(16).toUpperCase());break;case"hvc1":case"hev1":var l=["","A","B","C"][(h=(s=De(i,["hvcC"])[0])[1])>>6],u=31&h,c=Ce(s,2),h=(32&h)>>5?"H":"L",d=s[12],f=s.subarray(6,12);a=(a=(a+="."+l+u)+"."+c.toString(16).toUpperCase())+"."+h+d;for(var p="",m=f.length;m--;){var g=f[m];(g||p)&&(p="."+g.toString(16).toUpperCase()+p)}a+=p;break;case"dvh1":case"dvhe":l=(s=De(i,["dvcC"])[0])[2]>>1&127,u=s[2]<<5&32|s[3]>>3&31,a+="."+Me(l)+"."+Me(u);break;case"vp09":h=(c=De(i,["vpcC"])[0])[4],d=c[5],s=c[6]>>4&15,a+="."+Me(h)+"."+Me(d)+"."+Me(s);break;case"av01":u=(l=De(i,["av1C"])[0])[1]>>>3,c=31&l[1],h=l[2]>>>7?"H":"M",d=(64&l[2])>>6,s=(32&l[2])>>5,s=2==u&&d?s?12:10:d?10:8,d=(16&l[2])>>4;var _=(8&l[2])>>3,y=(4&l[2])>>2;l=3&l[2],a+="."+u+"."+Me(c)+h+"."+Me(s)+"."+d+"."+_+y+l}return{codec:a,encrypted:o}}(De(s,["mdia","minf","stbl","stsd"])[0]),t[l]={timescale:a,type:o},t[o]=i({timescale:a,id:l},s))}return De(e,["moov","mvex","trex"]).forEach((function(e){var n=Ce(e,4);(n=t[n])&&(n.default={duration:Ce(e,12),flags:Ce(e,20)})})),t}function xe(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function Me(e){return(e<10?"0":"")+e}function Oe(e){var t=De(e,["schm"])[0];return!t||"cbcs"!==(t=Re(t.subarray(4,8)))&&"cenc"!==t?(P.error("[eme] missing 'schm' box"),null):De(e,["schi","tenc"])[0]}function Ne(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Fe(e,t){var n=[],i=t.samples,r=t.timescale,a=t.id,o=!1;return De(i,["moof"]).map((function(s){var l=s.byteOffset-8;De(s,["traf"]).map((function(s){var u=De(s,["tfdt"]).map((function(e){var t=e[0],n=Ce(e,4);return(n=1===t?(n*=Math.pow(2,32))+Ce(e,8):n)/r}))[0];return void 0!==u&&(e=u),De(s,["tfhd"]).map((function(u){var c=Ce(u,4),h=16777215&Ce(u,0),d=0,f=0,p=8;c===a&&(!!(1&h)&&(p+=8),!!(2&h)&&(p+=4),!!(8&h)&&(d=Ce(u,p),p+=4),!!(16&h)&&(f=Ce(u,p),p+=4),!!(32&h)&&(p+=4),"video"===t.type&&(c=t.codec,o=!!c&&("hvc1"===(c=(u=c.indexOf("."))<0?c:c.substring(0,u))||"hev1"===c||"dvh1"===c||"dvhe"===c)),De(s,["trun"]).map((function(a){var s=a[0],u=16777215&Ce(a,0),c=0,h=!!(256&u),p=0,m=!!(512&u),g=0,_=!!(1024&u),y=!!(2048&u),v=0,A=Ce(a,4),E=8;!!(1&u)&&(c=Ce(a,E),E+=4),4&u&&(E+=4);for(var b=c+l,w=0;w<A;w++){if(h?(p=Ce(a,E),E+=4):p=d,m?(g=Ce(a,E),E+=4):g=f,_&&(E+=4),y&&(v=(0===s?Ce:Le)(a,E),E+=4),t.type===j)for(var T=0;T<g;){var S=Ce(i,b);!function(e,t){return e?39==(e=t>>1&63)||40==e:6==(31&t)}(o,i[b+=4])||Be(i.subarray(b,b+S),o?2:1,e+v/r,n),b+=S,T+=S+4}e+=p/r}})))}))}))})),n}function Be(e,t,n,i){var r=Ue(e),a=0;a+=t;for(var o=0,s=0,l=!1,u=0;a<r.length;){for(o=0;!(a>=r.length)&&(o+=u=r[a++],255===u););for(s=0;!(a>=r.length)&&(s+=u=r[a++],255===u););var c=r.length-a;if(!l&&4===o&&a<r.length){if(l=!0,181===r[a++]){var h=Ie(r,a);if(a+=2,49===h&&(h=Ce(r,a),a+=4,1195456820===h&&3===(h=r[a++]))){var d=r[a++],f=64&d,p=f?2+3*(31&d):0,m=new Uint8Array(p);if(f){m[0]=d;for(var g=1;g<p;g++)m[g]=r[a++]}i.push({type:h,payloadType:o,pts:n,bytes:m})}}}else if(5===o&&s<c){if(l=!0,16<s){for(var _=[],y=0;y<16;y++){var v=r[a++].toString(16);_.push(1==v.length?"0"+v:v),3!==y&&5!==y&&7!==y&&9!==y||_.push("-")}for(var A=s-16,E=new Uint8Array(A),b=0;b<A;b++)E[b]=r[a++];i.push({payloadType:o,pts:n,uuid:_.join(""),userData:Ee(E),userDataBytes:E})}}else if(s<c)a+=s;else if(c<s)break}}function Ue(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),o=0;for(i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),a[i]=e[o];return a}var je={},Ge=(He.clearKeyUriToKeyIdMap=function(){je={}},(on=He.prototype).isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case te:case ie:case ne:case ee:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},on.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv)return"number"!=typeof e&&("AES-128"!==this.method||this.iv||P.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0),e=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e),new He(this.method,this.uri,"identity",this.keyFormatVersions,e);t=null,"data"===(e=(e=this.uri).split(":"))[0]&&2===e.length&&2===(i=(e=e[1].split(";"))[e.length-1].split(",")).length&&(n="base64"===i[0],i=i[1],t=n?(e.splice(-1,1),J(i)):(n=Z(i).subarray(0,16),(e=new Uint8Array(16)).set(n,16-n.length),e));var t,n,i,r=t;if(r)switch(this.keyFormat){case ie:22<=(this.pssh=r).length&&(this.keyId=r.subarray(r.length-22,r.length-6));break;case ne:var a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");var i,r,a;r=0,a=new Uint8Array,0<r?(i=new Uint8Array(4),0<t.length&&new DataView(i.buffer).setUint32(0,t.length,!1)):i=new Uint8Array;var o=new Uint8Array(4);return n&&0<n.byteLength&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=n.length,a=8,o=r;o--;)a+=n[o].byteLength;var s=new Uint8Array(a);for(s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,s.set(e,4),o=0,a=8;o<r;o++)s.set(n[o],a),a+=n[o].byteLength;return s}([112,115,115,104],new Uint8Array([r,0,0,0]),e,i,a,o,n||new Uint8Array)}(a,null,r),a=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),a=(a=String.fromCharCode.apply(null,Array.from(a))).substring(a.indexOf("<"),a.length),(a=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("KID")[0])&&(a=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE"))&&(s(o=a=J(a).subarray(0,16),0,3),s(o,1,2),s(o,4,5),s(o,6,7),this.keyId=a);break;default:var o=r.subarray(0,16);16!==o.length&&((a=new Uint8Array(16)).set(o,16-o.length),o=a),this.keyId=o}function s(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}return this.keyId&&16===this.keyId.byteLength||((i=je[this.uri])||(n=Object.keys(je).length%Number.MAX_SAFE_INTEGER,i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,n),je[this.uri]=i),this.keyId=i),this},He),Ve=/\{\$([a-zA-Z0-9-_]+)\}/g;function He(e,t,n,i,r,a){void 0===i&&(i=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.token=void 0,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e,this.token=a,"media-drm-player-binding"===this.keyFormat&&(this.uri=this.uri+"&playerId=pid-1-5-1"),"media-drm-token"===this.keyFormat&&this.token&&(this.uri=this.uri+"&playerId=pid-1-5-1&token="+this.token),!this.keyFormat&&this.token&&(this.uri=this.uri+"&token="+this.token)}function Ye(e){return Ve.test(e)}function ze(e,t,n){if(null!==e.variableList||e.hasVariableRefs)for(var i=n.length;i--;){var r=n[i],a=t[r];a&&(t[r]=We(e,a))}}function We(e,t){var n;return null!==e.variableList||e.hasVariableRefs?(n=e.variableList,t.replace(Ve,(function(t){var i=t.substring(2,t.length-1),r=null==n?void 0:n[i];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+i+'"')),t):r}))):t}function Ke(e,t,n){var i,r,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){i=t.QUERYPARAM;try{var o=new self.URL(n).searchParams;if(!o.has(i))throw new Error('"'+i+'" does not match any query parameter in URI: "'+n+'"');r=o.get(i)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+t.message))}}else i=t.NAME,r=t.VALUE;i in a?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+i+'"')):a[i]=r||""}function qe(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}var Qe={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,fLaC:!0,flac:!0,FLAC:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},Xe=qe();function Je(e,t){return!e.split(",").some((function(e){return!Ze(e,t)}))}function Ze(e,t){return null!=(t=null==Xe?void 0:Xe.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"'))&&t}var $e={},et=/flac|opus/i;function tt(e){return e.replace(et,(function(e){var t=e.toLowerCase();if($e[t])return $e[t];for(var n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t],i=0;i<n.length;i++)if(Ze(n[i],"audio"))return $e[t]=n[i],n[i];return t}))}var nt=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,it=/#EXT-X-MEDIA:(.*)/g,rt=/^#EXT(?:INF|-X-TARGETDURATION):/m,at=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),ot=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),st=(lt.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},lt.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return 2<n.length?(t=n.shift()+".",(t+=parseInt(n.shift()).toString(16))+("000"+parseInt(n.shift()).toString(16)).slice(-4)):e},lt.resolve=function(e,t){return E.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},lt.isMediaPlaylist=function(e){return rt.test(e)},lt.parseMasterPlaylist=function(e,t){var n,i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ye(e)},r=[];for(nt.lastIndex=0;null!=(n=nt.exec(e));)if(n[1]){var a=(ze(i,s=new x(n[1]),["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]),We(i,n[2])),o=(a={attrs:s,bitrate:s.decimalInteger("BANDWIDTH")||s.decimalInteger("AVERAGE-BANDWIDTH"),name:s.NAME,url:lt.resolve(a,t)},s.decimalResolution("RESOLUTION"));o&&(a.width=o.width,a.height=o.height),function(e,t){["video","audio","text"].forEach((function(n){var i=e.filter((function(e){return!!(t=Qe[n])&&!0===t[e.slice(0,4)];var t}));i.length&&(t[n+"Codec"]=i.join(","),e=e.filter((function(e){return-1===i.indexOf(e)})))})),t.unknownCodecs=e}((s.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=lt.convertAVC1ToAVCOTI(a.videoCodec)),null!=(o=a.unknownCodecs)&&o.length||r.push(a),i.levels.push(a)}else if(n[3]){var s=n[3],l=n[4];switch(s){case"SESSION-DATA":var u=new x(l),c=(ze(i,u,["DATA-ID","LANGUAGE","VALUE","URI"]),u["DATA-ID"]);c&&(null===i.sessionData&&(i.sessionData={}),i.sessionData[c]=u);break;case"SESSION-KEY":(c=ut(l,t,i)).encrypted&&c.isSupported()?(null===i.sessionKeys&&(i.sessionKeys=[]),i.sessionKeys.push(c)):P.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+l+'"');break;case"DEFINE":ze(i,u=new x(l),["NAME","VALUE","QUERYPARAM"]),Ke(i,u,t);break;case"CONTENT-STEERING":var h=new x(l);ze(i,h,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:lt.resolve(h["SERVER-URI"],t),pathwayId:h["PATHWAY-ID"]||"."};break;case"START":i.startTimeOffset=ct(l)}}var d=0<r.length&&r.length<i.levels.length;return i.levels=d?r:i.levels,0===i.levels.length&&(i.playlistParsingError=new Error("no levels found in manifest")),i},lt.parseMasterPlaylistMedia=function(e,t,n){var i={},r=n.levels,a={AUDIO:r.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),SUBTITLES:r.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),"CLOSED-CAPTIONS":[]},o=0;for(it.lastIndex=0;null!==(u=it.exec(e));){var s,l,u=new x(u[1]),c=u.TYPE;c&&(s=a[c],l=i[c]||[],i[c]=l,ze(n,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]),c={attrs:u,bitrate:0,id:o++,groupId:u["GROUP-ID"]||"",instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:u.LANGUAGE,url:u.URI?lt.resolve(u.URI,t):""},null!=s&&s.length&&(ht(c,u=lt.findGroup(s,c.groupId)||s[0],"audioCodec"),ht(c,u,"textCodec")),l.push(c))}return i},lt.parseLevelPlaylist=function(e,t,n,i,r,a,s){var l,u,c,h=new z(t),d=h.fragments,f=null,p=0,m=0,g=0,_=0,y=null,v=new H(i,t),A=-1,E=!1;for(at.lastIndex=0,h.m3u8=e,h.hasVariableRefs=Ye(e);null!==(l=at.exec(e));){E&&(E=!1,(v=new H(i,t)).start=g,v.sn=p,v.cc=_,v.level=n,f)&&(v.initSegment=f,v.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null);var w=l[1];if(w){v.duration=parseFloat(w);var T=(" "+l[2]).slice(1);v.title=T||null,v.tagList.push(T?["INF",w,T]:["INF",w])}else if(l[3])b(v.duration)&&(v.start=g,c&&pt(v,c,h),v.sn=p,v.level=n,v.cc=_,v.urlId=r,d.push(v),T=(" "+l[3]).slice(1),v.relurl=We(h,T),dt(v,y),g+=(y=v).duration,p++,E=!(m=0));else if(l[4])w=(" "+l[4]).slice(1),y?v.setByteRange(w,y):v.setByteRange(w);else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===A&&(A=d.length);else if(l=l[0].match(ot)){for(u=1;u<l.length&&void 0===l[u];u++);var S=(" "+l[u]).slice(1),R=(" "+l[u+1]).slice(1),I=l[u+2]?(" "+l[u+2]).slice(1):"";switch(S){case"PLAYLIST-TYPE":h.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":p=h.startSN=parseInt(R);break;case"SKIP":var C=new x(R),L=(ze(h,C,["RECENTLY-REMOVED-DATERANGES"]),C.decimalInteger("SKIPPED-SEGMENTS"));if(b(L)){for(var D=h.skippedSegments=L;D--;)d.unshift(null);p+=L}(L=C.enumeratedString("RECENTLY-REMOVED-DATERANGES"))&&(h.recentlyRemovedDateranges=L.split("\t"));break;case"TARGETDURATION":h.targetduration=Math.max(parseInt(R),1);break;case"VERSION":h.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"#":(R||I)&&v.tagList.push(I?[R,I]:[R]);break;case"DISCONTINUITY":_++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([S]);break;case"BITRATE":v.tagList.push([S,R]);break;case"DATERANGE":ze(h,C=new x(R),["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),ze(h,C,C.clientAttrs),(L=new F(C,h.dateRanges[C.ID])).isValid||h.skippedSegments?h.dateRanges[L.id]=L:P.warn('Ignoring invalid DATERANGE tag: "'+R+'"'),v.tagList.push(["EXT-X-DATERANGE",R]);break;case"DEFINE":var k=new x(R);ze(h,k,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in k?(O=h,N=a,M=void 0,B=(B=k).IMPORT,N&&B in N?((M=O.variableList)||(O.variableList=M={}),M[B]=N[B]):O.playlistParsingError||(O.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+B+'"'))):Ke(h,k,t);break;case"DISCONTINUITY-SEQUENCE":_=parseInt(R);break;case"KEY":var M=ut(R,t,h,s);if(M.isSupported()){if("NONE"===M.method){c=void 0;break}(c=(c=c||{})[M.keyFormat]?o({},c):c)[M.keyFormat]=M}else P.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+R+'"');break;case"START":h.startTimeOffset=ct(R);break;case"MAP":var O,N=new x(R);ze(h,N,["BYTERANGE","URI"]),v.duration?(ft(O=new H(i,t),N,n,c),(v.initSegment=f=O).rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=f.rawProgramDateTime)):(ft(v,N,n,c),f=v,E=!0);break;case"SERVER-CONTROL":var B=new x(R);h.canBlockReload=B.bool("CAN-BLOCK-RELOAD"),h.canSkipUntil=B.optionalFloat("CAN-SKIP-UNTIL",0),h.canSkipDateRanges=0<h.canSkipUntil&&B.bool("CAN-SKIP-DATERANGES"),h.partHoldBack=B.optionalFloat("PART-HOLD-BACK",0),h.holdBack=B.optionalFloat("HOLD-BACK",0);break;case"PART-INF":k=new x(R),h.partTarget=k.decimalFloatingPoint("PART-TARGET");break;case"PART":var U=(U=h.partList)||(h.partList=[]),j=0<m?U[U.length-1]:void 0,G=m++,V=(ze(h,V=new x(R),["BYTERANGE","URI"]),new Y(V,v,t,G,j));U.push(V),v.duration+=V.duration;break;case"PRELOAD-HINT":ze(h,G=new x(R),["URI"]),h.preloadHint=G;break;case"RENDITION-REPORT":ze(h,j=new x(R),["URI"]),h.renditionReports=h.renditionReports||[],h.renditionReports.push(j);break;default:P.warn("line parsed but not handled: "+l)}}else P.warn("No matches on slow regex match for level playlist!")}y&&!y.relurl?(d.pop(),g-=y.duration,h.partList&&(h.fragmentHint=y)):h.partList&&(dt(v,y),v.cc=_,h.fragmentHint=v,c)&&pt(v,c,h);var W=d.length,K=d[0],q=d[W-1];return 0<(g+=h.skippedSegments*h.targetduration)&&W&&q?(h.averagetargetduration=g/W,W=q.sn,h.endSN="initSegment"!==W?W:0,h.live||(q.endList=!0),K&&(h.startCC=K.cc)):(h.endSN=0,h.startCC=0),h.fragmentHint&&(g+=h.fragmentHint.duration),h.totalduration=g,h.endCC=_,0<A&&function(e,t){for(var n=e[t],i=t;i--;){var r=e[i];if(!r)return;r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(d,A),h},lt);function lt(){}function ut(e,t,n,i){ze(n,e=new x(e),["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]),n=null!=(n=e.METHOD)?n:"";var r=e.URI,a=e.hexadecimalInteger("IV"),o=e.KEYFORMATVERSIONS,s=null!=(s=e.KEYFORMAT)?s:"identity";return r&&e.IV&&!a&&P.error("Invalid IV: "+e.IV),e=r?st.resolve(r,t):"",r=(o||"1").split("/").map(Number).filter(Number.isFinite),new Ge(n,e,s,r,a,i.token)}function ct(e){return e=new x(e).decimalFloatingPoint("TIME-OFFSET"),b(e)?e:null}function ht(e,t,n){(t=t[n])&&(e[n]=t)}function dt(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),b(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function ft(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function pt(e,t,n){e.levelkeys=t,(n=n.encryptedFragments).length&&n[n.length-1].levelkeys===t||!Object.keys(t).some((function(e){return t[e].isCommonEncryption}))||n.push(e)}var mt="manifest",gt="level",_t="audioTrack",yt="subtitleTrack",vt="main",At="audio",Et="subtitle";function bt(e){switch(e.type){case _t:return At;case yt:return Et;default:return vt}}function wt(e,t){return void 0!==(e=e.url)&&0!==e.indexOf("data:")?e:t.url}(V=St.prototype).startLoad=function(e){},V.stopLoad=function(){this.destroyInternalLoaders()},V.registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},V.unregisterListeners=function(){var e=this.hls;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},V.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader;return n=new(n||i)(t),this.loaders[e.type]=n},V.getInternalLoader=function(e){return this.loaders[e.type]},V.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},V.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},V.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},V.onManifestLoading=function(e,t){t=t.url,this.variableList=null,this.load({id:null,level:0,responseType:"text",type:mt,url:t,deliveryDirectives:null})},V.onLevelLoading=function(e,t){var n=t.id,i=t.level,r=t.url;t=t.deliveryDirectives,this.load({id:n,level:i,responseType:"text",type:gt,url:r,deliveryDirectives:t})},V.onAudioTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url;t=t.deliveryDirectives,this.load({id:n,groupId:i,level:null,responseType:"text",type:_t,url:r,deliveryDirectives:t})},V.onSubtitleTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url;t=t.deliveryDirectives,this.load({id:n,groupId:i,level:null,responseType:"text",type:yt,url:r,deliveryDirectives:t})},V.load=function(e){var t=this,n=this.hls.config,i=this.getInternalLoader(e);if(i){var r=i.context;if(r&&r.url===e.url)return void P.trace("[playlist-loader]: playlist request ongoing");P.log("[playlist-loader]: aborting previous loader for type: "+e.type),i.abort()}r=e.type===mt?n.manifestLoadPolicy.default:o({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),b(null==(n=e.deliveryDirectives)?void 0:n.part)&&(e.type===gt&&null!==e.level?a=this.hls.levels[e.level].details:e.type===_t&&null!==e.id?a=this.hls.audioTracks[e.id].details:e.type===yt&&null!==e.id&&(a=this.hls.subtitleTracks[e.id].details),a)&&(n=a.partTarget,a=a.targetduration,n&&a&&(n=1e3*Math.max(3*n,.8*a),r=o({},r,{maxTimeToFirstByteMs:Math.min(n,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(n,r.maxTimeToFirstByteMs)})));var a=r.errorRetry||r.timeoutRetry||{};n={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},i.load(e,n,{onSuccess:function(e,n,i,r){var a=t.getInternalLoader(i),o=(t.resetInternalLoader(i.type),e.data);0===o.indexOf("#EXTM3U")?(n.parsing.start=performance.now(),st.isMediaPlaylist(o)?t.handleTrackOrLevelPlaylist(e,n,i,r||null,a):t.handleMasterPlaylist(e,n,i,r)):t.handleManifestParsingError(e,i,new Error("no EXTM3U delimiter"),r||null,n)},onError:function(e,n,i,r){t.handleNetworkError(n,i,!1,e,r)},onTimeout:function(e,n,i){t.handleNetworkError(n,i,!0,void 0,e)}})},V.handleMasterPlaylist=function(e,t,n,i){var r,a,o,s,l,u=this.hls,c=e.data,h=wt(e,n),d=st.parseMasterPlaylist(c,h);d.playlistParsingError?this.handleManifestParsingError(e,n,d.playlistParsingError,i,t):(e=d.contentSteering,n=d.levels,r=d.sessionData,a=d.sessionKeys,o=d.startTimeOffset,s=d.variableList,this.variableList=s,d=(c=st.parseMasterPlaylistMedia(c,h,d)).AUDIO,l=c.SUBTITLES,c=c["CLOSED-CAPTIONS"],(d=void 0===d?[]:d).length&&!d.some((function(e){return!e.url}))&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(P.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new x({}),bitrate:0,url:""})),u.trigger(w.MANIFEST_LOADED,{levels:n,audioTracks:d,subtitles:l,captions:c,contentSteering:e,url:h,stats:t,networkDetails:i,sessionData:r,sessionKeys:a,startTimeOffset:o,variableList:s}))},V.handleTrackOrLevelPlaylist=function(e,t,n,i,r){var a=this.hls,o=n.id,s=n.level,l=n.type,u=wt(e,n),c=(o=b(o)?o:0,s=b(s)?s:o,bt(n));s=st.parseLevelPlaylist(e.data,u,s,c,o,this.variableList,a.config),l===mt&&(c={attrs:new x({}),bitrate:0,details:s,name:"",url:u},a.trigger(w.MANIFEST_LOADED,{levels:[c],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})),t.parsing.end=performance.now(),n.levelDetails=s,this.handlePlaylistLoaded(s,e,t,n,i,r)},V.handleManifestParsingError=function(e,t,n,i,r){this.hls.trigger(w.ERROR,{type:T.NETWORK_ERROR,details:S.MANIFEST_PARSING_ERROR,fatal:t.type===mt,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:r})},V.handleNetworkError=function(e,t,n,r,a){var o="A network "+((n=void 0!==n&&n)?"timeout":"error"+(r?" (status "+r.code+")":""))+" occurred while loading "+e.type,s=(e.type===gt?o+=": "+e.level+" id: "+e.id:e.type!==_t&&e.type!==yt||(o+=" id: "+e.id+' group-id: "'+e.groupId+'"'),new Error(o)),l=(P.warn("[playlist-loader]: "+o),S.UNKNOWN),u=!1;switch(o=this.getInternalLoader(e),e.type){case mt:l=n?S.MANIFEST_LOAD_TIMEOUT:S.MANIFEST_LOAD_ERROR,u=!0;break;case gt:l=n?S.LEVEL_LOAD_TIMEOUT:S.LEVEL_LOAD_ERROR,u=!1;break;case _t:l=n?S.AUDIO_TRACK_LOAD_TIMEOUT:S.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case yt:l=n?S.SUBTITLE_TRACK_LOAD_TIMEOUT:S.SUBTITLE_LOAD_ERROR,u=!1}o&&this.resetInternalLoader(e.type),o={type:T.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:o,context:e,error:s,networkDetails:t,stats:a},r&&(s=(null==t?void 0:t.url)||e.url,o.response=i({url:s,data:void 0},r)),this.hls.trigger(w.ERROR,o)},V.handlePlaylistLoaded=function(e,t,n,i,r,a){var o=this.hls,s=i.type,l=i.level,u=i.id,c=i.groupId,h=i.deliveryDirectives,d=wt(t,i),f=bt(i),p="number"==typeof i.level&&f===vt?l:void 0;if(e.fragments.length)if(e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration")),l=e.playlistParsingError)o.trigger(w.ERROR,{type:T.NETWORK_ERROR,details:S.LEVEL_PARSING_ERROR,fatal:!1,url:d,error:l,reason:l.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n});else switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),s){case mt:case gt:o.trigger(w.LEVEL_LOADED,{details:e,level:p||0,id:u||0,stats:n,networkDetails:r,deliveryDirectives:h});break;case _t:o.trigger(w.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:h});break;case yt:o.trigger(w.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:c||"",stats:n,networkDetails:r,deliveryDirectives:h})}else l=new Error("No Segments found in Playlist"),o.trigger(w.ERROR,{type:T.NETWORK_ERROR,details:S.LEVEL_EMPTY_ERROR,fatal:!1,url:d,error:l,reason:l.message,response:t,context:i,level:p,parent:f,networkDetails:r,stats:n})};var Tt=St;function St(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}function Rt(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function It(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){P.debug("[texttrack-utils]: "+n);try{var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(e){P.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+e)}}"disabled"===n&&(e.mode=n)}function Ct(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function Lt(e,t,n,i){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&0<e.cues.length)for(var a=function(e,t,n){var i=[],r=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var i=0,r=n;i<=r;){var a=Math.floor((r+i)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&i<n))return a;i=a+1}}return e[i].startTime-t<t-e[r].startTime?i:r}(e,t);if(-1<r)for(var a=r,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=n)i.push(s);else if(s.startTime>n)return i}return i}(e.cues,t,n),o=0;o<a.length;o++)i&&!i(a[o])||e.removeCue(a[o]);"disabled"===r&&(e.mode=r)}var Pt="org.id3",Dt="https://aomedia.org/emsg/ID3";function kt(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var xt=function(){var e=kt();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Mt(e,t){return e.getTime()/1e3-t}(on=Ht.prototype).destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},on._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},on._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this)},on.onMediaAttached=function(e,t){this.media=t.media},on.onMediaDetaching=function(){this.id3Track&&(Ct(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},on.onManifestLoading=function(){this.dateRangeCuesAppended={}},on.createTrack=function(e){return(e=this.getID3Track(e.textTracks)).mode="hidden",e},on.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Rt(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},on.onFragParsingMetadata=function(e,t){if(this.media){var n=this.hls.config,i=n.enableEmsgMetadataCues,r=n.enableID3MetadataCues;if(i||r){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var o=kt(),s=0;s<a.length;s++){var l=a[s].type;if((l!==Dt||i)&&r){var u=me(a[s].data);if(u){var c=a[s].pts,h=c+a[s].duration;(h=xt<h?xt:h)-c<=0&&(h=c+.25);for(var d=0;d<u.length;d++){var f,p=u[d];pe(p)||(this.updateId3CueEnds(c,l),(f=new o(c,h,"")).value=p,l&&(f.type=l),this.id3Track.addCue(f))}}}}}}},on.updateId3CueEnds=function(e,t){var n,i=null==(n=this.id3Track)?void 0:n.cues;if(i)for(var r=i.length;r--;){var a=i[r];a.type===t&&a.startTime<e&&a.endTime===xt&&(a.endTime=e)}},on.onBufferFlushing=function(e,t){var n,i,r=t.startOffset,a=t.endOffset,o=(t=t.type,this.id3Track),s=this.hls;s&&(s=s.config,n=s.enableEmsgMetadataCues,i=s.enableID3MetadataCues,o)&&(n||i)&&Lt(o,r,a,"audio"===t?function(e){return e.type===Pt&&i}:"video"===t?function(e){return e.type===Dt&&n}:function(e){return e.type===Pt&&i||e.type===Dt&&n})},on.onLevelUpdated=function(e,t){var n=this;if(t=t.details,this.media&&t.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var i=this.dateRangeCuesAppended,r=this.id3Track,a=t.dateRanges,o=Object.keys(a);if(r)for(var s=Object.keys(i).filter((function(e){return!o.includes(e)})),l=s.length;l--;)!function(){var e=s[l];Object.keys(i[e].cues).forEach((function(t){r.removeCue(i[e].cues[t])})),delete i[e]}();if(t=t.fragments[t.fragments.length-1],0!==o.length&&b(null==t?void 0:t.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var u=t.programDateTime/1e3-t.start,c=kt(),h=0;h<o.length;h++)!function(){var e=o[h],t=a[e],r=i[e],s=(null==r?void 0:r.cues)||{},l=(null==r?void 0:r.durationKnown)||!1,d=Mt(t.startDate,u),f=xt,p=t.endDate;p?(f=Mt(p,u),l=!0):t.endOnNext&&!l&&(p=o.reduce((function(e,n){var i=a[n];return i.class===t.class&&i.id!==n&&i.startDate>t.startDate&&e.push(i),e}),[]).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()}))[0])&&(f=Mt(p.startDate,u),l=!0);for(var m,g=Object.keys(t.attr),_=0;_<g.length;_++){var y,v,A=g[_];"ID"!==A&&"CLASS"!==A&&"START-DATE"!==A&&"DURATION"!==A&&"END-DATE"!==A&&"END-ON-NEXT"!==A&&((v=s[A])?l&&!r.durationKnown&&(v.endTime=f):(y=t.attr[A],v=new c(d,f,""),"SCTE35-OUT"!==(m=A)&&"SCTE35-IN"!==m||(m=y,y=Uint8Array.from(m.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),v.value={key:A,data:y},v.type="com.apple.quicktime.HLS",v.id=e,n.id3Track.addCue(v),s[A]=v))}i[e]={cues:s,dateRange:t,durationKnown:l}}()}}};var Ot=Ht,Nt=((V=Vt.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},V.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(w.ERROR,this.onError,this)},V.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(w.ERROR,this.onError,this)},V.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},V.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},V.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},V.onLevelUpdated=function(e,t){t=t.details,(this.levelDetails=t).advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},V.onError=function(e,t){t.details===S.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(t=this.levelDetails))&&t.live&&P.warn("[playback-rate-controller]: Stall detected, adjusting target latency")},V.timeupdate=function(){var e,t,n,i=this.media,r=this.levelDetails;i&&r&&(this.currentTime=i.currentTime,null!==(t=this.computeLatency()))&&(this._latency=t,n=(e=this.config).lowLatencyMode,e=e.maxLiveSyncPlaybackRate,n)&&1!==e&&null!==(n=this.targetLatency)&&(n=(t-=n)<Math.min(this.maxLatency,n+r.targetduration),r.live&&n&&.05<t&&1<this.forwardBufferLength?(r=Math.min(2,Math.max(1,e)),n=Math.round(2/(1+Math.exp(-.75*t-this.edgeStalled))*20)/20,i.playbackRate=Math.min(r,Math.max(1,n))):1!==i.playbackRate&&0!==i.playbackRate&&(i.playbackRate=1))},V.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},V.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},a(Vt,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e,t,n,i,r,a=this.levelDetails;return null===a?null:(e=a.holdBack,i=a.partHoldBack,a=a.targetduration,t=(r=this.config).liveSyncDuration,n=r.liveSyncDurationCount,r=r.lowLatencyMode&&i||e,(r=(i=this.hls.userConfig).liveSyncDuration||i.liveSyncDurationCount||0===r?void 0!==t?t:n*a:r)+Math.min(+this.stallCount,a))}},{key:"liveSyncPosition",get:function(){var e,t=this.estimateLiveEdge(),n=this.targetLatency,i=this.levelDetails;return null===t||null===n||null===i?null:(e=i.edge,t=t-n-this.edgeStalled,n=e-i.totalduration,e-=this.config.lowLatencyMode&&i.partTarget||i.targetduration,Math.min(Math.max(n,t),e))}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e,t=this.levelDetails;return null===t?0:(e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration),Math.max(t.age-e,0))}},{key:"forwardBufferLength",get:function(){var e,t=this.media,n=this.levelDetails;return t&&n?((e=t.buffered.length)?t.buffered.end(e-1):n.edge)-this.currentTime:0}}]),Vt),Ft=["NONE","TYPE-0","TYPE-1",null],Bt=(Gt.prototype.addDirectives=function(e){return e=new self.URL(e),void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href},Gt),Ut=(jt.prototype.addFallback=function(e){this.url.push(e.url),this._attrs.push(e.attrs)},a(jt,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){e%=this.url.length,this._urlId!==e&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=e)}},{key:"audioGroupId",get:function(){var e;return null==(e=this.audioGroupIds)?void 0:e[this.urlId]}},{key:"textGroupId",get:function(){var e;return null==(e=this.textGroupIds)?void 0:e[this.urlId]}}]),jt);function jt(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this._avgBitrate=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this._avgBitrate=this.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}function Gt(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}function Vt(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}function Ht(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}function Yt(e,t,n){n&&("audio"===t?(e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds[e.url.length-1]=n):"text"===t&&(e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds[e.url.length-1]=n))}function zt(e,t){var n,i=t.startPTS;b(i)?(n=0,(i=t.sn>e.sn?(n=i-e.start,e):(n=e.start-i,t)).duration!==n&&(i.duration=n)):t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function Wt(e,t,n,i,r,a){i-n<=0&&(P.warn("Fragment should have a positive duration",t),i=n+t.duration,a=r+t.duration);var o,s=n,l=i,u=t.startPTS,c=t.endPTS,h=(b(u)&&(h=Math.abs(u-n),b(t.deltaPTS)?t.deltaPTS=Math.max(h,t.deltaPTS):t.deltaPTS=h,s=Math.max(n,u),n=Math.min(n,u),r=Math.min(r,t.startDTS),l=Math.min(i,c),i=Math.max(i,c),a=Math.max(a,t.endDTS)),n-t.start);if(0!==t.start&&(t.start=n),t.duration=i-t.start,t.startPTS=n,t.maxStartPTS=s,t.startDTS=r,t.endPTS=i,t.minEndPTS=l,t.endDTS=a,u=t.sn,!e||u<e.startSN||u>e.endSN)return 0;c=u-e.startSN;var d=e.fragments;for(d[c]=t,o=c;0<o;o--)zt(d[o],d[o-1]);for(o=c;o<d.length-1;o++)zt(d[o],d[o+1]);return e.fragmentHint&&zt(d[d.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,h}function Kt(e,t){var n=t.startSN+t.skippedSegments-e.startSN;e=e.fragments,n<0||n>=e.length||qt(t,e[n].start)}function qt(e,t){if(t){for(var n=e.fragments,i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function Qt(e,t,n){return null!=e&&e.details?Xt(null==(e=e.details)?void 0:e.partList,t,n):null}function Xt(e,t,n){if(e)for(var i=e.length;i--;){var r=e[i];if(r.index===n&&r.fragment.sn===t)return r}return null}function Jt(e){switch(e.details){case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_TIMEOUT:case S.LEVEL_LOAD_TIMEOUT:case S.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Zt(e,t){return t=Jt(t),e.default[(t?"timeout":"error")+"Retry"]}function $t(e,t){return t="linear"===e.backoff?1:Math.pow(2,t),Math.min(t*e.retryDelayMs,e.maxRetryDelayMs)}function en(e){return i(i({},e),{errorRetry:null,timeoutRetry:null})}function tn(e,t,n,i){return e&&t<e.maxNumRetry&&(0===i&&!1===navigator.onLine||i&&(i<400||499<i)||n)}var nn=function(e,t){for(var n,i,r=0,a=e.length-1;r<=a;){var o=t(i=e[n=(r+a)/2|0]);if(0<o)r=1+n;else{if(!(o<0))return i;a=n-1}}return null};function rn(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=null;return e?r=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(r=t[0]),r&&0===an(n,i,r)||!(t=nn(t,an.bind(null,n,i)))||t===e&&r?r:t}function an(e,t,n){return void 0===t&&(t=0),n.start<=(e=void 0===e?0:e)&&n.start+n.duration>e?0:(t=Math.min(t,n.duration+(n.deltaPTS||0)),n.start+n.duration-t<=e?1:n.start-t>e&&n.start?-1:0)}(on=An.prototype).registerListeners=function(){var e=this.hls;e.on(w.ERROR,this.onError,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},on.unregisterListeners=function(){var e=this.hls;e&&(e.off(w.ERROR,this.onError,this),e.off(w.ERROR,this.onErrorOut,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this))},on.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},on.startLoad=function(e){},on.stopLoad=function(){this.playlistError=0},on.getVariantLevelIndex=function(e){return(null==e?void 0:e.type)===vt?e.level:this.hls.loadLevel},on.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},on.onLevelUpdated=function(){this.playlistError=0},on.onError=function(e,t){if(!t.fatal){var n,i=this.hls,r=t.context;switch(t.details){case S.FRAG_LOAD_ERROR:case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_ERROR:case S.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case S.FRAG_PARSING_ERROR:if(null!=(a=t.frag)&&a.gap)return void(t.errorAction={action:0,flags:0});case S.FRAG_GAP:case S.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case S.LEVEL_EMPTY_ERROR:case S.LEVEL_PARSING_ERROR:var a=t.parent===vt?t.level:i.loadLevel;return void(t.details===S.LEVEL_EMPTY_ERROR&&null!=(o=t.context)&&null!=(o=o.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,a)));case S.LEVEL_LOAD_ERROR:case S.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==r?void 0:r.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level)));case S.AUDIO_TRACK_LOAD_ERROR:case S.AUDIO_TRACK_LOAD_TIMEOUT:case S.SUBTITLE_LOAD_ERROR:case S.SUBTITLE_TRACK_LOAD_TIMEOUT:return r&&(o=i.levels[i.loadLevel])&&(r.type===_t&&r.groupId===o.audioGroupId||r.type===yt&&r.groupId===o.textGroupId)?(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)):void 0;case S.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var o;return void((o=null==(a=i.levels[i.loadLevel])?void 0:a.attrs["HDCP-LEVEL"])&&(t.errorAction={action:2,flags:2,hdcpLevel:o}));case S.BUFFER_ADD_CODEC_ERROR:case S.REMUX_ALLOC_ERROR:case S.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:i.loadLevel));case S.INTERNAL_EXCEPTION:case S.BUFFER_APPENDING_ERROR:case S.BUFFER_FULL_ERROR:case S.LEVEL_SWITCH_ERROR:case S.BUFFER_STALLED_ERROR:case S.BUFFER_SEEK_OVER_HOLE:case S.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}t.type===T.KEY_SYSTEM_ERROR&&(n=this.getVariantLevelIndex(t.frag),t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,n))}},on.getPlaylistRetryOrSwitchAction=function(e,t){var n=Zt(this.hls.config.playlistLoadPolicy,e),i=this.playlistError++,r=null==(r=e.response)?void 0:r.code;return tn(n,i,Jt(e),r)?{action:5,flags:0,retryConfig:n,retryCount:i}:(r=this.getLevelSwitchAction(e,t),n&&(r.retryConfig=n,r.retryCount=i),r)},on.getFragRetryOrSwitchAction=function(e){var t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],r=(a=t.config).fragLoadPolicy,a=a.keyLoadPolicy;return a=Zt(e.details.startsWith("key")?a:r,e),r=t.levels.reduce((function(e,t){return e+t.fragmentError}),0),i&&(e.details!==S.FRAG_GAP&&i.fragmentError++,i=null==(t=e.response)?void 0:t.code,tn(a,r,Jt(e),i))?{action:5,flags:0,retryConfig:a,retryCount:r}:(t=this.getLevelSwitchAction(e,n),a&&(t.retryConfig=a,t.retryCount=r),t)},on.getLevelSwitchAction=function(e,t){var n=this.hls,i=(null==t&&(t=n.loadLevel),this.hls.levels[t]);if(i&&(i.loadError++,n.autoLevelEnabled)){for(var r=-1,a=n.levels,o=n.loadLevel,s=n.minAutoLevel,l=n.maxAutoLevel,u=null==(t=e.frag)?void 0:t.type,c=(t=null!=(t=e.context)?t:{}).type,h=t.groupId,d=a.length;d--;){var f=(d+o)%a.length;if(f!==o&&s<=f&&f<=l&&0===a[f].loadError){var p=a[f];if(e.details===S.FRAG_GAP&&e.frag){var m=a[f].details;if(m&&null!=(m=rn(e.frag,m.fragments,e.frag.start))&&m.gap)continue}else{if(c===_t&&h===p.audioGroupId||c===yt&&h===p.textGroupId)continue;if(u===At&&i.audioGroupId===p.audioGroupId||u===Et&&i.textGroupId===p.textGroupId)continue}r=f;break}}if(-1<r&&n.loadLevel!==r)return e.levelRetry=!0,{action:2,flags:this.playlistError=0,nextAutoLevel:r}}return{action:2,flags:1}},on.onErrorOut=function(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===S.FRAG_GAP||(t.fatal=!0)}t.fatal&&this.hls.stopLoad()},on.sendAlternateToPenaltyBox=function(e){var t=this.hls,n=e.errorAction;if(n){var i=n.flags,r=n.hdcpLevel,a=n.nextAutoLevel;switch(i){case 0:this.switchLevel(e,a);break;case 1:n.resolved||(n.resolved=this.redundantFailover(e));break;case 2:r&&(t.maxHdcpLevel=Ft[Ft.indexOf(r)-1],n.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}n.resolved||this.switchLevel(e,a)}},on.switchLevel=function(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},on.redundantFailover=function(e){var t=this,n=this.hls,i=this.penalizedRenditions,r=e.parent===vt?e.level||0:n.loadLevel,a=n.levels[r],o=a.url.length,s=(e.frag||a).urlId;a.urlId!==s||e.frag&&!a.details||this.penalizeRendition(a,e);for(var l,u=1;u<o;u++)if(l=function(){var l=(s+u)%o,c=i[l];if(!c||function(e,t,n){if(3e5<performance.now()-e.lastErrorPerfMs)return 1;var i=e.details;if(t.details===S.FRAG_GAP&&i&&t.frag){var r=t.frag.start;if((r=rn(null,i.fragments,r))&&!r.gap)return 1}return n&&e.errors.length<n.errors.length&&(r=e.errors[e.errors.length-1],i&&r.frag&&t.frag&&Math.abs(r.frag.start-t.frag.start)>3*i.targetduration)?1:void 0}(c,e,i[s]))return t.warn("Switching to Redundant Stream "+(1+l)+"/"+o+': "'+a.url[l]+'" after '+e.details),t.playlistError=0,n.levels.forEach((function(e){e.urlId=l})),n.nextLoadLevel=r,{v:!0}}())return l.v;return!1},on.penalizeRendition=function(e,t){var n=this.penalizedRenditions,i=n[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(t),i.details=e.details,n[e.urlId]=i},V=An;var on=((on=vn.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},on.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},on.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},on.stopLoad=function(){this.canLoad=!1,this.clearTimer()},on.switchParams=function(e,t){var n=null==t?void 0:t.renditionReports;if(n){for(var i,r,a,o=-1,s=0;s<n.length;s++){var l=n[s],u=void 0;try{u=new self.URL(l.URI,t.url).href}catch(e){P.warn("Could not construct new URL for Rendition Report: "+e),u=l.URI||""}if(u===e){o=s;break}u===e.substring(0,u.length)&&(o=s)}if(-1!==o)return r=n[o],i=parseInt(r["LAST-MSN"])||(null==t?void 0:t.lastPartSn),r=parseInt(r["LAST-PART"])||(null==t?void 0:t.lastPartIndex),this.hls.config.lowLatencyMode&&(a=Math.min(t.age-t.partTarget,t.targetduration),0<=r)&&a>t.partTarget&&(r+=1),new Bt(i,0<=r?r:void 0,"")}},on.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},on.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},on.shouldReloadPlaylist=function(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)},on.playlistLoaded=function(e,t,n){var i=this,r=t.details,a=t.stats,s=self.performance.now(),l=a.loading.first?Math.max(0,s-a.loading.first):0;if(r.advancedDateTime=Date.now()-l,r.live||null!=n&&n.live){if(r.reloaded(n),n&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:"MISSED")),n&&0<r.fragments.length&&function(e,t){for(var n=null,i=e.fragments,r=i.length-1;0<=r;r--){var a=i[r].initSegment;if(a){n=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;for(var s,l,u,c=0,h=e,d=t,f=d.skippedSegments,p=Math.max(h.startSN,d.startSN)-d.startSN,m=(h.fragmentHint?1:0)+(f?d.endSN:Math.min(h.endSN,d.endSN))-d.startSN,g=d.startSN-h.startSN,_=d.fragmentHint?d.fragments.concat(d.fragmentHint):d.fragments,y=h.fragmentHint?h.fragments.concat(h.fragmentHint):h.fragments,v=p;v<=m;v++){var A=y[g+v],E=_[v];f&&!E&&v<f&&(E=d.fragments[v]=A),A&&E&&(A.relurl&&(c=A.cc-E.cc),b(A.startPTS)&&b(A.endPTS)&&(E.start=E.startPTS=A.startPTS,E.startDTS=A.startDTS,E.maxStartPTS=A.maxStartPTS,E.endPTS=A.endPTS,E.endDTS=A.endDTS,E.minEndPTS=A.minEndPTS,E.duration=A.endPTS-A.startPTS,E.duration&&(s=E),t.PTSKnown=t.alignedSliding=!0),E.elementaryStreams=A.elementaryStreams,E.loader=A.loader,E.stats=A.stats,E.urlId=A.urlId,A.initSegment)&&(E.initSegment=A.initSegment,n=A.initSegment)}if(n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){e.initSegment&&e.initSegment.relurl!==(null==n?void 0:n.relurl)||(e.initSegment=n)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed){P.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var w=t.skippedSegments;w--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=(h=e.dateRanges,l=t.dateRanges,p=t.recentlyRemovedDateranges,u=o({},h),p&&p.forEach((function(e){delete u[e]})),Object.keys(l).forEach((function(e){var t=new F(l[e].attr,u[e]);t.isValid?u[e]=t:P.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[e].attr)+'"')})),u));var T=t.fragments;if(c){P.warn("discontinuity sliding from playlist, take drift into account");for(var S=0;S<T.length;S++)T[S].cc+=c}t.skippedSegments&&(t.startCC=t.fragments[0].cc);var R=e.partList,I=t.partList;if(R&&I)for(var C=0,L=0,D=R.length;L<=D;L++){var k=R[L],x=I[L+C];k&&x&&k.index===x.index&&k.fragment.sn===x.fragment.sn?(x.elementaryStreams=k.elementaryStreams,x.stats=k.stats):C--}s?Wt(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):Kt(e,t),T.length&&(t.totalduration=t.edge-T[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart,h=t.advancedDateTime,t.advanced&&h?(p=t.edge,t.driftStart||(t.driftStartTime=h,t.driftStart=p),t.driftEndTime=h,t.driftEnd=p):(t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime)}(n,r),this.canLoad&&r.live){l=void 0;var u,c=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var h,d,f=this.hls.config.lowLatencyMode,p=(h=r.lastPartSn)===(d=r.endSN),m=(-1!==(m=r.lastPartIndex)?(l=p?d+1:h,c=p?f?0:m:m+1):l=d+1,(h=r.age)+r.ageHeader);if(0<(d=Math.min(m-r.partTarget,1.5*r.targetduration))&&(n&&d>n.tuneInGoal?(this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+d+" with playlist age: "+r.age),d=0):(l+=m=Math.floor(d/r.targetduration),void 0!==c&&(c+=Math.round(d%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+h.toFixed(2)+"s goal: "+d+" skip sn "+m+" to part "+c)),r.tuneInGoal=d),u=this.getDeliveryDirectives(r,t.deliveryDirectives,l,c),f||!p)return void this.loadPlaylist(u)}else r.canBlockReload&&(u=this.getDeliveryDirectives(r,t.deliveryDirectives,l,c));h=(n=this.hls.mainForwardBufferInfo)?n.end-n.len:0,void 0===(m=1e3*(r.edge-h))&&(m=1/0),d=1e3*r.targetduration,r.updated?(f=r.fragments).length&&m<4*d&&(m=1e3*f[f.length-1].duration)<d&&(d=m):d/=2,p=Math.round(d),r.updated&&s>this.requestScheduled+p&&(this.requestScheduled=a.loading.start),void 0!==l&&r.canBlockReload?this.requestScheduled=a.loading.first+p-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+p<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=p),t=this.requestScheduled-s,t=Math.max(0,t),this.log("reload live playlist "+e+" in "+Math.round(t)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(u)}),t)}}else this.clearTimer()},on.getDeliveryDirectives=function(e,t,n,i){s=n,r=e.canSkipUntil,a=e.canSkipDateRanges,o=e.endSN;var r,a,o,s=r&&(void 0!==s?s-o:0)<r?a?"v2":"YES":"";return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,s=""),new Bt(n,i,s)},on.checkRetry=function(e){var t=this,n=e.details,i=Jt(e),r=e.errorAction,a=(s=r||{}).action,o=void 0===(o=s.retryCount)?0:o,s=s.retryConfig;if(a=!!r&&!!s&&(5===a||!r.resolved&&2===a)){if(this.requestScheduled=-1,o>=s.maxNumRetry)return!1;i&&null!=(i=e.context)&&i.deliveryDirectives?(this.warn("Retrying playlist loading "+(o+1)+"/"+s.maxNumRetry+' after "'+n+'" without delivery-directives'),this.loadPlaylist()):(i=$t(s,o),this.timer=self.setTimeout((function(){return t.loadPlaylist()}),i),this.warn("Retrying playlist loading "+(o+1)+"/"+s.maxNumRetry+' after "'+n+'" in '+i+"ms")),e.levelRetry=!0,r.resolved=!0}return a},vn),sn=((un=yn.prototype).sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},un.getTotalWeight=function(){return this.totalWeight_},un.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},yn),ln=((un=_n.prototype).update=function(e,t){var n=this.slow_,i=this.fast_,r=this.ttfb_;n.halfLife!==e&&(this.slow_=new sn(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new sn(t,i.getEstimate(),i.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new sn(e,r.getEstimate(),r.getTotalWeight()))},un.sample=function(e,t){t=8*t/(e=(e=Math.max(e,this.minDelayMs_))/1e3),this.fast_.sample(e,t),this.slow_.sample(e,t)},un.sampleTTFB=function(e){var t=e/1e3;t=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2),this.ttfb_.sample(t,Math.max(e,5))},un.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},un.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},un.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},un.destroy=function(){},_n),un=((un=gn.prototype).resetEstimator=function(e){e&&(P.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.bwEstimator=this.initEstimator()},un.initEstimator=function(){var e=this.hls.config;return new ln(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},un.registerListeners=function(){var e=this.hls;e.on(w.FRAG_LOADING,this.onFragLoading,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this)},un.unregisterListeners=function(){var e=this.hls;e.off(w.FRAG_LOADING,this.onFragLoading,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this)},un.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},un.onFragLoading=function(e,t){var n=t.frag;this.ignoreFragment(n)||(this.fragCurrent=n,this.partCurrent=null!=(n=t.part)?n:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},un.onLevelSwitching=function(e,t){this.clearTimer()},un.getTimeToLoadFrag=function(e,t,n,i){return e+n/t+(i?this.lastLevelLoadSec:0)},un.onLevelLoaded=function(e,t){var n=this.hls.config,i=(r=t.stats).total,r=r.bwEstimate;b(i)&&b(r)&&(this.lastLevelLoadSec=8*i/r),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},un._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,r=n.media;if(e&&r){var a=performance.now(),o=(t||e).stats,s=(t||e).duration;if(a-=o.loading.start,o.aborted||o.loaded&&o.loaded===o.total||0===e.level)this.clearTimer(),this._nextAutoLevel=-1;else if(i&&!r.paused&&r.playbackRate&&r.readyState&&null!==(i=n.mainForwardBufferInfo)){var l=this.bwEstimator.getEstimateTTFB();if(r=Math.abs(r.playbackRate),!(a<=Math.max(l,s/(2*r)*1e3))){var u=i.len/r;if(!(2*s/r<=u)){i=o.loading.first?o.loading.first-o.loading.start:-1,r=o.loaded&&-1<i;var c,h=this.getBwEstimate(),d=n.levels,f=n.minAutoLevel,p=d[e.level];if(p=o.total||Math.max(o.loaded,Math.round(s*p.maxBitrate/8)),(c=a-i)<1&&r&&(c=Math.min(a,8*o.loaded/h)),!((p=(c=r?1e3*o.loaded/c:0)?(p-o.loaded)/c:8*p/h+l/1e3)<=u)){for(var m=c?8*c:h,g=Number.POSITIVE_INFINITY,_=e.level-1;f<_;_--){var y=d[_].maxBitrate;if((g=this.getTimeToLoadFrag(l/1e3,m,s*y,!d[_].details))<u)break}p<=g||10*s<g||(n.nextLoadLevel=_,r?this.bwEstimator.sample(a-Math.min(l,i),o.loaded):this.bwEstimator.sampleTTFB(a),this.clearTimer(),P.warn("[abr] Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly;\n      Time to underbuffer: "+u.toFixed(3)+" s\n      Estimated load time for current fragment: "+p.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+g.toFixed(3)+" s\n      TTFB estimate: "+i+"\n      Current BW estimate: "+(b(h)?(h/1024).toFixed(3):"Unknown")+" Kb/s\n      New BW estimate: "+(this.bwEstimator.getEstimate()/1024).toFixed(3)+" Kb/s\n      Aborting and switching to level "+_),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(w.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o}))}}}}}},un.onFragLoaded=function(e,t){var n,i,r,a=t.frag,o=((t=t.part)||a).stats;a.type===vt&&this.bwEstimator.sampleTTFB(o.loading.first-o.loading.start),this.ignoreFragment(a)||(this.clearTimer(),this.lastLoadedFragLevel=a.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(i=(t||a).duration,n=((r=this.hls.levels[a.level]).loaded?r.loaded.bytes:0)+o.loaded,i=(r.loaded?r.loaded.duration:0)+i,r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)),a.bitrateTest&&(r={stats:o,frag:a,part:t,id:a.type},this.onFragBuffered(w.FRAG_BUFFERED,r),a.bitrateTest=!1))},un.onFragBuffered=function(e,t){var n,i=t.frag;(t=(null!=(t=t.part)&&t.stats.loaded?t:i).stats).aborted||this.ignoreFragment(i)||(n=t.parsing.end-t.loading.start-Math.min(t.loading.first-t.loading.start,this.bwEstimator.getEstimateTTFB()),this.bwEstimator.sample(n,t.loaded),t.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0)},un.ignoreFragment=function(e){return e.type!==vt||"initSegment"===e.sn},un.clearTimer=function(){self.clearInterval(this.timer)},un.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=(o=this.hls).maxAutoLevel,i=o.config,r=o.minAutoLevel,a=o.media,o=(t=t?t.duration:e?e.duration:0,e=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,a=this.getBwEstimate(),((o=o.mainForwardBufferInfo)?o.len:0)/e);if(0<=(e=this.findBestLevel(a,r,n,o,i.abrBandWidthFactor,i.abrBandWidthUpFactor)))return e;P.trace("[abr] "+(o?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var s,l=t?Math.min(t,i.maxStarvationDelay):i.maxStarvationDelay,u=i.abrBandWidthFactor,c=i.abrBandWidthUpFactor;return o||(s=this.bitrateTestDelay)&&(l=(t?Math.min(t,i.maxLoadingDelay):i.maxLoadingDelay)-s,P.trace("[abr] bitrate test took "+Math.round(1e3*s)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*l)+" ms"),u=c=1),e=this.findBestLevel(a,r,n,o+l,u,c),Math.max(e,0)},un.getBwEstimate=function(){return this.bwEstimator?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},un.findBestLevel=function(e,t,n,i,r,a){for(var o,s=this.fragCurrent,l=this.partCurrent,u=this.lastLoadedFragLevel,c=this.hls.levels,h=c[u],d=!(null==h||null==(o=h.details)||!o.live),f=null==h?void 0:h.codecSet,p=l?l.duration:s?s.duration:0,m=this.bwEstimator.getEstimateTTFB()/1e3,g=t,_=-1,y=n;t<=y;y--)if(!(A=c[y])||f&&A.codecSet!==f)A&&(g=Math.min(y,g),_=Math.max(y,_));else{-1!==_&&P.trace("[abr] Skipped level(s) "+g+"-"+_+' with CODECS:"'+c[_].attrs.CODECS+'"; not compatible with "'+h.attrs.CODECS+'"');var v,A=A.details,E=(l?null==A?void 0:A.partTarget:null==A?void 0:A.averagetargetduration)||p,w=c[y].maxBitrate;if(A=this.getTimeToLoadFrag(m,v=y<=u?r*e:a*e,w*E,void 0===A),P.trace("[abr] level:"+y+" adjustedbw-bitrate:"+Math.round(v-w)+" avgDuration:"+E.toFixed(1)+" maxFetchDuration:"+i.toFixed(1)+" fetchDuration:"+A.toFixed(1)),w<v&&(A<=m||!b(A)||d&&!this.bitrateTestDelay||A<i))return y}return-1},a(gn,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;if(t=this.getNextABRAutoLevel(),-1!==e){var n=this.hls.levels;if(n.length>Math.max(e,t)&&n[e].loadError<=n[t].loadError)return e}return-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}}]),gn),cn=((cn=mn.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},cn.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},cn.onHandlerDestroyed=function(){},cn.hasInterval=function(){return!!this._tickInterval},cn.hasNextTick=function(){return!!this._tickTimer},cn.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},cn.clearInterval=function(){return!(!this._tickInterval||(self.clearInterval(this._tickInterval),this._tickInterval=null))},cn.clearNextTick=function(){return!(!this._tickTimer||(self.clearTimeout(this._tickTimer),this._tickTimer=null))},cn.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},cn.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},cn.doTick=function(){},mn),hn="NOT_LOADED",dn="PARTIAL",fn=((rr=pn.prototype)._registerListeners=function(){var e=this.hls;e.on(w.BUFFER_APPENDED,this.onBufferAppended,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this)},rr._unregisterListeners=function(){var e=this.hls;e.off(w.BUFFER_APPENDED,this.onBufferAppended,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this)},rr.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},rr.getAppendedFrag=function(e,t){var n=this.activePartLists[t];if(n)for(var i=n.length;i--;){var r=n[i];if(!r)break;var a=r.end;if(r.start<=e&&null!==a&&e<=a)return r}return this.getBufferedFrag(e,t)},rr.getBufferedFrag=function(e,t){for(var n=this.fragments,i=Object.keys(n),r=i.length;r--;){var a=n[i[r]];if((null==a?void 0:a.body.type)===t&&a.buffered&&(a=a.body).start<=e&&e<=a.end)return a}return null},rr.detectEvictedFragments=function(e,t,n,i){var r=this,a=(this.timeRanges&&(this.timeRanges[e]=t),(null==i?void 0:i.fragment.sn)||-1);Object.keys(this.fragments).forEach((function(i){var o=r.fragments[i];!o||a>=o.body.sn||(o.buffered||o.loaded?(i=o.range[e])&&i.time.some((function(e){return(e=!r.isTimeBuffered(e.startPTS,e.endPTS,t))&&r.removeFragment(o.body),e})):o.body.type===n&&r.removeFragment(o.body))}))},rr.detectPartialFragments=function(e){var t,n,i=this,r=this.timeRanges,a=e.frag,o=e.part;r&&"initSegment"!==a.sn&&(e=bn(a),!(t=this.fragments[e])||t.buffered&&a.gap||(n=!a.relurl,Object.keys(r).forEach((function(e){var s,l=a.elementaryStreams[e];l&&(s=r[e],l=n||!0===l.partial,t.range[e]=i.getBufferedTimes(a,o,l,s))})),t.loaded=null,Object.keys(t.range).length?(t.buffered=!0,t.body.endList&&(this.endListFragments[t.body.type]=t),En(t)||this.removeParts(a.sn-1,a.type)):this.removeFragment(t.body)))},rr.removeParts=function(e,t){var n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter((function(t){return t.fragment.sn>=e})))},rr.fragBuffered=function(e,t){var n=bn(e),i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap)&&(this.hasGaps=!0),i&&(i.loaded=null,i.buffered=!0)},rr.getBufferedTimes=function(e,t,n,i){for(var r={time:[],partial:n},a=e.start,o=e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,u=0;u<i.length;u++){var c=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(c<=l&&s<=h){r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}if(a<h&&c<o)r.partial=!0,r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});else if(o<=c)break}return r},rr.getPartialFragment=function(e){var t,n,i=null,r=0,a=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(s){(s=o[s])&&En(s)&&(t=s.body.start-a,n=s.body.end+a,t<=e)&&e<=n&&(t=Math.min(e-t,n-e),r<=t)&&(i=s.body,r=t)})),i},rr.isEndListAppended=function(e){return void 0!==(e=this.endListFragments[e])&&(e.buffered||En(e))},rr.getState=function(e){return e=bn(e),(e=this.fragments[e])?e.buffered?En(e)?dn:"OK":"APPENDING":hn},rr.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,i<=e&&t<=r)return!0;if(t<=i)return!1}return!1},rr.onFragLoaded=function(e,t){var n,i=t.frag,r=t.part;"initSegment"===i.sn||i.bitrateTest||(n=bn(i),this.fragments[n]={body:i,appendedPTS:null,loaded:r?null:t,buffered:!1,range:Object.create(null)})},rr.onBufferAppended=function(e,t){var n,i=this,r=t.frag,a=t.part,o=t.timeRanges;"initSegment"!==r.sn&&(n=r.type,a&&((t=this.activePartLists[n])||(this.activePartLists[n]=t=[]),t.push(a)),this.timeRanges=o,Object.keys(o).forEach((function(e){var t=o[e];i.detectEvictedFragments(e,t,n,a)})))},rr.onFragBuffered=function(e,t){this.detectPartialFragments(t)},rr.hasFragment=function(e){return e=bn(e),!!this.fragments[e]},rr.hasParts=function(e){return!(null==(e=this.activePartLists[e])||!e.length)},rr.removeFragmentsInRange=function(e,t,n,i,r){var a=this;i&&!this.hasGaps||Object.keys(this.fragments).forEach((function(o){var s;!(o=a.fragments[o])||(s=o.body).type!==n||i&&!s.gap||s.start<t&&s.end>e&&(o.buffered||r)&&a.removeFragment(s)}))},rr.removeFragment=function(e){var t,n=bn(e),i=(e.stats.loaded=0,e.clearElementaryStreamInfo(),this.activePartLists[e.type]);i&&(t=e.sn,this.activePartLists[e.type]=i.filter((function(e){return e.fragment.sn!==t}))),delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]},rr.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},pn);function pn(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}function mn(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}function gn(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}function _n(e,t,n,i){void 0===i&&(i=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new sn(e),this.fast_=new sn(t),this.defaultTTFB_=i,this.ttfb_=new sn(e)}function yn(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}function vn(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=P.log.bind(P,t+":"),this.warn=P.warn.bind(P,t+":"),this.hls=e}function An(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=P.log.bind(P,"[info]:"),this.warn=P.warn.bind(P,"[warning]:"),this.error=P.error.bind(P,"[error]:"),this.registerListeners()}function En(e){var t;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(t=e.range.audio)?void 0:t.partial)||(null==(t=e.range.audiovideo)?void 0:t.partial))}function bn(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}function wn(e,t,n,i,r,a){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=a}var Tn={length:0,start:function(){return 0},end:function(){return 0}},Sn=(Rn.isBuffered=function(e,t){try{if(e)for(var n=Rn.getBuffered(e),i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}catch(e){}return!1},Rn.bufferInfo=function(e,t,n){try{if(e){for(var i=Rn.getBuffered(e),r=[],a=0;a<i.length;a++)r.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(r,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},Rn.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){return e.start-t.start||t.end-e.end}));var i=[];if(n)for(var r=0;r<e.length;r++){var a,o=i.length;o&&(a=i[o-1].end,e[r].start-a<n)?e[r].end>a&&(i[o-1].end=e[r].end):i.push(e[r])}else i=e;for(var s,l=0,u=t,c=t,h=0;h<i.length;h++){var d=i[h].start,f=i[h].end;if(d<=t+n&&t<f)u=d,l=(c=f)-t;else if(t+n<d){s=d;break}}return{len:l,start:u||0,end:c||0,nextStart:s}},Rn.getBuffered=function(e){try{return e.buffered}catch(e){return P.log("failed to get media.buffered",e),Tn}},Rn);function Rn(){}function In(e,t){for(var n,i=0,r=e.length;i<r;i++)if((null==(n=e[i])?void 0:n.cc)===t)return e[i];return null}function Cn(e,t){e&&(t=e.start+t,e.start=e.startPTS=t,e.endPTS=t+e.duration)}function Ln(e,t){for(var n=t.fragments,i=0,r=n.length;i<r;i++)Cn(n[i],e);t.fragmentHint&&Cn(t.fragmentHint,e),t.alignedSliding=!0}function Pn(e,t){var n,i,r,a,o;e.hasProgramDateTime&&t.hasProgramDateTime&&(n=e.fragments,i=t.fragments,n.length)&&i.length&&(o=Math.min(t.endCC,e.endCC),t.startCC<o&&e.startCC<o&&(r=In(i,o),a=In(n,o)),r&&a||(a=In(n,(r=i[Math.floor(i.length/2)]).cc)||n[Math.floor(n.length/2)]),t=r.programDateTime,o=a.programDateTime,t)&&o&&Ln((o-t)/1e3-(a.start-r.start),e)}var Dn=Math.pow(2,17),kn=((rr=xn.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},rr.abort=function(){this.loader&&this.loader.abort()},rr.load=function(e,t){var n=this,r=e.url;if(!r)return Promise.reject(new Bn({type:T.NETWORK_ERROR,details:S.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(r?"part list":"url")),networkDetails:null}));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(l,u){if(n.loader&&n.loader.destroy(),e.gap){if(e.tagList.some((function(e){return"GAP"===e[0]})))return void u(On(e));e.gap=!1}var c=n.loader=e.loader=new(o||s)(a),h=Mn(e),d=en(a.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:Dn};e.stats=c.stats,c.load(h,f,{onSuccess:function(t,i,r,a){n.resetLoader(e,c),t=t.data,r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(t.slice(0,16)),t=t.slice(16)),l({frag:e,part:null,payload:t,networkDetails:a})},onError:function(t,a,o,s){n.resetLoader(e,c),u(new Bn({type:T.NETWORK_ERROR,details:S.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:i({url:r,data:void 0},t),error:new Error("HTTP Error "+t.code+" "+t.text),networkDetails:o,stats:s}))},onAbort:function(t,i,r){n.resetLoader(e,c),u(new Bn({type:T.NETWORK_ERROR,details:S.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:function(t,i,r){n.resetLoader(e,c),u(new Bn({type:T.NETWORK_ERROR,details:S.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:r,stats:t}))},onProgress:function(n,i,r,a){t&&t({frag:e,part:null,payload:r,networkDetails:a})}})}))},rr.loadPart=function(e,t,n){var r=this,a=(this.abort(),this.config),o=a.fLoader,s=a.loader;return new Promise((function(l,u){var c,h,d,f;r.loader&&r.loader.destroy(),e.gap||t.gap?u(On(e,t)):(c=r.loader=e.loader=new(o||s)(a),h=Mn(e,t),d=en(a.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Dn},t.stats=c.stats,c.load(h,f,{onSuccess:function(i,a,o,s){r.resetLoader(e,c),r.updateStatsFromPart(e,t),i={frag:e,part:t,payload:i.data,networkDetails:s},n(i),l(i)},onError:function(n,a,o,s){r.resetLoader(e,c),u(new Bn({type:T.NETWORK_ERROR,details:S.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:i({url:h.url,data:void 0},n),error:new Error("HTTP Error "+n.code+" "+n.text),networkDetails:o,stats:s}))},onAbort:function(n,i,a){e.stats.aborted=t.stats.aborted,r.resetLoader(e,c),u(new Bn({type:T.NETWORK_ERROR,details:S.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:a,stats:n}))},onTimeout:function(n,i,a){r.resetLoader(e,c),u(new Bn({type:T.NETWORK_ERROR,details:S.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:a,stats:n}))}}))}))},rr.updateStatsFromPart=function(e,t){var n=e.stats,i=t.stats,r=i.total;n.loaded+=i.loaded,r?(r=((e=Math.round(e.duration/t.duration))-(t=Math.min(Math.round(n.loaded/r),e)))*Math.round(n.loaded/t),n.total=n.loaded+r):n.total=Math.max(n.loaded,n.total),e=n.loading,t=i.loading,e.start?e.first+=t.first-t.start:(e.start=t.start,e.first=t.first),e.end=t.end},rr.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},xn);function xn(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}function Mn(e,t){var n,i,r=(t=void 0===t?null:t)||e,a=(t={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},r.byteRangeStartOffset);return r=r.byteRangeEndOffset,b(a)&&b(r)&&(n=a,i=r,"initSegment"===e.sn&&"AES-128"===(null==(e=e.decryptdata)?void 0:e.method)&&((e=r-a)%16&&(i=r+(16-e%16)),0!==a)&&(t.resetIV=!0,n=a-16),t.rangeStart=n,t.rangeEnd=i),t}function On(e,t){var n=new Error("GAP "+(e.gap?"tag":"attribute")+" found");return n={type:T.MEDIA_ERROR,details:S.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null},t&&(n.part=t),(t||e).stats.aborted=!0,new Bn(n)}s(li,Fn=h(Error));var Nn,Fn,Bn=li,Un=(si.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},si),jn=(oi.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},oi),Gn=((rr=ai.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},rr.initTable=function(){var e,t=this.sBox,n=this.invSBox,i=(e=this.subMix)[0],r=e[1],a=e[2],o=e[3],s=(e=this.invSubMix)[0],l=e[1],u=e[2],c=e[3],h=new Uint32Array(256),d=0,f=0,p=0;for(p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var m=f^f<<1^f<<2^f<<3^f<<4,g=(t[d]=m=m>>>8^255&m^99,h[n[m]=d]),_=h[g],y=h[_],v=257*h[m]^16843008*m;i[d]=v<<24|v>>>8,r[d]=v<<16|v>>>16,a[d]=v<<8|v>>>24,o[d]=v,s[m]=(v=16843009*y^65537*_^257*g^16843008*d)<<24|v>>>8,l[m]=v<<16|v>>>16,u[m]=v<<8|v>>>24,c[m]=v,d?(d=g^h[h[h[y^g]]],f^=h[h[f]]):d=f=1}},rr.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var a,o,s,l=this.ksRows=4*(r+6+1),u=this.keySchedule=new Uint32Array(l),c=this.invKeySchedule=new Uint32Array(l),h=this.sBox,d=this.rcon,f=(e=this.invSubMix)[0],p=e[1],m=e[2],g=e[3],_=0;_<l;_++)_<r?o=u[_]=t[_]:(s=o,_%r==0?(s=h[(s=s<<8|s>>>24)>>>24]<<24|h[s>>>16&255]<<16|h[s>>>8&255]<<8|h[255&s],s^=d[_/r|0]<<24):6<r&&_%r==4&&(s=h[s>>>24]<<24|h[s>>>16&255]<<16|h[s>>>8&255]<<8|h[255&s]),u[_]=o=(u[_-r]^s)>>>0);for(a=0;a<l;a++)_=l-a,s=3&a?u[_]:u[_-4],c[a]=a<4||_<=4?s:f[h[s>>>24]]^p[h[s>>>16&255]]^m[h[s>>>8&255]]^g[h[255&s]],c[a]=c[a]>>>0}},rr.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},rr.decrypt=function(e,t,n){for(var i,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y=this.keySize+6,v=this.invKeySchedule,A=this.invSBox,E=(_=this.invSubMix)[0],b=_[1],w=_[2],T=_[3],S=(_=this.uint8ArrayToUint32Array_(n))[0],R=_[1],I=_[2],C=_[3],L=new Int32Array(e),P=new Int32Array(L.length),D=this.networkToHostOrderSwap;t<L.length;){for(h=D(L[t]),d=D(L[t+1]),f=D(L[t+2]),p=D(L[t+3]),s=h^v[0],l=p^v[1],u=f^v[2],c=d^v[3],m=4,g=1;g<y;g++)i=E[s>>>24]^b[l>>16&255]^w[u>>8&255]^T[255&c]^v[m],r=E[l>>>24]^b[u>>16&255]^w[c>>8&255]^T[255&s]^v[m+1],a=E[u>>>24]^b[c>>16&255]^w[s>>8&255]^T[255&l]^v[m+2],o=E[c>>>24]^b[s>>16&255]^w[l>>8&255]^T[255&u]^v[m+3],s=i,l=r,u=a,c=o,m+=4;i=A[s>>>24]<<24^A[l>>16&255]<<16^A[u>>8&255]<<8^A[255&c]^v[m],r=A[l>>>24]<<24^A[u>>16&255]<<16^A[c>>8&255]<<8^A[255&s]^v[m+1],a=A[u>>>24]<<24^A[c>>16&255]<<16^A[s>>8&255]<<8^A[255&l]^v[m+2],o=A[c>>>24]<<24^A[s>>16&255]<<16^A[l>>8&255]<<8^A[255&u]^v[m+3],P[t]=D(i^S),P[t+1]=D(o^R),P[t+2]=D(a^I),P[t+3]=D(r^C),S=h,R=d,I=f,C=p,t+=4}return P.buffer},ai),Vn=((rr=ri.prototype).destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},rr.isSync=function(){return this.useSoftware},rr.flush=function(){var e,t,n=this.currentResult,i=this.remainderData;return!n||i?(this.reset(),null):(i=new Uint8Array(n),this.reset(),this.removePKCS7Padding?(t=(e=(n=i).byteLength)&&new DataView(n.buffer).getUint8(e-1))?ue(n,0,e-t):n:i)},rr.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},rr.decrypt=function(e,t,n){var i=this;return this.useSoftware?new Promise((function(r,a){i.softwareDecrypt(new Uint8Array(e),t,n);var o=i.flush();o?r(o.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)},rr.softwareDecrypt=function(e,t,n){var i=this.currentIV,r=this.currentResult,a=this.remainderData;return(this.logOnce("JS AES decrypt"),a&&(e=Ne(a,e),this.remainderData=null),a=this.getValidChunk(e)).length?(i&&(n=i),(e=(e=this.softwareDecrypter)||(this.softwareDecrypter=new Gn)).expandKey(t),i=r,this.currentResult=e.decrypt(a.buffer,0,n),this.currentIV=ue(a,-16).buffer,i||null):null},rr.webCryptoDecrypt=function(e,t,n){var i=this,r=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new jn(r,t)),this.fastAesKey.expandKey().then((function(t){return r?(i.logOnce("WebCrypto AES decrypt"),new Un(r,new Uint8Array(n)).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return P.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+r.name+": "+r.message),i.onWebCryptoError(e,t,n)}))},rr.onWebCryptoError=function(e,t,n){if(this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n),e=this.flush())return e.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},rr.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=ue(e,0,n),this.remainderData=ue(e,n)),t},rr.logOnce=function(e){this.logEnabled&&(P.log("[decrypter]: "+e),this.logEnabled=!1)},ri),Hn="STOPPED",Yn="IDLE",zn="KEY_LOADING",Wn="FRAG_LOADING",Kn="FRAG_LOADING_WAITING_RETRY",qn="WAITING_TRACK",Qn="PARSING",Xn="PARSED",Jn="ENDED",Zn="ERROR",$n="WAITING_INIT_PTS",ei="WAITING_LEVEL",ti=(s(ii,Nn=cn),(rr=ii.prototype).doTick=function(){this.onTickEnd()},rr.onTickEnd=function(){},rr.startLoad=function(e){},rr.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Hn},rr._streamEnded=function(e,t){return!(t.live||e.nextStart||!e.end||!this.media)&&(null!=(e=t.partList)&&e.length?(e=e[e.length-1],Sn.isBuffered(this.media,e.start+e.duration/2)):(e=t.fragments[t.fragments.length-1].type,this.fragmentTracker.isEndListAppended(e)))},rr.getLevelDetails=function(){var e;return this.levels&&null!==this.levelLastLoaded&&null!=(e=this.levels[this.levelLastLoaded])?e.details:void 0},rr.onMediaAttached=function(e,t){t=this.media=this.mediaBuffer=t.media,this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended),t=this.config,this.levels&&t.autoStartLoad&&this.state===Hn&&this.startLoad(t.startPosition)},rr.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},rr.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,i=this.mediaBuffer,r=this.state,a=n?n.currentTime:0;i=Sn.bufferInfo(i||n,a,e.maxBufferHole),this.log("media seeking to "+(b(a)?a.toFixed(3):a)+", state: "+r),this.state===Jn?this.resetLoadingState():t&&(r=e.maxFragLookUpTolerance,e=t.start-r,r=t.start+t.duration+r,!i.len||r<i.start||e>i.end)&&(r=r<a,a<e||r)&&(r&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null),n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||i.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},rr.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},rr.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]},rr.onHandlerDestroying=function(){this.stopLoad(),Nn.prototype.onHandlerDestroying.call(this)},rr.onHandlerDestroyed=function(){this.state=Hn,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,Nn.prototype.onHandlerDestroyed.call(this)},rr.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},rr._loadFragForPlayback=function(e,t,n){var i=this;this._doFragLoad(e,t,n,(function(t){i.fragContextChanged(e)?(i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),i.fragmentTracker.removeFragment(e)):(e.stats.chunkCount++,i._handleFragmentLoadProgress(t))})).then((function(t){var n;t&&(n=i.state,i.fragContextChanged(e)?n!==Wn&&(i.fragCurrent||n!==Qn)||(i.fragmentTracker.removeFragment(e),i.state=Yn):("payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(w.FRAG_LOADED,t)),i._handleFragmentLoadComplete(t)))})).catch((function(t){i.state!==Hn&&i.state!==Zn&&(i.warn(t),i.resetFragmentLoading(e))}))},rr.clearTrackerIfNeeded=function(e){var t,n=this.fragmentTracker;"APPENDING"===n.getState(e)?(t=e.type,t=this.getFwdBufferInfo(this.mediaBuffer,t),t=Math.max(e.duration,t?t.len:this.config.maxBufferLength),this.reduceMaxBufferLength(t)&&n.removeFragment(e)):0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===dn)&&n.removeFragment(e)},rr.flushMainBuffer=function(e,t,n){void 0===n&&(n=null),e-t&&this.hls.trigger(w.BUFFER_FLUSHING,{startOffset:e,endOffset:t,type:n})},rr._loadInitSegment=function(e,t){var n=this;this._doFragLoad(e,t).then((function(t){if(t&&!n.fragContextChanged(e)&&n.levels)return t;throw new Error("init load aborted")})).then((function(t){var i,r=n.hls,a=t.payload,o=e.decryptdata;return a&&0<a.byteLength&&o&&o.key&&o.iv&&"AES-128"===o.method?(i=self.performance.now(),n.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer).catch((function(t){throw r.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((function(n){var a=self.performance.now();return r.trigger(w.FRAG_DECRYPTED,{frag:e,payload:n,stats:{tstart:i,tdecrypt:a}}),t.payload=n,t}))):t})).then((function(i){if(!n.levels)throw new Error("init load aborted, missing levels");var r=e.stats;n.state=Yn,t.fragmentError=0,e.data=new Uint8Array(i.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),n.tick()})).catch((function(t){n.state!==Hn&&n.state!==Zn&&(n.warn(t),n.resetFragmentLoading(e))}))},rr.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},rr.fragBufferedComplete=function(e,t){var n=this.mediaBuffer||this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+(this.playlistType===vt?"level":"track")+" "+e.level+" (frag:["+(null!=(t=e.startPTS)?t:NaN).toFixed(3)+"-"+(null!=(t=e.endPTS)?t:NaN).toFixed(3)+"] > buffer:"+(n?function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+"-"+e.end(i).toFixed(3)+"]";return t}(Sn.getBuffered(n)):"(detached)")+")"),this.state=Yn,n&&(!this.loadedmetadata&&e.type==vt&&n.buffered.length&&(null==(t=this.fragCurrent)?void 0:t.sn)===(null==(e=this.fragPrevious)?void 0:e.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},rr.seekToStartPos=function(){},rr._handleFragmentLoadComplete=function(e){var t,n,i=this.transmuxer;i&&(n=e.frag,t=e.part,e=!(e=e.partsLoaded)||0===e.length||e.some((function(e){return!e})),n=new wn(n.level,n.sn,n.stats.chunkCount+1,0,t?t.index:-1,!e),i.flush(n))},rr._handleFragmentLoadProgress=function(e){},rr._doFragLoad=function(e,t,n,i){var r=this,a=(void 0===n&&(n=null),null==t?void 0:t.details);if(!this.levels||!a)throw new Error("frag load aborted, missing level"+(a?"":" detail")+"s");var o=null;if(!e.encrypted||null!=(s=e.decryptdata)&&s.key?!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments):(this.log("Loading key for "+e.sn+" of ["+a.startSN+"-"+a.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=zn,this.fragCurrent=e,o=this.keyLoader.load(e).then((function(e){if(!r.fragContextChanged(e.frag))return r.hls.trigger(w.KEY_LOADED,e),r.state===zn&&(r.state=Yn),e})),this.hls.trigger(w.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){var s=a.partList;if(s&&i){var l;if(n>e.end&&a.fragmentHint&&(e=a.fragmentHint),-1<(c=this.getNextPart(s,e,n)))return l=s[c],this.log("Loading part sn: "+e.sn+" p: "+l.index+" cc: "+e.cc+" of playlist ["+a.startSN+"-"+a.endSN+"] parts [0-"+c+"-"+(s.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=l.start+l.duration,this.state=Wn,c=o?o.then((function(n){return!n||r.fragContextChanged(n.frag)?null:r.doFragPartsLoad(e,l,t,i)})).catch((function(e){return r.handleFragLoadError(e)})):this.doFragPartsLoad(e,l,t,i).catch((function(e){return r.handleFragLoadError(e)})),this.hls.trigger(w.FRAG_LOADING,{frag:e,part:l,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):c;if(!e.url||this.loadedEndOfParts(s,n))return Promise.resolve(null)}}this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(a?"of ["+a.startSN+"-"+a.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),b(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Wn;var u=this.config.progressive,c=u&&o?o.then((function(t){return!t||r.fragContextChanged(null==t?void 0:t.frag)?null:r.fragmentLoader.load(e,i)})).catch((function(e){return r.handleFragLoadError(e)})):Promise.all([this.fragmentLoader.load(e,u?i:void 0),o]).then((function(e){return e=e[0],!u&&e&&i&&i(e),e})).catch((function(e){return r.handleFragLoadError(e)}));return this.hls.trigger(w.FRAG_LOADING,{frag:e,targetBufferTime:n}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c},rr.doFragPartsLoad=function(e,t,n,i){var r=this;return new Promise((function(a,o){var s,l=[],u=null==(s=n.details)?void 0:s.partList;!function t(s){r.fragmentLoader.loadPart(e,s,i).then((function(i){var o=(l[s.index]=i).part;if(r.hls.trigger(w.FRAG_LOADED,i),!(i=Qt(n,e.sn,s.index+1)||Xt(u,e.sn,s.index+1)))return a({frag:e,part:o,partsLoaded:l});t(i)})).catch(o)}(t)}))},rr.handleFragLoadError=function(e){var t;return"data"in e?(t=e.data,e.data&&t.details===S.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(w.ERROR,t)):this.hls.trigger(w.ERROR,{type:T.OTHER_ERROR,details:S.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0}),null},rr._handleTransmuxerFlush=function(e){var t,n,i,r=this.getCurrentContext(e);r&&this.state===Qn?(t=r.frag,n=r.part,r=r.level,i=self.performance.now(),t.stats.parsing.end=i,n&&(n.stats.parsing.end=i),this.updateLevelTiming(t,n,r,e.partial)):this.fragCurrent||this.state===Hn||this.state===Zn||(this.state=Yn)},rr.getCurrentContext=function(e){var t,n,i=this.levels,r=this.fragCurrent,a=e.level,o=e.sn;return e=e.part,null!=i&&i[a]?(i=i[a],(n=(e=-1<e?Qt(i,o,e):null)?e.fragment:null!=i&&i.details?(t=i.details).fragments[o-t.startSN]||((n=t.fragmentHint)&&n.sn===o?n:o<t.startSN&&r&&r.sn===o?r:null):null)?(r&&r!==n&&(n.stats=r.stats),{frag:n,part:e,level:i}):null):(this.warn("Levels object was unset while buffering fragment "+o+" of level "+a+". The current chunk will not be buffered."),null)},rr.bufferFragmentData=function(e,t,n,i,r){var a,o,s;e&&this.state===Qn&&(s=e.data1,a=e.data2,null!=(o=(o=s)&&a?Ne(s,a):o))&&o.length&&(s={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:o},this.hls.trigger(w.BUFFER_APPENDING,s),e.dropped)&&e.independent&&!n&&!r&&this.flushBufferGap(t)},rr.flushBufferGap=function(e){var t,n,i=this.media;i&&(Sn.isBuffered(i,i.currentTime)?(t=i.currentTime,i=Sn.bufferInfo(i,t,0),n=e.duration,n=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),i=Math.max(Math.min(e.start-n,i.end-n),t+n),e.start-i>n&&this.flushMainBuffer(i,e.start)):this.flushMainBuffer(0,e.start))},rr.getFwdBufferInfo=function(e,t){var n=this.getLoadPosition();return b(n)?this.getFwdBufferInfoAtPos(e,n,t):null},rr.getFwdBufferInfoAtPos=function(e,t,n){var i=this.config.maxBufferHole,r=Sn.bufferInfo(e,t,i);return 0===r.len&&void 0!==r.nextStart&&(n=this.fragmentTracker.getBufferedFrag(t,n))&&r.nextStart<n.end?Sn.bufferInfo(e,t,Math.max(r.nextStart,i)):r},rr.getMaxBufferLength=function(e){var t=this.config;return e=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(e,t.maxMaxBufferLength)},rr.reduceMaxBufferLength=function(e){var t=this.config;return e=e||t.maxBufferLength,t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},rr.getAppendedFrag=function(e,t){return(e=this.fragmentTracker.getAppendedFrag(e,vt))&&"fragment"in e?e.fragment:e},rr.getNextFragment=function(e,t){var n=t.fragments,i=n.length;if(!i)return null;var r,a=this.config,o=n[0].start;if(t.live){var s=a.initialLiveManifestSize;if(i<s)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+s+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,n),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=o&&(r=n[0]);return r||(i=a.lowLatencyMode?t.partEnd:t.fragmentEnd,r=this.getFragmentAtPosition(e,i,t)),this.mapToInitFragWhenRequired(r)},rr.isLoopLoading=function(e,t){var n=this.fragmentTracker.getState(e);return("OK"===n||n===dn&&!!e.gap)&&this.nextLoadPosition>t},rr.getNextFragmentLoopLoading=function(e,t,n,i,r){var a=e.gap;return null===(t=this.getNextFragment(this.nextLoadPosition,t))?t:(e=t,a&&e&&!e.gap&&n.nextStart&&null!==(t=this.getFwdBufferInfoAtPos(this.mediaBuffer||this.media,n.nextStart,i))&&n.len+t.len>=r?(this.log('buffer full after gaps in "'+i+'" playlist starting at sn: '+e.sn),null):e)},rr.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},rr.getNextPart=function(e,t,n){for(var i=-1,r=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,-1<i&&n<l.start)break;var u=l.loaded;u?i=-1:(r||l.independent||a)&&l.fragment===t&&(i=o),r=u}return i},rr.loadedEndOfParts=function(e,t){return(e=e[e.length-1])&&t>e.start&&e.loaded},rr.getInitialLiveFragment=function(e,t){var n,i,r=this.fragPrevious,a=null;return r?(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(e,t,n){if(null!==t&&Array.isArray(e)&&e.length&&b(t)&&!(t<(e[0].programDateTime||0)||t>=(e[e.length-1].endProgramDateTime||0))){n=n||0;for(var i,r,a,o=0;o<e.length;++o){var s=e[o];if(i=t,a=s,r=1e3*Math.min(n,a.duration+(a.deltaPTS||0)),(a.endProgramDateTime||0)-r>i)return s}}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),a||((n=r.sn+1)>=e.startSN&&n<=e.endSN&&(n=t[n-e.startSN],r.cc===n.cc)&&this.log("Live playlist, switching playlist, load frag with next SN: "+(a=n).sn),!a&&(i=r.cc,a=nn(t,(function(e){return e.cc<i?1:e.cc>i?-1:0})))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn))):null!==(n=this.hls.liveSyncPosition)&&(a=this.getFragmentAtPosition(n,this.bitrateTest?e.fragmentEnd:e.edge,e)),a},rr.getFragmentAtPosition=function(e,t,n){var i=this.config,r=this.fragPrevious,a=n.fragments,o=n.endSN,s=n.fragmentHint,l=i.maxFragLookUpTolerance,u=n.partList;return(i=!!(i.lowLatencyMode&&null!=u&&u.length&&s))&&s&&!this.bitrateTest&&(a=a.concat(s),o=s.sn),(s=e<t?rn(r,a,e,t-l<e?0:l):a[a.length-1])&&(t=s.sn-n.startSN,r="OK"===(e=this.fragmentTracker.getState(s))||e===dn&&s.gap?s:r)&&s.sn===r.sn&&(!i||u[0].fragment.sn>s.sn)&&r&&s.level===r.level&&(l=a[1+t],s=s.sn<o&&"OK"!==this.fragmentTracker.getState(l)?l:null),s},rr.synchronizeToLiveEdge=function(e){var t,n,i,r,a=this.config,o=this.media;o&&(t=this.hls.liveSyncPosition,n=o.currentTime,r=e.fragments[0].start,i=e.edge,r=n>=r-a.maxFragLookUpTolerance&&n<=i,null!==t)&&o.duration>t&&(n<t||!r)&&(a=void 0!==a.liveMaxLatencyDuration?a.liveMaxLatencyDuration:a.liveMaxLatencyDurationCount*e.targetduration,!r&&o.readyState<4||n<i-a)&&(this.loadedmetadata||(this.nextLoadPosition=t),o.readyState)&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+i+", reset currentTime to : "+t.toFixed(3)),o.currentTime=t)},rr.alignPlaylists=function(e,t){var n,i,r,a,o,s=this.levels,l=this.levelLastLoaded,u=this.fragPrevious;return s=null!==l?s[l]:null,(l=e.fragments.length)?(n=e.fragments[0].start,i=!t,r=e.alignedSliding&&b(n),i||!r&&!n?(i=u,r=e,s&&(a=r,(o=s).details&&(a.endCC>a.startCC||i&&i.cc<a.startCC)&&(i=function(){var e=o.details.fragments,t=a.fragments;if(t.length&&e.length){if((e=In(e,t[0].cc))&&(!e||e.startPTS))return e;P.log("No frag in previous level to align on")}else P.log("No fragments to align")}())&&b(i.start)&&(P.log("Adjusting PTS using last level due to CC increase within current level "+a.url),Ln(i.start,a)),!r.alignedSliding&&s.details&&Pn(r,s.details),r.alignedSliding||!s.details||r.skippedSegments||Kt(s.details,r)),i=e.fragments[0].start,this.log("Live playlist sliding: "+i.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(u?u.sn:"na")+" fragments: "+l),i):n):(this.warn("No fragments in live playlist"),0)},rr.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},rr.setStartPosition=function(e,t){var n,i,r=this.startPosition;-1!==(r=r<t?-1:r)&&-1!==this.lastCurrentTime||(null!==(i=((n=null!==this.startTimeOffset)?this:e).startTimeOffset)&&b(i)?(r=t+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Start time offset "+i+" found in "+(n?"multivariant":"media")+" playlist, adjust startPosition to "+r),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r),this.nextLoadPosition=r},rr.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},rr.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},rr.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Kn)||(this.state=Yn)},rr.onFragmentOrKeyLoadError=function(e,t){t.chunkMeta&&!t.frag&&(n=this.getCurrentContext(t.chunkMeta))&&(t.frag=n.frag);var n=t.frag;if(n&&n.type===e&&this.levels)if(this.fragContextChanged(n))this.warn("Frag load error must match current frag to retry "+n.url+" > "+(null==(i=this.fragCurrent)?void 0:i.url));else{var i=t.details===S.FRAG_GAP,r=(i&&this.fragmentTracker.fragBuffered(n,!0),t.errorAction),a=(s=r||{}).action,o=void 0===(o=s.retryCount)?0:o,s=s.retryConfig;if(r&&5===a&&s){this.resetStartWhenNotLoaded(null!=(l=this.levelLastLoaded)?l:n.level);var l=$t(s,o);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" errored with "+t.details+", retrying loading "+(o+1)+"/"+s.maxNumRetry+" in "+l+"ms"),r.resolved=!0,this.retryDate=self.performance.now()+l,this.state=Kn}else if(s&&r){if(this.resetFragmentErrors(e),!(o<s.maxNumRetry))return void P.warn(t.details+" reached or exceeded max retry ("+o+")");i||3===a||(r.resolved=!0)}else 2===(null==r?void 0:r.action)?this.state=ei:this.state=Zn;this.tickImmediate()}},rr.reduceLengthAndFlushBuffer=function(e){var t,n,i;return(this.state===Qn||this.state===Xn)&&(t=e.parent,(n=(i=this.getFwdBufferInfo(this.mediaBuffer,t))&&.5<i.len)&&this.reduceMaxBufferLength(i.len),(i=!n)&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+t+" buffer"),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),i)},rr.resetFragmentErrors=function(e){e===At&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Hn&&(this.state=Yn)},rr.afterBufferFlushed=function(e,t,n){e&&(e=Sn.getBuffered(e),this.fragmentTracker.detectEvictedFragments(t,e,n),this.state===Jn)&&this.resetLoadingState()},rr.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Yn},rr.resetStartWhenNotLoaded=function(e){this.loadedmetadata||(this.startFragRequested=!1,null!=(e=this.levels?this.levels[e].details:null)&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition)},rr.resetWhenMissingContext=function(e){var t;this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:e.level),this.resetLoadingState()},rr.removeUnbufferedFrags=function(e){this.fragmentTracker.removeFragmentsInRange(e=void 0===e?0:e,1/0,this.playlistType,!1,!0)},rr.updateLevelTiming=function(e,t,n,i){var r=this,a=n.details;if(a){if(Object.keys(e.elementaryStreams).reduce((function(t,o){var s,l=e.elementaryStreams[o];return l?(s=l.endPTS-l.startPTS)<=0?(r.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+s+")"),t||!1):(s=i?0:Wt(a,e,l.startPTS,l.endPTS,l.startDTS,l.endDTS),r.hls.trigger(w.LEVEL_PTS_UPDATED,{details:a,level:n,drift:s,type:o,frag:e,start:l.startPTS,end:l.endPTS}),!0):t}),!1))n.fragmentError=0;else if(null===(null==(o=this.transmuxer)?void 0:o.error)){var o=new Error("Found no media in fragment "+e.sn+" of level "+e.level+" resetting transmuxer to fallback to playlist timing");if(0===n.fragmentError&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(o.message),this.hls.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,error:o,frag:e,reason:"Found no media in msn "+e.sn+' of level "'+n.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Xn,this.hls.trigger(w.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")},rr.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},rr.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(e=null!=(e=this.levelLastLoaded)?e:null==(e=this.fragCurrent)?void 0:e.level)?e:0),this.resetLoadingState())},a(ii,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),cn=ii,(rr=ni.prototype).push=function(e){this.chunks.push(e),this.dataLength+=e.length},rr.flush=function(){var e=this.chunks,t=this.dataLength;return e.length?(e=1===e.length?e[0]:function(e){for(var n=new Uint8Array(t),i=0,r=0;r<e.length;r++){var a=e[r];n.set(a,i),i+=a.length}return n}(e),this.reset(),e):new Uint8Array(0)},rr.reset=function(){this.chunks.length=0,this.dataLength=0},ni);function ni(){this.chunks=[],this.dataLength=0}function ii(e,t,n,i,r){var a;return(a=Nn.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=Hn,a.playlistType=void 0,a.media=null,a.mediaBuffer=null,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.startTimeOffset=null,a.loadedmetadata=!1,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.keyLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.playlistType=r,a.logPrefix=i,a.log=P.log.bind(P,i+":"),a.warn=P.warn.bind(P,i+":"),a.hls=e,a.fragmentLoader=new kn(e.config),a.keyLoader=n,a.fragmentTracker=t,a.config=e.config,a.decrypter=new Vn(e.config),e.on(w.MANIFEST_LOADED,a.onManifestLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}function ri(e,t){if(t=void 0===(t=(void 0===t?{}:t).removePKCS7Padding)||t,this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}function ai(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}function oi(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}function si(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}function li(e){var t;return(t=Fn.call(this,e.error.message)||this).data=void 0,t.data=e,t}function ui(e,t){return{type:e=void 0===e?"":e,id:-1,pid:-1,inputTimeScale:t=void 0===t?9e4:t,sequenceNumber:-1,samples:[],dropped:0}}(rr=hi.prototype).resetInitSegment=function(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},rr.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},rr.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},rr.canParse=function(e,t){return!1},rr.appendFrame=function(e,t,n){},rr.demux=function(e,t){this.cachedData&&(e=Ne(this.cachedData,e),this.cachedData=null);var n,i,r,a=de(e,0),o=a?a.length:0,s=this._audioTrack,l=this._id3Track,u=a?fe(a):void 0,c=e.length;for((null===this.basePTS||0===this.frameIndex&&b(u))&&(this.basePTS=ci(u,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),a&&0<a.length&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:Pt,duration:Number.POSITIVE_INFINITY});o<c;)this.canParse(e,o)?(i=this.appendFrame(s,e,o))?(this.frameIndex++,this.lastPTS=i.sample.pts,n=o+=i.length):o=c:ce(i=e,r=o)&&_e(i,r+6)+10<=i.length-r?(a=de(e,o),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:Pt,duration:Number.POSITIVE_INFINITY}),n=o+=a.length):o++,o===c&&n!==c&&(r=ue(e,n),this.cachedData?this.cachedData=Ne(this.cachedData,r):this.cachedData=r);return{audioTrack:s,videoTrack:ui(),id3Track:l,textTrack:ui()}},rr.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},rr.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:ui(),id3Track:this._id3Track,textTrack:ui()}},rr.destroy=function(){};var ci=function(e,t,n){return b(e)?90*e:9e4*t+(n?9e4*n.baseTime/n.timescale:0)};function hi(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}function di(e,t){return 255===e[t]&&240==(246&e[t+1])}function fi(e,t){return 1&e[t+1]?7:9}function pi(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function mi(e,t){return t+1<e.length&&di(e,t)}function gi(e,t,n,i,r){var a,o,s,l,u,c;!e.samplerate&&(o=navigator.userAgent.toLowerCase(),s=r,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],u=1+((192&n[i+2])>>>6),c=(60&n[i+2])>>>2,i=l.length-1<c?void t.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c}):(t=(1&n[i+2])<<2,t|=(192&n[i+3])>>>6,P.log("manifest codec:"+r+", ADTS type:"+u+", samplingIndex:"+c),n=/firefox/i.test(o)?6<=c?(u=5,a=new Array(4),c-3):(u=2,a=new Array(2),c):-1!==o.indexOf("android")?(u=2,a=new Array(2),c):(u=5,a=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&6<=c?c-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(6<=c&&1==t||/vivaldi/i.test(o))||!r&&1==t)&&(u=2,a=new Array(2)),c)),a[0]=u<<3,a[0]|=(14&c)>>1,a[1]|=(1&c)<<7,a[1]|=t<<3,5===u&&(a[1]|=(14&n)>>1,a[2]=(1&n)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:l[c],channelCount:t,codec:"mp4a.40."+u,manifestCodec:s}))&&(e.config=i.config,e.samplerate=i.samplerate,e.channelCount=i.channelCount,e.codec=i.codec,e.manifestCodec=i.manifestCodec,P.log("parsed codec:"+e.codec+", rate:"+i.samplerate+", channels:"+i.channelCount))}function _i(e){return 9216e4/e}function yi(e,t,n,i,r){var a,o,s;return i+=r*_i(e.samplerate),r=function(){var e=fi(t,n);if(n+e<=t.length){var i=pi(t,n)-e;if(0<i)return{headerLength:e,frameLength:i}}}(),r?(o=r.frameLength,o=(r=r.headerLength)+o,(s=Math.max(0,n+o-t.length))?(a=new Uint8Array(o-r)).set(t.subarray(n+r,t.length),0):a=t.subarray(n+r,n+o),r={unit:a,pts:i},s||e.samples.push(r),{sample:r,length:o,missing:s}):(e=t.length-n,(a=new Uint8Array(e)).set(t.subarray(n,t.length),0),{sample:{unit:a,pts:i},length:e,missing:-1})}s(Li,vi=rr=hi),(Ai=Li.prototype).resetInitSegment=function(e,t,n,i){vi.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},Li.probe=function(e){if(e)for(var t,n,i,r,a=(de(e,0)||[]).length,o=e.length;a<o;a++)if(r=i=void 0,!mi(t=e,n=a)||n+(r=fi(t,n))>=t.length?void 0:!((i=pi(t,n))<=r)&&((r=n+i)===t.length||mi(t,r)))return P.log("ADTS sync word found !"),!0;return!1},Ai.canParse=function(e,t){return t+5<e.length&&di(e,t)&&pi(e,t)<=e.length-t},Ai.appendFrame=function(e,t,n){if(gi(e,this.observer,t,n,e.manifestCodec),(e=yi(e,t,n,this.basePTS,this.frameIndex))&&0===e.missing)return e};var vi,Ai=Li,Ei=/\/emsg[-/]ID3/i,bi=((bi=Ci.prototype).resetTimeStamp=function(){},bi.resetInitSegment=function(e,t,n,i){var r,a,o,s=this.videoTrack=ui("video",1),l=this.audioTrack=ui("audio",1),u=this.txtTrack=ui("text",1);this.id3Track=ui("id3",1),this.timeOffset=0,null!=e&&e.byteLength&&((e=ke(e)).video&&(r=(o=e.video).id,a=o.timescale,o=o.codec,s.id=r,s.timescale=u.timescale=a,s.codec=o),e.audio&&(a=(r=e.audio).id,o=r.timescale,e=r.codec,l.id=a,l.timescale=o,l.codec=e),u.id=Se.text,s.sampleDuration=0,s.duration=l.duration=i)},bi.resetContiguity=function(){this.remainderData=null},Ci.probe=function(e){return 0<De(e=16384<e.length?e.subarray(0,16384):e,["moof"]).length},bi.demux=function(e,t){this.timeOffset=t;var n,i=e,r=this.videoTrack,a=this.txtTrack,o=(this.config.progressive?(this.remainderData&&(i=Ne(this.remainderData,e)),e={valid:null,remainder:null},(o=De(n=i,["moof"]))&&(o.length<2?e.remainder=n:(o=o[o.length-1],e.valid=ue(n,0,o.byteOffset-8),e.remainder=ue(n,o.byteOffset-8))),n=e,this.remainderData=n.remainder,r.samples=n.valid||new Uint8Array):r.samples=i,this.extractID3Track(r,t));return a.samples=Fe(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},bi.flush=function(){var e=this.timeOffset,t=this.videoTrack,n=this.txtTrack,i=(t.samples=this.remainderData||new Uint8Array,this.remainderData=null,this.extractID3Track(t,this.timeOffset));return n.samples=Fe(e,t),{videoTrack:t,audioTrack:ui(),id3Track:i,textTrack:ui()}},bi.extractID3Track=function(e,t){var n=this.id3Track;return e.samples.length&&(e=De(e.samples,["emsg"]))&&e.forEach((function(e){var i,r;e=function(e){var t="",n="",i=0,r=0,a=0,o=0,s=0,l=0;if(0===(u=e[0])){for(;"\0"!==Re(e.subarray(l,l+1));)t+=Re(e.subarray(l,l+1)),l+=1;for(t+=Re(e.subarray(l,l+1)),l+=1;"\0"!==Re(e.subarray(l,l+1));)n+=Re(e.subarray(l,l+1)),l+=1;n+=Re(e.subarray(l,l+1)),l+=1,i=Ce(e,12),r=Ce(e,16),o=Ce(e,20),s=Ce(e,24),l=28}else if(1===u){i=Ce(e,l+=4);var u=Ce(e,l+=4),c=Ce(e,l+=4);for(l+=4,a=Math.pow(2,32)*u+c,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,P.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Ce(e,l),s=Ce(e,l+=4),l+=4;"\0"!==Re(e.subarray(l,l+1));)t+=Re(e.subarray(l,l+1)),l+=1;for(t+=Re(e.subarray(l,l+1)),l+=1;"\0"!==Re(e.subarray(l,l+1));)n+=Re(e.subarray(l,l+1)),l+=1;n+=Re(e.subarray(l,l+1)),l+=1}return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:r,eventDuration:o,id:s,payload:e.subarray(l,e.byteLength)}}(e),Ei.test(e.schemeIdUri)&&(i=b(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale,(r=4294967295===e.eventDuration?Number.POSITIVE_INFINITY:e.eventDuration/e.timeScale)<=.001&&(r=Number.POSITIVE_INFINITY),e=e.payload,n.samples.push({data:e,len:e.byteLength,dts:i,pts:i,type:Dt,duration:r}))})),n},bi.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},bi.destroy=function(){},Ci),wi=null,Ti=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Si=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ri=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Ii=[0,1,1,4];function Ci(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}function Li(e,t){var n;return(n=vi.call(this)||this).observer=void 0,n.config=void 0,n.observer=e,n.config=t,n}function Pi(e,t,n,i,r){if(!(n+24>t.length)){var a=Di(t,n);if(a&&n+a.frameLength<=t.length)return i+=r*(9e4*a.samplesPerFrame/a.sampleRate),r={unit:t.subarray(n,n+a.frameLength),pts:i,dts:i},e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(r),{sample:r,length:a.frameLength,missing:0}}}function Di(e,t){var n,i,r,a,o,s=e[t+1]>>3&3,l=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(1!=s&&0!=u&&15!=u&&3!=c)return o=e[t+2]>>1&1,n=e[t+3]>>6,u=1e3*Ti[14*(3==s?3-l:3==l?3:4)+u-1],c=Si[3*(3==s?0:2==s?1:2)+c],i=3==n?1:2,a=8*(s=Ri[s][l])*(r=Ii[l]),s=Math.floor(s*u/c+o)*r,null===wi&&(o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),wi=o?parseInt(o[1]):0),wi&&wi<=87&&2==l&&224e3<=u&&0==n&&(e[t+3]=128|e[t+3]),{sampleRate:c,channelCount:i,frameLength:s,samplesPerFrame:a}}function ki(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function xi(e,t){return t+1<e.length&&ki(e,t)}function Mi(e,t){var n=0,i=5;t+=i;for(var r=new Uint32Array(1),a=new Uint32Array(1),o=new Uint8Array(1);0<i;){o[0]=e[t];var s=Math.min(i,8),l=8-s;a[0]=4278190080>>>24+l<<l,r[0]=(o[0]&a[0])>>l,n=n?n<<s|r[0]:r[0],t+=1,i-=s}return n}s(Fi,Oi=rr),(Ni=Fi.prototype).resetInitSegment=function(e,t,n,i){Oi.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},Ni.canParse=function(e,t){return t+64<e.length},Ni.appendFrame=function(e,t,n){if(-1!==(t=Bi(e,t,n,this.basePTS,this.frameIndex)))return{sample:e.samples[e.samples.length-1],length:t,missing:0}},Fi.probe=function(e){var t,n;return!!e&&!!(t=de(e,0))&&11===e[n=t.length]&&119===e[n+1]&&void 0!==fe(t)&&Mi(e,n)<16};var Oi,Ni=Fi;function Fi(e){var t;return(t=Oi.call(this)||this).observer=void 0,t.observer=e,t}function Bi(e,t,n,i,r){var a,o,s,l,u,c,h,d,f;return n+8>t.length||11!==t[n]||119!==t[n+1]||3<=(h=t[n+4]>>6)||(a=[48e3,44100,32e3][h],n+(s=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*(o=63&t[n+4])+h])>t.length)?-1:(u=0,(2==(l=t[n+6]>>5)||(1&l&&1!=l&&(u+=2),4&l))&&(u+=2),u=(t[n+6]<<8|t[n+7])>>12-u&1,c=[2,1,2,3,3,4,4,5][l]+u,d=t[n+5]>>3,f=7&t[n+5],h=new Uint8Array([h<<6|d<<1|f>>2,(3&f)<<6|l<<3|u<<2|o>>4,o<<4&224]),d=i+r*(1536/a*9e4),f=t.subarray(n,n+s),e.config=h,e.channelCount=c,e.samplerate=a,e.samples.push({unit:f,pts:d}),s)}(Gi=$i.prototype).createVideoSample=function(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}},Gi.getLastNalUnit=function(e){var t,n=this.VideoSample;return null!=(n=n&&0!==n.units.length?n:e[e.length-1])&&n.units?(e=n.units)[e.length-1]:t},Gi.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,i=n.length;if(!i)return void t.dropped++;n=n[i-1],e.pts=n.pts,e.dts=n.dts}t.samples.push(e)}e.debug.length&&P.log(e.pts+"/"+e.dts+":"+e.debug)};var Ui,ji,Gi=$i,Vi=((_r=Zi.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4);if(0===(t=Math.min(4,t)))throw new Error("no bytes available");i.set(e.subarray(n,n+t)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},_r.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e||(e=(e-=this.bitsAvailable)-((t=e>>3)<<3),this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},_r.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;if(32<e&&P.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable)this.word<<=t;else{if(!(0<this.bytesAvailable))throw new Error("no bits available");this.loadWord()}return 0<(t=e-t)&&this.bitsAvailable?n<<t|this.readBits(t):n},_r.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},_r.skipUEG=function(){this.skipBits(1+this.skipLZ())},_r.skipEG=function(){this.skipBits(1+this.skipLZ())},_r.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},_r.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},_r.readBoolean=function(){return 1===this.readBits(1)},_r.readUByte=function(){return this.readBits(8)},_r.readUShort=function(){return this.readBits(16)},_r.readUInt=function(){return this.readBits(32)},_r.skipScalingList=function(e){for(var t=8,n=8,i=0;i<e;i++)t=0===(n=0!==n?(t+this.readEG()+256)%256:n)?t:n},_r.readSPS=function(){var e,t,n,i=0,r=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),h=this.skipBits.bind(this),d=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this),m=(s(),s());if(l(5),h(3),s(),f(),(100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m)&&(3===(m=u())&&h(1),f(),f(),h(1),c()))for(t=3!==m?8:12,n=0;n<t;n++)c()&&p(n<6?16:64);if(f(),0===(m=u()))u();else if(1===m)for(h(1),d(),d(),e=u(),n=0;n<e;n++)d();f(),h(1),m=u(),f=u();var g=(0===(l=l(1))&&h(1),h(1),c()&&(i=u(),r=u(),a=u(),o=u()),[1,1]);if(c()&&c())switch(s()){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(m+1)-2*i-2*r),height:(2-l)*(f+1)*16-(l?2:4)*(a+o),pixelRatio:g}},_r.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},_r.destroy=function(){this.data=null},Zi),Hi=(s(Ji,ji=Gi),(_r=Ji.prototype).parseAVCPES=function(e,t,n,i,r){var a,o=this,s=this.parseAVCNALu(e,n.data),l=this.VideoSample,u=!1;n.data=null,l&&s.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),s.forEach((function(i){switch(i.type){case 1:var s=!1;a=!0;var c=i.data;u&&4<c.length&&(2!==(c=new Vi(c).readSliceType())&&4!==c&&7!==c&&9!==c||(s=!0)),s&&null!=l&&l.frame&&!l.key&&(o.pushAccessUnit(l,e),l=o.VideoSample=null),(l=l||(o.VideoSample=o.createVideoSample(!0,n.pts,n.dts,""))).frame=!0,l.key=s;break;case 5:a=!0,null!=l&&l.frame&&!l.key&&(o.pushAccessUnit(l,e),l=o.VideoSample=null),(l=l||(o.VideoSample=o.createVideoSample(!0,n.pts,n.dts,""))).key=!0,l.frame=!0;break;case 6:a=!0,Be(i.data,1,n.pts,t.samples);break;case 7:if(u=a=!0,!e.sps){c=i.data,s=new Vi(c).readSPS(),e.width=s.width,e.height=s.height,e.pixelRatio=s.pixelRatio,e.sps=[c],e.duration=r;for(var h=c.subarray(1,4),d="avc1.",f=0;f<3;f++){var p=h[f].toString(16);d+=p=p.length<2?"0"+p:p}e.codec=d}break;case 8:a=!0,e.pps||(e.pps=[i.data]);break;case 9:a=!0,e.audFound=!0,l&&o.pushAccessUnit(l,e),l=o.VideoSample=o.createVideoSample(!1,n.pts,n.dts,"");break;case 12:a=!0;break;default:a=!1,l&&(l.debug+="unknown NAL "+i.type+" ")}l&&a&&l.units.push(i)})),i&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)},_r.parseAVCNALu=function(e,t){var n,i,r,a,o=t.byteLength,s=e.naluState||0,l=s,u=[],c=0,h=-1,d=0;for(-1===s&&(d=31&t[h=0],s=0,c=1);c<o;)n=t[c++],s=s?1!==s?n?1===n?(r=c-s-1,0<=h?(i={data:t.subarray(h,r),type:d},u.push(i)):(i=this.getLastNalUnit(e.samples))&&(l&&c<=4-l&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-l)),0<r)&&(i.data=Ne(i.data,t.subarray(0,r)),i.state=0),c<o?(d=31&t[h=c],0):-1):0:3:n?0:2:n?0:1;return 0<=h&&0<=s&&(a={data:t.subarray(h,o),type:d,state:s},u.push(a)),0===u.length&&(a=this.getLastNalUnit(e.samples))&&(a.data=Ne(a.data,t)),e.naluState=s,u},Ji),Yi=(Xi._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},Xi.parseVPS=function(e){return e=Xi._ebsp2rbsp(e),(e=new Vi(e)).readUByte(),e.readUByte(),e.readBits(4),e.readBits(2),e.readBits(6),{num_temporal_layers:e.readBits(3)+1,temporal_id_nested:e.readBoolean()}},Xi.parseSPS=function(e){e=Xi._ebsp2rbsp(e);var t=new Vi(e),n=(t.readUByte(),t.readUByte(),e=0,0),i=0,r=0,a=(t.readBits(4),t.readBits(3));t.readBoolean();for(var o=t.readBits(2),s=t.readBoolean(),l=t.readBits(5),u=t.readUByte(),c=t.readUByte(),h=t.readUByte(),d=t.readUByte(),f=t.readUByte(),p=t.readUByte(),m=t.readUByte(),g=t.readUByte(),_=t.readUByte(),y=t.readUByte(),v=t.readUByte(),A=[],E=[],b=0;b<a;b++)A.push(t.readBoolean()),E.push(t.readBoolean());if(0<a)for(var w=a;w<8;w++)t.readBits(2);for(var T=0;T<a;T++)A[T]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),E[T]&&t.readUByte();t.readUEG();var S=t.readUEG(),R=(3==S&&t.readBits(1),t.readUEG()),I=t.readUEG();t.readBoolean()&&(e+=t.readUEG(),n+=t.readUEG(),i+=t.readUEG(),r+=t.readUEG());for(var C=t.readUEG(),L=t.readUEG(),P=t.readUEG(),D=t.readBoolean()?0:a;D<=a;D++)t.readUEG(),t.readUEG(),t.readUEG();if(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBoolean()&&t.readBoolean())for(var k=0;k<4;k++)for(var x=0;x<(3===k?2:6);x++)if(t.readBoolean()){var M=Math.min(64,1<<4+(k<<1));1<k&&t.readEG();for(var O=0;O<M;O++)t.readEG()}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUEG(),t.readUEG(),t.readBoolean());for(var N=t.readUEG(),F=0,B=0;B<N;B++){var U=!1;if(U=0!==B?t.readBoolean():U){B===N&&t.readUEG(),t.readBoolean(),t.readUEG();for(var j=0,G=0;G<=F;G++){var V=t.readBoolean(),H=!1;V||(H=t.readBoolean()),(V||H)&&j++}F=j}else{for(var Y=t.readUEG(),z=t.readUEG(),W=(F=Y+z,0);W<Y;W++)t.readUEG(),t.readBoolean();for(var K=0;K<z;K++)t.readUEG(),t.readBoolean()}}if(t.readBoolean())for(var q=t.readUEG(),Q=0;Q<q;Q++){for(var X=0;X<P+4;X++)t.readBits(1);t.readBits(1)}var J=0,Z=1,$=1,ee=!1,te=1,ne=1;if(t.readBoolean(),t.readBoolean(),t.readBoolean()){if(t.readBoolean()&&(0<(fe=t.readUByte())&&fe<=16?(Z=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][fe-1],$=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][fe-1]):255===fe&&(Z=t.readBits(16),$=t.readBits(16))),t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean())&&(t.readUByte(),t.readUByte(),t.readUByte()),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG()),t.readBoolean()&&(te=t.readBits(32),ne=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){var ie=!1,re=t.readBoolean(),ae=t.readBoolean();(re||ae)&&((ie=t.readBoolean())&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),ie&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(var oe=0;oe<=a;oe++){var se=t.readBoolean(),le=(ee=se,!0),ue=1,ce=!1;if((le=se?le:t.readBoolean())?t.readUEG():ce=t.readBoolean(),ce||(ue=t.readUEG()+1),re){for(var he=0;he<ue;he++)t.readUEG(),t.readUEG(),ie&&(t.readUEG(),t.readUEG());t.readBoolean()}if(ae){for(var de=0;de<ue;de++)t.readUEG(),t.readUEG(),ie&&(t.readUEG(),t.readUEG());t.readBoolean()}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),J=t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG())}t.readBoolean();var fe="hvc1."+l+".1.L"+v+".B0";return R-=(e+n)*(1===S||2===S?2:1),e=I-(i+r)*(1===S?2:1),n=1!==Z&&1!==$?Z/$:1,t.destroy(),t=null,{codec_mimetype:fe,level_string:Xi.getLevelString(v),profile_idc:l,bit_depth:C+8,ref_frames:1,chroma_format:S,chroma_format_string:Xi.getChromaFormatString(S),general_level_idc:v,general_profile_space:o,general_tier_flag:s,general_profile_idc:l,general_profile_compatibility_flags_1:u,general_profile_compatibility_flags_2:c,general_profile_compatibility_flags_3:h,general_profile_compatibility_flags_4:d,general_constraint_indicator_flags_1:f,general_constraint_indicator_flags_2:p,general_constraint_indicator_flags_3:m,general_constraint_indicator_flags_4:g,general_constraint_indicator_flags_5:_,general_constraint_indicator_flags_6:y,min_spatial_segmentation_idc:J,constant_frame_rate:0,chroma_format_idc:S,bit_depth_luma_minus8:C,bit_depth_chroma_minus8:L,frame_rate:{fixed:ee,fps:ne/te,fps_den:te,fps_num:ne},sar_ratio:{width:Z,height:$},codec_size:{width:R,height:e},present_size:{width:R*n,height:e}}},Xi.parsePPS=function(e){e=Xi._ebsp2rbsp(e);var t=((e=new Vi(e)).readUByte(),e.readUByte(),e.readUEG(),e.readUEG(),e.readBoolean(),e.readBoolean(),e.readBits(3),e.readBoolean(),e.readBoolean(),e.readUEG(),e.readUEG(),e.readEG(),e.readBoolean(),e.readBoolean(),e.readBoolean()&&e.readUEG(),e.readEG(),e.readEG(),e.readBoolean(),e.readBoolean(),e.readBoolean(),e.readBoolean(),e.readBoolean()),n=1;return(e=e.readBoolean())&&t?n=0:e?n=3:t&&(n=2),{parallelismType:n}},Xi.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},Xi.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},Xi.getLevelString=function(e){return(e/30).toFixed(1)},Xi),zi=(s(Qi,Ui=Gi),(_r=Qi.prototype).parseAVCPES=function(e,t,n,r,a){var o,s=this,l=this.parseAVCNALu(e,n.data),u=this.VideoSample;n.data=null,u&&l.length&&!e.audFound&&(this.pushAccessUnit(u,e),u=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),l.forEach((function(r){switch(r.type){case 0:case 1:o=!0,(u=u||(s.VideoSample=s.createVideoSample(!0,n.pts,n.dts,""))).frame=!0;break;case 19:case 20:case 21:o=!0,(u=u||(s.VideoSample=s.createVideoSample(!0,n.pts,n.dts,""))).key=!0,u.frame=!0;break;case 32:o=!0,e.vps||(e.vps=[r.data]);break;case 33:var l;o=!0,e.sps||(c=r.data,l=Yi.parseSPS(c),e.width=l.codec_size.width,e.height=l.codec_size.height,e.pixelRatio=[l.sar_ratio.width,l.sar_ratio.height],e.sps=[c],e.duration=a,e.codec=l.codec_mimetype,e.details=i(i({},e.details),l));break;case 34:var c;o=!0,e.pps||(e.pps=[r.data],c=Yi.parsePPS(r.data),e.details=i(i({},e.details),c));break;case 35:o=!1,e.audFound=!0,u&&s.pushAccessUnit(u,e),u=s.VideoSample=s.createVideoSample(!1,n.pts,n.dts,"");break;case 39:o=!0,Be(r.data,1,n.pts,t.samples);break;default:o=!0}u&&o&&u.units.push(r)})),r&&u&&(this.pushAccessUnit(u,e),this.VideoSample=null)},_r.parseAVCNALu=function(e,t){var n,i,r,a,o=t.byteLength,s=e.naluState||0,l=s,u=[],c=0,h=-1,d=0;for(-1===s&&(d=t[h=0]>>1&63,s=0,c=1);c<o;)n=t[c++],s=s?1!==s?n?1===n?(r=c-s-1,0<=h?(i={data:t.subarray(h,r),type:d},u.push(i)):(i=this.getLastNalUnit(e.samples))&&(l&&c<=4-l&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-l)),0<r)&&(i.data=Ne(i.data,t.subarray(0,r)),i.state=0),c<o?(d=t[h=c]>>1&63,0):-1):0:3:n?0:2:n?0:1;return 0<=h&&0<=s&&(a={data:t.subarray(h,o),type:d,state:s},u.push(a)),0===u.length&&(a=this.getLastNalUnit(e.samples))&&(a.data=Ne(a.data,t)),e.naluState=s,u},Qi),Wi=((Gi=qi.prototype).decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},Gi.decryptAacSample=function(e,t,n){var i,r=this,a=e[t].unit;a.length<=16||(i=(i=a.subarray(16,a.length-a.length%16)).buffer.slice(i.byteOffset,i.byteOffset+i.length),this.decryptBuffer(i).then((function(i){i=new Uint8Array(i),a.set(i,16),r.decrypter.isSync()||r.decryptAacSamples(e,t+1,n)})))},Gi.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,n),this.decrypter.isSync())))return}},Gi.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},Gi.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)e.set(n.subarray(i,i+16),r);return e},Gi.decryptAvcSample=function(e,t,n,i,r){var a=this,o=Ue(r.data),s=this.getAvcEncryptedData(o);this.decryptBuffer(s.buffer).then((function(s){r.data=a.getAvcDecryptedUnit(o,s),a.decrypter.isSync()||a.decryptAvcSamples(e,t,n+1,i)}))},Gi.decryptAvcSamples=function(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,n,i,a),this.decrypter.isSync())))return}}},qi);function Ki(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.hevcVideoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new Hi,this.hevcVideoParser=new zi}function qi(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Vn(t,{removePKCS7Padding:!1})}function Qi(){return Ui.apply(this,arguments)||this}function Xi(){}function Ji(){return ji.apply(this,arguments)||this}function Zi(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function $i(){this.VideoSample=null}function er(e,t){return((31&e[t+1])<<8)+e[t+2]}function tr(e){P.log(e+" with AES-128-CBC encryption found in unencrypted stream")}function nr(e){var t,n,i,r,a=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&1<o.length;)o[0]=Ne(o[0],o[1]),o.splice(1,1);if(1!==((t=o[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var s=t[7],l=(192&s&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&s?54e5<i-(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(P.warn(Math.round((i-r)/9e4)+"s delta between PTS and DTS, align them"),i=r):r=i),(s=t[8])+9);if(e.size<=l)return null;e.size-=l;for(var u=new Uint8Array(e.size),c=0,h=o.length;c<h;c++){var d=(t=o[c]).byteLength;if(l){if(d<l){l-=d;continue}t=t.subarray(l),d-=l,l=0}u.set(t,a),a+=d}return n&&(n-=s+3),{data:u,pts:i,dts:r,len:n}}Ki.probe=function(e){return 0<(e=Ki.syncOffset(e))&&P.warn("MPEG2-TS detected but first sync word found @ offset "+e),-1!==e},Ki.syncOffset=function(e){for(var t=e.length,n=Math.min(940,e.length-188)+1,i=0;i<n;){for(var r=!1,a=-1,o=0,s=i;s<t;s+=188){if(71!==e[s]){if(o)return-1;break}if(o++,-1===a&&0!==(a=s)&&(n=Math.min(a+18612,e.length-188)+1),(r=r||0===er(e,s))&&1<o&&(0===a&&2<o||n<s+188))return a}i++}return-1},Ki.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:Se[e],pid:-1,segmentVideoCodec:"",inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}},(_r=Ki.prototype).resetInitSegment=function(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Ki.createTrack("video"),this._audioTrack=Ki.createTrack("audio",i),this._id3Track=Ki.createTrack("id3"),this._txtTrack=Ki.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i},_r.resetTimeStamp=function(){},_r.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null},_r.parseVideoAVCPES=function(e,t,n,i,r){"avc"===e.segmentCodec&&this.videoParser.parseAVCPES(e,t,n,i,r),"hevc"===e.segmentCodec&&this.hevcVideoParser.parseAVCPES(e,t,n,i,r)},_r.demux=function(e,t,n,i){void 0===i&&(i=!1),(n=void 0!==n&&n)||(this.sampleAes=null);var r,a=this._videoTrack,o=this._audioTrack,s=this._id3Track,l=this._txtTrack,u=a.pid,c=a.pesData,h=o.pid,d=s.pid,f=o.pesData,p=s.pesData,m=null,g=this.pmtParsed,_=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=Ne(this.remainderData,e)).length,this.remainderData=null),y<188&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};var v=Math.max(0,Ki.syncOffset(e));(y-=(y-v)%188)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));for(var A,E=0,b=v;b<y;b+=188)if(71===e[b]){var R=!!(64&e[b+1]),I=er(e,b),C=void 0;if(1<(48&e[b+3])>>4){if((C=b+5+e[b+4])===b+188)continue}else C=b+4;switch(I){case u:R&&(c&&(r=nr(c))&&this.parseVideoAVCPES(a,l,r,!1,this._duration),c={data:[],size:0}),c&&(c.data.push(e.subarray(C,b+188)),c.size+=b+188-C);break;case h:if(R){if(f&&(r=nr(f)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break;case"ac3":this.parseAC3PES(o,r)}f={data:[],size:0}}f&&(f.data.push(e.subarray(C,b+188)),f.size+=b+188-C);break;case d:R&&(p&&(r=nr(p))&&this.parseID3PES(s,r),p={data:[],size:0}),p&&(p.data.push(e.subarray(C,b+188)),p.size+=b+188-C);break;case 0:R&&(C+=e[C]+1),_=this._pmtId=(31&(L=e)[(A=C)+10])<<8|L[A+11];break;case _:R&&(C+=e[C]+1);var L=function(e,t,n,i){var r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var o=er(e,t),s=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!i){tr("ADTS AAC");break}case 15:-1===r.audioPid&&(r.audioPid=o);break;case 21:-1===r.id3Pid&&(r.id3Pid=o);break;case 219:if(!i){tr("H.264");break}case 27:-1===r.videoPid&&(r.videoPid=o,r.segmentVideoCodec="avc");break;case 3:case 4:n.mpeg||n.mp3?-1===r.audioPid&&(r.audioPid=o,r.segmentAudioCodec="mp3"):P.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){tr("AC-3");break}case 129:n.ac3?-1===r.audioPid&&(r.audioPid=o,r.segmentAudioCodec="ac3"):P.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===r.audioPid&&0<s)for(var l=t+5,u=s;2<u;){106===e[l]&&(!0!==n.ac3?P.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=o,r.segmentAudioCodec="ac3"));var c=e[l+1]+2;l+=c,u-=c}break;case 194:case 135:P.warn("Unsupported EC-3 in M2TS found");break;case 36:-1===r.videoPid&&(r.videoPid=o,r.segmentVideoCodec="hevc")}t+=5+s}return r}(e,C,this.typeSupported,n);0<(u=L.videoPid)&&(a.pid=u,a.segmentCodec=L.segmentVideoCodec),0<(h=L.audioPid)&&(o.pid=h,o.segmentCodec=L.segmentAudioCodec),0<(d=L.id3Pid)&&(s.pid=d),null===m||g||(P.warn("MPEG-TS PMT found at "+b+" after unknown PID '"+m+"'. Backtracking to sync byte @"+v+" to parse all TS packets."),m=null,b=v-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=I}}else E++;0<E&&(D=new Error("Found "+E+" TS packet/s that do not start with 0x47"),this.observer.emit(w.ERROR,w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,error:D,reason:D.message})),a.pesData=c,o.pesData=f,s.pesData=p;var D={audioTrack:o,videoTrack:a,id3Track:s,textTrack:l};return i&&this.extractRemainingSamples(D),D},_r.flush=function(){var e=this.remainderData;return this.remainderData=null,e=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},_r.extractRemainingSamples=function(e){var t,n=e.audioTrack,i=e.videoTrack,r=e.id3Track,a=(e=e.textTrack,i.pesData),o=n.pesData,s=r.pesData;if(a&&(t=nr(a))?(this.parseVideoAVCPES(i,e,t,!0,this._duration),i.pesData=null):i.pesData=a,o&&(t=nr(o))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,t);break;case"mp3":this.parseMPEGPES(n,t);break;case"ac3":this.parseAC3PES(n,t)}n.pesData=null}else null!=o&&o.size&&P.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;s&&(t=nr(s))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=s},_r.demuxSampleAes=function(e,t,n){return e=this.demux(e,n,!0,!this.config.progressive),n=this.sampleAes=new Wi(this.observer,this.config,t),this.decrypt(e,n)},_r.decrypt=function(e,t){return new Promise((function(n){var i=e.audioTrack,r=e.videoTrack;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(function(){r.samples?t.decryptAvcSamples(r.samples,0,0,(function(){n(e)})):n(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(function(){n(e)}))}))},_r.destroy=function(){this._duration=0},_r.parseAACPES=function(e,t){var n,i,r=0,a=this.aacOverFlow,o=t.data;for(a&&(this.aacOverFlow=null,s=a.missing,l=a.sample.unit.byteLength,-1===s?o=Ne(a.sample.unit,o):(l-=s,a.sample.unit.set(o.subarray(0,s),l),e.samples.push(a.sample),r=a.missing)),n=r,i=o.length;n<i-1&&!mi(o,n);n++);if(n!==r){var s=n<i-1,l=s?"AAC PES did not start with ADTS header,offset:"+n:"No ADTS header found in AAC PES";if(r=new Error(l),P.warn("parsing error: "+l),this.observer.emit(w.ERROR,w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,levelRetry:s,error:r,reason:l}),!s)return}if(gi(e,this.observer,o,n,this.audioCodec),void 0!==t.pts)u=t.pts;else{if(!a)return void P.warn("[tsdemuxer]: AAC PES unknown PTS");r=_i(e.samplerate);var u=a.sample.pts+r}for(var c,h=0;n<i;){if(n+=(c=yi(e,o,n,u,h)).length,c.missing){this.aacOverFlow=c;break}for(h++;n<i-1&&!mi(o,n);n++);}},_r.parseMPEGPES=function(e,t){var n=t.data,i=n.length,r=0,a=0,o=t.pts;if(void 0!==o)for(;a<i;)if(xi(n,a)){var s=Pi(e,n,a,o,r);if(!s)break;a+=s.length,r++}else a++;else P.warn("[tsdemuxer]: MPEG PES unknown PTS")},_r.parseAC3PES=function(e,t){var n=t.data,i=t.pts;if(void 0!==i)for(var r,a=n.length,o=0,s=0;s<a&&0<(r=Bi(e,n,s,i,o++));)s+=r;else P.warn("[tsdemuxer]: AC3 PES unknown PTS")},_r.parseID3PES=function(e,t){void 0!==t.pts?(t=o({},t,{type:this._videoTrack?Dt:Pt,duration:Number.POSITIVE_INFINITY}),e.samples.push(t)):P.warn("[tsdemuxer]: ID3 PES unknown PTS")},Gi=Ki,s(dr,ir=rr),(_r=dr.prototype).resetInitSegment=function(e,t,n,i){ir.prototype.resetInitSegment.call(this,e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},dr.probe=function(e){if(e){var t=de(e,0),n=(null==t?void 0:t.length)||0;if(!(t&&11===e[n]&&119===e[n+1]&&void 0!==fe(t)&&Mi(e,n)<=16))for(var i=e.length;n<i;n++)if(function(e,t){var n;if(t+1<e.length&&ki(e,t))return n=4,(t+=n=null!=(t=Di(e,t))&&t.frameLength?t.frameLength:n)===e.length||xi(e,t)}(e,n))return P.log("MPEG Audio sync word found !"),!0}return!1},_r.canParse=function(e,t){return ki(e,t)&&4<=e.length-t},_r.appendFrame=function(e,t,n){if(null!==this.basePTS)return Pi(e,t,n,this.basePTS,this.frameIndex)};var ir,rr=dr,ar=(hr.getSilentFrame=function(e,t){return"mp4a.40.2"===e?1===t?new Uint8Array([0,200,0,128,35,128]):2===t?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):void 0:1===t?new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):2===t||3===t?new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):void 0},hr),or=(cr.prototype.getData=function(){return this.data},cr),sr=Math.pow(2,32)-1,lr=(ur.init=function(){for(var e in ur.types={avc1:[],avcC:[],hvc1:[],hvcC:[],av01:[],av1C:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})ur.types.hasOwnProperty(e)&&(ur.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),i=(ur.HDLR_TYPES={video:t,audio:n},t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]),ur.STTS=ur.STSC=ur.STCO=n,ur.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ur.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ur.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ur.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),n=new Uint8Array([105,115,111,109]),new Uint8Array([97,118,99,49])),r=new Uint8Array([0,0,0,1]);ur.FTYP=ur.box(ur.types.ftyp,n,r,n,i),ur.DINF=ur.box(ur.types.dinf,ur.box(ur.types.dref,t))},ur.box=function(e){for(var t=8,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=i.length,o=a;a--;)t+=i[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(i[a],t),t+=i[a].byteLength;return s},ur.hdlr=function(e){return ur.box(ur.types.hdlr,ur.HDLR_TYPES[e])},ur.mdat=function(e){return ur.box(ur.types.mdat,e)},ur.mdhd=function(e,t){t*=e;var n=Math.floor(t/(1+sr));return t=Math.floor(t%(1+sr)),ur.box(ur.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},ur.mdia=function(e){return ur.box(ur.types.mdia,ur.mdhd(e.timescale,e.duration),ur.hdlr(e.type),ur.minf(e))},ur.mfhd=function(e){return ur.box(ur.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},ur.minf=function(e){return"audio"===e.type?ur.box(ur.types.minf,ur.box(ur.types.smhd,ur.SMHD),ur.DINF,ur.stbl(e)):ur.box(ur.types.minf,ur.box(ur.types.vmhd,ur.VMHD),ur.DINF,ur.stbl(e))},ur.moof=function(e,t,n){return ur.box(ur.types.moof,ur.mfhd(e),ur.traf(n,t))},ur.moov=function(e){for(var t=e.length,n=[];t--;)n[t]=ur.trak(e[t]);return ur.box.apply(null,[ur.types.moov,ur.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(ur.mvex(e)))},ur.mvex=function(e){for(var t=e.length,n=[];t--;)n[t]=ur.trex(e[t]);return ur.box.apply(null,[ur.types.mvex].concat(n))},ur.mvhd=function(e,t){t*=e;var n=Math.floor(t/(1+sr));return t=Math.floor(t%(1+sr)),e=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),ur.box(ur.types.mvhd,e)},ur.sdtp=function(e){for(var t,n=e.samples||[],i=new Uint8Array(4+n.length),r=0;r<n.length;r++)t=n[r].flags,i[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return ur.box(ur.types.sdtp,i)},ur.stbl=function(e){return ur.box(ur.types.stbl,ur.stsd(e),ur.box(ur.types.stts,ur.STTS),ur.box(ur.types.stsc,ur.STSC),ur.box(ur.types.stsz,ur.STSZ),ur.box(ur.types.stco,ur.STCO))},ur.avc1=function(e){for(var t,n,i=[],r=[],a=0;a<e.sps.length;a++)n=(t=e.sps[a]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)n=(t=e.pps[a]).byteLength,r.push(n>>>8&255),r.push(255&n),r=r.concat(Array.prototype.slice.call(t));var o=ur.box(ur.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(r))),s=e.width,l=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return ur.box(ur.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ur.box(ur.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ur.box(ur.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},ur.hvc1=function(e){for(var t=new Uint8Array,n=new Uint8Array,i=new Uint8Array,r=e.width,a=e.height,o=(r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>>8&255,255&r,a>>>8&255,255&a,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),0);o<e.vps.length;o++){var s=e.vps[o],l=new Uint8Array(t.length+s.length);l.set(t),l.set(s,t.length),t=l}for(o=0;o<e.sps.length;o++){s=e.sps[o];var u=new Uint8Array(n.length+s.length);u.set(n),u.set(s,n.length),n=u}for(o=0;o<e.pps.length;o++){s=e.pps[o];var c=new Uint8Array(i.length+s.length);c.set(i),c.set(s,i.length),i=c}return a=new or(t,n,i,e.details),ur.box(ur.types.hvc1,r,ur.box(ur.types.hvcC,a.getData()))},ur.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},ur.audioStsd=function(e){var t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])},ur.mp4a=function(e){return ur.box(ur.types.mp4a,ur.audioStsd(e),ur.box(ur.types.esds,ur.esds(e)))},ur.mp3=function(e){return ur.box(ur.types[".mp3"],ur.audioStsd(e))},ur.ac3=function(e){return ur.box(ur.types["ac-3"],ur.audioStsd(e),ur.box(ur.types.dac3,e.config))},ur.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?ur.box(ur.types.stsd,ur.STSD,ur.mp3(e)):"ac3"===e.segmentCodec?ur.box(ur.types.stsd,ur.STSD,ur.ac3(e)):ur.box(ur.types.stsd,ur.STSD,ur.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?ur.box(ur.types.stsd,ur.STSD,ur.hvc1(e)):ur.box(ur.types.stsd,ur.STSD,ur.avc1(e))},ur.tkhd=function(e){var t=e.id,n=e.duration*e.timescale,i=e.width,r=(e=e.height,Math.floor(n/(1+sr)));return n=Math.floor(n%(1+sr)),ur.box(ur.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,e>>8&255,255&e,0,0]))},ur.traf=function(e,t){var n=ur.sdtp(e),i=e.id,r=Math.floor(t/(1+sr));return t=Math.floor(t%(1+sr)),ur.box(ur.types.traf,ur.box(ur.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),ur.box(ur.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t])),ur.trun(e,n.length+16+20+8+16+8+8),n)},ur.trak=function(e){return e.duration=e.duration||4294967295,ur.box(ur.types.trak,ur.tkhd(e),ur.mdia(e))},ur.trex=function(e){return e=e.id,ur.box(ur.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},ur.trun=function(e,t){var n,i,r,a,o,s=e.samples||[],l=s.length,u=12+16*l,c=new Uint8Array(u);for(c.set(["video"===e.type?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+u)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),n=0;n<l;n++)i=(o=s[n]).duration,r=o.size,a=o.flags,o=o.cts,c.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*n);return ur.box(ur.types.trun,c)},ur.initSegment=function(e){return ur.types||ur.init(),e=ur.moov(e),Ne(ur.FTYP,e)},ur);function ur(){}function cr(e,t,n,i){this.data=void 0;var r=23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength);(r=this.data=new Uint8Array(r))[0]=1,r[1]=(3&i.general_profile_space)<<6|(i.general_tier_flag?1:0)<<5|31&i.general_profile_idc,r[2]=i.general_profile_compatibility_flags_1,r[3]=i.general_profile_compatibility_flags_2,r[4]=i.general_profile_compatibility_flags_3,r[5]=i.general_profile_compatibility_flags_4,r[6]=i.general_constraint_indicator_flags_1,r[7]=i.general_constraint_indicator_flags_2,r[8]=i.general_constraint_indicator_flags_3,r[9]=i.general_constraint_indicator_flags_4,r[10]=i.general_constraint_indicator_flags_5,r[11]=i.general_constraint_indicator_flags_6,r[12]=i.general_level_idc,r[13]=240|(3840&i.min_spatial_segmentation_idc)>>8,r[14]=255&i.min_spatial_segmentation_idc,r[15]=252|3&i.parallelismType,r[16]=252|3&i.chroma_format_idc,r[17]=248|7&i.bit_depth_luma_minus8,r[18]=248|7&i.bit_depth_chroma_minus8,r[19]=0,r[20]=0,r[21]=(3&i.constant_frame_rate)<<6|(7&i.num_temporal_layers)<<3|(i.temporal_id_nested?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=255&e.byteLength,r.set(e,28),r[23+(5+e.byteLength)+0]=161,r[23+(5+e.byteLength)+1]=0,r[23+(5+e.byteLength)+2]=1,r[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,r[23+(5+e.byteLength)+4]=255&t.byteLength,r.set(t,23+(5+e.byteLength)+5),r[23+(5+e.byteLength+5+t.byteLength)+0]=162,r[23+(5+e.byteLength+5+t.byteLength)+1]=0,r[23+(5+e.byteLength+5+t.byteLength)+2]=1,r[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&n.byteLength)>>8,r[23+(5+e.byteLength+5+t.byteLength)+4]=255&n.byteLength,r.set(n,23+(5+e.byteLength+5+t.byteLength)+5)}function hr(){}function dr(){return ir.apply(this,arguments)||this}function fr(e,t,n,i){return e=e*t*(n=void 0===n?1:n),(i=void 0!==i&&i)?Math.round(e):e}function pr(e,t){return fr(e,1e3,1/9e4,t=void 0!==t&&t)}lr.types=void 0,lr.HDLR_TYPES=void 0,lr.STTS=void 0,lr.STSC=void 0,lr.STCO=void 0,lr.STSZ=void 0,lr.VMHD=void 0,lr.SMHD=void 0,lr.STSD=void 0,lr.FTYP=void 0,lr.DINF=void 0;var mr=null,gr=null,_r=((_r=yr.prototype).destroy=function(){},_r.resetTimeStamp=function(e){P.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},_r.resetNextTimestamp=function(){P.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},_r.resetInitSegment=function(){P.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},_r.getVideoStartPts=function(e){var t=!1;return e=e.reduce((function(e,n){var i=n.pts-e;return i<-4294967296?(t=!0,vr(e,n.pts)):0<i?e:n.pts}),e[0].pts),t&&P.debug("PTS rollover detected"),e},_r.remux=function(e,t,n,i,r,a,o,s){var l,u,c,h,d,f,p,m=r,g=r,_=-1<e.pid,y=-1<t.pid,v=t.samples.length,A=0<e.samples.length,E=o&&0<v||1<v;return(_&&!A||y&&!E)&&!this.ISGenerated&&!o||(this.ISGenerated||(c=this.generateIS(e,t,r,a)),_=this.isVideoContiguous,o=-1,E&&(o=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!_)&&this.config.forceKeyFrameOnDiscontinuity&&(f=!0,0<o?(P.warn("[mp4-remuxer]: Dropped "+o+" out of "+v+" video samples due to a missing keyframe"),p=this.getVideoStartPts(t.samples),t.samples=t.samples.slice(o),t.dropped+=o,p=g+=(t.samples[0].pts-p)/t.inputTimeScale):-1===o&&(P.warn("[mp4-remuxer]: No keyframe found out of "+v+" video samples"),f=!1)),this.ISGenerated&&(A&&E&&(v=this.getVideoStartPts(t.samples),v=(vr(e.samples[0].pts,v)-v)/t.inputTimeScale,m+=Math.max(0,v),g+=Math.max(0,-v)),A?(e.samplerate||(P.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,r,a)),u=this.remuxAudio(e,m,this.isAudioContiguous,a,y||E||s===At?g:void 0),E&&(v=u?u.endPTS-u.startPTS:0,t.inputTimeScale||(P.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,r,a)),l=this.remuxVideo(t,g,_,v))):E&&(l=this.remuxVideo(t,g,_,0)),l)&&(l.firstKeyFrame=o,l.independent=-1!==o,l.firstKeyFramePTS=p)),{audio:u,video:l,initSegment:c,independent:f,text:h=this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(d=Ar(n,r,this._initPTS,this._initDTS)),i.samples.length)?Er(i,r,this._initPTS):h,id3:d}},_r.generateIS=function(e,t,n,i){var r,a,o,s=e.samples,l=t.samples,u=this.typeSupported,c={},h=this._initPTS,d="audio/mp4";if((i=!h||i)&&(o=a=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":u.mpeg?(d="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}c.audio={id:"audio",container:d,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&u.mpeg?new Uint8Array(0):lr.initSegment([e]),metadata:{channelCount:e.channelCount,samplerate:e.samplerate,segmentCodec:e.segmentCodec}},i&&(r=e.inputTimeScale,h&&r===h.timescale?i=!1:o=a=s[0].pts-Math.round(r*n))}if(t.sps&&t.pps&&l.length&&(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:lr.initSegment([t]),metadata:{width:t.width,height:t.height}},i)&&(r=t.inputTimeScale,h&&r===h.timescale?i=!1:(s=this.getVideoStartPts(l),t=Math.round(r*n),a=Math.min(a,vr(l[0].dts,s)-t),o=Math.min(o,s-t))),Object.keys(c).length)return this.ISGenerated=!0,i?(this._initPTS={baseTime:o,timescale:r},this._initDTS={baseTime:a,timescale:r}):o=r=void 0,{tracks:c,initPTS:o,timescale:r}},_r.remuxVideo=function(e,t,n,i){var r=e.inputTimeScale,a=e.samples,s=[],l=a.length,u=this._initPTS,c=this.nextAvcDts,h=8,d=this.videoSampleDuration,f=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,m=!1;n&&null!==c||(c=t*r-(a[0].pts-vr(a[0].dts,a[0].pts)));for(var g=u.baseTime*r/u.timescale,_=0;_<l;_++){var y=a[_];y.pts=vr(y.pts-g,c),y.dts=vr(y.dts-g,c),y.dts<a[0<_?_-1:_].dts&&(m=!0)}m&&a.sort((function(e,t){var n=e.dts-t.dts;return e=e.pts-t.pts,n||e})),t=a[0].dts;var v=(u=a[a.length-1].dts-t)?Math.round(u/(l-1)):d||e.inputTimeScale/30;n&&(n=(u=t-c)<-1,(M=v<u)||n)&&(M?P.warn("AVC: "+pr(u,!0)+" ms ("+u+"dts) hole between fragments detected, filling it"):P.warn("AVC: "+pr(-u,!0)+" ms ("+u+"dts) overlapping between fragments detected"),!n||c>=a[0].pts)&&(t=c,M=a[0].pts-u,a[0].dts=t,a[0].pts=M,P.log("Video: First PTS/DTS adjusted: "+pr(M,!0)+"/"+pr(t,!0)+", delta: "+pr(u,!0)+" ms"));for(var A=0,E=0,b=t=Math.max(0,t),R=0;R<l;R++){for(var I=a[R],C=I.units,L=C.length,D=0,k=0;k<L;k++)D+=C[k].data.length;E+=D,A+=L,I.length=D,I.dts=I.dts<b?b++:I.dts,f=Math.min(I.pts,f),p=Math.max(I.pts,p)}n=a[l-1].dts;var x,M=E+4*A+8;try{x=new Uint8Array(M)}catch(e){return void this.observer.emit(w.ERROR,w.ERROR,{type:T.MUX_ERROR,details:S.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:M,reason:"fail allocating video mdat "+M})}var O=new DataView(x.buffer);O.setUint32(0,M),x.set(lr.types.mdat,4);for(var N=!1,F=Number.POSITIVE_INFINITY,B=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY,G=0;G<l;G++){for(var V=a[G],H=V.units,Y=0,z=0,W=H.length;z<W;z++){var K=(q=H[z]).data,q=q.data.byteLength;O.setUint32(h,q),h+=4,x.set(K,h),h+=q,Y+=4+q}var Q,X=void 0,J=(G<l-1?(d=a[G+1].dts-V.dts,X=a[G+1].pts-V.pts):(J=this.config,Q=0<G?V.dts-a[G-1].dts:v,X=0<G?V.pts-a[G-1].pts:v,J.stretchShortVideoTrack&&null!==this.nextAudioPts&&Math.floor(J.maxBufferHole*r)<(J=(i?f+i*r:this.nextAudioPts)-V.pts)?((d=J-Q)<0?d=Q:N=!0,P.log("[mp4-remuxer]: It is approximately "+J/90+" ms to the next segment; using duration "+d/90+" ms for the last video frame.")):d=Q),Math.round(V.pts-V.dts));F=Math.min(F,d),U=Math.max(U,d),B=Math.min(B,X),j=Math.max(j,X),s.push(new wr(V.key,d,Y,J))}if(s.length)if(mr)mr<70&&((u=s[0].flags).dependsOn=2,u.isNonSync=0);else if(gr&&j-B<U-F&&v/U<.025&&0===s[0].cts){P.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Z=t,$=0,ee=s.length;$<ee;$++){var te,ne=Z+s[$].duration,ie=Z+s[$].cts;$<ee-1?(te=ne+s[$+1].cts,s[$].duration=te-ie):s[$].duration=$?s[$-1].duration:v,s[$].cts=0,Z=ne}}return this.nextAvcDts=c=n+(d=N||!d?v:d),this.videoSampleDuration=d,this.isVideoContiguous=!0,M={data1:lr.moof(e.sequenceNumber++,t,o({},e,{samples:s})),data2:x,startPTS:f/r,endPTS:(p+d)/r,startDTS:t/r,endDTS:c/r,type:"video",hasAudio:!1,hasVideo:!0,nb:s.length,dropped:e.dropped},e.samples=[],e.dropped=0,M},_r.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},_r.remuxAudio=function(e,t,n,i,r){var a=e.inputTimeScale,s=a/(e.samplerate||a),l=this.getSamplesPerFrame(e),u=l*s,c=this._initPTS,h="mp3"===e.segmentCodec&&this.typeSupported.mpeg,d=[],f=void 0!==r,p=e.samples,m=h?0:8,g=this.nextAudioPts||-1,_=t*a,y=c.baseTime*a/c.timescale;if(this.isAudioContiguous=n=n||p.length&&0<g&&(i&&Math.abs(_-g)<9e3||Math.abs(vr(p[0].pts-y,_)-g)<20*u),p.forEach((function(e){e.pts=vr(e.pts-y,_)})),!n||g<0){if(!(p=p.filter((function(e){return 0<=e.pts}))).length)return;g=0===r?0:i&&!f?Math.max(0,_):p[0].pts}if("aac"===e.segmentCodec)for(var v=this.config.maxAudioFramesDrift,A=0,E=g;A<p.length;A++){var b=p[A],R=b.pts,I=R-E,C=Math.abs(1e3*I/a);if(I<=-v*u&&f)0===A&&(P.warn("Audio frame @ "+(R/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*I/a)+" ms."),this.nextAudioPts=g=E=R);else if(v*u<=I&&C<1e4&&f){var L=Math.round(I/u);(E=R-L*u)<0&&(L--,E+=u),0===A&&(this.nextAudioPts=g=E),P.warn("[mp4-remuxer]: Injecting "+L+" audio frame @ "+(E/a).toFixed(3)+"s due to "+Math.round(1e3*I/a)+" ms gap.");for(var D=0;D<L;D++)ar.getSilentFrame(e.manifestCodec||e.codec,e.channelCount)||(P.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),b.unit.subarray()),E+=u,A++}b.pts=E,E+=u}for(var k,x=null,M=null,O=0,N=p.length;N--;)O+=p[N].unit.byteLength;for(var F=0,B=p.length;F<B;F++){var U=(j=p[F]).unit,j=j.pts;if(null!==M)d[F-1].duration=Math.round((j-M)/s);else{if(x=j=n&&"aac"===e.segmentCodec?g:j,!(0<O))return;O+=m;try{k=new Uint8Array(O)}catch(e){return void this.observer.emit(w.ERROR,w.ERROR,{type:T.MUX_ERROR,details:S.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:O,reason:"fail allocating audio mdat "+O})}h||(new DataView(k.buffer).setUint32(0,O),k.set(lr.types.mdat,4))}k.set(U,m),m+=U=U.byteLength,d.push(new wr(!0,l,U,0)),M=j}if(t=d.length)return this.nextAudioPts=g=M+s*d[d.length-1].duration,i={data1:h?new Uint8Array(0):lr.moof(e.sequenceNumber++,x/s,o({},e,{samples:d})),data2:k,startPTS:c=x/a,endPTS:r=g/a,startDTS:c,endDTS:r,type:"audio",hasAudio:!0,hasVideo:!(e.samples=[]),nb:t},this.isAudioContiguous=!0,i},_r.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=r/(e.samplerate||r),o=this.nextAudioPts,s=9e4*(s=this._initDTS).baseTime/s.timescale,l=(null!==o?o:i.startDTS*r)+s,u=(o=i.endDTS*r+s,1024*a),c=Math.ceil((o-l)/u),h=ar.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(P.warn("[mp4-remuxer]: remux empty Audio"),h){for(var d=[],f=0;f<c;f++){var p=l+f*u;d.push({unit:h,pts:p,dts:p})}return e.samples=d,this.remuxAudio(e,t,n,!1)}P.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},yr);function yr(e,t,n,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===mr&&(e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),mr=e?parseInt(e[1]):0),null===gr&&(t=navigator.userAgent.match(/Safari\/(\d+)/i),gr=t?parseInt(t[1]):0)}function vr(e,t){var n;if(null!==t)for(n=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=n;return e}function Ar(e,t,n,i){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,o=0;o<r;o++){var s=e.samples[o];s.pts=vr(s.pts-n.baseTime*a/n.timescale,t*a)/a,s.dts=vr(s.dts-i.baseTime*a/i.timescale,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function Er(e,t,n){var i=e.samples.length;if(i){for(var r=e.inputTimeScale,a=0;a<i;a++){var o=e.samples[a];o.pts=vr(o.pts-n.baseTime*r/n.timescale,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts}));var s=e.samples;return e.samples=[],{samples:s}}}var br,wr=function(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}},Tr=((Tr=Sr.prototype).destroy=function(){},Tr.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},Tr.resetNextTimestamp=function(){this.lastEndTime=null},Tr.resetInitSegment=function(e,t,n,i){var r;this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(((t=e)&&i&&(r=i.keyId)&&i.isCommonEncryption&&De(t,["moov","trak"]).forEach((function(e){e=De(e,["mdia","minf","stbl","stsd"])[0].subarray(8);var t=De(e,["enca"]),n=0<t.length;(t=n?t:De(e,["encv"])).forEach((function(e){De(n?e.subarray(28):e.subarray(78),["sinf"]).forEach((function(e){var t;(e=Oe(e))&&!(t=e.subarray(8,24)).some((function(e){return 0!==e}))&&(P.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+be(t)+" -> "+be(r)),e.set(r,8))}))}))})),t)),this.emitInitSegment=!0},Tr.generateInitSegment=function(e){var t,n,i=this.audioCodec,r=this.videoCodec;null!=e&&e.byteLength?((t=this.initData=ke(e)).audio&&(i=Rr(t.audio,U)),t.video&&(r=Rr(t.video,j)),n={},t.audio&&t.video?n.audiovideo={container:"video/mp4",codec:i+","+r,initSegment:e,id:"main"}:t.audio?n.audio={container:"audio/mp4",codec:i,initSegment:e,id:"audio"}:t.video?n.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:P.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n):(this.initTracks=void 0,this.initData=void 0)},Tr.remux=function(e,t,n,i,r,a){var o,s,l,u,c,h,d,f,p,m,g,_=this.initPTS,y=this.lastEndTime,v={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};return null!=(b(y)||(y=this.lastEndTime=r||0),t=t.samples)&&t.length&&(o={initPTS:void 0,timescale:1},null!=(s=this.initData)&&s.length||(this.generateInitSegment(t),s=this.initData),null!=s&&s.length?(this.emitInitSegment&&(o.tracks=this.initTracks,this.emitInitSegment=!1),l=function(e,t){for(var n=0,i=0,r=0,a=De(e,["moof","traf"]),o=0;o<a.length;o++){var s=a[o],l=De(s,["tfhd"])[0],u=t[Ce(l,4)];if(u){var c=u.default,h=Ce(l,0)|(null==c?void 0:c.flags),d=null==c?void 0:c.duration;8&h&&(d=Ce(l,2&h?12:8));for(var f=u.timescale||9e4,p=De(s,["trun"]),m=0;m<p.length;m++)!(n=function(e){var t=Ce(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var i=0,r=Ce(e,4),a=0;a<r;a++)256&t&&(i+=Ce(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return i}(p[m]))&&d&&(n=d*Ce(p[m],4)),u.type===j?i+=n/f:u.type===U&&(r+=n/f)}}if(0!==i||0!==r)return i||r;for(var g=0,_=De(e,["sidx"]),y=0;y<_.length;y++){var v=function(e){var t=[],n=e[0],i=8,r=Ce(e,i),a=e.length+0,o=Ie(e,i=(i+=4)+(0===n?8:16)+2);i+=2;for(var s=0;s<o;s++){var l=i,u=Ce(e,l),c=(l+=4,2147483647&u);if(1==(2147483648&u)>>>31)return P.warn("SIDX has hierarchical references (not supported)"),null;u=Ce(e,l),l+=4,t.push({referenceSize:c,subsegmentDuration:u,info:{duration:u/r,start:a,end:a+c-1}}),a+=c,i=l+=4}return{earliestPresentationTime:0,timescale:r,version:n,referencesCount:o,references:t}}(_[y]);null!=v&&v.references&&(g+=v.references.reduce((function(e,t){return e+t.info.duration||0}),0))}return g}(t,s),c=s,u=De(t,["moof","traf"]).reduce((function(e,t){var n=De(t,["tfdt"])[0],i=n[0];return t=De(t,["tfhd"]).reduce((function(e,t){if(t=Ce(t,4),t=c[t]){var r=Ce(n,4);if(1===i){if(r===we)return P.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;r=r*(1+we)+Ce(n,8)}if(r/=t.timescale||9e4,isFinite(r)&&(null===e||r<e))return r}return e}),null),null!==t&&isFinite(t)&&(null===e||t<e)?t:e}),null),d=u=null===u?r:u,g=r,(null===(h=_)||(m=Math.max(l,1),d-=h.baseTime/h.timescale,Math.abs(d-g)>m)||o.timescale!==_.timescale&&a)&&(o.initPTS=u-r,_&&1===_.timescale&&P.warn("Adjusting initPTS by "+(o.initPTS-_.baseTime)),this.initPTS=_={baseTime:o.initPTS,timescale:1}),d=(h=e?u-_.baseTime/_.timescale:y)+l,f=s,p=_.baseTime/_.timescale,De(t,["moof","traf"]).forEach((function(e){De(e,["tfhd"]).forEach((function(t){var n;t=Ce(t,4),(t=f[t])&&(n=t.timescale||9e4,De(e,["tfdt"]).forEach((function(e){var t=e[0],i=Ce(e,4);0===t?(i-=p*n,Pe(e,4,i=Math.max(i,0))):(i=(i=(i*=Math.pow(2,32))+Ce(e,8))-p*n,i=Math.max(i,0),t=Math.floor(i/(1+we)),i=Math.floor(i%(1+we)),Pe(e,4,t),Pe(e,8,i))})))}))})),0<l?this.lastEndTime=d:(P.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp()),g="",(m=!!s.audio)&&(g+="audio"),(a=!!s.video)&&(g+="video"),v.audio="audio"===(e={data1:t,startPTS:h,startDTS:h,endPTS:d,endDTS:d,type:g,hasAudio:m,hasVideo:a,nb:1,dropped:0}).type?e:void 0,v.video="audio"!==e.type?e:void 0,v.initSegment=o,v.id3=Ar(n,r,_,_),i.samples.length&&(v.text=Er(i,r,_))):P.warn("[passthrough-remuxer.ts]: Failed to generate initSegment.")),v},Sr);function Sr(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}function Rr(e,t){return(e=null==e?void 0:e.codec)&&4<e.length?e:t===U?"ec-3"===e||"ac-3"===e||"alac"===e?e:"fLaC"===e||"Opus"===e?tt(e):(P.warn('Unhandled audio codec "'+e+'" or audio object type'),"mp4a.40.5"):(P.warn('Unhandled video codec "'+e+'"'),"hvc1"===e||"hev1"===e?"hvc1.1.6.L120.90":"av01"===e?"av01.0.04M.08":"avc1.42e01e")}try{br=self.performance.now.bind(self.performance)}catch(s){P.debug("Unable to use Performance API on this environment"),br="undefined"!=typeof self&&self.Date.now}var Ir,Cr,Lr=[{demux:bi,remux:Tr},{demux:Gi,remux:_r},{demux:Ai,remux:_r},{demux:rr,remux:_r}],Pr=(Lr.splice(2,0,{demux:Ni,remux:_r}),(bi=kr.prototype).configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},bi.push=function(e,t,n,i){var r=this,a=n.transmuxing,o=(a.executeStart=br(),e=new Uint8Array(e),this.currentTransmuxState),s=this.transmuxConfig,l=(o=(i&&(this.currentTransmuxState=i),i=i||o).contiguous,i.discontinuity),u=i.trackSwitch,c=i.accurateTimeOffset,h=i.timeOffset,d=(i=i.initSegmentChange,s.audioCodec),f=s.videoCodec,p=s.defaultInitPts,m=s.duration,g=(s=s.initSegmentData,g=null,g=0<e.byteLength&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method?t:g);if(g&&"AES-128"===g.method){var _=this.getDecrypter();if(!_.isSync())return this.decryptionPromise=_.webCryptoDecrypt(e,g.key.buffer,g.iv.buffer).then((function(e){return e=r.push(e,null,n),r.decryptionPromise=null,e})),this.decryptionPromise;var y=_.softwareDecrypt(e,g.key.buffer,g.iv.buffer);if(!(y=-1<n.part?_.flush():y))return a.executeEnd=br(),Dr(n);e=new Uint8Array(y)}return(_=this.needsProbing(l,u))&&(y=this.configureTransmuxer(e))?(P.warn("[transmuxer] "+y.message),this.observer.emit(w.ERROR,w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,error:y,reason:y.message}),a.executeEnd=br(),Dr(n)):((l||u||i||_)&&this.resetInitSegment(s,d,f,m,t),(l||i||_)&&this.resetInitialTimestamp(p),o||this.resetContiguity(),y=this.transmux(e,g,h,c,n),(u=this.currentTransmuxState).contiguous=!0,u.discontinuity=!1,u.trackSwitch=!1,a.executeEnd=br(),y)},bi.flush=function(e){var t,n=this,i=e.transmuxing,r=(i.executeStart=br(),this.decrypter),a=this.currentTransmuxState,o=this.decryptionPromise;return o?o.then((function(){return n.flush(e)})):(t=[],o=a.timeOffset,r&&(a=r.flush())&&t.push(this.push(a,null,e)),r=this.demuxer,a=this.remuxer,r&&a?xr(a=r.flush(o))?a.then((function(i){return n.flushRemux(t,i,e),t})):(this.flushRemux(t,a,e),t):(i.executeEnd=br(),[Dr(e)]))},bi.flushRemux=function(e,t,n){var i=t.audioTrack,r=t.videoTrack,a=t.id3Track,o=(t=t.textTrack,(s=this.currentTransmuxState).accurateTimeOffset),s=s.timeOffset;P.log("[transmuxer.ts]: Flushed fragment "+n.sn+(-1<n.part?" p: "+n.part:"")+" of level "+n.level),i=this.remuxer.remux(i,r,a,t,s,o,!0,this.id),e.push({remuxResult:i,chunkMeta:n}),n.transmuxing.executeEnd=br()},bi.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},bi.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},bi.resetInitSegment=function(e,t,n,i,r){var a=this.demuxer,o=this.remuxer;a&&o&&(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,r))},bi.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},bi.transmux=function(e,t,n,i,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r)},bi.transmuxUnencrypted=function(e,t,n,i){var r=(e=this.demuxer.demux(e,t,!1,!this.config.progressive)).audioTrack,a=e.videoTrack,o=e.id3Track;return e=e.textTrack,{remuxResult:this.remuxer.remux(r,a,o,e,t,n,!1,this.id),chunkMeta:i}},bi.transmuxSampleAes=function(e,t,n,i,r){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,a.id),chunkMeta:r}}))},bi.configureTransmuxer=function(e){for(var t,n,i=this.config,r=this.observer,a=this.typeSupported,o=this.vendor,s=0,l=Lr.length;s<l;s++)if(null!=(n=Lr[s].demux)&&n.probe(e)){t=Lr[s];break}if(!t)return new Error("Failed to find demuxer by probing fragment data");var u=this.demuxer,c=this.remuxer,h=t.remux,d=t.demux;c&&c instanceof h||(this.remuxer=new h(r,i,a,o)),u&&u instanceof d||(this.demuxer=new d(r,i,a),this.probe=d.probe)},bi.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},bi.getDecrypter=function(){return this.decrypter||(this.decrypter=new Vn(this.config))},kr),Dr=function(e){return{remuxResult:{},chunkMeta:e}};function kr(e,t,n,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}function xr(e){return"then"in e&&e.then instanceof Function}function Mr(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r||null}function Or(e,t,n,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}function Nr(){}function Fr(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Br(e,t,n,i,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");return n=new Fr(n,i||e,r),i=Cr?Cr+t:t,e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],n]:e._events[i].push(n):(e._events[i]=n,e._eventsCount++),e}function Ur(e,t){0==--e._eventsCount?e._events=new Nr:delete e._events[t]}function jr(){this._events=new Nr,this._eventsCount=0}Gi=Tr={exports:{}},Ir=Object.prototype.hasOwnProperty,Cr="~",Object.create&&(Nr.prototype=Object.create(null),(new Nr).__proto__||(Cr=!1)),jr.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)Ir.call(e,t)&&n.push(Cr?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},jr.prototype.listeners=function(e){e=Cr?Cr+e:e;var t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,i=t.length,r=new Array(i);n<i;n++)r[n]=t[n].fn;return r},jr.prototype.listenerCount=function(e){return e=Cr?Cr+e:e,(e=this._events[e])?e.fn?1:e.length:0},jr.prototype.emit=function(e,t,n,i,r,a){var o=Cr?Cr+e:e;if(!this._events[o])return!1;var s,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,a),!0}for(d=1,s=new Array(u-1);d<u;d++)s[d-1]=arguments[d];l.fn.apply(l.context,s)}else for(var c,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,n);break;case 4:l[d].fn.call(l[d].context,t,n,i);break;default:if(!s)for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];l[d].fn.apply(l[d].context,s)}return!0},jr.prototype.on=function(e,t,n){return Br(this,e,t,n,!1)},jr.prototype.once=function(e,t,n){return Br(this,e,t,n,!0)},jr.prototype.removeListener=function(e,t,n,i){if(e=Cr?Cr+e:e,this._events[e])if(t){var r=this._events[e];if(r.fn)r.fn!==t||i&&!r.once||n&&r.context!==n||Ur(this,e);else{for(var a=0,o=[],s=r.length;a<s;a++)(r[a].fn!==t||i&&!r[a].once||n&&r[a].context!==n)&&o.push(r[a]);o.length?this._events[e]=1===o.length?o[0]:o:Ur(this,e)}}else Ur(this,e);return this},jr.prototype.removeAllListeners=function(e){return e?(e=Cr?Cr+e:e,this._events[e]&&Ur(this,e)):(this._events=new Nr,this._eventsCount=0),this},jr.prototype.off=jr.prototype.removeListener,jr.prototype.addListener=jr.prototype.on,jr.prefixed=Cr,Gi.exports=jr.EventEmitter=jr;var Gr,Vr,Hr,Yr=m(Tr.exports);function zr(e,t){var n,i,r;return!!((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment)&&(n=[],i=(r=t.remuxResult).audio,r=r.video,i&&Wr(n,i),r&&Wr(n,r),e.postMessage({event:"transmuxComplete",data:t},n),!0)}function Wr(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function Kr(e,t,n){t.reduce((function(t,n){return zr(e,n)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:n})}void 0!==n&&n&&(Gr=self,Vr=new Yr,Hr=function(e,t){Gr.postMessage({event:e,data:t})},Vr.on(w.FRAG_DECRYPTED,Hr),Vr.on(w.ERROR,Hr),Gr.addEventListener("message",(function(e){var t=e.data;switch(t.cmd){case"init":var n=JSON.parse(t.config);Gr.transmuxer=new Pr(Vr,t.typeSupported,n,t.vendor,t.id),L(n.debug,t.id),function(){for(var e in P)!function(e){P[e]=function(t){Hr("workerLog",{logType:e,message:t})}}(e)}(),Hr("init",null);break;case"configure":Gr.transmuxer.configure(t.config);break;case"demux":xr(n=Gr.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state))?(Gr.transmuxer.async=!0,n.then((function(e){zr(Gr,e)})).catch((function(e){Hr(w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})}))):(Gr.transmuxer.async=!1,zr(Gr,n));break;case"flush":var i=t.chunkMeta;xr(n=Gr.transmuxer.flush(i))||Gr.transmuxer.async?(n=xr(n)?n:Promise.resolve(n)).then((function(e){Kr(Gr,e,i)})).catch((function(e){Hr(w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})})):Kr(Gr,n,i)}})));var qr,Qr,Xr=qe()||{isTypeSupported:function(){return!1}},Jr=((Ai=ea.prototype).resetWorker=function(){var e,t;this.workerContext&&(e=(t=this.workerContext).worker,(t=t.objectURL)&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null)},Ai.destroy=function(){this.workerContext?(this.resetWorker(),this.onwmsg=void 0):(e=this.transmuxer)&&(e.destroy(),this.transmuxer=null);var e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},Ai.push=function(e,t,n,i,r,a,o,s,l,u){var c=this,h=(l.transmuxing.start=self.performance.now(),this.transmuxer),d=(a||r).start,f=r.decryptdata,p=this.frag,m=!(p&&r.cc===p.cc),g=!(p&&l.level===p.level),_=p?l.sn-p.sn:-1,y=this.part?l.part-this.part.index:-1,v=0==_&&1<l.id&&l.id===(null==p?void 0:p.stats.chunkCount),A=(v=!g&&(1==_||0==_&&(1==y||v&&y<=0)),self.performance.now());_=new Or(m,v,s,g,d,((g||_||0===r.stats.parsing.start)&&(r.stats.parsing.start=A),!a||!y&&v||(a.stats.parsing.start=A),A=!(p&&(null==(_=r.initSegment)?void 0:_.url)===(null==(y=p.initSegment)?void 0:y.url)))),v&&!m&&!A||(P.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+g+"\n        contiguous: "+v+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+d+"\n        initSegmentChange: "+A),p=new Mr(n,i,t,o,u),this.configureTransmuxer(p)),this.frag=r,this.part=a,this.workerContext?this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:_},e instanceof ArrayBuffer?[e]:[]):h&&(xr(y=h.push(e,f,l,_))?(h.async=!0,y.then((function(e){c.handleTransmuxComplete(e)})).catch((function(e){c.transmuxerError(e,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(y)))},Ai.flush=function(e){var t,n=this,i=(e.transmuxing.start=self.performance.now(),this.transmuxer);this.workerContext?this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e}):i&&(xr(t=i.flush(e))||i.async?(t=xr(t)?t:Promise.resolve(t)).then((function(t){n.handleFlushResult(t,e)})).catch((function(t){n.transmuxerError(t,e,"transmuxer-interface flush error")})):this.handleFlushResult(t,e))},Ai.transmuxerError=function(e,t,n){this.hls&&(this.error=e,this.hls.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n}))},Ai.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},Ai.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":var i=null==(i=this.workerContext)?void 0:i.objectURL;i&&self.URL.revokeObjectURL(i);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":P[t.data.logType]&&P[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},Ai.configureTransmuxer=function(e){var t=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)},Ai.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},ea);function Zr(e){return(e=qr.call(this,e,"[audio-track-controller]")||this).tracks=[],e.groupId=null,e.tracksInGroup=[],e.trackId=-1,e.currentTrack=null,e.selectDefaultTrack=!0,e.registerListeners(),e}function $r(e,t,n){return(e=Qr.call(this,e,t,n,"[audio-stream-controller]",At)||this).videoBuffer=null,e.videoTrackCC=-1,e.waitingVideoCC=-1,e.bufferedTrack=null,e.switchingTrack=null,e.trackId=-1,e.waitingData=null,e.mainDetails=null,e.bufferFlushed=!1,e.cachedTrackLoadedData=null,e._registerListeners(),e}function ea(e,n,i,r){function a(e,t){(t=t||{}).frag=c.frag,t.id=c.id,e===w.ERROR&&(c.error=t.error),c.hls.trigger(e,t)}var o,s,l,u,c=this,h=(this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,e.config);if(this.hls=e,this.id=n,this.useWorker=!!h.enableWorker,this.onTransmuxComplete=i,this.onFlush=r,this.observer=new Yr,this.observer.on(w.FRAG_DECRYPTED,a),this.observer.on(w.ERROR,a),e={mpeg:Xr.isTypeSupported("audio/mpeg"),mp3:Xr.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:Xr.isTypeSupported('audio/mp4; codecs="ac-3"')},i=navigator.vendor,!this.useWorker||"undefined"==typeof Worker||(h.workerPath,0))this.transmuxer=new Pr(this.observer,e,h,i,n);else try{h.workerPath?(P.log("loading Web Worker "+h.workerPath+' for "'+n+'"'),this.workerContext=(l=h.workerPath,u=new self.URL(l,self.location.href).href,{worker:new self.Worker(u),scriptURL:u})):(P.log('injecting Web Worker for "'+n+'"'),this.workerContext=(o=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+t.toString()+")(true);"],{type:"text/javascript"}),s=self.URL.createObjectURL(o),{worker:new self.Worker(s),objectURL:s})),this.onwmsg=function(e){return c.onWorkerMessage(e)};var d=this.workerContext.worker;d.addEventListener("message",this.onwmsg),d.onerror=function(e){e=new Error(e.message+"  ("+e.filename+":"+e.lineno+")"),h.enableWorker=!1,P.warn('Error in "'+n+'" Web Worker, fallback to inline'),c.hls.trigger(w.ERROR,{type:T.OTHER_ERROR,details:S.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:e})},d.postMessage({cmd:"init",typeSupported:e,vendor:i,id:n,config:JSON.stringify(h)})}catch(r){P.warn('Error setting up "'+n+'" Web Worker, fallback to inline',r),this.resetWorker(),this.error=null,this.transmuxer=new Pr(this.observer,e,h,i,n)}}function ta(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(!function(e,t){var n=e["STABLE-RENDITION-ID"];return n?n===t["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((function(n){return e[n]!==t[n]}))}(e[n].attrs,t[n].attrs))return;return 1}}s($r,Qr=cn),(rr=$r.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},rr._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(w.ERROR,this.onError,this),e.on(w.BUFFER_RESET,this.onBufferReset,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this),e.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(w.ERROR,this.onError,this),e.off(w.BUFFER_RESET,this.onBufferReset,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this),e.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr.onInitPtsFound=function(e,t){var n=t.frag,i=t.id,r=t.initPTS;t=t.timescale,"main"===i&&(i=n.cc,this.initPTS[n.cc]={baseTime:r,timescale:t},this.log("InitPTS for cc: "+i+" found from main: "+r),this.videoTrackCC=i,this.state===$n)&&this.tick()},rr.startLoad=function(e){var t;this.levels?(t=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),0<t&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=Yn):(this.loadedmetadata=!1,this.state=qn),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.startPosition=e,this.state=Hn)},rr.doTick=function(){switch(this.state){case Yn:this.doTickIdle();break;case qn:var e=this.levels,t=this.trackId;if(t=null==e||null==(e=e[t])?void 0:e.details){if(this.waitForCdnTuneIn(t))break;this.state=$n}break;case Kn:e=performance.now(),(!(t=this.retryDate)||t<=e||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Yn);break;case $n:var n,i;(e=this.waitingData)?(t=e.frag,n=e.part,i=e.cache,e=e.complete,void 0!==this.initPTS[t.cc]?(this.waitingData=null,this.waitingVideoCC=-1,this.state=Wn,n={frag:t,part:n,payload:i.flush(),networkDetails:null},this._handleFragmentLoadProgress(n),e&&Qr.prototype._handleFragmentLoadComplete.call(this,n)):this.videoTrackCC!==this.waitingVideoCC?(this.log("Waiting fragment cc ("+t.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment()):(i=this.getLoadPosition(),an((e=Sn.bufferInfo(this.mediaBuffer,i,this.config.maxBufferHole)).end,this.config.maxFragLookUpTolerance,t)<0&&(this.log("Waiting fragment cc ("+t.cc+") @ "+t.start+" cancelled because another fragment at "+e.end+" is needed"),this.clearWaitingFragment()))):this.state=Yn}this.onTickEnd()},rr.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Yn)},rr.resetLoadingState=function(){this.clearWaitingFragment(),Qr.prototype.resetLoadingState.call(this)},rr.onTickEnd=function(){var e=this.media;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},rr.doTickIdle=function(){var e=this.hls,t=this.levels,n=this.media,i=this.trackId,r=e.config;if(null!=t&&t[i]&&(n||!this.startFragRequested&&r.startFragPrefetch))if(!(t=(r=t[i]).details)||t.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(t))this.state=qn;else if(i=this.mediaBuffer||this.media,this.bufferFlushed&&i&&(this.bufferFlushed=!1,this.afterBufferFlushed(i,U,At)),null!==(i=this.getFwdBufferInfo(i,At))){var a=this.bufferedTrack,o=this.switchingTrack;if(!o&&this._streamEnded(i,t))e.trigger(w.BUFFER_EOS,{type:"audio"}),this.state=Jn;else{e=this.getFwdBufferInfo(this.videoBuffer||this.media,vt);var s=i.len,l=this.getMaxBufferLength(null==e?void 0:e.len),u=t.fragments,c=u[0].start,h=i.end;if(o&&n&&(d=this.getLoadPosition(),a&&o.attrs!==a.attrs&&(h=d),t.PTSKnown)&&d<c&&(i.end>c||i.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=c+.05),!(l<=s&&!o&&h<u[u.length-1].start)){var d=!1;if((a=this.getNextFragment(h,t))&&this.isLoopLoading(a,h)&&(d=!!a.gap,a=this.getNextFragmentLoopLoading(a,t,i,vt,l)),a){if((n=e&&a.start>e.end+t.targetduration)||(null==e||!e.len)&&i.len){if(null===(c=this.getAppendedFrag(a.start,vt)))return;if(d=d||!!c.gap||!!n&&0===e.len,n&&!d||d&&i.nextStart&&i.nextStart<c.end)return}this.loadFragment(a,r,h)}else this.bufferFlushed=!0}}}},rr.getMaxBufferLength=function(e){var t=Qr.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t},rr.onMediaDetaching=function(){this.videoBuffer=null,Qr.prototype.onMediaDetaching.call(this)},rr.onAudioTracksUpdated=function(e,t){t=t.audioTracks,this.resetTransmuxer(),this.levels=t.map((function(e){return new Ut(e)}))},rr.onAudioTrackSwitching=function(e,t){var n=!!t.url,i=(this.trackId=t.id,this.fragCurrent);i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=Yn,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=Hn),this.tick()},rr.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},rr.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(w.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},rr.onAudioTrackLoaded=function(e,t){if(null!=this.mainDetails){var n=this.levels,i=t.details,r=t.id;if(n){this.log("Track "+r+" loaded ["+i.startSN+","+i.endSN+"]"+(i.lastPartSn?"[part-"+i.lastPartSn+"-"+i.lastPartIndex+"]":"")+",duration:"+i.totalduration),n=n[r];var a=0;if(i.live||null!=(o=n.details)&&o.live){var o=this.mainDetails;if(i.fragments[0]||(i.deltaUpdateFailed=!0),i.deltaUpdateFailed||!o)return;a=!n.details&&i.hasProgramDateTime&&o.hasProgramDateTime?(Pn(i,o),i.fragments[0].start):this.alignPlaylists(i,n.details)}n.details=i,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(n.details,a),this.state!==qn||this.waitForCdnTuneIn(i)||(this.state=Yn),this.tick()}else this.warn("Audio tracks were reset while loading level "+r)}else this.cachedTrackLoadedData=t},rr._handleFragmentLoadProgress=function(e){var t,n,i,r,a=e.frag,o=e.part,s=(e=e.payload,this.config),l=this.trackId,u=this.levels;u?(u=u[l])?(t=u.details)?(s=s.defaultAudioCodec||u.audioCodec||"mp4a.40.2",u=(u=this.transmuxer)||(this.transmuxer=new Jr(this.hls,At,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))),n=this.initPTS[a.cc],i=null==(i=a.initSegment)?void 0:i.data,void 0!==n?(r=o?o.index:-1,r=new wn(a.level,a.sn,a.stats.chunkCount,e.byteLength,r,-1!==r),u.push(e,i,s,"",a,o,t.totalduration,!1,r,n)):(this.log("Unknown video PTS for cc "+a.cc+", waiting for video PTS before demuxing audio frag "+a.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+l),(this.waitingData=this.waitingData||{frag:a,part:o,cache:new ti,complete:!1}).cache.push(new Uint8Array(e)),this.waitingVideoCC=this.videoTrackCC,this.state=$n)):(this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(a.start)):this.warn("Audio track is undefined on fragment load progress"):this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+a.sn+" of level "+a.level+" will not be buffered")},rr._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:Qr.prototype._handleFragmentLoadComplete.call(this,e)},rr.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},rr.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},rr.onFragBuffered=function(e,t){var n,r=t.frag;t=t.part,r.type===At?this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(t?" p: "+t.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false")):("initSegment"!==r.sn&&(this.fragPrevious=r,n=this.switchingTrack)&&(this.bufferedTrack=n,this.switchingTrack=null,this.hls.trigger(w.AUDIO_TRACK_SWITCHED,i({},n))),this.fragBufferedComplete(r,t)):this.loadedmetadata||r.type!==vt||(n=this.videoBuffer||this.media)&&Sn.getBuffered(n).length&&(this.loadedmetadata=!0)},rr.onError=function(e,t){var n;if(t.fatal)this.state=Zn;else switch(t.details){case S.FRAG_GAP:case S.FRAG_PARSING_ERROR:case S.FRAG_DECRYPT_ERROR:case S.FRAG_LOAD_ERROR:case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_ERROR:case S.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(At,t);break;case S.AUDIO_TRACK_LOAD_ERROR:case S.AUDIO_TRACK_LOAD_TIMEOUT:case S.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==qn||(null==(n=t.context)?void 0:n.type)!==_t||(this.state=Yn);break;case S.BUFFER_APPEND_ERROR:case S.BUFFER_FULL_ERROR:t.parent&&"audio"===t.parent&&(t.details===S.BUFFER_APPEND_ERROR?this.resetLoadingState():this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,Qr.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")));break;case S.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},rr.onBufferFlushed=function(e,t){var n;(t=t.type)===U&&(this.bufferFlushed=!0,this.state===Jn&&(this.state=Yn),n=this.mediaBuffer||this.media)&&(this.afterBufferFlushed(n,t,At),this.tick())},rr._handleTransmuxComplete=function(e){var t,n,i,r,a,s,l,u,c=this.hls,h=e.remuxResult,d=(e=e.chunkMeta,this.getCurrentContext(e));d?(t=d.frag,n=d.part,i=(d=d.level).details,r=h.audio,a=h.text,s=h.id3,h=h.initSegment,!this.fragContextChanged(t)&&i?(this.state=Qn,this.switchingTrack&&r&&this.completeAudioSwitch(this.switchingTrack),null!=h&&h.tracks&&(u=t.initSegment||t,this._bufferInitSegment(d,h.tracks,u,e),c.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:"audio",tracks:h.tracks})),r&&(d=r.startPTS,u=r.endPTS,h=r.startDTS,l=r.endDTS,n&&(n.elementaryStreams[U]={startPTS:d,endPTS:u,startDTS:h,endDTS:l}),t.setElementaryStreamInfo(U,d,u,h,l),this.bufferFragmentData(r,t,n,e)),null!=s&&null!=(d=s.samples)&&d.length&&(u=o({id:"audio",frag:t,details:i},s),c.trigger(w.FRAG_PARSING_METADATA,u)),a&&(h=o({id:"audio",frag:t,details:i},a),c.trigger(w.FRAG_PARSING_USERDATA,h))):this.fragmentTracker.removeFragment(t)):this.resetWhenMissingContext(e)},rr._bufferInitSegment=function(e,t,n,i){var r;this.state===Qn&&(t.video&&delete t.video,r=t.audio)&&(r.id="audio",e=e.audioCodec,this.log("Init audio buffer, container:"+r.container+", codecs[level/parsed]=["+e+"/"+r.codec+"]"),e&&1===e.split(",").length&&(r.levelCodec=e),this.hls.trigger(w.BUFFER_CODECS,t),null!=(e=r.initSegment)&&e.byteLength&&(t={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:e},this.hls.trigger(w.BUFFER_APPENDING,t)),this.tickImmediate())},rr.loadFragment=function(e,t,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,this.switchingTrack||i===hn||i===dn?"initSegment"===e.sn?this._loadInitSegment(e,t):null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=$n,(i=this.mainDetails)&&i.fragments[0].start!==t.details.fragments[0].start&&Pn(t.details,i)):(this.startFragRequested=!0,Qr.prototype.loadFragment.call(this,e,t,n)):this.clearTrackerIfNeeded(e)},rr.flushAudioIfNeeded=function(e){var t=this.media,n=null==(n=this.bufferedTrack)?void 0:n.attrs;e=e.attrs,t&&n&&(n.CHANNELS!==e.CHANNELS||n.NAME!==e.NAME||n.LANGUAGE!==e.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),Qr.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)},rr.completeAudioSwitch=function(e){var t=this.hls;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(w.AUDIO_TRACK_SWITCHED,i({},e))},Ni=$r,s(Zr,qr=on),(_r=Zr.prototype).registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(w.ERROR,this.onError,this)},_r.unregisterListeners=function(){var e=this.hls;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(w.ERROR,this.onError,this)},_r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,qr.prototype.destroy.call(this)},_r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},_r.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},_r.onAudioTrackLoaded=function(e,t){var n,i=t.id,r=t.groupId,a=t.details,o=this.tracksInGroup[i];o&&o.groupId===r?(n=o.details,o.details=t.details,this.log("audio-track "+i+' "'+o.name+'" lang:'+o.lang+" group:"+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,t,n)):this.warn("Track with id:"+i+" and group:"+r+" not found in active group "+o.groupId)},_r.onLevelLoading=function(e,t){this.switchLevel(t.level)},_r.onLevelSwitching=function(e,t){this.switchLevel(t.level)},_r.switchLevel=function(e){var t,n;null!=(e=this.hls.levels[e])&&e.audioGroupIds&&(t=e.audioGroupIds[e.urlId],this.groupId!==t?(this.groupId=t||null,e=this.tracks.filter((function(e){return!t||e.groupId===t})),this.selectDefaultTrack&&!e.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),n={audioTracks:this.tracksInGroup=e},this.log("Updating audio tracks, "+e.length+" track(s) found in group:"+t),this.hls.trigger(w.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack()):this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId))},_r.onError=function(e,t){!t.fatal&&t.context&&t.context.type===_t&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))},_r.setAudioTrack=function(e){var t,n,r,a=this.tracksInGroup;e<0||e>=a.length?this.warn("Invalid id passed to audio-track controller"):(this.clearTimer(),t=this.currentTrack,a[this.trackId],n=(a=a[e]).groupId,r=a.name,this.log("Switching to audio-track "+e+' "'+r+'" lang:'+a.lang+" group:"+n),this.trackId=e,this.currentTrack=a,this.selectDefaultTrack=!1,this.hls.trigger(w.AUDIO_TRACK_SWITCHING,i({},a)),a.details&&!a.details.live||(r=this.switchParams(a.url,null==t?void 0:t.details),this.loadPlaylist(r)))},_r.selectInitialTrack=function(){var e=this.tracksInGroup,t=this.findTrackId(this.currentTrack);-1!==(t=-1===t?this.findTrackId(null):t)?this.setAudioTrack(t):(t=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+e.length),this.warn(t.message),this.hls.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t}))},_r.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if(!this.selectDefaultTrack||i.default){if(!e||void 0!==e.attrs["STABLE-RENDITION-ID"]&&e.attrs["STABLE-RENDITION-ID"]===i.attrs["STABLE-RENDITION-ID"])return i.id;if(e.name===i.name&&e.lang===i.lang)return i.id}}return-1},_r.loadPlaylist=function(e){qr.prototype.loadPlaylist.call(this);var t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){var n=t.id,i=t.groupId,r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist "+n+' "'+t.name+'" lang:'+t.lang+" group:"+i),this.clearTimer(),this.hls.trigger(w.AUDIO_TRACK_LOADING,{url:r,id:n,groupId:i,deliveryDirectives:e||null})}},a(Zr,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),bi=Zr,s(oa,ia=cn),(Gi=oa.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},Gi._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.ERROR,this.onError,this),e.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},Gi._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.ERROR,this.onError,this),e.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},Gi.startLoad=function(e){this.stopLoad(),this.state=Yn,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},Gi.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},Gi.onMediaDetaching=function(){this.tracksBuffered=[],ia.prototype.onMediaDetaching.call(this)},Gi.onLevelLoaded=function(e,t){this.mainDetails=t.details},Gi.onSubtitleFragProcessed=function(e,t){var n=t.frag;if(t=t.success,this.fragPrevious=n,this.state=Yn,t){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var r,a=n.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){r=i[o];break}t=n.start+n.duration,r?r.end=t:i.push(r={start:a,end:t}),this.fragmentTracker.fragBuffered(n)}}},Gi.onBufferFlushing=function(e,t){var n,i=t.startOffset,r=t.endOffset;0!==i||r===Number.POSITIVE_INFINITY||(n=r-1)<=0||(t.endOffsetSubtitles=Math.max(0,n),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=n)e.shift();else{if(!(e[t].start<n))break;e[t].start=n,t++}})),this.fragmentTracker.removeFragmentsInRange(i,n,Et))},Gi.onFragBuffered=function(e,t){this.loadedmetadata||t.frag.type!==vt||null!=(t=this.media)&&t.buffered.length&&(this.loadedmetadata=!0)},Gi.onError=function(e,t){(null==(t=t.frag)?void 0:t.type)===Et&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Hn)&&(this.state=Yn)},Gi.onSubtitleTracksUpdated=function(e,t){var n=this;t=t.subtitleTracks,ta(this.levels,t)?this.levels=t.map((function(e){return new Ut(e)})):(this.tracksBuffered=[],this.levels=t.map((function(e){return e=new Ut(e),n.tracksBuffered[e.id]=[],e})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Et),this.fragPrevious=null,this.mediaBuffer=null)},Gi.onSubtitleTrackSwitch=function(e,t){this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId?(null!=(t=this.levels[this.currentTrackId])&&t.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,t&&this.setInterval(500)):this.clearInterval()},Gi.onSubtitleTrackLoaded=function(e,t){var n=t.details,i=(t=t.id,this.currentTrackId),r=this.levels;if(r.length){var a=r[i];if(!(t>=r.length||t!==i)&&a){if(this.mediaBuffer=this.mediaBufferTimeRanges,r=0,n.live||null!=(i=a.details)&&i.live){if(i=this.mainDetails,n.deltaUpdateFailed||!i)return;var o=i.fragments[0];a.details?0===(r=this.alignPlaylists(n,a.details))&&o&&qt(n,r=o.start):n.hasProgramDateTime&&i.hasProgramDateTime?(Pn(n,i),r=n.fragments[0].start):o&&qt(n,r=o.start)}a.details=n,this.levelLastLoaded=t,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(a.details,r),this.tick(),!n.live||this.fragCurrent||!this.media||this.state!==Yn||rn(null,n.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),a.details=void 0)}}},Gi._handleFragmentLoadComplete=function(e){var t,n=this,i=e.frag,r=(e=e.payload,i.decryptdata),a=this.hls;!this.fragContextChanged(i)&&e&&0<e.byteLength&&r&&r.key&&r.iv&&"AES-128"===r.method&&(t=performance.now(),this.decrypter.decrypt(new Uint8Array(e),r.key.buffer,r.iv.buffer).catch((function(e){throw a.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:i}),e})).then((function(e){var n=performance.now();a.trigger(w.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:t,tdecrypt:n}})})).catch((function(e){n.warn(e.name+": "+e.message),n.state=Yn})))},Gi.doTick=function(){var e,t,n,i,r,a,o,s,l;this.media?this.state===Yn&&(e=this.currentTrackId,e=(s=this.levels)[e],s.length)&&e&&e.details&&(s=this.config,i=this.getLoadPosition(),t=(i=Sn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,s.maxBufferHole)).end,i=i.len,r=this.getFwdBufferInfo(this.media,vt),n=e.details,i>this.getMaxBufferLength(null==r?void 0:r.len)+n.levelTargetDuration||(r=(i=n.fragments).length,l=n.edge,a=null,o=this.fragPrevious,t<l?(s=l-(l=s.maxFragLookUpTolerance)<t?0:l,!(a=rn(o,i,Math.max(i[0].start,t),s))&&o&&o.start<i[0].start&&(a=i[0])):a=i[r-1],a&&("initSegment"!==(a=this.mapToInitFragWhenRequired(a)).sn&&(l=i[a.sn-n.startSN-1])&&l.cc===a.cc&&this.fragmentTracker.getState(l)===hn&&(a=l),this.fragmentTracker.getState(a)===hn)&&this.loadFragment(a,e,t))):this.state=Yn},Gi.getMaxBufferLength=function(e){var t=ia.prototype.getMaxBufferLength.call(this);return e?Math.max(t,e):t},Gi.loadFragment=function(e,t,n){"initSegment"===(this.fragCurrent=e).sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,ia.prototype.loadFragment.call(this,e,t,n))},a(oa,[{key:"mediaBufferTimeRanges",get:function(){return new ra(this.tracksBuffered[this.currentTrackId]||[])}}]),Tr=oa;var na,ia,ra=function(e){function t(t,n,i){if((n>>>=0)>i-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+n+") is greater than the maximum bound ("+i+")");return e[n][t]}this.buffered=void 0,this.buffered={get length(){return e.length},end:function(n){return t("end",n,e.length)},start:function(n){return t("start",n,e.length)}}};function aa(e){var t;return(t=na.call(this,e,"[subtitle-track-controller]")||this).media=null,t.tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.selectDefaultTrack=!0,t.queuedDefaultTrack=-1,t.trackChangeListener=function(){return t.onTextTracksChanged()},t.asyncPollTrackChange=function(){return t.pollTrackChange(0)},t.useTextTrackPolling=!1,t.subtitlePollingInterval=-1,t._subtitleDisplay=!0,t.registerListeners(),t}function oa(e,t,n){return(e=ia.call(this,e,t,n,"[subtitle-stream-controller]",Et)||this).levels=[],e.currentTrackId=-1,e.tracksBuffered=[],e.mainDetails=null,e._registerListeners(),e}function sa(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||t.push(e[n])}return t}function la(e){var t=e;return fa.hasOwnProperty(e)&&(t=fa[e]),String.fromCharCode(t)}function ua(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}s(aa,na=on),(Ai=aa.prototype).destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,na.prototype.destroy.call(this)},Ai.registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(w.ERROR,this.onError,this)},Ai.unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(w.ERROR,this.onError,this)},Ai.onMediaAttached=function(e,t){this.media=t.media,this.media&&(-1<this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},Ai.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},Ai.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),-1<this.trackId&&(this.queuedDefaultTrack=this.trackId),sa(this.media.textTracks).forEach((function(e){Ct(e)})),this.subtitleTrack=-1,this.media=null)},Ai.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},Ai.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},Ai.onSubtitleTrackLoaded=function(e,t){var n,i=t.id,r=t.details,a=this.trackId;(a=this.tracksInGroup[a])?(n=a.details,a.details=t.details,this.log("subtitle track "+i+" loaded ["+r.startSN+"-"+r.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,t,n)):this.warn("Invalid subtitle track id "+i)},Ai.onLevelLoading=function(e,t){this.switchLevel(t.level)},Ai.onLevelSwitching=function(e,t){this.switchLevel(t.level)},Ai.switchLevel=function(e){var t,n,i,r;null!=(e=this.hls.levels[e])&&e.textGroupIds&&(t=e.textGroupIds[e.urlId],e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,this.groupId!==t?(n=this.tracks.filter((function(e){return!t||e.groupId===t})),this.tracksInGroup=n,i=this.findTrackId(null==e?void 0:e.name)||this.findTrackId(),this.groupId=t||null,r={subtitleTracks:n},this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(w.SUBTITLE_TRACKS_UPDATED,r),-1!==i&&this.setSubtitleTrack(i,e)):this.shouldReloadPlaylist(e)&&this.setSubtitleTrack(this.trackId,e))},Ai.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},Ai.onError=function(e,t){!t.fatal&&t.context&&t.context.type===yt&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)},Ai.loadPlaylist=function(e){na.prototype.loadPlaylist.call(this);var t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){var n=t.id,i=t.groupId;if(t=t.url,e)try{t=e.addDirectives(t)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(w.SUBTITLE_TRACK_LOADING,{url:t,id:n,groupId:i,deliveryDirectives:e||null})}},Ai.toggleTrackModes=function(e){var t,n=this,i=this.media,r=this.trackId;i&&(t=(i=sa(i.textTracks)).filter((function(e){return e.groupId===n.groupId})),-1===e?[].slice.call(i).forEach((function(e){e.mode="disabled"})):(i=t[r])&&(i.mode="disabled"),r=t[e])&&(r.mode=this.subtitleDisplay?"showing":"hidden")},Ai.setSubtitleTrack=function(e,t){var n,i,r,a,o,s=this.tracksInGroup;this.media?(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(n=s[e])&&n.details)||e<-1||e>=s.length||(this.clearTimer(),n=s[e],this.log("Switching to subtitle-track "+e+(n?' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId:"")),this.trackId=e,n?(s=n.id,i=n.groupId,r=n.name,a=n.type,o=n.url,this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:s,groupId:void 0===i?"":i,name:r,type:a,url:o}),s=this.switchParams(n.url,null==t?void 0:t.details),this.loadPlaylist(s)):this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:e}))):this.queuedDefaultTrack=e},Ai.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=sa(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},a(aa,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,-1<this.trackId&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),rr=aa,(_r=Na.prototype).append=function(e,t,n){var i=this.queues[t];i.push(e),1!==i.length||n||this.executeNext(t)},_r.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},_r.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},_r.executeNext=function(e){var t=this.queues[e];if(t.length){var n=t[0];try{n.execute()}catch(t){P.warn('[buffer-operation-queue]: Exception executing "'+e+'" SourceBuffer operation: '+t),n.onError(t),null!=(n=this.buffers[e])&&n.updating||this.shiftAndExecuteNext(e)}}},_r.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},_r.current=function(e){return this.queues[e][0]};var ca=Na,ha=qe(),da=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,fa=((Gi=Oa.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},Gi.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},Gi.registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.BUFFER_RESET,this.onBufferReset,this),e.on(w.BUFFER_APPENDING,this.onBufferAppending,this),e.on(w.BUFFER_CODECS,this.onBufferCodecs,this),e.on(w.BUFFER_EOS,this.onBufferEos,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(w.FRAG_PARSED,this.onFragParsed,this),e.on(w.FRAG_CHANGED,this.onFragChanged,this)},Gi.unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.BUFFER_RESET,this.onBufferReset,this),e.off(w.BUFFER_APPENDING,this.onBufferAppending,this),e.off(w.BUFFER_CODECS,this.onBufferCodecs,this),e.off(w.BUFFER_EOS,this.onBufferEos,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(w.FRAG_PARSED,this.onFragParsed,this),e.off(w.FRAG_CHANGED,this.onFragChanged,this)},Gi._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new ca(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},Gi.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},Gi.onManifestParsed=function(e,t){var n=2;(!t.audio||t.video)&&t.altAudio||(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},Gi.onMediaAttaching=function(e,t){var n;(t=this.media=t.media)&&ha&&((n=this.mediaSource=new ha).addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=self.URL.createObjectURL(n),this._objectUrl=t.src,t.addEventListener("emptied",this._onMediaEmptied))},Gi.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):this.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(w.MEDIA_DETACHED,void 0)},Gi.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(n){e.warn("Failed to reset the "+t+" buffer",n)}})),this._initSourceBuffer()},Gi.onBufferCodecs=function(e,t){var n=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){var r,a,o,s,l,u,c,h,d;i?(r=n.tracks[e])&&"function"==typeof r.buffer.changeType&&(a=(u=t[e]).id,o=u.codec,s=u.levelCodec,l=u.container,u=u.metadata,(c=(r.levelCodec||r.codec).replace(da,"$1"))!==(h=(s||o).replace(da,"$1")))&&(d=s||o,d=l+";codecs="+(d="audio"===e.slice(0,5)?tt(d):d),n.appendChangeType(e,d),n.log("switching codec "+c+" to "+h),n.tracks[e]={buffer:r.buffer,codec:o,container:l,levelCodec:s,metadata:u,id:a}):n.pendingTracks[e]=t[e]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},Gi.appendChangeType=function(e,t){var n=this,i=this.operationQueue;i.append({execute:function(){var r=n.sourceBuffer[e];r&&(n.log("changing "+e+" sourceBuffer type to "+t),r.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){n.warn("Failed to change "+e+" SourceBuffer type",t)}},e,!!this.pendingTracks[e])},Gi.onBufferAppending=function(e,t){var n=this,i=this.hls,r=this.operationQueue,a=this.tracks,o=t.data,s=t.type,l=t.frag,u=t.part,c=t.chunkMeta,h=c.buffering[s],d=(t=self.performance.now(),h.start=t,l.stats.buffering),f=u?u.stats.buffering:null,p=(0===d.start&&(d.start=t),f&&0===f.start&&(f.start=t),t=a.audio,!1),m=("audio"===s&&"audio/mpeg"===(null==t?void 0:t.container)&&(p=!this.lastMpegAudioChunk||1===c.id||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c),l.start);r.append({execute:function(){var e,t;h.executeStart=self.performance.now(),p&&(e=n.sourceBuffer[s])&&(t=m-e.timestampOffset,.1<=Math.abs(t))&&(n.log("Updating audio SourceBuffer timestampOffset to "+m+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=m),n.appendExecutor(o,s)},onStart:function(){},onComplete:function(){var e,t=self.performance.now(),i=(h.executeEnd=h.end=t,0===d.first&&(d.first=t),f&&0===f.first&&(f.first=t),n.sourceBuffer),r={};for(e in i)r[e]=Sn.getBuffered(i[e]);n.appendErrors[s]=0,n.hls.trigger(w.BUFFER_APPENDED,{type:s,frag:l,part:u,chunkMeta:c,parent:l.type,timeRanges:r})},onError:function(e){var t={type:T.MEDIA_ERROR,parent:l.type,details:S.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:l,part:u,chunkMeta:c,error:e,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=S.BUFFER_FULL_ERROR:(e=++n.appendErrors[s],t.details=S.BUFFER_APPEND_ERROR,n.warn("Failed "+e+"/"+i.config.appendErrorMaxRetry+' times to append segment in "'+s+'" sourceBuffer'),e>i.config.appendErrorMaxRetry&&(t.fatal=!0)),i.trigger(w.ERROR,t)}},s,!!this.pendingTracks[s])},Gi.onBufferFlushing=function(e,t){function n(e){return{execute:i.removeExecutor.bind(i,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){i.hls.trigger(w.BUFFER_FLUSHED,{type:e})},onError:function(t){i.warn("Failed to remove from "+e+" SourceBuffer",t)}}}var i=this,r=this.operationQueue;t.type?r.append(n(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){r.append(n(e),e)}))},Gi.onFragParsed=function(e,t){var n=this,i=t.frag,r=t.part,a=(t=[],(r||i).elementaryStreams);a[G]?t.push("audiovideo"):(a[U]&&t.push("audio"),a[j]&&t.push("video")),0===t.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var e=self.performance.now();i.stats.buffering.end=e,r&&(r.stats.buffering.end=e),e=(r||i).stats,n.hls.trigger(w.FRAG_BUFFERED,{frag:i,part:r,stats:e,id:i.type})}),t)},Gi.onFragChanged=function(e,t){this.flushBackBuffer()},Gi.onBufferEos=function(e,t){var n=this;this.getSourceBufferTypes().reduce((function(e,i){var r=n.sourceBuffer[i];return!r||t.type&&t.type!==i||(r.ending=!0,r.ended)||(r.ended=!0,n.log(i+" sourceBuffer now EOS")),e&&!(r&&!r.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){n.getSourceBufferTypes().forEach((function(e){(e=n.sourceBuffer[e])&&(e.ending=!1)}));var e=n.mediaSource;e&&"open"===e.readyState?(n.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&n.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)})))},Gi.onLevelUpdated=function(e,t){(t=t.details).fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},Gi.flushBackBuffer=function(){var e,t,n,i,r,a=this,o=this.hls,s=this.details,l=this.media,u=this.sourceBuffer;l&&null!==s&&(e=this.getSourceBufferTypes()).length&&(t=s.live&&null!==o.config.liveBackBufferLength?o.config.liveBackBufferLength:o.config.backBufferLength,!b(t)||t<0||(n=l.currentTime,i=s.levelTargetDuration,l=Math.max(t,i),r=Math.floor(n/i)*i-l,e.forEach((function(e){var t=u[e];if(t){var l=Sn.getBuffered(t);if(0<l.length&&r>l.start(0)){if(o.trigger(w.BACK_BUFFER_REACHED,{bufferEnd:r}),s.live)o.trigger(w.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(t.ended&&l.end(l.length-1)-n<2*i)return void a.log("Cannot flush "+e+" back buffer while SourceBuffer is in ended state");o.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:e})}}}))))},Gi.updateMediaElementDuration=function(){var e,t,n,i,r,a;this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState&&(e=this.details,t=this.hls,r=this.media,n=this.mediaSource,i=e.fragments[0].start+e.totalduration,r=r.duration,a=b(n.duration)?n.duration:0,e.live&&t.config.liveDurationInfinity?(n.duration=1/0,this.updateSeekableRange(e)):(a<i&&r<i||!b(r))&&(this.log("Updating Media Source duration to "+i.toFixed(3)),n.duration=i))},Gi.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;n.length&&e.live&&null!=t&&t.setLiveSeekableRange&&(n=Math.max(0,n[0].start),e=Math.max(n,n+e.totalduration),this.log("Media Source duration is set to "+t.duration+". Setting seekable range to "+n+"-"+e+"."),t.setLiveSeekableRange(n,e))},Gi.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;(i&&!e||2===i)&&(this.createSourceBuffers(n),this.pendingTracks={},(e=this.getSourceBufferTypes()).length?(this.hls.trigger(w.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((function(e){t.executeNext(e)}))):(i=new Error("could not create source buffer for media codec(s)"),this.hls.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:i,reason:i.message})))},Gi.createSourceBuffers=function(e){var t,n=this.sourceBuffer,i=this.mediaSource;if(!i)throw Error("createSourceBuffers called when mediaSource was null");for(t in e)if(!n[t]){var r=e[t];if(!r)throw Error("source buffer exists for track "+t+", however track does not");var a=r.levelCodec||r.codec,o=(a&&"audio"===t.slice(0,5)&&(a=tt(a)),r.container+";codecs="+a);this.log("creating sourceBuffer("+o+")");try{var s=n[t]=i.addSourceBuffer(o),l=t;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[t]={buffer:s,codec:a,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(e){this.error("error while trying to add sourceBuffer: "+e.message),this.hls.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:t,mimeType:o})}}},Gi._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},Gi._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},Gi._onSBUpdateError=function(e,t){var n=new Error(e+" SourceBuffer error");this.error(""+n,t),this.hls.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:n,fatal:!1}),(n=this.operationQueue.current(e))&&n.onError(t)},Gi.removeExecutor=function(e,t,n){var i=this.media,r=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];i&&r&&o?(i=b(i.duration)?i.duration:1/0,r=b(r.duration)?r.duration:1/0,(t=Math.max(0,t))<(n=Math.min(n,i,r))&&(!o.ending||o.ended)?(o.ended=!1,this.log("Removing ["+t+","+n+"] from the "+e+" SourceBuffer"),o.remove(t,n)):a.shiftAndExecuteNext(e)):(this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),a.shiftAndExecuteNext(e))},Gi.appendExecutor=function(e,t){var n=this.sourceBuffer[t];if(n)n.ended=!1,n.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the "+t+" SourceBuffer, but it does not exist")},Gi.blockBuffers=function(e,t){var n,i,r=this;(t=void 0===t?this.getSourceBufferTypes():t).length?(n=this.operationQueue,i=t.map((function(e){return n.appendBlocker(e)})),Promise.all(i).then((function(){e(),t.forEach((function(e){var t=r.sourceBuffer[e];null!=t&&t.updating||n.shiftAndExecuteNext(e)}))}))):(this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e))},Gi.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},Gi.addBufferListener=function(e,t,n){var i=this.sourceBuffer[e];i&&(n=n.bind(this,e),this.listeners[e].push({event:t,listener:n}),i.addEventListener(t,n))},Gi.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},Ai=Oa,{42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499}),pa=15,ma=100,ga={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ya={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},va={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Aa=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Ea=(Ma.prototype.log=function(e,t){this.verboseLevel>=e&&(t="function"==typeof t?t():t,P.log(this.time+" ["+e+"] "+t))},Ma),ba=((_r=xa.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},_r.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},_r.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},_r.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},_r.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},_r.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},xa),wa=((Gi=ka.prototype).reset=function(){this.uchar=" ",this.penState.reset()},Gi.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},Gi.setPenState=function(e){this.penState.copy(e)},Gi.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},Gi.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},Gi.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},ka),Ta=((_r=Da.prototype).equals=function(e){for(var t=0;t<ma;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0},_r.copy=function(e){for(var t=0;t<ma;t++)this.chars[t].copy(e.chars[t])},_r.isEmpty=function(){for(var e=!0,t=0;t<ma;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},_r.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ma&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ma)},_r.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},_r.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},_r.insertChar=function(e){var t=this,n=(144<=e&&this.backSpace(),la(e));this.pos>=ma?this.logger.log(0,(function(){return"Cannot insert "+e.toString(16)+" ("+n+") at position "+t.pos+". Skipping it!"})):(this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1))},_r.clearFromPos=function(e){for(var t=e;t<ma;t++)this.chars[t].reset()},_r.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},_r.clearToEndOfRow=function(){this.clearFromPos(this.pos)},_r.getTextString=function(){for(var e=[],t=!0,n=0;n<ma;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},_r.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},Da),Sa=((Gi=Pa.prototype).reset=function(){for(var e=0;e<pa;e++)this.rows[e].clear();this.currRow=14},Gi.equals=function(e){for(var t=!0,n=0;n<pa;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},Gi.copy=function(e){for(var t=0;t<pa;t++)this.rows[t].copy(e.rows[t])},Gi.isEmpty=function(){for(var e=!0,t=0;t<pa;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},Gi.backSpace=function(){this.rows[this.currRow].backSpace()},Gi.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},Gi.insertChar=function(e){this.rows[this.currRow].insertChar(e)},Gi.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},Gi.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},Gi.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},Gi.setPAC=function(e){this.logger.log(2,(function(){return"pacData = "+JSON.stringify(e)}));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<pa;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime,o=this.logger.time;if(null!==a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=t,a=this.rows[this.currRow],null!==e.indent&&(o=e.indent,o=Math.max(o-1,0),a.setCursor(e.indent),e.color=a.chars[o].penState.foreground),a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1},this.setPen(a)},Gi.setBkgData=function(e){this.logger.log(2,(function(){return"bkgData = "+JSON.stringify(e)})),this.backSpace(),this.setPen(e),this.insertChar(32)},Gi.setRollUpRows=function(e){this.nrRollUpRows=e},Gi.rollUp=function(){var e,t=this;null!==this.nrRollUpRows?(this.logger.log(1,(function(){return t.getDisplayText()})),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),this.logger.log(2,"Rolling up")):this.logger.log(3,"roll_up but nrRollUpRows not set yet")},Gi.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=0;i<pa;i++){var r=this.rows[i].getTextString();r&&t.push(e?"Row "+(i+1)+": '"+r+"'":r.trim())}return 0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):n},Gi.getTextAndFormat=function(){return this.rows},Pa),Ra=((_r=La.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},_r.getHandler=function(){return this.outputFilter},_r.setHandler=function(e){this.outputFilter=e},_r.setPAC=function(e){this.writeScreen.setPAC(e)},_r.setBkgData=function(e){this.writeScreen.setBkgData(e)},_r.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(function(){return"MODE="+e})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},_r.insertChars=function(e){for(var t=this,n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return i+": "+t.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},_r.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},_r.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},_r.ccAOF=function(){},_r.ccAON=function(){},_r.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},_r.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},_r.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},_r.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},_r.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},_r.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},_r.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},_r.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},_r.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},_r.ccEOC=function(){var e,t=this;this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return"DISP: "+t.displayedMemory.getDisplayText()}))),this.outputDataUpdate(!0)},_r.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},_r.ccMIDROW=function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},_r.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},_r.cueSplitAtTime=function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)},La),Ia=((Gi=Ca.prototype).getHandler=function(e){return this.channels[e].getHandler()},Gi.setHandler=function(e,t){this.channels[e].setHandler(t)},Gi.addData=function(e,t){var n,i=!1;this.logger.time=e;for(var r=0;r<t.length;r+=2){var a,o=127&t[r],s=127&t[r+1];0==o&&0==s||(this.logger.log(3,"["+ua([t[r],t[r+1]])+"] -> ("+ua([o,s])+")"),!(n=(n=(n=(n=this.parseCmd(o,s))||this.parseMidrow(o,s))||this.parsePAC(o,s))||this.parseBackgroundAttributes(o,s))&&(i=this.parseChars(o,s))&&((a=this.currentChannel)&&0<a?this.channels[a].insertChars(i):this.logger.log(2,"No channel found yet. TEXT-MODE?")),n)||i||this.logger.log(2,"Couldn't parse cleaned data "+ua([o,s])+" orig: "+ua([t[r],t[r+1]]))}},Gi.parseCmd=function(e,t){var n,i,r=this.cmdHistory;return((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35)&&(Ba(e,t,r)?(Fa(null,null,r),this.logger.log(3,"Repeated command ("+ua([e,t])+") is dropped")):(i=this.channels[n=20===e||21===e||23===e?1:2],20===e||21===e||28===e||29===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),Fa(e,t,r),this.currentChannel=n),!0)},Gi.parseMidrow=function(e,t){var n;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currentChannel?(this.logger.log(0,"Mismatch channel in midrow parsing"),!1):!!(n=this.channels[n])&&(n.ccMIDROW(t),this.logger.log(3,"MIDROW ("+ua([e,t])+")"),!0))},Gi.parsePAC=function(e,t){var n,i,r=this.cmdHistory;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(Ba(e,t,r)?(Fa(null,null,r),!0):!!(i=this.channels[n=e<=23?1:2])&&(i.setPAC(this.interpretPAC((64<=t&&t<=95?1==n?ga:ya:1==n?_a:va)[e],t)),Fa(e,t,r),this.currentChannel=n,!0))},Gi.interpretPAC=function(e,t){return(e={color:null,italics:!1,indent:null,underline:!1,row:e}).underline=!(1&~(t=95<t?t-96:t-64)),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},Gi.parseChars=function(e,t){var n,i=null,r=null;return 17<=(r=25<=e?(n=2,e-8):(n=1,e))&&r<=19?(this.logger.log(2,"Special char '"+la(r=17===r?t+80:18===r?t+112:t+144)+"' in channel "+n),i=[r]):32<=e&&e<=127&&(i=0===t?[e]:[e,t]),i&&(n=ua(i),this.logger.log(3,"Char codes =  "+n.join(",")),Fa(e,t,this.cmdHistory)),i},Gi.parseBackgroundAttributes=function(e,t){var n,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(i={},16===e||24===e?(n=Math.floor((t-32)/2),i.background=Aa[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0)),this.channels[e<=23?1:2].setBkgData(i),Fa(e,t,this.cmdHistory),!0)},Gi.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},Gi.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},Ca);function Ca(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;var i=this.logger=new Ea;this.channels=[null,new Ra(e,t,i),new Ra(e+1,n,i)]}function La(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Sa(n),this.nonDisplayedMemory=new Sa(n),this.lastOutputScreen=new Sa(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}function Pa(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var t=0;t<pa;t++)this.rows.push(new Ta(e));this.logger=e}function Da(e){this.chars=[],this.pos=0,this.currPenState=new ba,this.cueStartTime=null,this.logger=void 0;for(var t=0;t<ma;t++)this.chars.push(new wa);this.logger=e}function ka(){this.uchar=" ",this.penState=new ba}function xa(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}function Ma(){this.time=null,this.verboseLevel=0}function Oa(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onMediaSourceOpen=function(){var e=t.media,n=t.mediaSource;t.log("Media source opened"),e&&(e.removeEventListener("emptied",t._onMediaEmptied),t.updateMediaElementDuration(),t.hls.trigger(w.MEDIA_ATTACHED,{media:e})),n&&n.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){t.log("Media source closed")},this._onMediaSourceEnded=function(){t.log("Media source ended")},this._onMediaEmptied=function(){var e=t.media,n=t._objectUrl;e&&e.src!==n&&t.error("Media element src was set while attaching MediaSource ("+n+" > "+e.src+")")},this.hls=e,e="[buffer-controller]",this.log=P.log.bind(P,e),this.warn=P.warn.bind(P,e),this.error=P.error.bind(P,e),this._initSourceBuffer(),this.registerListeners()}function Na(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}function Fa(e,t,n){n.a=e,n.b=t}function Ba(e,t,n){return n.a===e&&n.b===t}(_r=Qa.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},_r.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},_r.reset=function(){this.cueRanges=[],this.startTime=null};var Ua,ja,Ga=Qa,Va="undefined"!=typeof self&&self.VTTCue?self.VTTCue:(Ua=["","lr","rl"],ja=["start","middle","end","left","right"],qa.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},qa),Ha=(Ya.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},Ya);function Ya(){}function za(e,t){return"string"==typeof t&&!!Array.isArray(e)&&(t=t.toLowerCase(),!!~e.indexOf(t))&&t}function Wa(e){return za(ja,e)}function Ka(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=1;r<arguments.length;r++){var a,o=arguments[r];for(a in o)e[a]=o[a]}return e}function qa(e,t,n){var i=this,r={enumerable:!0},a=(i.hasBeenReset=!1,""),o=!1,s=e,l=t,u=n,c=null,h="",d=!0,f="auto",p="start",m=50,g="middle",_=50,y="middle";Object.defineProperty(i,"id",Ka({},r,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(i,"pauseOnExit",Ka({},r,{get:function(){return o},set:function(e){o=!!e}})),Object.defineProperty(i,"startTime",Ka({},r,{get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",Ka({},r,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",Ka({},r,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",Ka({},r,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",Ka({},r,{get:function(){return h},set:function(e){if(!1===(e=za(Ua,e)))throw new SyntaxError("An invalid or illegal string was specified.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",Ka({},r,{get:function(){return d},set:function(e){d=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",Ka({},r,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",Ka({},r,{get:function(){return p},set:function(e){if(!(e=Wa(e)))throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",Ka({},r,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",Ka({},r,{get:function(){return g},set:function(e){if(!(e=Wa(e)))throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",Ka({},r,{get:function(){return _},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",Ka({},r,{get:function(){return y},set:function(e){if(!(e=Wa(e)))throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),i.displayState=void 0}function Qa(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}function Xa(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}return(e=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/))?59<parseFloat(e[2])?t(e[2],e[3],0,e[4]):t(e[1],e[2],e[3],e[4]):null}(Gi=Za.prototype).set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},Gi.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},Gi.has=function(e){return e in this.values},Gi.alt=function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},Gi.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},Gi.percent=function(e,t){return!!(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)};var Ja=Za;function Za(){this.values=Object.create(null)}function $a(e,t,n,i){var r,a,o=i?e.split(i):[e];for(r in o)"string"==typeof o[r]&&2===(a=o[r].split(n)).length&&t(a[0],a[1])}var eo=new Va(0,0,""),to="middle"===eo.align?"middle":"center";function no(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function io(e,t,n){return e.slice(n=void 0===n?0:n,n+t.length)===t}(_r=so.prototype).parse=function(e){var t=this;function n(){for(var e=0,n=no(n=t.buffer);e<n.length&&"\r"!==n[e]&&"\n"!==n[e];)++e;var i=n.slice(0,e);return"\r"===n[e]&&++e,"\n"===n[e]&&++e,t.buffer=n.slice(e),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(i=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?$a(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new Va(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{!function(e,t,n){var i,r,a=e;function o(){var t=Xa(e);if(null===t)throw new Error("Malformed timestamp: "+a);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=o(),s(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);e=e.slice(3),s(),t.endTime=o(),s(),i=e,r=new Ja,$a(i,(function(e,t){var i;switch(e){case"region":for(var a=n.length-1;0<=a;a--)if(n[a].id===t){r.set(e,n[a].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",to,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",to,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",to,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),"auto"===(i=r.get("line","auto"))&&-1===eo.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",to),"auto"===(i=r.get("position","auto"))&&50===eo.position&&(i="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=i}(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},_r.flush=function(){var e=this;try{if(!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this};var ro=so,ao=/\r\n|\n\r|\n|\r/g,oo=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function so(){this.state="INITIAL",this.buffer="",this.decoder=new Ha,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}function lo(e,t,n){return oo(e.toString())+oo(t.toString())+oo(n)}var uo="stpp.ttml.im1t",co=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ho=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,fo={left:"start",center:"center",right:"end",start:"start",end:"end"};function po(e,t,n,i){if(0!==(a=De(new Uint8Array(e),["mdat"])).length){var r,a=a.map((function(e){return Ee(e)})),s=fr(t.baseTime,1,1/(t=void 0===(t=t.timescale)?1:t),r=void 0!==r&&r);try{a.forEach((function(e){return n(function(e,t){var n,i,r,a,s,l=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(l)return n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(n).reduce((function(e,t){return e[t]=l.getAttribute("ttp:"+t)||n[t],e}),{}),r="preserve"!==l.getAttribute("xml:space"),a=go(mo(l,"styling","style")),s=go(mo(l,"layout","region")),e=mo(l,"body","[begin]"),[].map.call(e,(function(e){var n=function e(t,n){return[].slice.call(t.childNodes).reduce((function(t,i,r){return"br"===i.nodeName&&r?t+"\n":null!=(r=i.childNodes)&&r.length?e(i,n):n?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent}),"")}(e,r);if(!n||!e.hasAttribute("begin"))return null;var l,u,c,h,d=vo(e.getAttribute("begin"),i),f=vo(e.getAttribute("dur"),i),p=vo(e.getAttribute("end"),i);if(null===d)throw yo(e);if(null===p){if(null===f)throw yo(e);p=d+f}return(f=new Va(d-t,p-t,n)).id=lo(f.startTime,f.endTime,f.text),l=s[e.getAttribute("region")],u=a[e.getAttribute("style")],d=a,c="http://www.w3.org/ns/ttml#styling",(p=(h=null)!=l&&l.hasAttribute("style")?l.getAttribute("style"):null)&&d.hasOwnProperty(p)&&(h=d[p]),n=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(e,t){var n=_o(u,c,t)||_o(l,c,t)||_o(h,c,t);return n&&(e[t]=n),e}),{}),(e=n.textAlign)&&((d=fo[e])&&(f.lineAlign=d),f.align=e),o(f,n),f})).filter((function(e){return null!==e}));throw new Error("Invalid ttml")}(e,s))}))}catch(e){i(e)}}else i(new Error("Could not parse IMSC1 mdat"))}function mo(e,t,n){return(e=e.getElementsByTagName(t)[0])?[].slice.call(e.querySelectorAll(n)):[]}function go(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function _o(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function yo(e){return new Error("Could not parse ttml timestamp "+e)}function vo(e,t){var n,i,r,a;return e?(null===(n=Xa(e))&&(co.test(e)?(i=t,a=(0|(r=co.exec(e))[4])+(0|r[5])/i.subFrameRate,n=3600*(0|r[1])+60*(0|r[2])+(0|r[3])+a/i.frameRate):ho.test(e)&&(n=function(t){var n=ho.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(t))),n):null}function Ao(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(w.FRAG_LOADING,this.onFragLoading,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(w.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this)}(Gi=Ao.prototype).destroy=function(){var e=this.hls;e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(w.FRAG_LOADING,this.onFragLoading,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(w.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},Gi.lazyInit608=function(){var e,t,n,i;!this.config.enableCEA708Captions||this.cea608Parser1&&this.cea608Parser2||(e=new Ga(this,"textTrack1"),t=new Ga(this,"textTrack2"),n=new Ga(this,"textTrack3"),i=new Ga(this,"textTrack4"),this.cea608Parser1=new Ia(1,e,t),this.cea608Parser2=new Ia(3,n,i))},Gi.addCues=function(e,t,n,i,r){for(var a,o,s,l=!1,u=r.length;u--;){var c=r[u],h=(a=c[0],h=c[1],o=t,Math.min(h,n)-Math.max(a,o));if(0<=h&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],n),l=!0,.5<h/(n-t)))return}l||r.push([t,n]),this.config.renderTextTracksNatively?(s=this.captionsTracks[e],this.Cues.newCue(s,t,n,i)):(s=this.Cues.newCue(null,t,n,i),this.hls.trigger(w.CUES_PARSED,{type:"captions",cues:s,track:e}))},Gi.onInitPtsFound=function(e,t){var n=this,i=t.frag,r=t.id,a=t.initPTS,o=(t=t.timescale,this.unparsedVttFrags);"main"===r&&(this.initPTS[i.cc]={baseTime:a,timescale:t}),o.length&&(this.unparsedVttFrags=[],o.forEach((function(e){n.onFragLoaded(w.FRAG_LOADED,e)})))},Gi.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},Gi.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},Gi.createNativeTrack=function(e){var t,n,i,r,a;this.captionsTracks[e]||(r=this.captionsProperties,t=this.captionsTracks,n=this.media,i=(r=r[e]).label,r=r.languageCode,(a=this.getExistingTrack(e))?(t[e]=a,Ct(t[e]),Rt(t[e],n)):(a=this.createTextTrack("captions",i,r))&&(a[e]=!0,t[e]=a))},Gi.createNonNativeTrack=function(e){var t;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]}))},Gi.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},Gi.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},Gi.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Ct(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},Gi.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},Gi._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Ct(t[n])}},Gi.onSubtitleTracksUpdated=function(e,t){var n,i=this,r=(t=t.subtitleTracks||[]).some((function(e){return e.textCodec===uo}));(this.config.enableWebVTT||r&&this.config.enableIMSC1)&&(ta(this.tracks,t)?this.tracks=t:(this.textTracks=[],this.tracks=t,this.config.renderTextTracksNatively?(n=this.media?this.media.textTracks:null,this.tracks.forEach((function(e,t){var r,a,o;if(n&&t<n.length){for(var s=null,l=0;l<n.length;l++)if(o=e,(a=n[l])&&a.label===o.name&&!a.textTrack1&&!a.textTrack2){s=n[l];break}s&&(r=s)}r?Ct(r):(t=i._captionsOrSubtitlesFromCharacteristics(e),(r=i.createTextTrack(t,e.name,e.lang))&&(r.mode="disabled")),r&&(r.groupId=e.groupId,i.textTracks.push(r))}))):this.tracks.length&&(r=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}})),this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:r}))))},Gi._captionsOrSubtitlesFromCharacteristics=function(e){return e.attrs.CHARACTERISTICS&&/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS)&&/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS)?"captions":"subtitles"},Gi.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);t&&(t="textTrack"+t[1],t=n.captionsProperties[t])&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e)}))},Gi.closedCaptionsForLevel=function(e){return null==(e=this.hls.levels[e.level])?void 0:e.attrs["CLOSED-CAPTIONS"]},Gi.onFragLoading=function(e,t){var n,i,r=this.cea608Parser1,a=this.cea608Parser2,o=this.lastCc,s=this.lastSn,l=this.lastPartIndex;this.enabled&&r&&a&&t.frag.type===vt&&(n=(i=t.frag).cc,i=i.sn,t=null!=(t=null==t||null==(t=t.part)?void 0:t.index)?t:-1,i===s+1||i===s&&t===l+1||n===o||(r.reset(),a.reset()),this.lastCc=n,this.lastSn=i,this.lastPartIndex=t)},Gi.onFragLoaded=function(e,t){var n,i,r=t.frag,a=t.payload;r.type===Et&&(a.byteLength?(i="stats"in t,null!=(n=r.decryptdata)&&n.encrypted&&!i||(n=this.tracks[r.level],(i=this.vttCCs)[r.cc]||(i[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),n&&n.textCodec===uo?this._parseIMSC1(r,a):this._parseVTTs(t))):this.hls.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")}))},Gi._parseIMSC1=function(e,t){var n=this,i=this.hls;po(t,this.initPTS[e.cc],(function(t){n._appendCues(t,e.level),i.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){P.log("Failed to parse IMSC1: "+t),i.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},Gi._parseVTTs=function(e){var t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_=this,y=e.frag,v=e.payload,A=this.initPTS,E=this.unparsedVttFrags,T=A.length-1;A[y.cc]||-1!=T?(t=this.hls,A=null!=(A=y.initSegment)&&A.data?Ne(y.initSegment.data,new Uint8Array(v)):v,n=this.initPTS[y.cc],i=this.vttCCs,r=y.cc,a=y.start,o=function(e){_._appendCues(e,y.level),t.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:y})},s=function(n){var i="Missing initPTS for VTT MPEGTS"===n.message;i?E.push(e):_._fallbackToIMSC1(y,v),P.log("Failed to parse VTT cue: "+n),i&&T>y.cc||t.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:y,error:n})},c=new ro,A=Ee(new Uint8Array(A)).trim().replace(ao,"\n").split("\n"),h=[],d=n?fr(n.baseTime,9e4,1/(l=void 0===(l=n.timescale)?1:l)):0,f="00:00.000",g=!(m=p=0),c.oncue=function(e){var t=i[r],o=i.ccOffset,s=(p-d)/9e4;if(null!=t&&t.new&&(void 0!==m?o=i.ccOffset=t.start:function(e,t){var n=e[r],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,n.new=!1;for(;null!=i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC];e.presentationOffset=t}(i,s)),s){if(!n)return void(u=new Error("Missing initPTS for VTT MPEGTS"));o=s-i.presentationOffset}t=e.endTime-e.startTime,s=vr(9e4*(e.startTime+o-m),9e4*a)/9e4,e.startTime=Math.max(s,0),e.endTime=Math.max(s+t,0),o=e.text.trim(),e.text=decodeURIComponent(encodeURIComponent(o)),e.id||(e.id=lo(e.startTime,e.endTime,o)),0<e.endTime&&h.push(e)},c.onparsingerror=function(e){u=e},c.onflush=function(){u?s(u):o(h)},A.forEach((function(e){if(g){if(io(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach((function(e){io(e,"LOCAL:")?f=e.slice(6):io(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{m=function(e){var t=parseInt(e.slice(-3)),n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),r=9<e.length?parseInt(e.substring(0,e.indexOf(":"))):0;if(b(t)&&b(n)&&b(i)&&b(r))return t+1e3*n+6e4*i+36e5*r;throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e)}(f)/1e3}catch(e){u=e}return}""===e&&(g=!1)}c.parse(e+"\n")})),c.flush()):E.push(e)},Gi._fallbackToIMSC1=function(e,t){var n=this,i=this.tracks[e.level];i.textCodec||po(t,this.initPTS[e.cc],(function(){i.textCodec=uo,n._parseIMSC1(e,t)}),(function(){i.textCodec="wvtt"}))},Gi._appendCues=function(e,t){var n,i,r=this.hls;this.config.renderTextTracksNatively?(n=this.textTracks[t])&&"disabled"!==n.mode&&e.forEach((function(e){return It(n,e)})):(i=this.tracks[t])&&(i=i.default?"default":"subtitles"+t,r.trigger(w.CUES_PARSED,{type:"subtitles",cues:e,track:i}))},Gi.onFragDecrypted=function(e,t){t.frag.type===Et&&this.onFragLoaded(w.FRAG_LOADED,t)},Gi.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},Gi.onFragParsingUserdata=function(e,t){if(this.enabled){var n=t.frag,i=t.samples;if(n.type!==vt||"NONE"!==this.closedCaptionsForLevel(n)){this.lazyInit608();var r=this.cea608Parser1,a=this.cea608Parser2;if(r&&a)for(var o=0;o<i.length;o++){var s=i[o].bytes;s&&(s=this.extractCea608Data(s),r.addData(i[o].pts,s[0]),a.addData(i[o].pts,s[1]))}}}},Gi.onBufferFlushing=function(e,t){var n,i,r=t.startOffset,a=t.endOffset,o=t.endOffsetSubtitles,s=(t=t.type,this.media);!s||s.currentTime<a||(t&&"video"!==t||(n=this.captionsTracks,Object.keys(n).forEach((function(e){return Lt(n[e],r,a)}))),this.config.renderTextTracksNatively&&0===r&&void 0!==o&&(i=this.textTracks,Object.keys(i).forEach((function(e){return Lt(i[e],r,o)}))))},Gi.extractCea608Data=function(e){for(var t=[[],[]],n=31&e[0],i=2,r=0;r<n;r++){var a=e[i++],o=127&e[i++],s=127&e[i++];0==o&&0==s||!(4&a)||0!=(a&=3)&&1!=a||(t[a].push(o),t[a].push(s))}return t},_r=Ao,(Gi=Ro.prototype).setStreamController=function(e){this.streamController=e},Gi.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},Gi.registerListeners=function(){var e=this.hls;e.on(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.BUFFER_CODECS,this.onBufferCodecs,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this)},Gi.unregisterListener=function(){var e=this.hls;e.off(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.BUFFER_CODECS,this.onBufferCodecs,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this)},Gi.onFpsDropLevelCapping=function(e,t){t=this.hls.levels[t.droppedLevel],this.isLevelAllowed(t)&&this.restrictedLevels.push({bitrate:t.bitrate,height:t.height,width:t.width})},Gi.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null},Gi.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},Gi.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},Gi.onMediaDetaching=function(){this.stopCapping()},Gi.detectPlayerSize=function(){var e,t,n;this.media&&(this.mediaHeight<=0||this.mediaWidth<=0?this.clientRect=null:(e=this.hls.levels).length&&(t=this.hls,(n=this.getMaxLevel(e.length-1))!==this.autoLevelCapping&&P.log("Setting autoLevelCapping to "+n+": "+e[n].height+"p@"+e[n].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping))},Gi.getMaxLevel=function(e){var t=this,n=this.hls.levels;return n.length?(n=n.filter((function(n,i){return t.isLevelAllowed(n)&&i<=e})),this.clientRect=null,Ro.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)):-1},Gi.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},Gi.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},Gi.getDimensions=function(){var e,t,n;return this.clientRect||(t={width:0,height:0},(e=this.media)&&(n=e.getBoundingClientRect(),t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)),this.clientRect=t)},Gi.isLevelAllowed=function(e){return!this.restrictedLevels.some((function(t){return e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height}))},Ro.getMaxLevelByMediaSize=function(e,t,n){if(null==e||!e.length)return-1;for(var i,r=e.length-1,a=Math.max(t,n),o=0;o<e.length;o+=1){var s=e[o];if((s.width>=a||s.height>=a)&&(!(i=e[o+1])||s.width!==i.width||s.height!==i.height)){r=o;break}}return r},a(Ro,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]),Gi=Ro;var Eo=((Eo=So.prototype).setStreamController=function(e){this.streamController=e},Eo.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},Eo.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},Eo.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},Eo.onMediaAttaching=function(e,t){var n=this.hls.config;n.capLevelOnFPSDrop&&(t=t.media instanceof self.HTMLVideoElement?t.media:null,(this.media=t)&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod))},Eo.checkFPS=function(e,t,n){var i,r,a,o,s=performance.now();t&&(this.lastTime&&(o=s-this.lastTime,i=n-this.lastDroppedFrames,r=t-this.lastDecodedFrames,o=1e3*i/o,(a=this.hls).trigger(w.FPS_DROP,{currentDropped:i,currentDecoded:r,totalDroppedFrames:n}),0<o)&&i>a.config.fpsDroppedMonitoringThreshold*r&&(o=a.currentLevel,P.warn("drop FPS ratio greater than max allowed value for currentLevel: "+o),0<o)&&(-1===a.autoLevelCapping||a.autoLevelCapping>=o)&&(a.trigger(w.FPS_DROP_LEVEL_CAPPING,{level:--o,droppedLevel:a.currentLevel}),a.autoLevelCapping=o,this.streamController.nextLevelSwitch()),this.lastTime=s,this.lastDroppedFrames=n,this.lastDecodedFrames=t)},Eo.checkFPSInterval=function(){var e,t=this.media;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},So),bo="[eme]",wo=((wo=To.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},wo.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.MANIFEST_LOADED,this.onManifestLoaded,this)},wo.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.MANIFEST_LOADED,this.onManifestLoaded,this)},wo.getLicenseServerUrl=function(e){var t=(n=this.config).drmSystems,n=n.widevineLicenseUrl;if(t=t[e])return t.licenseUrl;if(e===$.WIDEVINE&&n)return n;throw new Error('no license server URL configured for key-system "'+e+'"')},wo.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},wo.attemptKeySystemAccess=function(e){function t(e,t,n){return!!e&&n.indexOf(e)===t}var n=this,i=this.hls.levels,r=i.map((function(e){return e.audioCodec})).filter(t),a=i.map((function(e){return e.videoCodec})).filter(t);return r.length+a.length===0&&a.push("avc1.42e01e"),new Promise((function(t,i){!function e(o){var s=o.shift();n.getMediaKeysPromise(s,r,a).then((function(e){return t({keySystem:s,mediaKeys:e})})).catch((function(t){o.length?e(o):i(t instanceof Co?t:new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))}(e)}))},wo.requestMediaKeySystemAccess=function(e,t){var n,i=this.config.requestMediaKeySystemAccessFunc;return"function"!=typeof i?(n="Configured requestMediaKeySystemAccess is not a function "+i,null===le&&"http:"===self.location.protocol&&(n="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(n))):i(e,t)},wo.getMediaKeysPromise=function(e,t,n){var i,r=this,a=(t=function(e,t,n,i){var r,a;switch(e){case $.FAIRPLAY:r=["cenc","sinf"];break;case $.WIDEVINE:case $.PLAYREADY:r=["cenc"];break;case $.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return[{initDataTypes:r,persistentState:(a=i).persistentState||"not-allowed",distinctiveIdentifier:a.distinctiveIdentifier||"not-allowed",sessionTypes:a.sessionTypes||[a.sessionType||"temporary"],audioCapabilities:t.map((function(e){return{contentType:'audio/mp4; codecs="'+e+'"',robustness:a.audioRobustness||"",encryptionScheme:a.audioEncryptionScheme||null}})),videoCapabilities:n.map((function(e){return{contentType:'video/mp4; codecs="'+e+'"',robustness:a.videoRobustness||"",encryptionScheme:a.videoEncryptionScheme||null}}))}]}(e,t,n,this.config.drmSystemOptions),this.keySystemAccessPromises[e]);return(n=null==a?void 0:a.keySystemAccess)?n.then((function(){return a.mediaKeys})):(this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(t)),n=this.requestMediaKeySystemAccess(e,t),i=this.keySystemAccessPromises[e]={keySystemAccess:n},n.catch((function(t){r.log('Failed to obtain access to key-system "'+e+'": '+t)})),n.then((function(t){r.log('Access for key-system "'+t.keySystem+'" obtained');var n=r.fetchServerCertificate(e);return r.log('Create media-keys for "'+e+'"'),i.mediaKeys=t.createMediaKeys().then((function(t){return r.log('Media-keys created for "'+e+'"'),n.then((function(n){return n?r.setMediaKeysServerCertificate(t,e,n):t}))})),i.mediaKeys.catch((function(t){r.error('Failed to create media-keys for "'+e+'"}: '+t)})),i.mediaKeys})))},wo.createMediaKeySessionContext=function(e){var t=e.decryptdata,n=e.keySystem,i=(e=e.mediaKeys,this.log('Creating key-system session "'+n+'" keyId: '+be(t.keyId||[])),e.createSession());return t={decryptdata:t,keySystem:n,mediaKeys:e,mediaKeysSession:i,keyStatus:"status-pending"},this.mediaKeySessions.push(t),t},wo.renewKeySession=function(e){var t,n,i=e.decryptdata;i.pssh?(t=this.createMediaKeySessionContext(e),n=this.getKeyIdString(i),this.keyIdToKeySessionPromise[n]=this.generateRequestWithPreferredKeySession(t,"cenc",i.pssh,"expired")):this.warn("Could not renew expired session. Missing pssh initData."),this.removeSession(e)},wo.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return be(e.keyId)},wo.updateKeySession=function(e,t){var n=e.mediaKeysSession;return this.log('Updating key-session "'+n.sessionId+'" for keyID '+be((null==(e=e.decryptdata)?void 0:e.keyId)||[])+"\n      } (data length: "+(t&&t.byteLength)+")"),n.update(t)},wo.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},wo.getKeyFormatPromise=function(e){var t=this;return new Promise((function(n,i){var r=se(t.config),a=e.map(re).filter((function(e){return!!e&&-1!==r.indexOf(e)}));return t.getKeySystemSelectionPromise(a).then((function(e){var t=oe(e=e.keySystem);t?n(t):i(new Error('Unable to find format for key-system "'+e+'"'))})).catch(i)}))},wo.loadKey=function(e){var t=this,n=e.keyInfo.decryptdata,i=this.getKeyIdString(n),r="(keyId: "+i+' format: "'+n.keyFormat+'" method: '+n.method+" uri: "+n.uri+")",a=(this.log("Starting session for key "+r),this.keyIdToKeySessionPromise[i]);return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(n).then((function(i){var a=i.keySystem,o=i.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+r),t.attemptSetMediaKeys(a,o).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:n});return t.generateRequestWithPreferredKeySession(e,"cenc",n.pssh,"playlist-key")}))}))).catch((function(e){return t.handleError(e)})),a},wo.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},wo.handleError=function(e){this.hls&&(this.error(e.message),e instanceof Co?this.hls.trigger(w.ERROR,e.data):this.hls.trigger(w.ERROR,{type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},wo.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e);return(t=this.keyIdToKeySessionPromise[t])||(e=(t=re(e.keyFormat))?[t]:se(this.config),this.attemptKeySystemAccess(e))},wo.getKeySystemSelectionPromise=function(e){if(0===(e=e.length?e:se(this.config)).length)throw new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},wo._onMediaEncrypted=function(e){var t,n,i=this,r=e.initDataType,a=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+r+'"'),null!==a){if("sinf"===r&&this.config.drmSystems[$.FAIRPLAY]){var o=Re(new Uint8Array(a));try{var s=J(JSON.parse(o).sinf),l=Oe(new Uint8Array(s));if(!l)return;t=l.subarray(8,24),n=$.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var u=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),i=n.getUint32(0);if(e.byteLength!==i&&44<i)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,1<t.version)return null;t.systemId=be(new Uint8Array(e,12,16));var r=n.getUint32(28);if(0===t.version){if(i-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(var a=0;a<r;a++)t.kids.push(new Uint8Array(e,32+16*a,16))}return t}(a);if(null===u)return;0===u.version&&u.systemId===ae&&u.data&&(t=u.data.subarray(8,24)),n=function(){if(u.systemId===ae)return $.WIDEVINE}()}if(n&&t){for(var c,h=be(t),d=this.keyIdToKeySessionPromise,f=this.mediaKeySessions,p=d[h],m=0;m<f.length&&(0===(c=function(){var e,n=f[m],o=n.decryptdata;return o.pssh||!o.keyId?0:(e=be(o.keyId),h===e||-1!==o.uri.replace(/-/g,"").indexOf(h)?(p=d[e],delete d[e],o.pssh=new Uint8Array(a),o.keyId=t,p=d[h]=p.then((function(){return i.generateRequestWithPreferredKeySession(n,r,a,"encrypted-event-key-match")})),1):void 0)}())||1!==c);m++);(p=p||(d[h]=this.getKeySystemSelectionPromise([n]).then((function(e){var n=e.keySystem,o=e.mediaKeys,s=(i.throwIfDestroyed(),new Ge("ISO-23001-7",h,null!=(e=oe(n))?e:""));return s.pssh=new Uint8Array(a),s.keyId=t,i.attemptSetMediaKeys(n,o).then((function(){i.throwIfDestroyed();var e=i.createMediaKeySessionContext({decryptdata:s,keySystem:n,mediaKeys:o});return i.generateRequestWithPreferredKeySession(e,r,a,"encrypted-event-no-match")}))})))).catch((function(e){return i.handleError(e)}))}}},wo._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},wo.attemptSetMediaKeys=function(e,t){var n=this,i=this.setMediaKeysQueue.slice(),r=(this.log('Setting media-keys for "'+e+'"'),Promise.all(i).then((function(){if(n.media)return n.media.setMediaKeys(t);throw new Error("Attempted to set mediaKeys without media element attached")})));return this.setMediaKeysQueue.push(r),r.then((function(){n.log('Media-keys set for "'+e+'"'),i.push(r),n.setMediaKeysQueue=n.setMediaKeysQueue.filter((function(e){return-1===i.indexOf(e)}))}))},wo.generateRequestWithPreferredKeySession=function(e,t,n,i){var r,a,o,s=this,l=null==(l=this.config.drmSystems)||null==(l=l[e.keySystem])?void 0:l.generateRequest;if(l)try{var u=l.call(this.hls,t,n,e);if(!u)throw new Error("Invalid response from configured generateRequest filter");t=u.initDataType,n=e.decryptdata.pssh=u.initData?new Uint8Array(u.initData):null}catch(e){if(this.warn(e.message),null!=(l=this.hls)&&l.config.debug)throw e}return null===n?(this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(e)):(r=this.getKeyIdString(e.decryptdata),this.log('Generating key-session request for "'+i+'": '+r+" (init data type: "+t+" length: "+(n?n.byteLength:null)+")"),a=new Yr,e.mediaKeysSession.onmessage=function(t){var n,i=e.mediaKeysSession;i?(n=t.messageType,t=t.message,s.log('"'+n+'" message event for session "'+i.sessionId+'" message size: '+t.byteLength),"license-request"===n||"license-renewal"===n?s.renewLicense(e,t).catch((function(e){s.handleError(e),a.emit("error",e)})):"license-release"===n?e.keySystem===$.FAIRPLAY&&(s.updateKeySession(e,Z("acknowledged")),s.removeSession(e)):s.warn('unhandled media key message type "'+n+'"')):a.emit("error",new Error("invalid state"))},e.mediaKeysSession.onkeystatuseschange=function(t){var n;e.mediaKeysSession?(s.onKeyStatusChange(e),n=e.keyStatus,a.emit("keyStatus",n),"expired"===n&&(s.warn(e.keySystem+" expired for key "+r),s.renewKeySession(e))):a.emit("error",new Error("invalid state"))},o=new Promise((function(e,t){a.on("error",t),a.on("keyStatus",(function(n){n.startsWith("usable")?e():"output-restricted"===n?t(new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+n+'"')):"expired"===n?t(new Error("key expired while generating request")):s.warn('unhandled key status change "'+n+'"')}))})),e.mediaKeysSession.generateRequest(t,n).then((function(){var t;s.log('Request generated for key-session "'+(null==(t=e.mediaKeysSession)?void 0:t.sessionId)+'" keyId: '+r)})).catch((function(e){throw new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)})).then((function(){return o})).catch((function(t){throw a.removeAllListeners(),s.removeSession(e),t})).then((function(){return a.removeAllListeners(),e})))},wo.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach((function(n,i){t.log('key status change "'+n+'" for keyStatuses keyId: '+be("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+be(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=n}))},wo.fetchServerCertificate=function(e){var t=this.config,n=new t.loader(t),r=this.getServerCertificateUrl(e);return r?(this.log('Fetching serverCertificate for "'+e+'"'),new Promise((function(a,o){var s={responseType:"arraybuffer",url:r},l={loadPolicy:l=t.certLoadPolicy.default,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};n.load(s,l,{onSuccess:function(e,t,n,i){a(e.data)},onError:function(t,n,a,l){o(new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:i({url:s.url,data:void 0},t)},'"'+e+'" certificate request failed ('+r+"). Status: "+t.code+" ("+t.text+")"))},onTimeout:function(t,n,i){o(new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:s.url,data:void 0}},'"'+e+'" certificate request timed out ('+r+")"))},onAbort:function(e,t,n){o(new Error("aborted"))}})}))):Promise.resolve()},wo.setMediaKeysServerCertificate=function(e,t,n){var i=this;return new Promise((function(r,a){e.setServerCertificate(n).then((function(a){i.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==n?void 0:n.byteLength)+') on "'+t+'"'),r(e)})).catch((function(e){a(new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))},wo.renewLicense=function(e,t){var n=this;return this.requestLicense(e,new Uint8Array(t)).then((function(t){return n.updateKeySession(e,new Uint8Array(t)).catch((function(e){throw new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}))},wo.setupLicenseXHR=function(e,t,n,i){var r=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(n.decryptdata)return a.call(r.hls,e,t,n,i);throw new Error("Key removed")})).catch((function(o){if(n.decryptdata)return e.open("POST",t,!0),a.call(r.hls,e,t,n,i);throw o})).then((function(n){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:n||i}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))},wo.requestLicense=function(e,t){var n=this,i=this.config.keyLoadPolicy.default;return new Promise((function(r,a){var o=n.getLicenseServerUrl(e.keySystem),s=(n.log("Sending license request to URL: "+o),new XMLHttpRequest);s.responseType="arraybuffer",s.onreadystatechange=function(){if(!n.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===s.readyState)if(200===s.status){n._requestLicenseFailureCount=0;var l=s.response;if(n.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l)),u=n.config.licenseResponseCallback)try{l=u.call(n.hls,s,o,e)}catch(l){n.error(l)}r(l)}else{var u;l=(u=i.errorRetry)?u.maxNumRetry:0,n._requestLicenseFailureCount++,n._requestLicenseFailureCount>l||400<=s.status&&s.status<500?a(new Co({type:T.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:o,data:void 0,code:s.status,text:s.statusText}},"License Request XHR failed ("+o+"). Status: "+s.status+" ("+s.statusText+")")):(u=l-n._requestLicenseFailureCount+1,n.warn("Retrying license request, "+u+" attempts left"),n.requestLicense(e,t).then(r,a))}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=s,n.setupLicenseXHR(s,o,e,t).then((function(e){var t=e.xhr;e=e.licenseChallenge,t.send(e)}))}))},wo.onMediaAttached=function(e,t){this.config.emeEnabled&&(t=t.media,(this.media=t).addEventListener("encrypted",this.onMediaEncrypted),t.addEventListener("waitingforkey",this.onWaitingForKey))},wo.onMediaDetached=function(){var e=this,t=this.media,n=this.mediaKeySessions,i=(t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ge.clearKeyUriToKeyIdMap(),n.length);To.CDMCleanupPromise=Promise.all(n.map((function(t){return e.removeSession(t)})).concat(null==t?void 0:t.setMediaKeys(null).catch((function(n){e.log("Could not clear media keys: "+n+". media.src: "+(null==t?void 0:t.src))})))).then((function(){i&&(e.log("finished closing key sessions and clearing media keys"),n.length=0)})).catch((function(n){e.log("Could not close sessions and clear media keys: "+n+". media.src: "+(null==t?void 0:t.src))}))},wo.onManifestLoading=function(){this.keyFormatPromise=null},wo.onManifestLoaded=function(e,t){(t=t.sessionKeys)&&this.config.emeEnabled&&!this.keyFormatPromise&&(t=t.reduce((function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e}),[]),this.log("Selecting key-system from session-keys "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t))},wo.removeSession=function(e){var t=this,n=e.mediaKeysSession,i=e.licenseXhr;if(n)return this.log("Remove licenses and keys and close session "+n.sessionId),n.onmessage=null,n.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0,-1<(i=this.mediaKeySessions.indexOf(e))&&this.mediaKeySessions.splice(i,1),n.remove().catch((function(e){t.log("Could not remove session: "+e)})).then((function(){return n.close()})).catch((function(e){t.log("Could not close session: "+e)}))},To);function To(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=To.CDMCleanupPromise?[To.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=P.debug.bind(P,bo),this.log=P.log.bind(P,bo),this.warn=P.warn.bind(P,bo),this.error=P.error.bind(P,bo),this.hls=e,this.config=e.config,this.registerListeners()}function So(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}function Ro(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}wo.CDMCleanupPromise=void 0,s(Oo,Io=h(Error));var Io,Co=Oo,Lo="a",Po="av",Do=((Do=Mo.prototype).registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHED,this.onMediaDetached,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this)},Do.unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHED,this.onMediaDetached,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this)},Do.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},Do.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},Do.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},Do.onBufferCreated=function(e,t){var n;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(n=t.tracks.video)?void 0:n.buffer},Do.createData=function(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},Do.apply=function(e,t){o(t=void 0===t?{}:t,this.createData());var n="i"===t.ot||"v"===t.ot||t.ot===Po;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders?(n=Mo.toHeaders(t),Object.keys(n).length&&(e.headers||(e.headers={}),o(e.headers,n))):(n=Mo.toQuery(t))&&(e.url=Mo.appendQueryToUri(e.url,n))},Do.getObjectType=function(e){var t=e.type;return"subtitle"===t?"tt":"initSegment"===e.sn?"i":"audio"===t?Lo:"main"===t?this.hls.audioTracks.length?"v":Po:void 0},Do.getTopBandwidth=function(e){for(var t=0,n=this.hls,i=f(e===Lo?n.audioTracks:(e=-1<(e=n.maxAutoLevel)?e+1:n.levels.length,n.levels.slice(0,e)));!(r=i()).done;){var r=r.value;r.bitrate>t&&(t=r.bitrate)}return 0<t?t:NaN},Do.getBufferLength=function(e){var t=this.hls.media;return(e=e===Lo?this.audioBuffer:this.videoBuffer)&&t?1e3*Sn.bufferInfo(e,t.currentTime,this.config.maxBufferHole).len:NaN},Do.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,n,i){t(e),this.loader.load(e,n,i)},a(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new n(e)}},Do.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return(e=i.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,n,i){t(e),this.loader.load(e,n,i)},a(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i;function i(e){this.loader=void 0,this.loader=new n(e)}},Mo.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},Mo.serialize=function(e){for(var t=[],n=function(e){return Math.round(e)},i=function(e){return 100*n(e/100)},r={br:n,d:n,bl:i,dl:i,mtp:i,nor:function(e){return encodeURIComponent(e)},rtp:i,tb:n},a=f(Object.keys(e||{}).sort());!(l=a()).done;){var o,s,l=l.value,u=e[l];o=u,Number.isNaN(o)||null==o||""===o||!1===o||"v"===l&&1===u||"pr"==l&&1===u||(o=typeof(u=(o=r[l])?o(u):u),s="ot"===l||"sf"===l||"st"===l?l+"="+u:"boolean"==o?l:"number"==o?l+"="+u:l+"="+JSON.stringify(u),t.push(s))}return t.join(",")},Mo.toHeaders=function(e){for(var t={},n=["Object","Request","Session","Status"],i=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];i[null!=r[s]?r[s]:1][s]=e[s]}for(var l=0;l<i.length;l++){var u=Mo.serialize(i[l]);u&&(t["CMCD-"+n[l]]=u)}return t},Mo.toQuery=function(e){return"CMCD="+encodeURIComponent(Mo.serialize(e))},Mo.appendQueryToUri=function(e,t){var n;return t?(n=e.includes("?")?"&":"?",e+n+t):e},Mo),ko=((ko=xo.prototype).registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.ERROR,this.onError,this)},ko.unregisterListeners=function(){var e=this.hls;e&&(e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.ERROR,this.onError,this))},ko.startLoad=function(){var e;this.started=!0,this.clearTimeout(),this.enabled&&this.uri&&(this.updated?(e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0),this.scheduleRefresh(this.uri,e)):this.loadSteeringManifest(this.uri))},ko.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},ko.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},ko.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},ko.removeLevel=function(e){var t=this.levels;t&&(this.levels=t.filter((function(t){return t!==e})))},ko.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},ko.onManifestLoaded=function(e,t){null!==(t=t.contentSteering)&&(this.pathwayId=t.pathwayId,this.uri=t.uri,this.started)&&this.startLoad()},ko.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},ko.onError=function(e,t){var n,i;2===(null==(t=t.errorAction)?void 0:t.action)&&1===t.flags&&(n=this.pathwayPriority,i=this.pathwayId,this.penalizedPathways[i]||(this.penalizedPathways[i]=performance.now()),n=!n&&this.levels?this.levels.reduce((function(e,t){return-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e}),[]):n)&&1<n.length&&(this.updatePathwayPriority(n),t.resolved=this.pathwayId!==i)},ko.filterParsedLevels=function(e){this.levels=e;var t,n=this.getLevelsForPathway(this.pathwayId);return 0===n.length&&(t=e[0].pathwayId,this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+t+'"'),n=this.getLevelsForPathway(t),this.pathwayId=t),n.length!==e.length?(this.log("Found "+n.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),n):e},ko.getLevelsForPathway=function(e){return null===this.levels?[]:this.levels.filter((function(t){return e===t.pathwayId}))},ko.updatePathwayPriority=function(e){this.pathwayPriority=e;var t,n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach((function(e){3e5<i-n[e]&&delete n[e]}));for(var r=0;r<e.length;r++){var a=e[r];if(!n[a]){if(a===this.pathwayId)return;var o=this.hls.nextLoadLevel,s=this.hls.levels[o];if(0<(t=this.getLevelsForPathway(a)).length){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,this.hls.trigger(w.LEVELS_UPDATED,{levels:t}),a=this.hls.levels[o],s&&a&&this.levels&&(a.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&a.bitrate!==s.bitrate&&this.log("Unstable Pathways change from bitrate "+s.bitrate+" to "+a.bitrate),this.hls.nextLoadLevel=o);break}}}},ko.clonePathways=function(e){var t,n,i=this,r=this.levels;r&&(t={},n={},e.forEach((function(e){var a=e.ID,s=e["BASE-ID"],l=e["URI-REPLACEMENT"];r.some((function(e){return e.pathwayId===a}))||(e=i.getLevelsForPathway(s).map((function(e){var i=o({},e),r=((i.details=void 0,i.url=Fo(e.uri,e.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),e=new x(e.attrs))["PATHWAY-ID"]=a,e.AUDIO&&e.AUDIO+"_clone_"+a),s=e.SUBTITLES&&e.SUBTITLES+"_clone_"+a;return Yt((r&&(t[e.AUDIO]=r,e.AUDIO=r),s&&(n[e.SUBTITLES]=s,e.SUBTITLES=s),i.attrs=e,e=new Ut(i)),"audio",r),Yt(e,"text",s),e})),r.push.apply(r,e),No(i.audioTracks,t,l,a),No(i.subtitleTracks,n,l,a))})))},ko.loadSteeringManifest=function(e){var t,n=this,i=this.hls.config,r=i.loader;this.loader&&this.loader.destroy(),this.loader=new r(i);try{t=new self.URL(e)}catch(t){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}"data:"!==t.protocol&&(r=0|(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate),t.searchParams.set("_HLS_pathway",this.pathwayId),t.searchParams.set("_HLS_throughput",""+r)),e={responseType:"json",url:t.href},i=(r=i.steeringManifestLoadPolicy.default).errorRetry||r.timeoutRetry||{},r={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:i.maxNumRetry||0,retryDelay:i.retryDelayMs||0,maxRetryDelay:i.maxRetryDelayMs||0},i={onSuccess:function(e,i,r,a){n.log('Loaded steering manifest: "'+t+'"');var o=e.data;if(1===o.VERSION){n.updated=performance.now(),n.timeToLoad=o.TTL;var s=o["RELOAD-URI"],l=o["PATHWAY-CLONES"],u=o["PATHWAY-PRIORITY"];if(s)try{n.uri=new self.URL(s,t).href}catch(e){return n.enabled=!1,void n.log("Failed to parse Steering Manifest RELOAD-URI: "+s)}n.scheduleRefresh(n.uri||r.url),l&&n.clonePathways(l),s={steeringManifest:o,url:t.toString()},n.hls.trigger(w.STEERING_MANIFEST_LOADED,s),u&&n.updatePathwayPriority(u)}else n.log("Steering VERSION "+o.VERSION+" not supported!")},onError:function(e,t,i,r){var a;n.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),n.stopLoad(),410===e.code?(n.enabled=!1,n.log("Steering manifest "+t.url+" no longer available")):(a=1e3*n.timeToLoad,429!==e.code?n.scheduleRefresh(n.uri||t.url,a):("function"==typeof(null==(e=n.loader)?void 0:e.getResponseHeader)&&(e=e.getResponseHeader("Retry-After"))&&(a=1e3*parseFloat(e)),n.log("Steering manifest "+t.url+" rate limited")))},onTimeout:function(e,t,i){n.log("Timeout loading steering manifest ("+t.url+")"),n.scheduleRefresh(n.uri||t.url)}},this.log("Requesting steering manifest: "+t),this.loader.load(e,r,i)},ko.scheduleRefresh=function(e,t){var n=this;void 0===t&&(t=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout((function(){n.loadSteeringManifest(e)}),t)},xo);function xo(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=P.log.bind(P,"[content-steering]:"),this.registerListeners()}function Mo(e){var t=this,n=(this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1},this.applyPlaylistData=function(e){try{t.apply(e,{ot:"m",su:!t.initialized})}catch(e){P.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var n=e.frag,i=t.hls.levels[n.level],r=t.getObjectType(n),a={d:1e3*n.duration,ot:r};"v"!==r&&r!==Lo&&r!=Po||(a.br=i.bitrate/1e3,a.tb=t.getTopBandwidth(r)/1e3,a.bl=t.getBufferLength(r)),t.apply(e,a)}catch(e){P.warn("Could not generate segment CMCD data.",e)}},this.hls=e,(e=this.config=e.config).cmcd);null!=n&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||Mo.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}function Oo(e,t){var n;return(n=Io.call(this,t)||this).data=void 0,e.error||(e.error=new Error(t)),(n.data=e).err=e.error,n}function No(e,t,n,i){e&&Object.keys(t).forEach((function(r){var a=e.filter((function(e){return e.groupId===r})).map((function(e){var a=o({},e);return a.details=void 0,a.attrs=new x(a.attrs),a.url=a.attrs.URI=Fo(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=t[r],a.attrs["PATHWAY-ID"]=i,a}));e.push.apply(e,a)}))}function Fo(e,t,n,i){var r,a=i.HOST,o=i.PARAMS,s=(i=i[n],t&&(r=null==i?void 0:i[t])&&(e=r),new self.URL(e));return a&&!r&&(s.host=a),o&&Object.keys(o).sort().forEach((function(e){e&&s.searchParams.set(e,o[e])})),s.href}var Bo=/^age:\s*[\d.]+\s*$/im,Uo=(($o=Ho.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null},$o.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState)&&(this.stats.aborted=!0,e.abort())},$o.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},$o.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()},$o.loadInternal=function(){var e,t,n,i=this,r=this.config,a=this.context;r&&a&&(e=this.loader=new self.XMLHttpRequest,(t=this.stats).loading.first=0,t.loaded=0,t.aborted=!1,(n=this.xhrSetup)?Promise.resolve().then((function(){if(!i.stats.aborted)return n(e,a.url)})).catch((function(t){return e.open("GET",a.url,!0),n(e,a.url)})).then((function(){i.stats.aborted||i.openAndSendXhr(e,a,r)})).catch((function(n){i.callbacks.onError({code:e.status,text:n.message},a,e,t)})):this.openAndSendXhr(e,a,r))},$o.openAndSendXhr=function(e,t,n){e.readyState||e.open("GET",t.url,!0),t.url.includes("playerId")&&(t.responseType="text");var i=t.headers,r=(a=n.loadPolicy).maxTimeToFirstByteMs,a=a.maxLoadTimeMs;if(i)for(var o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=r&&b(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()},$o.readystatechange=function(){var e,t,n,i,r=this.context,a=this.loader,o=this.stats;r&&a&&(t=a.readyState,e=this.config,!o.aborted)&&2<=t&&(0===o.loading.first&&(o.loading.first=Math.max(self.performance.now(),o.loading.start),e.timeout!==e.loadPolicy.maxLoadTimeMs)&&(self.clearTimeout(this.requestTimeout),e.timeout=e.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.loadPolicy.maxLoadTimeMs-(o.loading.first-o.loading.start))),4===t)&&(self.clearTimeout(this.requestTimeout),a.onreadystatechange=null,a.onprogress=null,t=a.status,i="text"!==a.responseType,200<=t&&t<300&&(i&&a.response||null!==a.responseText)?(o.loading.end=Math.max(self.performance.now(),o.loading.first),i=i?a.response:a.responseText,n="arraybuffer"===a.responseType?i.byteLength:i.length,o.loaded=o.total=n,o.bwEstimate=8e3*o.total/(o.loading.end-o.loading.first),this.callbacks&&((n=this.callbacks.onProgress)&&n(o,r,i,a),this.callbacks)&&(n={url:a.responseURL,data:i,code:t},this.callbacks.onSuccess(n,o,r,a))):tn(i=e.loadPolicy.errorRetry,o.retry,!1,t)?this.retry(i):(P.error(t+" while loading "+r.url),this.callbacks.onError({code:t,text:a.statusText},r,a,o)))},$o.loadtimeout=function(){var e=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;tn(e,this.stats.retry,!0)?this.retry(e):(P.warn("timeout while loading "+(null==(e=this.context)?void 0:e.url)),(e=this.callbacks)&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader)))},$o.retry=function(e){var t=this.context,n=this.stats;this.retryDelay=$t(e,n.retry),n.retry++,P.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+n.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},$o.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},$o.getCacheAge=function(){var e,t=null;return this.loader&&Bo.test(this.loader.getAllResponseHeaders())?(e=this.loader.getResponseHeader("age"))?parseFloat(e):null:t},$o.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},Ho),jo=/(\d+)-(\d+)\/(\d+)/,Go=(($o=Vo.prototype).destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},$o.abortInternal=function(){var e=this.response;!this.controller||null!=e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},$o.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},$o.load=function(e,t,n){var i=this,r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();var a=function(e,t){return t={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(o({},e.headers))},e.rangeEnd&&t.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),t}(e,this.controller.signal),s=n.onProgress,l="arraybuffer"===e.responseType,u=l?"byteLength":"length",c=t.loadPolicy,h=c.maxTimeToFirstByteMs,d=c.maxLoadTimeMs;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=h&&b(h)?h:d,this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(r,e,i.response)}),t.timeout),self.fetch(this.request).then((function(a){i.response=i.loader=a;var o,u=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(i.requestTimeout),t.timeout=d,i.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(r,e,i.response)}),d-(u-r.loading.start)),a.ok)return r.loading.first=u,r.total=function(e){var t=e.get("Content-Range");if(t){var n=function(){var e=jo.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}();if(b(n))return n}if(n=e.get("Content-Length"))return parseInt(n)}(a.headers)||r.total,s&&b(t.highWaterMark)?i.loadProgressively(a,r,e,t.highWaterMark,s):l?a.arrayBuffer():"json"===e.responseType?a.json():a.text();throw u=a.status,o=a.statusText,new Ko(o||"fetch, bad network response",u,a)})).then((function(a){var o=i.response;if(!o)throw new Error("loader destroyed");self.clearTimeout(i.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);var l=((l=a[u])&&(r.loaded=r.total=l),{url:o.url,data:a,code:o.status});s&&!b(t.highWaterMark)&&s(r,e,a,o),n.onSuccess(l,r,e,o)})).catch((function(t){var a,o;self.clearTimeout(i.requestTimeout),r.aborted||(a=t&&t.code||0,o=t?t.message:null,n.onError({code:a,text:o},e,t?t.details:null,r))}))},$o.getCacheAge=function(){var e,t=null;return this.response?(e=this.response.headers.get("age"))?parseFloat(e):null:t},$o.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},$o.loadProgressively=function(e,t,n,i,r){void 0===i&&(i=0);var a=new ti,o=e.body.getReader();return function s(){return o.read().then((function(o){var l;return o.done?(a.dataLength&&r(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0))):(l=(o=o.value).length,t.loaded+=l,l<i||a.dataLength?(a.push(o),a.dataLength>=i&&r(t,n,a.flush(),e)):r(t,n,o,e),s())})).catch((function(){return Promise.reject()}))}()},Vo);function Vo(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Yo,this.controller=new self.AbortController,this.stats=new B}function Ho(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new B,this.retryDelay=0}function Yo(e,t){return new self.Request(e.url,t)}s(Xo,Wo=h(Error));var zo,Wo,Ko=Xo,qo=/\s/,Qo=i(i({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Uo,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:un,bufferController:Ai,capLevelController:Gi,errorController:V,fpsController:Eo,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:le,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(e,t,n,i){for(var r,a,o,s,l=[],u=self.VTTCue||self.TextTrackCue,c=0;c<i.rows.length;c++)if(a=!0,o=0,s="",!(r=i.rows[c]).isEmpty()){for(var h,d=0;d<r.chars.length;d++)qo.test(r.chars[d].uchar)&&a?o++:(s+=r.chars[d].uchar,a=!1);(r.cueStartTime=t)===n&&(n+=1e-4),16<=o?o--:o++;var f=no(s.trim()),p=lo(t,n,f);null!=e&&null!=(h=e.cues)&&h.getCueById(p)||((h=new u(t,n,f)).id=p,h.line=c+1,h.align="left",h.position=10+Math.min(80,10*Math.floor(8*o/32)),l.push(h))}return e&&l.length&&(l.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:8<e.line&&8<t.line?t.line-e.line:e.line-t.line})),l.forEach((function(t){return It(e,t)}))),l}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Tr,subtitleTrackController:rr,timelineController:_r,audioStreamController:Ni,audioTrackController:bi,emeController:wo,cmcdController:Do,contentSteeringController:ko});function Xo(e,t,n){return(e=Wo.call(this,e)||this).code=void 0,e.details=void 0,e.code=t,e.details=n,e}function Jo(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Jo):Object.keys(e).reduce((function(t,n){return t[n]=Jo(e[n]),t}),{}):e}s(Ss,Zo=on),($o=Ss.prototype)._registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.ERROR,this.onError,this)},$o._unregisterListeners=function(){var e=this.hls;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.ERROR,this.onError,this)},$o.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),Zo.prototype.destroy.call(this)},$o.stopLoad=function(){this._levels.forEach((function(e){e.loadError=0,e.fragmentError=0})),Zo.prototype.stopLoad.call(this)},$o.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},$o.onManifestLoading=function(e,t){this.resetLevels()},$o.onManifestLoaded=function(e,t){var n,i=[],r={};t.levels.forEach((function(e){var t=e.attrs,a=(-1!==(null==(a=e.audioCodec)?void 0:a.indexOf("mp4a.40.34"))&&(zo=zo||/chrome|firefox/i.test(navigator.userAgent))&&(e.audioCodec=void 0),e.audioCodec&&(e.audioCodec=tt(e.audioCodec)),t.AUDIO),o=t.CODECS,s=t["FRAME-RATE"],l=t["PATHWAY-ID"],u=t.RESOLUTION;t=t.SUBTITLES,l=(l||".")+"-"+e.bitrate+"-"+u+"-"+s+"-"+o,(n=r[l])?n.addFallback(e):(n=new Ut(e),r[l]=n,i.push(n)),Yt(n,"audio",a),Yt(n,"text",t)})),this.filterAndSortMediaOptions(i,t)},$o.filterAndSortMediaOptions=function(e,t){var n=this,i=[],r=[],a=!1,o=!1,s=!1,l=e.filter((function(e){var t=e.audioCodec,n=e.videoCodec,i=e.width,r=e.height;return e=e.unknownCodecs,a=a||!(!i||!r),o=o||!!n,s=s||!!t,!(null!=e&&e.length)&&(!t||Je(t,"audio"))&&(!n||Je(n,"video"))}));if(0!==(l=(a||o)&&s?l.filter((function(e){var t=e.videoCodec,n=e.width;return e=e.height,!!t||!(!n||!e)})):l).length){t.audioTracks&&Rs(i=t.audioTracks.filter((function(e){return!e.audioCodec||Je(e.audioCodec,"audio")}))),t.subtitles&&Rs(r=t.subtitles);var u=l.slice(0),c=(l.sort((function(e,t){return e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs["FRAME-RATE"]!==t.attrs["FRAME-RATE"]?e.attrs.decimalFloatingPoint("FRAME-RATE")-t.attrs.decimalFloatingPoint("FRAME-RATE"):e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):a&&e.height!==t.height?e.height-t.height:0})),u[0]);if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==u.length)for(var h=0;h<u.length;h++)if(u[h].pathwayId===l[0].pathwayId){c=u[h];break}this._levels=l;for(var d=0;d<l.length;d++)if(l[d]===c){this._firstLevel=d;var f,p=c.bitrate,m=this.hls.bandwidthEstimate;this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+p),void 0===(null==(f=this.hls.userConfig)?void 0:f.abrEwmaDefaultEstimate)&&m<(f=Math.min(p,this.hls.config.abrEwmaDefaultEstimateMax))&&m===Qo.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=f);break}var g=s&&!o;r={levels:l,audioTracks:i,subtitleTracks:r,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:!g&&i.some((function(e){return!!e.url}))},this.hls.trigger(w.MANIFEST_PARSED,r),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){var i;n.hls&&(e.length&&n.warn('One or more CODECS in variant not supported: "'+e[0].attrs.CODECS+'"'),i=new Error("no level with compatible codecs found in manifest"),n.hls.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:i,reason:i.message}))}))},$o.onError=function(e,t){!t.fatal&&t.context&&t.context.type===gt&&t.context.level===this.level&&this.checkRetry(t)},$o.onFragLoaded=function(e,t){void 0!==(t=t.frag)&&t.type===vt&&void 0!==(t=this._levels[t.level])&&(t.loadError=0)},$o.onLevelLoaded=function(e,t){var n=t.level,i=t.details,r=this._levels[n];r?n===this.currentLevelIndex?(0===r.fragmentError&&(r.loadError=0),this.playlistLoaded(n,t,r.details)):null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0):(this.warn("Invalid level index "+n),null!=(r=t.deliveryDirectives)&&r.skip&&(i.deltaUpdateFailed=!0))},$o.onAudioTrackSwitched=function(e,t){var n=this.currentLevel;if(n){var i=this.hls.audioTracks[t.id].groupId;if(n.audioGroupIds&&n.audioGroupId!==i){for(var r=-1,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}-1!==r&&r!==n.urlId&&(n.urlId=r,this.canLoad)&&this.startLoad()}}},$o.loadPlaylist=function(e){Zo.prototype.loadPlaylist.call(this);var t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){var i=n.urlId,r=n.uri;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}var a=n.attrs["PATHWAY-ID"];this.log("Loading level index "+t+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(a?" Pathway "+a:"")+" URI "+(i+1)+"/"+n.url.length+" "+r),this.clearTimer(),this.hls.trigger(w.LEVEL_LOADING,{url:r,level:t,id:i,deliveryDirectives:e||null})}},$o.removeLevel=function(e,t){function n(e,n){return n!==t}var i=this,r=this._levels.filter((function(r,a){return!(a===e&&(1<r.url.length&&void 0!==t?(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0):(i.steering&&i.steering.removeLevel(r),1)))}));this.hls.trigger(w.LEVELS_UPDATED,{levels:r})},$o.onLevelsUpdated=function(e,t){(t=t.levels).forEach((function(e,t){null!=(e=e.details)&&e.fragments&&e.fragments.forEach((function(e){e.level=t}))})),this._levels=t},a(Ss,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){if(0!==(i=this._levels).length){if(e<0||e>=i.length){var t=new Error("invalid level idx"),n=e<0;if(this.hls.trigger(w.ERROR,{type:T.OTHER_ERROR,details:S.LEVEL_SWITCH_ERROR,level:e,fatal:n,error:t,reason:t.message}),n)return;e=Math.min(e,i.length-1)}t=this.currentLevelIndex;var i,r=(n=this.currentLevel)?n.attrs["PATHWAY-ID"]:void 0,a=(i=i[e]).attrs["PATHWAY-ID"];this.currentLevelIndex=e,this.currentLevel=i,t===e&&i.details&&n&&r===a||(this.log("Switching to level "+e+(a?" with Pathway "+a:"")+" from level "+t+(r?" with Pathway "+r:"")),delete(a=o({},i,{level:e,maxBitrate:i.maxBitrate,attrs:i.attrs,uri:i.uri,urlId:i.urlId}))._attrs,delete a._urlId,delete a._avgBitrate,this.hls.trigger(w.LEVEL_SWITCHING,a),(t=i.details)&&!t.live)||(r=this.switchParams(i.uri,null==n?void 0:n.details),this.loadPlaylist(r))}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){var e;return void 0===this._startLevel?void 0!==(e=this.hls.config.startLevel)?e:this._firstLevel:this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]);var Zo,$o,es,ts,ns,is,rs,as,os,ss,ls,us,cs,hs,ds,fs,ps,ms,gs,_s,ys,vs,As,Es,bs,ws,Ts=Ss;function Ss(e,t){return(e=Zo.call(this,e,"[level-controller]")||this)._levels=[],e._firstLevel=-1,e._startLevel=void 0,e.currentLevel=null,e.currentLevelIndex=-1,e.manualLevelIndex=-1,e.steering=void 0,e.onParsedComplete=void 0,e.steering=t,e._registerListeners(),e}function Rs(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}
/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */function Is(e){return parseInt(e)===e}function Cs(e){if(Is(e.length)){for(var t=0;t<e.length;t++)if(!Is(e[t])||e[t]<0||255<e[t])return;return 1}}function Ls(e,t){if(e.buffer&&"Uint8Array"===e.name)return t?e.slice?e.slice():Array.prototype.slice.call(e):e;if(Array.isArray(e)){if(Cs(e))return new Uint8Array(e);throw new Error("Array contains invalid value: "+e)}if(Is(e.length)&&Cs(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function Ps(e){return new Uint8Array(e)}function Ds(e,t,n,i,r){null==i&&null==r||(e=e.slice?e.slice(i,r):Array.prototype.slice.call(e,i,r)),t.set(e,n)}function ks(e){for(var t=[],n=0;n<e.length;n+=4)t.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return t}Ai=un={exports:{}},Gi={toBytes:function(e){var t=[],n=0;for(e=encodeURI(e);n<e.length;){var i=e.charCodeAt(n++);37===i?(t.push(parseInt(e.substr(n,2),16)),n+=2):t.push(i)}return Ls(t)},fromBytes:function(e){for(var t=[],n=0;n<e.length;){var i=e[n];i<128?(t.push(String.fromCharCode(i)),n++):191<i&&i<224?(t.push(String.fromCharCode((31&i)<<6|63&e[n+1])),n+=2):(t.push(String.fromCharCode((15&i)<<12|(63&e[n+1])<<6|63&e[n+2])),n+=3)}return t.join("")}},es="0123456789abcdef",V={toBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},fromBytes:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(es[(240&i)>>4]+es[15&i])}return t.join("")}},ts={16:10,24:12,32:14},ns=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],is=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rs=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],as=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],os=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],ss=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],ls=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],us=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],cs=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],hs=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],ds=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],fs=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],ps=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],ms=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],gs=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],(_s=function(e){if(!(this instanceof _s))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:Ls(e,!0)}),this._prepare()}).prototype._prepare=function(){var e=ts[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,i=4*(e+1),r=this.key.length/4,a=ks(this.key);for(t=0;t<r;t++)this._Ke[n=t>>2][t%4]=a[t],this._Kd[e-n][t%4]=a[t];for(var o,s=0,l=r;l<i;){if(o=a[r-1],a[0]^=is[o>>16&255]<<24^is[o>>8&255]<<16^is[255&o]<<8^is[o>>24&255]^ns[s]<<24,s+=1,8!=r)for(t=1;t<r;t++)a[t]^=a[t-1];else{for(t=1;t<r/2;t++)a[t]^=a[t-1];for(o=a[r/2-1],a[r/2]^=is[255&o]^is[o>>8&255]<<8^is[o>>16&255]<<16^is[o>>24&255]<<24,t=r/2+1;t<r;t++)a[t]^=a[t-1]}for(t=0;t<r&&l<i;)this._Ke[u=l>>2][c=l%4]=a[t],this._Kd[e-u][c]=a[t++],l++}for(var u=1;u<e;u++)for(var c=0;c<4;c++)o=this._Kd[u][c],this._Kd[u][c]=fs[o>>24&255]^ps[o>>16&255]^ms[o>>8&255]^gs[255&o]},_s.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,n=[0,0,0,0],i=ks(e),r=0;r<4;r++)i[r]^=this._Ke[0][r];for(var a=1;a<t;a++){for(r=0;r<4;r++)n[r]=as[i[r]>>24&255]^os[i[(r+1)%4]>>16&255]^ss[i[(r+2)%4]>>8&255]^ls[255&i[(r+3)%4]]^this._Ke[a][r];i=n.slice()}var o,s=Ps(16);for(r=0;r<4;r++)o=this._Ke[t][r],s[4*r]=255&(is[i[r]>>24&255]^o>>24),s[4*r+1]=255&(is[i[(r+1)%4]>>16&255]^o>>16),s[4*r+2]=255&(is[i[(r+2)%4]>>8&255]^o>>8),s[4*r+3]=255&(is[255&i[(r+3)%4]]^o);return s},_s.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,n=[0,0,0,0],i=ks(e),r=0;r<4;r++)i[r]^=this._Kd[0][r];for(var a=1;a<t;a++){for(r=0;r<4;r++)n[r]=us[i[r]>>24&255]^cs[i[(r+3)%4]>>16&255]^hs[i[(r+2)%4]>>8&255]^ds[255&i[(r+1)%4]]^this._Kd[a][r];i=n.slice()}var o,s=Ps(16);for(r=0;r<4;r++)o=this._Kd[t][r],s[4*r]=255&(rs[i[r]>>24&255]^o>>24),s[4*r+1]=255&(rs[i[(r+3)%4]>>16&255]^o>>16),s[4*r+2]=255&(rs[i[(r+2)%4]>>8&255]^o>>8),s[4*r+3]=255&(rs[255&i[(r+1)%4]]^o);return s},(ys=function(e){if(!(this instanceof ys))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new _s(e)}).prototype.encrypt=function(e){if((e=Ls(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=Ps(e.length),n=Ps(16),i=0;i<e.length;i+=16)Ds(e,n,0,i,i+16),Ds(n=this._aes.encrypt(n),t,i);return t},ys.prototype.decrypt=function(e){if((e=Ls(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=Ps(e.length),n=Ps(16),i=0;i<e.length;i+=16)Ds(e,n,0,i,i+16),Ds(n=this._aes.decrypt(n),t,i);return t},(vs=function(e,t){if(!(this instanceof vs))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=Ps(16);this._lastCipherblock=Ls(t,!0),this._aes=new _s(e)}).prototype.encrypt=function(e){if((e=Ls(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=Ps(e.length),n=Ps(16),i=0;i<e.length;i+=16){Ds(e,n,0,i,i+16);for(var r=0;r<16;r++)n[r]^=this._lastCipherblock[r];this._lastCipherblock=this._aes.encrypt(n),Ds(this._lastCipherblock,t,i)}return t},vs.prototype.decrypt=function(e){if((e=Ls(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=Ps(e.length),n=Ps(16),i=0;i<e.length;i+=16){Ds(e,n,0,i,i+16),n=this._aes.decrypt(n);for(var r=0;r<16;r++)t[i+r]=n[r]^this._lastCipherblock[r];Ds(e,this._lastCipherblock,0,i,i+16)}return t},(As=function(e,t,n){if(!(this instanceof As))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=Ps(16);this.segmentSize=n=n||1,this._shiftRegister=Ls(t,!0),this._aes=new _s(e)}).prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t=Ls(e,!0),n=0;n<t.length;n+=this.segmentSize){for(var i=this._aes.encrypt(this._shiftRegister),r=0;r<this.segmentSize;r++)t[n+r]^=i[r];Ds(this._shiftRegister,this._shiftRegister,0,this.segmentSize),Ds(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t},As.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t=Ls(e,!0),n=0;n<t.length;n+=this.segmentSize){for(var i=this._aes.encrypt(this._shiftRegister),r=0;r<this.segmentSize;r++)t[n+r]^=i[r];Ds(this._shiftRegister,this._shiftRegister,0,this.segmentSize),Ds(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t},(Es=function(e,t){if(!(this instanceof Es))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=Ps(16);this._lastPrecipher=Ls(t,!0),this._lastPrecipherIndex=16,this._aes=new _s(e)}).prototype.encrypt=function(e){for(var t=Ls(e,!0),n=0;n<t.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},Es.prototype.decrypt=Es.prototype.encrypt,(bs=function(e){if(!(this instanceof bs))throw Error("Counter must be instanitated with `new`");"number"==typeof(e=0!==e?e||1:e)?(this._counter=Ps(16),this.setValue(e)):this.setBytes(e)}).prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;0<=t;--t)this._counter[t]=e%256,e=parseInt(e/256)},bs.prototype.setBytes=function(e){if(16!=(e=Ls(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},bs.prototype.increment=function(){for(var e=15;0<=e;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}},(ws=function(e,t){if(!(this instanceof ws))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof bs||(t=new bs(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new _s(e)}).prototype.encrypt=function(e){for(var t=Ls(e,!0),n=0;n<t.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[n]^=this._remainingCounter[this._remainingCounterIndex++];return t},ws.prototype.decrypt=ws.prototype.encrypt,Ai.exports={AES:_s,Counter:bs,ModeOfOperation:{ecb:ys,cbc:vs,cfb:As,ofb:Es,ctr:ws},utils:{hex:V,utf8:Gi},padding:{pkcs7:{pad:function(e){var t=16-(e=Ls(e,!0)).length%16,n=Ps(e.length+t);Ds(e,n);for(var i=e.length;i<n.length;i++)n[i]=t;return n},strip:function(e){if((e=Ls(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(16<t)throw new Error("PKCS#7 padding byte out of range");for(var n=e.length-t,i=0;i<t;i++)if(e[n+i]!==t)throw new Error("PKCS#7 invalid padding byte");var r=Ps(n);return Ds(e,r,0,0,n),r}}},_arrayTest:{coerceArray:Ls,createArray:Ps,copyArray:Ds}};var xs=m(un.exports),Ms=((Eo=Os.prototype).abort=function(e){for(var t in this.keyUriToKeyInfo){var n;if(t=this.keyUriToKeyInfo[t].loader){if(e&&e!==(null==(n=t.context)?void 0:n.frag.type))return;t.abort()}}},Eo.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},Eo.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo)(e=this.keyUriToKeyInfo[e].loader)&&e.destroy();this.keyUriToKeyInfo={}},Eo.createKeyLoadError=function(e,t,n,i,r){return void 0===t&&(t=S.KEY_LOAD_ERROR),new Bn({type:T.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:n,networkDetails:i})},Eo.loadClear=function(e,t){var n=this;if(this.emeController&&this.config.emeEnabled)for(var i=e.sn,r=e.cc,a=0;a<t.length&&!function(){var e=t[a];if(r<=e.cc&&("initSegment"===i||"initSegment"===e.sn||i<e.sn))return n.emeController.selectKeySystemFormat(e).then((function(t){e.setKeyFormat(t)})),1}();a++);},Eo.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((function(n){return t.loadInternal(e,n)})):this.loadInternal(e)},Eo.loadInternal=function(e,t){t&&e.setKeyFormat(t);var n=e.decryptdata;if(!n)return t=new Error(t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading"),Promise.reject(this.createKeyLoadError(e,S.KEY_LOAD_ERROR,t));if(!(t=n.uri))return Promise.reject(this.createKeyLoadError(e,S.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+t+'"')));var i,r=this.keyUriToKeyInfo[t];if(null!=r&&r.decryptdata.key)return n.key=r.decryptdata.key,Promise.resolve({frag:e,keyInfo:r});if(null!=r&&r.keyLoadPromise)switch(null==(i=r.mediaKeySessionContext)?void 0:i.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return r.keyLoadPromise.then((function(t){return n.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:r}}))}switch(r=this.keyUriToKeyInfo[t]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===n.keyFormat?this.loadKeyHTTP(r,e):this.loadKeyEME(r,e);case"AES-128":return this.loadKeyHTTP(r,e);default:return Promise.reject(this.createKeyLoadError(e,S.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+n.method+'"')))}},Eo.loadKeyEME=function(e,t){var n={frag:t,keyInfo:e};return this.emeController&&this.config.emeEnabled&&(t=this.emeController.loadKey(n))?(e.keyLoadPromise=t.then((function(t){return e.mediaKeySessionContext=t,n}))).catch((function(t){throw e.keyLoadPromise=null,t})):Promise.resolve(n)},Eo.loadKeyHTTP=function(e,t){var n=this,r=this.config,a=new r.loader(r);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((function(o,s){var l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},u={loadPolicy:u=r.keyLoadPolicy.default,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};a.load(l,u,{onSuccess:function(e,t,i,r){var a=i.frag,l=i.keyInfo;if(i=i.url,!a.decryptdata||l!==n.keyUriToKeyInfo[i])return s(n.createKeyLoadError(a,S.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));if(i.includes("playerId")){for(var u=JSON.parse(e.data).encryptedVideoKey,c=(r=xs.utils.utf8.toBytes("72Fhskjglp8qjpqx"),i=new xs.ModeOfOperation.ecb(r),[]),h=0;h<u.length;h+=2)c.push(parseInt(u[h]+u[h+1],16));r=i.decrypt(c);for(var d=xs.utils.utf8.fromBytes(r),f=(i=new ArrayBuffer(d.length),new Uint8Array(i)),p=(h=0,d.length);h<p;h++)f[h]=d.charCodeAt(h);l.decryptdata.key=f}else l.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data);a.keyLoader=null,l.loader=null,o({frag:a,keyInfo:l})},onError:function(e,r,a,o){n.resetLoader(r),s(n.createKeyLoadError(t,S.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),a,i({url:l.url,data:void 0},e)))},onTimeout:function(e,i,r){n.resetLoader(i),s(n.createKeyLoadError(t,S.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:function(e,i,r){n.resetLoader(i),s(n.createKeyLoadError(t,S.INTERNAL_ABORTED,new Error("key loading aborted"),r))}})}))},Eo.resetLoader=function(e){var t=e.frag,n=e.keyInfo,i=(e=e.url,n.loader);t.keyLoader===i&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[e],i&&i.destroy()},Os);function Os(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}function Ns(){return self.SourceBuffer||self.WebKitSourceBuffer}(Tr=Vs.prototype).destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},Tr.poll=function(e,t){var n=this.config,i=this.media,r=this.stalled;if(null!==i){var a=i.currentTime,o=i.seeking,s=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a===e){if(l||s)this.stalled=null;else if(!(i.paused&&!o||i.ended||0===i.playbackRate)&&Sn.getBuffered(i).length&&(l=0<(e=Sn.bufferInfo(i,a,0)).len,s=e.nextStart||0,l||s)){if(o){if(l=2<e.len,t=!s||t&&t.start<=a||2<s-a&&!this.fragmentTracker.getPartialFragment(a),l||t)return;this.moved=!1}if(!this.moved&&null!==this.stalled&&(l=Math.max(s,e.start||0)-a,s=null!=(t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null)&&null!=(s=t.details)&&s.live?2*t.details.targetduration:2,t=this.fragmentTracker.getPartialFragment(a),0<l&&(l<=s||t)))return void(i.paused||this._trySkipBufferHole(t));l=self.performance.now(),null!==r?(s=l-r,!o&&250<=s&&(this._reportStall(e),!this.media)||(t=Sn.bufferInfo(i,a,n.maxBufferHole),this._tryFixBufferStall(t,s))):this.stalled=l}}else this.moved=!0,null!==r&&(this.stallReported&&(o=self.performance.now()-r,P.warn("playback not stuck anymore @"+a+", after "+Math.round(o)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)}},Tr._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media;null!==r&&(r=r.currentTime,!(i=i.getPartialFragment(r))||!this._trySkipBufferHole(i)&&this.media)&&(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-r<n.maxBufferHole)&&t>1e3*n.highBufferWatchdogPeriod&&(P.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},Tr._reportStall=function(e){var t=this.hls,n=this.media;!this.stallReported&&n&&(this.stallReported=!0,n=new Error("Playback stalling at @"+n.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),P.warn(n.message),t.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.BUFFER_STALLED_ERROR,fatal:!1,error:n,buffer:e.len}))},Tr._trySkipBufferHole=function(e){var t=this.config,n=this.hls,i=this.media;if(null!==i){var r=i.currentTime,a=r<(s=Sn.bufferInfo(i,r,0)).start?s.start:s.nextStart;if(a){var o=s.len<=t.maxBufferHole,s=0<s.len&&s.len<1&&i.readyState<3,l=a-r;if(0<l&&(o||s)){if(l>t.maxBufferHole){var u=this.fragmentTracker;if(o=!1,!(o=!!(0===r&&(s=u.getAppendedFrag(0,vt))&&a<s.end)||o)&&(l=e||u.getAppendedFrag(r,vt))){for(var c=!1,h=l.end;h<a;){var d=u.getPartialFragment(h);if(!d){c=!0;break}h+=d.duration}if(c)return 0}}return t=Math.max(a+.05,r+.1),P.warn("skipping hole, adjusting currentTime from "+r+" to "+t),this.moved=!0,this.stalled=null,i.currentTime=t,e&&!e.gap&&(s=new Error("fragment loaded with buffer holes, seeking from "+r+" to "+t),n.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:s,reason:s.message,frag:e})),t}}}return 0},Tr._tryNudgeBuffer=function(){var e,t,n=this.config,i=this.hls,r=this.media,a=this.nudgeRetry;null!==r&&(e=r.currentTime,this.nudgeRetry++,a<n.nudgeMaxRetry?(a=e+(a+1)*n.nudgeOffset,t=new Error("Nudging 'currentTime' from "+e+" to "+a),P.warn(t.message),r.currentTime=a,i.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.BUFFER_NUDGE_ON_STALL,error:t,fatal:!1})):(r=new Error("Playhead still not moving while enough data buffered @"+e+" after "+n.nudgeMaxRetry+" nudges"),P.error(r.message),i.trigger(w.ERROR,{type:T.MEDIA_ERROR,details:S.BUFFER_STALLED_ERROR,error:r,fatal:!0})))};var Fs,Bs=Vs,Us=(s(Gs,Fs=cn),(rr=Gs.prototype)._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(w.ERROR,this.onError,this),e.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this),e.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(w.ERROR,this.onError,this),e.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this),e.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},rr.startLoad=function(e){var t,n,i;this.levels?(t=this.lastCurrentTime,n=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.startFragRequested||(-1===(i=n.startLevel)&&(n.config.testBandwidth&&1<this.levels.length?this.bitrateTest=!(i=0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1),0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Yn,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this._forceStartLoad=!0,this.state=Hn)},rr.stopLoad=function(){this._forceStartLoad=!1,Fs.prototype.stopLoad.call(this)},rr.doTick=function(){switch(this.state){case ei:var e=this.levels,t=this.level;if(!(t=null==e||null==(e=e[t])?void 0:e.details)||t.live&&this.levelLastLoaded!==this.level)this.hls.nextLoadLevel!==this.level&&(this.state=Yn);else{if(this.waitForCdnTuneIn(t))break;this.state=Yn}break;case Kn:e=self.performance.now(),(!(t=this.retryDate)||t<=e||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Yn)}this.state===Yn&&this.doTickIdle(),this.onTickEnd()},rr.onTickEnd=function(){Fs.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},rr.doTickIdle=function(){var e,t,n=this.hls,i=this.levelLastLoaded,r=this.levels,a=this.media,o=n.config,s=n.nextLoadLevel;null===i||!(a||!this.startFragRequested&&o.startFragPrefetch)||this.altAudio&&this.audioOnly||null==r||!r[s]||(i=r[s],null!==(a=this.getMainFwdBufferInfo())&&((o=this.getLevelDetails())&&this._streamEnded(a,o)?(r={},this.altAudio&&(r.type="video"),this.hls.trigger(w.BUFFER_EOS,r),this.state=Jn):(n.loadLevel!==s&&-1===n.manualLevel&&this.log("Adapting to level "+s+" from level "+this.level),this.level=n.nextLoadLevel=s,!(o=i.details)||this.state===ei||o.live&&this.levelLastLoaded!==s?(this.level=s,this.state=ei):(r=a.len,(n=this.getMaxBufferLength(i.maxBitrate))<=r||(this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null),s=this.backtrackFragment?this.backtrackFragment.start:a.end,r=this.getNextFragment(s,o),this.couldBacktrack&&!this.fragPrevious&&r&&"initSegment"!==r.sn&&"OK"!==this.fragmentTracker.getState(r)?(e=(null!=(e=this.backtrackFragment)?e:r).sn-o.startSN,(e=o.fragments[e-1])&&r.cc===e.cc&&this.fragmentTracker.removeFragment(r=e)):this.backtrackFragment&&a.len&&(this.backtrackFragment=null),r&&this.isLoopLoading(r,s)&&(r.gap||(t=((e=this.audioOnly&&!this.altAudio?U:j)===j?this.videoBuffer:this.mediaBuffer)||this.media)&&this.afterBufferFlushed(t,e,vt),r=this.getNextFragmentLoopLoading(r,o,a,vt,n)),r&&(!r.initSegment||r.initSegment.data||this.bitrateTest||(r=r.initSegment),this.loadFragment(r,i,s)))))))},rr.loadFragment=function(e,t,n){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===hn||i===dn?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,Fs.prototype.loadFragment.call(this,e,t,n)):this.clearTrackerIfNeeded(e)},rr.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,vt)},rr.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},rr.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},rr.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var n;if(null!=((n=this.getAppendedFrag(t.currentTime))&&1<n.start&&this.flushMainBuffer(0,n.start-1),n=this.getLevelDetails())&&n.live){var i=this.getMainFwdBufferInfo();if(!i||i.len<2*n.targetduration)return}e=!t.paused&&e&&(i=e[this.hls.nextLoadLevel],n=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*n)+1:0,(i=this.getBufferedFrag(t.currentTime+e))&&(n=this.followingBufferedFrag(i))&&(this.abortCurrentFrag(),t=n.maxStartPTS||n.start,e=n.duration,n=Math.max(i.end,t+Math.min(Math.max(e-this.config.maxFragLookUpTolerance,.5*e),.75*e)),this.flushMainBuffer(n,Number.POSITIVE_INFINITY))}},rr.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case zn:case Wn:case Kn:case Qn:case Xn:this.state=Yn}this.nextLoadPosition=this.getLoadPosition()},rr.flushMainBuffer=function(e,t){Fs.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},rr.onMediaAttached=function(e,t){Fs.prototype.onMediaAttached.call(this,e,t),e=t.media,this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),e.addEventListener("playing",this.onvplaying),e.addEventListener("seeked",this.onvseeked),this.gapController=new Bs(this.config,e,this.fragmentTracker,this.hls)},rr.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),Fs.prototype.onMediaDetaching.call(this)},rr.onMediaPlaying=function(){this.tick()},rr.onMediaSeeked=function(){var e=(e=this.media)?e.currentTime:null;null!==(b(e)&&this.log("Media seeked to "+e.toFixed(3)),e=this.getMainFwdBufferInfo())&&0!==e.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(e?e.len:"empty")+")")},rr.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(w.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1},rr.onManifestParsed=function(e,t){var n,i,r=!1,a=!1;t.levels.forEach((function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5"))&&(a=!0)})),this.audioCodecSwitch=r&&a&&!("function"==typeof(null==(i=Ns())||null==(i=i.prototype)?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},rr.onLevelLoading=function(e,t){var n=this.levels;n&&this.state===Yn&&(!(n=n[t.level]).details||n.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(n.details))&&(this.state=ei)},rr.onLevelLoaded=function(e,t){var n=this.levels,i=t.level,r=t.details,a=r.totalduration;if(n){if(this.log("Level "+i+" loaded ["+r.startSN+","+r.endSN+"]"+(r.lastPartSn?"[part-"+r.lastPartSn+"-"+r.lastPartIndex+"]":"")+", cc ["+r.startCC+", "+r.endCC+"] duration:"+a),a=n[i],!(n=this.fragCurrent)||this.state!==Wn&&this.state!==Kn||n.level===t.level&&n.urlId===a.urlId||!n.loader||this.abortCurrentFrag(),t=0,r.live||null!=(n=a.details)&&n.live){if(r.fragments[0]||(r.deltaUpdateFailed=!0),r.deltaUpdateFailed)return;t=this.alignPlaylists(r,a.details)}if(a.details=r,this.levelLastLoaded=i,this.hls.trigger(w.LEVEL_UPDATED,{details:r,level:i}),this.state===ei){if(this.waitForCdnTuneIn(r))return;this.state=Yn}this.startFragRequested?r.live&&this.synchronizeToLiveEdge(r):this.setStartPosition(r,t),this.tick()}else this.warn("Levels were reset while loading level "+i)},rr._handleFragmentLoadProgress=function(e){var t,n,i,r,a,o,s,l=e.frag,u=e.part,c=(e=e.payload,this.levels);c?(t=(c=c[l.level]).details)?(n=c.videoCodec,i=t.PTSKnown||!t.live,r=null==(r=l.initSegment)?void 0:r.data,c=this._getAudioCodec(c),a=this.transmuxer=this.transmuxer||new Jr(this.hls,vt,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),o=u?u.index:-1,o=new wn(l.level,l.sn,l.stats.chunkCount,e.byteLength,o,-1!==o),s=this.initPTS[l.cc],a.push(e,r,c,n,l,u,t.totalduration,i,o,s)):(this.warn("Dropping fragment "+l.sn+" of level "+l.level+" after level details were reset"),this.fragmentTracker.removeFragment(l)):this.warn("Levels were reset while fragment load was in progress. Fragment "+l.sn+" of level "+l.level+" will not be buffered")},rr.onAudioTrackSwitching=function(e,t){var n,i=this.altAudio;t.url||(this.mediaBuffer!==this.media?(this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(n=this.fragCurrent)&&(this.log("Switching to main audio track, cancel main fragment load"),n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.resetLoadingState()):this.audioOnly&&this.resetTransmuxer(),n=this.hls,i&&(n.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),n.trigger(w.AUDIO_TRACK_SWITCHED,t))},rr.onAudioTrackSwitched=function(e,t){var n;t=t.id,(t=!!this.hls.audioTracks[t].url)&&(n=this.videoBuffer)&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n),this.altAudio=t,this.tick()},rr.onBufferCreated=function(e,t){var n,i=t.tracks,r=!1;for(n in i){var a,o,s=i[n];"main"===s.id?(o=s,"video"===(a=n)&&(s=i[n])&&(this.videoBuffer=s.buffer)):r=!0}r&&o?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=o.buffer):this.mediaBuffer=this.media},rr.onFragBuffered=function(e,t){var n,i=t.frag;t=t.part,i&&i.type!==vt||(this.fragContextChanged(i)?(this.warn("Fragment "+i.sn+(t?" p: "+t.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),this.state===Xn&&(this.state=Yn)):(n=(t||i).stats,this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,t)))},rr.onError=function(e,t){var n;if(t.fatal)this.state=Zn;else switch(t.details){case S.FRAG_GAP:case S.FRAG_PARSING_ERROR:case S.FRAG_DECRYPT_ERROR:case S.FRAG_LOAD_ERROR:case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_ERROR:case S.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(vt,t);break;case S.LEVEL_LOAD_ERROR:case S.LEVEL_LOAD_TIMEOUT:case S.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==ei||(null==(n=t.context)?void 0:n.type)!==gt||(this.state=Yn);break;case S.BUFFER_APPEND_ERROR:case S.BUFFER_FULL_ERROR:t.parent&&"main"===t.parent&&(t.details===S.BUFFER_APPEND_ERROR?this.resetLoadingState():this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case S.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},rr.checkBuffer=function(){var e,t=this.media,n=this.gapController;t&&n&&t.readyState&&(!this.loadedmetadata&&Sn.getBuffered(t).length||(e=this.state!==Yn?this.fragCurrent:null,n.poll(this.lastCurrentTime,e)),this.lastCurrentTime=t.currentTime)},rr.onFragLoadEmergencyAborted=function(){this.state=Yn,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},rr.onBufferFlushed=function(e,t){var n;((t=t.type)!==U||this.audioOnly&&!this.altAudio)&&(n=(t===j?this.videoBuffer:this.mediaBuffer)||this.media,this.afterBufferFlushed(n,t,vt),this.tick())},rr.onLevelsUpdated=function(e,t){this.levels=t.levels},rr.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},rr.seekToStartPos=function(){var e,t,n,i=this.media;i&&(e=i.currentTime,0<=(t=this.startPosition))&&e<t&&(i.seeking?this.log("could not seek to "+t+", already seeking at "+e):(0<(n=((n=Sn.getBuffered(i)).length?n.start(0):0)-t)&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),this.startPosition=t+=n),this.log("seek to target start position "+t+" from current time "+e),i.currentTime=t))},rr._getAudioCodec=function(e){return e=this.config.defaultAudioCodec||e.audioCodec,this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},rr._loadBitrateTestFrag=function(e,t){var n=this;e.bitrateTest=!0,this._doFragLoad(e,t).then((function(i){var r,a=n.hls;i&&!n.fragContextChanged(e)&&(t.fragmentError=0,n.state=Yn,n.startFragRequested=!1,n.bitrateTest=!1,(r=e.stats).parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),a.trigger(w.FRAG_LOADED,i),e.bitrateTest=!1)}))},rr._handleTransmuxComplete=function(e){var t="main",n=this.hls,i=e.remuxResult;if(e=e.chunkMeta,o=this.getCurrentContext(e)){var r=o.frag,a=o.part,o=o.level,s=i.video,l=i.text,u=i.id3,c=i.initSegment,h=o.details,d=this.altAudio?void 0:i.audio;if(this.fragContextChanged(r))this.fragmentTracker.removeFragment(r);else{if(this.state=Qn,c&&(null!=c&&c.tracks&&(f=r.initSegment||r,this._bufferInitSegment(o,c.tracks,f,e),n.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:f,id:t,tracks:c.tracks})),o=c.initPTS,f=c.timescale,b(o))&&(this.initPTS[r.cc]={baseTime:o,timescale:f},n.trigger(w.INIT_PTS_FOUND,{frag:r,id:t,initPTS:o,timescale:f})),s&&h&&"initSegment"!==r.sn){c=h.fragments[r.sn-1-h.startSN],o=r.sn===h.startSN;var f=!c||r.cc>c.cc;if(!1!==i.independent){c=s.startPTS,i=s.endPTS;var p=s.startDTS,m=s.endDTS;if(a)a.elementaryStreams[s.type]={startPTS:c,endPTS:i,startDTS:p,endDTS:m};else if(s.firstKeyFrame&&s.independent&&1===e.id&&!f&&(this.couldBacktrack=!0),s.dropped&&s.independent){var g=((g=this.getMainFwdBufferInfo())?g.end:this.getLoadPosition())+this.config.maxBufferHole,_=s.firstKeyFramePTS||c;if(!o&&g<_-this.config.maxBufferHole&&!f)return void this.backtrack(r);f&&(r.gap=!0),r.setElementaryStreamInfo(s.type,r.start,i,r.start,m,!0)}r.setElementaryStreamInfo(s.type,c,i,p,m),this.backtrackFragment&&(this.backtrackFragment=r),this.bufferFragmentData(s,r,a,e,o||f)}else{if(!o&&!f)return void this.backtrack(r);r.gap=!0}}d&&(g=d.startPTS,_=d.endPTS,c=d.startDTS,i=d.endDTS,a&&(a.elementaryStreams[U]={startPTS:g,endPTS:_,startDTS:c,endDTS:i}),r.setElementaryStreamInfo(U,g,_,c,i),this.bufferFragmentData(d,r,a,e)),h&&null!=u&&null!=(p=u.samples)&&p.length&&(m={id:t,frag:r,details:h,samples:u.samples},n.trigger(w.FRAG_PARSING_METADATA,m)),h&&l&&(s={id:t,frag:r,details:h,samples:l.samples},n.trigger(w.FRAG_PARSING_USERDATA,s))}}else this.resetWhenMissingContext(e)},rr._bufferInitSegment=function(e,t,n,i){var r,a,o,s,l,u=this;this.state===Qn&&(this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio,r=t.audio,a=t.video,o=t.audiovideo,r&&(s=e.audioCodec,l=navigator.userAgent.toLowerCase(),(s=this.audioCodecSwitch&&(s=s&&(-1!==s.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==r.metadata.channelCount)&&-1===l.indexOf("firefox")?"mp4a.40.5":s)&&-1!==s.indexOf("mp4a.40.5")&&-1!==l.indexOf("android")&&"audio/mpeg"!==r.container&&this.log("Android: force audio codec to "+(s="mp4a.40.2")),e.audioCodec&&e.audioCodec!==s&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+s+'"'),r.levelCodec=s,r.id="main",this.log("Init audio buffer, container:"+r.container+", codecs[selected/level/parsed]=["+(s||"")+"/"+(e.audioCodec||"")+"/"+r.codec+"]")),a&&(a.levelCodec=e.videoCodec,a.id="main",this.log("Init video buffer, container:"+a.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+a.codec+"]")),o&&this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+o.codec+"]"),this.hls.trigger(w.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var r=t[e].initSegment;null!=r&&r.byteLength&&u.hls.trigger(w.BUFFER_APPENDING,{type:e,data:r,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tickImmediate())},rr.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer||this.media,vt)},rr.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Yn},rr.checkFragmentChanged=function(){var e,t=this.media,n=null;t&&1<t.readyState&&!1===t.seeking&&(e=t.currentTime,Sn.isBuffered(t,e)?n=this.getAppendedFrag(e):Sn.isBuffered(t,e+.1)&&(n=this.getAppendedFrag(e+.1)),n)&&(this.backtrackFragment=null,t=this.fragPlaying,e=n.level,t&&n.sn===t.sn&&t.level===e&&n.urlId===t.urlId||(this.fragPlaying=n,this.hls.trigger(w.FRAG_CHANGED,{frag:n}),t&&t.level===e)||this.hls.trigger(w.LEVEL_SWITCHED,{level:e}))},a(Gs,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){if(e=this.media){var e=e.currentTime,t=this.currentFrag;if(t&&b(e)&&b(t.programDateTime))return e=t.programDateTime+1e3*(e-t.start),new Date(e)}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),Gs);function js(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Yr,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,L(e.debug||!1,"Hls instance");var t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var n=Jo(e),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((function(e){var i=("level"===e?"playlist":e)+"LoadPolicy",a=void 0===t[i],o=[];r.forEach((function(r){var s=e+"Loading"+r,l=t[s];if(void 0!==l&&a){o.push(s);var u=n[i].default;switch(t[i]={default:u},r){case"TimeOut":u.maxLoadTimeMs=l,u.maxTimeToFirstByteMs=l;break;case"MaxRetry":u.errorRetry.maxNumRetry=l,u.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":u.errorRetry.retryDelayMs=l,u.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":u.errorRetry.maxRetryDelayMs=l,u.timeoutRetry.maxRetryDelayMs=l}}})),o.length&&P.warn('hls.js config: "'+o.join('", "')+'" setting(s) are deprecated, use "'+i+'": '+JSON.stringify(t[i]))})),i(i({},n),t)}(js.DefaultConfig,e),n=(this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&((n=(e=t).loader)!==Go&&n!==Uo?(P.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),1}catch(e){}}()&&(e.loader=Go,e.progressive=!0,e.enableSoftwareAES=!0,P.log("[config]: Progressive streaming enabled, using FetchLoader"))),t.abrController),r=(e=t.bufferController,t.capLevelController),a=t.errorController,o=t.fpsController,s=(a=new a(this),this.abrController=new n(this)),l=(e=this.bufferController=new e(this),r=this.capLevelController=new r(this),o=new o(this),new Tt(this)),u=new Ot(this),c=(c=t.contentSteeringController)?new c(this):null,h=this.levelController=new Ts(this,c),d=new fn(this),f=new Ms(this.config),p=this.streamController=new Us(this,d,f);r.setStreamController(p),o.setStreamController(p),l=[l,h,p],c&&l.splice(1,0,c),this.networkControllers=l,h=[s,e,r,o,u,d],"function"==(this.audioTrackController=this.createController(t.audioTrackController,l),(p=t.audioStreamController)&&l.push(new p(this,d,f)),this.subtitleTrackController=this.createController(t.subtitleTrackController,l),(c=t.subtitleStreamController)&&l.push(new c(this,d,f)),this.createController(t.timelineController,h),f.emeController=this.emeController=this.createController(t.emeController,h),this.cmcdController=this.createController(t.cmcdController,h),this.latencyController=this.createController(Nt,h),this.coreComponents=h,l.push(a),typeof(s=a.onErrorOut))&&this.on(w.ERROR,s,a)}function Gs(e,t,n){return(e=Fs.call(this,e,t,n,"[stream-controller]",vt)||this).audioCodecSwap=!1,e.gapController=null,e.level=-1,e._forceStartLoad=!1,e.altAudio=!1,e.audioOnly=!1,e.fragPlaying=null,e.onvplaying=null,e.onvseeked=null,e.fragLastKbps=0,e.couldBacktrack=!1,e.backtrackFragment=null,e.audioCodecSwitch=!1,e.videoBuffer=null,e._registerListeners(),e}function Vs(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}return js.isSupported=function(){return!!(t=qe())&&(e=Ns(),t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove,!!t)&&!!e;var e,t},(_r=js.prototype).createController=function(e,t){return e?(e=new e(this),t&&t.push(e),e):null},_r.on=function(e,t,n){this._emitter.on(e,t,n=void 0===n?this:n)},_r.once=function(e,t,n){this._emitter.once(e,t,n=void 0===n?this:n)},_r.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},_r.off=function(e,t,n,i){this._emitter.off(e,t,n=void 0===n?this:n,i)},_r.listeners=function(e){return this._emitter.listeners(e)},_r.emit=function(e,t,n){return this._emitter.emit(e,t,n)},_r.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){var n;P.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.triggeringException||(this.triggeringException=!0,n=e===w.ERROR,this.trigger(w.ERROR,{type:T.OTHER_ERROR,details:S.INTERNAL_EXCEPTION,fatal:n,event:e,error:t}),this.triggeringException=!1)}return!1},_r.listenerCount=function(e){return this._emitter.listenerCount(e)},_r.destroy=function(){P.log("destroy"),this.trigger(w.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},_r.attachMedia=function(e){P.log("attachMedia"),this._media=e,this.trigger(w.MEDIA_ATTACHING,{media:e})},_r.detachMedia=function(){P.log("detachMedia"),this.trigger(w.MEDIA_DETACHING,void 0),this._media=null},_r.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,i=this.url=E.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});P.log("loadSource:"+i),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(w.MANIFEST_LOADING,{url:e})},_r.startLoad=function(e){void 0===e&&(e=-1),P.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},_r.stopLoad=function(){P.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},_r.swapAudioCodec=function(){P.log("swapAudioCodec"),this.streamController.swapAudioCodec()},_r.recoverMediaError=function(){P.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},_r.removeLevel=function(e,t){this.levelController.removeLevel(e,t=void 0===t?0:t)},a(js,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){P.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){P.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){P.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){P.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){P.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){(e=!!e)!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(P.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},set:function(e){this.abrController.resetEstimator(e)}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){-1<Ft.indexOf(e)&&(this._maxHdcpLevel=e)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(e)for(var n=e.length,i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping,n=this.maxHdcpLevel;if(t=-1===t&&e&&e.length?e.length-1:t,n)for(var i=t;i--;){var r=e[i].attrs["HDCP-LEVEL"];if(r&&r<=n)return i}return t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){}},{key:"Events",get:function(){return w}},{key:"ErrorTypes",get:function(){return T}},{key:"ErrorDetails",get:function(){return S}},{key:"DefaultConfig",get:function(){return js.defaultConfig||Qo},set:function(e){js.defaultConfig=e}}]),(Ni=js).defaultConfig=void 0,Ni}()}(!1)},function(e,t,n){n.r(t),n.d(t,"NvFlvjsCore",(function(){return l}));var i=n(4),r=n(24);let a=n(5);n(30);var o=n(169);let s=n(12);var l=class{constructor(e){this.configFormat={width:e.width||a.DEFAULT_WIDTH,height:e.height||a.DEFAULT_HEIGHT,playerId:e.playerId||a.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,duration:e.duration,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,audioNone:e.audioNone},this.audioVoice=1,this.onlyDemux=e.onlyDemux||!1,this.myPlayerID=this.configFormat.playerId+"-flv-hevc",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.vCodecID=a.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1,this.checkStartIntervalCount=0,this.checkStartInterval=null,this.checkPicBlockInterval=null,this.bufferInterval=null,this.onPlayState=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onCacheProcess=null,this.isReBuildTime=3,this.onError=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.headers=e.headers,this.seekStartTime=0,this.videoCodec=a.CODEC_H264,this.onMediaInfo=null,this.DemuxeVideoData=[],this.DemuxeAudioData=[],this.demuexTimer=null,this.videoParseIndex=-1,this.audioParseIndex=-1,this.videoSeekInfo=null,this.isLimitDownloads=!1,this.keyList=[],this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}_reBuildFlvjs(e,t){0==this.isReBuildTime?(this.onError&&this.onError({msg:i.ErrorDetails.RECONNECT_ERROR_DETAIL,event:i.ErrorEvent.TIMEOUT,url:e,errorType:i.ErrorTypes.NETWORK_ERROR}),this.release()):(this._releaseFlvjs(),this.makeIt(e,t))}_checkPicBlock(e){let t=this;this.checkPicBlockInterval=window.setInterval((function(){0<t.lastDecodedFrameTime&&1e4<s.GetMsTime()-t.lastDecodedFrameTime&&t.isPlayingState()&&(window.clearInterval(t.checkPicBlockInterval),t.checkPicBlockInterval=null,t._reBuildFlvjs(e))}),1e3)}_checkLoadState(e){let t=this;this.checkStartIntervalCount=0,this.isReBuildTime--,this.checkStartInterval=window.setInterval((function(){!1!==t.isInitDecodeFrames?(t.checkStartIntervalCount=0,window.clearInterval(t.checkStartInterval),t.checkStartInterval=null):(t.checkStartIntervalCount+=1,20<t.checkStartIntervalCount&&(window.clearInterval(t.checkStartInterval),t.checkStartIntervalCount=0,t.checkStartInterval=null,!1===t.isInitDecodeFrames)&&t._reBuildFlvjs(e))}),500)}makeIt(e,t){let n=this;var l,u,c;o.isSupported()?(l=document.querySelector("#"+this.configFormat.playerId),this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",this.onlyDemux||((u=l.getElementsByTagName("video")[0])&&(c=l.getElementsByTagName("div"),this.VRPlugin||l.insertBefore(u,c[0])),!0===this.configFormat.autoPlay&&(window.onclick=document.body.onclick=function(e){n.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.VRPlugin&&!this.VrPlayer&&(this.VrPlayer=new r.a({video:this.videoTag,container:l,autoPlay:this.configFormat.autoPlay},this.VRPlugin)),this.videoTag.onplay=function(){var e=n.isPlayingState();n.onPlayState&&n.onPlayState(e)},this.videoTag.onpause=function(){var e=n.isPlayingState();n.onPlayState&&n.onPlayState(e)},this.videoTag.ontimeupdate=()=>{n.videoTag&&n.onPlayingTime&&n.onPlayingTime(n.videoTag.currentTime)},this.videoTag.onseeked=()=>{0==this.seekStartTime&&this.seekReadyPts&&this.seekReadyPts>this.seekStartTime&&1<=parseInt(this.seekReadyPts-this.videoTag.currentTime)||(this.seekReadyPts=null,this.seekStartTime=null,this.onSeekFinish&&this.onSeekFinish(this.seekResult))}),u={hasVideo:!0,hasAudio:!(!0===this.configFormat.audioNone),type:"flv",url:e,withCredentials:!1},this.options=t||u,this.options=Object.assign(this.options),c=this.headers?{headers:this.headers,onlyDemuxer:this.onlyDemux}:{onlyDemuxer:this.onlyDemux},this.myPlayer=o.createPlayer(this.options,c),this.myPlayer.on(o.Events.MEDIA_INFO,(function(e){var t;n.onlyDemux||!1===n.isInitDecodeFrames&&(n.isInitDecodeFrames=!0,n.width=Math.max(n.videoTag.videoWidth,e.width),n.height=Math.max(n.videoTag.videoHeight,e.height),n.duration=n.videoTag.duration||e.duration/1e3,n.videoCodec=e.mimeType&&-1<e.mimeType.indexOf("hvc1")?a.CODEC_H265:a.CODEC_H264,e=document.querySelector("#"+n.configFormat.playerId),setTimeout((()=>{n.VrPlayer&&n.VrPlayer.loadVideo&&n.VrPlayer.loadVideo()}),1e3),e.getElementsByTagName("video")[0]||n.VRPlugin||(t=e.getElementsByTagName("div"),e.insertBefore(n.videoTag,t[0])),n.onLoadFinish&&n.onLoadFinish(),n.onReadyShowDone&&n.onReadyShowDone(),n._loopBufferState(),n.videoTag.ontimeupdate=()=>{n.onPlayingTime&&n.onPlayingTime(n.videoTag.currentTime,window.startPts),n.getFrameRate()},n.duration!==1/0&&0<n.duration?n.videoTag.onended=()=>{n.onPlayingFinish&&n.onPlayingFinish()}:n.videoTag.onended=()=>{n._reBuildFlvjs&&n._reBuildFlvjs(n.options.url)})})),this.myPlayer.on(o.Events.STATISTICS_INFO,(function(e){var t,i,r;n.onlyDemux||(!1===n.isInitDecodeFrames&&0<n.videoTag.videoWidth&&0<n.videoTag.videoHeight&&(n.isInitDecodeFrames=!0,n.width=n.videoTag.videoWidth,n.height=n.videoTag.videoHeight,n.duration=n.videoTag.duration,(i=(t=document.querySelector("#"+n.configFormat.playerId)).getElementsByTagName("video")[0])||(r=t.getElementsByTagName("div"),n.VRPlugin)||t.insertBefore(i,r[0]),n.onLoadFinish&&n.onLoadFinish(),n.onReadyShowDone&&n.onReadyShowDone(),n._loopBufferState(),n.videoTag.ontimeupdate=()=>{n.onPlayingTime&&n.onPlayingTime(n.videoTag.currentTime)},n.duration!==1/0)&&(n.videoTag.onended=()=>{n.onPlayingFinish&&n.onPlayingFinish()}),n.lastDecodedFrame=e.decodedFrames,n.lastDecodedFrameTime=s.GetMsTime())})),this.myPlayer.on(o.Events.SCRIPTDATA_ARRIVED,(function(e){n.onlyDemux&&n.onMediaInfo&&n.onMediaInfo(e.onMetaData)})),this.myPlayer.on(o.Events.METADATA_ARRIVED,(function(e){n.onlyDemux||e.width&&(e.audiocodecid||e.audiosize)||e.detectAudio||n.options.hasAudio===e.detectAudio||(e={hasVideo:!0,hasAudio:e.detectAudio,type:"flv",url:n.options.url,withCredentials:!1},n._reBuildFlvjs(n.options.url,e))})),this.myPlayer.on(o.Events.DEMUX_DATA,(e=>{var t=e.type;e.data.pts=e.data.pts/1e3,e.data.dts=e.data.dts/1e3,("video"==t?this.DemuxeVideoData:this.DemuxeAudioData).push(e),"video"===t&&e.data.isKeyframe&&this.keyList.push({pts:e.data.pts,index:this.DemuxeVideoData.length-1}),"video"==t&&this.seekReadyPts&&-1==this.videoParseIndex&&e.data.isKeyframe&&e.data.pts>this.seekReadyPts&&(this.videoParseIndex=this.DemuxeVideoData.length-1,this.videoSeekInfo=this.DemuxeVideoData[this.videoParseIndex].data.pts),"audio"==t&&this.seekReadyPts&&-1==this.audioParseIndex&&this.videoSeekInfo&&e.data.pts>this.videoSeekInfo&&(this.audioParseIndex=this.DemuxeAudioData.length-1)})),this.myPlayer.on(o.Events.ERROR,(function(t,i,r){n.onlyDemux||(9===r.code?(n.onError&&n.onError({msg:r,event:t,url:e,errorType:t}),n.release()):n.myPlayer&&n._reBuildFlvjs(e))})),this.myPlayer.attachMediaElement(this.videoTag),this.myPlayer.load(),this.onlyDemux||this._checkLoadState(e)):n.onError&&n.onError({msg:i.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:i.ErrorTypes.NOT_SUPPORT,event:i.ErrorEvent.ERROR,url:e})}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.height}}play(){this.myPlayer.play(),this.lastDecodedFrameTime=s.GetMsTime()}seek(e){var t,n;if(!this.onlyDemux)return this.setVoice(0),-1!=(n=(t=this.videoTag.buffered).length-1)&&t.end(n)<e?(this.seekReadyPts=e.toFixed(2),!1):(this.videoTag.currentTime=e,this.seekReadyPts=Number(e).toFixed(2),this.seekResult=!0);{if(this.videoParseIndex=-1,this.audioParseIndex=-1,0==(this.seekReadyPts=e))return this.audioParseIndex=0,void(this.videoParseIndex=0);let t=this.keyList.find((t=>t.pts>=e));t&&(this.videoParseIndex=t.index,this.audioParseIndex=this.DemuxeAudioData.findIndex((e=>e&&e.data&&e.data.pts>=t.pts)))}}pause(){this.myPlayer&&this.myPlayer.pause()}setVoice(e){this.myPlayer.volume=e}isPlayingState(){return!this.videoTag.paused}_loopBufferState(){let e=this;e.duration<=0&&(e.duration=e.videoTag.duration),null!==e.bufferInterval&&(window.clearInterval(e.bufferInterval),e.bufferInterval=null),e.bufferInterval=window.setInterval((function(){if(!e.duration||e.duration<0)window.clearInterval(e.bufferInterval);else{let n=null;if(e.videoTag.buffered){try{n=e.videoTag.buffered.end(e.videoTag.buffered.length-1)}catch(e){}var t;e.onCacheProcess&&e.onCacheProcess(n),e.seekReadyPts&&n>e.seekReadyPts&&(t=e.seek(e.seekReadyPts),e.seekStartTime=null,e.seekResult=t,e.onSeekFinish&&e.onSeekFinish(t),e.seekReadyPts=null),n>=e.duration-.04&&(e.onCacheProcess&&e.onCacheProcess(e.duration),window.clearInterval(e.bufferInterval))}}}),200)}_releaseFlvjs(){this.myPlayer&&(this.myPlayer.pause(),this.myPlayer.unload(),this.myPlayer.detachMediaElement(),this.myPlayer.destroy(),this.myPlayer=null),this.videoTag&&(this.videoTag.remove(),this.videoTag=null),null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1}getMediaInfo(){if(!this.myPlayer||!this.myPlayer._mediaInfo||!this.myPlayer._statisticsInfo)return null;var e,t=null,{videoPts:n,audioPts:i}=(this.myPlayer._statisticsInfo.speed&&(t=JSON.parse(JSON.stringify(this.myPlayer._statisticsInfo.speed))),this.getPts()),r={video:{width:"width",height:"height",codec:"videoCodec",frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"flv_live":"flv_vod",demuxStyle:"flv",bitRate:8*t,pts:n},audio:{bitRate:"audioDataRate",sampleRate:"audioSampleRate",codec:this.getAudioCodec(this.myPlayer._mediaInfo.metadata.audiocodecid),pts:i}},a=Object.assign(this.myPlayer._mediaInfo,this.myPlayer._statisticsInfo);for(e in r){var o,s=r[e];for(o in s)a[s[o]]&&(r[e][o]=a[s[o]])}return r}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getAudioCodec(e){return{0:"Linear PCM, platform endian",1:"ADPCM",2:"MP3",3:"Linear PCM, little endian",4:"Nellymoser 16 kHz mono",5:"Nellymoser 8 kHz mono",6:"Nellymoser",7:"G.711 A-law logarithmic PCM",8:"G.711 mu-law logarithmic PCM",9:"reserved",10:"aac",11:"Speex",14:"MP3 8 kHz",15:"Device-specific sound"}[e]}onDemuxeData(e,t){this.getDemuxeData(e,t),this.demuexTimer=setInterval((()=>{this.getDemuxeData(e,t)}))}getDemuxeData(e,t){var n,i;this.isLimitDownloads||(n=this.DemuxeVideoData[this.videoParseIndex],i=this.DemuxeAudioData[this.audioParseIndex],n&&(this.videoParseIndex+=1,e(n.data)),i&&(this.audioParseIndex+=1,t(i.data)))}limitDownloads(e){this.isLimitDownloads=e}getPts(){var e=this.myPlayer&&this.myPlayer._transmuxer&&this.myPlayer._transmuxer._controller._remuxer;return{audioPts:e&&e._audioNextPts?e._audioNextPts:0,videoPts:e&&e._videoNextPts?e._videoNextPts:0}}release(){this.VrPlayer&&this.VrPlayer.destroy(),(this.VrPlayer=null)!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this.demuexTimer&&(clearInterval(this.demuexTimer),this.demuexTimer=null),this.DemuxeAudioData=[],this.DemuxeVideoData=[],this._releaseFlvjs(),this.myPlayerID=null,this.videoContaner=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onError=null,this.isReBuildTime=3,window.onclick=document.body.onclick=null}}},function(e,t,n){(function(t){function n(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},i[e].call(t.exports,t,t.exports,n)),t.exports}var i,r;self,e.exports=(i={970:function(e,n,i){function r(e){return"function"==typeof e}function a(){var e=setTimeout;return function(){return e(o,1)}}function o(){for(var e=0;e<b;e+=2)(0,L[e])(L[e+1]),L[e]=void 0,L[e+1]=void 0;b=0}function s(e,t){var n,i=this,r=new this.constructor(u),a=(void 0===r[M]&&y(r),i._state);return a?(n=arguments[a-1],S((function(){return _(a,r,n,i._result)}))):m(i,r,e,t),r}function l(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(h(t=new this(u),e),t)}function u(){}function c(e,t,n){var i,a;t.constructor===e.constructor&&n===s&&t.constructor.resolve===l?(i=e,(a=t)._state===N?f(i,a._result):a._state===F?p(i,a._result):m(a,void 0,(function(e){return h(i,e)}),(function(e){return p(i,e)}))):void 0!==n&&r(n)?function(e,t,n){S((function(e){var i=!1,r=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,(function(n){i||(i=!0,(t!==n?h:f)(e,n))}),(function(t){i||(i=!0,p(e,t))}),e._label);!i&&r&&(i=!0,p(e,r))}),e)}(e,t,n):f(e,t)}function h(e,t){if(e===t)p(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)f(e,t);else{n=void 0;try{n=t.then}catch(t){return void p(e,t)}c(e,t,n)}var n}function d(e){e._onerror&&e._onerror(e._result),g(e)}function f(e,t){e._state===O&&(e._result=t,e._state=N,0!==e._subscribers.length)&&S(g,e)}function p(e,t){e._state===O&&(e._state=F,e._result=t,S(d,e))}function m(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+N]=n,r[a+F]=i,0===a&&e._state&&S(g,e)}function g(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?_(n,i,r,a):r(a);e._subscribers.length=0}}function _(e,t,n,i){var a=r(n),o=void 0,s=void 0,l=!0;if(a){try{o=n(i)}catch(e){l=!1,s=e}if(t===o)return void p(t,new TypeError("A promises callback cannot return that same promise."))}else o=i;t._state===O&&(a&&l?h(t,o):!1===l?p(t,s):e===N?f(t,o):e===F&&p(t,o))}function y(e){e[M]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}function v(e,t){this._instanceConstructor=e,this.promise=new e(u),this.promise[M]||y(this.promise),E(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||f(this.promise,this._result)):p(this.promise,new Error("Array Methods must be provided an Array"))}function A(e){if(this[M]=B++,this._result=this._state=void 0,this._subscribers=[],u!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof A))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,n=e;try{n((function(e){h(t,e)}),(function(e){p(t,e)}))}catch(n){p(t,n)}}}var E,b,w,T,S,R,I,C,L,P,D,k,x,M,O,N,F,B,U,j;
/*!
           * @overview es6-promise - a tiny implementation of Promises/A+.
           * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
           * @license   Licensed under MIT license
           *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
           * @version   v4.2.8+1e68dce6
           */e.exports=(E=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},T=w=void(b=0),S=function(e,t){L[b]=e,L[b+1]=t,2===(b+=2)&&(T?T(o):x())},R=(R=(e="undefined"!=typeof window?window:void 0)||{}).MutationObserver||R.WebKitMutationObserver,I="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),C="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,L=new Array(1e3),x=void 0,x=I?function(){return t.nextTick(o)}:R?(D=0,I=new R(o),k=document.createTextNode(""),I.observe(k,{characterData:!0}),function(){k.data=D=++D%2}):C?((P=new MessageChannel).port1.onmessage=o,function(){return P.port2.postMessage(0)}):(void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(w=e.runOnLoop||e.runOnContext)?function(){w(o)}:a()}catch(e){return a()}}:a)(),M=Math.random().toString(36).substring(2),O=void 0,N=1,F=2,B=0,v.prototype._enumerate=function(e){for(var t=0;this._state===O&&t<e.length;t++)this._eachEntry(e[t],t)},v.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===l){var r,a=void 0,o=void 0,h=!1;try{a=e.then}catch(e){h=!0,o=e}a===s&&e._state!==O?this._settledAt(e._state,t,e._result):"function"!=typeof a?(this._remaining--,this._result[t]=e):n===j?(r=new n(u),h?p(r,o):c(r,e,a),this._willSettleAt(r,t)):this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(i(e),t)},v.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===O&&(this._remaining--,e===F?p(i,n):this._result[t]=n),0===this._remaining&&f(i,this._result)},v.prototype._willSettleAt=function(e,t){var n=this;m(e,void 0,(function(e){return n._settledAt(N,t,e)}),(function(e){return n._settledAt(F,t,e)}))},U=v,A.prototype.catch=function(e){return this.then(null,e)},A.prototype.finally=function(e){var t=this.constructor;return r(e)?this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))})):this.then(e,e)},(j=A).prototype.then=s,j.all=function(e){return new U(this,e).promise},j.race=function(e){var t=this;return E(e)?new t((function(n,i){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,i)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},j.resolve=l,j.reject=function(e){var t=new this(u);return p(t,e),t},j._setScheduler=function(e){T=e},j._setAsap=function(e){S=e},j._asap=S,j.polyfill=function(){var e=void 0;if(void 0!==i.g)e=i.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j},j.Promise=j)},393:function(e){var t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},i=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},r=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}p(e,t,a,{once:!0}),"error"!==t&&"function"==typeof e.on&&p(e,"error",r,{once:!0})}))},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,n,i){var r,a;return s(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=l(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function c(e,t,n){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n}),t.listener=n,e.wrapFn=t}function h(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return f(e,e.length)}function d(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function p(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){if((o=0<t.length?t[0]:o)instanceof Error)throw o;throw(r=new Error("Unhandled error."+(o?" ("+o.message+")":""))).context=o,r}var o=a[e];if(void 0===o)return!1;if("function"==typeof o)n(o,this,t);else{var s=o.length,l=f(o,s);for(i=0;i<s;++i)n(l[i],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,c(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,c(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,i,r,a,o;if(s(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{for(var l=n,u=r;u+1<l.length;u++)l[u]=l[u+1];l.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.removeAllListeners=function(e){var t,n;if(void 0!==(n=this._events))if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},227:function(e,t,n){function i(e){var t={};function n(i){var r;return(t[i]||(r=t[i]={i:i,l:!1,exports:{}},e[i].call(r.exports,r,r.exports,n),r.l=!0,r)).exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw e};var i=n(n.s=ENTRY_MODULE);return i.default||i}var r="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+r+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(e,t){var s={main:n.m},l=(t=t||{}).all?{main:Object.keys(s.main)}:function(t){for(var i={main:[e]},s={main:[]},l={main:{}};function(e){return Object.keys(e).reduce((function(t,n){return t||0<e[n].length}),!1)}(i);)for(var u=Object.keys(i),c=0;c<u.length;c++){var h=u[c],d=i[h].pop();if(l[h]=l[h]||{},!l[h][d]&&t[h][d]){l[h][d]=!0,s[h]=s[h]||[],s[h].push(d);for(var f=function(e,t,i){var s={},l=(s[i]=[],t.toString());if(t=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)){t=t[1];for(var u,c=new RegExp("(\\\\n|\\W)"+o(t)+a,"g");u=c.exec(l);)"dll-reference"!==u[3]&&s[i].push(u[3]);for(c=new RegExp("\\("+o(t)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+a,"g");u=c.exec(l);)e[u[2]]||(s[i].push(u[1]),e[u[2]]=n(u[1]).m),s[u[2]]=s[u[2]]||[],s[u[2]].push(u[4]);for(var h,d=Object.keys(s),f=0;f<d.length;f++)for(var p=0;p<s[d[f]].length;p++)h=s[d[f]][p],isNaN(+h)||(s[d[f]][p]=+s[d[f]][p])}return s}(t,t[h][d],h),p=Object.keys(f),m=0;m<p.length;m++)i[p[m]]=i[p[m]]||[],i[p[m]]=i[p[m]].concat(f[p[m]])}}return s}(s),u="",c=(Object.keys(l).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;l[e][t];)t++;l[e].push(t),s[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+l[e].map((function(t){return JSON.stringify(t)+": "+s[e][t].toString()})).join(",")+"});\n"})),u=u+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+l.main.map((function(e){return JSON.stringify(e)+": "+s.main[e].toString()})).join(",")+"}))(self);",new window.Blob([u],{type:"text/javascript"}));return t.bare||(t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),(c=new window.Worker(t)).objectURL=t),c}},70:function(e,t){function n(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}n.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!==this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},n.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},n.prototype.getNearestKeyframe=function(e){var t;return null==this.keyframesIndex?null:(t=this.keyframesIndex,{index:e=this._search(t.times,e),milliseconds:t.times[e],fileposition:t.filepositions[e]})},n.prototype._search=function(e,t){var n,i=0,r=e.length-1,a=0,o=r;for(t<e[0]&&(i=0,a=o+1);a<=o;){if((n=a+Math.floor((o-a)/2))===r||t>=e[n]&&t<e[n+1]){i=n;break}e[n]<t?a=n+1:o=n-1}return i},t.Z=n},779:function(e,t,n){n.d(t,{J1:function(){return o},Vn:function(){return a},Wk:function(){return i},Yy:function(){return r}});var i=function(e,t,n,i,r){this.dts=e,this.pts=t,this.duration=n,this.originalDts=i,this.isSyncPoint=r,this.fileposition=null},r=(u.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},u),a=(l.prototype.clear=function(){this._list=[]},l.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},l.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t,n=this._list,i=0,r=n.length-1,a=0,o=r;for(e<n[0].dts&&(i=0,a=o+1);a<=o;){if((t=a+Math.floor((o-a)/2))===r||e>=n[t].dts&&e<n[t+1].dts){i=t;break}n[t].dts<e?a=t+1:o=t-1}return this._list[i]},l),o=(Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),s.prototype.isEmpty=function(){return 0===this._list.length},s.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},s.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var n,i=t.length-1,r=0,a=i,o=0;if(e<t[0].originalBeginDts)return-1;for(;r<=a;){if((n=r+Math.floor((a-r)/2))===i||e>t[n].lastSample.originalDts&&e<t[n+1].originalBeginDts){o=n;break}t[n].originalBeginDts<e?r=n+1:a=n-1}return o},s.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},s.prototype.append=function(e){var t=this._list,n=this._lastAppendLocation,i=0;-1!==n&&n<t.length&&e.originalBeginDts>=t[n].lastSample.originalDts&&(n===t.length-1||n<t.length-1&&e.originalBeginDts<t[n+1].originalBeginDts)?i=n+1:0<t.length&&(i=this._searchNearestSegmentBefore(e.originalBeginDts)+1),this._lastAppendLocation=i,this._list.splice(i,0,e)},s.prototype.getLastSegmentBefore=function(e){return 0<=(e=this._searchNearestSegmentBefore(e))?this._list[e]:null},s.prototype.getLastSampleBefore=function(e){return null!=(e=this.getLastSegmentBefore(e))?e.lastSample:null},s.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&0<t;)n=this._list[--t].syncPoints;return 0<n.length?n[n.length-1]:null},s);function s(e){this._type=e,this._list=[],this._lastAppendLocation=-1}function l(){this._list=[]}function u(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}},131:function(e,t,n){n.d(t,{Z:function(){return D}}),t=n(393);var i=n.n(t),r=n(240),a=n(340),o=n(70);function s(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!=(192&i[++t]))return;return 1}}function l(e){for(var t,n=[],i=e,r=0,a=e.length;r<a;){if(i[r]<128)n.push(String.fromCharCode(i[r]));else{if(!(i[r]<192))if(i[r]<224){if(s(i,r,1)&&128<=(t=(31&i[r])<<6|63&i[r+1])){n.push(String.fromCharCode(65535&t)),r+=2;continue}}else if(i[r]<240){if(s(i,r,2)&&2048<=(t=(15&i[r])<<12|(63&i[r+1])<<6|63&i[r+2])&&55296!=(63488&t)){n.push(String.fromCharCode(65535&t)),r+=3;continue}}else if(i[r]<248&&s(i,r,3)&&65536<(t=(7&i[r])<<18|(63&i[r+1])<<12|(63&i[r+2])<<6|63&i[r+3])&&t<1114112){t-=65536,n.push(String.fromCharCode(t>>>10|55296)),n.push(String.fromCharCode(1023&t|56320)),r+=4;continue}n.push(String.fromCharCode(65533))}++r}return n.join("")}var u=n(996),c=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),h=(E.parseScriptData=function(e,t,n){var i={};try{var a=E.parseValue(e,t,n),o=E.parseValue(e,t+a.size,n-a.size);i[a.data]=o.data}catch(e){r.Z.e("AMF",e.toString())}return i},E.parseObject=function(e,t,n){if(n<3)throw new u.rT("Data not enough when parse ScriptDataObject");var i=E.parseString(e,t,n);return t=(e=E.parseValue(e,t+i.size,n-i.size)).objectEnd,{data:{name:i.data,value:e.data},size:i.size+e.size,objectEnd:t}},E.parseVariable=function(e,t,n){return E.parseObject(e,t,n)},E.parseString=function(e,t,n){if(n<2)throw new u.rT("Data not enough when parse String");return{data:0<(n=new DataView(e,t,n).getUint16(0,!c))?l(new Uint8Array(e,t+2,n)):"",size:2+n}},E.parseLongString=function(e,t,n){if(n<4)throw new u.rT("Data not enough when parse LongString");return{data:0<(n=new DataView(e,t,n).getUint32(0,!c))?l(new Uint8Array(e,t+4,n)):"",size:4+n}},E.parseDate=function(e,t,n){if(n<10)throw new u.rT("Data size invalid when parse Date");return t=(e=new DataView(e,t,n)).getFloat64(0,!c),n=e.getInt16(8,!c),{data:new Date(t+=60*n*1e3),size:10}},E.parseValue=function(e,t,n){if(n<1)throw new u.rT("Data not enough when parse Value");var i=new DataView(e,t,n),a=1,o=i.getUint8(0),s=!1;try{switch(o){case 0:h=i.getFloat64(1,!c),a+=8;break;case 1:h=!!i.getUint8(1),a+=1;break;case 2:var l=E.parseString(e,t+1,n-1),h=l.data;a+=l.size;break;case 3:h={};var d=0;for(9==(16777215&i.getUint32(n-4,!c))&&(d=3);a<n-4;){var f=E.parseObject(e,t+a,n-a-d);if(f.objectEnd)break;h[f.data.name]=f.data.value,a+=f.size}a<=n-3&&9==(16777215&i.getUint32(a-1,!c))&&(a+=3);break;case 8:for(h={},a+=4,d=0,9==(16777215&i.getUint32(n-4,!c))&&(d=3);a<n-8;){var p=E.parseVariable(e,t+a,n-a-d);if(p.objectEnd)break;h[p.data.name]=p.data.value,a+=p.size}a<=n-3&&9==(16777215&i.getUint32(a-1,!c))&&(a+=3);break;case 9:a=1,s=!(h=void 0);break;case 10:h=[];var m=i.getUint32(1,!c);a+=4;for(var g=0;g<m;g++){var _=E.parseValue(e,t+a,n-a);h.push(_.data),a+=_.size}break;case 11:var y=E.parseDate(e,t+1,n-1);h=y.data,a+=y.size;break;case 12:var v=E.parseString(e,t+1,n-1);h=v.data,a+=v.size;break;default:a=n,r.Z.w("AMF","Unsupported AMF value type "+o)}}catch(e){r.Z.e("AMF",e.toString())}return{data:h,size:a,objectEnd:s}},E),d=(A.prototype.destroy=function(){this._buffer=null},A.prototype._fillCurrentWord=function(){if((e=this._total_bytes-this._buffer_index)<=0)throw new u.rT("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,e),t=new Uint8Array(4);t.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(t.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e},A.prototype.readBits=function(e){if(32<e)throw new u.OC("ExpGolomb: readBits() bits exceeded max 32bits!");var t,n;return e<=this._current_word_bits_left?(t=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t):(t=this._current_word_bits_left?this._current_word:0,t>>>=32-this._current_word_bits_left,e-=this._current_word_bits_left,this._fillCurrentWord(),e=Math.min(e,this._current_word_bits_left),n=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t<<e|n)},A.prototype.readBool=function(){return 1===this.readBits(1)},A.prototype.readByte=function(){return this.readBits(8)},A.prototype._skipLeadingZero=function(){for(var e=0;e<this._current_word_bits_left;e++)if(this._current_word&2147483648>>>e)return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},A.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},A.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},A),f=(v._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},v.parseSPS=function(e){e=v._ebsp2rbsp(e);var t=new d(e),n=(t.readByte(),e=t.readByte(),t.readByte(),t.readByte()),i=(t.readUEG(),v.getProfileString(e)),r=(n=v.getLevelString(n),1),a=420,o=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(3===(r=t.readUEG())&&t.readBits(1),r<=3&&(a=[0,420,422,444][r]),o=t.readUEG()+8,t.readUEG(),t.readBits(1),t.readBool()))for(var s=3!==r?8:12,l=0;l<s;l++)t.readBool()&&v._skipScalingList(t,l<6?16:64);if(t.readUEG(),0===(e=t.readUEG()))t.readUEG();else if(1===e){t.readBits(1),t.readSEG(),t.readSEG();var u=t.readUEG();for(l=0;l<u;l++)t.readSEG()}e=t.readUEG();var c=(t.readBits(1),t.readUEG()),h=t.readUEG(),f=t.readBits(1),p=(0===f&&t.readBits(1),t.readBits(1),0),m=0,g=0,_=0,y=(t.readBool()&&(p=t.readUEG(),m=t.readUEG(),g=t.readUEG(),_=t.readUEG()),1),A=1,E=0,b=!0,w=0,T=0,S=(t.readBool()&&(t.readBool()&&(0<(R=t.readByte())&&R<16?(y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][R-1],A=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][R-1]):255===R&&(y=t.readByte()<<8|t.readByte(),A=t.readByte()<<8|t.readByte())),t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(4),t.readBool())&&t.readBits(24),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool())&&(R=t.readBits(32),S=t.readBits(32),b=t.readBool(),E=(w=S)/(T=2*R)),1),R=(1===y&&1===A||(S=y/A),0),I=0===r?(R=1,2-f):(R=3===r?1:2,(1===r?2:1)*(2-f));return r=16*(c+1),c=16*(h+1)*(2-f),r-=(p+m)*R,c-=(g+_)*I,h=Math.ceil(r*S),t.destroy(),t=null,{profile_string:i,level_string:n,bit_depth:o,ref_frames:e,chroma_format:a,chroma_format_string:v.getChromaFormatString(a),frame_rate:{fixed:b,fps:E,fps_den:T,fps_num:w},sar_ratio:{width:y,height:A},codec_size:{width:r,height:c},present_size:{width:h,height:c}}},v._skipScalingList=function(e,t){for(var n=8,i=8,r=0;r<t;r++)n=0===(i=0!==i?(n+e.readSEG()+256)%256:i)?n:i},v.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},v.getLevelString=function(e){return(e/10).toFixed(1)},v.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},v),p=(y.parseSPS=function(e){e=f._ebsp2rbsp(e);var t=new d(e),n=(e={},t.readBits(16),t.readBits(4),t.readBits(3)),i=(t.readBits(1),y._hvcc_parse_ptl(t,e,n),t.readUEG(),0),r=t.readUEG(),a=(3==r&&(i=t.readBits(1)),e.sar_width=e.sar_height=1,e.conf_win_left_offset=e.conf_win_right_offset=e.conf_win_top_offset=e.conf_win_bottom_offset=0,e.def_disp_win_left_offset=e.def_disp_win_right_offset=e.def_disp_win_top_offset=e.def_disp_win_bottom_offset=0,t.readUEG()),o=t.readUEG(),s=(t.readBits(1)&&(e.conf_win_left_offset=t.readUEG(),e.conf_win_right_offset=t.readUEG(),e.conf_win_top_offset=t.readUEG(),e.conf_win_bottom_offset=t.readUEG(),1===e.default_display_window_flag)&&(e.conf_win_left_offset,e.def_disp_win_left_offset,e.conf_win_right_offset,e.def_disp_win_right_offset,e.conf_win_top_offset,e.def_disp_win_top_offset,e.conf_win_bottom_offset,e.def_disp_win_bottom_offset),t.readUEG()+8);t.readUEG();for(var l=t.readUEG(),u=t.readBits(1)?0:n;u<=n;u++)y._skip_sub_layer_ordering_info(t);t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBits(1)&&t.readBits(1)&&y._skip_scaling_list_data(t),t.readBits(1),t.readBits(1),t.readBits(1)&&(t.readBits(4),t.readBits(4),t.readUEG(),t.readUEG(),t.readBits(1));var c=[],h=t.readUEG();for(u=0;u<h;u++){var p=y._parse_rps(t,u,h,c);if(p<0)return p}if(t.readBits(1)){var m=t.readUEG();for(u=0;u<m;u++){var g=Math.min(l+4,16);if(32<g){for(var _=g/32,v=g%32,A=0;A<_;A++)t.readBits(32);t.readBits(v)}else t.readBits(g);t.readBits(1)}}t.readBits(1),t.readBits(1),t.readBits(1)&&y._hvcc_parse_vui(t,e,n);var E=y.getProfileString(e.profile_idc),b=y.getLevelString(e.level_idc),w=1;return 1===e.sar_width&&1===e.sar_height||(w=e.sar_width/e.sar_height),a-=(1!==r&&2!=r||0!==i?1:2)*(e.conf_win_left_offset+e.conf_win_right_offset),o-=(1===r&&0===i?2:1)*(e.conf_win_top_offset+e.conf_win_bottom_offset),i=Math.ceil(a*w),t.destroy(),t=null,{profile_string:E,level_string:b,profile_idc:e.profile_idc,level_idc:e.level_idc,bit_depth:s,ref_frames:1,chroma_format:r,chroma_format_string:y.getChromaFormatString(r),frame_rate:{fixed:e.fps_fixed,fps:e.fps,fps_den:e.fps_den,fps_num:e.fps_num},sar_ratio:{width:e.sar_width,height:e.sar_height},codec_size:{width:a,height:o},present_size:{width:i,height:o}}},y._hvcc_parse_ptl=function(e,t,n){e.readBits(2);var i=e.readBits(1),r=e.readBits(5),a=(e.readBits(32),e.readBits(32),e.readBits(16),e.readByte());void 0===t.tier_flag||void 0===t.level_idc||t.tier_flag<i?t.level_idc=a:t.level_idc=Math.max(t.level_idc,a),t.profile_idc=Math.max(void 0===t.profile_idc?0:t.profile_idc,r);for(var o=[],s=[],l=0;l<n;l++)o.push(e.readBits(1)),s.push(e.readBits(1));if(0<n)for(l=n;l<8;l++)e.readBits(2);for(l=0;l<n;l++)o[l]&&(e.readBits(32),e.readBits(32),e.readBits(24)),s[l]&&e.readByte()},y._parse_rps=function(e,t,n,i){if(t&&e.readBits(1)){if(n<=t)return-1;e.readBits(1),e.readUEG();for(var r=i[t]=0;r<=i[t-1];r++){var a=0,o=e.readBits(1);o||(a=e.readBits(1)),(o||a)&&i[t]++}}else{var s=e.readUEG(),l=e.readUEG();for(i[t]=s+l,r=0;r<s;r++)e.readUEG(),e.readBits(1);for(r=0;r<l;r++)e.readUEG(),e.readBits(1)}return 0},y._hvcc_parse_vui=function(e,t,n){e.readBits(1)&&255==e.readByte()&&(t.sar_width=e.readBits(16),t.sar_height=e.readBits(16)),e.readBits(1)&&e.readBits(1),e.readBits(1)&&(e.readBits(4),e.readBits(1))&&e.readBits(24),e.readBits(1)&&(e.readUEG(),e.readUEG()),e.readBits(3),t.default_display_window_flag=e.readBits(1),t.default_display_window_flag&&(t.def_disp_win_left_offset=e.readUEG(),t.def_disp_win_right_offset=e.readUEG(),t.def_disp_win_top_offset=e.readUEG(),t.def_disp_win_bottom_offset=e.readUEG()),e.readBits(1)&&(y._skip_timing_info(e,t),e.readBits(1))&&y._skip_hrd_parameters(e,t,1,n),e.readBits(1)&&(e.readBits(3),e.readUEG(),e.readUEG(),e.readUEG(),e.readUEG(),e.readUEG())},y._skip_sub_layer_ordering_info=function(e,t){e.readUEG(),e.readUEG(),e.readUEG()},y._skip_scaling_list_data=function(e){for(var t=0;t<4;t++)for(var n=0;n<(3==t?2:6);n++)if(e.readBits(1)){var i=Math.min(64,1<<4+(t<<1));1<t&&e.readSEG();for(var r=0;r<i;r++)e.readSEG()}else e.readUEG()},y._skip_sub_layer_hrd_parameters=function(e,t,n){for(var i=0;i<=t;i++)e.readUEG(),e.readUEG(),n&&(e.readUEG(),e.readUEG()),e.readBits(1)},y._skip_timing_info=function(e,t){t.fps_den=e.readBits(32),t.fps_num=e.readBits(32),0<t.fps_den&&(t.fps=t.fps_num/t.fps_den);var n=0;e.readBits(1)&&0<=(n=e.readUEG())&&(t.fps/=n+1)},y._skip_hrd_parameters=function(e,t,n){var i=0,r=0;t&&(i=e.readBits(1),r=e.readBits(1),i||r)&&((t=e.readBits(1))&&e.readBits(19),e.readByte(),t&&e.readBits(4),e.readBits(15));for(var a=0;a<=n;a++){var o=0,s=0,l=0,u=e.readBits(1);(l=(hvcc.fps_fixed=u)?l:e.readBits(1))?e.readUEG():s=e.readBits(1),s||(o=e.readUEG(e)),i&&y._skip_sub_layer_hrd_parameters(e,o,0),r&&y._skip_sub_layer_hrd_parameters(e,o,0)}},y.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},y.getLevelString=function(e){return(e/30).toFixed(1)},y.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},y),m=n(61),g=(_.parseOBUs=function(e){for(var t=null,n=0;n<e.byteLength;){e[n];var i=(120&e[n])>>3,r=!!(4&e[n]),a=!!(2&e[n]),o=(e[n],n+=1,r&&(n+=1),Number.POSITIVE_INFINITY);if(a){o=0;for(var s=0;o|=(127&e[n])<<7*s,128&e[n+=1];s++);}1==i&&(t=_.parseSeuqneceHeader(e.subarray(n,n+o))),n+=o}return t},_.parseSeuqneceHeader=function(e){var t=new d(e),n=(e=t.readBits(3),!0),i=0,r=0,a=[];if(t.readBool(),A=t.readBool())a.push({operating_point_idc:0,level:t.readBits(5),tier:0});else{if(t.readBool()){var o=t.readBits(32),s=t.readBits(32);if(g=t.readBool()){for(var l=0;0===t.readBits(1);)l+=1;32<=l||t.readBits(l)}i=s,r=o,n=g,t.readBool()&&(t.readBits(5),t.readBits(32),t.readBits(5),t.readBits(5))}for(var u=t.readBool(),c=t.readBits(5),h=0;h<=c;h++){var f=t.readBits(12),p=t.readBits(5),m=7<p?t.readBits(1):0;a.push({operating_point_idc:f,level:p,tier:m}),!u||t.readBool()&&t.readBits(4)}}o=(s=a[0]).level;var g=s.tier,y=(s=t.readBits(4),t.readBits(4)),v=(s=t.readBits(s+1)+1,y=t.readBits(y+1)+1,!1),A=((v=A?v:t.readBool())&&(t.readBits(4),t.readBits(4)),t.readBool(),t.readBool(),t.readBool(),A||(t.readBool(),t.readBool(),t.readBool(),t.readBool(),(v=t.readBool())&&(t.readBool(),t.readBool()),!t.readBool()&&!t.readBits(1)||t.readBool()||t.readBits(1),v&&t.readBits(3)),t.readBool(),t.readBool(),t.readBool(),t.readBool()),E=(v=8,v=2===e&&A?t.readBool()?12:10:A?10:8,A=!1,1!==e&&(A=t.readBool()),t.readBool()&&(t.readBits(8),t.readBits(8),t.readBits(8)),1),b=1;return A?(t.readBits(1),b=E=1):(t.readBits(1),0==e?b=E=1:1==e?b=E=0:12==v?t.readBits(1)&&t.readBits(1):(E=1,b=0),E&&b&&t.readBits(2),t.readBits(1)),t.readBool(),t.destroy(),t=null,{codec_mimetype:"av01.".concat(e,".").concat(_.getLevelString(o,g),".").concat(v.toString(10).padStart(2,"0")),level:o,tier:g,level_string:_.getLevelString(o,g),profile_idc:e,profile_string:"".concat(e),bit_depth:v,ref_frames:1,chroma_format:_.getChromaFormat(A,E,b),chroma_format_string:_.getChromaFormatString(A,E,b),frame_rate:{fixed:n,fps:i/r,fps_den:r,fps_num:i},sar_ratio:{width:1,height:1},codec_size:{width:s,height:y},present_size:{width:+s,height:y}}},_.getLevelString=function(e,t){return"".concat(e.toString(10).padStart(2,"0")).concat(0===t?"M":"H")},_.getChromaFormat=function(e,t,n){return e?0:0===t&&0===n?3:1===t&&0===n?2:1===t&&1===n?1:Number.NaN},_.getChromaFormatString=function(e,t,n){return e?"4:0:0":0===t&&0===n?"4:4:4":1===t&&0===n?"4:2:2":1===t&&1===n?"4:2:0":"Unknown"},_);function _(){}function y(){}function v(){}function A(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function E(){}T.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},T.probe=function(e){var t,n;return(e=new Uint8Array(e)).byteLength<4||70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3]||(t=(4&e[4])>>>2!=0,n=!!(1&e[4]),(e=e[5]<<24|e[6]<<16|e[7]<<8|e[8])<9)?{match:!1}:{match:!0,consumed:e,dataOffset:e,hasAudioTrack:t,hasVideoTrack:n}},T.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(T.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onDemuxData",{get:function(){return this._onDemuxData},set:function(e){this._onDemuxData=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),T.prototype.resetMediaInfo=function(){this._mediaInfo=new o.Z},T.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},T.prototype.parseChunks=function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new u.rT("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0,i=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;n=T.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+n!==this._dataOffset&&r.Z.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(a=new DataView(e,n)).getUint32(0,!i)&&r.Z.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4);n<e.byteLength;){this._dispatch=!0;var a=new DataView(e,n);if(n+11+4>e.byteLength)break;var o=a.getUint8(0),s=16777215&a.getUint32(0,!i);if(n+11+s+4>e.byteLength)break;if(8===o||9===o||18===o){var l=a.getUint8(4),c=a.getUint8(5),h=a.getUint8(6)|c<<8|l<<16|a.getUint8(7)<<24,d=(!!(16777215&a.getUint32(7,!i))&&r.Z.w(this.TAG,"Meet tag which has StreamID != 0!"),n+11);switch(o){case 8:this._parseAudioData(e,d,s,h);break;case 9:this._parseVideoData(e,d,s,h,t+n);break;case 18:this._parseScriptData(e,d,s)}(c=a.getUint32(11+s,!i))!==11+s&&r.Z.w(this.TAG,"Invalid PrevTagSize ".concat(c))}else r.Z.w(this.TAG,"Unsupported tag type ".concat(o,", skipped"));n+=11+s+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),n},T.prototype._parseScriptData=function(e,t,n){if((e=h.parseScriptData(e,t,n)).hasOwnProperty("onMetaData")){if(null==e.onMetaData||"object"!=typeof e.onMetaData)return void r.Z.w(this.TAG,"Invalid onMetaData structure!");var i;this._metadata&&r.Z.w(this.TAG,"Found another onMetaData tag!"),this._metadata=e,t=this._metadata.onMetaData,this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},t)),"boolean"==typeof t.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=t.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"false"===t.detectAudio&&(this._hasAudioFlagOverrided=!1,this._hasAudio=!1,this._mediaInfo.hasAudio=!1),"boolean"==typeof t.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=t.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof t.audiodatarate&&(this._mediaInfo.audioDataRate=t.audiodatarate),"number"==typeof t.videodatarate&&(this._mediaInfo.videoDataRate=t.videodatarate),"number"==typeof t.width&&(this._mediaInfo.width=t.width),"number"==typeof t.height&&(this._mediaInfo.height=t.height),"number"==typeof t.duration?this._durationOverrided||(n=Math.floor(t.duration*this._timescale),this._duration=n,this._mediaInfo.duration=n):this._mediaInfo.duration=0,"number"==typeof t.framerate&&0<(n=Math.floor(1e3*t.framerate))&&(i=n/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=i,this._referenceFrameRate.fps_num=n,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=i),"object"==typeof t.keyframes?(this._mediaInfo.hasKeyframesIndex=!0,n=t.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(n),t.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=t,r.Z.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(e).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},e))},T.prototype._parseKeyframesIndex=function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var r=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(r),n.push(e.filepositions[i])}return{times:t,filepositions:n}},T.prototype._parseAudioData=function(e,t,n,i){if(n<=1)r.Z.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var a=(c=new DataView(e,t,n).getUint8(0))>>>4;if(2==a||10==a){var o=(12&c)>>>2;if(0<=o&&o<=4){var s,l,u=this._flvSoundRateTable[o],c=1&c,h=this._audioMetadata,d=this._audioTrack;if(h||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(h=this._audioMetadata={}).type="audio",h.id=d.id,h.timescale=this._timescale,h.duration=this._duration,h.audioSampleRate=u,h.channelCount=0==c?1:2),10==a)null!=(u=this._parseAACAudioData(e,t+1,n-1,this._timestampBase+i))&&(0===u.packetType?(h.config&&r.Z.w(this.TAG,"Found another AudioSpecificConfig!"),l=u.data,h.audioSampleRate=l.samplingRate,h.channelCount=l.channelCount,h.codec=l.codec,h.originalCodec=l.originalCodec,h.config=l.config,h.audioconfig=l.audioconfig,h.samplingIndex=l.samplingIndex,h.refSampleDuration=1024/h.audioSampleRate*h.timescale,r.Z.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",h),(s=this._mediaInfo).audioCodec=h.originalCodec,s.audioSampleRate=h.audioSampleRate,s.audioChannelCount=h.channelCount,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)):1===u.packetType?(f=this._timestampBase+i,c={unit:u.data,length:u.data.byteLength,dts:f,pts:f},d.samples.push(c),d.length+=u.data.length):r.Z.e(this.TAG,"Flv: Unsupported AAC data type ".concat(u.packetType)));else if(2==a){if(!h.codec){if(null==(l=this._parseMP3AudioData(e,t+1,n-1,!0)))return;h.audioSampleRate=l.samplingRate,h.channelCount=l.channelCount,h.codec=l.codec,h.originalCodec=l.originalCodec,h.refSampleDuration=1152/h.audioSampleRate*h.timescale,r.Z.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",h),(s=this._mediaInfo).audioCodec=h.codec,s.audioSampleRate=h.audioSampleRate,s.audioChannelCount=h.channelCount,s.audioDataRate=l.bitRate,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)}var f;null!=(c=this._parseMP3AudioData(e,t+1,n-1,!1))&&(f=this._timestampBase+i,u={unit:c,length:c.byteLength,dts:f,pts:f},d.samples.push(u),d.length+=c.length)}}else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+o)}else this._onError(m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+a)}},T.prototype._parseAACAudioData=function(e,t,n,i){var a,o;if(!(n<=1))return a={},o=new Uint8Array(e,t,n),a.packetType=o[0],0===o[0]?a.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):(a.data=o.subarray(1),this._onlyDemuxer&&(e=this._constructAdtsHeader(this._audioMetadata,a.data),t=this._concatUint8(new Uint8Array(e),a.data),this._onDemuxData({type:"audio",data:{data:t,pts:i}}))),a;r.Z.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},T.prototype._constructAdtsHeader=function(e,t){var n=e.audioSampleRate,i=e.channelCount;return e=e.audioconfig,n=this._doubleCheckSampleRateIndex(e,n),(e=new Uint8Array(7))[0]=255,e[1]=240,e[1]=1|e[1],e[2]=64,e[2]=e[2]|60&n<<2,e[2]=e[2]|1&i>>2,e[3]=192&i<<6,n=t.byteLength+7,e[3]=e[3]|3&n>>11,e[4]=255&n>>3,e[5]=224&n<<5,e[5]=31|e[5],e[6]=252,e},T.prototype._doubleCheckSampleRateIndex=function(e,t){return(e=(7&e[0])<<1|e[1]>>>7)!==t?e:t},T.prototype._parseAACAudioSpecificConfig=function(e,t,n){e=new Uint8Array(e,t,n),t=null,n=0;var i,r,a=null;if(n=i=e[0]>>>3,(r=(7&e[0])<<1|e[1]>>>7)<0||r>=this._mpegSamplingRates.length)this._onError(m.Z.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var o,s=this._mpegSamplingRates[r],l=(120&e[1])>>>3;if(!(l<0||8<=l))return 5===n&&(a=(7&e[1])<<1|e[2]>>>7,e[2]),-1!==(o=self.navigator.userAgent.toLowerCase()).indexOf("firefox")?a=6<=r?(n=5,t=new Array(4),r-3):(n=2,t=new Array(2),r):-1!==o.indexOf("android")?(n=2,t=new Array(2),a=r):(n=5,a=r,t=new Array(4),6<=r?a=r-3:1==l&&(n=2,t=new Array(2),a=r)),t[0]=n<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&l)<<3,5===n&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),{config:t,audioconfig:[e[0],e[1]],samplingRate:s,channelCount:l,samplingIndex:r,codec:"mp4a.40."+n,originalCodec:"mp4a.40."+i};this._onError(m.Z.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},T.prototype._parseMP3AudioData=function(e,t,n,i){if(!(n<4)){if(this._littleEndian,e=new Uint8Array(e,t,n),t=null,i){if(255!==e[0])return;n=e[1]>>>3&3,i=(6&e[1])>>1;var a=(240&e[2])>>>4,o=(12&e[2])>>>2,s=3&~(e[3]>>>6)?2:1,l=0,u=0;switch(n){case 0:l=this._mpegAudioV25SampleRateTable[o];break;case 2:l=this._mpegAudioV20SampleRateTable[o];break;case 3:l=this._mpegAudioV10SampleRateTable[o]}switch(i){case 1:a<this._mpegAudioL3BitRateTable.length&&(u=this._mpegAudioL3BitRateTable[a]);break;case 2:a<this._mpegAudioL2BitRateTable.length&&(u=this._mpegAudioL2BitRateTable[a]);break;case 3:a<this._mpegAudioL1BitRateTable.length&&(u=this._mpegAudioL1BitRateTable[a])}t={bitRate:u,samplingRate:l,channelCount:s,codec:"mp3",originalCodec:"mp3"}}else t=e;return t}r.Z.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},T.prototype._parseVideoData=function(e,t,n,i,a){var o,s,l,u;n<=1?r.Z.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(s=(112&(o=new Uint8Array(e,t,n)[0]))>>>4,128&o?(l=15&o,"hvc1"===(u=String.fromCharCode.apply(String,new Uint8Array(e,t,n).slice(1,5)))?this._parseHVCVideoPacket(e,t+5,n-5,i,a,s,l):"av01"!==u?this._onError(m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(u)):this._parseEnhancedAV1VideoPacket(e,t+5,n-5,i,a,s,l)):7==(u=15&o)?this._parseAVCVideoPacket(e,t+1,n-1,i,a,s):12!=u?this._onError(m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(u)):this._parseHVCVideoPacket(e,t+1,n-1,i,a,s))},T.prototype._parseAVCVideoPacket=function(e,t,n,i,a,o){if(n<4)r.Z.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var s=this._littleEndian,l=(u=new DataView(e,t,n)).getUint8(0),u=(16777215&u.getUint32(0,!s))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseAVCVideoData(e,t+4,n-4,i,a,o,u);else if(2!==l)return void this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(l))}},T.prototype._parseAVCDecoderConfigurationRecord=function(e,t,n){if(n<7)r.Z.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,a=this._videoTrack,o=this._littleEndian,s=new DataView(e,t,n),l=(i?void 0!==i.avcc&&r.Z.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=a.id,i.timescale=this._timescale,i.duration=this._duration),a=s.getUint8(0),s.getUint8(1));if(s.getUint8(2),s.getUint8(3),1===a&&0!==l)if(this._naluLengthSize=1+(3&s.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var u=31&s.getUint8(5);if(0!=u){1<u&&r.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(u));for(var c=6,h=0;h<u;h++){var d=s.getUint16(c,!o);if(c+=2,0!==d){var p=new Uint8Array(e,t+c,d),g=(c+=d,f.parseSPS(p));if(0===h){i.codecWidth=g.codec_size.width,i.codecHeight=g.codec_size.height,i.presentWidth=g.present_size.width,i.presentHeight=g.present_size.height,i.profile=g.profile_string,i.level=g.level_string,i.bitDepth=g.bit_depth,i.chromaFormat=g.chroma_format,i.sarRatio=g.sar_ratio,i.frameRate=g.frame_rate,!1!==g.frame_rate.fixed&&0!==g.frame_rate.fps_num&&0!==g.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var _=i.frameRate.fps_den,y=i.frameRate.fps_num;i.refSampleDuration=i.timescale*(_/y);for(var v=p.subarray(1,4),A="avc1.",E=0;E<3;E++){var b=v[E].toString(16);A+=b=b.length<2?"0"+b:b}i.codec=A,(_=this._mediaInfo).width=i.codecWidth,_.height=i.codecHeight,_.fps=i.frameRate.fps,_.profile=i.profile,_.level=i.level,_.refFrames=g.ref_frames,_.chromaFormat=g.chroma_format_string,_.sarNum=i.sarRatio.width,_.sarDen=i.sarRatio.height,_.videoCodec=A,_.hasAudio?null!=_.audioCodec&&(_.mimeType='video/x-flv; codecs="'+_.videoCodec+","+_.audioCodec+'"'):_.mimeType='video/x-flv; codecs="'+_.videoCodec+'"',_.isComplete()&&this._onMediaInfo(_)}}}var w=s.getUint8(c);if(0!==w){for(1<w&&r.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(w)),c++,h=0;h<w;h++)d=s.getUint16(c,!o),c+=2,0!==d&&(c+=d);i.avcc=new Uint8Array(n),i.avcc.set(new Uint8Array(e,t,n),0),r.Z.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(m.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},T.prototype._parseAVCVideoData=function(e,t,n,i,a,o,s){for(var l=this._littleEndian,u=new DataView(e,t,n),c=[],h=0,d=0,f=this._naluLengthSize,p=this._timestampBase+i,m=1===o;d<n;){if(n<=d+4){r.Z.w(this.TAG,"Malformed Nalu near timestamp ".concat(p,", offset = ").concat(d,", dataSize = ").concat(n));break}var g=u.getUint32(d,!l);if(3===f&&(g>>>=8),n-f<g)return void r.Z.w(this.TAG,"Malformed Nalus near timestamp ".concat(p,", NaluSize > DataSize!"));var _=31&u.getUint8(d+f),y=(5==_&&(m=!0),new Uint8Array(e,t+d,f+g));if(6==_&&5===u.getUint8(d+f+1)){for(var v=0,A=0;255==y[5+ ++A];)v+=255;for(var E=6+--A,b=y[E]+v,w="",T=1;T<=16;T++)w+=y[++E];for(var S=b-16,R=0,I=new Uint8Array(S);I[R]=y[++E],++R<=S;);this._onSeiInfo&&this._onSeiInfo({unitType:_,data:I,pts:(p+s)/1e3,uuid:w})}c.push({type:_,data:y}),h+=y.byteLength,d+=f+g}c.length&&(i=this._videoTrack,o={units:c,length:h,isKeyframe:m,dts:p,cts:s,pts:p+s},m&&(o.fileposition=a),i.samples.push(o),i.length+=h)},T.prototype._parseHVCVideoPacket=function(e,t,n,i,a,o){if(n<4)r.Z.w(this.TAG,"Flv: Invalid HVC packet, missing HVCPacketType or/and CompositionTime");else{var s=this._littleEndian,l=(u=new DataView(e,t,n)).getUint8(0),u=(16777215&u.getUint32(0,!s))<<8>>8;if(0===l)this._parseHVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseHVCVideoData(e,t+4,n-4,i,a,o,u);else if(2!==l)return void this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(l))}},T.prototype._parseHVCDecoderConfigurationRecord=function(e,t,n){if(n<23)r.Z.w(this.TAG,"Flv: Invalid HVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,a=this._videoTrack,o=this._littleEndian,s=new DataView(e,t,n),l=(i?void 0!==i.hvcc&&r.Z.w(this.TAG,"Found another HVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=a.id,i.timescale=this._timescale,i.duration=this._duration),a=s.getUint8(0),31&s.getUint8(1));if(1===a&&0!=l)if(this._naluLengthSize=1+(3&s.getUint8(21)),3===this._naluLengthSize||4===this._naluLengthSize){for(var u,c,h,d,f=s.getUint8(22),g=23,_=[],y=[],v=[],A=0;A<f;A++){var E=63&s.getUint8(g++),b=s.getUint16(g,!o);if(g+=2,0!==b){switch(E){case 32:u+=b;break;case 33:c+=b;break;case 34:h+=b}for(var w=0;w<b;w++){var T,S,R=s.getUint16(g,!o);g+=2,0!==R&&(33==E?(T=new Uint8Array(e,t+g,R),_.push(T)):32==E?(T=new Uint8Array(e,t+g,R),y.push(T)):34==E&&(S=new Uint8Array(e,t+g,R),v.push(S)),g+=R)}}}this.firstData=this._concatUint8(new Uint8Array([0,0,0,1]),y[0],new Uint8Array([0,0,0,1]),_[0],new Uint8Array([0,0,0,1]),v[0]),0!==u?(1<u&&r.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: VPS Count = ".concat(u)),0!==c?(1<c&&r.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: SPS Count = ".concat(c)),0!==h?(1<h&&r.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: PPS Count = ".concat(c)),a=p.parseSPS(_[0]),i.codecWidth=a.codec_size.width,i.codecHeight=a.codec_size.height,i.presentWidth=a.present_size.width,i.presentHeight=a.present_size.height,i.profile=a.profile_string,i.level=a.level_string,i.profile_idc=a.profile_idc,i.level_idc=a.level_idc,i.bitDepth=a.bit_depth,i.chromaFormat=a.chroma_format,i.sarRatio=a.sar_ratio,i.frameRate=a.frame_rate,!1!==a.frame_rate.fixed&&0!==a.frame_rate.fps_num&&0!==a.frame_rate.fps_den&&a.frame_rate.fixed||(i.frameRate=this._referenceFrameRate),l=i.frameRate.fps_den,d=i.frameRate.fps_num,i.refSampleDuration=i.timescale*(l/d),l="hvc1."+i.profile_idc+".1.L"+i.level_idc+".B0",i.codec=l,(d=this._mediaInfo).width=i.codecWidth,d.height=i.codecHeight,d.fps=i.frameRate.fps||25,d.profile=i.profile,d.level=i.level,d.refFrames=a.ref_frames,d.chromaFormat=a.chroma_format_string,d.sarNum=i.sarRatio.width,d.sarDen=i.sarRatio.height,d.videoCodec=l,d.hasAudio?null!=d.audioCodec&&(d.mimeType='video/x-flv; codecs="'+d.videoCodec+","+d.audioCodec+'"'):d.mimeType='video/x-flv; codecs="'+d.videoCodec+'"',d.isComplete()&&this._onMediaInfo(d),i.hvcc=new Uint8Array(n),i.hvcc.set(new Uint8Array(e,t,n),0),r.Z.v(this.TAG,"Parsed HVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No PPS")):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No SPS")):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No VPS")}else this._onError(m.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord")}},T.prototype._parseHVCVideoData=function(e,t,n,i,a,o,s){for(var l=this._littleEndian,u=new DataView(e,t,n),c=[],h=0,d=0,f=this._naluLengthSize,p=this._timestampBase+i,m=1===o;d<n;){if(n<=d+4){r.Z.w(this.TAG,"Malformed Nalu near timestamp ".concat(p,", offset = ").concat(d,", dataSize = ").concat(n));break}var g=u.getUint32(d,!l);if(3===f&&(g>>>=8),n-f<g)return void r.Z.w(this.TAG,"Malformed Nalus near timestamp ".concat(p,", NaluSize > DataSize!"));var _=u.getUint8(d+f)>>1&63,y=(16<=_&&_<=23&&(m=!0),new Uint8Array(e,t+d,f+g));c.push({type:_,data:y}),h+=y.byteLength,d+=f+g}if(c.length&&(i={units:c,length:h,isKeyframe:m,dts:p,cts:s,pts:p+s,firstData:this.firstData},m&&(i.fileposition=a),this._onlyDemuxer||((o=this._videoTrack).samples.push(i),o.length+=h),this._onlyDemuxer)){for(var v=null,A=0;A<c.length;A++){var E=c[A].data;E[0]=0,E[1]=0,E[2]=0,E[3]=1,v=v?this._concatUint8(v,new Uint8Array(E,0,E.length)):new Uint8Array(E,0,E.length)}i.videoData=this._concatUint8(this.firstData,new Uint8Array(v,0,v.length)),this._onDemuxData({type:"video",data:i}),this.isFirstData=!1}},T.prototype._parseEnhancedAV1VideoPacket=function(e,t,n,i,r,a,o){this._littleEndian,new DataView(e,t,n),0===o?this._parseAV1CodecConfigurationRecord(e,t,n):1===o?this._parseAV1VideoData(e,t,n,i,r,a,0):5===o?this._onError(m.Z.FORMAT_ERROR,"Flv: Not Suported MP2T AV1 video packet type ".concat(o)):2!==o&&this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(o))},T.prototype._parseAV1CodecConfigurationRecord=function(e,t,n){var i,a,o,s;n<4?r.Z.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!"):(i=this._videoMetadata,s=this._videoTrack,this._littleEndian,a=new DataView(e,t,n),i?void 0!==i.av1c&&r.Z.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=s.id,i.timescale=this._timescale,i.duration=this._duration),s=127&a.getUint8(0),a.getUint8(1),a.getUint8(1),a.getUint8(2),1==s&&null!=(a=g.parseOBUs(new Uint8Array(e,t+4,n-4)))?(i.codecWidth=a.codec_size.width,i.codecHeight=a.codec_size.height,i.presentWidth=a.present_size.width,i.presentHeight=a.present_size.height,i.profile=a.profile_string,i.level=a.level_string,i.bitDepth=a.bit_depth,i.chromaFormat=a.chroma_format,i.sarRatio=a.sar_ratio,i.frameRate=a.frame_rate,!1!==a.frame_rate.fixed&&0!==a.frame_rate.fps_num&&0!==a.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate),s=i.frameRate.fps_den,o=i.frameRate.fps_num,i.refSampleDuration=i.timescale*(s/o),i.codec=a.codec_mimetype,(s=this._mediaInfo).width=i.codecWidth,s.height=i.codecHeight,s.fps=i.frameRate.fps,s.profile=i.profile,s.level=i.level,s.refFrames=a.ref_frames,s.chromaFormat=a.chroma_format_string,s.sarNum=i.sarRatio.width,s.sarDen=i.sarRatio.height,s.videoCodec=a.codec_mimetype,s.hasAudio?null!=s.audioCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.videoCodec+'"',s.isComplete()&&this._onMediaInfo(s),i.av1c=new Uint8Array(n),i.av1c.set(new Uint8Array(e,t,n),0),r.Z.v(this.TAG,"Parsed AV1CodecConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"))},T.prototype._parseAV1VideoData=function(e,t,n,i,r,a,o){this._littleEndian,new DataView(e,t,n);var s=[],l=(i=this._timestampBase+i,a=1===a,n);s.push({unitType:0,data:new Uint8Array(e,t+0,n)}),s.length&&(e=this._videoTrack,t={units:s,length:l,isKeyframe:a,dts:i,cts:o,pts:i+o},a&&(t.fileposition=r),e.samples.push(t),e.length+=l)},T.prototype._concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.reduce((function(e,t){return e+t.byteLength}),0),i=new Uint8Array(n),r=0;return e.forEach((function(e){i.set(e,r),r+=e.byteLength})),i};var b=T;function w(){}function T(e,t){this.TAG="FLVDemuxer",this._config=t,this._onlyDemuxer=t.onlyDemuxer||!1,this._onError=null,this._onMediaInfo=null,this._onDemuxData=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new o.Z,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),this.curPts=null,this.firstData=[],this.isFirstData=!0}w.init=function(){for(var e in w.types={hvc1:[],hvcC:[],av01:[],av1C:[],avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pasp:[],".mp3":[]})w.types.hasOwnProperty(e)&&(w.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=w.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},w.box=function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),r=i.length,a=0;a<r;a++)t+=i[a].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);var o=8;for(a=0;a<r;a++)n.set(i[a],o),o+=i[a].byteLength;return n},w.generateInitSegment=function(e){var t=w.box(w.types.ftyp,w.constants.FTYP),n=(e=w.moov(e),new Uint8Array(t.byteLength+e.byteLength));return n.set(t,0),n.set(e,t.byteLength),n},w.moov=function(e){var t=w.mvhd(e.timescale,e.duration),n=w.trak(e);return e=w.mvex(e),w.box(w.types.moov,t,n,e)},w.mvhd=function(e,t){return w.box(w.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},w.trak=function(e){return w.box(w.types.trak,w.tkhd(e),w.mdia(e))},w.tkhd=function(e){var t=e.id,n=e.duration,i=e.presentWidth;return e=e.presentHeight,w.box(w.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,e>>>8&255,255&e,0,0]))},w.mdia=function(e){return w.box(w.types.mdia,w.mdhd(e),w.hdlr(e),w.minf(e))},w.mdhd=function(e){var t=e.timescale;return e=e.duration,w.box(w.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))},w.hdlr=function(e){return e="audio"===e.type?w.constants.HDLR_AUDIO:w.constants.HDLR_VIDEO,w.box(w.types.hdlr,e)},w.minf=function(e){var t="audio"===e.type?w.box(w.types.smhd,w.constants.SMHD):w.box(w.types.vmhd,w.constants.VMHD);return w.box(w.types.minf,t,w.dinf(),w.stbl(e))},w.dinf=function(){return w.box(w.types.dinf,w.box(w.types.dref,w.constants.DREF))},w.stbl=function(e){return w.box(w.types.stbl,w.stsd(e),w.box(w.types.stts,w.constants.STTS),w.box(w.types.stsc,w.constants.STSC),w.box(w.types.stsz,w.constants.STSZ),w.box(w.types.stco,w.constants.STCO))},w.stsd=function(e){return"audio"===e.type?"mp3"===e.codec?w.box(w.types.stsd,w.constants.STSD_PREFIX,w.mp3(e)):w.box(w.types.stsd,w.constants.STSD_PREFIX,w.mp4a(e)):0<=e.codec.indexOf("avc1")?w.box(w.types.stsd,w.constants.STSD_PREFIX,w.avc1(e)):"video"===e.type&&e.codec.startsWith("av01")?w.box(w.types.stsd,w.constants.STSD_PREFIX,w.av01(e)):w.box(w.types.stsd,w.constants.STSD_PREFIX,w.hvc1(e))},w.mp3=function(e){var t=e.channelCount;return e=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]),w.box(w.types[".mp3"],t)},w.mp4a=function(e){var t=e.channelCount,n=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]),w.box(w.types.mp4a,t,w.esds(e))},w.esds=function(e){var t=(e=e.config||[]).length;return t=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2])),w.box(w.types.esds,t)},w.avc1=function(e){var t=e.avcc,n=e.codecWidth;return e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),w.box(w.types.avc1,n,w.box(w.types.avcC,t))},w.hvc1=function(e){var t=e.hvcc,n=e.codecWidth;return e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),w.box(w.types.hvc1,n,w.box(w.types.hvcC,t))},w.av01=function(e){var t=e.av1c,n=e.codecWidth||192;return e=e.codecHeight||108,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),w.box(w.types.av01,n,w.box(w.types.av1C,t))},w.mvex=function(e){return w.box(w.types.mvex,w.trex(e))},w.trex=function(e){return e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]),w.box(w.types.trex,e)},w.moof=function(e,t){return w.box(w.types.moof,w.mfhd(e.sequenceNumber),w.traf(e,t))},w.mfhd=function(e){return e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]),w.box(w.types.mfhd,e)},w.traf=function(e,t){var n=e.id,i=(n=w.box(w.types.tfhd,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),t=w.box(w.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),w.sdtp(e));return e=w.trun(e,i.byteLength+16+16+8+16+8+8),w.box(w.types.traf,n,t,e,i)},w.sdtp=function(e){for(var t=e.samples||[],n=t.length,i=new Uint8Array(4+n),r=0;r<n;r++){var a=t[r].flags;i[r+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return w.box(w.types.sdtp,i)},w.trun=function(e,t){var n=e.samples||[],i=n.length,r=(e=12+16*i,new Uint8Array(e));r.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var a=0;a<i;a++){var o=n[a].duration,s=n[a].size,l=n[a].flags,u=n[a].cts;r.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a)}return w.box(w.types.trun,r)},w.mdat=function(e){return w.box(w.types.mdat,e)},(t=w).init();var S=t,R=(M.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},M),I=n(779),C=(x.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},x.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(x.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),x.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0,this._audioNextPts=this._videoNextPts=void 0},x.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},x.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new u.rT("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},x.prototype._onTrackMetadataReceived=function(e,t){var n=null,i="mp4",r=t.codec;if("audio"===e)n="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(i="mpeg",r="",new Uint8Array):S.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=S.generateInitSegment(t)}if(!this._onInitSegment)throw new u.rT("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:r,container:"".concat(e,"/").concat(i),mediaDuration:t.duration})},x.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},x.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(n.samples.push(e),n.length=e.length),e={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(e,!0)},x.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var n=e.samples,i=void 0,o=-1,s=this._audioMeta.refSampleDuration,l="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,u=this._dtsBaseInited&&void 0===this._audioNextDts,c=!1;if(n&&0!==n.length&&(1!==n.length||t)){var h,d,f=0,p=null,m=0,g=(m=l?(f=0,e.length):(f=8)+e.length,null);1<n.length&&(m-=(g=n.pop()).length),null!=this._audioStashedLastSample&&(h=this._audioStashedLastSample,this._audioStashedLastSample=null,n.unshift(h),m+=h.length),null!=g&&(this._audioStashedLastSample=g),t=n[0].dts-this._dtsBase,this._audioNextDts?i=t-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(i=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(c=!0)):i=null!=(x=this._audioSegmentInfoList.getLastSampleBefore(t))?(M=t-(x.originalDts+x.duration),t-(x.dts+x.duration+(M=M<=3?0:M))):0,c&&(x=t-i,null!=(M=this._videoSegmentInfoList.getLastSegmentBefore(t))&&M.beginDts<x?(C=R.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(d=M.beginDts,t=x-M.beginDts,r.Z.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(d,", duration: ").concat(t)),n.unshift({unit:C,dts:d,pts:d}),m+=C.byteLength):c=!1);for(var _=[],y=0;y<n.length;y++){var v=(h=n[y]).unit,A=h.dts-this._dtsBase,E=!1,b=null,w=0;if(!((d=A)<-.001)){if("mp3"!==this._audioMeta.codec){var T=A;if((i=A-(T=this._audioNextDts?this._audioNextDts:T))<=-3*s){r.Z.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(A," ms ,curRefDts: ").concat(T," ms)  due to dtsCorrection: ").concat(i," ms overlap."));continue}if(3*s<=i&&this._fillAudioTimestampGap&&!a.Z.safari){E=!0;var C,L=Math.floor(i/s);r.Z.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\n"+"originalDts: ".concat(A," ms, curRefDts: ").concat(T," ms, ")+"dtsCorrection: ".concat(Math.round(i)," ms, generate: ").concat(L," frames")),d=Math.floor(T),w=Math.floor(T+s)-d,null==(C=R.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(r.Z.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),C=v),b=[];for(var P=0;P<L;P++){T+=s;var D=Math.floor(T),k=Math.floor(T+s)-D;D={dts:D,pts:D,cts:0,unit:C,size:C.byteLength,duration:k,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}},b.push(D),m+=D.size}}else d=Math.floor(T),w=Math.floor(T+s)-d;this._audioNextPts=this._audioNextDts=T+s}else d=A-i,w=y!==n.length-1?n[y+1].dts-this._dtsBase-i-d:null!=g?g.dts-this._dtsBase-i-d:1<=_.length?_[_.length-1].duration:Math.floor(s),this._audioNextPts=this._audioNextDts=d+w;-1===o&&(o=d),_.push({dts:d,pts:d,cts:0,unit:h.unit,size:h.unit.byteLength,duration:w,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),E&&_.push.apply(_,b)}}if(0===_.length)e.samples=[],e.length=0;else{for(l?p=new Uint8Array(m):((p=new Uint8Array(m))[0]=m>>>24&255,p[1]=m>>>16&255,p[2]=m>>>8&255,p[3]=255&m,p.set(S.types.mdat,4)),y=0;y<_.length;y++)v=_[y].unit,p.set(v,f),f+=v.byteLength;var x=_[_.length-1],M=x.dts+x.duration;(t=new I.Yy).beginDts=o,t.endDts=M,t.beginPts=o,t.endPts=M,t.originalBeginDts=_[0].originalDts,t.originalEndDts=x.originalDts+x.duration,t.firstSample=new I.Wk(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,!1),t.lastSample=new I.Wk(x.dts,x.pts,x.duration,x.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(t),e.samples=_,e.sequenceNumber++,c=l?new Uint8Array:S.moof(e,o),e.samples=[],e.length=0,M={type:"audio",data:this._mergeBoxes(c,p).buffer,sampleCount:_.length,info:t},l&&u&&(M.timestampOffset=o),this._onMediaSegment("audio",M)}}}},x.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var n=e,i=n.samples,r=void 0,a=-1,o=-1;if(i&&0!==i.length&&(1!==i.length||t)){var s,l=8,u=null,c=(t=8+e.length,null);1<i.length&&(t-=(c=i.pop()).length),null!=this._videoStashedLastSample&&(s=this._videoStashedLastSample,this._videoStashedLastSample=null,i.unshift(s),t+=s.length),null!=c&&(this._videoStashedLastSample=c),e=i[0].dts-this._dtsBase,r=this._videoNextDts?e-this._videoNextDts:this._videoSegmentInfoList.isEmpty()||null==(w=this._videoSegmentInfoList.getLastSampleBefore(e))?0:(T=e-(w.originalDts+w.duration),e-(w.dts+w.duration+(T=T<=3?0:T)));for(var h=new I.Yy,d=[],f=0;f<i.length;f++){var p,m=(s=i[f]).dts-this._dtsBase,g=s.isKeyframe,_=m-r,y=s.cts,v=_+y,A=-1===a&&(a=_,o=v);A=f!==i.length-1?i[f+1].dts-this._dtsBase-r-_:null!=c?c.dts-this._dtsBase-r-_:1<=d.length?d[d.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),g&&((p=new I.Wk(_,v,A,s.dts,!0)).fileposition=s.fileposition,h.appendSyncPoint(p)),d.push({dts:_,pts:v,cts:y,units:s.units,size:s.length,isKeyframe:g,duration:A,originalDts:m,flags:{isLeading:0,dependsOn:g?2:1,isDependedOn:g?1:0,hasRedundancy:0,isNonSync:g?0:1}})}for((u=new Uint8Array(t))[0]=t>>>24&255,u[1]=t>>>16&255,u[2]=t>>>8&255,u[3]=255&t,u.set(S.types.mdat,4),f=0;f<d.length;f++)for(var E=d[f].units;E.length;){var b=E.shift().data;u.set(b,l),l+=b.byteLength}var w=(e=d[d.length-1]).dts+e.duration,T=e.pts+e.duration;this._videoNextDts=w,this._videoNextPts=T,h.beginDts=a,h.endDts=w,h.beginPts=o,h.endPts=T,h.originalBeginDts=d[0].originalDts,h.originalEndDts=e.originalDts+e.duration,h.firstSample=new I.Wk(d[0].dts,d[0].pts,d[0].duration,d[0].originalDts,d[0].isKeyframe),h.lastSample=new I.Wk(e.dts,e.pts,e.duration,e.originalDts,e.isKeyframe),this._isLive||this._videoSegmentInfoList.append(h),n.samples=d,n.sequenceNumber++,this._forceFirstIDR&&((t=d[0].flags).dependsOn=2,t.isNonSync=0),w=S.moof(n,a),n.samples=[],n.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(w,u).buffer,sampleCount:d.length,info:h})}}},x.prototype._mergeBoxes=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},x),L=n(979),P=n(458),D=(n(475),k.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},k.prototype.on=function(e,t){this._emitter.addListener(e,t)},k.prototype.off=function(e,t){this._emitter.removeListener(e,t)},k.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},k.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e];(n=this._ioctl=new L.Z(n,this._config,e)).onError=this._onIOException.bind(this),n.onSeeked=this._onIOSeeked.bind(this),n.onComplete=this._onIOComplete.bind(this),n.onRedirect=this._onIORedirect.bind(this),n.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):n.onDataArrival=this._onInitChunkArrival.bind(this),n.open(t)},k.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},k.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},k.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},k.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},k.prototype.seek=function(e){var t,n,i;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(i=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(n=i.getNearestKeyframe(e),this._remuxer.seek(n.milliseconds),this._ioctl.seek(n.fileposition),this._pendingResolveSeekPoint=n.milliseconds):null==(i=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(n=i.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,n.fileposition),this._pendingResolveSeekPoint=n.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())},k.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){n=i-1;break}return n},k.prototype._onInitChunkArrival=function(e,t){var n,i=this;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,this._demuxer.parseChunks(e,t)):(n=b.probe(e)).match?(this._demuxer=new b(n,this._config),this._remuxer||(this._remuxer=new C(this._config)),null==(n=this._mediaDataSource).duration||isNaN(n.duration)||(this._demuxer.overridedDuration=n.duration),"boolean"==typeof n.hasAudio&&(this._demuxer.overridedHasAudio=n.hasAudio),"boolean"==typeof n.hasVideo&&(this._demuxer.overridedHasVideo=n.hasVideo),this._demuxer.timestampBase=n.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onDemuxData=this._onDemuxData.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),this._demuxer.parseChunks(e,t)):(r.Z.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then((function(){i._internalAbort()})),this._emitter.emit(P.Z.DEMUX_ERROR,m.Z.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),0)},k.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,o.Z.prototype)),e=Object.assign({},e),Object.setPrototypeOf(e,o.Z.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},k.prototype._onDemuxData=function(e){this._emitter.emit(P.Z.DEMUX_DATA,e)},k.prototype._onMetaDataArrived=function(e){this._emitter.emit(P.Z.METADATA_ARRIVED,e)},k.prototype._onScriptDataArrived=function(e){this._emitter.emit(P.Z.SCRIPTDATA_ARRIVED,e)},k.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},k.prototype._onIOComplete=function(e){(e+=1)<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer.flushStashedSamples(),this._emitter.emit(P.Z.LOADING_COMPLETE),this._disableStatisticsReporter())},k.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},k.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(P.Z.RECOVERED_EARLY_EOF)},k.prototype._onIOException=function(e,t){r.Z.e(this.TAG,"IOException: type = ".concat(e,", code = ").concat(t.code,", msg = ").concat(t.msg)),this._emitter.emit(P.Z.IO_ERROR,e,t),this._disableStatisticsReporter()},k.prototype._onDemuxException=function(e,t){r.Z.e(this.TAG,"DemuxException: type = ".concat(e,", info = ").concat(t)),this._emitter.emit(P.Z.DEMUX_ERROR,e,t)},k.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(P.Z.INIT_SEGMENT,e,t)},k.prototype._onRemuxerMediaSegmentArrival=function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(P.Z.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint)&&"video"===e&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,a.Z.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(P.Z.RECOMMEND_SEEKPOINT,t))},k.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},k.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},k.prototype._reportSegmentMediaInfo=function(e){e=this._mediaInfo.segments[e],(e=Object.assign({},e)).duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(P.Z.MEDIA_INFO,e)},k.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(P.Z.STATISTICS_INFO,e)},k);function k(e,t){this.TAG="TransmuxingController",this._emitter=new(i()),this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e;var n=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach((function(i){i.timestampBase=n,n+=i.duration,i.cors=e.cors,i.withCredentials=e.withCredentials,t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy)})),isNaN(n)||this._mediaDataSource.duration===n||(this._mediaDataSource.duration=n),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function x(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._audioNextPts=void 0,this._videoNextDts=void 0,this._videoNextPts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new I.J1("audio"),this._videoSegmentInfoList=new I.J1("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!a.Z.chrome||!(a.Z.version.major<50||50===a.Z.version.major&&a.Z.version.build<2661)),this._fillSilentAfterSeek=a.Z.msedge||a.Z.msie,this._mp3UseMpegAudio=!a.Z.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function M(){}},458:function(e,t){t.Z={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint",DEMUX_DATA:"demux_data"}},919:function(e,t,n){n(240),n(45),n(344),n(131),n(458)},61:function(e,t){t.Z={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},319:function(e,t,n){n.d(t,{default:function(){return O}}),t=n(344);var i=n(979),r={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function a(){return Object.assign({},r)}M.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},M.supportMSEH265Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')},M.supportNetworkStreamIO=function(){var e=new i.Z({},a()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},M.getNetworkLoaderTypeName=function(){var e=new i.Z({},a()),t=e.loaderType;return e.destroy(),t},M.supportNativeMediaPlayback=function(e){return"probably"===(e=(M.videoElement=null==M.videoElement?window.document.createElement("video"):M.videoElement).canPlayType(e))||"maybe"==e},M.getFeatureList=function(){var e={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.mseFlvPlayback=M.supportMSEH264Playback(),e.networkStreamIO=M.supportNetworkStreamIO(),e.networkLoaderName=M.getNetworkLoaderTypeName(),e.mseLiveFlvPlayback=e.mseFlvPlayback&&e.networkStreamIO,e.nativeMP4H264Playback=M.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=M.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=M.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=M.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e};var o=M,s=n(475),l=n(393),u=n.n(l),c=n(240),h=n(340),d={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",DEMUX_DATA:"demux_data"},f=(l=n(227),n.n(l)),p=n(45),m=n(131),g=n(458),_=(n(919),n(70)),y=(x.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),p.Z.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},x.prototype.on=function(e,t){this._emitter.addListener(e,t)},x.prototype.off=function(e,t){this._emitter.removeListener(e,t)},x.prototype.hasWorker=function(){return null!=this._worker},x.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},x.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},x.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},x.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},x.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},x.prototype._onInitSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(g.Z.INIT_SEGMENT,e,t)}))},x.prototype._onMediaSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(g.Z.MEDIA_SEGMENT,e,t)}))},x.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(g.Z.LOADING_COMPLETE)}))},x.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(g.Z.RECOVERED_EARLY_EOF)}))},x.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.MEDIA_INFO,e)}))},x.prototype._onDemuxData=function(e){this._emitter.emit(g.Z.DEMUX_DATA,e)},x.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.METADATA_ARRIVED,e)}))},x.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.SCRIPTDATA_ARRIVED,e)}))},x.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.STATISTICS_INFO,e)}))},x.prototype._onIOError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(g.Z.IO_ERROR,e,t)}))},x.prototype._onDemuxError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(g.Z.DEMUX_ERROR,e,t)}))},x.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.RECOMMEND_SEEKPOINT,e)}))},x.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},x.prototype._onWorkerMessage=function(e){var t=e.data,n=t.data;if("destroyed"===t.msg||this._workerDestroying)this._workerDestroying=!1,this._worker.terminate(),this._worker=null;else switch(t.msg){case g.Z.INIT_SEGMENT:case g.Z.MEDIA_SEGMENT:this._emitter.emit(t.msg,n.type,n.data);break;case g.Z.LOADING_COMPLETE:case g.Z.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case g.Z.MEDIA_INFO:Object.setPrototypeOf(n,_.Z.prototype),this._emitter.emit(t.msg,n);break;case g.Z.METADATA_ARRIVED:case g.Z.SCRIPTDATA_ARRIVED:case g.Z.STATISTICS_INFO:this._emitter.emit(t.msg,n);break;case g.Z.IO_ERROR:case g.Z.DEMUX_ERROR:this._emitter.emit(t.msg,n.type,n.info);break;case g.Z.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,n);break;case"logcat_callback":c.Z.emitter.emit("log",n.type,n.logcat)}},x),v="error",A="source_open",E="update_end",b="buffer_full",w=n(779),T=n(996),S=(k.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},k.prototype.on=function(e,t){this._emitter.addListener(e,t)},k.prototype.off=function(e,t){this._emitter.removeListener(e,t)},k.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new T.rT("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},k.prototype.detachMediaElement=function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var n;if((n=this._pendingSegments[e]).splice(0,n.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null,n=this._sourceBuffers[e]){if("closed"!==t.readyState){try{t.removeSourceBuffer(n)}catch(t){c.Z.e(this.TAG,t.message)}n.removeEventListener("error",this.e.onSourceBufferError),n.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){c.Z.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},k.prototype.appendInitSegment=function(e,t){if(this._mediaSource&&"open"===this._mediaSource.readyState){var n=e,i="".concat(n.container),r=(n.codec&&0<n.codec.length&&(i+=";codecs=".concat(n.codec)),!1);if(c.Z.v(this.TAG,"Received Initialization Segment, mimeType: "+i),this._lastInitSegments[n.type]=n,i!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])c.Z.v(this.TAG,"Notice: ".concat(n.type," mimeType changed, origin: ").concat(this._mimeTypes[n.type],", target: ").concat(i));else{r=!0;try{var a=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(i);a.addEventListener("error",this.e.onSourceBufferError),a.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return c.Z.e(this.TAG,e.message),void this._emitter.emit(v,{code:e.code,msg:e.message})}}this._mimeTypes[n.type]=i}t||this._pendingSegments[n.type].push(n),r||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),h.Z.safari&&"audio/mpeg"===n.container&&0<n.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}else this._pendingSourceBufferInit.push(e),this._pendingSegments[e.type].push(e)},k.prototype.appendMediaSegment=function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer(),!(e=this._sourceBuffers[e.type])||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},k.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(e){c.Z.e(this.TAG,e.message)}this._idrList.clear();var i=this._pendingSegments[t];if(i.splice(0,i.length),"closed"!==this._mediaSource.readyState){for(var r=0;r<n.buffered.length;r++){var a=n.buffered.start(r),o=n.buffered.end(r);this._pendingRemoveRanges[t].push({start:a,end:o})}n.updating||this._doRemoveRanges(),h.Z.safari&&(i=this._lastInitSegments[t])&&(this._pendingSegments[t].push(i),n.updating||this._doAppendSegments())}}},k.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},k.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},k.prototype._needCleanupSourceBuffer=function(){if(this._config.autoCleanupSourceBuffer){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n&&1<=(n=n.buffered).length&&t-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},k.prototype._doCleanupSourceBuffer=function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){for(var i=n.buffered,r=!1,a=0;a<i.length;a++){var o,s=i.start(a),l=i.end(a);s<=t&&t<l+3?t-s>=this._config.autoCleanupMaxBackwardDuration&&(r=!0,o=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:s,end:o})):l<t&&(r=!0,this._pendingRemoveRanges[e].push({start:s,end:l}))}r&&!n.updating&&this._doRemoveRanges()}}},k.prototype._updateMediaSourceDuration=function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(t=this._mediaSource.duration,0<(e=this._pendingMediaDuration)&&(isNaN(t)||t<e)&&(c.Z.v(this.TAG,"Update MediaSource duration from ".concat(t," to ").concat(e)),this._mediaSource.duration=e),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)},k.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];n.length&&!t.updating;){var i=n.shift();t.remove(i.start,i.end)}},k.prototype._doAppendSegments=function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var n,i,r=t[e].shift();if(r.timestampOffset&&(n=this._sourceBuffers[e].timestampOffset,i=r.timestampOffset/1e3,.1<Math.abs(n-i)&&(c.Z.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(n," to ").concat(i)),this._sourceBuffers[e].timestampOffset=i),delete r.timestampOffset),!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(r.data),this._isBufferFull=!1,"video"===e&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(r),22===t.code?(this._isBufferFull||this._emitter.emit(b),this._isBufferFull=!0):(c.Z.e(this.TAG,e,t.message),this._emitter.emit(v,{code:t.code,msg:t.message}))}}},k.prototype._onSourceOpen=function(){if(c.Z.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(A)},k.prototype._onSourceEnded=function(){c.Z.v(this.TAG,"MediaSource onSourceEnded")},k.prototype._onSourceClose=function(){c.Z.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},k.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return 0<(e.video&&e.video.length)||e.audio&&0<e.audio.length},k.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return 0<(e.video&&e.video.length)||e.audio&&0<e.audio.length},k.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(E)},k.prototype._onSourceBufferError=function(e){c.Z.e(this.TAG,"SourceBuffer Error: ".concat(e))},k),R=(l=n(61),{NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"}),I={NETWORK_EXCEPTION:s.nm.EXCEPTION,NETWORK_STATUS_CODE_INVALID:s.nm.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:s.nm.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:s.nm.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:l.Z.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:l.Z.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:l.Z.CODEC_UNSUPPORTED},C=(D.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},D.prototype.on=function(e,t){var n=this;e===d.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){n._emitter.emit(d.MEDIA_INFO,n.mediaInfo)})):e===d.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){n._emitter.emit(d.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},D.prototype.off=function(e,t){this._emitter.removeListener(e,t)},D.prototype.attachMediaElement=function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new S(this._config),this._msectl.on(E,this._onmseUpdateEnd.bind(this)),this._msectl.on(b,this._onmseBufferFull.bind(this)),this._msectl.on(A,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(v,(function(e){t._emitter.emit(d.ERROR,R.MEDIA_ERROR,I.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},D.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},D.prototype.load=function(){var e=this;if(!this._mediaElement)throw new T.rT("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new T.rT("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new y(this._mediaDataSource,this._config),this._transmuxer.on(g.Z.INIT_SEGMENT,(function(t,n){e._msectl.appendInitSegment(n)})),this._transmuxer.on(g.Z.MEDIA_SEGMENT,(function(t,n){var i;e._msectl.appendMediaSegment(n),e._config.lazyLoad&&!e._config.isLive&&(i=e._mediaElement.currentTime,n.info.endDts>=1e3*(i+e._config.lazyLoadMaxDuration))&&null==e._progressChecker&&(c.Z.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())})),this._transmuxer.on(g.Z.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(d.LOADING_COMPLETE)})),this._transmuxer.on(g.Z.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(d.RECOVERED_EARLY_EOF)})),this._transmuxer.on(g.Z.IO_ERROR,(function(t,n){e._emitter.emit(d.ERROR,R.NETWORK_ERROR,t,n)})),this._transmuxer.on(g.Z.DEMUX_ERROR,(function(t,n){e._emitter.emit(d.ERROR,R.MEDIA_ERROR,t,{code:-1,msg:n})})),this._transmuxer.on(g.Z.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(d.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(g.Z.DEMUX_DATA,(function(t){e._emitter.emit(d.DEMUX_DATA,Object.assign({},t))})),this._transmuxer.on(g.Z.METADATA_ARRIVED,(function(t){e._emitter.emit(d.METADATA_ARRIVED,t)})),this._transmuxer.on(g.Z.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(d.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(g.Z.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(d.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(g.Z.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},D.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},D.prototype.play=function(){return this._mediaElement.play()},D.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(D.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(e){this._mediaElement.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),D.prototype._fillStatisticsInfo=function(e){var t,n,i,r;return e.playerType=this._type,this._mediaElement instanceof HTMLVideoElement&&(t=!0,r=i=0,this._mediaElement.getVideoPlaybackQuality?(i=(n=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,r=n.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1,t&&(e.decodedFrames=i,e.droppedFrames=r)),e},D.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,n=0,i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);if(r<=t&&t<a){n=a;break}}n>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(c.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},D.prototype._onmseBufferFull=function(){c.Z.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this.isChrome&&this._transmuxer&&this._transmuxer.pause(),null==this._progressChecker&&this._suspendTransmuxer()},D.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker)&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},D.prototype._progressCheckers=function(){null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},D.prototype._checkProgressAndResume=function(){if(this._transmuxer._controller._ioctl._loader._isLive)this._config.isLive=!0;else{for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,i=0;i<t.length;i++){var r=t.start(i),a=t.end(i);if(r<=e&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(!this.isChrome||this._transmuxer._controller._ioctl._paused?n=!0:(this.needResumeTime++,10==this.needResumeTime&&this._transmuxer&&(this._transmuxer.pause(),n=!(this.needResumeTime=0))));break}}n&&(c.Z.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume())}},D.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(i<=e&&e<r)return!0}return!1},D.prototype._internalSeek=function(e){var t,n=this._isTimepointBuffered(e),i=!1,r=0;e<1&&0<this._mediaElement.buffered.length&&((t=this._mediaElement.buffered.start(0))<1&&e<t||h.Z.safari)&&(i=!0,r=h.Z.safari?.1:t),i?(this._requestSetTime=!0,this._mediaElement.currentTime=r):n?(this._alwaysSeekKeyframe?(t=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=t?t.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))},D.prototype._checkAndApplyUnbufferedSeekpoint=function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))},D.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(c.Z.w(this.TAG,"Playback seems stuck at ".concat(t.currentTime,", seek to ").concat(e.start(0))),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)},D.prototype._onvLoadedMetadata=function(e){this.isChrome&&this._progressCheckers(),null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},D.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<n.length&&((n=n.start(0))<1&&t<n||h.Z.safari))return this._requestSetTime=!0,void(this._mediaElement.currentTime=h.Z.safari?.1:n);this._isTimepointBuffered(t)?(this._alwaysSeekKeyframe&&null!=(n=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=n.dts/1e3),null!=this._progressChecker&&this._checkProgressAndResume()):(this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},D.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},D.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},D.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},D),L=(P.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},P.prototype.on=function(e,t){var n=this;e===d.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(d.MEDIA_INFO,n.mediaInfo)})):e===d.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(d.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},P.prototype.off=function(e,t){this._emitter.removeListener(e,t)},P.prototype.attachMediaElement=function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},P.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},P.prototype.load=function(){if(!this._mediaElement)throw new T.rT("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},P.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},P.prototype.play=function(){return this._mediaElement.play()},P.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(P.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(e){this._mediaElement.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement)&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight),e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"statisticsInfo",{get:function(){var e,t,n,i,r={playerType:this._type,url:this._mediaDataSource.url};return this._mediaElement instanceof HTMLVideoElement&&(e=!0,i=n=0,this._mediaElement.getVideoPlaybackQuality?(n=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,i=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):e=!1,e)&&(r.decodedFrames=n,r.droppedFrames=i),r},enumerable:!1,configurable:!0}),P.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(d.MEDIA_INFO,this.mediaInfo)},P.prototype._reportStatisticsInfo=function(){this._emitter.emit(d.STATISTICS_INFO,this.statisticsInfo)},P);function P(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(u()),this._config=a(),"object"==typeof t&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new T.OC("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new T.OC("NativePlayer(".concat(e.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function D(e,t){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(u()),this._config=a(),"object"==typeof t&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new T.OC("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null,t=h.Z.chrome&&(h.Z.version.major<50||50===h.Z.version.major&&h.Z.version.build<2661),this._alwaysSeekKeyframe=!!(t||h.Z.msedge||h.Z.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1),this.needResumeTime=0,this.isChrome=navigator.userAgent.toLowerCase().match(/chrome/)}function k(e){this.TAG="MSEController",this._config=e,this._emitter=new(u()),this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new w.Vn}function x(e,t){if(this.TAG="Transmuxer",this._emitter=new(u()),t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=f()(919),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},p.Z.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:p.Z.getConfig()})}catch(n){c.Z.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new m.Z(e,t)}else this._controller=new m.Z(e,t);var n;this._controller&&((n=this._controller).on(g.Z.IO_ERROR,this._onIOError.bind(this)),n.on(g.Z.DEMUX_ERROR,this._onDemuxError.bind(this)),n.on(g.Z.INIT_SEGMENT,this._onInitSegment.bind(this)),n.on(g.Z.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),n.on(g.Z.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),n.on(g.Z.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),n.on(g.Z.MEDIA_INFO,this._onMediaInfo.bind(this)),n.on(g.Z.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),n.on(g.Z.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),n.on(g.Z.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),n.on(g.Z.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)),n.on(g.Z.DEMUX_DATA,this._onDemuxData.bind(this)))}function M(){}t.Z.install(),n={createPlayer:function(e,t){if(null==e||"object"!=typeof e)throw new T.OC("MediaDataSource must be an javascript object!");if(e.hasOwnProperty("type"))return new("flv"===e.type?C:L)(e,t);throw new T.OC("MediaDataSource must has type field to indicate video file type!")},isSupported:function(){return o.supportMSEH264Playback()},getFeatureList:function(){return o.getFeatureList()}};var O=(n.BaseLoader=s.fp,n.LoaderStatus=s.GM,n.LoaderErrors=s.nm,n.Events=d,n.ErrorTypes=R,n.ErrorDetails=I,n.FlvPlayer=C,n.NativePlayer=L,n.LoggingControl=p.Z,Object.defineProperty(n,"version",{enumerable:!0,get:function(){return"1.7.2"}}),n)},611:function(e,t,n){e.exports=n(319).default},979:function(e,t,n){n.d(t,{Z:function(){return w}});var i,r,a,o,s,l,u,c,h,d=n(240),f=(D.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},D.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(D.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return this._intervalBytes/(e=0==e?1:e)/1024},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),D),p=n(475),m=n(340),g=n(996),_=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e){function t(t,n){var i=e.call(this,"fetch-stream-loader")||this;return i.TAG="FetchStreamLoader",i._seekHandler=t,i._config=n,i._needStash=!0,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i._isLive=null,i}var n=t,r=e;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a),t.isSupported=function(){try{var e=m.Z.msedge&&15048<=m.Z.version.minor,t=!m.Z.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){var n=this,i=(this._dataSource=e,this._range=t,e.url),r=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL),this._seekHandler.getConfig(i,t)),a=new self.Headers;if("object"==typeof r.headers){var o=r.headers;for(s in o)o.hasOwnProperty(s)&&a.append(s,o[s])}if(i={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},"object"==typeof this._config.headers)for(var s in this._config.headers)a.append(s,this._config.headers[s]);!1===e.cors&&(i.mode="same-origin"),e.withCredentials&&(i.credentials="include"),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,i.signal=this._abortController.signal),this._status=p.GM.kConnecting,self.fetch(r.url,i).then((function(e){if(n._requestAbort)n._status=p.GM.kIdle,e.body.cancel();else{var t;if(e.ok&&200<=e.status&&e.status<=299)return e.url!==r.url&&n._onURLRedirect&&(t=n._seekHandler.removeURLParameters(e.url),n._onURLRedirect(t)),null!=(t=e.headers.get("Content-Length"))?(n._contentLength=parseInt(t),0!==n._contentLength&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength),n._isLive=!1):n._isLive=!0,n._pump.call(n,e.body.getReader());if(n._status=p.GM.kError,!n._onError)throw new g.OZ("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}})).catch((function(e){if(!n._abortController||!n._abortController.signal.aborted){if(n._status=p.GM.kError,!n._onError)throw e;n._onError(p.nm.EXCEPTION,{code:-1,msg:e.message})}}))},t.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==p.GM.kBuffering||!m.Z.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},t.prototype._pump=function(e){var t=this;return e.read().then((function(n){if(n.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=p.GM.kError;var i=p.nm.EARLY_EOF,r={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new g.OZ(r.msg);t._onError(i,r)}else t._status=p.GM.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else if(t._abortController&&t._abortController.signal.aborted)t._status=p.GM.kComplete;else{if(!0===t._requestAbort)return t._status=p.GM.kComplete,e.cancel();t._status=p.GM.kBuffering,i=n.value.buffer,r=t._range.from+t._receivedLength,t._receivedLength+=i.byteLength,t._onDataArrival&&t._onDataArrival(i,r,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=p.GM.kComplete;else if(11!==e.code||!m.Z.msedge){t._status=p.GM.kError;var n=0,i=19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(n=p.nm.EXCEPTION,{code:e.code,msg:e.message}):(n=p.nm.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!t._onError)throw new g.OZ(i.msg);t._onError(n,i)}}))},t}(p.fp)),y=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},t=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t(P,c=p.fp),P.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return d.Z.w("MozChunkedLoader",e.message),!1}},P.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),c.prototype.destroy.call(this)},P.prototype.open=function(e,t){this._dataSource=e,this._range=t;var n=e.url,i=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL),n=this._seekHandler.getConfig(n,t),this._requestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="moz-chunked-arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onloadend=this._onLoadEnd.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);this._status=p.GM.kConnecting,i.send()},P.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=p.GM.kComplete},P.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect&&(t=this._seekHandler.removeURLParameters(e.responseURL),this._onURLRedirect(t)),0!==e.status&&(e.status<200||299<e.status)){if(this._status=p.GM.kError,!this._onError)throw new g.OZ("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=p.GM.kBuffering},P.prototype._onProgress=function(e){var t;this._status!==p.GM.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength),e=e.target.response,t=this._range.from+this._receivedLength,this._receivedLength+=e.byteLength,this._onDataArrival)&&this._onDataArrival(e,t,this._receivedLength)},P.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==p.GM.kError&&(this._status=p.GM.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1):this._requestAbort=!1},P.prototype._onXhrError=function(e){this._status=p.GM.kError;var t=0,n=this._contentLength&&e.loaded<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=p.nm.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(n.msg);this._onError(t,n)},P),v=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n(L,l=p.fp),L.isSupported=function(){try{var e;return void 0!==self.MSStream&&void 0!==self.MSStreamReader&&((e=new XMLHttpRequest).open("GET","https://example.com",!0),(e.responseType="ms-stream")===e.responseType)}catch(e){return d.Z.w("MSStreamLoader",e.message),!1}},L.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),l.prototype.destroy.call(this)},L.prototype.open=function(e,t){this._internalOpen(e,t,!1)},L.prototype._internalOpen=function(e,t,n){this._dataSource=e,n?this._currentRange=t:this._totalRange=t,n=e.url,this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL)),n=this._seekHandler.getConfig(n,t);var i=((this._currentRequestURL=n.url,t=this._reader=new self.MSStreamReader).onprogress=this._msrOnProgress.bind(this),t.onload=this._msrOnLoad.bind(this),t.onerror=this._msrOnError.bind(this),this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="ms-stream",i.onreadystatechange=this._xhrOnReadyStateChange.bind(this),i.onerror=this._xhrOnError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);this._isReconnecting?this._isReconnecting=!1:this._status=p.GM.kConnecting,i.send()},L.prototype.abort=function(){this._internalAbort(),this._status=p.GM.kComplete},L.prototype._internalAbort=function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},L.prototype._xhrOnReadyStateChange=function(e){if(2===(e=e.target).readyState)if(200<=e.status&&e.status<=299){this._status=p.GM.kBuffering,null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t);var t=e.getResponseHeader("Content-Length");null!=t&&null==this._contentLength&&0<(t=parseInt(t))&&(this._contentLength=t,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength)}else{if(this._status=p.GM.kError,!this._onError)throw new g.OZ("MSStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else 3===e.readyState&&200<=e.status&&e.status<=299&&(this._status=p.GM.kBuffering,t=e.response,this._reader.readAsArrayBuffer(t))},L.prototype._xhrOnError=function(e){this._status=p.GM.kError;var t=p.nm.EXCEPTION;if(e={code:-1,msg:e.constructor.name+" "+e.type},!this._onError)throw new g.OZ(e.msg);this._onError(t,e)},L.prototype._msrOnProgress=function(e){var t,n;null!=(e=e.target.result)?(t=e.slice(this._lastTimeBufferSize),this._lastTimeBufferSize=e.byteLength,n=this._totalRange.from+this._receivedLength,this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength),e.byteLength>=this._bufferLimit&&(d.Z.v(this.TAG,"MSStream buffer exceeded max size near ".concat(n+t.byteLength,", reconnecting...")),this._doReconnectIfNeeded())):this._doReconnectIfNeeded()},L.prototype._doReconnectIfNeeded=function(){var e;(null==this._contentLength||this._receivedLength<this._contentLength)&&(this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort(),e={from:this._totalRange.from+this._receivedLength,to:-1},this._internalOpen(this._dataSource,e,!0))},L.prototype._msrOnLoad=function(e){this._status=p.GM.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},L.prototype._msrOnError=function(e){this._status=p.GM.kError;var t=0,n=this._contentLength&&this._receivedLength<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"MSStream meet Early-Eof"}):(t=p.nm.EARLY_EOF,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(n.msg);this._onError(t,n)},s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},t=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t(C,o=p.fp),C.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return d.Z.w("RangeLoader",e.message),!1}},C.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),o.prototype.destroy.call(this)},Object.defineProperty(C.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),C.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=p.GM.kConnecting,e=!1,null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(e=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||e?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},C.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength;e=t+e,null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)},C.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var n=e.url,i=(this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL)),n=this._seekHandler.getConfig(n,t),this._currentRequestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onload=this._onLoad.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);i.send()},C.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=p.GM.kComplete},C.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},C.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t),200<=e.status&&e.status<=299)this._waitForTotalLength||(this._status=p.GM.kBuffering);else{if(this._status=p.GM.kError,!this._onError)throw new g.OZ("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}},C.prototype._onProgress=function(e){if(this._status!==p.GM.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,t=this._totalLengthReceived=!0,n=e.total,this._internalAbort(),null!=n&0!==n)&&(this._totalLength=n),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var n=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(n)}},C.prototype._normalizeSpeed=function(e){var t,n=this._chunkSizeKBList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},C.prototype._onLoad=function(e){var t,n;this._status!==p.GM.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)!==(t=0===(t=this._speedSampler.lastSecondKBps)&&(this._zeroSpeedChunkCount++,3<=this._zeroSpeedChunkCount)?this._speedSampler.currentKBps:t)&&(t=this._normalizeSpeed(t),this._currentSpeedNormalized!==t)&&(this._currentSpeedNormalized=t,this._currentChunkSizeKB=t),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,n=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():n=!0,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),n&&(this._status=p.GM.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))},C.prototype._onXhrError=function(e){this._status=p.GM.kError;var t=0,n=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=p.nm.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(n.msg);this._onError(t,n)},C),A=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n(I,r=p.fp),I.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},I.prototype.destroy=function(){this._ws&&this.abort(),r.prototype.destroy.call(this)},I.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=p.GM.kConnecting}catch(e){if(this._status=p.GM.kError,t={code:e.code,msg:e.message},!this._onError)throw new g.OZ(t.msg);this._onError(p.nm.EXCEPTION,t)}},I.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=p.GM.kComplete},I.prototype._onWebSocketOpen=function(e){this._status=p.GM.kBuffering},I.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=p.GM.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},I.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{if(this._status=p.GM.kError,e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name},!this._onError)throw new g.OZ(e.msg);this._onError(p.nm.EXCEPTION,e)}},I.prototype._dispatchArrayBuffer=function(e){var t=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,t,this._receivedLength)},I.prototype._onWebSocketError=function(e){if(this._status=p.GM.kError,e={code:e.code,msg:e.message},!this._onError)throw new g.OZ(e.msg);this._onError(p.nm.EXCEPTION,e)},I),E=(R.prototype.getConfig=function(e,t){var n,i={};return 0!==t.from||-1!==t.to?(n=-1!==t.to?"bytes=".concat(t.from.toString(),"-").concat(t.to.toString()):"bytes=".concat(t.from.toString(),"-"),i.Range=n):this._zeroStart&&(i.Range="bytes=0-"),{url:e,headers:i}},R.prototype.removeURLParameters=function(e){return e},R),b=(S.prototype.getConfig=function(e,t){var n;return 0===t.from&&-1===t.to||(n=!0,-1===e.indexOf("?")&&(e+="?",n=!1),n&&(e+="&"),e+="".concat(this._startName,"=").concat(t.from.toString()),-1!==t.to&&(e+="&".concat(this._endName,"=").concat(t.to.toString()))),{url:e,headers:{}}},S.prototype.removeURLParameters=function(e){var t=e.split("?")[0],n=void 0,i=e.indexOf("?"),r="";if(null!=(n=-1!==i?e.substring(i+1):n)&&0<n.length)for(var a=n.split("&"),o=0;o<a.length;o++){var s=a[o].split("=");s[0]!==this._startName&&s[0]!==this._endName&&(0<o&&(r+="&"),r+=a[o])}return 0===r.length?t:t+"?"+r},S),w=(T.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},T.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},T.prototype.isPaused=function(){return this._paused},Object.defineProperty(T.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"currentSpeed",{get:function(){return this._loaderClass===v?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),T.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new E(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new b(t,n)}else{if("custom"!==e.seekType)throw new g.OC("Invalid seekType in config: ".concat(e.seekType));if("function"!=typeof e.customSeekHandler)throw new g.OC("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},T.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=A;else if(_.isSupported())this._loaderClass=_;else if(y.isSupported())this._loaderClass=y;else{if(!v.isSupported())throw new g.OZ("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=v}},T.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},T.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},T.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},T.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},T.prototype.resume=function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))},T.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},T.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null,t={from:e,to:-1},this._currentRange={from:t.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,t),this._onSeeked&&this._onSeeked()},T.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new g.OC("Url must be a non-empty string!");this._dataSource.url=e},T.prototype._expandBuffer=function(e){for(var t,n,i=this._stashSize;i+1048576<e;)i*=2;(i+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(i),0<this._stashUsed&&(n=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,i).set(n,0)),this._stashBuffer=t,this._bufferSize=i)},T.prototype._normalizeSpeed=function(e){var t,n=this._speedNormalizeList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},T.prototype._adjustStashSize=function(e){var t=0;e=1024*(t=8192<(t=this._config.isLive||e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)?8192:t)+1048576,this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t},T.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},T.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},T.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},T.prototype._onLoaderChunkArrival=function(e,t,n){if(!this._onDataArrival)throw new g.rT("IOController: No existing consumer (onDataArrival) callback!");var i,r,a,o,s;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof)&&this._onRecoveredEarlyEof(),this._speedSampler.addBytes(e.byteLength),0!==(i=this._speedSampler.lastSecondKBps)&&(i=this._normalizeSpeed(i),this._speedNormalized!==i)&&(this._speedNormalized=i,this._adjustStashSize(i)),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?((a=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(a=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(i=this._stashBuffer.slice(0,this._stashUsed),(o=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?0<o&&(s=new Uint8Array(i,o),a.set(s,0),this._stashUsed=s.byteLength,this._stashByteStart+=o):(this._stashUsed=0,this._stashByteStart+=o),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&(this._expandBuffer(r),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o))):0===this._stashUsed?(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&this._expandBuffer(r),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(o=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<o&&(s=new Uint8Array(this._stashBuffer,o),a.set(s,0)),this._stashUsed-=o,this._stashByteStart+=o))},T.prototype._flushStashBuffer=function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),i=t.byteLength-n;if(n<t.byteLength){if(!e)return 0<n&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,n),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=n),0;d.Z.w(this.TAG,"".concat(i," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,i}return 0},T.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},T.prototype._onLoaderError=function(e,t){switch(d.Z.e(this.TAG,"Loader error, code = ".concat(t.code,", msg = ").concat(t.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=p.nm.UNRECOVERABLE_EARLY_EOF),e){case p.nm.EARLY_EOF:var n;if(!this._config.isLive&&this._totalLength)return void((n=this._currentRange.to+1)<this._totalLength&&(d.Z.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)));e=p.nm.UNRECOVERABLE_EARLY_EOF;case p.nm.UNRECOVERABLE_EARLY_EOF:case p.nm.CONNECTING_TIMEOUT:case p.nm.HTTP_STATUS_CODE_INVALID:case p.nm.EXCEPTION:}if(!this._onError)throw new g.OZ("IOException: "+t.msg);this._onError(e,t)},T);function T(e,t,n){this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=393216,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new f,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function S(e,t){this._startName=e,this._endName=t}function R(e){this._zeroStart=e||!1}function I(){var e=r.call(this,"websocket-loader")||this;return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function C(e,t){var n=o.call(this,"xhr-range-loader")||this;return n.TAG="RangeLoader",n._seekHandler=e,n._config=t,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new f,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}function L(e,t){var n=l.call(this,"xhr-msstream-loader")||this;return n.TAG="MSStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._reader=null,n._totalRange=null,n._currentRange=null,n._currentRequestURL=null,n._currentRedirectedURL=null,n._contentLength=null,n._receivedLength=0,n._bufferLimit=16777216,n._lastTimeBufferSize=0,n._isReconnecting=!1,n}function P(e,t){var n=c.call(this,"xhr-moz-chunked-loader")||this;return n.TAG="MozChunkedLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function D(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}},475:function(e,t,n){n.d(t,{GM:function(){return r},fp:function(){return o},nm:function(){return a}});var i=n(996),r={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},a={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},o=(s.prototype.destroy=function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},s.prototype.isWorking=function(){return this._status===r.kConnecting||this._status===r.kBuffering},Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),s.prototype.open=function(e,t){throw new i.do("Unimplemented abstract function!")},s.prototype.abort=function(){throw new i.do("Unimplemented abstract function!")},s);function s(e){this._type=e||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},340:function(e,t){var n,i,r={},a=self.navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0<=a.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(a)||[];for(i in a=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(android)/.exec(a)||/(windows)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||[],o={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",majorVersion:o[4]||o[2]||"0",platform:a[0]||""},a={},o.browser&&(a[o.browser]=!0,n=o.majorVersion.split("."),a.version={major:parseInt(o.majorVersion,10),string:o.version},1<n.length&&(a.version.minor=parseInt(n[1],10)),2<n.length)&&(a.version.build=parseInt(n[2],10)),o.platform&&(a[o.platform]=!0),(a.chrome||a.opr||a.safari)&&(a.webkit=!0),(a.rv||a.iemobile)&&(a.rv&&delete a.rv,o.browser="msie",a.msie=!0),a.edge&&(delete a.edge,o.browser="msedge",a.msedge=!0),a.opr&&(o.browser="opera",a.opera=!0),a.safari&&a.android&&(o.browser="android",a.android=!0),a.name=o.browser,a.platform=o.platform,r)r.hasOwnProperty(i)&&delete r[i];Object.assign(r,a),t.Z=r},996:function(e,t,n){function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}n.d(t,{OC:function(){return c},OZ:function(){return l},do:function(){return h},rT:function(){return u}}),r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},Object.defineProperty(m.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),m.prototype.toString=function(){return this.name+": "+this.message};var r,a,o,s,l=m,u=(i(p,s=l),Object.defineProperty(p.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),p),c=(i(f,o=l),Object.defineProperty(f.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),f),h=(i(d,a=l),Object.defineProperty(d.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),d);function d(e){return a.call(this,e)||this}function f(e){return o.call(this,e)||this}function p(e){return s.call(this,e)||this}function m(e){this._message=e}},240:function(e,t,n){var i=n(393);function r(){}n=n.n(i),r.e=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","error",e),r.ENABLE_ERROR&&!console.error&&console.warn},r.i=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","info",e),r.ENABLE_INFO&&console.info},r.w=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","warn",e),r.ENABLE_WARN&&console.warn},r.d=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","debug",e),r.ENABLE_DEBUG&&console.debug},r.v=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","verbose",e)},(i=r).GLOBAL_TAG="flv.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new(n()),t.Z=i},45:function(e,t,n){var i=n(393),r=(i=n.n(i),n(240));function a(){}Object.defineProperty(a,"forceGlobalTag",{get:function(){return r.Z.FORCE_GLOBAL_TAG},set:function(e){r.Z.FORCE_GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return r.Z.GLOBAL_TAG},set:function(e){r.Z.GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return r.Z.ENABLE_VERBOSE&&r.Z.ENABLE_DEBUG&&r.Z.ENABLE_INFO&&r.Z.ENABLE_WARN&&r.Z.ENABLE_ERROR},set:function(e){r.Z.ENABLE_VERBOSE=e,r.Z.ENABLE_DEBUG=e,r.Z.ENABLE_INFO=e,r.Z.ENABLE_WARN=e,r.Z.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return r.Z.ENABLE_DEBUG},set:function(e){r.Z.ENABLE_DEBUG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return r.Z.ENABLE_VERBOSE},set:function(e){r.Z.ENABLE_VERBOSE=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return r.Z.ENABLE_INFO},set:function(e){r.Z.ENABLE_INFO=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return r.Z.ENABLE_WARN},set:function(e){r.Z.ENABLE_WARN=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return r.Z.ENABLE_ERROR},set:function(e){r.Z.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:r.Z.GLOBAL_TAG,forceGlobalTag:r.Z.FORCE_GLOBAL_TAG,enableVerbose:r.Z.ENABLE_VERBOSE,enableDebug:r.Z.ENABLE_DEBUG,enableInfo:r.Z.ENABLE_INFO,enableWarn:r.Z.ENABLE_WARN,enableError:r.Z.ENABLE_ERROR,enableCallback:r.Z.ENABLE_CALLBACK}},a.applyConfig=function(e){r.Z.GLOBAL_TAG=e.globalTag,r.Z.FORCE_GLOBAL_TAG=e.forceGlobalTag,r.Z.ENABLE_VERBOSE=e.enableVerbose,r.Z.ENABLE_DEBUG=e.enableDebug,r.Z.ENABLE_INFO=e.enableInfo,r.Z.ENABLE_WARN=e.enableWarn,r.Z.ENABLE_ERROR=e.enableError,r.Z.ENABLE_CALLBACK=e.enableCallback},a._notifyChange=function(){var e,t=a.emitter;0<t.listenerCount("change")&&(e=a.getConfig(),t.emit("change",e))},a.registerListener=function(e){a.emitter.addListener("change",e)},a.removeListener=function(e){a.emitter.removeListener("change",e)},a.addLogListener=function(e){r.Z.emitter.addListener("log",e),0<r.Z.emitter.listenerCount("log")&&(r.Z.ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(e){r.Z.emitter.removeListener("log",e),0===r.Z.emitter.listenerCount("log")&&(r.Z.ENABLE_CALLBACK=!1,a._notifyChange())},(n=a).emitter=new(i()),t.Z=n},344:function(e,t,n){r.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},"function"!=typeof self.Promise&&n(970).polyfill()};var i=r;function r(){}i.install(),t.Z=i}},r={},n.m=i,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(611))}).call(this,n(75))},function(e,t,n){n.r(t),n.d(t,"NvMpegTsCore",(function(){return l}));var i=n(4),r=n(24);let a=n(5);n(30);let o=n(171),s=n(12);var l=class{constructor(e){this.configFormat={width:e.width||a.DEFAULT_WIDTH,height:e.height||a.DEFAULT_HEIGHT,playerId:e.playerId||a.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,duration:e.duration,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,audioNone:e.audioNone},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-jsmpegts",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=this.configFormat.duration/1e3||-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.vCodecID=a.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.isInitDecodeFrames=!1,this.reset_player=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1,this.checkStartIntervalCount=0,this.checkStartInterval=null,this.checkPicBlockInterval=null,this.bufferInterval=null,this.onPlayState=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onReadyShowDone=null,this.onCacheProcess=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.headers=e.headers,this.videoCodec=a.CODEC_H264,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}_reBuildMpegTsjs(e){this._releaseMpegTsjs(),this.makeIt(e)}_checkPicBlock(e){let t=this;this.checkPicBlockInterval=window.setInterval((function(){0<t.lastDecodedFrameTime&&1e4<s.GetMsTime()-t.lastDecodedFrameTime&&(window.clearInterval(t.checkPicBlockInterval),t.checkPicBlockInterval=null,t._reBuildMpegTsjs(e))}),1e3)}_checkLoadState(e){let t=this;this.checkStartIntervalCount=0,this.checkStartInterval=window.setInterval((function(){!1!==t.isInitDecodeFrames?(t.checkStartIntervalCount=0,window.clearInterval(t.checkStartInterval),t.checkStartInterval=null):(t.checkStartIntervalCount+=1,20<t.checkStartIntervalCount&&(window.clearInterval(t.checkStartInterval),t.checkStartIntervalCount=0,t.checkStartInterval=null,!1===t.isInitDecodeFrames)&&t._reBuildMpegTsjs(e))}),500)}init_player(e,t){let n=this,r={type:"mpegts",url:e,duration:this.configFormat.duration,isLive:!1};var s={hasVideo:!0,hasAudio:!(!0===this.configFormat.audioNone),isLive:this.configFormat.duration<=0,withCredentials:!1,seekType:"range",cors:!0,stashInitialSize:3145728,headers:this.headers};this.myPlayer=o.createPlayer(r,s),this.myPlayer.attachMediaElement(this.videoTag),this.myPlayer.on(o.Events.MEDIA_INFO,(function(e){var t;!1===n.isInitDecodeFrames&&(setTimeout((()=>{n.VrPlayer&&n.VrPlayer.loadVideo&&n.VrPlayer.loadVideo()}),1e3),n.isInitDecodeFrames=!0,n.width=Math.max(n.videoTag.videoWidth,e.width),n.height=Math.max(n.videoTag.videoHeight,e.height),n.videoCodec=e.mimeType&&-1<e.mimeType.indexOf("hvc1")?a.CODEC_H265:a.CODEC_H264,n.videoTag.duration&&e.duration?n.videoTag.duration?n.duration=n.videoTag.duration:e.duration&&(n.duration=e.duration):n.duration=n.configFormat.duration/1e3,(e=document.querySelector("#"+n.configFormat.playerId)).getElementsByTagName("video")[0]||(t=e.getElementsByTagName("div"),n.VRPlugin)||e.insertBefore(n.videoTag,t[0]),n.onLoadFinish&&n.onLoadFinish(),!1===n.reset_player&&n.onReadyShowDone&&n.onReadyShowDone(),n._loopBufferState(),n.videoTag.onplay=function(){var e=n.isPlayingState();n.onPlayState&&n.onPlayState(e)},n.videoTag.ontimeupdate=()=>{var e;n.myPlayer&&(e=n.seekReadyPts||n.myPlayer.currentTime,n.onPlayingTime&&n.onPlayingTime(e),n.getFrameRate())},n.videoTag.onpause=function(){var e=n.isPlayingState();!1===n.reset_player&&n.onPlayState&&n.onPlayState(e)},n.duration!==1/0&&0<n.duration&&(n.videoTag.onended=()=>{n.onPlayingFinish&&n.onPlayingFinish()}),n.videoTag.onseeked=function(){n.onSeekFinish&&n.onSeekFinish(n.seekResult)})})),this.myPlayer.on(o.Events.SCRIPTDATA_ARRIVED,(function(e){})),this.myPlayer.on(o.Events.ERROR,(function(t,r,a){a.code===i.MsgCode.PLAY_ERROR?n.onError&&n.onError({msg:a,event:t,url:e,errorType:t}):n.myPlayer&&416!=a.code&&n._reBuildMpegTsjs(e)})),this.myPlayer.load(),t&&(this.pause(),this.seekReadyPts=t)}makeIt(e){let t=this;var n,a,s;this.url=e,o.isSupported()?(n=document.querySelector("#"+this.configFormat.playerId),this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",a=n.getElementsByTagName("video")[0],s=n.getElementsByTagName("div"),this.configFormat.repeatPlay&&(this.videoTag.setAttribute("loop","loop"),a)&&a.setAttribute("loop","loop"),a?this.VRPlugin||n.insertBefore(a,s[0]):s[0]&&!this.VRPlugin&&n.insertBefore(this.videoTag,s[0]),this.VRPlugin&&!this.VrPlayer&&(this.VrPlayer=new r.a({video:this.videoTag,container:n,autoPlay:this.configFormat.autoPlay},this.VRPlugin)),!0===this.configFormat.autoPlay&&(window.onclick=document.body.onclick=function(e){t.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.oncanplay=function(){var e,n;!1===t.isInitDecodeFrames&&(t.isInitDecodeFrames=!0,(e=document.querySelector("#"+t.configFormat.playerId)).getElementsByTagName("video")[0]||(n=e.getElementsByTagName("div"),t.VRPlugin)||e.insertBefore(t.videoTag,n[0]),t.onLoadFinish&&t.onLoadFinish(),t.onReadyShowDone&&t.onReadyShowDone(),t._loopBufferState(),t.videoTag.ontimeupdate=()=>{t.onPlayingTime&&t.onPlayingTime(t.myPlayer.currentTime)},t.duration!==1/0)&&0<t.duration&&(t.videoTag.onended=()=>{t.onPlayingFinish&&t.onPlayingFinish()})},this.seekReadyPts?this.init_player(e,this.seekReadyPts):this.init_player(e),this._checkLoadState(e),this._checkPicBlock(e),t.onMakeItReady&&t.onMakeItReady()):t.onError&&t.onError({msg:i.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:i.ErrorTypes.NOT_SUPPORT,event:i.ErrorEvent.ERROR,url:e})}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.height}}play(){this.myPlayer.play()}reload_mpegts(e){this.reset_player=!0,this.myPlayer.unload(),this.myPlayer.load(),this.onLoadFinish&&this.onLoadFinish(!1),this.pause(),this.seekReadyPts=e}seek(e){var t,n,i;if(!(e>=this.duration))return this.videoTag.muted=!0,(i=this.videoTag.buffered).length?(t=i.length-1,n=i.end(t),i=i.start(t),n-1<=e?(this.seekReadyPts||(this.seekReadyPts=e),this.myPlayer.currentTime=parseFloat(n-.1),!(this.seekResult=!0)):i<=e?(this.onPlayingTime&&this.onPlayingTime(e-.1),this.myPlayer.currentTime=parseFloat(e),this.seekReadyPts&&this.seekReadyPts!==e&&(this.seekReadyPts=e),this.seekResult=!0):0==e&&0<=i?(this.myPlayer.currentTime=parseFloat(e),this.seekResult=!0):(this.reset_player||this.reload_mpegts(e),!1)):(this.reset_player||this.reload_mpegts(e),!1)}pause(){this.myPlayer&&this.myPlayer.pause()}setVoice(e){this.videoTag.volume=e}isPlayingState(){return!this.videoTag.paused}_loopBufferState(){let e=this;e.duration<=0&&e.videoTag.duration&&(e.duration=e.videoTag.duration),null!==e.bufferInterval&&(window.clearInterval(e.bufferInterval),e.bufferInterval=null),e.bufferInterval=window.setInterval((function(){if(e.configFormat.duration<=0)window.clearInterval(e.bufferInterval);else{var t,n=e.videoTag.buffered.length,i=e.videoTag.buffered.end.length;let r;n=i<n?n:i,(r=e.videoTag.buffered.length?e.videoTag.buffered.end(n-1):r)>=e.duration-.04&&(e.onCacheProcess&&e.onCacheProcess(e.duration),e.cacheCompleted=!0,window.clearInterval(e.bufferInterval)),e.onCacheProcess&&e.onCacheProcess(r),e.seekReadyPts&&r>e.seekReadyPts?(t=e.seek(e.seekReadyPts),(e.seekResult=t)&&(e.videoTag.paused&&(e.play(),e.videoTag.muted&&(e.videoTag.muted=!1),e.reset_player=!1),e.seekReadyPts=null)):e.seekReadyPts&&r<=e.seekReadyPts&&(t=e.seek(r-.1),e.seekResult=t)}}),200)}_releaseMpegTsjs(){this.myPlayer&&(this.myPlayer.pause(),this.myPlayer.unload(),this.myPlayer.detachMediaElement(),this.myPlayer.destroy(),this.myPlayer=null),this.videoTag&&(this.videoTag.remove(),this.videoTag=null),null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1}getMediaInfo(){if(!this.myPlayer||!this.myPlayer._mediaInfo||!this.myPlayer._statisticsInfo)return null;var e,t={video:{width:"width",height:"height",codec:"videoCodec",frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"ts_live":"ts_vod",demuxStyle:"ts",bitRate:"speed"},audio:{bitRate:"speed",sampleRate:"audioSampleRate",codec:this.getAudioCodec()}},n=Object.assign(this.myPlayer._mediaInfo,this.myPlayer._statisticsInfo);for(e in t){var i,r=t[e];for(i in r)n[r[i]]&&(t[e][i]=n[r[i]])}return t}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getAudioCodec(){return this.myPlayer._transmuxer&&this.myPlayer._transmuxer._controller._demuxer.audio_metadata_&&this.myPlayer._transmuxer._controller._demuxer.audio_metadata_.codec}release(){null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this._releaseMpegTsjs(),this.myPlayerID=null,this.videoContaner=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,window.onclick=document.body.onclick=null}}},function(e,t,n){function i(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,i),t.l=!0,t)).exports}var r,a;window,e.exports=(r=[function(e,t,n){var i=n(6);function r(){}n=n.n(i),r.e=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","error",e),r.ENABLE_ERROR&&!console.error&&console.warn},r.i=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","info",e),r.ENABLE_INFO&&console.info},r.w=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","warn",e),r.ENABLE_WARN&&console.warn},r.d=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","debug",e),r.ENABLE_DEBUG&&console.debug},r.v=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","verbose",e)},(i=r).GLOBAL_TAG="mpegts.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new n.a,t.a=i},function(e,t,n){t.a={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},function(e,t,n){n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n(3),r={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},a={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},o=(s.prototype.destroy=function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},s.prototype.isWorking=function(){return this._status===r.kConnecting||this._status===r.kBuffering},Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),s.prototype.open=function(e,t){throw new i.c("Unimplemented abstract function!")},s.prototype.abort=function(){throw new i.c("Unimplemented abstract function!")},s);function s(e){this._type=e||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},function(e,t,n){function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return h})),r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},Object.defineProperty(m.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),m.prototype.toString=function(){return this.name+": "+this.message};var r,a,o,s,l=m,u=(i(p,s=l),Object.defineProperty(p.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),p),c=(i(f,o=l),Object.defineProperty(f.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),f),h=(i(d,a=l),Object.defineProperty(d.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),d);function d(e){return a.call(this,e)||this}function f(e){return o.call(this,e)||this}function p(e){return s.call(this,e)||this}function m(e){this._message=e}},function(e,t,n){var i,r,a={},o=self.navigator.userAgent.toLowerCase(),s=/(edge)\/([\w.]+)/.exec(o)||/(opr)[\/]([\w.]+)/.exec(o)||/(chrome)[ \/]([\w.]+)/.exec(o)||/(iemobile)[\/]([\w.]+)/.exec(o)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(o)||/(webkit)[ \/]([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||0<=o.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(o)||o.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(o)||[];for(r in o=/(ipad)/.exec(o)||/(ipod)/.exec(o)||/(windows phone)/.exec(o)||/(iphone)/.exec(o)||/(kindle)/.exec(o)||/(android)/.exec(o)||/(windows)/.exec(o)||/(mac)/.exec(o)||/(linux)/.exec(o)||/(cros)/.exec(o)||[],s={browser:s[5]||s[3]||s[1]||"",version:s[2]||s[4]||"0",majorVersion:s[4]||s[2]||"0",platform:o[0]||""},o={},s.browser&&(o[s.browser]=!0,i=s.majorVersion.split("."),o.version={major:parseInt(s.majorVersion,10),string:s.version},1<i.length&&(o.version.minor=parseInt(i[1],10)),2<i.length)&&(o.version.build=parseInt(i[2],10)),s.platform&&(o[s.platform]=!0),(o.chrome||o.opr||o.safari)&&(o.webkit=!0),(o.rv||o.iemobile)&&(o.rv&&delete o.rv,s.browser="msie",o.msie=!0),o.edge&&(delete o.edge,s.browser="msedge",o.msedge=!0),o.opr&&(s.browser="opera",o.opera=!0),o.safari&&o.android&&(s.browser="android",o.android=!0),o.name=s.browser,o.platform=s.platform,a)a.hasOwnProperty(r)&&delete a[r];Object.assign(a,o),t.a=a},function(e,t,n){t.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(e,t,n){var i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},a=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}g(e,t,a,{once:!0}),"error"!==t&&"function"==typeof e.on&&g(e,"error",r,{once:!0})}))},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,a;return u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=c(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function d(e,t,n){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n}),t.listener=n,e.wrapFn=t}function f(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return m(e,e.length)}function p(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){if((o=0<t.length?t[0]:o)instanceof Error)throw o;throw(i=new Error("Unhandled error."+(o?" ("+o.message+")":""))).context=o,i}var o=a[e];if(void 0===o)return!1;if("function"==typeof o)r(o,this,t);else{var s=o.length,l=m(o,s);for(n=0;n<s;++n)r(l[n],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var n,i,r,a,o;if(u(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{for(var s=n,l=r;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.removeAllListeners=function(e){var t,n;if(void 0!==(n=this._events))if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},function(e,t,n){n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));var i=function(e,t,n,i,r){this.dts=e,this.pts=t,this.duration=n,this.originalDts=i,this.isSyncPoint=r,this.fileposition=null},r=(u.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},u),a=(l.prototype.clear=function(){this._list=[]},l.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},l.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t,n=this._list,i=0,r=n.length-1,a=0,o=r;for(e<n[0].dts&&(i=0,a=o+1);a<=o;){if((t=a+Math.floor((o-a)/2))===r||e>=n[t].dts&&e<n[t+1].dts){i=t;break}n[t].dts<e?a=t+1:o=t-1}return this._list[i]},l),o=(Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),s.prototype.isEmpty=function(){return 0===this._list.length},s.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},s.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var n,i=t.length-1,r=0,a=i,o=0;if(e<t[0].originalBeginDts)return-1;for(;r<=a;){if((n=r+Math.floor((a-r)/2))===i||e>t[n].lastSample.originalDts&&e<t[n+1].originalBeginDts){o=n;break}t[n].originalBeginDts<e?r=n+1:a=n-1}return o},s.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},s.prototype.append=function(e){var t=this._list,n=this._lastAppendLocation,i=0;-1!==n&&n<t.length&&e.originalBeginDts>=t[n].lastSample.originalDts&&(n===t.length-1||n<t.length-1&&e.originalBeginDts<t[n+1].originalBeginDts)?i=n+1:0<t.length&&(i=this._searchNearestSegmentBefore(e.originalBeginDts)+1),this._lastAppendLocation=i,this._list.splice(i,0,e)},s.prototype.getLastSegmentBefore=function(e){return 0<=(e=this._searchNearestSegmentBefore(e))?this._list[e]:null},s.prototype.getLastSampleBefore=function(e){return null!=(e=this.getLastSegmentBefore(e))?e.lastSample:null},s.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&0<t;)n=this._list[--t].syncPoints;return 0<n.length?n[n.length-1]:null},s);function s(e){this._type=e,this._list=[],this._lastAppendLocation=-1}function l(){this._list=[]}function u(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}},function(e,t,n){function i(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}i.prototype.isComplete=function(){var e=null!==this.hasAudio||!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!==this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&e&&t},i.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},i.prototype.getNearestKeyframe=function(e){var t;return null==this.keyframesIndex?null:(t=this.keyframesIndex,{index:e=this._search(t.times,e),milliseconds:t.times[e],fileposition:t.filepositions[e]})},i.prototype._search=function(e,t){var n,i=0,r=e.length-1,a=0,o=r;for(t<e[0]&&(i=0,a=o+1);a<=o;){if((n=a+Math.floor((o-a)/2))===r||t>=e[n]&&t<e[n+1]){i=n;break}e[n]<t?a=n+1:o=n-1}return i},t.a=i},function(e,t,n){var i=n(6),r=(i=n.n(i),n(0));function a(){}Object.defineProperty(a,"forceGlobalTag",{get:function(){return r.a.FORCE_GLOBAL_TAG},set:function(e){r.a.FORCE_GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return r.a.GLOBAL_TAG},set:function(e){r.a.GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return r.a.ENABLE_VERBOSE&&r.a.ENABLE_DEBUG&&r.a.ENABLE_INFO&&r.a.ENABLE_WARN&&r.a.ENABLE_ERROR},set:function(e){r.a.ENABLE_VERBOSE=e,r.a.ENABLE_DEBUG=e,r.a.ENABLE_INFO=e,r.a.ENABLE_WARN=e,r.a.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return r.a.ENABLE_DEBUG},set:function(e){r.a.ENABLE_DEBUG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return r.a.ENABLE_VERBOSE},set:function(e){r.a.ENABLE_VERBOSE=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return r.a.ENABLE_INFO},set:function(e){r.a.ENABLE_INFO=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return r.a.ENABLE_WARN},set:function(e){r.a.ENABLE_WARN=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return r.a.ENABLE_ERROR},set:function(e){r.a.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:r.a.GLOBAL_TAG,forceGlobalTag:r.a.FORCE_GLOBAL_TAG,enableVerbose:r.a.ENABLE_VERBOSE,enableDebug:r.a.ENABLE_DEBUG,enableInfo:r.a.ENABLE_INFO,enableWarn:r.a.ENABLE_WARN,enableError:r.a.ENABLE_ERROR,enableCallback:r.a.ENABLE_CALLBACK}},a.applyConfig=function(e){r.a.GLOBAL_TAG=e.globalTag,r.a.FORCE_GLOBAL_TAG=e.forceGlobalTag,r.a.ENABLE_VERBOSE=e.enableVerbose,r.a.ENABLE_DEBUG=e.enableDebug,r.a.ENABLE_INFO=e.enableInfo,r.a.ENABLE_WARN=e.enableWarn,r.a.ENABLE_ERROR=e.enableError,r.a.ENABLE_CALLBACK=e.enableCallback},a._notifyChange=function(){var e,t=a.emitter;0<t.listenerCount("change")&&(e=a.getConfig(),t.emit("change",e))},a.registerListener=function(e){a.emitter.addListener("change",e)},a.removeListener=function(e){a.emitter.removeListener("change",e)},a.addLogListener=function(e){r.a.emitter.addListener("log",e),0<r.a.emitter.listenerCount("log")&&(r.a.ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(e){r.a.emitter.removeListener("log",e),0===r.a.emitter.listenerCount("log")&&(r.a.ENABLE_CALLBACK=!1,a._notifyChange())},(n=a).emitter=new i.a,t.a=n},function(e,t,n){var i=n(6),r=n.n(i),a=n(0),o=n(4),s=n(8);function l(e,t,n){var i=e;if(t+n<i.length){for(;n--;)if(128!=(192&i[++t]))return;return 1}}function u(e){for(var t,n=[],i=e,r=0,a=e.length;r<a;){if(i[r]<128)n.push(String.fromCharCode(i[r]));else{if(!(i[r]<192))if(i[r]<224){if(l(i,r,1)&&128<=(t=(31&i[r])<<6|63&i[r+1])){n.push(String.fromCharCode(65535&t)),r+=2;continue}}else if(i[r]<240){if(l(i,r,2)&&2048<=(t=(15&i[r])<<12|(63&i[r+1])<<6|63&i[r+2])&&55296!=(63488&t)){n.push(String.fromCharCode(65535&t)),r+=3;continue}}else if(i[r]<248&&l(i,r,3)&&65536<(t=(7&i[r])<<18|(63&i[r+1])<<12|(63&i[r+2])<<6|63&i[r+3])&&t<1114112){t-=65536,n.push(String.fromCharCode(t>>>10|55296)),n.push(String.fromCharCode(1023&t|56320)),r+=4;continue}n.push(String.fromCharCode(65533))}++r}return n.join("")}var c=n(3),h=(i=new ArrayBuffer(2),new DataView(i).setInt16(0,256,!0),256===new Int16Array(i)[0]),d=(A.parseScriptData=function(e,t,n){var i={};try{var r=A.parseValue(e,t,n),o=A.parseValue(e,t+r.size,n-r.size);i[r.data]=o.data}catch(e){a.a.e("AMF",e.toString())}return i},A.parseObject=function(e,t,n){if(n<3)throw new c.a("Data not enough when parse ScriptDataObject");var i=A.parseString(e,t,n);return t=(e=A.parseValue(e,t+i.size,n-i.size)).objectEnd,{data:{name:i.data,value:e.data},size:i.size+e.size,objectEnd:t}},A.parseVariable=function(e,t,n){return A.parseObject(e,t,n)},A.parseString=function(e,t,n){if(n<2)throw new c.a("Data not enough when parse String");return{data:0<(n=new DataView(e,t,n).getUint16(0,!h))?u(new Uint8Array(e,t+2,n)):"",size:2+n}},A.parseLongString=function(e,t,n){if(n<4)throw new c.a("Data not enough when parse LongString");return{data:0<(n=new DataView(e,t,n).getUint32(0,!h))?u(new Uint8Array(e,t+4,n)):"",size:4+n}},A.parseDate=function(e,t,n){if(n<10)throw new c.a("Data size invalid when parse Date");return t=(e=new DataView(e,t,n)).getFloat64(0,!h),n=e.getInt16(8,!h),{data:new Date(t+=60*n*1e3),size:10}},A.parseValue=function(e,t,n){if(n<1)throw new c.a("Data not enough when parse Value");var i=new DataView(e,t,n),r=1,o=i.getUint8(0),s=!1;try{switch(o){case 0:u=i.getFloat64(1,!h),r+=8;break;case 1:u=!!i.getUint8(1),r+=1;break;case 2:var l=A.parseString(e,t+1,n-1),u=l.data;r+=l.size;break;case 3:u={};var d=0;for(9==(16777215&i.getUint32(n-4,!h))&&(d=3);r<n-4;){var f=A.parseObject(e,t+r,n-r-d);if(f.objectEnd)break;u[f.data.name]=f.data.value,r+=f.size}r<=n-3&&9==(16777215&i.getUint32(r-1,!h))&&(r+=3);break;case 8:for(u={},r+=4,d=0,9==(16777215&i.getUint32(n-4,!h))&&(d=3);r<n-8;){var p=A.parseVariable(e,t+r,n-r-d);if(p.objectEnd)break;u[p.data.name]=p.data.value,r+=p.size}r<=n-3&&9==(16777215&i.getUint32(r-1,!h))&&(r+=3);break;case 9:r=1,s=!(u=void 0);break;case 10:u=[];var m=i.getUint32(1,!h);r+=4;for(var g=0;g<m;g++){var _=A.parseValue(e,t+r,n-r);u.push(_.data),r+=_.size}break;case 11:var y=A.parseDate(e,t+1,n-1);u=y.data,r+=y.size;break;case 12:var v=A.parseString(e,t+1,n-1);u=v.data,r+=v.size;break;default:r=n,a.a.w("AMF","Unsupported AMF value type "+o)}}catch(e){a.a.e("AMF",e.toString())}return{data:u,size:r,objectEnd:s}},A),f=(v.prototype.destroy=function(){this._buffer=null},v.prototype._fillCurrentWord=function(){if((e=this._total_bytes-this._buffer_index)<=0)throw new c.a("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,e),t=new Uint8Array(4);t.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(t.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e},v.prototype.readBits=function(e){if(32<e)throw new c.b("ExpGolomb: readBits() bits exceeded max 32bits!");var t,n;return e<=this._current_word_bits_left?(t=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t):(t=this._current_word_bits_left?this._current_word:0,t>>>=32-this._current_word_bits_left,e-=this._current_word_bits_left,this._fillCurrentWord(),e=Math.min(e,this._current_word_bits_left),n=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t<<e|n)},v.prototype.readBool=function(){return 1===this.readBits(1)},v.prototype.readByte=function(){return this.readBits(8)},v.prototype._skipLeadingZero=function(){for(var e=0;e<this._current_word_bits_left;e++)if(this._current_word&2147483648>>>e)return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},v.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},v.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},v),p=(y._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},y.parseSPS=function(e){for(var t=e.subarray(1,4),n="avc1.",i=0;i<3;i++){var r=t[i].toString(16);n+=r=r.length<2?"0"+r:r}e=y._ebsp2rbsp(e);var a=new f(e),o=(a.readByte(),e=a.readByte(),a.readByte(),a.readByte()),s=(a.readUEG(),y.getProfileString(e)),l=y.getLevelString(o),u=1,c=420,h=8,d=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(3===(u=a.readUEG())&&a.readBits(1),u<=3&&(c=[0,420,422,444][u]),h=a.readUEG()+8,d=a.readUEG()+8,a.readBits(1),a.readBool()))for(var p=3!==u?8:12,m=0;m<p;m++)a.readBool()&&y._skipScalingList(a,m<6?16:64);if(a.readUEG(),0===(_=a.readUEG()))a.readUEG();else if(1===_){a.readBits(1),a.readSEG(),a.readSEG();var g=a.readUEG();for(m=0;m<g;m++)a.readSEG()}var _=a.readUEG(),v=(a.readBits(1),a.readUEG()),A=a.readUEG(),E=(0===(M=a.readBits(1))&&a.readBits(1),a.readBits(1),0),b=0,w=0,T=0,S=(a.readBool()&&(E=a.readUEG(),b=a.readUEG(),w=a.readUEG(),T=a.readUEG()),1),R=1,I=0,C=!0,L=0,P=0,D=(a.readBool()&&(a.readBool()&&(0<(k=a.readByte())&&k<16?(S=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][k-1],R=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][k-1]):255===k&&(S=a.readByte()<<8|a.readByte(),R=a.readByte()<<8|a.readByte())),a.readBool()&&a.readBool(),a.readBool()&&(a.readBits(4),a.readBool())&&a.readBits(24),a.readBool()&&(a.readUEG(),a.readUEG()),a.readBool())&&(k=a.readBits(32),D=a.readBits(32),C=a.readBool(),I=(L=D)/(P=2*k)),1),k=(1===S&&1===R||(D=S/R),0),x=0===u?(k=1,2-M):(k=3===u?1:2,(1===u?2:1)*(2-M)),M=(v=16*(v+1),A=16*(A+1)*(2-M),v-=(E+b)*k,A-=(w+T)*x,Math.ceil(v*D));return a.destroy(),a=null,{codec_mimetype:n,profile_idc:e,level_idc:o,profile_string:s,level_string:l,chroma_format_idc:u,bit_depth:h,bit_depth_luma:h,bit_depth_chroma:d,ref_frames:_,chroma_format:c,chroma_format_string:y.getChromaFormatString(c),frame_rate:{fixed:C,fps:I,fps_den:P,fps_num:L},sar_ratio:{width:S,height:R},codec_size:{width:v,height:A},present_size:{width:M,height:A}}},y._skipScalingList=function(e,t){for(var n=8,i=8,r=0;r<t;r++)n=0===(i=0!==i?(n+e.readSEG()+256)%256:i)?n:i},y.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},y.getLevelString=function(e){return(e/10).toFixed(1)},y.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},y),m=n(5),g=(_._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),r=0,a=0;a<n;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(i[r]=t[a],r++);return new Uint8Array(i.buffer,0,r)},_.parseVPS=function(e){return e=_._ebsp2rbsp(e),(e=new f(e)).readByte(),e.readByte(),e.readBits(4),e.readBits(2),e.readBits(6),{num_temporal_layers:e.readBits(3)+1,temporal_id_nested:e.readBool()}},_.parseSPS=function(e){e=_._ebsp2rbsp(e);var t=new f(e);t.readByte(),t.readByte(),e=0;for(var n=0,i=0,r=0,a=(t.readBits(4),t.readBits(3)),o=(t.readBool(),t.readBits(2)),s=t.readBool(),l=t.readBits(5),u=t.readByte(),c=t.readByte(),h=t.readByte(),d=t.readByte(),p=t.readByte(),m=t.readByte(),g=t.readByte(),y=t.readByte(),v=t.readByte(),A=t.readByte(),E=t.readByte(),b=[],w=[],T=0;T<a;T++)b.push(t.readBool()),w.push(t.readBool());if(0<a)for(T=a;T<8;T++)t.readBits(2);for(T=0;T<a;T++)b[T]&&(t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte()),w[T]&&t.readByte();t.readUEG();var S=t.readUEG(),R=(3==S&&t.readBits(1),t.readUEG()),I=t.readUEG(),C=(t.readBool()&&(e+=t.readUEG(),n+=t.readUEG(),i+=t.readUEG(),r+=t.readUEG()),t.readUEG()),L=t.readUEG(),P=t.readUEG();for(T=t.readBool()?0:a;T<=a;T++)t.readUEG(),t.readUEG(),t.readUEG();if(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBool()&&t.readBool())for(var D=0;D<4;D++)for(var k=0;k<(3===D?2:6);k++)if(t.readBool()){var x=Math.min(64,1<<4+(D<<1));for(1<D&&t.readSEG(),T=0;T<x;T++)t.readSEG()}else t.readUEG();t.readBool(),t.readBool(),t.readBool()&&(t.readByte(),t.readUEG(),t.readUEG(),t.readBool());var M=t.readUEG(),O=0;for(T=0;T<M;T++){var N=!1;if(N=0!==T?t.readBool():N){T===M&&t.readUEG(),t.readBool(),t.readUEG();for(var F=0,B=0;B<=O;B++){var U=t.readBool(),j=!1;U||(j=t.readBool()),(U||j)&&F++}O=F}else{var G=t.readUEG(),V=t.readUEG();for(O=G+V,B=0;B<G;B++)t.readUEG(),t.readBool();for(B=0;B<V;B++)t.readUEG(),t.readBool()}}if(t.readBool()){var H=t.readUEG();for(T=0;T<H;T++){for(B=0;B<P+4;B++)t.readBits(1);t.readBits(1)}}var Y=0,z=1,W=1,K=!1,q=1,Q=1;if(t.readBool(),t.readBool(),t.readBool()){if(t.readBool()&&(0<(ie=t.readByte())&&ie<=16?(z=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][ie-1],W=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][ie-1]):255===ie&&(z=t.readBits(16),W=t.readBits(16))),t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(3),t.readBool(),t.readBool())&&(t.readByte(),t.readByte(),t.readByte()),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool(),t.readBool(),t.readBool(),t.readBool()&&(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG()),t.readBool()&&(q=t.readBits(32),Q=t.readBits(32),t.readBool())&&(t.readUEG(),t.readBool())){var X=!1,J=t.readBool(),Z=t.readBool();for((J||Z)&&((X=t.readBool())&&(t.readByte(),t.readBits(5),t.readBool(),t.readBits(5)),t.readBits(4),t.readBits(4),X&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5)),T=0;T<=a;T++){var $=t.readBool(),ee=(K=$,!1),te=1,ne=!1;if((ee=$?ee:t.readBool())?t.readSEG():ne=t.readBool(),ne||(te=t.readUEG()+1),J)for(B=0;B<te;B++)t.readUEG(),t.readUEG(),X&&(t.readUEG(),t.readUEG());if(Z)for(B=0;B<te;B++)t.readUEG(),t.readUEG(),X&&(t.readUEG(),t.readUEG())}}t.readBool()&&(t.readBool(),t.readBool(),t.readBool(),Y=t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG())}t.readBool();var ie="hvc1."+l+".1.L"+E+".B0";return R-=(e+n)*(1===S||2===S?2:1),e=I-(i+r)*(1===S?2:1),n=1!==z&&1!==W?z/W:1,t.destroy(),t=null,{codec_mimetype:ie,level_string:_.getLevelString(E),profile_idc:l,bit_depth:C+8,ref_frames:1,chroma_format:S,chroma_format_string:_.getChromaFormatString(S),general_level_idc:E,general_profile_space:o,general_tier_flag:s,general_profile_idc:l,general_profile_compatibility_flags_1:u,general_profile_compatibility_flags_2:c,general_profile_compatibility_flags_3:h,general_profile_compatibility_flags_4:d,general_constraint_indicator_flags_1:p,general_constraint_indicator_flags_2:m,general_constraint_indicator_flags_3:g,general_constraint_indicator_flags_4:y,general_constraint_indicator_flags_5:v,general_constraint_indicator_flags_6:A,min_spatial_segmentation_idc:Y,constant_frame_rate:0,chroma_format_idc:S,bit_depth_luma_minus8:C,bit_depth_chroma_minus8:L,frame_rate:{fixed:K,fps:Q/q,fps_den:q,fps_num:Q},sar_ratio:{width:z,height:W},codec_size:{width:R,height:e},present_size:{width:R*n,height:e}}},_.parsePPS=function(e){e=_._ebsp2rbsp(e);var t=((e=new f(e)).readByte(),e.readByte(),e.readUEG(),e.readUEG(),e.readBool(),e.readBool(),e.readBits(3),e.readBool(),e.readBool(),e.readUEG(),e.readUEG(),e.readSEG(),e.readBool(),e.readBool(),e.readBool()&&e.readUEG(),e.readSEG(),e.readSEG(),e.readBool(),e.readBool(),e.readBool(),e.readBool(),e.readBool()),n=1;return(e=e.readBool())&&t?n=0:e?n=3:t&&(n=2),{parallelismType:n}},_.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},_.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},_.getLevelString=function(e){return(e/30).toFixed(1)},_);function _(){}function y(){}function v(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function A(){}function E(e){return e.byteOffset%2==0&&e.byteLength%2==0}function b(e){return e.byteOffset%4==0&&e.byteLength%4==0}function w(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function T(e,t){return e.byteLength===t.byteLength&&(b(e)&&b(t)?(n=t,w(new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4),new Uint32Array(n.buffer,n.byteOffset,n.byteLength/4))):E(e)&&E(t)?(n=t,w(new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2))):w(e,t));var n}function S(){this.program_pmt_pid={}}P.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},P.probe=function(e){var t,n,i;return(e=new Uint8Array(e)).byteLength<9?{needMoreData:!0}:(t={match:!1},70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3]||(n=(4&e[4])>>>2!=0,i=!!(1&e[4]),(e=e[5]<<24|e[6]<<16|e[7]<<8|e[8])<9)?t:{match:!0,consumed:e,dataOffset:e,hasAudioTrack:n,hasVideoTrack:i})},P.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(P.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),P.prototype.resetMediaInfo=function(){this._mediaInfo=new s.a},P.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},P.prototype.parseChunks=function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new c.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0,i=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;n=P.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+n!==this._dataOffset&&a.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(r=new DataView(e,n)).getUint32(0,!i)&&a.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4);n<e.byteLength;){this._dispatch=!0;var r=new DataView(e,n);if(n+11+4>e.byteLength)break;var o=r.getUint8(0),s=16777215&r.getUint32(0,!i);if(n+11+s+4>e.byteLength)break;if(8===o||9===o||18===o){var l=r.getUint8(4),u=r.getUint8(5),h=r.getUint8(6)|u<<8|l<<16|r.getUint8(7)<<24,d=(!!(16777215&r.getUint32(7,!i))&&a.a.w(this.TAG,"Meet tag which has StreamID != 0!"),n+11);switch(o){case 8:this._parseAudioData(e,d,s,h);break;case 9:this._parseVideoData(e,d,s,h,t+n);break;case 18:this._parseScriptData(e,d,s)}(u=r.getUint32(11+s,!i))!==11+s&&a.a.w(this.TAG,"Invalid PrevTagSize "+u)}else a.a.w(this.TAG,"Unsupported tag type "+o+", skipped");n+=11+s+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),n},P.prototype._parseScriptData=function(e,t,n){if((e=d.parseScriptData(e,t,n)).hasOwnProperty("onMetaData")){if(null==e.onMetaData||"object"!=typeof e.onMetaData)return void a.a.w(this.TAG,"Invalid onMetaData structure!");var i;this._metadata&&a.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=e,t=this._metadata.onMetaData,this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},t)),"boolean"==typeof t.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=t.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof t.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=t.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof t.audiodatarate&&(this._mediaInfo.audioDataRate=t.audiodatarate),"number"==typeof t.videodatarate&&(this._mediaInfo.videoDataRate=t.videodatarate),"number"==typeof t.width&&(this._mediaInfo.width=t.width),"number"==typeof t.height&&(this._mediaInfo.height=t.height),"number"==typeof t.duration?this._durationOverrided||(n=Math.floor(t.duration*this._timescale),this._duration=n,this._mediaInfo.duration=n):this._mediaInfo.duration=0,"number"==typeof t.framerate&&0<(n=Math.floor(1e3*t.framerate))&&(i=n/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=i,this._referenceFrameRate.fps_num=n,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=i),"object"==typeof t.keyframes?(this._mediaInfo.hasKeyframesIndex=!0,n=t.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(n),t.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=t,a.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(e).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},e))},P.prototype._parseKeyframesIndex=function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var r=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(r),n.push(e.filepositions[i])}return{times:t,filepositions:n}},P.prototype._parseAudioData=function(e,t,n,i){if(n<=1)a.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var r=(u=new DataView(e,t,n).getUint8(0))>>>4;if(2==r||10==r){var o=(12&u)>>>2;if(0<=o&&o<=4){var s,l=this._flvSoundRateTable[o],u=1&u,c=this._audioMetadata,h=this._audioTrack;if(c||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(c=this._audioMetadata={}).type="audio",c.id=h.id,c.timescale=this._timescale,c.duration=this._duration,c.audioSampleRate=l,c.channelCount=0==u?1:2),10==r){if(null!=(l=this._parseAACAudioData(e,t+1,n-1)))if(0===l.packetType){if(c.config){if(T(l.data.config,c.config))return;a.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var d=l.data;c.audioSampleRate=d.samplingRate,c.channelCount=d.channelCount,c.codec=d.codec,c.originalCodec=d.originalCodec,c.config=d.config,c.refSampleDuration=1024/c.audioSampleRate*c.timescale,a.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",c),(s=this._mediaInfo).audioCodec=c.originalCodec,s.audioSampleRate=c.audioSampleRate,s.audioChannelCount=c.channelCount,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)}else 1===l.packetType?(f=this._timestampBase+i,u={unit:l.data,length:l.data.byteLength,dts:f,pts:f},h.samples.push(u),h.length+=l.data.length):a.a.e(this.TAG,"Flv: Unsupported AAC data type "+l.packetType)}else if(2==r){if(!c.codec){if(null==(d=this._parseMP3AudioData(e,t+1,n-1,!0)))return;c.audioSampleRate=d.samplingRate,c.channelCount=d.channelCount,c.codec=d.codec,c.originalCodec=d.originalCodec,c.refSampleDuration=1152/c.audioSampleRate*c.timescale,a.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",c),(s=this._mediaInfo).audioCodec=c.codec,s.audioSampleRate=c.audioSampleRate,s.audioChannelCount=c.channelCount,s.audioDataRate=d.bitRate,s.hasVideo?null!=s.videoCodec&&(s.mimeType='video/x-flv; codecs="'+s.videoCodec+","+s.audioCodec+'"'):s.mimeType='video/x-flv; codecs="'+s.audioCodec+'"',s.isComplete()&&this._onMediaInfo(s)}var f;null!=(u=this._parseMP3AudioData(e,t+1,n-1,!1))&&(f=this._timestampBase+i,l={unit:u,length:u.byteLength,dts:f,pts:f},h.samples.push(l),h.length+=u.length)}}else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+o)}else this._onError(m.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+r)}},P.prototype._parseAACAudioData=function(e,t,n){var i,r;if(!(n<=1))return i={},r=new Uint8Array(e,t,n),i.packetType=r[0],0===r[0]?i.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):i.data=r.subarray(1),i;a.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},P.prototype._parseAACAudioSpecificConfig=function(e,t,n){e=new Uint8Array(e,t,n),t=null,n=0;var i,r,a=null;if(n=i=e[0]>>>3,(r=(7&e[0])<<1|e[1]>>>7)<0||r>=this._mpegSamplingRates.length)this._onError(m.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var o=this._mpegSamplingRates[r],s=(120&e[1])>>>3;if(!(s<0||8<=s))return 5===n&&(a=(7&e[1])<<1|e[2]>>>7,e[2]),-1!==(e=self.navigator.userAgent.toLowerCase()).indexOf("firefox")?a=6<=r?(n=5,t=new Array(4),r-3):(n=2,t=new Array(2),r):-1!==e.indexOf("android")?(n=2,t=new Array(2),a=r):(n=5,a=r,t=new Array(4),6<=r?a=r-3:1==s&&(n=2,t=new Array(2),a=r)),t[0]=n<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&s)<<3,5===n&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),{config:t,samplingRate:o,channelCount:s,codec:"mp4a.40."+n,originalCodec:"mp4a.40."+i};this._onError(m.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},P.prototype._parseMP3AudioData=function(e,t,n,i){if(!(n<4)){if(this._littleEndian,e=new Uint8Array(e,t,n),t=null,i){if(255!==e[0])return;n=e[1]>>>3&3,i=(6&e[1])>>1;var r=(240&e[2])>>>4,o=(12&e[2])>>>2,s=3&~(e[3]>>>6)?2:1,l=0,u=0;switch(n){case 0:l=this._mpegAudioV25SampleRateTable[o];break;case 2:l=this._mpegAudioV20SampleRateTable[o];break;case 3:l=this._mpegAudioV10SampleRateTable[o]}switch(i){case 1:r<this._mpegAudioL3BitRateTable.length&&(u=this._mpegAudioL3BitRateTable[r]);break;case 2:r<this._mpegAudioL2BitRateTable.length&&(u=this._mpegAudioL2BitRateTable[r]);break;case 3:r<this._mpegAudioL1BitRateTable.length&&(u=this._mpegAudioL1BitRateTable[r])}t={bitRate:u,samplingRate:l,channelCount:s,codec:"mp3",originalCodec:"mp3"}}else t=e;return t}a.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},P.prototype._parseVideoData=function(e,t,n,i,r){var o,s,l,u;n<=1?a.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(s=(112&(o=new Uint8Array(e,t,n)[0]))>>>4,128&o?(l=15&o,"hvc1"!==(u=String.fromCharCode.apply(String,new Uint8Array(e,t,n).slice(1,5)))?this._onError(m.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+u):this._parseEnhancedHEVCVideoPacket(e,t+5,n-5,i,r,s,l)):7==(u=15&o)?this._parseAVCVideoPacket(e,t+1,n-1,i,r,s):12!=u?this._onError(m.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+u):this._parseHEVCVideoPacket(e,t+1,n-1,i,r,s))},P.prototype._parseAVCVideoPacket=function(e,t,n,i,r,o){if(n<4)a.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var s=this._littleEndian,l=(u=new DataView(e,t,n)).getUint8(0),u=(16777215&u.getUint32(0,!s))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseAVCVideoData(e,t+4,n-4,i,r,o,u);else if(2!==l)return void this._onError(m.a.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}},P.prototype._parseHEVCVideoPacket=function(e,t,n,i,r,o){if(n<4)a.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var s=this._littleEndian,l=(u=new DataView(e,t,n)).getUint8(0),u=(16777215&u.getUint32(0,!s))<<8>>8;if(0===l)this._parseHEVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===l)this._parseHEVCVideoData(e,t+4,n-4,i,r,o,u);else if(2!==l)return void this._onError(m.a.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}},P.prototype._parseEnhancedHEVCVideoPacket=function(e,t,n,i,r,o,s){if(n<4)a.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var l=this._littleEndian,u=new DataView(e,t,n);if(0===s)this._parseHEVCDecoderConfigurationRecord(e,t,n);else if(1===s)u=(4294967040&u.getUint32(0,!l))>>8,this._parseHEVCVideoData(e,t+3,n-3,i,r,o,u);else if(3===s)this._parseHEVCVideoData(e,t,n,i,r,o,0);else if(2!==s)return void this._onError(m.a.FORMAT_ERROR,"Flv: Invalid video packet type "+s)}},P.prototype._parseAVCDecoderConfigurationRecord=function(e,t,n){if(n<7)a.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,r=this._videoTrack,o=this._littleEndian,s=new DataView(e,t,n);if(i){if(void 0!==i.avcc){var l=new Uint8Array(e,t,n);if(T(l,i.avcc))return;a.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration;if(l=s.getUint8(0),r=s.getUint8(1),s.getUint8(2),s.getUint8(3),1===l&&0!==r)if(this._naluLengthSize=1+(3&s.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var u=31&s.getUint8(5);if(0!=u){1<u&&a.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+u);for(var c=6,h=0;h<u;h++){var d=s.getUint16(c,!o);if(c+=2,0!==d){var f=new Uint8Array(e,t+c,d),g=(c+=d,p.parseSPS(f));if(0===h){i.codecWidth=g.codec_size.width,i.codecHeight=g.codec_size.height,i.presentWidth=g.present_size.width,i.presentHeight=g.present_size.height,i.profile=g.profile_string,i.level=g.level_string,i.bitDepth=g.bit_depth,i.chromaFormat=g.chroma_format,i.sarRatio=g.sar_ratio,i.frameRate=g.frame_rate,!1!==g.frame_rate.fixed&&0!==g.frame_rate.fps_num&&0!==g.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate);var _=i.frameRate.fps_den,y=i.frameRate.fps_num;i.refSampleDuration=i.timescale*(_/y);for(var v=f.subarray(1,4),A="avc1.",E=0;E<3;E++){var b=v[E].toString(16);A+=b=b.length<2?"0"+b:b}i.codec=A,(_=this._mediaInfo).width=i.codecWidth,_.height=i.codecHeight,_.fps=i.frameRate.fps,_.profile=i.profile,_.level=i.level,_.refFrames=g.ref_frames,_.chromaFormat=g.chroma_format_string,_.sarNum=i.sarRatio.width,_.sarDen=i.sarRatio.height,_.videoCodec=A,_.hasAudio?null!=_.audioCodec&&(_.mimeType='video/x-flv; codecs="'+_.videoCodec+","+_.audioCodec+'"'):_.mimeType='video/x-flv; codecs="'+_.videoCodec+'"',_.isComplete()&&this._onMediaInfo(_)}}}var w=s.getUint8(c);if(0!==w){for(1<w&&a.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+w),c++,h=0;h<w;h++)d=s.getUint16(c,!o),c+=2,0!==d&&(c+=d);i.avcc=new Uint8Array(n),i.avcc.set(new Uint8Array(e,t,n),0),a.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(m.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},P.prototype._parseHEVCDecoderConfigurationRecord=function(e,t,n){if(n<22)a.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var i=this._videoMetadata,r=this._videoTrack,o=this._littleEndian,s=new DataView(e,t,n);if(i){if(void 0!==i.hvcc){var l=new Uint8Array(e,t,n);if(T(l,i.hvcc))return;a.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(i=this._videoMetadata={}).type="video",i.id=r.id,i.timescale=this._timescale,i.duration=this._duration;if(l=s.getUint8(0),r=31&s.getUint8(1),1===l&&0!=r)if(this._naluLengthSize=1+(3&s.getUint8(21)),3===this._naluLengthSize||4===this._naluLengthSize){for(var u=s.getUint8(22),c=0,h=23;c<u;c++){var d=63&s.getUint8(h+0),f=s.getUint16(h+1,!o);h+=3;for(var p=0;p<f;p++){var _,y,v,A=s.getUint16(h+0,!o);0===p&&33==d?(h+=2,_=new Uint8Array(e,t+h,A),_=g.parseSPS(_),i.codecWidth=_.codec_size.width,i.codecHeight=_.codec_size.height,i.presentWidth=_.present_size.width,i.presentHeight=_.present_size.height,i.profile=_.profile_string,i.level=_.level_string,i.bitDepth=_.bit_depth,i.chromaFormat=_.chroma_format,i.sarRatio=_.sar_ratio,i.frameRate=_.frame_rate,!1!==_.frame_rate.fixed&&0!==_.frame_rate.fps_num&&0!==_.frame_rate.fps_den||(i.frameRate=this._referenceFrameRate),v=i.frameRate.fps_den,y=i.frameRate.fps_num,i.refSampleDuration=i.timescale*(v/y),i.codec=_.codec_mimetype,(v=this._mediaInfo).width=i.codecWidth,v.height=i.codecHeight,v.fps=i.frameRate.fps,v.profile=i.profile,v.level=i.level,v.refFrames=_.ref_frames,v.chromaFormat=_.chroma_format_string,v.sarNum=i.sarRatio.width,v.sarDen=i.sarRatio.height,v.videoCodec=_.codec_mimetype,v.hasAudio?null!=v.audioCodec&&(v.mimeType='video/x-flv; codecs="'+v.videoCodec+","+v.audioCodec+'"'):v.mimeType='video/x-flv; codecs="'+v.videoCodec+'"',v.isComplete()&&this._onMediaInfo(v),h+=A):h+=2+A}}i.hvcc=new Uint8Array(n),i.hvcc.set(new Uint8Array(e,t,n),0),a.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",i)}else this._onError(m.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord")}},P.prototype._parseAVCVideoData=function(e,t,n,i,r,o,s){for(var l=this._littleEndian,u=new DataView(e,t,n),c=[],h=0,d=0,f=this._naluLengthSize,p=this._timestampBase+i,m=1===o;d<n;){if(n<=d+4){a.a.w(this.TAG,"Malformed Nalu near timestamp "+p+", offset = "+d+", dataSize = "+n);break}var g=u.getUint32(d,!l);if(3===f&&(g>>>=8),n-f<g)return void a.a.w(this.TAG,"Malformed Nalus near timestamp "+p+", NaluSize > DataSize!");var _=31&u.getUint8(d+f),y=(5==_&&(m=!0),new Uint8Array(e,t+d,f+g));c.push({type:_,data:y}),h+=y.byteLength,d+=f+g}c.length&&(i=this._videoTrack,o={units:c,length:h,isKeyframe:m,dts:p,cts:s,pts:p+s},m&&(o.fileposition=r),i.samples.push(o),i.length+=h)},P.prototype._parseHEVCVideoData=function(e,t,n,i,r,o,s){for(var l=this._littleEndian,u=new DataView(e,t,n),c=[],h=0,d=0,f=this._naluLengthSize,p=this._timestampBase+i,m=1===o;d<n;){if(n<=d+4){a.a.w(this.TAG,"Malformed Nalu near timestamp "+p+", offset = "+d+", dataSize = "+n);break}var g=u.getUint32(d,!l);if(3===f&&(g>>>=8),n-f<g)return void a.a.w(this.TAG,"Malformed Nalus near timestamp "+p+", NaluSize > DataSize!");var _=31&u.getUint8(d+f),y=(19!=_&&20!=_||(m=!0),new Uint8Array(e,t+d,f+g));c.push({type:_,data:y}),h+=y.byteLength,d+=f+g}c.length&&(i=this._videoTrack,o={units:c,length:h,isKeyframe:m,dts:p,cts:s,pts:p+s},m&&(o.fileposition=r),i.samples.push(o),i.length+=h)};var R,I,C=P;function L(){}function P(e,t){this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0])}function D(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.scte_35_pids={},this.smpte2038_pids={}}function k(){}function x(){}function M(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0}function O(){}function N(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}L.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},i=L,(be=R=R||{})[be.kMPEG1Audio=3]="kMPEG1Audio",be[be.kMPEG2Audio=4]="kMPEG2Audio",be[be.kPESPrivateData=6]="kPESPrivateData",be[be.kADTSAAC=15]="kADTSAAC",be[be.kLOASAAC=17]="kLOASAAC",be[be.kAC3=129]="kAC3",be[be.kID3=21]="kID3",be[be.kSCTE35=134]="kSCTE35",be[be.kH264=27]="kH264",be[be.kH265=36]="kH265",(be=I=I||{})[be.kUnspecified=0]="kUnspecified",be[be.kSliceNonIDR=1]="kSliceNonIDR",be[be.kSliceDPA=2]="kSliceDPA",be[be.kSliceDPB=3]="kSliceDPB",be[be.kSliceDPC=4]="kSliceDPC",be[be.kSliceIDR=5]="kSliceIDR",be[be.kSliceSEI=6]="kSliceSEI",be[be.kSliceSPS=7]="kSliceSPS",be[be.kSlicePPS=8]="kSlicePPS",be[be.kSliceAUD=9]="kSliceAUD",be[be.kEndOfSequence=10]="kEndOfSequence",be[be.kEndOfStream=11]="kEndOfStream",be[be.kFiller=12]="kFiller",be[be.kSPSExt=13]="kSPSExt",be[be.kReserved0=14]="kReserved0",j.prototype.findNextStartCodeOffset=function(e){for(var t=e,n=this.data_;;){if(t+3>=n.byteLength)return this.eof_flag_=!0,n.byteLength;var i=n[t+0]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],r=n[t+0]<<16|n[t+1]<<8|n[t+2];if(1==i||1==r)return t;t++}},j.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n=this.current_startcode_offset_,i=31&e[n+=1==(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])?4:3],r=(128&e[n])>>>7,a=this.findNextStartCodeOffset(n);this.current_startcode_offset_=a,i>=I.kReserved0||0!=r||(r=e.subarray(n,a),(t=new O).type=i,t.data=r)}return t};var F=j,B=(U.prototype.getData=function(){return this.data},U);function U(e,t,n){var i=8+e.byteLength+1+2+t.byteLength,r=!1,a=((66!==e[3]&&77!==e[3]&&88!==e[3]&&(r=!0,i+=4),i=this.data=new Uint8Array(i))[0]=1,i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=255,i[5]=225,e.byteLength),o=(i[6]=a>>>8,i[7]=255&a,8);i.set(e,8),i[o+=a]=1,e=t.byteLength,i[o+1]=e>>>8,i[o+2]=255&e,i.set(t,o+3),o+=3+e,r&&(i[o]=252|n.chroma_format_idc,i[o+1]=248|n.bit_depth_luma-8,i[o+2]=248|n.bit_depth_chroma-8,i[o+3]=0)}function j(e){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not find H264 startcode until payload end!")}function G(){}function V(e){var t=null,n=e.audio_object_type,i=e.audio_object_type,r=e.sampling_freq_index,a=(e=e.channel_config,0),o=navigator.userAgent.toLowerCase();-1!==o.indexOf("firefox")?a=6<=r?(i=5,t=new Array(4),r-3):(i=2,t=new Array(2),r):-1!==o.indexOf("android")?(i=2,t=new Array(2),a=r):(i=5,a=r,t=new Array(4),6<=r?a=r-3:1===e&&(i=2,t=new Array(2),a=r)),t[0]=i<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&e)<<3,5===i&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),this.config=t,this.sampling_rate=q[r],this.channel_count=e,this.codec_mimetype="mp4a.40."+i,this.original_codec_mimetype="mp4a.40."+n}function H(){}function Y(){}var z,W,K,q=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Q=(function(e,t){(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)}(K=ee,be=W=G),K.prototype=null===be?Object.create(be):(te.prototype=be.prototype,new te),ee),X=($.prototype.findNextSyncwordOffset=function(e){for(var t=e,n=this.data_;;){if(t+7>=n.byteLength)return this.eof_flag_=!0,n.byteLength;if(4095==(n[t+0]<<8|n[t+1])>>>4)return t;t++}},$.prototype.readNextAACFrame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n=this.current_syncword_offset_,i=(8&e[n+1])>>>3,r=(6&e[n+1])>>>1,a=1&e[n+1],o=(192&e[n+2])>>>6,s=(60&e[n+2])>>>2,l=(1&e[n+2])<<2|(192&e[n+3])>>>6,u=(3&e[n+3])<<11|e[n+4]<<3|(224&e[n+5])>>>5;if(e[n+6],n+u>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}u-=a=1==a?7:9,n+=a,a=this.findNextSyncwordOffset(n+u),this.current_syncword_offset_=a,0!=i&&1!=i||0!=r||(a=e.subarray(n,n+u),(t=new G).audio_object_type=1+o,t.sampling_freq_index=s,t.sampling_frequency=q[s],t.channel_config=l,t.data=a)}return t},$.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},$.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},$),J=(Z.prototype.findNextSyncwordOffset=function(e){for(var t=e,n=this.data_;;){if(t+1>=n.byteLength)return this.eof_flag_=!0,n.byteLength;if(695==(n[t+0]<<3|n[t+1]>>>5))return t;t++}},Z.prototype.getLATMValue=function(e){for(var t=e.readBits(2),n=0,i=0;i<=t;i++)n=(n<<=8)|e.readByte();return n},Z.prototype.readNextAACFrame=function(e){for(var t=this.data_,n=null;null==n&&!this.eof_flag_;){var i=this.current_syncword_offset_,r=(31&t[i+1])<<8|t[i+2];if(i+3+r>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var o=new f(t.subarray(i+3,i+3+r)),s=null;if(o.readBool()){if(null==e){a.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(i+3+r),o.destroy();continue}s=e}else{var l=o.readBool();if(l&&o.readBool()){a.a.e(this.TAG,"audioMuxVersionA is Not Supported"),o.destroy();break}if(l&&this.getLATMValue(o),!o.readBool()){a.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),o.destroy();break}if(0!==o.readBits(6)){a.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),o.destroy();break}if(0!==o.readBits(4)){a.a.e(this.TAG,"more than 2 numProgram Not Supported"),o.destroy();break}if(0!==o.readBits(3)){a.a.e(this.TAG,"more than 2 numLayer Not Supported"),o.destroy();break}var u=l?this.getLATMValue(o):0,c=o.readBits(5),h=(u-=5,o.readBits(4)),d=(u-=4,o.readBits(4));if(0!==(u-=4,o.readBits(3),0<(u-=3)&&o.readBits(u),u=o.readBits(3))){a.a.e(this.TAG,"frameLengthType = "+u+". Only frameLengthType = 0 Supported"),o.destroy();break}if(o.readByte(),u=o.readBool())if(l)this.getLATMValue(o);else for(;;){var p=o.readBool();if(o.readByte(),!p)break}o.readBool()&&o.readByte(),(s=new Q).audio_object_type=c,s.sampling_freq_index=h,s.sampling_frequency=q[s.sampling_freq_index],s.channel_config=d,s.other_data_present=u}for(var m=0;;){var g=o.readByte();if(m+=g,255!==g)break}for(var _=new Uint8Array(m),y=0;y<m;y++)_[y]=o.readByte();(n=new Q).audio_object_type=s.audio_object_type,n.sampling_freq_index=s.sampling_freq_index,n.sampling_frequency=q[s.sampling_freq_index],n.channel_config=s.channel_config,n.other_data_present=s.other_data_present,n.data=_,this.current_syncword_offset_=this.findNextSyncwordOffset(i+3+r)}return n},Z.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},Z.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},Z);function Z(e){this.TAG="AACLOASParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not found LOAS syncword until payload end")}function $(e){this.TAG="AACADTSParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not found ADTS syncword until payload end")}function ee(){return null!==W&&W.apply(this,arguments)||this}function te(){this.constructor=K}function ne(){}function ie(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}function re(){}function ae(){}function oe(){}function se(e){var t=[e.sampling_rate_code<<6|e.bit_stream_identification<<1|e.bit_stream_mode>>2,(3&e.bit_stream_mode)<<6|e.channel_mode<<3|e.low_frequency_effects_channel_on<<2|e.frame_size_code>>4,e.frame_size_code<<4&224];this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.bit_stream_mode=e.bit_stream_mode,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"}(be=z=z||{})[be.kSpliceNull=0]="kSpliceNull",be[be.kSpliceSchedule=4]="kSpliceSchedule",be[be.kSpliceInsert=5]="kSpliceInsert",be[be.kTimeSignal=6]="kTimeSignal",be[be.kBandwidthReservation=7]="kBandwidthReservation",be[be.kPrivateCommand=255]="kPrivateCommand";var le,ue=function(e){var t=e.readBool();return t?(e.readBits(6),{time_specified_flag:t,pts_time:4*e.readBits(31)+e.readBits(2)}):(e.readBits(7),{time_specified_flag:t})},ce=function(e){var t=e.readBool();return e.readBits(6),{auto_return:t,duration:4*e.readBits(31)+e.readBits(2)}},he=function(e){return{component_tag:e.readBits(8),utc_splice_time:e.readBits(32)}},de=function(e){var t=e.readBits(8);return e.readBits(7),{component_tag:t,pts_offset:4*e.readBits(31)+e.readBits(2)}},fe=function(e){return{component_tag:e.readBits(8),ISO_code:String.fromCharCode(e.readBits(8),e.readBits(8),e.readBits(8)),Bit_Stream_Mode:e.readBits(3),Num_Channels:e.readBits(4),Full_Srvc_Audio:e.readBool()}},pe=((be=le=le||{})[be.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",be[be.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",be[be.kSliceCRA_NUT=21]="kSliceCRA_NUT",be[be.kSliceVPS=32]="kSliceVPS",be[be.kSliceSPS=33]="kSliceSPS",be[be.kSlicePPS=34]="kSlicePPS",be[be.kSliceAUD=35]="kSliceAUD",Ie.prototype.findNextStartCodeOffset=function(e){for(var t=e,n=this.data_;;){if(t+3>=n.byteLength)return this.eof_flag_=!0,n.byteLength;var i=n[t+0]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],r=n[t+0]<<16|n[t+1]<<8|n[t+2];if(1==i||1==r)return t;t++}},Ie.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n=this.current_startcode_offset_,i=e[n+=1==(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])?4:3]>>1&63,r=(128&e[n])>>>7,a=this.findNextStartCodeOffset(n);this.current_startcode_offset_=a,0==r&&(r=e.subarray(n,a),(t=new ne).type=i,t.data=r)}return t},Ie),me=(Re.prototype.getData=function(){return this.data},Re),ge=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],_e=(Se.prototype.findNextSyncwordOffset=function(e){for(var t=e,n=this.data_;;){if(t+7>=n.byteLength)return this.eof_flag_=!0,n.byteLength;if(2935==(n[t+0]<<8|n[t+1]))return t;t++}},Se.prototype.readNextAC3Frame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var n,i=this.current_syncword_offset_,r=[48e3,44200,33e3][n=e[i+4]>>6],a=63&e[i+4];if(i+(n=2*ge[n][a])>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var o=this.findNextSyncwordOffset(i+n),s=(this.current_syncword_offset_=o,o=e[i+5]>>3,7&e[i+5]),l=e[i+6]>>5,u=0,c=(!!(1&l)&&1!=l&&(u+=2),!!(4&l)&&(u+=2),2==l&&(u+=2),u=(e[i+6]<<8|e[i+7])>>12-u&1,[2,1,2,3,3,4,4,5][l]+u);(t=new oe).sampling_frequency=r,t.channel_count=c,t.channel_mode=l,t.bit_stream_identification=o,t.low_frequency_effects_channel_on=u,t.bit_stream_mode=s,t.frame_size_code=a,t.data=e.subarray(i,i+n)}return t},Se.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},Se.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},Se);ve=function(e,t){return(ve=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)};var ye,ve,Ae=function(){return(Ae=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ee=(function(e,t){function n(){this.constructor=e}ve(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(Te,ye=i),Te.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,ye.prototype.destroy.call(this)},Te.probe=function(e){var t=new Uint8Array(e),n=-1,i=188;if(t.byteLength<=3*i)return{needMoreData:!0};for(;-1===n;){for(var r=Math.min(1e3,t.byteLength-3*i),o=0;o<r;){if(71===t[o]&&71===t[o+i]&&71===t[o+2*i]){n=o;break}o++}if(-1===n)if(188===i)i=192;else{if(192!==i)break;i=204}}return-1===n?{match:!1}:(192===i&&4<=n?(a.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),n-=4):204===i&&a.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:i,sync_offset:n})},Te.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Te.prototype.resetMediaInfo=function(){this.media_info_=new s.a},Te.prototype.parseChunks=function(e,t){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new c.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var n=0;for(this.first_parse_&&(this.first_parse_=!1,n=this.sync_offset_);n+this.ts_packet_size_<=e.byteLength;){var i=t+n;if(71!==(o=(192===this.ts_packet_size_&&(n+=4),f=new Uint8Array(e,n,188))[0])){a.a.e(this.TAG,"sync_byte = "+o+", not 0x47");break}var r,o=(64&f[1])>>>6,s=(f[1],(31&f[1])<<8|f[2]),l=(48&f[3])>>>4,u=15&f[3],h={},d=4;if(2==l||3==l){var f;if(5+(f=f[4])===188){n+=188,204===this.ts_packet_size_&&(n+=16);continue}0<f&&(h=this.parseAdaptationField(e,n+4,1+f)),d=5+f}1!=l&&3!=l||(0==s||s===this.current_pmt_pid_||null!=this.pmt_&&this.pmt_.pid_stream_type[s]===R.kSCTE35?this.handleSectionSlice(e,n+d,r=188-d,{pid:s,file_position:i,payload_unit_start_indicator:o,continuity_conunter:u,random_access_indicator:h.random_access_indicator}):null!=this.pmt_&&null!=this.pmt_.pid_stream_type[s]&&(r=188-d,f=this.pmt_.pid_stream_type[s],s!==this.pmt_.common_pids.h264&&s!==this.pmt_.common_pids.h265&&s!==this.pmt_.common_pids.adts_aac&&s!==this.pmt_.common_pids.loas_aac&&s!==this.pmt_.common_pids.ac3&&s!==this.pmt_.common_pids.opus&&s!==this.pmt_.common_pids.mp3&&!0!==this.pmt_.pes_private_data_pids[s]&&!0!==this.pmt_.timed_id3_pids[s]||this.handlePESSlice(e,n+d,r,{pid:s,stream_type:f,file_position:i,payload_unit_start_indicator:o,continuity_conunter:u,random_access_indicator:h.random_access_indicator}))),n+=188,204===this.ts_packet_size_&&(n+=16)}return this.dispatchAudioVideoMediaSegment(),n},Te.prototype.parseAdaptationField=function(e,t,n){return 0<(t=(e=new Uint8Array(e,t,n))[0])?183<t?(a.a.w(this.TAG,"Illegal adaptation_field_length: "+t),{}):{discontinuity_indicator:(128&e[1])>>>7,random_access_indicator:(64&e[1])>>>6,elementary_stream_priority_indicator:(32&e[1])>>>5}:{}},Te.prototype.handleSectionSlice=function(e,t,n,i){var r=new Uint8Array(e,t,n),a=this.section_slice_queues_[i.pid];if(i.payload_unit_start_indicator){var o,s=r[0];null!=a&&0!==a.total_length&&(o=new Uint8Array(e,t+1,Math.min(n,s)),a.slices.push(o),a.total_length+=o.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,i):this.clearSlices(a,i));for(var l=1+s;l<r.byteLength&&255!==r[l+0];){var u=(15&r[l+1])<<8|r[l+2];this.section_slice_queues_[i.pid]=new M,(a=this.section_slice_queues_[i.pid]).expected_length=3+u,a.file_position=i.file_position,a.random_access_indicator=i.random_access_indicator,o=new Uint8Array(e,t+l,Math.min(n-l,a.expected_length-a.total_length)),a.slices.push(o),a.total_length+=o.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,i):a.total_length>=a.expected_length&&this.clearSlices(a,i),l+=o.byteLength}}else null!=a&&0!==a.total_length&&(o=new Uint8Array(e,t,Math.min(n,a.expected_length-a.total_length)),a.slices.push(o),a.total_length+=o.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,i):a.total_length>=a.expected_length&&this.clearSlices(a,i))},Te.prototype.handlePESSlice=function(e,t,n,i){if(t=(e=new Uint8Array(e,t,n))[0]<<16|e[1]<<8|e[2],e[3],n=e[4]<<8|e[5],i.payload_unit_start_indicator){if(1!=t)return void a.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value "+t);(t=this.pes_slice_queues_[i.pid])&&(0===t.expected_length||t.expected_length===t.total_length?this.emitPESSlices(t,i):this.clearSlices(t,i)),this.pes_slice_queues_[i.pid]=new M,this.pes_slice_queues_[i.pid].file_position=i.file_position,this.pes_slice_queues_[i.pid].random_access_indicator=i.random_access_indicator}null!=this.pes_slice_queues_[i.pid]&&((t=this.pes_slice_queues_[i.pid]).slices.push(e),i.payload_unit_start_indicator&&(t.expected_length=0==n?0:6+n),t.total_length+=e.byteLength,0<t.expected_length&&t.expected_length===t.total_length?this.emitPESSlices(t,i):0<t.expected_length&&t.expected_length<t.total_length&&this.clearSlices(t,i))},Te.prototype.emitSectionSlices=function(e,t){for(var n=new Uint8Array(e.total_length),i=0,r=0;i<e.slices.length;i++){var a=e.slices[i];n.set(a,r),r+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var o=new x;o.pid=t.pid,o.data=n,o.file_position=e.file_position,o.random_access_indicator=e.random_access_indicator,this.parseSection(o)},Te.prototype.emitPESSlices=function(e,t){for(var n=new Uint8Array(e.total_length),i=0,r=0;i<e.slices.length;i++){var a=e.slices[i];n.set(a,r),r+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var o=new k;o.pid=t.pid,o.data=n,o.stream_type=t.stream_type,o.file_position=e.file_position,o.random_access_indicator=e.random_access_indicator,this.parsePES(o)},Te.prototype.clearSlices=function(e,t){e.slices=[],e.expected_length=-1,e.total_length=0},Te.prototype.parseSection=function(e){var t=e.data;0===(e=e.pid)?this.parsePAT(t):e===this.current_pmt_pid_?this.parsePMT(t):null!=this.pmt_&&this.pmt_.scte_35_pids[e]&&this.parseSCTE35(t)},Te.prototype.parsePES=function(e){var t=e.data,n=t[0]<<16|t[1]<<8|t[2],i=t[3],r=t[4]<<8|t[5];if(1==n)if(188!==i&&190!==i&&191!==i&&240!==i&&241!==i&&255!==i&&242!==i&&248!==i){t[6];var o=(192&t[7])>>>6,s=t[8],l=void 0,u=void 0,c=(2!=o&&3!=o||(l=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,u=3==o?536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2:l),void(o=9+s));if(0!=r){if(r<3+s)return void a.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");c=r-3-s}else c=t.byteLength-o;var h=t.subarray(o,o+c);switch(e.stream_type){case R.kMPEG1Audio:case R.kMPEG2Audio:this.parseMP3Payload(h,l);break;case R.kPESPrivateData:this.pmt_.common_pids.opus===e.pid?this.parseOpusPayload(h,l):this.pmt_.common_pids.ac3===e.pid?this.parseAC3Payload(h,l):this.pmt_.smpte2038_pids[e.pid]?this.parseSMPTE2038MetadataPayload(h,l,u,e.pid,i):this.parsePESPrivateDataPayload(h,l,u,e.pid,i);break;case R.kADTSAAC:this.parseADTSAACPayload(h,l);break;case R.kLOASAAC:this.parseLOASAACPayload(h,l);break;case R.kAC3:this.parseAC3Payload(h,l);break;case R.kID3:this.parseTimedID3MetadataPayload(h,l,u,e.pid,i);break;case R.kH264:this.parseH264Payload(h,l,u,e.file_position,e.random_access_indicator);break;case R.kH265:this.parseH265Payload(h,l,u,e.file_position,e.random_access_indicator)}}else 188!==i&&191!==i&&240!==i&&241!==i&&255!==i&&242!==i&&248!==i||e.stream_type!==R.kPESPrivateData||(o=6,c=void 0,c=0!=r?r:t.byteLength-o,h=t.subarray(o,o+c),this.parsePESPrivateDataPayload(h,void 0,void 0,e.pid,i));else a.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value "+n)},Te.prototype.parsePAT=function(e){var t=e[0];if(0===t){var n=(15&e[1])<<8|e[2],i=(e[3],e[4],(62&e[5])>>>1),r=1&e[5],o=e[6],s=(e[7],null);if(1==r&&0===o)(s=new S).version_number=i;else if(null==(s=this.pat_))return;for(var l=n-5-4,u=-1,c=-1,h=8;h<8+l;h+=4){var d=e[h]<<8|e[h+1],f=(31&e[h+2])<<8|e[h+3];0==d?s.network_pid=f:(s.program_pmt_pid[d]=f,-1===u&&(u=d),-1===c&&(c=f))}1==r&&0===o&&(null==this.pat_&&a.a.v(this.TAG,"Parsed first PAT: "+JSON.stringify(s)),this.pat_=s,this.current_program_=u,this.current_pmt_pid_=c)}else a.a.e(this.TAG,"parsePAT: table_id "+t+" is not corresponded to PAT!")},Te.prototype.parsePMT=function(e){var t=e[0];if(2===t){var n=(15&e[1])<<8|e[2],i=e[3]<<8|e[4],r=(62&e[5])>>>1,o=1&e[5],s=e[6],l=(e[7],null);if(1==o&&0===s)(l=new D).program_number=i,l.version_number=r,this.program_pmt_map_[i]=l;else if(null==(l=this.program_pmt_map_[i]))return;e[8],e[9];for(var u=12+(o=(15&e[10])<<8|e[11]),c=n-9-o-4,h=u;h<u+c;){var d=e[h],f=(31&e[h+1])<<8|e[h+2],p=(15&e[h+3])<<8|e[h+4],m=(l.pid_stream_type[f]=d,l.common_pids.h264||l.common_pids.h265),g=l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.opus||l.common_pids.mp3;if(d!==R.kH264||m)if(d!==R.kH265||m)if(d!==R.kADTSAAC||g)if(d!==R.kLOASAAC||g)if(d!==R.kAC3||g)if(d!==R.kMPEG1Audio&&d!==R.kMPEG2Audio||g)if(d===R.kPESPrivateData){if(l.pes_private_data_pids[f]=!0,0<p){for(var _=h+5;_<h+5+p;){var y=e[_+0],v=e[_+1];if(5===y){var A=String.fromCharCode.apply(String,Array.from(e.subarray(_+2,_+2+v)));"VANC"===A?l.smpte2038_pids[f]=!0:"Opus"===A&&(l.common_pids.opus=f)}else if(127===y&&f===l.common_pids.opus){if(A=null,null==(A=128===e[_+2]?e[_+3]:A)){a.a.e(this.TAG,"Not Supported Opus channel count.");continue}var E={codec:"opus",meta:y={codec:"opus",channel_count:15&A?15&A:2,channel_config_code:A,sample_rate:48e3}};0==this.audio_init_segment_dispatched_?(this.audio_metadata_=y,this.dispatchAudioInitSegment(E)):this.detectAudioMetadataChange(E)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(E))}_+=2+v}m=e.subarray(h+5,h+5+p),this.dispatchPESPrivateDataDescriptor(f,d,m)}}else d===R.kID3?l.timed_id3_pids[f]=!0:d===R.kSCTE35&&(l.scte_35_pids[f]=!0);else l.common_pids.mp3=f;else l.common_pids.ac3=f;else l.common_pids.loas_aac=f;else l.common_pids.adts_aac=f;else l.common_pids.h265=f;else l.common_pids.h264=f;h+=5+p}i===this.current_program_&&(null==this.pmt_&&a.a.v(this.TAG,"Parsed first PMT: "+JSON.stringify(l)),((this.pmt_=l).common_pids.h264||l.common_pids.h265)&&(this.has_video_=!0),l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.opus||l.common_pids.mp3)&&(this.has_audio_=!0)}else a.a.e(this.TAG,"parsePMT: table_id "+t+" is not corresponded to PMT!")},Te.prototype.parseSCTE35=function(e){var t;e=function(e){var t,n,i=new f(e),r=i.readBits(8),a=i.readBool(),o=i.readBool(),s=(i.readBits(2),i.readBits(12)),l=i.readBits(8),u=i.readBool(),c=i.readBits(6),h=4*i.readBits(31)+i.readBits(2),d=i.readBits(8),p=i.readBits(12),m=i.readBits(12),g=i.readBits(8),_=null;g===z.kSpliceNull?_={}:g===z.kSpliceSchedule?_=function(e){for(var t=e.readBits(8),n=[],i=0;i<t;i++)n.push(function(e){var t=e.readBits(32),n=e.readBool(),i=(e.readBits(7),{splice_event_id:t,splice_event_cancel_indicator:n});if(!n){if(i.out_of_network_indicator=e.readBool(),i.program_splice_flag=e.readBool(),i.duration_flag=e.readBool(),e.readBits(5),i.program_splice_flag)i.utc_splice_time=e.readBits(32);else{i.component_count=e.readBits(8),i.components=[];for(var r=0;r<i.component_count;r++)i.components.push(he(e))}i.duration_flag&&(i.break_duration=ce(e)),i.unique_program_id=e.readBits(16),i.avail_num=e.readBits(8),i.avails_expected=e.readBits(8)}return i}(e));return{splice_count:t,events:n}}(i):g===z.kSpliceInsert?_=function(e){var t,n,i,r=e.readBits(32),a=e.readBool(),o=(e.readBits(7),{splice_event_id:r,splice_event_cancel_indicator:a});if(!a){if(o.out_of_network_indicator=e.readBool(),o.program_splice_flag=e.readBool(),o.duration_flag=e.readBool(),o.splice_immediate_flag=e.readBool(),e.readBits(4),o.program_splice_flag&&!o.splice_immediate_flag&&(o.splice_time=ue(e)),!o.program_splice_flag){o.component_count=e.readBits(8),o.components=[];for(var s=0;s<o.component_count;s++)o.components.push((t=o.splice_immediate_flag,i=(n=e).readBits(8),t?{component_tag:i}:{component_tag:i,splice_time:ue(n)}))}o.duration_flag&&(o.break_duration=ce(e)),o.unique_program_id=e.readBits(16),o.avail_num=e.readBits(8),o.avails_expected=e.readBits(8)}return o}(i):g===z.kTimeSignal?_={splice_time:ue(i)}:g===z.kBandwidthReservation?_={}:g===z.kPrivateCommand?_=function(e,t){for(var n=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8)),i=new Uint8Array(e-4),r=0;r<e-4;r++)i[r]=t.readBits(8);return{identifier:n,private_data:i.buffer}}(m,i):i.readBits(8*m);for(var y,v=[],A=i.readBits(16),E=0;E<A;){var b=i.readBits(8),w=i.readBits(8),T=String.fromCharCode(i.readBits(8),i.readBits(8),i.readBits(8),i.readBits(8));0===b?v.push({descriptor_tag:b,descriptor_length:w,identifier:T,provider_avail_id:i.readBits(32)}):1===b?v.push(function(e,t,n,i){var r=i.readBits(8),a=i.readBits(3);i.readBits(5);for(var o="",s=0;s<a;s++)o+=String.fromCharCode(i.readBits(8));return{descriptor_tag:e,descriptor_length:t,identifier:n,preroll:r,dtmf_count:a,DTMF_char:o}}(b,w,T,i)):2===b?v.push(function(e,t,n,i){var r=i.readBits(32),a=i.readBool(),o=(i.readBits(7),{descriptor_tag:e,descriptor_length:t,identifier:n,segmentation_event_id:r,segmentation_event_cancel_indicator:a});if(!a){if(o.program_segmentation_flag=i.readBool(),o.segmentation_duration_flag=i.readBool(),o.delivery_not_restricted_flag=i.readBool(),o.delivery_not_restricted_flag?i.readBits(5):(o.web_delivery_allowed_flag=i.readBool(),o.no_regional_blackout_flag=i.readBool(),o.archive_allowed_flag=i.readBool(),o.device_restrictions=i.readBits(2)),!o.program_segmentation_flag){o.component_count=i.readBits(8),o.components=[];for(var s=0;s<o.component_count;s++)o.components.push(de(i))}o.segmentation_duration_flag&&(o.segmentation_duration=i.readBits(40)),o.segmentation_upid_type=i.readBits(8),o.segmentation_upid_length=i.readBits(8);var l=new Uint8Array(o.segmentation_upid_length);for(s=0;s<o.segmentation_upid_length;s++)l[s]=i.readBits(8);o.segmentation_upid=l.buffer,o.segmentation_type_id=i.readBits(8),o.segment_num=i.readBits(8),o.segments_expected=i.readBits(8),52!==o.segmentation_type_id&&54!==o.segmentation_type_id&&56!==o.segmentation_type_id&&58!==o.segmentation_type_id||(o.sub_segment_num=i.readBits(8),o.sub_segments_expected=i.readBits(8))}return o}(b,w,T,i)):3===b?v.push({descriptor_tag:b,descriptor_length:w,identifier:T,TAI_seconds:(y=i).readBits(48),TAI_ns:y.readBits(32),UTC_offset:y.readBits(16)}):4===b?v.push(function(e,t,n,i){for(var r=i.readBits(4),a=[],o=0;o<r;o++)a.push(fe(i));return{descriptor_tag:e,descriptor_length:t,identifier:n,audio_count:r,components:a}}(b,w,T,i)):i.readBits(8*(w-4)),E+=2+w}return r={table_id:r,section_syntax_indicator:a,private_indicator:o,section_length:s,protocol_version:l,encrypted_packet:u,encryption_algorithm:c,pts_adjustment:h,cw_index:d,tier:p,splice_command_length:m,splice_command_type:g,splice_command:_,descriptor_loop_length:A,splice_descriptors:v,E_CRC32:u?i.readBits(32):void 0,CRC32:i.readBits(32)},g===z.kSpliceInsert?(a=_).splice_event_cancel_indicator?{splice_command_type:g,detail:r,data:e}:a.program_splice_flag&&!a.splice_immediate_flag?(t=a.duration_flag?a.break_duration.auto_return:void 0,n=a.duration_flag?a.break_duration.duration/90:void 0,a.splice_time.time_specified_flag?{splice_command_type:g,pts:(h+a.splice_time.pts_time)%Math.pow(2,33),auto_return:t,duraiton:n,detail:r,data:e}:{splice_command_type:g,auto_return:t,duraiton:n,detail:r,data:e}):{splice_command_type:g,auto_return:t=a.duration_flag?a.break_duration.auto_return:void 0,duraiton:n=a.duration_flag?a.break_duration.duration/90:void 0,detail:r,data:e}:g===z.kTimeSignal&&(o=_).splice_time.time_specified_flag?{splice_command_type:g,pts:(h+o.splice_time.pts_time)%Math.pow(2,33),detail:r,data:e}:{splice_command_type:g,detail:r,data:e}}(e),null!=e.pts?(t=Math.floor(e.pts/this.timescale_),e.pts=t):e.nearest_pts=this.aac_last_sample_pts_,this.onSCTE35Metadata&&this.onSCTE35Metadata(e)},Te.prototype.parseH264Payload=function(e,t,n,i,r){for(var o=new F(e),s=[],l=0,u=!1;null!=(c=o.readNextNaluPayload());){var c,h=new N(c);h.type===I.kSliceSPS?(c=p.parseSPS(c.data),this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(h,c)&&(a.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:h,pps:void 0,details:c}):(this.video_metadata_.sps=h,this.video_metadata_.details=c)):h.type===I.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=h,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(h.type===I.kSliceIDR||h.type===I.kSliceNonIDR&&1===r)&&(u=!0),this.video_init_segment_dispatched_&&(s.push(h),l+=h.data.byteLength)}e=Math.floor(t/this.timescale_),t=Math.floor(n/this.timescale_),s.length&&((n=this.video_track_).samples.push({units:s,length:l,isKeyframe:u,dts:t,pts:e,cts:e-t,file_position:i}),n.length+=l)},Te.prototype.parseH265Payload=function(e,t,n,i,r){for(var o,s=new pe(e),l=[],u=0,c=!1;null!=(o=s.readNextNaluPayload());){var h,d=new ie(o);d.type===le.kSliceVPS?this.video_init_segment_dispatched_||(h=g.parseVPS(o.data),this.video_metadata_.vps=d,this.video_metadata_.details=Ae(Ae({},this.video_metadata_.details),h)):d.type===le.kSliceSPS?(h=g.parseSPS(o.data),this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(d,h)&&(a.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:d,pps:void 0,details:h}):(this.video_metadata_.sps=d,this.video_metadata_.details=Ae(Ae({},this.video_metadata_.details),h))):d.type===le.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(h=g.parsePPS(o.data),this.video_metadata_.pps=d,this.video_metadata_.details=Ae(Ae({},this.video_metadata_.details),h),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):d.type!==le.kSliceIDR_W_RADL&&d.type!==le.kSliceIDR_N_LP&&d.type!==le.kSliceCRA_NUT||(c=!0),this.video_init_segment_dispatched_&&(l.push(d),u+=d.data.byteLength)}e=Math.floor(t/this.timescale_),t=Math.floor(n/this.timescale_),l.length&&((n=this.video_track_).samples.push({units:l,length:u,isKeyframe:c,dts:t,pts:e,cts:e-t,file_position:i}),n.length+=u)},Te.prototype.detectVideoMetadataChange=function(e,t){var n,i;return t.codec_mimetype!==this.video_metadata_.details.codec_mimetype?(a.a.v(this.TAG,"Video: Codec mimeType changed from "+this.video_metadata_.details.codec_mimetype+" to "+t.codec_mimetype),!0):t.codec_size.width!==this.video_metadata_.details.codec_size.width||t.codec_size.height!==this.video_metadata_.details.codec_size.height?(n=this.video_metadata_.details.codec_size,i=t.codec_size,a.a.v(this.TAG,"Video: Coded Resolution changed from "+n.width+"x"+n.height+" to "+i.width+"x"+i.height),!0):t.present_size.width!==this.video_metadata_.details.present_size.width&&(a.a.v(this.TAG,"Video: Present resolution width changed from "+this.video_metadata_.details.present_size.width+" to "+t.present_size.width),!0)},Te.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},Te.prototype.dispatchVideoInitSegment=function(){var e,t,n=this.video_metadata_.details,i={type:"video"},r=(i.id=this.video_track_.id,i.timescale=1e3,i.duration=this.duration_,i.codecWidth=n.codec_size.width,i.codecHeight=n.codec_size.height,i.presentWidth=n.present_size.width,i.presentHeight=n.present_size.height,i.profile=n.profile_string,i.level=n.level_string,i.bitDepth=n.bit_depth,i.chromaFormat=n.chroma_format,i.sarRatio=n.sar_ratio,i.frameRate=n.frame_rate,i.frameRate.fps_den),o=i.frameRate.fps_num;(i.refSampleDuration=r/o*1e3,i.codec=n.codec_mimetype,this.video_metadata_.vps?(r=this.video_metadata_.vps.data.subarray(4),e=this.video_metadata_.sps.data.subarray(4),t=this.video_metadata_.pps.data.subarray(4),o=new me(r,e,t,n),i.hvcc=o.getData(),0==this.video_init_segment_dispatched_&&a.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: "+i.codec)):(e=this.video_metadata_.sps.data.subarray(4),t=this.video_metadata_.pps.data.subarray(4),r=new B(e,t,n),i.avcc=r.getData(),0==this.video_init_segment_dispatched_&&a.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: "+i.codec)),this.onTrackMetadata("video",i),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1,o=this.media_info_).hasVideo=!0,o.width=i.codecWidth,o.height=i.codecHeight,o.fps=i.frameRate.fps,o.profile=i.profile,o.level=i.level,o.refFrames=n.ref_frames,o.chromaFormat=n.chroma_format_string,o.sarNum=i.sarRatio.width,o.sarDen=i.sarRatio.height,o.videoCodec=i.codec,o.hasAudio&&o.audioCodec?o.mimeType='video/mp2t; codecs="'+o.videoCodec+","+o.audioCodec+'"':o.mimeType='video/mp2t; codecs="'+o.videoCodec+'"',o.isComplete()&&this.onMediaInfo(o)},Te.prototype.dispatchVideoMediaSegment=function(){this.isInitSegmentDispatched()&&this.video_track_.length&&this.onDataAvailable(null,this.video_track_)},Te.prototype.dispatchAudioMediaSegment=function(){this.isInitSegmentDispatched()&&this.audio_track_.length&&this.onDataAvailable(this.audio_track_,null)},Te.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},Te.prototype.parseADTSAACPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n,i,r;if(this.aac_last_incomplete_data_&&((r=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength)).set(this.aac_last_incomplete_data_,0),r.set(e,this.aac_last_incomplete_data_.byteLength),e=r),null!=t&&(n=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)i=1024/this.audio_metadata_.sampling_frequency*1e3,n=this.aac_last_sample_pts_+i;else if(null==t)return void a.a.w(this.TAG,"AAC: Unknown pts");this.aac_last_incomplete_data_&&this.aac_last_sample_pts_&&(i=1024/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+i,1<Math.abs(r-n))&&(a.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+r+"ms, PES pts: "+n+"ms"),n=r)}for(var o,s,l=new X(e),u=n;null!=(s=l.readNextAACFrame());){i=1024/s.sampling_frequency*1e3;var c={codec:"aac",data:s};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:s.audio_object_type,sampling_freq_index:s.sampling_freq_index,sampling_frequency:s.sampling_frequency,channel_config:s.channel_config},this.dispatchAudioInitSegment(c)):this.detectAudioMetadataChange(c)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(c)),o=u,c=Math.floor(u),c={unit:s.data,length:s.data.byteLength,pts:c,dts:c},this.audio_track_.samples.push(c),this.audio_track_.length+=s.data.byteLength,u+=i}l.hasIncompleteData()&&(this.aac_last_incomplete_data_=l.getIncompleteData()),o&&(this.aac_last_sample_pts_=o)}},Te.prototype.parseLOASAACPayload=function(e,t){var n,i,r;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_&&((r=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength)).set(this.aac_last_incomplete_data_,0),r.set(e,this.aac_last_incomplete_data_.byteLength),e=r),null!=t&&(n=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)i=1024/this.audio_metadata_.sampling_frequency*1e3,n=this.aac_last_sample_pts_+i;else if(null==t)return void a.a.w(this.TAG,"AAC: Unknown pts");this.aac_last_incomplete_data_&&this.aac_last_sample_pts_&&(i=1024/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+i,1<Math.abs(r-n))&&(a.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+r+"ms, PES pts: "+n+"ms"),n=r)}for(var o,s,l=new J(e),u=n;null!=(s=l.readNextAACFrame(null!=(s=this.loas_previous_frame)?s:void 0));){i=1024/(this.loas_previous_frame=s).sampling_frequency*1e3;var c={codec:"aac",data:s};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:s.audio_object_type,sampling_freq_index:s.sampling_freq_index,sampling_frequency:s.sampling_frequency,channel_config:s.channel_config},this.dispatchAudioInitSegment(c)):this.detectAudioMetadataChange(c)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(c)),o=u,c=Math.floor(u),c={unit:s.data,length:s.data.byteLength,pts:c,dts:c},this.audio_track_.samples.push(c),this.audio_track_.length+=s.data.byteLength,u+=i}l.hasIncompleteData()&&(this.aac_last_incomplete_data_=l.getIncompleteData()),o&&(this.aac_last_sample_pts_=o)}},Te.prototype.parseAC3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n;if(null!=t&&(n=t/this.timescale_),"ac-3"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)l=1536/this.audio_metadata_.sampling_frequency*1e3,n=this.aac_last_sample_pts_+l;else if(null==t)return void a.a.w(this.TAG,"Opus: Unknown pts");for(var i,r,o=new _e(e),s=n;null!=(r=o.readNextAC3Frame());){var l=1536/r.sampling_frequency*1e3,u={codec:"ac-3",data:r};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"ac-3",sampling_frequency:r.sampling_frequency,bit_stream_identification:r.bit_stream_identification,bit_stream_mode:r.bit_stream_mode,low_frequency_effects_channel_on:r.low_frequency_effects_channel_on,channel_mode:r.channel_mode},this.dispatchAudioInitSegment(u)):this.detectAudioMetadataChange(u)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(u)),i=s,u=Math.floor(s),u={unit:r.data,length:r.data.byteLength,pts:u,dts:u},this.audio_track_.samples.push(u),this.audio_track_.length+=r.data.byteLength,s+=l}i&&(this.aac_last_sample_pts_=i)}},Te.prototype.parseOpusPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n;if(null!=t&&(n=t/this.timescale_),"opus"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)n=this.aac_last_sample_pts_+(o=20);else if(null==t)return void a.a.w(this.TAG,"Opus: Unknown pts");for(var i=n,r=0;r<e.length;){for(var o=20,s=!!(16&e[r+1]),l=!!(8&e[r+1]),u=r+2,c=0;255===e[u];)c+=255,u+=1;c+=e[u],u=(u+=1)+(s?2:0)+(l?2:0);var h=i;s=Math.floor(i),s={unit:l=e.slice(u,u+c),length:l.byteLength,pts:s,dts:s},this.audio_track_.samples.push(s),this.audio_track_.length+=l.byteLength,i+=o,r=u+c}h&&(this.aac_last_sample_pts_=h)}},Te.prototype.parseMP3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var n=e[1]>>>3&3,i=(6&e[1])>>1,r=(e[2],(12&e[2])>>>2),a=3&~(e[3]>>>6)?2:1,o=0,s=34;switch(n){case 0:o=[11025,12e3,8e3,0][r];break;case 2:o=[22050,24e3,16e3,0][r];break;case 3:o=[44100,48e3,32e3,0][r]}switch(i){case 1:s=34;break;case 2:s=33;break;case 3:s=32}(n=new ae).object_type=s,n.sample_rate=o,n.channel_count=a,n.data=e,i={codec:"mp3",data:n},0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"mp3",object_type:s,sample_rate:o,channel_count:a},this.dispatchAudioInitSegment(i)):this.detectAudioMetadataChange(i)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(i)),n={unit:e,length:e.byteLength,pts:t/this.timescale_,dts:t/this.timescale_},this.audio_track_.samples.push(n),this.audio_track_.length+=e.byteLength}},Te.prototype.detectAudioMetadataChange=function(e){if(e.codec!==this.audio_metadata_.codec)return a.a.v(this.TAG,"Audio: Audio Codecs changed from "+this.audio_metadata_.codec+" to "+e.codec),!0;if("aac"===e.codec&&"aac"===this.audio_metadata_.codec){if((t=e.data).audio_object_type!==this.audio_metadata_.audio_object_type)return a.a.v(this.TAG,"AAC: AudioObjectType changed from "+this.audio_metadata_.audio_object_type+" to "+t.audio_object_type),!0;if(t.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return a.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+this.audio_metadata_.sampling_freq_index+" to "+t.sampling_freq_index),!0;if(t.channel_config!==this.audio_metadata_.channel_config)return a.a.v(this.TAG,"AAC: Channel configuration changed from "+this.audio_metadata_.channel_config+" to "+t.channel_config),!0}else if("ac-3"===e.codec&&"ac-3"===this.audio_metadata_.codec){var t;if((t=e.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return a.a.v(this.TAG,"AC3: Sampling Frequency changed from "+this.audio_metadata_.sampling_frequency+" to "+t.sampling_frequency),!0;if(t.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return a.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+this.audio_metadata_.bit_stream_identification+" to "+t.bit_stream_identification),!0;if(t.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return a.a.v(this.TAG,"AC3: BitStream Mode changed from "+this.audio_metadata_.bit_stream_mode+" to "+t.bit_stream_mode),!0;if(t.channel_mode!==this.audio_metadata_.channel_mode)return a.a.v(this.TAG,"AC3: Channel Mode changed from "+this.audio_metadata_.channel_mode+" to "+t.channel_mode),!0;if(t.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return a.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+this.audio_metadata_.low_frequency_effects_channel_on+" to "+t.low_frequency_effects_channel_on),!0}else if("opus"===e.codec&&"opus"===this.audio_metadata_.codec){if((n=e.meta).sample_rate!==this.audio_metadata_.sample_rate)return a.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+n.sample_rate),!0;if(n.channel_count!==this.audio_metadata_.channel_count)return a.a.v(this.TAG,"Opus: Channel count changed from "+this.audio_metadata_.channel_count+" to "+n.channel_count),!0}else if("mp3"===e.codec&&"mp3"===this.audio_metadata_.codec){var n;if((n=e.data).object_type!==this.audio_metadata_.object_type)return a.a.v(this.TAG,"MP3: AudioObjectType changed from "+this.audio_metadata_.object_type+" to "+n.object_type),!0;if(n.sample_rate!==this.audio_metadata_.sample_rate)return a.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+n.sample_rate),!0;if(n.channel_count!==this.audio_metadata_.channel_count)return a.a.v(this.TAG,"MP3: Channel count changed from "+this.audio_metadata_.channel_count+" to "+n.channel_count),!0}return!1},Te.prototype.dispatchAudioInitSegment=function(e){var t={type:"audio"},n=(t.id=this.audio_track_.id,t.timescale=1e3,t.duration=this.duration_,"aac"===this.audio_metadata_.codec?(n=new V(n="aac"===e.codec?e.data:null),t.audioSampleRate=n.sampling_rate,t.channelCount=n.channel_count,t.codec=n.codec_mimetype,t.originalCodec=n.original_codec_mimetype,t.config=n.config,t.refSampleDuration=1024/t.audioSampleRate*t.timescale):"ac-3"===this.audio_metadata_.codec?(e=new se(n="ac-3"===e.codec?e.data:null),t.audioSampleRate=e.sampling_rate,t.channelCount=e.channel_count,t.codec=e.codec_mimetype,t.originalCodec=e.original_codec_mimetype,t.config=e.config,t.refSampleDuration=1536/t.audioSampleRate*t.timescale):"opus"===this.audio_metadata_.codec?(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.channelConfigCode=this.audio_metadata_.channel_config_code,t.codec="opus",t.originalCodec="opus",t.config=void 0,t.refSampleDuration=20):"mp3"===this.audio_metadata_.codec&&(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.codec="mp3",t.originalCodec="mp3",t.config=void 0),0==this.audio_init_segment_dispatched_&&a.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: "+t.codec),this.onTrackMetadata("audio",t),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1,this.media_info_);n.hasAudio=!0,n.audioCodec=t.originalCodec,n.audioSampleRate=t.audioSampleRate,n.audioChannelCount=t.channelCount,n.hasVideo&&n.videoCodec?n.mimeType='video/mp2t; codecs="'+n.videoCodec+","+n.audioCodec+'"':n.mimeType='video/mp2t; codecs="'+n.audioCodec+'"',n.isComplete()&&this.onMediaInfo(n)},Te.prototype.dispatchPESPrivateDataDescriptor=function(e,t,n){var i=new Y;i.pid=e,i.stream_type=t,i.descriptor=n,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(i)},Te.prototype.parsePESPrivateDataPayload=function(e,t,n,i,r){var a=new H;a.pid=i,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t?(i=Math.floor(t/this.timescale_),a.pts=i):a.nearest_pts=this.aac_last_sample_pts_,null!=n&&(r=Math.floor(n/this.timescale_),a.dts=r),this.onPESPrivateData&&this.onPESPrivateData(a)},Te.prototype.parseTimedID3MetadataPayload=function(e,t,n,i,r){var a=new H;a.pid=i,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t&&(i=Math.floor(t/this.timescale_),a.pts=i),null!=n&&(r=Math.floor(n/this.timescale_),a.dts=r),this.onTimedID3Metadata&&this.onTimedID3Metadata(a)},Te.prototype.parseSMPTE2038MetadataPayload=function(e,t,n,i,r){var a=new re;a.pid=i,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t&&(i=Math.floor(t/this.timescale_),a.pts=i),a.nearest_pts=this.aac_last_sample_pts_,null!=n&&(r=Math.floor(n/this.timescale_),a.dts=r),a.ancillaries=function(){for(var t=new f(e),n=0,i=[];n+=6,0===t.readBits(6);){var r=t.readBool(),a=(n+=1,t.readBits(11)),o=(n+=11,t.readBits(12)),s=(n+=12,255&t.readBits(10)),l=(n+=10,255&t.readBits(10)),u=(n+=10,255&t.readBits(10));n+=10;for(var c=new Uint8Array(u),h=0;h<u;h++){var d=255&t.readBits(10);n+=10,c[h]=d}t.readBits(10),n+=10;var p="User Defined";65==s?7==l&&(p="SCTE-104"):95==s?220==l?p="ARIB STD-B37 (1SEG)":221==l?p="ARIB STD-B37 (ANALOG)":222==l?p="ARIB STD-B37 (SD)":223==l&&(p="ARIB STD-B37 (HD)"):97==s&&(1==l?p="EIA-708":2==l&&(p="EIA-608")),i.push({yc_indicator:r,line_number:a,horizontal_offset:o,did:s,sdid:l,user_data:c,description:p,information:{}}),t.readBits(8-(n-Math.floor(n/8))%8),n+=(8-(n-Math.floor(n/8)))%8}return t.destroy(),t=null,i}(),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(a)},Te),be=(we.init=function(){for(var e in we.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[]})we.types.hasOwnProperty(e)&&(we.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=we.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},we.box=function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),r=i.length,a=0;a<r;a++)t+=i[a].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);var o=8;for(a=0;a<r;a++)n.set(i[a],o),o+=i[a].byteLength;return n},we.generateInitSegment=function(e){var t=we.box(we.types.ftyp,we.constants.FTYP),n=(e=we.moov(e),new Uint8Array(t.byteLength+e.byteLength));return n.set(t,0),n.set(e,t.byteLength),n},we.moov=function(e){var t=we.mvhd(e.timescale,e.duration),n=we.trak(e);return e=we.mvex(e),we.box(we.types.moov,t,n,e)},we.mvhd=function(e,t){return we.box(we.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},we.trak=function(e){return we.box(we.types.trak,we.tkhd(e),we.mdia(e))},we.tkhd=function(e){var t=e.id,n=e.duration,i=e.presentWidth;return e=e.presentHeight,we.box(we.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,e>>>8&255,255&e,0,0]))},we.mdia=function(e){return we.box(we.types.mdia,we.mdhd(e),we.hdlr(e),we.minf(e))},we.mdhd=function(e){var t=e.timescale;return e=e.duration,we.box(we.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))},we.hdlr=function(e){return e="audio"===e.type?we.constants.HDLR_AUDIO:we.constants.HDLR_VIDEO,we.box(we.types.hdlr,e)},we.minf=function(e){var t="audio"===e.type?we.box(we.types.smhd,we.constants.SMHD):we.box(we.types.vmhd,we.constants.VMHD);return we.box(we.types.minf,t,we.dinf(),we.stbl(e))},we.dinf=function(){return we.box(we.types.dinf,we.box(we.types.dref,we.constants.DREF))},we.stbl=function(e){return we.box(we.types.stbl,we.stsd(e),we.box(we.types.stts,we.constants.STTS),we.box(we.types.stsc,we.constants.STSC),we.box(we.types.stsz,we.constants.STSZ),we.box(we.types.stco,we.constants.STCO))},we.stsd=function(e){return"audio"===e.type?"mp3"===e.codec?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.mp3(e)):"ac-3"===e.codec?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.ac3(e)):"opus"===e.codec?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.Opus(e)):we.box(we.types.stsd,we.constants.STSD_PREFIX,we.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.hvc1(e)):we.box(we.types.stsd,we.constants.STSD_PREFIX,we.avc1(e))},we.mp3=function(e){var t=e.channelCount;return e=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]),we.box(we.types[".mp3"],t)},we.mp4a=function(e){var t=e.channelCount,n=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]),we.box(we.types.mp4a,t,we.esds(e))},we.ac3=function(e){var t=e.channelCount,n=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]),we.box(we.types["ac-3"],t,we.box(we.types.dac3,new Uint8Array(e.config)))},we.esds=function(e){var t=(e=e.config||[]).length;return t=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2])),we.box(we.types.esds,t)},we.Opus=function(e){var t=e.channelCount,n=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,n>>>8&255,255&n,0,0]),we.box(we.types.Opus,t,we.dOps(e))},we.dOps=function(e){var t=e.channelCount,n=e.channelConfigCode,i=e.audioSampleRate;if(!e.config){var r=[];switch(n){case 1:case 2:r=[0];break;case 0:r=[255,1,1,0,1];break;case 128:r=[255,2,0,0,1];break;case 3:r=[1,2,1,0,2,1];break;case 4:r=[1,2,2,0,1,2,3];break;case 5:r=[1,3,2,0,4,1,2,3];break;case 6:r=[1,4,2,0,4,1,2,3,5];break;case 7:r=[1,4,2,0,4,1,2,3,5,6];break;case 8:r=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:r=[1,1,2,0,1];break;case 131:r=[1,1,3,0,1,2];break;case 132:r=[1,1,4,0,1,2,3];break;case 133:r=[1,1,5,0,1,2,3,4];break;case 134:r=[1,1,6,0,1,2,3,4,5];break;case 135:r=[1,1,7,0,1,2,3,4,5,6];break;case 136:r=[1,1,8,0,1,2,3,4,5,6,7]}var a=new Uint8Array(function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i}([0,t,0,0,i>>>24&255,i>>>17&255,i>>>8&255,i>>>0&255,0,0],r))}return we.box(we.types.dOps,a)},we.avc1=function(e){var t=e.avcc,n=e.codecWidth;return e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),we.box(we.types.avc1,n,we.box(we.types.avcC,t))},we.hvc1=function(e){var t=e.hvcc,n=e.codecWidth;return e=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n>>>8&255,255&n,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),we.box(we.types.hvc1,n,we.box(we.types.hvcC,t))},we.mvex=function(e){return we.box(we.types.mvex,we.trex(e))},we.trex=function(e){return e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]),we.box(we.types.trex,e)},we.moof=function(e,t){return we.box(we.types.moof,we.mfhd(e.sequenceNumber),we.traf(e,t))},we.mfhd=function(e){return e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]),we.box(we.types.mfhd,e)},we.traf=function(e,t){var n=e.id,i=(n=we.box(we.types.tfhd,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),t=we.box(we.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),we.sdtp(e));return e=we.trun(e,i.byteLength+16+16+8+16+8+8),we.box(we.types.traf,n,t,e,i)},we.sdtp=function(e){for(var t=e.samples||[],n=t.length,i=new Uint8Array(4+n),r=0;r<n;r++){var a=t[r].flags;i[r+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return we.box(we.types.sdtp,i)},we.trun=function(e,t){var n=e.samples||[],i=n.length,r=(e=12+16*i,new Uint8Array(e));r.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var a=0;a<i;a++){var o=n[a].duration,s=n[a].size,l=n[a].flags,u=n[a].cts;r.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*a)}return we.box(we.types.trun,r)},we.mdat=function(e){return we.box(we.types.mdat,e)},we);function we(){}function Te(e,t){var n=ye.call(this)||this;return n.TAG="TSDemuxer",n.first_parse_=!0,n.media_info_=new s.a,n.timescale_=90,n.duration_=0,n.current_pmt_pid_=-1,n.program_pmt_map_={},n.pes_slice_queues_={},n.section_slice_queues_={},n.video_metadata_={vps:void 0,sps:void 0,pps:void 0,details:void 0},n.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},n.aac_last_sample_pts_=void 0,n.aac_last_incomplete_data_=null,n.has_video_=!1,n.has_audio_=!1,n.video_init_segment_dispatched_=!1,n.audio_init_segment_dispatched_=!1,n.video_metadata_changed_=!1,n.audio_metadata_changed_=!1,n.loas_previous_frame=null,n.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},n.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},n.ts_packet_size_=e.ts_packet_size,n.sync_offset_=e.sync_offset,n.config_=t,n}function Se(e){this.TAG="AC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not found AC3 syncword until payload end")}function Re(e,t,n,i){var r=23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength);(r=this.data=new Uint8Array(r))[0]=1,r[1]=(3&i.general_profile_space)<<6|(i.general_tier_flag?1:0)<<5|31&i.general_profile_idc,r[2]=i.general_profile_compatibility_flags_1,r[3]=i.general_profile_compatibility_flags_2,r[4]=i.general_profile_compatibility_flags_3,r[5]=i.general_profile_compatibility_flags_4,r[6]=i.general_constraint_indicator_flags_1,r[7]=i.general_constraint_indicator_flags_2,r[8]=i.general_constraint_indicator_flags_3,r[9]=i.general_constraint_indicator_flags_4,r[10]=i.general_constraint_indicator_flags_5,r[11]=i.general_constraint_indicator_flags_6,r[12]=i.general_level_idc,r[13]=240|(3840&i.min_spatial_segmentation_idc)>>8,r[14]=255&i.min_spatial_segmentation_idc,r[15]=252|3&i.parallelismType,r[16]=252|3&i.chroma_format_idc,r[17]=248|7&i.bit_depth_luma_minus8,r[18]=248|7&i.bit_depth_chroma_minus8,r[19]=0,r[20]=0,r[21]=(3&i.constant_frame_rate)<<6|(7&i.num_temporal_layers)<<3|(i.temporal_id_nested?1:0)<<2|3,r[22]=3,r[23]=128|le.kSliceVPS,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=255&e.byteLength,r.set(e,28),r[23+(5+e.byteLength)+0]=128|le.kSliceSPS,r[23+(5+e.byteLength)+1]=0,r[23+(5+e.byteLength)+2]=1,r[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,r[23+(5+e.byteLength)+4]=255&t.byteLength,r.set(t,23+(5+e.byteLength)+5),r[23+(5+e.byteLength+5+t.byteLength)+0]=128|le.kSlicePPS,r[23+(5+e.byteLength+5+t.byteLength)+1]=0,r[23+(5+e.byteLength+5+t.byteLength)+2]=1,r[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&n.byteLength)>>8,r[23+(5+e.byteLength+5+t.byteLength)+4]=255&n.byteLength,r.set(n,23+(5+e.byteLength+5+t.byteLength)+5)}function Ie(e){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not find H265 startcode until payload end!")}be.init();var Ce=be,Le=(Ne.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},Ne),Pe=n(7),De=(Oe.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},Oe.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(Oe.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(Oe.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),Oe.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},Oe.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},Oe.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new c.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),t&&this._remuxVideo(t),e&&this._remuxAudio(e)},Oe.prototype._onTrackMetadataReceived=function(e,t){var n=null,i="mp4",r=t.codec;if("audio"===e)n="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(i="mpeg",r="",new Uint8Array):Ce.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=Ce.generateInitSegment(t)}if(!this._onInitSegment)throw new c.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:r,container:e+"/"+i,mediaDuration:t.duration})},Oe.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e&&e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t&&t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},Oe.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},Oe.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(n.samples.push(e),n.length=e.length),e={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(e,!0)},Oe.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var n=e.samples,i=void 0,r=-1,s=this._audioMeta.refSampleDuration,l="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,u=this._dtsBaseInited&&void 0===this._audioNextDts,c=!1;if(n&&0!==n.length&&(1!==n.length||t)){var h,d,f=0,p=null,m=0,g=(m=l?(f=0,e.length):(f=8)+e.length,null);1<n.length&&(m-=(g=n.pop()).length),null!=this._audioStashedLastSample&&(h=this._audioStashedLastSample,this._audioStashedLastSample=null,n.unshift(h),m+=h.length),null!=g&&(this._audioStashedLastSample=g),t=n[0].dts-this._dtsBase,this._audioNextDts?i=t-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(i=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(c=!0)):i=null!=(P=this._audioSegmentInfoList.getLastSampleBefore(t))?(D=t-(P.originalDts+P.duration),t-(P.dts+P.duration+(D=D<=3?0:D))):0,c&&(P=t-i,null!=(D=this._videoSegmentInfoList.getLastSegmentBefore(t))&&D.beginDts<P?(S=Le.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(d=D.beginDts,t=P-D.beginDts,a.a.v(this.TAG,"InsertPrefixSilentAudio: dts: "+d+", duration: "+t),n.unshift({unit:S,dts:d,pts:d}),m+=S.byteLength):c=!1);for(var _=[],y=0;y<n.length;y++){var v=(h=n[y]).unit,A=h.dts-this._dtsBase,E=!1,b=null,w=0;if(!((d=A)<-.001)){if("mp3"!==this._audioMeta.codec){var T=A;if((i=A-(T=this._audioNextDts?this._audioNextDts:T))<=-3*s){a.a.w(this.TAG,"Dropping 1 audio frame (originalDts: "+A+" ms ,curRefDts: "+T+" ms)  due to dtsCorrection: "+i+" ms overlap.");continue}if(3*s<=i&&this._fillAudioTimestampGap&&!o.a.safari){E=!0;var S,R=Math.floor(i/s);a.a.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+A+" ms, curRefDts: "+T+" ms, dtsCorrection: "+Math.round(i)+" ms, generate: "+R+" frames"),d=Math.floor(T),w=Math.floor(T+s)-d,null==(S=Le.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(a.a.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),S=v),b=[];for(var I=0;I<R;I++){T+=s;var C=Math.floor(T),L=Math.floor(T+s)-C;C={dts:C,pts:C,cts:0,unit:S,size:S.byteLength,duration:L,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}},b.push(C),m+=C.size}}else d=Math.floor(T),w=Math.floor(T+s)-d;this._audioNextDts=T+s}else d=A-i,w=y!==n.length-1?n[y+1].dts-this._dtsBase-i-d:null!=g?g.dts-this._dtsBase-i-d:1<=_.length?_[_.length-1].duration:Math.floor(s),this._audioNextDts=d+w;-1===r&&(r=d),_.push({dts:d,pts:d,cts:0,unit:h.unit,size:h.unit.byteLength,duration:w,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),E&&_.push.apply(_,b)}}if(0===_.length)e.samples=[],e.length=0;else{for(l?p=new Uint8Array(m):((p=new Uint8Array(m))[0]=m>>>24&255,p[1]=m>>>16&255,p[2]=m>>>8&255,p[3]=255&m,p.set(Ce.types.mdat,4)),y=0;y<_.length;y++)v=_[y].unit,p.set(v,f),f+=v.byteLength;var P=_[_.length-1],D=P.dts+P.duration;(t=new Pe.b).beginDts=r,t.endDts=D,t.beginPts=r,t.endPts=D,t.originalBeginDts=_[0].originalDts,t.originalEndDts=P.originalDts+P.duration,t.firstSample=new Pe.d(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,!1),t.lastSample=new Pe.d(P.dts,P.pts,P.duration,P.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(t),e.samples=_,e.sequenceNumber++,c=l?new Uint8Array:Ce.moof(e,r),e.samples=[],e.length=0,D={type:"audio",data:this._mergeBoxes(c,p).buffer,sampleCount:_.length,info:t},l&&u&&(D.timestampOffset=r),this._onMediaSegment("audio",D)}}}},Oe.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var n=e,i=n.samples,r=void 0,a=-1,o=-1;if(i&&0!==i.length&&(1!==i.length||t)){var s,l=8,u=null,c=(t=8+e.length,null);1<i.length&&(t-=(c=i.pop()).length),null!=this._videoStashedLastSample&&(s=this._videoStashedLastSample,this._videoStashedLastSample=null,i.unshift(s),t+=s.length),null!=c&&(this._videoStashedLastSample=c),e=i[0].dts-this._dtsBase,r=this._videoNextDts?e-this._videoNextDts:this._videoSegmentInfoList.isEmpty()||null==(w=this._videoSegmentInfoList.getLastSampleBefore(e))?0:(T=e-(w.originalDts+w.duration),e-(w.dts+w.duration+(T=T<=3?0:T)));for(var h=new Pe.b,d=[],f=0;f<i.length;f++){var p,m=(s=i[f]).dts-this._dtsBase,g=s.isKeyframe,_=m-r,y=s.cts,v=_+y,A=-1===a&&(a=_,o=v);A=f!==i.length-1?i[f+1].dts-this._dtsBase-r-_:null!=c?c.dts-this._dtsBase-r-_:1<=d.length?d[d.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),g&&((p=new Pe.d(_,v,A,s.dts,!0)).fileposition=s.fileposition,h.appendSyncPoint(p)),d.push({dts:_,pts:v,cts:y,units:s.units,size:s.length,isKeyframe:g,duration:A,originalDts:m,flags:{isLeading:0,dependsOn:g?2:1,isDependedOn:g?1:0,hasRedundancy:0,isNonSync:g?0:1}})}for((u=new Uint8Array(t))[0]=t>>>24&255,u[1]=t>>>16&255,u[2]=t>>>8&255,u[3]=255&t,u.set(Ce.types.mdat,4),f=0;f<d.length;f++)for(var E=d[f].units;E.length;){var b=E.shift().data;u.set(b,l),l+=b.byteLength}var w=(e=d[d.length-1]).dts+e.duration,T=e.pts+e.duration;this._videoNextDts=w,h.beginDts=a,h.endDts=w,h.beginPts=o,h.endPts=T,h.originalBeginDts=d[0].originalDts,h.originalEndDts=e.originalDts+e.duration,h.firstSample=new Pe.d(d[0].dts,d[0].pts,d[0].duration,d[0].originalDts,d[0].isKeyframe),h.lastSample=new Pe.d(e.dts,e.pts,e.duration,e.originalDts,e.isKeyframe),this._isLive||this._videoSegmentInfoList.append(h),n.samples=d,n.sequenceNumber++,this._forceFirstIDR&&((t=d[0].flags).dependsOn=2,t.isNonSync=0),w=Ce.moof(n,a),n.samples=[],n.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(w,u).buffer,sampleCount:d.length,info:h})}}},Oe.prototype._mergeBoxes=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},Oe),ke=n(11),xe=n(1);function Me(e,t){this.TAG="TransmuxingController",this._emitter=new r.a,this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e;var n=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach((function(i){i.timestampBase=n,n+=i.duration,i.cors=e.cors,i.withCredentials=e.withCredentials,t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy)})),isNaN(n)||this._mediaDataSource.duration===n||(this._mediaDataSource.duration=n),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function Oe(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new Pe.c("audio"),this._videoSegmentInfoList=new Pe.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!o.a.chrome||!(o.a.version.major<50||50===o.a.version.major&&o.a.version.build<2661)),this._fillSilentAfterSeek=o.a.msedge||o.a.msie,this._mp3UseMpegAudio=!o.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function Ne(){}Me.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},Me.prototype.on=function(e,t){this._emitter.addListener(e,t)},Me.prototype.off=function(e,t){this._emitter.removeListener(e,t)},Me.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},Me.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e];(n=this._ioctl=new ke.a(n,this._config,e)).onError=this._onIOException.bind(this),n.onSeeked=this._onIOSeeked.bind(this),n.onComplete=this._onIOComplete.bind(this),n.onRedirect=this._onIORedirect.bind(this),n.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):n.onDataArrival=this._onInitChunkArrival.bind(this),n.open(t)},Me.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},Me.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},Me.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},Me.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},Me.prototype.seek=function(e){var t,n,i;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(i=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(n=i.getNearestKeyframe(e),this._remuxer.seek(n.milliseconds),this._ioctl.seek(n.fileposition),this._pendingResolveSeekPoint=n.milliseconds):null==(i=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(n=i.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,n.fileposition),this._pendingResolveSeekPoint=n.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())},Me.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){n=i-1;break}return n},Me.prototype._onInitChunkArrival=function(e,t){var n,i=this,r=0;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,r=this._demuxer.parseChunks(e,t)):(n=null,(n=C.probe(e)).match&&(this._setupFLVDemuxerRemuxer(n),r=this._demuxer.parseChunks(e,t)),n.match||n.needMoreData||(n=Ee.probe(e)).match&&(this._setupTSDemuxerRemuxer(n),r=this._demuxer.parseChunks(e,t)),n.match||n.needMoreData||(n=null,a.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then((function(){i._internalAbort()})),this._emitter.emit(xe.a.DEMUX_ERROR,m.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))),r},Me.prototype._setupFLVDemuxerRemuxer=function(e){this._demuxer=new C(e,this._config),this._remuxer||(this._remuxer=new De(this._config)),null==(e=this._mediaDataSource).duration||isNaN(e.duration)||(this._demuxer.overridedDuration=e.duration),"boolean"==typeof e.hasAudio&&(this._demuxer.overridedHasAudio=e.hasAudio),"boolean"==typeof e.hasVideo&&(this._demuxer.overridedHasVideo=e.hasVideo),this._demuxer.timestampBase=e.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},Me.prototype._setupTSDemuxerRemuxer=function(e){e=this._demuxer=new Ee(e,this._config),this._remuxer||(this._remuxer=new De(this._config)),e.onError=this._onDemuxException.bind(this),e.onMediaInfo=this._onMediaInfo.bind(this),e.onMetaDataArrived=this._onMetaDataArrived.bind(this),e.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),e.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),e.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),e.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),e.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},Me.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,s.a.prototype)),e=Object.assign({},e),Object.setPrototypeOf(e,s.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},Me.prototype._onMetaDataArrived=function(e){this._emitter.emit(xe.a.METADATA_ARRIVED,e)},Me.prototype._onScriptDataArrived=function(e){this._emitter.emit(xe.a.SCRIPTDATA_ARRIVED,e)},Me.prototype._onTimedID3Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(xe.a.TIMED_ID3_METADATA_ARRIVED,e))},Me.prototype._onSMPTE2038Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(xe.a.SMPTE2038_METADATA_ARRIVED,e))},Me.prototype._onSCTE35Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(xe.a.SCTE35_METADATA_ARRIVED,e))},Me.prototype._onPESPrivateDataDescriptor=function(e){this._emitter.emit(xe.a.PES_PRIVATE_DATA_DESCRIPTOR,e)},Me.prototype._onPESPrivateData=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(xe.a.PES_PRIVATE_DATA_ARRIVED,e))},Me.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},Me.prototype._onIOComplete=function(e){(e+=1)<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(xe.a.LOADING_COMPLETE),this._disableStatisticsReporter())},Me.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},Me.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(xe.a.RECOVERED_EARLY_EOF)},Me.prototype._onIOException=function(e,t){a.a.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(xe.a.IO_ERROR,e,t),this._disableStatisticsReporter()},Me.prototype._onDemuxException=function(e,t){a.a.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(xe.a.DEMUX_ERROR,e,t)},Me.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(xe.a.INIT_SEGMENT,e,t)},Me.prototype._onRemuxerMediaSegmentArrival=function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(xe.a.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint)&&"video"===e&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,o.a.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(xe.a.RECOMMEND_SEEKPOINT,t))},Me.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},Me.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},Me.prototype._reportSegmentMediaInfo=function(e){e=this._mediaInfo.segments[e],(e=Object.assign({},e)).duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(xe.a.MEDIA_INFO,e)},Me.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(xe.a.STATISTICS_INFO,e)},t.a=Me},function(e,t,n){var i,r,a,o,s,l,u,c,h,d=n(0),f=(D.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},D.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(D.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return this._intervalBytes/(e=0==e?1:e)/1024},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),D),p=n(2),m=n(4),g=n(3),_=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},c=p.a,i(h=L,n=c),h.prototype=null===n?Object.create(n):(P.prototype=n.prototype,new P),L.isSupported=function(){try{var e=m.a.msedge&&15048<=m.a.version.minor,t=!m.a.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}},L.prototype.destroy=function(){this.isWorking()&&this.abort(),c.prototype.destroy.call(this)},L.prototype.open=function(e,t){var n=this,i=(this._dataSource=e,this._range=t,e.url),r=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL),this._seekHandler.getConfig(i,t)),a=new self.Headers;if("object"==typeof r.headers){var o=r.headers;for(s in o)o.hasOwnProperty(s)&&a.append(s,o[s])}if(i={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},"object"==typeof this._config.headers)for(var s in this._config.headers)a.append(s,this._config.headers[s]);!1===e.cors&&(i.mode="same-origin"),e.withCredentials&&(i.credentials="include"),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,i.signal=this._abortController.signal),this._status=p.c.kConnecting,self.fetch(r.url,i).then((function(e){if(n._requestAbort)n._status=p.c.kIdle,e.body.cancel();else{var t;if(e.ok&&200<=e.status&&e.status<=299)return e.url!==r.url&&n._onURLRedirect&&(t=n._seekHandler.removeURLParameters(e.url),n._onURLRedirect(t)),null!=(t=e.headers.get("Content-Length"))&&(n._contentLength=parseInt(t),0!==n._contentLength)&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength),n._pump.call(n,e.body.getReader());if(n._status=p.c.kError,!n._onError)throw new g.d("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}})).catch((function(e){if(!n._abortController||!n._abortController.signal.aborted){if(n._status=p.c.kError,!n._onError)throw e;n._onError(p.b.EXCEPTION,{code:-1,msg:e.message})}}))},L.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==p.c.kBuffering||!m.a.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},L.prototype._pump=function(e){var t=this;return e.read().then((function(n){if(n.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=p.c.kError;var i=p.b.EARLY_EOF,r={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new g.d(r.msg);t._onError(i,r)}else t._status=p.c.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else if(t._abortController&&t._abortController.signal.aborted)t._status=p.c.kComplete;else{if(!0===t._requestAbort)return t._status=p.c.kComplete,e.cancel();t._status=p.c.kBuffering,i=n.value.buffer,r=t._range.from+t._receivedLength,t._receivedLength+=i.byteLength,t._onDataArrival&&t._onDataArrival(i,r,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=p.c.kComplete;else if(11!==e.code||!m.a.msedge){t._status=p.c.kError;var n=0,i=19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(n=p.b.EXCEPTION,{code:e.code,msg:e.message}):(n=p.b.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!t._onError)throw new g.d(i.msg);t._onError(n,i)}}))},L),y=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},n=function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n(C,l=p.a),C.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return d.a.w("MozChunkedLoader",e.message),!1}},C.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),l.prototype.destroy.call(this)},C.prototype.open=function(e,t){this._dataSource=e,this._range=t;var n=e.url,i=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL),n=this._seekHandler.getConfig(n,t),this._requestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="moz-chunked-arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onloadend=this._onLoadEnd.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);this._status=p.c.kConnecting,i.send()},C.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=p.c.kComplete},C.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect&&(t=this._seekHandler.removeURLParameters(e.responseURL),this._onURLRedirect(t)),0!==e.status&&(e.status<200||299<e.status)){if(this._status=p.c.kError,!this._onError)throw new g.d("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=p.c.kBuffering},C.prototype._onProgress=function(e){var t;this._status!==p.c.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength),e=e.target.response,t=this._range.from+this._receivedLength,this._receivedLength+=e.byteLength,this._onDataArrival)&&this._onDataArrival(e,t,this._receivedLength)},C.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==p.c.kError&&(this._status=p.c.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1):this._requestAbort=!1},C.prototype._onXhrError=function(e){this._status=p.c.kError;var t=0,n=this._contentLength&&e.loaded<this._contentLength?(t=p.b.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=p.b.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.d(n.msg);this._onError(t,n)},C),v=(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},n=function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n(I,o=p.a),I.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return d.a.w("RangeLoader",e.message),!1}},I.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),o.prototype.destroy.call(this)},Object.defineProperty(I.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),I.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=p.c.kConnecting,e=!1,null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(e=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||e?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},I.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength;e=t+e,null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)},I.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var n=e.url,i=(this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL)),n=this._seekHandler.getConfig(n,t),this._currentRequestURL=n.url,this._xhr=new XMLHttpRequest);if(i.open("GET",n.url,!0),i.responseType="arraybuffer",i.onreadystatechange=this._onReadyStateChange.bind(this),i.onprogress=this._onProgress.bind(this),i.onload=this._onLoad.bind(this),i.onerror=this._onXhrError.bind(this),e.withCredentials&&(i.withCredentials=!0),"object"==typeof n.headers){var r=n.headers;for(a in r)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&i.setRequestHeader(a,r[a]);i.send()},I.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=p.c.kComplete},I.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},I.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t),200<=e.status&&e.status<=299)this._waitForTotalLength||(this._status=p.c.kBuffering);else{if(this._status=p.c.kError,!this._onError)throw new g.d("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}},I.prototype._onProgress=function(e){if(this._status!==p.c.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,t=this._totalLengthReceived=!0,n=e.total,this._internalAbort(),null!=n&0!==n)&&(this._totalLength=n),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var n=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(n)}},I.prototype._normalizeSpeed=function(e){var t,n=this._chunkSizeKBList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},I.prototype._onLoad=function(e){var t,n;this._status!==p.c.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)!==(t=0===(t=this._speedSampler.lastSecondKBps)&&(this._zeroSpeedChunkCount++,3<=this._zeroSpeedChunkCount)?this._speedSampler.currentKBps:t)&&(t=this._normalizeSpeed(t),this._currentSpeedNormalized!==t)&&(this._currentSpeedNormalized=t,this._currentChunkSizeKB=t),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,n=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():n=!0,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),n&&(this._status=p.c.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))},I.prototype._onXhrError=function(e){this._status=p.c.kError;var t=0,n=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=p.b.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=p.b.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.d(n.msg);this._onError(t,n)},I),A=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},n=function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n(R,r=p.a),R.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},R.prototype.destroy=function(){this._ws&&this.abort(),r.prototype.destroy.call(this)},R.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=p.c.kConnecting}catch(e){if(this._status=p.c.kError,t={code:e.code,msg:e.message},!this._onError)throw new g.d(t.msg);this._onError(p.b.EXCEPTION,t)}},R.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=p.c.kComplete},R.prototype._onWebSocketOpen=function(e){this._status=p.c.kBuffering},R.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=p.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},R.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{if(this._status=p.c.kError,e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name},!this._onError)throw new g.d(e.msg);this._onError(p.b.EXCEPTION,e)}},R.prototype._dispatchArrayBuffer=function(e){var t=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,t,this._receivedLength)},R.prototype._onWebSocketError=function(e){if(this._status=p.c.kError,e={code:e.code,msg:e.message},!this._onError)throw new g.d(e.msg);this._onError(p.b.EXCEPTION,e)},R),E=(S.prototype.getConfig=function(e,t){var n,i={};return 0!==t.from||-1!==t.to?(n=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",i.Range=n):this._zeroStart&&(i.Range="bytes=0-"),{url:e,headers:i}},S.prototype.removeURLParameters=function(e){return e},S),b=(T.prototype.getConfig=function(e,t){var n;return 0===t.from&&-1===t.to||(n=!0,-1===e.indexOf("?")&&(e+="?",n=!1),n&&(e+="&"),e+=this._startName+"="+t.from.toString(),-1!==t.to&&(e+="&"+this._endName+"="+t.to.toString())),{url:e,headers:{}}},T.prototype.removeURLParameters=function(e){var t=e.split("?")[0],n=void 0,i=e.indexOf("?"),r="";if(null!=(n=-1!==i?e.substring(i+1):n)&&0<n.length)for(var a=n.split("&"),o=0;o<a.length;o++){var s=a[o].split("=");s[0]!==this._startName&&s[0]!==this._endName&&(0<o&&(r+="&"),r+=a[o])}return 0===r.length?t:t+"?"+r},T);function w(e,t,n){this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=65536,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new f,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function T(e,t){this._startName=e,this._endName=t}function S(e){this._zeroStart=e||!1}function R(){var e=r.call(this,"websocket-loader")||this;return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function I(e,t){var n=o.call(this,"xhr-range-loader")||this;return n.TAG="RangeLoader",n._seekHandler=e,n._config=t,n._needStash=!1,n._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],n._currentChunkSizeKB=384,n._currentSpeedNormalized=0,n._zeroSpeedChunkCount=0,n._xhr=null,n._speedSampler=new f,n._requestAbort=!1,n._waitForTotalLength=!1,n._totalLengthReceived=!1,n._currentRequestURL=null,n._currentRedirectedURL=null,n._currentRequestRange=null,n._totalLength=null,n._contentLength=null,n._receivedLength=0,n._lastTimeLoaded=0,n}function C(e,t){var n=l.call(this,"xhr-moz-chunked-loader")||this;return n.TAG="MozChunkedLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._xhr=null,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n}function L(e,t){var n=c.call(this,"fetch-stream-loader")||this;return n.TAG="FetchStreamLoader",n._seekHandler=e,n._config=t,n._needStash=!0,n._requestAbort=!1,n._abortController=null,n._contentLength=null,n._receivedLength=0,n}function P(){this.constructor=h}function D(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}w.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},w.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},w.prototype.isPaused=function(){return this._paused},Object.defineProperty(w.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentSpeed",{get:function(){return this._loaderClass===v?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),w.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new E(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new b(t,n)}else{if("custom"!==e.seekType)throw new g.b("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new g.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},w.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=A;else if(_.isSupported())this._loaderClass=_;else if(y.isSupported())this._loaderClass=y;else{if(!v.isSupported())throw new g.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=v}},w.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},w.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},w.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},w.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},w.prototype.resume=function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))},w.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},w.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null,t={from:e,to:-1},this._currentRange={from:t.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,t),this._onSeeked&&this._onSeeked()},w.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new g.b("Url must be a non-empty string!");this._dataSource.url=e},w.prototype._expandBuffer=function(e){for(var t,n,i=this._stashSize;i+1048576<e;)i*=2;(i+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(i),0<this._stashUsed&&(n=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,i).set(n,0)),this._stashBuffer=t,this._bufferSize=i)},w.prototype._normalizeSpeed=function(e){var t,n=this._speedNormalizeList,i=n.length-1,r=0,a=i;if(e<n[0])return n[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===i||e>=n[t]&&e<n[t+1])return n[t];n[t]<e?r=t+1:a=t-1}},w.prototype._adjustStashSize=function(e){var t=0;e=1024*(t=8192<(t=this._config.isLive?e/8:e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)?8192:t)+1048576,this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t},w.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},w.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},w.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},w.prototype._onLoaderChunkArrival=function(e,t,n){if(!this._onDataArrival)throw new g.a("IOController: No existing consumer (onDataArrival) callback!");var i,r,a,o,s;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof)&&this._onRecoveredEarlyEof(),this._speedSampler.addBytes(e.byteLength),0!==(i=this._speedSampler.lastSecondKBps)&&(i=this._normalizeSpeed(i),this._speedNormalized!==i)&&(this._speedNormalized=i,this._adjustStashSize(i)),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?((a=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(a=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(i=this._stashBuffer.slice(0,this._stashUsed),(o=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?0<o&&(s=new Uint8Array(i,o),a.set(s,0),this._stashUsed=s.byteLength,this._stashByteStart+=o):(this._stashUsed=0,this._stashByteStart+=o),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&(this._expandBuffer(r),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o))):0===this._stashUsed?(o=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-o)>this._bufferSize&&this._expandBuffer(r),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,o),0),this._stashUsed+=r,this._stashByteStart=t+o):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(o=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<o&&(s=new Uint8Array(this._stashBuffer,o),a.set(s,0)),this._stashUsed-=o,this._stashByteStart+=o))},w.prototype._flushStashBuffer=function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),i=t.byteLength-n;if(n<t.byteLength){if(!e)return 0<n&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,n),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=n),0;d.a.w(this.TAG,i+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,i}return 0},w.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},w.prototype._onLoaderError=function(e,t){switch(d.a.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=p.b.UNRECOVERABLE_EARLY_EOF),e){case p.b.EARLY_EOF:var n;if(!this._config.isLive&&this._totalLength)return void((n=this._currentRange.to+1)<this._totalLength&&(d.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)));e=p.b.UNRECOVERABLE_EARLY_EOF;case p.b.UNRECOVERABLE_EARLY_EOF:case p.b.CONNECTING_TIMEOUT:case p.b.HTTP_STATUS_CODE_INVALID:case p.b.EXCEPTION:}if(!this._onError)throw new g.d("IOException: "+t.msg);this._onError(e,t)},t.a=w},function(e,t,n){r.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},"function"!=typeof self.Promise&&n(15).polyfill()};var i=r;function r(){}i.install(),t.a=i},function(e,t,n){function i(e){var t={};function n(i){var r;return(t[i]||(r=t[i]={i:i,l:!1,exports:{}},e[i].call(r.exports,r,r.exports,n),r.l=!0,r)).exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw e};var i=n(n.s=ENTRY_MODULE);return i.default||i}function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(e,t){var a={main:n.m},o=(t=t||{}).all?{main:Object.keys(a.main)}:function(t){for(var i={main:[e]},a={main:[]},o={main:{}};function(e){return Object.keys(e).reduce((function(t,n){return t||0<e[n].length}),!1)}(i);)for(var s=Object.keys(i),l=0;l<s.length;l++){var u=s[l],c=i[u].pop();if(o[u]=o[u]||{},!o[u][c]&&t[u][c]){o[u][c]=!0,a[u]=a[u]||[],a[u].push(c);for(var h=function(e,t,i){var a={},o=(a[i]=[],t.toString());if(t=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)){t=t[1];for(var s,l=new RegExp("(\\\\n|\\W)"+r(t)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");s=l.exec(o);)"dll-reference"!==s[3]&&a[i].push(s[3]);for(l=new RegExp("\\("+r(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");s=l.exec(o);)e[s[2]]||(a[i].push(s[1]),e[s[2]]=n(s[1]).m),a[s[2]]=a[s[2]]||[],a[s[2]].push(s[4]);for(var u,c=Object.keys(a),h=0;h<c.length;h++)for(var d=0;d<a[c[h]].length;d++)u=a[c[h]][d],isNaN(+u)||(a[c[h]][d]=+a[c[h]][d])}return a}(t,t[u][c],u),d=Object.keys(h),f=0;f<d.length;f++)i[d[f]]=i[d[f]]||[],i[d[f]]=i[d[f]].concat(h[d[f]])}}return a}(a),s="",l=(Object.keys(o).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;o[e][t];)t++;o[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",s=s+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map((function(t){return JSON.stringify(t)+": "+a[e][t].toString()})).join(",")+"});\n"})),s=s+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map((function(e){return JSON.stringify(e)+": "+a.main[e].toString()})).join(",")+"}))(self);",new window.Blob([s],{type:"text/javascript"}));return t.bare||(t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),(l=new window.Worker(t)).objectURL=t),l}},function(e,t,n){e.exports=n(19).default},function(e,t,n){(function(t,n){e.exports=function(){function e(e){return"function"==typeof e}var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,a=void 0,o=void 0,s=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(o?o(p):y())},l="undefined"!=typeof window?window:void 0,u=(u=l||{}).MutationObserver||u.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(p,1)}}var f=new Array(1e3);function p(){for(var e=0;e<r;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;r=0}var m,g,_,y=void 0;function v(e,t){var n,i=this,r=new this.constructor(b),a=(void 0===r[E]&&k(r),i._state);return a?(n=arguments[a-1],s((function(){return P(a,r,n,i._result)}))):C(i,r,e,t),r}function A(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(T(t=new this(b),e),t)}y=c?function(){return t.nextTick(p)}:u?(g=0,c=new u(p),_=document.createTextNode(""),c.observe(_,{characterData:!0}),function(){_.data=g=++g%2}):h?((m=new MessageChannel).port1.onmessage=p,function(){return m.port2.postMessage(0)}):(void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(p)}:d()}catch(e){return d()}}:d)();var E=Math.random().toString(36).substring(2);function b(){}function w(t,n,i){var r,a,o,l;n.constructor===t.constructor&&i===v&&n.constructor.resolve===A?(o=t,1===(l=n)._state?R(o,l._result):2===l._state?I(o,l._result):C(l,void 0,(function(e){return T(o,e)}),(function(e){return I(o,e)}))):void 0!==i&&e(i)?(r=n,a=i,s((function(e){var t=!1,n=function(n,i){try{n.call(i,(function(n){t||(t=!0,r!==n?T(e,n):R(e,n))}),(function(n){t||(t=!0,I(e,n))}))}catch(n){return n}}(a,r,e._label);!t&&n&&(t=!0,I(e,n))}),t)):R(t,n)}function T(e,t){if(e===t)I(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)R(e,t);else{n=void 0;try{n=t.then}catch(t){return void I(e,t)}w(e,t,n)}var n}function S(e){e._onerror&&e._onerror(e._result),L(e)}function R(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length)&&s(L,e)}function I(e,t){void 0===e._state&&(e._state=2,e._result=t,s(S,e))}function C(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+1]=n,r[a+2]=i,0===a&&e._state&&s(L,e)}function L(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?P(n,i,r,a):r(a);e._subscribers.length=0}}function P(t,n,i,r){var a=e(i),o=void 0,s=void 0,l=!0;if(a){try{o=i(r)}catch(t){l=!1,s=t}if(n===o)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else o=r;void 0===n._state&&(a&&l?T(n,o):!1===l?I(n,s):1===t?R(n,o):2===t&&I(n,o))}var D=0;function k(e){e[E]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}N.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},N.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===A){var r,a=void 0,o=void 0,s=!1;try{a=e.then}catch(e){s=!0,o=e}a===v&&void 0!==e._state?this._settledAt(e._state,t,e._result):"function"!=typeof a?(this._remaining--,this._result[t]=e):n===M?(r=new n(b),s?I(r,o):w(r,e,a),this._willSettleAt(r,t)):this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(i(e),t)},N.prototype._settledAt=function(e,t,n){var i=this.promise;void 0===i._state&&(this._remaining--,2===e?I(i,n):this._result[t]=n),0===this._remaining&&R(i,this._result)},N.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))};var x=N,M=(O.prototype.catch=function(e){return this.then(null,e)},O.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):this.then(t,t)},O);function O(e){if(this[E]=D++,this._result=this._state=void 0,this._subscribers=[],b!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof O))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,n=e;try{n((function(e){T(t,e)}),(function(e){I(t,e)}))}catch(n){I(t,n)}}}function N(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[E]||k(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||R(this.promise,this._result)):I(this.promise,new Error("Array Methods must be provided an Array"))}return M.prototype.then=v,M.all=function(e){return new x(this,e).promise},M.race=function(e){var t=this;return i(e)?new t((function(n,i){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,i)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},M.resolve=A,M.reject=function(e){var t=new this(b);return I(t,e),t},M._setScheduler=function(e){o=e},M._setAsap=function(e){s=e},M._asap=s,M.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=M},M.Promise=M}()}).call(this,n(16),n(17))},function(e,t){var n,i;function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}e=e.exports={};try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}var s,l=[],u=!1,c=-1;function h(){u&&s&&(u=!1,s.length?l=s.concat(l):c=-1,l.length)&&d()}function d(){if(!u){var e=o(h);u=!0;for(var t=l.length;t;){for(s=l,l=[];++c<t;)s&&s[c].run();c=-1,t=l.length}s=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n.r(t);var i=n(9),r=n(12),a=n(10),o=n(1);t.default=function(e){var t=null,n=function(t,n){e.postMessage({msg:"logcat_callback",data:{type:t,logcat:n}})}.bind(this);r.a.install(),e.addEventListener("message",(function(r){switch(r.data.cmd){case"init":(t=new a.a(r.data.param[0],r.data.param[1])).on(o.a.IO_ERROR,function(t,n){e.postMessage({msg:o.a.IO_ERROR,data:{type:t,info:n}})}.bind(this)),t.on(o.a.DEMUX_ERROR,function(t,n){e.postMessage({msg:o.a.DEMUX_ERROR,data:{type:t,info:n}})}.bind(this)),t.on(o.a.INIT_SEGMENT,function(t,n){t={msg:o.a.INIT_SEGMENT,data:{type:t,data:n}},e.postMessage(t,[n.data])}.bind(this)),t.on(o.a.MEDIA_SEGMENT,function(t,n){t={msg:o.a.MEDIA_SEGMENT,data:{type:t,data:n}},e.postMessage(t,[n.data])}.bind(this)),t.on(o.a.LOADING_COMPLETE,function(){var t={msg:o.a.LOADING_COMPLETE};e.postMessage(t)}.bind(this)),t.on(o.a.RECOVERED_EARLY_EOF,function(){var t={msg:o.a.RECOVERED_EARLY_EOF};e.postMessage(t)}.bind(this)),t.on(o.a.MEDIA_INFO,function(t){t={msg:o.a.MEDIA_INFO,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.METADATA_ARRIVED,function(t){t={msg:o.a.METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.SCRIPTDATA_ARRIVED,function(t){t={msg:o.a.SCRIPTDATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.TIMED_ID3_METADATA_ARRIVED,function(t){t={msg:o.a.TIMED_ID3_METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.SMPTE2038_METADATA_ARRIVED,function(t){t={msg:o.a.SMPTE2038_METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.SCTE35_METADATA_ARRIVED,function(t){t={msg:o.a.SCTE35_METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.PES_PRIVATE_DATA_DESCRIPTOR,function(t){t={msg:o.a.PES_PRIVATE_DATA_DESCRIPTOR,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.PES_PRIVATE_DATA_ARRIVED,function(t){t={msg:o.a.PES_PRIVATE_DATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.STATISTICS_INFO,function(t){t={msg:o.a.STATISTICS_INFO,data:t},e.postMessage(t)}.bind(this)),t.on(o.a.RECOMMEND_SEEKPOINT,function(t){e.postMessage({msg:o.a.RECOMMEND_SEEKPOINT,data:t})}.bind(this));break;case"destroy":t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(r.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":var s=r.data.param;i.a.applyConfig(s),!0===s.enableCallback?i.a.addLogListener(n):i.a.removeLogListener(n)}}))}},function(e,t,n){n.r(t);var i=n(12),r=n(11),a={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function o(){return Object.assign({},a)}O.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},O.supportMSEH265Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')},O.supportNetworkStreamIO=function(){var e=new r.a({},o()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},O.getNetworkLoaderTypeName=function(){var e=new r.a({},o()),t=e.loaderType;return e.destroy(),t},O.supportNativeMediaPlayback=function(e){return"probably"===(e=(O.videoElement=null==O.videoElement?window.document.createElement("video"):O.videoElement).canPlayType(e))||"maybe"==e},O.getFeatureList=function(){var e={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.msePlayback=O.supportMSEH264Playback(),e.networkStreamIO=O.supportNetworkStreamIO(),e.networkLoaderName=O.getNetworkLoaderTypeName(),e.mseLivePlayback=e.msePlayback&&e.networkStreamIO,e.mseH265Playback=O.supportMSEH265Playback(),e.nativeMP4H264Playback=O.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=O.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=O.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=O.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e};var s=O,l=n(2),u=n(6),c=n.n(u),h=n(0),d=n(4),f={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info"},p=(u=n(13),n.n(u)),m=n(9),g=n(10),_=n(1),y=n(8),v=(M.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),m.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},M.prototype.on=function(e,t){this._emitter.addListener(e,t)},M.prototype.off=function(e,t){this._emitter.removeListener(e,t)},M.prototype.hasWorker=function(){return null!=this._worker},M.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},M.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},M.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},M.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},M.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},M.prototype._onInitSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(_.a.INIT_SEGMENT,e,t)}))},M.prototype._onMediaSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(_.a.MEDIA_SEGMENT,e,t)}))},M.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(_.a.LOADING_COMPLETE)}))},M.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(_.a.RECOVERED_EARLY_EOF)}))},M.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.MEDIA_INFO,e)}))},M.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.METADATA_ARRIVED,e)}))},M.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.SCRIPTDATA_ARRIVED,e)}))},M.prototype._onTimedID3MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.TIMED_ID3_METADATA_ARRIVED,e)}))},M.prototype._onSMPTE2038MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.SMPTE2038_METADATA_ARRIVED,e)}))},M.prototype._onSCTE35MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.SCTE35_METADATA_ARRIVED,e)}))},M.prototype._onPESPrivateDataDescriptor=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.PES_PRIVATE_DATA_DESCRIPTOR,e)}))},M.prototype._onPESPrivateDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.PES_PRIVATE_DATA_ARRIVED,e)}))},M.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.STATISTICS_INFO,e)}))},M.prototype._onIOError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(_.a.IO_ERROR,e,t)}))},M.prototype._onDemuxError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(_.a.DEMUX_ERROR,e,t)}))},M.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.RECOMMEND_SEEKPOINT,e)}))},M.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},M.prototype._onWorkerMessage=function(e){var t=e.data,n=t.data;if("destroyed"===t.msg||this._workerDestroying)this._workerDestroying=!1,this._worker.terminate(),this._worker=null;else switch(t.msg){case _.a.INIT_SEGMENT:case _.a.MEDIA_SEGMENT:this._emitter.emit(t.msg,n.type,n.data);break;case _.a.LOADING_COMPLETE:case _.a.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case _.a.MEDIA_INFO:Object.setPrototypeOf(n,y.a.prototype),this._emitter.emit(t.msg,n);break;case _.a.METADATA_ARRIVED:case _.a.SCRIPTDATA_ARRIVED:case _.a.TIMED_ID3_METADATA_ARRIVED:case _.a.SMPTE2038_METADATA_ARRIVED:case _.a.SCTE35_METADATA_ARRIVED:case _.a.PES_PRIVATE_DATA_DESCRIPTOR:case _.a.PES_PRIVATE_DATA_ARRIVED:case _.a.STATISTICS_INFO:this._emitter.emit(t.msg,n);break;case _.a.IO_ERROR:case _.a.DEMUX_ERROR:this._emitter.emit(t.msg,n.type,n.info);break;case _.a.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,n);break;case"logcat_callback":h.a.emitter.emit("log",n.type,n.logcat)}},M),A="error",E="source_open",b="update_end",w="buffer_full",T=n(7),S=n(3),R=(x.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},x.prototype.on=function(e,t){this._emitter.addListener(e,t)},x.prototype.off=function(e,t){this._emitter.removeListener(e,t)},x.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new S.a("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},x.prototype.detachMediaElement=function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var n;if((n=this._pendingSegments[e]).splice(0,n.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null,n=this._sourceBuffers[e]){if("closed"!==t.readyState){try{t.removeSourceBuffer(n)}catch(t){h.a.e(this.TAG,t.message)}n.removeEventListener("error",this.e.onSourceBufferError),n.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){h.a.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},x.prototype.appendInitSegment=function(e,t){if(this._mediaSource&&"open"===this._mediaSource.readyState){var n=e,i=""+n.container,r=(n.codec&&0<n.codec.length&&(i+=";codecs="+n.codec),!1);if(h.a.v(this.TAG,"Received Initialization Segment, mimeType: "+i),this._lastInitSegments[n.type]=n,i!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])h.a.v(this.TAG,"Notice: "+n.type+" mimeType changed, origin: "+this._mimeTypes[n.type]+", target: "+i);else{r=!0;try{var a=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(i);a.addEventListener("error",this.e.onSourceBufferError),a.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return h.a.e(this.TAG,e.message),void this._emitter.emit(A,{code:e.code,msg:e.message})}}this._mimeTypes[n.type]=i}t||this._pendingSegments[n.type].push(n),r||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),d.a.safari&&"audio/mpeg"===n.container&&0<n.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())}else this._pendingSourceBufferInit.push(e),this._pendingSegments[e.type].push(e)},x.prototype.appendMediaSegment=function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer(),!(e=this._sourceBuffers[e.type])||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},x.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(e){h.a.e(this.TAG,e.message)}this._idrList.clear();var i=this._pendingSegments[t];if(i.splice(0,i.length),"closed"!==this._mediaSource.readyState){for(var r=0;r<n.buffered.length;r++){var a=n.buffered.start(r),o=n.buffered.end(r);this._pendingRemoveRanges[t].push({start:a,end:o})}n.updating||this._doRemoveRanges(),d.a.safari&&(i=this._lastInitSegments[t])&&(this._pendingSegments[t].push(i),n.updating||this._doAppendSegments())}}},x.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},x.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},x.prototype._needCleanupSourceBuffer=function(){if(this._config.autoCleanupSourceBuffer){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n&&1<=(n=n.buffered).length&&t-n.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},x.prototype._doCleanupSourceBuffer=function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var n=this._sourceBuffers[e];if(n){for(var i=n.buffered,r=!1,a=0;a<i.length;a++){var o,s=i.start(a),l=i.end(a);s<=t&&t<l+3?t-s>=this._config.autoCleanupMaxBackwardDuration&&(r=!0,o=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:s,end:o})):l<t&&(r=!0,this._pendingRemoveRanges[e].push({start:s,end:l}))}r&&!n.updating&&this._doRemoveRanges()}}},x.prototype._updateMediaSourceDuration=function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(t=this._mediaSource.duration,0<(e=this._pendingMediaDuration)&&(isNaN(t)||t<e)&&(h.a.v(this.TAG,"Update MediaSource duration from "+t+" to "+e),this._mediaSource.duration=e),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)},x.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];n.length&&!t.updating;){var i=n.shift();t.remove(i.start,i.end)}},x.prototype._doAppendSegments=function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var n,i,r=t[e].shift();if(r.timestampOffset&&(n=this._sourceBuffers[e].timestampOffset,i=r.timestampOffset/1e3,.1<Math.abs(n-i)&&(h.a.v(this.TAG,"Update MPEG audio timestampOffset from "+n+" to "+i),this._sourceBuffers[e].timestampOffset=i),delete r.timestampOffset),!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(r.data),this._isBufferFull=!1,"video"===e&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(r),22===t.code?(this._isBufferFull||this._emitter.emit(w),this._isBufferFull=!0):(h.a.e(this.TAG,t.message),this._emitter.emit(A,{code:t.code,msg:t.message}))}}},x.prototype._onSourceOpen=function(){if(h.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(E)},x.prototype._onSourceEnded=function(){h.a.v(this.TAG,"MediaSource onSourceEnded")},x.prototype._onSourceClose=function(){h.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},x.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return 0<e.video.length||0<e.audio.length},x.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return 0<e.video.length||0<e.audio.length},x.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(b)},x.prototype._onSourceBufferError=function(e){h.a.e(this.TAG,"SourceBuffer Error: "+e)},x),I=(u=n(5),{NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"}),C={NETWORK_EXCEPTION:l.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:u.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:u.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:u.a.CODEC_UNSUPPORTED},L=(k.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},k.prototype.on=function(e,t){var n=this;e===f.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){n._emitter.emit(f.MEDIA_INFO,n.mediaInfo)})):e===f.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){n._emitter.emit(f.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},k.prototype.off=function(e,t){this._emitter.removeListener(e,t)},k.prototype.attachMediaElement=function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new R(this._config),this._msectl.on(b,this._onmseUpdateEnd.bind(this)),this._msectl.on(w,this._onmseBufferFull.bind(this)),this._msectl.on(E,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(A,(function(e){t._emitter.emit(f.ERROR,I.MEDIA_ERROR,C.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},k.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},k.prototype.load=function(){var e=this;if(!this._mediaElement)throw new S.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new S.a("MSEPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new v(this._mediaDataSource,this._config),this._transmuxer.on(_.a.INIT_SEGMENT,(function(t,n){e._msectl.appendInitSegment(n)})),this._transmuxer.on(_.a.MEDIA_SEGMENT,(function(t,n){var i;e._msectl.appendMediaSegment(n),e._config.lazyLoad&&!e._config.isLive&&(i=e._mediaElement.currentTime,n.info.endDts>=1e3*(i+e._config.lazyLoadMaxDuration))&&null==e._progressChecker&&(h.a.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())})),this._transmuxer.on(_.a.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(f.LOADING_COMPLETE)})),this._transmuxer.on(_.a.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(f.RECOVERED_EARLY_EOF)})),this._transmuxer.on(_.a.IO_ERROR,(function(t,n){e._emitter.emit(f.ERROR,I.NETWORK_ERROR,t,n)})),this._transmuxer.on(_.a.DEMUX_ERROR,(function(t,n){e._emitter.emit(f.ERROR,I.MEDIA_ERROR,t,{code:-1,msg:n})})),this._transmuxer.on(_.a.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(f.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(_.a.METADATA_ARRIVED,(function(t){e._emitter.emit(f.METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(f.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(_.a.TIMED_ID3_METADATA_ARRIVED,(function(t){e._emitter.emit(f.TIMED_ID3_METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.SMPTE2038_METADATA_ARRIVED,(function(t){e._emitter.emit(f.SMPTE2038_METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.SCTE35_METADATA_ARRIVED,(function(t){e._emitter.emit(f.SCTE35_METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.PES_PRIVATE_DATA_DESCRIPTOR,(function(t){e._emitter.emit(f.PES_PRIVATE_DATA_DESCRIPTOR,t)})),this._transmuxer.on(_.a.PES_PRIVATE_DATA_ARRIVED,(function(t){e._emitter.emit(f.PES_PRIVATE_DATA_ARRIVED,t)})),this._transmuxer.on(_.a.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(f.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(_.a.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},k.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},k.prototype.play=function(){return this._mediaElement.play()},k.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(k.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),k.prototype._fillStatisticsInfo=function(e){var t,n,i,r;return e.playerType=this._type,this._mediaElement instanceof HTMLVideoElement&&(t=!0,r=i=0,this._mediaElement.getVideoPlaybackQuality?(i=(n=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,r=n.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1,t&&(e.decodedFrames=i,e.droppedFrames=r)),e},k.prototype._onmseUpdateEnd=function(){var e,t=this._mediaElement.buffered,n=this._mediaElement.currentTime;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&0<t.length&&!this._mediaElement.paused&&(e=t.end(t.length-1))>this._config.liveBufferLatencyMaxLatency&&e-n>this._config.liveBufferLatencyMaxLatency&&(e-=this._config.liveBufferLatencyMinRemain,this.currentTime=e),this._config.lazyLoad&&!this._config.isLive){for(var i=0,r=0;r<t.length;r++){var a=t.start(r),o=t.end(r);if(a<=n&&n<o){i=o;break}}i>=n+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(h.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},k.prototype._onmseBufferFull=function(){h.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},k.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker)&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},k.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,i=0;i<t.length;i++){var r=t.start(i),a=t.end(i);if(r<=e&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n)&&(h.a.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume())},k.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(i<=e&&e<r)return!0}return!1},k.prototype._internalSeek=function(e){var t,n=this._isTimepointBuffered(e),i=!1,r=0;e<1&&0<this._mediaElement.buffered.length&&((t=this._mediaElement.buffered.start(0))<1&&e<t||d.a.safari)&&(i=!0,r=d.a.safari?.1:t),i?(this._requestSetTime=!0,this._mediaElement.currentTime=r):n?(this._alwaysSeekKeyframe?(t=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=t?t.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))},k.prototype._checkAndApplyUnbufferedSeekpoint=function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))},k.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(h.a.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+e.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)},k.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},k.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<n.length&&((n=n.start(0))<1&&t<n||d.a.safari))return this._requestSetTime=!0,void(this._mediaElement.currentTime=d.a.safari?.1:n);this._isTimepointBuffered(t)?(this._alwaysSeekKeyframe&&null!=(n=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=n.dts/1e3),null!=this._progressChecker&&this._checkProgressAndResume()):(this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},k.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},k.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},k.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},k),P=(D.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},D.prototype.on=function(e,t){var n=this;e===f.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(f.MEDIA_INFO,n.mediaInfo)})):e===f.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(f.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},D.prototype.off=function(e,t){this._emitter.removeListener(e,t)},D.prototype.attachMediaElement=function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},D.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},D.prototype.load=function(){if(!this._mediaElement)throw new S.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},D.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},D.prototype.play=function(){return this._mediaElement.play()},D.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(D.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement)&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight),e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"statisticsInfo",{get:function(){var e,t,n,i,r={playerType:this._type,url:this._mediaDataSource.url};return this._mediaElement instanceof HTMLVideoElement&&(e=!0,i=n=0,this._mediaElement.getVideoPlaybackQuality?(n=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,i=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):e=!1,e)&&(r.decodedFrames=n,r.droppedFrames=i),r},enumerable:!1,configurable:!0}),D.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(f.MEDIA_INFO,this.mediaInfo)},D.prototype._reportStatisticsInfo=function(){this._emitter.emit(f.STATISTICS_INFO,this.statisticsInfo)},D);function D(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new c.a,this._config=o(),"object"==typeof t&&Object.assign(this._config,t),"mse"===(t=e.type.toLowerCase())||"mpegts"===t||"m2ts"===t||"flv"===t)throw new S.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new S.b("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function k(e,t){if(this.TAG="MSEPlayer",this._type="MSEPlayer",this._emitter=new c.a,this._config=o(),"object"==typeof t&&Object.assign(this._config,t),"mse"!==(t=e.type.toLowerCase())&&"mpegts"!==t&&"m2ts"!==t&&"flv"!==t)throw new S.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null,t=d.a.chrome&&(d.a.version.major<50||50===d.a.version.major&&d.a.version.build<2661),this._alwaysSeekKeyframe=!!(t||d.a.msedge||d.a.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}function x(e){this.TAG="MSEController",this._config=e,this._emitter=new c.a,this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new T.a}function M(e,t){if(this.TAG="Transmuxer",this._emitter=new c.a,t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=p()(18),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},m.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:m.a.getConfig()})}catch(n){h.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new g.a(e,t)}else this._controller=new g.a(e,t);var n;this._controller&&((n=this._controller).on(_.a.IO_ERROR,this._onIOError.bind(this)),n.on(_.a.DEMUX_ERROR,this._onDemuxError.bind(this)),n.on(_.a.INIT_SEGMENT,this._onInitSegment.bind(this)),n.on(_.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),n.on(_.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),n.on(_.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),n.on(_.a.MEDIA_INFO,this._onMediaInfo.bind(this)),n.on(_.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),n.on(_.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),n.on(_.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),n.on(_.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),n.on(_.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),n.on(_.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),n.on(_.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),n.on(_.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),n.on(_.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)))}function O(){}i.a.install(),n={createPlayer:function(e,t){var n=e;if(null==n||"object"!=typeof n)throw new S.b("MediaDataSource must be an javascript object!");if(!n.hasOwnProperty("type"))throw new S.b("MediaDataSource must has type field to indicate video file type!");switch(n.type){case"mse":case"mpegts":case"m2ts":case"flv":return new L(n,t);default:return new P(n,t)}},isSupported:function(){return s.supportMSEH264Playback()},getFeatureList:function(){return s.getFeatureList()}},n.BaseLoader=l.a,n.LoaderStatus=l.c,n.LoaderErrors=l.b,n.Events=f,n.ErrorTypes=I,n.ErrorDetails=C,n.MSEPlayer=L,n.NativePlayer=P,n.LoggingControl=m.a,Object.defineProperty(n,"version",{enumerable:!0,get:function(){return"1.7.3"}}),t.default=n}],a={},i.m=r,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=14))},function(e,t,n){n.r(t),n.d(t,"NvDashJsCore",(function(){return s}));var i=n(4),r=n(24);let a=n(5),o=n(173);var s=class{constructor(e){this.configFormat={width:e.width||a.DEFAULT_WIDTH,height:e.height||a.DEFAULT_HEIGHT,playerId:e.playerId||a.DEFAILT_WEBGL_PLAY_ID,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1},this.myPlayerID=this.configFormat.playerId+"-dash",this.myPlayer=null,this.videoTag=null,this.duration=-1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onCacheProcess=null,this.onError=null,this.seekResult=null,this.qualityList=[],this.manualLevel=-1,this.onQualityLevels=null,this.url=null,this.onLevelUpdates=null,this.videoCodec=a.CODEC_H264,this.VRPlugin=e.VRPlugin}get VR(){return this.VrPlayer&&this.VrPlayer.vrViewer}makeIt(e){this._createVideo()&&(this._insertVideo(),this._videoAddEvent(),this._createDashPlayer(e),this._addPlayerEvent(),this.onMakeItReady)&&this.onMakeItReady()}_createVideo(e){return window.MediaSource?(this.url=e,this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",window.onclick=document.body.onclick=e=>{this.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.setAttribute("crossOrigin","anonymous"),this.videoTag.setAttribute("webkit-playsinline","true"),this.videoTag.setAttribute("playsinline","true"),!0):(this.onError&&this.onError({msg:i.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:i.ErrorTypes.NOT_SUPPORT,event:i.ErrorEvent.ERROR,url:e}),!1)}_insertVideo(){var e,t=document.querySelector("#"+this.configFormat.playerId);this.VRPlugin?this.VrPlayer||(this.VrPlayer=new r.a({video:this.videoTag,container:t,autoPlay:this.configFormat.autoPlay},this.VRPlugin)):t.getElementsByTagName("video")[0]||(e=t.getElementsByTagName("div"),t.insertBefore(this.videoTag,e[0]))}_createDashPlayer(e){this.myPlayer=o.MediaPlayer().create(),this.myPlayer.initialize(this.videoTag,e,this.configFormat.autoPlay)}_videoAddEvent(){this._videoRemoveEvent(),["play","pause","timeupdate","ended","seeked","error","loadedmetadata"].forEach((e=>{this.videoTag.addEventListener(e,(t=>{switch(e){case"play":case"pause":this.onPlayState&&this.onPlayState(this.isPlayingState());break;case"timeupdate":this._setCacheProcess(),this.onPlayingTime&&this.onPlayingTime(this.videoTag&&this.videoTag.currentTime);break;case"ended":this.onPlayingFinish&&this.onPlayingFinish();break;case"seeked":this.onSeekFinish&&this.onSeekFinish(this.seekResult||!0);break;case"loadedmetadata":this._loadedmetadata()}}))}))}_videoRemoveEvent(){["play","pause","timeupdate","ended","seeked","error","loadedmetadata"].forEach((e=>{this.videoTag.removeEventListener(e,(e=>{}))}))}_addPlayerEvent(){this._removePlayerEvent(),this.myPlayer.on(o.MediaPlayer.events.ERROR,this._handleError.bind(this)),this.myPlayer.on(o.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,(e=>{this.onLevelUpdates&&this.onLevelUpdates(e)})),this.myPlayer.on(o.MediaPlayer.events.MANIFEST_LOADED,(e=>{this._videoCodec(e.data)}))}_removePlayerEvent(){this.myPlayer.off(o.MediaPlayer.events.ERROR,this._handleError)}_loadedmetadata(){this.VrPlayer&&this.VrPlayer.loadVideo&&this.VrPlayer.loadVideo(),this.duration=this.videoTag.duration,this._insertVideo(),this.onLoadFinish&&this.onLoadFinish(),this.onReadyShowDone&&this.onReadyShowDone(),this._setQualityMap()}_handleError(e){this.onError&&this.onError({msg:e.error||e.target&&e.target.error,errorType:i.ErrorTypes.OTHER,event:i.ErrorEvent.ERROR,url:this.url})}_setCacheProcess(){if(this.videoTag&&this.videoTag.buffered.length){let e=this.videoTag.buffered.end(this.videoTag.buffered.length-1);e>=this.duration-.04&&(e=this.duration),this.onCacheProcess&&this.onCacheProcess(e)}}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.configFormat.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.configFormat.height}}play(){var e=this.videoTag.play();void 0!==e&&e.then((e=>{})).catch((e=>{}))}pause(){this.videoTag&&this.videoTag.pause&&this.videoTag.pause()}seek(e){try{this.videoTag.currentTime=e}catch(t){return this.videoTag.currentTime=0,this.seekReadyPts=e,this.seekResult=!1}}setVoice(e){this.videoTag.volume=e,this.videoTag.muted=0==e}isPlayingState(){return this.videoTag&&!this.videoTag.paused}_setQualityMap(){this.qualityList=[];var e=this.myPlayer.getBitrateInfoListFor&&this.myPlayer.getBitrateInfoListFor("video")||[];1<e.length&&(this.qualityList.push({id:-1,label:"自动",index:0,selected:-1===this.manualLevel,mediaType:"video"}),e.forEach(((e,t)=>{this.qualityList.push({id:t,label:`${Math.floor(e.bitrate/1024)}kbps-${e.height}P`,index:t+1,with:e.width,height:e.height,bitrate:e.bitrate,selected:this.manualLevel===t,mediaType:"video"})})),this.onQualityLevels(this.qualityList))}_videoCodec(e){var t={av01:a.CODEC_AV1,avc1:a.CODEC_H264,hvc1:a.CODEC_H265};let n=null;if(e&&(e=e.Period_asArray[0])&&e.AdaptationSet[0]&&(n=(e=e.AdaptationSet[0].Representation).codecs||e[0].codecs),n)for(var i in t)-1<n.indexOf(i)&&(this.videoCodec=t[i])}setQuality(e){var t={streaming:{abr:{autoSwitchBitrate:{}}}};0<(e=this.qualityList[e]).index?(t.streaming.abr.autoSwitchBitrate[e.mediaType]=!1,this.myPlayer.updateSettings(t),this.myPlayer.setQualityFor(e.mediaType,e.index-1,!1)):(t.streaming.abr.autoSwitchBitrate[e.mediaType]=!0,this.myPlayer.updateSettings(t))}release(){if(this.VrPlayer&&this.VrPlayer.destroy(),this.videoTag){this._videoRemoveEvent();var e=document.querySelector("#"+this.configFormat.playerId);if(e)try{e.removeChild(this.videoTag)}catch(e){}this._removePlayerEvent(),this.videoTag.remove&&this.videoTag.remove()}this.qualityMap={},this.myPlayer&&this.myPlayer.destroy(),this.myPlayer=null,this.videoTag=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onQualityLevels=null,this.seekResult=null,this.url=null,window.onclick=document.body.onclick=null}}},function(e,t,n){(function(t,n){function i(e){var t=o[e];return void 0!==t||(t=o[e]={exports:{}},r[e].call(t.exports,t,t.exports,i)),t.exports}var r,o,l;self,e.exports=(r={9944:function(e,t){var n={},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var a=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(i.charAt(63&a>>18)),n.push(i.charAt(63&a>>12)),n.push(i.charAt(63&a>>6)),n.push(i.charAt(63&a))}return 2==e.length-t?(a=(e[t]<<16)+(e[t+1]<<8),n.push(i.charAt(63&a>>18)),n.push(i.charAt(63&a>>12)),n.push(i.charAt(63&a>>6)),n.push("=")):1==e.length-t&&(a=e[t]<<16,n.push(i.charAt(63&a>>18)),n.push(i.charAt(63&a>>12)),n.push("==")),n.join("")},o=function(){for(var e=[],t=0;t<64;++t)e[i.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),l=function(e){for(var t=0,n=[],i=0|e.length/4;0<i--;){var r=(o[e.charCodeAt(t)]<<18)+(o[e.charCodeAt(t+1)]<<12)+(o[e.charCodeAt(t+2)]<<6)+o[e.charCodeAt(t+3)];n.push(255&r>>16),n.push(255&r>>8),n.push(255&r),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},u=function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},c=function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")};n.decodeArray=function(e){return e=l(e),new Uint8Array(e)},n.encodeASCII=function(e){return e=u(e),r(e)},n.decodeASCII=function(e){return e=l(e),c(e)},n.encode=function(e){return e=function(e){for(var t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t}(e),r(e)},n.decode=function(e){for(var t=l(e),n=[],i=0;i<t.length;){var r=t[i++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&t[i++])<<12),r|=(63&t[i++])<<6),r|=63&t[i++]),n.push(String.fromCharCode(r))}return n.join("")},t.decode=n.decode,t.decodeArray=n.decodeArray,t.encode=n.encode,t.encodeASCII=n.encodeASCII},9850:function(e,t){function n(e){var t=e;return c.hasOwnProperty(e)&&(t=c[e]),String.fromCharCode(t)}function i(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function r(e,t,n,i,r){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}function a(e,t,n,i,a,o){this.uchar=e||" ",this.penState=new r(t,n,i,a,o)}function o(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new a);this.pos=0,this.currPenState=new r}function s(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new o);this.currRow=14,this.nrRollUpRows=null,this.reset()}function l(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new s,this.nonDisplayedMemory=new s,this.lastOutputScreen=new s,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function u(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new l(1,t),new l(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var c={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},h={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},f={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},p={25:2,26:4,29:6,30:8,31:10,27:13,28:15},m=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],g={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e],this.verboseLevel}};r.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},a.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},o.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(g.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(g.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=n(e);32<=this.pos?g.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},s.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){g.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){g.log("INFO","pacData = "+JSON.stringify(e));var t,n=e.row-1;this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.currRow=n,n=this.rows[this.currRow],null!==e.indent&&(t=e.indent,t=Math.max(t-1,0),n.setCursor(e.indent),e.color=n.chars[t].penState.foreground),n={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1},this.setPen(n)},setBkgData:function(e){g.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){var e;null!==this.nrRollUpRows?(g.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),g.log("INFO","Rolling up")):g.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=0;i<15;i++){var r=this.rows[i].getTextString();r&&t.push(e?"Row "+(i+1)+': "'+r+'"':r.trim())}return 0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):n},getTextAndFormat:function(){return this.rows}},l.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,g.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";g.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(g.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){g.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){g.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){g.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){g.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){g.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){g.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){g.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){g.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){g.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){g.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){g.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){var e;g.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,g.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()},cc_TO:function(e){g.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),g.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=g.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)}},u.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,a,o=!1;this.lastTime=e,g.setTime(e);for(var s=0;s<t.length;s+=2)r=127&t[s],a=127&t[s+1],16<=r&&r<=31&&r===this.lastCmdA&&a===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,g.log("DEBUG","Repeated command ("+i([r,a])+") is dropped")):0!=r||0!=a?(g.log("DATA","["+i([t[s],t[s+1]])+"] -> ("+i([r,a])+")"),(n=(n=(n=(n=this.parseCmd(r,a))||this.parseMidrow(r,a))||this.parsePAC(r,a))||this.parseBackgroundAttributes(r,a))||(o=this.parseChars(r,a))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(o):g.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,g.log("WARNING","Couldn't parse cleaned data "+i([r,a])+" orig: "+i([t[s],t[s+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var n,i;return((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35)&&(i=this.channels[(n=20===e||21===e||23===e?1:2)-1],20===e||21===e||28===e||29===e?32===t?i.cc_RCL():33===t?i.cc_BS():34===t?i.cc_AOF():35===t?i.cc_AON():36===t?i.cc_DER():37===t?i.cc_RU(2):38===t?i.cc_RU(3):39===t?i.cc_RU(4):40===t?i.cc_FON():41===t?i.cc_RDC():42===t?i.cc_TR():43===t?i.cc_RTD():44===t?i.cc_EDM():45===t?i.cc_CR():46===t?i.cc_ENM():47===t&&i.cc_EOC():i.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0)},parseMidrow:function(e,t){var n;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(g.log("ERROR","Mismatch channel in midrow parsing"),!1):((n=this.channels[n-1]).insertChars([32]),n.cc_MIDROW(t),g.log("DEBUG","MIDROW ("+i([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0))},parsePAC:function(e,t){var n,i;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(n=e<=23?1:2,i=this.interpretPAC((64<=t&&t<=95?1==n?h:f:1==n?d:p)[e],t),this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0)},interpretPAC:function(e,t){return(e={color:null,italics:!1,indent:null,underline:!1,row:e}).underline=!(1&~(t=95<t?t-96:t-64)),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},parseChars:function(e,t){var r=null,a=null,o=null;return 17<=(o=25<=e?(r=2,e-8):(r=1,e))&&o<=19?(g.log("INFO","Special char '"+n(o=17===o?t+80:18===o?t+112:t+144)+"' in channel "+r),a=[o],this.lastCmdA=e,this.lastCmdB=t):32<=e&&e<=127&&(a=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null),a&&(r=i(a),g.log("DEBUG","Char codes =  "+r.join(","))),a},parseBackgroundAttributes:function(e,t){var n,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=m[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),this.channels[(e<24?1:2)-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},t.logger=g,t.PenState=r,t.CaptionScreen=s,t.Cea608Parser=u,t.findCea608Nalus=function(e,t,n){for(var i,r,a,o,s,l,u=t,c=[];u<t+n;){if(i=e.getUint32(u),6==(31&e.getUint8(u+4)))for(var h=u+5,d=-1;h<u+4+i-1;){d=0;for(var f=255;255===f;)d+=f=e.getUint8(h),h++;var p=0;for(f=255;255===f;)p+=f=e.getUint8(h),h++;a=p,o=e,s=h,l=void 0,(4!==(r=d)||a<8?null:(r=o.getUint8(s),a=o.getUint16(s+1),l=o.getUint32(s+3),o=o.getUint8(s+7),181==r&&49==a&&1195456820==l&&3==o))&&c.push([h,p]),h+=p}u+=i+4}return c},t.extractCea608DataFromRange=function(e,t){var n=t[0],i=[[],[]],r=31&e.getUint8(n+=8);n+=2;for(var a=0;a<r;a++){var o=4&(s=e.getUint8(n)),s=3&s,l=(n++,e.getUint8(n)),u=(n++,e.getUint8(n));n++,o&&(127&l)+(127&u)!=0&&(0==s?(i[0].push(l),i[0].push(u)):1==s&&(i[1].push(l),i[1].push(u)))}return i}},2540:function(e,t,n){var i=n(6379),r=n(7575),a=n(9378),o=n(1061),s=(n(6513),n="undefined"!=typeof window&&window||n.g).dashjs;(s=s||(n.dashjs={})).MediaPlayer=i.A,s.FactoryMaker=r.A,s.Debug=a.A,s.Version=(0,o.i)()},9378:function(e,t,n){var i=n(1739),r=n(3342);function a(e){e=e||{};var t,n,a,o=this.context,s=(0,i.A)(o).getInstance(),l=e.settings,u=[];function c(e){return(e&&e.bind?e:window.console.log).bind(window.console)}function h(e,i){var o,c="";t&&(o=(new Date).getTime(),c+="["+(o-a)+"]"),n&&i&&i.getClassName&&(c+="["+i.getClassName()+"]",i.getType)&&(c+="["+i.getType()+"]"),0<c.length&&(c+=" ");for(var h=arguments.length,d=new Array(2<h?h-2:0),f=2;f<h;f++)d[f-2]=arguments[f];Array.apply(null,d).forEach((function(e){c+=e+" "})),u[e]&&l&&l.get().debug.logLevel>=e&&u[e](c),l&&l.get().debug.dispatchEvent&&s.trigger(r.A.LOG,{message:c,level:e})}return o={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.apply(void 0,[1,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.apply(void 0,[2,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.apply(void 0,[3,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.apply(void 0,[4,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.apply(void 0,[5,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){t=e},setCalleeNameVisible:function(e){n=e}},n=t=!0,a=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(u[1]=c(window.console.error),u[2]=c(window.console.error),u[3]=c(window.console.warn),u[4]=c(window.console.info),u[5]=c(window.console.debug)),o}n=n(7575),a.__dashjs_factory_name="Debug";var o=n.A.getSingletonFactory(a);o.LOG_LEVEL_NONE=0,o.LOG_LEVEL_FATAL=1,o.LOG_LEVEL_ERROR=2,o.LOG_LEVEL_WARNING=3,o.LOG_LEVEL_INFO=4,o.LOG_LEVEL_DEBUG=5,n.A.updateSingletonFactory(a.__dashjs_factory_name,o),t.A=o},1739:function(e,t,n){var i=n(7575),r=n(8914);function a(){var e={};function t(t,n,i){var r=-1;return e[t]&&e[t].some((function(e,t){if(e&&e.callback===n&&(!i||i===e.scope))return r=t,!0})),r}return{on:function(n,i,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!i||"function"!=typeof i)throw new Error("listener must be a function: "+i);var o,s=a.priority||0;0<=t(n,i,r)||(e[n]=e[n]||[],o={callback:i,scope:r,priority:s},r&&r.getStreamId&&(o.streamId=r.getStreamId()),r&&r.getType&&(o.mediaType=r.getType()),a&&a.mode&&(o.mode=a.mode),e[n].some((function(t,i){if(t&&s>t.priority)return e[n].splice(i,0,o),!0})))||e[n].push(o)},off:function(n,i,r){n&&i&&e[n]&&((i=t(n,i,r))<0||(e[n][i]=null))},trigger:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(t&&e[t]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,i.streamId&&(n.streamId=i.streamId),i.mediaType&&(n.mediaType=i.mediaType),e[t].filter((function(e){return!(!e||i.streamId&&e.streamId&&e.streamId!==i.streamId||i.mediaType&&e.mediaType&&e.mediaType!==i.mediaType||i.mode&&e.mode&&e.mode!==i.mode||!e.mode&&i.mode&&i.mode===r.A.EVENT_MODE_ON_RECEIVE)})).forEach((function(e){return e&&e.callback.call(e.scope,n)}))}},reset:function(){e={}}}}a.__dashjs_factory_name="EventBus",(n=i.A.getSingletonFactory(a)).EVENT_PRIORITY_LOW=0,n.EVENT_PRIORITY_HIGH=5e3,i.A.updateSingletonFactory(a.__dashjs_factory_name,n),t.A=n},7575:function(e,t){i=[],r={},a={};var n,i,r,a,o=n={extend:function(e,t,n,i){!i[e]&&t&&(i[e]={instance:t,override:n})},getSingletonInstance:s,setSingletonInstance:function(e,t,n){for(var r in i){var a=i[r];if(a.context===e&&a.name===t)return void(i[r].instance=n)}i.push({name:t,context:e,instance:n})},deleteSingletonInstances:function(e){i=i.filter((function(t){return t.context!==e}))},getSingletonFactory:function(e){var t=l(e.__dashjs_factory_name,r);return t||(r[e.__dashjs_factory_name]=t=function(t){var n;return void 0===t&&(t={}),{getInstance:function(){return(n=n||s(t,e.__dashjs_factory_name))||(n=c(e,t,arguments),i.push({name:e.__dashjs_factory_name,context:t,instance:n})),n}}}),t},getSingletonFactoryByName:function(e){return r[e]},updateSingletonFactory:function(e,t){u(e,t,r)},getClassFactory:function(e){var t=l(e.__dashjs_factory_name,a);return t||(a[e.__dashjs_factory_name]=t=function(t){return void 0===t&&(t={}),{create:function(){return c(e,t,arguments)}}}),t},getClassFactoryByName:function(e){return a[e]},updateClassFactory:function(e,t){u(e,t,a)}};function s(e,t){for(var n in i)if((n=i[n]).context===e&&n.name===t)return n.instance;return null}function l(e,t){return t[e]}function u(e,t,n){e in n&&(n[e]=t)}function c(e,t,i){var r,a=e.__dashjs_factory_name,o=t[a];if(o){var s,l=o.instance;if(!o.override)return l.apply({context:t,factory:n},i);for(s in r=e.apply({context:t},i),l=l.apply({context:t,factory:n,parent:r},i))r.hasOwnProperty(s)&&(r[s]=l[s])}else r=e.apply({context:t},i);return r.getClassName=function(){return a},r}t.A=o},8416:function(e,t,n){var i=n(7575),r=n(4456),a=n(9378),o=n(4961),s=n(4779),l=n(1739),u=n(3342);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n){var i=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=c(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t);return(t="symbol"==c(i)?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){var e=this.context,t=(0,l.A)(e).getInstance(),n={"streaming.delay.liveDelay":u.A.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":u.A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":u.A.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":u.A.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":u.A.SETTING_UPDATED_PLAYBACK_RATE_MAX},i={debug:{logLevel:a.A.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:o.A.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:o.A.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:o.A.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:o.A.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:h(h(h(h(h(h(h(h(h(h({},s.G.MPD_TYPE,500),s.G.XLINK_EXPANSION_TYPE,500),s.G.MEDIA_SEGMENT_TYPE,1e3),s.G.INIT_SEGMENT_TYPE,1e3),s.G.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),s.G.INDEX_SEGMENT_TYPE,1e3),s.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),s.G.LICENSE,1e3),s.G.OTHER_TYPE,1e3),"lowLatencyReductionFactor",10),retryAttempts:h(h(h(h(h(h(h(h(h(h({},s.G.MPD_TYPE,3),s.G.XLINK_EXPANSION_TYPE,1),s.G.MEDIA_SEGMENT_TYPE,3),s.G.INIT_SEGMENT_TYPE,3),s.G.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),s.G.INDEX_SEGMENT_TYPE,3),s.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),s.G.LICENSE,3),s.G.OTHER_TYPE,3),"lowLatencyMultiplyFactor",5),abr:{movingAverageMethod:o.A.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:o.A.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:o.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:o.A.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},d=r.A.clone(i);return{get:function(){return d},update:function(e){"object"===c(e)&&function e(i,a,o){for(var s in i)i.hasOwnProperty(s)&&a.hasOwnProperty(s)&&("object"!==c(i[s])||i[s]instanceof Array||null===i[s]?(a[s]=r.A.clone(i[s]),n[o+s]&&t.trigger(n[o+s])):e(i[s],a[s],o.slice()+s+"."))}(e,d,"")},reset:function(){d=r.A.clone(i)}}}d.__dashjs_factory_name="Settings",n=i.A.getSingletonFactory(d),t.A=n},4456:function(e,t,n){var i=n(8758),r=n.n(i),a=n(8450);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function")}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=o(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==o(e)?e:String(e)}(i.key),i)}})(i=s,[{key:"mixin",value:function(e,t,n){var i,r={};if(e)for(var a in t)t.hasOwnProperty(a)&&(i=t[a],a in e&&(e[a]===i||a in r&&r[a]===i)||("object"===o(e[a])&&null!==e[a]?e[a]=s.mixin(e[a],i,n):e[a]=n(i)));return e}},{key:"clone",value:function(e){if(!e||"object"!==o(e))return e;if(e instanceof Array)for(var t=[],n=0,i=e.length;n<i;++n)n in e&&t.push(s.clone(e[n]));else t={};return s.mixin(t,e,s.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{var n;return t&&0!==t.length?(n=new URL(e),t.forEach((function(e){e.key&&e.value&&n.searchParams.set(e.key,e.value)})),n.href):e}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(e)for(var n=e.trim().split("\r\n"),i=0,r=n.length;i<r;i++){var a=n[i],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2))}return t}},{key:"generateUuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(e){var t=0;if(0!==e.length)for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}},{key:"getRelativeUrl",value:function(e,t){try{var n,i,a=new URL(e),o=new URL(t);return a.protocol=o.protocol,a.origin!==o.origin?t:(i=0===(n=r().relative(a.pathname.substr(0,a.pathname.lastIndexOf("/")),o.pathname.substr(0,o.pathname.lastIndexOf("/")))).length?1:0,n+=o.pathname.substr(o.pathname.lastIndexOf("/")+i,o.pathname.length-1),o.pathname.length<n.length?o.pathname:n)}catch(e){return t}}},{key:"parseUserAgent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{var t=null===e&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return(0,a.UAParser)(t)}catch(e){return{}}}},{key:"stringHasProtocol",value:function(e){return/(http(s?)):\/\//i.test(e)}}]),Object.defineProperty(i,"prototype",{writable:!1}),n=s,t.A=n},1061:function(e,t,n){n.d(t,{i:function(){return r}});var i="4.7.4";function r(){return i}},7199:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}})((i=r).prototype,[{key:"extend",value:function(e,t){if(e){var n,i=!!t&&t.override,r=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!i||r&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=r;function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function")}t.A=i},4817:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r=function(){return!!e})()}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=a(t);var o=e;if(!(t=r()?Reflect.construct(t,[],a(e).constructor):t.apply(e,n))||"object"!==i(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=o))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CMSD_STATIC_HEADER="cmsdStaticHeader",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",e.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",e.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",e.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",e.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",e.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&o(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4183).A),t.A=n},3342:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r=function(){return!!e})()}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=new(function(e){function t(){if(!((e=this)instanceof t))throw new TypeError("Cannot call a class as a function");var e=this,n=t,o=arguments,s=(n=a(n),e);if(!(n=r()?Reflect.construct(n,o||[],a(e).constructor):n.apply(e,o))||"object"!==i(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=s))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&o(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4817).A)),t.A=n},4183:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}})((i=r).prototype,[{key:"extend",value:function(e,t){if(e){var n,i=!!t&&t.override,r=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!i||r&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=r;function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function")}t.A=i},9662:function(e,t,n){var i=n(8669),r=n(4779),a=n(7575),o=n(8914),s=n(271),l=n(1333);function u(e){var t,n,a,u,c,h=(e=e||{}).eventBus,d=e.debug,f=e.urlUtils,p=e.type,m=e.streamInfo,g=e.segmentsController,_=e.timelineConverter,y=e.baseURLController;function v(){a=null}function A(e,t,n){var i,r,a={};return(n=y.resolve(n.path))&&t!==n.url&&f.isRelative(t)?(i=n.url,r=n.serviceLocation,a=n.queryParams,t&&(i=f.resolve(t,i))):i=t,!f.isRelative(i)&&(e.url=i,e.serviceLocation=r,e.queryParams=a,1)}function E(e,t){var n,a,o,l;return null==t?null:(n=new i.A,o=(a=t.representation).adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].bandwidth,l=t.media,l=(0,s.XX)(l,"Number",t.replacementNumber),l=(0,s.XX)(l,"Time",t.replacementTime),l=(0,s.XX)(l,"Bandwidth",o),l=(0,s.dD)(l,a.id),l=(0,s.Dr)(l),n.mediaType=p,n.type=r.G.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=a.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.availabilityTimeComplete=a.availabilityTimeComplete,n.wallStartTime=t.wallStartTime,n.quality=a.index,n.index=t.index,n.mediaInfo=e,n.adaptationIndex=a.adaptation.index,n.representationId=a.id,A(n,l,a)?n:void 0)}function b(e,t,i){var r=null;return t&&t.segmentInfoType&&(t=g.getSegmentByTime(t,i))&&(a=t,n.debug("Index for time "+i+" is "+t.index),r=E(e,t)),r}function w(e,t,i){var r=null;if(t=g.getSegmentByIndex(t,i,a?a.mediaStartTime:-1))r=E(e,t),a=t;else{if(u&&!c)return n.debug(p+" No segment found at index: "+i+". Wait for next loop"),null;c=!0}return r}function T(){n.debug("Dynamic stream complete"),c=!0}return t={getCurrentIndex:function(){return a?a.index:-1},getInitRequest:function(e,t){var n,a,o,l;return t?(n=p,a=new i.A,l=(o=t.adaptation.period).start,a.mediaType=n,a.type=r.G.INIT_SEGMENT_TYPE,a.range=t.range,a.availabilityStartTime=_.calcAvailabilityStartTimeFromPresentationTime(l,t,u),a.availabilityEndTime=_.calcAvailabilityEndTimeFromPresentationTime(l+o.duration,t,u),a.quality=t.index,a.mediaInfo=e,a.representationId=t.id,A(a,t.initialization,t)?(a.url=(0,s.XX)(a.url,"Bandwidth",t.bandwidth),a):void 0):null},getNextSegmentRequest:function(e,t){return t&&t.segmentInfoType?w(e,t,a?a.index+1:0):null},getNextSegmentRequestIdempotent:function(e,t){var n=a?a.index+1:0;return(t=g.getSegmentByIndex(t,n,a?a.mediaStartTime:-1))?E(e,t):null},getSegmentRequestForTime:b,getStreamId:function(){return m.id},getStreamInfo:function(){return m},getType:function(){return p},getValidTimeAheadOfTargetTime:function(e,t,n,i){try{if(isNaN(e)||!t||!n)return NaN;if(e<0&&(e=0),isNaN(i)&&(i=.5),b(t,n,e))return e;if(n.adaptation.period.start+n.adaptation.period.duration<e)return NaN;for(var r,a=isFinite(n.adaptation.period.duration)?n.adaptation.period.start+n.adaptation.period.duration:e+30,o=Math.min(e+i,a),s=NaN,l=null;o<=a;){var u=null;if(u=o<=a?b(t,n,o):u){s=o,l=u;break}o+=i}return l?(r=l.startTime+l.duration,e>l.startTime&&i<r-e?e:!isNaN(l.startTime)&&e<l.startTime&&s>l.startTime?l.startTime+.001:Math.min(r-i,s)):s}catch(e){return NaN}},initialize:function(e){u=e,c=!1,g.initialize(e)},isLastSegmentRequested:function(e,t){if(!e||!a)return!1;if(c)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(a.presentationStartTime+a.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(a.index)&&a.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!u||e.segmentInfoType===l.A.SEGMENT_TEMPLATE)return!0;if(u&&e.segmentInfoType===l.A.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(u&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===l.A.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&a&&!isNaN(a.mediaStartTime)&&!isNaN(a.duration)&&a.mediaStartTime+a.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(e,t){return t&&t.segmentInfoType?w(e,t,a?a.index:0):null},reset:function(){v(),h.off(o.A.DYNAMIC_TO_STATIC,T,t)}},n=d.getLogger(t),v(),h.on(o.A.DYNAMIC_TO_STATIC,T,t),t}u.__dashjs_factory_name="DashHandler",t.A=a.A.getClassFactory(u)},1333:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}})((i=r).prototype,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=new r;function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.init()}t.A=i},6544:function(e,t,n){var i=n(7575),r=n(2736),a=n(5573),o=n(3167),s=n(9503);function l(e){e=e||{};var t,n=this.context,i=e.dashConstants,l=e.type,u=e.segmentBaseController;function c(e){return e?e.segments?t[i.SEGMENT_BASE]:t[e.segmentInfoType]:null}return t={},{initialize:function(l){t[i.SEGMENT_TIMELINE]=(0,r.A)(n).create(e,l),t[i.SEGMENT_TEMPLATE]=(0,a.A)(n).create(e,l),t[i.SEGMENT_LIST]=(0,o.A)(n).create(e,l),t[i.SEGMENT_BASE]=(0,s.A)(n).create(e,l)},updateInitData:function(e,t){return t?Promise.resolve():u.getSegmentBaseInitSegment({representation:e,mediaType:l})},updateSegmentData:function(e,t){return t?Promise.resolve():u.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:l})},getSegmentByIndex:function(e,t,n){var i=c(e);return i?i.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=c(e);return n?n.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=c(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}}}l.__dashjs_factory_name="SegmentsController",n=i.A.getClassFactory(l),t.A=n},3167:function(e,t,n){var i=n(7575),r=n(4961),a=n(271);function o(e,t){var n=(e=e||{}).timelineConverter;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(r.A.MISSING_CONFIG_ERROR)}function o(e,r){var o,s,l,u,c;return i(),e?(c=(o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentURL_asArray.length,s=e&&!isNaN(e.startNumber)?e.startNumber:1,l=Math.max(s-1,0),u=null,(l=Math.max(r-l,0))<c&&(c=o.SegmentURL_asArray[l],u=(0,a.L$)(n,t,e,r))&&(u.replacementTime=(s+r-1)*e.segmentDuration,u.media=c.media||"",u.mediaRange=c.mediaRange,u.indexRange=c.indexRange),u):null}return{getSegmentByIndex:o,getSegmentByTime:function(e,t){var r;return i(),!e||(r=e.segmentDuration,isNaN(r))?null:(t=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),o(e,Math.floor(t/r)))},getMediaFinishedInformation:function(e){var t,n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&(t=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,e=e&&!isNaN(e.startNumber)?e.startNumber:1,e=Math.max(e-1,0),n.numberOfSegments=e+t.SegmentURL_asArray.length),n}}}o.__dashjs_factory_name="ListSegmentsGetter",n=i.A.getClassFactory(o),t.A=n},9503:function(e,t,n){var i=n(7575),r=n(4961);function a(e){var t=(e=e||{}).timelineConverter;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(r.A.MISSING_CONFIG_ERROR)}function i(e,t){if(n(),e){var i,r=e.segments?e.segments.length:-1;if(t<r&&(i=e.segments[t])&&i.index===t)return i;for(var a=0;a<r;a++)if((i=e.segments[a])&&i.index===t)return i}return null}return{getSegmentByIndex:i,getSegmentByTime:function(e,t){return n(),t=function(t){if(!e)return-1;var n,i,r,a,o,s=e.segments,l=s?s.length:null,u=-1;if(s&&0<l)for(o=0;o<l;o++)if(r=(i=s[o]).presentationStartTime,t+(n=(a=i.duration)/2)>=r&&t-n<r+a){u=i.index;break}return u}(t),i(e,t)},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments&&(t.numberOfSegments=e.segments.length),t}}}a.__dashjs_factory_name="SegmentBaseGetter",n=i.A.getClassFactory(a),t.A=n},271:function(e,t,n){n.d(t,{Dr:function(){return a},L$:function(){return c},W$:function(){return h},XX:function(){return s},dD:function(){return o}});var i=n(1365);function r(e,t){for(;e.length<t;)e="0"+e;return e}function a(e){return e&&e.split("$$").join("$")}function o(e,t){return t&&e&&-1!==e.indexOf("$RepresentationID$")?(t=t.toString(),e.split("$RepresentationID$").join(t)):e}function s(e,t,n){var i,a,o,s,l,u,c=t.length;if(!e)return e;for(;;){if((i=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",i+c))<0)return e;if((o=e.indexOf("%0",i+c))>i&&o<a)switch(s=e.charAt(a-1),l=parseInt(e.substring(o+2,a-1),10),s){case"d":case"i":case"u":u=r(n.toString(),l);break;case"x":u=r(n.toString(16),l);break;case"X":u=r(n.toString(16),l).toUpperCase();break;case"o":u=r(n.toString(8),l);break;default:return e}else u=n;e=e.substring(0,i)+u+e.substring(a+1)}}function l(e,t,n,r,a,o,s,l){var u=new i.A;return u.representation=e,u.duration=t,u.presentationStartTime=n,u.mediaStartTime=r,u.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(o,e,s),u.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(o+t,e,s),u.wallStartTime=a.calcWallTimeForSegment(u,s),u.replacementNumber=u.representation.startNumber+l,u.index=l,u}function u(e,t,n,i){var r=t.adaptation.period;return!(isFinite(r.duration)&&r.start+r.duration<=n.presentationStartTime)&&(!i||"INF"===t.availabilityTimeOffset||(r=e.getClientReferenceTime(),n.availabilityStartTime.getTime()<=r&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=r)))}function c(e,t,n,i){var r=n.segmentDuration,a=(isNaN(r)&&(r=n.adaptation.period.duration),parseFloat((n.adaptation.period.start+i*r).toFixed(5))),o=parseFloat((a+r).toFixed(5));return r=l(n,r,a,e.calcMediaTimeFromPresentationTime(a,n),e,o,t,i),u(e,n,r,t)?r:null}function h(e,t,n,i,r,a,o,c,h,d){var f=i/a;return r/=a,a=e.calcPresentationTimeFromMediaTime(f,n),u(e,n,n=l(n,r,a,f,e,a+r,t,h),t)?(n.replacementTime=d||i,o=s(o,"Number",n.replacementNumber),o=s(o,"Time",n.replacementTime),n.media=o,n.mediaRange=c,n):null}},5573:function(e,t,n){var i=n(7575),r=n(4961),a=n(271);function o(e,t){var n=(e=e||{}).timelineConverter;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(r.A.MISSING_CONFIG_ERROR)}function o(e,r){var o,s;return i(),e?(o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,r=Math.max(r,0),(s=(0,a.L$)(n,t,e,r))&&(s.replacementTime=Math.round((r-1)*e.segmentDuration*e.timescale,10),r=o.media,r=(0,a.XX)(r,"Number",s.replacementNumber),r=(0,a.XX)(r,"Time",s.replacementTime),s.media=r),s):null}return{getSegmentByIndex:o,getSegmentByTime:function(e,t){var r;return i(),!e||(r=e.segmentDuration,isNaN(r))?null:(t=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),o(e,Math.floor(t/r)))},getMediaFinishedInformation:function(e){var t,n={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&(t=e.segmentDuration,isNaN(t)?n.numberOfSegments=1:n.numberOfSegments=Math.ceil(e.adaptation.period.duration/t)),n}}}o.__dashjs_factory_name="TemplateSegmentsGetter",n=i.A.getClassFactory(o),t.A=n},2736:function(e,t,n){var i=n(7575),r=n(4961),a=n(271);function o(e,t){var n=(e=e||{}).timelineConverter,i=e.dashMetrics;function o(){if(!n)throw new Error(r.A.MISSING_CONFIG_ERROR)}function s(e,t){for(var n,i,r,a,o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,s=o.SegmentTimeline,u=o.SegmentURL_asArray,c=0,h=-1,d=e.timescale,f=!1,p=0,m=(n=s.S_asArray).length;p<m&&!f;p++)for(a=0,(i=n[p]).hasOwnProperty("r")&&(a=i.r),i.hasOwnProperty("t")&&(c=i.t),a<0&&(a=l(e,n[p+1],i,d,c/d)),r=0;r<=a&&!f;r++)(f=t(c,o,u,i,d,++h,p))&&(e.segmentDuration=i.d/d),c+=i.d}function l(e,t,r,a,o){var s;if(t&&t.hasOwnProperty("t"))s=t.t/a;else try{var l,u;u=isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)?(l=i.getCurrentDVRInfo(),isNaN(l.end)?0:l.end):e.adaptation.period.start+e.adaptation.period.duration,s=n.calcMediaTimeFromPresentationTime(u,e),e.segmentDuration=r.d/a}catch(e){s=0}return Math.max(Math.ceil((s-o)/(r.d/a))-1,0)}return{getSegmentByIndex:function(e,i,r){var l,u;return o(),e?(l=null,u=!1,s(e,(function(i,o,s,c,h,d,f){var p;return u||r<0?(o=o.media,p=c.mediaRange,s&&(o=s[f].media||"",p=s[f].mediaRange),l=(0,a.W$)(n,t,e,i,c.d,h,o,p,d,c.tManifest),!0):(i>=r*h-.5*c.d&&(u=!0),!1)})),l):null},getSegmentByTime:function(e,i){var r,l;return o(),e?(r=null,l=n.calcMediaTimeFromPresentationTime(i=void 0===i?null:i,e),s(e,(function(i,o,s,u,c,h,d){var f=parseFloat((l*c).toPrecision(15));return f<i+u.d&&i<=f&&(f=o.media,o=u.mediaRange,s&&(f=s[d].media||"",o=s[d].mediaRange),r=(0,a.W$)(n,t,e,i,u.d,c,f,o,h,u.tManifest),!0)})),r):null},getMediaFinishedInformation:function(e){if(!e)return 0;for(var t,n,i,r,a=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,o=0,s=0,u=0,c=e.timescale,h=(t=a.S_asArray).length,d=0;d<h;d++)for(r=0,(n=t[d]).hasOwnProperty("r")&&(r=n.r),n.hasOwnProperty("t")&&(s=(o=n.t)/c),r<0&&(r=l(e,t[d+1],n,c,s)),i=0;i<=r;i++)u++,s=(o+=n.d)/c;return{numberOfSegments:u,mediaTimeOfLastSignaledSegment:s}}}}o.__dashjs_factory_name="TimelineSegmentsGetter",n=i.A.getClassFactory(o),t.A=n},1365:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}}r=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null},a&&i(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1});var r,a=r;t.A=a},9824:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}}r=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value=""},a&&i(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1});var r,a=r;t.A=a},6379:function(e,t,n){n.d(t,{A:function(){return Vo}}),t=n(9850);var i=n.n(t),r=n(4961),a=n(1333),o=n(6992),s=n(1739),l=n(3342),u=n(7575),c=n(9378),h=n(8914);function d(){var e,t,n,i,a,u,d,f,p,m,g,_,y,v,A,E,b,w,T,S,R,I,C,L,P,D=this.context,k=(0,s.A)(D).getInstance();function x(){F(),b=g=m=0,L=T=!(w=!(C=v=!1)),E=S=NaN,d&&(k.off(l.A.DATA_UPDATE_COMPLETED,X,e),k.off(l.A.LOADING_PROGRESS,ge,e),k.off(l.A.MANIFEST_UPDATED,Ae,e),k.off(l.A.STREAMS_COMPOSED,Ee,e),k.off(h.A.PLAYBACK_ENDED,fe,e),k.off(h.A.STREAM_INITIALIZING,ye,e),k.off(h.A.REPRESENTATION_SWITCH,ve,e),k.off(h.A.BUFFER_LEVEL_STATE_CHANGED,$,e),Q(),d.removeEventListener("canplay",J),d.removeEventListener("canplaythrough",Z),d.removeEventListener("play",ee),d.removeEventListener("waiting",te),d.removeEventListener("playing",ne),d.removeEventListener("pause",ie),d.removeEventListener("error",pe),d.removeEventListener("seeking",re),d.removeEventListener("seeked",ae),d.removeEventListener("timeupdate",oe),d.removeEventListener("progress",se),d.removeEventListener("ratechange",le),d.removeEventListener("loadedmetadata",ue),d.removeEventListener("loadeddata",ce),d.removeEventListener("stalled",_e),d.removeEventListener("ended",he),d.removeEventListener("volumechange",de)),y=_=d=p=null}function M(){return parseFloat((O(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)-G()).toFixed(5))}function O(e){return(e=e||_).start+e.duration}function N(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];_&&d&&d.getElement()?(e&&y&&j(G()),d.play()):v=!0}function F(){_&&d&&d.pause()}function B(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];_&&d&&d.getElement()&&e!==(isNaN(S)?d.getTime():S)&&((R=!0===i)||(S=e),t.info("Requesting seek to time: "+e+(R?" (internal)":"")),y&&r&&j(e),d.setCurrentTime(e,n))}function U(){var e;if(_&&d&&y)return e=n&&n.hasVideoTrack()?r.A.VIDEO:r.A.AUDIO,(e=a.getCurrentDVRInfo(e))&&e.range?e.range.end:0}function j(e){var t=new Date(f.getClientReferenceTime()),n=u.getRegularPeriods()[0];t=f.calcPresentationTimeFromWallTime(t,n),m=t-e}function G(){return _&&d?d.getTime():null}function V(){return _&&d?d.isPaused():null}function H(){return _&&d?d.isSeeking():null}function Y(){return _&&d?d.isStalled():null}function z(){return _&&d?d.getPlaybackRate():null}function W(){return _&&d?d.getEnded():null}function K(){var e,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;V()||!y||0===d.getReadyState()||H()||C||(i=i||(n.hasVideoTrack()?r.A.VIDEO:r.A.AUDIO),i=function(e,t){return(t=(t=a.getCurrentDVRInfo(t))?t.range:null)?e>t.end?Math.max(t.end-m,t.start):0<e&&e+.25<t.start&&Math.abs(e-t.start)<31536e4?T?Math.max(t.end-m,t.start):t.start:e:NaN}(e=G(),i),isNaN(i))||i===e||H()||!Y()&&!I&&1!==d.getReadyState()||(t.debug("UpdateCurrentTime: Seek to actual time: ".concat(i," from currentTime: ").concat(e)),B(i,!1,!1))}function q(){null===p&&(p=setInterval((function(){var e,t;k.trigger(l.A.WALLCLOCK_TIME_UPDATED,{isDynamic:y,time:new Date}),y&&(e=Date.now(),isNaN(E)||e>E+P.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(n.addDVRMetric(),V()?(t=Date.now(),(!A||A+500<t)&&(A=t,oe())):K(),E=e)}),P.get().streaming.wallclockTimeUpdateInterval))}function Q(){clearInterval(p),p=null}function X(e){null!==(e=(e=u.convertRepresentationToRepresentationInfo(e.currentRepresentation))?e.mediaInfo.streamInfo:null)&&_.id===e.id&&(_=e)}function J(){k.trigger(l.A.CAN_PLAY)}function Z(){k.trigger(l.A.CAN_PLAY_THROUGH)}function $(e){e.streamId===n.getActiveStreamInfo().id&&(I=e.state===o.A.BUFFER_EMPTY,P.get().streaming.buffer.setStallState)&&d.setStallState(e.mediaType,e.state===o.A.BUFFER_EMPTY)}function ee(){t.info("Native video element event: play"),K(),q(),k.trigger(l.A.PLAYBACK_STARTED,{startTime:G()})}function te(){t.info("Native video element event: waiting"),k.trigger(l.A.PLAYBACK_WAITING,{playingTime:G()})}function ne(){t.info("Native video element event: playing"),R=!1,k.trigger(l.A.PLAYBACK_PLAYING,{playingTime:G()})}function ie(){t.info("Native video element event: pause"),k.trigger(l.A.PLAYBACK_PAUSED,{ended:W()})}function re(){var e;R||(e=G(),isNaN(S)||S===e||(e=S),S=NaN,t.info("Seeking to: "+e),q(),k.trigger(l.A.PLAYBACK_SEEKING,{seekTime:e,streamId:_.id}))}function ae(){t.info("Native video element event: seeked"),R=!1,k.trigger(l.A.PLAYBACK_SEEKED)}function oe(){_&&k.trigger(l.A.PLAYBACK_TIME_UPDATED,{timeToEnd:M(),time:G(),streamId:_.id})}function se(){k.trigger(l.A.PLAYBACK_PROGRESS,{streamId:_.id})}function le(){var e=z();t.info("Native video element event: ratechange: ",e),k.trigger(l.A.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ue(){t.info("Native video element event: loadedmetadata"),k.trigger(l.A.PLAYBACK_METADATA_LOADED),q()}function ce(){t.info("Native video element event: loadeddata"),k.trigger(l.A.PLAYBACK_LOADED_DATA)}function he(){t.info("Native video element event: ended"),F(),Q();var e=n?n.getActiveStreamInfo():null;e&&k.trigger(l.A.PLAYBACK_ENDED,{isLast:e.isLast})}function de(){k.trigger(l.A.PLAYBACK_VOLUME_CHANGED)}function fe(e){p&&e.isLast&&(t.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),e=e.seekTime||O(),d.setCurrentTime(e),F(),Q())}function pe(e){e=e.target||e.srcElement,k.trigger(l.A.PLAYBACK_ERROR,{error:e.error})}function me(){y=!1}function ge(e){!1===e.stream&&T&&!isNaN(e.request.duration)&&(e=1.2*e.request.duration,m<e)&&(t.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e.toFixed(2)),g=m=e)}function _e(e){k.trigger(l.A.PLAYBACK_STALLED,{e:e})}function ye(e){(e=e.mediaInfo)&&e.supplementalProperties&&e.supplementalProperties[r.A.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&"true"===e.supplementalProperties[r.A.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value&&(t.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),T=!0)}function ve(e){var t=n.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===r.A.VIDEO||e.mediaType===r.A.AUDIO)&&(w=e.currentRepresentation.availabilityTimeComplete,T=!w)&&!L&&(L=!0)}function Ae(){C=!0}function Ee(){C=!1}return e={initialize:function(t,n){_=t,!0!==n&&(d.addEventListener("canplay",J),d.addEventListener("canplaythrough",Z),d.addEventListener("play",ee),d.addEventListener("waiting",te),d.addEventListener("playing",ne),d.addEventListener("pause",ie),d.addEventListener("error",pe),d.addEventListener("seeking",re),d.addEventListener("seeked",ae),d.addEventListener("timeupdate",oe),d.addEventListener("progress",se),d.addEventListener("ratechange",le),d.addEventListener("loadedmetadata",ue),d.addEventListener("loadeddata",ce),d.addEventListener("stalled",_e),d.addEventListener("ended",he),d.addEventListener("volumechange",de),y=_.manifestInfo.isDynamic,R=I=!1,k.on(l.A.DATA_UPDATE_COMPLETED,X,e),k.on(l.A.LOADING_PROGRESS,ge,e),k.on(l.A.MANIFEST_UPDATED,Ae,e),k.on(l.A.STREAMS_COMPOSED,Ee,e),k.on(h.A.PLAYBACK_ENDED,fe,e,{priority:s.A.EVENT_PRIORITY_HIGH}),k.on(h.A.STREAM_INITIALIZING,ye,e),k.on(h.A.REPRESENTATION_SWITCH,ve,e),k.on(h.A.BUFFER_LEVEL_STATE_CHANGED,$,e),k.on(h.A.DYNAMIC_TO_STATIC,me,e),v)&&(v=!1,N())},setConfig:function(e){e&&(e.streamController&&(n=e.streamController),e.serviceDescriptionController&&(i=e.serviceDescriptionController),e.dashMetrics&&(a=e.dashMetrics),e.adapter&&(u=e.adapter),e.videoModel&&(d=e.videoModel),e.timelineConverter&&(f=e.timelineConverter),e.settings)&&(P=e.settings)},getTimeToStreamEnd:M,getBufferLevel:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=null;return n.getActiveStreamProcessors().forEach((function(n){e&&0!==e.length&&-1!==e.indexOf(n.getType())||(n=n.getBufferLevel(),t=null===t?n:Math.min(t,n))})),t},getPlaybackStalled:function(){return I},getTime:G,getLowLatencyModeEnabled:function(){return T},getInitialCatchupModeActivated:function(){return L},getIsManifestUpdateInProgress:function(){return C},getPlaybackRate:z,getPlayedRanges:function(){return _&&d?d.getPlayedRanges():null},getEnded:W,getIsDynamic:function(){return y},getStreamController:function(){return n},computeAndSetLiveDelay:function(e,t){e=!isNaN(e)&&isFinite(e)?e:NaN;var n=u.getSuggestedPresentationDelay(),r=i.getServiceDescriptionSettings();return r=isNaN(P.get().streaming.delay.liveDelay)?null===P.get().streaming.delay.liveDelayFragmentCount||isNaN(P.get().streaming.delay.liveDelayFragmentCount)||isNaN(e)?r&&!isNaN(r.liveDelay)&&0<r.liveDelay?r.liveDelay:!0===P.get().streaming.delay.useSuggestedPresentationDelay&&null!==n&&!isNaN(n)&&0<n?n:isNaN(e)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*_.manifestInfo.minBufferTime:4*e:e*P.get().streaming.delay.liveDelayFragmentCount:P.get().streaming.delay.liveDelay,null!==(n=u.getAvailabilityStartTime())&&(b=n),e=t&&0<t.dvrWindowSize?Math.min(r,t.dvrWindowSize):r,g=m=e},getLiveDelay:function(){return m},getOriginalLiveDelay:function(){return g},getCurrentLiveLatency:function(){var e,t;return!y||isNaN(b)?NaN:(e=G(),isNaN(e)||0===e?0:(t=(new Date).getTime()+1e3*f.getClientTimeOffset(),Math.max(((t-b-1e3*e)/1e3).toFixed(3),0)))},play:N,isPaused:V,isStalled:Y,pause:F,isSeeking:H,getStreamEndTime:O,seek:B,seekToOriginalLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=U();0!==i&&B(i-(m=g),e,t,n)},seekToCurrentLive:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=U();0!==i&&B(i-m,e,t,n)},reset:x,updateCurrentTime:K,getAvailabilityStartTime:function(){return b}},t=(0,c.A)(D).getInstance().getLogger(e),x(),e}d.__dashjs_factory_name="PlaybackController";var f=u.A.getSingletonFactory(d),p=n(8669),m="loading",g="executed";function _(e){var t,n,i,r=(e=e||{}).eventBus,a=e.events,o=e.dashMetrics,s=e.fragmentLoader,l=e.debug,u=e.streamInfo,c=e.type;function h(e){var t;return!!e&&(t=!1,n.some((function(n){if(i=e,r=n,!isNaN(i.index)&&i.startTime===r.startTime&&i.adaptationIndex===r.adaptationIndex&&i.type===r.type||(i=e,r=n,isNaN(i.index)&&isNaN(r.index)&&i.quality===r.quality)||e.action===p.A.ACTION_COMPLETE&&e.action===n.action)return t=!0;var i,r})),t)}function d(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function f(e){n=n.filter((function(t){var n=d(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n}))}function _(e,t){t<=e+.5||(n=n.filter((function(n){var i=d(n);return isNaN(n.startTime)||n.startTime>=t-i||isNaN(n.duration)||n.startTime+n.duration<=e+i})))}function y(e,t){o.addSchedulingInfo(e,t),o.addRequestsQueue(e.mediaType,i,n)}function v(e){e.sender===s&&(i.splice(i.indexOf(e.request),1),e.response&&!e.error&&n.push(e.request),y(e.request,e.error?"failed":g),r.trigger(a.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:u.id,mediaType:c}))}function A(e){e.sender===s&&r.trigger(a.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:u.id,mediaType:c})}function E(e){e.sender===s&&r.trigger(a.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:u.id,mediaType:c})}function b(){n=[],i=[]}return t=l.getLogger(e={getStreamId:function(){return u.id},getType:function(){return c},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],r=[];return t.forEach((function(t){var a,o=function(){var e;switch(t){case m:e=i;break;case g:e=n;break;default:e=[]}return e}();r=r.concat((a=e).hasOwnProperty("time")?[function(e,t,n){for(var i=e.length-1;0<=i;i--){var r=e[i],a=r.startTime,o=a+r.duration;if(n=isNaN(n)?d(r):n,!isNaN(a)&&!isNaN(o)&&a<=t+n&&t-n<o||isNaN(a)&&isNaN(t))return r}return null}(o,a.time,a.threshold)]:o.filter((function(e){for(var t in a)if("state"!==t&&a.hasOwnProperty(t)&&e[t]!=a[t])return!1;return!0})))})),r},isFragmentLoaded:h,isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;if(!(n=h(e)))for(r=0;r<i.length;r++)t=i[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:f,removeExecutedRequestsAfterTime:function(e){n=n.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e}))},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,i=0,r=e.length;i<r;i++)_(n,e.start(i)),n=e.end(i);0<t&&_(n,t)}else f()},abortRequests:function(){t.debug("abort requests"),s.abort(),i=[]},executeRequest:function(e){e.action===p.A.ACTION_DOWNLOAD?(y(e,m),i.push(e),r.trigger(a.FRAGMENT_LOADING_STARTED,{request:e},{streamId:u.id,mediaType:c}),s.load(e)):t.warn("Unknown request action.")},reset:function(){r.off(a.LOADING_COMPLETED,v,this),r.off(a.LOADING_DATA_PROGRESS,A,this),r.off(a.LOADING_ABANDONED,E,this),s&&s.reset(),b()},resetInitialSettings:b,addExecutedRequest:function(e){n.push(e)}}),b(),r.on(a.LOADING_COMPLETED,v,e),r.on(a.LOADING_DATA_PROGRESS,A,e),r.on(a.LOADING_ABANDONED,E,e),e}_.__dashjs_factory_name="FragmentModel";var y=((t=u.A.getClassFactory(_)).FRAGMENT_MODEL_LOADING=m,t.FRAGMENT_MODEL_EXECUTED=g,t.FRAGMENT_MODEL_CANCELED="canceled",t.FRAGMENT_MODEL_FAILED="failed",u.A.updateClassFactory(_.__dashjs_factory_name,t),t),v=n(3339);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var T=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=b(t);var i=e;if(!(t=E()?Reflect.construct(t,[],b(e).constructor):t.apply(e,n))||"object"!==A(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&w(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(7199).A)),S=n(8416),R=n(4779);function I(e){var t,n,i,a,o,s=this.context,u=(0,S.A)(s).getInstance(),h=e.textController,d=e.eventBus,f=[],p=[],m=!1,g=e.mediaSource,_=null;function y(e){return new Promise((function(t){D((function(){i.changeType&&i.changeType(e),t()}))}))}function A(e){return i=h.getTextSourceBuffer(e),Promise.resolve()}function E(){if("function"==typeof i.addEventListener)try{i.addEventListener("updateend",L,!1),i.addEventListener("error",P,!1),i.addEventListener("abort",P,!1)}catch(e){o=setInterval(L,50)}else o=setInterval(L,50)}function b(e){return new Promise((function(t){i&&u.get().streaming.buffer.useAppendWindow?D((function(){try{var r,o;i?(r=g.duration,o=0,e&&!isNaN(e.start)&&!isNaN(e.duration)&&isFinite(e.duration)&&(r=e.start+e.duration),e&&!isNaN(e.start)&&(o=e.start),i.appendWindowEnd===r&&i.appendWindowStart===o||(i.appendWindowStart=0,i.appendWindowEnd=r+.01,i.appendWindowStart=Math.max(o-.1,0),n.debug("Updated append window for ".concat(a.type,". Set start to ").concat(i.appendWindowStart," and end to ").concat(i.appendWindowEnd))),t()):t()}catch(r){n.warn("Failed to set append window"),t()}})):t()}))}function w(e){return new Promise((function(t){i?D((function(){try{i.timestampOffset===e||isNaN(e)||(i.timestampOffset=e,n.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}})):t()}))}function I(){if(!m&&0<p.length){m=!0;var e=p[0],t=(p.splice(0,1),function(){m=!1,0<p.length&&I.call(this),e&&e.data&&e.data.segmentType&&e.data.segmentType!==R.G.INIT_SEGMENT_TYPE&&delete e.data.bytes,e.promise.resolve({chunk:e.data})});try{_=e.request,0===e.data.bytes.byteLength?t.call(this):(i.appendBuffer?i.appendBuffer(e.data.bytes):i.append(e.data.bytes,e.data),D(t.bind(this)))}catch(t){n.fatal('SourceBuffer append failed "'+t+'"'),0<p.length?I():m=!1,delete e.data.bytes,e.promise.reject({chunk:e.data,error:new v.A(t.code,t.message)})}}}function C(){0<f.length&&(i.updating||(f.shift()(),C()))}function L(){i.updating||C()}function P(e){e=e.target||{};var n=l.A.SOURCE_BUFFER_ERROR;e={error:e,lastRequestAppended:_},d.trigger(n,e,{streamId:a.streamInfo.id,mediaType:t})}function D(e){f.push(e),i.updating||C()}return e={getType:function(){return t},getAllBufferRanges:function(){try{return i.buffered}catch(e){return n.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return i},append:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(i,r){e?(p.push({data:e,promise:{resolve:i,reject:r},request:n}),D(I.bind(t))):r({chunk:e,error:new v.A(T.APPEND_ERROR_CODE,T.APPEND_ERROR_MESSAGE)})}))},remove:function(e){return new Promise((function(t,n){var r=e.start,a=e.end;0<=r&&r<a?D((function(){try{i.remove(r,a),D((function(){t({from:r,to:a,unintended:!1}),e.resolve&&e.resolve()}))}catch(t){n({from:r,to:a,unintended:!1,error:new v.A(T.REMOVE_ERROR_CODE,T.REMOVE_ERROR_MESSAGE)}),e.reject&&e.reject(t)}})):t()}))},abort:function(){return new Promise((function(e){try{p=[],"open"===g.readyState?D((function(){try{i&&i.abort(),e()}catch(t){e()}})):(i&&i.setTextTrack&&"ended"===g.readyState&&i.abort(),e())}catch(t){e()}}))},reset:function(){if(i){try{f=[];try{"function"==typeof i.removeEventListener&&(i.removeEventListener("updateend",L,!1),i.removeEventListener("error",P,!1),i.removeEventListener("abort",P,!1)),clearInterval(o)}catch(e){n.error(e)}m=!1,p=[],i.getClassName&&"TextSourceBuffer"===i.getClassName()||(n.debug("Removing sourcebuffer from media source"),g.removeSourceBuffer(i))}catch(e){}i=null}_=null},updateTimestampOffset:w,initializeForStreamSwitch:function(e,n,r){return t=(a=e).type,e=a.codec,i=r.getBuffer(),E(),(r=[]).push(new Promise((function(e){D((function(){var t=i.appendWindowStart,n=i.appendWindowEnd;i&&(i.abort(),i.appendWindowStart=t,i.appendWindowEnd=n),e()}))}))),r.push(b(a.streamInfo)),u.get().streaming.buffer.useChangeTypeForTrackSwitch&&r.push(y(e)),n&&void 0!==n.MSETimeOffset&&r.push(w(n.MSETimeOffset)),Promise.all(r)},initializeForFirstUse:function(e,n,o){t=(a=n).type;var s=a.codec;try{if(s.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return A(e);i=g.addSourceBuffer(s),E();var l=[];return l.push(b(a.streamInfo)),o&&void 0!==o.MSETimeOffset&&l.push(w(o.MSETimeOffset)),Promise.all(l)}catch(n){return a.type==r.A.TEXT&&!a.isFragmented||-1!==s.indexOf('codecs="stpp')||-1!==s.indexOf('codecs="vtt')||-1!==s.indexOf("text/vtt")?A(e):Promise.reject(n)}},updateAppendWindow:b,changeType:y},n=(0,c.A)(s).getInstance().getLogger(e),e}I.__dashjs_factory_name="SourceBufferSink";var C=u.A.getClassFactory(I);function L(e){var t,n,i=this.context,r=[],a=e;function o(e,t){return r=r.filter((function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))})),Promise.resolve()}return e={getAllBufferRanges:function(){for(var e=[],t=0;t<r.length;t++){var n=r[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var i={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(i,"length",{get:function(){return e.length}}),i},append:function(e){return n="InitializationSegment"!==e.segmentType?(r.push(e),r.sort((function(e,t){return e.start-t.start})),null):e,t.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),a&&a({chunk:e}),Promise.resolve()},remove:o,abort:function(){return Promise.resolve()},discharge:function(e,t){i=e,a=t;var i,a,s=r.filter((function(e){return(isNaN(a)||e.start<a)&&(isNaN(i)||e.end>i)}));return n&&(s.push(n),n=null),o(e,t),s},reset:function(){r=[],a=n=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},t=(0,c.A)(i).getInstance().getLogger(e),e}L.__dashjs_factory_name="PreBufferSink";var P=u.A.getClassFactory(L);function D(){var e={};return{save:function(t){var n=t.streamId,i=t.representationId;e[n]=e[n]||{},e[n][i]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}D.__dashjs_factory_name="InitCache";var k=u.A.getSingletonFactory(D),x="BufferController";function M(e){e=e||{};var t,n,i,a,u,d,f,p,m,g,_,A,E,b,w,S,I,L,D,M,O,N=this.context,F=(0,s.A)(N).getInstance(),B=e.errHandler,U=e.fragmentModel,j=e.representationController,G=e.adapter,V=e.textController,H=e.abrController,Y=e.playbackController,z=e.streamInfo,W=e.type,K=e.settings;function q(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n,i){d=e,m&&t&&"function"==typeof m.discharge?(g=m,X(t).then((function(){n()})).catch((function(e){i(e)}))):n()}))}function Q(e){return G.convertRepresentationToRepresentationInfo(j.getRepresentationForQuality(e))}function X(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(i,a){var o,s;L&&e?d?(_=!1,o=e,s=t,new Promise((function(e,t){var i,a,l,u=H.getQualityFor(W,z.id);m=C(N).create({mediaSource:d,textController:V,eventBus:F}),i=o,a=s,l=Q(u),(a&&a[W]&&(W===r.A.VIDEO||W===r.A.AUDIO)?m.initializeForStreamSwitch(i,l,a[W]):m.initializeForFirstUse(z,i,l)).then((function(){return _e(Q(u))})).then((function(){e(m)})).catch((function(e){n.fatal("Caught error on create SourceBuffer: "+e),B.error(new v.A(T.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,T.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+W)),t(e)}))})).then((function(e){i(e)})).catch((function(e){a(e)}))):(_=!0,function(){var e=this;return new Promise((function(t,n){var i=H.getQualityFor(W,z.id);m=P(N).create(te.bind(e)),_e(Q(i)).then((function(){t(m)})).catch((function(){n()}))}))}().then((function(e){i(e)})).catch((function(e){a(e)}))):i(null)}))}function J(e){K.get().streaming.cacheInitSegments&&(n.info("Init fragment finished loading saving to",W+"'s init cache"),L.save(e.chunk)),n.debug("Append Init fragment",W," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),$(e.chunk)}function Z(e){$(e.chunk,e.request)}function $(e,t){m&&(m.append(e,1<arguments.length&&void 0!==t?t:null).then((function(e){te(e)})).catch((function(e){te(e)})),e.mediaInfo.type===r.A.VIDEO)&&Se(l.A.VIDEO_CHUNK_RECEIVED,{chunk:e})}function ee(e){if(e&&0<e.length)for(var t=0,i=e.length;t<i;t++)n.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",Y.getTime())}function te(e){var t,i,a;e.error?(22===e.error.code&&(I=!0,u=.8*be(),n.warn("Quota exceeded, Critical Buffer: "+u),0<u)&&(a=Math.max(.2*u,1),i=u-a,t=Math.min(K.get().streaming.buffer.bufferTimeAtTopQuality,.9*i),i=Math.min(K.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*i),a={streaming:{buffer:{bufferToKeep:parseFloat(a.toFixed(5)),bufferTimeAtTopQuality:parseFloat(t.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(i.toFixed(5))}}},K.update(a)),22!==e.error.code&&Te()||(n.warn("Clearing playback buffer to overcome quota exceed situation"),Se(l.A.QUOTA_EXCEEDED,{criticalBufferLevel:u,quotaExceededTime:e.chunk.start}),pe(fe()))):m&&(le(),I=!1,b=e.chunk)&&b.endFragment&&(b&&!isNaN(b.index)&&(f=Math.max(b.index,f),ue()),t=m.getAllBufferRanges(),b.segmentType===R.G.MEDIA_SEGMENT_TYPE&&(ee(t),re(),isNaN(O)||_||(W!==r.A.AUDIO&&W!==r.A.VIDEO||(a=se(i=Y.getTime(),0),e=se(O,0),a&&e&&a.start===e.start)?O=NaN:(a=j.getCurrentRepresentation().segmentDuration,(e=se(O,a))&&(K.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(i-O)>a?O<=e.end&&Y.seek(Math.max(O,e.start),!1,!0):i<e.start&&Y.seek(e.start,!1,!0))))),e=!1,A&&(0<A.indexOf(b)&&(e=!0),A=null),b)&&!e&&Se(l.A.BYTES_APPENDED_END_FRAGMENT,{quality:b.quality,startTime:b.start,index:b.index,bufferedRanges:t,segmentType:b.segmentType,mediaType:W})}function ne(){return new Promise((function(e,t){var n=ie();n&&0!==n.length?pe(n).then((function(){e()})).catch((function(e){t(e)})):(re(),e())}))}function ie(e){var t,i=[],r=m.getAllBufferRanges();return r&&0!==r.length&&(!e&&0!==e||isNaN(e)?i.push({start:r.start(0),end:r.end(r.length-1)+.5}):(t=function(e,t){var n=K.get().streaming.buffer.bufferToKeep;return n<e-(t=t.start(0))&&(n=Math.max(0,e-n),0<(n=(e=U.getRequests({state:y.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0])?Math.min(e.startTime,n):n))?{start:t,end:n}:null}(e,r),e=function(e,t){var i=t.end(t.length-1)+.5,r=we(e),a=z.manifestInfo.duration>=K.get().streaming.buffer.longFormContentDurationThreshold?K.get().streaming.buffer.bufferTimeAtTopQualityLongForm:K.get().streaming.buffer.bufferTimeAtTopQuality;if((l=isNaN(r)?e:Math.min(r,e+a))>=t.end(t.length-1))return null;if((r=U.getRequests({state:y.FRAGMENT_MODEL_EXECUTED,time:e,threshold:.01})[0])&&(l=Math.max(r.startTime+r.duration,l)),K.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var o=0;o<t.length;o++)if(t.start(o)<=e&&e<=t.end(o)&&t.start(o)<=l&&l<=t.end(o)){var s=l,l=o+1<t.length?t.start(o+1):t.end(o)+1;n.debug("Buffered range ["+t.start(o)+", "+t.end(o)+"] overlaps with targetTime "+e+" and range to be pruned ["+s+", "+i+"], using ["+l+", "+i+"] instead"+(l<i?"":" (no actual pruning)"));break}return l<t.end(t.length-1)?{start:l,end:i}:null}(e,r),t&&i.push(t),e&&i.push(e))),i}function re(){(!M||W===r.A.TEXT&&V.isTextEnabled())&&le()}function ae(){ce()}function oe(){ce(),O=NaN}function se(e,t){if(m){var n,i,r,a,o=m.getAllBufferRanges(),s=null,l=null,u=0,c=isNaN(t)?.15:t;if(null!=o){for(i=0,n=o.length;i<n;i++)if(r=o.start(i),a=o.end(i),null===s)u=Math.abs(r-e),(r<=e&&e<a||u<=c)&&(s=r,l=a);else{if(!((u=r-l)<=c))break;l=a}if(null!==s)return{start:s,end:l}}}return null}function le(){var e,t;Y&&(e=Y.getTime()||0,_&&(e=isNaN(O)?0:O),t=K.get().streaming.gaps.jumpGaps&&!isNaN(K.get().streaming.gaps.smallGapLimit)?K.get().streaming.gaps.smallGapLimit:NaN,a=Math.max(null===(t=se(e,t=K.get().streaming.gaps.jumpGaps?K.get().streaming.gaps.smallGapLimit:t))?0:t.end-e,0),Se(l.A.BUFFER_LEVEL_UPDATED,{mediaType:W,bufferLevel:a}),ce())}function ue(){var e=p-1<=f,t=Y.getTimeToStreamEnd(z)-a<1e-5;!e&&!t||i||(Ee(!0),n.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(z.id," and type ").concat(W)))}function ce(){W!==r.A.AUDIO&&W!==r.A.VIDEO||((!Y.getLowLatencyModeEnabled()&&a<K.get().streaming.buffer.stallThreshold||0===a)&&!i?he(o.A.BUFFER_EMPTY):(i||a>=K.get().streaming.buffer.stallThreshold||Y.getLowLatencyModeEnabled()&&0<a)&&he(o.A.BUFFER_LOADED))}function he(e){E===e||e===o.A.BUFFER_EMPTY&&0===Y.getTime()||W===r.A.TEXT&&!V.isTextEnabled()||(E=e,Se(l.A.BUFFER_LEVEL_STATE_CHANGED,{state:e}),Se(e===o.A.BUFFER_LOADED?l.A.BUFFER_LOADED:l.A.BUFFER_EMPTY),n.debug(e===o.A.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function de(){!m||W===r.A.TEXT||i||pe(fe())}function fe(){var e=[],t=m.getAllBufferRanges();if(t&&0!==t.length){var n=Y.getTime(),i=Math.max(0,n-K.get().streaming.buffer.bufferToKeep),r=U.getRequests({state:y.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(r)i=Math.min(r.startTime,i);else if(0===n&&Y.getIsDynamic())return[];if(t.start(0)<=i){for(var a={start:0,end:i},o=0;o<t.length&&t.end(o)<=i;o++)a.end=t.end(o);a.start<a.end&&e.push(a)}}return e}function pe(e){return new Promise((function(t,n){var i;e&&m&&0!==e.length?(i=[],e.forEach((function(e){var t;i.push((t=e,new Promise((function(e,n){t.resolve=e,t.reject=n,D.push(t)}))))})),S||me(),Promise.all(i).then((function(){t()})).catch((function(e){n(e)}))):t()}))}function me(){try{var e,t;return 0!==D.length&&m?(e=m.getBuffer())&&e.buffered&&0!==e.buffered.length?(t=D.shift(),n.debug("".concat(W,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),S=!0,Y.getTime()<t.end&&Ee(!1),void m.remove(t).then((function(e){ge(e)})).catch((function(e){ge(e)}))):(n.debug("SourceBuffer is empty (or does not exist), halt pruning"),S=!(D=[])):(n.debug("Nothing to prune, halt pruning"),S=!(D=[]))}catch(e){S=!1}}function ge(e){n.debug("onRemoved buffer from:",e.from,"to",e.to),m&&(ee(m.getAllBufferRanges()),0===D.length&&(S=!1,le()),e.unintended&&(n.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),Se(l.A.SEEK_TARGET,{time:e.from})),S?me():(M?M=!1:le(),Se(l.A.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Te(),quotaExceeded:I})))}function _e(e){return new Promise((function(t){e&&void 0!==e.MSETimeOffset&&m&&m.updateTimestampOffset?m.updateTimestampOffset(e.MSETimeOffset).then((function(){t()})).catch((function(){t()})):t()}))}function ye(){return m&&!i?m.updateAppendWindow(z):Promise.resolve()}function ve(){++w*(K.get().streaming.wallclockTimeUpdateInterval/1e3)>=K.get().streaming.buffer.bufferPruningInterval&&(w=0,de())}function Ae(){ce()}function Ee(e){(i=e)?Se(l.A.BUFFERING_COMPLETED):p=Number.POSITIVE_INFINITY}function be(){try{var e,t,n=m.getAllBufferRanges(),i=0;if(n)for(t=0,e=n.length;t<e;t++)i+=n.end(t)-n.start(t);return i}catch(e){return 0}}function we(e){try{var t=e,n=m.getAllBufferRanges();if(!n||0===n.length)return NaN;for(var i=0;t===e&&i<n.length;){var r=n.start(i),a=n.end(i);r<=t&&t<=a&&(t=a),i+=1}return t===e?NaN:t}catch(e){}}function Te(){var e=be();return isNaN(e)||e<u}function Se(e,t){F.trigger(e,t||{},{streamId:z.id,mediaType:W})}function Re(e,t){var n;u=Number.POSITIVE_INFINITY,E=void 0,p=Number.POSITIVE_INFINITY,b=null,I=S=i=!1,w=a=f=0,O=NaN,_=!(D=[]),m&&(n=m,m=null,e||t||n.abort().then((function(){n.reset(t),n=null}))),M=!1}return t={initialize:function(e){q(e),F.on(l.A.INIT_FRAGMENT_LOADED,J,t),F.on(l.A.MEDIA_FRAGMENT_LOADED,Z,t),F.on(l.A.WALLCLOCK_TIME_UPDATED,ve,t),F.on(h.A.PLAYBACK_PLAYING,oe,t),F.on(h.A.PLAYBACK_PROGRESS,re,t),F.on(h.A.PLAYBACK_TIME_UPDATED,re,t),F.on(h.A.PLAYBACK_RATE_CHANGED,Ae,t),F.on(h.A.PLAYBACK_STALLED,ae,t)},getStreamId:function(){return z.id},getType:function(){return W},getBufferControllerType:function(){return x},createBufferSink:X,dischargePreBuffer:function(){if(m&&g&&"function"==typeof g.discharge){var e=g.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+W+"PreBuffer discharge, adding buffer for:",i=0;i<e.length;i++)t+=" start: "+e.start(i)+", end: "+e.end(i)+";";n.debug(t)}else n.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");A=[];for(var r=g.discharge(),a=null,o=0;o<r.length;o++){var s,l=r[o];l.segmentType!==R.G.INIT_SEGMENT_TYPE&&(s=L.extract(l.streamId,l.representationId))&&a!==s&&(A.push(s),m.append(s),a=s),A.push(l),m.append(l)}g.reset(),g=null}},getBuffer:function(){return m},getBufferLevel:function(){return a},getRangeAt:se,hasBufferAtTime:function(e){try{var t=m.getAllBufferRanges();if(t&&0!==t.length)for(var i=0;i<t.length;){var r=t.start(i),a=t.end(i);if(r<=e&&e<=a)return!0;i+=1}return!1}catch(e){return n.error(e),!1}},pruneBuffer:de,setMediaSource:q,getMediaSource:function(){return d},appendInitSegmentFromCache:function(e){return!!(e=L.extract(z.id,e))&&(n.info("Append Init fragment",W," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),$(e),!0)},getIsBufferingCompleted:function(){return i},setIsBufferingCompleted:Ee,getIsPruningInProgress:function(){return S},reset:function(e,t){F.off(l.A.INIT_FRAGMENT_LOADED,J,this),F.off(l.A.MEDIA_FRAGMENT_LOADED,Z,this),F.off(l.A.WALLCLOCK_TIME_UPDATED,ve,this),F.off(h.A.PLAYBACK_PLAYING,oe,this),F.off(h.A.PLAYBACK_PROGRESS,re,this),F.off(h.A.PLAYBACK_TIME_UPDATED,re,this),F.off(h.A.PLAYBACK_RATE_CHANGED,Ae,this),F.off(h.A.PLAYBACK_STALLED,ae,this),Re(e,t)},prepareForPlaybackSeek:function(){return i&&Ee(!1),m.abort()},prepareForReplacementTrackSwitch:function(e){return new Promise((function(t,n){m.abort().then(ye).then((function(){return K.get().streaming.buffer.useChangeTypeForTrackSwitch?m.changeType(e):Promise.resolve()})).then(ne).then((function(){Ee(!1),t()})).catch((function(e){n(e)}))}))},prepareForNonReplacementTrackSwitch:function(e){return new Promise((function(t,n){ye().then((function(){return K.get().streaming.buffer.useChangeTypeForTrackSwitch?m.changeType(e):Promise.resolve()})).then((function(){t()})).catch((function(e){n(e)}))}))},prepareForForceReplacementQualitySwitch:function(e){return new Promise((function(t,n){m.abort().then(ye).then(ne).then((function(){return _e(e)})).then((function(){Ee(!1),t()})).catch((function(e){n(e)}))}))},updateAppendWindow:ye,getAllRangesWithSafetyFactor:ie,getContinuousBufferTimeForTargetTime:we,clearBuffers:pe,pruneAllSafely:ne,updateBufferTimestampOffset:_e,setSeekTarget:function(e){O=e},segmentRequestingCompleted:function(e){isNaN(e)||(p=e,ue())}},n=(0,c.A)(N).getInstance().getLogger(t),L=k(N).getInstance(),Re(),t}M.__dashjs_factory_name=x;var O=u.A.getClassFactory(M),N="NotFragmentedTextBufferController";function F(e){e=e||{};var t,n,i,r,a,o,u=this.context,c=(0,s.A)(u).getInstance(),h=e.textController,d=e.errHandler,f=e.streamInfo,p=e.type;function m(e){r=e}function g(e){n!==e&&(n=e)&&(e=l.A.BUFFERING_COMPLETED,c.trigger(e,{},{streamId:f.id,mediaType:p}))}function _(e){e.chunk.bytes&&!n&&(o.save(e.chunk),a.append(e.chunk),g(!0))}return r=null,n=i=!(t={initialize:function(e){m(e)},getStreamId:function(){return f.id},getType:function(){return p},getBufferControllerType:function(){return N},createBufferSink:function(e){return new Promise((function(t,n){try{(a=C(u).create({mediaSource:r,textController:h,eventBus:c})).initializeForFirstUse(f,e),i||(a.getBuffer()&&"function"==typeof a.getBuffer().initialize&&a.getBuffer().initialize(),i=!0),t(a)}catch(t){d.error(new v.A(T.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,T.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+p)),n(t)}}))},dischargePreBuffer:function(){},getBuffer:function(){return a},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:m,getMediaSource:function(){return r},appendInitSegmentFromCache:function(e){return null!==o.extract(f.id,e)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:g,getIsPruningInProgress:function(){return!1},reset:function(e){c.off(l.A.INIT_FRAGMENT_LOADED,_,t),!e&&a&&(a.abort(),a.reset(),a=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return n=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}}),o=k(u).getInstance(),c.on(l.A.INIT_FRAGMENT_LOADED,_,t),t}F.__dashjs_factory_name=N;var B=u.A.getClassFactory(F);function U(e){e=e||{};var t,n,i,a,u,d,f,p,m,g,_,v,A,E=this.context,b=(0,s.A)(E).getInstance(),w=e.dashMetrics,T=e.mediaPlayerModel,S=e.fragmentModel,R=e.abrController,I=e.playbackController,C=e.textController,L=e.type,P=e.bufferController,D=e.representationController,k=e.settings;function x(){v=!0}function M(){v=!1}function O(e){P.getIsBufferingCompleted()||(N(),e=isNaN(e)?0:e,u=setTimeout(F,e))}function N(){u&&(clearTimeout(u),u=null)}function F(){try{var e;!function(){try{return L===r.A.TEXT&&!C.isTextEnabled()||I.isPaused()&&(!I.getStreamController().getInitialPlayback()||!I.getStreamController().getAutoPlay())&&!k.get().streaming.scheduling.scheduleWhilePaused}catch(e){}}()?function(){try{return v&&D.getCurrentRepresentationInfo()&&(isNaN(m)||g||(t=n.id,r=R.getMaxAllowedIndexFor(L,t),(isNaN(p)||p!=r)&&(i.info("Top quality "+L+" index has changed from "+p+" to "+r),p=r,1))||(e=D.getCurrentRepresentationInfo(),!L||!e||w.getCurrentBufferLevel(L)<B()))}catch(t){}var e,t,r}()?(e=!1,(e=A?R.checkPlaybackQuality(L,n.id):e)||(a=D.getCurrentRepresentationInfo(),_||a.quality!==m||g?(g?(i.debug("Switch track for "+L+", representation id = "+a.id),g=!1):i.debug("Quality has changed, get init request for representationid = "+a.id),b.trigger(l.A.INIT_FRAGMENT_NEEDED,{representationId:a.id,sender:t},{streamId:n.id,mediaType:L}),_=A=!1):(i.debug("Media segment needed for ".concat(L," and stream id ").concat(n.id)),b.trigger(l.A.MEDIA_FRAGMENT_NEEDED,{},{streamId:n.id,mediaType:L}),A=!0))):O(I.getLowLatencyModeEnabled()?k.get().streaming.scheduling.lowLatencyTimeout:k.get().streaming.scheduling.defaultTimeout):N()}catch(e){O(I.getLowLatencyModeEnabled()?k.get().streaming.scheduling.lowLatencyTimeout:k.get().streaming.scheduling.defaultTimeout)}var a}function B(){var e=NaN,t=D.getCurrentRepresentationInfo();return L&&t?(L===r.A.TEXT?function(){try{var e,t;return C.isTextEnabled()?(e=D.getCurrentRepresentationInfo(),isNaN(e.fragmentDuration)?(t=w.getCurrentSchedulingInfo(o.A.SCHEDULING_INFO))?t.duration:0:e.fragmentDuration):0}catch(e){return 0}}:L===r.A.AUDIO&&d?function(){try{var e=w.getCurrentBufferLevel(r.A.VIDEO),t=D.getCurrentRepresentationInfo();return isNaN(t.fragmentDuration)?e+1:Math.max(e+1,t.fragmentDuration)}catch(e){return 0}}:function(){try{var e=D.getCurrentRepresentationInfo().mediaInfo.streamInfo;return R.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=k.get().streaming.buffer.longFormContentDurationThreshold?k.get().streaming.buffer.bufferTimeAtTopQualityLongForm:k.get().streaming.buffer.bufferTimeAtTopQuality:T.getStableBufferTime()}catch(e){return T.getStableBufferTime()}})():e}function U(){j(!0)}function j(e){var t;I&&S&&(t=S.getRequests({state:y.FRAGMENT_MODEL_EXECUTED,time:I.getTime(),threshold:0})[0])&&I.getTime()>=t.startTime&&((!f.mediaInfo||t.mediaInfo.type===f.mediaInfo.type&&t.mediaInfo.index!==f.mediaInfo.index)&&e&&b.trigger(l.A.TRACK_CHANGE_RENDERED,{mediaType:L,oldMediaInfo:f.mediaInfo,newMediaInfo:t.mediaInfo,streamId:n.id}),t.quality===f.quality&&t.adaptationIndex===f.adaptationIndex||!e||(i.debug("Quality change rendered for streamId ".concat(n.id," and type ").concat(L)),b.trigger(l.A.QUALITY_CHANGE_RENDERED,{mediaType:L,oldQuality:f.quality,newQuality:t.quality,streamId:n.id})),f={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}function G(){S.abortRequests(),N()}function V(){k.get().streaming.scheduling.scheduleWhilePaused||O()}function H(e){w.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function Y(){A=!0,p=m=NaN,v=!(_=g=!(f={mediaInfo:void(a=0),quality:NaN,adaptationIndex:NaN}))}return t={initialize:function(e){d=e,b.on(l.A.URL_RESOLUTION_FAILED,G,t),b.on(h.A.PLAYBACK_STARTED,V,t),b.on(h.A.PLAYBACK_RATE_CHANGED,H,t),b.on(h.A.PLAYBACK_TIME_UPDATED,U,t),b.on(h.A.MANAGED_MEDIA_SOURCE_START_STREAMING,x,t),b.on(h.A.MANAGED_MEDIA_SOURCE_END_STREAMING,M,t)},getType:function(){return L},getStreamId:function(){return n.id},setTimeToLoadDelay:function(e){a=e},getTimeToLoadDelay:function(){return a},setSwitchTrack:function(e){g=e},getSwitchTrack:function(){return g},startScheduleTimer:O,clearScheduleTimer:N,reset:function(){b.off(l.A.URL_RESOLUTION_FAILED,G,t),b.off(h.A.PLAYBACK_STARTED,V,t),b.off(h.A.PLAYBACK_RATE_CHANGED,H,t),b.off(h.A.PLAYBACK_TIME_UPDATED,U,t),b.off(h.A.MANAGED_MEDIA_SOURCE_START_STREAMING,x,t),b.off(h.A.MANAGED_MEDIA_SOURCE_END_STREAMING,M,t),N(),j(!1),Y(),n=null},getBufferTarget:B,getPlaybackController:function(){return I},setCheckPlaybackQuality:function(e){A=e},setInitSegmentRequired:function(e){_=e},setLastInitializedQuality:function(e){m=e}},i=(0,c.A)(E).getInstance().getLogger(t),Y(),n=e.streamInfo,t}U.__dashjs_factory_name="ScheduleController";var j=u.A.getClassFactory(U),G=n(271);function V(e){var t,n,i,a,o,s,l=(e=e||{}).eventBus,u=e.events,c=e.abrController,d=e.dashMetrics,f=e.playbackController,p=e.timelineConverter,m=e.type,g=e.streamInfo,_=e.dashConstants,y=e.segmentsController,v=e.isDynamic,A=e.adapter;function E(){i=!(n=null),a=[],o=null}function b(e){return new Promise((function(t,n){var r=e.hasInitialization(),o=e.hasSegments(),l=[];l.push(y.updateInitData(e,r)),l.push(y.updateSegmentData(e,o)),Promise.all(l).then((function(n){n[0]&&!n[0].error&&(u=e,r=n[0],e=r&&!r.error&&r.representation?r.representation:u),(r=e=n[1]&&!n[1].error?function(e,t){if(t&&!t.error){for(var n,i=t.segments,r=[],a=0,o=0,s=i?i.length:0;o<s;o++)n=i[o],(n=(0,G.W$)(p,v,e,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,a))&&(r.push(n),a++);return 0<r.length&&(e.segments=r),e}}(e,n[1]):e).mediaFinishedInformation=y.getMediaFinishedInformation(r);var r,o=e;if(i){var l,u,h=d.getCurrentManifestUpdate(),A=!1;if(h){for(var E=0;E<h.representationInfo.length;E++)if((l=h.representationInfo[E]).index===o.index&&l.mediaType===m){A=!0;break}A||d.addManifestUpdateRepresentationInfo(o,m)}!function(){for(var e=0,t=a.length;e<t;e++){var n=a[e].segmentInfoType;if(!a[e].hasInitialization()||(n===_.SEGMENT_BASE||n===_.BASE_URL)&&!a[e].segments)return}return 1}()||(c.setPlaybackQuality(m,g,(u=s,a.indexOf(u))),(u=d.getCurrentDVRInfo(m))&&d.updateManifestUpdateInfo({latency:u.range.end-f.getTime()}),d.getCurrentRepresentationSwitch(s.adaptation.type)||w(),S())}t()})).catch((function(e){n(e)}))}))}function w(){if(!(c&&d&&f&&p))throw new Error(r.A.MISSING_CONFIG_ERROR);var e=new Date,t=s,n=1e3*f.getTime();t&&d.addRepresentationSwitch(t.adaptation.type,e,n,t.id),l.trigger(h.A.REPRESENTATION_SWITCH,{mediaType:m,streamId:g.id,currentRepresentation:t,numberOfRepresentations:a.length},{streamId:g.id,mediaType:m})}function T(e){return null==e||e>=a.length?null:a[e]}function S(e){i=!1,l.trigger(u.DATA_UPDATE_COMPLETED,{data:n,currentRepresentation:s,error:e},{streamId:g.id,mediaType:m})}function R(e){s=e,o=A.convertRepresentationToRepresentationInfo(s)}function I(e){var t;e.newDuration&&(t=s)&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}return t={getStreamId:function(){return g.id},getType:function(){return m},getData:function(){return n},isUpdating:function(){return i},updateData:function(e,t,o,s,l){return new Promise((function(u,c){if(i=!0,a=t,n=e,R(T(l)),o===r.A.VIDEO||o===r.A.AUDIO||o===r.A.TEXT&&s){for(var h=[],d=0,f=a.length;d<f;d++){var p=a[d];h.push(b(p))}Promise.all(h).then((function(){R(T(l)),u()})).catch((function(e){c(e)}))}else S(),u()}))},getCurrentRepresentation:function(){return s},getCurrentRepresentationInfo:function(){return o},getRepresentationForQuality:T,prepareQualityChange:function(e){R(T(e)),w()},reset:function(){l.off(h.A.MANIFEST_VALIDITY_CHANGED,I,t),E()}},E(),l.on(h.A.MANIFEST_VALIDITY_CHANGED,I,t),t}V.__dashjs_factory_name="RepresentationController";var H=u.A.getClassFactory(V),Y=n(5533),z=n(9662),W=n(7464),K=n(1372);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=q(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==q(e)?e:String(e)}(i.key),i)}}function X(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Z=X((function e(){J(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]})),$=(Z.INITIAL_PLAYOUT_START_REASON="initial_playout",Z.SEEK_START_REASON="seek",Z.RESUME_FROM_PAUSE_START_REASON="resume",Z.METRICS_COLLECTION_START_REASON="metrics_collection_start",X((function e(){J(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}))),ee=($.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",$.REBUFFERING_REASON="rebuffering",$.USER_REQUEST_STOP_REASON="user_request",$.END_OF_PERIOD_STOP_REASON="end_of_period",$.END_OF_CONTENT_STOP_REASON="end_of_content",$.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",$.FAILURE_STOP_REASON="failure",n(6544));function te(){return{ntpToUTC:function(e){var t=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(t.getTime()+e).getTime()}}}te.__dashjs_factory_name="TimeUtils";var ne=u.A.getSingletonFactory(te);function ie(e){e=e||{};var t,n,i,u,d,f,p,m,g,_,A,E,b,w,S,I=this.context,C=(0,s.A)(I).getInstance(),L=e.streamInfo,P=e.type,D=e.errHandler,k=e.mimeType,x=e.timelineConverter,M=e.adapter,N=e.manifestModel,F=e.mediaPlayerModel,U=e.fragmentModel,G=e.abrController,V=e.playbackController,q=e.mediaController,Q=e.textController,X=e.dashMetrics,J=e.settings,Z=e.boxParser,te=e.segmentBlacklistController;function ie(){return L.id}function re(){return M.getIsTextTrack(m.getData())}function ae(){w=0,A=_=g=!(d=[]),S=u=null}function oe(e){return!isNaN(e)&&!isNaN(L.duration)&&isFinite(L.duration)&&e>=L.start+L.duration}function se(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.sender&&(V.getIsManifestUpdateInProgress()?ue():re()&&!Q.isTextEnabled()||!f||!e.representationId||f.appendInitSegmentFromCache(e.representationId)||(0===(e=m.getCurrentRepresentation()).range?le():(e=E?E.getInitRequest(u,e):null)?U.executeRequest(e):t&&(p.setInitSegmentRequired(!0),ue())))}function le(e){var t,o,s,c,h=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];V.getIsManifestUpdateInProgress()||f.getIsPruningInProgress()?ue():(c=we(),(c=isNaN(w)||P===r.A.TEXT&&!Q.isTextEnabled()?null:(E&&(c=m&&c?m.getRepresentationForQuality(c.quality):null,s=g?E.getSegmentRequestForTime(u,c,w):_?E.repeatSegmentRequest(u,c):E.getNextSegmentRequest(u,c)),s))?(_=g=!1,isNaN(c.startTime+c.duration)||(w=c.startTime+c.duration),c.delayLoadingTime=(new Date).getTime()+p.getTimeToLoadDelay(),p.setTimeToLoadDelay(0),o=c.url,c.range&&(o=o.concat("_",c.range)),te.contains(o)?(n.warn("Fragment request url ".concat(c.url," for stream id ").concat(L.id," and media type ").concat(P," is on the ignore list and will be skipped")),ue()):(n.debug("Next fragment request url for stream id ".concat(L.id," and media type ").concat(P," is ").concat(c.url)),U.executeRequest(c))):(o=h,c=m.getCurrentRepresentation(),!J.get().streaming.gaps.enableSeekFix||!g&&0!==V.getTime()||(i&&c.segmentInfoType!==a.A.SEGMENT_TIMELINE||(t=E.getValidTimeAheadOfTargetTime(w,u,c,J.get().streaming.gaps.threshold)),isNaN(t))||t===w?E.isLastSegmentRequested(c,w)?(c=E.getCurrentIndex(),n.debug("Segment requesting for stream ".concat(L.id," has finished")),C.trigger(l.A.STREAM_REQUESTING_COMPLETED,{segmentIndex:c},{streamId:L.id,mediaType:P}),f.segmentRequestingCompleted(c),p.clearScheduleTimer()):o&&ue():V.isSeeking()||0===V.getTime()?(n.warn("Adjusting playback time ".concat(t," because of gap in the manifest. Seeking by ").concat(t-w)),V.seek(t,!1,!1)):(n.warn("Adjusting buffering time ".concat(t," because of gap in the manifest. Adjusting time by ").concat(t-w)),Pe(t),o&&ue())))}function ue(){p.startScheduleTimer(V.getLowLatencyModeEnabled()?J.get().streaming.scheduling.lowLatencyTimeout:J.get().streaming.scheduling.defaultTimeout)}function ce(e){e.error||f.getIsBufferingCompleted()||f.updateBufferTimestampOffset(e.currentRepresentation)}function he(e){X.addBufferState(P,e.state,p.getBufferTarget()),e.state!==o.A.BUFFER_EMPTY||V.isSeeking()||(n.info("Buffer is empty! Stalling!"),X.pushPlayListTraceMetrics(new Date,$.REBUFFERING_REASON))}function de(e){U.syncExecutedRequestsWithBufferedRange(f.getBuffer().getAllBufferRanges(),L.duration),e.quotaExceeded&&e.from>V.getTime()&&Pe(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&p.startScheduleTimer()}function fe(e){var t;e&&e.lastRequestAppended&&e.lastRequestAppended.url&&(t=e.lastRequestAppended.url,e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),n.warn("Blacklisting segment with url ".concat(t)),te.add(t))}function pe(e){var t;n.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(e.streamId)),e.segmentType===R.G.INIT_SEGMENT_TYPE&&(t=e.quality,p.setLastInitializedQuality(t),n.info("["+P+"] lastInitializedRepresentationInfo changed to "+e.quality)),S?me(S):p.startScheduleTimer(0)}function me(e){var t=U.getRequests({state:y.FRAGMENT_MODEL_LOADING});if(t&&0<t.length)return n.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),S=e;f.updateBufferTimestampOffset(e).then((function(){p.setCheckPlaybackQuality(!1),u.segmentAlignment||u.subSegmentAlignment?p.startScheduleTimer():Ce(),S=null,A=!1})).catch((function(){S=null,A=!1}))}function ge(e){n.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),V.isSeeking()||p.getSwitchTrack()||A||(n.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?p.setInitSegmentRequired(!0):Pe(e.request.startTime+e.request.duration/2),p.startScheduleTimer(0))}function _e(e){n.info("OnFragmentLoadingCompleted for stream id "+L.id+" and media type "+P+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),re()&&p.startScheduleTimer(0),e.error&&e.request.serviceLocation&&(n.info("Fragment loading completed with an error"),e)&&e.request&&e.request.type&&(e.request.type===R.G.INIT_SEGMENT_TYPE?se({representationId:e.request.representationId,sender:{}},!1):e.request.type===R.G.MEDIA_SEGMENT_TYPE&&(Pe(e.request.startTime+e.request.duration/2),le({},!1)))}function ye(){Pe(V.getTime()),p.startScheduleTimer()}function ve(e){var t=e.currentTrackInfo;t&&(e=d.find((function(e){return e.index===t.index&&e.lang===t.lang})))&&be(e).then((function(){f.setIsBufferingCompleted(!1),Pe(V.getTime()),p.setInitSegmentRequired(!0),p.startScheduleTimer()}))}function Ae(e){Pe(e.quotaExceededTime),p.clearScheduleTimer()}function Ee(){return f?f.getBuffer():null}function be(e){e===u||e&&u&&e.type!==u.type||(u=e),e=M.getRealAdaptation(L,u);var t,n,a,o,s=M.getVoRepresentations(u);return m?(o=m.getData(),t=G.getMaxAllowedIndexFor(P,L.id),n=G.getMinAllowedIndexFor(P,L.id),o=(a=null)!==o&&o.id===e.id||P===r.A.TEXT?G.getQualityFor(P,L.id):(a=G.getThroughputHistory().getAverageThroughput(P,i)||G.getInitialBitrateFor(P,L.id),G.getQualityForBitrate(u,a,L.id)),m.updateData(e,s,P,u.isFragmented,o=t<(o=void 0!==n&&o<n?n:o)?t:o)):Promise.resolve()}function we(e){return e=void 0!==e?((0,Y.zQ)(e),m?m.getRepresentationForQuality(e):null):m?m.getCurrentRepresentation():null,M.convertRepresentationToRepresentationInfo(e)}function Te(){return!!f&&f.getIsBufferingCompleted()}function Se(e){var t,n;J.get().streaming.enableManifestTimescaleMismatchFix&&(t=(e=e.chunk).bytes,e=we(e.quality),n=m&&e?m.getRepresentationForQuality(e.quality):null,e)&&n&&(n.timescale=Z.getMediaTimescaleFromMoov(t))}function Re(e){var t,n,i,r=e.chunk,o=r.bytes,s=r.quality,u=we(s),c=m&&u?m.getRepresentationForQuality(u.quality):null;u&&c&&(J.get().streaming.parseInbandPrft&&e.request.type===R.G.MEDIA_SEGMENT_TYPE&&(e=t=t||Z.parse(o),n=c.timescale,e=e.getBoxes("prft"),i=[],e.forEach((function(e){i.push(function(e,t){var n="unknown";switch(e.flags){case 0:n=a.A.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:n=a.A.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:n=a.A.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var i=1e3*e.ntp_timestamp_sec+e.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:n,ntpTimestamp:ne(I).getInstance().ntpToUTC(i),mediaTime:e.media_time/t}}(e,n))})),e=i)&&e.length&&C.trigger(h.A.INBAND_PRFT,{data:e},{streamId:L.id,mediaType:P}),e=M.getEventsFor(u.mediaInfo,null,L),u=M.getEventsFor(u,c,L),e&&0<e.length||u&&0<u.length)&&(c=U.getRequests({state:y.FRAGMENT_MODEL_EXECUTED,quality:s,index:r.index})[0],s=function(e,t,n,i){try{for(var r={},a=[],o=n.concat(i),s=0,l=o.length;s<l;s++)r[o[s].schemeIdUri+"/"+o[s].value]=o[s];var u=e.getBoxes("emsg");if(u&&0!==u.length)for(var c=e.getBox("sidx"),h=!c||isNaN(c.earliest_presentation_time)||isNaN(c.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:c.earliest_presentation_time/c.timescale,d=Math.max(h,0),f=m.getCurrentRepresentation(),p=0,g=u.length;p<g;p++){var _=M.getEvent(u[p],r,d,f);_&&a.push(_)}return a}catch(e){return[]}}(t=t||Z.parse(o),c,e,u),C.trigger(l.A.INBAND_EVENTS,{events:s},{streamId:L.id}))}function Ie(){var e=V.getTime();J.get().streaming.buffer.flushBufferAtTrackSwitch&&V.seek(e+.001,!1,!0),Pe(e),f.setSeekTarget(e),p.startScheduleTimer()}function Ce(){var e=V.getTime(),t=f.getContinuousBufferTimeForTargetTime(e);Pe(isNaN(t)?e:t),p.startScheduleTimer()}function Le(e){e&&!isNaN(e.time)&&(Pe(e.time),f.setSeekTarget(e.time))}function Pe(e){w=e,g=!0}return t={initialize:function(n,o,s){var u;b=(0,ee.A)(I).create({events:l.A,eventBus:C,streamInfo:L,timelineConverter:x,dashConstants:a.A,segmentBaseController:e.segmentBaseController,type:P}),E=(0,z.A)(I).create({streamInfo:L,type:P,timelineConverter:x,dashMetrics:X,mediaPlayerModel:F,baseURLController:e.baseURLController,errHandler:D,segmentsController:b,settings:J,boxParser:Z,events:l.A,eventBus:C,errors:T,debug:(0,c.A)(I).getInstance(),requestModifier:(0,W.A)(I).getInstance(),dashConstants:a.A,constants:r.A,urlUtils:(0,K.A)(I).getInstance()}),i=L.manifestInfo.isDynamic,E.initialize(i),G.registerStreamType(P,t),m=H(I).create({streamInfo:L,type:P,abrController:G,dashMetrics:X,playbackController:V,timelineConverter:x,dashConstants:a.A,events:l.A,eventBus:C,errors:T,isDynamic:i,adapter:M,segmentsController:b}),(f=(u=P)?u!==r.A.TEXT||s?O(I).create({streamInfo:L,type:u,mediaPlayerModel:F,manifestModel:N,fragmentModel:U,errHandler:D,mediaController:q,representationController:m,adapter:M,textController:Q,abrController:G,playbackController:V,settings:J}):B(I).create({streamInfo:L,type:u,mimeType:k,fragmentModel:U,textController:Q,errHandler:D,settings:J}):(D.error(new v.A(T.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,T.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null))&&f.initialize(n),(p=j(I).create({streamInfo:L,type:P,mimeType:k,adapter:M,dashMetrics:X,mediaPlayerModel:F,fragmentModel:U,abrController:G,playbackController:V,textController:Q,mediaController:q,bufferController:f,representationController:m,settings:J})).initialize(o),w=0,_=g=!1},getStreamId:ie,getType:function(){return P},isUpdating:function(){return!!m&&m.isUpdating()},getBufferController:function(){return f},dischargePreBuffer:function(){f.dischargePreBuffer()},getFragmentModel:function(){return U},getScheduleController:function(){return p},getRepresentationController:function(){return m},getRepresentationInfo:we,getBufferLevel:function(){return f?f.getBufferLevel():0},isBufferingCompleted:Te,createBufferSinks:function(e){var t=Ee();return t?Promise.resolve(t):f?f.createBufferSink(u,e):Promise.resolve(null)},updateStreamInfo:function(e){return L=e,Te()?Promise.resolve():f.updateAppendWindow()},getStreamInfo:function(){return L},selectMediaInfo:be,clearMediaInfoArray:function(){d=[]},addMediaInfo:function(e){-1===d.indexOf(e)&&d.push(e)},prepareTrackSwitch:function(){return new Promise((function(e){n.debug("Preparing track switch for type ".concat(P));var t=P===r.A.TEXT||J.get().streaming.trackSwitchMode[P]===r.A.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&V.getTimeToStreamEnd(L)>J.get().streaming.buffer.stallThreshold;f.getIsBufferingCompleted()&&!t?(f.prepareForNonReplacementTrackSwitch(u.codec).then((function(){C.trigger(l.A.BUFFERING_COMPLETED,{},{streamId:L.id,mediaType:P})})).catch((function(){C.trigger(l.A.BUFFERING_COMPLETED,{},{streamId:L.id,mediaType:P})})),e()):(p.clearScheduleTimer(),p.setSwitchTrack(!0),t?(C.trigger(l.A.BUFFER_REPLACEMENT_STARTED,{mediaType:P,streamId:L.id},{mediaType:P,streamId:L.id}),U.abortRequests(),f.prepareForReplacementTrackSwitch(u.codec).then((function(){var e=we();return f.updateBufferTimestampOffset(e)})).then((function(){Ie(),e()})).catch((function(){Ie(),e()}))):f.prepareForNonReplacementTrackSwitch(u.codec).then((function(){Ce(),e()})).catch((function(){Ce(),e()})))}))},prepareQualityChange:function(e){S&&n.warn("Canceling queued representation switch to ".concat(S.quality," for ").concat(P)),n.debug("Preparing quality switch for type ".concat(P));var t,i,r,a,s,u=e.newQuality;A=!0,p.clearScheduleTimer(),m.prepareQualityChange(u),u=we(u),e.reason&&e.reason.forceReplace?(s=u,U.abortRequests(),C.trigger(l.A.BUFFER_REPLACEMENT_STARTED,{mediaType:P,streamId:L.id},{mediaType:P,streamId:L.id}),p.setCheckPlaybackQuality(!1),f.prepareForForceReplacementQualitySwitch(s).then((function(){Ie(),S=null,A=!1})).catch((function(){Ie(),S=null,A=!1}))):e&&e.reason&&e.reason.forceAbandon?f.updateBufferTimestampOffset(u).then((function(){U.abortRequests(),_=!0,p.setCheckPlaybackQuality(!1),p.startScheduleTimer(),A=!1,S=null})).catch((function(){S=null,A=!1})):J.get().streaming.buffer.fastSwitchEnabled?(s=u,r=V.getTime(),a=1.5*(isNaN(s.fragmentDuration)?1:s.fragmentDuration),(e=U.getRequests({state:y.FRAGMENT_MODEL_EXECUTED,time:r+a,threshold:0})[0])&&!re()&&(t=f.getBufferLevel(),i=G.getAbandonmentStateFor(L.id,P),e.quality<s.quality)&&a<=t&&i!==o.A.ABANDON_LOAD?f.updateBufferTimestampOffset(s).then((function(){U.abortRequests(),Pe(r+a),p.setCheckPlaybackQuality(!1),p.startScheduleTimer(),A=!1})).catch((function(){A=!1})):me(s)):me(u),X.pushPlayListTraceMetrics(new Date,$.REPRESENTATION_SWITCH_STOP_REASON),X.createPlaylistTraceMetrics(u.id,1e3*V.getTime(),V.getPlaybackRate())},getMediaInfo:function(){return u},getMediaSource:function(){return f.getMediaSource()},setMediaSource:function(e){return f.setMediaSource(e,u)},getBuffer:Ee,setExplicitBufferingTime:Pe,finalisePlayList:function(e,t){X.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=we();return e=m&&e?m.getRepresentationForQuality(e.quality):null,E.getNextSegmentRequestIdempotent(u,e)},prepareInnerPeriodPlaybackSeeking:function(e){return new Promise((function(t){f.hasBufferAtTime(e.seekTime)?(f.pruneBuffer(),oe(f.getContinuousBufferTimeForTargetTime(e.seekTime))&&f.setIsBufferingCompleted(!0),t()):(p.clearScheduleTimer(),U.abortRequests(),f.prepareForPlaybackSeek().then((function(){var t=f.getAllRangesWithSafetyFactor(e.seekTime);return f.clearBuffers(t)})).then((function(){var n,i=f.getContinuousBufferTimeForTargetTime(e.seekTime);oe(i)?(f.setIsBufferingCompleted(!0),t()):(Pe(i=isNaN(i)?e.seekTime:i),f.setSeekTarget(i),(i=[]).push(f.updateAppendWindow()),n=we(),i.push(f.updateBufferTimestampOffset(n)),Promise.all(i).then((function(){p.setInitSegmentRequired(!0),p.setCheckPlaybackQuality(!1),p.startScheduleTimer(),t()})))})).catch((function(e){n.error(e)})))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((function(e,t){try{p.clearScheduleTimer(),U.abortRequests(),f.prepareForPlaybackSeek().then((function(){return f.pruneAllSafely()})).then((function(){e()}))}catch(e){t(e)}}))},reset:function(e,n){E&&E.reset(),f&&(f.reset(e,n),f=null),p&&(p.reset(),p=null),m&&(m.reset(),m=null),b=b&&null,G&&G.unRegisterStreamType(ie(),P),C.off(l.A.DATA_UPDATE_COMPLETED,ce,t),C.off(l.A.INIT_FRAGMENT_NEEDED,se,t),C.off(l.A.MEDIA_FRAGMENT_NEEDED,le,t),C.off(l.A.INIT_FRAGMENT_LOADED,Se,t),C.off(l.A.MEDIA_FRAGMENT_LOADED,Re,t),C.off(l.A.BUFFER_LEVEL_STATE_CHANGED,he,t),C.off(l.A.BUFFER_CLEARED,de,t),C.off(l.A.SEEK_TARGET,Le,t),C.off(l.A.FRAGMENT_LOADING_ABANDONED,ge,t),C.off(l.A.FRAGMENT_LOADING_COMPLETED,_e,t),C.off(l.A.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ye,t),C.off(l.A.SET_NON_FRAGMENTED_TEXT,ve,t),C.off(l.A.QUOTA_EXCEEDED,Ae,t),C.off(l.A.SOURCE_BUFFER_ERROR,fe,t),C.off(l.A.BYTES_APPENDED_END_FRAGMENT,pe,t),ae(),L=P=null}},n=(0,c.A)(I).getInstance().getLogger(t),ae(),C.on(l.A.DATA_UPDATE_COMPLETED,ce,t,{priority:s.A.EVENT_PRIORITY_HIGH}),C.on(l.A.INIT_FRAGMENT_NEEDED,se,t),C.on(l.A.MEDIA_FRAGMENT_NEEDED,le,t),C.on(l.A.INIT_FRAGMENT_LOADED,Se,t),C.on(l.A.MEDIA_FRAGMENT_LOADED,Re,t),C.on(l.A.BUFFER_LEVEL_STATE_CHANGED,he,t),C.on(l.A.BUFFER_CLEARED,de,t),C.on(l.A.SEEK_TARGET,Le,t),C.on(l.A.FRAGMENT_LOADING_ABANDONED,ge,t),C.on(l.A.FRAGMENT_LOADING_COMPLETED,_e,t),C.on(l.A.QUOTA_EXCEEDED,Ae,t),C.on(l.A.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ye,t),C.on(l.A.SET_NON_FRAGMENTED_TEXT,ve,t),C.on(l.A.SOURCE_BUFFER_ERROR,fe,t),C.on(l.A.BYTES_APPENDED_END_FRAGMENT,pe,t),t}ie.__dashjs_factory_name="StreamProcessor";var re=u.A.getClassFactory(ie);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=ae(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==ae(e)?e:String(e)}(i.key),i)}}t=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},be&&oe(t.prototype,be),An&&oe(t,An),Object.defineProperty(t,"prototype",{writable:!1});var se=t,le=n(3047);function ue(e,t){var n;if(e)return"string"==typeof e?ce(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function he(e){var t,n=this.context,i=(e=e||{}).requestModifier,a=e.lowLatencyThroughputModel,o=e.boxParser,s=(0,S.A)(n).getInstance();function l(e){var n,l=new Date,h=e.request,d=new Headers;if(h.range&&d.append("Range","bytes="+h.range),e.headers)for(var f in e.headers){var p=e.headers[f];p&&d.append(f,p)}h.requestStartDate||(h.requestStartDate=l),i&&i.modifyRequestHeader&&i.modifyRequestHeader({setRequestHeader:function(e,t){d.append(e,t)}},{url:e.url}),"function"==typeof window.AbortController&&(n=new AbortController,(e.abortController=n).signal.onabort=e.onabort);var m={method:e.method,headers:d,credentials:e.withCredentials?"include":void 0,signal:n?n.signal:void 0},g=s.get().streaming.abr.fetchThroughputCalculationMode,_=Date.now(),y=0;new Promise((function(e){if(g===r.A.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&a&&(y=a.getThroughputCapacityDelayMS(h,1e3*t.getCurrentBufferLevel(h.mediaType))))return setTimeout(e,y);e()})).then((function(){var n=Date.now();fetch(e.url,m).then((function(i){e.response||(e.response={}),e.response.status=i.status,e.response.statusText=i.statusText,e.response.responseURL=i.url,i.ok||e.onerror();var s,l="",d=function(e){var t,n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,t=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw t}}};if(Array.isArray(e)||(o=ue(e)))return o&&(e=o),r=0,{s:a=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(i.headers.keys());try{for(d.s();!(s=d.n()).done;){var f=s.value;l+=f+": "+i.headers.get(f)+"\r\n"}}catch(i){d.e(i)}finally{d.f()}if(e.response.responseHeaders=l,!i.body)return i.arrayBuffer().then((function(t){t={loaded:(e.response.response=t).byteLength,total:t.byteLength,stream:!1},e.progress(t),e.onload(),e.onend()}));var p,m,v,A,E,b,w=parseInt(i.headers.get("Content-Length"),10),T=0,S=!1,R=new Uint8Array,I=0,C=(g===r.A.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&a?(p=n,m=0,v=(A=function(e){if(Array.isArray(e))return e}(A=i.body.tee())||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r,a,o=[],s=!0,l=!1;try{for(r=(t=t.call(e)).next;!(s=(n=r.call(t)).done)&&(o.push(n.value),2!==o.length);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return o}}(A)||ue(A,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],A=A[1],E=v.getReader(),b=[],E.read().then((function i(r){var o,s=r.value;if(r=r.done,m=Date.now(),s&&s.length&&(o=m-p,s=s.length,b.push({chunkDownloadTimeRelativeMS:m-n,chunkDownloadDurationMS:o,chunkBytes:s,kbps:Math.round(8*s/(o/1e3)),bufferLevel:t.getCurrentBufferLevel(h.mediaType)})),!r)return p=Date.now(),E.read().then(i);s=m-n,o=b.reduce((function(e,t){return e+t.chunkBytes}),0),a.addMeasurement(h,s,b,_,y,l),e.progress({loaded:o,total:o,lengthComputable:!0,time:a.getEstimatedDownloadDurationMS(h),stream:!0})})),e.reader=A.getReader()):e.reader=i.body.getReader(),[]),L=[],P=[],D=!0;u(e,(function t(n){var i,a,s,l=n.value;n.done?(R&&(g!==r.A.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&(a=n=null,g===r.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(n=function(e,t){try{var n=e.filter((function(t,n){return n<e.length-1})),i=t.filter((function(e,n){return n<t.length-1})),r=[];if(1<n.length){for(var a,o,s=0,l=0,u=0;u<n.length;u++)n[u]&&i[u]&&(1<(a=i[u].ts-n[u].ts)?(r.push(8*i[u].bytes/a),l=0):(0===l&&(l=n[u].ts,s=0),1<(o=i[u].ts-l)?(s+=i[u].bytes,r.push(8*s/o),l=0):s+=i[u].bytes));if(0<r.length)return r.reduce((function(e,t){return e+t}),0)/r.length}return null}catch(e){return null}}(L,P))&&(a=8*T/n):g===r.A.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(a=c(C,T)),e.progress({loaded:T,total:isNaN(w)?T:w,lengthComputable:!0,time:a,stream:!0})),e.response.response=R.buffer),e.onload(),e.onend()):(l&&0<l.length&&(n=l,R=0===(a=R).length?n:((s=new Uint8Array(a.length+n.length)).set(a),s.set(n,a.length),s),T+=l.length,C.push({ts:Date.now(),bytes:l.length}),g===r.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&D&&o.findLastTopIsoBoxCompleted(["moof"],R,I).found&&(D=!1,L.push({ts:performance.now(),bytes:l.length})),(n=o.findLastTopIsoBoxCompleted(["moov","mdat"],R,I)).found?(s=n.lastCompletedOffset+n.size,g!==r.A.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||D||(D=!0,P.push({ts:performance.now(),bytes:R.length})),R=s===R.length?(i=R,new Uint8Array):(i=new Uint8Array(R.subarray(0,s)),R.subarray(s)),e.progress({data:i.buffer,lengthComputable:!1,noTrace:!0}),I=0):(I=n.lastCompletedOffset,S||(e.progress({lengthComputable:!1,noTrace:!0}),S=!0))),u(e,t))}))})).catch((function(t){e.onerror&&e.onerror(t)}))}))}function u(e,t){e.reader.read().then(t).catch((function(t){e.onerror&&200===e.response.status&&e.onerror(t)}))}function c(e,t){try{var n,i;return 1<(e=e.filter((function(n){return n.bytes>t/4/e.length}))).length?(n=0,i=(e[e.length-1].ts-e[0].ts)/e.length,e.forEach((function(t,r){(r=e[r+1])&&(r=r.ts-t.ts,n+=r<i?r:0)})),n):null}catch(e){return null}}return{load:function(e){i&&i.modifyRequest?(0,W.W)(e,i).then((function(){return l(e)})):l(e)},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:c,setup:function(e){t=e.dashMetrics}}}he.__dashjs_factory_name="FetchLoader";var de=u.A.getClassFactory(he),fe=n(7474);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=pe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=pe(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==pe(e)?e:String(e)}(i.key),i)}})((be=ge).prototype,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==a.A.BASE_URL&&this.segmentInfoType!==a.A.SEGMENT_BASE&&!this.indexRange}}]),Object.defineProperty(be,"prototype",{writable:!1});var me=ge;function ge(){if(!(this instanceof ge))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=_e(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==_e(e)?e:String(e)}(i.key),i)}}An=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.period=null,this.index=-1,this.type=null},Pa&&ye(An.prototype,Pa),Go&&ye(An,Go),Object.defineProperty(An,"prototype",{writable:!1});var ve=An;function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Ae(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Ae(e)?e:String(e)}(i.key),i)}}t=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null},Fn&&Ee(t.prototype,Fn),yi&&Ee(t,yi),Object.defineProperty(t,"prototype",{writable:!1});var be=t,we=(be.DEFAULT_ID="defaultId",be);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Te(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Te(e)?e:String(e)}(i.key),i)}}Pa=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},pa&&Se(Pa.prototype,pa),ze&&Se(Pa,ze),Object.defineProperty(Pa,"prototype",{writable:!1});var Re=Pa,Ie=n(9824);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Ce(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Ce(e)?e:String(e)}(i.key),i)}}Go=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Fa&&Le(Go.prototype,Fa),Ha&&Le(Go,Ha),Object.defineProperty(Go,"prototype",{writable:!1});var Pe=Go;function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=De(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=De(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==De(e)?e:String(e)}(i.key),i)}}An=function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=n||t||"",this.dvbPriority=i||1,this.dvbWeight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}},un&&ke(An.prototype,un),hn&&ke(An,hn),Object.defineProperty(An,"prototype",{writable:!1});var xe=((Fn=An).DEFAULT_DVB_PRIORITY=1,Fn.DEFAULT_DVB_WEIGHT=1,Fn);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Me(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Me(e)?e:String(e)}(i.key),i)}}yi=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},Gn&&Oe(yi.prototype,Gn),Hn&&Oe(yi,Hn),Object.defineProperty(yi,"prototype",{writable:!1});var Ne=yi;function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Fe(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Fe(e)?e:String(e)}(i.key),i)}}t=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},Zi&&Be(t.prototype,Zi),nr&&Be(t,nr),Object.defineProperty(t,"prototype",{writable:!1});var Ue=t;function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=je(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=je(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==je(e)?e:String(e)}(i.key),i)}}be=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0},Vr&&Ge(be.prototype,Vr),ha&&Ge(be,ha),Object.defineProperty(be,"prototype",{writable:!1});var Ve=be;function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=He(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=He(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==He(e)?e:String(e)}(i.key),i)}})((pa=Ke).prototype,[{key:"init",value:function(e){return e&&(this.schemeIdUri=e.schemeIdUri||null,this.value=e.value||null,this.id=e.id||null,e[a.A.DVB_URL]&&(this.dvbUrl=e[a.A.DVB_URL]),e[a.A.DVB_MIMETYPE]&&(this.dvbMimeType=e[a.A.DVB_MIMETYPE]),e[a.A.DVB_FONTFAMILY])&&(this.dvbFontFamily=e[a.A.DVB_FONTFAMILY]),this}}]),Object.defineProperty(pa,"prototype",{writable:!1});var Ye=Ke,ze=n(5633),We=n.n(ze);function Ke(){if(!(this instanceof Ke))throw new TypeError("Cannot call a class as a function");this.schemeIdUri=null,this.value=null,this.id=null}function qe(){return{areEqual:function(e,t){return We()(e,t)}}}qe.__dashjs_factory_name="ObjectUtils";var Qe=u.A.getSingletonFactory(qe),Xe=n(9025);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Je(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Je(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Je(e)?e:String(e)}(i.key),i)}}Pa=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=n||null,this.queryParams={}},ya&&Ze(Pa.prototype,ya),ba&&Ze(Pa,ba),Object.defineProperty(Pa,"prototype",{writable:!1});var $e=Pa;function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=et(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==et(e)?e:String(e)}(i.key),i)}}Fa=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||"",this.serviceLocation=n||null,this.ttl=i||NaN,this.queryParams={}},xa&&tt(Fa.prototype,xa),Oa&&tt(Fa,Oa),Object.defineProperty(Fa,"prototype",{writable:!1});var nt=Fa;function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){var i=e,r=t,a=(t=n[t],function(e){if("object"!=it(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=it(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(r));(r="symbol"==it(a)?a:String(a))in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t){var n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return r=!(i=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw n}}};if(Array.isArray(e)||(o=st(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(e,t){var n;if(e)return"string"==typeof e?lt(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ut(){var e,t,n,i,o=this.context,s=(0,K.A)(o).getInstance(),l=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function u(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var n=_(e.Representation_asArray[0]);if(n&&0<n.length&&0<=Xe._.indexOf(n[0].schemeIdUri))return t===r.A.IMAGE}if(e.ContentComponent_asArray&&0<e.ContentComponent_asArray.length){if(1<e.ContentComponent_asArray.length)return t===r.A.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var i=t===r.A.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length&&(n=e.Representation_asArray[0].codecs,i.test(n)))return!0;if(e.hasOwnProperty(a.A.MIME_TYPE))return i.test(e.mimeType);if(e.Representation_asArray)for(var o,s=0;s<e.Representation_asArray.length;s++)if((o=e.Representation_asArray[s]).hasOwnProperty(a.A.MIME_TYPE))return i.test(o.mimeType);return!1}function h(e){if(!e)throw new Error("adaptation is not defined");return!!(e.hasOwnProperty(a.A.SEGMENT_TEMPLATE)||e.hasOwnProperty(a.A.SEGMENT_TIMELINE)||e.hasOwnProperty(a.A.SEGMENT_LIST)||e.hasOwnProperty(a.A.SEGMENT_BASE))||!!(e.Representation_asArray&&0<e.Representation_asArray.length&&((e=e.Representation_asArray[0]).hasOwnProperty(a.A.SEGMENT_TEMPLATE)||e.hasOwnProperty(a.A.SEGMENT_TIMELINE)||e.hasOwnProperty(a.A.SEGMENT_LIST)||e.hasOwnProperty(a.A.SEGMENT_BASE)))}function d(e){return u(e,r.A.TEXT)}function f(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function p(e,t){return e&&e.Period_asArray&&l(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function m(e){return e&&e.Period_asArray?e.Period_asArray:[]}function g(e){var t=!1;return e&&e.hasOwnProperty("type")?e.type===a.A.DYNAMIC:t}function _(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function y(e,t,n){var i,o=[];if(e)for(i=0;i<e.length;i++){var s=new Ne;if(s.timescale=1,s.representation=t,!e[i].hasOwnProperty(r.A.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");s.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(a.A.TIMESCALE)&&(s.timescale=e[i].timescale),e[i].hasOwnProperty(a.A.VALUE)&&(s.value=e[i].value),o.push(s),s.period=n}return o}function A(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],i=!1;return n.some((function(n){var r,o;if(n)return r=new xe,o=n.__text||n,s.isRelative(o)&&(i=!0,e.baseUri)&&(o=s.resolve(o,e.baseUri)),r.url=o,n.hasOwnProperty(a.A.SERVICE_LOCATION)&&n.serviceLocation.length?r.serviceLocation=n.serviceLocation:r.serviceLocation=o,n.hasOwnProperty(a.A.DVB_PRIORITY)&&(r.dvbPriority=n[a.A.DVB_PRIORITY]),n.hasOwnProperty(a.A.DVB_WEIGHT)&&(r.dvbWeight=n[a.A.DVB_WEIGHT]),n.hasOwnProperty(a.A.AVAILABILITY_TIME_OFFSET)&&(r.availabilityTimeOffset=n[a.A.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(a.A.AVAILABILITY_TIME_COMPLETE)&&(r.availabilityTimeComplete="false"!==n[a.A.AVAILABILITY_TIME_COMPLETE]),t.push(r),i})),t}function E(e){var t=new Ve;return t.serverUrl=e.__text,e.hasOwnProperty(a.A.DEFAULT_SERVICE_LOCATION)&&(t.defaultServiceLocation=e[a.A.DEFAULT_SERVICE_LOCATION],t.defaultServiceLocationArray=t.defaultServiceLocation.split(" ")),e.hasOwnProperty(a.A.QUERY_BEFORE_START)&&(t.queryBeforeStart="true"===e[a.A.QUERY_BEFORE_START].toLowerCase()),e.hasOwnProperty(a.A.CLIENT_REQUIREMENT)&&(t.clientRequirement="false"!==e[a.A.CLIENT_REQUIREMENT].toLowerCase()),t}return e={getIsTypeOf:u,getIsText:d,getIsFragmented:h,getProducerReferenceTimesForAdaptation:function(e){var t=e&&e.hasOwnProperty(a.A.PRODUCERREFERENCETIME_ASARRAY)?e[a.A.PRODUCERREFERENCETIME_ASARRAY]:[],n=((e&&e.hasOwnProperty(a.A.REPRESENTATION_ASARRAY)?e[a.A.REPRESENTATION_ASARRAY]:[]).forEach((function(e){var n;e.hasOwnProperty(a.A.PRODUCERREFERENCETIME_ASARRAY)&&t.push.apply(t,function(e){if(Array.isArray(e))return lt(e)}(n=e[a.A.PRODUCERREFERENCETIME_ASARRAY])||function(){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}()||st(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),[]);return t.forEach((function(e){var t=new Ue;e.hasOwnProperty(a.A.ID)&&(t[a.A.ID]=e[a.A.ID],e.hasOwnProperty(a.A.WALL_CLOCK_TIME))&&(t[a.A.WALL_CLOCK_TIME]=e[a.A.WALL_CLOCK_TIME],e.hasOwnProperty(a.A.PRESENTATION_TIME))&&(t[a.A.PRESENTATION_TIME]=e[a.A.PRESENTATION_TIME],e.hasOwnProperty(a.A.INBAND)&&(t[a.A.INBAND]="false"!==e[a.A.INBAND]),e.hasOwnProperty(a.A.TYPE)&&(t[a.A.TYPE]=e[a.A.TYPE]),n.push(t))})),n},getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(a.A.LANG)?e.lang:t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(a.A.VIEWPOINT_ASARRAY)&&e[a.A.VIEWPOINT_ASARRAY].length?e[a.A.VIEWPOINT_ASARRAY].map((function(e){return(new Ye).init(e)})):[]},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(a.A.ROLE_ASARRAY)&&e[a.A.ROLE_ASARRAY].length?e[a.A.ROLE_ASARRAY].map((function(e){return(new Ye).init(e)})):[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(a.A.ACCESSIBILITY_ASARRAY)&&e[a.A.ACCESSIBILITY_ASARRAY].length?e[a.A.ACCESSIBILITY_ASARRAY].map((function(e){return(new Ye).init(e)})):[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(a.A.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[a.A.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[a.A.AUDIOCHANNELCONFIGURATION_ASARRAY].map((function(e){return(new Ye).init(e)})):[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(a.A.AUDIOCHANNELCONFIGURATION_ASARRAY)&&e[a.A.AUDIOCHANNELCONFIGURATION_ASARRAY].length?e[a.A.AUDIOCHANNELCONFIGURATION_ASARRAY].map((function(e){return(new Ye).init(e)})):[]},getAdaptationForIndex:function(e,t,n){return 0<(t=p(t,n)).length&&l(e)?t[e]:null},getIndexForAdaptation:function(e,t,n){if(e)for(var i=p(t,n),r=0;r<i.length;r++)if(Qe(o).getInstance().areEqual(i[r],e))return r;return-1},getAdaptationForId:function(e,t,n){for(var i=p(t,n),r=0,o=i.length;r<o;r++)if(i[r].hasOwnProperty(a.A.ID)&&i[r].id===e)return i[r];return null},getAdaptationsForType:function(e,t,n){for(var i=p(e,t),r=[],a=0,o=i.length;a<o;a++)u(i[a],n)&&r.push(f(i[a]));return r},getRealPeriods:m,getRealPeriodForIndex:function(e,t){return 0<(t=m(t)).length&&l(e)?t[e]:null},getCodec:function(e,t,n){var i=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&(t=l(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(i=t.mimeType+';codecs="'+t.codecs+'"',n)&&void 0!==t.width&&(i+=';width="'+t.width+'";height="'+t.height+'"'),i&&i.replace(/\sprofiles=[^;]*/g,"")},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(a.A.CENC_DEFAULT_KID)?e[a.A.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(a.A.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:g,getId:function(e){return e&&e[a.A.ID]||null},hasProfile:function(e,t){var n=!1;return e&&e.profiles&&0<e.profiles.length?-1!==e.profiles.indexOf(t):n},getDuration:function(e){return e&&e.hasOwnProperty(a.A.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e&&e.hasOwnProperty(a.A.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(a.A.PUBLISH_TIME)?new Date(e[a.A.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return((e=f(e))&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map((function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}}))},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&l(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,i,r=[],o=function(e){if(e&&e.period&&l(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&l(e.index))return f(t.AdaptationSet_asArray[e.index])}}(e);if(o&&o.Representation_asArray){e&&e.period&&l(e.period.index)&&(i=A(e.period.mpd.manifest))&&(n=i[0]);for(var s=0,u=o.Representation_asArray.length;s<u;++s){var c,p=o.Representation_asArray[s],m=new me;m.index=s,m.adaptation=e,p.hasOwnProperty(a.A.ID)&&(m.id=p.id),p.hasOwnProperty(a.A.CODECS)&&(m.codecs=p.codecs),p.hasOwnProperty(a.A.MIME_TYPE)&&(m.mimeType=p[a.A.MIME_TYPE]),p.hasOwnProperty(a.A.CODEC_PRIVATE_DATA)&&(m.codecPrivateData=p.codecPrivateData),p.hasOwnProperty(a.A.BANDWITH)&&(m.bandwidth=p.bandwidth),p.hasOwnProperty(a.A.WIDTH)&&(m.width=p.width),p.hasOwnProperty(a.A.HEIGHT)&&(m.height=p.height),p.hasOwnProperty(a.A.SCAN_TYPE)&&(m.scanType=p.scanType),p.hasOwnProperty(a.A.MAX_PLAYOUT_RATE)&&(m.maxPlayoutRate=p.maxPlayoutRate),p.hasOwnProperty(a.A.SEGMENT_BASE)?(t=p.SegmentBase,m.segmentInfoType=a.A.SEGMENT_BASE):p.hasOwnProperty(a.A.SEGMENT_LIST)?(t=p.SegmentList).hasOwnProperty(a.A.SEGMENT_TIMELINE)?m.segmentInfoType=a.A.SEGMENT_TIMELINE:m.segmentInfoType=a.A.SEGMENT_LIST:p.hasOwnProperty(a.A.SEGMENT_TEMPLATE)?((t=p.SegmentTemplate).hasOwnProperty(a.A.SEGMENT_TIMELINE)?m.segmentInfoType=a.A.SEGMENT_TIMELINE:m.segmentInfoType=a.A.SEGMENT_TEMPLATE,t.hasOwnProperty(a.A.INITIALIZATION_MINUS)&&(m.initialization=t.initialization.split("$Bandwidth$").join(p.bandwidth).split("$RepresentationID$").join(p.id))):m.segmentInfoType=a.A.BASE_URL,m.essentialProperties=_(p),t&&(t.hasOwnProperty(a.A.INITIALIZATION)?((c=t.Initialization).hasOwnProperty(a.A.SOURCE_URL)&&(m.initialization=c.sourceURL),c.hasOwnProperty(a.A.RANGE)&&(m.range=c.range)):d(o)&&h(o)&&o.mimeType&&-1===o.mimeType.indexOf("application/mp4")&&(m.range=0),t.hasOwnProperty(a.A.TIMESCALE)&&(m.timescale=t.timescale),t.hasOwnProperty(a.A.DURATION)?m.segmentDuration=t.duration/m.timescale:p.hasOwnProperty(a.A.SEGMENT_TEMPLATE)&&(t=p.SegmentTemplate).hasOwnProperty(a.A.SEGMENT_TIMELINE)&&(m.segmentDuration=(p=void 0,((c=t.SegmentTimeline)&&c.S_asArray?(p=c.S_asArray[0],c=c.S_asArray[1],p.hasOwnProperty("d")?p.d:c.t-p.t):NaN)/m.timescale)),t.hasOwnProperty(a.A.MEDIA)&&(m.media=t.media),t.hasOwnProperty(a.A.START_NUMBER)&&(m.startNumber=t.startNumber),t.hasOwnProperty(a.A.INDEX_RANGE)&&(m.indexRange=t.indexRange),t.hasOwnProperty(a.A.PRESENTATION_TIME_OFFSET)&&(m.presentationTimeOffset=t.presentationTimeOffset/m.timescale),t.hasOwnProperty(a.A.AVAILABILITY_TIME_OFFSET)?m.availabilityTimeOffset=t.availabilityTimeOffset:n&&void 0!==n.availabilityTimeOffset&&(m.availabilityTimeOffset=n.availabilityTimeOffset),t.hasOwnProperty(a.A.AVAILABILITY_TIME_COMPLETE)?m.availabilityTimeComplete="false"!==t.availabilityTimeComplete:n&&void 0!==n.availabilityTimeComplete&&(m.availabilityTimeComplete=n.availabilityTimeComplete)),m.MSETimeOffset=(p=m.presentationTimeOffset,m.adaptation.period.start-p),m.path=[e.period.index,e.index,s],r.push(m)}}return r},getAdaptationsForPeriod:function(e){var n,i,o,s=e&&l(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,c=[];if(s&&s.AdaptationSet_asArray)for(o=0;o<s.AdaptationSet_asArray.length;o++)i=s.AdaptationSet_asArray[o],n=new ve,i.hasOwnProperty(a.A.ID)&&(n.id=i.id),n.index=o,n.period=e,u(i,r.A.MUXED)?n.type=r.A.MUXED:u(i,r.A.AUDIO)?n.type=r.A.AUDIO:u(i,r.A.VIDEO)?n.type=r.A.VIDEO:d(i)?n.type=r.A.TEXT:u(i,r.A.IMAGE)?n.type=r.A.IMAGE:t.warn("Unknown Adaptation stream type"),c.push(n);return c},getRegularPeriods:function(e){for(var i=!!e&&g(e.manifest),o=[],s=null,l=null,u=null,c=null,h=0,d=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;h<d;h++)(l=e.manifest.Period_asArray[h]).hasOwnProperty(a.A.START)?(c=new we).start=l.start:null!==s&&s.hasOwnProperty(a.A.DURATION)&&null!==u?(c=new we).start=parseFloat((u.start+u.duration).toFixed(5)):0!==h||i||((c=new we).start=0),null!==u&&isNaN(u.duration)&&(null!==c?u.duration=parseFloat((c.start-u.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==c&&(c.id=function(e,t){if(e)return t=we.DEFAULT_ID+"_"+t,e.hasOwnProperty(a.A.ID)&&0<e.id.length&&"__proto__"!==e.id?e.id:t;throw new Error("Period cannot be null or undefined")}(l,h),c.index=h,c.mpd=e,l.hasOwnProperty(a.A.DURATION)&&(c.duration=l.duration),u&&(u.nextPeriodId=c.id),o.push(c),s=l,u=c),c=l=null;return 0!==o.length&&null!==u&&isNaN(u.duration)&&(u.duration=parseFloat((function(e){var t,i;if(n&&n.hasOwnProperty("error"))return i=g(e.mpd.manifest),e.mpd.manifest.mediaPresentationDuration?t=e.mpd.manifest.mediaPresentationDuration:e.duration?t=e.duration:i?t=Number.POSITIVE_INFINITY:n.error(new v.A(T.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),t;throw new Error(r.A.MISSING_CONFIG_ERROR)}(u)-u.start).toFixed(5))),o},getMpd:function(e){var t=new Re;return e&&((t.manifest=e).hasOwnProperty(a.A.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(a.A.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(a.A.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(a.A.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(a.A.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(a.A.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(a.A.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(a.A.PUBLISH_TIME))&&(t.publishTime=new Date(e.publishTime)),t},getEventsForPeriod:function(e){var t,n,o,s=(o=(o=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null)?o.Period_asArray:null)&&e&&l(e.index)?o[e.index].EventStream_asArray:null,u=[];if(s)for(t=0;t<s.length;t++){var c=new Ne;if(c.period=e,c.timescale=1,!s[t].hasOwnProperty(r.A.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(c.schemeIdUri=s[t][r.A.SCHEME_ID_URI],s[t].hasOwnProperty(a.A.TIMESCALE)&&(c.timescale=s[t][a.A.TIMESCALE]),s[t].hasOwnProperty(a.A.VALUE)&&(c.value=s[t][a.A.VALUE]),s[t].hasOwnProperty(a.A.PRESENTATION_TIME_OFFSET)&&(c.presentationTimeOffset=s[t][a.A.PRESENTATION_TIME_OFFSET]),n=0;s[t].Event_asArray&&n<s[t].Event_asArray.length;n++){var h=s[t].Event_asArray[n],d=new Pe,f=(d.presentationTime=0,d.eventStream=c,h.hasOwnProperty(a.A.PRESENTATION_TIME)&&(d.presentationTime=h.presentationTime),c.presentationTimeOffset?c.presentationTimeOffset/c.timescale:0);d.calculatedPresentationTime=d.presentationTime/c.timescale+e.start-f,h.hasOwnProperty(a.A.DURATION)&&(d.duration=h.duration/c.timescale),h.hasOwnProperty(a.A.ID)?d.id=h.id:d.id=null,h.Signal&&h.Signal.Binary?d.messageData=i.decodeArray(h.Signal.Binary.toString()):d.messageData=h.messageData||h.__cdata||h.__text,u.push(d)}}return u},getEssentialPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(a.A.ESSENTIAL_PROPERTY_ASARRAY)){var n,i=ot(e.EssentialProperty_asArray);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.hasOwnProperty(r.A.SCHEME_ID_URI)&&(t[o[r.A.SCHEME_ID_URI]]=at({},o))}}catch(e){i.e(e)}finally{i.f()}}return t},getEssentialPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(a.A.ESSENTIAL_PROPERTY_ASARRAY)&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return(new Ye).init(e)})):[]},getEssentialPropertiesForRepresentation:_,getEventStreamForAdaptationSet:function(e,t,n){var i;return y(i=e&&e.Period_asArray&&t&&t.period&&l(t.period.index)&&(e=e.Period_asArray[t.period.index])&&e.AdaptationSet_asArray&&l(t.index)&&(e=e.AdaptationSet_asArray[t.index])?e.InbandEventStream_asArray:i,null,n)},getEventStreamForRepresentation:function(e,t,n){var i;return y(i=e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&l(t.adaptation.period.index)&&(e=e.Period_asArray[t.adaptation.period.index])&&e.AdaptationSet_asArray&&l(t.adaptation.index)&&(e=e.AdaptationSet_asArray[t.adaptation.index])&&e.Representation_asArray&&l(t.index)&&(e=e.Representation_asArray[t.index])?e.InbandEventStream_asArray:i,t,n)},getUTCTimingSources:function(e){var t=g(e),n=!!e&&e.hasOwnProperty(a.A.AVAILABILITY_START_TIME),i=(e=e?e.UTCTiming_asArray:null,[]);return(t||n)&&e&&e.forEach((function(e){var t=new Ie.A;e.hasOwnProperty(r.A.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(a.A.VALUE))&&(t.value=e.value.toString(),i.push(t))})),i},getBaseURLsFromElement:A,getRepresentationSortFunction:function(){return function(e,t){return e.bandwidth-t.bandwidth}},getContentSteering:function(e){if(e&&e.hasOwnProperty(a.A.CONTENT_STEERING_AS_ARRAY))return E(e[a.A.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(e){return e&&e.hasOwnProperty(a.A.LOCATION_AS_ARRAY)?e[a.A.LOCATION_AS_ARRAY].map((function(e){var t=e.__text||e;return e=e.hasOwnProperty(a.A.SERVICE_LOCATION)?e[a.A.SERVICE_LOCATION]:null,new $e(t,e)})):[]},getPatchLocation:function(e){return e&&e.hasOwnProperty(a.A.PATCH_LOCATION_AS_ARRAY)?e[a.A.PATCH_LOCATION_AS_ARRAY].map((function(e){var t=e.__text||e,n=e.hasOwnProperty(a.A.SERVICE_LOCATION)?e[a.A.SERVICE_LOCATION]:null;return e=e.hasOwnProperty(a.A.TTL)?1e3*parseFloat(e[a.A.TTL]):NaN,new nt(t,n,e)})):[]},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(a.A.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(a.A.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(a.A.SERVICE_DESCRIPTION)){var n,i=ot(e.ServiceDescription_asArray);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,s=null,l=null,u=null,c=null,h=null,d=null,f=null;for(r in o)o.hasOwnProperty(r)&&(r===a.A.ID?s=o[r]:r===a.A.SERVICE_DESCRIPTION_SCOPE?l=o[r].schemeIdUri:r===a.A.SERVICE_DESCRIPTION_LATENCY?u={target:parseInt(o[r].target),max:parseInt(o[r].max),min:parseInt(o[r].min),referenceId:parseInt(o[r].referenceId)}:r===a.A.SERVICE_DESCRIPTION_PLAYBACK_RATE?c={max:parseFloat(o[r].max),min:parseFloat(o[r].min)}:r===a.A.SERVICE_DESCRIPTION_OPERATING_QUALITY?h={mediaType:o[r].mediaType,max:parseInt(o[r].max),min:parseInt(o[r].min),target:parseInt(o[r].target),type:o[r].type,maxQualityDifference:parseInt(o[r].maxQualityDifference)}:r===a.A.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?d={mediaType:o[r].mediaType,max:parseInt(o[r].max),min:parseInt(o[r].min),target:parseInt(o[r].target)}:r===a.A.CONTENT_STEERING&&(f=E(o[r])));t.push({id:s,schemeIdUri:l,latency:u,playbackRate:c,operatingQuality:h,operatingBandwidth:d,contentSteering:f})}}catch(e){i.e(e)}finally{i.f()}}return t},getSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(a.A.SEGMENT_ALIGNMENT))&&"true"===e[a.A.SEGMENT_ALIGNMENT]},getSubSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(a.A.SUB_SEGMENT_ALIGNMENT))&&"true"===e[a.A.SUB_SEGMENT_ALIGNMENT]},getSupplementalPropertiesForAdaptation:function(e){var t={};if(e&&e.hasOwnProperty(a.A.SUPPLEMENTAL_PROPERTY_ASARRAY)){var n,i=ot(e.SupplementalProperty_asArray);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.hasOwnProperty(r.A.SCHEME_ID_URI)&&(t[o[r.A.SCHEME_ID_URI]]=at({},o))}}catch(e){i.e(e)}finally{i.f()}}return t},getSupplementalPropertiesAsArrayForAdaptation:function(e){return e&&e.hasOwnProperty(a.A.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map((function(e){return(new Ye).init(e)})):[]},getSupplementalPropertiesForRepresentation:function(e){var t={};if(e&&e.hasOwnProperty(a.A.SUPPLEMENTAL_PROPERTY_ASARRAY)){var n,i=ot(e.SupplementalProperty_asArray);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.hasOwnProperty(r.A.SCHEME_ID_URI)&&(t[o[r.A.SCHEME_ID_URI]]=at({},o))}}catch(e){i.e(e)}finally{i.f()}}return t},getSupplementalPropertiesAsArrayForRepresentation:function(e){return e&&e.hasOwnProperty(a.A.SUPPLEMENTAL_PROPERTY_ASARRAY)&&e.SupplementalProperty_asArray.length?e.SupplementalProperty_asArray.map((function(e){return(new Ye).init(e)})):[]},setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.BASE64)&&(i=e.BASE64)}},t=(0,c.A)(o).getInstance().getLogger(e),e}ut.__dashjs_factory_name="DashManifestModel";var ct=u.A.getSingletonFactory(ut),ht=n(4456);function dt(e,t){var n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return r=!(i=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,n=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw n}}};if(Array.isArray(e)||(o=function(e){var t;if(e)return"string"==typeof e?ft(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ft(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function pt(){var e,t,n,i,a,o,l,u,c,d,f=this.context,p=(0,s.A)(f).getInstance(),m=(0,S.A)(f).getInstance();function g(){n={pr:1,nor:null,st:null,sf:null,sid:"".concat(ht.A.generateUuid()),cid:null},c={},u={},d={},y()}function _(){y()}function y(){var e;o&&(e=o.getStreamController())&&"function"==typeof e.getActiveStream&&(e=e.getActiveStream())&&(l=e.getProcessors())}function v(e,t){var n,i={},r=dt(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e[a]&&(i[a]=e[a])}}catch(e){r.e(e)}finally{r.f()}return i}function A(e){var t=m.get().streaming.cmcd.enabledKeys;return e.filter((function(e){return t.includes(e)}))}function E(e){try{return e.type===R.G.MPD_TYPE?((P=b()).ot="m",P):e.type===R.G.MEDIA_SEGMENT_TYPE?(L=e.mediaType,d.hasOwnProperty(L)||(d[L]=!1),u.hasOwnProperty(L)||(u[L]=!1),c.hasOwnProperty(L)||(c[L]=!1),f=e,g=b(),_=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(f),y=function(e){try{return isNaN(e.duration)?NaN:Math.round(1e3*e.duration)}catch(e){return null}}(f),v=function(e){try{return 100*parseInt(i.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(f.mediaType),A=function(e){try{var t=n.pr,i=a.getCurrentBufferLevel(e);return isNaN(t)||isNaN(i)?null:100*parseInt(i/t*10)}catch(e){return null}}(f.mediaType),E=w(f.mediaType),T=function(e){try{var t=i.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(f.mediaType),S=n.pr,I=function(e){if(l&&0!==l.length){var t,n=dt(l);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.getType()===e)return i.probeNextRequest()}}catch(e){n.e(e)}finally{n.f()}}}(f.mediaType),f.mediaType===r.A.VIDEO&&(p="v"),f.mediaType===r.A.AUDIO&&(p="a"),f.mediaType===r.A.TEXT&&(p="application/mp4"===f.mediaInfo.mimeType?"tt":"c"),C=(C=m.get().streaming.cmcd.rtp)||function(e){try{var t,n,i,r=(r=o.getPlaybackRate())||1,a=e.quality,s=e.mediaType,l=e.mediaInfo,u=e.duration;return l?(0===(t=w(s))&&(t=500),n=l.bitrateList[a].bandwidth*u/1e3/(t/r/1e3),i=m.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(m.get().streaming.cmcd.rtpSafetyFactor)?m.get().streaming.cmcd.rtpSafetyFactor:5,100*(parseInt(n*i/100)+1)):NaN}catch(e){return NaN}}(f),isNaN(C)||(g.rtp=C),I&&(f.url!==I.url?g.nor=encodeURIComponent(ht.A.getRelativeUrl(f.url,I.url)):I.range&&(g.nrr=I.range)),_&&(g.br=_),p&&(g.ot=p),isNaN(y)||(g.d=y),isNaN(v)||(g.mtp=v),isNaN(A)||(g.dl=A),isNaN(E)||(g.bl=E),isNaN(T)||(g.tb=T),isNaN(S)||1===S||(g.pr=S),c[f.mediaType]&&(g.bs=!0,c[f.mediaType]=!1),!u[f.mediaType]&&d[f.mediaType]||(g.su=!0,u[f.mediaType]=!1,d[f.mediaType]=!0),g):e.type===R.G.INIT_SEGMENT_TYPE?((h=b()).ot="i",h.su=!0,h):e.type===R.G.OTHER_TYPE||e.type===R.G.XLINK_EXPANSION_TYPE?((s=b()).ot="o",s):e.type===R.G.LICENSE?((t=b()).ot="k",t):null}catch(e){return null}var t,s,h,f,p,g,_,y,v,A,E,T,S,I,C,L,P}function b(){var e={},t=(m.get().streaming.cmcd.cid?m.get().streaming.cmcd:n).cid;return e.v=1,e.sid=(m.get().streaming.cmcd.sid?m.get().streaming.cmcd:n).sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(n.pr)||1===n.pr||null===n.pr||(e.pr=n.pr),n.st&&(e.st=n.st),n.sf&&(e.sf=n.sf),e}function w(e){try{var t=a.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function T(e){try{n.pr=e.playbackRate}catch(e){}}function I(t){try{var i=e.getIsDynamic(t.data)?"l":"v",r=t.protocol&&"MSS"===t.protocol?"s":"d";n.st="".concat(i),n.sf="".concat(r)}catch(t){}}function C(e){try{e.state&&e.mediaType&&e.state===h.A.BUFFER_EMPTY&&(c[e.mediaType]||(c[e.mediaType]=!0),u[e.mediaType]||(u[e.mediaType]=!0))}catch(e){}}function L(){for(var e in c)c.hasOwnProperty(e)&&(c[e]=!0);for(var t in u)u.hasOwnProperty(t)&&(u[t]=!0)}function P(e){try{var t,n;return e?(t=Object.keys(e).sort((function(e,t){return e.localeCompare(t)})),n=t.length,t.reduce((function(t,i,r){return"v"===i&&1===e[i]||("string"==typeof e[i]&&"ot"!==i&&"sf"!==i&&"st"!==i?t+="".concat(i,"=").concat(JSON.stringify(e[i])):t+="".concat(i,"=").concat(e[i]),r<n-1&&(t+=",")),t}),"").replace(/=true/g,"").replace(/,\s*$/,"")):null}catch(e){return null}}return t={getQueryParameter:function(e){try{var t,n;return m.get().streaming.cmcd&&m.get().streaming.cmcd.enabled?(n=P(function(e){try{var t=m.get().streaming.cmcd.enabledKeys;return Object.keys(e).filter((function(e){return t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}catch(t){return e}}(t=E(e))),p.trigger(fe.A.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}):null}catch(e){return null}},getHeaderParameters:function(e){try{var t,n,i,r,a,o;return m.get().streaming.cmcd&&m.get().streaming.cmcd.enabled?(n=v(t=E(e),A(["br","d","ot","tb"])),i=v(t,A(["bl","dl","mtp","nor","nrr","su"])),r=v(t,A(["bs","rtp"])),a=v(t,A(["cid","pr","sf","sid","st","v"])),o={"CMCD-Object":P(n),"CMCD-Request":P(i),"CMCD-Status":P(r),"CMCD-Session":P(a)},p.trigger(fe.A.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:o}),o):null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(i=e.abrController),e.dashMetrics&&(a=e.dashMetrics),e.playbackController)&&(o=e.playbackController)},reset:function(){p.off(h.A.PLAYBACK_RATE_CHANGED,T,this),p.off(h.A.MANIFEST_LOADED,I,this),p.off(h.A.BUFFER_LEVEL_STATE_CHANGED,C,t),p.off(h.A.PLAYBACK_SEEKED,L,t),g()},initialize:function(){p.on(h.A.PLAYBACK_RATE_CHANGED,T,t),p.on(h.A.MANIFEST_LOADED,I,t),p.on(h.A.BUFFER_LEVEL_STATE_CHANGED,C,t),p.on(h.A.PLAYBACK_SEEKED,L,t),p.on(h.A.PERIOD_SWITCH_COMPLETED,_,t)}},e=ct(f).getInstance(),g(),t}pt.__dashjs_factory_name="CmcdModel";var mt=u.A.getSingletonFactory(pt);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(){_t=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,i,r){return i=new RegExp(e,i),t.set(i,r||t.get(e)),yt(i,n.prototype)}function i(e,n){var i=t.get(n);return Object.keys(i).reduce((function(t,n){var r=i[n];if("number"==typeof r)t[n]=e[r];else{for(var a=0;void 0===e[r[a]]&&a+1<r.length;)a++;t[n]=e[r[a]]}return t}),Object.create(null))}var r=n,a=RegExp;if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),a&&yt(r,a),n.prototype.exec=function(t){var n;return(t=e.exec.call(this,t))&&(t.groups=i(t,this),n=t.indices)&&(n.groups=i(n,this)),t},n.prototype[Symbol.replace]=function(n,r){var a,o;return"string"==typeof r?(a=t.get(this),e[Symbol.replace].call(this,n,r.replace(/\$<([^>]+)>/g,(function(e,t){return t=a[t],"$"+(Array.isArray(t)?t.join("$"):t)})))):"function"==typeof r?(o=this,e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=gt(e[e.length-1])&&(e=[].slice.call(e)).push(i(e,o)),r.apply(this,e)}))):e[Symbol.replace].call(this,n,r)},_t.apply(this,arguments)}function yt(e,t){return(yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vt="dynamic",At="stream",Et=["mb","st","sf","v"],bt={video:"v",audio:"a",text:"tt",stream:At},wt=/^[-0-9]/;function Tt(){var e,t,n,i,r=this.context,a=(0,s.A)(r).getInstance();function o(){n={},i={}}function u(e){e&&Object.keys(e).forEach((function(t){Et.includes(t)||delete e[t]}))}function h(e){return!e||"false"!==e.toLowerCase()&&(wt.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}function d(e){return bt[e]||"o"}function f(e,t,r){return t=(e="static"===e?n:i)[t]||{},e=e[At]||{},t[r]||e[r]}return e={setConfig:function(){},initialize:function(){},reset:function(){o()},parseResponseHeaders:function(e,r){for(var o=null,s=null,c=e.split("\r\n"),f=c.length-1;0<=f;f--){var p=c[f].match(_t(/^([^:]*):\s*(.*)$/,{key:1,value:2}));if(p&&p.groups){var m=p.groups.key.toLowerCase(),g=p.groups.value;switch(m){case"cmsd-static":o=function(e){try{for(var n={},i=e.split(","),r=0;r<i.length;r++){var a=i[r].split("="),o=a[0],s=h(a[1]);n[o]=s}return n}catch(e){t.error("Failed to parse CMSD-Static response header value:",e)}}(g),a.trigger(l.A.CMSD_STATIC_HEADER,o);break;case"cmsd-dynamic":s=s||function(e){try{for(var n={},i=e.split(","),r=i[i.length-1].split(";"),a=1;a<r.length;a++){var o=r[a].split("="),s=o[0],l=h(o[1]);n[s]=l}return n}catch(e){return t.error("Failed to parse CMSD-Dynamic response header value:",e),[]}}(g)}}}return e=At,o&&o.ot?e=o.ot:r&&(e=d(r)),u(n[e]),u(i[e]),o&&(n[e]=Object.assign(n[e]||{},o)),s&&(i[e]=Object.assign(i[e]||{},s)),{static:o,dynamic:s}},getMaxBitrate:function(e){return e=d(e),f(vt,e,"mb")||-1},getEstimatedThroughput:function(e){return e=d(e),f(vt,e,"etp")||null},getResponseDelay:function(e){return e=d(e),f(vt,e,"rd")||null},getRoundTripTime:function(e){return e=d(e),f(vt,e,"rtt")||null}},t=(0,c.A)(r).getInstance().getLogger(e),o(),e}Tt.__dashjs_factory_name="CmsdModel";var St=u.A.getSingletonFactory(Tt);function Rt(){var e,t,n=this.context,i={};function r(){t=(0,c.A)(n).getInstance().getLogger(e)}function a(e){var t,n=!0,i=e.reduce((function(e,t){return e+t.bufferLevelAtSegmentEnd}),0)/e.length;return e.forEach((function(e){Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)<.95&&(n=!1),e.bufferLevelAtSegmentEnd/i<.8&&(n=!1),t?t>e.bitrate&&(n=!1):t=e.bitrate})),n}return e={setup:r,addMeasurement:function(e,t,n,r,a){e&&e.mediaType&&!i[e.mediaType]&&(i[e.mediaType]=[]);var o=e.mediaInfo.bitrateList.find((function(t){return t.id===e.representationId}));i[e.mediaType].push({index:e.index,repId:e.representationId,mediaType:e.mediaType,requestTimeMS:r,adjustedAvailabilityStartTimeMS:e.availabilityStartTime.getTime(),segDurationMS:1e3*e.duration,chunksDurationMS:n.reduce((function(e,t){return e+t.chunkDownloadDurationMS}),0),segmentBytes:n.reduce((function(e,t){return e+t.chunkBytes}),0),bitrate:o&&o.bandwidth,bitrateList:e.mediaInfo.bitrateList,chunkMeasurements:n,fetchDownloadDurationMS:t,throughputCapacityDelayMS:a,getEstimatedBufferLevel:function(e){for(var t={},n=0,i=0,r=0,a=0,o=e.length,s=0;s<o;++s)n+=e[s].chunkDownloadTimeRelativeMS,i+=e[s].bufferLevel,r+=e[s].chunkDownloadTimeRelativeMS*e[s].bufferLevel,a+=e[s].chunkDownloadTimeRelativeMS*e[s].chunkDownloadTimeRelativeMS;return t.m=(r-n*i/o)/(a-n*n/o),t.b=i/o-t.m*n/o,function(e){return t.m*e+t.b}}(n.slice(1))}),10<i[e.mediaType].length&&i[e.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){return!(e=i[e.mediaType]&&i[e.mediaType].slice(-3))||e.length<3||!a(e)?0:250<t/4?250:t/4},getEstimatedDownloadDurationMS:function(e){var n=i[e.mediaType].slice(-1).pop(),r=(e=i[e.mediaType].slice(-3),n.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS);if(n.bufferLevelAtSegmentStart=n.getEstimatedBufferLevel(r/2),n.bufferLevelAtSegmentEnd=n.getEstimatedBufferLevel(r),e=(r=a(e))?.6:.8,n.isBufferStable&&1.05*n.segDurationMS<n.fetchDownloadDurationMS)return n.fetchDownloadDurationMS;if(!r||n.segDurationMS<n.fetchDownloadDurationMS)return.8*n.fetchDownloadDurationMS;if(n.adjustedAvailabilityStartTimeMS<=n.requestTimeMS+n.throughputCapacityDelayMS-n.segDurationMS)return.8*n.fetchDownloadDurationMS;for(var o,s=n.requestTimeMS+n.throughputCapacityDelayMS-n.adjustedAvailabilityStartTimeMS,l=0,u=0,c=0,h=0;h<n.chunkMeasurements.length;h++){var d=n.chunkMeasurements[h];if(s<u+d.chunkDownloadDurationMS)break;u+=d.chunkDownloadDurationMS,l+=d.chunkBytes,c++}return s<0&&t.warn("request time was before adjusted availibitly start time"),l&&u&&c>.2*n.chunkMeasurements.length?(r=n.segmentBytes/(l/u),n.fetchDownloadDurationMS<r?n.fetchDownloadDurationMS*e:r*e):(o=n.bitrate,n.bitrateList.some((function(e){if(e.bandwidth>n.bitrate)return o=e.bandwidth,!0})),o===n.bitrate?n.fetchDownloadDurationMS*e:e*n.segmentBytes*8*1e3/o)}},r(),e}Rt.__dashjs_factory_name="LowLatencyThroughputModel";var It=u.A.getSingletonFactory(Rt),Ct=n(9085);function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t,n){var i=function(e){if("object"!=Lt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Lt(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t);return(t="symbol"==Lt(i)?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e){var t,n,i,a,o,u,h,d,f,p=this.context,m=(e=e||{}).errHandler,g=e.dashMetrics,_=e.mediaPlayerModel,y=e.requestModifier,A=e.boxParser,E=e.errors,b=e.requestTimeout||0,w=(0,s.A)(p).getInstance(),T=(0,S.A)(p).getInstance();function I(e,s){var c,E=e.request,S=[],C=!0,L=!0,P=new Date,D=P,k=0,x=null,M=null;if(!y||!g||!m)throw new Error("config object is not correct or missing");function O(e){E.requestStartDate=P,E.requestEndDate=new Date,E.firstByteDate=E.firstByteDate||P,E.fileLoaderType=M;var t=c.response?c.response.responseURL:null,n=c.response?c.response.status:null,i=c.response&&c.response.getAllResponseHeaders?c.response.getAllResponseHeaders():c.response?c.response.responseHeaders:null,r=i&&T.get().streaming.cmsd&&T.get().streaming.cmsd.enabled?u.parseResponseHeaders(i,E.mediaType):null;g.addHttpRequest(E,t,n,i,e?S:null,r)}function N(e){L=!1,O(e),E.type===R.G.MPD_TYPE&&(g.addManifestUpdate(E),w.trigger(l.A.MANIFEST_LOADING_FINISHED,{request:E}))}function F(){if(x&&(clearTimeout(x),x=null),-1!==t.indexOf(c)&&(t.splice(t.indexOf(c),1),L))if(N(!1),0<s){try{T.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&E.type===R.G.MEDIA_SEGMENT_TYPE&&_.getRetryAttemptsForType(R.G.MEDIA_SEGMENT_TYPE)===s&&w.trigger(l.A.ATTEMPT_BACKGROUND_SYNC)}catch(n){}s--;var n={config:e};i.push(n),n.timeout=setTimeout((function(){-1!==i.indexOf(n)&&(i.splice(i.indexOf(n),1),I(e,s))}),_.getRetryIntervalsForType(E.type))}else E.type!==R.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(m.error(new v.A(a[E.type],E.url+" is not available",{request:E,response:c.response})),e.error&&e.error(E,"error",c.response.statusText,c.response),e.complete)&&e.complete(E,c.response.statusText)}M=E.hasOwnProperty("availabilityTimeComplete")&&!1===E.availabilityTimeComplete&&window.fetch&&"arraybuffer"===E.responseType&&E.type===R.G.MEDIA_SEGMENT_TYPE?((B=de(p).create({requestModifier:y,lowLatencyThroughputModel:d,boxParser:A})).setup({dashMetrics:g}),r.A.FILE_LOADER_TYPES.FETCH):(B=(0,le.A)(p).create({requestModifier:y}),r.A.FILE_LOADER_TYPES.XHR);var B,U,j=null,G=y.modifyRequestURL?y.modifyRequestURL(E.url):E.url,V=(T.get().streaming.cmcd&&T.get().streaming.cmcd.enabled&&((H=T.get().streaming.cmcd.mode)===r.A.CMCD_MODE_QUERY?(V=function(e){try{var t=[],n=o.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(E),G=ht.A.addAditionalQueryParameterToUrl(G,V)):H===r.A.CMCD_MODE_HEADER&&(j=o.getHeaderParameters(E))),h.getXHRWithCredentialsForType(E.type)),H=(E.queryParams&&(H=Object.keys(E.queryParams).map((function(e){return{key:e,value:E.queryParams[e]}})),G=ht.A.addAditionalQueryParameterToUrl(G,H)),E.url=G,c={url:G,method:R.G.GET,withCredentials:V,request:E,onload:function(){200<=c.response.status&&c.response.status<=299&&(N(!0),e.success&&e.success(c.response.response,c.response.statusText,c.response.responseURL),e.complete)&&e.complete(E,c.response.statusText)},onend:F,onerror:F,progress:function(t){var n=new Date;C&&(C=!1,!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(E.firstByteDate=n),t.lengthComputable&&(E.bytesLoaded=t.loaded,E.bytesTotal=t.total),t.noTrace||(S.push({s:D,d:t.time||n.getTime()-D.getTime(),b:[t.loaded?t.loaded-k:0]}),D=n,k=t.loaded),x&&(clearTimeout(x),x=null),0<T.get().streaming.fragmentRequestProgressTimeout&&(x=setTimeout((function(){f.warn("Abort request "+c.url+" due to progress timeout"),c.response.onabort=null,c.loader.abort(c),F()}),T.get().streaming.fragmentRequestProgressTimeout)),e.progress&&t&&e.progress(t)},onabort:function(){O(!0),x&&(clearTimeout(x),x=null),e.abort&&e.abort(E)},ontimeout:function(e){var t;e=e.lengthComputable?(t=e.loaded/e.total*100,"Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+t.toFixed(3)+"% Completed"):"Request timeout: non-computable download size",f.warn(e)},loader:B,timeout:b,headers:j},(new Date).getTime());isNaN(E.delayLoadingTime)||H>=E.delayLoadingTime?(t.push(c),B.load(c)):(U={httpRequest:c},n.push(U),U.delayTimeout=setTimeout((function(){if(-1!==n.indexOf(U)){n.splice(n.indexOf(U),1);try{P=new Date,D=P,t.push(U.httpRequest),B.load(U.httpRequest)}catch(e){U.httpRequest.onerror()}}}),E.delayLoadingTime-H))}return e={load:function(e){e.request?I(e,_.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){i.forEach((function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)})),i=[],n.forEach((function(e){return clearTimeout(e.delayTimeout)})),n=[],t.forEach((function(e){e.request.type!==R.G.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))})),t=[]}},f=(0,c.A)(p).getInstance().getLogger(e),t=[],n=[],i=[],o=mt(p).getInstance(),u=St(p).getInstance(),d=It(p).getInstance(),h=(0,Ct.A)(p).getInstance(),a=Pt(Pt(Pt(Pt(Pt(Pt(Pt({},R.G.MPD_TYPE,E.DOWNLOAD_ERROR_ID_MANIFEST_CODE),R.G.XLINK_EXPANSION_TYPE,E.DOWNLOAD_ERROR_ID_XLINK_CODE),R.G.INIT_SEGMENT_TYPE,E.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),R.G.MEDIA_SEGMENT_TYPE,E.DOWNLOAD_ERROR_ID_CONTENT_CODE),R.G.INDEX_SEGMENT_TYPE,E.DOWNLOAD_ERROR_ID_CONTENT_CODE),R.G.BITSTREAM_SWITCHING_SEGMENT_TYPE,E.DOWNLOAD_ERROR_ID_CONTENT_CODE),R.G.OTHER_TYPE,E.DOWNLOAD_ERROR_ID_CONTENT_CODE),e}Dt.__dashjs_factory_name="HTTPLoader";var kt=u.A.getClassFactory(Dt);function xt(){var e;function t(){e={}}function n(){t()}return n(),{getLoader:function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.startsWith(n))return e[n];return kt},registerLoader:function(t,n){e[t]=n},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:t,reset:n}}xt.__dashjs_factory_name="SchemeLoaderFactory";var Mt=u.A.getSingletonFactory(xt);function Ot(e){e=e||{};var t,n=this.context,i=Mt(n).getInstance();return{load:function(r){var a;t||(a=i.getLoader(r&&r.request?r.request.url:null),t=a(n).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,dashMetrics:e.dashMetrics,boxParser:e.boxParser||null,constants:e.constants||null,dashConstants:e.dashConstants||null,urlUtils:e.urlUtils||null,requestTimeout:isNaN(e.requestTimeout)?0:e.requestTimeout,errors:e.errors})),t.load(r)},abort:function(){t&&t.abort()}}}Ot.__dashjs_factory_name="URLLoader";var Nt=u.A.getClassFactory(Ot);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Bt=function(){return!!e})()}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){return(jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Gt=function(e){function t(e){if(this instanceof t)return(e=function(e,t,n){t=Ut(t);var i=e;if(!(t=Bt()?Reflect.construct(t,n||[],Ut(e).constructor):t.apply(e,n))||"object"!==Ft(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t,[e])).checkForExistenceOnly=!0,e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&jt(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(p.A);function Vt(e){var t=this.context,n=(e=e||{}).eventBus,i=e.events,a=e.urlUtils,o=e.errors,s=e.streamId,l={checkForExistence:function(e){function t(t){n.trigger(i.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})}var r;e?(r=new Gt(e.url),u.load({request:r,success:function(){t(!0)},error:function(){t(!1)}})):t(!1)},load:function(e){function t(t,r){n.trigger(i.LOADING_COMPLETED,{request:e,response:t||null,error:r||null,sender:l})}e?u.load({request:e,progress:function(t){n.trigger(i.LOADING_PROGRESS,{request:e,stream:t.stream,streamId:s}),t.data&&n.trigger(i.LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:l})},success:function(e){t(e)},error:function(e,n,i){t(void 0,new v.A(o.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,i,n))},abort:function(e){e&&n.trigger(i.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:l})}}):t(void 0,new v.A(o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,o.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){u&&u.abort()},reset:function(){u&&(u.abort(),u=null)}},u=Nt(t).create({errHandler:e.errHandler,errors:o,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:a,constants:r.A,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout});return l}Vt.__dashjs_factory_name="FragmentLoader";var Ht=u.A.getClassFactory(Vt);function Yt(){return{modifyResponseAsync:function(e){return Promise.resolve(e)}}}Yt.__dashjs_factory_name="SegmentResponseModifier";var zt=u.A.getSingletonFactory(Yt);function Wt(e){e=e||{};var t,n,i,a=this.context,o=(0,s.A)(a).getInstance(),u=e.errHandler,d=e.mediaPlayerModel,f=e.dashMetrics,p=(0,c.A)(a).getInstance(),m=zt(a).getInstance(),g=e.streamInfo;function _(){return g.id}function v(){for(var e in i)i[e].reset();i={}}function A(e){var t,i,a,s,u,c,h,d;e.sender&&(t=e.request,u=e.response,i=t.isInitializationRequest(),a=t.mediaInfo.streamInfo,e.error&&(t.mediaType===r.A.AUDIO||t.mediaType===r.A.VIDEO||t.mediaType===r.A.TEXT&&t.mediaInfo.isFragmented)&&o.trigger(l.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:e.request.serviceLocation}),u&&a?(c=t,h=g.id,e=e.type!==l.A.FRAGMENT_LOADING_PROGRESS,(d=new se).streamId=h,d.mediaInfo=c.mediaInfo,d.segmentType=c.type,d.start=c.startTime,d.duration=c.duration,d.end=d.start+d.duration,d.bytes=u,d.index=c.index,d.quality=c.quality,d.representationId=c.representationId,d.endFragment=e,s=d,m.modifyResponseAsync(s).then((function(e){o.trigger(i?l.A.INIT_FRAGMENT_LOADED:l.A.MEDIA_FRAGMENT_LOADED,{chunk:e,request:t},{streamId:a.id,mediaType:t.mediaType})})).catch((function(e){n.error(e),o.trigger(i?l.A.INIT_FRAGMENT_LOADED:l.A.MEDIA_FRAGMENT_LOADED,{chunk:s,request:t},{streamId:a.id,mediaType:t.mediaType})}))):n.warn("No "+t.mediaType+" bytes to push or stream is inactive."))}return n=p.getLogger(t={getStreamId:_,getModel:function(t){var n=i[t];return n||(n=y(a).create({streamInfo:g,type:t,dashMetrics:f,fragmentLoader:Ht(a).create({dashMetrics:f,mediaPlayerModel:d,errHandler:u,requestModifier:(0,W.A)(a).getInstance(),settings:e.settings,boxParser:e.boxParser,eventBus:o,events:l.A,errors:T,dashConstants:e.dashConstants,urlUtils:e.urlUtils,streamId:_()}),debug:p,eventBus:o,events:l.A}),i[t]=n),n},reset:function(){o.off(h.A.FRAGMENT_LOADING_COMPLETED,A,this),o.off(h.A.FRAGMENT_LOADING_PROGRESS,A,this),v()}}),v(),o.on(h.A.FRAGMENT_LOADING_COMPLETED,A,t),o.on(h.A.FRAGMENT_LOADING_PROGRESS,A,t),t}Wt.__dashjs_factory_name="FragmentController";var Kt=u.A.getClassFactory(Wt);function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=qt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=qt(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==qt(e)?e:String(e)}(i.key),i)}}Ha=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Ua&&Qt(Ha.prototype,Ua),Ga&&Qt(Ha,Ga),Object.defineProperty(Ha,"prototype",{writable:!1});var Xt=Ha;function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Jt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Jt(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Jt(e)?e:String(e)}(i.key),i)}}Go=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},Za&&Zt(Go.prototype,Za),eo&&Zt(Go,eo),Object.defineProperty(Go,"prototype",{writable:!1});var $t=Go;function en(e){var t,n,i=this.context,a=e.streamInfo;function o(e){n.setTrackByIndex(e)}function s(){n&&n.reset()}return t={getStreamId:function(){return a.id},initialize:function(){n.addTracks();var e=n.getTracks();e&&0<e.length&&o(0)},provide:function(e,t){if("function"==typeof t){var i=n.getCurrentTrack();if(!i||i.segmentDuration<=0||null==e)t(null);else{(o=n.getThumbnailRequestForTime(e))&&(i.segmentDuration=o.duration);var r=e%i.segmentDuration,a=(r=Math.floor(r*i.tilesHor*i.tilesVert/i.segmentDuration),new Xt);if(a.width=Math.floor(i.widthPerTile),a.height=Math.floor(i.heightPerTile),a.x=Math.floor(r%i.tilesHor)*i.widthPerTile,a.y=Math.floor(r/i.tilesHor)*i.heightPerTile,"readThumbnail"in i)return i.readThumbnail(e,(function(e){a.url=e,t(a)}));o?(a.url=o.url,i.segmentDuration=NaN):(r=Math.floor(e/i.segmentDuration),a.url=(e=r+(o=i).startNumber,r=(0,G.XX)(o.templateUrl,"Number",e),r=(0,G.XX)(r,"Time",(e-1)*o.segmentDuration*o.timescale),r=(0,G.XX)(r,"Bandwidth",o.bandwidth),(0,G.Dr)(r))),t(a)}}var o},setTrackByIndex:o,getCurrentTrackIndex:function(){return n.getCurrentTrackIndex()},getBitrateList:function(){var e=n.getTracks(),t=0;return e.map((function(e){var n=new $t;return n.mediaType=r.A.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n}))},reset:s},s(),n=(0,Xe.A)(i).create({streamInfo:a,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),t}en.__dashjs_factory_name="ThumbnailController";var tn=u.A.getClassFactory(en),nn=n(8098);function rn(e){e=e||{};var t,n=[],i=(0,s.A)(this.context).getInstance(),r=e.updateEventName;function a(e){-1===n.indexOf(e)&&(n.push(e),i.trigger(r,{entry:e}))}return t={add:a,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}},(e=e.addBlacklistEventName)&&i.on(e,(function(e){a(e.entry)}),t),t}rn.__dashjs_factory_name="BlackListController";var an=u.A.getClassFactory(rn),on=[r.A.VIDEO,r.A.AUDIO,r.A.TEXT,r.A.MUXED,r.A.IMAGE];function sn(e){e=e||{};var t,n,i,o,u,h,d,f,p,m,g,_,y,A,E,b,w,S,R=this.context,I=(0,s.A)(R).getInstance(),C=(0,K.A)(R).getInstance(),L=e.manifestModel,P=e.mediaPlayerModel,D=e.dashMetrics,k=e.manifestUpdater,x=e.adapter,M=e.timelineConverter,O=e.capabilities,N=e.errHandler,F=e.abrController,B=e.playbackController,U=e.eventController,j=e.mediaController,G=e.protectionController,V=e.textController,H=e.videoModel,Y=e.streamInfo,z=e.settings;function W(e,t){return new Promise((function(a,o){te(),m=!0,ie();var s=H.getElement(),l=[];on.forEach((function(t){(t!==r.A.TEXT||e)&&(t!==r.A.VIDEO||!s||s&&/^VIDEO$/i.test(s.nodeName))&&l.push(q(t,e))})),Promise.all(l).then((function(){return e=t,new Promise((function(t){var n={},r=i.map((function(t){return t.createBufferSinks(e)}));Promise.all(r).then((function(e){e.forEach((function(e){e&&(n[e.getType()]=e)})),t(n)})).catch((function(){t(n)}))}));var e})).then((function(t){m=!1,0===i.length?(N.error(new v.A(T.MANIFEST_ERROR_ID_NOSTREAMS_CODE,"No streams to play.",L.getValue())),n.fatal("No streams to play.")):ae(),e&&V.createTracks(Y),a(t)})).catch((function(e){o(e)}))}))}function q(t,o){var s,u=x.getAllMediaInfoForType(Y,t),c=[],h=null;if(!u||0===u.length)return n.info("No "+t+" data."),Promise.resolve();t===r.A.VIDEO&&(d=!0),t===r.A.AUDIO&&(f=!0);for(var p=0,m=u.length;p<m;p++)h=u[p],t===r.A.TEXT&&h.isEmbedded&&(V.addEmbeddedTrack(Y,h),c.push(h)),Q(h)&&j.addTrack(h);return 0<c.length&&(j.setInitialMediaSettingsForType(t,Y),V.addMediaInfosToBuffer(Y,t,c)),0===(u=u.filter((function(e){return!e.isEmbedded}))).length?Promise.resolve():t===r.A.IMAGE?((_=tn(R).create({streamInfo:Y,adapter:x,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:b,eventBus:I,events:l.A,dashConstants:a.A,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController})).initialize(),Promise.resolve()):(I.trigger(l.A.STREAM_INITIALIZING,{streamInfo:Y,mediaInfo:h}),j.setInitialMediaSettingsForType(t,Y),o=function(t,n){var a=t&&0<t.length?t[0]:null,o=g.getModel(a?a.type:null),s=a?a.type:null,l=a?a.mimeType:null,u=(a=a?a.isFragmented:null,re(R).create({streamInfo:Y,type:s,mimeType:l,timelineConverter:M,adapter:x,manifestModel:L,mediaPlayerModel:P,fragmentModel:o,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,segmentBaseController:e.segmentBaseController,abrController:F,playbackController:B,mediaController:j,textController:V,errHandler:N,settings:z,boxParser:E,segmentBlacklistController:y}));u.initialize(n,d,a),i.push(u);for(var c=0;c<t.length;c++)u.addMediaInfo(t[c]);return s===r.A.TEXT&&V.addMediaInfosToBuffer(Y,s,t,o),u}(u,o),(s=j.getCurrentTrackFor(t,Y.id))?(F.updateTopQualityIndex(s),o.selectMediaInfo(t===r.A.TEXT&&s.isEmbedded?u[0]:s)):Promise.resolve())}function Q(e){var t=e?e.type:null;return t===r.A.MUXED?(n.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),N.error(new v.A(T.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",L.getValue())),0):t===r.A.TEXT||t===r.A.IMAGE||!e.contentProtection||O.supportsEncryptedMedia()||(N.error(new v.A(T.CAPABILITY_MEDIAKEYS_ERROR_CODE,T.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),0)}function X(e){for(var t=i?i.length:0,n=0;n<t;n++){var r=i[n].getFragmentModel();r.abortRequests(),r.resetInitialSettings(),i[n].reset(!1,e)}V&&V.deactivateStream(Y),me(h=u=!(i=[])),Z(!1),I.trigger(l.A.STREAM_DEACTIVATED,{streamInfo:Y})}function J(e){X(e),f=d=o=!1,w=m=!(p={}),S=[]}function Z(e){w=e}function $(){return Y?Y.start:NaN}function ee(){return Y?Y.id:null}function te(){if(!H||!F)throw new Error(r.A.MISSING_CONFIG_ERROR)}function ne(e){e.error&&(N.error(e.error),n.fatal(e.error.message))}function ie(){var e;U&&(e=x.getEventsFor(Y))&&0<e.length&&U.addInlineEvents(e,Y.id)}function ae(){for(var e=i.length,t=p.audio||p.video?new v.A(T.DATA_UPDATE_FAILED_ERROR_CODE,T.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(i[n].isUpdating()||m)return;if(G){G.clearMediaInfoArray();for(var a=0;a<e&&i[a];a++){var s=i[a].getType(),u=i[a].getMediaInfo();(s===r.A.AUDIO||s===r.A.VIDEO||s===r.A.TEXT&&u.isFragmented)&&(s=i[a].getMediaInfo())&&G.initializeForMedia(s)}G.handleKeySystemFromManifest()}t?N.error(t):o||(o=!0,H.waitForReadyState(r.A.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){I.trigger(l.A.STREAM_INITIALIZED,{streamInfo:Y})})))}function oe(){var e=he(),t=e.length;if(0!==t){for(var i=0;i<t;i++)if(!e[i].isBufferingCompleted()&&(e[i].getType()===r.A.AUDIO||e[i].getType()===r.A.VIDEO))return void n.debug("onBufferingCompleted - One streamProcessor has finished but",e[i].getType(),"one is not buffering completed");n.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),h=!0,I.trigger(l.A.STREAM_BUFFERING_COMPLETED,{streamInfo:Y},{streamInfo:Y})}else n.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function se(e){p[e.mediaType]=e.error,ae()}function le(e){U&&U.addInbandEvents(e.events,Y.id)}function ue(e){return e&&e.type?ce(e.type):null}function ce(e){return e?he().filter((function(t){return t.getType()===e}))[0]:null}function he(){for(var e,t,n=[],a=0;a<i.length;a++)(e=(t=i[a]).getType())!==r.A.AUDIO&&e!==r.A.VIDEO&&e!==r.A.TEXT||n.push(t);return n}function de(e,t){var n=Y;return!((t=t.getStreamInfo())&&n&&(t=x.getAdaptationForType(t.index,e,t),e=x.getAdaptationForType(n.index,e,n),t&&e?!fe(e)&&fe(t):t||e))}function fe(e){return e&&(e.ContentProtection||e.Representation_asArray&&0<e.Representation_asArray.length&&e.Representation_asArray[0].ContentProtection)}function pe(e,t,n){var i,r,a;return n=2<arguments.length&&void 0!==n?n:null,!!(e&&e.hasOwnProperty("getStreamInfo")&&(e=e.getStreamInfo(),n=n?n.getStreamInfo():Y,e)&&n)&&(e=x.getAdaptationForType(e.index,t,e),t=x.getAdaptationForType(n.index,t,n),e&&t?(n=e&&t&&e.mimeType===t.mimeType,i=t.Representation_asArray.map((function(e){return e.codecs})),r=(a=e.Representation_asArray.map((function(e){return e.codecs}))).some((function(e){return-1<i.indexOf(e)})),a=a.some((function(e){return i.some((function(t){return O.codecRootCompatibleWithCodec(t,e)}))})),r||a&&n):!e&&!t)}function me(e){A=e}t={initialize:function(){I.on(l.A.BUFFERING_COMPLETED,oe,t),I.on(l.A.DATA_UPDATE_COMPLETED,se,t),I.on(l.A.INBAND_EVENTS,le,t),G&&(I.on(l.A.KEY_ERROR,ne,t),I.on(l.A.SERVER_CERTIFICATE_UPDATED,ne,t),I.on(l.A.LICENSE_REQUEST_COMPLETE,ne,t),I.on(l.A.KEY_SYSTEM_SELECTED,ne,t),I.on(l.A.KEY_SESSION_CREATED,ne,t),I.on(l.A.KEY_STATUSES_CHANGED,ne,t)),V.initializeForStream(Y),I.trigger(l.A.STREAM_UPDATED,{streamInfo:Y})},getStreamId:function(){return Y?Y.id:null},activate:function(e,t){return new Promise((function(n,i){if(!u)return A?(u=!0,I.trigger(l.A.STREAM_ACTIVATED,{streamInfo:Y}),void n(t)):void W(e,t).then((function(e){u=!0,I.trigger(l.A.STREAM_ACTIVATED,{streamInfo:Y}),n(e)})).catch((function(e){i(e)}));n(t)}))},deactivate:X,getIsActive:function(){return u},getDuration:function(){return Y?Y.duration:NaN},getStartTime:$,getId:ee,getStreamInfo:function(){return Y},getHasAudioTrack:function(){return f},getHasVideoTrack:function(){return d},startPreloading:function(e,t){return new Promise((function(r,a){A?a():(n.info("[startPreloading] Preloading next stream with id ".concat(ee())),me(!0),W(e,t).then((function(){for(var e=0;e<i.length&&i[e];e++)i[e].setExplicitBufferingTime($()),i[e].getScheduleController().startScheduleTimer();r()})).catch((function(){me(!1),a()})))}))},initializeForTextWithMediaSource:function(e){return new Promise((function(t,n){q(r.A.TEXT,e).then((function(){return(e=ce(r.A.TEXT))?e.createBufferSinks():Promise.resolve();var e})).then((function(){V.createTracks(Y),t()})).catch((function(e){n(e)}))}))},getThumbnailController:function(){return _},getBitrateListFor:function(e){return te(),e===r.A.IMAGE?_?_.getBitrateList():[]:(e=function(e){for(var t=null,n=0;n<i.length;n++)if((t=i[n]).getType()===e)return t.getMediaInfo();return null}(e),F.getBitrateList(e))},updateData:function(e){return new Promise((function(t){m=!0,Y=e,U&&ie();for(var n=[],r=0,a=i.length;r<a;r++){var o=i[r],s=o.getMediaInfo(),u=(n.push(o.updateStreamInfo(Y)),x.getAllMediaInfoForType(Y,o.getType()));if(u=u.filter((function(e){return!e.isEmbedded}))){o.clearMediaInfoArray();for(var c=0;c<u.length;c++){var h=u[c];o.addMediaInfo(u[c]),x.areMediaInfosEqual(s,h)&&(F.updateTopQualityIndex(h),n.push(o.selectMediaInfo(h)))}}}Promise.all(n).then((function(){for(n=[];0<S.length;){var e,t=(e=S.pop()).newMediaInfo;if(!(e=ue(e.oldMediaInfo)))return;n.push(e.prepareTrackSwitch()),n.push(e.selectMediaInfo(t))}return Promise.all(n)})).then((function(){m=!1,ae(),I.trigger(l.A.STREAM_UPDATED,{streamInfo:Y}),t()}))}))},reset:function(e){g&&(g.reset(),g=null),F&&Y&&F.clearDataForStream(Y.id),y&&(y.reset(),y=null),J(e),Y=null,I.off(l.A.DATA_UPDATE_COMPLETED,se,t),I.off(l.A.BUFFERING_COMPLETED,oe,t),I.off(l.A.INBAND_EVENTS,le,t),G&&(I.off(l.A.KEY_ERROR,ne,t),I.off(l.A.SERVER_CERTIFICATE_UPDATED,ne,t),I.off(l.A.LICENSE_REQUEST_COMPLETE,ne,t),I.off(l.A.KEY_SYSTEM_SELECTED,ne,t),I.off(l.A.KEY_SESSION_CREATED,ne,t),I.off(l.A.KEY_STATUSES_CHANGED,ne,t))},getProcessors:he,setMediaSource:function(e){return new Promise((function(t,r){for(var a=[],o=0;o<i.length;)Q(i[o].getMediaInfo())?(a.push(i[o].setMediaSource(e)),o++):(i[o].reset(),i.splice(o,1));Promise.all(a).then((function(){for(var e=0;e<i.length;e++)i[e].dischargePreBuffer();0===i.length&&(N.error(new v.A(T.MANIFEST_ERROR_ID_NOSTREAMS_CODE,"No streams to play.nostreams",L.getValue())),n.fatal("No streams to play.")),t()})).catch((function(e){n.error(e),r(e)}))}))},isMediaCodecCompatible:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return pe(e,r.A.VIDEO,t)&&pe(e,r.A.AUDIO,t)},isProtectionCompatible:function(e){return!e||de(r.A.VIDEO,e)&&de(r.A.AUDIO,e)},getPreloaded:function(){return A},getIsEndedEventSignaled:function(){return w},setIsEndedEventSignaled:Z,getAdapter:function(){return x},getHasFinishedBuffering:function(){return h},setPreloaded:me,startScheduleControllers:function(){for(var e=i.length,t=0;t<e&&i[t];t++)i[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){var t,i,a,o;u&&Y&&(h=!1,t=e.newMediaInfo,i=L.getValue(),x.setCurrentMediaInfo(Y.id,t.type,t),a=ue(t))&&(o=B.getTime(),n.info("Stream -  Process track changed at current time "+o),i.refreshManifestOnSwitchTrack?(S.push(e),k.getIsUpdating()||(n.debug("Stream -  Refreshing manifest for switch track"),k.refreshManifest())):a.selectMediaInfo(t).then((function(){t.type!==r.A.VIDEO&&t.type!==r.A.AUDIO||F.updateTopQualityIndex(t),a.prepareTrackSwitch()})))},prepareQualityChange:function(e){var t=ce(e.mediaType);t&&t.prepareQualityChange(e)}};try{b=(0,c.A)(R).getInstance(),n=b.getLogger(t),J(),E=(0,nn.A)(R).getInstance(),y=an(R).create({updateEventName:l.A.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.A.SEGMENT_LOCATION_BLACKLIST_ADD}),g=Kt(R).create({streamInfo:Y,mediaPlayerModel:P,dashMetrics:D,errHandler:N,settings:z,boxParser:E,dashConstants:a.A,urlUtils:C})}catch(C){throw C}return t}sn.__dashjs_factory_name="Stream";var ln=u.A.getClassFactory(sn);un=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t||null,this.type=R.G.CONTENT_STEERING_TYPE,this.responseType="json"},Object.defineProperty(un,"prototype",{writable:!1});var un,cn=un;hn=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]},Object.defineProperty(hn,"prototype",{writable:!1});var hn,dn=hn;function fn(){var e,t,n,i,r,o,s,l,u,d,f,p,m,g,_,y=this.context,v=(0,K.A)(y).getInstance();function A(e){R(e,"baseUrl")}function E(e){R(e,"location")}function b(e){var t,n;e&&e.request&&e.request.serviceLocation&&e.request.requestStartDate&&e.request.requestEndDate&&!isNaN(e.request.bytesTotal)&&(t=e.request.serviceLocation,n=e.request.requestEndDate.getTime()-e.request.requestStartDate.getTime(),S(t,parseInt(8*e.request.bytesTotal/n*1e3)))}function w(e){e&&e.httpRequest&&e.httpRequest._serviceLocation&&!isNaN(e.throughput)&&S(e.httpRequest._serviceLocation,1e3*e.throughput)}function S(e,t){r[e]||(r[e]=[]),r[e].push(t),4<r[e].length&&r[e].shift()}function R(e,t){e&&e.request&&e.request.serviceLocation&&(e=e.request.serviceLocation,-1===i[t].all.indexOf(e)&&i[t].all.push(e),i[t].current=e)}function I(){var e=f.getValue();return _.getContentSteering(e)||m.getServiceDescriptionSettings().contentSteering}function C(){return new Promise((function(e){try{var o,l,u=I();u&&u.serverUrl?(p=(c=u).serverUrl,n&&n.reloadUri&&(p=v.isRelative(n.reloadUri)?v.resolve(n.reloadUri,c.serverUrl):n.reloadUri),c=[],0<(m=i.baseUrl.all.concat(i.location.all)).length&&((m=m.map((function(e){var t=(t=e)&&r[t]&&0!==r[t].length?(t=r[t].reduce((function(e,t){return e+t}))/r[t].length,parseInt(t)):-1;return{serviceLocation:e,throughput:t}}))).sort((function(e,t){return t.throughput-e.throughput})),f=d="",m.forEach((function(e,t){0!==t&&(d="".concat(d,","),-1<e.throughput)&&(f="".concat(f,",")),d="".concat(d).concat(e.serviceLocation),-1<e.throughput&&(f="".concat(f).concat(e.throughput))})),c.push({key:"_DASH_pathway",value:'"'.concat(d,'"')}),c.push({key:"_DASH_throughput",value:f})),o=ht.A.addAditionalQueryParameterToUrl(p,c),l=new cn(o),s.load({request:l,success:function(t){t&&t[a.A.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(t[a.A.CONTENT_STEERING_RESPONSE.VERSION])&&((n=new dn).version=t[a.A.CONTENT_STEERING_RESPONSE.VERSION],t[a.A.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(t[a.A.CONTENT_STEERING_RESPONSE.TTL])&&(n.ttl=t[a.A.CONTENT_STEERING_RESPONSE.TTL]),t[a.A.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(n.reloadUri=t[a.A.CONTENT_STEERING_RESPONSE.RELOAD_URI]),t[a.A.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(n.pathwayPriority=t[a.A.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),t[a.A.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(n.pathwayClones=t[a.A.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],n.pathwayClones=n.pathwayClones.filter((function(e){return e[a.A.CONTENT_STEERING_RESPONSE.BASE_ID]&&e[a.A.CONTENT_STEERING_RESPONSE.ID]&&e[a.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&e[a.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][a.A.CONTENT_STEERING_RESPONSE.HOST]}))),D()),g.trigger(h.A.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:n,url:o}),e()},error:function(i,r,a,o){var s=i,l=o;try{switch(t.warn("Error fetching data from content steering server",s),l.status){case 410:break;case 429:var u=l&&l.getResponseHeader?l.getResponseHeader("retry-after"):null;null!==u&&((n=n||{}).ttl=parseInt(u)),D();break;default:D()}}catch(s){t.error(s)}e(i)},complete:function(){i.baseUrl.all=L(i.baseUrl),i.location.all=L(i.location)}})):e()}catch(l){e(l)}var c,d,f,p,m}))}function L(e){return e.all&&0!==e.all.length&&e.current?e.all.filter((function(t){return t===e.current})):[]}function P(e){try{var i=[];return e&&0!==e.length&&n&&n.pathwayClones&&0!==n.pathwayClones.length&&n.pathwayClones.forEach((function(t){var n,r=e.filter((function(e){return t[a.A.CONTENT_STEERING_RESPONSE.BASE_ID]===e.serviceLocation})),o=null;(o=r&&0<r.length?r[0]:o)&&(r=new URL(o.url),n=t[a.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][a.A.CONTENT_STEERING_RESPONSE.HOST],n=ht.A.stringHasProtocol(n)?n:"".concat(r.protocol,"//").concat(n),n={synthesizedUrl:"".concat(n).concat(r.pathname),serviceLocation:t[a.A.CONTENT_STEERING_RESPONSE.ID],queryParams:t[a.A.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][a.A.CONTENT_STEERING_RESPONSE.PARAMS],reference:o},i.push(n))})),i}catch(e){return t.error(e),[]}}function D(){n&&n.ttl&&!isNaN(n.ttl)&&(o&&clearTimeout(o),o=setTimeout((function(){C()}),1e3*n.ttl))}function k(){o&&clearTimeout(o),o=null}function x(){r={},i={baseUrl:{current:n=null,all:[]},location:{current:null,all:[]}},k()}return e={reset:function(){x(),g.off(h.A.FRAGMENT_LOADING_STARTED,A,e),g.off(h.A.MANIFEST_LOADING_STARTED,E,e),g.off(h.A.MANIFEST_LOADING_FINISHED,b,e),g.off(h.A.THROUGHPUT_MEASUREMENT_STORED,w,e)},setConfig:function(e){e&&(e.adapter&&(_=e.adapter),e.errHandler&&(l=e.errHandler),e.dashMetrics&&(u=e.dashMetrics),e.mediaPlayerModel&&(d=e.mediaPlayerModel),e.requestModifier&&(p=e.requestModifier),e.manifestModel&&(f=e.manifestModel),e.serviceDescriptionController&&(m=e.serviceDescriptionController),e.eventBus)&&(g=e.eventBus)},loadSteeringData:C,getCurrentSteeringResponseData:function(){return n},shouldQueryBeforeStart:function(){var e=I();return!!e&&e.queryBeforeStart},getSteeringDataFromManifest:I,stopSteeringRequestTimer:k,getSynthesizedBaseUrlElements:function(e){try{return P(e).map((function(e){var t=new xe(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t.dvbPriority=e.reference.dvbPriority,t.dvbWeight=e.reference.dvbWeight,t.availabilityTimeOffset=e.reference.availabilityTimeOffset,t.availabilityTimeComplete=e.reference.availabilityTimeComplete,t}))}catch(e){return t.error(e),[]}},getSynthesizedLocationElements:function(e){try{return P(e).map((function(e){var t=new $e(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t}))}catch(e){return t.error(e),[]}},initialize:function(){s=Nt(y).create({errHandler:l,dashMetrics:u,mediaPlayerModel:d,requestModifier:p,errors:T}),g.on(h.A.FRAGMENT_LOADING_STARTED,A,e),g.on(h.A.MANIFEST_LOADING_STARTED,E,e),g.on(h.A.MANIFEST_LOADING_FINISHED,b,e),g.on(h.A.THROUGHPUT_MEASUREMENT_STORED,w,e)}},t=(0,c.A)(y).getInstance().getLogger(e),x(),e}fn.__dashjs_factory_name="ContentSteeringController";var pn=u.A.getSingletonFactory(fn);function mn(){var e=this.context,t=(0,S.A)(e).getInstance(),n={select:function(e){var n,a,o;return e&&0!==e.length?(n=null,t.get().streaming.applyContentSteering&&(a=e,n=(o=r.getCurrentSteeringResponseData())&&o.pathwayPriority&&0<o.pathwayPriority.length?function(e,t){for(var n=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:[],a=0,o=null;a<n.length&&!function(){var e=n[a],t=r.findIndex((function(t){return t.serviceLocation&&t.serviceLocation===e}));if(-1!==t&&!i.contains(r[t].serviceLocation))return o=r[t],1;a+=1}(););return o}(o.pathwayPriority,a):null),n||e[0]):null},setConfig:function(e){e.blacklistController&&(i=e.blacklistController),e.contentSteeringController&&(r=e.contentSteeringController)},reset:function(){i.reset()}},i=an(e).create({updateEventName:l.A.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.A.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),r=pn(e).getInstance();return n}mn.__dashjs_factory_name="LocationSelector";var gn=u.A.getClassFactory(mn);function _n(){var e,t,n,i,r,o,u,d,f,p,m,g,_,y,v=this.context,A=(0,s.A)(v).getInstance(),E=(0,K.A)(v).getInstance();function b(){n=NaN,o=!(r=!(u=!1)),w()}function w(){null!==i&&(clearTimeout(i),i=null)}function S(e){w(),o||(isNaN(e)&&!isNaN(n)&&(e=1e3*n),isNaN(e))||(t.debug("Refresh manifest in "+e+" milliseconds."),i=setTimeout(C,e))}function R(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=(u=!0,f.getValue()),n=t.url,i=null,r=m.getPatchLocation(t),a=null;(r=p.select(r))&&!e?(n=r.url,i=r.serviceLocation,a=r.queryParams):(e=m.getLocation(t),r=_.getSynthesizedLocationElements(e),e=e.concat(r),(r=p.select(e))&&(n=r.url,i=r.serviceLocation,a=r.queryParams)),E.isRelative(n)&&(n=E.resolve(n,t.url)),d.load(n,i,a)}function I(e){if(e){if(m.getIsPatch(e)){var i=e,s=(e=f.getValue(),m.isPatchValid(e,i)),c=s;if(s&&(s=m.getPublishTime(e),c=m.applyPatchToManifest(e,i),i=m.getPublishTime(e),c=s.getTime()!=i.getTime()),!c)return t.debug("Patch provided is invalid, performing full manifest refresh"),R(!0);e.loadedTime=new Date}}else(e=f.getValue()).loadedTime=new Date;if(f.getValue()&&f.getValue().type===a.A.DYNAMIC&&e.type===a.A.STATIC)return A.trigger(l.A.DYNAMIC_TO_STATIC),o=!(u=!1);f.setValue(e),i=((s=new Date).getTime()-e.loadedTime.getTime())/1e3,2147483647<1e3*(n=m.getManifestUpdatePeriod(e,i))&&(n=2147483.647),A.trigger(l.A.MANIFEST_UPDATED,{manifest:e}),t.info("Manifest has been refreshed at "+s+"["+s.getTime()/1e3+"] "),r||S()}function C(){r||(u?S(y.get().streaming.manifestUpdateRetryInterval):R())}function L(e){e.error?e.error.code===T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&g.error(e.error):I(e.manifest)}function P(){r=!1,S()}function D(){(r=!y.get().streaming.scheduling.scheduleWhilePaused)&&w()}function k(){u=!1}return e={initialize:function(){b(),A.on(l.A.STREAMS_COMPOSED,k,this),A.on(h.A.PLAYBACK_STARTED,P,this),A.on(h.A.PLAYBACK_PAUSED,D,this),A.on(l.A.INTERNAL_MANIFEST_LOADED,L,this)},setManifest:function(e){I(e)},refreshManifest:R,getIsUpdating:function(){return u},setConfig:function(e){e&&(e.manifestModel&&(f=e.manifestModel),e.adapter&&(m=e.adapter),e.manifestLoader&&(d=e.manifestLoader),e.errHandler&&(g=e.errHandler),e.locationSelector&&(p=e.locationSelector),e.settings&&(y=e.settings),e.contentSteeringController)&&(_=e.contentSteeringController)},reset:function(){A.off(h.A.PLAYBACK_STARTED,P,this),A.off(h.A.PLAYBACK_PAUSED,D,this),A.off(l.A.STREAMS_COMPOSED,k,this),A.off(l.A.INTERNAL_MANIFEST_LOADED,L,this),b()}},t=(0,c.A)(v).getInstance().getLogger(e),p=gn(v).create(),e}_n.__dashjs_factory_name="ManifestUpdater";var yn=u.A.getClassFactory(_n);function vn(){var e,t,n,i,r,a,o,u,h,d,f,p,m,g,_,y,A=this.context,E=(0,s.A)(A).getInstance(),b=(0,K.A)(A).getInstance();function w(){u=[],m=f=d=null,p=NaN,i=n=!(h=[]),g=r.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function S(){!r.get().streaming.utcSynchronization.enabled||n||i||!m||!m.value||!m.schemeIdUri||isNaN(p)||isNaN(r.get().streaming.utcSynchronization.backgroundAttempts)||f&&(Date.now()-f)/1e3<30||(u=[],i=!0,function e(t){try{var n;t<=0?F():(n=Date.now(),a[m.schemeIdUri](m.value,(function(i){var r=Date.now();r=I(n,r,i),u.push(r),e(t-1)}),(function(){F()})))}catch(t){F()}}(isNaN(r.get().streaming.utcSynchronization.backgroundAttempts)?2:r.get().streaming.utcSynchronization.backgroundAttempts))}function I(e,t,n){return n-(t-(t-e)/2)}function C(e){e=0<arguments.length&&void 0!==e?e:NaN;var t,n=isNaN(e);n&&r.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?(t=null!==(t=o.getLatestMPDRequestHeaderValueByID("Date"))?new Date(t).getTime():Number.NaN,isNaN(t)?N(!0):N(!1,t-Date.now())):N(n,e)}function L(e){var t,n,i=Date.parse(e);return isNaN(i)&&(e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),n=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&(parseInt(e[6],10)||0),e[7]&&1e3*parseFloat(e[7])||0),e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),n+=("+"===e[8]?-1:1)*t*60*1e3),i=new Date(n).getTime()),i}function P(e){return Date.parse(e)}function D(e){return Date.parse(e)}function k(e,t,n){n()}function x(e,t,n){e=L(e),isNaN(e)?n():t(e)}function M(e,t,n,i,r){var a,o,s,l=!1,u=new XMLHttpRequest,c=r?R.G.HEAD:R.G.GET,h=t.match(/\S+/g);t=h.shift(),a=function(){l||(l=!0,h.length?M(e,h.join(" "),n,i,r):i())},o=function(){var t;200===u.status&&(t=r?u.getResponseHeader("Date"):u.response,t=e(t),isNaN(t)||(n(t),l=!0))},b.isRelative(t)&&(s=y.resolve())&&(t=b.resolve(t,s.url)),u.open(c,t),u.timeout=5e3,u.onload=o,u.onloadend=a,u.send()}function O(e,t,n){M(D,e,t,n,!0)}function N(e,i){if(!(isNaN(p)||isNaN(i)||e)){var a=i;try{var o,s=B(a),u=isNaN(g)?30:g,c=isNaN(r.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:r.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,h=isNaN(r.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:r.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,f=isNaN(r.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:r.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;s?(o=Math.min(u*c,h),t.debug("Increasing timeBetweenSyncAttempts to ".concat(o))):(o=Math.max(u/c,f),t.debug("Decreasing timeBetweenSyncAttempts to ".concat(o))),g=o}catch(a){}}e||isNaN(i)||(d=Date.now(),n=!1,s=isNaN(p),p=i,s&&S(),t.debug("Completed UTC sync. Setting client - server offset to ".concat(i))),e&&(m=null,n=!1,_.error(new v.A(T.TIME_SYNC_FAILED_ERROR_CODE,T.TIME_SYNC_FAILED_ERROR_MESSAGE))),E.trigger(l.A.UPDATE_TIME_SYNC_OFFSET,{offset:i}),E.trigger(l.A.TIME_SYNCHRONIZATION_COMPLETED)}function F(){var e;u&&0!==u.length&&(B(e=u.reduce((function(e,t){return e+t}),0)/u.length)?t.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(t.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),p=e,E.trigger(l.A.UPDATE_TIME_SYNC_OFFSET,{offset:p})),i=!1,f=Date.now())}function B(e){try{var t;return!!isNaN(p)||(t=r.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(r.get().streaming.utcSynchronization.maximumAllowedDrift)?r.get().streaming.utcSynchronization.maximumAllowedDrift:100,p-t<=e&&e<=p+t)}catch(e){return!0}}return e={initialize:function(){w(),a={"urn:mpeg:dash:utc:http-head:2014":O,"urn:mpeg:dash:utc:http-xsdate:2014":M.bind(null,L),"urn:mpeg:dash:utc:http-iso:2014":M.bind(null,P),"urn:mpeg:dash:utc:direct:2014":x,"urn:mpeg:dash:utc:http-head:2012":O,"urn:mpeg:dash:utc:http-xsdate:2012":M.bind(null,L),"urn:mpeg:dash:utc:http-iso:2012":M.bind(null,P),"urn:mpeg:dash:utc:direct:2012":x,"urn:mpeg:dash:utc:http-ntp:2014":k,"urn:mpeg:dash:utc:ntp:2014":k,"urn:mpeg:dash:utc:sntp:2014":k}},attemptSync:function(e,t){h=e,n||(function(e){try{var t;if(e&&r.get().streaming.utcSynchronization.enabled)return t=isNaN(g)?30:g,!d||!t||isNaN(t)||(Date.now()-d)/1e3>=t}catch(e){return 1}}(t)?(n=!0,function e(t){var n,i,r=(0<arguments.length&&void 0!==t?t:null)||0;!h||0===h.length||r>=h.length||!(n=h[r])?C():a.hasOwnProperty(n.schemeIdUri)?(i=(new Date).getTime(),a[n.schemeIdUri](n.value,(function(e){var t=(new Date).getTime();t=I(i,t,e),m=n,C(t)}),(function(){e(r+1)}))):e(r+1)}()):E.trigger(l.A.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(o=e.dashMetrics),e.baseURLController&&(y=e.baseURLController),e.errHandler&&(_=e.errHandler),e.settings)&&(r=e.settings)},reset:function(){w(),E.off(l.A.ATTEMPT_BACKGROUND_SYNC,S,e)}},t=(0,c.A)(A).getInstance().getLogger(e),E.on(l.A.ATTEMPT_BACKGROUND_SYNC,S,e),e}vn.__dashjs_factory_name="TimeSyncController";var An=u.A.getSingletonFactory(vn),En=(An.HTTP_TIMEOUT_MS=5e3,u.A.updateSingletonFactory(vn.__dashjs_factory_name,An),An);function bn(){var e,t,n,i=this.context,r=(0,s.A)(i).getInstance(),a={attachMediaSource:function(t){var i=window.URL.createObjectURL(e);return t.setSource(i),"managedMediaSource"===n&&(t.setDisableRemotePlayback(!0),e.addEventListener("startstreaming",(function(){r.trigger(h.A.MANAGED_MEDIA_SOURCE_START_STREAMING)})),e.addEventListener("endstreaming",(function(){r.trigger(h.A.MANAGED_MEDIA_SOURCE_END_STREAMING)}))),i},createMediaSource:function(){var t="WebKitMediaSource"in window,i="MediaSource"in window;return"ManagedMediaSource"in window?(e=new ManagedMediaSource,n="managedMediaSource",o.info("Created ManagedMediaSource")):i?(e=new MediaSource,n="mediaSource",o.info("Created MediaSource")):t&&(e=new WebKitMediaSource,o.info("Created WebkitMediaSource")),e},detachMediaSource:function(e){e.setSource(null)},setConfig:function(e){e&&e.settings&&(t=e.settings)},setDuration:function n(i){!e||"open"!==e.readyState||null===i&&isNaN(i)||e.duration!==i&&(i!==1/0||t.get().streaming.buffer.mediaSourceDurationInfinity||(i=Math.pow(2,32)),function(){for(var t=e.sourceBuffers,n=0;n<t.length;n++)if(t[n].updating)return 1}()?setTimeout(n.bind(null,i),50):(o.info("Set MediaSource duration:"+i),e.duration=i))},setSeekable:function(t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,n=0;n<t.length;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}o.info("call to mediaSource endOfStream"),e.endOfStream()}}},o=(0,c.A)(i).getInstance().getLogger(a);return a}bn.__dashjs_factory_name="MediaSourceController";var wn=u.A.getSingletonFactory(bn);function Tn(){var e,t,n,i,r,a,o,l,u,d,f,p="urn:mpeg:dash:event:2012",m=1,g="urn:mpeg:dash:event:callback:2015",_=1,y="updated",v="added",A=this.context,E=(0,s.A)(A).getInstance();function b(){if(!o||!l)throw new Error("setConfig function has to be called previously")}function w(){f=!1,n={},r=null,d=!(i={}),a=Date.now()/1e3}function T(){try{var e,r;d||(d=!0,r=(e=l.getTime())-a,r=0<a?Math.max(0,r):0,S(i,r,e),S(n,r,e),R(i),R(n),a=e,d=!1)}catch(e){d=!1,t.error(e)}}function S(e,n,i){try{L(e,(function(r){if(void 0!==r){var a=isNaN(r.duration)?0:r.duration;if(r.calculatedPresentationTime<=i&&r.calculatedPresentationTime+n+a>=i)D(r,h.A.EVENT_MODE_ON_START);else if(P(i,a+n,r.calculatedPresentationTime)||function(e){try{var n=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>n}catch(e){return t.error(e),0}}(r)){t.debug("Removing event ".concat(r.id," from period ").concat(r.eventStream.period.id," as it is expired or invalid"));var o=e;a=r;try{var s=a.eventStream.schemeIdUri,l=a.eventStream.period.id,u=a.eventStream.value,c=a.id;o[l][s]=o[l][s].filter((function(e){return u&&e.eventStream.value&&e.eventStream.value!==u||e.id!==c})),0===o[l][s].length&&delete o[l][s]}catch(o){t.error(o)}}}}))}catch(e){t.error(e)}}function R(e){try{for(var n in e)e.hasOwnProperty(n)&&0===Object.keys(e[n]).length&&delete e[n]}catch(e){t.error(e)}}function I(e,t,n){n=2<arguments.length&&void 0!==n&&n;var i=e.eventStream.schemeIdUri,r=e.eventStream.value,a=e.id,o="discarded",s=(t[i]||(t[i]=[]),t[i].findIndex((function(e){return(!r||e.eventStream.value&&e.eventStream.value===r)&&e.id===a})));return-1===s?(t[i].push(e),e.triggeredReceivedEvent=!1,e.triggeredStartEvent=!1,o=v):n&&(n=t[i][s],e.triggeredReceivedEvent=n.triggeredReceivedEvent,e.triggeredStartEvent=n.triggeredStartEvent,t[i][s]=e,o=y),o}function C(e){try{var n=l.getTime();L(e,(function(e){var t=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.duration)?e.eventStream.period.duration:NaN,i=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.start)?e.eventStream.period.start:NaN;isNaN(t)||isNaN(i)||(t=e.calculatedPresentationTime,Math.abs(t-n)<300&&D(e,h.A.EVENT_MODE_ON_START))}))}catch(e){t.error(e)}}function L(e,n){try{if(e)for(var i=Object.keys(e),r=0;r<i.length;r++)for(var a=e[i[r]],o=Object.keys(a),s=0;s<o.length;s++)a[o[s]].forEach((function(e){void 0!==e&&n(e)}))}catch(e){t.error(e)}}function P(e,n,i){try{return i<e-n}catch(e){return t.error(e),0}}function D(e,n){try{var i=l.getTime(),r=e.id;if(n===h.A.EVENT_MODE_ON_RECEIVE&&!e.triggeredReceivedEvent)return t.debug("Received event ".concat(r)),e.triggeredReceivedEvent=!0,E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:n});if(!e.triggeredStartEvent){if(e.eventStream.schemeIdUri===p&&e.eventStream.value==m){if(0!==e.duration||0!==e.presentationTimeDelta){t.debug("Starting manifest refresh event ".concat(r," at ").concat(i));try{b(),o.refreshManifest()}catch(e){t.error(e)}}}else if(e.eventStream.schemeIdUri===g&&e.eventStream.value==_){t.debug("Starting callback event ".concat(r," at ").concat(i));var a=e.messageData;try{(0,le.A)(A).create({}).load({method:"get",url:a,request:{responseType:"arraybuffer"}})}catch(a){t.error(a)}}else t.debug("Starting event ".concat(r," from period ").concat(e.eventStream.period.id," at ").concat(i)),E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:n});e.triggeredStartEvent=!0}}catch(e){t.error(e)}}return e={addInlineEvents:function(e,i){try{if(b(),n[i]||(n[i]={}),e)for(var r=0;r<e.length;r++){var a,o=e[r];P(l.getTime(),isNaN(o.duration)?0:o.duration,o.calculatedPresentationTime)||((a=I(o,n[i],!0))===v?(t.debug("Added inline event with id ".concat(o.id," from period ").concat(i)),D(o,h.A.EVENT_MODE_ON_RECEIVE)):a===y&&t.debug("Updated inline event with id ".concat(o.id," from period ").concat(i)))}}catch(e){throw e}},addInbandEvents:function(e,n){try{b(),i[n]||(i[n]={});for(var r=0;r<e.length;r++){var a,o,s=e[r];if(!P(l.getTime(),isNaN(s.duration)?0:s.duration,s.calculatedPresentationTime))if(I(s,i[n],!1)===v){if(s.eventStream.schemeIdUri===p){o=void 0,a=void 0;var u=s;try{u.eventStream.value==m&&(a=u.calculatedPresentationTime,o=4294967295==u.calculatedPresentationTime?NaN:u.calculatedPresentationTime+u.duration,E.trigger(h.A.MANIFEST_VALIDITY_CHANGED,{id:u.id,validUntil:a,newDuration:o,newManifestValidAfter:NaN},{mode:h.A.EVENT_MODE_ON_START}))}catch(u){t.error(u)}}t.debug("Added inband event with id ".concat(s.id," from period ").concat(n)),D(s,h.A.EVENT_MODE_ON_RECEIVE)}else t.debug("Inband event with scheme_id_uri ".concat(s.eventStream.schemeIdUri,", value ").concat(s.eventStream.value,", period id ").concat(n," and event id ").concat(s.id," was ignored because it has been added before."))}T()}catch(e){throw e}},getInbandEvents:function(){return i},getInlineEvents:function(){return n},start:function(){try{b(),t.debug("Start Event Controller");var e=u.get().streaming.eventControllerRefreshDelay;f||isNaN(e)||(f=!0,r=setInterval(T,e))}catch(e){throw e}},setConfig:function(e){try{e&&(e.manifestUpdater&&(o=e.manifestUpdater),e.playbackController&&(l=e.playbackController),e.settings)&&(u=e.settings)}catch(e){throw e}},reset:function(){try{if(null!==r&&f){clearInterval(r),r=null,f=!1;try{C(i),C(n)}catch(e){t.error(e)}}}catch(e){throw e}w()}},t=(0,c.A)(A).getInstance().getLogger(e),w(),e}Tn.__dashjs_factory_name="EventController";var Sn=u.A.getSingletonFactory(Tn),Rn={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Cn(){var e,t,n,i,a,u,d,f,p,m,g,_,y,A,E,b,w,S,R,I,C,L,P,D,x,M,O,N,F,B,U,j,G,V,H,Y,z,W,K,q,Q,X,J,ee,te,ne,ie,re,ae=this.context,oe=(0,s.A)(ae).getInstance();function se(){if(!(u&&u.hasOwnProperty("load")&&C&&C.hasOwnProperty("initialize")&&C.hasOwnProperty("reset")&&C.hasOwnProperty("getClientTimeOffset")&&d&&I&&p&&G))throw new Error(r.A.MISSING_CONFIG_ERROR)}function le(){try{var e=f.getStreamsInfo();if(!P&&0===e.length)throw new Error("There are no periods in the MPD");P&&0<e.length&&p.updateManifestUpdateInfo({currentTime:G.getTime(),buffered:j.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:C.getClientTimeOffset()}),0<L.length&&(0!==(m=e).length?L=L.filter((function(e){var n=0<m.filter((function(t){return t.id===e.getId()})).length||e.getId()===P.getId();return n||(t.debug("Removing stream ".concat(e.getId())),e.reset(!0)),n})):t.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."));for(var r=[],o=0,s=e.length;o<s;o++){var u=e[o];r.push((h=void 0,(h=Ye((c=u).id))?h.updateData(c):(h=ln(ae).create({manifestModel:d,mediaPlayerModel:H,dashMetrics:p,manifestUpdater:a,adapter:f,timelineConverter:C,capabilities:n,capabilitiesFilter:i,errHandler:I,baseURLController:y,segmentBaseController:A,textController:x,abrController:b,playbackController:G,eventController:S,mediaController:w,protectionController:D,videoModel:j,streamInfo:c,settings:ee}),L.push(h),h.initialize(),Promise.resolve()))),p.addManifestUpdateStreamInfo(u)}Promise.all(r).then((function(){return new Promise((function(n,i){P?n():function e(n,i,r){try{Ae();var a,o,s,u=p.getCurrentDVRInfo().range;u.end<u.start?(ne&&clearTimeout(ne),a=Math.min(1e3*(-1*(u.end-u.start)+2),2147483647),t.debug("Waiting for ".concat(a," ms before playback can start")),oe.trigger(l.A.AST_IN_FUTURE,{delay:a}),ne=setTimeout((function(){e(n,i,r)}),a)):(ee.get().streaming.applyProducerReferenceTime&&V.calculateProducerReferenceTimeOffsets(n),o=n[0].manifestInfo,ee.get().streaming.applyServiceDescription&&V.applyServiceDescription(o),f.getIsDynamic()&&(s=Ne(n,o),G.computeAndSetLiveDelay(s,o)),(ee.get().streaming.applyContentSteering&&_.shouldQueryBeforeStart()?_.loadSteeringData():Promise.resolve()).then((function(){var e=d.getValue();e&&y.update(e),ce(),i()})).catch((function(e){t.error(e),ce(),i()})))}catch(n){r(n)}}(e,n,i)}))})).then((function(){oe.trigger(l.A.STREAMS_COMPOSED),Ce()})).catch((function(e){throw e}))}catch(e){I.error(new v.A(T.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+" nostreamscomposed",d.getValue())),B=!0,Ke()}var c,h,m}function ue(){te=!0}function ce(){f.getIsDynamic()?(i=((e=p.getCurrentDVRInfo())&&e.range?e.range.end:0)-G.getOriginalLiveDelay(),(e=e?e.range:null)&&(isNaN(ie)&&-1===ie.toString().indexOf("posix:")?(n=xe(!0),isNaN(n)||(t.info("Start time from URI parameters: ".concat(n)),i=Math.min(i,n))):(t.info("Start time provided by the app: ".concat(ie)),n=Me(!0,ie),isNaN(n)||(i=Math.min(i,n))),n=ee.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0,i=Math.max(i,e.start+n))):(i=L[0].getStreamInfo().start,isNaN(ie)?(e=xe(!1),isNaN(e)||(t.info("Start time from URI parameters: ".concat(e)),i=Math.max(i,e))):(t.info("Start time provided by the app: ".concat(ie)),n=Me(!1,ie),isNaN(n)||(i=Math.max(i,n))));var e=i,n=ve(e),i=null!==n?n:L[0];oe.trigger(l.A.INITIAL_STREAM_SWITCH,{startTime:e}),he(i,null,e),q=q||setInterval((function(){!N&&G.getTimeToStreamEnd()<=0&&!G.isSeeking()&&oe.trigger(l.A.PLAYBACK_ENDED,{isLast:He().isLast})}),200)}function he(e,n,i){try{var r;N||!e||n===e&&e.getIsActive()||(N=!0,oe.trigger(l.A.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),r=!1,P=e,n&&(r=ye(e,n),n.deactivate(r)),i=isNaN(i)?!r&&n?e.getStreamInfo().start:NaN:i,t.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(i,", current playback time is ").concat(G.getTime(),". Seamless period switch is set to ").concat(r)),X=X.filter((function(e){return e.getId()!==P.getId()})),G.initialize(He(),!!n),j.getElement()?de(i,r,!1):fe(i,r))}catch(e){N=!1}}function de(e,n,i){var r,a=2<arguments.length&&void 0!==i&&i;function o(){var i;U&&"open"===U.readyState&&(t.debug("MediaSource is open!"),window.URL.revokeObjectURL(r),U.removeEventListener("sourceopen",o),U.removeEventListener("webkitsourceopen",o),ke(),i=p.getCurrentDVRInfo(),m.setSeekable(i.range.start,i.range.end),a?(isNaN(e)||G.seek(e,!0,!0),P.setMediaSource(U).then((function(){P.initializeForTextWithMediaSource(U)}))):fe(e,n))}function s(){U.addEventListener("sourceopen",o,!1),U.addEventListener("webkitsourceopen",o,!1),r=m.attachMediaSource(j),t.debug("MediaSource attached to element.  Waiting on open...")}U?n?fe(e,n):(m.detachMediaSource(j),s()):(U=m.createMediaSource(),s())}function fe(e,t){P.activate(U,t?Q:void 0,e).then((function(t){var n;t&&(0<(n=Object.keys(t)).length&&t[n[0]].getBuffer().changeType&&(J=!0),Q=t),isNaN(e)||(oe.trigger(l.A.SEEK_TARGET,{time:e},{streamId:P.getId()}),G.seek(e,!1,!0),P.startScheduleControllers()),N=!1,oe.trigger(l.A.PERIOD_SWITCH_COMPLETED,{toStreamInfo:He()})}))}function pe(e){var t,n,i,r,a=ve(e.seekTime);a&&a!==P?(me(),i=a,r=(n=e)&&!isNaN(n.seekTime)?n.seekTime:NaN,a=P.getProcessors().map((function(e){return e.prepareOuterPeriodPlaybackSeeking(n)})),Promise.all(a).then((function(){he(i,P,r)})).catch((function(e){I.error(e)}))):(me(),t=e,P.getProcessors().forEach((function(e){return e.prepareInnerPeriodPlaybackSeeking(t)})),je($.USER_REQUEST_STOP_REASON)),Ge(Z.SEEK_START_REASON)}function me(){ge()}function ge(){X&&0<X.length&&(X.forEach((function(e){e.deactivate(!0)})),X=[])}function _e(e){var t;e.newMediaInfo.streamInfo.id===P.getId()&&(ge(),ee.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&e.oldMediaInfo&&e.oldMediaInfo.codec!==e.newMediaInfo.codec?(t=G.getTime(),P.deactivate(!1),de(t,!1,!1)):P.prepareTrackChange(e))}function ye(e,t){try{return ee.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||te)&&(J&&ee.get().streaming.buffer.useChangeTypeForTrackSwitch||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function ve(e){if(!isNaN(e))for(var t=L.length,n=0;n<t;n++){var i=L[n];if(e<parseFloat((i.getStartTime()+i.getDuration()).toFixed(5)))return i}return null}function Ae(){try{var e=f.getIsDynamic(),t=f.getStreamsInfo()[0].manifestInfo,n=G.getTime(),i=C.calcTimeShiftBufferWindow(L,e),a=Pe();void 0!==i.start&&void 0!==i.end&&(a&&0!==a.length?a.forEach((function(e){p.addDVRInfo(e.getType(),n,t,i)})):p.addDVRInfo(r.A.VIDEO,n,t,i))}catch(e){}}function Ee(e){var t,n;W&&O&&(t=H.getInitialBufferLevel(),n=[r.A.TEXT],isNaN(t)||t<=G.getBufferLevel(n)||f.getIsDynamic()&&t>G.getLiveDelay())&&(W=!1,Ge(Z.INITIAL_PLAYOUT_START_REASON),G.play()),e&&e.mediaType&&p.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function be(e){e.streamInfo.id===P.getId()&&e.reason&&e.reason.forceReplace&&ge(),Ye(e.streamInfo.id).prepareQualityChange(e)}function we(){var e,t;f.getIsDynamic()&&0!==G.getOriginalLiveDelay()&&P&&0<(e=f.getStreamsInfo()).length&&(t=Ne(e,e=e[0].manifestInfo),G.computeAndSetLiveDelay(t,e))}function Te(){var e;Be()&&(e=j.getPlaybackQuality())&&p.addDroppedFrames(e)}function Se(){t.debug("[onPlaybackStarted]"),!W&&z&&Ge(Z.RESUME_FROM_PAUSE_START_REASON),W=W&&!1,K&&(K=!1,ee.get().streaming.applyContentSteering)&&!_.shouldQueryBeforeStart()&&_.loadSteeringData(),z=!1}function Re(e){t.debug("[onPlaybackPaused]"),e.ended||(z=!0,je($.USER_REQUEST_STOP_REASON))}function Ie(e){t.debug("Stream with id ".concat(e.streamInfo.id," finished buffering")),e=e.streamInfo.isLast,U&&e?(t.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),m.signalEndOfStream(U)):Ce()}function Ce(){if(P&&P.getHasFinishedBuffering())for(var e=function(e){var t=0<arguments.length&&void 0!==e?e:null;try{var n,i=t||P||null;if(i)return n=i.getStreamInfo(),L.filter((function(e){return(e=e.getStreamInfo()).start>n.start&&n.id!==e.id}))}catch(t){return[]}}(P),t=0;t<e.length;){var n=e[t],i=0===t?P:e[t-1];!n.getPreloaded()&&i.getHasFinishedBuffering()&&U&&function(e,t){t=1<arguments.length&&void 0!==t?t:null,U&&!e.getPreloaded()&&ye(e,t)&&e.startPreloading(U,Q).then((function(){X.push(e)}))}(n,i),t+=1}}function Le(){q&&(clearInterval(q),q=null)}function Pe(){return P?P.getProcessors():[]}function De(e){var n;P&&!P.getIsEndedEventSignaled()&&(P.setIsEndedEventSignaled(!0),(n=function(e){if(!(e=(0<arguments.length&&void 0!==e?e:null)||P||null))return null;for(var t=e.getStreamInfo(),n=t.start,i=0,r=-1,a=NaN;i<L.length;){var o=L[i].getStreamInfo(),s=o.start-n;0<s&&(isNaN(a)||s<a)&&t.id!==o.id&&(a=s,r=i),i+=1}return 0<=r?L[r]:null}())?(t.debug("StreamController onEnded, found next stream with id ".concat(n.getStreamInfo().id,". Switching from ").concat(P.getStreamInfo().id," to ").concat(n.getStreamInfo().id)),he(n,P,NaN)):(t.debug("StreamController no next stream found"),P.setIsEndedEventSignaled(!1)),je(n?$.END_OF_PERIOD_STOP_REASON:$.END_OF_CONTENT_STOP_REASON)),e&&e.isLast&&(Le(),_.stopSteeringRequestTimer())}function ke(e){e=e||He().manifestInfo.duration,m.setDuration(e)}function xe(e){var t,n=E.getURIFragmentData();return n&&n.t?(t=L[0].getStreamInfo().start,n.t=n.t.split(",")[0],Oe(e,n.t,t)):NaN}function Me(e,t){var n=0;return Oe(e,t,n=e?n:L[0].getStreamInfo().start)}function Oe(e,t,n){var i=f.getRegularPeriods()[0],r=-1!==(t=t.toString()).indexOf("posix:")?"now"===t.substring(6)?Date.now()/1e3:parseFloat(t.substring(6)):NaN;return e&&!isNaN(r)?C.calcPresentationTimeFromWallTime(new Date(1e3*r),i):parseFloat(t)+n}function Ne(e,t){try{var n,i,a=NaN;return t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration)?t.maxFragmentDuration:(e&&1===e.length&&(n=e[0],i=[r.A.VIDEO,r.A.AUDIO,r.A.TEXT].reduce((function(e,t){return(t=f.getMediaInfoForType(n,t))&&!1!==t.isFragmented&&e.push(t),e}),[]).reduce((function(e,t){return(t=f.getVoRepresentations(t))&&0<t.length&&t.forEach((function(t){t&&e.push(t)})),e}),[]).reduce((function(e,t){return(t=f.convertRepresentationToRepresentationInfo(t))&&t.fragmentDuration&&!isNaN(t.fragmentDuration)&&e.push(t.fragmentDuration),e}),[]),a=Math.max.apply(Math,function(e){if(Array.isArray(e))return In(e)}(o=i)||function(){if("undefined"!=typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}()||function(e){var t;if(e)return"string"==typeof e?In(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?In(e,void 0):void 0}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),isFinite(a)?a:NaN)}catch(e){return NaN}var o}function Fe(e){var n,r;e.error?(B=!0,Ke()):(t.info("Manifest updated... updating data system wide."),n=e.manifest,f.updatePeriods(n),e=f.getUTCTimingSources(),!f.getIsDynamic()||e&&0!==e.length||oe.trigger(h.A.CONFORMANCE_VIOLATION,{level:Rn.LEVELS.WARNING,event:Rn.EVENTS.NO_UTC_TIMING_ELEMENT}),r=f.getIsDynamic()?e.concat(Y.getUTCTimingSources()):e,i.filterUnsupportedFeatures(n).then((function(){y.initialize(n),g.attemptSync(r,f.getIsDynamic())})))}function Be(){return!!P&&P.getHasVideoTrack()}function Ue(){return!!P&&P.getHasAudioTrack()}function je(e,t){t=t||new Date,Pe().forEach((function(n){n.finalisePlayList(t,e)})),p.addPlayList()}function Ge(e){p.createPlaylistMetrics(1e3*G.getTime(),e)}function Ve(e){if(e.error){var n="";switch(e.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE",re.counts.mediaErrorDecode+=1;break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}"MEDIA_ERR_DECODE"===n&&ee.get().errors.recoverAttempts.mediaErrorDecode>=re.counts.mediaErrorDecode?(t.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource"),i=G.getTime(),P.deactivate(!1),t.warn("MediaSource has been resetted. Resuming playback from time ".concat(i)),de(i,!1,!1)):(F=!0,e.error.message&&(n+=" ("+e.error.message+")"),e.error.msExtendedCode&&(n+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),t.fatal("Video Element Error: "+n),e.error&&t.fatal(e.error),I.error(new v.A(e.error.code,n)),Ke())}var i}function He(){return P?P.getStreamInfo():null}function Ye(e){for(var t=0,n=L.length;t<n;t++)if(L[t].getId()===e)return L[t];return null}function ze(e){isNaN(e.newDuration)||ke(e.newDuration)}function We(){ie=NaN,J=te=!(O=!(z=!(K=W=!(B=F=N=!(L=[]))))),X=[],ne=q=P=D=null,re={counts:{mediaErrorDecode:0}}}function Ke(){se(),g.reset(),je(F||B?$.FAILURE_STOP_REASON:$.USER_REQUEST_STOP_REASON);for(var t=0,n=L?L.length:0;t<n;t++)L[t].reset(F);oe.off(h.A.PLAYBACK_TIME_UPDATED,Te,e),oe.off(h.A.PLAYBACK_SEEKING,pe,e),oe.off(h.A.PLAYBACK_ERROR,Ve,e),oe.off(h.A.PLAYBACK_STARTED,Se,e),oe.off(h.A.PLAYBACK_PAUSED,Re,e),oe.off(h.A.PLAYBACK_ENDED,De,e),oe.off(h.A.METRIC_ADDED,qe,e),oe.off(h.A.MANIFEST_VALIDITY_CHANGED,ze,e),oe.off(h.A.BUFFER_LEVEL_UPDATED,Ee,e),oe.off(h.A.QUALITY_CHANGE_REQUESTED,be,e),l.A.KEY_SESSION_UPDATED&&oe.off(l.A.KEY_SESSION_UPDATED,ue,e),oe.off(l.A.MANIFEST_UPDATED,Fe,e),oe.off(l.A.STREAM_BUFFERING_COMPLETED,Ie,e),oe.off(l.A.TIME_SYNCHRONIZATION_COMPLETED,le,e),oe.off(l.A.CURRENT_TRACK_CHANGED,_e,e),oe.off(l.A.SETTING_UPDATED_LIVE_DELAY,we,e),oe.off(l.A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,we,e),y.reset(),a.reset(),S.reset(),p.clearAllCurrentMetrics(),d.setValue(null),u.reset(),C.reset(),R.reset(),U&&(m.detachMediaSource(j),U=null),j=null,D&&(M=D=null,d.getValue())&&oe.trigger(l.A.PROTECTION_DESTROYED,{data:d.getValue().url}),Le(),oe.trigger(l.A.STREAM_TEARDOWN_COMPLETE),We()}function qe(e){var t;e.metric===o.A.DVR_INFO&&(t=Ue()?r.A.AUDIO:r.A.VIDEO,e.mediaType===t)&&m.setSeekable(e.value.range.start,e.value.range.end)}return e={initialize:function(t,n){se(),O=t,M=n,C.initialize(),(a=yn(ae).create()).setConfig({manifestModel:d,adapter:f,manifestLoader:u,errHandler:I,settings:ee,contentSteeringController:_}),a.initialize(),(S=Sn(ae).getInstance()).setConfig({manifestUpdater:a,playbackController:G,settings:ee}),S.start(),g.setConfig({dashMetrics:p,baseURLController:y,errHandler:I,settings:ee}),g.initialize(),m.setConfig({settings:ee}),D&&(oe.trigger(l.A.PROTECTION_CREATED,{controller:D}),D.setMediaElement(j.getElement()),M)&&D.setProtectionData(M),oe.on(h.A.PLAYBACK_TIME_UPDATED,Te,e),oe.on(h.A.PLAYBACK_SEEKING,pe,e),oe.on(h.A.PLAYBACK_ERROR,Ve,e),oe.on(h.A.PLAYBACK_STARTED,Se,e),oe.on(h.A.PLAYBACK_PAUSED,Re,e),oe.on(h.A.PLAYBACK_ENDED,De,e),oe.on(h.A.METRIC_ADDED,qe,e),oe.on(h.A.MANIFEST_VALIDITY_CHANGED,ze,e),oe.on(h.A.BUFFER_LEVEL_UPDATED,Ee,e),oe.on(h.A.QUALITY_CHANGE_REQUESTED,be,e),l.A.KEY_SESSION_UPDATED&&oe.on(l.A.KEY_SESSION_UPDATED,ue,e),oe.on(l.A.MANIFEST_UPDATED,Fe,e),oe.on(l.A.STREAM_BUFFERING_COMPLETED,Ie,e),oe.on(l.A.TIME_SYNCHRONIZATION_COMPLETED,le,e),oe.on(l.A.CURRENT_TRACK_CHANGED,_e,e),oe.on(l.A.SETTING_UPDATED_LIVE_DELAY,we,e),oe.on(l.A.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,we,e)},getActiveStreamInfo:He,addDVRMetric:Ae,hasVideoTrack:Be,hasAudioTrack:Ue,getStreamById:Ye,getStreamForTime:ve,getTimeRelativeToStreamId:function(e,t){for(var n,i,r=null,a=0,o=0;o<L.length;o++){if(n=(r=L[o]).getStartTime(),i=r.getDuration(),Number.isFinite(n)&&(a=n),r.getId()===t)return e-a;Number.isFinite(i)&&(a+=i)}return null},load:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;se(),ie=t,u.load(e)},loadWithManifest:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!a||!a.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously");ie=t,a.setManifest(e)},getActiveStreamProcessors:Pe,setConfig:function(e){e&&(e.capabilities&&(n=e.capabilities),e.capabilitiesFilter&&(i=e.capabilitiesFilter),e.manifestLoader&&(u=e.manifestLoader),e.manifestModel&&(d=e.manifestModel),e.mediaPlayerModel&&(H=e.mediaPlayerModel),e.customParametersModel&&(Y=e.customParametersModel),e.protectionController&&(D=e.protectionController),e.adapter&&(f=e.adapter),e.dashMetrics&&(p=e.dashMetrics),e.errHandler&&(I=e.errHandler),e.timelineConverter&&(C=e.timelineConverter),e.videoModel&&(j=e.videoModel),e.playbackController&&(G=e.playbackController),e.serviceDescriptionController&&(V=e.serviceDescriptionController),e.contentSteeringController&&(_=e.contentSteeringController),e.textController&&(x=e.textController),e.abrController&&(b=e.abrController),e.mediaController&&(w=e.mediaController),e.settings&&(ee=e.settings),e.baseURLController&&(y=e.baseURLController),e.uriFragmentModel&&(E=e.uriFragmentModel),e.segmentBaseController&&(A=e.segmentBaseController),e.manifestUpdater)&&(a=e.manifestUpdater)},setProtectionData:function(e){M=e,D&&D.setProtectionData(M)},getIsStreamSwitchInProgress:function(){return N},switchToVideoElement:function(e){P&&(G.initialize(He()),de(e,!1,!0))},getHasMediaOrInitialisationError:function(){return F||B},getStreams:function(){return L},getActiveStream:function(){return P},getInitialPlayback:function(){return W},getAutoPlay:function(){return O},refreshManifest:function(){a.getIsUpdating()||a.refreshManifest()},reset:Ke},t=(0,c.A)(ae).getInstance().getLogger(e),g=En(ae).getInstance(),m=wn(ae).getInstance(),R=k(ae).getInstance(),We(),e}Cn.__dashjs_factory_name="StreamController";var Ln=u.A.getSingletonFactory(Cn);function Pn(){var e,t,n,i,a,o,u,h,d,f,p,m,g=this.context,_=(0,s.A)(g).getInstance();function y(){m.debug("Stopping the gap controller"),a&&(clearInterval(a),a=null),function(){_.off(l.A.WALLCLOCK_TIME_UPDATED,w,this),_.off(l.A.INITIAL_STREAM_SWITCH,b,this),_.off(l.A.PLAYBACK_SEEKING,v,this),_.off(l.A.BUFFER_REPLACEMENT_STARTED,A,e),_.off(l.A.TRACK_CHANGE_RENDERED,E,e)}(),o=NaN,i=0,f=a=null,p={}}function v(){f&&(clearTimeout(f),f=null)}function A(e){try{e.streamId!==h.getActiveStreamInfo().id||e.mediaType!==r.A.VIDEO&&e.mediaType!==r.A.AUDIO||e.streamId===h.getActiveStreamInfo().id&&(p[e.mediaType]=!0)}catch(e){m.error(e)}}function E(e){e&&e.mediaType&&(p[e.mediaType]=!1)}function b(){if(!a)try{a||(m.debug("Starting the gap controller"),a=setInterval((function(){T()&&S(u.getTime())}),100))}catch(e){}}function w(){var e;T(n.get().streaming.gaps.enableSeekFix)&&10<=++i&&(e=u.getTime(),t===e?S(e,!0):(t=e,o=NaN),i=0)}function T(e){var t;if(e=0<arguments.length&&void 0!==e&&e,h.getActiveStream())return t=Object.keys(p).some((function(e){return p[e]})),e=!!e&&(e=h.getActiveStream(),e=parseFloat((e.getStartTime()+e.getDuration()).toFixed(5)),u.getTime()+n.get().streaming.gaps.threshold>=e),!t&&n.get().streaming.gaps.jumpGaps&&0<h.getActiveStreamProcessors().length&&(!u.isSeeking()||e)&&!u.isPaused()&&!h.getIsStreamSwitchInProgress()&&!h.getHasMediaOrInitialisationError()}function S(e,t){t=1<arguments.length&&void 0!==t&&t;var i,r,a=n.get().streaming.gaps.enableStallFix,s=n.get().streaming.gaps.stallSeek,l=n.get().streaming.gaps.smallGapLimit,c=n.get().streaming.gaps.jumpLargeGaps,p=d.getBufferRange(),g=NaN,_=!1,y=function(e,t){try{if(!e||e.length<=1&&0<t)return NaN;for(var i=NaN,r=0;isNaN(i)&&r<e.length;){var a=0<r?e.end(r-1):0;t<e.start(r)&&a-t<n.get().streaming.gaps.threshold&&(i=r),r+=1}return i}catch(e){return null}}(p,e),v=(isNaN(y)||0<(v=(i=p.start(y))-e)&&(v<=l||c)&&(g=i),u.getTimeToStreamEnd());isNaN(g)&&t&&isFinite(v)&&!isNaN(v)&&v<l&&(g=parseFloat(u.getStreamEndTime().toFixed(5)),_=!0),a&&isNaN(g)&&t&&isNaN(y)&&function(e,t){for(var n=0,i=e.length;n<i;n++)if(t>=e.start(n)&&t<=e.end(n))return 1}(p,e)&&(0===s?(m.warn("Toggle play pause to break stall"),d.pause(),d.play()):(m.warn("Jumping ".concat(s,"s to break stall")),g=e+s)),0<g&&o!==g&&e<g&&!f&&(c=g-e,_?(v=(i=h.getStreamForTime(g))&&!!i.getPreloaded(),m.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(g,". Gap duration: ").concat(c)),u.seek(g,!0,v)):(l=u.getIsDynamic(),r=0<y?p.end(y-1):e,a=l?1e3*Math.max(0,c-.1):0,f=window.setTimeout((function(){u.seek(g,!0,!0),m.warn("Jumping gap occuring in period ".concat(h.getActiveStream().getStreamId()," starting at ").concat(r," and ending at ").concat(g,". Jumping by: ").concat(g-r)),f=null}),a)),o=g)}return e={reset:y,setConfig:function(e){e&&(e.settings&&(n=e.settings),e.playbackController&&(u=e.playbackController),e.streamController&&(h=e.streamController),e.videoModel)&&(d=e.videoModel)},initialize:function(){!function(){_.on(l.A.WALLCLOCK_TIME_UPDATED,w,this),_.on(l.A.INITIAL_STREAM_SWITCH,b,this),_.on(l.A.PLAYBACK_SEEKING,v,this),_.on(l.A.BUFFER_REPLACEMENT_STARTED,A,e),_.on(l.A.TRACK_CHANGE_RENDERED,E,e)}()}},m=(0,c.A)(g).getInstance().getLogger(e),y(),e}Pn.__dashjs_factory_name="GapController";var Dn=u.A.getSingletonFactory(Pn);function kn(){var e,t,n,i,a,u,d,f,p,m,g=this.context,_=(0,s.A)(g).getInstance();function y(){t=!1;var e=ht.A.parseUserAgent();n=e&&e.browser&&e.browser.name&&"safari"===e.browser.name.toLowerCase()}function v(){t=!1}function A(e){e.streamId===u.getActiveStreamInfo().id&&p&&(e=d.getLiveDelay(),d.getBufferLevel()>e/2)&&(p=!1)}function E(e){e.streamId===u.getActiveStreamInfo().id&&(p=e.state===o.A.BUFFER_EMPTY)}function b(){f.getCatchupModeEnabled()||i.setPlaybackRate(1)}function w(){var e,o,s,l,u,c,h,g,_,y,v;d.getIsDynamic()&&f.getCatchupModeEnabled()&&(0<f.getCatchupPlaybackRates().max||f.getCatchupPlaybackRates().min<0)&&!d.isPaused()&&!d.isSeeking()&&function(){try{return!(0<!d.getTime()||t)&&(S()===r.A.LIVE_CATCHUP_MODE_LOLP?function(e,t){try{return 0<Math.abs(T())||e<t}catch(e){}}(d.getBufferLevel(),a.get().streaming.liveCatchup.playbackBufferMin):function(){try{return 0<Math.abs(T())}catch(e){}}())}catch(e){}}()&&!t&&i&&(e=i.getPlaybackRate(),o=f.getCatchupPlaybackRates(),s=d.getBufferLevel(),u=T(),l=f.getCatchupMaxDrift(),!isNaN(l)&&0<l&&l<u?(m.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),t=!0,d.seekToCurrentLive(!0,!1)):(l=d.getCurrentLiveLatency(),u=d.getLiveDelay(),h=S()===r.A.LIVE_CATCHUP_MODE_LOLP?(c=o,h=l,g=u,(y=s)<(_=a.get().streaming.liveCatchup.playbackBufferMin)?(v=1-(v=Math.abs(c.min))+2*v/(1+Math.pow(Math.E,-5*(y-_))),m.debug("[LoL+ playback control_buffer-based] bufferLevel: "+y+", newRate: "+v)):(v=Math.abs(h-g)<=.02*g?1:1-(y=(_=h-g)<0?Math.abs(c.min):c.max)+2*y/(1+Math.pow(Math.E,-5*_)),m.debug("[LoL+ playback control_latency-based] latency: "+h+", newRate: "+v)),v):(g=o,c=u,y=s,p||(g=1-(g=(_=l-c)<0?Math.abs(g.min):g.max)+2*g/(1+Math.pow(Math.E,-5*_)),d.getPlaybackStalled()&&y<=c/2&&0<_)?1:g),v=n?.25:.02/(.5/o.max),h&&Math.abs(e-h)>=v&&(m.debug("[CatchupController]: Setting playback rate to ".concat(h)),i.setPlaybackRate(h))))}function T(){return d.getCurrentLiveLatency()-d.getLiveDelay()}function S(){var e=a.get().streaming.liveCatchup.playbackBufferMin;return a.get().streaming.liveCatchup.mode!==r.A.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?r.A.LIVE_CATCHUP_MODE_DEFAULT:r.A.LIVE_CATCHUP_MODE_LOLP}function R(){f.getCatchupPlaybackRates(!0)}return e={reset:function(){_.off(h.A.BUFFER_LEVEL_UPDATED,A,e),_.off(h.A.BUFFER_LEVEL_STATE_CHANGED,E,e),_.off(h.A.PLAYBACK_PROGRESS,w,e),_.off(h.A.PLAYBACK_TIME_UPDATED,w,e),_.off(h.A.PLAYBACK_SEEKED,v,e),_.off(l.A.SETTING_UPDATED_CATCHUP_ENABLED,b,e),_.off(l.A.SETTING_UPDATED_PLAYBACK_RATE_MIN,R,e),_.off(l.A.SETTING_UPDATED_PLAYBACK_RATE_MAX,R,e),_.off(h.A.STREAM_INITIALIZED,R,e),y(),i.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(a=e.settings),e.videoModel&&(i=e.videoModel),e.streamController&&(u=e.streamController),e.playbackController&&(d=e.playbackController),e.mediaPlayerModel)&&(f=e.mediaPlayerModel)},initialize:function(){_.on(h.A.BUFFER_LEVEL_UPDATED,A,e),_.on(h.A.BUFFER_LEVEL_STATE_CHANGED,E,e),_.on(h.A.PLAYBACK_PROGRESS,w,e),_.on(h.A.PLAYBACK_TIME_UPDATED,w,e),_.on(h.A.PLAYBACK_SEEKED,v,e),_.on(l.A.SETTING_UPDATED_CATCHUP_ENABLED,b,e),_.on(l.A.SETTING_UPDATED_PLAYBACK_RATE_MIN,R,e),_.on(l.A.SETTING_UPDATED_PLAYBACK_RATE_MAX,R,e),_.on(h.A.STREAM_INITIALIZED,R,e),R()}},m=(0,c.A)(g).getInstance().getLogger(e),y(),e}kn.__dashjs_factory_name="CatchupController";var xn=u.A.getSingletonFactory(kn),Mn=[r.A.SERVICE_DESCRIPTION_DVB_LL_SCHEME];function On(){var e,t,n,i,o,s=this.context;function l(){t={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},n=[]}function u(e,n,r){try{t[e][n]=r/1e3}catch(e){i.error(e)}}return e={getServiceDescriptionSettings:function(){return t},getProducerReferenceTimeOffsets:function(){return n},calculateProducerReferenceTimeOffsets:function(e){try{var t,s,l=[];e&&0<e.length&&(t=[r.A.VIDEO,r.A.AUDIO,r.A.TEXT],s=o.getAvailabilityStartTime()/1e3,e.forEach((function(e){var n=t.reduce((function(t,n){return t.concat(o.getAllMediaInfoForType(e,n))}),[]).reduce((function(t,n){return o.getProducerReferenceTimes(e,n).forEach((function(i){var r=o.getVoRepresentations(n);r&&0<r.length&&r[0].adaptation&&r[0].segmentInfoType===a.A.SEGMENT_TEMPLATE&&(r=r[0],r=new Date(i[a.A.WALL_CLOCK_TIME]).getTime()/1e3-(i[a.A.PRESENTATION_TIME]/r[a.A.TIMESCALE]-r[a.A.PRESENTATION_TIME_OFFSET]+e.start),t.push({id:i[a.A.ID],to:s-r}))})),t}),[]);l=l.concat(n)}))),n=l}catch(e){i.error(e),n=[]}},applyServiceDescription:function(e){var a,o,s,l,c,h;e&&e.serviceDescriptions&&(a=e.serviceDescriptions.filter((function(e){return Mn.includes(e.schemeIdUri)})),e=e.serviceDescriptions.filter((function(e){return null==e.schemeIdUri})),a=0<a.length?a[a.length-1]:e[e.length-1])&&(a.latency&&0<a.latency.target&&(a.schemeIdUri,r.A.SERVICE_DESCRIPTION_DVB_LL_SCHEME,e={liveDelay:(e=a).latency.target/1e3,maxDrift:!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,referenceId:e.latency.referenceId||NaN},0<n.length?(l=e,h=(c=0)===(h=n.filter((function(e){return e.id===l.referenceId}))).length?(c=0<n.length?n[0].to:0,n[0].id||NaN):(c=h[0].to||0,h[0].id||NaN),h=(c={to:c,id:h}).id,t.liveDelay=e.liveDelay-(c=c.to),t.liveCatchup.maxDrift=e.maxDrift,i.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(c," from ProducerReferenceTime element with id ").concat(h,".\n                Live Delay: ").concat(e.liveDelay-c,", Live catchup max drift: ").concat(e.maxDrift,"\n            "))):(t.liveDelay=e.liveDelay,t.liveCatchup.maxDrift=e.maxDrift,i.debug("Found latency properties coming from service description: Live Delay: ".concat(e.liveDelay,", Live catchup max drift: ").concat(e.maxDrift)))),a.playbackRate&&(c=(h=a).playbackRate.min?Math.round(1e3*(h.playbackRate.min-1))/1e3:NaN,h=h.playbackRate.max?Math.round(1e3*(h.playbackRate.max-1))/1e3:NaN,t.liveCatchup.playbackRate.min=c,t.liveCatchup.playbackRate.max=h,i.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(c)),i.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(h))),a.operatingQuality,a.operatingBandwidth&&(e=a)&&e.operatingBandwidth&&e.operatingBandwidth.mediaType&&"all"!==e.operatingBandwidth.mediaType&&((o={}).minBandwidth=e.operatingBandwidth.min,o.maxBandwidth=e.operatingBandwidth.max,o.targetBandwidth=e.operatingBandwidth.target,s=[],"video"===e.operatingBandwidth.mediaType||"audio"===e.operatingBandwidth.mediaType?s.push(e.operatingBandwidth.mediaType):"any"===e.operatingBandwidth.mediaType&&(s.push("audio"),s.push("video")),s.forEach((function(e){isNaN(o.minBandwidth)||u("minBitrate",e,o.minBandwidth),isNaN(o.maxBandwidth)||u("maxBitrate",e,o.maxBandwidth),isNaN(o.targetBandwidth)||u("initialBitrate",e,o.targetBandwidth)}))),a.contentSteering)&&(t.contentSteering=a.contentSteering)},reset:function(){l()},setConfig:function(e){e&&e.adapter&&(o=e.adapter)}},i=(0,c.A)(s).getInstance().getLogger(e),l(),e}On.__dashjs_factory_name="ServiceDescriptionController";var Nn=u.A.getSingletonFactory(On),Fn=n(8649),Bn=n.n(Fn),Un=n(5384);function jn(){var e,t,n,i,a,o,u,h,d=this.context,f=(0,s.A)(d).getInstance();function p(e,t){return e&&n[t]&&n[t][e]?n[t][e].list:[]}function m(e,t){return e&&n[t]&&n[t][e]?n[t][e].current:null}function g(e){var t,a,s,u=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e&&e.streamInfo&&(s=m(t=e.type,a=e.streamInfo.id),n[a])&&n[a][t]&&(n[a][t].current=e,n[a][t].current&&(t!==r.A.TEXT&&!v(e,s)||t===r.A.TEXT&&e.isFragmented)&&f.trigger(l.A.CURRENT_TRACK_CHANGED,{oldMediaInfo:s,newMediaInfo:e,switchMode:i.get().streaming.trackSwitchMode[t]},{streamId:a}),!u)&&(u=(s={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration,codec:e.codec}).lang||s.viewpoint||s.role&&0<s.role.length||s.accessibility&&0<s.accessibility.length||s.audioChannelConfiguration&&0<s.audioChannelConfiguration.length?s:null)&&n[a][t].storeLastSettings&&(u.roles&&(u.role=u.roles[0],delete u.roles),u.accessibility&&(u.accessibility=u.accessibility[0]),u.audioChannelConfiguration&&(u.audioChannelConfiguration=u.audioChannelConfiguration[0]),o[t]=u,h.setSavedMediaSettings(t,u))}function _(e,t){e&&t&&(a[e]=t)}function y(e){return e?a[e]:null}function v(e,t){var n,i,r,a,o,s,l,u,c,h;return!e&&!t||!(!e||!t)&&(n=e.id===t.id,i=e.viewpoint===t.viewpoint,r=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),a=e.lang===t.lang,o=e.codec===t.codec,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),h=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri),n)&&o&&i&&r&&a&&s&&l&&u&&c&&h&&e}function A(){n={},o={},a={audio:null,video:null,text:null}}function E(e,t,n){var i=[];return e.forEach((function(e){t(n,e)&&i.push(e)})),0!==i.length?i:e}function b(e,t){try{return!e.lang||e.lang instanceof RegExp?t.lang.match(e.lang):""!==t.lang&&0<(0,Un.extendedFilter)(t.lang,Bn()(e.lang)).length}catch(e){return!1}}function w(e,t){return void 0===e.index||null===e.index||t.index===e.index}function T(e,t){return!e.viewpoint||e.viewpoint===t.viewpoint}function S(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return!e.role||!!t.roles.filter((function(t){return t===e.role}))[0]||t.type===r.A.AUDIO&&n}function R(e,t){return e.accessibility?!!t.accessibility.filter((function(t){return t===e.accessibility}))[0]:!t.accessibility.length}function I(e,t){return!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0]}function C(e,t){return!e.codec||e.codec===t.codec}function L(e){var t,n=0,i=[];return e.forEach((function(e){(t=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))))>n?(n=t,i=[e]):t===n&&i.push(e)})),i}function P(e){var t,n=1/0,i=[];return e.forEach((function(e){var r=e.bitrateList.reduce((function(e,t){var n=Math.max(1,t.width*t.height);return e+t.bandwidth/n}),0);(t=r/e.bitrateList.length)<n?(n=t,i=[e]):t===n&&i.push(e)})),i}function D(e){var t,n=0,i=[];return e.forEach((function(e){(t=e.representationCount)>n?(n=t,i=[e]):t===n&&i.push(e)})),i}function k(e,n){if(e===r.A.TEXT)return n[0];var a,o,s,l,c,h,d=i.get().streaming.selectionModeForInitialTrack;if((e=u.getCustomInitialTrackSelectionFunction())&&"function"==typeof e)a=e(n);else switch(d){case r.A.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:l=0,c=[],n.forEach((function(e){isNaN(e.selectionPriority)||(e.selectionPriority>l?(l=e.selectionPriority,c=[e]):e.selectionPriority===l&&c.push(e))})),a=h=1<(h=1<(h=c).length?L(h):h).length?D(h):h;break;case r.A.TRACK_SELECTION_MODE_HIGHEST_BITRATE:a=h=1<(h=L(n)).length?D(h):h;break;case r.A.TRACK_SELECTION_MODE_FIRST_TRACK:a=n[0];break;case r.A.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:a=s=1<(s=P(n)).length?L(s):s;break;case r.A.TRACK_SELECTION_MODE_WIDEST_RANGE:a=o=1<(o=D(s=n)).length?L(s):o;break;default:t.warn("Track selection mode ".concat(d," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),a=n[0]}return(0<a.length?a:n)[0]}return e={setInitialMediaSettingsForType:function(e,t){var n=o[e]||y(e),i=(t=p(e,t.id),[]);n||((n=h.getSavedMediaSettings(e))&&delete n.codec,_(e,n)),t&&0!==t.length&&(n&&(i=E(i=Array.from(t),b,n),i=E(i,w,n),i=E(i,T,n),e===r.A.AUDIO&&o[e]||(i=E(i,S,n)),i=E(i,R,n),i=E(i,I,n),i=E(i,C,n)),0===i.length?g(k(e,t),!0):1<i.length?g(k(e,i)):g(i[0]))},addTrack:function(e){if(e){var t=e.type;if(t===r.A.AUDIO||t===r.A.VIDEO||t===r.A.TEXT||t===r.A.IMAGE){var a,o=e.streamInfo.id;n[o]||(n[o]={audio:{list:[],storeLastSettings:a=i.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:a,current:null},text:{list:[],storeLastSettings:a,current:null},image:{list:[],storeLastSettings:a,current:null}});for(var s=n[o][t].list,l=0,u=s.length;l<u;++l)if(v(s[l],e))return;s.push(e)}}},getTracksFor:p,getCurrentTrackFor:m,isCurrentTrack:function(e){var t,i;return!!e&&(t=e.type,i=e.streamInfo.id,n[i])&&n[i][t]&&v(n[i][t].current,e)},setTrack:g,selectInitialTrack:k,setInitialSettings:_,getInitialSettings:y,getTracksWithHighestBitrate:L,getTracksWithHighestEfficiency:P,getTracksWithWidestRange:D,isTracksEqual:v,matchSettings:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{var i,a=!1,o=(e.lang?e.lang instanceof RegExp?a=t.lang.match(e.lang):""!==t.lang&&(i=Bn()(e.lang))&&(a=0<(0,Un.extendedFilter)(t.lang,i).length):a=!0,void 0===e.index||null===e.index||t.index===e.index),s=!e.viewpoint||e.viewpoint===t.viewpoint,l=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],u=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0],c=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return a&&o&&s&&(l||t.type===r.A.AUDIO&&n)&&u&&c}catch(e){return!1}},matchSettingsLang:b,matchSettingsIndex:w,matchSettingsViewPoint:T,matchSettingsRole:S,matchSettingsAccessibility:R,matchSettingsAudioChannelConfig:I,saveTextSettingsDisabled:function(){h.setSavedMediaSettings(r.A.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(h=e.domStorage),e.settings&&(i=e.settings),e.customParametersModel)&&(u=e.customParametersModel)},reset:A},t=(0,c.A)(d).getInstance().getLogger(e),A(),e}jn.__dashjs_factory_name="MediaController";var Gn=u.A.getSingletonFactory(jn),Vn=(u.A.updateSingletonFactory(jn.__dashjs_factory_name,Gn),Gn);Hn=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.data={baseUrls:t||null,selectedIdx:n||NaN},this.children=[]},Object.defineProperty(Hn,"prototype",{writable:!1});var Hn,Yn=Hn;function zn(){var e,t,n,i=this.context,r=Qe(i).getInstance();function a(e,t,n){n=o(n),e[t]?r.areEqual(n,e[t].data.baseUrls)||(e[t].data.baseUrls=n,e[t].data.selectedIdx=NaN):e[t]=new Yn(n)}function o(e){e=t.getBaseURLsFromElement(e);var i=n.getSynthesizedBaseUrlElements(e);return i&&0<i.length?e.concat(i):e}function s(){e=new Yn}return i={reset:s,update:function(n){if(!t||!t.hasOwnProperty("getBaseURLsFromElement")||!t.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously");var i=o(n);r.areEqual(i,e.data.baseUrls)||(e.data.baseUrls=i,e.data.selectedIdx=NaN),n&&n.Period_asArray&&n.Period_asArray.forEach((function(n,i){a(e.children,i,n),n.AdaptationSet_asArray&&n.AdaptationSet_asArray.forEach((function(n,r){a(e.children[i].children,r,n),n.Representation_asArray&&n.Representation_asArray.sort(t.getRepresentationSortFunction()).forEach((function(t,n){a(e.children[i].children[r].children,n,t)}))}))}))},getForPath:function(t){var n=e,i=[n.data];return t&&t.forEach((function(e){(n=n.children[e])&&i.push(n.data)})),i.filter((function(e){return e.baseUrls.length}))},invalidateSelectedIndexes:function(t){!function t(n,i){n((i=i||e).data),i.children&&i.children.forEach((function(e){return t(n,e)}))}((function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN)}))},setConfig:function(e){e.adapter&&(t=e.adapter),e.contentSteeringController&&(n=e.contentSteeringController)},getBaseUrls:o},s(),i}zn.__dashjs_factory_name="BaseURLTreeModel";var Wn=u.A.getClassFactory(zn);function Kn(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t,n=0,i=[],r=0;if((e=e.sort((function(e,t){return e=e.dvbPriority-t.dvbPriority,isNaN(e)?0:e})).filter((function(e,t,n){return!t||n[0].dvbPriority&&e.dvbPriority&&n[0].dvbPriority===e.dvbPriority}))).length)return 1<e.length&&(e.forEach((function(e){n+=e.dvbWeight,i.push(n)})),t=Math.floor(Math.random()*(n-1)),i.every((function(e,n){return r=n,!(t<e)}))),e[r]}((n=[],e.filter((function(e){return!t.contains(e.serviceLocation)||(e.dvbPriority&&n.push(e.dvbPriority),!1)})).filter((function(e){return!n.length||!e.dvbPriority||-1===n.indexOf(e.dvbPriority)}))));var n}}}Kn.__dashjs_factory_name="DVBSelector";var qn=u.A.getClassFactory(Kn);function Qn(e){var t=(e=e||{}).blacklistController;return{select:function(e){var n,i=0;return e&&e.some((function(e,n){return i=n,!t.contains(e.serviceLocation)}))?e[i]:n}}}Qn.__dashjs_factory_name="BasicSelector";var Xn=u.A.getClassFactory(Qn);function Jn(){var e,t,n,i=this.context;function r(e,t){for(var i=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:[],a=0,o=NaN;a<i.length&&!function(){var e=i[a],t=r.findIndex((function(t){return t.serviceLocation&&t.serviceLocation===e}));if(-1!==t&&!n.contains(r[t].serviceLocation))return o=t,1;a+=1}(););return o}return e={selectBaseUrlIndex:function(e){var n=NaN,i=(isNaN(e.selectedIdx)&&(i=t.getSteeringDataFromManifest())&&0<i.defaultServiceLocationArray.length&&(n=r(i.defaultServiceLocationArray,e.baseUrls)),t.getCurrentSteeringResponseData());return e.baseUrls&&e.baseUrls.length&&i&&i.pathwayPriority&&i.pathwayPriority.length?r(i.pathwayPriority,e.baseUrls):n},setConfig:function(e){e.blacklistController&&(n=e.blacklistController),e.contentSteeringController&&(t=e.contentSteeringController)}},t=pn(i).getInstance(),e}Jn.__dashjs_factory_name="ContentSteeringSelector";var Zn=u.A.getClassFactory(Jn);function $n(){var e,t,n,i,r,a,o=this.context,u=(0,s.A)(o).getInstance(),c=(0,S.A)(o).getInstance();function h(){t.reset()}return e={chooseSelector:function(e){(0,Y.sq)(e,"boolean"),a=e?i:n},select:function(e){var t;if(e)return c.get().streaming.applyContentSteering&&(t=r.selectBaseUrlIndex(e),isNaN(t)||-1===t||(e.selectedIdx=t)),isNaN(e.selectedIdx)?(t=a.select(e.baseUrls))?(e.selectedIdx=e.baseUrls.indexOf(t),t):(u.trigger(l.A.URL_RESOLUTION_FAILED,{error:new v.A(T.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,T.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(a===n&&h())):e.baseUrls[e.selectedIdx]},reset:h,setConfig:function(e){e.selector&&(a=e.selector),e.contentSteeringSelector&&(r=e.contentSteeringSelector)}},t=an(o).create({updateEventName:l.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:l.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),n=Xn(o).create({blacklistController:t}),i=qn(o).create({blacklistController:t}),(r=Zn(o).create()).setConfig({blacklistController:t}),a=n,e}$n.__dashjs_factory_name="BaseURLSelector";var ei=u.A.getClassFactory($n);function ti(){var e,t,n,i,r,a=this.context,o=(0,s.A)(a).getInstance(),u=(0,K.A)(a).getInstance();function c(e){n.update(e),i.chooseSelector(t.getIsDVB(e)),o.trigger(h.A.BASE_URLS_UPDATED,{baseUrls:d(e)})}function d(e){return n.getBaseUrls(e)}return e={reset:function(){n.reset(),i.reset()},initialize:function(e){n.setConfig({adapter:t,contentSteeringController:r}),c(e)},resolve:function(e){if(e=n.getForPath(e).reduce((function(e,t){return(t=i.select(t))?(u.isRelative(t.url)?e.url=u.resolve(t.url,e.url):(e.url=t.url,e.serviceLocation=t.serviceLocation),e.availabilityTimeOffset=t.availabilityTimeOffset,e.availabilityTimeComplete=t.availabilityTimeComplete,e.queryParams=t.queryParams,e):new xe}),new xe),!u.isRelative(e.url))return e},setConfig:function(e){e.baseURLTreeModel&&(n=e.baseURLTreeModel),e.baseURLSelector&&(i=e.baseURLSelector),e.adapter&&(t=e.adapter),e.contentSteeringController&&(r=e.contentSteeringController)},getBaseUrls:d,update:c},n=Wn(a).create(),i=ei(a).create(),o.on(l.A.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,(function(e){n.invalidateSelectedIndexes(e.entry)}),e),e}ti.__dashjs_factory_name="BaseURLController";var ni=u.A.getClassFactory(ti);function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ri(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ri=function(){return!!e})()}function ai(e){return(ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oi(e,t){return(oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var si=function(e){function t(e,n){var i;if(this instanceof t)return(i=function(e,t,n){t=ai(t);var i=e;if(!(t=ri()?Reflect.construct(t,[],ai(e).constructor):t.apply(e,n))||"object"!==ii(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).url=e||null,i.type=n||null,i.mediaType=r.A.STREAM,i.responseType="",i;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&oi(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(p.A);function li(e){e=e||{};var t=this.context,n=(0,s.A)(t).getInstance(),i=Nt(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:T});return{load:function(e,t,r){function a(i,a){t.resolved=!0,t.resolvedContent=i||null,n.trigger(l.A.XLINK_ELEMENT_LOADED,{element:t,resolveObject:r,error:i||a?null:new v.A(T.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,T.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})}var o;"urn:mpeg:dash:resolve-to-zero:2013"===e?a(null,!0):(o=new si(e,R.G.XLINK_EXPANSION_TYPE),i.load({request:o,success:function(e){a(e)},error:function(){a(null)}}))},reset:function(){i&&(i.abort(),i=null)}}}function ui(e){void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1);var t=1,n=3,i=4,r=8,a=9;function o(e){var t=e.localName;return null!=(t=null==t?e.baseName:t)&&""!=t?t:e.nodeName}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function l(e,t,n,i){for(var r=0;r<e.length;r++){var a=e[r];if("string"==typeof a){if(a==i)break}else if(a instanceof RegExp){if(a.test(i))break}else if("function"==typeof a&&a(t,n,i))break}return r!=e.length}function u(t,n,i){"property"===e.arrayAccessForm&&(t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]),!(t[n]instanceof Array)&&0<e.arrayAccessFormPaths.length&&l(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function c(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");return n.setHours(t[3],t[4],i[0]),1<i.length&&n.setMilliseconds(i[1]),t[6]&&t[7]?(i=60*t[6]+Number(t[7]),i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))),n}function h(s,d){if(s.nodeType==a){for(var f=new Object,p=s.childNodes,m=0;m<p.length;m++)(_=p[m]).nodeType==t&&(e.ignoreRoot?f=h(_):(f={})[E=o(_)]=h(_));return f}if(s.nodeType==t){(f=new Object).__cnt=0;var g=[];for(p=s.childNodes,m=0;m<p.length;m++){var _,y,v,A,E=o(_=p[m]);_.nodeType!=r&&(k=f,M=y=d+"."+(x=E),_.nodeType==t&&0<e.xmlElementsFilter.length&&!l(e.xmlElementsFilter,k,x,M)||(f.__cnt++,null==f[E]?(v=h(_,y),"#text"==E&&!/[^\s]/.test(v)||((A={})[E]=v,g.push(A)),f[E]=v,u(f,E,y)):(null==f[E]||f[E]instanceof Array||(f[E]=[f[E]],u(f,E,y)),v=h(_,y),"#text"==E&&!/[^\s]/.test(v)||((A={})[E]=v,g.push(A)),f[E][f[E].length]=v)))}f.__children=g;for(var b=o(s),w=0;w<s.attributes.length;w++){var T=s.attributes[w];f.__cnt++;for(var S=T.value,R=0,I=e.matchers.length;R<I;R++){var C=e.matchers[R];C.test(T,b)&&(S=C.converter(T.value))}f[e.attributePrefix+T.name]=S}var L=s.prefix;return null!=L&&""!=L&&(f.__cnt++,f.__prefix=L),null!=f["#text"]&&(f.__text=f["#text"],f.__text instanceof Array&&(f.__text=f.__text.join("\n")),e.stripWhitespaces&&(f.__text=f.__text.trim()),delete f["#text"],"property"==e.arrayAccessForm&&delete f["#text_asArray"],f.__text=(L=f.__text,D=d+"."+(P=E),0<e.datetimeAccessFormPaths.length&&(D=D.split(".#")[0],l(e.datetimeAccessFormPaths,L,P,D))?c(L):L)),null!=f["#cdata-section"]&&(f.__cdata=f["#cdata-section"],delete f["#cdata-section"],"property"==e.arrayAccessForm)&&delete f["#cdata-section_asArray"],0==f.__cnt&&"text"==e.emptyNodeForm?f="":1==f.__cnt&&null!=f.__text?f=f.__text:1!=f.__cnt||null==f.__cdata||e.keepCData?1<f.__cnt&&null!=f.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==f.__text||""==f.__text.trim())&&delete f.__text:f=f.__cdata,delete f.__cnt,!e.enableToStringFunc||null==f.__text&&null==f.__cdata||(f.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),f}var P,D,k,x,M;if(s.nodeType==n||s.nodeType==i)return s.nodeValue}function d(t,n,i,r){var a="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var o=0;o<i.length;o++){var l=i[o],u=t[l];e.escapeMode&&(u=s(u)),a+=" "+l.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?a+='"'+u+'"':a+="'"+u+"'"}return a+(r?"/>":">")}function f(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function p(t,n){return"property"==e.arrayAccessForm&&-1!==(i=n.toString()).indexOf("_asArray",i.length-8)||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function;var i}function m(e){var t=0;if(e instanceof Object)for(var n in e)p(e,n)||t++;return t}function g(t){var n=[];if(t instanceof Object)for(var i in t)-1==i.toString().indexOf("__")&&0==i.toString().indexOf(e.attributePrefix)&&n.push(i);return n}function _(t){var n,i,r="";return t instanceof Object?r+=(i="",null!=(n=t).__cdata&&(i+="<![CDATA["+n.__cdata+"]]>"),null!=n.__text&&(e.escapeMode?i+=s(n.__text):i+=n.__text),i):null!=t&&(e.escapeMode?r+=s(t):r+=t),r}function y(e,t){return""===e?t:e+"."+t}function v(t,n){var i,r,a,o="";if(0<m(t))for(var s in t)p(t,s)||""!=n&&(i=t,a=y(n,r=s),0!=e.jsonPropertiesFilter.length)&&""!=a&&!l(e.jsonPropertiesFilter,i,r,a)||(r=g(i=t[s]),null==i?o+=d(i,s,r,!0):i instanceof Object?i instanceof Array?o+=function(e,t,n,i){var r="";if(0==e.length)r+=d(e,t,n,!0);else for(var a=0;a<e.length;a++)r=(r=(r+=d(e[a],t,g(e[a]),!1))+v(e[a],y(i,t)))+f(e[a],t);return r}(i,s,r,n):i instanceof Date?o=(o=(o+=d(i,s,r,!1))+i.toISOString())+f(i,s):0<m(i)||null!=i.__text||null!=i.__cdata?o=(o=(o+=d(i,s,r,!1))+v(i,y(n,s)))+f(i,s):o+=d(i,s,r,!0):o=(o=(o+=d(i,s,r,!1))+_(i))+f(i,s));return o+_(t)}this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?c(e):e},this.xml2json=function(e){return h(e)},this.xml_str2json=function(e){return null!=(e=this.parseXmlString(e))?this.xml2json(e):null},this.json2xml_str=function(e){return v(e,"")},this.json2xml=function(e){return e=this.json2xml_str(e),this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}}li.__dashjs_factory_name="XlinkLoader";var ci=u.A.getClassFactory(li),hi="onLoad";function di(e){e=e||{};var t,n,i,r,o,u,c=this.context,h=(0,s.A)(c).getInstance(),d=(0,K.A)(c).getInstance();function f(e,t,n){var i,r,a={};a.elements=e,a.type=t,a.resolveType=n,0===a.elements.length&&m(a);for(var o=0;o<a.elements.length;o++)i=a.elements[o],r=d.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,u.load(r,i,a)}function p(e){var t,n=e.element;e=e.resolveObject,n.resolvedContent&&((t=0)===n.resolvedContent.indexOf("<?xml")&&(t=n.resolvedContent.indexOf("?>")+2),t=n.resolvedContent.substr(0,t)+"<response>"+n.resolvedContent.substr(t)+"</response>",n.resolvedContent=o.xml_str2json(t)),function(e){for(var t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return;return 1}(e)&&m(e)}function m(e){for(var t,n,o,s,u,c,d,p=[],m=e,_=[],y=m.elements.length-1;0<=y;y--){if(s=(o=m.elements[y]).type+"_asArray",o.resolvedContent){if(o.resolvedContent)for(c=0;c<o.resolvedContent[s].length;c++)u=o.resolvedContent[s][c],_.push(u)}else delete o.originalContent["xlink:actuate"],delete o.originalContent["xlink:href"],_.push(o.originalContent);for(o.parentElement[s].splice(o.index,1),d=0;d<_.length;d++)o.parentElement[s].splice(o.index+d,0,_[d]);_=[]}if(0<m.elements.length&&i.run(r),"onActuate"===e.resolveType&&h.trigger(l.A.XLINK_READY,{manifest:r}),e.resolveType===hi)switch(e.type){case a.A.PERIOD:for(t=0;t<r[a.A.PERIOD+"_asArray"].length;t++)(n=r[a.A.PERIOD+"_asArray"][t]).hasOwnProperty(a.A.ADAPTATION_SET+"_asArray")&&(p=p.concat(g(n[a.A.ADAPTATION_SET+"_asArray"],n,a.A.ADAPTATION_SET,hi))),n.hasOwnProperty(a.A.EVENT_STREAM+"_asArray")&&(p=p.concat(g(n[a.A.EVENT_STREAM+"_asArray"],n,a.A.EVENT_STREAM,hi)));f(p,a.A.ADAPTATION_SET,hi);break;case a.A.ADAPTATION_SET:h.trigger(l.A.XLINK_READY,{manifest:r})}}function g(e,t,n,i){for(var r,a,o=[],s=e.length-1;0<=s;s--)(r=e[s]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===r["xlink:href"]&&e.splice(s,1);for(s=0;s<e.length;s++)(r=e[s]).hasOwnProperty("xlink:href")&&r.hasOwnProperty("xlink:actuate")&&r["xlink:actuate"]===i&&(a={url:r["xlink:href"],parentElement:t,type:n,index:s,resolveType:i,originalContent:r,resolvedContent:null,resolved:!1},o.push(a));return o}return t={resolveManifestOnLoad:function(e){o=new ui({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),(r=e).Period_asArray?f(g(r.Period_asArray,r,a.A.PERIOD,hi),a.A.PERIOD,hi):h.trigger(l.A.XLINK_READY,{manifest:r})},setMatchers:function(e){e&&(n=e)},setIron:function(e){e&&(i=e)},reset:function(){h.off(l.A.XLINK_ELEMENT_LOADED,p,t),u&&(u.reset(),u=null)}},h.on(l.A.XLINK_ELEMENT_LOADED,p,t),u=ci(c).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}di.__dashjs_factory_name="XlinkController";var fi=u.A.getClassFactory(di);function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e){function t(e,n){for(var i=0,r=e.children.length;i<r;++i){var a=e.children[i],o=n[a.name+"_asArray"];if(o)for(var s=0,l=o.length;s<l;++s){for(var u=o[s],c=(A=v=y=_=g=m=f=d=c=void 0,e.properties),h=n,d=u,f=0,p=c.length;f<p;++f){var m=c[f];if(h[m.name])if(d[m.name]){if(m.merge){var g=h[m.name],_=d[m.name];if("object"===pi(g)&&"object"===pi(_)){y=void 0,v=void 0,A=void 0;var y=g,v=_;for(var A in y)v.hasOwnProperty(A)||(v[A]=y[A])}else d[m.name]=g+_}}else d[m.name]=h[m.name]}t(a,u)}}}return{run:function(n){if(null!==n&&"object"===pi(n)&&n.Period_asArray&&"period"in e)for(var i=e.period,r=n.Period_asArray,a=0,o=r.length;a<o;++a){var s=r[a];if(t(i,s),"adaptationset"in e){var l=s.AdaptationSet_asArray;if(l)for(var u=e.adaptationset,c=0,h=l.length;c<h;++c)t(u,l[c])}}return n}}}mi.__dashjs_factory_name="ObjectIron";var gi=u.A.getClassFactory(mi);function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=_i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=_i(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==_i(e)?e:String(e)}(i.key),i)}})((yi=Ai).prototype,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),Object.defineProperty(yi,"prototype",{writable:!1});var yi,vi=Ai;function Ai(e,t){if(!(this instanceof Ai))throw new TypeError("Cannot call a class as a function");this._test=e,this._converter=t}function Ei(e){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bi(e,t,n){return(t=function(e){return e=function(e){if("object"!=Ei(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Ei(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Ei(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wi=function(){return!!e})()}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Si(e,t){return(Si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ri=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=this,n=e,i=[function(e,t){bi(bi(bi(bi(bi(bi(bi(bi(bi(bi(n={},a.A.MPD,[a.A.ID,a.A.PROFILES]),a.A.PERIOD,[a.A.ID]),a.A.BASE_URL,[a.A.SERVICE_LOCATION,a.A.BYTE_RANGE]),a.A.SEGMENT_BASE,[a.A.INDEX_RANGE]),a.A.INITIALIZATION,[a.A.RANGE]),a.A.REPRESENTATION_INDEX,[a.A.RANGE]),a.A.SEGMENT_LIST,[a.A.INDEX_RANGE]),a.A.BITSTREAM_SWITCHING,[a.A.RANGE]),a.A.SEGMENT_URL,[a.A.MEDIA_RANGE,a.A.INDEX_RANGE]),a.A.SEGMENT_TEMPLATE,[a.A.INDEX_RANGE,a.A.MEDIA,a.A.INDEX,a.A.INITIALIZATION_MINUS,a.A.BITSTREAM_SWITCHING_MINUS]),bi(bi(bi(bi(bi(bi(bi(bi(bi(bi(n,a.A.ASSET_IDENTIFIER,[a.A.VALUE,a.A.ID]),a.A.EVENT_STREAM,[a.A.VALUE]),a.A.ADAPTATION_SET,[a.A.PROFILES,a.A.MIME_TYPE,a.A.SEGMENT_PROFILES,a.A.CODECS,a.A.CONTENT_TYPE]),a.A.FRAME_PACKING,[a.A.VALUE,a.A.ID]),a.A.AUDIO_CHANNEL_CONFIGURATION,[a.A.VALUE,a.A.ID]),a.A.CONTENT_PROTECTION,[a.A.VALUE,a.A.ID]),a.A.ESSENTIAL_PROPERTY,[a.A.VALUE,a.A.ID]),a.A.SUPPLEMENTAL_PROPERTY,[a.A.VALUE,a.A.ID]),a.A.INBAND_EVENT_STREAM,[a.A.VALUE,a.A.ID]),a.A.ACCESSIBILITY,[a.A.VALUE,a.A.ID]);var n=bi(bi(bi(bi(bi(bi(bi(bi(n,a.A.ROLE,[a.A.VALUE,a.A.ID]),a.A.RATING,[a.A.VALUE,a.A.ID]),a.A.VIEWPOINT,[a.A.VALUE,a.A.ID]),a.A.CONTENT_COMPONENT,[a.A.CONTENT_TYPE]),a.A.REPRESENTATION,[a.A.ID,a.A.DEPENDENCY_ID,a.A.MEDIA_STREAM_STRUCTURE_ID]),a.A.SUBSET,[a.A.ID]),a.A.METRICS,[a.A.METRICS_MINUS]),a.A.REPORTING,[a.A.VALUE,a.A.ID]);return!!n.hasOwnProperty(t)&&void 0!==(n=n[t])&&0<=n.indexOf(e.name)},function(e){return String(e)}],r=(n=Ti(n),t);if(!(n=wi()?Reflect.construct(n,i||[],Ti(t).constructor):n.apply(t,i))||"object"!==Ei(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var t=e,n=vi;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),Si(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}();function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ci=function(){return!!e})()}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){return(Pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Di=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,ki=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=this,n=e,i=[function(e){for(var t=[a.A.MIN_BUFFER_TIME,a.A.MEDIA_PRESENTATION_DURATION,a.A.MINIMUM_UPDATE_PERIOD,a.A.TIMESHIFT_BUFFER_DEPTH,a.A.MAX_SEGMENT_DURATION,a.A.MAX_SUBSEGMENT_DURATION,a.A.SUGGESTED_PRESENTATION_DELAY,a.A.START,r.A.START_TIME,a.A.DURATION],n=t.length,i=0;i<n;i++)if(e.nodeName===t[i])return Di.test(e.value);return!1},function(e){e=Di.exec(e);var t=31536e3*parseFloat(e[3]||0)+2592e3*parseFloat(e[5]||0)+86400*parseFloat(e[7]||0)+3600*parseFloat(e[9]||0)+60*parseFloat(e[11]||0)+parseFloat(e[13]||0);return void 0!==e[1]?-t:t}],o=(n=Li(n),t);if(!(n=Ci()?Reflect.construct(n,i||[],Li(t).constructor):n.apply(t,i))||"object"!==Ii(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=o))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var t=e,n=vi;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),Pi(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}();function xi(e){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Mi=function(){return!!e})()}function Oi(e){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ni(e,t){return(Ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Fi=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,Bi=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=this,n=e,i=[function(e){return Fi.test(e.value)},function(e){e=Fi.exec(e);var t,n=Date.UTC(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10),parseInt(e[4],10),parseInt(e[5],10),e[6]&&parseInt(e[6],10)||0,e[7]&&1e3*parseFloat(e[7])||0);return e[9]&&e[10]&&(t=60*parseInt(e[9],10)+parseInt(e[10],10),n+=("+"===e[8]?-1:1)*t*60*1e3),new Date(n)}],r=(n=Oi(n),t);if(!(n=Mi()?Reflect.construct(n,i||[],Oi(t).constructor):n.apply(t,i))||"object"!==xi(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var t=e,n=vi;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),Ni(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}();function Ui(e){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ji=function(){return!!e})()}function Gi(e){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vi(e,t){return(Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Hi=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Yi=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=this,n=e,i=[function(e){return Hi.test(e.value)},function(e){return parseFloat(e)}],r=(n=Gi(n),t);if(!(n=ji()?Reflect.construct(n,i||[],Gi(t).constructor):n.apply(t,i))||"object"!==Ui(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var t=e,n=vi;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),Vi(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}();function zi(e){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t,n){return(t=function(e){return e=function(e){if("object"!=zi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=zi(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==zi(e)?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ki(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ki=function(){return!!e})()}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qi(e,t){return(Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xi=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=this,n=e,i=[function(e,t){var n=Wi(Wi(Wi(Wi(Wi({},a.A.ADAPTATION_SET,[a.A.LANG]),a.A.REPRESENTATION,[a.A.LANG]),a.A.CONTENT_COMPONENT,[a.A.LANG]),a.A.LABEL,[a.A.LANG]),a.A.GROUP_LABEL,[a.A.LANG]);return!!n.hasOwnProperty(t)&&void 0!==(n=n[t])&&0<=n.indexOf(e.name)},function(e){return Bn()(e)||String(e)}],r=(n=qi(n),t);if(!(n=Ki()?Reflect.construct(n,i||[],qi(t).constructor):n.apply(t,i))||"object"!==zi(n)&&"function"!=typeof n){if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(n=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return n}var t=e,n=vi;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),Qi(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}();function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Ji(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Ji(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Ji(e)?e:String(e)}(i.key),i)}})((Zi=er).prototype,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),Object.defineProperty(Zi,"prototype",{writable:!1});var Zi,$i=er;function er(e){if(!(this instanceof er))throw new TypeError("Cannot call a class as a function");this._name=e,this._merge=e&&e.length&&e.charAt(0)===e.charAt(0).toUpperCase()}function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=tr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=tr(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==tr(e)?e:String(e)}(i.key),i)}})((nr=rr).prototype,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),Object.defineProperty(nr,"prototype",{writable:!1});var nr,ir=rr;function rr(e,t,n){var i=this;if(!(this instanceof rr))throw new TypeError("Cannot call a class as a function");this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach((function(e){i._properties.push(new $i(e))}))}function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(or=function(){return!!e})()}function sr(e){return(sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lr(e,t){return(lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ur=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=[a.A.PROFILES,a.A.WIDTH,a.A.HEIGHT,a.A.SAR,a.A.FRAMERATE,a.A.AUDIO_SAMPLING_RATE,a.A.MIME_TYPE,a.A.SEGMENT_PROFILES,a.A.CODECS,a.A.MAXIMUM_SAP_PERIOD,a.A.START_WITH_SAP,a.A.MAX_PLAYOUT_RATE,a.A.CODING_DEPENDENCY,a.A.SCAN_TYPE,a.A.FRAME_PACKING,a.A.AUDIO_CHANNEL_CONFIGURATION,a.A.CONTENT_PROTECTION,a.A.ESSENTIAL_PROPERTY,a.A.ESSENTIAL_PROPERTY+"_asArray",a.A.SUPPLEMENTAL_PROPERTY,a.A.INBAND_EVENT_STREAM],n=this,i=e,r=(t=[a.A.ADAPTATION_SET,t,[new ir(a.A.REPRESENTATION,t,[new ir(a.A.SUB_REPRESENTATION,t)])]],i=sr(i),n);if(!(i=or()?Reflect.construct(i,t||[],sr(n).constructor):i.apply(n,t))||"object"!==ar(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}var t=e,n=ir;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&lr(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}();function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hr=function(){return!!e})()}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var pr=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t=[a.A.SEGMENT_BASE,a.A.SEGMENT_TEMPLATE,a.A.SEGMENT_LIST],n=this,i=e,r=(t=[a.A.PERIOD,t,[new ir(a.A.ADAPTATION_SET,t,[new ir(a.A.REPRESENTATION,t)])]],i=dr(i),n);if(!(i=hr()?Reflect.construct(i,t||[],dr(n).constructor):i.apply(n,t))||"object"!==cr(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=r))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}var t=e,n=ir;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&fr(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}();function mr(e){var t=this.context,n={parse:function(e){var t,n,r=window.performance.now();if(e=a.xml_str2json(e))return t=window.performance.now(),e.Patch?((e=e.Patch).add_asArray&&e.add_asArray.forEach((function(e){return o.run(e)})),e.replace_asArray&&e.replace_asArray.forEach((function(e){return o.run(e)}))):(e=e.MPD,o.run(e)),n=window.performance.now(),i.info("Parsing complete: ( xml2json: "+(t-r).toPrecision(3)+"ms, objectiron: "+(n-t).toPrecision(3)+"ms, total: "+((n-r)/1e3).toPrecision(3)+"s)"),e.protocol="DASH",e;throw new Error("parsing the manifest failed")},getMatchers:function(){return r},getIron:function(){return o}},i=(e=e||{}).debug.getLogger(n),r=[new ki,new Bi,new Yi,new Xi,new Ri],a=new ui({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:r}),o=gi(t).create({adaptationset:new ur,period:new pr});return n}mr.__dashjs_factory_name="DashParser";var gr=u.A.getClassFactory(mr);function _r(e){var t,n,i,o,u,c=this.context,h=(e=e||{}).debug,d=e.settings,f=(0,s.A)(c).getInstance(),p=(0,K.A)(c).getInstance(),m=e.mssHandler,g=e.errHandler;function _(e){f.trigger(l.A.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=new Date,s=new si(e,R.G.MPD_TYPE);t&&(s.serviceLocation=t),r&&(s.queryParams=r),s.requestStartDate||(s.requestStartDate=a),f.trigger(l.A.MANIFEST_LOADING_STARTED,{request:s}),i.load({request:s,success:function(t,i,r){var a,s,g;if(o)if(r&&r!==e?(s=p.parseBaseUrl(r),a=r):(p.isRelative(e)&&(e=p.resolve(e,window.location.href)),s=p.parseBaseUrl(e)),"No Content"!=i)if(null===u&&(r=null,u=-1<(i=t).indexOf("SmoothStreamingMedia")?(m&&(r=m.createMssParser(),m.createMssFragmentProcessor(),m.registerEvents()),r):-1<i.indexOf("MPD")||-1<i.indexOf("Patch")?gr(c).create({debug:h}):r),null!==u){o.setMatchers(u.getMatchers()),o.setIron(u.getIron());try{g=u.parse(t)}catch(t){return void f.trigger(l.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.A(T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}g?(g.url=a||e,g.originalUrl||(g.originalUrl=g.url),d&&d.get().streaming.enableManifestDurationMismatchFix&&g.mediaPresentationDuration&&1<g.Period_asArray.length&&(i=g.Period_asArray.reduce((function(e,t){return e+t.duration}),0),!isNaN(i))&&g.mediaPresentationDuration>i&&(n.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),g.mediaPresentationDuration=i),g.baseUri=s,g.loadedTime=new Date,o.resolveManifestOnLoad(g),f.trigger(l.A.ORIGINAL_MANIFEST_LOADED,{originalManifest:t})):f.trigger(l.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.A(T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}else f.trigger(l.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.A(T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))});else f.trigger(l.A.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(t,n,i){f.trigger(l.A.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.A(T.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,T.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(e,", ").concat(i))})}})},reset:function(){f.off(l.A.XLINK_READY,_,t),m&&m.reset(),o&&(o.reset(),o=null),i&&(i.abort(),i=null)}},n=h.getLogger(t),f.on(l.A.XLINK_READY,_,t),i=Nt(c).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:p,constants:r.A,dashConstants:a.A,errors:T,requestTimeout:e.settings.get().streaming.manifestRequestTimeout}),o=fi(c).create({errHandler:g,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),u=null,t}_r.__dashjs_factory_name="ManifestLoader";var yr=u.A.getClassFactory(_r);function vr(){var e=this.context,t=(0,s.A)(e).getInstance();return{error:function(e){t.trigger(l.A.ERROR,{error:e})}}}vr.__dashjs_factory_name="ErrorHandler";var Ar=u.A.getSingletonFactory(vr),Er=n(7928);function br(){var e,t,n,i,a,o,u=this.context,h=(0,s.A)(u).getInstance();function d(e,i){var a;return i&&i.Period_asArray&&0!==i.Period_asArray.length?(a=[],i.Period_asArray.forEach((function(i){var s,u;a.push((s=i,u=e,new Promise((function(e){var i;s&&s.AdaptationSet_asArray&&0!==s.AdaptationSet_asArray.length?(i=[],s.AdaptationSet_asArray.forEach((function(e){var a,s;t.getIsTypeOf(e,u)&&i.push((a=e,s=u,new Promise((function(e){var i,l;a.Representation_asArray&&0!==a.Representation_asArray.length?(i=[],l=[],a.Representation_asArray.forEach((function(e,o){e=function(e,t){switch(s){case r.A.VIDEO:return{codec:t,width:e.width||null,height:e.height||null,framerate:e.frameRate||null,bitrate:e.bandwidth||null};case r.A.AUDIO:return n=e.audioSamplingRate||null,{codec:t,bitrate:e.bandwidth||null,samplerate:n};default:return null}var n}(e,t.getCodec(a,o,!1)),l.push(e),i.push(n.supportsCodec(e,s))})),Promise.all(i).then((function(t){a.Representation_asArray=a.Representation_asArray.filter((function(e,n){return t[n]||o.debug("[Stream] Codec ".concat(l[n].codec," not supported ")),t[n]})),e()})).catch((function(){e()}))):e()}))))})),Promise.all(i).then((function(){s.AdaptationSet_asArray=s.AdaptationSet_asArray.filter((function(e){var t=e.Representation_asArray&&0<e.Representation_asArray.length;return t||(h.trigger(l.A.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),o.warn("AdaptationSet has been removed because of no supported Representation")),t})),e()})).catch((function(){e()}))):e()}))))})),Promise.all(a)):Promise.resolve()}return e={setConfig:function(e){e&&(e.adapter&&(t=e.adapter),e.capabilities&&(n=e.capabilities),e.settings&&(i=e.settings),e.customParametersModel)&&(a=e.customParametersModel)},filterUnsupportedFeatures:function(e){return new Promise((function(s){var l=[];l.push(d(r.A.VIDEO,e)),l.push(d(r.A.AUDIO,e)),Promise.all(l).then((function(){var r,l;i.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(l=e)&&l.Period_asArray&&0!==l.Period_asArray.length&&l.Period_asArray.forEach((function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){var i=t.getEssentialPropertiesForRepresentation(e);if(i&&0<i.length)for(var r=0;r<i.length;){if(!n.supportsEssentialProperty(i[r]))return o.debug("[Stream] EssentialProperty not supported: "+i[r].schemeIdUri),!1;r+=1}return!0})),e.Representation_asArray&&0<e.Representation_asArray.length)}))})),l=e,(r=a.getCustomCapabilitiesFilters())&&0!==r.length&&l&&l.Period_asArray&&0!==l.Period_asArray.length&&l.Period_asArray.forEach((function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){return!r.some((function(t){return!t(e)}))})),e.Representation_asArray&&0<e.Representation_asArray.length)}))})),s()})).catch((function(){s()}))}))}},o=(0,c.A)(u).getInstance().getLogger(e),e}br.__dashjs_factory_name="CapabilitiesFilter";var wr=u.A.getSingletonFactory(br);t=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},Object.defineProperty(t,"prototype",{writable:!1});var Tr=t;function Sr(){var e;return{initialize:function(t){if(e=new Tr,!t)return null;var n=t.indexOf("#");if(-1!==n)for(var i=t.substr(n+1).split("&"),r=0,a=i.length;r<a;++r){var o,s=i[r],l=s.indexOf("=");-1!==l&&(o=s.substring(0,l),e.hasOwnProperty(o))&&(e[o]=s.substr(l+1))}},getURIFragmentData:function(){return e}}}Sr.__dashjs_factory_name="URIFragmentModel";var Rr=u.A.getSingletonFactory(Sr);function Ir(){var e,t=this.context,n=(0,s.A)(t).getInstance();return{getValue:function(){return e},setValue:function(t){(e=t)&&n.trigger(l.A.MANIFEST_LOADED,{data:t})}}}Ir.__dashjs_factory_name="ManifestModel";var Cr=u.A.getSingletonFactory(Ir);function Lr(){var e,t,n,i,r=this.context,a=(0,S.A)(r).getInstance();function o(e,n){return isNaN(e)?0:0<e?(n&&t.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e<-.5?(n&&t.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(-.5,": ").concat(-50,"% playback speed.")),-.5):e}function s(e,n){return isNaN(e)?0:e<0?(n&&t.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):1<e?(n&&t.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):e}function l(){var e=0<a.get().streaming.buffer.stableBufferTime?a.get().streaming.buffer.stableBufferTime:a.get().streaming.buffer.fastSwitchEnabled?20:12,t=n.getLiveDelay();return!isNaN(t)&&0<t?Math.min(e,t):e}return e={getCatchupMaxDrift:function(){var e;return!isNaN(a.get().streaming.liveCatchup.maxDrift)&&0<a.get().streaming.liveCatchup.maxDrift?a.get().streaming.liveCatchup.maxDrift:(e=i.getServiceDescriptionSettings())&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&0<e.liveCatchup.maxDrift?e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==a.get().streaming.liveCatchup.enabled?a.get().streaming.liveCatchup.enabled:n.getInitialCatchupModeActivated()},getStableBufferTime:l,getInitialBufferLevel:function(){var e=a.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(l(),e)},getRetryAttemptsForType:function(e){var t=isNaN(a.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:a.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return n.getLowLatencyModeEnabled()?a.get().streaming.retryAttempts[e]*t:a.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(a.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:a.get().streaming.retryIntervals.lowLatencyReductionFactor;return n.getLowLatencyModeEnabled()?a.get().streaming.retryIntervals[e]/t:a.get().streaming.retryIntervals[e]},getCatchupPlaybackRates:function(e){var t,n=a.get().streaming.liveCatchup.playbackRate;return isNaN(n.min)&&isNaN(n.max)?!(t=i.getServiceDescriptionSettings())||!t.liveCatchup||isNaN(t.liveCatchup.playbackRate.min)&&isNaN(t.liveCatchup.playbackRate.max)?{min:-.5,max:.5}:{min:o((t=t.liveCatchup.playbackRate).min,e),max:s(t.max,e)}:{min:o(n.min,e),max:s(n.max,e)}},getAbrBitrateParameter:function(e,t){try{var n,r=a.get().streaming.abr[e][t];return isNaN(r)||-1===r?(n=i.getServiceDescriptionSettings())&&n[e]&&!isNaN(n[e][t])?n[e][t]:-1:r}catch(e){return-1}},setConfig:function(e){e.playbackController&&(n=e.playbackController),e.serviceDescriptionController&&(i=e.serviceDescriptionController)},reset:function(){}},t=(0,c.A)(r).getInstance().getLogger(e),e}Lr.__dashjs_factory_name="MediaPlayerModel";var Pr=u.A.getSingletonFactory(Lr),Dr=n(4986);function kr(e){var t=(e=e||{}).abrController,n=e.switchHistory,i=e.droppedFramesHistory,r=e.currentRequest,a=e.useBufferOccupancyABR,o=e.useL2AABR,s=e.useLoLPABR,l=e.streamProcessor?e.streamProcessor.getScheduleController():null,u=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,c=e.videoModel||null;function h(){return u?u.mediaInfo:null}return{getMediaType:function(){var e=h();return e?e.type:null},getMediaInfo:h,getDroppedFramesHistory:function(){return i},getCurrentRequest:function(){return r},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=h();return e?e.streamInfo:null},getScheduleController:function(){return l},getAbrController:function(){return t},getRepresentationInfo:function(){return u},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return o},useLoLPABR:function(){return s},getVideoModel:function(){return c}}}kr.__dashjs_factory_name="RulesContext";var xr=u.A.getClassFactory(kr),Mr=n(9783);function Or(){var e=[],t=[];return{push:function(n){n.newValue===Mr.A.NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var i=(r=n.newValue-n.oldValue)<0?1:0,r=i?-r:0,a=i?0:1;e[n.oldValue].drops+=i,e[n.oldValue].dropSize+=r,e[n.oldValue].noDrops+=a,t.push({idx:n.oldValue,noDrop:a,drop:i,dropSize:r}),8<t.length&&(n=t.shift(),e[n.idx].drops-=n.drop,e[n.idx].dropSize-=n.dropSize,e[n.idx].noDrops-=n.noDrop)},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}Or.__dashjs_factory_name="SwitchRequestHistory";var Nr=u.A.getClassFactory(Or);function Fr(){var e={},t={},n={};return{push:function(i,r,a){var o,s;r&&(e[i]||(e[i]=[],t[i]=0,n[i]=0),s=a&&a.droppedVideoFrames?a.droppedVideoFrames:0,a=a&&a.totalVideoFrames?a.totalVideoFrames:0,o=s-t[i],t[i]=s,s=a-n[i],n[i]=a,a=e[i],isNaN(r)||(a[r]?(a[r].droppedVideoFrames+=o,a[r].totalVideoFrames+=s):a[r]={droppedVideoFrames:o,totalVideoFrames:s}))},getFrameHistory:function(t){return e[t]},clearForStream:function(i){try{delete e[i],delete t[i],delete n[i]}catch(i){}},reset:function(){e={},t={},n={}}}}Fr.__dashjs_factory_name="DroppedFramesHistory";var Br=u.A.getClassFactory(Fr);function Ur(e){var t,n,i,a,o=this.context,l=3,u=4,c=4,d=1.3,f=1.3,p=(e=e||{}).settings,m=(0,s.A)(o).getInstance();function g(e,t,n,i){var r=Math.pow(.5,n/i.fast);e.fastEstimate=(1-r)*t+r*e.fastEstimate,r=Math.pow(.5,n/i.slow),e.slowEstimate=(1-r)*t+r*e.slowEstimate,e.totalWeight+=n}function _(e,o,s){return p.get().streaming.abr.movingAverageMethod!==r.A.MOVING_AVERAGE_SLIDING_WINDOW?(y=o,A=(_=e)?E.throughputHalfLife:E.latencyHalfLife,!(y=(_?i:a)[y])||y.totalWeight<=0?NaN:(v=y.fastEstimate/(1-Math.pow(.5,y.totalWeight/A.fast)),y=y.slowEstimate/(1-Math.pow(.5,y.totalWeight/A.slow)),_?Math.min(v,y):Math.max(v,y))):(h=e,m=o,g=s,A=function(){var e,i=h?(e=t[m],g?l:u):(e=n[m],c);if(e){if(i>=e.length)i=e.length;else if(h)for(var r=1;r<i;++r){var a=e[e.length-r]/e[e.length-r-1];if((f<=a||a<=1/d)&&(i+=1)===e.length)break}}else i=0;return i}(),_=(h?t:n)[m],0!==A&&_&&0!==_.length?(_=_.slice(-A)).reduce((function(e,t){return e+t}))/_.length:NaN);var h,m,g,_,y,v,A}function y(e,t){return _(!0,e,t)}function v(e){t[e]=t[e]||[],n[e]=n[e]||[],i[e]=i[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},a[e]=a[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function A(){t={},n={},i={},a={}}var E={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}};return A(),{push:function(e,o,s){if(o.trace&&o.trace.length){var l=o.tresponse.getTime()-o.trequest.getTime()||1,u=o._tfinish.getTime()-o.tresponse.getTime()||1,c=o.trace.reduce((function(e,t){return e+t.b[0]}),0),d=0;if(0!==(s=o._fileLoaderType&&o._fileLoaderType===r.A.FILE_LOADER_TYPES.FETCH?o.trace.reduce((function(e,t){return e+t.d}),0):s?u:l+u)&&(d=Math.round(8*c/s)),o.cmsd&&(c=o.cmsd.dynamic&&o.cmsd.dynamic.etp?o.cmsd.dynamic.etp:null)&&0<(s=p.get().streaming.cmsd.abr.etpWeightRatio)&&s<=1&&(d=d*(1-s)+c*s),v(e),c=u,(s=e)===r.A.VIDEO?c<p.get().streaming.cacheLoadThresholds[r.A.VIDEO]:s===r.A.AUDIO&&c<p.get().streaming.cacheLoadThresholds[r.A.AUDIO]){if(0<t[e].length&&!t[e].hasCachedEntries)return;t[e].hasCachedEntries=!0}else t[e]&&t[e].hasCachedEntries&&(delete t[s=e],delete n[s],delete i[s],delete a[s],v(s));t[e].push(d),m.trigger(h.A.THROUGHPUT_MEASUREMENT_STORED,{throughput:d,mediaType:e,httpRequest:o}),20<t[e].length&&t[e].shift(),n[e].push(l),20<n[e].length&&n[e].shift(),g(i[e],d,.001*u,E.throughputHalfLife),g(a[e],l,1,E.latencyHalfLife)}},getAverageThroughput:y,getSafeAverageThroughput:function(e,t){return e=y(e,t),isNaN(e)||(e*=p.get().streaming.abr.bandwidthSafetyFactor),e},getAverageLatency:function(e){return _(!1,e)},reset:A}}Ur.__dashjs_factory_name="ThroughputHistory";var jr=u.A.getClassFactory(Ur);function Gr(){var e,t,n,i,a,u,d,f,p,m,g,_,v,A,E,b,w,T,S,I,C,L,P,D,k,x,M,O=this.context,N=(0,c.A)(O).getInstance(),F=(0,s.A)(O).getInstance();function B(){a={},u={},f={},d={},I={},P={},D={},k={},void 0===m&&(m=!1),C&&C.reset(),L=C=S=void 0,clearTimeout(p),p=null}function U(t){var r,a,s=t.request.mediaType,l=t.streamId;s&&l&&d[l]&&M.get().streaming.abr.autoSwitchBitrate[s]&&(r=d[l][s])&&(a=xr(O).create({abrController:e,streamProcessor:r,currentRequest:t.request,useBufferOccupancyABR:P[s],useL2AABR:D[s],useLoLPABR:k[s],videoModel:A}),(a=n.shouldAbandonFragment(a,l)).quality>Mr.A.NO_CHANGE)&&r.getFragmentModel().getRequests({state:y.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(f[l][s].state=o.A.ABANDON_LOAD,I[l][s].reset(),I[l][s].push({oldValue:z(s,l),newValue:a.quality,confidence:1,reason:a.reason}),W(s,i.getActiveStreamInfo(),a.quality,a.reason),clearTimeout(p),p=setTimeout((function(){f[l][s].state=o.A.ALLOW_LOAD,p=null}),M.get().streaming.abandonLoadTimeout))}function j(e){e.mediaType===r.A.VIDEO&&(void 0!==S&&C.push(e.streamId,S,A.getPlaybackQuality()),S=e.newQuality)}function G(e){var n,i;if(e.metric!==o.A.HTTP_REQUEST||!e.value||e.value.type!==R.G.MEDIA_SEGMENT_TYPE||e.mediaType!==r.A.AUDIO&&e.mediaType!==r.A.VIDEO||L.push(e.mediaType,e.value,M.get().streaming.abr.useDeadTimeLatency),e.metric===o.A.BUFFER_LEVEL&&(e.mediaType===r.A.AUDIO||e.mediaType===r.A.VIDEO)&&(n=e.mediaType,i=.001*e.value.level,M.get().streaming.abr.ABRStrategy===r.A.ABR_STRATEGY_DYNAMIC)){var a=n;e=i;try{var s=E.getStableBufferTime(),l=.5*s,u=P[a],c=(u?l:s)<e;(P[a]=c)!==u&&(c?t.info("["+a+"] switching from throughput to buffer occupancy ABR rule (buffer: "+e.toFixed(3)+")."):t.info("["+a+"] switching from buffer occupancy to throughput ABR rule (buffer: "+e.toFixed(3)+")."))}catch(a){t.error(a)}}}function V(e,n){try{var i;return a[n]=a[n]||{},a[n].hasOwnProperty(e)||(a[n][e]=0),y=e,S=T=a[A=n][y],i=S=d[A]&&d[A][y]&&(void 0!==(b=H(y,A))&&(S=Math.max(T,b)),void 0!==(T=function(e,t){try{var n=E.getAbrBitrateParameter("maxBitrate",e);return-1<n?Q(d[t][e].getMediaInfo(),n,t):void 0}catch(e){}}(y,A)))?Math.min(S,T):S,h=i,f=e,p=a[n][f],f=M.get().streaming.abr.maxRepresentationRatio[f],i=function(e,t,n){if(t!==r.A.VIDEO||!M.get().streaming.abr.limitBitrateByPortal||!d[n]||!d[n][t])return e;m||J(),n=d[n][t].getStreamInfo();var i=v.getAdaptationForType(n.index,t,n).Representation_asArray,a=e;if(0<g&&0<_){for(;0<a&&i[a]&&g<i[a].width&&g-i[a-1].width<i[a].width-g;)--a;for(;a<i.length-1&&i[a].width===i[a+1].width;)a+=1}return a}(i=isNaN(f)||1<=f||f<0?h:Math.min(h,Math.round(p*f)),e,n),M.get().streaming.cmsd.enabled&&M.get().streaming.cmsd.abr.applyMb&&(o=i,l=n,i="video"!==(s=e)||(u=w.getMaxBitrate(s))<0?o:(u-=(c=q(l,"audio",z("audio",l)))?c.bitrate/1e3:0,c=Q(d[l][s].getMediaInfo(),u,l),t.debug("Stream ID: "+l+" ["+s+"] Apply max bit rate from CMSD: "+u),Math.min(o,c))),i}catch(e){}var o,s,l,u,c,h,f,p,y,A,b,T,S}function H(e,t){try{var n=e,i=t;try{var r,a,o,s=E.getAbrBitrateParameter("minBitrate",n);if(-1<s)return(a=X(r=d[i][n].getMediaInfo()))[o=Q(r,s,i)]&&o<a.length-1&&a[o].bitrate<1e3*s&&o++,o}catch(n){}}catch(e){}}function z(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{return t=t||i.getActiveStreamInfo().id,e&&d[t]&&d[t][e]&&t?(u[t]=u[t]||{},u[t].hasOwnProperty(e)||(u[t][e]=0),u[t][e]):0}catch(e){return 0}}function W(e,t,n){var i,r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;t&&t.id&&e&&(i=z(e,t=t.id),(0,Y.zQ)(n),r=V(e,t),n!==i)&&0<=n&&n<=r&&K(e,i,n,r,a,t)}function K(e,n,i,r,a,o){var s,c,h;e&&d[o]&&d[o][e]&&(c=(s=d[o][e].getStreamInfo())&&s.manifestInfo&&s.manifestInfo.isDynamic,h=x.getCurrentBufferLevel(e),t.info("Stream ID: "+o+" ["+e+"] switch from "+n+" to "+i+"/"+r+" (buffer: "+h+") "+(a?JSON.stringify(a):".")),u[o]=u[o]||{},h=q(o,e,u[o][e]=i),F.trigger(l.A.QUALITY_CHANGE_REQUESTED,{oldQuality:n,newQuality:i,reason:a,streamInfo:s,bitrateInfo:h,maxIdx:r,mediaType:e},{streamId:s.id,mediaType:e}),o=L.getAverageThroughput(e,c),isNaN(o)||T.setSavedBitrateSettings(e,o))}function q(e,t,n){return t&&d&&d[e]&&d[e][t]&&X(d[e][t].getMediaInfo())[n]||null}function Q(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(n=e&&e.type?d[n][e.type].getRepresentationInfo():null,M.get().streaming.abr.useDeadTimeLatency&&i&&n&&n.fragmentDuration){if((n=n.fragmentDuration)<(i/=1e3))return 0;t*=1-i/n}for(var r=X(e),a=r.length-1;0<=a;a--)if(1e3*t>=r[a].bitrate)return a;return 0}function X(e){var t=[];if(e&&e.bitrateList)for(var n,i=e.bitrateList,r=e.type,a=0,o=i.length;a<o;a++)(n=new $t).mediaType=r,n.qualityIndex=a,n.bitrate=i[a].bandwidth,n.width=i[a].width,n.height=i[a].height,n.scanType=i[a].scanType,t.push(n);return t}function J(){var e;A&&(e=M.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,g=A.getClientWidth()*e,_=A.getClientHeight()*e)}return e={initialize:function(){C=Br(O).create(),L=jr(O).create({settings:M}),(n=(0,Dr.A)(O).create({dashMetrics:x,customParametersModel:b,mediaPlayerModel:E,settings:M})).initialize(),F.on(h.A.QUALITY_CHANGE_RENDERED,j,e),F.on(h.A.METRIC_ADDED,G,e),F.on(l.A.LOADING_PROGRESS,U,e)},isPlayingAtTopQuality:function(e){e=e?e.id:null;var t=z(r.A.AUDIO,e),n=z(r.A.VIDEO,e);return t===V(r.A.AUDIO,e)&&n===V(r.A.VIDEO,e)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id;return e=e.representationCount-1,a[n]=a[n]||{},a[n][t]=e},clearDataForStream:function(e){C&&C.clearForStream(e),d[e]&&delete d[e],I[e]&&delete I[e],f[e]&&delete f[e]},getThroughputHistory:function(){return L},getBitrateList:X,getQualityForBitrate:Q,getTopBitrateInfoFor:function(e){var t,n=(n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||i.getActiveStreamInfo().id;return e&&d&&d[n]&&d[n][e]&&(t=V(e,n),X(d[n][e].getMediaInfo())[t])||null},getMinAllowedIndexFor:H,getMaxAllowedIndexFor:V,getInitialBitrateFor:function(e,t){var n,i,a;if(T&&T.hasOwnProperty("getSavedBitrateSettings"))return e===r.A.TEXT?NaN:(n=T.getSavedBitrateSettings(e),a=E.getAbrBitrateParameter("initialBitrate",e),i=M.get().streaming.abr.initialRepresentationRatio[e],-1===a?-1<i?(t=d[t][e].getStreamInfo(),t=v.getAdaptationForType(t.index,e,t).Representation_asArray,Array.isArray(t)?t[Math.max(Math.round(t.length*i)-1,0)].bandwidth/1e3:0):isNaN(n)?e===r.A.VIDEO?1e3:100:n:a);throw new Error(r.A.MISSING_CONFIG_ERROR)},getQualityFor:z,getAbandonmentStateFor:function(e,t){return f[e]&&f[e][t]?f[e][t].state:null},setPlaybackQuality:W,checkPlaybackQuality:function(t,i){try{var r,a,s,l,u,c,h;return!!(t&&d&&d[i]&&d[i][t])&&(C&&(r=A.getPlaybackQuality())&&C.push(i,S,r),!!M.get().streaming.abr.autoSwitchBitrate[t]&&(a=z(t,i),s=xr(O).create({abrController:e,switchHistory:I[i][t],droppedFramesHistory:C,streamProcessor:d[i][t],currentValue:a,useBufferOccupancyABR:P[t],useL2AABR:D[t],useLoLPABR:k[t],videoModel:A}),l=H(t,i),u=V(t,i),h=(c=n.getMaxQuality(s)).quality,u<(h=void 0!==l&&(h>Mr.A.NO_CHANGE?h:a)<l?l:h)&&(h=u),I[i][t].push({oldValue:a,newValue:h}),h>Mr.A.NO_CHANGE)&&h!==a&&(f[i][t].state===o.A.ALLOW_LOAD||h<a)&&(K(t,a,h,u,c.reason,i),!0))}catch(t){return!1}},setElementSize:J,setWindowResizeEventCalled:function(e){m=e},registerStreamType:function(e,t){var n=t.getStreamInfo().id;d[n]||(d[n]={}),I[n]||(I[n]={}),f[n]||(f[n]={}),I[n][e]=Nr(O).create(),d[n][e]=t,f[n][e]={},f[n][e].state=o.A.ALLOW_LOAD,t=e,(n=M.get().streaming.abr.ABRStrategy)===r.A.ABR_STRATEGY_L2A?(P[t]=!1,k[t]=!1,D[t]=!0):n===r.A.ABR_STRATEGY_LoLP?(P[t]=!1,k[t]=!0,D[t]=!1):n===r.A.ABR_STRATEGY_BOLA?(P[t]=!0,k[t]=!1,D[t]=!1):n===r.A.ABR_STRATEGY_THROUGHPUT?(P[t]=!1,k[t]=!1,D[t]=!1):n===r.A.ABR_STRATEGY_DYNAMIC&&(P[t]=!(!P||!P[t])&&P[t],k[t]=!1,D[t]=!1),e===r.A.VIDEO&&J()},unRegisterStreamType:function(e,t){try{d[e]&&d[e][t]&&delete d[e][t],I[e]&&I[e][t]&&delete I[e][t],f[e]&&f[e][t]&&delete f[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(i=e.streamController),e.domStorage&&(T=e.domStorage),e.mediaPlayerModel&&(E=e.mediaPlayerModel),e.customParametersModel&&(b=e.customParametersModel),e.cmsdModel&&(w=e.cmsdModel),e.dashMetrics&&(x=e.dashMetrics),e.adapter&&(v=e.adapter),e.videoModel&&(A=e.videoModel),e.settings)&&(M=e.settings)},reset:function(){B(),F.off(l.A.LOADING_PROGRESS,U,e),F.off(h.A.QUALITY_CHANGE_RENDERED,j,e),F.off(h.A.METRIC_ADDED,G,e),n&&n.reset()}},t=N.getLogger(e),B(),e}Gr.__dashjs_factory_name="AbrController";var Vr=u.A.getSingletonFactory(Gr),Hr=(Vr.QUALITY_DEFAULT=0,u.A.updateSingletonFactory(Gr.__dashjs_factory_name,Vr),Vr),Yr=new Map([[r.A.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[r.A.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[r.A.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[r.A.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function zr(){var e,t,n,i,a,o,u,h,d=this.context,f=(0,s.A)(d).getInstance(),p=[];function m(){n&&(n.playbackRate=1,n.removeEventListener("canplay",m))}function g(){return 0<p.length}function _(){var e;n&&g()&&0===n.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),n.dispatchEvent(e))}function y(e,t){n&&n.addEventListener(e,t)}function v(e,t){n&&n.removeEventListener(e,t)}function A(){return n?n.readyState:NaN}function E(){return n?n.buffered:null}function b(e,t,i,r,a){if(n)for(var o=0;o<n.textTracks.length;o++)if(n.textTracks[o].kind===e&&(!t||n.textTracks[o].label==t)&&n.textTracks[o].language===i&&n.textTracks[o].isTTML===r&&n.textTracks[o].isEmbedded===a)return n.textTracks[o];return null}function w(e,t){return e===r.A.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||A()>=e?(t(),null):(i=Yr.get(e),a=t,y(i,n),{func:n,event:i});function n(){v(i,n),a(i)}var i,a}return e={addEventListener:y,addTextTrack:function(e,t,i,r,a){var o;return n?((o=b(e,t,i,r,a))||((o=n.addTextTrack(e,t,i)).isEmbedded=a,o.isTTML=r),o):null},appendChild:function(e){n&&(n.appendChild(e),void 0!==e.isTTML)&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded)},getBufferRange:E,getClientHeight:function(){return n?n.clientHeight:NaN},getClientWidth:function(){return n?n.clientWidth:NaN},getElement:function(){return n},getEnded:function(){return n?n.ended:null},getPlaybackQuality:function(){var e,t;return n?(e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t=null,"getVideoPlaybackQuality"in n?t=n.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),t):null},getPlaybackRate:function(){return n?n.playbackRate:null},getPlayedRanges:function(){return n?n.played:null},getReadyState:A,getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return o},getTextTrack:b,getTextTracks:function(){return n?n.textTracks:[]},getTime:function(){return n?isNaN(i)?n.currentTime:i:null},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){var e;return n&&(e=n.parentNode.host||n.parentNode)?n.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},getVideoRelativeOffsetTop:function(){var e;return n&&(e=n.parentNode.host||n.parentNode)?n.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoWidth:function(){return n?n.videoWidth:NaN},getVttRenderingDiv:function(){return u},initialize:function(){f.on(l.A.PLAYBACK_PLAYING,_,this)},isPaused:function(){return n?n.paused:null},isSeeking:function(){return n?n.seeking||!isNaN(i):null},isStalled:g,pause:function(){n&&(n.pause(),n.autoplay=!1)},play:function(){var e;n&&(n.autoplay=!0,e=n.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch((function(e){"NotAllowedError"===e.name&&f.trigger(l.A.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))}))},removeChild:function(e){n&&n.removeChild(e)},removeEventListener:v,reset:function(){clearTimeout(h),f.off(l.A.PLAYBACK_PLAYING,_,this)},setCurrentTime:function(e,t){n&&(a&&a.func&&a.event&&v(a.event,a.func),i=e,a=w(r.A.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){if(n)if(n.currentTime!==i)try{i=t?function(e){var t=E(),n=e,i=9999999999;if(t)for(var r=0;r<t.length;r++){var a=t.start(r),o=t.end(r),s=Math.abs(a-e),l=Math.abs(o-e);if(a<=e&&e<=o)return e;s<i&&(i=s,n=a),l<i&&(i=l,n=o)}return n}(i):i,isNaN(i)||(n.currentTime=i),i=NaN}catch(e){0===n.readyState&&e.code===e.INVALID_STATE_ERR&&(h=setTimeout((function(){n.currentTime=i,i=NaN}),400))}else i=NaN})))},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(n=e)&&(n.preload="auto")},setPlaybackRate:function(e){n&&(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&n.readyState<=2&&0<e?n.addEventListener("canplay",m):n.playbackRate=e)},setSource:function(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))},setStallState:function(e,t){var i;t?null!==(i=e)&&n&&!n.seeking&&-1===p.indexOf(i)&&p.push(i):(i=e,e=p.indexOf(i),null!==i&&-1!==e&&p.splice(e,1))},setTTMLRenderingDiv:function(e){(o=e).style.position="absolute",o.style.display="flex",o.style.overflow="hidden",o.style.pointerEvents="none",o.style.top=0,o.style.left=0},setVttRenderingDiv:function(e){u=e},waitForReadyState:w,setDisableRemotePlayback:function(e){n&&(n.disableRemotePlayback=e)}},t=(0,c.A)(d).getInstance().getLogger(e),i=NaN,e}zr.__dashjs_factory_name="VideoModel";var Wr=u.A.getSingletonFactory(zr),Kr=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],qr="dashjs_?_bitrate",Qr="dashjs_?_settings",Xr="localStorage",Jr="lastBitrate",Zr="lastMediaSettings";function $r(e){var t,n,i=this.context,a=(e=e||{}).settings;function o(e){if(void 0===n){var i;n=!1;try{"undefined"!=typeof window&&(i=window[e])}catch(e){return t.warn("DOMStorage access denied: "+e.message),n}if(i&&(e===Xr||"sessionStorage"===e))try{i.setItem("1","1"),i.removeItem("1"),n=!0}catch(e){t.warn("DOMStorage is supported, but cannot be used: "+e.message)}}return n}function s(){return 6e5*Math.round((new Date).getTime()/6e5)}function l(e,t){return o(e)&&a.get().streaming[t+"CachingInfo"].enabled}function u(){if(!a)throw new Error(r.A.MISSING_CONFIG_ERROR)}return e={getSavedBitrateSettings:function(e){if(u(),!a.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var n=NaN;if(l(Xr,Jr)){var i=qr.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(i))||{},o=(new Date).getTime()-parseInt(r.timestamp,10)>=a.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(r.bitrate);isNaN(s)||o?o&&localStorage.removeItem(i):(n=s,t.debug("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return n},setSavedBitrateSettings:function(e,n){if(l(Xr,Jr)&&n){var i=qr.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({bitrate:n.toFixed(3),timestamp:s()}))}catch(e){t.error(e.message)}}},getSavedMediaSettings:function(e){if(u(),!a.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var t=null;if(l(Xr,Zr)){var n=Qr.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},r=(new Date).getTime()-parseInt(i.timestamp,10)>=a.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=i.settings,r&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,n){if(l(Xr,Zr)){var i=Qr.replace(/\?/,e);try{localStorage.setItem(i,JSON.stringify({settings:n,timestamp:s()}))}catch(e){t.error(e.message)}}}},t=(0,c.A)(i).getInstance().getLogger(e),o(Xr)&&Kr.forEach((function(e){var n=localStorage.getItem(e.oldKey);if(n){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,n)}catch(e){t.error(e.message)}}})),e}$r.__dashjs_factory_name="DOMStorage";var ea=u.A.getSingletonFactory($r),ta=n(1061),na=n(1365);function ia(){var e,t,n,i,r,a,o,s,l,u,c,h,d,f=this.context;function m(e,t,n){n({segments:e,representation:t,error:e?void 0:new v.A(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function g(e){var t;if(e.url)return(t=new p.A).setInfo(e),t}return e={setConfig:function(s){s.baseURLController&&(d=s.baseURLController),s.dashMetrics&&(a=s.dashMetrics),s.mediaPlayerModel&&(o=s.mediaPlayerModel),s.errHandler&&(n=s.errHandler),s.boxParser&&(i=s.boxParser),s.debug&&(t=s.debug.getLogger(e)),s.requestModifier&&(r=s.requestModifier),s.errors&&(l=s.errors),s.urlUtils&&(h=s.urlUtils),s.constants&&(u=s.constants),s.dashConstants&&(c=s.dashConstants)},initialize:function(){s=Nt(f).create({errHandler:n,dashMetrics:a,mediaPlayerModel:o,requestModifier:r,boxParser:i,errors:l,urlUtils:h,constants:u,dashConstants:c})},loadInitialization:function(e,n){return new Promise((function(r){!function e(n,r,a,o){var l,u=n?d.resolve(n.path):null,c=o||{init:!0,url:u?u.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r};t.debug("Start searching for initialization."),o=g(c),s.load({request:o,success:function(t){if(c.bytesLoaded=c.range.end,!(l=i.findInitRange(t)))return c.range.end=c.bytesLoaded+c.bytesToLoad,e(n,r,a,c);n.range=l,a(n)},error:function(){a(n)}}),t.debug("Perform init search: "+c.url)}(e,n,r)}))},loadSegments:function(e,n,r){return new Promise((function(a){!function e(n,r,a,o,l,u){!a||void 0!==a.start&&void 0!==a.end||(a=(f=a?a.toString().split("-"):null)?{start:parseFloat(f[0]),end:parseFloat(f[1])}:null),l=l||m;var c,h=null,f=!!a,p={init:!1,url:(_=n?d.resolve(n.path):null)?_.url:void 0,range:f?a:{start:0,end:1500},searching:!f,bytesLoaded:u?u.bytesLoaded:0,bytesToLoad:1500,mediaType:r},_=g(p);s.load({request:_,success:function(a){var s=p.bytesToLoad,u=a.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,h=i.parse(a),(c=h.getBox("sidx"))&&c.isComplete){var d=c.references;if(b=null!=d&&0<d.length?1===d[0].reference_type:b){t.debug("Initiate multiple SIDX load."),p.range.end=p.range.start+c.size;for(var f,m,g=[],_=0,y=(c.offset||p.range.start)+c.size,v=function(e){e?(g=g.concat(e),++_>=E&&(g.sort((function(e,t){return e.startTime-t.startTime<0?-1:0})),l(g,n,o))):l(null,n,o)},A=0,E=d.length;A<E;A++)m=(f=y)+d[A].referenced_size-1,y+=d[A].referenced_size,e(n,r,{start:f,end:m},o,v,p)}else t.debug("Parsing segments from SIDX. representation "+r+" - id: "+n.id+" for range : "+p.range.start+" - "+p.range.end),a=function(){for(var e,t,n,i=c.references,r=i.length,a=c.timescale,o=c.earliest_presentation_time,s=p.range.start+c.offset+c.first_offset+c.size,l=[],u=0;u<r;u++)t=i[u].subsegment_duration,n=i[u].referenced_size,(e=new na.A).duration=t,e.startTime=o,e.timescale=a,e.mediaRange=s+"-"+(s+n-1),l.push(e),o+=t,s+=n;return l}(),l(a,n,o)}else{if(c)p.range.start=c.offset||p.range.start,p.range.end=p.range.start+(c.size||s);else{if(u<p.bytesLoaded)return void l(null,n,o);var b=h.getLastBox();b&&b.size?(p.range.start=b.offset+b.size,p.range.end=p.range.start+s):p.range.end+=s}e(n,r,p.range,o,null,p)}},error:function(){l(null,n,o)}}),t.debug("Perform SIDX load for type ".concat(r," : ").concat(p.url," with range ").concat(p.range.start," - ").concat(p.range.end))}(e,n,r,a)}))},reset:function(){s&&(s.abort(),s=null)}}}ia.__dashjs_factory_name="SegmentBaseLoader";var ra=u.A.getSingletonFactory(ia);function aa(e){e=e||{};var t,n=new DataView(e.data),i=0;function r(e,t){var r,a=!0;if(void 0===t&&(t=!1),r=16777215<e.tag?(n.getUint32(i)!==e.tag&&(a=!1),4):65535<e.tag?(256*n.getUint16(i)+n.getUint8(i+2)!==e.tag&&(a=!1),3):255<e.tag?(n.getUint16(i)!==e.tag&&(a=!1),2):(n.getUint8(i)!==e.tag&&(a=!1),1),a||!e.required||t)return a&&(i+=r),a;throw new Error("required tag not found")}function a(e){var t=1,r=128,a=-1,o=0,s=n.getUint8(i),l=0;for(l=0;l<8;l+=1){if((s&r)===r){o=void 0===e?s&~r:s,a=l;break}r>>=1}for(l=0;l<a;l+=1,t+=1)o=o<<8|255&n.getUint8(i+t);return i+=t,o}return t={getPos:function(){return i},setPos:function(e){i=e},consumeTag:r,consumeTagAndSize:function(e,t){return(e=r(e,t))&&a(),e},parseTag:function(e){var n;return r(e),n=a(),t[e.parse](n)},skipOverElement:function(e,t){return(e=r(e,t))&&(t=a(),i+=t),e},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t;switch(e){case 4:t=n.getFloat32(i),i+=4;break;case 8:t=n.getFloat64(i),i+=8}return t},getMatroskaUint:function(e){if(4<e){for(var t=e,r=Math.floor(Number.MAX_SAFE_INTEGER/256),a=0,o=0;o<t;o+=1){if(r<a)throw new Error("Value exceeds safe integer limit");a*=256;var s=n.getUint8(i+o);if(a>Number.MAX_SAFE_INTEGER-s)throw new Error("Value exceeds safe integer limit");a+=s}return i+=t,a}for(var l=0,u=0;u<e;u+=1)l=(l<<=8)|255&n.getUint8(i+u);return i+=e,l>>>0},moreData:function(){return i<n.byteLength}}}aa.__dashjs_factory_name="EBMLParser";var oa=u.A.getClassFactory(aa);function sa(){var e,t,n,i,a,o,s,l,u,c,h=this.context;function d(e){var t=new p.A;return t.setInfo(e),t}return n={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e={setConfig:function(n){if(!(n.baseURLController&&n.dashMetrics&&n.mediaPlayerModel&&n.errHandler))throw new Error(r.A.MISSING_CONFIG_ERROR);c=n.baseURLController,o=n.dashMetrics,s=n.mediaPlayerModel,i=n.errHandler,u=n.errors,t=n.debug.getLogger(e),a=n.requestModifier},initialize:function(){l=Nt(h).create({errHandler:i,dashMetrics:o,mediaPlayerModel:s,requestModifier:a,errors:u})},loadInitialization:function(e,n){return new Promise((function(i){var r=e?c.resolve(e.path):null,a={range:{start:(a=e?e.range.split("-"):null)?parseFloat(a[0]):null,end:a?parseFloat(a[1]):null},request:null,url:r?r.url:void 0,init:!0,mediaType:n};t.info("Start loading initialization."),r=d(a),l.load({request:r,success:function(){i(e)},error:function(){i(e)}}),t.debug("Perform init load: "+a.url)}))},loadSegments:function(e,i,r){return new Promise((function(a){var o=(s=e?c.resolve(e.path):null)?s.url:void 0,s=d({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:null,url:o,init:!1,mediaType:i});t.debug("Parsing ebml header"),l.load({request:s,success:function(i){function s(t){a({segments:t,representation:e,error:t?void 0:new v.A(u.SEGMENT_BASE_LOADER_ERROR_CODE,u.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}var c=o,f=r;if(i&&0!==i.byteLength){var p,m,g,_,y=oa(h).create({data:i}),A={url:c,range:{start:(i=f?f.split("-"):null)?parseFloat(i[0]):null,end:i?parseFloat(i[1]):null},request:null};for(t.debug("Parse EBML header: "+A.url),y.skipOverElement(n.EBML),y.consumeTag(n.Segment),g=y.getMatroskaCodedNum(),g+=y.getPos(),_=y.getPos();y.moreData()&&!y.consumeTagAndSize(n.Segment.Info,!0);)if(!(y.skipOverElement(n.Segment.SeekHead,!0)||y.skipOverElement(n.Segment.Tracks,!0)||y.skipOverElement(n.Segment.Cues,!0)||y.skipOverElement(n.Void,!0)))throw new Error("no valid top level element found");for(;void 0===p;){var E=y.getMatroskaCodedNum(!0),b=y.getMatroskaCodedNum();E===n.Segment.Info.Duration.tag?p=y[n.Segment.Info.Duration.parse](b):y.setPos(y.getPos()+b)}f=d(A),l.load({request:f,success:function(e){m=function(i,r,a){for(var o,s,l,u,c=[],d=0,f=(o=function(e){var t,i,r=[],a=oa(h).create({data:e});for(a.consumeTagAndSize(n.Segment.Cues);a.moreData()&&a.consumeTagAndSize(n.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=a.parseTag(n.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];a.moreData()&&a.consumeTag(n.Segment.Cues.CuePoint.CueTrackPositions,!0);){var o=a.getMatroskaCodedNum(),s=a.getPos();if((i={}).Track=a.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=a.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(i),a.setPos(s+o)}if(0===t.CueTracks.length)throw new Error("Mandatory cuetrack not found");r.push(t)}if(0===r.length)throw new Error("mandatory cuepoint not found");return r}(e)).length;d<f;d+=1)s=new na.A,l=d<o.length-1?o[d+1].CueTime-o[d].CueTime:a-o[d].CueTime,s.duration=l,s.startTime=o[d].CueTime,s.timescale=1e3,l=o[d].CueTracks[0].ClusterPosition+i,u=d<o.length-1?o[d+1].CueTracks[0].ClusterPosition+i-1:r-1,s.mediaRange=l+"-"+u,c.push(s);return t.debug("Parsed cues: "+c.length+" cues."),c}(_,g,p),s(m)},error:function(){t.error("Download Error: Cues "+A.url),s(null)}}),t.debug("Perform cues load: "+A.url+" bytes="+A.range.start+"-"+A.range.end)}else s(null)},error:function(){a({representation:e,error:new v.A(u.SEGMENT_BASE_LOADER_ERROR_CODE,u.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){l&&(l.abort(),l=null)}}}sa.__dashjs_factory_name="WebmSegmentBaseLoader";var la=u.A.getSingletonFactory(sa);function ua(e){var t,n,i,r=this.context,a=(e=e||{}).eventBus,o=e.events,s=e.dashMetrics,l=e.mediaPlayerModel,u=e.errHandler,c=e.baseURLController,h=e.debug,d=e.boxParser,f=e.requestModifier;function p(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return e=e.errors,t={initialize:function(){n.initialize(),i.initialize()},getSegmentBaseInitSegment:function(e){return(p(e.representation.mimeType)?i:n).loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return(p(e.mimeType)?i:n).loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){n.reset(),i.reset()}},n=ra(r).getInstance(),i=la(r).getInstance(),n.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:a,events:o,errors:e,debug:h,boxParser:d,requestModifier:f}),i.setConfig({baseURLController:c,dashMetrics:s,mediaPlayerModel:l,errHandler:u,eventBus:a,events:o,errors:e,debug:h,requestModifier:f}),t}ua.__dashjs_factory_name="SegmentBaseController";var ca=u.A.getSingletonFactory(ua);ha=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Object.defineProperty(ha,"prototype",{writable:!1});var ha,da=ha;be=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Object.defineProperty(be,"prototype",{writable:!1});var fa=be;pa=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Object.defineProperty(pa,"prototype",{writable:!1});var pa,ma=pa;ze=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null},Object.defineProperty(ze,"prototype",{writable:!1});var ga=ze;function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=_a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=_a(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==_a(e)?e:String(e)}(i.key),i)}})((ya=Aa).prototype,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return"text()"===this.path[this.path.length-1].name}},{key:"getMpdTarget",value:function(e,t){for(var n=this,i=null,r=e,a=1,o="MPD";a<this.path.length&&null!==r;)!function(){i=r;var e,t,s=n.path[a];o=s.name,a===n.path.length-1&&(o.startsWith("@")||"text()"===o)||(0===(e=i[o+"_asArray"]||[]).length&&i[o]&&e.push(i[o]),r=s.position?e[s.position]||null:s.attribute?(t=s.attribute,e.filter((function(e){return e[t.name]==t.value}))[0]||null):e[0]||null),a++}();return null===r?null:o.startsWith("@")?{name:o.substring(1),leaf:r,target:r}:"text()"===o?{name:"__text",leaf:r,target:r}:{name:o,leaf:r,target:t?i:r}}}]),Object.defineProperty(ya,"prototype",{writable:!1});var ya,va=Aa;function Aa(e){var t=this;if(!(this instanceof Aa))throw new TypeError("Cannot call a class as a function");this.valid="/"==e[0],this.path=e.split("/").filter((function(e){return 0!==e.length})).map((function(e){var n={name:e},i=e.indexOf("[");return-1!=i&&(n.name=e.substring(0,i),i=e.substring(i+1,e.length-1),t.valid=t.valid&&-1==i.indexOf("["),-1!=(e=i.indexOf("="))?(n.attribute={name:i.substring(1,e),value:i.substring(e+1)},-1!=["'",'"'].indexOf(n.attribute.value[0])&&(n.attribute.value=n.attribute.value.substring(1,n.attribute.value.length-1))):n.position=parseInt(i,10)-1),n}))}function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=Ea(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=Ea(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==Ea(e)?e:String(e)}(i.key),i)}})((ba=Ta).prototype,[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}]),Object.defineProperty(ba,"prototype",{writable:!1});var ba,wa=Ta;function Ta(e,t,n){if(!(this instanceof Ta))throw new TypeError("Cannot call a class as a function");this.action=e,this.xpath=t,this.value=n,this.position=null}function Sa(){var e=this.context,t={getIsPatch:function(e){return e&&e.hasOwnProperty(a.A.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(a.A.PUBLISH_TIME)?new Date(e[a.A.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(a.A.ORIGINAL_PUBLISH_TIME)?new Date(e[a.A.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[a.A.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map((function(e){var t=Object.keys(e)[0];if("add"!==t&&"remove"!==t&&"replace"!==t)return n.warn("Ignoring node of invalid action: ".concat(t)),null;var i=(e=e[t]).sel;if("add"===t&&e.type){if(!e.type.startsWith("@"))return n.warn("Ignoring add action for prefixed namespace declaration: ".concat(e.type,"=").concat(e.__text)),null;i="".concat(i,"/").concat(e.type)}var r,a=new va(i);return a.isValid()?(r=null,a.findsAttribute()||a.findsTextReplace()?r=e.__text||"":"remove"!==t&&(r=e.__children.reduce((function(e,t){var n=Object.keys(t)[0];return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t[n])),e}),{})),a=new wa(t,a,r),"add"===t&&(a.position=e.pos),a):(n.warn("Ignoring action with invalid selector: ".concat(t," - ").concat(i)),null)})).filter((function(e){return!!e})):[]}},n=(0,c.A)(e).getInstance().getLogger(t);return t}Sa.__dashjs_factory_name="PatchManifestModel";var Ra=u.A.getSingletonFactory(Sa);function Ia(){var e,t,n,i,r,o,s,l=this.context;function u(e,n,o){var s,l=t.getAdaptationsForType(i[0].mpd.manifest,e,n);if(!l||0===l.length)return null;if(1<l.length&&o){var u=d(o,n);if(r[o.id]&&r[o.id][n])for(var h=0,f=l.length;h<f;h++)if(c(r[o.id][n],u[h]))return l[h];for(var p=0,m=l.length;p<m;p++)if(s=l[p],t.getRolesForAdaptation(s).filter((function(e){return e.value===a.A.MAIN}))[0])return l[p]}return l[0]}function c(e,t){var n,i,r,a,o,s,l,u,c,h;return!(!e||!t)&&(n=e.id===t.id,i=e.codec===t.codec,r=e.viewpoint===t.viewpoint,a=JSON.stringify(e.viewpointsWithSchemeIdUri)===JSON.stringify(t.viewpointsWithSchemeIdUri),o=e.lang===t.lang,s=e.roles.toString()===t.roles.toString(),l=JSON.stringify(e.rolesWithSchemeIdUri)===JSON.stringify(t.rolesWithSchemeIdUri),u=e.accessibility.toString()===t.accessibility.toString(),c=JSON.stringify(e.accessibilitiesWithSchemeIdUri)===JSON.stringify(t.accessibilitiesWithSchemeIdUri),h=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString(),e=JSON.stringify(e.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(t.audioChannelConfigurationsWithSchemeIdUri),n)&&i&&r&&a&&o&&s&&l&&u&&c&&h&&e}function h(e,n,i,r,a,s){var l,u,c,h=[];if(!r||0===r.length)return[];for(var d=t.getAdaptationsForPeriod(n),f=0,p=r.length;f<p;f++)if(l=r[f],u=v(d[c=t.getIndexForAdaptation(l,e,i.index)]),s){for(var m=u.accessibility.length,g=0;g<m;g++)if(u){var _=u.accessibility[g];if(0===_.indexOf("cea-608:")){var y=_.substring(8).split(";");if("CC"===y[0].substring(0,2))for(g=0;g<y.length;g++)A(u=u||v.call(this,d[c]),y[g].substring(0,3),y[g].substring(4)),h.push(u),u=null;else for(g=0;g<y.length;g++)A(u=u||v.call(this,d[c]),"CC"+(g+1),y[g]),h.push(u),u=null}else 0===_.indexOf("cea-608")&&(A(u,o.CC1,"eng"),h.push(u),u=null)}}else a===o.IMAGE?(u.type=o.IMAGE,h.push(u),u=null):u&&h.push(u);return h}function d(e,n,r){var a,s=i,l=[];if(r)b(),s=f(r);else{if(!(0<i.length))return l;r=i[0].mpd.manifest}return l=h(r,s=y(e,s),e,t.getAdaptationsForType(r,e?e.index:null,n),n),n===o.TEXT&&(a=t.getAdaptationsForType(r,e?e.index:null,o.VIDEO),l=l.concat(h(r,s,e,a,n,!0))),l}function f(e){return e=p(e),t.getRegularPeriods(e)}function p(e){return e=g(e),t.getMpd(e)}function m(){i=[],r={}}function g(e){return e||(0<i.length?i[0].mpd.manifest:null)}function _(e){try{var n=y(e.streamInfo,i),r=t.getAdaptationsForPeriod(n);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&r?r[e.index]:null}catch(e){return null}}function y(e,t){for(var n=t.length,i=0;i<n;i++){var r=t[i];if(e&&e.id===r.id)return r}return null}function v(e){var n,i,r,a,o;return e?(n=new fa,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index],n.id=e.id,n.index=e.index,n.type=e.type,n.streamInfo=E(e.period),n.representationCount=t.getRepresentationCount(i),n.labels=t.getLabelsForAdaptation(i),n.lang=t.getLanguageForAdaptation(i),n.segmentAlignment=t.getSegmentAlignment(i),n.subSegmentAlignment=t.getSubSegmentAlignment(i),e=t.getViewpointForAdaptation(i),n.viewpoint=e.length?e[0].value:void 0,n.viewpointsWithSchemeIdUri=e,e=t.getAccessibilityForAdaptation(i),n.accessibility=e.map((function(e){var t=e.value,i=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==s&&(i=t?"cea-608:"+t:"cea-608",n.embeddedCaptions=!0),i})),n.accessibilitiesWithSchemeIdUri=e,e=t.getAudioChannelConfigurationForAdaptation(i),n.audioChannelConfiguration=e.map((function(e){return e.value})),n.audioChannelConfigurationsWithSchemeIdUri=e,0===n.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&0<i.Representation_asArray.length&&(e=t.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]),n.audioChannelConfiguration=e.map((function(e){return e.value})),n.audioChannelConfigurationsWithSchemeIdUri=e),e=t.getRolesForAdaptation(i),n.roles=e.map((function(e){return e.value})),n.rolesWithSchemeIdUri=e,n.codec=t.getCodec(i),n.mimeType=t.getMimeType(i),n.contentProtection=t.getContentProtectionData(i),n.bitrateList=t.getBitrateListForAdaptation(i),n.selectionPriority=t.getSelectionPriority(i),n.contentProtection&&(e=n.contentProtection.map((function(e){return t.getKID(e)})).filter((function(e){return null!==e}))).length&&(r=e[0],n.contentProtection.forEach((function(e){e.keyId=r}))),n.isText=t.getIsText(i),n.supplementalProperties=t.getSupplementalPropertiesForAdaptation(i),(!n.supplementalProperties||0===Object.keys(n.supplementalProperties).length)&&Array.isArray(i.Representation_asArray)&&0<i.Representation_asArray.length&&(a=i.Representation_asArray.map((function(e){return t.getSupplementalPropertiesForRepresentation(e)}))).every((function(e){return JSON.stringify(e)===JSON.stringify(a[0])}))&&(n.supplementalProperties=a[0]),n.supplementalPropertiesAsArray=t.getSupplementalPropertiesAsArrayForAdaptation(i),(!n.supplementalPropertiesAsArray||0===n.supplementalPropertiesAsArray.length)&&Array.isArray(i.Representation_asArray)&&0<i.Representation_asArray.length&&(o=i.Representation_asArray.map((function(e){return t.getSupplementalPropertiesAsArrayForRepresentation(e)}))).every((function(e){return JSON.stringify(e)===JSON.stringify(o[0])}))&&(n.supplementalPropertiesAsArray=o[0]),n.essentialProperties=t.getEssentialPropertiesForAdaptation(i),n.essentialPropertiesAsArray=t.getEssentialPropertiesAsArrayForAdaptation(i),n.isFragmented=t.getIsFragmented(i),n.isEmbedded=!1,n):null}function A(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=o.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1,t=Bn()(n),e.lang=t||n,e.roles=["caption"],e.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function E(e){var n,i,r=new ma;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(n=e.mpd,(i=new ga).dvrWindowSize=n.timeShiftBufferDepth,i.loadedTime=n.manifest.loadedTime,i.availableFrom=n.availabilityStartTime,i.minBufferTime=n.manifest.minBufferTime,i.maxFragmentDuration=n.maxSegmentDuration,i.duration=t.getDuration(n.manifest),i.isDynamic=t.getIsDynamic(n.manifest),i.serviceDescriptions=t.getServiceDescriptions(n.manifest),i.protocol=n.manifest.protocol,i),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function b(){if(!o)throw new Error("setConfig function has to be called previously")}function w(e){return 0<i.length?i[0].mpd.manifest.Period_asArray[e]:null}function T(e,t,n){var i,r,a,o,s;if(e)for(i=e.AdaptationSet_asArray,o=0;o<i.length;o+=1)for(a=i[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(r=a[s]).id)return n?s:r;return null}return e={getBandwidthForRepresentation:function(e,t){return(t=T(w(t),e))?t.bandwidth:null},getIndexForRepresentation:function(e,t){return null!==(t=T(w(t),e,!0))?t:-1},getMaxIndexForBufferType:function(e,n){var i,r,a,o,s=e;if((n=w(n))&&s)for(r=n.AdaptationSet_asArray,o=0;o<r.length;o+=1)if(a=(i=r[o]).Representation_asArray,t.getIsTypeOf(i,s))return a.length;return-1},convertRepresentationToRepresentationInfo:function(e){var n,i;return e?(n=new da,i=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],i=t.getRepresentationFor(e.index,i),n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(i),n.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.mediaInfo=v(e.adaptation),n):null},getStreamsInfo:function(e,t){var n=[],r=i;if(e&&(b(),r=f(e)),0<r.length){(!t||t>r.length)&&(t=r.length);for(var a=0;a<t;a++)n.push(E(r[a]))}return n},getMediaInfoForType:function(e,n){var r;return 0!==i.length&&e&&(r=y(e,i))&&(r=t.getAdaptationsForPeriod(r),n=u(e.index,n,e))?v(r[t.getIndexForAdaptation(n,i[0].mpd.manifest,e.index)]):null},getAllMediaInfoForType:d,getAdaptationForType:u,getRealAdaptation:function(e,n){e=y(e,i);var r,a=n?n.id:null;return 0<i.length&&e?a?t.getAdaptationForId(a,i[0].mpd.manifest,e.index):t.getAdaptationForIndex(n?n.index:null,i[0].mpd.manifest,e.index):r},getProducerReferenceTimes:function(e,n){e=y(e,i);var r,a=n?n.id:null;return(r=0<i.length&&e?a?t.getAdaptationForId(a,i[0].mpd.manifest,e.index):t.getAdaptationForIndex(n?n.index:null,i[0].mpd.manifest,e.index):r)?t.getProducerReferenceTimesForAdaptation(r):[]},getRealPeriodByIndex:function(e){return t.getRealPeriodForIndex(e,i[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return t.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){return e=_(e),t.getRepresentationsForAdaptation(e)},getEventsFor:function(e,n,r){var a,o,s=[];return 0<i.length&&(a=i[0].mpd.manifest,e instanceof ma?(o=y(e,i),s=t.getEventsForPeriod(o)):e instanceof fa?(o=y(r,i),s=t.getEventStreamForAdaptationSet(a,_(e),o)):e instanceof da&&(o=y(r,i),s=t.getEventStreamForRepresentation(a,n,o))),s},getEvent:function(e,t,n,i){try{var r,a,o,s,l,u,c,h,d,f,p,m;return e&&t&&!isNaN(n)&&i&&t[(r=e.scheme_id_uri)+"/"+(a=e.value)]?(o=new Pe,s=e.timescale||1,l=i.adaptation.period.start,u=t[r+"/"+a],c=isNaN(i.presentationTimeOffset)?isNaN(u.presentationTimeOffset)?0:u.presentationTimeOffset:i.presentationTimeOffset,h=e.presentation_time_delta/s,d=0===e.version?l+n-c+h:l-c+h,f=e.event_duration/s,p=e.id,m=e.message_data,o.eventStream=u,o.eventStream.value=a,o.eventStream.timescale=s,o.duration=f,o.id=p,o.calculatedPresentationTime=d,o.messageData=m,o.presentationTimeDelta=h,o):null}catch(e){return null}},getMpd:p,setConfig:function(e){e&&(e.constants&&(o=e.constants),e.cea608parser&&(s=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64)&&t.setConfig({BASE64:e.BASE64})},updatePeriods:function(e){if(!e)return null;b(),i=f(e)},getIsTextTrack:function(e){return t.getIsText(e)},getUTCTimingSources:function(){var e=g();return t.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<i.length?i[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){return e=p(e),t.getAvailabilityStartTime(e)},getIsTypeOf:function(e,n){return t.getIsTypeOf(e,n)},getIsDynamic:function(e){return e=g(e),t.getIsDynamic(e)},getDuration:function(e){return e=g(e),t.getDuration(e)},getRegularPeriods:f,getContentSteering:function(e){return t.getContentSteering(e)},getLocation:function(e){return t.getLocation(e)},getPatchLocation:function(e){var n=t.getPatchLocation(e),i=t.getPublishTime(e);return n&&0!==n.length&&i?n.filter((function(e){return isNaN(e.ttl)||i.getTime()+e.ttl>(new Date).getTime()})):[]},getManifestUpdatePeriod:function(e){return t.getManifestUpdatePeriod(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function(e){return t.getPublishTime(e)},getIsDVB:function(e){return t.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return n.getIsPatch(e)},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getCodec:function(e,n,i){return t.getCodec(e,n,i)},getPeriodById:function(e){var t;return e&&0!==i.length&&(t=i.filter((function(t){return t.id===e})))&&0<t.length?t[0]:null},setCurrentMediaInfo:function(e,t,n){r[e]=r[e]||{},r[e][t]=r[e][t]||{},r[e][t]=n},isPatchValid:function(e,i){var r=t.getId(e),a=n.getMpdId(i),o=(e=t.getPublishTime(e),n.getPublishTime(i));return i=n.getOriginalPublishTime(i),!!(r&&a&&r==a&&e&&i&&e.getTime()==i.getTime()&&o&&e.getTime()<o.getTime())},applyPatchToManifest:function(e,t){n.getPatchOperations(t).forEach((function(t){if(null!==(r=t.getMpdTarget(e))){var n=r.name,i=r.target,r=r.leaf;if(t.xpath.findsAttribute()||"__text"===n)switch(t.action){case"add":case"replace":i[n]=t.value;break;case"remove":delete i[n]}else{var a=(i[n+"_asArray"]||[]).indexOf(r),o="prepend"===t.position||"before"===t.position;"remove"!==t.action&&"replace"!==t.action||(delete i[n],-1==a)||((r=i[n+"_asArray"]).splice(a,1),1<r.length?i[n]=r:1==r.length?i[n]=r[0]:delete i[n+"_asArray"]),"add"!==t.action&&"replace"!==t.action||Object.keys(t.value).forEach((function(e){var r,s=t.value[e],l=i[e+"_asArray"]||[];0===l.length&&i[e]&&l.push(i[e]),0===l.length?l=s:(r=l.length,r=e==n&&-1!=a?a+(o?0:1)+("replace"==t.action?-1:0):o?0:l.length,l.splice.apply(l,[r,0].concat(s))),i[e+"_asArray"]=l,i[e]=1==l.length?l[0]:l}))}}}))},areMediaInfosEqual:c,reset:m},t=ct(l).getInstance(),n=Ra(l).getInstance(),m(),e}Ia.__dashjs_factory_name="DashAdapter";var Ca=u.A.getSingletonFactory(Ia);function La(e){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=La(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=La(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==La(e)?e:String(e)}(i.key),i)}})(Pa=ka,[{key:"round10",value:function(e,t){return void 0===t||0==+t?Math.round(e):(t=+t,null===(e=+e)||isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}}]),Object.defineProperty(Pa,"prototype",{writable:!1});var Pa,Da=ka;function ka(){if(!(this instanceof ka))throw new TypeError("Cannot call a class as a function")}xa=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Object.defineProperty(xa,"prototype",{writable:!1});var xa,Ma=xa;Oa=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.mt=null,this.to=null,this.lto=null},Object.defineProperty(Oa,"prototype",{writable:!1});var Oa,Na=Oa;Fa=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.t=null,this.level=null},Object.defineProperty(Fa,"prototype",{writable:!1});var Fa,Ba=Fa;Ua=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.target=null,this.state=o.A.BUFFER_EMPTY},Object.defineProperty(Ua,"prototype",{writable:!1});var Ua,ja=Ua;Ga=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.time=null,this.range=null,this.manifestInfo=null},Object.defineProperty(Ga,"prototype",{writable:!1});var Ga,Va=Ga;Ha=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.time=null,this.droppedFrames=null},Object.defineProperty(Ha,"prototype",{writable:!1});var Ha,Ya=Ha;function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=za(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=za(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==za(e)?e:String(e)}(i.key),i)}}function Ka(e,t,n){return t&&Wa(e.prototype,t),n&&Wa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Qa=Ka((function e(){qa(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]})),Xa=Ka((function e(){qa(this,e),this.id=null,this.index=null,this.start=null,this.duration=null})),Ja=Ka((function e(){qa(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}));Za=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Object.defineProperty(Za,"prototype",{writable:!1});var Za,$a=Za;eo=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.loadingRequests=[],this.executedRequests=[]},Object.defineProperty(eo,"prototype",{writable:!1});var eo,to=eo;function no(e){var t,n=(e=e||{}).settings,i=(e=this.context,(0,s.A)(e).getInstance());function a(){i.trigger(l.A.METRICS_CHANGED)}function u(e){i.trigger(l.A.METRIC_CHANGED,{mediaType:e}),a()}function c(e,t,n){i.trigger(l.A.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),u(e)}function h(e,t,n){i.trigger(l.A.METRIC_ADDED,{mediaType:e,metric:t,value:n}),u(e)}function d(e,n){var i=null;return e&&(t.hasOwnProperty(e)?i=t[e]:n||(i=new Ma,t[e]=i)),i}function f(e,t,i){null!==(e=d(e))&&(e[t].push(i),e[t].length>n.get().streaming.metrics.maxListDepth)&&e[t].shift()}function p(e,t,n){f(e,t,n),h(e,t,n)}return t={},{clearCurrentMetricsForType:function(e){delete t[e],u(e)},clearAllCurrentMetrics:function(){t={},a()},getMetricsFor:d,addHttpRequest:function e(t,n,i,r,a,s,l,u,c,h,d,f,m,g,_,y,v){var A=new R.G;null!=s&&s!==r&&(e(t,null,i,r,a,null,null,u,c,null,null,null,m,null,null,y,v),A.actualurl=s),A.tcpid=n,A.type=i,A.url=r,A.range=u,A.trequest=c,A.tresponse=h,A.responsecode=f,A.cmsd=v,A._tfinish=d,A._stream=t,A._mediaduration=m,A._quality=a,A._responseHeaders=g,A._serviceLocation=l,A._fileLoaderType=y,_?_.forEach((function(e){var t,n,i,r;t=A,n=e.s,i=e.d,e=e.b,(r=new R.N).s=n,r.d=i,r.b=e,t.trace.push(r),t.interval||(t.interval=0),t.interval+=i})):(delete A.interval,delete A.trace),p(t,o.A.HTTP_REQUEST,A)},addRepresentationSwitch:function(e,t,n,i,r){var a=new Na;a.t=t,a.mt=n,a.to=i,r?a.lto=r:delete a.lto,p(e,o.A.TRACK_SWITCH,a)},addBufferLevel:function(e,t,n){var i=new Ba;i.t=t,i.level=n,p(e,o.A.BUFFER_LEVEL,i)},addBufferState:function(e,t,n){var i=new ja;i.target=n,i.state=t,p(e,o.A.BUFFER_STATE,i)},addDVRInfo:function(e,t,n,i){var r=new Va;r.time=t,r.range=i,r.manifestInfo=n,p(e,o.A.DVR_INFO,r)},addDroppedFrames:function(e,t){var n=new Ya,i=d(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<i.length&&i[i.length-1]==n||p(e,o.A.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,i,r,a,s,l,u){var c=new $a;c.mediaType=e,c.t=t,c.type=n,c.startTime=i,c.availabilityStartTime=r,c.duration=a,c.quality=s,c.range=l,c.state=u,p(e,o.A.SCHEDULING_INFO,c)},addRequestsQueue:function(e,t,n){var i=new to;i.loadingRequests=t,i.executedRequests=n,d(e).RequestsQueue=i,h(e,o.A.REQUESTS_QUEUE,i)},addManifestUpdate:function(e,t,n,i,a,s,l,u,c,d){var p=new Qa;p.mediaType=e,p.type=t,p.requestTime=n,p.fetchTime=i,p.availabilityStartTime=a,p.presentationStartTime=s,p.clientTimeOffset=l,p.currentTime=u,p.buffered=c,p.latency=d,f(r.A.STREAM,o.A.MANIFEST_UPDATE,p),h(e,o.A.MANIFEST_UPDATE,p)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];c(e.mediaType,o.A.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,i,r){var a;e&&((a=new Xa).id=t,a.index=n,a.start=i,a.duration=r,e.streamInfo.push(a),c(e.mediaType,o.A.MANIFEST_UPDATE_STREAM_INFO,e))},addManifestUpdateRepresentationInfo:function(e,t,n,i,r,a,s,l){var u;e&&e.representationInfo&&((u=new Ja).id=t,u.index=n,u.streamIndex=i,u.mediaType=r,u.startNumber=s,u.fragmentInfoType=l,u.presentationTimeOffset=a,e.representationInfo.push(u),c(e.mediaType,o.A.MANIFEST_UPDATE_TRACK_INFO,e))},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,p(r.A.STREAM,o.A.PLAY_LIST,e)},addDVBErrors:function(e){p(r.A.STREAM,o.A.DVB_ERRORS,e)}}}no.__dashjs_factory_name="MetricsModel";var io=u.A.getSingletonFactory(no);function ro(e){var t,n,i,a,s=this.context,l=(e=e||{}).metricsModel;function u(e){if(!(e=l.getMetricsFor(e,!0)))return null;var t,n=e.HttpList,i=null;if(!n||n.length<=0)return null;for(t=n.length-1;0<=t;){if(n[t].responsecode){i=n[t];break}t--}return i}function c(e){return(e=l.getMetricsFor(e,!0))&&e.HttpList?e.HttpList:[]}function h(e,t){return(e=e&&e[t])&&0!==e.length?e[e.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return h(l.getMetricsFor(e,!0),o.A.TRACK_SWITCH)},getCurrentBufferState:function(e){return h(l.getMetricsFor(e,!0),o.A.BUFFER_STATE)},getCurrentBufferLevel:function(e){return(e=h(l.getMetricsFor(e,!0),o.A.BUFFER_LEVEL))?Da.round10(e.level/1e3,-3):0},getCurrentHttpRequest:u,getHttpRequests:c,getCurrentDroppedFrames:function(){return h(l.getMetricsFor(r.A.VIDEO,!0),o.A.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return h(l.getMetricsFor(e,!0),o.A.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return h(e?l.getMetricsFor(e,!0):l.getMetricsFor(r.A.VIDEO,!0)||l.getMetricsFor(r.A.AUDIO,!0),o.A.DVR_INFO)},getCurrentManifestUpdate:function(){return h(l.getMetricsFor(r.A.STREAM),o.A.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n;return t&&(n={},void 0!==(e=(n=(e=u(e))?ht.A.parseHttpHeaders(e._responseHeaders):n)[t.toLowerCase()]))?e:null},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;for(var t,n,i={},a=(t=c(r.A.STREAM)).length-1;0<=a;a--)if((n=t[a]).type===R.G.MPD_TYPE){i=ht.A.parseHttpHeaders(n._responseHeaders);break}return void 0===(e=i[e.toLowerCase()])?null:e},addRepresentationSwitch:function(e,t,n,i,r){l.addRepresentationSwitch(e,t,n,i,r)},addDVRInfo:function(e,t,n,i){l.addDVRInfo(e,t,n,i)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();l.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),l.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration))},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),l.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType))},addManifestUpdate:function(e){l.addManifestUpdate(r.A.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,i,r,a){l.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,i,r,e.fileLoaderType,a)},addSchedulingInfo:function(e,t){l.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){l.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){l.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){l.addBufferState(e,t,n)},addDroppedFrames:function(e){l.addDroppedFrames(r.A.VIDEO,e)},addPlayList:function(){a&&(l.addPlayList(a),a=null)},addDVBErrors:function(e){l.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(a=new Z).start=new Date,a.mstart=e,a.starttype=t},createPlaylistTraceMetrics:function(e,t,r){!0===n&&(n=!1,(i=new $).representationid=e,i.start=new Date,i.mstart=t,i.playbackspeed=null!==r?r.toString():null)},updatePlayListTraceMetrics:function(e){if(i)for(var t in i)i[t]=e[t]},pushPlayListTraceMetrics:function(e,t){var r;!1===n&&a&&i&&i.start&&(r=i.start,e=e.getTime()-r.getTime(),i.duration=e,i.stopreason=t,a.trace.push(i),n=!0)},clearAllCurrentMetrics:function(){l.clearAllCurrentMetrics()}},l=l||io(s).getInstance({settings:e.settings}),n=!0,a=i=null,t}ro.__dashjs_factory_name="DashMetrics";var ao=u.A.getSingletonFactory(ro);function oo(){var e,t,n,i,o=this.context,u=(0,s.A)(o).getInstance(),c=(0,S.A)(o).getInstance();function d(e){i=e}function f(e,t,n,i){var r=t.adaptation.period.mpd,a=r.availabilityStartTime;return i?n&&r.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(a.getTime()+1e3*(e+r.timeShiftBufferDepth)):r.availabilityEndTime:n?(i=t.availabilityTimeOffset,new Date(a.getTime()+1e3*(e-i))):a}function p(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function m(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function g(e){var n,i={start:NaN,end:NaN},o=e[0].getAdapter().getRegularPeriods()[0],s=p(new Date,o);return e&&0!==e.length&&(e.forEach((function(e){e=(n=e.getAdapter()).getMediaInfoForType(e.getStreamInfo(),r.A.VIDEO)||n.getMediaInfoForType(e.getStreamInfo(),r.A.AUDIO);var n=n.getVoRepresentations(e)[0];e={start:NaN,end:NaN},n&&(n.segmentInfoType===a.A.SEGMENT_TIMELINE?e=function(e){var n,i,r,a,o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],s=(o=(o=t.getRepresentationFor(e.index,o)).SegmentTemplate||o.SegmentList).SegmentTimeline,l=(o=o.timescale,s.S_asArray),u=(s={start:0,end:0},l[0].t),c=!isNaN(u),h=(u=c?u:0,0);for(c&&(s.start=m(u/o,e)),r=0,a=l.length;r<a;r++)i=0,(n=l[r]).hasOwnProperty("r")&&(i=n.r),h+=n.d*(1+i);return s.end=m((u+h)/o,e),s}(n):(n=n.adaptation.period,e.start=n.start,e.end=Math.max(s,n.start+n.duration))),!isNaN(e.start)&&(isNaN(i.start)||i.start>e.start)&&(i.start=e.start),!isNaN(e.end)&&(isNaN(i.end)||i.end<e.end)&&(i.end=e.end)})),i.end=Math.min(s,i.end),n=y(e,i.end,!0),i.end=isNaN(n)?i.end:n,i.start=o&&o.mpd&&o.mpd.timeShiftBufferDepth&&!isNaN(o.mpd.timeShiftBufferDepth)&&!isNaN(i.end)?Math.max(i.end-o.mpd.timeShiftBufferDepth,i.start):i.start,i.start=y(e,i.start)),{range:i,now:s}}function _(e,t){n=e-t.end}function y(e,t,n){var i=2<arguments.length&&void 0!==n&&n;try{for(var r=0,a=!1,o=NaN;!a&&r<e.length;){var s=e[r].getStreamInfo();s.start<=t&&(!isFinite(s.duration)||s.start+s.duration>=t)?(o=t,a=!0):!i&&s.start>t&&(isNaN(o)||s.start<o)?o=s.start:i&&s.start+s.duration<t&&(isNaN(o)||s.start+s.duration>o)&&(o=s.start+s.duration),r+=1}return o}catch(e){return t}}function v(e){void 0===e.offset||isNaN(e.offset)||d(e.offset/1e3)}function A(){n=i=0}function E(){u.off(l.A.UPDATE_TIME_SYNC_OFFSET,v,this),A()}return e={initialize:function(){A(),u.on(l.A.UPDATE_TIME_SYNC_OFFSET,v,this)},getClientTimeOffset:function(){return i},setClientTimeOffset:d,getClientReferenceTime:function(){return Date.now()-1e3*n+1e3*i},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return f(e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return f(e,t,n,!0)},calcPresentationTimeFromWallTime:p,calcPresentationTimeFromMediaTime:m,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var n;return t&&(t=e.representation.adaptation.period.mpd.suggestedPresentationDelay,t=e.presentationStartTime+t,n=new Date(e.availabilityStartTime.getTime()+1e3*t)),n},calcTimeShiftBufferWindow:function(e,t){if(!t)return t={start:NaN,end:NaN},n=0,i=NaN,e.forEach((function(e){e=e.getStreamInfo(),n+=e.duration,(isNaN(i)||e.start<i)&&(i=e.start)})),t.start=i,t.end=i+n,t;var n,i;if(c.get().streaming.timeShiftBuffer.calcFromSegmentTimeline)return _((t=g(e)).now,t.range),t.range;if(t=e,e={start:NaN,end:NaN},t&&0!==t.length){var r=t[0].getAdapter().getRegularPeriods()[0],a=p(new Date,r),o=(r=r.mpd.timeShiftBufferDepth,isNaN(r)?0:a-r);if(e.start=y(t,o),e.end=!isNaN(e.start)&&a<e.start?a:y(t,a,!0),!isNaN(r)&&e.end<a-r&&(e.end=NaN),c.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline&&(o=g(t)).range.end<e.start)return u.trigger(h.A.CONFORMANCE_VIOLATION,{level:Rn.LEVELS.WARNING,event:Rn.EVENTS.INVALID_DVR_WINDOW}),_(o.now,o.range),o.range}return e},reset:E},t=ct(o).getInstance(),E(),e}oo.__dashjs_factory_name="TimelineConverter";var so=u.A.getSingletonFactory(oo),lo=n(9944),uo=n(5521);function co(e){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ho=function(){return!!e})()}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function po(e,t){return(po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var mo=function(){function e(){var t;if(this instanceof e)return(t=function(e,t,n){t=fo(t);var i=e;if(!(t=ho()?Reflect.construct(t,[],fo(e).constructor):t.apply(e,n))||"object"!==co(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,e)).captionData=null,t.label=null,t.defaultTrack=!1,t.kind=null,t.isFragmented=!1,t.isEmbedded=!1,t.isTTML=null,t;throw new TypeError("Cannot call a class as a function")}var t=e,n=fa;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&po(t,n),t=e,Object.defineProperty(t,"prototype",{writable:!1}),t}(),go=n(5994);function _o(){var e=0;function t(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function n(e,n){return e=e.videoHeight/15,n?"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(n.foreground?t(n.foreground):"rgb(255, 255, 255)")+"; font-style: "+(n.italics?"italic":"normal")+"; text-decoration: "+(n.underline?"underline":"none")+"; white-space: pre; background-color: "+(n.background?t(n.background):"transparent")+";":"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(t,i,r,a){for(var o=null,s=!1,l=-1,u={start:i,end:r,spans:[]},c="style_cea608_white_black",h={},d={},f=[],p=0;p<15;++p){var m=a.rows[p],g="",_=null;if(!1===m.isEmpty()){var y=function(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}(m.chars);null===o&&(o={x:y,y1:p,y2:p+1,p:[]}),y!==l&&s&&(o.p.push(u),u={start:i,end:r,spans:[]},o.y2=p,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===h.hasOwnProperty(o.name)?(f.push(o),h[o.name]=o):h[o.name].p.contat(o.p),o={x:y,y1:p,y2:p+1,p:[]});for(var v=0;v<m.chars.length;++v){var A,E=m.chars[v],b=E.penState;null!==_&&b.equals(_)||(0<g.trim().length&&(u.spans.push({name:c,line:g,row:p}),g=""),A="style_cea608_"+b.foreground+"_"+b.background,b.underline&&(A+="_underline"),b.italics&&(A+="_italics"),d.hasOwnProperty(A)||(d[A]=JSON.parse(JSON.stringify(b))),_=b,c=A),g+=E.uchar}0<g.trim().length&&u.spans.push({name:c,line:g,row:p}),s=!0,l=y}else s=!1,l=-1,o&&(o.p.push(u),u={start:i,end:r,spans:[]},o.y2=p,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===h.hasOwnProperty(o.name)?(f.push(o),h[o.name]=o):h[o.name].p.contat(o.p),o=null)}o&&(o.p.push(u),o.y2=p+1,o.name="region_"+o.x+"_"+o.y1+"_"+o.y2,!1===h.hasOwnProperty(o.name)?(f.push(o),h[o.name]=o):h[o.name].p.contat(o.p),o=null);var w=[];for(p=0;p<f.length;++p){var T=f[p],S="sub_cea608_"+e++,R=document.createElement("div"),I=(R.id=S,"left: "+3.125*T.x+"%; top: "+6.66*T.y1+"%; width: "+(100-3.125*T.x)+"%; height: "+6.66*Math.max(T.y2-1-T.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"),C=((R.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+I,I=document.createElement("div")).className="paragraph bodyStyle",I.style.cssText=n(t),document.createElement("div"));C.className="cueUniWrapper",C.style.cssText="unicode-bidi: normal; direction: ltr;";for(var L=0;L<T.p.length;++L)for(var P=T.p[L],D=0,k=0;k<P.spans.length;++k){var x,M,O,N=P.spans[k];0<N.line.length&&(0!==k&&D!=N.row&&((x=document.createElement("br")).className="lineBreak",C.appendChild(x)),x=!1,D===N.row&&(x=!0),D=N.row,M=d[N.name],(O=document.createElement("span")).className="spanPadding "+N.name+" customSpanColor",O.style.cssText=n(t,M),0!==k&&x?k===P.spans.length-1?O.textContent=N.line.replace(/\s+$/g,""):O.textContent=N.line:1<P.spans.length&&k<P.spans.length-1&&N.row===P.spans[k+1].row?O.textContent=N.line.replace(/^\s+/g,""):O.textContent=N.line.trim(),C.appendChild(O))}I.appendChild(C),R.appendChild(I);var F,B={bodyStyle:["%",90]};for(F in d)d.hasOwnProperty(F)&&(B[F]=["%",90]);w.push({type:"html",start:i,end:r,cueHTMLElement:R,cueID:S,cellResolution:[32,15],isFromCEA608:!0,fontSize:B,lineHeight:{},linePadding:{}})}return w}}}_o.__dashjs_factory_name="EmbeddedTextHtmlRender";var yo=u.A.getSingletonFactory(_o);function vo(e){var t,n,a,o,u,h,d,f,p,m,g,_,y,A,E,b,w,S=e.errHandler,I=e.manifestModel,C=e.mediaController,L=e.videoModel,P=e.textTracks,D=e.vttParser,k=e.vttCustomRenderingParser,x=e.ttmlParser,M=e.streamInfo,O=e.settings,N=this.context,F=(0,s.A)(N).getInstance(),B=!1;function U(){f=NaN,d=!(p=[]),u=[],o=m=h=null}function j(e){(e=e.chunk).mediaInfo.embeddedCaptions&&V(e.bytes,e)}function G(e){g=e}function V(e,s){var l,u,c=s.mediaInfo,p=c.type,C=c.mimeType;if(C=c.codec||C)if(-1!==c.codec.indexOf("application/mp4"))c=e,l=C,"InitializationSegment"===(M=s).segmentType?(d=!0,f=a.getMediaTimescaleFromMoov(c)):d&&(0<(x=a.getSamplesInfo(c).sampleList).length&&(m=x[0].cts-M.start*f),(0<=l.search(r.A.STPP)?function(e,i){var a;for(o=null!==o?o:Y(l),a=0;a<i.length;a++){for(var s=i[a],u=s.cts,c=H(),d=(p=c+u/f)+s.duration/f,p=(t.buffered.add(p,d),new DataView(e,s.offset,s.subSizes[0])),m=(d=uo.Utils.dataViewToString(p,r.A.UTF8),[]),_=s.offset+s.subSizes[0],y=1;y<s.subSizes.length;y++){var v=new Uint8Array(e,_,s.subSizes[y]);v=String.fromCharCode.apply(null,v),m.push(v),_+=s.subSizes[y]}try{var A=I.getValue().ttmlTimeIsRelative?u/f:0,E=o.parse(d,A,u/f,(u+s.duration)/f,m);P.addCaptions(g,c,E)}catch(e){h.removeExecutedRequestsBeforeTime(),this.remove(),n.error("TTML parser error: "+e.message)}}}:function(e,i){for(var r=[],a=0;a<i.length;a++)for(var o=i[a],s=(o.cts-=m,(l=H()+o.cts/f)+o.duration/f),l=(t.buffered.add(l,s),e.slice(o.offset,o.offset+o.size)),u=uo.parseBuffer(l),c=0;c<u.boxes.length;c++){var h=u.boxes[c];if(n.debug("VTT box1: "+h.type),"vtte"!==h.type&&"vttc"===h.type){n.debug("VTT vttc boxes.length = "+h.boxes.length);for(var d={styles:{}},p=0;p<h.boxes.length;p++){var _=h.boxes[p];if(n.debug("VTT box2: "+_.type),"payl"===_.type)d.start=o.cts/f,d.end=(o.cts+o.duration)/f,d.data=_.cue_text;else if("sttg"===_.type&&_.settings&&""!==_.settings)try{var y=_.settings.split(" ");d.styles=D.getCaptionStyles(y)}catch(e){}}d&&d.data&&(r.push(d),n.debug("VTT  ".concat(d.start," - ").concat(d.end," :  ").concat(d.data)))}}0<r.length&&P.addCaptions(g,0,r)})(c,x));else if(p===r.A.VIDEO){var k=e;if((M=s).segmentType===R.G.INIT_SEGMENT_TYPE)0===y&&(y=a.getMediaTimescaleFromMoov(k));else if(M.segmentType===R.G.MEDIA_SEGMENT_TYPE){if(0===y)return void n.warn("CEA-608: No timescale for embeddedTextTrack yet");var x=(c=a.getSamplesInfo(k)).lastSequenceNumber,M=(p=Math.trunc(M.start),Math.trunc(M.end));if(b[0]||b[1]||function(){for(var e=0;e<_.length;e++){if(-1===(t=P.getTrackIdxForId(_[e].id)))return n.warn("CEA-608: data before track is ready.");var t=function(e){return function(t,n,i){(t=L.getTTMLRenderingDiv()?w.createHTMLCaptionsFromScreen(L.getElement(),t,n,i):[{start:t,end:n,data:i.getDisplayText(),styles:{}}])&&P.addCaptions(e,0,t)}}(t);b[e]=new(i().Cea608Parser)(e+1,{newCue:t},null)}}(),y){if(j=A,G=c.numSequences,null!==j&&null!==x&&null!==E&&null!==p&&(x===j?E!==p:x!==j+G))for(u=0;u<b.length;u++)b[u]&&b[u].reset();for(var O=function(e){if(0===e.length)return null;for(var t,n={splits:[],fields:[[],[]]},r=new DataView(k),a=0;a<e.length;a++)for(var o=e[a],s=i().findCea608Nalus(r,o.offset,o.size),l=null,u=0,c=0;c<s.length;c++)for(var h=i().extractCea608DataFromRange(r,s[c]),d=0;d<2;d++)0<h[d].length&&(o.cts!==l?u=0:u+=1,t=H(),n.fields[d].push([o.cts+t*y,h[d],u]),l=o.cts);return n.fields.forEach((function(e){e.sort((function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]}))})),n}(c.sampleList),N=0;N<b.length;N++){var F=O.fields[N],B=b[N];if(B)for(u=0;u<F.length;u++)B.addData(F[u][0]/y,F[u][1])}A=x,E=M}}}else{p=s;var U,j=C,G=new DataView(e,0,e.byteLength);G=uo.Utils.dataViewToString(G,r.A.UTF8);try{U=Y(j).parse(G,0),P.addCaptions(P.getCurrentTrackIdx(),0,U),t.buffered&&t.buffered.add(p.start,p.end)}catch(e){S.error(new v.A(T.TIMED_TEXT_ERROR_ID_PARSE_CODE,T.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,G))}}else n.error("No text type defined")}function H(){return isNaN(t.timestampOffset)?0:t.timestampOffset}function Y(e){var t;return 0<=e.search(r.A.VTT)?t=O.get().streaming.text.webvtt.customRenderingEnabled&&k?k:D:(0<=e.search(r.A.TTML)||0<=e.search(r.A.STPP))&&(t=x),t}function z(e){_.forEach((function(t){0<=(t=P.getTrackIdxForId(t.id))&&P.deleteCuesFromTrackIdx(t,e.from,e.to)}))}return t={initialize:function(){B||(_=[],y=0,b=[],B=!(E=A=g=null),w=yo(N).getInstance(),F.on(l.A.VIDEO_CHUNK_RECEIVED,j,t),F.on(l.A.BUFFER_CLEARED,z,t))},addMediaInfos:function(e,n,i){if(u=u.concat(n),e===r.A.TEXT&&n[0].isFragmented&&!n[0].isEmbedded){h=i,t.buffered=(0,go.A)(N).create(),p=C.getTracksFor(r.A.TEXT,M.id).filter((function(e){return e.isFragmented}));for(var a=C.getCurrentTrackFor(r.A.TEXT,M.id),o=0;o<p.length;o++)if(p[o]===a){G(o);break}}for(var s=0;s<n.length;s++){m=void 0,l=void 0,c=void 0,d=void 0;var l,c,d,f=n[s],m=new mo;for(l in f)m[l]=f[l];m.labels=f.labels,m.defaultTrack=(c=f,d=!1,1<_.length&&c.isEmbedded?d=c.id&&c.id===r.A.CC1:1===_.length?c.id&&"string"==typeof c.id&&"CC"===c.id.substring(0,2)&&(d=!0):0===_.length&&(d=c.index===u[0].index),d),m.isFragmented=f.isFragmented,m.isEmbedded=!!f.isEmbedded,m.isTTML=(c=f).codec&&0<=c.codec.search(r.A.STPP)||c.mimeType&&0<=c.mimeType.search(r.A.TTML),m.kind=(d={subtitle:"subtitles",caption:"captions"},(c=f.roles&&0<f.roles.length?d[f.roles[0]]:d.caption)===d.caption||c===d.subtitle?c:d.caption),P.addTextTrack(m)}},resetMediaInfos:function(){u=[]},getStreamId:function(){return M.id},append:V,abort:function(){},addEmbeddedTrack:function(e){if(B&&e)if(e.id===r.A.CC1||e.id===r.A.CC3){for(var t=0;t<_.length;t++)if(_[t].id===e.id)return;_.push(e)}else n.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){F.off(l.A.VIDEO_CHUNK_RECEIVED,j,t),F.off(l.A.BUFFER_CLEARED,z,t),P&&P.deleteAllTextTracks(),B=!1,_=[],b=[null,null],E=A=null},getConfig:function(){return{fragmentModel:h,fragmentedTracks:p,videoModel:L}},setCurrentFragmentedTrackIdx:G,remove:function(e,n){void 0===e&&e===n&&(e=t.buffered.start(0),n=t.buffered.end(t.buffered.length-1)),t.buffered.remove(e,n),P.deleteCuesFromTrackIdx(g,e,n)},reset:function(){U(),u=[],a=null}},n=(0,c.A)(N).getInstance().getLogger(t),a=(0,nn.A)(N).getInstance(),U(),t}vo.__dashjs_factory_name="TextSourceBuffer";var Ao=u.A.getClassFactory(vo),Eo=n(8769);function bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var wo=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function To(e){var t,n,i,a,o,u,d,f,p,m,g,_,y,v,A,E,b,w,T,S=this.context,R=(0,s.A)(S).getInstance(),I=e.videoModel,C=e.streamInfo,L=e.settings;function P(e,t){var n=I.getClientWidth(),i=I.getClientHeight(),r=I.getVideoWidth(),a=I.getVideoHeight(),o=I.getVideoRelativeOffsetTop(),s=I.getVideoRelativeOffsetLeft();if(0!==r&&0!==a){var l=r/a,c=!1;if(e.isFromCEA608&&(l=3.5/3,c=!0),n=function(e,t,n,i,r,a){var o=0,s=0;return n/i<e/t?o=(s=t)/i*n:s=(o=e)/n*i,i=n=0,r<o/s?n=(i=s)*r:i=(n=o)/r,s=(e-n)/2,o=(t-i)/2,a?{x:s+.1*n,y:o+.1*i,w:.8*n,h:.8*i}:{x:s,y:o,w:n,h:i}}.call(this,n,i,r,a,l,c),i=n.w,r=n.h,a=n.x,l=n.y,i!=f||r!=p||a!=u||l!=d||t){u=a+s,d=l+o,f=i,p=r,m&&(c=m.style)&&(c.left=u+"px",c.top=d+"px",c.width=f+"px",c.height=p+"px",c.zIndex=y&&document[y]||v?E:null,R.trigger(h.A.CAPTION_CONTAINER_RESIZE));var g=e.activeCues;if(g)for(var _=g.length,A=0;A<_;++A){var b=g[A];b.scaleCue(b)}}}}function D(e){var t,n,i,r=f,a=p;if(e.cellResolution){var o=[r/e.cellResolution[0],a/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t))for(var s=(e.linePadding[t]*o[0]).toString(),l=document.getElementsByClassName("spanPadding"),u=0;u<l.length;u++)l[u].style.cssText=l[u].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s),l[u].style.cssText=l[u].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s);if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?n=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(n=e.fontSize[t][1]),s=(n*o[1]).toString();for(var c="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph"),h=0;h<c.length;h++)c[h].style.cssText=c[h].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),s=(i*o[1]).toString(),c=document.getElementsByClassName(t);for(var d=0;d<c.length;d++)c[d].style.cssText=c[d].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+s)}}}e.isd&&((r=document.getElementById(e.cueID))&&m.removeChild(r),x(e))}function k(e,t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,i=/^#(.*)$/;return n.test(t)?(n=n.exec(t),n=parseInt(n[4],10)-1,"data:image/png;base64,"+btoa(e.images[n])):i.test(t)?(n=i.exec(t)[1],"data:image/png;base64,"+e.embeddedImages[n]):t}function x(e){var n;m&&(z.call(this),n=document.createElement("div"),m.appendChild(n),A=(0,Eo.renderHTML)(e.isd,n,(function(t){return k(e,t)}),m.clientHeight,m.clientWidth,L.get().streaming.text.imsc.displayForcedOnlyMode,(function(e){t.info("renderCaption :",e)}),A,L.get().streaming.text.imsc.enableRollUp),n.id=e.cueID,R.trigger(h.A.CAPTION_RENDERED,{captionDiv:n,currentTrackIdx:o}))}function M(e,n,i){var a,s,l,c,g=G(e),_=L.get().streaming.text.dispatchForManualRendering;if(g&&Array.isArray(i)&&0!==i.length)for(var y=0;y<i.length;y++){var v=null,A=i[y];g.cellResolution=A.cellResolution,g.isFromCEA608=A.isFromCEA608,isNaN(A.start)||isNaN(A.end)||(_?v=function(e,t){var n=B(e,t);return n.onenter=function(){F(e)&&T&&T.cueID!==n.cueID&&N(T),delete n.type,O(T=n)},n.onexit=function(){N(n),T=null},n}(A,n):F(A)&&m?v=function(e,n,i){var a=this;return e=B(e,n),m.style.left=u+"px",m.style.top=d+"px",m.style.width=f+"px",m.style.height=p+"px",e.onenter=function(){var e=this;i.mode===r.A.TEXT_SHOWING&&(this.isd?(w?requestAnimationFrame((function(){return x(e)})):x(this),t.debug("Cue enter id:"+this.cueID)):(m.appendChild(this.cueHTMLElement),D.call(a,this),R.trigger(h.A.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:o})))},e.onexit=function(){if(m)for(var e=m.childNodes,n=0;n<e.length;++n)e[n].id===this.cueID&&(t.debug("Cue exit id:"+e[n].id),m.removeChild(e[n]),--n)},e}(A,n,g):A.data&&(v=function(e,n,i){if((n=B(e,n)).isActive=!1,e.styles)try{void 0!==e.styles.align&&"align"in n&&(n.align=e.styles.align),void 0!==e.styles.line&&"line"in n&&(n.line=e.styles.line),void 0!==e.styles.snapToLines&&"snapToLines"in n&&(n.snapToLines=e.styles.snapToLines),void 0!==e.styles.position&&"position"in n&&(n.position=e.styles.position),void 0!==e.styles.size&&"size"in n&&(n.size=e.styles.size)}catch(e){t.error(e)}return n.onenter=function(){i.mode===r.A.TEXT_SHOWING&&R.trigger(h.A.CAPTION_RENDERED,{currentTrackIdx:o})},n}(A,n,g)));try{if(v){!function(e,t){if(e.cues)for(var n=0;n<e.cues.length;n++)if(e.cues[n].startTime===t.startTime&&e.cues[n].endTime===t.endTime)return 1}(g,v)&&(L.get().streaming.text.webvtt.customRenderingEnabled?(g.manualCueList||(g.manualCueList=[]),g.manualCueList.push(v)):(E=void 0,g.cues&&0!==g.cues.length&&(E=g.cues[g.cues.length-1]),l=v,(c=E)&&c.endTime>=l.startTime?(a=v,s=E,L.get().streaming.text.extendSegmentedCues&&function(e,t,n){for(var i=0;i<n.length;i++){var r=n[i];if(JSON.stringify(e[r])!==JSON.stringify(t[r]))return}return 1}(s,a,wo)?s.endTime=Math.max(s.endTime,a.endTime):(E.isd&&(E.onexit=function(){}),g.mode!==r.A.TEXT_DISABLED&&g.addCue(v))):g.mode!==r.A.TEXT_DISABLED&&g.addCue(v)));var E,b,S,C=L.get().streaming.buffer.bufferToKeep,P=(V=j=M=S=b=P=void 0,g),k=I.getTime()-C;if(!(k<0)&&P&&(P.cues||P.manualCueList)){var M=P.cues&&0<P.cues.length?"native":"custom",j="native"==M?P.cues:P.manualCueList;if(j&&0!==j.length)for(var V=j.length-1;0<=V;V--)!H(j[V],0,k,!0)||(b=j[V],S=I.getTime(),b.startTime>=S&&b.endTime<=S)||("native"==M?P.removeCue(j[V]):(U(j[V]),delete P.manualCueList[V]))}}else t.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(e){throw Y(g),g.addCue(v),e}}}function O(e){R.trigger(h.A.CUE_ENTER,e)}function N(e){R.trigger(h.A.CUE_EXIT,{cueID:e.cueID})}function F(e){return"html"===e.type}function B(e,t){return F(e)?((r=new n((i=e).start+t,i.end+t,"")).cueHTMLElement=i.cueHTMLElement,r.isd=i.isd,r.images=i.images,r.embeddedImages=i.embeddedImages,r.cueID=i.cueID,r.scaleCue=D.bind(self),r.cellResolution=i.cellResolution,r.lineHeight=i.lineHeight,r.linePadding=i.linePadding,r.fontSize=i.fontSize,r.isd&&function e(t,n){n&&n.forEach((function(n){n.kind&&"image"===n.kind&&(n.src=k(t,n.src)),e(t,n.contents)}))}(r,r.isd.contents),r):((i=new n(e.start-t,e.end-t,e.data)).cueID="".concat(i.startTime,"_").concat(i.endTime),i);var i,r}function U(e){if(g)for(var t=g.childNodes,n=0;n<t.length;++n)t[n].id===e.cueID&&(g.removeChild(t[n]),--n)}function j(){var e,t=[],n=function(e){var t,n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,t=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw t}}};if(Array.isArray(e)||(o=function(e){var t;if(e)return"string"==typeof e?bo(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?bo(e,void 0):void 0}(e)))return o&&(e=o),r=0,{s:a=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(I.getTextTracks());try{for(n.s();!(e=n.n()).done;){var i=e.value;i.manualMode===r.A.TEXT_SHOWING&&t.push(i)}}catch(e){n.e(e)}finally{n.f()}return t}function G(e){return 0<=e&&i[e]?I.getTextTrack(i[e].kind,i[e].id,i[e].lang,i[e].isTTML,i[e].isEmbedded):null}function V(e){var n,i=this;e!==o&&(n=G(o=e),function(e){z.call(this),(e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var n=e.sheet,i=I.getElement();try{i&&(i.id?n.insertRule("#"+i.id+"::cue {background: transparent}",0):0!==i.classList.length?n.insertRule("."+i.className+"::cue {background: transparent}",0):n.insertRule("video::cue {background: transparent}",0))}catch(e){t.info(""+e.message)}}}:function(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}).call(this)}.call(this,n),_&&(clearInterval(_),_=null),n)&&"html"===n.renderingType&&(P.call(this,n,!0),window.ResizeObserver?(b=new window.ResizeObserver((function(){P.call(i,n,!0)}))).observe(I.getElement()):_=setInterval(P.bind(this,n),500))}function H(e,t,n,i){return i=!(3<arguments.length&&void 0!==i)||i,e&&(isNaN(t)||(i?e.startTime:e.endTime)>=t)&&(isNaN(n)||(i?e.endTime:e.startTime)<=n)}function Y(e,t,n){var i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];if(e&&(e.cues||e.manualCueList)){var r=e.cues&&0<e.cues.length?"native":"custom",a="native"==r?e.cues:e.manualCueList;if(a&&0!==a.length)for(var o=a.length-1;0<=o;o--)H(a[o],t,n,i)&&("native"==r?(a[o].onexit&&a[o].onexit(),e.removeCue(a[o])):(U(a[o]),delete e.manualCueList[o]))}}function z(){if(m)for(;m.firstChild;)m.removeChild(m.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(n=window.VTTCue||window.TextTrackCue,i=[],a=[],p=f=d=u=0,v=!(o=-1),E=2147483647,A=_=g=m=null,w="requestAnimationFrame"in window,void 0!==document.fullscreenElement?y="fullscreenElement":void 0!==document.webkitIsFullScreen?y="webkitIsFullScreen":document.msFullscreenElement?y="msFullscreenElement":document.mozFullScreen&&(y="mozFullScreen"))},getStreamId:function(){return C.id},addTextTrack:function(e){i.push(e)},addCaptions:M,createTracks:function(){var e=L.get().streaming.text.dispatchForManualRendering;i.sort((function(e,t){return e.index-t.index})),m=I.getTTMLRenderingDiv(),g=I.getVttRenderingDiv();for(var t,n,s,u=-1,c=0;c<i.length;c++){d=(s=i[c]).kind,f=void 0!==s.id?s.id:s.lang,t=s.lang,n=s.isTTML,s=s.isEmbedded;var d=I.addTextTrack(d,f,t,n,s),f=(a.push(d),i[c].defaultTrack&&(d.default=!0,u=c),G(c));f&&(f.mode=r.A.TEXT_SHOWING,m&&(i[c].isTTML||i[c].isEmbedded)?f.renderingType="html":f.renderingType="default"),M(c,0,i[c].captionData),R.trigger(h.A.TEXT_TRACK_ADDED)}if(V.call(this,u),0<=u){R.on(h.A.PLAYBACK_METADATA_LOADED,(function e(){var t=G(u);t&&"html"===t.renderingType&&P.call(this,t,!0),R.off(h.A.PLAYBACK_METADATA_LOADED,e,this)}),this);for(var p=0;p<i.length;p++){var _=G(p);_&&(_.mode=p!==u||e?r.A.TEXT_HIDDEN:r.A.TEXT_SHOWING,_.manualMode=p===u?r.A.TEXT_SHOWING:r.A.TEXT_HIDDEN)}}R.trigger(l.A.TEXT_TRACKS_QUEUE_INITIALIZED,{index:o,tracks:i,streamId:C.id})},getCurrentTrackIdx:function(){return o},setCurrentTrackIdx:V,getTrackIdxForId:function(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return i[o]},setModeForTrackIdx:function(e,t){(e=G(e))&&e.mode!==t&&(e.mode=t),e&&e.manualMode!==t&&(e.manualMode=t)},deleteCuesFromTrackIdx:function(e,t,n){(e=G(e))&&Y(e,t,n)},deleteAllTextTracks:function(){for(var e=a?a.length:0,t=0;t<e;t++){var n=G(t);n&&Y.call(this,n,C.start,C.start+C.duration,!1)}a=[],i=[],_&&(clearInterval(_),_=null),b&&I&&(b.unobserve(I.getElement()),b=null),o=-1,z.call(this)},manualCueProcessing:function(e){var t=j();t&&0<t.length&&(t=t[0].manualCueList)&&0<t.length&&t.forEach((function(t){t.startTime<=e&&t.endTime>=e&&!t.isActive?(t.isActive=!0,L.get().streaming.text.dispatchForManualRendering?O(t):WebVTT.processCues(window,[t],g,t.cueID)):t.isActive&&(t.startTime>e||t.endTime<e)&&(t.isActive=!1,(L.get().streaming.text.dispatchForManualRendering?N:U)(t))}))},disableManualTracks:function(){var e=j();e&&0<e.length&&(e=e[0].manualCueList)&&0<e.length&&e.forEach((function(e){if(e.isActive)if(e.isActive=!1,L.get().streaming.text.dispatchForManualRendering)N(e);else if(g)for(var t=g.childNodes,n=0;n<t.length;++n)t[n].id===e.cueID&&(g.removeChild(t[n]),--n)}))}},t=(0,c.A)(S).getInstance().getLogger(e),e}To.__dashjs_factory_name="TextTracks";var So=u.A.getClassFactory(To);function Ro(){var e,t,n,i,r,a,o=this.context;function s(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}function l(e){var t={};return e.forEach((function(e){var n,i;1<e.split(/:/).length&&(i=!1,(n=e.split(/:/)[1])&&-1!=n.search(/%/)&&(i=!0,n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line="auto"===n?n:parseInt(n,10),i)&&(t.snapToLines=!1),(e.match(/position/)||e.match(/P/))&&(t.position=n),e.match(/size/)||e.match(/S/))&&(t.size=n)})),t}return e={parse:function(e){var o=[];if(e)for(var u=(e=e.split(n)).length,c=-1,h=0;h<u;h++){var d,f,p,m=e[h];0<m.length&&"WEBVTT"!==m&&m.match(i)&&(p=void 0,(p=(m=m.split(i))[1].split(a)).shift(),m[1]=p[0],p.shift(),p=(m={cuePoints:m,styles:l(p)}).cuePoints,m=m.styles,d=function(e,t){for(var n,r=t,a="",o="";""!==e[r]&&r<e.length;)r++;if(1<(n=r-t))for(var s=0;s<n;s++){if((o=e[t+s]).match(i)){a="";break}a+=o,s!==n-1&&(a+="\n")}else(o=e[t]).match(i)||(a=o);return a}(e,h+1),f=s(p[0].replace(r,"")),p=s(p[1].replace(r,"")),!isNaN(f)&&!isNaN(p)&&c<=f&&f<p?""!==d?o.push({start:c=f,end:p,data:d,styles:m}):t.error("Skipping cue due to empty/malformed cue text"):t.error("Skipping cue due to incorrect cue timing"))}return o},getCaptionStyles:l},t=(0,c.A)(o).getInstance().getLogger(e),n=/(?:\r\n|\r|\n)/gm,i=/-->/,r=/(^[\s]+|[\s]+$)/g,a=/\s\b/g,e}Ro.__dashjs_factory_name="VTTParser";var Io=u.A.getSingletonFactory(Ro);function Co(){var e,t={parse:function(t){var n=[];return e.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},n.push(e)},e.parse(t),n}};try{window&&window.WebVTT&&window.WebVTT.Parser&&(e=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(t){}return t}Co.__dashjs_factory_name="VttCustomRenderingParser";var Lo=u.A.getSingletonFactory(Co);function Po(){var e=this.context,t=(0,s.A)(e).getInstance(),n=0,i={parse:function(e,i,a,o,s){var u,c="",d=[],f={},p={},m="",g="",_={onOpenTag:function(e,n,i){i[" imagetype"]&&!i[" imageType"]&&(t.trigger(h.A.CONFORMANCE_VIOLATION,{level:Rn.LEVELS.ERROR,event:Rn.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"!==n||"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"!==e&&"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"!==e||(i[" imageType"]&&"PNG"===i[" imageType"].value?m=i["http://www.w3.org/XML/1998/namespace id"].value:r.warn("smpte-tt imageType != PNG. Discarded"))},onCloseTag:function(){m&&(p[m]=g.trim()),m=g=""},onText:function(e){m&&(g+=e)}};if(!e)throw c="no ttml data to parse",new Error(c);f.data=e,t.trigger(l.A.TTML_TO_PARSE,f);var y=(0,Eo.fromXML)(f.data,(function(e){c=e}),_);t.trigger(l.A.TTML_PARSED,{ttmlString:f.data,ttmlDoc:y});for(var v,A=y.getMediaTimeEvents(),E=0;E<A.length;E++){var b=(0,Eo.generateISD)(y,A[E],(function(e){c=e}));b.contents.some((function(e){return e.contents.length}))&&(v=A[E]+i)<(u=A[E+1]+i)&&d.push({start:v,end:u,type:"html",cueID:(v="cue_TTML_"+n,n++,v),isd:b,images:s,embeddedImages:p})}if(""!==c)throw r.error(c),new Error(c);return d}},r=(0,c.A)(e).getInstance().getLogger(i);return i}Po.__dashjs_factory_name="TTMLParser";var Do=u.A.getSingletonFactory(Po);function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xo(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach((function(t){var i=e,r=t,a=(t=n[t],function(e){if("object"!=ko(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=ko(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(r));(r="symbol"==ko(a)?a:String(a))in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function No(e){var t,n,i=this.context,a=(0,s.A)(i).getInstance(),o=(0,K.A)(i).getInstance(),l=e.adapter,u=e.baseURLController;function d(e,t){var i=n[e];n[e]=Mo(Mo({},i),{},{status:t})}function f(){n=[]}return e={addFontsFromTracks:function(e,t){if(e&&Array.isArray(e)&&t)for(var i=0;i<e.length;i++)!function(e,t){var i,a=!1,s=(u.resolve()&&(s=l.getVoRepresentations(e))&&0<s.length&&(i=u.resolve(s[0].path).url),e.essentialPropertiesAsArray.filter((function(e){return e.schemeIdUri&&e.schemeIdUri===r.A.FONT_DOWNLOAD_DVB_SCHEME}))),c=e.supplementalPropertiesAsArray.filter((function(e){return e.schemeIdUri&&e.schemeIdUri===r.A.FONT_DOWNLOAD_DVB_SCHEME}));(s=0<s.length?(a=!0,s):c).forEach((function(s){var l,u;s.value&&"1"===s.value&&s.dvbUrl&&0<s.dvbUrl.length&&s.dvbFontFamily&&0<s.dvbFontFamily.length&&s.dvbMimeType&&(s.dvbMimeType===r.A.OFF_MIMETYPE||s.dvbMimeType===r.A.WOFF_MIMETYPE)&&(l=s.dvbUrl,u=i,u=!o.isPathAbsolute(l)&&o.isRelative(l)?u?o.resolve(l,u):o.resolve(l):l,n.push({fontFamily:s.dvbFontFamily,url:u,mimeType:s.dvbMimeType,trackId:e.id,streamId:t,isEssential:a,status:"unloaded",fontFace:new FontFace(s.dvbFontFamily,"url(".concat(u,")"),{display:"swap"})}))}))}(e[i],t)},downloadFonts:function(){for(var e=0;e<n.length;e++)!function(e){var i=n[e];document.fonts.add(i.fontFace),a.trigger(h.A.DVB_FONT_DOWNLOAD_ADDED,i),i.fontFace.load().then((function(){d(e,"loaded"),a.trigger(h.A.DVB_FONT_DOWNLOAD_COMPLETE,i)}),(function(n){d(e,"error"),t.debug("Font download error: ",n),a.trigger(h.A.DVB_FONT_DOWNLOAD_FAILED,i)}))}(e)},getFonts:function(){return n},getFontsForTrackId:function(e){return n.filter((function(t){return t.trackId&&t.trackId===e}))},reset:function(){var e,i=function(e){var t,n,i,r,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return i=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){i=!0,t=e},f:function(){try{n||null==o.return||o.return()}finally{if(i)throw t}}};if(Array.isArray(e)||(o=function(e){var t;if(e)return"string"==typeof e?Oo(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Oo(e,void 0):void 0}(e)))return o&&(e=o),r=0,{s:a=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=document.fonts.delete(r.fontFace);t.debug("Removal of fontFamily: ".concat(r.fontFamily," was ").concat(a?"successful":"unsuccessful"))}}catch(e){i.e(e)}finally{i.f()}f()}},t=(0,c.A)(i).getInstance().getLogger(e),f(),e}No.__dashjs_factory_name="DVBFonts";var Fo=u.A.getClassFactory(No);function Bo(e){var t,n,i,a,o,u,d,f,p,m,g,_,y,v,A=this.context,E=e.adapter,b=e.errHandler,w=e.manifestModel,T=e.mediaController,S=e.baseURLController,R=e.videoModel,I=e.settings;function C(e){var t;v.error("Could not download ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential&&(t=a[e.streamId].getTrackIdxForId(e.trackId),a[e.streamId].setModeForTrackIdx(t,r.A.TEXT_DISABLED))}function L(e){var t;v.debug("Successfully downloaded ".concat(e.isEssential?"an essential":"a"," font - fontFamily: ").concat(e.fontFamily,", url: ").concat(e.url)),e.isEssential&&((t=a[e.streamId].getTrackIdxForId(e.trackId))===a[e.streamId].getCurrentTrackIdx()?a[e.streamId].setModeForTrackIdx(t,r.A.TEXT_SHOWING):a[e.streamId].setModeForTrackIdx(t,r.A.TEXT_HIDDEN))}function P(e){var t,i=e.tracks,o=e.index,s=e.streamId;!1===I.get().streaming.text.defaultEnabled&&!x()||_?M(s,-1):((e=T.getCurrentTrackFor(r.A.TEXT,s))&&(t={lang:e.lang,role:e.roles[0],index:e.index,codec:e.codec,accessibility:e.accessibility[0]},i.some((function(e,n){if(T.matchSettings(t,e))return M(s,n),o=n,!0}))),p=!1),n[s].lastEnabledIndex=o,f.trigger(h.A.TEXT_TRACKS_ADDED,{enabled:x(),index:o,tracks:i,streamId:s}),g=!0,y.addFontsFromTracks(i,s),y.getFonts().forEach((function(e){var t;e.isEssential&&(t=a[e.streamId].getTrackIdxForId(e.trackId),a[e.streamId].setModeForTrackIdx(t,r.A.TEXT_DISABLED))})),y.downloadFonts()}function D(e){try{var t=e.streamId;a[t]&&!isNaN(e.time)&&a[t].manualCueProcessing(e.time)}catch(e){}}function k(e){try{var t=e.streamId;a[t]&&a[t].disableManualTracks()}catch(e){}}function x(){return!(p&&!m)}function M(e,t){(p=-1===t)&&T&&T.saveTextSettingsDisabled();var n=O(e);if(n!==t&&a[e]){a[e].disableManualTracks();var o=a[e].getCurrentTrackInfo(),s=((s=o?R.getTextTrack(o.kind,o.id,o.lang,o.isTTML,o.isEmbedded):null)&&s.mode!==r.A.TEXT_DISABLED&&a[e].setModeForTrackIdx(n,r.A.TEXT_HIDDEN),a[e].setCurrentTrackIdx(t),o=a[e].getCurrentTrackInfo(),I.get().streaming.text.dispatchForManualRendering);if(o&&!s&&o.mode!==r.A.TEXT_DISABLED&&a[e].setModeForTrackIdx(t,r.A.TEXT_SHOWING),o&&o.isFragmented&&!o.isEmbedded){var u=e,c=o,h=n;if(i[u])for(var d=i[u].getConfig().fragmentedTracks,m=0;m<d.length;m++){var g,_=d[m];c.lang===_.lang&&(_.id?c.id===_.id:c.index===_.index)&&(g=T.getCurrentTrackFor(r.A.TEXT,u),(_.id?g.id!==_.id:g.index!==_.index)?(a[u].deleteCuesFromTrackIdx(h),i[u].setCurrentFragmentedTrackIdx(m)):-1===h&&f.trigger(l.A.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:u,mediaType:r.A.TEXT}))}}else o&&!o.isFragmented&&f.trigger(l.A.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:o},{streamId:e,mediaType:r.A.TEXT});T.setTrack(o)}}function O(e){return a[e].getCurrentTrackIdx()}function N(){i={},a={},n={},_=g=!(p=!0)}return _=g=m=!(t={deactivateStream:function(e){e&&(e=e.id,i[e]&&i[e].resetMediaInfos(),a[e])&&a[e].deleteAllTextTracks()},initialize:function(){y=Fo(A).create({adapter:E,baseURLController:S}),f.on(l.A.TEXT_TRACKS_QUEUE_INITIALIZED,P,t),f.on(l.A.DVB_FONT_DOWNLOAD_FAILED,C,t),f.on(l.A.DVB_FONT_DOWNLOAD_COMPLETE,L,t),I.get().streaming.text.webvtt.customRenderingEnabled&&(f.on(l.A.PLAYBACK_TIME_UPDATED,D,t),f.on(l.A.PLAYBACK_SEEKING,k,t))},initializeForStream:function(e){var t,r=e.id;((t=So(A).create({videoModel:R,settings:I,streamInfo:e})).initialize(),a[r]=t,t=Ao(A).create({errHandler:b,adapter:E,dvbFonts:y,manifestModel:w,mediaController:T,videoModel:R,textTracks:t,vttParser:o,vttCustomRenderingParser:u,ttmlParser:d,streamInfo:e,settings:I})).initialize(),i[r]=t,n[r]={},n[r].lastEnabledIndex=-1},createTracks:function(e){e=e.id,a[e]&&a[e].createTracks()},getTextSourceBuffer:function(e){if(e=e.id,i&&i[e])return i[e]},getAllTracksAreDisabled:function(){return p},addEmbeddedTrack:function(e,t){e=e.id,i[e]&&i[e].addEmbeddedTrack(t)},enableText:function(e,t){return(0,Y.sq)(t,"boolean"),x()!==t&&(t&&M(e,n[e].lastEnabledIndex),t||(n[e].lastEnabledIndex=O(e),g?M(e,-1):_=!0)),!0},isTextEnabled:x,setTextTrack:M,getCurrentTrackIdx:O,enableForcedTextStreaming:function(e){return(0,Y.sq)(e,"boolean"),m=e,!0},addMediaInfosToBuffer:function(e,t,n){e=e.id,i[e]&&i[e].addMediaInfos(t,n,3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)},reset:function(){y.reset(),N(),f.off(l.A.TEXT_TRACKS_QUEUE_INITIALIZED,P,t),f.off(l.A.DVB_FONT_DOWNLOAD_FAILED,C,t),f.off(l.A.DVB_FONT_DOWNLOAD_COMPLETE,L,t),I.get().streaming.text.webvtt.customRenderingEnabled&&(f.off(l.A.PLAYBACK_TIME_UPDATED,D,t),f.off(l.A.PLAYBACK_SEEKING,k,t)),Object.keys(i).forEach((function(e){i[e].resetEmbedded(),i[e].reset()}))}}),o=Io(A).getInstance(),u=Lo(A).getInstance(),d=Do(A).getInstance(),f=(0,s.A)(A).getInstance(),v=(0,c.A)(A).getInstance().getLogger(t),N(),t}Bo.__dashjs_factory_name="TextController";var Uo=u.A.getClassFactory(Bo);function jo(){var e,t,n,d,p,m,g,_,y,A,E,b,w,I,C,L,P,D,k,x,M,O,N,F,B,U,j,G,V,H,z,q,Q,X,J,Z,$,ee,te,ne="You must first call initialize() and set a source before calling this method",ie="You must first call initialize() and set a valid source and view before calling this method",re="You must first call attachView() to set the video element before calling this method",ae="You must first call attachSource() with a valid source before calling this method",oe="MediaPlayer not initialized!",se=this.context,le=(0,s.A)(se).getInstance(),ue=(0,S.A)(se).getInstance(),ce=(0,c.A)(se).getInstance({settings:ue});function he(){Te(null),be(null),d=null,I&&(I.reset(),I=null),C&&(C.reset(),C=null),x&&x.reset(),ue.reset(),P&&(P.reset(),P=null)}function de(){return!!n&&!!Z.getElement()}function fe(){return(0,ta.i)()}function pe(){if(g)return G.isPaused();throw ie}function me(){if(g)return G.getIsDynamic();throw ie}function ge(e){var t,n=B&&B.hasVideoTrack()?r.A.VIDEO:r.A.AUDIO;return(n=q.getCurrentDVRInfo(n))?(t=G.getOriginalLiveDelay(),(e=n.range.start+e)>n.range.end-t?n.range.end-t:e):0}function _e(e){var t;if(g)return t=Ee().currentTime,void 0!==e?t=B.getTimeRelativeToStreamId(t,e):G.getIsDynamic()&&(e=B&&B.hasVideoTrack()?r.A.VIDEO:r.A.AUDIO,t=null===(e=q.getCurrentDVRInfo(e))||0===t?0:Math.max(0,t-e.range.start)),t;throw ie}function ye(){var e,t;if(g)return t=Ee().duration,G.getIsDynamic()&&(e=B&&B.hasVideoTrack()?r.A.VIDEO:r.A.AUDIO,t=(e=q.getCurrentDVRInfo(e))?e.range.end-e.range.start:0),t;throw ie}function ve(e){(0,Y.sq)(e,"boolean"),_=e}function Ae(){x.restoreDefaultUTCTimingSources()}function Ee(){if(Z.getElement())return Z.getElement();throw re}function be(e){if(!p)throw oe;Z.setElement(e),e&&(Ce(),C||"function"==typeof(e=dashjs.MetricsReporting)&&(e=e(se).create(),C=e.createMetricsReporting({debug:ce,eventBus:le,mediaElement:Ee(),adapter:D,dashMetrics:q,mediaPlayerModel:k,events:l.A,constants:r.A,metricsConstants:o.A})),L||"function"==typeof(e=dashjs.MssHandler)&&(T.extend(e.errors),L=e(se).create({eventBus:le,mediaPlayerModel:k,dashMetrics:q,manifestModel:Q,playbackController:G,streamController:B,protectionController:I,baseURLController:O,errHandler:M,events:l.A,constants:r.A,debug:ce,initSegmentType:R.G.INIT_SEGMENT_TYPE,BASE64:lo,ISOBoxer:uo,settings:ue})),B)&&B.switchToVideoElement(y),g&&Re(),De(y)}function we(e){var t;if(m)return(t=B.getActiveStreamInfo())?w.getTracksFor(e,t.id):[];throw ne}function Te(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:NaN;if(!p)throw oe;"string"==typeof e&&$.initialize(e),null==t&&(t=NaN),isNaN(t)||(t=Math.max(0,t)),y=t,n=e,(m||g)&&Re(),de()&&De(y)}function Se(){var e;if(m)return(e=B.getActiveStreamInfo())?B.getStreamById(e.id):null;throw ne}function Re(){m=g=!1,D.reset(),B.reset(),j.reset(),z.reset(),G.reset(),V.reset(),H.reset(),A.reset(),w.reset(),te.reset(),I&&(ue.get().streaming.protection.keepProtectionMediaKeys?I.stop():(I.reset(),I=null,Ce())),U.reset(),X.reset(),J.reset()}function Ie(){return yr(se).create({debug:ce,errHandler:M,dashMetrics:q,mediaPlayerModel:k,requestModifier:(0,W.A)(se).getInstance(),mssHandler:L,settings:ue})}function Ce(){var e,t;return I||("function"==typeof(e=dashjs.Protection)?(t=e(se).create(),l.A.extend(e.events),h.A.extend(e.events,{publicOnly:!0}),T.extend(e.errors),N=N||(0,Er.A)(se).getInstance(),I=t.createProtectionSystem({debug:ce,errHandler:M,videoModel:Z,customParametersModel:x,capabilities:N,eventBus:le,events:l.A,BASE64:lo,constants:r.A,cmcdModel:X,settings:ue})):null)}function Le(){var e,t,n;if(p)return P||("function"==typeof(e=dashjs.OfflineController)?(l.A.extend(e.events),h.A.extend(e.events,{publicOnly:!0}),T.extend(e.errors),t=Ie(),(n=yn(se).create()).setConfig({manifestModel:Q,adapter:D,manifestLoader:t,errHandler:M,contentSteeringController:H}),P=e(se).create({debug:ce,manifestUpdater:n,baseURLController:O,manifestLoader:t,manifestModel:Q,mediaPlayerModel:k,abrController:A,playbackController:G,adapter:D,errHandler:M,dashMetrics:q,timelineConverter:b,segmentBaseController:te,schemeLoaderFactory:E,eventBus:le,events:l.A,errors:T,constants:r.A,settings:ue,dashConstants:a.A,urlUtils:(0,K.A)(se).getInstance()})):null);throw oe}function Pe(e){var t=B&&B.hasVideoTrack()?r.A.VIDEO:r.A.AUDIO;return(t=q.getCurrentDVRInfo(t))?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function De(e){var i;e=0<arguments.length&&void 0!==e?e:NaN,P&&P.resetRecords(),!m&&n&&(m=!0,t.info("Streaming Initialized"),i=Ie(),B=B||Ln(se).getInstance(),U=U||Uo(se).create({errHandler:M,manifestModel:Q,adapter:D,mediaController:w,baseURLController:O,videoModel:Z,settings:ue}),F.setConfig({capabilities:N,customParametersModel:x,adapter:D,settings:ue,manifestModel:Q,errHandler:M}),B.setConfig({capabilities:N,capabilitiesFilter:F,manifestLoader:i,manifestModel:Q,mediaPlayerModel:k,customParametersModel:x,protectionController:I,textController:U,adapter:D,dashMetrics:q,errHandler:M,timelineConverter:b,videoModel:Z,playbackController:G,serviceDescriptionController:V,contentSteeringController:H,abrController:A,mediaController:w,settings:ue,baseURLController:O,uriFragmentModel:$,segmentBaseController:te}),j.setConfig({settings:ue,playbackController:G,streamController:B,videoModel:Z,timelineConverter:b,adapter:D}),G.setConfig({streamController:B,serviceDescriptionController:V,dashMetrics:q,adapter:D,videoModel:Z,timelineConverter:b,settings:ue}),z.setConfig({streamController:B,playbackController:G,mediaPlayerModel:k,videoModel:Z,settings:ue}),A.setConfig({streamController:B,domStorage:ee,mediaPlayerModel:k,customParametersModel:x,cmsdModel:J,dashMetrics:q,adapter:D,videoModel:Z,settings:ue}),X.setConfig({abrController:A,dashMetrics:q,playbackController:G}),J.setConfig({}),A.initialize(),B.initialize(_,d),U.initialize(),j.initialize(),z.initialize(),X.initialize(),J.initialize(),H.initialize(),te.initialize(),"string"==typeof n?B.load(n,e):B.loadWithManifest(n,e)),!g&&de()&&(g=!0,t.info("Playback Initialized"))}return t=ce.getLogger(e={initialize:function(e,n,a){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:NaN;N||(N=(0,Er.A)(se).getInstance()).setConfig({settings:ue}),M=M||Ar(se).getInstance(),N.supportsMediaSource()?(p||(p=!0,b=so(se).getInstance(),A||(A=Hr(se).getInstance()).setConfig({settings:ue}),E=E||Mt(se).getInstance(),G=G||f(se).getInstance(),w=w||Vn(se).getInstance(),B=B||Ln(se).getInstance(),j=j||Dn(se).getInstance(),z=z||xn(se).getInstance(),V=V||Nn(se).getInstance(),H=H||pn(se).getInstance(),F=F||wr(se).getInstance(),D=Ca(se).getInstance(),Q=Cr(se).getInstance(),X=mt(se).getInstance(),J=St(se).getInstance(),q=ao(se).getInstance({settings:ue}),ee=ea(se).getInstance({settings:ue}),D.setConfig({constants:r.A,cea608parser:i(),errHandler:M,BASE64:lo}),(O=O||ni(se).create()).setConfig({adapter:D,contentSteeringController:H}),V.setConfig({adapter:D}),te=te||ca(se).getInstance({dashMetrics:q,mediaPlayerModel:k,errHandler:M,baseURLController:O,events:l.A,eventBus:le,debug:ce,boxParser:(0,nn.A)(se).getInstance(),requestModifier:(0,W.A)(se).getInstance(),errors:T}),w.setConfig({domStorage:ee,settings:ue,customParametersModel:x}),k.setConfig({playbackController:G,serviceDescriptionController:V}),H.setConfig({adapter:D,errHandler:M,dashMetrics:q,mediaPlayerModel:k,manifestModel:Q,serviceDescriptionController:V,eventBus:le,requestModifier:(0,W.A)(se).getInstance()}),Ae(),ve(void 0===a||a),Le()),e&&be(e),n&&Te(n,o),t.info("[dash.js "+fe()+"] MediaPlayer has been initialized")):M.error(new v.A(T.CAPABILITY_MEDIASOURCE_ERROR_CODE,T.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(N=e.capabilities),e.capabilitiesFilter&&(F=e.capabilitiesFilter),e.streamController&&(B=e.streamController),e.textController&&(U=e.textController),e.gapController&&(j=e.gapController),e.playbackController&&(G=e.playbackController),e.serviceDescriptionController&&(V=e.serviceDescriptionController),e.contentSteeringController&&(H=e.contentSteeringController),e.catchupController&&(z=e.catchupController),e.mediaPlayerModel&&(k=e.mediaPlayerModel),e.customParametersModel&&(x=e.customParametersModel),e.abrController&&(A=e.abrController),e.schemeLoaderFactory&&(E=e.schemeLoaderFactory),e.mediaController&&(w=e.mediaController),e.settings)&&(ue=e.settings)},on:function(e,t,n,i){le.on(e,t,n,i)},off:function(e,t,n){le.off(e,t,n)},extend:function(e,t,n){u.A.extend(e,t,n,se)},attachView:be,attachSource:Te,refreshManifest:function(e){if(!p)throw oe;if(!de())return e(null,ae);var t=this;"function"==typeof e&&le.on(l.A.INTERNAL_MANIFEST_LOADED,(function n(i){le.off(l.A.INTERNAL_MANIFEST_LOADED,n,t),i.error?e(null,i.error):e(i.manifest)}),t),B.refreshManifest()},isReady:de,preload:function(){if(!Z.getElement()&&!m){if(!n)throw ae;De(y)}},play:function(){if(!g)throw ie;(!_||pe()&&g)&&G.play(!0)},isPaused:pe,pause:function(){if(!g)throw ie;G.pause()},isSeeking:function(){if(g)return G.isSeeking();throw ie},isDynamic:me,getLowLatencyModeEnabled:function(){if(g)return G.getLowLatencyModeEnabled();throw ie},seek:function(e){if(!g)throw ie;if((0,Y.sq)(e,"number"),isNaN(e))throw r.A.BAD_ARGUMENT_ERROR;e<0&&(e=0),e=G.getIsDynamic()?ge(e):e;var t=Ee();!G.getIsDynamic()&&t.duration&&(e=Math.min(t.duration,e)),G.seek(e,!1,!1,!0)},seekToOriginalLive:function(){g&&me()&&G.seekToOriginalLive()},setPlaybackRate:function(e){Ee().playbackRate=e},getPlaybackRate:function(){return Ee().playbackRate},setMute:function(e){(0,Y.sq)(e,"boolean"),Ee().muted=e},isMuted:function(){return Ee().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw r.A.BAD_ARGUMENT_ERROR;Ee().volume=e},getVolume:function(){return Ee().volume},time:_e,duration:ye,timeAsUTC:function(){if(g)return _e()<0?NaN:Pe(_e());throw ie},durationAsUTC:function(){if(g)return Pe(ye());throw ie},getActiveStream:Se,getDVRWindowSize:function(){var e=B&&B.hasVideoTrack()?r.A.VIDEO:r.A.AUDIO;return(e=q.getCurrentDVRInfo(e))?e.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ge,getAvailableBaseUrls:function(){var e=Q.getValue();return e?O.getBaseUrls(e):[]},getAvailableLocations:function(){var e,t=Q.getValue();return t?(t=D.getLocation(t),e=H.getSynthesizedLocationElements(t),t.concat(e)):[]},getTargetLiveDelay:function(){if(g)return G.getOriginalLiveDelay();throw ie},convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60);return e=Math.floor(e%3600%60),(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(e<10?"0"+e.toString():e.toString())},formatUTC:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=(e=new Date(1e3*e)).toLocaleDateString(t);return e=e.toLocaleTimeString(t,{hour12:n}),i?e+" "+r:e},getVersion:fe,getDebug:function(){return ce},getBufferLength:function(e){var n=[r.A.VIDEO,r.A.AUDIO,r.A.TEXT];return e?-1!==n.indexOf(e)?q.getCurrentBufferLevel(e)||NaN:(t.warn("getBufferLength requested for invalid type"),NaN):(e=n.map((function(e){return 0<we(e).length?q.getCurrentBufferLevel(e):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)})))===Number.MAX_VALUE?NaN:e},getTTMLRenderingDiv:function(){return Z?Z.getTTMLRenderingDiv():null},getVideoElement:Ee,getSource:function(){if(n)return n;throw ae},updateSource:function(e){n=e,B.load(n)},getCurrentLiveLatency:function(){if(p)return g?G.getCurrentLiveLatency():NaN;throw oe},getTopBitrateInfoFor:function(e){if(m)return A.getTopBitrateInfoFor(e);throw ne},setAutoPlay:ve,getAutoPlay:function(){return _},getDashMetrics:function(){return q},getQualityFor:function(e){var t;if(m)return e===r.A.IMAGE?(t=Se())&&(t=t.getThumbnailController())?t.getCurrentTrackIndex():-1:A.getQualityFor(e);throw ne},setQualityFor:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!m)throw ne;if(e===r.A.IMAGE){var i=Se();if(!i)return;(i=i.getThumbnailController())&&i.setTrackByIndex(t)}A.setPlaybackQuality(e,B.getActiveStreamInfo(),t,{forceReplace:n})},updatePortalSize:function(){A.setElementSize(),A.setWindowResizeEventCalled(!0)},enableText:function(e){var t=B.getActiveStreamInfo();return!(!t||!U)&&U.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!(!B.getActiveStreamInfo()||!U)&&U.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=B.getActiveStreamInfo();return!(!e||!U)&&U.isTextEnabled(e)},setTextTrack:function(e){if(!g)throw ie;var t=B.getActiveStreamInfo();t&&U&&U.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){var t;if(m)return(t=Se())?t.getBitrateListFor(e):[];throw ne},getStreamsFromManifest:function(e){if(m)return D.getStreamsInfo(e);throw ne},getTracksFor:we,getTracksForTypeFromManifest:function(e,t,n){if(m)return(n=n||D.getStreamsInfo(t,1)[0])?D.getAllMediaInfoForType(n,e,t):[];throw ne},getCurrentTrackFor:function(e){var t;if(m)return t=B.getActiveStreamInfo(),w.getCurrentTrackFor(e,t.id);throw ne},setInitialMediaSettingsFor:function(e,t){if(!p)throw oe;w.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(p)return w.getInitialSettings(e);throw oe},setCurrentTrack:function(e){if(!m)throw ne;w.setTrack(e,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},addABRCustomRule:function(e,t,n){x.addAbrCustomRule(e,t,n)},removeABRCustomRule:function(e){x.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){x.removeAllAbrCustomRule()},getABRCustomRules:function(){return x.getAbrCustomRules()},getAverageThroughput:function(e){var t=A.getThroughputHistory(),n=G.getIsDynamic();return t?t.getAverageThroughput(e,n):0},retrieveManifest:function(e,t){var n=Ie(),i=this;le.on(l.A.INTERNAL_MANIFEST_LOADED,(function e(r){r.error?t(null,r.error):t(r.manifest),le.off(l.A.INTERNAL_MANIFEST_LOADED,e,i),n.reset()}),i),$.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){x.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){x.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){x.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Ae,setXHRWithCredentialsForType:function(e,t){x.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return x.getXHRWithCredentialsForType(e)},getProtectionController:Ce,attachProtectionController:function(e){I=e},setProtectionData:function(e){d=e,B&&B.setProtectionData(d)},registerLicenseRequestFilter:function(e){x.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){x.registerLicenseResponseFilter(e)},unregisterLicenseRequestFilter:function(e){x.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){x.unregisterLicenseResponseFilter(e)},registerCustomCapabilitiesFilter:function(e){x.registerCustomCapabilitiesFilter(e)},unregisterCustomCapabilitiesFilter:function(e){x.unregisterCustomCapabilitiesFilter(e)},setCustomInitialTrackSelectionFunction:function(e){x.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){x.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!Z.getElement())throw re;Z.setTTMLRenderingDiv(e)},attachVttRenderingDiv:function(e){if(!Z.getElement())throw re;Z.setVttRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=B.getActiveStreamInfo();if(e&&U)return U.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t){if(!(e<0)){e=G.getIsDynamic()?ge(e):e;var n=B.getStreamForTime(e);if(null!==n&&(n=n.getThumbnailController()))return n.provide(e,t)}t(null)}},getDashAdapter:function(){return D},getOfflineController:Le,triggerSteeringRequest:function(){if(H)return H.loadSteeringData()},getCurrentSteeringResponseData:function(){if(H)return H.getCurrentSteeringResponseData()},getSettings:function(){return ue.get()},updateSettings:function(e){ue.update(e)},resetSettings:function(){ue.reset()},reset:he,destroy:function(){he(),u.A.deleteSingletonInstances(se)}}),_=!(m=g=p=!1),y=NaN,te=D=d=P=I=null,l.A.extend(h.A),k=Pr(se).getInstance(),x=(0,Ct.A)(se).getInstance(),Z=Wr(se).getInstance(),$=Rr(se).getInstance(),e}jo.__dashjs_factory_name="MediaPlayer";var Go=u.A.getClassFactory(jo),Vo=(Go.events=h.A,Go.errors=T,u.A.updateClassFactory(jo.__dashjs_factory_name,Go),Go)},8914:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r=function(){return!!e})()}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=a(t);var o=e;if(!(t=r()?Reflect.construct(t,[],a(e).constructor):t.apply(e,n))||"object"!==i(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=o))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).AST_IN_FUTURE="astInFuture",e.BASE_URLS_UPDATED="baseUrlsUpdated",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",e.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",e.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADING_STARTED="manifestLoadingStarted",e.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.CUE_ENTER="cueEnter",e.CUE_EXIT="cueExit",e.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",e.INBAND_PRFT="inbandPrft",e.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",e.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&o(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4183).A)),t.A=n},4961:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}})((i=r).prototype,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=new r;function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.init()}t.A=i},6992:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}})((i=r).prototype,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),Object.defineProperty(i,"prototype",{writable:!1});var i=new r;function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.init()}t.A=i},9138:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=i(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==i(e)?e:String(e)}(r.key),r)}}n.d(t,{default:function(){return q}}),t=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null},a&&r(t.prototype,a),U&&r(t,U),Object.defineProperty(t,"prototype",{writable:!1});var a=t,o=(a.SSL_CONNECTION_FAILED_PREFIX="SSL",a.DNS_RESOLUTION_FAILED="C00",a.HOST_UNREACHABLE="C01",a.CONNECTION_REFUSED="C02",a.CONNECTION_ERROR="C03",a.CORRUPT_MEDIA_ISOBMFF="M00",a.CORRUPT_MEDIA_OTHER="M01",a.BASE_URL_CHANGED="F00",a.BECAME_REPORTER="S00",a),s=n(7474);function l(e){var t,n,i=(e=e||{}).eventBus,r=e.dashMetrics,a=e.metricsConstants,l=e.events;function u(e){var t=new o;if(n){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),r.addDVBErrors(t)}}function c(e){e.error||(n=e.manifest)}function h(e){u({errorcode:o.BASE_URL_CHANGED,servicelocation:e.entry})}function d(){u({errorcode:o.BECAME_REPORTER})}function f(e){e.metric===a.HTTP_REQUEST&&(0===(e=e.value).responsecode||null==e.responsecode||400<=e.responsecode||e.responsecode<100||600<=e.responsecode)&&u({errorcode:e.responsecode||o.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}function p(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=o.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=o.CORRUPT_MEDIA_OTHER;break;default:return}u({errorcode:t})}return t={initialize:function(){i.on(l.MANIFEST_UPDATED,c,t),i.on(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,h,t),i.on(l.METRIC_ADDED,f,t),i.on(l.METRIC_UPDATED,f,t),i.on(l.PLAYBACK_ERROR,p,t),i.on(s.A.BECAME_REPORTING_PLAYER,d,t)},reset:function(){i.off(l.MANIFEST_UPDATED,c,t),i.off(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,h,t),i.off(l.METRIC_ADDED,f,t),i.off(l.METRIC_UPDATED,f,t),i.off(l.PLAYBACK_ERROR,p,t),i.off(s.A.BECAME_REPORTING_PLAYER,d,t)}}}l.__dashjs_factory_name="DVBErrorsTranslator";var u=dashjs.FactoryMaker.getSingletonFactory(l),c=n(5994);function h(e){var t=!1,n=this.context,i=(e=e||{}).mediaElement,r=(e={initialize:function(e){e&&e.length&&(e.forEach((function(e){var t=e.starttime;e=t+e.duration,r.add(t,e)})),t=!!e[0]._useWallClockTime)},reset:function(){r.clear()},isEnabled:function(){var e=r.length;if(!e)return!0;for(var n=t?(new Date).getTime()/1e3:i.currentTime,a=0;a<e;a+=1){var o=r.start(a),s=r.end(a);if(o<=n&&n<s)return!0}return!1}},(0,c.A)(n).create());return e}h.__dashjs_factory_name="RangeController";var d=dashjs.FactoryMaker.getClassFactory(h);function f(){return{serialise:function e(t){var n,i,r=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(null==(i=t[n])&&(i=""),Array.isArray(i)){if(!i.length)continue;a=[],i.forEach((function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))})),i=a.map(encodeURIComponent).join(",")}else"string"==typeof i?i=encodeURIComponent(i):i instanceof Date?i=i.toISOString():"number"==typeof i&&(i=Math.round(i));r.push(n+"="+i)}return r.join("&")}}}f.__dashjs_factory_name="MetricSerialiser";var p=dashjs.FactoryMaker.getSingletonFactory(f);function m(){var e,t,n,i=window.crypto||window.msCrypto,r=Uint32Array,a=Math.pow(2,8*r.BYTES_PER_ELEMENT)-1;function o(){i&&(e=e||new r(10),i.getRandomValues(e),t=0)}return n={random:function(n,r){var s;return n=n||0,r=r||1,i?(t===e.length&&o(),s=e[t]/a,t+=1):s=Math.random(),s*(r-n)+n}},o(),n}m.__dashjs_factory_name="RNG";var g=dashjs.FactoryMaker.getSingletonFactory(m),_=n(9085);function y(e){var t,n,i,r,a,o,s,l=this.context,u=[],c=(e=e||{}).metricsConstants;function h(){a=r=!1,s=o=null}return e={report:function(e,i){Array.isArray(i)||(i=[i]),a&&s.isEnabled()&&i.forEach((function(i){i=t.serialise(i);var r=(e!==c.DVB_ERRORS&&(i="metricname=".concat(e,"&").concat(i)),i="".concat(o,"?").concat(i)),s=function(){a=!1};function l(){var e=u.indexOf(h);-1===e||(u.splice(e,1),200<=h.status&&h.status<300)||!s||s()}var h=new XMLHttpRequest;h.withCredentials=n.getXHRWithCredentialsForType(c.HTTP_REQUEST_DVB_REPORTING_TYPE),u.push(h);try{h.open("GET",r),h.onloadend=l,h.onerror=l,h.send()}catch(r){h.onerror()}}))},initialize:function(e,t){if(s=t,!(o=e.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");r||((t=e.dvbProbability)&&(1e3===t||t/1e3>=i.random())&&(a=!0),r=!0)},reset:function(){h()}},t=p(l).getInstance(),i=g(l).getInstance(),n=(0,_.A)(l).getInstance(),h(),e}y.__dashjs_factory_name="DVBReporting";var v=dashjs.FactoryMaker.getClassFactory(y);function A(e){var t={"urn:dvb:dash:reporting:2014":v},n=this.context,i=(e=e||{}).debug?e.debug.getLogger(void 0):{},r=e.metricsConstants,a=e.mediaPlayerModel||{};return{create:function(e,o){var s;try{(s=t[e.schemeIdUri](n).create({metricsConstants:r,mediaPlayerModel:a})).initialize(e,o)}catch(o){s=null,i.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(e.schemeIdUri," (").concat(o.message,")"))}return s},register:function(e,n){t[e]=n},unregister:function(e){delete t[e]}}}A.__dashjs_factory_name="ReportingFactory";var E=dashjs.FactoryMaker.getSingletonFactory(A);function b(e){var t=[],n=E(this.context).getInstance(e);return{initialize:function(e,i){e.some((function(e){if(e=n.create(e,i))return t.push(e),!0}))},reset:function(){t.forEach((function(e){return e.reset()})),t=[]},report:function(e,n){t.forEach((function(t){return t.report(e,n)}))}}}b.__dashjs_factory_name="ReportingController";var w=dashjs.FactoryMaker.getClassFactory(b);function T(){return{reconstructFullMetricName:function(e,t,n){return t&&(e+="("+t,n&&n.length&&(e+=","+n),e+=")"),e},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}T.__dashjs_factory_name="HandlerHelpers";var S=dashjs.FactoryMaker.getSingletonFactory(T);function R(e){e=e||{};var t,n,i,r,a,o=this.context,s=S(o).getInstance(),l=[],u=e.metricsConstants;function c(){var e=function(){try{return Object.keys(l).map((function(e){return l[e]})).reduce((function(e,t){return e.level<t.level?e:t}))}catch(e){}}();e&&a!==e.t&&(a=e.t,t.report(i,e))}return{initialize:function(e,a,o){a&&(n=s.validateN(o),t=a,i=s.reconstructFullMetricName(e,o),r=setInterval(c,n))},reset:function(){clearInterval(r),n=0,a=t=r=null},handleNewMetric:function(e,t,n){e===u.BUFFER_LEVEL&&(l[n]=t)}}}R.__dashjs_factory_name="BufferLevelHandler";var I=dashjs.FactoryMaker.getClassFactory(R),C=dashjs.FactoryMaker.getClassFactory((function(e){var t,n=(e=e||{}).eventBus,i=e.metricsConstants;function r(){n.off(s.A.METRICS_INITIALISATION_COMPLETE,r,this),n.trigger(s.A.BECAME_REPORTING_PLAYER)}return{initialize:function(e,i){i&&(t=i,n.on(s.A.METRICS_INITIALISATION_COMPLETE,r,this))},reset:function(){t=null},handleNewMetric:function(e,n){e===i.DVB_ERRORS&&t&&t.report(e,n)}}}));function L(e){e=e||{};var t,n,i,r,a,o=[],s=S(this.context).getInstance(),l=e.metricsConstants;function u(){var e=o;e.length&&t&&t.report(r,e),o=[]}return{initialize:function(e,o,l,c){o&&(n=s.validateN(l),t=o,c&&c.length&&(i=c),r=s.reconstructFullMetricName(e,l,c),a=setInterval(u,n))},reset:function(){clearInterval(a),o=[],t=i=n=a=null},handleNewMetric:function(e,t){e!==l.HTTP_REQUEST||i&&i!==t.type||o.push(t)}}}L.__dashjs_factory_name="HttpListHandler";var P=dashjs.FactoryMaker.getClassFactory(L);function D(){var e,t;return{initialize:function(n,i){e=n,t=i},reset:function(){t=null,e=void 0},handleNewMetric:function(n,i){n===e&&t&&t.report(e,i)}}}D.__dashjs_factory_name="GenericMetricHandler";var k=dashjs.FactoryMaker.getClassFactory(D);function x(e){var t=(e=e||{}).debug?e.debug.getLogger(void 0):{},n=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,i=this.context,r={BufferLevel:I,DVBErrors:C,HttpList:P,PlayList:k,RepSwitchList:k,TcpList:k};return{create:function(a,o){var s;if(a=a.match(n)){try{(s=r[a[1]](i).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(a[1],o,a[3],a[5])}catch(o){s=null,t.error("MetricsHandlerFactory: Could not create handler for type ".concat(a[1]," with args ").concat(a[3],", ").concat(a[5]," (").concat(o.message,")"))}return s}},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}x.__dashjs_factory_name="MetricsHandlerFactory";var M=dashjs.FactoryMaker.getSingletonFactory(x);function O(e){var t,n=[],i=this.context,r=(e=e||{}).eventBus,a=e.events,o=M(i).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function s(e){n.forEach((function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)}))}return t={initialize:function(e,i){e.split(",").forEach((function(e,t,r){var a;-1!==e.indexOf("(")&&-1===e.indexOf(")")&&(a=r[t+1])&&-1===a.indexOf("(")&&-1!==a.indexOf(")")&&(e+=","+a,delete r[t+1]),(a=o.create(e,i))&&n.push(a)})),r.on(a.METRIC_ADDED,s,t),r.on(a.METRIC_UPDATED,s,t)},reset:function(){r.off(a.METRIC_ADDED,s,t),r.off(a.METRIC_UPDATED,s,t),n.forEach((function(e){return e.reset()})),n=[]}}}O.__dashjs_factory_name="MetricsHandlersController";var N=dashjs.FactoryMaker.getClassFactory(O);function F(e){e=e||{};var t,n,i,r=this.context;function a(){t&&t.reset(),n&&n.reset(),i&&i.reset()}return{initialize:function(o){try{(i=d(r).create({mediaElement:e.mediaElement})).initialize(o.Range),(n=w(r).create({debug:e.debug,metricsConstants:e.metricsConstants,mediaPlayerModel:e.mediaPlayerModel})).initialize(o.Reporting,i),(t=N(r).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(o.metrics,n)}catch(o){throw a(),o}},reset:a}}F.__dashjs_factory_name="MetricsController";var B=dashjs.FactoryMaker.getClassFactory(F);U=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.metrics="",this.Range=[],this.Reporting=[]},Object.defineProperty(U,"prototype",{writable:!1});var U,j=U;t=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},Object.defineProperty(t,"prototype",{writable:!1});var G=t;a=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3},Object.defineProperty(a,"prototype",{writable:!1});var V=a;function H(e){var t=(e=e||{}).adapter,n=e.constants;return{getMetrics:function(e){var i=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach((function(r){var a=new j,o=t.getIsDynamic(e);r.hasOwnProperty("metrics")&&(a.metrics=r.metrics,r.Range_asArray&&r.Range_asArray.forEach((function(i){var r,s,l,u=new G;u.starttime=(r=e,s=i,l=0,o?l=t.getAvailabilityStartTime(r)/1e3:(r=t.getRegularPeriods(r)).length&&(l=r[0].start),r=l,s&&s.hasOwnProperty(n.START_TIME)&&(r+=s.starttime),r),i.hasOwnProperty("duration")?u.duration=i.duration:u.duration=t.getDuration(e),u._useWallClockTime=o,a.Range.push(u)})),r.Reporting_asArray)&&(r.Reporting_asArray.forEach((function(e){var t=new V;e.hasOwnProperty(n.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(n.DVB_REPORTING_URL)&&(t.dvbReportingUrl=e[n.DVB_REPORTING_URL]),e.hasOwnProperty(n.DVB_PROBABILITY)&&(t.dvbProbability=e[n.DVB_PROBABILITY]),a.Reporting.push(t))})),i.push(a))})),i}}}H.__dashjs_factory_name="ManifestParsing";var Y=dashjs.FactoryMaker.getSingletonFactory(H);function z(e){e=e||{};var t,n={},i=this.context,r=e.eventBus,a=e.events;function o(t){var a;t.error||(a=Object.keys(n),Y(i).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach((function(t){var r=JSON.stringify(t);if(n.hasOwnProperty(r))a.splice(r,1);else try{var o=B(i).create(e);o.initialize(t),n[r]=o}catch(t){}})),a.forEach((function(e){n[e].reset(),delete n[e]})),r.trigger(s.A.METRICS_INITIALISATION_COMPLETE))}function l(){Object.keys(n).forEach((function(e){n[e].reset()})),n={}}return t={reset:function(){r.off(a.MANIFEST_UPDATED,o,t),r.off(a.STREAM_TEARDOWN_COMPLETE,l,t)}},r.on(a.MANIFEST_UPDATED,o,t),r.on(a.STREAM_TEARDOWN_COMPLETE,l,t),t}z.__dashjs_factory_name="MetricsCollectionController";var W=dashjs.FactoryMaker.getClassFactory(z);function K(){var e=this.context;return{createMetricsReporting:function(t){return u(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}).initialize(),W(e).create(t)},getReportingFactory:function(){return E(e).getInstance()},getMetricsHandlerFactory:function(){return M(e).getInstance()}}}K.__dashjs_factory_name="MetricsReporting";var q=((n=dashjs.FactoryMaker.getClassFactory(K)).events=s.A,dashjs.FactoryMaker.updateClassFactory(K.__dashjs_factory_name,n),n)},7474:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(r=function(){return!!e})()}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=a(t);var o=e;if(!(t=r()?Reflect.construct(t,[],a(e).constructor):t.apply(e,n))||"object"!==i(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=o))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&o(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4183).A)),t.A=n},9085:function(e,t,n){var i=n(9824),r=n(7575),a=n(8416),o=n(5533),s=n(4986),l=n(4961);function u(){var e,t,n,r,u,c,h,d=this.context,f=(0,a.A)(d).getInstance();function p(){n=[],r=[],u=[],h=[],c=null,e=[]}function m(e,t){var n=-1;e.some((function(e,i){if(e===t)return n=i,!0})),n<0||e.splice(n,1)}function g(e){for(var t=0;t<h.length;t++)if(h[t].rulename===e)return t;return-1}function _(t,n){y(t,n);var r=new i.A;r.schemeIdUri=t,r.value=n,e.push(r)}function y(t,n){(0,o.sq)(t,"string"),(0,o.sq)(n,"string"),e.forEach((function(i,r){i.schemeIdUri===t&&i.value===n&&e.splice(r,1)}))}return t={default:!(d={getCustomInitialTrackSelectionFunction:function(){return c},setCustomInitialTrackSelectionFunction:function(e){c=e},resetCustomInitialTrackSelectionFunction:function(){c=null},getLicenseResponseFilters:function(){return r},getLicenseRequestFilters:function(){return n},getCustomCapabilitiesFilters:function(){return u},registerCustomCapabilitiesFilter:function(e){u.push(e)},registerLicenseResponseFilter:function(e){r.push(e)},registerLicenseRequestFilter:function(e){n.push(e)},unregisterCustomCapabilitiesFilter:function(e){m(u,e)},unregisterLicenseResponseFilter:function(e){m(r,e)},unregisterLicenseRequestFilter:function(e){m(n,e)},addAbrCustomRule:function(e,t,n){if("string"!=typeof e||e!==s.A.ABANDON_FRAGMENT_RULES&&e!==s.A.QUALITY_SWITCH_RULES||"string"!=typeof t)throw l.A.BAD_ARGUMENT_ERROR;var i=g(t);-1===i?h.push({type:e,rulename:t,rule:n}):(h[i].type=e,h[i].rule=n)},removeAllAbrCustomRule:function(){h=[]},removeAbrCustomRule:function(e){e?-1!==(e=g(e))&&h.splice(e,1):h=[]},getAbrCustomRules:function(){return h},addUTCTimingSource:_,removeUTCTimingSource:y,getUTCTimingSources:function(){return e},clearDefaultUTCTimingSources:function(){e=[]},restoreDefaultUTCTimingSources:function(){var e=f.get().streaming.utcSynchronization.defaultTimingSource;_(e.scheme,e.value)},setXHRWithCredentialsForType:function e(n,i){n?t[n]=!!i:Object.keys(t).forEach((function(t){e(t,i)}))},getXHRWithCredentialsForType:function(e){return void 0===(e=t[e])?t.default:e},setConfig:function(){},reset:function(){p()}})},p(),d}u.__dashjs_factory_name="CustomParametersModel",t.A=r.A.getSingletonFactory(u)},3047:function(e,t,n){var i=n(7575),r=n(7464);function a(e){var t=(e=e||{}).requestModifier;function n(e){var n=new Date,i=e.request,r=new XMLHttpRequest;if(r.open(e.method,e.url,!0),i.responseType&&(r.responseType=i.responseType),i.range&&r.setRequestHeader("Range","bytes="+i.range),i.requestStartDate||(i.requestStartDate=n),t&&t.modifyRequestHeader&&(r=t.modifyRequestHeader(r,{url:e.url})),e.headers)for(var a in e.headers){var o=e.headers[a];o&&r.setRequestHeader(a,o)}r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.ontimeout=e.ontimeout,r.timeout=e.timeout,r.send(),e.response=r}return{load:function(e){t&&t.modifyRequest?(0,r.W)(e,t).then((function(){return n(e)})):n(e)},abort:function(e){(e=e.response).onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}a.__dashjs_factory_name="XHRLoader",n=i.A.getClassFactory(a),t.A=n},3260:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{default:function(){return De}});var r={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},a=(function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=i(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==i(e)?e:String(e)}(r.key),r)}}(t=o,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var i=e[n];"urn:mpeg:dash:mp4protection:2011"!==i.schemeIdUri.toLowerCase()||"cenc"!==i.value.toLowerCase()&&"cbcs"!==i.value.toLowerCase()||(t=i)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),i=n.getUint8(t);return t+=20,0<i&&(t+=4+16*n.getUint32(t)),e.slice(t+=4)}},{key:"getPSSHForKeySystem",value:function(e,t){return t=o.parsePSSHList(t),e&&t.hasOwnProperty(e.uuid.toLowerCase())?t[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},i=0;;){var r,a,o=void 0,s=i;if(i>=t.buffer.byteLength)break;if(r=i+t.getUint32(i),i+=4,1886614376===t.getUint32(i)&&(i+=4,0===(a=t.getUint8(i))||1===a)){i++,i+=3,o="";var l=void 0,u=void 0;for(l=0;l<4;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=4,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;for(i+=2,o+="-",l=0;l<6;l++)o+=1===(u=t.getUint8(i+l).toString(16)).length?"0"+u:u;i=i+6+4,n[o=o.toLowerCase()]=t.buffer.slice(s,r)}i=r}return n}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var n=0,i=null;n<e.length&&!i;){var a=e[n];if(a&&a.contentProtection&&0<a.contentProtection.length){var o=a.contentProtection.filter((function(e){return e.schemeIdUri&&e.schemeIdUri===t}));if(o&&0<o.length)for(var s=0;s<o.length&&!i;){for(var l=o[s],u=0;u<r.attributes.length&&!i;){for(var c=0,h=r.attributes[u];c<r.prefixes.length&&!i;){var d=r.prefixes[c];l[h]&&l[h].__prefix&&l[h].__prefix===d&&l[h].__text&&(i=l[h].__text),c+=1}u+=1}s+=1}}n+=1}return i}catch(e){return null}}}]),Object.defineProperty(t,"prototype",{writable:!1}),o);function o(){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=s(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==s(e)?e:String(e)}(i.key),i)}}t=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.contentType=t,this.robustness=n},O&&l(t.prototype,O),me&&l(t,me),Object.defineProperty(t,"prototype",{writable:!1});var u=t;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=c(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==c(e)?e:String(e)}(i.key),i)}}O=function e(t,n,i,r,a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=r,this.sessionTypes=a},C&&h(O.prototype,C),k&&h(O,k),Object.defineProperty(O,"prototype",{writable:!1});var d=O;function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=m(t);var i=e;if(!(t=p()?Reflect.construct(t,[],m(e).constructor):t.apply(e,n))||"object"!==f(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&g(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(7199).A)),y=n(3339);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=v(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==v(e)?e:String(e)}(i.key),i)}}me=function e(t,n,i,r,a,o,s,l){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t,this.method=n,this.responseType=i,this.headers=r,this.withCredentials=a,this.messageType=o,this.sessionId=s,this.data=l},U&&A(me.prototype,U),pe&&A(me,pe),Object.defineProperty(me,"prototype",{writable:!1});var E=me;function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=b(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==b(e)?e:String(e)}(i.key),i)}}t=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.url=t,this.headers=n,this.data=i},_e&&w(t.prototype,_e),ve&&w(t,ve),Object.defineProperty(t,"prototype",{writable:!1});var T=t,S=n(4779),R=n(4456),I=n(4961),C=n(7575);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){var t,n,i,r,o,s,l,c,h,f,p,m=(e=e||{}).protectionKeyController,g=e.protectionModel,v=e.eventBus,A=e.events,b=e.debug,w=e.BASE64,C=e.constants,P=[],D=e.cmcdModel,k=e.settings,x=e.customParametersModel;function M(){if(!(v&&v.hasOwnProperty("on")&&m&&m.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function O(e,t){if(c||h)c&&N();else{var i=e,a=t;if(!h){h=!0;var s,f=[];i=i.sort((function(e,t){return(o&&o[e.ks.systemString]&&0<=o[e.ks.systemString].priority?o[e.ks.systemString].priority:i.length)-(o&&o[t.ks.systemString]&&0<=o[t.ks.systemString].priority?o[t.ks.systemString].priority:i.length)}));for(var p=0;p<i.length;p++){var m=function(e){var t=e.protData,n=[],i=[],a=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:l,o=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:l,s=(e=e.sessionType,t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional");return t=t&&t.persistentState?t.persistentState:"temporary"===e?"optional":"required",r.forEach((function(e){e.type===C.AUDIO?n.push(new u(e.codec,a)):e.type===C.VIDEO&&i.push(new u(e.codec,o))})),new d(n,i,s,t,[e])}(i[p]);f.push({ks:i[p].ks,configs:[m],protData:i[p].protData})}g.requestKeySystemAccess(f).then((function(e){return e=(s=e.data).mksa&&s.mksa.selectedSystemString?s.mksa.selectedSystemString:s.keySystem.systemString,n.info("DRM: KeySystem Access Granted for system string ("+e+")!  Selecting key system..."),g.selectKeySystem(s)})).then((function(e){c=e,h=!1,g&&(v.trigger(A.KEY_SYSTEM_SELECTED,{data:s}),(e=U(c))&&e.serverCertificate&&0<e.serverCertificate.length&&g.setServerCertificate(w.decodeArray(e.serverCertificate).buffer),N())})).catch((function(e){c=null,h=!1,a||v.trigger(A.KEY_SYSTEM_SELECTED,{data:null,error:new y.A(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})}))}}}function N(){for(var e,t=0;t<i.length;t++)for(e=0;e<i[t].length;e++)if(c===i[t][e].ks){n=r=void 0;var n,r=i[t][e];m.isClearKey(c)&&r.protData&&r.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(r.protData.clearkeys).length&&(n={kids:Object.keys(r.protData.clearkeys)},r.initData=(new TextEncoder).encode(JSON.stringify(n))),r.sessionId?F(r):null!==r.initData&&B(r);break}i=[]}function F(e){M(),g.loadKeySession(e)}function B(e){var t=a.getPSSHForKeySystem(c,e?e.initData:null);if(t){if(!function(e){if(e)try{for(var t=g.getSessions(),n=0;n<t.length;n++)if(t[n].getKeyId()===e)return 1}catch(e){}}(e.keyId)&&!j(t))try{e.initData=t,g.createKeySession(e)}catch(e){v.trigger(A.KEY_SESSION_CREATED,{data:null,error:new y.A(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?g.createKeySession(e):v.trigger(A.KEY_SESSION_CREATED,{data:null,error:new y.A(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(c?c.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function U(e){return e&&(e=e.systemString,o)&&e in o?o[e]:null}function j(e){if(e)try{for(var t=g.getAllInitData(),i=0;i<t.length;i++)if(m.initDataEquals(e,t[i]))return n.debug("DRM: Ignoring initData because we have already seen it!"),1}catch(e){}}function G(e){M(),e?(g.setMediaElement(e),v.on(A.NEED_KEY,Q,t)):null===e&&(g.setMediaElement(e),v.off(A.NEED_KEY,Q,t))}function V(e){e.error?v.trigger(A.KEY_STATUSES_CHANGED,{data:null,error:e.error}):n.debug("DRM: key status = "+e.status)}function H(e){n.debug("DRM: onKeyMessage");var t,i,o,s,l,u,h,d,b,w,C,P,M,O,N,F,B,j,G=e.data,V=(v.trigger(A.KEY_MESSAGE,{data:G}),G.messageType||"license-request"),H=G.message,z=G.sessionToken,Q=U(c),X=m.getLicenseServerModelInstance(c,Q,V);if(V={sessionToken:z,messageType:V},H&&0!==H.byteLength)if(X){if(m.isClearKey(c)&&(H=m.processClearKeyLicenseRequest(c,Q,H))&&H.keyPairs&&0<H.keyPairs.length)return n.debug("DRM: ClearKey license request handled by application!"),Y(V),void g.updateKeySession(z,H);t=X,H=Q,N=(X=G).sessionToken,F=X.messageType||"license-request",B={sessionToken:N,messageType:F},j=c?c.systemString:null,Q=H,G=F,i=N,b=t,w=null,P=(d=X).message,Q&&Q.serverURL?"string"==typeof(s=Q.serverURL)&&""!==s?w=s:"object"===L(s)&&s.hasOwnProperty(G)&&(w=s[G]):Q&&Q.laURL&&""!==Q.laURL?w=Q.laURL:(w=a.getLicenseServerUrlFromMediaInfo(r,c.schemeIdURI))||m.isClearKey(c)||(s=a.getPSSHData(i.initData),w=(w=c.getLicenseServerURLFromInitData(s))||d.laURL),(Q=b.getServerURLFromMessage(w,P,G))?(o=!(i={}),H&&W(i,H.httpRequestHeaders),s=X.message,W(i,c.getRequestHeadersFromMessage(s)),Object.keys(i).forEach((function(e){"authorization"===e.toLowerCase()&&(o=!0)})),H&&"boolean"==typeof H.withCredentials&&(o=H.withCredentials),l=function(e){var n,i;g&&(200<=e.status&&e.status<=299?(n=R.A.parseHttpHeaders(e.getAllResponseHeaders?e.getAllResponseHeaders():null),i=new T(e.responseURL,n,e.response),q(x.getLicenseResponseFilters(),i).then((function(){var n=t.getLicenseMessage(i.data,j,F);null!==n?(Y(B),g.updateKeySession(N,n)):K(e,B,j,F,t)}))):K(e,B,j,F,t))},u=function(e){Y(B,new y.A(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+j+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},h=function(e){Y(B,new y.A(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+j+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},d=c.getLicenseRequestFromMessage(s),b=t.getHTTPMethod(F),w=t.getResponseType(j,F),C=H&&!isNaN(H.httpTimeout)?H.httpTimeout:8e3,P=N.getSessionId()||null,M=new E(Q,b,w,i,o,F,P,d),O=isNaN(k.get().streaming.retryAttempts[S.G.LICENSE])?3:k.get().streaming.retryAttempts[S.G.LICENSE],q(x.getLicenseRequestFilters(),M).then((function(){!function e(t,i,r,a,o,s){var l,u=new XMLHttpRequest;for(var c in k.get().streaming.cmcd&&k.get().streaming.cmcd.enabled&&k.get().streaming.cmcd.mode===I.A.CMCD_MODE_QUERY&&(l=D.getQueryParameter({url:t.url,type:S.G.LICENSE}))&&(t.url=R.A.addAditionalQueryParameterToUrl(t.url,[l])),u.open(t.method,t.url,!0),u.responseType=t.responseType,u.withCredentials=t.withCredentials,0<r&&(u.timeout=r),t.headers)u.setRequestHeader(c,t.headers[c]);if(k.get().streaming.cmcd&&k.get().streaming.cmcd.enabled&&k.get().streaming.cmcd.mode===I.A.CMCD_MODE_HEADER){var h=D.getHeaderParameters({url:t.url,type:S.G.LICENSE});if(h)for(var d in h){var m=h[d];m&&u.setRequestHeader(d,m)}}var g=function(){i--;var n=isNaN(k.get().streaming.retryIntervals[S.G.LICENSE])?1e3:k.get().streaming.retryIntervals[S.G.LICENSE];p=setTimeout((function(){e(t,i,r,a,o,s)}),n)};u.onload=function(){f=null,200<=this.status&&this.status<=299||i<=0?a(this):(n.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+i),g())},u.ontimeout=u.onerror=function(){f=null,i<=0?s(this):(n.warn("License request network request failed . Retrying it... Pending retries: "+i),g())},u.onabort=function(){o(this)},v.trigger(A.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId}),f=u,u.send(t.data)}(M,O,C,l,u,h)}))):Y(B,new y.A(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else n.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+z.getSessionId()),Y(V);else Y(V,new y.A(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Y(e,t){v.trigger(A.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function z(){f&&(f.onloadend=f.onerror=f.onprogress=void 0,f.abort(),f=null),p&&(clearTimeout(p),p=null)}function W(e,t){if(t)for(var n in t)e[n]=t[n]}function K(e,t,n,i,r){var a="NONE",o=null;e.response&&(a=r.getErrorResponse(e.response,n,i),o={serverResponse:e.response||null,responseCode:e.status||null,responseText:e.statusText||null}),Y(t,new y.A(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+a,o))}function q(e,t){return e?e.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve()):Promise.resolve()}function Q(e,t){if(!k.get().streaming.protection.ignoreEmeEncryptedEvent)if(n.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)n.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);else if(0===r.length&&(n.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))P.push(setTimeout((function(){Q(e,t)}),500));else{var l=e.key.initData;if(ArrayBuffer.isView(l)&&(l=l.buffer),c){var u=a.getPSSHForKeySystem(c,l);if(u&&j(u))return}n.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(l))),0===(u=m.getSupportedKeySystemsFromSegmentPssh(l,o,s)).length?n.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!"):(l=u,i.push(l),O(l,!1))}}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");M(),r.push(e)},clearMediaInfoArray:function(){r=[]},handleKeySystemFromManifest:function(){var e;r&&0!==r.length&&(e=[],r.forEach((function(t){0<(t=m.getSupportedKeySystemsFromContentProtection(t.contentProtection,o,s)).length&&(0===e.length&&(e=t),i.push(t))})),e)&&0<e.length&&O(e,!0)},createKeySession:B,loadKeySession:F,removeKeySession:function(e){M(),g.removeKeySession(e)},closeKeySession:function(e){M(),g.closeKeySession(e)},setServerCertificate:function(e){M(),g.setServerCertificate(e)},setMediaElement:G,setSessionType:function(e){s=e},setRobustnessLevel:function(e){l=e},setProtectionData:function(e){o=e,m.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return M(),m.getSupportedKeySystemsFromContentProtection(e,o,s)},getKeySystems:function(){return m?m.getKeySystems():[]},setKeySystems:function(e){m&&m.setKeySystems(e)},stop:function(){z(),g&&g.stop()},reset:function(){v.off(A.INTERNAL_KEY_MESSAGE,H,t),v.off(A.INTERNAL_KEY_STATUS_CHANGED,V,t),M(),z(),G(null),c=null,h=!1,g&&(g.reset(),g=null),P.forEach((function(e){return clearTimeout(e)})),P=[],r=[],i=[]}},n=b.getLogger(t),i=[],r=[],s="temporary",l="",p=f=null,v.on(A.INTERNAL_KEY_MESSAGE,H,t),v.on(A.INTERNAL_KEY_STATUS_CHANGED,V,t),t}P.__dashjs_factory_name="ProtectionController";var D=C.A.getClassFactory(P);k=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.keyID=t,this.key=n},Object.defineProperty(k,"prototype",{writable:!1});var k,x=k;function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=M(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==M(e)?e:String(e)}(i.key),i)}})((O=F).prototype,[{key:"toJWK",value:function(){for(var e=this.keyPairs.length,t={keys:[]},n=0;n<e;n++){var i={kty:"oct",alg:"A128KW",kid:this.keyPairs[n].keyID,k:this.keyPairs[n].key};t.keys.push(i)}this.type&&(t.type=this.type);var r=JSON.stringify(t),a=r.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(n=0;n<a;n++)s[n]=r.charCodeAt(n);return o}}]),Object.defineProperty(O,"prototype",{writable:!1});var O,N=F;function F(e,t){if(!(this instanceof F))throw new TypeError("Cannot call a class as a function");if(t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=B(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=B(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==B(e)?e:String(e)}(i.key),i)}})((U=V).prototype,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),Object.defineProperty(U,"prototype",{writable:!1});var U,j=new V,G=j.CLEARKEY_KEYSTEM_STRING;function V(){if(!(this instanceof V))throw new TypeError("Cannot call a class as a function");this.init()}function H(e){var t=(e=e||{}).BASE64;return{uuid:"e2719d58-a985-b3c9-781a-b030af78d30e",schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:G,getInitData:function(e,n){try{var i,r=a.parseInitDataFromContentProtection(e,t);return!r&&n&&(i={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(e){return null}}(n["cenc:default_KID"])]},r=(new TextEncoder).encode(JSON.stringify(i))),r}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),r=[],a=0;a<i.kids.length;a++){var o=i.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");r.push(new x(o,s))}n=new N(r)}return n}}}H.__dashjs_factory_name="KeySystemClearKey";var Y=dashjs.FactoryMaker.getSingletonFactory(H),z=j.CLEARKEY_KEYSTEM_STRING;function W(e){var t=e.BASE64,n=e.debug.getLogger(void 0);return{uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:z,getInitData:function(e){return a.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var i=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),a=[],o=0;o<r.kids.length;o++){var s=r.kids[o],l=e.clearkeys&&e.clearkeys.hasOwnProperty(s)?e.clearkeys[s]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+s+") is not known!");a.push(new x(s,l))}i=new N(a),n.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return i}}}W.__dashjs_factory_name="KeySystemW3CClearKey";var K=dashjs.FactoryMaker.getSingletonFactory(W),q=j.WIDEVINE_KEYSTEM_STRING;function Q(e){var t=(e=e||{}).BASE64;return{uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:q,getInitData:function(e){return a.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Q.__dashjs_factory_name="KeySystemWidevine";var X=dashjs.FactoryMaker.getSingletonFactory(Q),J=j.PLAYREADY_KEYSTEM_STRING;function Z(e){var t="utf-16",n=(e=e||{}).BASE64,i=e.settings;function r(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:"9a04f079-9840-4286-ab92-e65be0885f95",schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:J,getInitData:function(e){var t,i,o,s=new Uint8Array([112,115,115,104,0,0,0,0]),l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=0,c=null;if(r(),!e)return null;if("pssh"in e)return a.parseInitDataFromContentProtection(e,n);if("pro"in e)c=n.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;c=n.decodeArray(e.prheader.__text)}return e=c.length,t=4+s.length+l.length+4+e,o=new ArrayBuffer(t),i=new Uint8Array(o),(o=new DataView(o)).setUint32(0,t),u+=4,i.set(s,4),u+=s.length,i.set(l,u),u+=l.length,o.setUint32(u,e),i.set(c,u+=4),i.buffer},getRequestHeadersFromMessage:function(e){var n={},r=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1)n["Content-Type"]="text/xml; charset=utf-8";else{e=new("utf-16"===t?Uint16Array:Uint8Array)(e),e=String.fromCharCode.apply(null,e);for(var a=(r=r.parseFromString(e,"application/xml")).getElementsByTagName("name"),o=r.getElementsByTagName("value"),s=0;s<a.length;s++)n[a[s].childNodes[0].nodeValue]=o[s].childNodes[0].nodeValue;n.hasOwnProperty("Content")&&(n["Content-Type"]=n.Content,delete n.Content),n.hasOwnProperty("Content-Type")||(n["Content-Type"]="text/xml; charset=utf-8")}return n},getLicenseRequestFromMessage:function(e){var a,o=new DOMParser;return i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1||(a=new("utf-16"===t?Uint16Array:Uint8Array)(e),r(),a=String.fromCharCode.apply(null,a),!(o=o.parseFromString(a,"application/xml")).getElementsByTagName("PlayReadyKeyMessage")[0])?e:(a=o.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)?n.decode(a):null},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),i=6,r=new DOMParser,a=0;a<n;a++){var o=t.getUint16(i,!0),s=(i+=2,t.getUint16(i,!0));if(i+=2,1===o){if(o=e.slice(i,i+s),o=String.fromCharCode.apply(null,new Uint16Array(o)),(o=r.parseFromString(o,"application/xml")).getElementsByTagName("LA_URL")[0]){var l=o.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(l)return l}if(o.getElementsByTagName("LUI_URL")[0]&&(l=o.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue))return l}else i+=s}return null},getCDMData:function(e){var t,i,a,o;if(r(),!e)return null;for(t=[],o=0;o<e.length;++o)t.push(e.charCodeAt(o)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=n.encode(t),i='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),a=[],o=0;o<i.length;++o)a.push(i.charCodeAt(o)),a.push(0);return new Uint8Array(a).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');t=e}}}Z.__dashjs_factory_name="KeySystemPlayReady";var $=dashjs.FactoryMaker.getSingletonFactory(Z);function ee(e){var t=(e=e||{}).BASE64,n={};return n[j.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[j.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,i){if(t&&t.hasOwnProperty("decodeArray"))return n[i].getLicenseMessage(e);throw new Error("Missing config parameter(s)")},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}ee.__dashjs_factory_name="DRMToday";var te=dashjs.FactoryMaker.getSingletonFactory(ee);function ne(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){return e=String.fromCharCode.apply(null,new Uint8Array(e)),decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(n){return function(n){if(window.DOMParser){var i=t(n);if((i=(i=(i=(new window.DOMParser).parseFromString(i,"text/xml"))?i.getElementsByTagNameNS(e,"Envelope")[0]:null)?i.getElementsByTagNameNS(e,"Body")[0]:null)&&i.getElementsByTagNameNS(e,"Fault")[0])return null}return n}.call(this,n)},getErrorResponse:function(n){return function(n){var i="",r="",a="";if(window.DOMParser){n=t(n);var o,s=(s=(o=(o=(o=(o=(new window.DOMParser).parseFromString(n,"text/xml"))?o.getElementsByTagNameNS(e,"Envelope")[0]:null)?o.getElementsByTagNameNS(e,"Body")[0]:null)?o.getElementsByTagNameNS(e,"Fault")[0]:null)?o.getElementsByTagName("detail")[0]:null)?s.getElementsByTagName("Exception")[0]:null;if(null===o)return n;i=(n=o.getElementsByTagName("faultstring")[0].firstChild)?n.nodeValue:null,null!==s&&(r=(n=s.getElementsByTagName("StatusCode")[0])?n.firstChild.nodeValue:null,o=(a=(n=s.getElementsByTagName("Message")[0])?n.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,s=a?a.indexOf("]"):-1,a=a?a.substring(o,s):"")}return n="code: ".concat(r,", name: ").concat(i),a&&(n+=", message: ".concat(a)),n}.call(this,n)}}}ne.__dashjs_factory_name="PlayReady";var ie=C.A.getSingletonFactory(ne);function re(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}re.__dashjs_factory_name="Widevine";var ae=dashjs.FactoryMaker.getSingletonFactory(re);function oe(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var i=(r=e.keys[n]).kid.replace(/=/g,""),r=r.k.replace(/=/g,"");t.push(new x(i,r))}return new N(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}oe.__dashjs_factory_name="ClearKey";var se=dashjs.FactoryMaker.getSingletonFactory(oe);function le(){var e,t,n,i,r,o,s,l,u=this.context;function c(e,t){return t&&e in t?t[e]:null}function h(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function d(e,t){return e&&e.sessionType?e.sessionType:t}return e={initialize:function(){var e;i=[],e=$(u).getInstance({BASE64:r,settings:o}),i.push(e),e=X(u).getInstance({BASE64:r}),i.push(e),e=Y(u).getInstance({BASE64:r}),i.push(e),s=e,e=K(u).getInstance({BASE64:r,debug:t}),i.push(e),l=e},setProtectionData:function(e){for(var t,n=0;n<i.length;n++){var r=i[n];r.hasOwnProperty("init")&&r.init((r=r.systemString,t=null,t=e?r in e?e[r]:null:t))}},isClearKey:function(e){return e===s||e===l},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),i=new Uint8Array(t),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0},getKeySystems:function(){return i},setKeySystems:function(e){i=e},getKeySystemBySystemString:function(e){for(var t=0;t<i.length;t++)if(i[t].systemString===e)return i[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,n){var r,o,s=[];if(e)for(var l=a.findCencContentProtection(e),u=0;u<i.length;++u)for(var f,p=c((o=i[u]).systemString,t),m=0;m<e.length;++m)(r=e[m]).schemeIdUri.toLowerCase()===o.schemeIdURI&&(f=o.getInitData(r,l),s.push({ks:i[u],keyId:r.keyId,initData:f,protData:p,cdmData:o.getCDMData(p?p.cdmData:null),sessionId:h(p,r),sessionType:d(p,n)}));return s},getSupportedKeySystemsFromSegmentPssh:function(e,t,n){for(var r,o=[],s=a.parsePSSHList(e),l=0;l<i.length;++l){var u=c((r=i[l]).systemString,t);r.uuid in s&&o.push({ks:r,initData:s[r.uuid],protData:u,cdmData:r.getCDMData(u?u.cdmData:null),sessionId:h(u),sessionType:d(u,n)})}return o},getLicenseServerModelInstance:function(e,t,n){return"license-release"===n||"individualization-request"===n?null:(n=null,t&&t.hasOwnProperty("drmtoday")?n=te(u).getInstance({BASE64:r}):e.systemString===j.WIDEVINE_KEYSTEM_STRING?n=ae(u).getInstance():e.systemString===j.PLAYREADY_KEYSTEM_STRING?n=ie(u).getInstance():e.systemString===j.CLEARKEY_KEYSTEM_STRING&&(n=se(u).getInstance()),n)},processClearKeyLicenseRequest:function(e,t,i){try{return e.getClearKeysFromProtectionData(t,i)}catch(e){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(i){i&&(i.debug&&(t=i.debug,n=t.getLogger(e)),i.BASE64&&(r=i.BASE64),i.settings)&&(o=i.settings)}}}le.__dashjs_factory_name="ProtectionKeyController";var ue=dashjs.FactoryMaker.getSingletonFactory(le);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var pe=new(function(e){function t(){var e;if(this instanceof t)return(e=function(e,t,n){t=de(t);var i=e;if(!(t=he()?Reflect.construct(t,[],de(e).constructor):t.apply(e,n))||"object"!==ce(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=i))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}(this,t)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e;throw new TypeError("Cannot call a class as a function")}var n=t;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&fe(n,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n}(n(4183).A));me=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.initData=t,this.initDataType=n},Object.defineProperty(me,"prototype",{writable:!1});var me,ge=me;_e=function e(t,n,i,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.sessionToken=t,this.message=n,this.defaultURL=i,this.messageType=r||"license-request"},Object.defineProperty(_e,"prototype",{writable:!1});var _e,ye=_e;ve=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.keySystem=t,this.ksConfiguration=n},Object.defineProperty(ve,"prototype",{writable:!1});var ve,Ae=ve,Ee={};function be(e){var t,n,i,r,a,o,s,l=this.context,u=(e=e||{}).eventBus,c=e.events;function h(e,n,i,r){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return u.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:s="Insecure origins are not allowed"}),r({error:s});var a,o,s=e[n].protData&&e[n].protData.systemStringPriority?e[n].protData.systemStringPriority:null,l=e[n].configs,d=e[n].ks,f=d.systemString;a=s||Ee[f]||[f],o=l,new Promise((function(e,n){!function e(n,i,r,a,o){var s=n[r];t.debug("Requesting key system access for system string ".concat(s)),navigator.requestMediaKeySystemAccess(s,i).then((function(e){e.selectedSystemString=s,a(e)})).catch((function(t){r+1<n.length?e(n,i,r+1,a,o):o(t)}))}(a,o,0,e,n)})).then((function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null;(t=new Ae(d,t)).mksa=e,u.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:t}),i({data:t})})).catch((function(t){n+1<e.length?h(e,n+1,i,r):(u.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+t.message}),r({error:"Key system access denied! "+t.message}))}))}function d(e){var t;return e&&e.session?((t=e.session).removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()):Promise.resolve}function f(e){for(var t=0;t<a.length;t++)if(a[t]===e){a.splice(t,1);break}}function p(e){var t,n;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1])&&("string"==typeof e[1]?t=e[1]:n=e[1]),{status:t,keyId:n}}function m(e,n){var i={session:e,keyId:n.keyId,initData:n.initData,sessionId:n.sessionId,sessionType:n.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":u.trigger(c.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach((function(){var e=p(arguments);"expired"===e.status?u.trigger(c.INTERNAL_KEY_STATUS_CHANGED,{error:new y.A(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):u.trigger(c.INTERNAL_KEY_STATUS_CHANGED,e)}));break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;u.trigger(c.INTERNAL_KEY_MESSAGE,{data:new ye(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return e.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach((function(){"usable"===p(arguments).status&&(t=!0)})),t}};return e.addEventListener("keystatuseschange",i),e.addEventListener("message",i),e.closed.then((function(){f(i),t.debug("DRM: Session closed.  SessionID = "+i.getSessionId()),u.trigger(c.KEY_SESSION_CLOSED,{data:i.getSessionId()})})),a.push(i),i}return e=e.debug,t=e.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<a.length;t++)a[t].initData&&e.push(a[t].initData);return e},getSessions:function(){return a},requestKeySystemAccess:function(e){return new Promise((function(t,n){h(e,0,t,n)}))},selectKeySystem:function(e){return new Promise((function(t,a){e.mksa.createMediaKeys().then((function(t){return n=e.keySystem,r=t,i?i.setMediaKeys(r):Promise.resolve()})).then((function(){t(n)})).catch((function(){a({error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(e){i!==e&&(i&&(i.removeEventListener("encrypted",o),i.setMediaKeys)&&i.setMediaKeys(null),i=e)&&(i.addEventListener("encrypted",o),i.setMediaKeys)&&r&&i.setMediaKeys(r)},setServerCertificate:function(e){if(!n||!r)throw new Error("Can not set server certificate until you have selected a key system");r.setServerCertificate(e).then((function(){t.info("DRM: License server certificate successfully updated."),u.trigger(c.SERVER_CERTIFICATE_UPDATED)})).catch((function(e){u.trigger(c.SERVER_CERTIFICATE_UPDATED,{error:new y.A(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})}))},createKeySession:function(e){if(!n||!r)throw new Error("Can not create sessions until you have selected a key system");var i=r.createSession(e.sessionType),a=m(i,e),o=n.systemString===j.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?j.INITIALIZATION_DATA_TYPE_KEYIDS:j.INITIALIZATION_DATA_TYPE_CENC;i.generateRequest(o,e.initData).then((function(){t.debug("DRM: Session created.  SessionID = "+a.getSessionId()),u.trigger(c.KEY_SESSION_CREATED,{data:a})})).catch((function(e){f(a),u.trigger(c.KEY_SESSION_CREATED,{data:null,error:new y.A(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})}))},updateKeySession:function(e,t){var i=e.session;s.isClearKey(n)&&(t=t.toJWK()),i.update(t).then((function(){u.trigger(c.KEY_SESSION_UPDATED)})).catch((function(t){u.trigger(c.KEY_ERROR,{error:new y.A(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})}))},loadKeySession:function(e){if(!n||!r)throw new Error("Can not load sessions until you have selected a key system");for(var i=e.sessionId,o=0;o<a.length;o++)if(i===a[o].sessionId)return void t.warn("DRM: Ignoring session ID because we have already seen it!");var s=r.createSession(e.sessionType),l=m(s,e);s.load(i).then((function(e){e?(t.debug("DRM: Session loaded.  SessionID = "+l.getSessionId()),u.trigger(c.KEY_SESSION_CREATED,{data:l})):(f(l),u.trigger(c.KEY_SESSION_CREATED,{data:null,error:new y.A(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+i+")")}))})).catch((function(e){f(l),u.trigger(c.KEY_SESSION_CREATED,{data:null,error:new y.A(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+i+")! "+e.name)})}))},removeKeySession:function(e){e.session.remove().then((function(){t.debug("DRM: Session removed.  SessionID = "+e.getSessionId()),u.trigger(c.KEY_SESSION_REMOVED,{data:e.getSessionId()})}),(function(t){u.trigger(c.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionId()+"). "+t.name})}))},closeKeySession:function(e){d(e).catch((function(t){f(e),u.trigger(c.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionId()+") "+t.name})}))},stop:function(){for(var e,t=0;t<a.length;t++)(e=a[t]).getUsable()||(d(e),f(e))},reset:function(){var e,t,n=a.length;if(0!==n)for(var r=0;r<n;r++)t=e=a[r],d(e),f(t),0===a.length&&(i?(i.removeEventListener("encrypted",o),i.setMediaKeys(null).then((function(){u.trigger(c.TEARDOWN_COMPLETE)}))):u.trigger(c.TEARDOWN_COMPLETE));else u.trigger(c.TEARDOWN_COMPLETE)}}),r=i=n=null,a=[],s=ue(l).getInstance(),o={handleEvent:function(e){var t;"encrypted"===e.type&&e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,u.trigger(c.NEED_KEY,{key:new ge(t,e.initDataType)}))}},e}Ee[j.PLAYREADY_KEYSTEM_STRING]=[j.PLAYREADY_KEYSTEM_STRING,j.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],Ee[j.WIDEVINE_KEYSTEM_STRING]=[j.WIDEVINE_KEYSTEM_STRING],Ee[j.CLEARKEY_KEYSTEM_STRING]=[j.CLEARKEY_KEYSTEM_STRING],be.__dashjs_factory_name="ProtectionModel_21Jan2015";var we=dashjs.FactoryMaker.getClassFactory(be);function Te(e){var t,n,i,r,a,o,s,l,u=this.context,c=(e=e||{}).eventBus,h=e.events,f=e.debug,p=e.api;function m(){try{for(var e=0;e<o.length;e++)g(o[e]);n&&n.removeEventListener(p.needkey,s),c.trigger(h.TEARDOWN_COMPLETE)}catch(e){c.trigger(h.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function g(e){var t=e.session;t.removeEventListener(p.error,e),t.removeEventListener(p.message,e),t.removeEventListener(p.ready,e),t.removeEventListener(p.close,e);for(var n=0;n<o.length;n++)if(o[n]===e){o.splice(n,1);break}t[p.release]()}function v(){function e(){n.removeEventListener("loadedmetadata",t),n[p.setMediaKeys](r),c.trigger(h.VIDEO_ELEMENT_SELECTED)}var t=null;1<=n.readyState?e():(t=e.bind(this),n.addEventListener("loadedmetadata",t))}return t=f.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<o.length;t++)e.push(o[t].initData);return e},getSessions:function(){return o},requestKeySystemAccess:function(e){return new Promise((function(t,n){for(var i=!1,r=0;r<e.length;r++)for(var a=e[r].ks.systemString,o=e[r].configs,s=null,u=null,f=0;f<o.length;f++){var m=o[f].audioCapabilities,g=o[f].videoCapabilities;if(m&&0!==m.length){s=[];for(var _=0;_<m.length;_++)window[p.MediaKeys].isTypeSupported(a,m[_].contentType)&&s.push(m[_])}if(g&&0!==g.length){u=[];for(var y=0;y<g.length;y++)window[p.MediaKeys].isTypeSupported(a,g[y].contentType)&&u.push(g[y])}if(!(!s&&!u||s&&0===s.length||u&&0===u.length)){i=!0;var v=new d(s,u),A=l.getKeySystemBySystemString(a);A=new Ae(A,v),c.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:A}),t({data:A});break}}i||(c.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"}),n({error:"Key system access denied! -- No valid audio/video content configurations detected!"}))}))},selectKeySystem:function(e){return new Promise((function(t,o){try{r=e.mediaKeys=new window[p.MediaKeys](e.keySystem.systemString),i=e.keySystem,a=e,n&&v(),t(i)}catch(t){o({error:"Error selecting keys system ("+i.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(e){n!==e&&(n&&n.removeEventListener(p.needkey,s),n=e)&&(n.addEventListener(p.needkey,s),r)&&v()},createKeySession:function(e){if(!i||!r||!a)throw new Error("Can not create sessions until you have selected a key system");var n=null;if(null===(n=null===(n=a.ksConfiguration.videoCapabilities&&0<a.ksConfiguration.videoCapabilities.length?a.ksConfiguration.videoCapabilities[0]:n)&&a.ksConfiguration.audioCapabilities&&0<a.ksConfiguration.audioCapabilities.length?a.ksConfiguration.audioCapabilities[0]:n))throw new Error("Can not create sessions for unknown content types.");n=n.contentType,e={session:n=r.createSession(n,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case p.error:c.trigger(h.KEY_ERROR,{error:new y.A(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case p.message:var n=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;c.trigger(h.INTERNAL_KEY_MESSAGE,{data:new ye(this,n,e.destinationURL)});break;case p.ready:t.debug("DRM: Key added."),c.trigger(h.KEY_ADDED);break;case p.close:t.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),c.trigger(h.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}},n.addEventListener(p.error,e),n.addEventListener(p.message,e),n.addEventListener(p.ready,e),n.addEventListener(p.close,e),o.push(e),t.debug("DRM: Session created.  SessionID = "+e.getSessionId()),c.trigger(h.KEY_SESSION_CREATED,{data:e})},updateKeySession:function(e,t){e=e.session,l.isClearKey(i)?e.update(new Uint8Array(t.toJWK())):e.update(new Uint8Array(t)),c.trigger(h.KEY_SESSION_UPDATED)},closeKeySession:g,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:m,reset:m}),a=r=i=n=null,o=[],l=ue(u).getInstance(),s={handleEvent:function(e){e.type===p.needkey&&e.initData&&(e=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,c.trigger(h.NEED_KEY,{key:new ge(e,"cenc")}))}},e}Te.__dashjs_factory_name="ProtectionModel_3Feb2014";var Se=dashjs.FactoryMaker.getClassFactory(Te);function Re(e){var t,n,i,r,a,o,s,l,u=this.context,c=(e=e||{}).eventBus,h=e.events,f=e.debug,p=e.api,m=e.errHandler;function g(){n&&E();for(var e=0;e<o.length;e++)v(o[e]);c.trigger(h.TEARDOWN_COMPLETE)}function v(e){try{n[p.cancelKeyRequest](i.systemString,e.sessionId)}catch(t){c.trigger(h.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionId+") "+t.message})}}function A(e,t){if(t&&e)for(var n=e.length,i=0;i<n;i++)if(e[i].sessionId==t)return e[i];return null}function E(){n.removeEventListener(p.keyerror,l),n.removeEventListener(p.needkey,l),n.removeEventListener(p.keymessage,l),n.removeEventListener(p.keyadded,l)}return t=f.getLogger(e={getAllInitData:function(){for(var e=[],t=0;t<a.length;t++)e.push(a[t].initData);for(var n=0;n<o.length;n++)e.push(o[n].initData);return e},getSessions:function(){return o.concat(a)},requestKeySystemAccess:function(e){return new Promise((function(t,i){for(var a=(a=n)||document.createElement("video"),o=!1,s=0;s<e.length;s++)for(var l=e[s].ks.systemString,u=e[s].configs,f=null,p=0;p<u.length;p++){var m=u[p].videoCapabilities;if(m&&0!==m.length){f=[];for(var g=0;g<m.length;g++)""!==a.canPlayType(m[g].contentType,l)&&f.push(m[g])}if(f&&(!f||0!==f.length)){o=!0;var _=new d(null,f),y=r.getKeySystemBySystemString(l);y=new Ae(y,_),c.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:y}),t({data:y});break}}o||(c.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"}),i({error:"Key system access denied! -- No valid audio/video content configurations detected!"}))}))},selectKeySystem:function(e){return i=e.keySystem,Promise.resolve(i)},setMediaElement:function(e){if(n!==e){if(n){E();for(var t=0;t<o.length;t++)v(o[t]);o=[]}(n=e)&&(n.addEventListener(p.keyerror,l),n.addEventListener(p.needkey,l),n.addEventListener(p.keymessage,l),n.addEventListener(p.keyadded,l),c.trigger(h.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!i)throw new Error("Can not create sessions until you have selected a key system");var t;if(s||0===o.length)return t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}},a.push(t),n[p.generateKeyRequest](i.systemString,new Uint8Array(e.initData)),t;throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var a=e.sessionId;if(r.isClearKey(i))for(var o=0;o<t.keyPairs.length;o++)n[p.addKey](i.systemString,t.keyPairs[o].key,t.keyPairs[o].keyID,a);else n[p.addKey](i.systemString,new Uint8Array(t),new Uint8Array(e.initData),a);c.trigger(h.KEY_SESSION_UPDATED)},closeKeySession:v,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:g,reset:g}),i=n=null,a=[],o=[],r=ue(u).getInstance(),l={handleEvent:function(e){var n=null;switch(e.type){case p.needkey:var i=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;c.trigger(h.NEED_KEY,{key:new ge(i,"cenc")});break;case p.keyerror:if(n=(n=A(o,e.sessionId))||A(a,e.sessionId)){var r=_.MEDIA_KEYERR_CODE,l="";switch(e.errorCode.code){case 1:r=_.MEDIA_KEYERR_UNKNOWN_CODE,l+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:r=_.MEDIA_KEYERR_CLIENT_CODE,l+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:r=_.MEDIA_KEYERR_SERVICE_CODE,l+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:r=_.MEDIA_KEYERR_OUTPUT_CODE,l+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:r=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,l+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:r=_.MEDIA_KEYERR_DOMAIN_CODE,l+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}l+="  System Code = "+e.systemCode,c.trigger(h.KEY_ERROR,{error:new y.A(r,l,n)})}else t.error("No session token found for key error");break;case p.keyadded:(n=(n=A(o,e.sessionId))||A(a,e.sessionId))?(t.debug("DRM: Key added."),c.trigger(h.KEY_ADDED,{data:n})):t.debug("No session token found for key added");break;case p.keymessage:(s=null!==e.sessionId&&void 0!==e.sessionId)?!(n=A(o,e.sessionId))&&0<a.length&&(n=a.shift(),o.push(n),n.sessionId=e.sessionId,c.trigger(h.KEY_SESSION_CREATED,{data:n})):0<a.length&&(n=a.shift(),o.push(n),0!==a.length)&&m.error(new y.A(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE)),n?(i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,n.keyMessage=i,c.trigger(h.INTERNAL_KEY_MESSAGE,{data:new ye(n,i,e.defaultURL)})):t.warn("No session token found for key message")}}},e}Re.__dashjs_factory_name="ProtectionModel_01b";var Ie=dashjs.FactoryMaker.getClassFactory(Re),Ce=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],Le=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Pe(){var e,t=this.context;function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("function"==typeof e[i[Object.keys(i)[0]]])return i}return null}return e={createProtectionSystem:function(i){var r,a,o,s,l,u=null,c=ue(t).getInstance(),h=(c.setConfig({debug:i.debug,BASE64:i.BASE64,settings:i.settings}),c.initialize(),o=(a=(r=i).debug).getLogger(e),s=r.eventBus,h=r.errHandler,(l=r.videoModel?r.videoModel.getElement():null)&&void 0===l.onencrypted||l&&void 0===l.mediaKeys?n(l,Le)?(o.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Se(t).create({debug:a,eventBus:s,events:r.events,api:n(l,Le)})):n(l,Ce)?(o.info("EME detected on this user agent! (ProtectionModel_01b)"),Ie(t).create({debug:a,eventBus:s,errHandler:h,events:r.events,api:n(l,Ce)})):(o.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(o.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),we(t).create({debug:a,eventBus:s,events:r.events})));return!u&&h&&(u=D(t).create({protectionModel:h,protectionKeyController:c,eventBus:i.eventBus,debug:i.debug,events:i.events,BASE64:i.BASE64,constants:i.constants,cmcdModel:i.cmcdModel,customParametersModel:i.customParametersModel,settings:i.settings}),i.capabilities.setEncryptedMediaSupported(!0)),u}}}Pe.__dashjs_factory_name="Protection";var De=((t=dashjs.FactoryMaker.getClassFactory(Pe)).events=pe,t.errors=_,dashjs.FactoryMaker.updateClassFactory(Pe.__dashjs_factory_name,t),t)},9783:function(e,t,n){n=n(7575);var i={DEFAULT:.5,STRONG:1,WEAK:0};function r(e,t,n){return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:n!==i.DEFAULT&&n!==i.STRONG&&n!==i.WEAK?i.DEFAULT:n}}r.__dashjs_factory_name="SwitchRequest";var a=n.A.getClassFactory(r);a.NO_CHANGE=-1,a.PRIORITY=i,n.A.updateClassFactory(r.__dashjs_factory_name,a),t.A=a},4986:function(e,t,n){var i=n(5364),r=n(2043),a=n(4703),o=n(264),s=n(9208),l=n(5030),u=n(173),c=n(8967),h=n(7575),d=n(9783),f=n(4961),p="qualitySwitchRules",m="abandonFragmentRules";function g(e){var t,n,h=this.context,g=(e=e||{}).mediaPlayerModel,_=e.customParametersModel,y=e.dashMetrics,v=e.settings;function A(e){return e.filter((function(e){return e.quality>d.A.NO_CHANGE}))}function E(e){var t,n,i,r,a,o={},s=null;if(0!==e.length){for(o[d.A.PRIORITY.STRONG]={quality:d.A.NO_CHANGE,reason:null},o[d.A.PRIORITY.WEAK]={quality:d.A.NO_CHANGE,reason:null},o[d.A.PRIORITY.DEFAULT]={quality:d.A.NO_CHANGE,reason:null},t=0,n=e.length;t<n;t+=1)(i=e[t]).quality!==d.A.NO_CHANGE&&(o[i.priority].quality===d.A.NO_CHANGE||o[i.priority].quality>i.quality)&&(o[i.priority].quality=i.quality,o[i.priority].reason=i.reason||null);return o[d.A.PRIORITY.WEAK].quality!==d.A.NO_CHANGE&&(s=o[d.A.PRIORITY.WEAK]),o[d.A.PRIORITY.DEFAULT].quality!==d.A.NO_CHANGE&&(s=o[d.A.PRIORITY.DEFAULT]),(s=o[d.A.PRIORITY.STRONG].quality!==d.A.NO_CHANGE?o[d.A.PRIORITY.STRONG]:s)&&(r=s.quality,a=s.reason),(0,d.A)(h).create(r,a)}}return{initialize:function(){t=[],n=[],v.get().streaming.abr.useDefaultABRRules&&(v.get().streaming.abr.ABRStrategy===f.A.ABR_STRATEGY_L2A?t.push((0,u.A)(h).create({dashMetrics:y,settings:v})):v.get().streaming.abr.ABRStrategy===f.A.ABR_STRATEGY_LoLP?t.push((0,c.A)(h).create({dashMetrics:y})):(t.push((0,l.A)(h).create({dashMetrics:y,mediaPlayerModel:g,settings:v})),t.push((0,i.A)(h).create({dashMetrics:y})),v.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&t.push((0,r.A)(h).create({dashMetrics:y,settings:v})),v.get().streaming.abr.additionalAbrRules.switchHistoryRule&&t.push((0,s.A)(h).create()),v.get().streaming.abr.additionalAbrRules.droppedFramesRule&&t.push((0,o.A)(h).create()),v.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&n.push((0,a.A)(h).create({dashMetrics:y,mediaPlayerModel:g,settings:v})))),_.getAbrCustomRules().forEach((function(e){e.type===p&&t.push(e.rule(h).create()),e.type===m&&n.push(e.rule(h).create())}))},reset:function(){[t,n].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),t=[],n=[]},getMaxQuality:function(e){return E(A(t.map((function(t){return t.getMaxIndex(e)}))))||(0,d.A)(h).create()},getMinSwitchRequest:E,shouldAbandonFragment:function(e,t){var i=E(A(n.map((function(n){return n.shouldAbandon(e,t)}))));return i&&(i.reason.forceAbandon=!0),i||(0,d.A)(h).create()},getQualitySwitchRules:function(){return t}}}g.__dashjs_factory_name="ABRRulesCollection",(n=h.A.getClassFactory(g)).QUALITY_SWITCH_RULES=p,n.ABANDON_FRAGMENT_RULES=m,h.A.updateSingletonFactory(g.__dashjs_factory_name,n),t.A=n},4703:function(e,t,n){var i=n(9783),r=n(7575),a=n(9378);function o(e){var t,n,r,s,l=this.context,u=(e=e||{}).mediaPlayerModel,c=e.dashMetrics,h=e.settings;function d(){n={},r={},s=[]}return e={shouldAbandon:function(e){var a=(0,i.A)(l).create(i.A.NO_CHANGE,{name:o.__dashjs_factory_name});if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")){var d=e.getMediaInfo(),f=e.getMediaType(),p=(p=e.getStreamInfo())?p.id:null,m=e.getCurrentRequest();if(!isNaN(m.index)){_=m.index,n[g=f]=n[g]||{},n[g][_]=n[g][_]||{};var g=u.getStableBufferTime();if(c.getCurrentBufferLevel(f)>g)return a;var _=n[f][m.index];if(null===_||null===m.firstByteDate||r.hasOwnProperty(_.id))return a;if(void 0===_.firstByteTime&&(s[f]=[],_.firstByteTime=m.firstByteDate.getTime(),_.segmentDuration=m.duration,_.bytesTotal=m.bytesTotal,_.id=m.index),_.bytesLoaded=m.bytesLoaded,_.elapsedTime=(new Date).getTime()-_.firstByteTime,0<_.bytesLoaded&&0<_.elapsedTime&&(g=f,m=Math.round(8*_.bytesLoaded/_.elapsedTime),s[g]=s[g]||[],s[g].push(m)),s[f].length>=h.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&_.elapsedTime>h.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&_.bytesLoaded<_.bytesTotal){var y;if(g=s[f].reduce((function(e,t){return e+t}),0),_.measuredBandwidthInKbps=Math.round(g/s[f].length),_.estimatedTimeOfDownload=+(8*_.bytesTotal/_.measuredBandwidthInKbps/1e3).toFixed(2),_.estimatedTimeOfDownload<_.segmentDuration*h.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||0===e.getRepresentationInfo().quality)return a;r.hasOwnProperty(_.id)||(m=e.getAbrController(),g=_.bytesTotal-_.bytesLoaded,e=m.getBitrateList(d),d=m.getQualityForBitrate(d,_.measuredBandwidthInKbps*h.get().streaming.abr.bandwidthSafetyFactor,p),y=void 0!==(y=m.getMinAllowedIndexFor(f,p))?Math.max(y,d):d,g>_.bytesTotal*e[y].bitrate/e[m.getQualityFor(f,p)].bitrate&&(a.quality=y,a.reason.throughput=_.measuredBandwidthInKbps,a.reason.fragmentID=_.id,a.reason.rule=this.getClassName(),r[_.id]=_,t.debug("["+f+"] frag id",_.id," is asking to abandon and switch to quality to ",y," measured bandwidth was",_.measuredBandwidthInKbps),delete n[f][_.id]))}else _.bytesLoaded===_.bytesTotal&&delete n[f][_.id]}}return a},reset:d},t=(0,a.A)(l).getInstance().getLogger(e),d(),e}o.__dashjs_factory_name="AbandonRequestsRule",t.A=r.A.getClassFactory(o)},5030:function(e,t,n){var i=n(6992),r=n(9783),a=n(7575),o=n(4779),s=n(1739),l=n(3342),u=n(9378),c=n(8914),h=n(4961);function d(e){var t,n,a,d=this.context,f=(e=e||{}).dashMetrics,p=e.mediaPlayerModel,m=(0,s.A)(d).getInstance();function g(e,t,n){var i=n.reduce((function(e,t,i){return t>n[e]?i:e}),0);return 0===i?null:(e=Math.max(e,10+2*t.length),{gp:t=(n[i]-1)/(e/10-1),Vp:10/t})}function _(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function y(e,t){var n,i,r=p.getStableBufferTime();e.stableBufferTime===r||(n=g(r,e.bitrates,e.utilities)).Vp===e.Vp&&n.gp===e.gp||(i=(t=f.getCurrentBufferLevel(t))+e.placeholderBuffer,i=(i-=10)*(n.Vp/e.Vp)+10,e.stableBufferTime=r,e.Vp=n.Vp,e.gp=n.gp,e.placeholderBuffer=Math.max(0,i-t))}function v(e,t){return e.Vp*(e.utilities[t]+e.gp)}function A(e,t){for(var n,i,r=e.bitrates[t],a=e.utilities[t],o=0,s=t-1;0<=s;--s)e.utilities[s]<e.utilities[t]&&(n=e.bitrates[s],i=e.utilities[s],i=e.Vp*(e.gp+(r*i-n*a)/(r-n)),o=Math.max(o,i));return o}function E(e){for(var t in e.mediaType===h.A.AUDIO?[h.A.AUDIO]:a)a.hasOwnProperty(t)&&2===a[t].state&&(a[t].placeholderBuffer=0)}function b(){for(var e in a)a.hasOwnProperty(e)&&0!==(e=a[e]).state&&(e.state=1,_(e))}function w(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&(t=a[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,S(t,e.chunk.mediaInfo.type))}function T(e){var t;e&&e.metric===i.A.HTTP_REQUEST&&e.value&&e.value.type===o.G.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=a[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),S(t,e.mediaType))}function S(e,t){var n;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(t=f.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),n=v(e,e.lastQuality),n=Math.max(0,n-t),e.placeholderBuffer=Math.min(n,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function R(e){var t;e&&(t=a[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function I(e){var t,n;e&&(t=a[e.mediaType])&&0!==t.state&&(e=f.getCurrentBufferLevel(e.mediaType),n=0<t.abrQuality?A(t,t.abrQuality):10,n=Math.max(0,n-e),t.placeholderBuffer=Math.min(t.placeholderBuffer,n))}function C(){a={}}return t={getMaxIndex:function(e){var t=(0,r.A)(d).create();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")){var i=e.getMediaInfo(),o=e.getMediaType(),s=e.getScheduleController(),l=e.getStreamInfo(),u=e.getAbrController(),c=u.getThroughputHistory(),h=l?l.id:null,m=(l=l&&l.manifestInfo&&l.manifestInfo.isDynamic,e.useBufferOccupancyABR());if(t.reason=t.reason||{},m){s.setTimeToLoadDelay(0),e=(m=e).getMediaType(),(S=a[e])?0!==S.state&&y(S,e):(E={},m=m.getMediaInfo().bitrateList.map((function(e){return e.bandwidth})),b=(b=m.map((function(e){return Math.log(e)}))).map((function(e){return e-b[0]+1})),(T=g(w=p.getStableBufferTime(),m,b))?(E.state=1,E.bitrates=m,E.utilities=b,E.stableBufferTime=w,E.Vp=T.Vp,E.gp=T.gp,E.lastQuality=0,_(E)):E.state=0,S=E,a[e]=S);var E,b,w,T,S,R=S;if(0!==R.state){var I,C,L=f.getCurrentBufferLevel(o),P=c.getAverageThroughput(o,l),D=c.getSafeAverageThroughput(o,l),k=c.getAverageLatency(o);if(t.reason.state=R.state,t.reason.throughput=P,t.reason.latency=k,!isNaN(P))switch(R.state){case 1:x=u.getQualityForBitrate(i,D,h,k),t.quality=x,t.reason.throughput=D,R.placeholderBuffer=Math.max(0,A(R,x)-L),R.lastQuality=x,!isNaN(R.lastSegmentDurationS)&&L>=R.lastSegmentDurationS&&(R.state=2);break;case 2:I=R,C=o,O=Date.now(),isNaN(I.lastSegmentFinishTimeMs)?isNaN(I.lastCallTimeMs)||(M=.001*(O-I.lastCallTimeMs),I.placeholderBuffer+=Math.max(0,M)):(M=.001*(O-I.lastSegmentFinishTimeMs),I.placeholderBuffer+=Math.max(0,M)),I.lastCallTimeMs=O,I.lastSegmentStart=NaN,I.lastSegmentRequestTimeMs=NaN,I.lastSegmentFinishTimeMs=NaN,y(I,C);var x=function(e,t){for(var n=e.bitrates.length,i=NaN,r=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(r)||r<=o)&&(r=o,i=a)}return i}(R,L+R.placeholderBuffer),M=u.getQualityForBitrate(i,D,h,k),O=(x>R.lastQuality&&M<x&&(x=Math.max(M,R.lastQuality)),Math.max(0,L+R.placeholderBuffer-v(R,x)));O<=R.placeholderBuffer?(R.placeholderBuffer-=O,O=0):(O-=R.placeholderBuffer,R.placeholderBuffer=0,x<u.getMaxAllowedIndexFor(o,h)?s.setTimeToLoadDelay(1e3*O):O=0),t.quality=x,t.reason.throughput=P,t.reason.latency=k,t.reason.bufferLevel=L,t.reason.placeholderBuffer=R.placeholderBuffer,t.reason.delay=O,R.lastQuality=x;break;default:n.debug("BOLA ABR rule invoked in bad state."),t.quality=u.getQualityForBitrate(i,D,h,k),t.reason.state=R.state,t.reason.throughput=D,t.reason.latency=k,R.state=1,_(R)}}}}return t},reset:function(){C(),m.off(c.A.BUFFER_EMPTY,E,t),m.off(c.A.PLAYBACK_SEEKING,b,t),m.off(c.A.METRIC_ADDED,T,t),m.off(c.A.QUALITY_CHANGE_REQUESTED,R,t),m.off(c.A.FRAGMENT_LOADING_ABANDONED,I,t),m.off(l.A.MEDIA_FRAGMENT_LOADED,w,t)}},n=(0,u.A)(d).getInstance().getLogger(t),C(),m.on(c.A.BUFFER_EMPTY,E,t),m.on(c.A.PLAYBACK_SEEKING,b,t),m.on(c.A.METRIC_ADDED,T,t),m.on(c.A.QUALITY_CHANGE_REQUESTED,R,t),m.on(c.A.FRAGMENT_LOADING_ABANDONED,I,t),m.on(l.A.MEDIA_FRAGMENT_LOADED,w,t),t}d.__dashjs_factory_name="BolaRule",t.A=a.A.getClassFactory(d)},264:function(e,t,n){var i=n(7575),r=n(9783),a=n(9378);function o(){var e=this.context,t={getMaxIndex:function(t){var i=(0,r.A)(e).create();if(t&&t.hasOwnProperty("getDroppedFramesHistory")){var a=t.getDroppedFramesHistory();if(t=t.getStreamInfo().id,a){var o=a.getFrameHistory(t);if(!o||0===o.length)return i;for(var s=0,l=0,u=r.A.NO_CHANGE,c=1;c<o.length;c++)if(o[c]&&(s=o[c].droppedVideoFrames,375<(l=o[c].totalVideoFrames))&&.15<s/l){n.debug("index: "+(u=c-1)+" Dropped Frames: "+s+" Total Frames: "+l);break}return(0,r.A)(e).create(u,{droppedFrames:s})}}return i}},n=(0,a.A)(e).getInstance().getLogger(t);return t}o.__dashjs_factory_name="DroppedFramesRule",t.A=i.A.getClassFactory(o)},2043:function(e,t,n){var i=n(1739),r=n(3342),a=n(7575),o=n(9378),s=n(9783),l=n(4961),u=n(6992),c=n(8914);function h(e){e=e||{};var t,n,a,h=2,d=this.context,f=(0,i.A)(d).getInstance(),p=e.dashMetrics;function m(){(a={})[l.A.VIDEO]={ignoreCount:h},a[l.A.AUDIO]={ignoreCount:h}}function g(){m()}function _(e){isNaN(e.startTime)||e.mediaType!==l.A.AUDIO&&e.mediaType!==l.A.VIDEO||0<a[e.mediaType].ignoreCount&&a[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=(0,s.A)(d).create();if(e&&e.hasOwnProperty("getMediaType")){if(!p||!p.hasOwnProperty("getCurrentBufferLevel")||!p.hasOwnProperty("getCurrentBufferState"))throw new Error(l.A.MISSING_CONFIG_ERROR);var i,r=e.getMediaType(),o=p.getCurrentBufferState(r),c=e.getRepresentationInfo().fragmentDuration,h=(m=e.getStreamInfo())?m.id:null,f=e.getScheduleController(),m=m&&m.manifestInfo&&m.manifestInfo.isDynamic;!f.getPlaybackController().getLowLatencyModeEnabled()&&0<a[r].ignoreCount||!c||(o&&o.state===u.A.BUFFER_EMPTY?(n.debug("["+r+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty"):(f=e.getMediaInfo(),e=(o=e.getAbrController()).getThroughputHistory(),i=p.getCurrentBufferLevel(r),m=e.getAverageThroughput(r,m),e=e.getAverageLatency(r),t.quality=o.getQualityForBitrate(f,m*(i/c)*.5,h,e),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"))}return t},reset:function(){m(),f.off(c.A.PLAYBACK_SEEKING,g,t),f.off(r.A.BYTES_APPENDED_END_FRAGMENT,_,t)}},n=(0,o.A)(d).getInstance().getLogger(t),m(),f.on(c.A.PLAYBACK_SEEKING,g,t),f.on(r.A.BYTES_APPENDED_END_FRAGMENT,_,t),t}h.__dashjs_factory_name="InsufficientBufferRule",t.A=a.A.getClassFactory(h)},173:function(e,t,n){var i=n(6992),r=n(9783),a=n(7575),o=n(4779),s=n(1739),l=n(3342),u=n(9378),c=n(4961);function h(e){var t,n,a,h,d=this.context,f=(e=e||{}).dashMetrics,p=(0,s.A)(d).getInstance();function m(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,e.lastSegmentUrl=""}function g(){for(var e in n)n.hasOwnProperty(e)&&0!==(e=n[e]).state&&(e.state=1,m(e))}function _(e){var t,i,r;e&&e.chunk&&e.chunk.mediaInfo&&(t=n[e.chunk.mediaInfo.type],i=a[e.chunk.mediaInfo.type],t)&&0!==t.state&&(r=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,v(t,i))}function y(e){var t,r;e&&e.metric===i.A.HTTP_REQUEST&&e.value&&e.value.type===o.G.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=n[e.mediaType],r=a[e.mediaType],t)&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),v(t,r))}function v(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function A(e){var t;e&&e.mediaType&&(t=n[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function E(e,t){if(e.length!==t.length)return-1;for(var n=0,i=0;i<e.length;i++)n+=e[i]*t[i];return n}function b(){n={},a={}}return t={getMaxIndex:function(e){var t,i=(0,r.A)(d).create(),s=Math.pow(4,.99),l=Math.max(Math.pow(4,1),s*Math.sqrt(4)),u=e.getMediaInfo(),p=e.getMediaType(),g=u.bitrateList.map((function(e){return e.bandwidth})),_=g.length,y=e.getScheduleController(),v=e.getStreamInfo(),A=e.getAbrController(),b=A.getThroughputHistory(),w=v&&v.manifestInfo&&v.manifestInfo.isDynamic,T=e.useL2AABR(),S=f.getCurrentBufferLevel(p,!0),R=b.getSafeAverageThroughput(p,w),I=b.getAverageThroughput(p,w),C=b.getAverageLatency(p),L=e.getVideoModel().getPlaybackRate();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")&&(i.reason=i.reason||{},T)&&p!==c.A.AUDIO){y.setTimeToLoadDelay(0),b=(w=e).getMediaType(),(T=n[b])||(y={},e=(w=w.getMediaInfo()).bitrateList.map((function(e){return e.bandwidth/1e3})),y.state=1,y.bitrates=e,y.lastQuality=0,(e=w)&&e.type&&(a[e.type]={},a[e.type].w=[],a[e.type].prev_w=[],a[e.type].Q=0,a[e.type].segment_request_start_s=0,a[e.type].segment_download_finish_s=0,a[e.type].B_target=1.5),m(y),T=y,n[b]=T);var P=T;if(0!==P.state){var D=a[p];if(D&&(i.reason.state=P.state,i.reason.throughput=I,i.reason.latency=C,!isNaN(I)))switch(P.state){case 1:if(t=A.getQualityForBitrate(u,R,v.id,C),i.quality=t,i.reason.throughput=R,P.lastQuality=t,!isNaN(P.lastSegmentDurationS)&&S>=D.B_target){P.state=2,D.Q=s;for(var k=0;k<_;++k)k===P.lastQuality?D.prev_w[k]=1:D.prev_w[k]=0}break;case 2:var x=[],M=f.getCurrentHttpRequest(p).trace.reduce((function(e,t){return e+t.d}),0),O=f.getCurrentHttpRequest(p).trace.reduce((function(e,t){return e+t.b[0]}),0),N=Math.round(8*O/M);if(N<1&&(N=1),(O=f.getCurrentHttpRequest(p)).url===P.lastSegmentUrl||O.type===o.G.INIT_SEGMENT_TYPE)t=P.lastQuality;else{for(var F=P.lastSegmentDurationS,B=1,U=0;U<_;++U)g[U]=g[U]/1e3,L*g[U]>N&&(B=-1),D.w[U]=D.prev_w[U]+B*(F/(2*l))*((D.Q+s)*(L*g[U]/N));D.w=function(e){for(var t=e.length,n=!1,i=[],r=0;r<t;++r)i[r]=e[r];for(var a=e.sort((function(e,t){return t-e})),o=0,s=0,l=[],u=0;u<t-1;++u)if((s=((o+=a[u])-1)/(u+1))>=a[u+1]){n=!0;break}n||(s=(o+a[t-1]-1)/t);for(var c=0;c<t;++c)l[c]=Math.max(i[c]-s,0);return l}(D.w);for(var j=0;j<_;++j)x[j]=D.w[j]-D.prev_w[j],D.prev_w[j]=D.w[j];D.Q=Math.max(0,D.Q-F+F*L*((E(g,D.prev_w)+E(g,x))/N));for(var G=[],V=0;V<_;++V)G[V]=Math.abs(g[V]-E(D.w,g));g[t=(t=G.indexOf(Math.min.apply(Math,G)))>P.lastQuality&&g[P.lastQuality+1]<=N?P.lastQuality+1:t]>=N&&(D.Q=2*Math.max(s,D.Q)),P.lastSegmentUrl=O.url}i.quality=t,i.reason.throughput=I,i.reason.latency=C,i.reason.bufferLevel=S,P.lastQuality=i.quality;break;default:h.debug("L2A ABR rule invoked in bad state."),i.quality=A.getQualityForBitrate(u,R,v.id,C),i.reason.state=P.state,i.reason.throughput=R,i.reason.latency=C,P.state=1,m(P)}}}return i},reset:function(){b(),p.off(l.A.PLAYBACK_SEEKING,g,t),p.off(l.A.MEDIA_FRAGMENT_LOADED,_,t),p.off(l.A.METRIC_ADDED,y,t),p.off(l.A.QUALITY_CHANGE_REQUESTED,A,t)}},h=(0,u.A)(d).getInstance().getLogger(t),b(),p.on(l.A.PLAYBACK_SEEKING,g,t),p.on(l.A.MEDIA_FRAGMENT_LOADED,_,t),p.on(l.A.METRIC_ADDED,y,t),p.on(l.A.QUALITY_CHANGE_REQUESTED,A,t),t}h.__dashjs_factory_name="L2ARule",t.A=a.A.getClassFactory(h)},9208:function(e,t,n){var i=n(7575),r=n(9378),a=n(9783);function o(){var e=this.context,t={getMaxIndex:function(t){for(var i=(t=t?t.getSwitchHistory():null)?t.getSwitchRequests():[],r=0,o=0,s=0,l=(0,a.A)(e).create(),u=0;u<i.length;u++)if(void 0!==i[u]&&(r+=i[u].drops,o+=i[u].noDrops,s+=i[u].dropSize,6<=r+o)&&.075<r/o){l.quality=0<u&&0<i[u].drops?u-1:u,l.reason={index:l.quality,drops:r,noDrops:o,dropSize:s},n.debug("Switch history rule index: "+l.quality+" samples: "+(r+o)+" drops: "+r);break}return l}},n=(0,r.A)(e).getInstance().getLogger(t);return t}o.__dashjs_factory_name="SwitchHistoryRule",t.A=i.A.getClassFactory(o)},5364:function(e,t,n){var i=n(7575),r=n(9783),a=n(4961),o=n(6992);function s(e){var t=this.context,n=(e=e||{}).dashMetrics;return{getMaxIndex:function(e){var i=(0,r.A)(t).create();if(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")){if(!n||!n.hasOwnProperty("getCurrentBufferState"))throw new Error(a.A.MISSING_CONFIG_ERROR);var s=e.getMediaInfo(),l=e.getMediaType(),u=n.getCurrentBufferState(l),c=e.getScheduleController(),h=e.getAbrController(),d=(f=e.getStreamInfo())?f.id:null,f=f&&f.manifestInfo?f.manifestInfo.isDynamic:null,p=(m=h.getThroughputHistory()).getSafeAverageThroughput(l,f),m=m.getAverageLatency(l);e=e.useBufferOccupancyABR(),isNaN(p)||!u||e||h.getAbandonmentStateFor(d,l)===o.A.ABANDON_LOAD||u.state!==o.A.BUFFER_LOADED&&!f||(i.quality=h.getQualityForBitrate(s,p,d,m),c.setTimeToLoadDelay(0),i.reason={throughput:p,latency:m})}return i},reset:function(){}}}s.__dashjs_factory_name="ThroughputRule",t.A=i.A.getClassFactory(s)},5535:function(e,t,n){var i=n(7575),r=n(9378);function a(){var e,t,n,i,a,o,s,l,u,c=this.context;function h(){i=1,a=100,o=0,l=s=n=null,u="dynamic_weight_selection"}function d(){var e=0;if(n)for(var t=0;t<n.length;t++){var i=n[t];i.state.throughput>e&&(e=i.state.throughput)}return e}function f(e,t,n){return e=e.map((function(e,i){return n[i]*Math.pow(e-t[i],2)})).reduce((function(e,t){return e+t})),(e<0?-1:1)*Math.sqrt(Math.abs(e))}function p(e,t,n){for(var i,r,a=0;a<t.length;a++){var o=t[a],s=f([o.state.throughput,o.state.latency,o.state.rebuffer,o.state.switch],[e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[1,1,1,1]);i=n,s=Math.exp(-1*Math.pow(s,2)/(2*Math.pow(.1,2))),r=[.01,.01,.01,.01],(o=o.state).throughput=o.throughput+(i[0]-o.throughput)*r[0]*s,o.latency=o.latency+(i[1]-o.latency)*r[1]*s,o.rebuffer=o.rebuffer+(i[2]-o.rebuffer)*r[2]*s,o.switch=o.switch+(i[3]-o.switch)*r[3]*s}}return e={getNextQuality:function(e,r,c,h,m,g,_){var y=c,v=h,A=r,E=function(){if(!n){n=[];var t=e.bitrateList,r=[];o=t[0].bandwidth,t.forEach((function(e){r.push(e.bandwidth),e.bandwidth<o&&(o=e.bandwidth)})),u=r.map((function(e){return Math.pow(e,2)})).reduce((function(e,t){return e+t})),i=Math.sqrt(u);for(var a=0;a<t.length;a++){var s={qualityIndex:a,bitrate:t[a].bandwidth,state:{throughput:t[a].bandwidth/i,latency:0,rebuffer:0,switch:0}};n.push(s)}l=function(e){var t=[],n=function(e){for(var t=[],n=0;n<e;n++){var i=[Math.random()*d(),Math.random(),Math.random(),Math.random()];t.push(i)}return t}(Math.pow(e.length,2));t.push(n[0]);for(var i=[1,1,1,1],r=1;r<e.length;r++){for(var a=null,o=null,s=0;s<n.length;s++){for(var l=n[s],u=null,c=0;c<t.length;c++){var h=f(l,t[c],i);(null===u||h<u)&&(u=h)}(null===o||o<u)&&(a=l,o=u)}t.push(a)}for(var p=null,m=null,g=0;g<t.length;g++){for(var _=0,y=0;y<t.length;y++)g!==y&&(_+=f(t[g],t[y],i));(null===p||p<_)&&(p=_,m=g)}var v=[];for(v.push(t[m]),t.splice(m,1);0<t.length;){for(var A=null,E=null,b=0;b<t.length;b++){var w=f(v[0],t[b],i);(null===A||w<A)&&(A=w,E=b)}v.push(t[E]),t.splice(E,1)}return v}(n)}var u;return n}(),b=r/i,w=(1<b&&(b=d()),c/=a,t.debug("getNextQuality called throughput:".concat(b," latency:").concat(c," bufferSize:").concat(h," currentQualityIndex:").concat(g," playbackRate:").concat(m)),h=E[g]).bitrate*_.getSegmentDuration()/A,T=Math.max(0,w-v);if(v-w<_.getMinBuffer())return t.debug("Buffer is low for bitrate= ".concat(h.bitrate," downloadTime=").concat(w," currentBuffer=").concat(v," rebuffer=").concat(T)),function(e,t){var i=0,r=e;if(n)for(var a=0;a<n.length;a++){var o=n[a];o.bitrate<e.bitrate&&o.bitrate>i&&t>o.bitrate&&(i=o.bitrate,r=o)}return r}(h,A).qualityIndex;switch(u){case"manual_weight_selection":s=[.4,.4,.4,.4];break;case"random_weight_selection":s=function(e){for(var t=[],n=Math.sqrt(2/e),i=0;i<4;i++)t.push(Math.random()*n);return s=t}(E.length);break;default:var S=_;s=s||l[l.length-1],null!==(S=S.findWeightVector(E,y,v,T,A,m))&&-1!==S&&(s=S)}for(var R=null,I=null,C=null,L=0;L<E.length;L++){var P=E[L],D=[(D=P.state).throughput,D.latency,D.rebuffer,D.switch],k=s.slice(),x=(M=_.getNextBufferWithBitrate(P.bitrate,v,A))<_.getMinBuffer(),M=(x&&t.debug("Buffer is low for bitrate=".concat(P.bitrate," downloadTime=").concat(w," currentBuffer=").concat(v," nextBuffer=").concat(M)),(P.bitrate>r-1e4||x)&&P.bitrate!==o&&(k[0]=100),f(D,[b,0,0,0],k));(null===R||M<R)&&(R=M,I=P.qualityIndex,C=P)}return p(h,E,[b,c,T,g=Math.abs(h.bitrate-C.bitrate)/i]),p(C,E,[b,0,0,g]),I},reset:function(){h()}},t=(0,r.A)(c).getInstance().getLogger(e),h(),e}a.__dashjs_factory_name="LearningAbrController",t.A=i.A.getClassFactory(a)},7881:function(e,t,n){var i=n(7575),r=n(5465);function a(){var e,t,n,i;function a(){i=n=t=e=null}function o(e,t,n,i){var a=new r.A;return a.type=e,a.weights.bitrateReward=t||1,a.weights.bitrateSwitchPenalty=1,a.weights.rebufferPenalty=n||1e3,a.weights.latencyPenalty=[],a.weights.latencyPenalty.push({threshold:1.1,penalty:.05*i}),a.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),a.weights.playbackSpeedPenalty=i||200,a}function s(e,t,n,i,r){r.bitrateWSum+=r.weights.bitrateReward*e,r.lastBitrate&&(r.bitrateSwitchWSum+=r.weights.bitrateSwitchPenalty*Math.abs(e-r.lastBitrate)),r.lastBitrate=e,r.rebufferWSum+=r.weights.rebufferPenalty*t;for(var a=0;a<r.weights.latencyPenalty.length;a++){var o=r.weights.latencyPenalty[a];if(n<=o.threshold){r.latencyWSum+=o.penalty*n;break}}r.playbackSpeedWSum+=r.weights.playbackSpeedPenalty*Math.abs(1-i),r.totalQoe=r.bitrateWSum-r.bitrateSwitchWSum-r.rebufferWSum-r.latencyWSum-r.playbackSpeedWSum}return a(),{setupPerSegmentQoe:function(r,a,s){e=o("segment",r,a,s),t=r,n=a,i=s},logSegmentMetrics:function(t,n,i,r){e&&s(t,n,i,r,e)},getPerSegmentQoe:function(){return e},calculateSingleUseQoe:function(e,r,a,l){var u=null;return(u=t&&n&&i?o("segment",t,n,i):u)?(s(e,r,a,l,u),u.totalQoe):0},reset:function(){a()}}}a.__dashjs_factory_name="LoLpQoeEvaluator",t.A=i.A.getClassFactory(a)},8967:function(e,t,n){var i=n(9378),r=n(7575),a=n(5535),o=n(7881),s=n(9783),l=n(6992),u=n(7512),c=n(4961);function h(e){var t=(e=e||{}).dashMetrics,n=this.context,r=(e={getMaxIndex:function(e){try{var i=(0,s.A)(n).create(),a=e.getMediaInfo().type,o=e.getAbrController(),f=e.getStreamInfo(),p=o.getQualityFor(a,f.id),m=e.getMediaInfo(),g=t.getCurrentBufferState(a),_=e.getScheduleController(),y=t.getCurrentBufferLevel(a,!0),v=f&&f.manifestInfo?f.manifestInfo.isDynamic:null,A=_.getPlaybackController(),E=A.getCurrentLiveLatency();if(e.useLoLPABR()&&a!==c.A.AUDIO){E=E||0;var b=A.getPlaybackRate(),w=o.getThroughputHistory().getSafeAverageThroughput(a,v);if(r.debug("Throughput ".concat(Math.round(w)," kbps")),!isNaN(w)&&g&&o.getAbandonmentStateFor(f.id,a)!==l.A.ABANDON_LOAD){for(var T=m.bitrateList,S=e.getRepresentationInfo().fragmentDuration,R=T[0].bandwidth/1e3,I=T[T.length-1].bandwidth/1e3,C=0;C<T.length;C++){var L=T[C].bandwidth/1e3;I<L?I=L:L<R&&(R=L)}var P=T[p].bandwidth/1e3,D=t.getCurrentHttpRequest(a,!0),k=(D.tresponse.getTime()-D.trequest.getTime())/1e3,x=S<k?k-S:0,M=(d.setupPerSegmentQoe(S,I,R),d.logSegmentMetrics(P,x,E,b),(0,u.A)(n).create({targetLatency:1.5,bufferMin:.3,segmentDuration:S,qoeEvaluator:d}));i.quality=h.getNextQuality(m,1e3*w,E,y,b,p,M),i.reason={throughput:w,latency:E},i.priority=s.A.PRIORITY.STRONG,_.setTimeToLoadDelay(0),i.quality!==p&&r.debug("[TgcLearningRule]["+a+"] requesting switch to index: ",i.quality,"Average throughput",Math.round(w),"kbps")}}return i}catch(e){throw e}},reset:function(){h.reset(),d.reset()}},(0,i.A)(n).getInstance().getLogger(e)),h=(0,a.A)(n).create(),d=(0,o.A)(n).create();return e}h.__dashjs_factory_name="LoLPRule",t.A=r.A.getClassFactory(h)},7512:function(e,t,n){function i(e){var t,n,i,r=e.targetLatency,a=e.bufferMin,o=e.segmentDuration,s=e.qoeEvaluator;function l(e,t){return o<t?e-o:e+o-t}return e={getMinBuffer:function(){return a},getSegmentDuration:function(){return o},getNextBufferWithBitrate:function(e,t,n){return l(t,e*o/n)},getNextBuffer:l,findWeightVector:function(e,i,u,c,h,d){var f=null,p=null,m=null,g=Math.abs(i-n);return e.forEach((function(e){t.forEach((function(t){t[0];var n=t[1],c=t[2],_=(t[3],e.bitrate*o/h),y=l(u,_);c=(0===c?10:1/c)*Math.max(1e-5,_-y),_=(0===n?10:1/n)*e.state.latency,n=s.calculateSingleUseQoe(e.bitrate,c,_,d),(null===f||f<n)&&!(r+g<i)&&a<=y&&(f=n,p=t,m=e.bitrate)}))})),n=i,p=null===p&&null===m?-1:p}},t=function e(t,n,r){if(r===n)return t;for(var a=t.length,o=0;o<a;o++)for(var s=t.shift(),l=0;l<i.length;l++)t.push(s.concat(i[l]));return e(t,n,r+1)}((i=[.2,.4,.6,.8,1]).map((function(e){return[e]})),4,1),n=0,e}n=n(7575),i.__dashjs_factory_name="LoLpWeightSelector",t.A=n.A.getClassFactory(i)},5465:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}}r=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0},a&&i(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1});var r,a=r;t.A=a},9025:function(e,t,n){n.d(t,{_:function(){return f}});var i=n(4961),r=n(1333),a=n(7575),o=n(2705),s=n(1372),l=n(271),u=n(8098),c=n(3047),h=n(9662),d=n(6544),f=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function p(e){var t,n,a,p,m,g,_,y,v=this.context,A=e.adapter,E=e.baseURLController,b=e.streamInfo,w=e.timelineConverter,T=e.debug,S=e.eventBus,R=e.events,I=e.dashConstants,C=(0,s.A)(v).getInstance();function L(e,t){var i,r=new o.A;r.id=e.id,r.bitrate=e.bandwidth,r.width=e.width,r.height=e.height,r.tilesHor=1,r.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach((function(e){0<=f.indexOf(e.schemeIdUri)&&e.value&&(2!==(e=e.value.split("x")).length||isNaN(e[0])||isNaN(e[1])||(r.tilesHor=parseInt(e[0],10),r.tilesVert=parseInt(e[1],10)))})),t?g.updateSegmentData(e).then((function(t){var n,i,a;n=r,a=[],t=function(e,t){for(var n,i=[],r=0,a=0,o=e.segments.length;a<o;a++)n=e.segments[a],(n=(0,l.W$)(w,A.getIsDynamic(),t,n.startTime,n.duration,n.timescale,n.media,n.mediaRange,r))&&(i.push(n),r++);return i}(t,i=e),i.segments=t,n.segmentDuration=i.segments[0].duration,n.readThumbnail=function(e,t){var n=null;a.some((function(t){if(t.start<=e&&t.end>e)return n=t.url,!0})),n?t(n):i.segments.some((function(n){var r;if(n.mediaStartTime<=e&&n.mediaStartTime+n.duration>e)return r=E.resolve(i.path),_.load({method:"get",url:r.url,request:{range:n.mediaRange,responseType:"arraybuffer"},onload:function(e){var i=y.getSamplesInfo(e.target.response);e=new Blob([e.target.response.slice(i.sampleList[0].offset,i.sampleList[0].offset+i.sampleList[0].size)],{type:"image/jpeg"}),i=window.URL.createObjectURL(e),a.push({start:n.mediaStartTime,end:n.mediaStartTime+n.duration,url:i}),t&&t(i)}}),!0}))}})):(r.startNumber=e.startNumber,r.segmentDuration=e.segmentDuration,r.timescale=e.timescale,r.templateUrl=(t=e,(i=C.isRelative(t.media)?C.resolve(t.media,E.resolve(t.path).url):t.media)?(0,l.dD)(i,t.id):"")),0<r.tilesHor&&0<r.tilesVert&&(r.widthPerTile=r.width/r.tilesHor,r.heightPerTile=r.height/r.tilesVert,n.push(r))}function P(){n=[],p=-1,m=null}return t={getTracks:function(){return n},addTracks:function(){var e;b&&A&&(m=A.getMediaInfoForType(b,i.A.IMAGE))&&((e=A.getVoRepresentations(m))&&0<e.length&&e.forEach((function(e){(e.segmentInfoType===r.A.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===r.A.SEGMENT_TIMELINE)&&L(e),e.segmentInfoType===r.A.SEGMENT_BASE&&L(e,!0)})),0<n.length)&&n.sort((function(e,t){return e.bitrate-t.bitrate}))},reset:P,setTrackByIndex:function(e){n&&0!==n.length&&(e>=n.length&&(e=n.length-1),p=e)},getCurrentTrack:function(){return p<0?null:n[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(e){for(var t,i=A.getVoRepresentations(m),r=0;r<i.length;r++)if(n[p].id===i[r].id){t=i[r];break}return a.getSegmentRequestForTime(m,t,e)}},P(),_=(0,c.A)(v).create({}),y=(0,u.A)(v).getInstance(),g=(0,d.A)(v).create({events:R,eventBus:S,streamInfo:b,timelineConverter:w,dashConstants:I,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:i.A.IMAGE}),(a=(0,h.A)(v).create({streamInfo:b,type:i.A.IMAGE,timelineConverter:w,segmentsController:g,baseURLController:E,debug:T,eventBus:S,events:R,dashConstants:I,urlUtils:C})).initialize(!!A&&A.getIsDynamic()),t}p.__dashjs_factory_name="ThumbnailTracks",t.A=a.A.getClassFactory(p)},8098:function(e,t,n){var i=n(9378),r=n(6579),a=n(7575),o=n(5521),s=n(2556);function l(){var e,t,n=this.context;function a(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0),e=o.parseBuffer(e);var t=(0,r.A)(n).create();return t.setData(e),t}function l(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function u(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={parse:a,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new s.A(0,!1);for(var i,r=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<r.byteLength;){var o=l(r,n),c=u(r,n+4);if(0===o)break;n+o<=r.byteLength&&(0<=e.indexOf(c)?i=new s.A(n,!0,o):a=n+o),n+=o}return i||new s.A(a,!1)},getMediaTimescaleFromMoov:function(e){return(e=(e=a(e))?e.getBox("mdhd"):void 0)?e.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};for(var t,n,i,r=(e=a(e)).getBoxes("moof"),o=e.getBoxes("mfhd"),s=(e=e.getBoxes("moof").length,o=o[o.length-1].sequence_number,[]),l=-1,u=-1,c=0;c<r.length;c++)for(var h=r[c],d=h.getChildBoxes("traf"),f=0;f<d.length;f++){for(var p=d[f],m=p.getChildBox("tfhd"),g=p.getChildBox("tfdt"),_=g.baseMediaDecodeTime,y=p.getChildBoxes("trun"),v=p.getChildBoxes("subs"),A=0;A<y.length;A++)for(var E=y[A],b=E.sample_count,w=(m.base_data_offset||0)+(E.data_offset||0),T=0;T<b;T++){var S=void 0!==(t=E.samples[T]).sample_duration?t.sample_duration:m.default_sample_duration,R=void 0!==t.sample_size?t.sample_size:m.default_sample_size,I={dts:_,cts:_+(void 0!==t.sample_composition_time_offset?t.sample_composition_time_offset:0),duration:S,offset:h.offset+w,size:R,subSizes:[R]};if(v)for(n=0;n<v.length;n++){var C=v[n];if(l<C.entry_count-1&&u<T&&(l++,u+=C.entries[l].sample_delta),T==u){I.subSizes=[];for(var L=C.entries[l],P=0;P<L.subsample_count;P++)I.subSizes.push(L.subsamples[P].subsample_size)}}s.push(I),w+=R,_+=S}i=_-g.baseMediaDecodeTime}return{sampleList:s,lastSequenceNumber:o,totalDuration:i,numSequences:e}},findInitRange:function(t){var n,i=null;return(t=a(t))&&(n=t.getBox("ftyp"),t=t.getBox("moov"),e.debug("Searching for initialization."),t)&&t.isComplete&&(i=(n||t).offset+"-"+(t.offset+t.size-1),e.debug("Found the initialization.  Range: "+i)),i},parsePayload:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new s.A(0,!1);for(var i,r=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<r.byteLength;){var o=l(r,n),c=u(r,n+4);if(0===o)break;n+o<=r.byteLength&&(0<=e.indexOf(c)?i=new s.A(n,!0,o,c):a=n+o),n+=o}return i||new s.A(a,!1)}},e=(0,i.A)(n).getInstance().getLogger(t),t}l.__dashjs_factory_name="BoxParser",t.A=a.A.getSingletonFactory(l)},7928:function(e,t,n){n.d(t,{a:function(){return s}});var i=n(7575),r=n(9025),a=n(4961),o=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function s(){var e="ManagedMediaSource"in window,t="WebKitMediaSource"in window,n="MediaSource"in window;return e||t||n}function l(){var e,t=!1;return{setConfig:function(t){t&&t.settings&&(e=t.settings)},supportsMediaSource:s,supportsEncryptedMedia:function(){return t},supportsCodec:function(t,n){return n!==a.A.AUDIO&&n!==a.A.VIDEO?Promise.resolve(!0):(s=t,l=n,e.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(s.codec&&l===a.A.AUDIO||l===a.A.VIDEO&&s.codec&&s.width&&s.height&&s.bitrate&&s.framerate)?(r=t,o=n,new Promise((function(e){var t;r&&r.codec?((t={type:"media-source"})[o]={},t[o].contentType=r.codec,t[o].width=r.width,t[o].height=r.height,t[o].bitrate=parseInt(r.bitrate),t[o].framerate=parseFloat(r.framerate),navigator.mediaCapabilities.decodingInfo(t).then((function(t){e(t.supported)})).catch((function(){e(!1)}))):e(!1)}))):(i=t,new Promise((function(e){var t;i&&i.codec&&(t=i.codec,i.width&&i.height&&(t+=';width="'+i.width+'";height="'+i.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(t)||"MediaSource"in window&&MediaSource.isTypeSupported(t)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(t))?e(!0):e(!1)}))));var i,r,o,s,l},setEncryptedMediaSupported:function(e){t=e},supportsEssentialProperty:function(e){try{return-1!==r._.indexOf(e.schemeIdUri)||a.A.FONT_DOWNLOAD_DVB_SCHEME===e.schemeIdUri}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var n,i=e.split(".")[0],r=(e=0===t.indexOf(i),0);r<o.length;r++)if(o[r].codec===i){n=o[r];break}return n?e||n.compatibleCodecs.some((function(e){return 0===t.indexOf(e)})):e}}}l.__dashjs_factory_name="Capabilities",t.A=i.A.getSingletonFactory(l)},5994:function(e,t,n){var i=n(7575),r=n(5533);function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){for(var n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],i=this.customTimeRangeArray[t];return n.start<=i.start&&i.start<=n.end&&n.end<=i.end?(n.end=i.end,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&i.end<=n.end?(n.start=i.start,this.customTimeRangeArray.splice(t,1),!0):i.start<=n.start&&n.start<=i.end&&n.end<=i.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=i.start&&i.start<=n.end&&i.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,r.zQ)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,r.zQ)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",t.A=i.A.getClassFactory(a)},1219:function(e,t,n){function i(){var e,t=/^[a-z][a-z0-9+\-_.]*:/i,n=/^https?:\/\//i,i=/^https:\/\//i,r=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function a(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(e=-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):e).substring(0,n+1):""}function o(e){return(e=e.match(r))?e[1]:""}function s(e){return(e=e.match(t))?e[0]:""}function l(e){return!t.test(e)}function u(e){return l(e)&&"/"===e.charAt(0)}function c(e){return 0===e.indexOf("//")}try{new window.URL("x","http://y"),e=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}}}catch(e){}finally{e=e||function(e,t){var n=a;return t&&l(e)?(u(e)&&(n=o),t="/"!==(n=(n=c(e)?s:n)(t)).charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"",[n,e].join(t)):e}}return{parseBaseUrl:a,parseOrigin:o,parseScheme:s,isRelative:l,isPathAbsolute:u,isSchemeRelative:c,isHTTPURL:function(e){return n.test(e)},isHTTPS:function(e){return i.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(t,n){return e(t,n)}}}n=n(7575),i.__dashjs_factory_name="DefaultURLUtils",t.A=n.A.getSingletonFactory(i)},6579:function(e,t,n){var i=n(8424);function r(){var e;function t(t){var i=[];if(t&&e&&"function"==typeof e.fetchAll)for(var r,a=e.fetchAll(t),o=0,s=a.length;o<s;o++)(r=n(a[o]))&&i.push(r);return i}function n(e){var t;return e?(t=new i.A(e),e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t):null}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?n(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){var n;return e&&e.boxes&&e.boxes.length&&0<(n=t(e.boxes[e.boxes.length-1].type)).length?n[n.length-1]:null}}}n=n(7575),r.__dashjs_factory_name="IsoFile",t.A=n.A.getClassFactory(r)},7464:function(e,t,n){function i(e,t){var n={url:e.url,method:e.method,headers:Object.assign({},e.headers),credentials:e.withCredentials?"include":void 0,range:e.request.range};return Promise.resolve(t.modifyRequest(n)).then((function(){return Object.assign(e,n,{withCredentials:"include"===n.credentials})}))}function r(){return{modifyRequest:null,modifyRequestURL:function(e){return e},modifyRequestHeader:function(e,t){return t.url,e}}}n.d(t,{W:function(){return i}}),n=n(7575),r.__dashjs_factory_name="RequestModifier",t.A=n.A.getSingletonFactory(r)},5533:function(e,t,n){n.d(t,{sq:function(){return a},zQ:function(){return o}});var i=n(4961);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(r(e)!==t)throw i.A.BAD_ARGUMENT_ERROR}function o(e){if(null===e||isNaN(e)||e%1!=0)throw i.A.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},1372:function(e,t,n){var i=n(7575),r=n(1219);function a(){var e,t=[],n=this.context;function i(n,i,r){var a=function(n){for(var i=0;i<t.length;i++)if(t[i].regex.test(n))return t[i].utils;return e}(r||i);return(a&&"function"==typeof a[n]?a:e)[n](i,r)}return e=(0,r.A)(n).getInstance(),{registerUrlRegex:function(e,n){t.push({regex:e,utils:n})},parseBaseUrl:function(e){return i("parseBaseUrl",e)},parseOrigin:function(e){return i("parseOrigin",e)},parseScheme:function(e){return i("parseScheme",e)},isRelative:function(e){return i("isRelative",e)},isPathAbsolute:function(e){return i("isPathAbsolute",e)},isSchemeRelative:function(e){return i("isSchemeRelative",e)},isHTTPURL:function(e){return i("isHTTPURL",e)},isHTTPS:function(e){return i("isHTTPS",e)},removeHostname:function(e){return i("removeHostname",e)},resolve:function(e,t){return i("resolve",e,t)}}}a.__dashjs_factory_name="URLUtils",n=i.A.getSingletonFactory(a),t.A=n},3339:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}}r=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.code=t||null,this.message=n||null,this.data=i||null},a&&i(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1});var r,a=r;t.A=a},8669:function(e,t,n){var i=n(4779);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.action=a.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}(function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=r(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==r(e)?e:String(e)}(i.key),i)}})((n=a).prototype,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===i.G.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?i.G.INIT_SEGMENT_TYPE:i.G.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}]),Object.defineProperty(n,"prototype",{writable:!1}),(n=a).ACTION_DOWNLOAD="download",n.ACTION_COMPLETE="complete",t.A=n},8424:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");if(this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new r(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var n=0;n<e.references.length;n++){var i={reference_type:e.references[n].reference_type,referenced_size:e.references[n].referenced_size,subsegment_duration:e.references[n].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var a=0,o=e.samples.length;a<o;a++){var s={sample_size:e.samples[a].sample_size,sample_duration:e.samples[a].sample_duration,sample_composition_time_offset:e.samples[a].sample_composition_time_offset};this.samples.push(s)}}break;case"prft":this.version=e.version,this.reference_track_ID=e.reference_track_ID,this.ntp_timestamp_sec=e.ntp_timestamp_sec,this.ntp_timestamp_frac=e.ntp_timestamp_frac,this.media_time=e.media_time,this.flags=e.flags}}(function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}})((i=r).prototype,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),Object.defineProperty(i,"prototype",{writable:!1}),t.A=r},2556:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}}r=function e(t,n,i){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.lastCompletedOffset=t,this.found=n,this.size=i},a&&i(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1});var r,a=r;t.A=a},2705:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=n(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==n(e)?e:String(e)}(r.key),r)}}r=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},a&&i(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1});var r,a=r;t.A=a},4779:function(e,t,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){return e=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=i(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==i(e)?e:String(e)}(r.key),r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{G:function(){return s},N:function(){return l}});var s=a((function e(){o(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null})),l=a((function e(){o(this,e),this.s=null,this.d=null,this.b=[]}));s.GET="GET",s.HEAD="HEAD",s.MPD_TYPE="MPD",s.XLINK_EXPANSION_TYPE="XLinkExpansion",s.INIT_SEGMENT_TYPE="InitializationSegment",s.INDEX_SEGMENT_TYPE="IndexSegment",s.MEDIA_SEGMENT_TYPE="MediaSegment",s.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",s.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",s.DVB_REPORTING_TYPE="DVBReporting",s.LICENSE="license",s.CONTENT_STEERING_TYPE="ContentSteering",s.OTHER_TYPE="other"},1477:function(e,t){t.byteLength=function(e){return 3*((e=s(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){for(var t,n=(a=s(e))[0],a=a[1],o=new r(3*(n+a)/4-a),l=0,u=0<a?n-4:n,c=0;c<u;c+=4)t=i[e.charCodeAt(c)]<<18|i[e.charCodeAt(c+1)]<<12|i[e.charCodeAt(c+2)]<<6|i[e.charCodeAt(c+3)],o[l++]=t>>16&255,o[l++]=t>>8&255,o[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(c)]<<2|i[e.charCodeAt(c+1)]>>4,o[l++]=255&t),1===a&&(t=i[e.charCodeAt(c)]<<10|i[e.charCodeAt(c+1)]<<4|i[e.charCodeAt(c+2)]>>2,o[l++]=t>>8&255,o[l++]=255&t),o},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,a=[],o=0,s=i-r;o<s;o+=16383)a.push(function(e,t,i){for(var r,a=[],o=t;o<i;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(n[r>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return a.join("")}(e,o,s<o+16383?s:o+16383));return 1==r?(t=e[i-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2==r&&(t=(e[i-2]<<8)+e[i-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=a[o],i[a.charCodeAt(o)]=o;function s(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},5384:function(e,t){function n(e,t){return function(n,r){for(var a,o,s,l=i(n,"tag"),u=i(null==r?"*":r,"range"),c=[],h=-1;++h<u.length;)if(a=u[h].toLowerCase(),t||"*"!==a){for(o=-1,s=[];++o<l.length;)if(e(l[o].toLowerCase(),a)){if(!t)return l[o];c.push(l[o])}else s.push(l[o]);l=s}return t?c:void 0}}function i(e,t){if((e=e&&"string"==typeof e?[e]:e)&&"object"==typeof e&&"length"in e)return e;throw new Error("Invalid "+t+" `"+e+"`, expected non-empty string")}t.basicFilter=n((function(e,t){return"*"===t||e===t||-1<e.indexOf(t+"-")}),!0),t.extendedFilter=n((function(e,t){var n=e.split("-"),i=t.split("-"),r=0,a=0;if("*"===i[a]||n[r]===i[a]){for(r++,a++;a<i.length;)if("*"!==i[a]){if(!n[r])return;if(n[r]!==i[a]){if(1===n[r].length)return;r++}else r++,a++}else a++;return 1}}),!0),t.lookup=n((function(e,t){for(var n,i=t;;){if("*"===i||e===i)return 1;if((n=i.lastIndexOf("-"))<0)return;"-"===i.charAt(n-2)&&(n-=2),i=i.slice(0,n)}}))},8649:function(e,t,n){e.exports=n(9713)},9713:function(e,t,n){var i=n(4505),r=n(5384),a=n(8850),o=n(2940),s=n(6535),l=n(7281),u=(e.exports=function(e,t){var n,c=t||{},g=i.parse(String(e||"").toLowerCase(),c),_=i.stringify(g),y=-1;if(!_)return _;for(;++y<a.length;)r.extendedFilter(_,a[y].from).length&&(d(g,a[y].from,a[y].to),_=i.stringify(g));for(y=-1;++y<o.length;)f(g,o[y].from.field,o[y].from.value)&&p(g,o[y].to.field,o[y].to.value);for(_=i.stringify(Object.assign({},g,h)),y=-1;++y<s.length;)_===s[y]&&(d(g,s[y],s[y].split("-").slice(0,-1).join("-")),_=i.stringify(Object.assign({},g,h)));if(g.extensions.sort(m),c.warning)for(n in l)u.call(l[n],g[n])&&c.warning("Deprecated "+n+" `"+g[n]+"`, expected one of `"+l[n][g[n]].join("`, `")+"`",null,7);return g.script&&(g.script=g.script.charAt(0).toUpperCase()+g.script.slice(1)),g.region&&(g.region=g.region.toUpperCase()),i.stringify(g)},{}.hasOwnProperty),c=new Intl.Collator,h={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function d(e,t,n){var r,a=i.parse(t),o=i.parse(n),s=[];for(r in a)a[r]&&a[r].length&&f(e,r,a[r])&&s.push(r);for(r in o)o[r]&&o[r].length&&(-1<s.indexOf(r)||!e[r]||!e[r].length)&&p(e,r,o[r])}function f(e,t,n){var i,r,a,o,s=!1;if(n){if(r=i=e[t],i&&"object"==typeof i)for(r=[],a=-1;++a<i.length;)o=i[a],n.indexOf(o)<0?r.push(o):s=!0;else i===n&&(s=!(r=null));e[t]=r}return s}function p(e,t,n){var i,r,a,o=e[t];if(o&&"object"==typeof o)for(i=[].concat(n),r=-1;++r<i.length;)a=i[r],o.indexOf(a)<0&&o.push(a);else e[t]=n}function m(e,t){return c.compare(e.singleton,t.singleton)}},4505:function(e,t,n){t.parse=n(1766),t.stringify=n(1656)},1766:function(e,t,n){var i=n(661),r=n(1577),a=n(4781),o=n(7031),s=n(900),l=(e.exports=function e(t,n){var u,c,h,d=n||{},f={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},p=String(t),m=p.toLowerCase(),g=0;if(null==t)throw new Error("Expected string, got `"+t+"`");if(l.call(s,m))return(null==d.normalize||d.normalize)&&s[m]?e(s[m]):(f[-1===o.indexOf(m)?"irregular":"regular"]=p,f);for(;r(m.charCodeAt(g))&&g<9;)g++;if(1<g&&g<9){if(f.language=p.slice(0,g),g<4)for(c=0;45===m.charCodeAt(g)&&r(m.charCodeAt(g+1))&&r(m.charCodeAt(g+2))&&r(m.charCodeAt(g+3))&&!r(m.charCodeAt(g+4));){if(2<c)return _(g,3,"Too many extended language subtags, expected at most 3 subtags");f.extendedLanguageSubtags.push(p.slice(g+1,g+4)),g+=4,c++}for(45===m.charCodeAt(g)&&r(m.charCodeAt(g+1))&&r(m.charCodeAt(g+2))&&r(m.charCodeAt(g+3))&&r(m.charCodeAt(g+4))&&!r(m.charCodeAt(g+5))&&(f.script=p.slice(g+1,g+5),g+=5),45===m.charCodeAt(g)&&(r(m.charCodeAt(g+1))&&r(m.charCodeAt(g+2))&&!r(m.charCodeAt(g+3))?(f.region=p.slice(g+1,g+3),g+=3):a(m.charCodeAt(g+1))&&a(m.charCodeAt(g+2))&&a(m.charCodeAt(g+3))&&!a(m.charCodeAt(g+4))&&(f.region=p.slice(g+1,g+4),g+=4));45===m.charCodeAt(g);){for(h=u=g+1;i(m.charCodeAt(h));){if(7<h-u)return _(h,1,"Too long variant, expected at most 8 characters");h++}if(!(4<h-u||3<h-u&&a(m.charCodeAt(u))))break;f.variants.push(p.slice(u,h)),g=h}for(;45===m.charCodeAt(g)&&120!==m.charCodeAt(g+1)&&i(m.charCodeAt(g+1))&&45===m.charCodeAt(g+2)&&i(m.charCodeAt(g+3));){for(h=g+2,c=0;45===m.charCodeAt(h)&&i(m.charCodeAt(h+1))&&i(m.charCodeAt(h+2));)for(h=(u=h+1)+2,c++;i(m.charCodeAt(h));){if(7<h-u)return _(h,2,"Too long extension, expected at most 8 characters");h++}if(!c)return _(h,4,"Empty extension, extensions must have at least 2 characters of content");f.extensions.push({singleton:p.charAt(g+1),extensions:p.slice(g+3,h).split("-")}),g=h}}else g=0;if(0===g&&120===m.charCodeAt(g)||45===m.charCodeAt(g)&&120===m.charCodeAt(g+1))for(h=g=g?g+2:1;45===m.charCodeAt(h)&&i(m.charCodeAt(h+1));){for(h=u=g+1;i(m.charCodeAt(h));){if(7<h-u)return _(h,5,"Too long private-use area, expected at most 8 characters");h++}f.privateuse.push(p.slice(g+1,h)),g=h}return g!==p.length?_(g,6,"Found superfluous content after tag"):f;function _(e,t,n){return d.warning&&d.warning(n,t,e),d.forgiving?f:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}},{}.hasOwnProperty)},1656:function(e){e.exports=function(e){var t,n,i,r=[];if((e=e||{}).irregular||e.regular)return e.irregular||e.regular;if(e.language)for(r=r.concat(e.language,e.extendedLanguageSubtags||[],e.script||[],e.region||[],e.variants||[]),t=e.extensions||[],n=-1;++n<t.length;)(i=t[n]).singleton&&i.extensions&&i.extensions.length&&(r=r.concat(i.singleton,i.extensions));return(r=e.privateuse&&e.privateuse.length?r.concat("x",e.privateuse):r).join("-")}},5059:function(e,t,n){var i=n(1477),r=n(736),a=(n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,t.Buffer=s,t.SlowBuffer=function(e){return s.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,2147483647);function o(e){if(a<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');return e=new Uint8Array(e),Object.setPrototypeOf(e,s.prototype),e}function s(e,t,n){if("number"!=typeof e)return l(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}function l(e,t,n){if("string"==typeof e){var i=e,r=t;if(s.isEncoding(r="string"==typeof r&&""!==r?r:"utf8"))return(i=(l=o(a=0|p(i,r))).write(i,r))!==a?l.slice(0,i):l;throw new TypeError("Unknown encoding: "+r)}if(ArrayBuffer.isView(e))return P(a=e,Uint8Array)?d((i=new Uint8Array(a)).buffer,i.byteOffset,i.byteLength):h(a);var a;if(null!=e){if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(P(e,SharedArrayBuffer)||e&&P(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var l=e.valueOf&&e.valueOf();if(null!=l&&l!==e)return s.from(l,t,n);var u,c=s.isBuffer(r=e)?(0!==(u=o(c=0|f(r.length))).length&&r.copy(u,0,0,c),u):void 0!==r.length?"number"!=typeof r.length||D(r.length)?o(0):h(r):"Buffer"===r.type&&Array.isArray(r.data)?h(r.data):void 0;if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|f(e))}function h(e){for(var t=e.length<0?0:0|f(e.length),n=o(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');return e=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(e,s.prototype),e}function f(e){if(a<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return C(e).length;default:if(r)return i?-1:I(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r,a=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=t,s=n,l=this.length;(!s||s<0||l<s)&&(s=l);for(var u="",c=o=!o||o<0?0:o;c<s;++c)u+=k[this[c]];return u;case"utf8":case"utf-8":return v(this,t,n);case"ascii":l=t;var h=n,d="";h=Math.min(this.length,h);for(var f=l;f<h;++f)d+=String.fromCharCode(127&this[f]);return d;case"latin1":case"binary":o=t;var p=n,m="";p=Math.min(this.length,p);for(var g=o;g<p;++g)m+=String.fromCharCode(this[g]);return m;case"base64":return _=this,r=n,0===(y=t)&&r===_.length?i.fromByteArray(_):i.fromByteArray(_.slice(y,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var _=t,y=n,A=this.slice(_,y),E="",b=0;b<A.length-1;b+=2)E+=String.fromCharCode(A[b]+256*A[b+1]);return E;default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function _(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=D(n=+n)?r?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:y(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(r?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):y(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,i,r){var a=1,o=e.length,s=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r)for(var u=-1,c=n;c<o;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*a}else-1!==u&&(c-=c-u),u=-1;else for(c=n=o<n+s?o-s:n;0<=c;c--){for(var h=!0,d=0;d<s;d++)if(l(e,c+d)!==l(t,d)){h=!1;break}if(h)return c}return-1}function v(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,l,u=e[r],c=null,h=239<u?4:223<u?3:191<u?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[r+1]))&&127<(l=(31&u)<<6|63&a)&&(c=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(i.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}var d=i,f=d.length;if(f<=A)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=A));return p}t.kMaxLength=a,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=l,Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return u(e),e<=0||void 0===t?o(e):"string"==typeof n?o(e).fill(t,n):o(e).fill(t)},s.allocUnsafe=c,s.allocUnsafeSlow=c,s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(P(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;for(var n=s.allocUnsafe(t),i=0,r=0;r<e.length;++r){var a=e[r];if(P(a,Uint8Array))i+a.length>n.length?s.from(a).copy(n,i):Uint8Array.prototype.set.call(n,a,i);else{if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i)}i+=a.length}return n},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):m.apply(this,arguments)},s.prototype.equals=function(e){if(s.isBuffer(e))return this===e||0===s.compare(this,e);throw new TypeError("Argument must be a Buffer")},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(e,t,n,i,r){if(P(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),(t=void 0===t?0:t)<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=t)return 0;if(r<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),l=Math.min(a,o),u=this.slice(i,r),c=e.slice(t,n),h=0;h<l;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},s.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||r<n)&&(n=r),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var a,o,s,l,u,c=!1;;)switch(i){case"hex":var h=e,d=t,f=n,p=(d=Number(d)||0,this.length-d);(!f||(f=Number(f))>p)&&(f=p),(p=h.length)/2<f&&(f=p/2);for(var m=0;m<f;++m){var g=parseInt(h.substr(2*m,2),16);if(D(g))return m;this[d+m]=g}return m;case"utf8":case"utf-8":return p=t,u=n,L(I(e,(l=this).length-p),l,p,u);case"ascii":case"latin1":case"binary":return l=this,u=t,s=n,L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),l,u,s);case"base64":return s=this,a=t,o=n,L(C(e),s,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,o=n,L(function(e,t){for(var n,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,r.push(n%256),r.push(i);return r}(e,this.length-a),this,a,o);default:if(c)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),c=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function b(e,t,n,i,r,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function w(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,i,a){return t=+t,n>>>=0,a||w(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function S(e,t,n,i,a){return t=+t,n>>>=0,a||w(e,0,n,8),r.write(e,t,n,i,52,8),n+8}s.prototype.slice=function(e,t){var n=this.length;return(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),n=this.subarray(e,t),Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var i=t,r=1,a=this[e+--i];0<i&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},s.prototype.readInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),r.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),r.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),r.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),r.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||b(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||b(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=e/a&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,i){e=+e,t>>>=0,i||b(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=0,a=1,o=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/a|0)-o&255;return t+n},s.prototype.writeIntBE=function(e,t,n,i){e=+e,t>>>=0,i||b(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=n-1,a=1,o=0;for(this[t+r]=255&e;0<=--r&&(a*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/a|0)-o&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return S(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return S(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,i){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),(i=0<i&&i<n?n:i)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var r=(i=e.length-t<i-n?e.length-t+n:i)-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},s.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var r;1===e.length&&(r=e.charCodeAt(0),"utf8"===i&&r<128||"latin1"===i)&&(e=r)}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");var a;if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:s.from(e,i),l=o.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%l]}return this};var R=/[^+/0-9A-Za-z-_]/g;function I(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===i){-1<(t-=3)&&a.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function C(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}var k=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var i=16*n,r=0;r<16;++r)t[i+r]=e[n]+e[r];return t}()},5521:function(e,t){var n={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(r.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,n){return e=r.create(e),t&&t.append(e,n),e},createFullBox:function(e,t,i){return(e=n.createBox(e,t,i)).version=0,e.flags=0,e},Utils:{}},i=(n.Utils.dataViewToString=function(e,t){if(t=t||"utf-8","undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);var n=[],i=0;if("utf-8"===t)for(;i<e.byteLength;){var r=e.getUint8(i++);r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e.getUint8(i++))<<12),r|=(63&e.getUint8(i++))<<6),r|=63&e.getUint8(i++)),n.push(String.fromCharCode(r))}else for(;i<e.byteLength;)n.push(String.fromCharCode(e.getUint8(i++)));return n.join("")},n.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var i=e.charCodeAt(n);i<128?t.push(i):(i<2048?t.push(192|i>>6):(i<65536?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|63&i>>12)),t.push(128|63&i>>6)),t.push(128|63&i))}return t},n.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var i,r=-1;if("number"==typeof n)r=n;else{if("string"==typeof n)i=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);i=n.type}for(var a=0;a<e.boxes.length;a++)if(i===e.boxes[a].type){r=a+1;break}}e.boxes.splice(r,0,t)}else e.boxes.push(t)},t.parseBuffer=n.parseBuffer,t.addBoxProcessor=n.addBoxProcessor,t.createFile=n.createFile,t.createBox=n.createBox,t.createFullBox=n.createFullBox,t.Utils=n.Utils,n.Cursor=function(e){this.offset=void 0===e?0:e},function(e){this._cursor=new n.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))}),r=(i.prototype.fetch=function(e){return(e=this.fetchAll(e,!0)).length?e[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=r.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},i.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)},function(){this._cursor=new n.Cursor});r.parse=function(e){var t=new r;return t._offset=e._cursor.offset,t._root=e._root||e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},r.create=function(e){var t=new r;return t.type=e,t.boxes=[],t},r.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],r.prototype._boxProcessors={},r.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},r.prototype._procFieldArray=function(e,t,n,i){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e][r]=this._readField(n,i);else for(r=0;r<this[e].length;r++)this._writeField(n,i,this[e][r])},r.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},r.prototype._procEntries=function(e,t,n){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e].push({}),n.call(this,this[e][i]);else for(i=0;i<t;i++)n.call(this,this[e][i])},r.prototype._procSubEntries=function(e,t,n,i){var r;if(this._parsing)for(e[t]=[],r=0;r<n;r++)e[t].push({}),i.call(this,e[t][r]);else for(r=0;r<n;r++)i.call(this,e[t][r])},r.prototype._procEntryField=function(e,t,n,i){this._parsing?e[t]=this._readField(n,i):this._writeField(n,i,e[t])},r.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(r.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},r.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},r.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var i=this._raw.getInt32(n),r=this._raw.getInt32(4+n);t=i*Math.pow(2,32)+r}return this._cursor.offset+=e>>3,t},r.prototype._readUint=function(e){var t,n,i=null,r=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:i=this._raw.getUint8(r);break;case 16:i=this._raw.getUint16(r);break;case 24:i=((t=this._raw.getUint16(r))<<8)+(n=this._raw.getUint8(2+r));break;case 32:i=this._raw.getUint32(r);break;case 64:t=this._raw.getUint32(r),n=this._raw.getUint32(4+r),i=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,i},r.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var i=this._readUint(8);t+=String.fromCharCode(i)}return t},r.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},r.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},r.prototype._readData=function(e){var t;return 0<(e=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset))?(t=new Uint8Array(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e,t):null},r.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t&&n.Utils.dataViewToString(t)},r.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},r.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},r.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(r.parse(this))},r.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)},r.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},r.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},r.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var i=Math.floor(t/Math.pow(2,32)),r=t-i*Math.pow(2,32);this._rawo.setUint32(n,i),this._rawo.setUint32(4+n,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},r.prototype._writeUint=function(e,t){if(this._rawo){var n,i,r=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(r,t);break;case 16:this._rawo.setUint16(r,t);break;case 24:i=255&t,this._rawo.setUint16(r,n=(16776960&t)>>8),this._rawo.setUint8(2+r,i);break;case 32:this._rawo.setUint32(r,t);break;case 64:i=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(r,n),this._rawo.setUint32(4+r,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},r.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},r.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},r.prototype._writeTemplate=function(e,t){var n=Math.floor(t);t=(t-n)*Math.pow(2,e/2),this._writeUint(e/2,n),this._writeUint(e/2,t)},r.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},r.prototype._writeUTF8String=function(e){var t=n.Utils.utf8ToByteArray(e);if(this._rawo)for(var i=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)i.setUint8(r,t[r]);else this.size+=t.length},r.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},r.prototype._boxProcessors.avc1=r.prototype._boxProcessors.avc2=r.prototype._boxProcessors.avc3=r.prototype._boxProcessors.avc4=r.prototype._boxProcessors.hvc1=r.prototype._boxProcessors.hev1=r.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},r.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_offset",1===this.version?"int":"uint",32)}))},r.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},r.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},r.prototype._boxProcessors.free=r.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},r.prototype._boxProcessors.ftyp=r.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},r.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},r.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},r.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},r.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},r.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},r.prototype._boxProcessors.mp4a=r.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},r.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},r.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},r.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},r.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},r.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},r.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},r.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},r.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},r.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},r.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},r.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_delta","uint",32)}))},r.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},r.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},r.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},r.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},r.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},r.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},r.prototype._boxProcessors["url "]=r.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},r.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},r.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},r.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},r.prototype._boxProcessors.vtte=function(){}},6513:function(e,t,n){e.exports=n(3087).polyfill()},3087:function(e,n,i){function r(e){return"function"==typeof e}function a(){var e=setTimeout;return function(){return e(o,1)}}function o(){for(var e=0;e<b;e+=2)(0,L[e])(L[e+1]),L[e]=void 0,L[e+1]=void 0;b=0}function s(e,t){var n,i=this,r=new this.constructor(u),a=(void 0===r[M]&&y(r),i._state);return a?(n=arguments[a-1],S((function(){return _(a,r,n,i._result)}))):m(i,r,e,t),r}function l(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(h(t=new this(u),e),t)}function u(){}function c(e,t,n){var i,a,o,u;t.constructor===e.constructor&&n===s&&t.constructor.resolve===l?(o=e,(u=t)._state===N?f(o,u._result):u._state===F?p(o,u._result):m(u,void 0,(function(e){return h(o,e)}),(function(e){return p(o,e)}))):void 0!==n&&r(n)?(i=t,a=n,S((function(e){var t=!1,n=function(n,r){try{n.call(r,(function(n){t||(t=!0,i!==n?h(e,n):f(e,n))}),(function(n){t||(t=!0,p(e,n))}))}catch(n){return n}}(a,i,e._label);!t&&n&&(t=!0,p(e,n))}),e)):f(e,t)}function h(e,t){if(e===t)p(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)f(e,t);else{n=void 0;try{n=t.then}catch(t){return void p(e,t)}c(e,t,n)}var n}function d(e){e._onerror&&e._onerror(e._result),g(e)}function f(e,t){e._state===O&&(e._result=t,e._state=N,0!==e._subscribers.length)&&S(g,e)}function p(e,t){e._state===O&&(e._state=F,e._result=t,S(d,e))}function m(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+N]=n,r[a+F]=i,0===a&&e._state&&S(g,e)}function g(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?_(n,i,r,a):r(a);e._subscribers.length=0}}function _(e,t,n,i){var a=r(n),o=void 0,s=void 0,l=!0;if(a){try{o=n(i)}catch(e){l=!1,s=e}if(t===o)return void p(t,new TypeError("A promises callback cannot return that same promise."))}else o=i;t._state===O&&(a&&l?h(t,o):!1===l?p(t,s):e===N?f(t,o):e===F&&p(t,o))}function y(e){e[M]=B++,e._state=void 0,e._result=void 0,e._subscribers=[]}function v(e,t){this._instanceConstructor=e,this.promise=new e(u),this.promise[M]||y(this.promise),E(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||f(this.promise,this._result)):p(this.promise,new Error("Array Methods must be provided an Array"))}function A(e){if(this[M]=B++,this._result=this._state=void 0,this._subscribers=[],u!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof A))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,n=e;try{n((function(e){h(t,e)}),(function(e){p(t,e)}))}catch(n){p(t,n)}}}var E,b,w,T,S,R,I,C,L,P,D,k,x,M,O,N,F,B,U,j;e.exports=(E=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},T=w=void(b=0),S=function(e,t){L[b]=e,L[b+1]=t,2===(b+=2)&&(T?T(o):x())},R=(R=(e="undefined"!=typeof window?window:void 0)||{}).MutationObserver||R.WebKitMutationObserver,I="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),C="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,L=new Array(1e3),x=void 0,x=I?function(){return t.nextTick(o)}:R?(D=0,I=new R(o),k=document.createTextNode(""),I.observe(k,{characterData:!0}),function(){k.data=D=++D%2}):C?((P=new MessageChannel).port1.onmessage=o,function(){return P.port2.postMessage(0)}):(void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(w=e.runOnLoop||e.runOnContext)?function(){w(o)}:a()}catch(e){return a()}}:a)(),M=Math.random().toString(36).substring(2),O=void 0,N=1,F=2,B=0,v.prototype._enumerate=function(e){for(var t=0;this._state===O&&t<e.length;t++)this._eachEntry(e[t],t)},v.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===l){var r,a=void 0,o=void 0,h=!1;try{a=e.then}catch(e){h=!0,o=e}a===s&&e._state!==O?this._settledAt(e._state,t,e._result):"function"!=typeof a?(this._remaining--,this._result[t]=e):n===j?(r=new n(u),h?p(r,o):c(r,e,a),this._willSettleAt(r,t)):this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(i(e),t)},v.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===O&&(this._remaining--,e===F?p(i,n):this._result[t]=n),0===this._remaining&&f(i,this._result)},v.prototype._willSettleAt=function(e,t){var n=this;m(e,void 0,(function(e){return n._settledAt(N,t,e)}),(function(e){return n._settledAt(F,t,e)}))},U=v,A.prototype.catch=function(e){return this.then(null,e)},A.prototype.finally=function(e){var t=this.constructor;return r(e)?this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))})):this.then(e,e)},(j=A).prototype.then=s,j.all=function(e){return new U(this,e).promise},j.race=function(e){var t=this;return E(e)?new t((function(n,i){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,i)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},j.resolve=l,j.reject=function(e){var t=new this(u);return p(t,e),t},j._setScheduler=function(e){T=e},j._setAsap=function(e){S=e},j._asap=S,j.polyfill=function(){var e=void 0;if(void 0!==i.g)e=i.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j},j.Promise=j)},7069:function(e){var t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},i=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},r=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}p(e,t,a,{once:!0}),"error"!==t&&"function"==typeof e.on&&p(e,"error",r,{once:!0})}))},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,n,i){var r,a;return s(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener||n),r=e._events),a=r[t]),void 0===a?(a=r[t]=n,++e._eventsCount):("function"==typeof a?a=r[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),0<(r=l(e))&&a.length>r&&!a.warned&&(a.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=a.length,console)&&console.warn),e}function c(e,t,n){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n}),t.listener=n,e.wrapFn=t}function h(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var i=e,r=new Array(i.length),a=0;a<r.length;++a)r[a]=i[a].listener||i[a];return r}return f(e,e.length)}function d(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function p(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){if((o=0<t.length?t[0]:o)instanceof Error)throw o;throw(r=new Error("Unhandled error."+(o?" ("+o.message+")":""))).context=o,r}var o=a[e];if(void 0===o)return!1;if("function"==typeof o)n(o,this,t);else{var s=o.length,l=f(o,s);for(i=0;i<s;++i)n(l[i],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,c(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,c(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,i,r,a,o;if(s(t),void 0!==(i=this._events)&&void 0!==(n=i[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;if(0===r)n.shift();else{for(var l=n,u=r;u+1<l.length;u++)l[u]=l[u+1];l.pop()}1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.removeAllListeners=function(e){var t,n;if(void 0!==(n=this._events))if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var i,r=Object.keys(n),a=0;a<r.length;++a)"removeListener"!==(i=r[a])&&this.removeAllListeners(i);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},5633:function(e){var t=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(r,a){if(r===a)return!0;if(r&&a&&"object"==typeof r&&"object"==typeof a){var o,s,l,u=t(r),c=t(a);if(u&&c){if((s=r.length)!=a.length)return!1;for(o=s;0!=o--;)if(!e(r[o],a[o]))return!1}else{if(u!=c)return!1;if((u=r instanceof Date)!=(c=a instanceof Date))return!1;if(u&&c)return r.getTime()==a.getTime();if((u=r instanceof RegExp)!=(c=a instanceof RegExp))return!1;if(u&&c)return r.toString()==a.toString();var h=n(r);if((s=h.length)!==n(a).length)return!1;for(o=s;0!=o--;)if(!i.call(a,h[o]))return!1;for(o=s;0!=o--;)if(!e(r[l=h[o]],a[l]))return!1}return!0}return r!=r&&a!=a}},736:function(e,t){t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1;for(r=e[t+h],h+=d,a=r&(1<<-c)-1,r>>=-c,c+=s;0<c;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;0<c;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(r?-1:1);o+=Math.pow(2,i),a-=u}return(r?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,l=8*a-r-1,u=(1<<l)-1,c=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,f=i?1:-1;for(a=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-o))<1&&(o--,i*=2),2<=(t+=1<=o+c?h/i:h*Math.pow(2,1-c))*i&&(o++,i/=2),u<=o+c?(s=0,o=u):1<=o+c?(s=(t*i-1)*Math.pow(2,r),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));8<=r;e[n+d]=255&s,d+=f,s/=256,r-=8);for(o=o<<r|s,l+=r;0<l;e[n+d]=255&o,d+=f,o/=256,l-=8);e[n+d-f]|=128*a}},5456:function(e,t,n){function i(e,t,n,r){var a=r&&"seq"===r.timeContainer,o=0,s=(r&&(o=a&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+o:o,t.begin),l=null;if("sets"in t)for(var u=0;u<t.sets.length;u++)i(e,t.sets[u],l,t),s="seq"===t.timeContainer?t.sets[u].end:Math.max(s,t.sets[u].end),l=t.sets[u];if("contents"in t){if("contents"in t)for(var c=0;c<t.contents.length;c++)i(e,t.contents[c],l,t),s="seq"===t.timeContainer?t.contents[c].end:Math.max(s,t.contents[c].end),l=t.contents[c]}else s=a?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,o+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=o+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function r(e){this.node=e}function a(){this.events=[],this.head=new o,this.body=null}function o(){this.styling=new s,this.layout=new c}function s(){this.styles={},this.initials={}}function l(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function u(){this.styleAttrs=null}function c(){this.regions={}}function h(e,t){d.call(this,"image"),this.src=e,this.type=t}function d(e){this.kind=e}function f(e){this.id=e}function p(e){this.regionID=e}function m(e){this.styleAttrs=e}function g(e){this.sets=e}function _(e){this.contents=e}function y(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function v(){d.call(this,"body")}function A(){d.call(this,"div")}function E(){d.call(this,"p")}function b(){d.call(this,"span")}function w(){d.call(this,"span")}function T(){d.call(this,"br")}function S(){}function R(){}function I(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function C(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function L(e,t){var n={};if(null!==e)for(var i in e.attributes){var r,a=e.attributes[i].uri+" "+e.attributes[i].local,o=j.byQName[a];void 0!==o&&(null!==(r=o.parse(e.attributes[i].value))?(n[a]=r,o===j.byName.zIndex&&M(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):O(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[i].value))}return n}function P(e,t,n){for(var i in e.attributes)if(e.attributes[i].uri===t&&e.attributes[i].local===n)return e.attributes[i].value;return null}function D(e,t,n){var i,r=null;return null!==(i=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(r=parseFloat(i[1])/t):null!==(i=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(r=parseFloat(i[1])/e):null!==(i=/^(\d+(?:\.\d+)?)ms$/.exec(n))?r=parseFloat(i[1])/1e3:null!==(i=/^(\d+(?:\.\d+)?)s$/.exec(n))?r=parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)h$/.exec(n))?r=3600*parseFloat(i[1]):null!==(i=/^(\d+(?:\.\d+)?)m$/.exec(n))?r=60*parseFloat(i[1]):null!==(i=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?r=3600*parseInt(i[1])+60*parseInt(i[2])+parseFloat(i[3]):null!==(i=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(r=3600*parseInt(i[1])+60*parseInt(i[2])+parseInt(i[3])+(null===i[4]?0:parseInt(i[4])/t)),r}function k(e,t,n,i){for(var r=t.length-1;0<=r;r--){var a=t[r];a in e.styles?x(e.styles[a].styleAttrs,n):O(i,"Non-existant style id referenced")}}function x(e,t){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}function M(e,t){if(e&&e.warn&&e.warn(t))throw t}function O(e,t){if(e&&e.error&&e.error(t))throw t}function N(e,t){throw e&&e.fatal&&e.fatal(t),t}function F(e,t){for(var n,i=0,r=e.length-1;i<=r;){var a=e[n=Math.floor((i+r)/2)];if(a<t)i=n+1;else{if(!(t<a))return{found:!0,index:n};r=n-1}}return{found:!1,index:i}}var B,U,j,G;B="undefined"==typeof sax?n(4468):sax,U="undefined"==typeof imscNames?n(6982):imscNames,j="undefined"==typeof imscStyles?n(1826):imscStyles,G="undefined"==typeof imscUtils?n(6095):imscUtils,t.fromXML=function(e,t,n){var d,f,p=B.parser(!0,{xmlns:!0}),m=[],g=[],_=[],y=0,I=null,C=(p.onclosetag=function(e){if(m[0]instanceof S)null!==I.head&&null!==I.head.styling&&k(I.head.styling,m[0].styleRefs,m[0].styleAttrs,t),delete m[0].styleRefs;else if(m[0]instanceof s)for(var i in m[0].styles)m[0].styles.hasOwnProperty(i)&&function e(t,n,i){for(;0<n.styleRefs.length;){var r=n.styleRefs.pop();r in t.styles?(e(t,t.styles[r],i),x(t.styles[r].styleAttrs,n.styleAttrs)):O(i,"Non-existant style id referenced")}}(m[0],m[0].styles[i],t);else if(m[0]instanceof E||m[0]instanceof b){if(1<m[0].contents.length){for(var a=[m[0].contents[0]],o=1;o<m[0].contents.length;o++)m[0].contents[o]instanceof w&&a[a.length-1]instanceof w?a[a.length-1].text+=m[0].contents[o].text:a.push(m[0].contents[o]);m[0].contents=a}m[0]instanceof b&&1===m[0].contents.length&&m[0].contents[0]instanceof w&&(m[0].text=m[0].contents[0].text,delete m[0].contents)}else m[0]instanceof r&&(m[0].node.uri===U.ns_tt&&"metadata"===m[0].node.local?y--:0<y&&n&&"onCloseTag"in n&&n.onCloseTag());_.shift(),g.shift(),m.shift()},p.ontext=function(e){if(void 0!==m[0])if(m[0]instanceof b||m[0]instanceof E){if(m[0]instanceof b){var i=m[0].styleAttrs[j.byName.ruby.qname];if("container"===i||"textContainer"===i||"baseContainer"===i)return}(i=new w).initFromText(I,m[0],e,g[0],_[0],t),m[0].contents.push(i)}else m[0]instanceof r&&0<y&&n&&"onText"in n&&n.onText(e)},p.onopentag=function(e){var i,d,f=e.attributes["xml:space"];if(_.unshift(f?f.value:0===_.length?"default":_[0]),f=e.attributes["xml:lang"],g.unshift(f?f.value:0===g.length?"":g[0]),e.uri===U.ns_tt)if("tt"===e.local)null!==I&&N(t,"Two <tt> elements at ("+this.line+","+this.column+")"),(I=new a).initFromNode(e,g[0],t),m.unshift(I);else if("head"===e.local)m[0]instanceof a||N(t,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),m.unshift(I.head);else if("styling"===e.local)m[0]instanceof o||N(t,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),m.unshift(I.head.styling);else if("style"===e.local)m[0]instanceof s?((d=new l).initFromNode(e,t),d.id?I.head.styling.styles[d.id]=d:O(t,"<style> element missing @id attribute"),m.unshift(d)):m[0]instanceof S?((d=new l).initFromNode(e,t),x(d.styleAttrs,m[0].styleAttrs),m.unshift(d)):N(t,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")");else if("initial"===e.local)if(m[0]instanceof s){for(var p in(i=new u).initFromNode(e,t),i.styleAttrs)i.styleAttrs.hasOwnProperty(p)&&(I.head.styling.initials[p]=i.styleAttrs[p]);m.unshift(i)}else N(t,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")");else"layout"===e.local?(m[0]instanceof o||N(t,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),m.unshift(I.head.layout)):"region"===e.local?(m[0]instanceof c||N(t,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(f=new S).initFromNode(I,e,g[0],t),!f.id||f.id in I.head.layout.regions?O(t,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):I.head.layout.regions[f.id]=f,m.unshift(f)):"body"===e.local?(m[0]instanceof a||N(t,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==I.body&&N(t,"Second <body> element at "+this.line+","+this.column+")"),(d=new v).initFromNode(I,e,g[0],t),I.body=d,m.unshift(d)):"div"===e.local?(m[0]instanceof A||m[0]instanceof v||N(t,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(f=new A).initFromNode(I,m[0],e,g[0],t),(d=f.styleAttrs[j.byName.backgroundImage.qname])&&(f.contents.push(new h(d)),delete f.styleAttrs[j.byName.backgroundImage.qname]),m[0].contents.push(f),m.unshift(f)):"image"===e.local?(m[0]instanceof A||N(t,"Parent of <image> element is not <div> at "+this.line+","+this.column+")"),(d=new h).initFromNode(I,m[0],e,g[0],t),m[0].contents.push(d),m.unshift(d)):"p"===e.local?(m[0]instanceof A||N(t,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(f=new E).initFromNode(I,m[0],e,g[0],t),m[0].contents.push(f),m.unshift(f)):"span"===e.local?(m[0]instanceof b||m[0]instanceof E||N(t,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(d=new b).initFromNode(I,m[0],e,g[0],_[0],t),m[0].contents.push(d),m.unshift(d)):"br"===e.local?(m[0]instanceof b||m[0]instanceof E||N(t,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(f=new T).initFromNode(I,m[0],e,g[0],t),m[0].contents.push(f),m.unshift(f)):"set"===e.local?(m[0]instanceof b||m[0]instanceof E||m[0]instanceof A||m[0]instanceof v||m[0]instanceof S||m[0]instanceof T||N(t,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(d=new R).initFromNode(I,m[0],e,t),m[0].sets.push(d),m.unshift(d)):m.unshift(new r(e));else m.unshift(new r(e));if(m[0]instanceof r)if(e.uri===U.ns_tt&&"metadata"===e.local)y++;else if(0<y&&n&&"onOpenTag"in n){var w,C=[];for(w in e.attributes)C[e.attributes[w].uri+" "+e.attributes[w].local]={uri:e.attributes[w].uri,local:e.attributes[w].local,value:e.attributes[w].value};n.onOpenTag(e.uri,e.local,C)}},p.write(e).close(),delete I.head.styling.styles,!1);for(d in I.head.layout.regions)if(I.head.layout.regions.hasOwnProperty(d)){C=!0;break}for(f in C||(p=S.prototype.createDefaultRegion(I.lang),I.head.layout.regions[p.id]=p),I.head.layout.regions)I.head.layout.regions.hasOwnProperty(f)&&i(I,I.head.layout.regions[f],null,null);return I.body&&i(I,I.body,null,null),I.body&&function e(t){if("contents"in t)for(var n=("styleAttrs"in t?t.styleAttrs[j.byName.ruby.qname]:null),i="span"===t.kind&&("container"===n||"textContainer"===n||"baseContainer"===n),r=t.contents.length-1;0<=r;r--)!i||"styleAttrs"in t.contents[r]&&j.byName.ruby.qname in t.contents[r].styleAttrs?e(t.contents[r]):delete t.contents[r]}(I.body),I},a.prototype.initFromNode=function(e,t,n){r=n,u=15,s=32,null!==(o=P(e,U.ns_ttp,"cellResolution"))&&(null!==(o=/(\d+) (\d+)/.exec(o))?(s=parseInt(o[1]),u=parseInt(o[2])):M(r,"Malformed cellResolution value (using initial value instead)"));var i,r,a,o={w:s,h:u},s=(this.cellLength={h:new G.ComputedLength(0,1/o.h),w:new G.ComputedLength(1/o.w,0)},r=n,o=30,null!==(u=P(s=e,U.ns_ttp,"frameRate"))&&(null!==(i=/(\d+)/.exec(u))?o=parseInt(i[1]):M(r,"Malformed frame rate attribute (using initial value instead)")),a=1,null!==(l=P(s,U.ns_ttp,"frameRateMultiplier"))&&(null!==(i=/(\d+) (\d+)/.exec(l))?a=parseInt(i[1])/parseInt(i[2]):M(r,"Malformed frame rate multiplier attribute (using initial value instead)")),l=a*o,a=1,null===(o=P(s,U.ns_ttp,"tickRate"))?null!==u&&(a=l):null!==(i=/(\d+)/.exec(o))?a=parseInt(i[1]):M(r,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:l,tickRate:a}),l=(this.effectiveFrameRate=s.effectiveFrameRate,this.tickRate=s.tickRate,this.aspectRatio=(u=n,(r=null)!==(i=null===(i=P(o=e,U.ns_ittp,"aspectRatio"))?P(o,U.ns_ttp,"displayAspectRatio"):i)&&(null!==(o=/(\d+)\s+(\d+)/.exec(i))?(i=parseInt(o[1]),o=parseInt(o[2]),0!==i&&0!==o?r=i/o:O(u,"Illegal aspectRatio values (ignoring)")):O(u,"Malformed aspectRatio attribute (ignoring)")),r),P(e,U.ns_ttp,"timeBase")),u=(null!==l&&"media"!==l&&N(n,"Unsupported time base"),a=n,null===(s=P(e,U.ns_tts,"extent"))?null:2!==(s=s.split(" ")).length?(M(a,"Malformed extent (ignoring)"),null):(o=G.parseLength(s[0]),(s=G.parseLength(s[1]))&&o?{h:s,w:o}:(M(a,"Malformed extent values (ignoring)"),null)));null===u?this.pxLength={h:null,w:null}:("px"===u.h.unit&&"px"===u.w.unit||N(n,"Extent on TT must be in px or absent"),this.pxLength={h:new G.ComputedLength(0,1/u.h.value),w:new G.ComputedLength(1/u.w.value,0)}),this.dimensions={h:new G.ComputedLength(0,1),w:new G.ComputedLength(1,0)},this.lang=t},a.prototype._registerEvent=function(e){var t;e.end<=e.begin||((t=F(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end===Number.POSITIVE_INFINITY)||(t=F(this.events,e.end)).found||this.events.splice(t.index,0,e.end)},a.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},a.prototype.getMediaTimeEvents=function(){return this.events},l.prototype.initFromNode=function(e,t){this.id=I(e),this.styleAttrs=L(e,t),this.styleRefs=C(e)},u.prototype.initFromNode=function(e,t){for(var n in this.styleAttrs={},e.attributes){var i;e.attributes[n].uri!==U.ns_itts&&e.attributes[n].uri!==U.ns_ebutts&&e.attributes[n].uri!==U.ns_tts||(i=e.attributes[n].uri+" "+e.attributes[n].local,this.styleAttrs[i]=e.attributes[n].value)}},h.prototype.initFromNode=function(e,t,n,i,r){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||O(r,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||O(r,"Invalid image@type attribute"),m.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},f.prototype.initFromNode=function(e,t,n,i){this.id=I(n)},p.prototype.initFromNode=function(e,t,n,i){this.regionID=n&&"region"in n.attributes?n.attributes.region.value:""},m.prototype.initFromNode=function(e,t,n,i){this.styleAttrs=L(n,i),null!==e.head&&null!==e.head.styling&&k(e.head.styling,C(n),this.styleAttrs,i)},g.prototype.initFromNode=function(e,t,n,i){this.sets=[]},_.prototype.initFromNode=function(e,t,n,i){this.contents=[]},y.prototype.initFromNode=function(e,t,n,i){var r,a,o,s,l;a=i,o=null,(r=n)&&"begin"in r.attributes&&null===(o=D(e.tickRate,e.effectiveFrameRate,r.attributes.begin.value))&&M(a,"Malformed begin value "+r.attributes.begin.value+" (using 0)"),s=null,r&&"dur"in r.attributes&&null===(s=D(e.tickRate,e.effectiveFrameRate,r.attributes.dur.value))&&M(a,"Malformed dur value "+r.attributes.dur.value+" (ignoring)"),l=null,r&&"end"in r.attributes&&null===(l=D(e.tickRate,e.effectiveFrameRate,r.attributes.end.value))&&M(a,"Malformed end value (ignoring)"),e={explicit_begin:o,explicit_end:l,explicit_dur:s},this.explicit_begin=e.explicit_begin,this.explicit_end=e.explicit_end,this.explicit_dur=e.explicit_dur,this.timeContainer=function(e,t){return(e=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null)&&"par"!==e?"seq"===e?"seq":(O(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,i)},v.prototype.initFromNode=function(e,t,n,i){m.prototype.initFromNode.call(this,e,null,t,i),y.prototype.initFromNode.call(this,e,null,t,i),g.prototype.initFromNode.call(this,e,null,t,i),p.prototype.initFromNode.call(this,e,null,t,i),_.prototype.initFromNode.call(this,e,null,t,i),this.lang=n},A.prototype.initFromNode=function(e,t,n,i,r){m.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),_.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},E.prototype.initFromNode=function(e,t,n,i,r){m.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),_.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},b.prototype.initFromNode=function(e,t,n,i,r,a){m.prototype.initFromNode.call(this,e,t,n,a),y.prototype.initFromNode.call(this,e,t,n,a),g.prototype.initFromNode.call(this,e,t,n,a),p.prototype.initFromNode.call(this,e,t,n,a),_.prototype.initFromNode.call(this,e,t,n,a),this.space=r,this.lang=i},w.prototype.initFromText=function(e,t,n,i,r,a){y.prototype.initFromNode.call(this,e,t,null,a),this.text=n,this.space=r,this.lang=i},T.prototype.initFromNode=function(e,t,n,i,r){p.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),this.lang=i},S.prototype.createDefaultRegion=function(e){var t=new S;return f.call(t,""),m.call(t,{}),g.call(t,[]),y.call(t,0,Number.POSITIVE_INFINITY,null),this.lang=e,t},S.prototype.initFromNode=function(e,t,n,i){f.prototype.initFromNode.call(this,e,null,t,i),y.prototype.initFromNode.call(this,e,null,t,i),g.prototype.initFromNode.call(this,e,null,t,i),this.styleAttrs=L(t,i),this.styleRefs=C(t),this.lang=n},R.prototype.initFromNode=function(e,t,n,i){y.prototype.initFromNode.call(this,e,t,n,i);var r,a=L(n,i);for(r in this.qname=null,this.value=null,a)if(a.hasOwnProperty(r)){if(this.qname){O(i,"More than one style specified on set");break}this.qname=r,this.value=a[r]}}},4725:function(e,t,n){var i=/firefox/i.test(navigator.userAgent),r=("undefined"==typeof imscNames&&n(6982),"undefined"==typeof imscStyles?n(1826):imscStyles);function a(e,t,n,c){if("region"===n.kind)(d=document.createElement("div")).style.position="absolute";else if("body"===n.kind)d=document.createElement("div");else if("div"===n.kind)d=document.createElement("div");else if("image"===n.kind){var d=document.createElement("img");null!==e.imgResolver&&null!==n.src&&((E=e.imgResolver(n.src,d))&&(d.src=E),d.height=e.regionH,d.width=e.regionW)}else if("p"===n.kind)d=document.createElement("p");else if("span"===n.kind)if("container"===n.styleAttrs[r.byName.ruby.qname])d=document.createElement("ruby"),e.ruby=!0;else if("base"===n.styleAttrs[r.byName.ruby.qname])d=document.createElement("span");else if("text"===n.styleAttrs[r.byName.ruby.qname])d=document.createElement("rt");else if("baseContainer"===n.styleAttrs[r.byName.ruby.qname])d=document.createElement("rbc");else if("textContainer"===n.styleAttrs[r.byName.ruby.qname])d=document.createElement("rtc");else{if("delimiter"===n.styleAttrs[r.byName.ruby.qname])return;d=document.createElement("span")}else"br"===n.kind&&(d=document.createElement("br"));if(d){!n.lang||"region"!==n.kind&&n.lang===c.lang||(d.lang=n.lang),t.appendChild(d),d.style.margin="0","region"===n.kind?"lrtb"===(E=n.styleAttrs[r.byName.writingMode.qname])||"lr"===E?(e.ipd="lr",e.bpd="tb"):"rltb"===E||"rl"===E?(e.ipd="rl",e.bpd="tb"):"tblr"===E?(e.ipd="tb",e.bpd="lr"):"tbrl"!==E&&"tb"!==E||(e.ipd="tb",e.bpd="rl"):"p"===n.kind&&"tb"===e.bpd&&(c=n.styleAttrs[r.byName.direction.qname],e.ipd="ltr"===c?"lr":"rl");for(var m=0;m<h.length;m++){var y=h[m],v=n.styleAttrs[y.qname];void 0!==v&&null!==y.map&&y.map(e,d,n,v)}var A=d,E=((t=n.styleAttrs[r.byName.linePadding.qname])&&!t.isZero()&&0<(E=t.toUsedLength(e.w,e.h))&&(c=Math.ceil(E)+"px","tb"===e.bpd?(A.style.paddingLeft=c,A.style.paddingRight=c):(A.style.paddingTop=c,A.style.paddingBottom=c),e.lp=t),n.styleAttrs[r.byName.multiRowAlign.qname]);if(E&&"auto"!==E&&((c=document.createElement("span")).style.display="inline-block",c.style.textAlign=E,d.appendChild(c),A=c,e.mra=E),(t=n.styleAttrs[r.byName.rubyReserve.qname])&&"none"!==t[0]&&(e.rubyReserve=t),n.styleAttrs[r.byName.fillLineGap.qname]&&(e.flg=!0),"span"===n.kind&&n.text){var b=n.styleAttrs[r.byName.textEmphasis.qname];if(b&&"none"!==b.style&&(e.textEmphasis=!0),r.byName.textCombine.qname in n.styleAttrs&&"all"===n.styleAttrs[r.byName.textCombine.qname])d.textContent=n.text,d._isd_element=n,b&&u(e,d,0,b);else for(var w="",T=0;T<n.text.length;T++){w+=n.text.charAt(T);var S=n.text.charCodeAt(T);(S<55296||56319<S||T===n.text.length-1)&&((S=document.createElement("span")).textContent=w,b&&u(e,S,0,b),d.appendChild(S),w="",S._isd_element=n)}}if("contents"in n)for(var R=0;R<n.contents.length;R++)a(e,A,n.contents[R],n);if(c=[],"p"===n.kind&&(l(e,A,c,null),e.rubyReserve&&(function(e,t){for(var n=0;n<e.length;n++){var i,r=document.createElement("ruby");(o=document.createElement("span")).textContent="​",r.appendChild(o);var a,o=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&1==e.length?((i=document.createElement("rtc")).style[p]=f?"after":"under",i.textContent="​",i.style.fontSize=o,(a=document.createElement("rtc")).style[p]=f?"before":"over",a.textContent="​",a.style.fontSize=o,r.appendChild(i),r.appendChild(a)):((i=document.createElement("rtc")).textContent="​",i.style.fontSize=o,a="after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&0<n?f?"after":"tb"===t.bpd||"rl"===t.bpd?"under":"over":f?"before":"tb"===t.bpd||"rl"===t.bpd?"over":"under",i.style[p]=a,r.appendChild(i));for(var s=null,l=0;l<e[n].rbc.length;l++)if("ruby"===e[n].rbc[l].localName){s=e[n].rbc[l];for(var u=0;u<s.style.length;u++)r.style.setProperty(s.style.item(u),s.style.getPropertyValue(s.style.item(u)));break}(s=s||e[n].elements[0].node).parentElement.insertBefore(r,s)}}(c,e),e.rubyReserve=null),(e.ruby||e.rubyReserve)&&(function(e,t){for(var n,i=0;i<e.length;i++)for(var r=0;r<e[i].rbc.length;r++)e[i].rbc[r].style[p]||(n=f?0===i?"before":"after":"tb"===t.bpd||"rl"===t.bpd?0===i?"over":"under":0===i?"under":"over",e[i].rbc[r].style[p]=n)}(c,e),e.ruby=null),e.textEmphasis&&(function(e,t){for(var n,i=0;i<e.length;i++)for(var r=0;r<e[i].te.length;r++)e[i].te[r].style[g]&&"none"!==e[i].te[r].style[g]||(n="tb"===t.bpd?0===i?"left over":"left under":"rl"===t.bpd?0===i?"right under":"left under":0===i?"left under":"right under",e[i].te[r].style[g]=n)}(c,e),e.textEmphasis=null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var n,i=e[t].elements.length;0!==i&&!1===e[t].br&&(n=document.createElement("br"),(i=e[t].elements[i-1].node).parentElement.insertBefore(n,i.nextSibling))}}(c),e.mra=null),e.lp&&(function(e,t,n){if(null!==e)for(var r=0;r<e.length;r++){var a=e[r].elements.length,o=Math.ceil(t)+"px",s="-"+Math.ceil(t)+"px";if(0!==a){a=e[r].elements[e[r].start_elem];var l=e[r].elements[e[r].end_elem];if(a===l){var u=a.node.getBoundingClientRect();if(0==u.width||0==u.height)continue}"lr"===n.ipd?(a.node.style.marginLeft=s,a.node.style.paddingLeft=o):"rl"===n.ipd?(a.node.style.paddingRight=o,a.node.style.marginRight=s):"tb"===n.ipd&&(a.node.style.paddingTop=o,a.node.style.marginTop=s),"lr"===n.ipd?(i||(l.node.style.marginRight=s),l.node.style.paddingRight=o):"rl"===n.ipd?(l.node.style.paddingLeft=o,i||(l.node.style.marginLeft=s)):"tb"===n.ipd&&(l.node.style.paddingBottom=o,l.node.style.marginBottom=s)}}}(c,e.lp.toUsedLength(e.w,e.h),e),e.lp=null),function(e,t){for(var n=0;n<e.length;n++)for(var i=e[n],r=1;r<i.elements.length;){var a=i.elements[r-1],o=i.elements[r];!function(e,t,n){if("SPAN"===e.tagName&&"SPAN"===t.tagName&&e._isd_element===t._isd_element){if(!e._isd_element)return _(n.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),0;e.textContent+=t.textContent;for(var i=0;i<t.style.length;i++){var r=t.style[i];(0<=r.indexOf("border")||0<=r.indexOf("padding")||0<=r.indexOf("margin"))&&(e.style[r]=t.style[r])}return t.parentElement.removeChild(t),1}}(a.node,o.node,t)?r++:i.elements.splice(r,1)}for(var s,l,u=[],c=0;c<e.length;c++)for(var h=0;h<e[c].elements.length;h++)(l=function e(t,n,i){return t.style.backgroundColor?(i&&!n.includes(t)&&n.push(t),t.style.backgroundColor):"SPAN"===t.parentElement.nodeName||"RUBY"===t.parentElement.nodeName||"RBC"===t.parentElement.nodeName||"RTC"===t.parentElement.nodeName||"RT"===t.parentElement.nodeName?e(t.parentElement,n,!0):void 0}(s=e[c].elements[h].node,u,!1))&&(s.style.backgroundColor=l);for(var d=0;d<u.length;d++)u[d].style.backgroundColor=""}(c,e),e.flg)){for(var I=c,C=(E=s(A.getBoundingClientRect(),e)).before,L=E.after,P=e,D=Math.sign(L-C),k=0;k<=I.length;k++){var x,M,O,N=0===k?Math.round(C):k===I.length?Math.round(L):Math.round((I[k-1].after+I[k].before)/2);if(0<k&&I[k-1])for(M=0;M<I[k-1].elements.length;M++)x=D*(N-(O=I[k-1].elements[M]).after)+"px","lr"===P.bpd?O.node.style.paddingRight=x:"rl"===P.bpd?O.node.style.paddingLeft=x:"tb"===P.bpd&&(O.node.style.paddingBottom=x);if(k<I.length)for(M=0;M<I[k].elements.length;M++)x=D*((O=I[k].elements[M]).before-N)+"px","lr"===P.bpd?O.node.style.paddingLeft=x:"rl"===P.bpd?O.node.style.paddingRight=x:"tb"===P.bpd&&(O.node.style.paddingTop=x)}e.flg=null}"region"===n.kind&&"tb"===e.bpd&&e.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[r.byName.displayAlign.qname]&&(l(e,A,c,null),t=new o(""===n.id?"_":n.id,c),e.currentISDState[t.id]=t,e.previousISDState)&&t.id in e.previousISDState&&0<e.previousISDState[t.id].plist.length&&1<t.plist.length&&t.plist[t.plist.length-2].text===e.previousISDState[t.id].plist[e.previousISDState[t.id].plist.length-1].text&&(E=d.firstElementChild,c=t.plist[t.plist.length-1].after-t.plist[t.plist.length-1].before,E.style.bottom="-"+c+"px",E.style.transition="transform 0.4s",E.style.position="relative",E.style.transform="translateY(-"+c+"px)")}else _(e.errorHandler,"Error processing ISD element kind: "+n.kind)}function o(e,t){this.id=e,this.plist=t}function s(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function l(e,t,n,i){if("rt"!==t.localName&&"rtc"!==t.localName){var r,a,o,u,c=t.style.backgroundColor||i;if(0===t.childElementCount)"span"===t.localName||"rb"===t.localName?(i=s(t.getBoundingClientRect(),e),0!==n.length&&(r=i.before,u=i.after,a=n[n.length-1].before,u<(o=n[n.length-1].after)&&a<r||o<=u&&r<=a)?(o=Math.sign(i.after-i.before),u=Math.sign(i.end-i.start),o*(i.before-n[n.length-1].before)<0&&(n[n.length-1].before=i.before),0<o*(i.after-n[n.length-1].after)&&(n[n.length-1].after=i.after),u*(i.start-n[n.length-1].start)<0&&(n[n.length-1].start=i.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<u*(i.end-n[n.length-1].end)&&(n[n.length-1].end=i.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:i.before,after:i.after,start:i.start,end:i.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:c,before:i.before,after:i.after})):"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var h=t.firstChild;h;)h.nodeType===Node.ELEMENT_NODE&&(l(e,h,n,c),"ruby"===h.localName||"rtc"===h.localName?0<n.length&&n[n.length-1].rbc.push(h):"span"===h.localName&&h.style[m]&&"none"!==h.style[m]&&0<n.length&&n[n.length-1].te.push(h)),h=h.nextSibling}}function u(e,t,n,i){"none"!==i.style&&("auto"===i.style?t.style[m]="filled":t.style[m]=i.style+" "+i.symbol,"before"===i.position||"after"===i.position)&&(e="tb"===e.bpd?"before"===i.position?"left over":"left under":"rl"===e.bpd?"before"===i.position?"right under":"left under":"before"===i.position?"left under":"right under",t.style[g]=e)}function c(e,t){this.qname=e,this.map=t}"undefined"==typeof imscUtils&&n(6095),t.render=function(e,t,n,i,r,o,s,l,u){i=i||t.clientHeight,r=r||t.clientWidth;var c,h=(null!==e.aspectRatio&&(r<(c=i*e.aspectRatio)?i=Math.round(r/e.aspectRatio):r=c),document.createElement("div")),d=(h.style.position="relative",h.style.width=r+"px",h.style.height=i+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0,{h:i,w:r,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:o||!1,isd:e,errorHandler:s,previousISDState:l,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null});if(t.appendChild(h),"contents"in e)for(var f=0;f<e.contents.length;f++)a(d,h,e.contents[f],e);return d.currentISDState};for(var h=[new c("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e,t,n,i){0!==i[3]&&(t.style.backgroundColor="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")")})),new c("http://www.w3.org/ns/ttml#styling color",(function(e,t,n,i){t.style.color="rgba("+i[0].toString()+","+i[1].toString()+","+i[2].toString()+","+(i[3]/255).toString()+")"})),new c("http://www.w3.org/ns/ttml#styling direction",(function(e,t,n,i){t.style.direction=i})),new c("http://www.w3.org/ns/ttml#styling display",(function(e,t,n,i){})),new c("http://www.w3.org/ns/ttml#styling displayAlign",(function(e,t,n,i){t.style.display="flex",t.style.flexDirection="column","before"===i?t.style.justifyContent="flex-start":"center"===i?t.style.justifyContent="center":"after"===i&&(t.style.justifyContent="flex-end")})),new c("http://www.w3.org/ns/ttml#styling extent",(function(e,t,n,i){e.regionH=i.h.toUsedLength(e.w,e.h),e.regionW=i.w.toUsedLength(e.w,e.h),i=0;var r=0;(n=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])&&(i=n[0].toUsedLength(e.w,e.h)+n[2].toUsedLength(e.w,e.h),r=n[1].toUsedLength(e.w,e.h)+n[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-r+"px"})),new c("http://www.w3.org/ns/ttml#styling fontFamily",(function(e,t,n,i){for(var r=[],a=0;a<i.length;a++)i[a]=i[a].trim(),"monospaceSerif"===i[a]?(r.push("Courier New"),r.push('"Liberation Mono"'),r.push("Courier"),r.push("monospace")):"proportionalSansSerif"===i[a]?(r.push("Arial"),r.push("Helvetica"),r.push('"Liberation Sans"'),r.push("sans-serif")):"monospace"===i[a]?r.push("monospace"):"sansSerif"===i[a]?r.push("sans-serif"):"serif"===i[a]?r.push("serif"):"monospaceSansSerif"===i[a]?(r.push("Consolas"),r.push("monospace")):"proportionalSerif"===i[a]?r.push("serif"):r.push(i[a]);if(0<r.length){for(var o=[r[0]],s=1;s<r.length;s++)-1==o.indexOf(r[s])&&o.push(r[s]);r=o}t.style.fontFamily=r.join(",")})),new c("http://www.w3.org/ns/ttml#styling shear",(function(e,t,n,i){0!==i&&(i*=-.9,"tb"===e.bpd?t.style.transform="skewX("+i+"deg)":t.style.transform="skewY("+i+"deg)")})),new c("http://www.w3.org/ns/ttml#styling fontSize",(function(e,t,n,i){t.style.fontSize=i.toUsedLength(e.w,e.h)+"px"})),new c("http://www.w3.org/ns/ttml#styling fontStyle",(function(e,t,n,i){t.style.fontStyle=i})),new c("http://www.w3.org/ns/ttml#styling fontWeight",(function(e,t,n,i){t.style.fontWeight=i})),new c("http://www.w3.org/ns/ttml#styling lineHeight",(function(e,t,n,i){t.style.lineHeight="normal"===i?"normal":i.toUsedLength(e.w,e.h)+"px"})),new c("http://www.w3.org/ns/ttml#styling opacity",(function(e,t,n,i){t.style.opacity=i})),new c("http://www.w3.org/ns/ttml#styling origin",(function(e,t,n,i){t.style.top=i.h.toUsedLength(e.w,e.h)+"px",t.style.left=i.w.toUsedLength(e.w,e.h)+"px"})),new c("http://www.w3.org/ns/ttml#styling overflow",(function(e,t,n,i){t.style.overflow=i})),new c("http://www.w3.org/ns/ttml#styling padding",(function(e,t,n,i){var r=[];r[0]=i[0].toUsedLength(e.w,e.h)+"px",r[1]=i[3].toUsedLength(e.w,e.h)+"px",r[2]=i[2].toUsedLength(e.w,e.h)+"px",r[3]=i[1].toUsedLength(e.w,e.h)+"px",t.style.padding=r.join(" ")})),new c("http://www.w3.org/ns/ttml#styling position",(function(e,t,n,i){t.style.top=i.h.toUsedLength(e.w,e.h)+"px",t.style.left=i.w.toUsedLength(e.w,e.h)+"px"})),new c("http://www.w3.org/ns/ttml#styling rubyAlign",(function(e,t,n,i){t.style.rubyAlign="spaceAround"===i?"space-around":"center"})),new c("http://www.w3.org/ns/ttml#styling rubyPosition",(function(e,t,n,i){"before"!==i&&"after"!==i||(e=f?i:"tb"===e.bpd||"rl"===e.bpd?"before"===i?"over":"under":"before"===i?"under":"over",t.parentElement.style[p]=e)})),new c("http://www.w3.org/ns/ttml#styling showBackground",null),new c("http://www.w3.org/ns/ttml#styling textAlign",(function(e,t,n,i){e="start"===i?"rl"===e.ipd?"right":"left":"end"===i?"rl"===e.ipd?"left":"right":i,t.style.textAlign=e})),new c("http://www.w3.org/ns/ttml#styling textDecoration",(function(e,t,n,i){t.style.textDecoration=i.join(" ").replace("lineThrough","line-through")})),new c("http://www.w3.org/ns/ttml#styling textOutline",(function(e,t,n,i){})),new c("http://www.w3.org/ns/ttml#styling textShadow",(function(e,t,n,i){if(n=n.styleAttrs[r.byName.textOutline.qname],"none"===i&&"none"===n)t.style.textShadow="";else{var a=[];if("none"!==n&&(n="rgba("+n.color[0].toString()+","+n.color[1].toString()+","+n.color[2].toString()+","+(n.color[3]/255).toString()+")",a.push("1px 1px 1px "+n),a.push("-1px 1px 1px "+n),a.push("1px -1px 1px "+n),a.push("-1px -1px 1px "+n)),"none"!==i)for(var o=0;o<i.length;o++)a.push(i[o].x_off.toUsedLength(e.w,e.h)+"px "+i[o].y_off.toUsedLength(e.w,e.h)+"px "+i[o].b_radius.toUsedLength(e.w,e.h)+"px rgba("+i[o].color[0].toString()+","+i[o].color[1].toString()+","+i[o].color[2].toString()+","+(i[o].color[3]/255).toString()+")");t.style.textShadow=a.join(",")}})),new c("http://www.w3.org/ns/ttml#styling textCombine",(function(e,t,n,i){t.style.textCombineUpright=i})),new c("http://www.w3.org/ns/ttml#styling textEmphasis",(function(e,t,n,i){})),new c("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e,t,n,i){t.style.unicodeBidi="bidiOverride"===i?"bidi-override":i})),new c("http://www.w3.org/ns/ttml#styling visibility",(function(e,t,n,i){t.style.visibility=i})),new c("http://www.w3.org/ns/ttml#styling wrapOption",(function(e,t,n,i){"wrap"===i?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"})),new c("http://www.w3.org/ns/ttml#styling writingMode",(function(e,t,n,i){"lrtb"===i||"lr"===i||"rltb"===i||"rl"===i?t.style.writingMode="horizontal-tb":"tblr"===i?t.style.writingMode="vertical-lr":"tbrl"!==i&&"tb"!==i||(t.style.writingMode="vertical-rl")})),new c("http://www.w3.org/ns/ttml#styling zIndex",(function(e,t,n,i){t.style.zIndex=i})),new c("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e,t,n,i){e.displayForcedOnlyMode&&!1===i&&(t.style.visibility="hidden")}))],d=0;d<h.length;d++)h[d].qname,h[d];var f="webkitRubyPosition"in window.getComputedStyle(document.documentElement),p=f?"webkitRubyPosition":"rubyPosition",m="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",g="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function _(e,t){if(e&&e.error&&e.error(t))throw t}},1902:function(e,t,n){function i(e,t){if("contents"in e)for(var n=0;n<e.contents.length;n++){var r=e.contents[n],a=r.styleAttrs[l.byName.ruby.qname];("span"!==r.kind||"textContainer"!==a&&"text"!==a)&&("contents"in r?i(r,t):("span"===r.kind&&0!==r.text.length||"br"===r.kind)&&t.push(r))}}function r(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)r(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function a(e){this.contents=[],this.aspectRatio=e.aspectRatio,this.lang=e.lang}function o(e){for(var t in this.kind=e.kind||"region",this.lang=e.lang,e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)e.styleAttrs.hasOwnProperty(t)&&(this.styleAttrs[t]=e.styleAttrs[t]);"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function s(e,t){if(e&&e.error&&e.error(t))throw t}var l,u,c;"undefined"==typeof imscNames&&n(6982),l="undefined"==typeof imscStyles?n(1826):imscStyles,u="undefined"==typeof imscUtils?n(6095):imscUtils,t.generateISD=function(e,t,n){var h,d,f,p,m,g,_,y=new a(e),v={},A={},E=e.head.styling.initials[l.byName.showBackground.qname],b=e.head.styling.initials[l.byName.backgroundColor.qname];for(d in e.head.layout.regions)e.head.layout.regions.hasOwnProperty(d)&&(p=(f=e.head.layout.regions[d]).styleAttrs[l.byName.showBackground.qname]||E,m=f.styleAttrs[l.byName.backgroundColor.qname]||b,A[f.id]=("always"===p||void 0===p)&&void 0!==m&&!(t<f.begin||t>=f.end));for(g in e.body&&e.body.regionID&&(A[e.body.regionID]=!0),h=null!==e.body?function e(t,n){if(n.contents){var i,r={};for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.contents=[],n.contents.filter((function(e){return!(t<e.begin||t>=e.end)})).forEach((function(n){(n=e(t,n)).regionID&&(A[n.regionID]=!0),null!==n&&r.contents.push(n)})),r}return n}(t,e.body):null,void 0!==A[""]&&(A[""]=!0),A)A[g]&&null!==(_=function e(t,n,a,h,d,f,p,m,g){if(n<p.begin||n>=p.end)return null;var _="regionID"in p&&""!==p.regionID?p.regionID:f;if(null!==d&&_!==a.id&&(!("contents"in p)||"contents"in p&&0===p.contents.length||""!==_))return null;var y=new o(p);if("sets"in p)for(var v=0;v<p.sets.length;v++)n<p.sets[v].begin||n>=p.sets[v].end||(y.styleAttrs[p.sets[v].qname]=p.sets[v].value);var A={};for(var E in y.styleAttrs)!y.styleAttrs.hasOwnProperty(E)||(A[E]=!0,"region"!==y.kind)||E!==l.byName.writingMode.qname||l.byName.direction.qname in y.styleAttrs||("lrtb"===(E=y.styleAttrs[E])||"lr"===E?y.styleAttrs[l.byName.direction.qname]="ltr":"rltb"!==E&&"rl"!==E||(y.styleAttrs[l.byName.direction.qname]="rtl"));if(null!==d)for(var b=0;b<l.all.length;b++){var w,T,S,R=l.all[b];R.qname===l.byName.textDecoration.qname?(T=d.styleAttrs[R.qname],w=[],void 0===(S=y.styleAttrs[R.qname])?w=T:-1===S.indexOf("none")?((-1===S.indexOf("noUnderline")&&-1!==T.indexOf("underline")||-1!==S.indexOf("underline"))&&w.push("underline"),(-1===S.indexOf("noLineThrough")&&-1!==T.indexOf("lineThrough")||-1!==S.indexOf("lineThrough"))&&w.push("lineThrough"),(-1===S.indexOf("noOverline")&&-1!==T.indexOf("overline")||-1!==S.indexOf("overline"))&&w.push("overline")):w.push("none"),y.styleAttrs[R.qname]=w):R.qname!==l.byName.fontSize.qname||R.qname in y.styleAttrs||"span"!==y.kind||"textContainer"!==y.styleAttrs[l.byName.ruby.qname]?R.qname!==l.byName.fontSize.qname||R.qname in y.styleAttrs||"span"!==y.kind||"text"!==y.styleAttrs[l.byName.ruby.qname]?R.inherit&&R.qname in d.styleAttrs&&!(R.qname in y.styleAttrs)&&(y.styleAttrs[R.qname]=d.styleAttrs[R.qname]):(T=d.styleAttrs[l.byName.fontSize.qname],"textContainer"===d.styleAttrs[l.byName.ruby.qname]?y.styleAttrs[R.qname]=T:y.styleAttrs[R.qname]=new u.ComputedLength(.5*T.rw,.5*T.rh)):(S=d.styleAttrs[l.byName.fontSize.qname],y.styleAttrs[R.qname]=new u.ComputedLength(.5*S.rw,.5*S.rh))}for(var I=0;I<l.all.length;I++){var C,L=l.all[I];L.qname in y.styleAttrs||L.qname===l.byName.position.qname&&l.byName.origin.qname in y.styleAttrs||L.qname===l.byName.origin.qname&&l.byName.position.qname in y.styleAttrs||null!==(C=t.head.styling.initials[L.qname]||L.initial)&&("region"===y.kind||!1===L.inherit&&null!==C)&&(null!==(C=L.parse(C))?(y.styleAttrs[L.qname]=C,A[L.qname]=!0):s(m,"Invalid initial value for '"+L.qname+"' on element '"+y.kind))}for(var P=0;P<l.all.length;P++){var D,k=l.all[P];k.qname in A&&null!==k.compute&&(null!==(D=k.compute(t,d,y,y.styleAttrs[k.qname],g))?y.styleAttrs[k.qname]=D:(y.styleAttrs[k.qname]=k.compute(t,d,y,k.parse(k.initial),g),s(m,"Style '"+k.qname+"' on element '"+y.kind+"' cannot be computed")))}if("none"===y.styleAttrs[l.byName.display.qname])return null;var x=null;null===d?x=null===h?[]:[h]:"contents"in p&&(x=p.contents);for(var M=0;null!==x&&M<x.length;M++){var O=e(t,n,a,h,y,_,x[M],m,g);null!==O&&y.contents.push(O.element)}for(var N in y.styleAttrs){var F,B;y.styleAttrs.hasOwnProperty(N)&&(F=!1,"span"===y.kind&&(F=(F=(F=("container"===(B=y.styleAttrs[l.byName.ruby.qname])||"textContainer"===B||"baseContainer"===B)&&-1!==c.indexOf(N))||"container"!==B&&N===l.byName.rubyAlign.qname)||!("textContainer"===B||"text"===B)&&N===l.byName.rubyPosition.qname),F||"applies"in(B=l.byQName[N])&&(F=-1===B.applies.indexOf(y.kind)),F)&&delete y.styleAttrs[N]}return f=y.styleAttrs[l.byName.ruby.qname],"p"!==y.kind&&("span"!==y.kind||"textContainer"!==f&&"text"!==f)||(i(y,f=[]),function(e){for(var t,n,i,r,a=0;a<e.length;)"br"!==(t=e[a]).kind&&"preserve"!==t.space&&(n=t.text.replace(/[\t\r\n ]+/g," "),/^[ ]/.test(n)&&(0===a||"br"===(i=e[a-1]).kind||/[\r\n\t ]$/.test(i.text))&&(n=n.substring(1)),0===(t.text=n).length)?e.splice(a,1):a++;for(a=0;a<e.length;a++)"br"!==(t=e[a]).kind&&"preserve"!==t.space?/[ ]$/.test(t.text)&&(a===e.length-1||"br"===(r=e[a+1]).kind||"preserve"===r.space&&/^[\r\n]/.test(r.text))&&(t.text=t.text.slice(0,-1)):a++}(f),r(y)),"div"===y.kind&&l.byName.backgroundImage.qname in y.styleAttrs||"br"===y.kind||"image"===y.kind||"contents"in y&&0<y.contents.length||"span"===y.kind&&null!==y.text||"region"===y.kind&&"always"===y.styleAttrs[l.byName.showBackground.qname]?{region_id:_,element:y}:null}(e,t,e.head.layout.regions[g],h,null,"",e.head.layout.regions[g],n,v))&&y.contents.push(_.element);return y},c=[l.byName.color.qname,l.byName.textCombine.qname,l.byName.textDecoration.qname,l.byName.textEmphasis.qname,l.byName.textOutline.qname,l.byName.textShadow.qname]},8769:function(e,t,n){t.generateISD=n(1902).generateISD,t.fromXML=n(5456).fromXML,t.renderHTML=n(4725).render},6982:function(e,t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"},1826:function(e,t,n){var i,r,a=t,o=(t="undefined"==typeof imscNames?n(6982):imscNames,"undefined"==typeof imscUtils?n(6095):imscUtils);function s(e,t,n,i,r,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=r,this.animatable=a,this.initial=n,this.applies=i,this.parse=o,this.compute=s}for(i in a.all=[new s(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,o.parseColor,null),new s(t.ns_tts,"color","white",["span"],!0,!0,o.parseColor,null),new s(t.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(e){return e}),null),new s(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(e){return e}),null),new s(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e){return e}),null),new s(t.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(e){var t;return"auto"===e?e:2===(e=e.split(" ")).length&&(t=o.parseLength(e[0]),e=o.parseLength(e[1]))&&t?{h:e,w:t}:null}),(function(e,t,n,i,r){var a,s;if("auto"===i)a=new o.ComputedLength(0,1);else if(null===(a=o.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)s=new o.ComputedLength(1,0);else if(null===(s=o.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:s}})),new s(t.ns_tts,"fontFamily","default",["span","p"],!0,!0,(function(e){for(var t=e.split(","),n=[],i=0;i<t.length;i++)t[i]=t[i].trim(),"'"!==t[i].charAt(0)&&'"'!==t[i].charAt(0)&&"default"===t[i]?n.push("monospaceSerif"):n.push(t[i]);return n}),null),new s(t.ns_tts,"shear","0%",["p"],!0,!0,o.parseLength,(function(e,t,n,i){return"%"!==i.unit?null:100<Math.abs(i.value)?100*Math.sign(i.value):i.value})),new s(t.ns_tts,"fontSize","1c",["span","p"],!0,!0,o.parseLength,(function(e,t,n,i,r){return o.toComputedLength(i.value,i.unit,null!==t?t.styleAttrs[a.byName.fontSize.qname]:e.cellLength.h,null!==t?t.styleAttrs[a.byName.fontSize.qname]:e.cellLength.h,e.cellLength.h,e.pxLength.h)})),new s(t.ns_tts,"fontStyle","normal",["span","p"],!0,!0,(function(e){return e}),null),new s(t.ns_tts,"fontWeight","normal",["span","p"],!0,!0,(function(e){return e}),null),new s(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e){return"normal"===e?e:o.parseLength(e)}),(function(e,t,n,i,r){var s;if("normal"===i)s=i;else if(null===(s=o.toComputedLength(i.value,i.unit,n.styleAttrs[a.byName.fontSize.qname],n.styleAttrs[a.byName.fontSize.qname],e.cellLength.h,e.pxLength.h)))return null;return s})),new s(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new s(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?e:2===(e=e.split(" ")).length&&(t=o.parseLength(e[0]),e=o.parseLength(e[1]))&&t?{h:e,w:t}:null}),(function(e,t,n,i,r){var a,s;if("auto"===i)a=new o.ComputedLength(0,0);else if(null===(a=o.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)s=new o.ComputedLength(0,0);else if(null===(s=o.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:a,w:s}})),new s(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e){return e}),null),new s(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e){var t=e.split(" ");if(4<t.length)return null;for(var n=[],i=0;i<t.length;i++){var r=o.parseLength(t[i]);if(!r)return null;n.push(r)}return n}),(function(e,t,n,i,r){var s;if(1===i.length)s=[i[0],i[0],i[0],i[0]];else if(2===i.length)s=[i[0],i[1],i[0],i[1]];else if(3===i.length)s=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;s=[i[0],i[1],i[2],i[3]]}if("lrtb"===(i=n.styleAttrs[a.byName.writingMode.qname])||"lr"===i)s=[s[0],s[3],s[2],s[1]];else if("rltb"===i||"rl"===i)s=[s[0],s[1],s[2],s[3]];else if("tblr"===i)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==i&&"tb"!==i)return null;s=[s[3],s[2],s[1],s[0]]}for(var l=[],u=0;u<s.length;u++)if(0===s[u].value)l[u]=new o.ComputedLength(0,0);else if(l[u]=o.toComputedLength(s[u].value,s[u].unit,n.styleAttrs[a.byName.fontSize.qname],0===u||2===u?n.styleAttrs[a.byName.extent.qname].h:n.styleAttrs[a.byName.extent.qname].w,0===u||2===u?e.cellLength.h:e.cellLength.w,0===u||2===u?e.pxLength.h:e.pxLength.w),null===l[u])return null;return l})),new s(t.ns_tts,"position","top left",["region"],!1,!0,(function(e){return o.parsePosition(e)}),(function(e,t,n,i){var r,s;return null===(r=o.toComputedLength(i.v.offset.value,i.v.offset.unit,null,new o.ComputedLength(-n.styleAttrs[a.byName.extent.qname].h.rw,e.dimensions.h.rh-n.styleAttrs[a.byName.extent.qname].h.rh),null,e.pxLength.h))||("bottom"===i.v.edge&&(r=new o.ComputedLength(-r.rw-n.styleAttrs[a.byName.extent.qname].h.rw,e.dimensions.h.rh-r.rh-n.styleAttrs[a.byName.extent.qname].h.rh)),s=o.toComputedLength(i.h.offset.value,i.h.offset.unit,null,new o.ComputedLength(e.dimensions.w.rw-n.styleAttrs[a.byName.extent.qname].w.rw,-n.styleAttrs[a.byName.extent.qname].w.rh),null,e.pxLength.w),null===r)?null:{h:r,w:s="right"===i.h.edge?new o.ComputedLength(e.dimensions.w.rw-s.rw-n.styleAttrs[a.byName.extent.qname].w.rw,-s.rh-n.styleAttrs[a.byName.extent.qname].w.rh):s}})),new s(t.ns_tts,"ruby","none",["span"],!1,!0,(function(e){return e}),null),new s(t.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(e){return"center"!==e&&"spaceAround"!==e?null:e}),null),new s(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(e){return e}),null),new s(t.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(e){var t=[null,null];if(0===(e=e.split(" ")).length||2<e.length)return null;if("none"!==e[0]&&"both"!==e[0]&&"after"!==e[0]&&"before"!==e[0]&&"outside"!==e[0])return null;if(t[0]=e[0],2===e.length&&"none"!==e[0]){if(!(e=o.parseLength(e[1])))return null;t[1]=e}return t}),(function(e,t,n,i,r){return"none"===i[0]?i:null===(n=null===i[1]?new o.ComputedLength(.5*n.styleAttrs[a.byName.fontSize.qname].rw,.5*n.styleAttrs[a.byName.fontSize.qname].rh):o.toComputedLength(i[1].value,i[1].unit,n.styleAttrs[a.byName.fontSize.qname],n.styleAttrs[a.byName.fontSize.qname],e.cellLength.h,e.pxLength.h))?null:[i[0],n]})),new s(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e){return e}),null),new s(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e){return e}),(function(e,t,n,i,r){return"left"===i?"start":"right"===i?"end":i})),new s(t.ns_tts,"textCombine","none",["span"],!0,!0,(function(e){return"none"===e||"all"===e?e:null}),null),new s(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e){return e.split(" ")}),null),new s(t.ns_tts,"textEmphasis","none",["span"],!0,!0,(function(e){for(var t=e.split(" "),n={style:null,symbol:null,color:null,position:null},i=0;i<t.length;i++)if("none"===t[i]||"auto"===t[i])n.style=t[i];else if("filled"===t[i]||"open"===t[i])n.style=t[i];else if("circle"===t[i]||"dot"===t[i]||"sesame"===t[i])n.symbol=t[i];else if("current"===t[i])n.color=t[i];else if("outside"===t[i]||"before"===t[i]||"after"===t[i])n.position=t[i];else if(n.color=o.parseColor(t[i]),null===n.color)return null;return null==n.style&&null==n.symbol?n.style="auto":(n.symbol=n.symbol||"circle",n.style=n.style||"filled"),n.position=n.position||"outside",n.color=n.color||"current",n}),null),new s(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e){var t,n;return"none"===e?e:(t={},0===(e=e.split(" ")).length||2<e.length||(n=o.parseColor(e[0]),null!==(t.color=n)&&e.shift(),1!==e.length)||!(n=o.parseLength(e[0]))?null:(t.thickness=n,t))}),(function(e,t,n,i,r){var s;return"none"===i?i:(s={},null===i.color?s.color=n.styleAttrs[a.byName.color.qname]:s.color=i.color,s.thickness=o.toComputedLength(i.thickness.value,i.thickness.unit,n.styleAttrs[a.byName.fontSize.qname],n.styleAttrs[a.byName.fontSize.qname],e.cellLength.h,e.pxLength.h),null===s.thickness?null:s)})),new s(t.ns_tts,"textShadow","none",["span"],!0,!0,o.parseTextShadow,(function(e,t,n,i){if("none"===i)return i;for(var r=[],s=0;s<i.length;s++){var l={};if(l.x_off=o.toComputedLength(i[s][0].value,i[s][0].unit,null,n.styleAttrs[a.byName.fontSize.qname],null,e.pxLength.w),null===l.x_off)return null;if(l.y_off=o.toComputedLength(i[s][1].value,i[s][1].unit,null,n.styleAttrs[a.byName.fontSize.qname],null,e.pxLength.h),null===l.y_off)return null;if(null===i[s][2])l.b_radius=0;else if(l.b_radius=o.toComputedLength(i[s][2].value,i[s][2].unit,null,n.styleAttrs[a.byName.fontSize.qname],null,e.pxLength.h),null===l.b_radius)return null;null===i[s][3]?l.color=n.styleAttrs[a.byName.color.qname]:l.color=i[s][3],r.push(l)}return r})),new s(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(e){return e}),null),new s(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(e){return e}),null),new s(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e){return e}),null),new s(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e){return e}),null),new s(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t}),null),new s(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,o.parseLength,(function(e,t,n,i,r){return o.toComputedLength(i.value,i.unit,null,null,e.cellLength.w,null)})),new s(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e){return e}),null),new s(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e){return e}),null),new s(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(e){return"true"===e}),null),new s(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e){return"true"===e}),null)],a.byQName={},a.all)a.byQName[a.all[i].qname]=a.all[i];for(r in a.byName={},a.all)a.byName[a.all[r].name]=a.all[r]},6095:function(e,t){var n,i,r,a,o,s;i=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,r=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,a=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,o={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]},(n=t).parseColor=function(e){var t=null,n=o[e.toLowerCase()];return void 0!==n?t=n:null!==(n=i.exec(e))?t=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),void 0!==n[4]?parseInt(n[4],16):255]:null!==(n=r.exec(e))?t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),255]:null!==(n=a.exec(e))&&(t=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseInt(n[4])]),t},s=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/,n.parseLength=function(e){var t=null;return null!==(e=s.exec(e))?{value:parseFloat(e[1]),unit:e[2]}:t},n.parseTextShadow=function(e){for(var t=e.match(/([^\(,\)]|\([^\)]+\))+/g),i=[],r=0;r<t.length;r++){var a=t[r].split(" ");if(1===a.length&&"none"===a[0])return"none";if(1<a.length&&a.length<5){var o=[null,null,null,null],s=n.parseLength(a.shift());if(null===s)return null;if(o[0]=s,null===(s=n.parseLength(a.shift())))return null;if(o[1]=s,0===a.length);else if(null!==(s=n.parseLength(a[0]))&&(o[2]=s,a.shift()),0!==a.length){if(null===(s=n.parseColor(a[0])))return null;o[3]=s}i.push(o)}}return i},n.parsePosition=function(e){function t(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e}var i=e.split(" ");if(4<i.length)return null;for(var r=0;r<i.length;r++)if(!t(i[r])){var a=n.parseLength(i[r]);if(null===a)return null;i[r]=a}for(var o={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},s=0;s<i.length;){var l=i[s++];if(t(l)){var u={value:0,unit:"%"};2!==i.length&&s<i.length&&!t(i[s])&&(u=i[s++]),"right"===l?(o.h.edge=l,o.h.offset=u):"bottom"===l?(o.v.edge=l,o.v.offset=u):"left"===l?o.h.offset=u:"top"===l&&(o.v.offset=u)}else{if(1!==i.length&&2!==i.length)return null;1===s?o.h.offset=l:o.v.offset=l}}return o},n.ComputedLength=function(e,t){this.rw=e,this.rh=t},n.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},n.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},n.toComputedLength=function(e,t,i,r,a,o){return"%"===t&&r?new n.ComputedLength(r.rw*e/100,r.rh*e/100):"em"===t&&i?new n.ComputedLength(i.rw*e,i.rh*e):"c"===t&&a?new n.ComputedLength(e*a.rw,e*a.rh):"px"===t&&o?new n.ComputedLength(e*o.rw,e*o.rh):"rh"===t?new n.ComputedLength(0,e/100):"rw"===t?new n.ComputedLength(e/100,0):null}},7497:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},1577:function(e){e.exports=function(e){return 97<=(e="string"==typeof e?e.charCodeAt(0):e)&&e<=122||65<=e&&e<=90}},661:function(e,t,n){var i=n(1577),r=n(4781);e.exports=function(e){return i(e)||r(e)}},4781:function(e){e.exports=function(e){return 48<=(e="string"==typeof e?e.charCodeAt(0):e)&&e<=57}},8758:function(e){function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function i(e,t){for(var n,i="",r=0,a=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(a!==s-1&&1!==o)if(a!==s-1&&2===o){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(2<i.length){var l=i.lastIndexOf("/");if(l!==i.length-1){r=-1===l?(i="",0):(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),a=s,o=0;continue}}else if(2===i.length||1===i.length){i="",a=s,o=r=0;continue}t&&(0<i.length?i+="/..":i="..",r=2)}else 0<i.length?i+="/"+e.slice(a+1,s):i=e.slice(a+1,s),r=s-a-1;a=s,o=0}else 46===n&&-1!==o?++o:o=-1}return i}var r={resolve:function(){for(var e,r="",a=!1,o=arguments.length-1;-1<=o&&!a;o--){var s=0<=o?arguments[o]:e=void 0===e?t.cwd():e;n(s),0!==s.length&&(r=s+"/"+r,a=47===s.charCodeAt(0))}return r=i(r,!a),a?0<r.length?"/"+r:"/":0<r.length?r:"."},normalize:function(e){var t,r;return n(e),0===e.length?".":(t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1),0<(e=0!==(e=i(e,!t)).length||t?e:".").length&&r&&(e+="/"),t?"/"+e:e)},isAbsolute:function(e){return n(e),0<e.length&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];n(i),0<i.length&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t)return"";if((e=r.resolve(e))===(t=r.resolve(t)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var a=e.length,o=a-i,s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var l=t.length-s,u=o<l?o:l,c=-1,h=0;h<=u;++h){if(h===u){if(u<l){if(47===t.charCodeAt(s+h))return t.slice(s+h+1);if(0===h)return t.slice(s+h)}else u<o&&(47===e.charCodeAt(i+h)?c=h:0===h&&(c=0));break}var d=e.charCodeAt(i+h);if(d!==t.charCodeAt(s+h))break;47===d&&(c=h)}var f="";for(h=i+c+1;h<=a;++h)h!==a&&47!==e.charCodeAt(h)||(0===f.length?f+="..":f+="/..");return 0<f.length?f+t.slice(s+c):(47===t.charCodeAt(s+=c)&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var t=47===e.charCodeAt(0),i=-1,r=!0,a=e.length-1;1<=a;--a)if(47===e.charCodeAt(a)){if(!r){i=a;break}}else r=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');n(e);var i=0,r=-1,a=!0;if(void 0!==t&&0<t.length&&t.length<=e.length){if(t.length===e.length&&t===e)return"";for(var o=t.length-1,s=-1,l=e.length-1;0<=l;--l){var u=e.charCodeAt(l);if(47===u){if(!a){i=l+1;break}}else-1===s&&(a=!1,s=l+1),0<=o&&(u===t.charCodeAt(o)?-1==--o&&(r=l):(o=-1,r=s))}return i===r?r=s:-1===r&&(r=e.length),e.slice(i,r)}for(l=e.length-1;0<=l;--l)if(47===e.charCodeAt(l)){if(!a){i=l+1;break}}else-1===r&&(a=!1,r=l+1);return-1===r?"":e.slice(i,r)},extname:function(e){n(e);for(var t=-1,i=0,r=-1,a=!0,o=0,s=e.length-1;0<=s;--s){var l=e.charCodeAt(s);if(47!==l)-1===r&&(a=!1,r=s+1),46===l?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!a){i=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===i+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+n:t+"/"+n:n;var t,n},parse:function(e){n(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0!==e.length){for(var i,r=47===e.charCodeAt(0),a=r?(t.root="/",1):0,o=-1,s=0,l=-1,u=!0,c=e.length-1,h=0;a<=c;--c)if(47!==(i=e.charCodeAt(c)))-1===l&&(u=!1,l=c+1),46===i?-1===o?o=c:1!==h&&(h=1):-1!==o&&(h=-1);else if(!u){s=c+1;break}-1===o||-1===l||0===h||1===h&&o===l-1&&o===s+1?-1!==l&&(t.base=t.name=0===s&&r?e.slice(1,l):e.slice(s,l)):(0===s&&r?(t.name=e.slice(1,o),t.base=e.slice(1,l)):(t.name=e.slice(s,o),t.base=e.slice(s,l)),t.ext=e.slice(o,l)),0<s?t.dir=e.slice(0,s-1):r&&(t.dir="/")}return t},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},4385:function(e){var t={};function n(e,n,i){i=i||Error,a=r=i,(o=s).prototype=Object.create(a.prototype),(o.prototype.constructor=o).__proto__=a;var r,a,o=s;function s(e,t,i){return r.call(this,"string"==typeof n?n:n(e,t,i))||this}o.prototype.name=i.name,o.prototype.code=e,t[e]=o}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,r,a,o;return"string"==typeof t&&"not "===t.substr(0,4)?(i="must not be",t=t.replace(/^not /,"")):i="must be",a=e,(void 0===o||o>a.length)&&(o=a.length),(" argument"===a.substring(o-9,o)?"The ".concat(e," "):(a=(r="number"!=typeof r?0:r)+1>e.length||-1===e.indexOf(".",r)?"argument":"property",'The "'.concat(e,'" ').concat(a," "))).concat(i," ").concat(function(e,t){var n;return Array.isArray(e)?(n=e.length,e=e.map((function(e){return String(e)})),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}(t,"type"))+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},5947:function(e,n,i){var r=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},a=(e.exports=c,i(4857)),o=i(6745);i(7497)(c,a);for(var s=r(o.prototype),l=0;l<s.length;l++){var u=s[l];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);a.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen)&&(this.allowHalfOpen=!1,this.once("end",h))}function h(){this._writableState.ended||t.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5639:function(e,t,n){e.exports=r;var i=n(5773);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(7497)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},4857:function(e,n,i){var r;function a(e,t){return e.listeners(t).length}(e.exports=w).ReadableState=b,i(7069).EventEmitter;var o,s,l,u=i(7254),c=i(5059).Buffer,h=(void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=(e=i(5564))&&e.debuglog?e.debuglog("stream"):function(){},f=i(6580),p=(e=i(4005),i(5798).getHighWaterMark),m=i(4385).F,g=m.ERR_INVALID_ARG_TYPE,_=m.ERR_STREAM_PUSH_AFTER_EOF,y=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A=(i(7497)(w,u),e.errorOrDestroy),E=["error","close","destroy","pause","resume"];function b(e,t,n){r=r||i(5947),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=p(this,e,"readableHighWaterMark",n),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||i(3952).I,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function w(e){if(r=r||i(5947),!(this instanceof w))return new w(e);var t=this instanceof r;this._readableState=new b(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),u.call(this)}function T(e,t,n,i,r){d("readableAddChunk",t);var a,o,s,l,u,f=e._readableState;if(null===t)f.reading=!1,s=e,l=f,d("onEofChunk"),l.ended||(l.decoder&&(u=l.decoder.end())&&u.length&&(l.buffer.push(u),l.length+=l.objectMode?1:u.length),l.ended=!0,l.sync?I(s):(l.needReadable=!1,l.emittedReadable||(l.emittedReadable=!0,C(s))));else if(r||(u=f,s=l=t,a=o=c.isBuffer(s)||s instanceof h||"string"==typeof l||void 0===l||u.objectMode?o:new g("chunk",["string","Buffer","Uint8Array"],l)),a)A(e,a);else if(f.objectMode||t&&0<t.length)if("string"==typeof t||f.objectMode||Object.getPrototypeOf(t)===c.prototype||(r=t,t=c.from(r)),i)f.endEmitted?A(e,new v):S(e,f,t,!0);else if(f.ended)A(e,new _);else{if(f.destroyed)return!1;f.reading=!1,!f.decoder||n||(t=f.decoder.write(t),f.objectMode)||0!==t.length?S(e,f,t,!1):L(e,f)}else i||(f.reading=!1,L(e,f));return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function S(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&I(e)),L(e,t)}function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(1073741824<=(n=e)?n=1073741824:(n--,n=(n=(n=(n=(n|=n>>>1)|n>>>2)|n>>>4)|n>>>8)|n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function I(e){var n=e._readableState;d("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(d("emitReadable",n.flowing),n.emittedReadable=!0,t.nextTick(C,e))}function C(e){var t=e._readableState;d("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function L(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(P,e,n))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(d("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function k(e){d("readable nexttick read 0"),e.read(0)}function x(e,t){d("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function O(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function N(e){var n=e._readableState;d("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,t.nextTick(F,n,e))}function F(e,t){d("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy()}function B(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=e.destroy,w.prototype._undestroy=e.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},w.prototype.unshift=function(e){return T(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){var t=new(o=o||i(3952).I)(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this},w.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t,n=this._readableState,i=e;return 0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:0<n.length)||n.ended)?(d("read: emitReadable",n.length,n.ended),(0===n.length&&n.ended?N:I)(this),null):0===(e=R(e,n))&&n.ended?(0===n.length&&N(this),null):(t=n.needReadable,d("need readable",t),(0===n.length||n.length-e<n.highWaterMark)&&d("length less than watermark",t=!0),n.ended||n.reading?d("reading or ended",t=!1):t&&(d("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=R(i,n))),null===(t=0<e?O(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),i!==e)&&n.ended&&N(this),null!==t&&this.emit("data",t),t)},w.prototype._read=function(e){A(this,new y("_read()"))},w.prototype.pipe=function(e,n){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}function o(){d("onend"),e.end()}r.pipesCount+=1,d("pipe count=%d opts=%j",r.pipesCount,n),n=n&&!1===n.end||e===t.stdout||e===t.stderr?_:o,r.endEmitted?t.nextTick(n):i.once("end",n),e.on("unpipe",(function t(n,a){d("onunpipe"),n===i&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,d("cleanup"),e.removeListener("close",m),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",t),i.removeListener("end",o),i.removeListener("end",_),i.removeListener("data",f),h=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||c())})),s=i;var s,l,u,c=function(){var e=s._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(s,"data")&&(e.flowing=!0,M(s))},h=(e.on("drain",c),!1);function f(t){d("ondata"),t=e.write(t),d("dest.write",t),!1===t&&((1===r.pipesCount&&r.pipes===e||1<r.pipesCount&&-1!==B(r.pipes,e))&&!h&&(d("false write response, pause",r.awaitDrain),r.awaitDrain++),i.pause())}function p(t){d("onerror",t),_(),e.removeListener("error",p),0===a(e,"error")&&A(e,t)}function m(){e.removeListener("finish",g),_()}function g(){d("onfinish"),e.removeListener("close",m),_()}function _(){d("unpipe"),i.unpipe(e)}return i.on("data",f),n="error",u=p,"function"==typeof(l=e).prependListener?l.prependListener(n,u):l._events&&l._events[n]?Array.isArray(l._events[n])?l._events[n].unshift(u):l._events[n]=[u,l._events[n]]:l.on(n,u),e.once("close",m),e.once("finish",g),e.emit("pipe",i),r.flowing||(d("pipe resume"),i.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n));else if(e){var i=B(t.pipes,e);-1!==i&&(t.pipes.splice(i,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n))}else{var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit("unpipe",this,{hasUnpiped:!1})}return this},w.prototype.addListener=w.prototype.on=function(e,n){n=u.prototype.on.call(this,e,n);var i=this._readableState;return"data"===e?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,d("on readable",i.length,i.reading),i.length?I(this):i.reading||t.nextTick(k,this)),n},w.prototype.removeListener=function(e,n){return n=u.prototype.removeListener.call(this,e,n),"readable"===e&&t.nextTick(D,this),n},w.prototype.removeAllListeners=function(e){var n=u.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||t.nextTick(D,this),n},w.prototype.resume=function(){var e,n=this._readableState;return n.flowing||(d("resume"),n.flowing=!n.readableListening,(e=n).resumeScheduled||(e.resumeScheduled=!0,t.nextTick(x,this,e))),n.paused=!1,this},w.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(e){var t,n=this,i=this._readableState,r=!1;for(t in e.on("end",(function(){var e;d("wrapped end"),i.decoder&&!i.ended&&(e=i.decoder.end())&&e.length&&n.push(e),n.push(null)})),e.on("data",(function(t){d("wrapped data"),i.decoder&&(t=i.decoder.write(t)),i.objectMode&&null==t||(i.objectMode||t&&t.length)&&!n.push(t)&&(r=!0,e.pause())})),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return(s=void 0===s?i(5232):s)(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=O,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return(l=void 0===l?i(5686):l)(w,e,t)})},5773:function(e,t,n){e.exports=l;var i=(e=n(4385).F).ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,a=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=e.ERR_TRANSFORM_WITH_LENGTH_0,s=n(5947);function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState,i=(n.transforming=!1,n.writecb);if(null===i)return this.emit("error",new r);n.writechunk=null,(n.writecb=null)!=t&&this.push(t),i(e),(n=this._readableState).reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush((function(t,n){c(e,t,n)}))}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;e.push(null)}n(7497)(l,s),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var i=this._transformState;i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming&&(n=this._readableState,i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,(function(e){t(e)}))}},6745:function(e,n,i){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){var n=t,i=e,r=n.entry;for(n.entry=null;r;){var a=r.callback;i.pendingcb--,a(void 0),r=r.next}i.corkedRequestsFree.next=n}}var a;(e.exports=T).WritableState=w,e={deprecate:i(6667)};var o,s=i(7254),l=i(5059).Buffer,u=(void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},c=i(4005),h=i(5798).getHighWaterMark,d=i(4385).F,f=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,_=d.ERR_STREAM_DESTROYED,y=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,A=d.ERR_UNKNOWN_ENCODING,E=c.errorOrDestroy;function b(){}function w(e,n,o){a=a||i(5947),e=e||{},"boolean"!=typeof o&&(o=n instanceof a),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,o=(this.destroyed=!1)===e.decodeStrings,this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var i,r,a,o,s=n,l=s._writableState,u=l.sync,c=l.writecb;if("function"!=typeof c)throw new m;(o=l).writing=!1,o.writecb=null,o.length-=o.writelen,o.writelen=0,e?(o=s,r=u,a=c,--(i=l).pendingcb,r?(t.nextTick(a,e),t.nextTick(P,o,i),o._writableState.errorEmitted=!0,E(o,e)):(a(e),o._writableState.errorEmitted=!0,E(o,e),P(o,i))):((r=C(l)||s.destroyed)||l.corked||l.bufferProcessing||!l.bufferedRequest||I(s,l),u?t.nextTick(R,s,l,r,c):R(s,l,r,c))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function T(e){var t=this instanceof(a=a||i(5947));if(!t&&!o.call(T,this))return new T(e);this._writableState=new w(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),s.call(this)}function S(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function R(e,t,n,i){var r;n||(n=e,0===(r=t).length&&r.needDrain&&(r.needDrain=!1,n.emit("drain"))),t.pendingcb--,i(),P(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,a=new Array(i);(i=t.corkedRequestsFree).entry=n;for(var o=0,s=!0;n;)(a[o]=n).isBuf||(s=!1),n=n.next,o+=1;a.allBuffers=s,S(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(S(e,t,!1,t.objectMode?1:l.length,l,u,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function L(e,t){e._final((function(n){t.pendingcb--,n&&E(e,n),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,n){var i,r,a=C(n);return a&&(i=e,(r=n).prefinished||r.finalCalled||("function"!=typeof i._final||r.destroyed?(r.prefinished=!0,i.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,t.nextTick(L,i,r))),0===n.pendingcb)&&(n.finished=!0,e.emit("finish"),n.autoDestroy)&&(!(i=e._readableState)||i.autoDestroy&&i.endEmitted)&&e.destroy(),a}i(7497)(T,s),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(w.prototype,"buffer",{get:e.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===T&&e&&e._writableState instanceof w}})):o=function(e){return e instanceof this},T.prototype.pipe=function(){E(this,new g)},T.prototype.write=function(e,n,i){var r,a,o,s,c,h,d,p,m,g,_=this._writableState,A=!1,w=!_.objectMode&&(w=e,l.isBuffer(w)||w instanceof u);return w&&!l.isBuffer(e)&&(g=e,e=l.from(g)),"function"==typeof n&&(i=n,n=null),n=w?"buffer":n||_.defaultEncoding,"function"!=typeof i&&(i=b),_.ending?(g=this,p=i,m=new v,E(g,m),t.nextTick(p,m)):w||(p=this,m=_,h=i,null===(c=e)?d=new y:"string"==typeof c||m.objectMode||(d=new f("chunk",["string","Buffer"],c)),!d)?(_.pendingcb++,c=this,(r=w)||(s=e,o=n,e!==(s=_.objectMode||!1===_.decodeStrings||"string"!=typeof s?s:l.from(s,o))&&(r=!0,n="buffer",e=s)),o=_.objectMode?1:e.length,_.length+=o,(s=_.length<_.highWaterMark)||(_.needDrain=!0),_.writing||_.corked?(a=_.lastBufferedRequest,_.lastBufferedRequest={chunk:e,encoding:n,isBuf:r,callback:i,next:null},a?a.next=_.lastBufferedRequest:_.bufferedRequest=_.lastBufferedRequest,_.bufferedRequestCount+=1):S(c,_,!1,o,e,n,i),A=s):(E(p,d),t.nextTick(h,d)),A},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new A(e)},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,n){n(new p("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,n,i){var r=this._writableState;return"function"==typeof e?(i=e,n=e=null):"function"==typeof n&&(i=n,n=null),null!=e&&this.write(e,n),r.corked&&(r.corked=1,this.uncork()),r.ending||(e=this,n=i,(i=r).ending=!0,P(e,i),n&&(i.finished?t.nextTick(n):e.once("finish",n)),i.ended=!0,e.writable=!1),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=c.destroy,T.prototype._undestroy=c.undestroy,T.prototype._destroy=function(e,t){t(e)}},5232:function(e,n,i){var r;function a(e,t,n){var i;i=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),(t="symbol"==typeof i?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var o=i(9827),s=Symbol("lastResolve"),l=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),h=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function m(e){var t,n=e[s];null!==n&&null!==(t=e[f].read())&&(e[h]=null,e[s]=null,e[l]=null,n(p(t,!1)))}i=Object.getPrototypeOf((function(){}));var g=Object.setPrototypeOf((a(r={get stream(){return this[f]},next:function(){var e,n,i,r,a=this;if(null!==(r=this[u]))return Promise.reject(r);if(this[c])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(e,n){t.nextTick((function(){a[u]?n(a[u]):e(p(void 0,!0))}))}));if(r=this[h])e=new Promise((n=r,i=this,function(e,t){n.then((function(){i[c]?e(p(void 0,!0)):i[d](e,t)}),t)}));else{if(null!==(r=this[f].read()))return Promise.resolve(p(r,!1));e=new Promise(this[d])}return this[h]=e}},Symbol.asyncIterator,(function(){return this})),a(r,"return",(function(){var e=this;return new Promise((function(t,n){e[f].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),r),i);e.exports=function(e){var n,i=Object.create(g,(a(n={},f,{value:e,writable:!0}),a(n,s,{value:null,writable:!0}),a(n,l,{value:null,writable:!0}),a(n,u,{value:null,writable:!0}),a(n,c,{value:e._readableState.endEmitted,writable:!0}),a(n,d,{value:function(e,t){var n=i[f].read();n?(i[h]=null,i[s]=null,i[l]=null,e(p(n,!1))):(i[s]=e,i[l]=t)},writable:!0}),n));return i[h]=null,o(e,(function(e){var t;e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code?(null!==(t=i[l])&&(i[h]=null,i[s]=null,i[l]=null,t(e)),i[u]=e):(null!==(t=i[s])&&(i[h]=null,i[s]=null,t(p(void 0,!(i[l]=null)))),i[c]=!0)})),e.on("readable",function(e){t.nextTick(m,e)}.bind(null,i)),i}},6580:function(e,t,n){function i(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],(t=a(t))in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==typeof e?e:String(e)}var o=n(5059).Buffer,s=n(6102).inspect,l=s&&s.custom||"inspect";e.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}for(var t=e,n=t.prototype,i=[{key:"push",value:function(e){e={data:e,next:null},0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head},0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,n,i=o.allocUnsafe(e>>>0),r=this.head,a=0;r;)t=r.data,n=a,o.prototype.copy.call(t,i,n),a+=r.data.length,r=r.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,a=e>r.length?r.length:e;if(a===r.length?i+=r:i+=r.slice(0,e),0==(e-=a)){a===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=r.slice(a);break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,a=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,a),0==(e-=a)){a===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=r.slice(a);break}++i}return this.length-=i,t}},{key:l,value:function(e,t){return s(this,r(r({},t),{},{depth:0,customInspect:!1}))}}],u=0;u<i.length;u++){var c=i[u];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,a(c.key),c)}return Object.defineProperty(t,"prototype",{writable:!1}),e}()},4005:function(e){function n(e,t){r(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,a){var o=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?a?a(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(r,this,e)):t.nextTick(r,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!a&&e?o._writableState?o._writableState.errorEmitted?t.nextTick(i,o):(o._writableState.errorEmitted=!0,t.nextTick(n,o,e)):t.nextTick(n,o,e):a?(t.nextTick(i,o),a(e)):t.nextTick(i,o)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},9827:function(e,t,n){var i=n(4385).F.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,a){var o,s,l,u,c,h,d,f,p,m,g,_;return"function"==typeof n?e(t,null,n):(o=a||r,s=!1,a=function(){if(!s){s=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(this,t)}},l=(n=n||{}).readable||!1!==n.readable&&t.readable,u=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||d()},h=t._writableState&&t._writableState.finished,d=function(){h=!(u=!1),l||a.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){f=!(l=!1),u||a.call(t)},m=function(e){a.call(t,e)},g=function(){var e;return l&&!f?(t._readableState&&t._readableState.ended||(e=new i),a.call(t,e)):u&&!h?(t._writableState&&t._writableState.ended||(e=new i),a.call(t,e)):void 0},_=function(){t.req.on("finish",d)},t.setHeader&&"function"==typeof t.abort?(t.on("complete",d),t.on("abort",g),t.req?_():t.on("request",_)):u&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",p),t.on("finish",d),!1!==n.error&&t.on("error",m),t.on("close",g),function(){t.removeListener("complete",d),t.removeListener("abort",g),t.removeListener("request",_),t.req&&t.req.removeListener("finish",d),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",g)})}},5686:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},8057:function(e,t,n){var i,r=n(4385).F,a=r.ERR_MISSING_ARGS,o=r.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var c,h,d=(h=t).length&&"function"==typeof h[h.length-1]?h.pop():s;if((t=Array.isArray(t[0])?t[0]:t).length<2)throw new a("streams");var f=t.map((function(e,r){var a,s,u,h,p,m,g,_=r<t.length-1;return s=_,r=0<r,h=function(e){c=c||e,e&&f.forEach(l),_||(f.forEach(l),d(c))},p=!1,m=!(u=function(){p||(p=!0,h.apply(void 0,arguments))}),(a=e).on("close",(function(){m=!0})),(i=void 0===i?n(9827):i)(a,{readable:s,writable:r},(function(e){if(e)return u(e);m=!0,u()})),g=!1,function(e){if(!m&&!g)return g=!0,a.setHeader&&"function"==typeof a.abort?a.abort():"function"==typeof a.destroy?a.destroy():void u(e||new o("pipe"))}}));return t.reduce(u)}},5798:function(e,t,n){var i=n(4385).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){if(null==(t=null!=t.highWaterMark?t.highWaterMark:r?t[n]:null))return e.objectMode?16:16384;if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new i(r?n:"highWaterMark",t);return Math.floor(t)}}},7254:function(e,t,n){e.exports=n(7069).EventEmitter},576:function(e,t,n){var i=n(5059),r=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),a(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");return e=r(e),void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},4468:function(e,t,i){var r=t;r.parser=function(e,t){return new s(e,t)},r.SAXParser=s,r.SAXStream=u,r.createStream=function(e,t){return new u(e,t)},r.MAX_BUFFER_LENGTH=65536;var a,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function s(e,t){if(!(this instanceof s))return new s(e,t);for(var n=this,i=n,a=0,l=o.length;a<l;a++)i[o[a]]="";n.q=n.c="",n.bufferCheckPosition=r.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=C.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(g)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),L(n,"onready")}r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}),s.prototype={end:function(){M(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return x(t,"Cannot write after close. Assign an onready handler.");if(null===e)return M(t);"object"==typeof e&&(e=e.toString());for(var n,i,a,s,l,u,p,m=0,g="";g=G(e,m++),t.c=g;)switch(t.trackPosition&&(t.position++,"\n"===g?(t.line++,t.column=0):t.column++),t.state){case C.BEGIN:if(t.state=C.BEGIN_WHITESPACE,"\ufeff"===g)continue;j(t,g);continue;case C.BEGIN_WHITESPACE:j(t,g);continue;case C.TEXT:if(t.sawRoot&&!t.closedRoot){for(var b=m-1;g&&"<"!==g&&"&"!==g;)(g=G(e,m++))&&t.trackPosition&&(t.position++,"\n"===g?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(b,m-1)}"<"!==g||t.sawRoot&&t.closedRoot&&!t.strict?(!T(_,g)||t.sawRoot&&!t.closedRoot||O(t,"Text data outside of root node."),"&"===g?t.state=C.TEXT_ENTITY:t.textNode+=g):(t.state=C.OPEN_WAKA,t.startTagPosition=t.position);continue;case C.SCRIPT:"<"===g?t.state=C.SCRIPT_ENDING:t.script+=g;continue;case C.SCRIPT_ENDING:"/"===g?t.state=C.CLOSE_TAG:(t.script+="<"+g,t.state=C.SCRIPT);continue;case C.OPEN_WAKA:"!"===g?(t.state=C.SGML_DECL,t.sgmlDecl=""):w(_,g)||(w(y,g)?(t.state=C.OPEN_TAG,t.tagName=g):"/"===g?(t.state=C.CLOSE_TAG,t.tagName=""):"?"===g?(t.state=C.PROC_INST,t.procInstName=t.procInstBody=""):(O(t,"Unencoded <"),t.startTagPosition+1<t.position&&(b=t.position-t.startTagPosition,g=new Array(b).join(" ")+g),t.textNode+="<"+g,t.state=C.TEXT));continue;case C.SGML_DECL:(t.sgmlDecl+g).toUpperCase()===d?(P(t,"onopencdata"),t.state=C.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+g==="--"?(t.state=C.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+g).toUpperCase()===f?(t.state=C.DOCTYPE,(t.doctype||t.sawRoot)&&O(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===g?(P(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=C.TEXT):(w(c,g)&&(t.state=C.SGML_DECL_QUOTED),t.sgmlDecl+=g);continue;case C.SGML_DECL_QUOTED:g===t.q&&(t.state=C.SGML_DECL,t.q=""),t.sgmlDecl+=g;continue;case C.DOCTYPE:">"===g?(t.state=C.TEXT,P(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=g,"["===g?t.state=C.DOCTYPE_DTD:w(c,g)&&(t.state=C.DOCTYPE_QUOTED,t.q=g));continue;case C.DOCTYPE_QUOTED:t.doctype+=g,g===t.q&&(t.q="",t.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:t.doctype+=g,"]"===g?t.state=C.DOCTYPE:w(c,g)&&(t.state=C.DOCTYPE_DTD_QUOTED,t.q=g);continue;case C.DOCTYPE_DTD_QUOTED:t.doctype+=g,g===t.q&&(t.state=C.DOCTYPE_DTD,t.q="");continue;case C.COMMENT:"-"===g?t.state=C.COMMENT_ENDING:t.comment+=g;continue;case C.COMMENT_ENDING:"-"===g?(t.state=C.COMMENT_ENDED,t.comment=k(t.opt,t.comment),t.comment&&P(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+g,t.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==g?(O(t,"Malformed comment"),t.comment+="--"+g,t.state=C.COMMENT):t.state=C.TEXT;continue;case C.CDATA:"]"===g?t.state=C.CDATA_ENDING:t.cdata+=g;continue;case C.CDATA_ENDING:"]"===g?t.state=C.CDATA_ENDING_2:(t.cdata+="]"+g,t.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===g?(t.cdata&&P(t,"oncdata",t.cdata),P(t,"onclosecdata"),t.cdata="",t.state=C.TEXT):"]"===g?t.cdata+="]":(t.cdata+="]]"+g,t.state=C.CDATA);continue;case C.PROC_INST:"?"===g?t.state=C.PROC_INST_ENDING:w(_,g)?t.state=C.PROC_INST_BODY:t.procInstName+=g;continue;case C.PROC_INST_BODY:if(!t.procInstBody&&w(_,g))continue;"?"===g?t.state=C.PROC_INST_ENDING:t.procInstBody+=g;continue;case C.PROC_INST_ENDING:">"===g?(P(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=C.TEXT):(t.procInstBody+="?"+g,t.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:w(v,g)?t.tagName+=g:(p=u=void 0,(l=t).strict||(l.tagName=l.tagName[l.looseCase]()),u=l.tags[l.tags.length-1]||l,p=l.tag={name:l.tagName,attributes:{}},l.opt.xmlns&&(p.ns=u.ns),l.attribList.length=0,P(l,"onopentagstart",p),">"===g?B(t):"/"===g?t.state=C.OPEN_TAG_SLASH:(T(_,g)&&O(t,"Invalid character in tag name"),t.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===g?(B(t,!0),U(t)):(O(t,"Forward-slash in opening tag not followed by >"),t.state=C.ATTRIB);continue;case C.ATTRIB:if(w(_,g))continue;">"===g?B(t):"/"===g?t.state=C.OPEN_TAG_SLASH:w(y,g)?(t.attribName=g,t.attribValue="",t.state=C.ATTRIB_NAME):O(t,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===g?t.state=C.ATTRIB_VALUE:">"===g?(O(t,"Attribute without value"),t.attribValue=t.attribName,F(t),B(t)):w(_,g)?t.state=C.ATTRIB_NAME_SAW_WHITE:w(v,g)?t.attribName+=g:O(t,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===g)t.state=C.ATTRIB_VALUE;else{if(w(_,g))continue;O(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",P(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===g?B(t):w(y,g)?(t.attribName=g,t.state=C.ATTRIB_NAME):(O(t,"Invalid attribute name"),t.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(w(_,g))continue;w(c,g)?(t.q=g,t.state=C.ATTRIB_VALUE_QUOTED):(O(t,"Unquoted attribute value"),t.state=C.ATTRIB_VALUE_UNQUOTED,t.attribValue=g);continue;case C.ATTRIB_VALUE_QUOTED:if(g!==t.q){"&"===g?t.state=C.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=g;continue}F(t),t.q="",t.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:w(_,g)?t.state=C.ATTRIB:">"===g?B(t):"/"===g?t.state=C.OPEN_TAG_SLASH:w(y,g)?(O(t,"No whitespace between attributes"),t.attribName=g,t.attribValue="",t.state=C.ATTRIB_NAME):O(t,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(T(h,g)){"&"===g?t.state=C.ATTRIB_VALUE_ENTITY_U:t.attribValue+=g;continue}F(t),">"===g?B(t):t.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(t.tagName)">"===g?U(t):w(v,g)?t.tagName+=g:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=C.SCRIPT):(T(_,g)&&O(t,"Invalid tagname in closing tag"),t.state=C.CLOSE_TAG_SAW_WHITE);else{if(w(_,g))continue;T(y,g)?t.script?(t.script+="</"+g,t.state=C.SCRIPT):O(t,"Invalid tagname in closing tag."):t.tagName=g}continue;case C.CLOSE_TAG_SAW_WHITE:if(w(_,g))continue;">"===g?U(t):O(t,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:switch(t.state){case C.TEXT_ENTITY:n=C.TEXT,i="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:n=C.ATTRIB_VALUE_QUOTED,i="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:n=C.ATTRIB_VALUE_UNQUOTED,i="attribValue"}";"===g?(t[i]+=(s=p=l=u=void 0,p=(l=(a=t).entity).toLowerCase(),s="",a.ENTITIES[l]||a.ENTITIES[p]||("#"===(l=p).charAt(0)&&(s="x"===l.charAt(1)?(l=l.slice(2),(u=parseInt(l,16)).toString(16)):(l=l.slice(1),(u=parseInt(l,10)).toString(10))),l=l.replace(/^0+/,""),s.toLowerCase()!==l?(O(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCodePoint(u))),t.entity="",t.state=n):w(t.entity.length?E:A,g)?t.entity+=g:(O(t,"Invalid character in entity name"),t[i]+="&"+t.entity+g,t.entity="",t.state=n);continue;default:throw new Error(t,"Unknown state: "+t.state)}if(t.position>=t.bufferCheckPosition){for(var S=t,R=Math.max(r.MAX_BUFFER_LENGTH,10),I=0,L=0,N=o.length;L<N;L++){var V=S[o[L]].length;if(R<V)switch(o[L]){case"textNode":D(S);break;case"cdata":P(S,"oncdata",S.cdata),S.cdata="";break;case"script":P(S,"onscript",S.script),S.script="";break;default:x(S,"Max buffer length exceeded: "+o[L])}I=Math.max(I,V)}var H=r.MAX_BUFFER_LENGTH-I;S.bufferCheckPosition=H+S.position}return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){D(this),""!==this.cdata&&(P(this,"oncdata",this.cdata),this.cdata=""),""!==this.script&&(P(this,"onscript",this.script),this.script="")}};try{a=i(3947).Stream}catch(r){a=function(){}}var l=r.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function u(e,t){if(!(this instanceof u))return new u(e,t);a.apply(this),this._parser=new s(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,l.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t;n.on(e,t)},enumerable:!0,configurable:!1})}))}(u.prototype=Object.create(a.prototype,{constructor:{value:u}})).write=function(e){var t;return"function"==typeof n&&"function"==typeof n.isBuffer&&n.isBuffer(e)&&(this._decoder||(t=i(3952).I,this._decoder=new t("utf8")),e=this._decoder.write(e)),this._parser.write(e.toString()),this.emit("data",e),!0},u.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},u.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===l.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),a.prototype.on.call(n,e,t)};var c="'\"",h=(_="\r\n\t ")+">",d="[CDATA[",f="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",g={xml:p,xmlns:m},_=b(_),y=(b("0124356789"),b("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,A=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function b(e){return e.split("").reduce((function(e,t){return e[t]=!0,e}),{})}function w(e,t){return"[object RegExp]"===Object.prototype.toString.call(e)?t.match(e):e[t]}function T(e,t){return!w(e,t)}c=b(c),h=b(h);var S,R,I,C=0;for(I in r.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach((function(e){var t="number"==typeof(t=r.ENTITIES[e])?String.fromCharCode(t):t;r.ENTITIES[e]=t})),r.STATE)r.STATE[r.STATE[I]]=I;function L(e,t,n){e[t]&&e[t](n)}function P(e,t,n){e.textNode&&D(e),L(e,t,n)}function D(e){e.textNode=k(e.opt,e.textNode),e.textNode&&L(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),e.normalize?t.replace(/\s+/g," "):t}function x(e,t){return D(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,L(e,"onerror",t),e}function M(e){return e.sawRoot&&!e.closedRoot&&O(e,"Unclosed root tag"),e.state!==C.BEGIN&&e.state!==C.BEGIN_WHITESPACE&&e.state!==C.TEXT&&x(e,"Unexpected end"),D(e),e.c="",e.closed=!0,L(e,"onend"),s.call(e,e.strict,e.opt),e}function O(e,t){if("object"!=typeof e||!(e instanceof s))throw new Error("bad call to strictFail");e.strict&&x(e,t)}function N(e,t){var n=(i=e.indexOf(":")<0?["",e]:e.split(":"))[0],i=i[1];return t&&"xmlns"===e&&(n="xmlns",i=""),{prefix:n,local:i}}function F(e){var t,n,i;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(n=(t=N(e.attribName,!0)).prefix,t=t.local,"xmlns"===n&&("xml"===t&&e.attribValue!==p?O(e,"xml: prefix must be bound to "+p+"\nActual: "+e.attribValue):"xmlns"===t&&e.attribValue!==m?O(e,"xmlns: prefix must be bound to "+m+"\nActual: "+e.attribValue):(n=e.tag,i=e.tags[e.tags.length-1]||e,n.ns===i.ns&&(n.ns=Object.create(i.ns)),n.ns[t]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,P(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue=""}function B(e,t){if(e.opt.xmlns){var n=e.tag,i=N(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(O(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix),i=e.tags[e.tags.length-1]||e,n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){P(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var r=0,a=e.attribList.length;r<a;r++){var o=(s=e.attribList[r])[0],s=s[1],l=(u=N(o,!0)).prefix,u=u.local,c=""!==l&&n.ns[l]||"";s={name:o,value:s,prefix:l,local:u,uri:c},l&&"xmlns"!==l&&!c&&(O(e,"Unbound namespace prefix: "+JSON.stringify(l)),s.uri=l),e.tag.attributes[o]=s,P(e,"onattribute",s)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),P(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=C.TEXT:e.state=C.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function U(e){if(!e.tagName)return O(e,"Weird empty close tag."),e.textNode+="</>",e.state=C.TEXT;if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",e.state=C.SCRIPT;P(e,"onscript",e.script),e.script=""}for(var t=e.tags.length,n=e.tagName,i=n=e.strict?n:n[e.looseCase]();t--&&e.tags[t].name!==i;)O(e,"Unexpected close tag");if(t<0)return O(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",e.state=C.TEXT;e.tagName=n;for(var r=e.tags.length;r-- >t;){var a,o=e.tag=e.tags.pop();for(a in e.tagName=e.tag.name,P(e,"onclosetag",e.tagName),o.ns)o.ns[a];var s=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==s.ns&&Object.keys(o.ns).forEach((function(t){var n=o.ns[t];P(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=C.TEXT}function j(e,t){"<"===t?(e.state=C.OPEN_WAKA,e.startTagPosition=e.position):T(_,t)&&(O(e,"Non-whitespace before first tag."),e.textNode=t,e.state=C.TEXT)}function G(e,t){var n="";return t<e.length?e.charAt(t):n}C=r.STATE,String.fromCodePoint||(S=String.fromCharCode,R=Math.floor,t=function(){var e,t=[],n=-1,i=arguments.length;if(!i)return"";for(var r="";++n<i;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||1114111<a||R(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?t.push(a):(e=55296+((a-=65536)>>10),t.push(e,a%1024+56320)),(n+1===i||16384<t.length)&&(r+=S.apply(null,t),t.length=0)}return r},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:t,configurable:!0,writable:!0}):String.fromCodePoint=t)},3947:function(e,t,n){e.exports=r;var i=n(7069).EventEmitter;function r(){i.call(this)}n(7497)(r,i),r.Readable=n(4857),r.Writable=n(6745),r.Duplex=n(5947),r.Transform=n(5773),r.PassThrough=n(5639),r.finished=n(9827),r.pipeline=n(8057),(r.Stream=r).prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},3952:function(e,t,n){var i=n(576).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||i.isEncoding!==r&&r(e))return t||e;throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t,n=this.lastTotal-this.lastNeed,i=(t=this,128!=(192&(i=e)[0])?(t.lastNeed=0,"�"):1<t.lastNeed&&1<i.length?128!=(192&i[1])?(t.lastNeed=1,"�"):2<t.lastNeed&&2<i.length&&128!=(192&i[2])?(t.lastNeed=2,"�"):void 0:void 0);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);if(t=e.toString("utf16le",t)){var n=t.charCodeAt(t.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t;return e=e&&e.length?this.write(e):"",this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function c(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}(t.I=a).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+"�":e},a.prototype.text=function(e,t){n=this,a=t;var n,i,r,a=(r=(s=e).length-1)<a?0:0<=(i=o(s[r]))?(0<i&&(n.lastNeed=i-1),i):--r<a||-2===i?0:0<=(i=o(s[r]))?(0<i&&(n.lastNeed=i-2),i):!(--r<a||-2===i)&&0<=(i=o(s[r]))?(0<i&&(2===i?i=0:n.lastNeed=i-3),i):0;if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=a;var s=e.length-(a-this.lastNeed);return e.copy(this.lastChar,0,s),e.toString("utf8",t,s)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},8450:function(e,t,n){var i,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y,v,A,E,b,w,T,S,R,I,C,L,P,D;function k(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t}function x(e,t){return typeof e===u&&-1!==C(t).indexOf(C(e))}function M(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t==s?e:e.substring(0,500)}function O(e,t){for(var n,i,a,s,u,c=0;c<t.length&&!s;){for(var h=t[c],d=t[c+1],f=n=0;f<h.length&&!s&&h[f];)if(s=h[f++].exec(e))for(i=0;i<d.length;i++)u=s[++n],typeof(a=d[i])===l&&0<a.length?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):r:this[a[0]]=u?a[1].call(this,u,a[2]):r:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):r):this[a]=u||r;c+=2}}function N(e,t){for(var n in t)if(typeof t[n]===l&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(x(t[n][i],e))return"?"===n?r:n}else if(x(t[n],e))return"?"===n?r:n;return e}function F(e,t){var n,a,h,_,y;return typeof e===l&&(t=e,e=r),this instanceof F?(n=typeof i!=s&&i.navigator?i.navigator:r,a=e||(n&&n.userAgent?n.userAgent:""),h=n&&n.userAgentData?n.userAgentData:r,_=t?function(e,t){var n,i={};for(n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(P,t):P,y=n&&n.userAgent==a,this.getBrowser=function(){var e,t={};return t.name=r,t[f]=r,O.call(t,a,_.browser),t.major=typeof(e=t[f])===u?e.replace(/[^\d\.]/g,"").split(".")[0]:r,y&&n&&n.brave&&typeof n.brave.isBrave==o&&(t.name="Brave"),t},this.getCPU=function(){var e={};return e[p]=r,O.call(e,a,_.cpu),e},this.getDevice=function(){var e={};return e[d]=r,e[c]=r,e.type=r,O.call(e,a,_.device),y&&!e.type&&h&&h.mobile&&(e.type=m),y&&"Macintosh"==e[c]&&n&&typeof n.standalone!=s&&n.maxTouchPoints&&2<n.maxTouchPoints&&(e[c]="iPad",e.type=g),e},this.getEngine=function(){var e={};return e.name=r,e[f]=r,O.call(e,a,_.engine),e},this.getOS=function(){var e={};return e.name=r,e[f]=r,O.call(e,a,_.os),y&&!e.name&&h&&"Unknown"!=h.platform&&(e.name=h.platform.replace(/chrome os/i,I).replace(/macos/i,"Mac OS")),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return a},this.setUA=function(e){return a=typeof e===u&&500<e.length?M(e,500):e,this},this.setUA(a),this):new F(e,t).getResult()}i="object"==typeof window?window:this,o="function",s="undefined",l="object",u="string",P={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f="version",[h="name",E="Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,f],[/opios[\/ ]+([\w\.]+)/i],[f,[h,(T="Opera")+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[h,T]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[h,"UC"+(A="Browser")]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[h,"Smart Lenovo "+A]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+A],f],[/\bfocus\/([\w\.]+)/i],[f,[h,(b="Firefox")+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[h,T+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[h,T+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[h,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[f,[h,b]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+A]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+A],f],[/samsungbrowser\/([\w\.]+)/i],[f,[h,(T="Samsung")+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,f],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,"Facebook"],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[h,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[h,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[f,N,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[h,b+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,f],[/(cobalt)\/([\w\.]+)/i],[h,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p="architecture","amd64"]],[/(ia32(?=;))/i],[[p,C=function(e){return e.toLowerCase()}]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",C]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,C]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c="model",[d="vendor",T],[A="type",g="tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[d,T],[A,m="mobile"]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[d,v="Apple"],[A,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,v],[A,g]],[/(macintosh);/i],[c,[d,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[d,"Sharp"],[A,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[d,"Huawei"],[A,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[d,"Huawei"],[A,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[d,R="Xiaomi"],[A,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[d,R],[A,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[d,"OPPO"],[A,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[d,"Vivo"],[A,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[d,"Realme"],[A,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[d,"Motorola"],[A,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[d,"Motorola"],[A,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[d,"LG"],[A,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[d,"LG"],[A,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[d,"Lenovo"],[A,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[d,"Nokia"],[A,m]],[/(pixel c)\b/i],[c,[d,w="Google"],[A,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[d,w],[A,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,S="Sony"],[A,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[d,S],[A,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[d,"OnePlus"],[A,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[d,y="Amazon"],[A,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[d,y],[A,m]],[/(playbook);[-\w\),; ]+(rim)/i],[c,d,[A,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[d,"BlackBerry"],[A,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[d,"ASUS"],[A,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[d,"ASUS"],[A,m]],[/(nexus 9)/i],[c,[d,"HTC"],[A,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[c,/_/g," "],[A,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[d,"Acer"],[A,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[d,"Meizu"],[A,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[d,"Ulefone"],[A,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,c,[A,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,c,[A,g]],[/(surface duo)/i],[c,[d,L="Microsoft"],[A,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[d,"Fairphone"],[A,m]],[/(u304aa)/i],[c,[d,"AT&T"],[A,m]],[/\bsie-(\w*)/i],[c,[d,"Siemens"],[A,m]],[/\b(rct\w+) b/i],[c,[d,"RCA"],[A,g]],[/\b(venue[\d ]{2,7}) b/i],[c,[d,"Dell"],[A,g]],[/\b(q(?:mv|ta)\w+) b/i],[c,[d,"Verizon"],[A,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[d,"Barnes & Noble"],[A,g]],[/\b(tm\d{3}\w+) b/i],[c,[d,"NuVision"],[A,g]],[/\b(k88) b/i],[c,[d,"ZTE"],[A,g]],[/\b(nx\d{3}j) b/i],[c,[d,"ZTE"],[A,m]],[/\b(gen\d{3}) b.+49h/i],[c,[d,"Swiss"],[A,m]],[/\b(zur\d{3}) b/i],[c,[d,"Swiss"],[A,g]],[/\b((zeki)?tb.*\b) b/i],[c,[d,"Zeki"],[A,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],c,[A,g]],[/\b(ns-?\w{0,9}) b/i],[c,[d,"Insignia"],[A,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[d,"NextBook"],[A,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],c,[A,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],c,[A,m]],[/\b(ph-1) /i],[c,[d,"Essential"],[A,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[d,"Envizen"],[A,g]],[/\b(trio[-\w\. ]+) b/i],[c,[d,"MachSpeed"],[A,g]],[/\btu_(1491) b/i],[c,[d,"Rotor"],[A,g]],[/(shield[\w ]+) b/i],[c,[d,"Nvidia"],[A,g]],[/(sprint) (\w+)/i],[d,c,[A,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,L],[A,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,"Zebra"],[A,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,"Zebra"],[A,m]],[/smart-tv.+(samsung)/i],[d,[A,_="smarttv"]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,T],[A,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,"LG"],[A,_]],[/(apple) ?tv/i],[d,[c,v+" TV"],[A,_]],[/crkey/i],[[c,E+"cast"],[d,w],[A,_]],[/droid.+aft(\w+)( bui|\))/i],[c,[d,y],[A,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[d,"Sharp"],[A,_]],[/(bravia[\w ]+)( bui|\))/i],[c,[d,S],[A,_]],[/(mitv-\w{5}) bui/i],[c,[d,R],[A,_]],[/Hbbtv.*(technisat) (.*);/i],[d,c,[A,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,M],[c,M],[A,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[A,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,c,[A,T="console"]],[/droid.+; (shield) bui/i],[c,[d,"Nvidia"],[A,T]],[/(playstation [345portablevi]+)/i],[c,[d,S],[A,T]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[d,L],[A,T]],[/((pebble))app/i],[d,c,[A,R="wearable"]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[d,v],[A,R]],[/droid.+; (glass) \d/i],[c,[d,w],[A,R]],[/droid.+; (wt63?0{2,3})\)/i],[c,[d,"Zebra"],[A,R]],[/(quest( 2| pro)?)/i],[c,[d,"Facebook"],[A,R]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[A,S="embedded"]],[/(aeobc)\b/i],[c,[d,y],[A,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[A,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[A,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[A,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[A,m]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[f,N,L={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,N,L],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,f],[/\(bb(10);/i],[f,[h,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[h,b+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[h,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,I="Chromium OS"],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,f],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,f]]},F.VERSION="1.0.37",F.BROWSER=k([h,f,"major"]),F.CPU=k([p]),F.DEVICE=k([c,d,A,T,m,_,g,R,S]),F.ENGINE=F.OS=k([h,f]),typeof t!=s?(t=e.exports?e.exports=F:t).UAParser=F:n.amdO?(v=function(){return F}.call(t,n,t,e))!==r&&(e.exports=v):typeof i!=s&&(i.UAParser=F),(D=typeof i!=s&&(i.jQuery||i.Zepto))&&!D.ua&&(a=new F,D.ua=a.getResult(),D.ua.get=function(){return a.getUA()},D.ua.set=function(e){a.setUA(e);var t,n=a.getResult();for(t in n)D.ua[t]=n[t]})},6667:function(e,t,n){function i(e){try{if(!n.g.localStorage)return}catch(e){return}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){var n;return i("noDeprecation")?e:(n=!1,function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation"),n=!0}return e.apply(this,arguments)})}},6102:function(){},5564:function(){},6535:function(e){e.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},2940:function(e){e.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},7281:function(e){e.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},8850:function(e){e.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},900:function(e){e.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},7031:function(e){e.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},o={},i.amdO={},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l={},function(){i.d(l,{default:function(){return f}}),i(2540);var e,t,n,r=i(7928),a=i(9138),o=i(3260),s=i(6379),u=(n="application/dash+xml",{create:c,createAll:function(e,t){var i=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),a=0;a<r.length;a++){var o=c(r[a],null);i.push(o)}for(var s=t.querySelectorAll('source[type="'+n+'"]'),l=0;l<s.length;l++){var u=c(function e(t){return/^VIDEO$/i.test(t.nodeName)?t:e(t.parentNode)}(s[l]),null);i.push(u)}return i}});function c(e,i,r){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var a=e.id||e.name||"video element";if(!(i=i||[].slice.call(e.querySelectorAll("source")).filter((function(e){return e.type==n}))[0])&&e.src)(i=document.createElement("source")).src=e.src;else if(!i&&!e.src)return null;return(r=(0,s.A)(r=r||{}).create()).initialize(e,i.src,e.autoplay),(t=t||r.getDebug().getLogger()).debug("Converted "+a+" to dash.js player and added content: "+i.src),e._dashjs_player=r}"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?u.createAll():e=window.setInterval((function(){window.dashjs&&(window.clearInterval(e),u.createAll())}),500):window.addEventListener("load",(function e(){window.removeEventListener("load",e),u.createAll()})));var h=u,d=i(9378),f=(dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=h,dashjs.Debug=d.A,dashjs.supportsMediaSource=r.a,dashjs)}(),l.default)}).call(this,n(75),n(174).Buffer)},function(e,t,n){(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(175),r=n(176),a=n(177);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(e=null===e?new l(t):e).length=t,e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"!=typeof e)return u(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function u(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var r=e,o=t,u=n;if(o.byteLength,u<0||o.byteLength<u)throw new RangeError("'offset' is out of bounds");if(o.byteLength<u+(i||0))throw new RangeError("'length' is out of bounds");return o=void 0===u&&void 0===i?new Uint8Array(o):void 0===i?new Uint8Array(o,u):new Uint8Array(o,u,i),l.TYPED_ARRAY_SUPPORT?(r=o).__proto__=l.prototype:r=d(r,o),r}if("string"!=typeof t){if(u=e,i=t,l.isBuffer(i))return 0!==(u=s(u,o=0|f(i.length))).length&&i.copy(u,0,0,o),u;if(i){if("undefined"!=typeof ArrayBuffer&&i.buffer instanceof ArrayBuffer||"length"in i)return"number"!=typeof i.length||function(e){return e!=e}(i.length)?s(u,0):d(u,i);if("Buffer"===i.type&&a(i.data))return d(u,i.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(r=e,i=t,e=n,l.isEncoding(e="string"==typeof e&&""!==e?e:"utf8"))return(i=(r=s(r,t=0|p(i,e))).write(i,e))!==t?r.slice(0,i):r;throw new TypeError('"encoding" must be a valid string encoding')}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=s(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return k(e).length;default:if(i)return D(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var r,a=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=t,s=n,l=this.length;(!s||s<0||l<s)&&(s=l);for(var u="",c=o=!o||o<0?0:o;c<s;++c)u+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(this[c]);return u;case"utf8":case"utf-8":return E(this,t,n);case"ascii":l=t;var h=n,d="";h=Math.min(this.length,h);for(var f=l;f<h;++f)d+=String.fromCharCode(127&this[f]);return d;case"latin1":case"binary":o=t;var p=n,m="";p=Math.min(this.length,p);for(var g=o;g<p;++g)m+=String.fromCharCode(this[g]);return m;case"base64":return _=this,r=n,0===(y=t)&&r===_.length?i.fromByteArray(_):i.fromByteArray(_.slice(y,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var _=t,y=n,v=this.slice(_,y),A="",b=0;b<v.length;b+=2)A+=String.fromCharCode(v[b]+256*v[b+1]);return A;default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function _(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?r?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:y(e,t,n,i,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(r?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):y(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,i,r){var a=1,o=e.length,s=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r)for(var u=-1,c=n;c<o;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*a}else-1!==u&&(c-=c-u),u=-1;else for(c=n=o<n+s?o-s:n;0<=c;c--){for(var h=!0,d=0;d<s;d++)if(l(e,c+d)!==l(t,d)){h=!1;break}if(h)return c}return-1}function v(e,t,n,i){return x(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function A(e,t,n,i){return x(function(e,t){for(var n,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,r.push(n%256),r.push(i);return r}(t,e.length-n),e,n,i)}function E(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,o,s,l,u=e[r],c=null,h=239<u?4:223<u?3:191<u?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[r+1]))&&127<(l=(31&u)<<6|63&a)&&(c=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(c=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(i.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}var d=i,f=d.length;if(f<=b)return String.fromCharCode.apply(String,d);for(var p="",m=0;m<f;)p+=String.fromCharCode.apply(String,d.slice(m,m+=b));return p}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}),l.alloc=function(e,t,n){return i=null,c(e),e<=0||void 0===t?s(i,e):"string"==typeof n?s(i,e).fill(t,n):s(i,e).fill(t);var i},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;for(var n=l.allocUnsafe(t),i=0,r=0;r<e.length;++r){var o=e[r];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(l.isBuffer(e))return this===e||0===l.compare(this,e);throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n)&&(e+=" ... "),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),(t=void 0===t?0:t)<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=t)return 0;if(r<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(i,r),c=e.slice(t,n),h=0;h<s;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||r<n)&&(n=r),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var a,o,s,l=!1;;)switch(i){case"hex":var u=e,c=t,h=n,d=(c=Number(c)||0,this.length-c);if((!h||d<(h=Number(h)))&&(h=d),(d=u.length)%2!=0)throw new TypeError("Invalid hex string");d/2<h&&(h=d/2);for(var f=0;f<h;++f){var p=parseInt(u.substr(2*f,2),16);if(isNaN(p))return f;this[c+f]=p}return f;case"utf8":case"utf-8":return d=t,s=n,x(D(e,(o=this).length-d),o,d,s);case"ascii":case"latin1":case"binary":return v(this,e,t,n);case"base64":return o=this,s=t,a=n,x(k(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,i,r,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<t||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function S(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function R(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function I(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function C(e,t,n,i,a){return a||I(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function L(e,t,n,i,a){return a||I(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else for(var i=t-e,r=new l(i,void 0),a=0;a<i;++a)r[a]=this[a+e];return r},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||w(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||w(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return t||w(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||w(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||w(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||w(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||w(e,t,this.length);for(var i=t,r=1,a=this[e+--i];0<i&&(r*=256);)a+=this[e+--i]*r;return(r*=128)<=a&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||w(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){return t||w(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},l.prototype.readInt16BE=function(e,t){return t||w(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},l.prototype.readInt32LE=function(e,t){return t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||w(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||w(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||w(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||w(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||T(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||T(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){e=+e,t|=0,i||T(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=0,a=1,o=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/a|0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){e=+e,t|=0,i||T(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var r=n-1,a=1,o=0;for(this[t+r]=255&e;0<=--r&&(a*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/a|0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return C(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return C(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n=n||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),(i=0<i&&i<n?n:i)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var r,a=(i=e.length-t<i-n?e.length-t+n:i)-n;if(this===e&&n<t&&t<i)for(r=a-1;0<=r;--r)e[r+t]=this[r+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){var r;if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length&&(r=e.charCodeAt(0))<256&&(e=r),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(s=t;s<n;++s)this[s]=e;else for(var a=l.isBuffer(e)?e:D(new l(e,i).toString()),o=a.length,s=0;s<n-t;++s)this[s+t]=a[s%o];return this};var P=/[^+\/0-9A-Za-z-_]/g;function D(e,t){t=t||1/0;for(var n,i=e.length,r=null,a=[],o=0;o<i;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===i){-1<(t-=3)&&a.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function k(e){return i.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function x(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(26))},function(e,t,n){t.byteLength=function(e){return 3*((e=l(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){var t,n,i=(o=l(e))[0],o=o[1],s=new a(function(e,t){return 3*(e+t)/4-t}(i,o)),u=0,c=0<o?i-4:i;for(n=0;n<c;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===o&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,s[u++]=255&t),1===o&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,a=[],o=0,s=n-r;o<s;o+=16383)a.push(function(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(function(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}(r));return a.join("")}(e,o,s<o+16383?s:o+16383));return 1==r?(t=e[n-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),a.join("")};for(var i=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)i[s]=o[s],r[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1;for(r=e[t+h],h+=d,a=r&(1<<-c)-1,r>>=-c,c+=s;0<c;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;0<c;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(r?-1:1);o+=Math.pow(2,i),a-=u}return(r?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,l=8*a-r-1,u=(1<<l)-1,c=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,f=i?1:-1;for(a=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-o))<1&&(o--,i*=2),2<=(t+=1<=o+c?h/i:h*Math.pow(2,1-c))*i&&(o++,i/=2),u<=o+c?(s=0,o=u):1<=o+c?(s=(t*i-1)*Math.pow(2,r),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));8<=r;e[n+d]=255&s,d+=f,s/=256,r-=8);for(o=o<<r|s,l+=r;0<l;e[n+d]=255&o,d+=f,o/=256,l-=8);e[n+d-f]|=128*a}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){t.AACDecoder=class{constructor(e){this.sampleRate=e.sampleRate,this.frameDurMs=Math.floor(1024e3/this.sampleRate),this.frameDurSec=this.frameDurMs/1e3}updateConfig(e){this.sampleRate=e.sampleRate,this.frameDurMs=1024e3/this.sampleRate,this.frameDurSec=this.frameDurMs/1e3}_getPktLen(e,t,n){return((3&e)<<11)+(t<<3)+((224&n)>>5)}sliceAACFrames(e,t){var n,i,r,a=[];let o=e;for(let e=0;e<t.length-1;)255==t[e]&&t[e+1]>>4==15?(n=this._getPktLen(t[e+3],t[e+4],t[e+5]))<=0||(i=t.subarray(e,e+n),(r=new Uint8Array(n)).set(i,0),a.push({ptime:o,data:r}),o+=this.frameDurSec,e+=n):e+=1;return a}}},function(e,t){e.exports={DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNEL:1,H264AUD:[0,0,0,1,9,224],H265AUD:[0,0,0,1,70,1,80],DEF_AAC:"aac",DEF_MP3:"mp3",DEF_H265:"h265",DEF_HEVC:"hevc",DEF_H264:"h264",DEF_AVC:"avc",CODEC_OFFSET_TABLE:["hevc","h265","avc","h264","aac","mp3"]}},function(e,t,n){let i=n(181),r=n(103),a=n(77),o=n(31),s=n(5),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12,Reserved:13,"frequency is written explictly":15};function u(){this.listeners={},this.onSamplesCallback=null,this.last_sample_description_index=null,this.firstNalu=null,this.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e]=this.listeners[e].concat(t)},this.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(),this.listeners[e].splice(t,1),-1<t)},this.trigger=function(e){var t,n,i,r=this.listeners[e];if(r)if(2===arguments.length)for(n=r.length,t=0;t<n;++t)r[t].call(this,arguments[1]);else{for(i=[],t=arguments.length,t=1;t<arguments.length;++t)i.push(arguments[t]);for(n=r.length,t=0;t<n;++t)r[t].apply(this,i)}},this.dispose=function(){this.listeners={}}}u.prototype.setStartCode=function(e,t=!1){let n=null;if(t){let t=0;if(0!=e[t]||0!=e[t+1]||0!=e[t+2]||1!=e[t+3])for(var i=e.length-1;t<i;)nalSize=e[a=t]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3],e[t]=0,e[t+1]=0,e[t+2]=0,e[t+3]=1,t=(t+=4)+nalSize;n=e}else(n=new Uint8Array(r.DEFINE_STARTCODE.length+e.length)).set(r.DEFINE_STARTCODE,0),n.set(e,r.DEFINE_STARTCODE.length);var a;return n},u.prototype._concatUint8=function(...e){var t=e.reduce(((e,t)=>e+t.byteLength),0);let n=new Uint8Array(t),i=0;return e.forEach((e=>{n.set(e,i),i+=e.byteLength})),n},u.prototype.setAACAdts=function(e){var t=null,n=this.aacProfile,i=l[this.sampleRate],r=new Uint8Array(7),a=r.length+e.length;return r[0]=255,r[1]=241,r[2]=(n-1<<6)+(i<<2),r[3]=128+(a>>11),r[4]=(2047&a)>>3,r[5]=31+((7&a)<<5),r[6]=252,(t=new Uint8Array(a)).set(r,0),t.set(e,r.length),t},u.prototype.demux=function(){let e=this;e.seekPos=-1,e.mp4boxfile=i.createFile(),e.movieInfo=null,e.videoCodec=null,e.durationMs=-1,e.fps=-1,e.sampleRate=-1,e.aacProfile=2,e.size={width:-1,height:-1},e.bufObject=o(),e.audioNone=!1,e.naluHeader={vps:null,sps:null,pps:null,sei:null},e.mp4boxfile.onError=function(e){},this.mp4boxfile.onReady=function(t){for(var n in(e.movieInfo=t).tracks)("VideoHandler"===t.tracks[n].name||"video"===t.tracks[n].type)&&(0<=t.tracks[n].codec.indexOf("hev")||0<=t.tracks[n].codec.indexOf("hvc")?e.videoCodec=s.CODEC_H265:0<=t.tracks[n].codec.indexOf("avc")&&(e.videoCodec=s.CODEC_H264),0<=t.tracks[n].codec.indexOf("av01")||0<=t.tracks[n].codec.indexOf("av1C"))&&(e.videoCodec=s.CODEC_AV1),t.tracks[n].codec&&0<=t.tracks[n].codec.indexOf("vvc")&&(e.videoCodec=s.CODEC_VVC);let i=null,r=-1;var a;i=t.videoTracks&&t.videoTracks[0]?t.videoTracks[0]:t.tracks.find((e=>0<=e.codec.indexOf("vvc"))),r=i.samples_duration/i.timescale,e.durationMs=1e3*r,e.fps=i.nb_samples/r,e.seekDiffTime=1/e.fps,e.size.width=i.track_width,e.size.height=i.track_height,0<t.audioTracks.length?(e.sampleRate=t.audioTracks[0].audio.sample_rate,a=t.audioTracks[0].codec.split("."),e.aacProfile=a[a.length-1]):e.audioNone=!0,null!=e.onMp4BoxReady&&e.onMp4BoxReady(e.videoCodec),e.initializeAllSourceBuffers(),e.mp4boxfile.start()},e.mp4boxfile.onSamples=function(t,n,i){for(let A=0;A<i.length;A++){var o=i[A];let E=o.data,b=null;if(null!=E&&E&&(e.videoCodec!==s.CODEC_H264&&e.videoCodec!==s.CODEC_H265||!(E.length<4))){var l,u=o.dts/o.timescale;if(1===t){let t=null,i=o.is_sync;if(e.videoCodec===s.CODEC_H265){t=o.description.hvcC;var c=a.GET_NALU_TYPE(E[4]);if((c===r.HEVC_NAL_SEI_PREFIX||c===r.HEVC_NAL_SEI_SUFFIX)&&5==(31&E[6])){let t=0,i=0;for(;255==E[6+ ++i];)t+=255;let r=7+--i;var h=E[r]+t;let a="";for(let e=1;e<=16;e++)a+=E[++r];var d=h-16;try{for(var f=0,p=new Uint8Array(d);p[f]=E[++r],++f<=d;);e.trigger("parse_sei",{data:p,pts:u})}catch(n){}}i=i||c==r.DEFINE_KEY_FRAME||o.is_sync}else if(e.videoCodec===s.CODEC_H264&&(t=o.description.avcC,6==(31&E[4]))&&5==(31&E[5])){let t=0,n=0;for(;255==E[5+ ++n];)t+=255;let i=6+--n;h=E[i]+t;let r="";for(let e=1;e<=16;e++)r+=E[++i];var m=h-16;for(f=0,p=new Uint8Array(m);p[f]=E[++i],++f<=m;);e.trigger("parse_sei",{data:p,pts:u})}if(e.videoCodec!=s.CODEC_VVC)if(i){if(e.videoCodec==s.CODEC_H265?(c=t.nalu_arrays,e.naluHeader.vps=e.setStartCode(c[0][0].data,!1),e.naluHeader.sps=e.setStartCode(c[1][0].data,!1),e.naluHeader.pps=e.setStartCode(c[2][0].data,!1),3<c.length?e.naluHeader.sei=e.setStartCode(c[3][0].data,!1):e.naluHeader.sei=new Uint8Array):e.videoCodec==s.CODEC_H264&&(e.naluHeader.vps=new Uint8Array,e.naluHeader.sps=e.setStartCode(t.SPS[0].nalu,!1),e.naluHeader.pps=e.setStartCode(t.PPS[0].nalu,!1),e.naluHeader.sei=new Uint8Array),e.videoCodec===s.CODEC_H264||e.videoCodec===s.CODEC_H265)if(E[4]===e.naluHeader.vps[4]){var g=e.naluHeader.vps.length+4,_=e.naluHeader.vps.length+e.naluHeader.sps.length+4,y=e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+4;if(e.naluHeader.sei.length<=0&&0<e.naluHeader.sps.length&&E[g]===e.naluHeader.sps[4]&&0<e.naluHeader.pps.length&&E[_]===e.naluHeader.pps[4]&&78===E[y]){let t=0;for(let e=0;e<E.length;e++)if(E[e]===r.SOURCE_CODE_SEI_END&&a.GET_NALU_TYPE(E[e+5])===r.DEFINE_KEY_FRAME){t=e;break}E[3]=1,E[g-1]=1,E[_-1]=1,E[y-1]=1,E[2]=0,E[g-2]=0,E[_-2]=0,E[y-2]=0,E[1]=0,E[g-3]=0,E[_-3]=0,E[y-3]=0,E[t+1]=0,E[t+2]=0,E[t+3]=0,E[t+4]=1,e.naluHeader.vps=null,e.naluHeader.sps=null,e.naluHeader.pps=null,e.naluHeader.vps=new Uint8Array,e.naluHeader.sps=new Uint8Array,e.naluHeader.pps=new Uint8Array}else E=E.subarray(e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+e.naluHeader.sei.length)}else if(4<e.naluHeader.sei.length&&E[4]===e.naluHeader.sei[4]){g=E.subarray(0,10);let t=new Uint8Array(e.naluHeader.vps.length+g.length);t.set(g,0),t.set(e.naluHeader.vps,g.length),t[3]=1,e.naluHeader.vps=null,e.naluHeader.vps=new Uint8Array(t),t=null}else if(0===e.naluHeader.sei.length&&78===E[4]){E=e.setStartCode(E,!0);let t=0;for(let e=0;e<E.length;e++)if(E[e]===r.SOURCE_CODE_SEI_END&&a.GET_NALU_TYPE(E[e+5])===r.DEFINE_KEY_FRAME){t=e;break}e.naluHeader.sei=E.subarray(0,t+1),E=new Uint8Array(E.subarray(t+1))}e.videoCodec===s.CODEC_AV1?(b=new Uint8Array(E.length)).set(E,0):((b=new Uint8Array(e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+e.naluHeader.sei.length+E.length)).set(e.naluHeader.vps,0),b.set(e.naluHeader.sps,e.naluHeader.vps.length),b.set(e.naluHeader.pps,e.naluHeader.vps.length+e.naluHeader.sps.length),b.set(e.naluHeader.sei,e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length),b.set(e.setStartCode(E,!0),e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+e.naluHeader.sei.length))}else e.videoCodec===s.CODEC_AV1?(b=new Uint8Array(E.length)).set(E,0):b=e.setStartCode(E,!0);if(e.videoCodec===s.CODEC_VVC){if(b=e.setStartCode(E,!0),e.last_sample_description_index!==o.description_index)for(l of(e.last_sample_description_index=o.description_index,o.description.vvcC.nalu_arrays))for(var v of l)e.firstNalu=e.firstNalu?e._concatUint8(e.firstNalu,new Uint8Array([0,0,0,1]),v.data):e._concatUint8(new Uint8Array([0,0,0,1]),v.data);e.firstNalu&&(b=e._concatUint8(e.firstNalu,b))}e.bufObject.appendFrame(u,b,!0,i)}else 2==t&&(b=e.setAACAdts(E),e.bufObject.appendFrame(u,b,!1,!0))}}}},u.prototype.appendBufferData=function(e,t=0,n){return e.fileStart=t,this.mp4boxfile.appendBuffer(e)},u.prototype.finishBuffer=function(){this.mp4boxfile.flush()},u.prototype.play=function(){},u.prototype.getVideoCoder=function(){return this.videoCodec},u.prototype.getDurationMs=function(){return this.durationMs},u.prototype.getFPS=function(){return this.fps},u.prototype.getSampleRate=function(){return this.sampleRate},u.prototype.getSize=function(){return this.size},u.prototype.seek=function(e){if(0<=e)return e=this.bufObject.seekIDR(e),parseInt(e)},u.prototype.popBuffer=function(e=1,t=-1){return t<0?null:1==e?this.bufObject.vFrame(t):2==e?this.bufObject.aFrame(t):void 0},u.prototype.addBuffer=function(e){e=e.id,this.mp4boxfile.setExtractionOptions(e,null,{nbSamples:300})},u.prototype.initializeAllSourceBuffers=function(){if(this.movieInfo){var e=this.movieInfo;for(let n=0;n<e.tracks.length;n++){var t=e.tracks[n];this.addBuffer(t)}this.initializeSourceBuffers()}},u.prototype.onInitAppended=function(e){"open"===(e=e.target).ms.readyState&&(e.sampleNum=0,e.removeEventListener("updateend",this.onInitAppended),e.ms.pendingInits--,0===e.ms.pendingInits)&&this.mp4boxfile.start()},u.prototype.initializeSourceBuffers=function(){var e=this.mp4boxfile.initializeSegmentation();for(let n=0;n<e.length;n++){var t=e[n].user;0===n&&(t.ms.pendingInits=0),t.addEventListener("updateend",this.onInitAppended),t.appendBuffer(e[n].buffer),t.segmentIndex=0,t.ms.pendingInits++}},u.prototype.remove=function(){this.bufObject&&this.bufObject.remove&&this.bufObject.remove()},e.exports=u},function(e,t,n){function i(e){if(!(e instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=e,this.dataview=new DataView(e),this.position=0}function r(e,t,n){this._byteOffset=t||0,e instanceof ArrayBuffer?this.buffer=e:"object"==typeof e?(this.dataView=e,t&&(this._byteOffset+=t)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=null==n?r.LITTLE_ENDIAN:n}function a(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)}function o(){var e=[,,,"ES_Descriptor","DecoderConfigDescriptor","DecoderSpecificInfo","SLConfigDescriptor"],t=(this.getDescriptorName=function(t){return e[t]},this),n={};return this.parseOneDescriptor=function(t){var i,r=0,a=t.readUint8();for(i=t.readUint8();128&i;)r=(127&i)<<7,i=t.readUint8();return c.debug("MPEG4DescriptorParser","Found "+(e[a]||"Descriptor "+a)+", size "+(r+=127&i)+" at position "+t.getPosition()),(a=new(e[a]?n[e[a]]:n.Descriptor)(r)).parse(t),a},n.Descriptor=function(e,t){this.tag=e,this.size=t,this.descs=[]},n.Descriptor.prototype.parse=function(e){this.data=e.readUint8Array(this.size)},n.Descriptor.prototype.findDescriptor=function(e){for(var t=0;t<this.descs.length;t++)if(this.descs[t].tag==e)return this.descs[t];return null},n.Descriptor.prototype.parseRemainingDescriptors=function(e){for(var n=e.position;e.position<n+this.size;){var i=t.parseOneDescriptor(e);this.descs.push(i)}},n.ES_Descriptor=function(e){n.Descriptor.call(this,3,e)},n.ES_Descriptor.prototype=new n.Descriptor,n.ES_Descriptor.prototype.parse=function(e){var t;this.ES_ID=e.readUint16(),this.flags=e.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=e.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags?(t=e.readUint8(),this.URL=e.readString(t),this.size-=t+1):this.URL="",32&this.flags?(this.OCR_ES_ID=e.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(e)},n.ES_Descriptor.prototype.getOTI=function(e){var t=this.findDescriptor(4);return t?t.oti:0},n.ES_Descriptor.prototype.getAudioConfig=function(e){var t,n=this.findDescriptor(4);return(n=n&&n.findDescriptor(5))&&n.data?31==(t=(248&n.data[0])>>3)&&2<=n.data.length?32+((7&n.data[0])<<3)+((224&n.data[1])>>5):t:null},n.DecoderConfigDescriptor=function(e){n.Descriptor.call(this,4,e)},n.DecoderConfigDescriptor.prototype=new n.Descriptor,n.DecoderConfigDescriptor.prototype.parse=function(e){this.oti=e.readUint8(),this.streamType=e.readUint8(),this.bufferSize=e.readUint24(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32(),this.size-=13,this.parseRemainingDescriptors(e)},n.DecoderSpecificInfo=function(e){n.Descriptor.call(this,5,e)},n.DecoderSpecificInfo.prototype=new n.Descriptor,n.SLConfigDescriptor=function(e){n.Descriptor.call(this,6,e)},n.SLConfigDescriptor.prototype=new n.Descriptor,this}function s(){}function l(){}function u(e){this.stream=e||new a,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1}var c=(new Date,{setLogLevel:function(e){e==this.debug||e==this.info||e==this.warn||this.error},debug:function(e,t){void 0===console.debug&&(console.debug=console.log)},log:function(e,t){this.debug(e.msg)},info:function(e,t){},warn:function(e,t){},error:function(e,t){}}),h=(c.getDurationString=function(e,t){var n;function i(e,t){for(var n=(""+e).split(".");n[0].length<t;)n[0]="0"+n[0];return n.join(".")}e<0?(n=!0,e=-e):n=!1,e/=t||1;var r=(e-=3600*(t=Math.floor(e/3600)),Math.floor(e/60)),a=1e3*(e-=60*r);return a-=1e3*(e=Math.floor(e)),a=Math.floor(a),(n?"-":"")+t+":"+i(r,2)+":"+i(e,2)+"."+i(a,3)},c.printRanges=function(e){var t=e.length;if(0<t){for(var n="",i=0;i<t;i++)0<i&&(n+=","),n+="["+c.getDurationString(e.start(i))+","+c.getDurationString(e.end(i))+"]";return n}return"(empty)"},t.Log=c,i.prototype.getPosition=function(){return this.position},i.prototype.getEndPosition=function(){return this.buffer.byteLength},i.prototype.getLength=function(){return this.buffer.byteLength},i.prototype.seek=function(e){return e=Math.max(0,Math.min(this.buffer.byteLength,e)),this.position=isNaN(e)||!isFinite(e)?0:e,!0},i.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},i.prototype.readAnyInt=function(e,t){var n=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n=t?this.dataview.getInt8(this.position):this.dataview.getUint8(this.position);break;case 2:n=t?this.dataview.getInt16(this.position):this.dataview.getUint16(this.position);break;case 3:if(t)throw"No method for reading signed 24 bits values";n=this.dataview.getUint8(this.position)<<16,n=(n|=this.dataview.getUint8(this.position+1)<<8)|this.dataview.getUint8(this.position+2);break;case 4:n=t?this.dataview.getInt32(this.position):this.dataview.getUint32(this.position);break;case 8:if(t)throw"No method for reading signed 64 bits values";n=this.dataview.getUint32(this.position)<<32,n|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,n}throw"Not enough bytes in buffer"},i.prototype.readUint8=function(){return this.readAnyInt(1,!1)},i.prototype.readUint16=function(){return this.readAnyInt(2,!1)},i.prototype.readUint24=function(){return this.readAnyInt(3,!1)},i.prototype.readUint32=function(){return this.readAnyInt(4,!1)},i.prototype.readUint64=function(){return this.readAnyInt(8,!1)},i.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readUint8());return t}throw"Not enough bytes in buffer"},i.prototype.readCString=function(){for(var e=[];;){var t=this.readUint8();if(0===t)break;e.push(t)}return String.fromCharCode.apply(null,e)},i.prototype.readInt8=function(){return this.readAnyInt(1,!0)},i.prototype.readInt16=function(){return this.readAnyInt(2,!0)},i.prototype.readInt32=function(){return this.readAnyInt(4,!0)},i.prototype.readInt64=function(){return this.readAnyInt(8,!1)},i.prototype.readUint8Array=function(e){for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readUint8();return t},i.prototype.readInt16Array=function(e){for(var t=new Int16Array(e),n=0;n<e;n++)t[n]=this.readInt16();return t},i.prototype.readUint16Array=function(e){for(var t=new Int16Array(e),n=0;n<e;n++)t[n]=this.readUint16();return t},i.prototype.readUint32Array=function(e){for(var t=new Uint32Array(e),n=0;n<e;n++)t[n]=this.readUint32();return t},i.prototype.readInt32Array=function(e){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=this.readInt32();return t},t.MP4BoxStream=i,(r.prototype={}).getPosition=function(){return this.position},r.prototype._realloc=function(e){if(this._dynamicSize){var t=this._byteOffset+this.position+e,n=this._buffer.byteLength;if(t<=n)t>this._byteLength&&(this._byteLength=t);else{for(n<1&&(n=1);n<t;)n*=2;e=new ArrayBuffer(n);var i=new Uint8Array(this._buffer);new Uint8Array(e,0,i.length).set(i),this.buffer=e,this._byteLength=t}}},r.prototype._trimAlloc=function(){var e,t,n;this._byteLength!=this._buffer.byteLength&&(e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),n=new Uint8Array(this._buffer,0,t.length),t.set(n),this.buffer=e)},r.BIG_ENDIAN=!1,r.LITTLE_ENDIAN=!0,r.prototype._byteLength=0,Object.defineProperty(r.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(r.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(r.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),r.prototype.seek=function(e){e=Math.max(0,Math.min(this.byteLength,e)),this.position=isNaN(e)||!isFinite(e)?0:e},r.prototype.isEof=function(){return this.position>=this._byteLength},r.prototype.mapUint8Array=function(e){this._realloc(+e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=+e,t},r.prototype.readInt32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Int32Array(e);return r.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),r.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},r.prototype.readInt16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var n=new Int16Array(e);return r.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),r.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},r.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Int8Array(e);return r.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},r.prototype.readUint32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Uint32Array(e);return r.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),r.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},r.prototype.readUint16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var n=new Uint16Array(e);return r.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),r.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},r.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Uint8Array(e);return r.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},r.prototype.readFloat64Array=function(e,t){e=null==e?this.byteLength-this.position/8:e;var n=new Float64Array(e);return r.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),r.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},r.prototype.readFloat32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var n=new Float32Array(e);return r.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),r.arrayToNative(n,null==t?this.endianness:t),this.position+=n.byteLength,n},r.prototype.readInt32=function(e){return e=this._dataView.getInt32(this.position,null==e?this.endianness:e),this.position+=4,e},r.prototype.readInt16=function(e){return e=this._dataView.getInt16(this.position,null==e?this.endianness:e),this.position+=2,e},r.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},r.prototype.readUint32=function(e){return e=this._dataView.getUint32(this.position,null==e?this.endianness:e),this.position+=4,e},r.prototype.readUint16=function(e){return e=this._dataView.getUint16(this.position,null==e?this.endianness:e),this.position+=2,e},r.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},r.prototype.readFloat32=function(e){return e=this._dataView.getFloat32(this.position,null==e?this.endianness:e),this.position+=4,e},r.prototype.readFloat64=function(e){return e=this._dataView.getFloat64(this.position,null==e?this.endianness:e),this.position+=8,e},r.endianness=0<new Int8Array(new Int16Array([1]).buffer)[0],r.memcpy=function(e,t,n,i,r){e=new Uint8Array(e,t,r),t=new Uint8Array(n,i,r),e.set(t)},r.arrayToNative=function(e,t){return t==this.endianness?e:this.flipArrayEndianness(e)},r.nativeToEndian=function(e,t){return this.endianness==t?e:this.flipArrayEndianness(e)},r.flipArrayEndianness=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=0;n<e.byteLength;n+=e.BYTES_PER_ELEMENT)for(var i=n+e.BYTES_PER_ELEMENT-1,r=n;r<i;i--,r++){var a=t[r];t[r]=t[i],t[i]=a}return e},r.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return String.fromCharCode.apply(null,t)},r.prototype.readString=function(e,t){return null==t||"ASCII"==t?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==e?this.byteLength-this.position:e)]):new TextDecoder(t).decode(this.mapUint8Array(e))},r.prototype.readCString=function(e){var t=this.byteLength-this.position,n=new Uint8Array(this._buffer,this._byteOffset+this.position),i=t;null!=e&&(i=Math.min(e,t));for(var r=0;r<i&&0!==n[r];r++);var a=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(r)]);return null!=e?this.position+=i-r:r!=t&&(this.position+=1),a},Math.pow(2,32)),d=(r.prototype.readInt64=function(){return this.readInt32()*h+this.readUint32()},r.prototype.readUint64=function(){return this.readUint32()*h+this.readUint32()},r.prototype.readInt64=function(){return this.readUint32()*h+this.readUint32()},r.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},(t.DataStream=r).prototype.save=function(e){var t=new Blob([this.buffer]);if(!window.URL||!URL.createObjectURL)throw"DataStream.save: Can't create object URL.";t=window.URL.createObjectURL(t);var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("href",t),n.setAttribute("download",e),n.setAttribute("target","_self"),n.click(),window.URL.revokeObjectURL(t)},r.prototype._dynamicSize=!0,Object.defineProperty(r.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),r.prototype.shift=function(e){var t=new ArrayBuffer(this._byteLength-e),n=new Uint8Array(t),i=new Uint8Array(this._buffer,e,n.length);n.set(i),this.buffer=t,this.position-=e},r.prototype.writeInt32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeInt32(e[n],t)},r.prototype.writeInt16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeInt16(e[n],t)},r.prototype.writeInt8Array=function(e){if(this._realloc(+e.length),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var t=0;t<e.length;t++)this.writeInt8(e[t])},r.prototype.writeUint32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeUint32(e[n],t)},r.prototype.writeUint16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeUint16(e[n],t)},r.prototype.writeUint8Array=function(e){if(this._realloc(+e.length),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},r.prototype.writeFloat64Array=function(e,t){if(this._realloc(8*e.length),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeFloat64(e[n],t)},r.prototype.writeFloat32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,t);else for(var n=0;n<e.length;n++)this.writeFloat32(e[n],t)},r.prototype.writeInt32=function(e,t){this._realloc(4),this._dataView.setInt32(this.position,e,null==t?this.endianness:t),this.position+=4},r.prototype.writeInt16=function(e,t){this._realloc(2),this._dataView.setInt16(this.position,e,null==t?this.endianness:t),this.position+=2},r.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},r.prototype.writeUint32=function(e,t){this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},r.prototype.writeUint16=function(e,t){this._realloc(2),this._dataView.setUint16(this.position,e,null==t?this.endianness:t),this.position+=2},r.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},r.prototype.writeFloat32=function(e,t){this._realloc(4),this._dataView.setFloat32(this.position,e,null==t?this.endianness:t),this.position+=4},r.prototype.writeFloat64=function(e,t){this._realloc(8),this._dataView.setFloat64(this.position,e,null==t?this.endianness:t),this.position+=8},r.prototype.writeUCS2String=function(e,t,n){null==n&&(n=e.length);for(var i=0;i<e.length&&i<n;i++)this.writeUint16(e.charCodeAt(i),t);for(;i<n;i++)this.writeUint16(0)},r.prototype.writeString=function(e,t,n){var i=0;if(null==t||"ASCII"==t)if(null!=n){var r=Math.min(e.length,n);for(i=0;i<r;i++)this.writeUint8(e.charCodeAt(i));for(;i<n;i++)this.writeUint8(0)}else for(i=0;i<e.length;i++)this.writeUint8(e.charCodeAt(i));else this.writeUint8Array(new TextEncoder(t).encode(e.substring(0,n)))},r.prototype.writeCString=function(e,t){var n=0;if(null!=t){var i=Math.min(e.length,t);for(n=0;n<i;n++)this.writeUint8(e.charCodeAt(n));for(;n<t;n++)this.writeUint8(0)}else{for(n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));this.writeUint8(0)}},r.prototype.writeStruct=function(e,t){for(var n=0;n<e.length;n+=2){var i=e[n+1];this.writeType(i,t[e[n]],t)}},r.prototype.writeType=function(e,t,n){var i;if("function"==typeof e)return e(this,t);if("object"==typeof e&&!(e instanceof Array))return e.set(this,t,n);var a=null,o="ASCII";switch(n=this.position,"string"==typeof e&&/:/.test(e)&&(e=(i=e.split(":"))[0],a=parseInt(i[1])),"string"==typeof e&&/,/.test(e)&&(e=(i=e.split(","))[0],o=parseInt(i[1])),e){case"uint8":this.writeUint8(t);break;case"int8":this.writeInt8(t);break;case"uint16":this.writeUint16(t,this.endianness);break;case"int16":this.writeInt16(t,this.endianness);break;case"uint32":this.writeUint32(t,this.endianness);break;case"int32":this.writeInt32(t,this.endianness);break;case"float32":this.writeFloat32(t,this.endianness);break;case"float64":this.writeFloat64(t,this.endianness);break;case"uint16be":this.writeUint16(t,r.BIG_ENDIAN);break;case"int16be":this.writeInt16(t,r.BIG_ENDIAN);break;case"uint32be":this.writeUint32(t,r.BIG_ENDIAN);break;case"int32be":this.writeInt32(t,r.BIG_ENDIAN);break;case"float32be":this.writeFloat32(t,r.BIG_ENDIAN);break;case"float64be":this.writeFloat64(t,r.BIG_ENDIAN);break;case"uint16le":this.writeUint16(t,r.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(t,r.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(t,r.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(t,r.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(t,r.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(t,r.LITTLE_ENDIAN);break;case"cstring":this.writeCString(t,a);break;case"string":this.writeString(t,o,a);break;case"u16string":this.writeUCS2String(t,this.endianness,a);break;case"u16stringle":this.writeUCS2String(t,r.LITTLE_ENDIAN,a);break;case"u16stringbe":this.writeUCS2String(t,r.BIG_ENDIAN,a);break;default:if(3!=e.length)this.writeStruct(e,t);else for(var s=e[1],l=0;l<t.length;l++)this.writeType(s,t[l])}null!=a&&(this.position=n,this._realloc(a),this.position=n+a)},r.prototype.writeUint64=function(e){var t=Math.floor(e/h);this.writeUint32(t),this.writeUint32(4294967295&e)},r.prototype.writeUint24=function(e){this.writeUint8((16711680&e)>>16),this.writeUint8((65280&e)>>8),this.writeUint8(255&e)},r.prototype.adjustUint32=function(e,t){var n=this.position;this.seek(e),this.writeUint32(t),this.seek(n)},r.prototype.mapInt32Array=function(e,t){this._realloc(4*e);var n=new Int32Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},r.prototype.mapInt16Array=function(e,t){this._realloc(2*e);var n=new Int16Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(n,null==t?this.endianness:t),this.position+=2*e,n},r.prototype.mapInt8Array=function(e){this._realloc(+e);var t=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=+e,t},r.prototype.mapUint32Array=function(e,t){this._realloc(4*e);var n=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},r.prototype.mapUint16Array=function(e,t){this._realloc(2*e);var n=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(n,null==t?this.endianness:t),this.position+=2*e,n},r.prototype.mapFloat64Array=function(e,t){this._realloc(8*e);var n=new Float64Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(n,null==t?this.endianness:t),this.position+=8*e,n},r.prototype.mapFloat32Array=function(e,t){this._realloc(4*e);var n=new Float32Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(n,null==t?this.endianness:t),this.position+=4*e,n},(a.prototype=new r(new ArrayBuffer,0,r.BIG_ENDIAN)).initialized=function(){var e;return-1<this.bufferIndex||(0<this.buffers.length?0===(e=this.buffers[0]).fileStart?(this.buffer=e,this.bufferIndex=0,c.debug("MultiBufferStream","Stream ready for parsing"),!0):(c.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1):(c.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(e,t){c.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+t.byteLength));var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer},a.prototype.reduceBuffer=function(e,t,n){var i=new Uint8Array(n);return i.set(new Uint8Array(e,t,n)),i.buffer.fileStart=e.fileStart+t,i.buffer.usedBytes=0,i.buffer},a.prototype.insertBuffer=function(e){for(var t=!0,n=0;n<this.buffers.length;n++){var i=this.buffers[n];if(e.fileStart<=i.fileStart){if(e.fileStart===i.fileStart){if(e.byteLength>i.byteLength){this.buffers.splice(n,1),n--;continue}c.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring")}else e.fileStart+e.byteLength<=i.fileStart||(e=this.reduceBuffer(e,0,i.fileStart-e.fileStart)),c.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(n,0,e),0===n&&(this.buffer=e);t=!1;break}if(e.fileStart<i.fileStart+i.byteLength){i=i.fileStart+i.byteLength-e.fileStart;var r=e.byteLength-i;if(!(0<r)){t=!1;break}e=this.reduceBuffer(e,i,r)}}t&&(c.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),0===n)&&(this.buffer=e)},a.prototype.logBufferLevel=function(e){for(var t,n,i=[],r="",a=0,o=0,s=0;s<this.buffers.length;s++)t=this.buffers[s],0===s?(i.push(n={}),n.start=t.fileStart,n.end=t.fileStart+t.byteLength,r+="["+n.start+"-"):n.end===t.fileStart?n.end=t.fileStart+t.byteLength:((n={}).start=t.fileStart,r+=i[i.length-1].end-1+"], ["+n.start+"-",n.end=t.fileStart+t.byteLength,i.push(n)),a+=t.usedBytes,o+=t.byteLength;0<i.length&&(r+=n.end-1+"]"),e=e?c.info:c.debug,0===this.buffers.length?e("MultiBufferStream","No more buffer in memory"):e("MultiBufferStream",this.buffers.length+" stored buffer(s) ("+a+"/"+o+" bytes), continuous ranges: "+r)},a.prototype.cleanBuffers=function(){for(var e,t=0;t<this.buffers.length;t++)(e=this.buffers[t]).usedBytes===e.byteLength&&(c.debug("MultiBufferStream","Removing buffer #"+t),this.buffers.splice(t,1),t--)},a.prototype.mergeNextBuffer=function(){var e,t,n,i;return this.bufferIndex+1<this.buffers.length&&(i=this.buffers[this.bufferIndex+1]).fileStart===this.buffer.fileStart+this.buffer.byteLength&&(e=this.buffer.byteLength,t=this.buffer.usedBytes,n=this.buffer.fileStart,this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,i),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=t,this.buffer.fileStart=n,c.debug("ISOFile","Concatenating buffer for box parsing (length: "+e+"->"+this.buffer.byteLength+")"),!0)},a.prototype.findPosition=function(e,t,n){for(var i=null,r=-1,a=!0===e?0:this.bufferIndex;a<this.buffers.length&&(i=this.buffers[a]).fileStart<=t;)r=a,n&&(i.fileStart+i.byteLength<=t?i.usedBytes=i.byteLength:i.usedBytes=t-i.fileStart,this.logBufferLevel()),a++;return-1!==r&&(i=this.buffers[r]).fileStart+i.byteLength>=t?(c.debug("MultiBufferStream","Found position in existing buffer #"+r),r):-1},a.prototype.findEndContiguousBuf=function(e){e=void 0!==e?e:this.bufferIndex;var t,n,i=this.buffers[e];if(this.buffers.length>e+1)for(t=e+1;t<this.buffers.length&&(n=this.buffers[t]).fileStart===i.fileStart+i.byteLength;t++)i=n;return i.fileStart+i.byteLength},a.prototype.getEndFilePositionAfter=function(e){var t=this.findPosition(!0,e,!1);return-1!==t?this.findEndContiguousBuf(t):e},a.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},a.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},a.prototype.seek=function(e,t,n){return-1!==(t=this.findPosition(t,e,n))?(this.buffer=this.buffers[t],this.bufferIndex=t,this.position=e-this.buffer.fileStart,c.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(c.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},a.prototype.getPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},a.prototype.getLength=function(){return this.byteLength},a.prototype.getEndPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=a,t.MPEG4DescriptorParser=o,{ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){d.FullBox.prototype=new d.Box,d.ContainerBox.prototype=new d.Box,d.SampleEntry.prototype=new d.Box,d.TrackGroupTypeBox.prototype=new d.FullBox,d.BASIC_BOXES.forEach((function(e){d.createBoxCtor(e)})),d.FULL_BOXES.forEach((function(e){d.createFullBoxCtor(e)})),d.CONTAINER_BOXES.forEach((function(e){d.createContainerBoxCtor(e[0],null,e[1])}))},Box:function(e,t,n){this.type=e,this.size=t,this.uuid=n},FullBox:function(e,t,n){d.Box.call(this,e,t,n),this.flags=0,this.version=0},ContainerBox:function(e,t,n){d.Box.call(this,e,t,n),this.boxes=[]},SampleEntry:function(e,t,n,i){d.ContainerBox.call(this,e,t),this.hdr_size=n,this.start=i},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,t){d.FullBox.call(this,e,t)},createBoxCtor:function(e,t){d.boxCodes.push(e),d[e+"Box"]=function(t){d.Box.call(this,e,t)},d[e+"Box"].prototype=new d.Box,t&&(d[e+"Box"].prototype.parse=t)},createFullBoxCtor:function(e,t){d[e+"Box"]=function(t){d.FullBox.call(this,e,t)},d[e+"Box"].prototype=new d.FullBox,d[e+"Box"].prototype.parse=function(e){this.parseFullHeader(e),t&&t.call(this,e)}},addSubBoxArrays:function(e){if(e)for(var t=(this.subBoxNames=e).length,n=0;n<t;n++)this[e[n]+"s"]=[]},createContainerBoxCtor:function(e,t,n){d[e+"Box"]=function(t){d.ContainerBox.call(this,e,t),d.addSubBoxArrays.call(this,n)},d[e+"Box"].prototype=new d.ContainerBox,t&&(d[e+"Box"].prototype.parse=t)},createMediaSampleEntryCtor:function(e,t,n){d.sampleEntryCodes[e]=[],d[e+"SampleEntry"]=function(e,t){d.SampleEntry.call(this,e,t),d.addSubBoxArrays.call(this,n)},d[e+"SampleEntry"].prototype=new d.SampleEntry,t&&(d[e+"SampleEntry"].prototype.parse=t)},createSampleEntryCtor:function(e,t,n,i){d.sampleEntryCodes[e].push(t),d[t+"SampleEntry"]=function(n){d[e+"SampleEntry"].call(this,t,n),d.addSubBoxArrays.call(this,i)},d[t+"SampleEntry"].prototype=new d[e+"SampleEntry"],n&&(d[t+"SampleEntry"].prototype.parse=n)},createEncryptedSampleEntryCtor:function(e,t,n){d.createSampleEntryCtor.call(this,e,t,n,["sinf"])},createSampleGroupCtor:function(e,t){d[e+"SampleGroupEntry"]=function(t){d.SampleGroupEntry.call(this,e,t)},d[e+"SampleGroupEntry"].prototype=new d.SampleGroupEntry,t&&(d[e+"SampleGroupEntry"].prototype.parse=t)},createTrackGroupCtor:function(e,t){d[e+"TrackGroupTypeBox"]=function(t){d.TrackGroupTypeBox.call(this,e,t)},d[e+"TrackGroupTypeBox"].prototype=new d.TrackGroupTypeBox,t&&(d[e+"TrackGroupTypeBox"].prototype.parse=t)},createUUIDBox:function(e,t,n,i){d.UUIDs.push(e),d.UUIDBoxes[e]=function(i){(t?d.FullBox:n?d.ContainerBox:d.Box).call(this,"uuid",i,e)},d.UUIDBoxes[e].prototype=new(t?d.FullBox:n?d.ContainerBox:d.Box),i&&(d.UUIDBoxes[e].prototype.parse=t?function(e){this.parseFullHeader(e),i&&i.call(this,e)}:i)}}),f=(d.initialize(),d.TKHD_FLAG_ENABLED=1,d.TKHD_FLAG_IN_MOVIE=2,d.TKHD_FLAG_IN_PREVIEW=4,d.TFHD_FLAG_BASE_DATA_OFFSET=1,d.TFHD_FLAG_SAMPLE_DESC=2,d.TFHD_FLAG_SAMPLE_DUR=8,d.TFHD_FLAG_SAMPLE_SIZE=16,d.TFHD_FLAG_SAMPLE_FLAGS=32,d.TFHD_FLAG_DUR_EMPTY=65536,d.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,d.TRUN_FLAGS_DATA_OFFSET=1,d.TRUN_FLAGS_FIRST_FLAG=4,d.TRUN_FLAGS_DURATION=256,d.TRUN_FLAGS_SIZE=512,d.TRUN_FLAGS_FLAGS=1024,d.TRUN_FLAGS_CTS_OFFSET=2048,d.Box.prototype.add=function(e){return this.addBox(new d[e+"Box"])},d.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},d.Box.prototype.set=function(e,t){return this[e]=t,this},d.Box.prototype.addEntry=function(e,t){return this[t=t||"entries"]||(this[t]=[]),this[t].push(e),this},(t.BoxParser=d).parseUUID=function(e){return d.parseHex16(e)},d.parseHex16=function(e){for(var t="",n=0;n<16;n++){var i=e.readUint8().toString(16);t+=1===i.length?"0"+i:i}return t},d.parseOneBox=function(e,t,n){var i,r,a=e.getPosition(),o=0;if(e.getEndPosition()-a<8)return c.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:d.ERR_NOT_ENOUGH_DATA};if(n&&n<8)return c.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:d.ERR_NOT_ENOUGH_DATA};var s=e.readUint32(),l=e.readString(4),u=l;if(c.debug("BoxParser","Found box of type '"+l+"' and size "+s+" at position "+a),o=8,"uuid"==l){if(e.getEndPosition()-e.getPosition()<16||n-o<16)return e.seek(a),c.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:d.ERR_NOT_ENOUGH_DATA};o+=16,u=r=d.parseUUID(e)}if(1==s){if(e.getEndPosition()-e.getPosition()<8||n&&n-o<8)return e.seek(a),c.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+l+'" box'),{code:d.ERR_NOT_ENOUGH_DATA};s=e.readUint64(),o+=8}else if(0===s)if(n)s=n;else if("mdat"!==l)return c.error("BoxParser","Unlimited box size not supported for type: '"+l+"'"),i=new d.Box(l,s),{code:d.OK,box:i,size:i.size};return 0!==s&&s<o?(c.error("BoxParser","Box of type "+l+" has an invalid size "+s+" (too small to be a box)"),{code:d.ERR_NOT_ENOUGH_DATA,type:l,size:s,hdr_size:o,start:a}):0!==s&&n&&n<s?(c.error("BoxParser","Box of type '"+l+"' has a size "+s+" greater than its container size "+n),{code:d.ERR_NOT_ENOUGH_DATA,type:l,size:s,hdr_size:o,start:a}):0!==s&&a+s>e.getEndPosition()?(e.seek(a),c.info("BoxParser","Not enough data in stream to parse the entire '"+l+"' box"),{code:d.ERR_NOT_ENOUGH_DATA,type:l,size:s,hdr_size:o,start:a}):t?{code:d.OK,type:l,size:s,hdr_size:o,start:a}:(d[l+"Box"]?i=new d[l+"Box"](s):"uuid"!==l?(c.warn("BoxParser","Unknown box type: '"+l+"'"),(i=new d.Box(l,s)).has_unparsed_data=!0):d.UUIDBoxes[r]?i=new d.UUIDBoxes[r](s):(c.warn("BoxParser","Unknown uuid type: '"+r+"'"),(i=new d.Box(l,s)).uuid=r,i.has_unparsed_data=!0),i.hdr_size=o,i.start=a,i.write===d.Box.prototype.write&&"mdat"!==i.type&&(c.info("BoxParser","'"+u+"' box writing not yet implemented, keeping unparsed data in memory for later write"),i.parseDataAndRewind(e)),i.parse(e),(n=e.getPosition()-(i.start+i.size))<0?(c.warn("BoxParser","Parsing of box '"+u+"' did not read the entire indicated box data size (missing "+-n+" bytes), seeking forward"),e.seek(i.start+i.size)):0<n&&(c.error("BoxParser","Parsing of box '"+u+"' read "+n+" more bytes than the indicated box data size, seeking backwards"),0!==i.size)&&e.seek(i.start+i.size),{code:d.OK,box:i,size:i.size})},d.Box.prototype.parse=function(e){"mdat"!=this.type?this.data=e.readUint8Array(this.size-this.hdr_size):0===this.size?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},d.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},d.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},d.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},d.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},d.ContainerBox.prototype.parse=function(e){for(;e.getPosition()<this.start+this.size;){if((n=d.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==d.OK)return;var t,n=n.box;this.boxes.push(n),this.subBoxNames&&-1!=this.subBoxNames.indexOf(n.type)?this[this.subBoxNames[this.subBoxNames.indexOf(n.type)]+"s"].push(n):this[t="uuid"!==n.type?n.type:n.uuid]?c.warn("Box of type "+t+" already stored in field of this type"):this[t]=n}},d.Box.prototype.parseLanguage=function(e){this.language=e.readUint16(),(e=[])[0]=this.language>>10&31,e[1]=this.language>>5&31,e[2]=31&this.language,this.languageString=String.fromCharCode(e[0]+96,e[1]+96,e[2]+96)},d.SAMPLE_ENTRY_TYPE_VISUAL="Visual",d.SAMPLE_ENTRY_TYPE_AUDIO="Audio",d.SAMPLE_ENTRY_TYPE_HINT="Hint",d.SAMPLE_ENTRY_TYPE_METADATA="Metadata",d.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",d.SAMPLE_ENTRY_TYPE_SYSTEM="System",d.SAMPLE_ENTRY_TYPE_TEXT="Text",d.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},d.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},d.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},d.SampleEntry.prototype.parseFooter=function(e){d.ContainerBox.prototype.parse.call(this,e)},d.createMediaSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_HINT),d.createMediaSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_METADATA),d.createMediaSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SUBTITLE),d.createMediaSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SYSTEM),d.createMediaSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_TEXT),d.createMediaSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,(function(e){var t;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),t=Math.min(31,e.readUint8()),this.compressorname=e.readString(t),t<31&&e.readString(31-t),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)})),d.createMediaSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_AUDIO,(function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),d.createEncryptedSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),d.createEncryptedSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),d.createEncryptedSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),d.createEncryptedSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),d.createEncryptedSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_TEXT,"enct"),d.createEncryptedSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_METADATA,"encm"),d.createBoxCtor("a1lx",(function(e){var t=16*(1+(1&e.readUint8()));this.layer_size=[];for(var n=0;n<3;n++)this.layer_size[n]=16==t?e.readUint16():e.readUint32()})),d.createBoxCtor("a1op",(function(e){this.op_index=e.readUint8()})),d.createFullBoxCtor("auxC",(function(e){this.aux_type=e.readCString();var t=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(t)})),d.createBoxCtor("av1C",(function(e){var t=e.readUint8();if(t>>7&!1)c.error("av1C marker problem");else if(this.version=127&t,1!==this.version)c.error("av1C version "+this.version+" not supported");else if(t=e.readUint8(),this.seq_profile=t>>5&7,this.seq_level_idx_0=31&t,t=e.readUint8(),this.seq_tier_0=t>>7&1,this.high_bitdepth=t>>6&1,this.twelve_bit=t>>5&1,this.monochrome=t>>4&1,this.chroma_subsampling_x=t>>3&1,this.chroma_subsampling_y=t>>2&1,this.chroma_sample_position=3&t,t=e.readUint8(),this.reserved_1=t>>5&7,0!==this.reserved_1)c.error("av1C reserved_1 parsing problem");else{if(this.initial_presentation_delay_present=t>>4&1,1===this.initial_presentation_delay_present)this.initial_presentation_delay_minus_one=15&t;else if(this.reserved_2=15&t,0!==this.reserved_2)return void c.error("av1C reserved_2 parsing problem");t=this.size-this.hdr_size-4,this.configOBUs=e.readUint8Array(t)}})),d.createBoxCtor("avcC",(function(e){var t,n;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=3&e.readUint8(),this.nb_SPS_nalus=31&e.readUint8(),n=this.size-this.hdr_size-6,this.SPS=[],t=0;t<this.nb_SPS_nalus;t++)this.SPS[t]={},this.SPS[t].length=e.readUint16(),this.SPS[t].nalu=e.readUint8Array(this.SPS[t].length),n-=2+this.SPS[t].length;for(this.nb_PPS_nalus=e.readUint8(),n--,this.PPS=[],t=0;t<this.nb_PPS_nalus;t++)this.PPS[t]={},this.PPS[t].length=e.readUint16(),this.PPS[t].nalu=e.readUint8Array(this.PPS[t].length),n-=2+this.PPS[t].length;0<n&&(this.ext=e.readUint8Array(n))})),d.createBoxCtor("btrt",(function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()})),d.createBoxCtor("clap",(function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()})),d.createBoxCtor("clli",(function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()})),d.createFullBoxCtor("co64",(function(e){var t,n=e.readUint32();if(this.chunk_offsets=[],0===this.version)for(t=0;t<n;t++)this.chunk_offsets.push(e.readUint64())})),d.createFullBoxCtor("CoLL",(function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()})),d.createBoxCtor("colr",(function(e){var t;this.colour_type=e.readString(4),"nclx"===this.colour_type?(this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16(),t=e.readUint8(),this.full_range_flag=t>>7):"rICC"!==this.colour_type&&"prof"!==this.colour_type||(this.ICC_profile=e.readUint8Array(this.size-4))})),d.createFullBoxCtor("cprt",(function(e){this.parseLanguage(e),this.notice=e.readCString()})),d.createFullBoxCtor("cslg",(function(e){0===this.version&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())})),d.createFullBoxCtor("ctts",(function(e){var t,n=e.readUint32();if(this.sample_counts=[],this.sample_offsets=[],0===this.version)for(t=0;t<n;t++){this.sample_counts.push(e.readUint32());var i=e.readInt32();i<0&&c.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(i)}else if(1==this.version)for(t=0;t<n;t++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())})),d.createBoxCtor("dac3",(function(e){var t=e.readUint8(),n=e.readUint8();e=e.readUint8(),this.fscod=t>>6,this.bsid=t>>1&31,this.bsmod=(1&t)<<2|n>>6&3,this.acmod=n>>3&7,this.lfeon=n>>2&1,this.bit_rate_code=3&n|e>>5&7})),d.createBoxCtor("dec3",(function(e){var t=e.readUint16();this.data_rate=t>>3,this.num_ind_sub=7&t,this.ind_subs=[];for(var n=0;n<this.num_ind_sub+1;n++){var i={},r=(this.ind_subs.push(i),e.readUint8()),a=e.readUint8(),o=e.readUint8();i.fscod=r>>6,i.bsid=r>>1&31,i.bsmod=(1&r)<<4|a>>4&15,i.acmod=a>>1&7,i.lfeon=1&a,i.num_dep_sub=o>>1&15,0<i.num_dep_sub&&(i.chan_loc=(1&o)<<8|e.readUint8())}})),d.createFullBoxCtor("dfLa",(function(e){var t=[],n=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];for(this.parseFullHeader(e);;){var i=e.readUint8(),r=Math.min(127&i,n.length-1);if(r?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),t.push(n[r]),128&i)break}this.numMetadataBlocks=t.length+" ("+t.join(", ")+")"})),d.createBoxCtor("dimm",(function(e){this.bytessent=e.readUint64()})),d.createBoxCtor("dmax",(function(e){this.time=e.readUint32()})),d.createBoxCtor("dmed",(function(e){this.bytessent=e.readUint64()})),d.createBoxCtor("dOps",(function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),0!==this.ChannelMappingFamily){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var t=0;t<this.OutputChannelCount;t++)this.ChannelMapping[t]=e.readUint8()}})),d.createFullBoxCtor("dref",(function(e){this.entries=[];for(var t,n=e.readUint32(),i=0;i<n;i++){if((t=d.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==d.OK)return;t=t.box,this.entries.push(t)}})),d.createBoxCtor("drep",(function(e){this.bytessent=e.readUint64()})),d.createFullBoxCtor("elng",(function(e){this.extended_language=e.readString(this.size-this.hdr_size)})),d.createFullBoxCtor("elst",(function(e){this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i={};this.entries.push(i),1===this.version?(i.segment_duration=e.readUint64(),i.media_time=e.readInt64()):(i.segment_duration=e.readUint32(),i.media_time=e.readInt32()),i.media_rate_integer=e.readInt16(),i.media_rate_fraction=e.readInt16()}})),d.createFullBoxCtor("emsg",(function(e){1==this.version?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var t=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));1==this.version&&(t-=4),this.message_data=e.readUint8Array(t)})),d.createFullBoxCtor("esds",(function(e){e=e.readUint8Array(this.size-this.hdr_size);var t=new o;this.esd=t.parseOneDescriptor(new r(e.buffer,0,r.BIG_ENDIAN))})),d.createBoxCtor("fiel",(function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()})),d.createBoxCtor("frma",(function(e){this.data_format=e.readString(4)})),d.createBoxCtor("ftyp",(function(e){for(var t=this.size-this.hdr_size,n=(this.major_brand=e.readString(4),this.minor_version=e.readUint32(),t-=8,this.compatible_brands=[],0);4<=t;)this.compatible_brands[n]=e.readString(4),t-=4,n++})),d.createFullBoxCtor("hdlr",(function(e){0===this.version&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1])&&(this.name=this.name.slice(0,-1))})),d.createBoxCtor("hvcC",(function(e){this.configurationVersion=e.readUint8(),n=e.readUint8(),this.general_profile_space=n>>6,this.general_tier_flag=(32&n)>>5,this.general_profile_idc=31&n,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=4095&e.readUint16(),this.parallelismType=3&e.readUint8(),this.chroma_format_idc=3&e.readUint8(),this.bit_depth_luma_minus8=7&e.readUint8(),this.bit_depth_chroma_minus8=7&e.readUint8(),this.avgFrameRate=e.readUint16(),n=e.readUint8(),this.constantFrameRate=n>>6,this.numTemporalLayers=(13&n)>>3,this.temporalIdNested=(4&n)>>2,this.lengthSizeMinusOne=3&n,this.nalu_arrays=[];for(var t,n,i=e.readUint8(),r=0;r<i;r++)for(var a=[],o=(this.nalu_arrays.push(a),n=e.readUint8(),a.completeness=(128&n)>>7,a.nalu_type=63&n,e.readUint16()),s=0;s<o;s++){var l={};a.push(l),t=e.readUint16(),l.data=e.readUint8Array(t)}})),d.createFullBoxCtor("iinf",(function(e){var t;0===this.version?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var n=0;n<this.entry_count;n++){if((t=d.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==d.OK)return;"infe"!==t.box.type&&c.error("BoxParser","Expected 'infe' box, got "+t.box.type),this.item_infos[n]=t.box}})),d.createFullBoxCtor("iloc",(function(e){var t=e.readUint8(),n=(this.offset_size=t>>4&15,this.length_size=15&t,t=e.readUint8(),this.base_offset_size=t>>4&15,1===this.version||2===this.version?this.index_size=15&t:this.index_size=0,this.items=[],0);if(this.version<2)n=e.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";n=e.readUint32()}for(var i=0;i<n;i++){var r={};if(this.items.push(r),!(this.version<2)&&2!==this.version)throw"version of iloc box not supported";switch(r.item_ID=e.readUint16(),1===this.version||2===this.version?r.construction_method=15&e.readUint16():r.construction_method=0,r.data_reference_index=e.readUint16(),this.base_offset_size){case 0:r.base_offset=0;break;case 4:r.base_offset=e.readUint32();break;case 8:r.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var a=e.readUint16();r.extents=[];for(var o=0;o<a;o++){var s={};if(r.extents.push(s),1===this.version||2===this.version)switch(this.index_size){case 0:s.extent_index=0;break;case 4:s.extent_index=e.readUint32();break;case 8:s.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:s.extent_offset=0;break;case 4:s.extent_offset=e.readUint32();break;case 8:s.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:s.extent_length=0;break;case 4:s.extent_length=e.readUint32();break;case 8:s.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}})),d.createBoxCtor("imir",(function(e){e=e.readUint8(),this.reserved=e>>7,this.axis=1&e})),d.createFullBoxCtor("infe",(function(e){0!==this.version&&1!==this.version||(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),1===this.version?(this.extension_type=e.readString(4),c.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size)):2<=this.version&&(2===this.version?this.item_ID=e.readUint16():3===this.version&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),"mime"===this.item_type?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):"uri "===this.item_type&&(this.item_uri_type=e.readCString()))})),d.createFullBoxCtor("ipma",(function(e){var t,n;for(entry_count=e.readUint32(),this.associations=[],t=0;t<entry_count;t++){var i={},r=(this.associations.push(i),this.version<1?i.id=e.readUint16():i.id=e.readUint32(),e.readUint8());for(i.props=[],n=0;n<r;n++){var a=e.readUint8(),o={};i.props.push(o),o.essential=(128&a)>>7==1,1&this.flags?o.property_index=(127&a)<<8|e.readUint8():o.property_index=127&a}}})),d.createFullBoxCtor("iref",(function(e){var t;for(this.references=[];e.getPosition()<this.start+this.size;){if((t=d.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==d.OK)return;(t=new(0===this.version?d.SingleItemTypeReferenceBox:d.SingleItemTypeReferenceBoxLarge)(t.type,t.size,t.hdr_size,t.start)).write===d.Box.prototype.write&&"mdat"!==t.type&&(c.warn("BoxParser",t.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),t.parseDataAndRewind(e)),t.parse(e),this.references.push(t)}})),d.createBoxCtor("irot",(function(e){this.angle=3&e.readUint8()})),d.createFullBoxCtor("ispe",(function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()})),d.createFullBoxCtor("kind",(function(e){this.schemeURI=e.readCString(),this.value=e.readCString()})),d.createFullBoxCtor("leva",(function(e){var t=e.readUint8();this.levels=[];for(var n=0;n<t;n++){var i={},r=((this.levels[n]=i).track_ID=e.readUint32(),e.readUint8());switch(i.padding_flag=r>>7,i.assignment_type=127&r,i.assignment_type){case 0:i.grouping_type=e.readString(4);break;case 1:i.grouping_type=e.readString(4),i.grouping_type_parameter=e.readUint32();break;case 2:case 3:break;case 4:i.sub_track_id=e.readUint32();break;default:c.warn("BoxParser","Unknown leva assignement type")}}})),d.createBoxCtor("lsel",(function(e){this.layer_id=e.readUint16()})),d.createBoxCtor("maxr",(function(e){this.period=e.readUint32(),this.bytes=e.readUint32()})),d.createBoxCtor("mdcv",(function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()})),d.createFullBoxCtor("mdhd",(function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()})),d.createFullBoxCtor("mehd",(function(e){1&this.flags&&(c.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),1==this.version?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()})),d.createFullBoxCtor("meta",(function(e){this.boxes=[],d.ContainerBox.prototype.parse.call(this,e)})),d.createFullBoxCtor("mfhd",(function(e){this.sequence_number=e.readUint32()})),d.createFullBoxCtor("mfro",(function(e){this._size=e.readUint32()})),d.createFullBoxCtor("mvhd",(function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()})),d.createBoxCtor("npck",(function(e){this.packetssent=e.readUint32()})),d.createBoxCtor("nump",(function(e){this.packetssent=e.readUint64()})),d.createFullBoxCtor("padb",(function(e){var t=e.readUint32();this.padbits=[];for(var n=0;n<Math.floor((t+1)/2);n++)this.padbits=e.readUint8()})),d.createBoxCtor("pasp",(function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()})),d.createBoxCtor("payl",(function(e){this.text=e.readString(this.size-this.hdr_size)})),d.createBoxCtor("payt",(function(e){this.payloadID=e.readUint32();var t=e.readUint8();this.rtpmap_string=e.readString(t)})),d.createFullBoxCtor("pdin",(function(e){var t=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var n=0;n<t;n++)this.rate[n]=e.readUint32(),this.initial_delay[n]=e.readUint32()})),d.createFullBoxCtor("pitm",(function(e){0===this.version?this.item_id=e.readUint16():this.item_id=e.readUint32()})),d.createFullBoxCtor("pixi",(function(e){var t;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],t=0;t<this.num_channels;t++)this.bits_per_channels[t]=e.readUint8()})),d.createBoxCtor("pmax",(function(e){this.bytes=e.readUint32()})),d.createFullBoxCtor("prft",(function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),0===this.version?this.media_time=e.readUint32():this.media_time=e.readUint64()})),d.createFullBoxCtor("pssh",(function(e){if(this.system_id=d.parseHex16(e),0<this.version){var t=e.readUint32();this.kid=[];for(var n=0;n<t;n++)this.kid[n]=d.parseHex16(e)}var i=e.readUint32();0<i&&(this.data=e.readUint8Array(i))})),d.createFullBoxCtor("clef",(function(e){this.width=e.readUint32(),this.height=e.readUint32()})),d.createFullBoxCtor("enof",(function(e){this.width=e.readUint32(),this.height=e.readUint32()})),d.createFullBoxCtor("prof",(function(e){this.width=e.readUint32(),this.height=e.readUint32()})),d.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),d.createBoxCtor("rtp ",(function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)})),d.createFullBoxCtor("saio",(function(e){1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var t=e.readUint32();this.offset=[];for(var n=0;n<t;n++)0===this.version?this.offset[n]=e.readUint32():this.offset[n]=e.readUint64()})),d.createFullBoxCtor("saiz",(function(e){1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var t=e.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var n=0;n<t;n++)this.sample_info_size[n]=e.readUint8()})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_METADATA,"mett",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_METADATA,"metx",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",(function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",(function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)})),d.createSampleEntryCtor(d.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",(function(e){this.parseHeader(e),this.parseFooter(e)})),d.createSampleGroupCtor("alst",(function(e){var t,n=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],t=0;t<n;t++)this.sample_offset[t]=e.readUint32();var i=this.description_length-4-4*n;for(this.num_output_samples=[],this.num_total_samples=[],t=0;t<i/4;t++)this.num_output_samples[t]=e.readUint16(),this.num_total_samples[t]=e.readUint16()})),d.createSampleGroupCtor("avll",(function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()})),d.createSampleGroupCtor("avss",(function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();for(var t=e.readUint8(),n=(this.durationFlag=t>>7,this.avgRateFlag=t>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[],e.readUint8()),i=0;i<n;i++){var r={};this.dependency.push(r),r.subSeqDirectionFlag=e.readUint8(),r.layerNumber=e.readUint8(),r.subSequenceIdentifier=e.readUint16()}})),d.createSampleGroupCtor("dtrt",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createSampleGroupCtor("mvif",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createSampleGroupCtor("prol",(function(e){this.roll_distance=e.readInt16()})),d.createSampleGroupCtor("rap ",(function(e){e=e.readUint8(),this.num_leading_samples_known=e>>7,this.num_leading_samples=127&e})),d.createSampleGroupCtor("rash",(function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)c.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var t=0;t<this.operation_point_count;t++)this.available_bitrate[t]=e.readUint32(),this.target_rate_share[t]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}})),d.createSampleGroupCtor("roll",(function(e){this.roll_distance=e.readInt16()})),d.SampleGroupEntry.prototype.parse=function(e){c.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},d.createSampleGroupCtor("scif",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createSampleGroupCtor("scnm",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createSampleGroupCtor("seig",(function(e){this.reserved=e.readUint8();var t=e.readUint8();this.crypt_byte_block=t>>4,this.skip_byte_block=15&t,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=d.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,1===this.isProtected&&0===this.Per_Sample_IV_Size&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))})),d.createSampleGroupCtor("stsa",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createSampleGroupCtor("sync",(function(e){e=e.readUint8(),this.NAL_unit_type=63&e})),d.createSampleGroupCtor("tele",(function(e){e=e.readUint8(),this.level_independently_decodable=e>>7})),d.createSampleGroupCtor("tsas",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createSampleGroupCtor("tscl",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createSampleGroupCtor("vipr",(function(e){c.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),d.createFullBoxCtor("sbgp",(function(e){this.grouping_type=e.readString(4),1===this.version?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i={};this.entries.push(i),i.sample_count=e.readInt32(),i.group_description_index=e.readInt32()}})),d.createFullBoxCtor("schm",(function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),1&this.flags&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))})),d.createBoxCtor("sdp ",(function(e){this.sdptext=e.readString(this.size-this.hdr_size)})),d.createFullBoxCtor("sdtp",(function(e){var t,n=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var i=0;i<n;i++)t=e.readUint8(),this.is_leading[i]=t>>6,this.sample_depends_on[i]=t>>4&3,this.sample_is_depended_on[i]=t>>2&3,this.sample_has_redundancy[i]=3&t})),d.createFullBoxCtor("senc"),d.createFullBoxCtor("sgpd",(function(e){this.grouping_type=e.readString(4),c.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=e.readUint32():this.default_length=0,2<=this.version&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var t=e.readUint32(),n=0;n<t;n++){var i=new(d[this.grouping_type+"SampleGroupEntry"]?d[this.grouping_type+"SampleGroupEntry"]:d.SampleGroupEntry)(this.grouping_type);this.entries.push(i),1===this.version&&0===this.default_length?i.description_length=e.readUint32():i.description_length=this.default_length,i.write===d.SampleGroupEntry.prototype.write&&(c.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),i.data=e.readUint8Array(i.description_length),e.position-=i.description_length),i.parse(e)}})),d.createFullBoxCtor("sidx",(function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),0===this.version?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var t=e.readUint16(),n=0;n<t;n++){var i={},r=(this.references.push(i),e.readUint32());i.reference_type=r>>31&1,i.referenced_size=2147483647&r,i.subsegment_duration=e.readUint32(),r=e.readUint32(),i.starts_with_SAP=r>>31&1,i.SAP_type=r>>28&7,i.SAP_delta_time=268435455&r}})),d.SingleItemTypeReferenceBox=function(e,t,n,i){d.Box.call(this,e,t),this.hdr_size=n,this.start=i},d.SingleItemTypeReferenceBox.prototype=new d.Box,d.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var t=e.readUint16();this.references=[];for(var n=0;n<t;n++)this.references[n]=e.readUint16()},d.SingleItemTypeReferenceBoxLarge=function(e,t,n,i){d.Box.call(this,e,t),this.hdr_size=n,this.start=i},d.SingleItemTypeReferenceBoxLarge.prototype=new d.Box,d.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var t=e.readUint16();this.references=[];for(var n=0;n<t;n++)this.references[n]=e.readUint32()},d.createFullBoxCtor("SmDm",(function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()})),d.createFullBoxCtor("smhd",(function(e){this.balance=e.readUint16(),e.readUint16()})),d.createFullBoxCtor("ssix",(function(e){this.subsegments=[];for(var t=e.readUint32(),n=0;n<t;n++)for(var i={},r=(this.subsegments.push(i),i.ranges=[],e.readUint32()),a=0;a<r;a++){var o={};i.ranges.push(o),o.level=e.readUint8(),o.range_size=e.readUint24()}})),d.createFullBoxCtor("stco",(function(e){var t=e.readUint32();if(this.chunk_offsets=[],0===this.version)for(var n=0;n<t;n++)this.chunk_offsets.push(e.readUint32())})),d.createFullBoxCtor("stdp",(function(e){var t=(this.size-this.hdr_size)/2;this.priority=[];for(var n=0;n<t;n++)this.priority[n]=e.readUint16()})),d.createFullBoxCtor("sthd"),d.createFullBoxCtor("stri",(function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var t=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var n=0;n<t;n++)this.attribute_list[n]=e.readUint32()})),d.createFullBoxCtor("stsc",(function(e){var t,n=e.readUint32();if(this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(t=0;t<n;t++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())})),d.createFullBoxCtor("stsd",(function(e){var t,n,i,r;for(this.entries=[],i=e.readUint32(),t=1;t<=i;t++){if((n=d.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==d.OK)return;d[n.type+"SampleEntry"]?((r=new d[n.type+"SampleEntry"](n.size)).hdr_size=n.hdr_size,r.start=n.start):(c.warn("BoxParser","Unknown sample entry type: "+n.type),r=new d.SampleEntry(n.type,n.size,n.hdr_size,n.start)),r.write===d.SampleEntry.prototype.write&&(c.info("BoxParser","SampleEntry "+r.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),r.parseDataAndRewind(e)),r.parse(e),this.entries.push(r)}})),d.createFullBoxCtor("stsg",(function(e){this.grouping_type=e.readUint32();var t=e.readUint16();this.group_description_index=[];for(var n=0;n<t;n++)this.group_description_index[n]=e.readUint32()})),d.createFullBoxCtor("stsh",(function(e){var t,n=e.readUint32();if(this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(t=0;t<n;t++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())})),d.createFullBoxCtor("stss",(function(e){var t,n=e.readUint32();if(0===this.version)for(this.sample_numbers=[],t=0;t<n;t++)this.sample_numbers.push(e.readUint32())})),d.createFullBoxCtor("stsz",(function(e){var t;if(this.sample_sizes=[],0===this.version)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),t=0;t<this.sample_count;t++)0===this.sample_size?this.sample_sizes.push(e.readUint32()):this.sample_sizes[t]=this.sample_size})),d.createFullBoxCtor("stts",(function(e){var t,n,i=e.readUint32();if(this.sample_counts=[],this.sample_deltas=[],0===this.version)for(t=0;t<i;t++)this.sample_counts.push(e.readUint32()),(n=e.readInt32())<0&&(c.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),n=1),this.sample_deltas.push(n)})),d.createFullBoxCtor("stvi",(function(e){var t,n=e.readUint32();for(this.single_view_allowed=3&n,this.stereo_scheme=e.readUint32(),n=e.readUint32(),this.stereo_indication_type=e.readString(n),this.boxes=[];e.getPosition()<this.start+this.size;){if((t=d.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==d.OK)return;t=t.box,this.boxes.push(t),this[t.type]=t}})),d.createBoxCtor("styp",(function(e){d.ftypBox.prototype.parse.call(this,e)})),d.createFullBoxCtor("stz2",(function(e){var t,n;if(this.sample_sizes=[],0===this.version)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),n=e.readUint32(),4===this.field_size)for(t=0;t<n;t+=2){var i=e.readUint8();this.sample_sizes[t]=i>>4&15,this.sample_sizes[t+1]=15&i}else if(8===this.field_size)for(t=0;t<n;t++)this.sample_sizes[t]=e.readUint8();else if(16===this.field_size)for(t=0;t<n;t++)this.sample_sizes[t]=e.readUint16();else c.error("BoxParser","Error in length field in stz2 box")})),d.createFullBoxCtor("subs",(function(e){var t,n,i,r=e.readUint32();for(this.entries=[],t=0;t<r;t++){var a={};if((this.entries[t]=a).sample_delta=e.readUint32(),a.subsamples=[],0<(i=e.readUint16()))for(n=0;n<i;n++){var o={};a.subsamples.push(o),1==this.version?o.size=e.readUint32():o.size=e.readUint16(),o.priority=e.readUint8(),o.discardable=e.readUint8(),o.codec_specific_parameters=e.readUint32()}}})),d.createFullBoxCtor("tenc",(function(e){var t;e.readUint8(),0===this.version?e.readUint8():(t=e.readUint8(),this.default_crypt_byte_block=t>>4&15,this.default_skip_byte_block=15&t),this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=d.parseHex16(e),1===this.default_isProtected&&0===this.default_Per_Sample_IV_Size&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))})),d.createFullBoxCtor("tfdt",(function(e){1==this.version?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()})),d.createFullBoxCtor("tfhd",(function(e){var t=0;this.track_id=e.readUint32(),this.size-this.hdr_size>t&&this.flags&d.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),t+=8):this.base_data_offset=0,this.size-this.hdr_size>t&&this.flags&d.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),t+=4):this.default_sample_description_index=0,this.size-this.hdr_size>t&&this.flags&d.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),t+=4):this.default_sample_duration=0,this.size-this.hdr_size>t&&this.flags&d.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),t+=4):this.default_sample_size=0,this.size-this.hdr_size>t&&this.flags&d.TFHD_FLAG_SAMPLE_FLAGS?this.default_sample_flags=e.readUint32():this.default_sample_flags=0})),d.createFullBoxCtor("tfra",(function(e){this.track_ID=e.readUint32(),e.readUint24();for(var t=e.readUint8(),n=(this.length_size_of_traf_num=t>>4&3,this.length_size_of_trun_num=t>>2&3,this.length_size_of_sample_num=3&t,this.entries=[],e.readUint32()),i=0;i<n;i++)1===this.version?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()})),d.createFullBoxCtor("tkhd",(function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()})),d.createBoxCtor("tmax",(function(e){this.time=e.readUint32()})),d.createBoxCtor("tmin",(function(e){this.time=e.readUint32()})),d.createBoxCtor("totl",(function(e){this.bytessent=e.readUint32()})),d.createBoxCtor("tpay",(function(e){this.bytessent=e.readUint32()})),d.createBoxCtor("tpyl",(function(e){this.bytessent=e.readUint64()})),d.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},d.createTrackGroupCtor("msrc"),d.TrackReferenceTypeBox=function(e,t,n,i){d.Box.call(this,e,t),this.hdr_size=n,this.start=i},d.TrackReferenceTypeBox.prototype=new d.Box,d.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},d.trefBox.prototype.parse=function(e){for(var t;e.getPosition()<this.start+this.size;){if((t=d.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==d.OK)return;(t=new d.TrackReferenceTypeBox(t.type,t.size,t.hdr_size,t.start)).write===d.Box.prototype.write&&"mdat"!==t.type&&(c.info("BoxParser","TrackReference "+t.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),t.parseDataAndRewind(e)),t.parse(e),this.boxes.push(t)}},d.createFullBoxCtor("trep",(function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;){if((ret=d.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==d.OK)return;box=ret.box,this.boxes.push(box)}})),d.createFullBoxCtor("trex",(function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()})),d.createBoxCtor("trpy",(function(e){this.bytessent=e.readUint64()})),d.createFullBoxCtor("trun",(function(e){var t=0;if(this.sample_count=e.readUint32(),this.size-this.hdr_size>(t+=4)&&this.flags&d.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),t+=4):this.data_offset=0,this.size-this.hdr_size>t&&this.flags&d.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),t+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>t)for(var n=0;n<this.sample_count;n++)this.flags&d.TRUN_FLAGS_DURATION&&(this.sample_duration[n]=e.readUint32()),this.flags&d.TRUN_FLAGS_SIZE&&(this.sample_size[n]=e.readUint32()),this.flags&d.TRUN_FLAGS_FLAGS&&(this.sample_flags[n]=e.readUint32()),this.flags&d.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[n]=e.readUint32():this.sample_composition_time_offset[n]=e.readInt32())})),d.createFullBoxCtor("tsel",(function(e){this.switch_group=e.readUint32();var t=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var n=0;n<t;n++)this.attribute_list[n]=e.readUint32()})),d.createFullBoxCtor("txtC",(function(e){this.config=e.readCString()})),d.createFullBoxCtor("url ",(function(e){1!==this.flags&&(this.location=e.readCString())})),d.createFullBoxCtor("urn ",(function(e){this.name=e.readCString(),0<this.size-this.hdr_size-this.name.length-1&&(this.location=e.readCString())})),d.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,(function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")})),d.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,(function(e){this.system_id=d.parseHex16(e);var t=e.readUint32();0<t&&(this.data=e.readUint8Array(t))})),d.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),d.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,(function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=d.parseHex16(e)})),d.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,(function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var t=0;t<this.fragment_count;t++){var n={},i=0,r=1===this.version?(i=e.readUint64(),e.readUint64()):(i=e.readUint32(),e.readUint32());n.absolute_time=i,n.absolute_duration=r,this.entries.push(n)}})),d.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,(function(e){1===this.version?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())})),d.createFullBoxCtor("vmhd",(function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)})),d.createFullBoxCtor("vpcC",(function(e){var t;1===this.version?(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4,this.chromaSubsampling=t>>1&7,this.videoFullRangeFlag=1&t,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8()):(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4&15,this.colorSpace=15&t,t=e.readUint8(),this.chromaSubsampling=t>>4&15,this.transferFunction=t>>1&7,this.videoFullRangeFlag=1&t),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)})),d.createBoxCtor("vttC",(function(e){this.text=e.readString(this.size-this.hdr_size)})),d.createFullBoxCtor("vvcC",(function(e){var t,n={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(e){this.held_bits=e.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(e){this.held_bits=e.readUint16(),this.num_held_bits=16},extract_bits:function(e){var t=this.held_bits>>this.num_held_bits-e&(1<<e)-1;return this.num_held_bits-=e,t}};if(n.stream_read_1_bytes(e),n.extract_bits(5),this.lengthSizeMinusOne=n.extract_bits(2),this.ptl_present_flag=n.extract_bits(1),this.ptl_present_flag){if(n.stream_read_2_bytes(e),this.ols_idx=n.extract_bits(9),this.num_sublayers=n.extract_bits(3),this.constant_frame_rate=n.extract_bits(2),this.chroma_format_idc=n.extract_bits(2),n.stream_read_1_bytes(e),this.bit_depth_minus8=n.extract_bits(3),n.extract_bits(5),n.stream_read_2_bytes(e),n.extract_bits(2),this.num_bytes_constraint_info=n.extract_bits(6),this.general_profile_idc=n.extract_bits(7),this.general_tier_flag=n.extract_bits(1),this.general_level_idc=e.readUint8(),n.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=n.extract_bits(1),this.ptl_multilayer_enabled_flag=n.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(s=0;s<this.num_bytes_constraint_info-1;s++){var i=n.extract_bits(6),r=(n.stream_read_1_bytes(e),n.extract_bits(2));this.general_constraint_info[s]=i<<2|r}this.general_constraint_info[this.num_bytes_constraint_info-1]=n.extract_bits(6)}else n.extract_bits(6);for(n.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,t=this.num_sublayers-2;0<=t;--t){var a=n.extract_bits(1);this.ptl_sublayer_present_mask|=a<<t}for(t=this.num_sublayers;t<=8&&1<this.num_sublayers;++t)n.extract_bits(1);for(t=this.num_sublayers-2;0<=t;--t)this.ptl_sublayer_present_mask&1<<t&&(this.sublayer_level_idc[t]=e.readUint8());if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(s=0;s<this.ptl_num_sub_profiles;s++)this.general_sub_profile_idc.push(e.readUint32());this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}this.nalu_arrays=[];for(var o=e.readUint8(),s=0;s<o;s++){var l=[],u=(this.nalu_arrays.push(l),n.stream_read_1_bytes(e),l.completeness=n.extract_bits(1),n.extract_bits(2),l.nalu_type=n.extract_bits(5),1);for(13!=l.nalu_type&&12!=l.nalu_type&&(u=e.readUint16()),t=0;t<u;t++){var c=e.readUint16();l.push({data:e.readUint8Array(c),length:c})}}})),d.createFullBoxCtor("vvnC",(function(e){var t=strm.readUint8();this.lengthSizeMinusOne=3&t})),d.SampleEntry.prototype.isVideo=function(){return!1},d.SampleEntry.prototype.isAudio=function(){return!1},d.SampleEntry.prototype.isSubtitle=function(){return!1},d.SampleEntry.prototype.isMetadata=function(){return!1},d.SampleEntry.prototype.isHint=function(){return!1},d.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},d.SampleEntry.prototype.getWidth=function(){return""},d.SampleEntry.prototype.getHeight=function(){return""},d.SampleEntry.prototype.getChannelCount=function(){return""},d.SampleEntry.prototype.getSampleRate=function(){return""},d.SampleEntry.prototype.getSampleSize=function(){return""},d.VisualSampleEntry.prototype.isVideo=function(){return!0},d.VisualSampleEntry.prototype.getWidth=function(){return this.width},d.VisualSampleEntry.prototype.getHeight=function(){return this.height},d.AudioSampleEntry.prototype.isAudio=function(){return!0},d.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},d.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},d.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},d.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},d.MetadataSampleEntry.prototype.isMetadata=function(){return!0},d.decimalToHex=function(e,t){var n=Number(e).toString(16);for(t=null==t?2:t;n.length<t;)n="0"+n;return n},d.avc1SampleEntry.prototype.getCodec=d.avc2SampleEntry.prototype.getCodec=d.avc3SampleEntry.prototype.getCodec=d.avc4SampleEntry.prototype.getCodec=function(){var e=d.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+d.decimalToHex(this.avcC.AVCProfileIndication)+d.decimalToHex(this.avcC.profile_compatibility)+d.decimalToHex(this.avcC.AVCLevelIndication):e},d.hev1SampleEntry.prototype.getCodec=d.hvc1SampleEntry.prototype.getCodec=function(){var e=d.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(e+=".",this.hvcC.general_profile_space){case 0:e+="";break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C"}e=e+this.hvcC.general_profile_idc+".";for(var t=this.hvcC.general_profile_compatibility,n=0,i=0;i<32&&(n|=1&t,31!=i);i++)n<<=1,t>>=1;e=e+d.decimalToHex(n,0)+".",0===this.hvcC.general_tier_flag?e+="L":e+="H",e+=this.hvcC.general_level_idc;var r=!1,a="";for(i=5;0<=i;i--)(this.hvcC.general_constraint_indicator[i]||r)&&(a="."+d.decimalToHex(this.hvcC.general_constraint_indicator[i],0)+a,r=!0);e+=a}return e},d.vvc1SampleEntry.prototype.getCodec=d.vvi1SampleEntry.prototype.getCodec=function(){var e=d.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){e+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?e+=".H":e+=".L",e+=this.vvcC.general_level_idc;var t="";if(this.vvcC.general_constraint_info){var n,i=[],r=0;for(r=(r|=this.vvcC.ptl_frame_only_constraint<<7)|this.vvcC.ptl_multilayer_enabled<<6,l=0;l<this.vvcC.general_constraint_info.length;++l)r|=this.vvcC.general_constraint_info[l]>>2&63,i.push(r),r&&(n=l),r=this.vvcC.general_constraint_info[l]>>2&3;if(void 0===n)t=".CA";else{t=".C";for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",o=0,s=0,l=0;l<=n;++l)for(o=o<<8|i[l],s+=8;5<=s;)t+=a[o>>s-5&31],o&=(1<<(s-=5))-1;s&&(t+=a[31&(o<<=5-s)])}}e+=t}return e},d.mp4aSampleEntry.prototype.getCodec=function(){var e,t,n=d.SampleEntry.prototype.getCodec.call(this);return this.esds&&this.esds.esd?(e=this.esds.esd.getOTI(),t=this.esds.esd.getAudioConfig(),n+"."+d.decimalToHex(e)+(t?"."+t:"")):n},d.stxtSampleEntry.prototype.getCodec=function(){var e=d.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},d.vp08SampleEntry.prototype.getCodec=d.vp09SampleEntry.prototype.getCodec=function(){var e=d.SampleEntry.prototype.getCodec.call(this),t=this.vpcC.level,n=this.vpcC.bitDepth;return e+".0"+this.vpcC.profile+"."+(t=0==t?"00":t)+"."+(8==n?"08":n)},d.av01SampleEntry.prototype.getCodec=function(){var e,t=d.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;return 2===this.av1C.seq_profile&&1===this.av1C.high_bitdepth?e=1===this.av1C.twelve_bit?"12":"10":this.av1C.seq_profile<=2&&(e=1===this.av1C.high_bitdepth?"10":"08"),t+"."+this.av1C.seq_profile+"."+(n=n<10?"0"+n:n)+(this.av1C.seq_tier_0?"H":"M")+"."+e},d.Box.prototype.writeHeader=function(e,t){this.size+=8,this.size>h&&(this.size+=8),"uuid"===this.type&&(this.size+=16),c.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(t||"")),this.size>h?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),"uuid"===this.type&&e.writeUint8Array(this.uuid),this.size>h&&e.writeUint64(this.size)},d.FullBox.prototype.writeHeader=function(e){this.size+=4,d.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},d.Box.prototype.write=function(e){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},d.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&(this.boxes[t].write(e),this.size+=this.boxes[t].size);c.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},d.TrackReferenceTypeBox.prototype.write=function(e){this.size=4*this.track_ids.length,this.writeHeader(e),e.writeUint32Array(this.track_ids)},d.avcCBox.prototype.write=function(e){var t;for(this.size=7,t=0;t<this.SPS.length;t++)this.size+=2+this.SPS[t].length;for(t=0;t<this.PPS.length;t++)this.size+=2+this.PPS[t].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),t=0;t<this.SPS.length;t++)e.writeUint16(this.SPS[t].length),e.writeUint8Array(this.SPS[t].nalu);for(e.writeUint8(this.PPS.length),t=0;t<this.PPS.length;t++)e.writeUint16(this.PPS[t].length),e.writeUint8Array(this.PPS[t].nalu);this.ext&&e.writeUint8Array(this.ext)},d.co64Box.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),t=0;t<this.chunk_offsets.length;t++)e.writeUint64(this.chunk_offsets[t])},d.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},d.cttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),1===this.version?e.writeInt32(this.sample_offsets[t]):e.writeUint32(this.sample_offsets[t])},d.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;c.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},d.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},d.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var n=this.entries[t];e.writeUint32(n.segment_duration),e.writeInt32(n.media_time),e.writeInt16(n.media_rate_integer),e.writeInt16(n.media_rate_fraction)}},d.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},d.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var t=0;t<this.compatible_brands.length;t++)e.writeString(this.compatible_brands[t],null,4)},d.hdlrBox.prototype.write=function(e){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},d.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},d.mdhdBox.prototype.write=function(e){this.size=20,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},d.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},d.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},d.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=96,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},d.SampleEntry.prototype.writeHeader=function(e){this.size=8,d.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},d.SampleEntry.prototype.writeFooter=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e),this.size+=this.boxes[t].size;c.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},d.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,c.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},d.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=70,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},d.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=20,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},d.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},d.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},d.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var n=this.entries[t];e.writeInt32(n.sample_count),e.writeInt32(n.group_description_index)}},d.sgpdBox.prototype.write=function(e){var t,n;for(this.flags=0,this.size=12,t=0;t<this.entries.length;t++)n=this.entries[t],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=n.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),1===this.version&&e.writeUint32(this.default_length),2<=this.version&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),t=0;t<this.entries.length;t++)n=this.entries[t],1===this.version&&0===this.default_length&&e.writeUint32(n.description_length),n.write(e)},d.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var t=0;t<this.references.length;t++){var n=this.references[t];e.writeUint32(n.reference_type<<31|n.referenced_size),e.writeUint32(n.subsegment_duration),e.writeUint32(n.starts_with_SAP<<31|n.SAP_type<<28|n.SAP_delta_time)}},d.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},d.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},d.stscBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),t=0;t<this.first_chunk.length;t++)e.writeUint32(this.first_chunk[t]),e.writeUint32(this.samples_per_chunk[t]),e.writeUint32(this.sample_description_index[t])},d.stsdBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;c.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},d.stshBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),t=0;t<this.shadowed_sample_numbers.length;t++)e.writeUint32(this.shadowed_sample_numbers[t]),e.writeUint32(this.sync_sample_numbers[t])},d.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},d.stszBox.prototype.write=function(e){var t,n=!0;if(this.version=0,(this.flags=0)<this.sample_sizes.length)for(t=0;t+1<this.sample_sizes.length;){if(this.sample_sizes[t+1]!==this.sample_sizes[0]){n=!1;break}t++}else n=!1;this.size=8,n||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),n?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),n||e.writeUint32Array(this.sample_sizes)},d.sttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),e.writeUint32(this.sample_deltas[t])},d.tfdtBox.prototype.write=function(e){var t=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>t?1:0,this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(e),1===this.version?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},d.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&d.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&d.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&d.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&d.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&d.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&d.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&d.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&d.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&d.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&d.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},d.tkhdBox.prototype.write=function(e){this.version=0,this.size=80,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},d.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},d.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&d.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&d.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&d.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&d.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&d.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&d.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&d.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&d.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var t=0;t<this.sample_count;t++)this.flags&d.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[t]),this.flags&d.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[t]),this.flags&d.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[t]),this.flags&d.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?e.writeUint32(this.sample_composition_time_offset[t]):e.writeInt32(this.sample_composition_time_offset[t]))},d["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},d["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},d.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},d.cttsBox.prototype.unpack=function(e){for(var t,n=0,i=0;i<this.sample_counts.length;i++)for(t=0;t<this.sample_counts[i];t++)e[n].pts=e[n].dts+this.sample_offsets[i],n++},d.sttsBox.prototype.unpack=function(e){for(var t,n=0,i=0;i<this.sample_counts.length;i++)for(t=0;t<this.sample_counts[i];t++)e[n].dts=0===n?0:e[n-1].dts+this.sample_deltas[i],n++},d.stcoBox.prototype.unpack=function(e){for(var t=0;t<this.chunk_offsets.length;t++)e[t].offset=this.chunk_offsets[t]},d.stscBox.prototype.unpack=function(e){for(var t,n,i=0,r=0,a=0;a<this.first_chunk.length;a++)for(t=0;t<(a+1<this.first_chunk.length?this.first_chunk[a+1]:1/0);t++)for(r++,n=0;n<this.samples_per_chunk[a];n++){if(!e[i])return;e[i].description_index=this.sample_description_index[a],e[i].chunk_index=r,i++}},d.stszBox.prototype.unpack=function(e){for(var t=0;t<this.sample_sizes.length;t++)e[t].size=this.sample_sizes[t]},d.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],d.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],d.boxEqualFields=function(e,t){if(e&&!t)return!1;for(var n in e)if(!(-1<d.DIFF_BOXES_PROP_NAMES.indexOf(n)||e[n]instanceof d.Box||t[n]instanceof d.Box||void 0===e[n]||void 0===t[n]||"function"==typeof e[n]||"function"==typeof t[n]||e.subBoxNames&&-1<e.subBoxNames.indexOf(n.slice(0,4))||t.subBoxNames&&-1<t.subBoxNames.indexOf(n.slice(0,4))||"data"===n||"start"===n||"size"===n||"creation_time"===n||"modification_time"===n||-1<d.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(n)||e[n]===t[n]))return!1;return!0},d.boxEqual=function(e,t){if(!d.boxEqualFields(e,t))return!1;for(var n=0;n<d.DIFF_BOXES_PROP_NAMES.length;n++){var i=d.DIFF_BOXES_PROP_NAMES[n];if(e[i]&&t[i]&&!d.boxEqual(e[i],t[i]))return!1}return!0},s.prototype.parseSample=function(e){var t,n={resources:[]},r=new i(e.data.buffer);if(e.subsamples&&0!==e.subsamples.length){if(n.documentString=r.readString(e.subsamples[0].size),1<e.subsamples.length)for(t=1;t<e.subsamples.length;t++)n.resources[t]=r.readUint8Array(e.subsamples[t].size)}else n.documentString=r.readString(e.data.length);return"undefined"!=typeof DOMParser&&(n.document=(new DOMParser).parseFromString(n.documentString,"application/xml")),n},l.prototype.parseSample=function(e){return new i(e.data.buffer).readString(e.data.length)},l.prototype.parseConfig=function(e){return(e=new i(e.buffer)).readUint32(),e.readCString()},t.XMLSubtitlein4Parser=s,t.Textin4Parser=l,u.prototype.setSegmentOptions=function(e,t,n){var i,r=this.getTrackById(e);r&&(this.fragmentedTracks.push(i={}),i.id=e,i.user=t,(i.trak=r).nextSample=0,i.segmentStream=null,i.nb_samples=1e3,i.rapAlignement=!0,n)&&(n.nbSamples&&(i.nb_samples=n.nbSamples),n.rapAlignement)&&(i.rapAlignement=n.rapAlignement)},u.prototype.unsetSegmentOptions=function(e){for(var t=-1,n=0;n<this.fragmentedTracks.length;n++)this.fragmentedTracks[n].id==e&&(t=n);-1<t&&this.fragmentedTracks.splice(t,1)},u.prototype.setExtractionOptions=function(e,t,n){var i,r=this.getTrackById(e);r&&(this.extractedTracks.push(i={}),i.id=e,i.user=t,(i.trak=r).nextSample=0,i.nb_samples=1e3,i.samples=[],n)&&n.nbSamples&&(i.nb_samples=n.nbSamples)},u.prototype.unsetExtractionOptions=function(e){for(var t=-1,n=0;n<this.extractedTracks.length;n++)this.extractedTracks[n].id==e&&(t=n);-1<t&&this.extractedTracks.splice(t,1)},u.prototype.parse=function(){var e;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(!this.processIncompleteMdat())return}else if(this.saveParsePosition&&this.saveParsePosition(),(e=d.parseOneBox(this.stream,!1)).code===d.ERR_NOT_ENOUGH_DATA){if(!this.processIncompleteBox)return;if(!this.processIncompleteBox(e))return}else{var t,n="uuid"!==(t=e.box).type?t.type:t.uuid;switch(this.boxes.push(t),n){case"mdat":this.mdats.push(t);break;case"moof":this.moofs.push(t);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[n]&&c.warn("ISOFile","Duplicate Box of type: "+n+", overriding previous occurrence"),this[n]=t}this.updateUsedBytes&&this.updateUsedBytes(t,e)}},u.prototype.checkBuffer=function(e){if(null==e)throw"Buffer must be defined and non empty";if(void 0===e.fileStart)throw"Buffer must have a fileStart property";return 0===e.byteLength?(c.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(c.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),!!this.stream.initialized()||(c.warn("ISOFile","Not ready to start parsing"),!1))},u.prototype.appendBuffer=function(e,t){var n;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart)&&this.onMoovStart(),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(t),this.nextSeekPosition?(n=this.nextSeekPosition,this.nextSeekPosition=void 0):n=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(n=this.stream.getEndFilePositionAfter(n))):n=this.nextParsePosition||0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems)&&this.processItems(this.onItem),this.stream.cleanBuffers&&(c.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+n),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),c.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),n},u.prototype.getInfo=function(){var e,t,n,i,r,a,o={},s=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(o.hasMoov=!0,o.duration=this.moov.mvhd.duration,o.timescale=this.moov.mvhd.timescale,o.isFragmented=null!=this.moov.mvex,o.isFragmented&&this.moov.mvex.mehd&&(o.fragment_duration=this.moov.mvex.mehd.fragment_duration),o.isProgressive=this.isProgressive,o.hasIOD=null!=this.moov.iods,o.brands=[],o.brands.push(this.ftyp.major_brand),o.brands=o.brands.concat(this.ftyp.compatible_brands),o.created=new Date(s+1e3*this.moov.mvhd.creation_time),o.modified=new Date(s+1e3*this.moov.mvhd.modification_time),o.tracks=[],o.audioTracks=[],o.videoTracks=[],o.subtitleTracks=[],o.metadataTracks=[],o.hintTracks=[],o.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(a=(n=this.moov.traks[e]).mdia.minf.stbl.stsd.entries[0],o.tracks.push(i={}),i.id=n.tkhd.track_id,i.name=n.mdia.hdlr.name,i.references=[],n.tref)for(t=0;t<n.tref.boxes.length;t++)i.references.push(r={}),r.type=n.tref.boxes[t].type,r.track_ids=n.tref.boxes[t].track_ids;n.edts&&(i.edits=n.edts.elst.entries),i.created=new Date(s+1e3*n.tkhd.creation_time),i.modified=new Date(s+1e3*n.tkhd.modification_time),i.movie_duration=n.tkhd.duration,i.movie_timescale=o.timescale,i.layer=n.tkhd.layer,i.alternate_group=n.tkhd.alternate_group,i.volume=n.tkhd.volume,i.matrix=n.tkhd.matrix,i.track_width=n.tkhd.width/65536,i.track_height=n.tkhd.height/65536,i.timescale=n.mdia.mdhd.timescale,i.cts_shift=n.mdia.minf.stbl.cslg,i.duration=n.mdia.mdhd.duration,i.samples_duration=n.samples_duration,i.codec=a.getCodec(),i.kind=n.udta&&n.udta.kinds.length?n.udta.kinds[0]:{schemeURI:"",value:""},i.language=n.mdia.elng?n.mdia.elng.extended_language:n.mdia.mdhd.languageString,i.nb_samples=n.samples.length,i.size=n.samples_size,i.bitrate=8*i.size*i.timescale/i.samples_duration,a.isAudio()?(i.type="audio",o.audioTracks.push(i),i.audio={},i.audio.sample_rate=a.getSampleRate(),i.audio.channel_count=a.getChannelCount(),i.audio.sample_size=a.getSampleSize()):a.isVideo()?(i.type="video",o.videoTracks.push(i),i.video={},i.video.width=a.getWidth(),i.video.height=a.getHeight()):(a.isSubtitle()?(i.type="subtitles",o.subtitleTracks):a.isHint()?(i.type="metadata",o.hintTracks):a.isMetadata()?(i.type="metadata",o.metadataTracks):(i.type="metadata",o.otherTracks)).push(i)}else o.hasMoov=!1;if(o.mime="",o.hasMoov&&o.tracks){for(o.videoTracks&&0<o.videoTracks.length?o.mime+='video/mp4; codecs="':o.audioTracks&&0<o.audioTracks.length?o.mime+='audio/mp4; codecs="':o.mime+='application/mp4; codecs="',e=0;e<o.tracks.length;e++)0!==e&&(o.mime+=","),o.mime+=o.tracks[e].codec;o.mime+='"; profiles="',o.mime+=this.ftyp.compatible_brands.join(),o.mime+='"'}return o},u.prototype.processSamples=function(e){var t;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(t=0;t<this.fragmentedTracks.length;t++)for(var n=this.fragmentedTracks[t],i=n.trak;i.nextSample<i.samples.length&&this.sampleProcessingStarted;){c.debug("ISOFile","Creating media fragment on track #"+n.id+" for sample "+i.nextSample);var r=this.createFragment(n.id,i.nextSample,n.segmentStream);if(!r)break;if(n.segmentStream=r,i.nextSample++,(i.nextSample%n.nb_samples==0||e||i.nextSample>=i.samples.length)&&(c.info("ISOFile","Sending fragmented data on track #"+n.id+" for samples ["+Math.max(0,i.nextSample-n.nb_samples)+","+(i.nextSample-1)+"]"),c.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(n.id,n.user,n.segmentStream.buffer,i.nextSample,e||i.nextSample>=i.samples.length),n.segmentStream=null,n!==this.fragmentedTracks[t]))break}if(null!==this.onSamples)for(t=0;t<this.extractedTracks.length;t++){var a=this.extractedTracks[t];for(i=a.trak;i.nextSample<i.samples.length&&this.sampleProcessingStarted;){c.debug("ISOFile","Exporting on track #"+a.id+" sample #"+i.nextSample);var o=this.getSample(i,i.nextSample);if(!o)break;if(i.nextSample++,a.samples.push(o),(i.nextSample%a.nb_samples==0||i.nextSample>=i.samples.length)&&(c.debug("ISOFile","Sending samples on track #"+a.id+" for sample "+i.nextSample),this.onSamples&&this.onSamples(a.id,a.user,a.samples),a.samples=[],a!==this.extractedTracks[t]))break}}}},u.prototype.getBox=function(e){return(e=this.getBoxes(e,!0)).length?e[0]:null},u.prototype.getBoxes=function(e,t){var n=[];return u._sweep.call(this,e,n,t),n},u._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;u._sweep.call(this.boxes[i],e,t,n)}},u.prototype.getTrackSamplesInfo=function(e){if(e=this.getTrackById(e))return e.samples},u.prototype.getTrackSample=function(e,t){return e=this.getTrackById(e),this.getSample(e,t)},u.prototype.releaseUsedSamples=function(e,t){var n=0,i=this.getTrackById(e);i.lastValidSample||(i.lastValidSample=0);for(var r=i.lastValidSample;r<t;r++)n+=this.releaseSample(i,r);c.info("ISOFile","Track #"+e+" released samples up to "+t+" (released size: "+n+", remaining: "+this.samplesDataSize+")"),i.lastValidSample=t},u.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},u.prototype.stop=function(){this.sampleProcessingStarted=!1},u.prototype.flush=function(){c.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},u.prototype.seekTrack=function(e,t,n){var i,r,a,o,s=0,l=0;if(0===n.samples.length)return c.info("ISOFile","No sample in track, cannot seek! Using time "+c.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(i=0;i<n.samples.length;i++){if(r=n.samples[i],0===i)l=0,o=r.timescale;else if(r.cts>e*r.timescale){l=i-1;break}t&&r.is_sync&&(s=i)}for(t&&(l=s),e=n.samples[l].cts,n.nextSample=l;n.samples[l].alreadyRead===n.samples[l].size&&n.samples[l+1];)l++;return a=n.samples[l].offset+n.samples[l].alreadyRead,c.info("ISOFile","Seeking to "+(t?"RAP":"")+" sample #"+n.nextSample+" on track "+n.tkhd.track_id+", time "+c.getDurationString(e,o)+" and offset: "+a),{offset:a,time:e/o}},u.prototype.seek=function(e,t){var n,i,r=this.moov,a={offset:1/0,time:1/0};if(this.moov){for(i=0;i<r.traks.length;i++)n=r.traks[i],(n=this.seekTrack(e,t,n)).offset<a.offset&&(a.offset=n.offset),n.time<a.time&&(a.time=n.time);return c.info("ISOFile","Seeking at time "+c.getDurationString(a.time,1)+" needs a buffer with a fileStart position of "+a.offset),a.offset===1/0?a={offset:this.nextParsePosition,time:0}:a.offset=this.stream.getEndFilePositionAfter(a.offset),c.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+a.offset),a}throw"Cannot seek: moov not received!"},u.prototype.equal=function(e){for(var t=0;t<this.boxes.length&&t<e.boxes.length;){var n=this.boxes[t],i=e.boxes[t];if(!d.boxEqual(n,i))return!1;t++}return!0},(t.ISOFile=u).prototype.lastBoxStartPosition=0,u.prototype.parsingMdat=null,u.prototype.nextParsePosition=0,u.prototype.discardMdatData=!1,u.prototype.processIncompleteBox=function(e){var t;return"mdat"===e.type?(t=new d[e.type+"Box"](e.size),this.parsingMdat=t,this.boxes.push(t),this.mdats.push(t),t.start=e.start,t.hdr_size=e.hdr_size,this.stream.addUsedBytes(t.hdr_size),this.lastBoxStartPosition=t.start+t.size,this.stream.seek(t.start+t.size,!1,this.discardMdatData)?!(this.parsingMdat=null):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=t.start+t.size,!1)):("moov"===e.type&&(this.moovStartFound=!0,0===this.mdats.length)&&(this.isProgressive=!0),this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer()?(this.nextParsePosition=this.stream.getEndPosition(),!0):(!e.type||this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size,!1))},u.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},u.prototype.processIncompleteMdat=function(){var e=this.parsingMdat;return this.stream.seek(e.start+e.size,!1,this.discardMdatData)?(c.debug("ISOFile","Found 'mdat' end in buffered data"),!(this.parsingMdat=null)):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},u.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},u.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},u.prototype.updateUsedBytes=function(e,t){this.stream.addUsedBytes&&("mdat"===e.type?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},u.prototype.add=d.Box.prototype.add,u.prototype.addBox=d.Box.prototype.addBox,u.prototype.init=function(e){e=e||{};var t=(this.add("ftyp").set("major_brand",e.brands&&e.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",e.brands||["iso4"]),this.add("moov"));return t.add("mvhd").set("timescale",e.timescale||600).set("rate",e.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",e.duration||0).set("volume",e.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),t.add("mvex"),this},u.prototype.addTrack=function(e){this.moov||this.init(e);var t=e||{},n=(t.width=t.width||320,t.height=t.height||320,t.id=t.id||this.moov.mvhd.next_track_id,t.type=t.type||"avc1",e=this.moov.add("trak"),this.moov.mvhd.next_track_id=t.id+1,e.add("tkhd").set("flags",d.TKHD_FLAG_ENABLED|d.TKHD_FLAG_IN_MOVIE|d.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",t.id).set("duration",t.duration||0).set("layer",t.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",t.width<<16).set("height",t.height<<16),e.add("mdia")),r=(n.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",t.timescale||1).set("duration",t.media_duration||0).set("language",t.language||"und"),n.add("hdlr").set("handler",t.hdlr||"vide").set("name",t.name||"Track created with MP4Box.js"),n.add("elng").set("extended_language",t.language||"fr-FR"),n.add("minf"));if(void 0!==d[t.type+"SampleEntry"]){var a,o,s,l=new d[t.type+"SampleEntry"],u=(l.data_reference_index=1,"");for(a in d.sampleEntryCodes)for(var c=d.sampleEntryCodes[a],h=0;h<c.length;h++)if(-1<c.indexOf(t.type)){u=a;break}switch(u){case"Visual":r.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),l.set("width",t.width).set("height",t.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",t.type+" Compressor").set("depth",24),t.avcDecoderConfigRecord&&(o=new d.avcCBox,s=new i(t.avcDecoderConfigRecord),o.parse(s),l.addBox(o));break;case"Audio":r.add("smhd").set("balance",t.balance||0),l.set("channel_count",t.channel_count||2).set("samplesize",t.samplesize||16).set("samplerate",t.samplerate||65536);break;case"Hint":r.add("hmhd");break;case"Subtitle":r.add("sthd"),"stpp"===t.type&&l.set("namespace",t.namespace||"nonamespace").set("schema_location",t.schema_location||"").set("auxiliary_mime_types",t.auxiliary_mime_types||"");break;default:r.add("nmhd")}return t.description&&l.addBox(t.description),t.description_boxes&&t.description_boxes.forEach((function(e){l.addBox(e)})),r.add("dinf").add("dref").addEntry((new d["url Box"]).set("flags",1)),(n=r.add("stbl")).add("stsd").addEntry(l),n.add("stts").set("sample_counts",[]).set("sample_deltas",[]),n.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),n.add("stco").set("chunk_offsets",[]),n.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",t.id).set("default_sample_description_index",t.default_sample_description_index||1).set("default_sample_duration",t.default_sample_duration||0).set("default_sample_size",t.default_sample_size||0).set("default_sample_flags",t.default_sample_flags||0),this.buildTrakSampleLists(e),t.id}},d.Box.prototype.computeSize=function(e){(e=e||new r).endianness=r.BIG_ENDIAN,this.write(e)},u.prototype.addSample=function(e,t,n){n=n||{};var i={};if(null!==(e=this.getTrackById(e)))return i.number=e.samples.length,i.track_id=e.tkhd.track_id,i.timescale=e.mdia.mdhd.timescale,i.description_index=n.sample_description_index?n.sample_description_index-1:0,i.description=e.mdia.minf.stbl.stsd.entries[i.description_index],i.data=t,i.size=t.byteLength,i.alreadyRead=i.size,i.duration=n.duration||1,i.cts=n.cts||0,i.dts=n.dts||0,i.is_sync=n.is_sync||!1,i.is_leading=n.is_leading||0,i.depends_on=n.depends_on||0,i.is_depended_on=n.is_depended_on||0,i.has_redundancy=n.has_redundancy||0,i.degradation_priority=n.degradation_priority||0,i.offset=0,i.subsamples=n.subsamples,e.samples.push(i),e.samples_size+=i.size,e.samples_duration+=i.duration,e.first_dts||(e.first_dts=n.dts),this.processSamples(),e=this.createSingleSampleMoof(i),this.addBox(e),e.computeSize(),e.trafs[0].truns[0].data_offset=e.size+8,this.add("mdat").data=new Uint8Array(t),i},u.prototype.createSingleSampleMoof=function(e){var t=e.is_sync?1<<25:65536,n=new d.moofBox,i=(n.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++,n.add("traf")),r=this.getTrackById(e.track_id);return i.add("tfhd").set("track_id",e.track_id).set("flags",d.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),i.add("tfdt").set("baseMediaDecodeTime",e.dts-(r.first_dts||0)),i.add("trun").set("flags",d.TRUN_FLAGS_DATA_OFFSET|d.TRUN_FLAGS_DURATION|d.TRUN_FLAGS_SIZE|d.TRUN_FLAGS_FLAGS|d.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[t]).set("sample_composition_time_offset",[e.cts-e.dts]),n},u.prototype.lastMoofIndex=0,u.prototype.samplesDataSize=0,u.prototype.resetTables=function(){var e,t;for(this.initial_duration=this.moov.mvhd.duration,e=this.moov.mvhd.duration=0;e<this.moov.traks.length;e++){(t=this.moov.traks[e]).tkhd.duration=0,t.mdia.mdhd.duration=0,(t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64).chunk_offsets=[],(n=t.mdia.minf.stbl.stsc).first_chunk=[],n.samples_per_chunk=[],n.sample_description_index=[],(t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2).sample_sizes=[],(n=t.mdia.minf.stbl.stts).sample_counts=[],n.sample_deltas=[],(n=t.mdia.minf.stbl.ctts)&&(n.sample_counts=[],n.sample_offsets=[]);var n=t.mdia.minf.stbl.stss;-1!=(n=t.mdia.minf.stbl.boxes.indexOf(n))&&(t.mdia.minf.stbl.boxes[n]=null)}},u.initSampleGroups=function(e,t,n,i,r){var a,o,s,l;function u(e,t,n){this.grouping_type=e,this.grouping_type_parameter=t,this.sbgp=n,this.last_sample_in_run=-1,this.entry_index=-1}for(t&&(t.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),o=0;o<n.length;o++){for(l=n[o].grouping_type+"/"+n[o].grouping_type_parameter,s=new u(n[o].grouping_type,n[o].grouping_type_parameter,n[o]),t&&(t.sample_groups_info[l]=s),e.sample_groups_info[l]||(e.sample_groups_info[l]=s),a=0;a<i.length;a++)i[a].grouping_type===n[o].grouping_type&&(s.description=i[a],s.description.used=!0);if(r)for(a=0;a<r.length;a++)r[a].grouping_type===n[o].grouping_type&&(s.fragment_description=r[a],s.fragment_description.used=!0,s.is_fragment=!0)}if(t){if(r)for(o=0;o<r.length;o++)!r[o].used&&2<=r[o].version&&(l=r[o].grouping_type+"/0",(s=new u(r[o].grouping_type,0)).is_fragment=!0,t.sample_groups_info[l]||(t.sample_groups_info[l]=s))}else for(o=0;o<i.length;o++)!i[o].used&&2<=i[o].version&&(l=i[o].grouping_type+"/0",s=new u(i[o].grouping_type,0),e.sample_groups_info[l]||(e.sample_groups_info[l]=s))},u.setSampleGroupProperties=function(e,t,n,i){var r,a,o;for(r in t.sample_groups=[],i)t.sample_groups[r]={},t.sample_groups[r].grouping_type=i[r].grouping_type,t.sample_groups[r].grouping_type_parameter=i[r].grouping_type_parameter,n>=i[r].last_sample_in_run&&(i[r].last_sample_in_run<0&&(i[r].last_sample_in_run=0),i[r].entry_index++,i[r].entry_index<=i[r].sbgp.entries.length-1)&&(i[r].last_sample_in_run+=i[r].sbgp.entries[i[r].entry_index].sample_count),i[r].entry_index<=i[r].sbgp.entries.length-1?t.sample_groups[r].group_description_index=i[r].sbgp.entries[i[r].entry_index].group_description_index:t.sample_groups[r].group_description_index=-1,0!==t.sample_groups[r].group_description_index&&(o=i[r].fragment_description||i[r].description,0<t.sample_groups[r].group_description_index?(a=65535<t.sample_groups[r].group_description_index?(t.sample_groups[r].group_description_index>>16)-1:t.sample_groups[r].group_description_index-1,o&&0<=a&&(t.sample_groups[r].description=o.entries[a])):o&&2<=o.version&&0<o.default_group_description_index&&(t.sample_groups[r].description=o.entries[o.default_group_description_index-1]))},u.process_sdtp=function(e,t,n){t&&(e?(t.is_leading=e.is_leading[n],t.depends_on=e.sample_depends_on[n],t.is_depended_on=e.sample_is_depended_on[n],t.has_redundancy=e.sample_has_redundancy[n]):(t.is_leading=0,t.depends_on=0,t.is_depended_on=0,t.has_redundancy=0))},u.prototype.buildSampleLists=function(){for(var e,t=0;t<this.moov.traks.length;t++)e=this.moov.traks[t],this.buildTrakSampleLists(e)},u.prototype.buildTrakSampleLists=function(e){var t,n,i,r,a,o,s,l,c,h,d,f,p,m,g,_,y,v,A,E,b,w,T,S;if(e.samples=[],e.samples_duration=0,e.samples_size=0,n=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,i=e.mdia.minf.stbl.stsc,r=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,a=e.mdia.minf.stbl.stts,o=e.mdia.minf.stbl.ctts,s=e.mdia.minf.stbl.stss,l=e.mdia.minf.stbl.stsd,c=e.mdia.minf.stbl.subs,f=e.mdia.minf.stbl.stdp,h=e.mdia.minf.stbl.sbgps,d=e.mdia.minf.stbl.sgpds,b=E=A=v=-1,S=T=w=0,u.initSampleGroups(e,null,h,d),void 0!==r){for(t=0;t<r.sample_sizes.length;t++){var R={};R.number=t,R.track_id=e.tkhd.track_id,R.timescale=e.mdia.mdhd.timescale,R.alreadyRead=0,(e.samples[t]=R).size=r.sample_sizes[t],e.samples_size+=R.size,0===t?(p=0,R.chunk_index=m=1,R.chunk_run_index=p,y=i.samples_per_chunk[p],_=0,g=p+1<i.first_chunk.length?i.first_chunk[p+1]-1:1/0):t<y?(R.chunk_index=m,R.chunk_run_index=p):(_=0,(R.chunk_index=++m)<=g||(g=1+ ++p<i.first_chunk.length?i.first_chunk[p+1]-1:1/0),R.chunk_run_index=p,y+=i.samples_per_chunk[p]),R.description_index=i.sample_description_index[R.chunk_run_index]-1,R.description=l.entries[R.description_index],R.offset=n.chunk_offsets[R.chunk_index-1]+_,_+=R.size,v<t&&(A++,v<0&&(v=0),v+=a.sample_counts[A]),0<t?(e.samples[t-1].duration=a.sample_deltas[A],e.samples_duration+=e.samples[t-1].duration,R.dts=e.samples[t-1].dts+e.samples[t-1].duration):R.dts=0,o?(E<=t&&(b++,E<0&&(E=0),E+=o.sample_counts[b]),R.cts=e.samples[t].dts+o.sample_offsets[b]):R.cts=R.dts,s?(t==s.sample_numbers[w]-1?(R.is_sync=!0,w++):(R.is_sync=!1,R.degradation_priority=0),c&&c.entries[T].sample_delta+S==t+1&&(R.subsamples=c.entries[T].subsamples,S+=c.entries[T].sample_delta,T++)):R.is_sync=!0,u.process_sdtp(e.mdia.minf.stbl.sdtp,R,R.number),R.degradation_priority=f?f.priority[t]:0,c&&c.entries[T].sample_delta+S==t&&(R.subsamples=c.entries[T].subsamples,S+=c.entries[T].sample_delta),(0<h.length||0<d.length)&&u.setSampleGroupProperties(e,R,t,e.sample_groups_info)}0<t&&(e.samples[t-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[t-1].dts,0),e.samples_duration+=e.samples[t-1].duration)}},u.prototype.updateSampleLists=function(){var e,t,n,i,r,a,o,s,l,c,h,f;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(o=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==o.type)for(s=o,e=0;e<s.trafs.length;e++){for(l=s.trafs[e],c=this.getTrackById(l.tfhd.track_id),h=this.getTrexById(l.tfhd.track_id),t=l.tfhd.flags&d.TFHD_FLAG_SAMPLE_DESC?l.tfhd.default_sample_description_index:h?h.default_sample_description_index:1,n=l.tfhd.flags&d.TFHD_FLAG_SAMPLE_DUR?l.tfhd.default_sample_duration:h?h.default_sample_duration:0,i=l.tfhd.flags&d.TFHD_FLAG_SAMPLE_SIZE?l.tfhd.default_sample_size:h?h.default_sample_size:0,r=l.tfhd.flags&d.TFHD_FLAG_SAMPLE_FLAGS?l.tfhd.default_sample_flags:h?h.default_sample_flags:0,(l.sample_number=0)<l.sbgps.length&&u.initSampleGroups(c,l,l.sbgps,c.mdia.minf.stbl.sgpds,l.sgpds),E=0;E<l.truns.length;E++)for(var p=l.truns[E],m=0;m<p.sample_count;m++){(f={}).moof_number=this.lastMoofIndex,f.number_in_traf=l.sample_number,l.sample_number++,f.number=c.samples.length,l.first_sample_index=c.samples.length,c.samples.push(f),f.track_id=c.tkhd.track_id,f.timescale=c.mdia.mdhd.timescale,f.description_index=t-1,f.description=c.mdia.minf.stbl.stsd.entries[f.description_index],f.size=i,p.flags&d.TRUN_FLAGS_SIZE&&(f.size=p.sample_size[m]),c.samples_size+=f.size,f.duration=n,p.flags&d.TRUN_FLAGS_DURATION&&(f.duration=p.sample_duration[m]),c.samples_duration+=f.duration,c.first_traf_merged||0<m?f.dts=c.samples[c.samples.length-2].dts+c.samples[c.samples.length-2].duration:(l.tfdt?f.dts=l.tfdt.baseMediaDecodeTime:f.dts=0,c.first_traf_merged=!0),f.cts=f.dts,p.flags&d.TRUN_FLAGS_CTS_OFFSET&&(f.cts=f.dts+p.sample_composition_time_offset[m]),g=r,p.flags&d.TRUN_FLAGS_FLAGS?g=p.sample_flags[m]:0===m&&p.flags&d.TRUN_FLAGS_FIRST_FLAG&&(g=p.first_sample_flags),f.is_sync=!(g>>16&1),f.is_leading=g>>26&3,f.depends_on=g>>24&3,f.is_depended_on=g>>22&3,f.has_redundancy=g>>20&3,f.degradation_priority=65535&g;var g=!!(l.tfhd.flags&d.TFHD_FLAG_BASE_DATA_OFFSET),_=!!(l.tfhd.flags&d.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),y=!!(p.flags&d.TRUN_FLAGS_DATA_OFFSET),v=g?l.tfhd.base_data_offset:_||0===E?s.start:a;f.offset=0===E&&0===m?y?v+p.data_offset:v:a,a=f.offset+f.size,(0<l.sbgps.length||0<l.sgpds.length||0<c.mdia.minf.stbl.sbgps.length||0<c.mdia.minf.stbl.sgpds.length)&&u.setSampleGroupProperties(c,f,f.number_in_traf,l.sample_groups_info)}if(l.subs){c.has_fragment_subsamples=!0;for(var A=l.first_sample_index,E=0;E<l.subs.entries.length;E++)A+=l.subs.entries[E].sample_delta,(f=c.samples[A-1]).subsamples=l.subs.entries[E].subsamples}}},u.prototype.getSample=function(e,t){var n=e.samples[t];if(!this.moov)return null;if(n.data){if(n.alreadyRead==n.size)return n}else n.data=new Uint8Array(n.size),n.alreadyRead=0,this.samplesDataSize+=n.size,c.debug("ISOFile","Allocating sample #"+t+" on track #"+e.tkhd.track_id+" of size "+n.size+" (total: "+this.samplesDataSize+")");for(;;){var i=this.stream.findPosition(!0,n.offset+n.alreadyRead,!1);if(!(-1<i))return null;var a=(i=this.stream.buffers[i]).byteLength-(n.offset+n.alreadyRead-i.fileStart);if(n.size-n.alreadyRead<=a)return c.debug("ISOFile","Getting sample #"+t+" data (alreadyRead: "+n.alreadyRead+" offset: "+(n.offset+n.alreadyRead-i.fileStart)+" read size: "+(n.size-n.alreadyRead)+" full size: "+n.size+")"),r.memcpy(n.data.buffer,n.alreadyRead,i,n.offset+n.alreadyRead-i.fileStart,n.size-n.alreadyRead),i.usedBytes+=n.size-n.alreadyRead,this.stream.logBufferLevel(),n.alreadyRead=n.size,n;if(0==a)return null;c.debug("ISOFile","Getting sample #"+t+" partial data (alreadyRead: "+n.alreadyRead+" offset: "+(n.offset+n.alreadyRead-i.fileStart)+" read size: "+a+" full size: "+n.size+")"),r.memcpy(n.data.buffer,n.alreadyRead,i,n.offset+n.alreadyRead-i.fileStart,a),n.alreadyRead+=a,i.usedBytes+=a,this.stream.logBufferLevel()}},u.prototype.releaseSample=function(e,t){return(e=e.samples[t]).data?(this.samplesDataSize-=e.size,e.data=null,e.alreadyRead=0,e.size):0},u.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},u.prototype.getCodecs=function(){for(var e="",t=0;t<this.moov.traks.length;t++)0<t&&(e+=","),e+=this.moov.traks[t].mdia.minf.stbl.stsd.entries[0].getCodec();return e},u.prototype.getTrexById=function(e){var t;if(this.moov&&this.moov.mvex)for(t=0;t<this.moov.mvex.trexs.length;t++){var n=this.moov.mvex.trexs[t];if(n.track_id==e)return n}return null},u.prototype.getTrackById=function(e){if(void 0!==this.moov)for(var t=0;t<this.moov.traks.length;t++){var n=this.moov.traks[t];if(n.tkhd.track_id==e)return n}return null},u.prototype.items=[],u.prototype.itemsDataSize=0,u.prototype.flattenItemInfo=function(){var e=this.items,t=this.meta;if(null!=t&&void 0!==t.hdlr&&void 0!==t.iinf){for(l=0;l<t.iinf.item_infos.length;l++)(i={}).id=t.iinf.item_infos[l].item_ID,(e[i.id]=i).ref_to=[],i.name=t.iinf.item_infos[l].item_name,0<t.iinf.item_infos[l].protection_index&&(i.protection=t.ipro.protections[t.iinf.item_infos[l].protection_index-1]),t.iinf.item_infos[l].item_type?i.type=t.iinf.item_infos[l].item_type:i.type="mime",i.content_type=t.iinf.item_infos[l].content_type,i.content_encoding=t.iinf.item_infos[l].content_encoding;if(t.iloc)for(l=0;l<t.iloc.items.length;l++){var n=t.iloc.items[l],i=e[n.item_ID];switch(0!==n.data_reference_index&&(c.warn("Item storage with reference to other files: not supported"),i.source=t.dinf.boxes[n.data_reference_index-1]),n.construction_method){case 0:break;case 1:case 2:c.warn("Item storage with construction_method : not supported")}for(i.extents=[],a=i.size=0;a<n.extents.length;a++)i.extents[a]={},i.extents[a].offset=n.extents[a].extent_offset+n.base_offset,i.extents[a].length=n.extents[a].extent_length,i.extents[a].alreadyRead=0,i.size+=i.extents[a].length}if(t.pitm&&(e[t.pitm.item_id].primary=!0),t.iref)for(l=0;l<t.iref.references.length;l++)for(var r=t.iref.references[l],a=0;a<r.references.length;a++)e[r.from_item_ID].ref_to.push({type:r.type,id:r.references[a]});if(t.iprp)for(var o=0;o<t.iprp.ipmas.length;o++)for(var s=t.iprp.ipmas[o],l=0;l<s.associations.length;l++){var u=s.associations[l];for(void 0===(i=e[u.id]).properties&&(i.properties={},i.properties.boxes=[]),a=0;a<u.props.length;a++){var h=u.props[a];0<h.property_index&&h.property_index-1<t.iprp.ipco.boxes.length&&(h=t.iprp.ipco.boxes[h.property_index-1],i.properties[h.type]=h,i.properties.boxes.push(h))}}}},u.prototype.getItem=function(e){var t;if(!this.meta)return null;if(!(t=this.items[e]).data&&t.size)t.data=new Uint8Array(t.size),t.alreadyRead=0,this.itemsDataSize+=t.size,c.debug("ISOFile","Allocating item #"+e+" of size "+t.size+" (total: "+this.itemsDataSize+")");else if(t.alreadyRead===t.size)return t;for(var n=0;n<t.extents.length;n++){var i=t.extents[n];if(i.alreadyRead!==i.length){var a=this.stream.findPosition(!0,i.offset+i.alreadyRead,!1);if(!(-1<a))return null;var o=(a=this.stream.buffers[a]).byteLength-(i.offset+i.alreadyRead-a.fileStart);if(!(i.length-i.alreadyRead<=o))return c.debug("ISOFile","Getting item #"+e+" extent #"+n+" partial data (alreadyRead: "+i.alreadyRead+" offset: "+(i.offset+i.alreadyRead-a.fileStart)+" read size: "+o+" full extent size: "+i.length+" full item size: "+t.size+")"),r.memcpy(t.data.buffer,t.alreadyRead,a,i.offset+i.alreadyRead-a.fileStart,o),i.alreadyRead+=o,t.alreadyRead+=o,a.usedBytes+=o,this.stream.logBufferLevel(),null;c.debug("ISOFile","Getting item #"+e+" extent #"+n+" data (alreadyRead: "+i.alreadyRead+" offset: "+(i.offset+i.alreadyRead-a.fileStart)+" read size: "+(i.length-i.alreadyRead)+" full extent size: "+i.length+" full item size: "+t.size+")"),r.memcpy(t.data.buffer,t.alreadyRead,a,i.offset+i.alreadyRead-a.fileStart,i.length-i.alreadyRead),a.usedBytes+=i.length-i.alreadyRead,this.stream.logBufferLevel(),t.alreadyRead+=i.length-i.alreadyRead,i.alreadyRead=i.length}}return t.alreadyRead===t.size?t:null},u.prototype.releaseItem=function(e){var t=this.items[e];if(t.data){this.itemsDataSize-=t.size,t.data=null;for(var n=t.alreadyRead=0;n<t.extents.length;n++)t.extents[n].alreadyRead=0;return t.size}return 0},u.prototype.processItems=function(e){for(var t in this.items)t=this.items[t],this.getItem(t.id),e&&!t.sent&&(e(t),t.sent=!0,t.data=null)},u.prototype.hasItem=function(e){for(var t in this.items)if((t=this.items[t]).name===e)return t.id;return-1},u.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},u.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},u.prototype.itemToFragmentedTrackFile=function(e){var t,n;return null!=(n=(e=e||{}).itemId?this.getItem(e.itemId):this.getPrimaryItem())&&((e=new u).discardMdatData=!1,t={type:n.type,description_boxes:n.properties.boxes},n.properties.ispe&&(t.width=n.properties.ispe.image_width,t.height=n.properties.ispe.image_height),t=e.addTrack(t))?(e.addSample(t,n.data),e):null},u.prototype.write=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e)},u.prototype.createFragment=function(e,t,n){e=this.getTrackById(e);var i=this.getSample(e,t);return null==i?(i=e.samples[t],this.nextSeekPosition?this.nextSeekPosition=Math.min(i.offset+i.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.samples[t].offset+i.alreadyRead,null):((e=n||new r).endianness=r.BIG_ENDIAN,(t=this.createSingleSampleMoof(i)).write(e),t.trafs[0].truns[0].data_offset=t.size+8,c.debug("MP4Box","Adjusting data_offset with new value "+t.trafs[0].truns[0].data_offset),e.adjustUint32(t.trafs[0].truns[0].data_offset_position,t.trafs[0].truns[0].data_offset),(n=new d.mdatBox).data=i.data,n.write(e),e)},u.writeInitializationSegment=function(e,t,n,i){c.debug("ISOFile","Generating initialization segment");var a,o=new r,s=(o.endianness=r.BIG_ENDIAN,e.write(o),t.add("mvex"));for(n&&s.add("mehd").set("fragment_duration",n),a=0;a<t.traks.length;a++)s.add("trex").set("track_id",t.traks[a].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",i).set("default_sample_size",0).set("default_sample_flags",65536);return t.write(o),o.buffer},u.prototype.save=function(e){var t=new r;t.endianness=r.BIG_ENDIAN,this.write(t),t.save(e)},u.prototype.getBuffer=function(){var e=new r;return e.endianness=r.BIG_ENDIAN,this.write(e),e.buffer},u.prototype.initializeSegmentation=function(){var e,t,n,i;for(null===this.onSegment&&c.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),t=[],e=0;e<this.fragmentedTracks.length;e++){var r=new d.moovBox;r.mvhd=this.moov.mvhd,r.boxes.push(r.mvhd),n=this.getTrackById(this.fragmentedTracks[e].id),r.boxes.push(n),r.traks.push(n),(i={}).id=n.tkhd.track_id,i.user=this.fragmentedTracks[e].user,i.buffer=u.writeInitializationSegment(this.ftyp,r,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,0<this.moov.traks[e].samples.length?this.moov.traks[e].samples[0].duration:0),t.push(i)}return t},d.Box.prototype.printHeader=function(e){this.size+=8,this.size>h&&(this.size+=8),"uuid"===this.type&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},d.FullBox.prototype.printHeader=function(e){this.size+=4,d.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},d.Box.prototype.print=function(e){this.printHeader(e)},d.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var t,n=0;n<this.boxes.length;n++)this.boxes[n]&&(t=e.indent,e.indent+=" ",this.boxes[n].print(e),e.indent=t)},u.prototype.print=function(e){e.indent="";for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&this.boxes[t].print(e)},d.mvhdBox.prototype.print=function(e){d.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},d.tkhdBox.prototype.print=function(e){d.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)},{});f.createFile=function(e,t){return e=void 0===e||e,(t=new u(t)).discardMdatData=!e,t},t.createFile=f.createFile},function(e,t,n){let i=n(76),r=n(31),a=n(77);t.MpegTs=class{constructor(){this.seekPos=-1,this.durationMs=-1,this.fps=-1,this.sampleRate=-1,this.aCodec="",this.vCodec="",this.size={width:-1,height:-1},this.bufObject=r(),this.mpegTsObj=null,this.bufObject=r(),this.mediaInfo={},this.extensionInfo={},this.onReady=null,this.onDemuxed=null,this.onReadyOBJ=null,this.onError=null,this.onWasmError=null}initMPEG(){let e=this;this.mpegTsObj=new i.default.MPEG_JS_Module({}),this.mpegTsObj.onDemuxed=()=>{e.mediaInfo=e.mpegTsObj.readMediaInfo(),e.extensionInfo=e.mpegTsObj.readExtensionInfo(),e.vCodec=e.mediaInfo.vCodec,e.aCodec=e.mediaInfo.aCodec,e.durationMs=1e3*e.mediaInfo.duration,e.fps=e.mediaInfo.vFps,e.sampleRate=e.mediaInfo.sampleRate,0<e.extensionInfo.vWidth&&0<e.extensionInfo.vHeight&&(e.size.width=e.extensionInfo.vWidth,e.size.height=e.extensionInfo.vHeight),e.isHEVC()&&e.mpegTsObj.readPacket(),null!=e.onDemuxed&&e.onDemuxed(e.onReadyOBJ)},this.mpegTsObj.onReady=()=>{null!=e.onReady&&e.onReady(e.onReadyOBJ)},this.mpegTsObj.onNalu=e=>{this._appendFrame(e)},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.releaseTsDemuxer(),this.onWasmError&&this.onWasmError(e)},this.mpegTsObj.initDemuxer()}_appendFrame(e){var t=e.dtime;if(0==e.type){var n=a.PACK_NALU(e.layer),i=1==e.keyframe;this.bufObject.appendFrame(t,n,!0,i)}else if("aac"==this.mediaInfo.aCodec)for(var r=e.data,o=0;o<r.length;o++){var s=r[o];this.bufObject.appendFrame(s.ptime,s.data,!1,!0)}else this.bufObject.appendFrame(t,e.data,!1,!0)}bindReady(e){this.onReadyOBJ=e}releaseTsDemuxer(){this.mpegTsObj&&this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null}demux(e){this.mpegTsObj.demuxUint8Buf(e)}popBuffer(e=1,t=-1){return t<0?null:1==e?this.bufObject.vFrame(t):2==e?this.bufObject.aFrame(t):void 0}isHEVC(){return this.mpegTsObj.isHEVC()}getACodec(){return this.aCodec}getVCodec(){return this.vCodec}getAudioNone(){return this.mpegTsObj.mediaAttr.audioNone}getDurationMs(){return this.durationMs}getFPS(){return this.fps}getSampleRate(){return this.sampleRate}getSize(){return this.size}seek(e){if(0<=e)return e=this.bufObject.seekIDR(e),this.seekPos=e,parseInt(e)}}},function(e,t,n){let i=n(184),r=n(76),a=n(39),o=n(31),s=n(77),l=n(5);t.M3u8=class{constructor(e){this.hls=new i.M3u8Base(e),this.mpegTsObj=new r.default.MPEG_JS_Module({}),this.mpegTsWasmState=!1,this.mpegTsWasmRetryLoadTimes=0,this.tsList=[],this._segmentPointer=-1,this.parseTsList=[],this.vStartTime=0,this.aStartTime=0,this.lockWait={state:!1,lockMember:{dur:0}},this.timerFeed=null,this.timerTsWasm=null,this.seekPos=-1,this.vPreFramePTS=0,this.aPreFramePTS=0,this.audioNone=!1,this.isHevcParam=!1,this.vCodec=!1,this.aCodec=!1,this.aChannel=0,this.durationMs=-1,this.bufObject=o(),this.fps=-1,this.sampleRate=-1,this.size={width:-1,height:-1},this.mediaInfo=null,this.extensionInfo=null,this.seekTime=-1,this.seekStartTime=-1,this.onReadyOBJ=null,this.onFinished=null,this.onDemuxed=null,this.onSamples=null,this.onCacheProcess=null,this.isDownloaded=!1,this.onError=null,this.onWasmError=null}getCachePTS(){return Math.max(this.vPreFramePTS,this.aPreFramePTS)}demux(e){let t=this;this.vPreFramePTS=0,this.aPreFramePTS=0,this.hls.onTransportStream=(e,n,i,r)=>{t.tsList.push({streamURI:e,streamDur:n,start:i,end:r})},this.hls.onFinished=e=>{e.type==l.PLAYER_IN_TYPE_M3U8_VOD?t.durationMs=1e3*e.duration:t.durationMs=-1,null!=t.onFinished&&t.onFinished(t.onReadyOBJ,e),t.loadSegment()},this.mpegTsObj.onDemuxedFailed=(e,n)=>{t.lockWait.state=!1},this.mpegTsObj.onDemuxed=()=>{var e;t.isDownloaded=!1,null==t.mediaInfo&&(t.mediaInfo=t.mpegTsObj.readMediaInfo(),t.isHevcParam=t.mpegTsObj.isHEVC(),t.vCodec=t.mediaInfo.vCodec,t.aCodec=t.mediaInfo.aCodec,t.aChannel=t.mediaInfo.sampleChannel,t.fps=t.mediaInfo.vFps,t.sampleRate=t.mediaInfo.sampleRate,null===t.aCodec||""===t.aCodec||t.aChannel<=0)&&(t.audioNone=!0),null==t.extensionInfo&&(t.extensionInfo=t.mpegTsObj.readExtensionInfo(),0<t.extensionInfo.vWidth)&&0<t.extensionInfo.vHeight&&(t.size.width=t.extensionInfo.vWidth,t.size.height=t.extensionInfo.vHeight),null!=t.onDemuxed&&t.onDemuxed(t.onReadyOBJ),t.mpegTsObj.readPacket(),t.parseTsList&&0<t.parseTsList.length?(e=t.parseTsList.shift().start,t.vStartTime=e,t.aStartTime=e):-1==this.seekStartTime?setTimeout((()=>{t.vStartTime+=parseFloat(t.lockWait.lockMember.dur),t.aStartTime+=parseFloat(t.lockWait.lockMember.dur)}),1e3):(t.vStartTime=t.seekStartTime,t.aStartTime=t.seekStartTime,t.seekStartTime=-1),t.lockWait.state=!1},this.mpegTsObj.onReady=()=>{t._onTsReady(e)},this.mpegTsObj.onNalu=e=>{this._appendFrame(e,-1,!1),this.lockWait.state=!1},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.release(),this.onWasmError&&this.onWasmError(e)},t.mpegTsObj.initDemuxer(),this.timerTsWasm=window.setInterval((()=>{t.mpegTsWasmState?(window.clearInterval(t.timerTsWasm),t.timerTsWasm=null):3<=t.mpegTsWasmRetryLoadTimes?(t._onTsReady(e),window.clearInterval(t.timerTsWasm),t.timerTsWasm=null):(t.mpegTsWasmRetryLoadTimes+=1,t.mpegTsObj.initDemuxer())}),3e3)}_appendFrame(e,t,n){var i=this,r=0<e.dtime?e.dtime:e.ptime;if(0==e.type){t<0&&r<=i.vPreFramePTS&&(n=!0);var o=s.PACK_NALU(e.layer),l=1==e.keyframe,u=1==n?r+i.vStartTime:r;l=new a.BufferFrame(u,l,o,!0),i.bufObject.appendFrame(l.pts,l.data,!0,l.isKey),i.vPreFramePTS=u,null!=i.onSamples&&i.onSamples(i.onReadyOBJ,l)}else if(t<0&&r<=i.aPreFramePTS&&(n=!0),"aac"==i.mediaInfo.aCodec)for(var c=e.data,h=0;h<c.length;h++){var d=c[h],f=1==n?d.ptime+i.vStartTime:r;d=new a.BufferFrame(f,!0,d.data,!1),i.aPreFramePTS=f,null!=i.onSamples&&i.onSamples(i.onReadyOBJ,d)}else o=1==n?r+i.vStartTime:r,u=new a.BufferFrame(o,!0,e.data,!1),i.bufObject.appendFrameByBufferFrame(u),i.aPreFramePTS=o,null!=i.onSamples&&i.onSamples(i.onReadyOBJ,u);this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}_onTsReady(e){this.hls.fetchM3u8(e),this.mpegTsWasmState=!0,this.timerFeed&&window.clearInterval(this.timerFeed),this.downLoadInterval()}downLoadInterval(){let e=this;this.timerFeed&&window.clearInterval(this.timerFeed),e.timerFeed=window.setInterval((()=>{e.loadSegment()}),1e3)}loadSegment(){var e,t,n,i=this;if(0<i.tsList.length&&0==i.lockWait.state)try{i.isDownloaded||(e=i.nextSegment(),i.moveSegmentPointer(),null!=e&&(t=e.streamURI,n=e.streamDur,i.lockWait.state=!0,i.lockWait.lockMember.dur=n,i.mpegTsObj.isLive=i.hls.isLive(),i.isDownloaded=!0,i.mpegTsObj.demuxURL(t),i.parseTsList.push(e)))}catch(e){i.lockWait.state=!1}}release(){this.hls&&this.hls.release(),this.hls=null,this.mpegTsObj&&this.mpegTsObj.release(),this.timerFeed&&window.clearInterval(this.timerFeed),this.timerFeed=null,this.timerTsWasm&&window.clearInterval(this.timerTsWasm),this.timerTsWasm=null,this._segmentPointer=-1,this.parseTsList=[],this.tsList=[],this.isDownloaded=!1,this.bufObject&&this.bufObject.cleanPipeline()}nextSegment(){return this.tsList&&this.tsList[this._segmentPointer+1]}setNextSegmentByIndex(e=0){this._segmentPointer=e-1}getSegmentByIndex(e){return this.tsList&&this.tsList[e]}moveSegmentPointer(e){null==e&&(e=this._segmentPointer+1),this._segmentPointer=this.clamp(e,-1,this.tsList.length)}findSegmentIndexByTime(e){var t=this.tsList;if(t){for(let n,i=0,r=t.length;i<r;i++)if(e>=(n=t[i]).start&&e<n.end)return i;var n=t[t.length-1];if(Math.abs(e-n.end)<.2)return t.length-1}}clamp(e,t,n){return n<t&&(n=t),Math.min(Math.max(e,t),n)}bindReady(e){this.onReadyOBJ=e}popBuffer(e=1,t=-1){return t<0?null:1===e?t+1>this.bufObject.videoBuffer.length?null:this.bufObject.vFrame(t):2===e?t+1>this.bufObject.audioBuffer.length?null:this.bufObject.aFrame(t):void 0}getVLen(){return this.bufObject.videoBuffer.length}getALen(){return this.bufObject.audioBuffer.length}getLastIdx(){return this.bufObject.videoBuffer.length-1}getALastIdx(){return this.bufObject.audioBuffer.length-1}getACodec(){return this.aCodec}getVCodec(){return this.vCodec}getDurationMs(){return this.durationMs}getFPS(){return this.fps}getSampleRate(){return this.sampleRate}getSampleChannel(){return this.aChannel}getSize(){return this.size}seek(e){0<=e&&(e=this.bufObject.seekIDR(e),this.seekPos=e)}toSeek(e){this.seekTime=e,e=this.findSegmentIndexByTime(e);var t=this.getSegmentByIndex(e);null!=e&&t&&t!==this.tsList.nextSegment&&(this.seekStartTime=t.start,this.setNextSegmentByIndex(e),this.loadSegment(),this.timerFeed&&window.clearInterval(this.timerFeed),this.downLoadInterval())}limitDownloads(e){e!=this.limitDownload&&(this.timerFeed&&window.clearInterval(this.timerFeed),this.limitDownload=e,this.limitDownload?this.timerFeed&&window.clearInterval(this.timerFeed):this.downLoadInterval())}}},function(e,t,n){let i=n(5),r=[/#EXT-X-PROGRAM-DATE-TIME.+\n/g],a={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",streamInf:"STREAM-INF",isComment:e=>e&&"#"===e[0]&&!e.startsWith(a.tagPrefix),isBlank:e=>""===e,canStrip:e=>a.isBlank(e)||a.isComment(e),defaultMinDur:99999,hlsSliceLimit:100};t.M3u8Base=class{constructor(e){this.initState=!0,this.controller=new AbortController,this._slices=[],this._type=i.PLAYER_IN_TYPE_M3U8_LIVE,this._preURI="",this.duration=-1,this.onTransportStream=null,this.onFinished=null,this.config=e}isLive(){return this._type===i.PLAYER_IN_TYPE_M3U8_LIVE?1:0}release(){this.initState=!1}fetchM3u8(e){let t=this;if(this.initState){let n;this.config.headers&&(n={headers:new Headers(this.config.headers)}),fetch(e,n).then((e=>e.text())).then((n=>1==t._uriParse(e)?t._m3u8Parse(n):null)).then((n=>{null!=n&&!1!==n&&!0!==n&&this._type==i.PLAYER_IN_TYPE_M3U8_LIVE&&setTimeout((()=>{t.fetchM3u8(e)}),500*n)})).catch((n=>{setTimeout((()=>{t.fetchM3u8(e)}),500)}))}}_uriParse(e){var t;this._preURI="";let n=null;if((e=e.split("://")).length<1)return!1;1<e.length?(t=e[0],n=e[1].split("/"),this._preURI=t+"://"):n=e[0].split("/");for(var i=0;i<n.length-1;i++)this._preURI+=n[i]+"/";return!0}_m3u8Parse(e){let t=e;for(let n=0;n<r.length;n++)t=e.replace(r[n],"");var n,o=t.split(a.lineDelimiter);let s=a.defaultMinDur,l="";for(let e=0;e<o.length;e++){let t=o[e];if(!(t.length<1)){if(null!=l&&""!==l)switch(l){case a.version:case a.mediaSequence:case a.allowCache:case a.discontinuity:case a.targetDuration:case a.combined:break;case a.streamInf:return t.indexOf("http")<0&&t.indexOf(this._preURI)<0&&(t=this._preURI+t),this.fetchM3u8(t),null}var u;if(null!=(p=this._readTag(t)))switch(l=p.key,p.key){case a.version:case a.mediaSequence:case a.allowCache:case a.discontinuity:case a.targetDuration:case a.combined:case a.streamInf:break;case a.endList:return this._type=i.PLAYER_IN_TYPE_M3U8_VOD,null!=this.onFinished&&(u={type:this._type,duration:this.duration},this.onFinished(u)),!0}if(null!=(p=a.segmentParse.exec(t))){var c,h,d=p[1],f=-1==this.duration?0:this.duration,p=(-1==this.duration&&(this.duration=0),this.duration+=parseFloat(p[1]),-1==this.duration?0:this.duration),m=(s>d&&(s=d),o[e+=1]);let t=null;t=0<=m.indexOf("http")?m:("/"===m[0]&&(h=(c=this._preURI.split("//"))[c.length-1].split("/"),this._preURI=c[0]+"//"+h[0]),this._preURI+m),this._slices.indexOf(t)<0&&(this._slices.push(t),null!=this.onTransportStream)&&this.onTransportStream(t,d,f,p)}}}return this._slices.length>a.hlsSliceLimit&&this._type==i.PLAYER_IN_TYPE_M3U8_LIVE&&(this._slices=this._slices.slice(-1*a.hlsSliceLimit)),null!=this.onFinished&&(n={type:this._type,duration:-1},this.onFinished(n)),s}_readTag(e){return null!==(e=a.tagParse.exec(e))?{key:e[1],value:e[3]}:null}}},function(e,t,n){(function(e){e.STATIC_MEM_wasmDecoderState=-1,e.STATICE_MEM_playerCount=-1,e.STATICE_MEM_playerIndexPtr=0}).call(this,n(26))},function(e,t){t.UI=class{constructor(){}static createPlayerRender(e,t,n){return(e=document.querySelector("div#"+e)).style.position="relative",e.style.backgroundColor="black",e.style.width=t+"px",e.style.height=n+"px",e}}},function(e,t,n){(function(e,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a,o,s,l,u="Expected a function",c="__lodash_hash_undefined__",h="__lodash_placeholder__",d=9007199254740991,f=NaN,p=4294967295,m=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],g="[object Arguments]",_="[object Array]",y="[object Boolean]",v="[object Date]",A="[object Error]",E="[object Function]",b="[object GeneratorFunction]",w="[object Map]",T="[object Number]",S="[object Object]",R="[object Promise]",I="[object RegExp]",C="[object Set]",L="[object String]",P="[object Symbol]",D="[object WeakMap]",k="[object ArrayBuffer]",x="[object DataView]",M="[object Float32Array]",O="[object Float64Array]",N="[object Int8Array]",F="[object Int16Array]",B="[object Int32Array]",U="[object Uint8Array]",j="[object Uint8ClampedArray]",G="[object Uint16Array]",V="[object Uint32Array]",H=/\b__p \+= '';/g,Y=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,q=RegExp(W.source),Q=RegExp(K.source),X=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ne.source),re=/^\s+/,ae=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ae=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,be="\\ud800-\\udfff",we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\ufe0e\\ufe0f",Se="["+be+"]",Re="["+(De="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000")+"]",Ie="["+we+"]",Ce="["+(o="\\u2700-\\u27bf")+"]",Le="["+(Qe="a-z\\xdf-\\xf6\\xf8-\\xff")+"]",Pe="(?:"+Le+"|"+(De="[^"+be+De+"\\d+"+o+Qe+(s="A-Z\\xc0-\\xd6\\xd8-\\xde")+"]")+")",De="(?:"+(s="["+s+"]")+"|"+De+")",ke="(?:['’](?:d|ll|m|re|s|t|ve))?",xe="(?:['’](?:D|LL|M|RE|S|T|VE))?",Me=(Me="["+Te+"]?")+(Oe="(?:"+Ie+"|"+(o="\\ud83c[\\udffb-\\udfff]")+")?")+"(?:\\u200d(?:"+[Qe="[^"+be+"]",Xe="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+Me+Oe+")*",Oe="(?:"+[Ce,Xe,l].join("|")+")"+Me,Ne=(Ce="(?:"+[Qe+Ie+"?",Ie,Xe,l,Se].join("|")+")",RegExp("['’]","g")),Fe=RegExp(Ie,"g"),Be=RegExp(o+"(?="+o+")|"+Ce+Me,"g"),Ue=RegExp([s+"?"+Le+"+"+ke+"(?="+[Re,s,"$"].join("|")+")",De+"+"+xe+"(?="+[Re,s+Pe,"$"].join("|")+")",s+"?"+Pe+"+"+ke,s+"+"+xe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Oe].join("|"),"g"),je=RegExp("[\\u200d"+be+we+Te+"]"),Ge=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ve=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],He=-1,Ye={},ze=(Ye[M]=Ye[O]=Ye[N]=Ye[F]=Ye[B]=Ye[U]=Ye[j]=Ye[G]=Ye[V]=!0,Ye[g]=Ye[_]=Ye[k]=Ye[y]=Ye[x]=Ye[v]=Ye[A]=Ye[E]=Ye[w]=Ye[T]=Ye[S]=Ye[I]=Ye[C]=Ye[L]=Ye[D]=!1,{}),We=(ze[g]=ze[_]=ze[k]=ze[x]=ze[y]=ze[v]=ze[M]=ze[O]=ze[N]=ze[F]=ze[B]=ze[w]=ze[T]=ze[S]=ze[I]=ze[C]=ze[L]=ze[P]=ze[U]=ze[j]=ze[G]=ze[V]=!0,ze[A]=ze[E]=ze[D]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),Ke=parseFloat,qe=parseInt,Qe="object"==typeof e&&e&&e.Object===Object&&e,Xe="object"==typeof self&&self&&self.Object===Object&&self,Je=Qe||Xe||Function("return this")(),Ze=(l=t&&!t.nodeType&&t)&&"object"==typeof i&&i&&!i.nodeType&&i,$e=Ze&&Ze.exports===l,et=$e&&Qe.process,tt=(Se=function(){try{var e=Ze&&Ze.require&&Ze.require("util").types;return e||et&&et.binding&&et.binding("util")}catch(e){}}(),Se&&Se.isArrayBuffer),nt=Se&&Se.isDate,it=Se&&Se.isMap,rt=Se&&Se.isRegExp,at=Se&&Se.isSet,ot=Se&&Se.isTypedArray;function st(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function lt(e,t,n,i){for(var r=-1,a=null==e?0:e.length;++r<a;){var o=e[r];t(i,o,n(o),e)}return i}function ut(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ht(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function dt(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a}function ft(e,t){return!(null==e||!e.length)&&-1<wt(e,t,0)}function pt(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function mt(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function gt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function _t(e,t,n,i){var r=-1,a=null==e?0:e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function yt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function vt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var At=It("length");function Et(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function bt(e,t,n,i){for(var r=e.length,a=n+(i?1:-1);i?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function wt(e,t,n){if(t!=t)return bt(e,St,n);for(var i=e,r=t,a=n-1,o=i.length;++a<o;)if(i[a]===r)return a;return-1}function Tt(e,t,n,i){for(var r=n-1,a=e.length;++r<a;)if(i(e[r],t))return r;return-1}function St(e){return e!=e}function Rt(e,t){var n=null==e?0:e.length;return n?Pt(e,t)/n:f}function It(e){return function(t){return null==t?a:t[e]}}function Ct(e){return function(t){return null==e?a:e[t]}}function Lt(e,t,n,i,r){return r(e,(function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)})),n}function Pt(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);o!==a&&(n=n===a?o:n+o)}return n}function Dt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function kt(e){return e&&e.slice(0,qt(e)+1).replace(re,"")}function xt(e){return function(t){return e(t)}}function Mt(e,t){return mt(t,(function(t){return e[t]}))}function Ot(e,t){return e.has(t)}function Nt(e,t){for(var n=-1,i=e.length;++n<i&&-1<wt(t,e[n],0););return n}function Ft(e,t){for(var n=e.length;n--&&-1<wt(t,e[n],0););return n}var Bt=Ct({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ut=Ct({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function jt(e){return"\\"+We[e]}function Gt(e){return je.test(e)}function Vt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function Ht(e,t){return function(n){return e(t(n))}}function Yt(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o=e[n];o!==t&&o!==h||(e[n]=h,a[r++]=n)}return a}function zt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Wt(e){return(Gt(e)?function(e){for(var t=Be.lastIndex=0;Be.test(e);)++t;return t}:At)(e)}function Kt(e){return Gt(e)?e.match(Be)||[]:e.split("")}function qt(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var Qt=Ct({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Xt=function e(t){var n=(t=null==t?Je:Xt.defaults(Je.Object(),t,Xt.pick(Je,Ve))).Array,i=t.Date,r=t.Error,o=t.Function,s=t.Math,l=t.Object,ae=t.RegExp,be=t.String,we=t.TypeError,Te=n.prototype,Se=o.prototype,Re=l.prototype,Ie=t["__core-js_shared__"],Ce=Se.toString,Le=Re.hasOwnProperty,Pe=0,De=(Se=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+Se:"",ke=Re.toString,xe=Ce.call(l),Me=Je._,Oe=ae("^"+Ce.call(Le).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=(Se=$e?t.Buffer:a,t.Symbol),je=t.Uint8Array,We=Se?Se.allocUnsafe:a,Qe=Ht(l.getPrototypeOf,l),Xe=l.create,Ze=Re.propertyIsEnumerable,et=Te.splice,At=Be?Be.isConcatSpreadable:a,Ct=Be?Be.iterator:a,Jt=Be?Be.toStringTag:a,Zt=function(){try{var e=Zr(l,"defineProperty");return e({},"",{}),e}catch(e){}}(),$t=t.clearTimeout!==Je.clearTimeout&&t.clearTimeout,en=i&&i.now!==Je.Date.now&&i.now,tn=t.setTimeout!==Je.setTimeout&&t.setTimeout,nn=s.ceil,rn=s.floor,an=l.getOwnPropertySymbols,on=(Se=Se?Se.isBuffer:a,t.isFinite),sn=Te.join,ln=Ht(l.keys,l),un=s.max,cn=s.min,hn=i.now,dn=t.parseInt,fn=s.random,pn=Te.reverse,mn=(i=Zr(t,"DataView"),Zr(t,"Map")),gn=Zr(t,"Promise"),_n=Zr(t,"Set"),yn=(t=Zr(t,"WeakMap"),Zr(l,"create")),vn=t&&new t,An={},En=Sa(i),bn=Sa(mn),wn=Sa(gn),Tn=Sa(_n),Sn=Sa(t),Rn=(Be=Be?Be.prototype:a)?Be.valueOf:a,In=Be?Be.toString:a;function Cn(e){if(xo(e)&&!wo(e)&&!(e instanceof xn)){if(e instanceof kn)return e;if(Le.call(e,"__wrapped__"))return Ra(e)}return new kn(e)}var Ln=function(e){return ko(e)?Xe?Xe(e):(Pn.prototype=e,e=new Pn,Pn.prototype=a,e):{}};function Pn(){}function Dn(){}function kn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function xn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function On(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Nn;++t<n;)this.add(e[t])}function Bn(e){e=this.__data__=new On(e),this.size=e.size}function Un(e,t){var n,i=wo(e),r=!i&&bo(e),a=!i&&!r&&Io(e),o=!i&&!r&&!a&&Go(e),s=i||r||a||o,l=s?Dt(e.length,be):[],u=l.length;for(n in e)!t&&!Le.call(e,n)||s&&("length"==n||a&&("offset"==n||"parent"==n)||o&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||aa(n,u))||l.push(n);return l}function jn(e){var t=e.length;return t?e[Ni(0,t-1)]:a}function Gn(e,t){return Ea(gr(e),Xn(t,0,e.length))}function Vn(e){return Ea(gr(e))}function Hn(e,t,n){(n===a||vo(e[t],n))&&(n!==a||t in e)||qn(e,t,n)}function Yn(e,t,n){var i=e[t];Le.call(e,t)&&vo(i,n)&&(n!==a||t in e)||qn(e,t,n)}function zn(e,t){for(var n=e.length;n--;)if(vo(e[n][0],t))return n;return-1}function Wn(e,t,n,i){return ti(e,(function(e,r,a){t(i,e,n(e),a)})),i}function Kn(e,t){return e&&_r(t,us(t),e)}function qn(e,t,n){"__proto__"==t&&Zt?Zt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Qn(e,t){for(var i=-1,r=t.length,o=n(r),s=null==e;++i<r;)o[i]=s?a:rs(e,t[i]);return o}function Xn(e,t,n){return e==e&&(n!==a&&(e=e<=n?e:n),t!==a)?t<=e?e:t:e}function Jn(e,t,n,i,r,o){var s,u=1&t,c=2&t,h=4&t;if((s=n?r?n(e,i,r,o):n(e):s)===a){if(!ko(e))return e;var d;if(i=wo(e)){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!u)return gr(e,s)}else{var f=ta(e),p=f==E||f==b;if(Io(e))return cr(e,u);if(f==S||f==g||p&&!r){if(s=c||p?{}:ia(e),!u)return c?(m=p=e,m=(d=s)&&_r(m,cs(m),d),_r(p,ea(p),m)):(p=Kn(s,d=e),_r(d,$r(d),p))}else{if(!ze[f])return r?e:{};s=function(e,t,n){var i=e.constructor;switch(t){case k:return hr(e);case y:case v:return new i(+e);case x:return function(e,t){return t=t?hr(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case M:case O:case N:case F:case B:case U:case j:case G:case V:return dr(e,n);case w:return new i;case T:case L:return new i(e);case I:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new i;case P:return function(e){return Rn?l(Rn.call(e)):{}}(e)}}(e,f,u)}}var m=(o=o||new Bn).get(e);if(m)return m;o.set(e,s),Bo(e)?e.forEach((function(i){s.add(Jn(i,t,n,i,e,o))})):Mo(e)&&e.forEach((function(i,r){s.set(r,Jn(i,t,n,r,e,o))}));var _=i?a:(h?c?zr:Yr:c?cs:us)(e);ut(_||e,(function(i,r){_&&(i=e[r=i]),Yn(s,r,Jn(i,t,n,r,e,o))}))}return s}function Zn(e,t,n){var i=n.length;if(null==e)return!i;for(e=l(e);i--;){var r=n[i],o=t[r],s=e[r];if(s===a&&!(r in e)||!o(s))return!1}return!0}function $n(e,t,n){if("function"!=typeof e)throw new we(u);return _a((function(){e.apply(a,n)}),t)}function ei(e,t,n,i){var r=-1,a=ft,o=!0,s=e.length,l=[],u=t.length;if(s){n&&(t=mt(t,xt(n))),i?(a=pt,o=!1):200<=t.length&&(a=Ot,o=!1,t=new Fn(t));e:for(;++r<s;){var c=e[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,o&&h==h){for(var d=u;d--;)if(t[d]===h)continue e;l.push(c)}else a(t,h,i)||l.push(c)}}return l}Cn.templateSettings={escape:X,evaluate:J,interpolate:Z,variable:"",imports:{_:Cn}},(Cn.prototype=Dn.prototype).constructor=Cn,(kn.prototype=Ln(Dn.prototype)).constructor=kn,(xn.prototype=Ln(Dn.prototype)).constructor=xn,Mn.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},Mn.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Mn.prototype.get=function(e){var t,n=this.__data__;return yn?(t=n[e])===c?a:t:Le.call(n,e)?n[e]:a},Mn.prototype.has=function(e){var t=this.__data__;return yn?t[e]!==a:Le.call(t,e)},Mn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yn&&t===a?c:t,this},On.prototype.clear=function(){this.__data__=[],this.size=0},On.prototype.delete=function(e){var t=this.__data__;return!((e=zn(t,e))<0||(e==t.length-1?t.pop():et.call(t,e,1),--this.size,0))},On.prototype.get=function(e){var t=this.__data__;return(e=zn(t,e))<0?a:t[e][1]},On.prototype.has=function(e){return-1<zn(this.__data__,e)},On.prototype.set=function(e,t){var n=this.__data__,i=zn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(mn||On),string:new Mn}},Nn.prototype.delete=function(e){return e=Xr(this,e).delete(e),this.size-=e?1:0,e},Nn.prototype.get=function(e){return Xr(this,e).get(e)},Nn.prototype.has=function(e){return Xr(this,e).has(e)},Nn.prototype.set=function(e,t){var n=Xr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Fn.prototype.add=Fn.prototype.push=function(e){return this.__data__.set(e,c),this},Fn.prototype.has=function(e){return this.__data__.has(e)},Bn.prototype.clear=function(){this.__data__=new On,this.size=0},Bn.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Bn.prototype.get=function(e){return this.__data__.get(e)},Bn.prototype.has=function(e){return this.__data__.has(e)},Bn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof On){var i=n.__data__;if(!mn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Nn(i)}return n.set(e,t),this.size=n.size,this};var ti=Ar(ui),ni=Ar(ci,!0);function ii(e,t){var n=!0;return ti(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function ri(e,t,n){for(var i=-1,r=e.length;++i<r;){var o,s,l=e[i],u=t(l);null!=u&&(o===a?u==u&&!jo(u):n(u,o))&&(o=u,s=l)}return s}function ai(e,t){var n=[];return ti(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function oi(e,t,n,i,r){var a=-1,o=e.length;for(n=n||ra,r=r||[];++a<o;){var s=e[a];0<t&&n(s)?1<t?oi(s,t-1,n,i,r):gt(r,s):i||(r[r.length]=s)}return r}var si=Er(),li=Er(!0);function ui(e,t){return e&&si(e,t,us)}function ci(e,t){return e&&li(e,t,us)}function hi(e,t){return dt(t,(function(t){return Lo(e[t])}))}function di(e,t){for(var n=0,i=(t=or(t,e)).length;null!=e&&n<i;)e=e[Ta(t[n++])];return n&&n==i?e:a}function fi(e,t,n){return t=t(e),wo(e)?t:gt(t,n(e))}function pi(e){if(null==e)return e===a?"[object Undefined]":"[object Null]";if(Jt&&Jt in l(e)){var t=e,n=Le.call(t,Jt),i=t[Jt];try{t[Jt]=a;var r=!0}catch(e){}var o=ke.call(t);return r&&(n?t[Jt]=i:delete t[Jt]),o}return ke.call(e)}function mi(e,t){return t<e}function gi(e,t){return null!=e&&Le.call(e,t)}function _i(e,t){return null!=e&&t in l(e)}function yi(e,t,i){for(var r=i?pt:ft,o=e[0].length,s=e.length,l=s,u=n(s),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=mt(d,xt(t))),c=cn(d.length,c),u[l]=!i&&(t||120<=o&&120<=d.length)?new Fn(l&&d):a}d=e[0];var f=-1,p=u[0];e:for(;++f<o&&h.length<c;){var m=d[f],g=t?t(m):m;if(m=i||0!==m?m:0,!(p?Ot(p,g):r(h,g,i))){for(l=s;--l;){var _=u[l];if(!(_?Ot(_,g):r(e[l],g,i)))continue e}p&&p.push(g),h.push(m)}}return h}function vi(e,t,n){return null==(t=null==(e=pa(e,t=or(t,e)))?e:e[Ta(Da(t))])?a:st(t,e,n)}function Ai(e){return xo(e)&&pi(e)==g}function Ei(e,t,n,i,r){if(e===t)return!0;if(null==e||null==t||!xo(e)&&!xo(t))return e!=e&&t!=t;var o=Ei,s=wo(e),l=wo(t),u=s?_:ta(e),c=(l=l?_:ta(t),(u=u==g?S:u)==S),h=(l=l==g?S:l)==S;if((l=u==l)&&Io(e)){if(!Io(t))return!1;c=!(s=!0)}if(l&&!c){if(r=r||new Bn,s||Go(e))return Vr(e,t,n,i,o,r);var d=e,f=t,p=n,m=i,E=o,b=r;switch(u){case x:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case k:return!(d.byteLength!=f.byteLength||!E(new je(d),new je(f)));case y:case v:case T:return vo(+d,+f);case A:return d.name==f.name&&d.message==f.message;case I:case L:return d==f+"";case w:var R=Vt;case C:var D=1&p;return R=R||zt,!(d.size!=f.size&&!D)&&((D=b.get(d))?D==f:(p|=2,b.set(d,f),D=Vr(R(d),R(f),p,m,E,b),b.delete(d),D));case P:if(Rn)return Rn.call(d)==Rn.call(f)}return!1}if(!(1&n)&&(s=c&&Le.call(e,"__wrapped__"),u=h&&Le.call(t,"__wrapped__"),s||u))return o(c=s?e.value():e,h=u?t.value():t,n,i,r=r||new Bn);if(l){var M=e,O=t,N=n,F=i,B=o,U=r=r||new Bn,j=1&N,G=Yr(M),V=G.length;if(V!=(s=Yr(O).length)&&!j)return!1;for(var H=V;H--;){var Y=G[H];if(!(j?Y in O:Le.call(O,Y)))return!1}if(s=U.get(M),u=U.get(O),s&&u)return s==O&&u==M;for(var z=!0,W=(U.set(M,O),U.set(O,M),j);++H<V;){var K,q=M[Y=G[H]],Q=O[Y];if(!((K=F?j?F(Q,q,Y,O,M,U):F(q,Q,Y,M,O,U):K)===a?q===Q||B(q,Q,N,F,U):K)){z=!1;break}W=W||"constructor"==Y}return z&&!W&&(s=M.constructor)!=(u=O.constructor)&&"constructor"in M&&"constructor"in O&&!("function"==typeof s&&s instanceof s&&"function"==typeof u&&u instanceof u)&&(z=!1),U.delete(M),U.delete(O),z}return!1}function bi(e,t,n,i){var r=n.length,o=r,s=!i;if(null==e)return!o;for(e=l(e);r--;){var u=n[r];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++r<o;){var c=(u=n[r])[0],h=e[c],d=u[1];if(s&&u[2]){if(h===a&&!(c in e))return!1}else{var f,p=new Bn;if(!((f=i?i(h,d,c,e,t,p):f)===a?Ei(d,h,3,i,p):f))return!1}}return!0}function wi(e){var t;return!(!ko(e)||(t=e,De&&De in t))&&(Lo(e)?Oe:ge).test(Sa(e))}function Ti(e){return"function"==typeof e?e:null==e?Os:"object"==typeof e?wo(e)?Li(e[0],e[1]):Ci(e):Ys(e)}function Si(e){if(!ca(e))return ln(e);var t,n=[];for(t in l(e))Le.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Ri(e,t){return e<t}function Ii(e,t){var i=-1,r=So(e)?n(e.length):[];return ti(e,(function(e,n,a){r[++i]=t(e,n,a)})),r}function Ci(e){var t=Jr(e);return 1==t.length&&t[0][2]?da(t[0][0],t[0][1]):function(n){return n===e||bi(n,e,t)}}function Li(e,t){return sa(e)&&ha(t)?da(Ta(e),t):function(n){var i=rs(n,e);return i===a&&i===t?as(n,e):Ei(t,i,3)}}function Pi(e,t,n,i,r){e!==t&&si(t,(function(o,s){var l,u,c,h,d,f,p,m,g,_,y,v,A;r=r||new Bn,ko(o)?(u=t,h=n,d=Pi,f=i,p=r,y=ma(l=e,c=s),v=ma(u,c),(A=p.get(v))||((u=(A=f?f(y,v,c+"",l,u,p):a)===a)&&(g=!(m=wo(v))&&Io(v),_=!m&&!g&&Go(v),A=v,m||g||_?A=wo(y)?y:Ro(y)?gr(y):g?cr(v,!(u=!1)):_?dr(v,!(u=!1)):[]:No(v)||bo(v)?bo(A=y)?A=Qo(y):ko(y)&&!Lo(y)||(A=ia(v)):u=!1),u&&(p.set(v,A),d(A,v,h,f,p),p.delete(v))),Hn(l,c,A)):(m=i?i(ma(e,s),o,s+"",e,t,r):a,Hn(e,s,m=m===a?o:m))}),cs)}function Di(e,t){var n=e.length;if(n)return aa(t+=t<0?n:0,n)?e[t]:a}function ki(e,t,n){t=t.length?mt(t,(function(e){return wo(e)?function(t){return di(t,1===e.length?e[0]:e)}:e})):[Os];var i=-1;t=mt(t,xt(Qr()));var r=Ii(e,(function(e,n,r){return{criteria:mt(t,(function(t){return t(e)})),index:++i,value:e}})),a=(e=function(e,t){for(var i=n,r=-1,a=e.criteria,o=t.criteria,s=a.length,l=i.length;++r<s;){var u=fr(a[r],o[r]);if(u)return l<=r?u:u*("desc"==i[r]?-1:1)}return e.index-t.index},r.length);for(r.sort(e);a--;)r[a]=r[a].value;return r}function xi(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var o=t[i],s=di(e,o);n(s,o)&&Gi(a,or(o,e),s)}return a}function Mi(e,t,n,i){var r=i?Tt:wt,a=-1,o=t.length,s=e;for(e===t&&(t=gr(t)),n&&(s=mt(e,xt(n)));++a<o;)for(var l=0,u=t[a],c=n?n(u):u;-1<(l=r(s,c,l,i));)s!==e&&et.call(s,l,1),et.call(e,l,1);return e}function Oi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r,a=t[n];n!=i&&a===r||(aa(r=a)?et.call(e,a,1):Zi(e,a))}}function Ni(e,t){return e+rn(fn()*(t-e+1))}function Fi(e,t){var n="";if(!(!e||t<1||d<t))for(;t%2&&(n+=e),(t=rn(t/2))&&(e+=e),t;);return n}function Bi(e,t){return ya(fa(e,t,Os),e+"")}function Ui(e){return jn(ys(e))}function ji(e,t){return Ea(e=ys(e),Xn(t,0,e.length))}function Gi(e,t,n,i){if(ko(e))for(var r=-1,o=(t=or(t,e)).length,s=o-1,l=e;null!=l&&++r<o;){var u,c=Ta(t[r]),h=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;Yn(l,c,h=r!=s&&(u=l[c],(h=i?i(u,c,l):a)===a)?ko(u)?u:aa(t[r+1])?[]:{}:h),l=l[c]}return e}var Vi=vn?function(e,t){return vn.set(e,t),e}:Os;function Hi(e){return Ea(ys(e))}function Yi(e,t,i){for(var r=-1,a=e.length,o=((i=a<i?a:i)<0&&(i+=a),a=i<(t=t<0?a<-t?0:a+t:t)?0:i-t>>>0,t>>>=0,n(a));++r<a;)o[r]=e[r+t];return o}function zi(e,t){var n;return ti(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function Wi(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=e[a];null!==o&&!jo(o)&&(n?o<=t:o<t)?i=1+a:r=a}return r}return Ki(e,t,Os,n)}function Ki(e,t,n,i){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,l=null===t,u=jo(t),c=t===a;r<o;){var h=rn((r+o)/2),d=n(e[h]),f=d!==a,p=null===d,m=d==d,g=jo(d);(m=s?i||m:c?m&&(i||f):l?m&&f&&(i||!p):u?m&&f&&!p&&(i||!g):!p&&!g&&(i?d<=t:d<t))?r=h+1:o=h}return cn(o,4294967294)}function qi(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o,s=e[n],l=t?t(s):s;n&&vo(l,o)||(o=l,a[r++]=0===s?0:s)}return a}function Qi(e){return"number"==typeof e?e:jo(e)?f:+e}function Xi(e){var t;return"string"==typeof e?e:wo(e)?mt(e,Xi)+"":jo(e)?In?In.call(e):"":"0"==(t=e+"")&&1/e==-1/0?"-0":t}function Ji(e,t,n){var i=-1,r=ft,a=e.length,o=!0,s=[],l=s;if(n)o=!1,r=pt;else if(200<=a){var u=t?null:Nr(e);if(u)return zt(u);o=!1,r=Ot,l=new Fn}else l=t?[]:s;e:for(;++i<a;){var c=e[i],h=t?t(c):c;if(c=n||0!==c?c:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(c)}else r(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function Zi(e,t){return null==(e=pa(e,t=or(t,e)))||delete e[Ta(Da(t))]}function $i(e,t,n,i){return Gi(e,t,n(di(e,t)),i)}function er(e,t,n,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&t(e[a],a,e););return n?Yi(e,i?0:a,i?a+1:r):Yi(e,i?a+1:0,i?r:a)}function tr(e,t){var n=e;return _t(t,(function(e,t){return t.func.apply(t.thisArg,gt([e],t.args))}),n=e instanceof xn?e.value():n)}function nr(e,t,i){var r=e.length;if(r<2)return r?Ji(e[0]):[];for(var a=-1,o=n(r);++a<r;)for(var s=e[a],l=-1;++l<r;)l!=a&&(o[a]=ei(o[a]||s,e[l],t,i));return Ji(oi(o,1),t,i)}function ir(e,t,n){for(var i=-1,r=e.length,o=t.length,s={};++i<r;){var l=i<o?t[i]:a;n(s,e[i],l)}return s}function rr(e){return Ro(e)?e:[]}function ar(e){return"function"==typeof e?e:Os}function or(e,t){return wo(e)?e:sa(e,t)?[e]:wa(Xo(e))}Be=Zt?function(e,t){return Zt(e,"toString",{configurable:!0,enumerable:!1,value:ks(t),writable:!0})}:Os;var sr=Bi;function lr(e,t,n){var i=e.length;return n=n===a?i:n,!t&&i<=n?e:Yi(e,t,n)}var ur=$t||function(e){return Je.clearTimeout(e)};function cr(e,t){return t?e.slice():(t=e.length,t=We?We(t):new e.constructor(t),e.copy(t),t)}function hr(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function dr(e,t){return t=t?hr(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)}function fr(e,t){if(e!==t){var n=e!==a,i=null===e,r=e==e,o=jo(e),s=t!==a,l=null===t,u=t==t,c=jo(t);if(!l&&!c&&!o&&t<e||o&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!r)return 1;if(!i&&!o&&!c&&e<t||c&&n&&r&&!i&&!o||l&&n&&r||!s&&r||!u)return-1}return 0}function pr(e,t,i,r){for(var a=-1,o=e.length,s=i.length,l=-1,u=t.length,c=un(o-s,0),h=n(u+c),d=!r;++l<u;)h[l]=t[l];for(;++a<s;)(d||a<o)&&(h[i[a]]=e[a]);for(;c--;)h[l++]=e[a++];return h}function mr(e,t,i,r){for(var a=-1,o=e.length,s=-1,l=i.length,u=-1,c=t.length,h=un(o-l,0),d=n(h+c),f=!r;++a<h;)d[a]=e[a];for(var p=a;++u<c;)d[p+u]=t[u];for(;++s<l;)(f||a<o)&&(d[p+i[s]]=e[a++]);return d}function gr(e,t){var i=-1,r=e.length;for(t=t||n(r);++i<r;)t[i]=e[i];return t}function _r(e,t,n,i){for(var r=!n,o=(n=n||{},-1),s=t.length;++o<s;){var l=t[o],u=i?i(n[l],e[l],l,n,e):a;(r?qn:Yn)(n,l,u=u===a?e[l]:u)}return n}function yr(e,t){return function(n,i){var r=wo(n)?lt:Wn,a=t?t():{};return r(n,e,Qr(i,2),a)}}function vr(e){return Bi((function(t,n){var i=-1,r=n.length,o=1<r?n[r-1]:a,s=2<r?n[2]:a;for(o=3<e.length&&"function"==typeof o?(r--,o):a,s&&oa(n[0],n[1],s)&&(o=r<3?a:o,r=1),t=l(t);++i<r;){var u=n[i];u&&e(t,u,i,o)}return t}))}function Ar(e,t){return function(n,i){if(null!=n){if(!So(n))return e(n,i);for(var r=n.length,a=t?r:-1,o=l(n);(t?a--:++a<r)&&!1!==i(o[a],a,o););}return n}}function Er(e){return function(t,n,i){for(var r=-1,a=l(t),o=i(t),s=o.length;s--;){var u=o[e?s:++r];if(!1===n(a[u],u,a))break}return t}}function br(e){return function(t){var n=(i=Gt(t=Xo(t))?Kt(t):a)?i[0]:t.charAt(0),i=i?lr(i,1).join(""):t.slice(1);return n[e]()+i}}function wr(e){return function(t){return _t(Ls(Es(t).replace(Ne,"")),e,"")}}function Tr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ln(e.prototype),i=e.apply(n,t);return ko(i)?i:n}}function Sr(e){return function(t,n,i){var r,o=l(t);return-1<(So(t)||(r=Qr(n,3),t=us(t),n=function(e){return r(o[e],e,o)}),n=e(t,n,i))?o[r?t[n]:n]:a}}function Rr(e){return Hr((function(t){var n=t.length,i=n,r=kn.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new we(u);r&&!c&&"wrapper"==Kr(o)&&(c=new kn([],!0))}for(i=c?i:n;++i<n;)var s=Kr(o=t[i]),l="wrapper"==s?Wr(o):a,c=l&&la(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[Kr(l[0])].apply(c,l[3]):1==o.length&&la(o)?c[s]():c.thru(o);return function(){var e=arguments,i=e[0];if(c&&1==e.length&&wo(i))return c.plant(i).value();for(var r=0,a=n?t[r].apply(this,e):i;++r<n;)a=t[r].call(this,a);return a}}))}function Ir(e,t,i,r,o,s,l,u,c,h){var d=128&t,f=1&t,p=2&t,m=24&t,g=512&t,_=p?a:Tr(e);return function y(){for(var v,A,E,b=n(E=arguments.length),w=E;w--;)b[w]=arguments[w];return m&&(A=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(b,v=qr(y))),r&&(b=pr(b,r,o,m)),s&&(b=mr(b,s,l,m)),E-=A,m&&E<h?(A=Yt(b,v),Mr(e,t,Ir,y.placeholder,i,b,A,u,c,h-E)):(v=f?i:this,A=p?v[e]:e,E=b.length,u?b=function(e,t){for(var n=e.length,i=cn(t.length,n),r=gr(e);i--;){var o=t[i];e[i]=aa(o,n)?r[o]:a}return e}(b,u):g&&1<E&&b.reverse(),d&&c<E&&(b.length=c),(A=this&&this!==Je&&this instanceof y?_||Tr(A):A).apply(v,b))}}function Cr(e,t){return function(n,i){return r=e,a=t(i),o={},ui(n,(function(e,t,n){r(o,a(e),t,n)})),o;var r,a,o}}function Lr(e,t){return function(n,i){var r;if(n===a&&i===a)return t;if(n!==a&&(r=n),i!==a){if(r===a)return i;i=("string"==typeof n||"string"==typeof i?(n=Xi(n),Xi):(n=Qi(n),Qi))(i),r=e(n,i)}return r}}function Pr(e){return Hr((function(t){return t=mt(t,xt(Qr())),Bi((function(n){var i=this;return e(t,(function(e){return st(e,i,n)}))}))}))}function Dr(e,t){var n=(t=t===a?" ":Xi(t)).length;return n<2?n?Fi(t,e):t:(n=Fi(t,nn(e/Wt(t))),Gt(t)?lr(Kt(n),0,e).join(""):n.slice(0,e))}function kr(e){return function(t,i,r){r&&"number"!=typeof r&&oa(t,i,r)&&(i=r=a),t=zo(t),i===a?(i=t,t=0):i=zo(i);for(var o=t,s=r=r===a?t<i?1:-1:zo(r),l=e,u=-1,c=un(nn((i-o)/(s||1)),0),h=n(c);c--;)h[l?c:++u]=o,o+=s;return h}}function xr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=qo(t),n=qo(n)),e(t,n)}}function Mr(e,t,n,i,r,o,s,l,u,c){var h=8&t;return 4&(t=(t|(h?32:64))&~(h?64:32))||(t&=-4),r=[e,t,r,h?o:a,h?s:a,h?a:o,h?a:s,l,u,c],o=n.apply(a,r),la(e)&&ga(o,r),o.placeholder=i,va(o,e,t)}function Or(e){var t=s[e];return function(e,n){var i;return e=qo(e),(n=null==n?0:cn(Wo(n),292))&&on(e)?(i=(Xo(e)+"e").split("e"),+((i=(Xo(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))):t(e)}}var Nr=_n&&1/zt(new _n([,-0]))[1]==1/0?function(e){return new _n(e)}:js;function Fr(e){return function(t){var n,i,r,a=ta(t);return a==w?Vt(t):a==C?(a=t,n=-1,i=Array(a.size),a.forEach((function(e){i[++n]=[e,e]})),i):mt(e(r=t),(function(e){return[e,r[e]]}))}}function Br(e,t,i,r,o,s,l,c){var d,f,p,m,g,_,y,v,A,E,b,w,T,S=2&t;if(S||"function"==typeof e)return(d=r?r.length:0)||(t&=-97,r=o=a),l=l===a?l:un(Wo(l),0),c=c===a?c:Wo(c),d-=o?o.length:0,64&t&&(p=r,m=o,r=o=a),p=[e,t,i,r,o,p,m,s,l,c],(f=S?a:Wr(e))&&(m=f,v=(y=(l=(s=p)[1])|(_=m[1]))<131,A=128==_&&8==l||128==_&&256==l&&s[7].length<=m[8]||384==_&&m[7].length<=m[8]&&8==l,v||A)&&(1&_&&(s[2]=m[2],y|=1&l?0:4),(v=m[3])&&(g=s[3],s[3]=g?pr(g,v,m[4]):v,s[4]=g?Yt(s[3],h):m[4]),(v=m[5])&&(g=s[5],s[5]=g?mr(g,v,m[6]):v,s[6]=g?Yt(s[5],h):m[6]),(v=m[7])&&(s[7]=v),128&_&&(s[8]=null==s[8]?m[8]:cn(s[8],m[8])),null==s[9]&&(s[9]=m[9]),s[0]=m[0],s[1]=y),e=p[0],t=p[1],i=p[2],r=p[3],o=p[4],!(c=p[9]=p[9]===a?S?0:e.length:un(p[9]-d,0))&&24&t&&(t&=-25),A=t&&1!=t?8==t||16==t?function(e,t,i){var r=Tr(e);return function o(){for(var s=arguments.length,l=n(s),u=s,c=qr(o);u--;)l[u]=arguments[u];return(s-=(c=s<3&&l[0]!==c&&l[s-1]!==c?[]:Yt(l,c)).length)<i?Mr(e,t,Ir,o.placeholder,a,l,c,a,a,i-s):st(this&&this!==Je&&this instanceof o?r:e,this,l)}}(e,t,c):32!=t&&33!=t||o.length?Ir.apply(a,p):function(e,t,i,r){var a=1&t,o=Tr(e);return function t(){for(var s=-1,l=arguments.length,u=-1,c=r.length,h=n(c+l),d=this&&this!==Je&&this instanceof t?o:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++s];return st(d,a?i:this,h)}}(e,t,i,r):(b=i,w=1&t,T=Tr(E=e),function e(){return(this&&this!==Je&&this instanceof e?T:E).apply(w?b:this,arguments)}),va((f?Vi:ga)(A,p),e,t);throw new we(u)}function Ur(e,t,n,i){return e===a||vo(e,Re[n])&&!Le.call(i,n)?t:e}function jr(e,t,n,i,r,o){return ko(e)&&ko(t)&&(o.set(t,e),Pi(e,t,a,jr,o),o.delete(t)),e}function Gr(e){return No(e)?a:e}function Vr(e,t,n,i,r,o){var s=1&n,l=e.length;if(l!=(u=t.length)&&!(s&&l<u))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var h=-1,d=!0,f=2&n?new Fn:a;for(o.set(e,t),o.set(t,e);++h<l;){var p,m=e[h],g=t[h];if((p=i?s?i(g,m,h,t,e,o):i(m,g,h,e,t,o):p)!==a){if(p)continue;d=!1;break}if(f){if(!vt(t,(function(e,t){return!Ot(f,t)&&(m===e||r(m,e,n,i,o))&&f.push(t)}))){d=!1;break}}else if(m!==g&&!r(m,g,n,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Hr(e){return ya(fa(e,a,La),e+"")}function Yr(e){return fi(e,us,$r)}function zr(e){return fi(e,cs,ea)}var Wr=vn?function(e){return vn.get(e)}:js;function Kr(e){for(var t=e.name+"",n=An[t],i=Le.call(An,t)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==e)return r.name}return t}function qr(e){return(Le.call(Cn,"placeholder")?Cn:e).placeholder}function Qr(){var e=(e=Cn.iteratee||Ns)===Ns?Ti:e;return arguments.length?e(arguments[0],arguments[1]):e}function Xr(e,t){var n,i;return e=e.__data__,("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?e["string"==typeof t?"string":"hash"]:e.map}function Jr(e){for(var t=us(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,ha(r)]}return t}function Zr(e,t){return wi(e=null==e?a:e[t])?e:a}var $r=an?function(e){return null==e?[]:(e=l(e),dt(an(e),(function(t){return Ze.call(e,t)})))}:Ks,ea=an?function(e){for(var t=[];e;)gt(t,$r(e)),e=Qe(e);return t}:Ks,ta=pi;function na(e,t,n){for(var i=-1,r=(t=or(t,e)).length,a=!1;++i<r;){var o=Ta(t[i]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&Do(r)&&aa(o,r)&&(wo(e)||bo(e))}function ia(e){return"function"!=typeof e.constructor||ca(e)?{}:Ln(Qe(e))}function ra(e){return wo(e)||bo(e)||!!(At&&e&&e[At])}function aa(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&-1<e&&e%1==0&&e<t}function oa(e,t,n){var i;if(ko(n))return("number"==(i=typeof t)?So(n)&&aa(t,n.length):"string"==i&&t in n)&&vo(n[t],e)}function sa(e,t){var n;if(!wo(e))return"number"==(n=typeof e)||"symbol"==n||"boolean"==n||null==e||jo(e)||ee.test(e)||!$.test(e)||null!=t&&e in l(t)}function la(e){var t=Kr(e),n=Cn[t];return"function"==typeof n&&t in xn.prototype&&(e===n||(t=Wr(n))&&e===t[0])}(i&&ta(new i(new ArrayBuffer(1)))!=x||mn&&ta(new mn)!=w||gn&&ta(gn.resolve())!=R||_n&&ta(new _n)!=C||t&&ta(new t)!=D)&&(ta=function(e){var t=pi(e);if(e=(e=t==S?e.constructor:a)?Sa(e):"")switch(e){case En:return x;case bn:return w;case wn:return R;case Tn:return C;case Sn:return D}return t});var ua=Ie?Lo:qs;function ca(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function ha(e){return e==e&&!ko(e)}function da(e,t){return function(n){return null!=n&&n[e]===t&&(t!==a||e in l(n))}}function fa(e,t,i){return t=un(t===a?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=un(r.length-t,0),s=n(o);++a<o;)s[a]=r[t+a];a=-1;for(var l=n(t+1);++a<t;)l[a]=r[a];return l[t]=i(s),st(e,this,l)}}function pa(e,t){return t.length<2?e:di(e,Yi(t,0,-1))}function ma(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ga=Aa(Vi),_a=tn||function(e,t){return Je.setTimeout(e,t)},ya=Aa(Be);function va(e,t,n){var i,r,a;return ya(e,(r=(t=(t=e=t+="").match(se))?t[1].split(le):[],a=n,ut(m,(function(e){var t="_."+e[0];a&e[1]&&!ft(r,t)&&r.push(t)})),(n=(t=r.sort()).length)?(t[i=n-1]=(1<n?"& ":"")+t[i],t=t.join(2<n?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")):e))}function Aa(e){var t=0,n=0;return function(){var i=hn(),r=16-(i-n);if(n=i,0<r){if(800<=++t)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Ea(e,t){var n=-1,i=e.length,r=i-1;for(t=t===a?i:t;++n<t;){var o=Ni(n,r),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}ba=($t=po($t=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,(function(e,n,i,r){t.push(i?r.replace(he,"$1"):n||e)})),t},(function(e){return 500===ba.size&&ba.clear(),e}))).cache;var ba,wa=$t;function Ta(e){var t;return"string"==typeof e||jo(e)?e:"0"==(t=e+"")&&1/e==-1/0?"-0":t}function Sa(e){if(null!=e){try{return Ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ra(e){var t;return e instanceof xn?e.clone():((t=new kn(e.__wrapped__,e.__chain__)).__actions__=gr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t)}function Ia(e,t,n){var i=null==e?0:e.length;return i?((n=null==n?0:Wo(n))<0&&(n=un(i+n,0)),bt(e,Qr(t,3),n)):-1}function Ca(e,t,n){var i,r=null==e?0:e.length;return r?(i=r-1,n!==a&&(i=Wo(n),i=n<0?un(r+i,0):cn(i,r-1)),bt(e,Qr(t,3),i,!0)):-1}function La(e){return null!=e&&e.length?oi(e,1):[]}function Pa(e){return e&&e.length?e[0]:a}function Da(e){var t=null==e?0:e.length;return t?e[t-1]:a}function ka(e,t){return e&&e.length&&t&&t.length?Mi(e,t):e}i=Bi((function(e,t){return Ro(e)?ei(e,oi(t,1,Ro,!0)):[]})),gn=Bi((function(e,t){var n=Da(t);return Ro(n)&&(n=a),Ro(e)?ei(e,oi(t,1,Ro,!0),Qr(n,2)):[]})),t=Bi((function(e,t){var n=Da(t);return Ro(n)&&(n=a),Ro(e)?ei(e,oi(t,1,Ro,!0),a,n):[]})),Ie=Bi((function(e){var t=mt(e,rr);return t.length&&t[0]===e[0]?yi(t):[]})),tn=Bi((function(e){var t=Da(e),n=mt(e,rr);return t===Da(n)?t=a:n.pop(),n.length&&n[0]===e[0]?yi(n,Qr(t,2)):[]})),Be=Bi((function(e){var t=Da(e),n=mt(e,rr);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?yi(n,a,t):[]})),$t=Bi(ka);var xa=Hr((function(e,t){var n=null==e?0:e.length,i=Qn(e,t);return Oi(e,mt(t,(function(e){return aa(e,n)?+e:e})).sort(fr)),i}));function Ma(e){return null==e?e:pn.call(e)}var Oa=Bi((function(e){return Ji(oi(e,1,Ro,!0))})),Na=Bi((function(e){var t=Da(e);return Ro(t)&&(t=a),Ji(oi(e,1,Ro,!0),Qr(t,2))})),Fa=Bi((function(e){var t="function"==typeof(t=Da(e))?t:a;return Ji(oi(e,1,Ro,!0),a,t)}));function Ba(e){var t;return e&&e.length?(t=0,e=dt(e,(function(e){return Ro(e)&&(t=un(e.length,t),1)})),Dt(t,(function(t){return mt(e,It(t))}))):[]}function Ua(e,t){return e&&e.length?(e=Ba(e),null==t?e:mt(e,(function(e){return st(t,a,e)}))):[]}var ja=Bi((function(e,t){return Ro(e)?ei(e,t):[]})),Ga=Bi((function(e){return nr(dt(e,Ro))})),Va=Bi((function(e){var t=Da(e);return Ro(t)&&(t=a),nr(dt(e,Ro),Qr(t,2))})),Ha=Bi((function(e){var t="function"==typeof(t=Da(e))?t:a;return nr(dt(e,Ro),a,t)})),Ya=Bi(Ba),za=Bi((function(e){var t="function"==typeof(t=1<(t=e.length)?e[t-1]:a)?(e.pop(),t):a;return Ua(e,t)}));function Wa(e){return(e=Cn(e)).__chain__=!0,e}function Ka(e,t){return t(e)}var qa=Hr((function(e){function t(t){return Qn(t,e)}var n=e.length,i=n?e[0]:0,r=this.__wrapped__;return!(1<n||this.__actions__.length)&&r instanceof xn&&aa(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:Ka,args:[t],thisArg:a}),new kn(r,this.__chain__).thru((function(e){return n&&!e.length&&e.push(a),e}))):this.thru(t)})),Qa=yr((function(e,t,n){Le.call(e,n)?++e[n]:qn(e,n,1)})),Xa=Sr(Ia),Ja=Sr(Ca);function Za(e,t){return(wo(e)?ut:ti)(e,Qr(t,3))}function $a(e,t){return(wo(e)?ct:ni)(e,Qr(t,3))}var eo=yr((function(e,t,n){Le.call(e,n)?e[n].push(t):qn(e,n,[t])})),to=Bi((function(e,t,i){var r=-1,a="function"==typeof t,o=So(e)?n(e.length):[];return ti(e,(function(e){o[++r]=a?st(t,e,i):vi(e,t,i)})),o})),no=yr((function(e,t,n){qn(e,n,t)}));function io(e,t){return(wo(e)?mt:Ii)(e,Qr(t,3))}var ro=yr((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ao=Bi((function(e,t){var n;return null==e?[]:(1<(n=t.length)&&oa(e,t[0],t[1])?t=[]:2<n&&oa(t[0],t[1],t[2])&&(t=[t[0]]),ki(e,oi(t,1),[]))})),oo=en||function(){return Je.Date.now()};function so(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,Br(e,128,a,a,a,a,t)}function lo(e,t){var n;if("function"!=typeof t)throw new we(u);return e=Wo(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var uo=Bi((function(e,t,n){var i,r=1;return n.length&&(i=Yt(n,qr(uo)),r|=32),Br(e,r,t,n,i)})),co=Bi((function(e,t,n){var i,r=3;return n.length&&(i=Yt(n,qr(co)),r|=32),Br(t,r,e,n,i)}));function ho(e,t,n){var i,r,o,s,l,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new we(u);function m(t){var n=i,o=r;return i=r=a,h=t,s=e.apply(o,n)}function g(e){var n=e-c;return c===a||t<=n||n<0||f&&o<=e-h}function _(){var e,n=oo();if(g(n))return y(n);l=_a(_,(e=t-(n-c),f?cn(e,o-(n-h)):e))}function y(e){return l=a,p&&i?m(e):(i=r=a,s)}function v(){var e=oo(),n=g(e);if(i=arguments,r=this,c=e,n){if(l===a)return h=e=c,l=_a(_,t),d?m(e):s;if(f)return ur(l),l=_a(_,t),m(c)}return l===a&&(l=_a(_,t)),s}return t=qo(t)||0,ko(n)&&(d=!!n.leading,o=(f="maxWait"in n)?un(qo(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),v.cancel=function(){l!==a&&ur(l),h=0,i=c=r=l=a},v.flush=function(){return l===a?s:y(oo())},v}en=Bi((function(e,t){return $n(e,1,t)}));var fo=Bi((function(e,t,n){return $n(e,qo(t)||0,n)}));function po(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new we(u);function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;return a.has(r)?a.get(r):(i=e.apply(this,i),n.cache=a.set(r,i)||a,i)}return n.cache=new(po.Cache||Nn),n}function mo(e){if("function"!=typeof e)throw new we(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}po.Cache=Nn,sr=sr((function(e,t){var n=(t=1==t.length&&wo(t[0])?mt(t[0],xt(Qr())):mt(oi(t,1),xt(Qr()))).length;return Bi((function(i){for(var r=-1,a=cn(i.length,n);++r<a;)i[r]=t[r].call(this,i[r]);return st(e,this,i)}))}));var go=Bi((function(e,t){var n=Yt(t,qr(go));return Br(e,32,a,t,n)})),_o=Bi((function(e,t){var n=Yt(t,qr(_o));return Br(e,64,a,t,n)})),yo=Hr((function(e,t){return Br(e,256,a,a,a,t)}));function vo(e,t){return e===t||e!=e&&t!=t}var Ao=xr(mi),Eo=xr((function(e,t){return t<=e})),bo=Ai(function(){return arguments}())?Ai:function(e){return xo(e)&&Le.call(e,"callee")&&!Ze.call(e,"callee")},wo=n.isArray,To=tt?xt(tt):function(e){return xo(e)&&pi(e)==k};function So(e){return null!=e&&Do(e.length)&&!Lo(e)}function Ro(e){return xo(e)&&So(e)}var Io=Se||qs;function Co(e){var t;return!!xo(e)&&((t=pi(e))==A||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!No(e))}function Lo(e){return!!ko(e)&&((e=pi(e))==E||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Po(e){return"number"==typeof e&&e==Wo(e)}function Do(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=d}function ko(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function xo(e){return null!=e&&"object"==typeof e}Se=nt?xt(nt):function(e){return xo(e)&&pi(e)==v};var Mo=it?xt(it):function(e){return xo(e)&&ta(e)==w};function Oo(e){return"number"==typeof e||xo(e)&&pi(e)==T}function No(e){return!(!xo(e)||pi(e)!=S)&&(null===(e=Qe(e))||"function"==typeof(e=Le.call(e,"constructor")&&e.constructor)&&e instanceof e&&Ce.call(e)==xe)}var Fo=rt?xt(rt):function(e){return xo(e)&&pi(e)==I},Bo=at?xt(at):function(e){return xo(e)&&ta(e)==C};function Uo(e){return"string"==typeof e||!wo(e)&&xo(e)&&pi(e)==L}function jo(e){return"symbol"==typeof e||xo(e)&&pi(e)==P}var Go=ot?xt(ot):function(e){return xo(e)&&Do(e.length)&&!!Ye[pi(e)]},Vo=xr(Ri),Ho=xr((function(e,t){return e<=t}));function Yo(e){if(!e)return[];if(So(e))return(Uo(e)?Kt:gr)(e);if(Ct&&e[Ct]){for(var t,n=e[Ct](),i=[];!(t=n.next()).done;)i.push(t.value);return i}var r=ta(e);return(r==w?Vt:r==C?zt:ys)(e)}function zo(e){return e?(e=qo(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Wo(e){var t=(e=zo(e))%1;return e==e?t?e-t:e:0}function Ko(e){return e?Xn(Wo(e),0,p):0}function qo(e){if("number"==typeof e)return e;if(jo(e))return f;if("string"!=typeof(e=ko(e)?ko(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=kt(e);var t=me.test(e);return t||_e.test(e)?qe(e.slice(2),t?2:8):pe.test(e)?f:+e}function Qo(e){return _r(e,cs(e))}function Xo(e){return null==e?"":Xi(e)}var Jo=vr((function(e,t){if(ca(t)||So(t))_r(t,us(t),e);else for(var n in t)Le.call(t,n)&&Yn(e,n,t[n])})),Zo=vr((function(e,t){_r(t,cs(t),e)})),$o=vr((function(e,t,n,i){_r(t,cs(t),e,i)})),es=vr((function(e,t,n,i){_r(t,us(t),e,i)})),ts=Hr(Qn),ns=Bi((function(e,t){e=l(e);var n=-1,i=t.length,r=2<i?t[2]:a;for(r&&oa(t[0],t[1],r)&&(i=1);++n<i;)for(var o=t[n],s=cs(o),u=-1,c=s.length;++u<c;){var h=s[u],d=e[h];(d===a||vo(d,Re[h])&&!Le.call(e,h))&&(e[h]=o[h])}return e})),is=Bi((function(e){return e.push(a,jr),st(ds,a,e)}));function rs(e,t,n){return(e=null==e?a:di(e,t))===a?n:e}function as(e,t){return null!=e&&na(e,t,_i)}var os=Cr((function(e,t,n){e[t=null!=t&&"function"!=typeof t.toString?ke.call(t):t]=n}),ks(Os)),ss=Cr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ke.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),Qr),ls=Bi(vi);function us(e){return(So(e)?Un:Si)(e)}function cs(e){return So(e)?Un(e,!0):function(e){if(!ko(e)){var t=e,n=[];if(null!=t)for(var i in l(t))n.push(i);return n}var r,a=ca(e),o=[];for(r in e)("constructor"!=r||!a&&Le.call(e,r))&&o.push(r);return o}(e)}var hs=vr((function(e,t,n){Pi(e,t,n)})),ds=vr((function(e,t,n,i){Pi(e,t,n,i)})),fs=Hr((function(e,t){var n={};if(null!=e)for(var i=!1,r=(t=mt(t,(function(t){return t=or(t,e),i=i||1<t.length,t})),_r(e,zr(e),n),i&&(n=Jn(n,7,Gr)),t.length);r--;)Zi(n,t[r]);return n})),ps=Hr((function(e,t){return null==e?{}:xi(n=e,t,(function(e,t){return as(n,t)}));var n}));function ms(e,t){var n;return null==e?{}:(n=mt(zr(e),(function(e){return[e]})),t=Qr(t),xi(e,n,(function(e,n){return t(e,n[0])})))}var gs=Fr(us),_s=Fr(cs);function ys(e){return null==e?[]:Mt(e,us(e))}var vs=wr((function(e,t,n){return t=t.toLowerCase(),e+(n?As(t):t)}));function As(e){return Cs(Xo(e).toLowerCase())}function Es(e){return(e=Xo(e))&&e.replace(ve,Bt).replace(Fe,"")}var bs=wr((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),ws=wr((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ts=br("toLowerCase"),Ss=wr((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Rs=wr((function(e,t,n){return e+(n?" ":"")+Cs(t)})),Is=wr((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Cs=br("toUpperCase");function Ls(e,t,n){return e=Xo(e),(t=n?a:t)===a?(n=e,Ge.test(n)?e.match(Ue)||[]:e.match(ue)||[]):e.match(t)||[]}var Ps=Bi((function(e,t){try{return st(e,a,t)}catch(e){return Co(e)?e:new r(e)}})),Ds=Hr((function(e,t){return ut(t,(function(t){t=Ta(t),qn(e,t,uo(e[t],e))})),e}));function ks(e){return function(){return e}}var xs=Rr(),Ms=Rr(!0);function Os(e){return e}function Ns(e){return Ti("function"==typeof e?e:Jn(e,1))}var Fs=Bi((function(e,t){return function(n){return vi(n,e,t)}})),Bs=Bi((function(e,t){return function(n){return vi(e,n,t)}}));function Us(e,t,n){var i=us(t),r=hi(t,i),a=(null!=n||ko(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=hi(t,us(t))),!(ko(n)&&"chain"in n&&!n.chain)),o=Lo(e);return ut(r,(function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t,n=this.__chain__;return a||n?(((t=e(this.__wrapped__)).__actions__=gr(this.__actions__)).push({func:i,args:arguments,thisArg:e}),t.__chain__=n,t):i.apply(e,gt([this.value()],arguments))})})),e}function js(){}var Gs=Pr(mt),Vs=Pr(ht),Hs=Pr(vt);function Ys(e){return sa(e)?It(Ta(e)):(t=e,function(e){return di(e,t)});var t}var zs=kr(),Ws=kr(!0);function Ks(){return[]}function qs(){return!1}var Qs,Xs=Lr((function(e,t){return e+t}),0),Js=Or("ceil"),Zs=Lr((function(e,t){return e/t}),1),$s=Or("floor"),el=Lr((function(e,t){return e*t}),1),tl=Or("round"),nl=Lr((function(e,t){return e-t}),0);return Cn.after=function(e,t){if("function"!=typeof t)throw new we(u);return e=Wo(e),function(){if(--e<1)return t.apply(this,arguments)}},Cn.ary=so,Cn.assign=Jo,Cn.assignIn=Zo,Cn.assignInWith=$o,Cn.assignWith=es,Cn.at=ts,Cn.before=lo,Cn.bind=uo,Cn.bindAll=Ds,Cn.bindKey=co,Cn.castArray=function(){var e;return arguments.length?wo(e=arguments[0])?e:[e]:[]},Cn.chain=Wa,Cn.chunk=function(e,t,i){t=(i?oa(e,t,i):t===a)?1:un(Wo(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,s=0,l=n(nn(r/t));o<r;)l[s++]=Yi(e,o,o+=t);return l},Cn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var a=e[t];a&&(r[i++]=a)}return r},Cn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return gt(wo(i)?gr(i):[i],oi(t,1))},Cn.cond=function(e){var t=null==e?0:e.length,n=Qr();return e=t?mt(e,(function(e){if("function"!=typeof e[1])throw new we(u);return[n(e[0]),e[1]]})):[],Bi((function(n){for(var i=-1;++i<t;){var r=e[i];if(st(r[0],this,n))return st(r[1],this,n)}}))},Cn.conforms=function(e){return t=Jn(e,1),n=us(t),function(e){return Zn(e,t,n)};var t,n},Cn.constant=ks,Cn.countBy=Qa,Cn.create=function(e,t){return e=Ln(e),null==t?e:Kn(e,t)},Cn.curry=function e(t,n,i){return(t=Br(t,8,a,a,a,a,a,n=i?a:n)).placeholder=e.placeholder,t},Cn.curryRight=function e(t,n,i){return(t=Br(t,16,a,a,a,a,a,n=i?a:n)).placeholder=e.placeholder,t},Cn.debounce=ho,Cn.defaults=ns,Cn.defaultsDeep=is,Cn.defer=en,Cn.delay=fo,Cn.difference=i,Cn.differenceBy=gn,Cn.differenceWith=t,Cn.drop=function(e,t,n){var i=null==e?0:e.length;return i?Yi(e,(t=n||t===a?1:Wo(t))<0?0:t,i):[]},Cn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Yi(e,0,(t=i-(t=n||t===a?1:Wo(t)))<0?0:t):[]},Cn.dropRightWhile=function(e,t){return e&&e.length?er(e,Qr(t,3),!0,!0):[]},Cn.dropWhile=function(e,t){return e&&e.length?er(e,Qr(t,3),!0):[]},Cn.fill=function(e,t,n,i){if(!(u=null==e?0:e.length))return[];n&&"number"!=typeof n&&oa(e,t,n)&&(n=0,i=u);var r=e,o=t,s=n,l=i,u=r.length;for((s=Wo(s))<0&&(s=u<-s?0:u+s),(l=l===a||u<l?u:Wo(l))<0&&(l+=u),l=l<s?0:Ko(l);s<l;)r[s++]=o;return r},Cn.filter=function(e,t){return(wo(e)?dt:ai)(e,Qr(t,3))},Cn.flatMap=function(e,t){return oi(io(e,t),1)},Cn.flatMapDeep=function(e,t){return oi(io(e,t),1/0)},Cn.flatMapDepth=function(e,t,n){return n=n===a?1:Wo(n),oi(io(e,t),n)},Cn.flatten=La,Cn.flattenDeep=function(e){return null!=e&&e.length?oi(e,1/0):[]},Cn.flattenDepth=function(e,t){return null!=e&&e.length?oi(e,t=t===a?1:Wo(t)):[]},Cn.flip=function(e){return Br(e,512)},Cn.flow=xs,Cn.flowRight=Ms,Cn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},Cn.functions=function(e){return null==e?[]:hi(e,us(e))},Cn.functionsIn=function(e){return null==e?[]:hi(e,cs(e))},Cn.groupBy=eo,Cn.initial=function(e){return null!=e&&e.length?Yi(e,0,-1):[]},Cn.intersection=Ie,Cn.intersectionBy=tn,Cn.intersectionWith=Be,Cn.invert=os,Cn.invertBy=ss,Cn.invokeMap=to,Cn.iteratee=Ns,Cn.keyBy=no,Cn.keys=us,Cn.keysIn=cs,Cn.map=io,Cn.mapKeys=function(e,t){var n={};return t=Qr(t,3),ui(e,(function(e,i,r){qn(n,t(e,i,r),e)})),n},Cn.mapValues=function(e,t){var n={};return t=Qr(t,3),ui(e,(function(e,i,r){qn(n,i,t(e,i,r))})),n},Cn.matches=function(e){return Ci(Jn(e,1))},Cn.matchesProperty=function(e,t){return Li(e,Jn(t,1))},Cn.memoize=po,Cn.merge=hs,Cn.mergeWith=ds,Cn.method=Fs,Cn.methodOf=Bs,Cn.mixin=Us,Cn.negate=mo,Cn.nthArg=function(e){return e=Wo(e),Bi((function(t){return Di(t,e)}))},Cn.omit=fs,Cn.omitBy=function(e,t){return ms(e,mo(Qr(t)))},Cn.once=function(e){return lo(2,e)},Cn.orderBy=function(e,t,n,i){return null==e?[]:ki(e,t=wo(t)?t:null==t?[]:[t],n=wo(n=i?a:n)?n:null==n?[]:[n])},Cn.over=Gs,Cn.overArgs=sr,Cn.overEvery=Vs,Cn.overSome=Hs,Cn.partial=go,Cn.partialRight=_o,Cn.partition=ro,Cn.pick=ps,Cn.pickBy=ms,Cn.property=Ys,Cn.propertyOf=function(e){return function(t){return null==e?a:di(e,t)}},Cn.pull=$t,Cn.pullAll=ka,Cn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Mi(e,t,Qr(n,2)):e},Cn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Mi(e,t,a,n):e},Cn.pullAt=xa,Cn.range=zs,Cn.rangeRight=Ws,Cn.rearg=yo,Cn.reject=function(e,t){return(wo(e)?dt:ai)(e,mo(Qr(t,3)))},Cn.remove=function(e,t){var n=[];if(e&&e.length){var i=-1,r=[],a=e.length;for(t=Qr(t,3);++i<a;){var o=e[i];t(o,i,e)&&(n.push(o),r.push(i))}Oi(e,r)}return n},Cn.rest=function(e,t){if("function"!=typeof e)throw new we(u);return Bi(e,t=t===a?t:Wo(t))},Cn.reverse=Ma,Cn.sampleSize=function(e,t,n){return t=(n?oa(e,t,n):t===a)?1:Wo(t),(wo(e)?Gn:ji)(e,t)},Cn.set=function(e,t,n){return null==e?e:Gi(e,t,n)},Cn.setWith=function(e,t,n,i){return i="function"==typeof i?i:a,null==e?e:Gi(e,t,n,i)},Cn.shuffle=function(e){return(wo(e)?Vn:Hi)(e)},Cn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n=n&&"number"!=typeof n&&oa(e,t,n)?(t=0,i):(t=null==t?0:Wo(t),n===a?i:Wo(n)),Yi(e,t,n)):[]},Cn.sortBy=ao,Cn.sortedUniq=function(e){return e&&e.length?qi(e):[]},Cn.sortedUniqBy=function(e,t){return e&&e.length?qi(e,Qr(t,2)):[]},Cn.split=function(e,t,n){return n&&"number"!=typeof n&&oa(e,t,n)&&(t=n=a),(n=n===a?p:n>>>0)?(e=Xo(e))&&("string"==typeof t||null!=t&&!Fo(t))&&!(t=Xi(t))&&Gt(e)?lr(Kt(e),0,n):e.split(t,n):[]},Cn.spread=function(e,t){if("function"!=typeof e)throw new we(u);return t=null==t?0:un(Wo(t),0),Bi((function(n){var i=n[t];return n=lr(n,0,t),i&&gt(n,i),st(e,this,n)}))},Cn.tail=function(e){var t=null==e?0:e.length;return t?Yi(e,1,t):[]},Cn.take=function(e,t,n){return e&&e.length?Yi(e,0,(t=n||t===a?1:Wo(t))<0?0:t):[]},Cn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Yi(e,(t=i-(t=n||t===a?1:Wo(t)))<0?0:t,i):[]},Cn.takeRightWhile=function(e,t){return e&&e.length?er(e,Qr(t,3),!1,!0):[]},Cn.takeWhile=function(e,t){return e&&e.length?er(e,Qr(t,3)):[]},Cn.tap=function(e,t){return t(e),e},Cn.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new we(u);return ko(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),ho(e,t,{leading:i,maxWait:t,trailing:r})},Cn.thru=Ka,Cn.toArray=Yo,Cn.toPairs=gs,Cn.toPairsIn=_s,Cn.toPath=function(e){return wo(e)?mt(e,Ta):jo(e)?[e]:gr(wa(Xo(e)))},Cn.toPlainObject=Qo,Cn.transform=function(e,t,n){var i,r=wo(e),a=r||Io(e)||Go(e);return t=Qr(t,4),null==n&&(i=e&&e.constructor,n=a?r?new i:[]:ko(e)&&Lo(i)?Ln(Qe(e)):{}),(a?ut:ui)(e,(function(e,i,r){return t(n,e,i,r)})),n},Cn.unary=function(e){return so(e,1)},Cn.union=Oa,Cn.unionBy=Na,Cn.unionWith=Fa,Cn.uniq=function(e){return e&&e.length?Ji(e):[]},Cn.uniqBy=function(e,t){return e&&e.length?Ji(e,Qr(t,2)):[]},Cn.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?Ji(e,a,t):[]},Cn.unset=function(e,t){return null==e||Zi(e,t)},Cn.unzip=Ba,Cn.unzipWith=Ua,Cn.update=function(e,t,n){return null==e?e:$i(e,t,ar(n))},Cn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:a,null==e?e:$i(e,t,ar(n),i)},Cn.values=ys,Cn.valuesIn=function(e){return null==e?[]:Mt(e,cs(e))},Cn.without=ja,Cn.words=Ls,Cn.wrap=function(e,t){return go(ar(t),e)},Cn.xor=Ga,Cn.xorBy=Va,Cn.xorWith=Ha,Cn.zip=Ya,Cn.zipObject=function(e,t){return ir(e||[],t||[],Yn)},Cn.zipObjectDeep=function(e,t){return ir(e||[],t||[],Gi)},Cn.zipWith=za,Cn.entries=gs,Cn.entriesIn=_s,Cn.extend=Zo,Cn.extendWith=$o,Us(Cn,Cn),Cn.add=Xs,Cn.attempt=Ps,Cn.camelCase=vs,Cn.capitalize=As,Cn.ceil=Js,Cn.clamp=function(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=qo(n))==n?n:0),t!==a&&(t=(t=qo(t))==t?t:0),Xn(qo(e),t,n)},Cn.clone=function(e){return Jn(e,4)},Cn.cloneDeep=function(e){return Jn(e,5)},Cn.cloneDeepWith=function(e,t){return Jn(e,5,t="function"==typeof t?t:a)},Cn.cloneWith=function(e,t){return Jn(e,4,t="function"==typeof t?t:a)},Cn.conformsTo=function(e,t){return null==t||Zn(e,t,us(t))},Cn.deburr=Es,Cn.defaultTo=function(e,t){return null==e||e!=e?t:e},Cn.divide=Zs,Cn.endsWith=function(e,t,n){e=Xo(e),t=Xi(t);var i=e.length;return i=n=n===a?i:Xn(Wo(n),0,i),0<=(n-=t.length)&&e.slice(n,i)==t},Cn.eq=vo,Cn.escape=function(e){return(e=Xo(e))&&Q.test(e)?e.replace(K,Ut):e},Cn.escapeRegExp=function(e){return(e=Xo(e))&&ie.test(e)?e.replace(ne,"\\$&"):e},Cn.every=function(e,t,n){return(wo(e)?ht:ii)(e,Qr(t=n&&oa(e,t,n)?a:t,3))},Cn.find=Xa,Cn.findIndex=Ia,Cn.findKey=function(e,t){return Et(e,Qr(t,3),ui)},Cn.findLast=Ja,Cn.findLastIndex=Ca,Cn.findLastKey=function(e,t){return Et(e,Qr(t,3),ci)},Cn.floor=$s,Cn.forEach=Za,Cn.forEachRight=$a,Cn.forIn=function(e,t){return null==e?e:si(e,Qr(t,3),cs)},Cn.forInRight=function(e,t){return null==e?e:li(e,Qr(t,3),cs)},Cn.forOwn=function(e,t){return e&&ui(e,Qr(t,3))},Cn.forOwnRight=function(e,t){return e&&ci(e,Qr(t,3))},Cn.get=rs,Cn.gt=Ao,Cn.gte=Eo,Cn.has=function(e,t){return null!=e&&na(e,t,gi)},Cn.hasIn=as,Cn.head=Pa,Cn.identity=Os,Cn.includes=function(e,t,n,i){return e=So(e)?e:ys(e),n=n&&!i?Wo(n):0,i=e.length,n<0&&(n=un(i+n,0)),Uo(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<wt(e,t,n)},Cn.indexOf=function(e,t,n){var i=null==e?0:e.length;return i?wt(e,t,e=(e=null==n?0:Wo(n))<0?un(i+e,0):e):-1},Cn.inRange=function(e,t,n){return t=zo(t),n===a?(n=t,t=0):n=zo(n),(e=e=qo(e))>=cn(t,n)&&e<un(t,n)},Cn.invoke=ls,Cn.isArguments=bo,Cn.isArray=wo,Cn.isArrayBuffer=To,Cn.isArrayLike=So,Cn.isArrayLikeObject=Ro,Cn.isBoolean=function(e){return!0===e||!1===e||xo(e)&&pi(e)==y},Cn.isBuffer=Io,Cn.isDate=Se,Cn.isElement=function(e){return xo(e)&&1===e.nodeType&&!No(e)},Cn.isEmpty=function(e){if(null!=e){if(So(e)&&(wo(e)||"string"==typeof e||"function"==typeof e.splice||Io(e)||Go(e)||bo(e)))return!e.length;var t,n=ta(e);if(n==w||n==C)return!e.size;if(ca(e))return!Si(e).length;for(t in e)if(Le.call(e,t))return!1}return!0},Cn.isEqual=function(e,t){return Ei(e,t)},Cn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:a)?n(e,t):a;return i===a?Ei(e,t,a,n):!!i},Cn.isError=Co,Cn.isFinite=function(e){return"number"==typeof e&&on(e)},Cn.isFunction=Lo,Cn.isInteger=Po,Cn.isLength=Do,Cn.isMap=Mo,Cn.isMatch=function(e,t){return e===t||bi(e,t,Jr(t))},Cn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:a,bi(e,t,Jr(t),n)},Cn.isNaN=function(e){return Oo(e)&&e!=+e},Cn.isNative=function(e){if(ua(e))throw new r("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wi(e)},Cn.isNil=function(e){return null==e},Cn.isNull=function(e){return null===e},Cn.isNumber=Oo,Cn.isObject=ko,Cn.isObjectLike=xo,Cn.isPlainObject=No,Cn.isRegExp=Fo,Cn.isSafeInteger=function(e){return Po(e)&&-d<=e&&e<=d},Cn.isSet=Bo,Cn.isString=Uo,Cn.isSymbol=jo,Cn.isTypedArray=Go,Cn.isUndefined=function(e){return e===a},Cn.isWeakMap=function(e){return xo(e)&&ta(e)==D},Cn.isWeakSet=function(e){return xo(e)&&"[object WeakSet]"==pi(e)},Cn.join=function(e,t){return null==e?"":sn.call(e,t)},Cn.kebabCase=bs,Cn.last=Da,Cn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;if(n!==a&&(r=(r=Wo(n))<0?un(i+r,0):cn(r,i-1)),t!=t)return bt(e,St,r,!0);for(var o=e,s=t,l=r+1;l--;)if(o[l]===s)return l;return l},Cn.lowerCase=ws,Cn.lowerFirst=Ts,Cn.lt=Vo,Cn.lte=Ho,Cn.max=function(e){return e&&e.length?ri(e,Os,mi):a},Cn.maxBy=function(e,t){return e&&e.length?ri(e,Qr(t,2),mi):a},Cn.mean=function(e){return Rt(e,Os)},Cn.meanBy=function(e,t){return Rt(e,Qr(t,2))},Cn.min=function(e){return e&&e.length?ri(e,Os,Ri):a},Cn.minBy=function(e,t){return e&&e.length?ri(e,Qr(t,2),Ri):a},Cn.stubArray=Ks,Cn.stubFalse=qs,Cn.stubObject=function(){return{}},Cn.stubString=function(){return""},Cn.stubTrue=function(){return!0},Cn.multiply=el,Cn.nth=function(e,t){return e&&e.length?Di(e,Wo(t)):a},Cn.noConflict=function(){return Je._===this&&(Je._=Me),this},Cn.noop=js,Cn.now=oo,Cn.pad=function(e,t,n){e=Xo(e);var i=(t=Wo(t))?Wt(e):0;return!t||t<=i?e:Dr(rn(t=(t-i)/2),n)+e+Dr(nn(t),n)},Cn.padEnd=function(e,t,n){e=Xo(e);var i=(t=Wo(t))?Wt(e):0;return t&&i<t?e+Dr(t-i,n):e},Cn.padStart=function(e,t,n){e=Xo(e);var i=(t=Wo(t))?Wt(e):0;return t&&i<t?Dr(t-i,n)+e:e},Cn.parseInt=function(e,t,n){return t=n||null==t?0:t&&+t,dn(Xo(e).replace(re,""),t||0)},Cn.random=function(e,t,n){var i;return n&&"boolean"!=typeof n&&oa(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=zo(e),t===a?(t=e,e=0):t=zo(t)),t<e&&(i=e,e=t,t=i),n||e%1||t%1?(i=fn(),cn(e+i*(t-e+Ke("1e-"+((i+"").length-1))),t)):Ni(e,t)},Cn.reduce=function(e,t,n){var i=wo(e)?_t:Lt,r=arguments.length<3;return i(e,Qr(t,4),n,r,ti)},Cn.reduceRight=function(e,t,n){var i=wo(e)?yt:Lt,r=arguments.length<3;return i(e,Qr(t,4),n,r,ni)},Cn.repeat=function(e,t,n){return t=(n?oa(e,t,n):t===a)?1:Wo(t),Fi(Xo(e),t)},Cn.replace=function(){var e=arguments,t=Xo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Cn.result=function(e,t,n){var i=-1,r=(t=or(t,e)).length;for(r||(r=1,e=a);++i<r;){var o=null==e?a:e[Ta(t[i])];o===a&&(i=r,o=n),e=Lo(o)?o.call(e):o}return e},Cn.round=tl,Cn.runInContext=e,Cn.sample=function(e){return(wo(e)?jn:Ui)(e)},Cn.size=function(e){var t;return null==e?0:So(e)?Uo(e)?Wt(e):e.length:(t=ta(e))==w||t==C?e.size:Si(e).length},Cn.snakeCase=Ss,Cn.some=function(e,t,n){return(wo(e)?vt:zi)(e,Qr(t=n&&oa(e,t,n)?a:t,3))},Cn.sortedIndex=function(e,t){return Wi(e,t)},Cn.sortedIndexBy=function(e,t,n){return Ki(e,t,Qr(n,2))},Cn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Wi(e,t);if(i<n&&vo(e[i],t))return i}return-1},Cn.sortedLastIndex=function(e,t){return Wi(e,t,!0)},Cn.sortedLastIndexBy=function(e,t,n){return Ki(e,t,Qr(n,2),!0)},Cn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Wi(e,t,!0)-1;if(vo(e[n],t))return n}return-1},Cn.startCase=Rs,Cn.startsWith=function(e,t,n){return e=Xo(e),n=null==n?0:Xn(Wo(n),0,e.length),t=Xi(t),e.slice(n,n+t.length)==t},Cn.subtract=nl,Cn.sum=function(e){return e&&e.length?Pt(e,Os):0},Cn.sumBy=function(e,t){return e&&e.length?Pt(e,Qr(t,2)):0},Cn.template=function(e,t,n){var i,s,l=Cn.templateSettings;n&&oa(e,t,n)&&(t=a),e=Xo(e),t=$o({},t,l,Ur);var u=us(n=$o({},t.imports,l.imports,Ur)),c=Mt(n,u),h=0,d=(l=t.interpolate||Ae,"__p += '"),f=(n=ae((t.escape||Ae).source+"|"+l.source+"|"+(l===Z?de:Ae).source+"|"+(t.evaluate||Ae).source+"|$","g"),"//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++He+"]")+"\n");if(e.replace(n,(function(t,n,r,a,o,l){return r=r||a,d+=e.slice(h,l).replace(Ee,jt),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=l+t.length,t})),d+="';\n",l=Le.call(t,"variable")&&t.variable){if(ce.test(l))throw new r("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";if(d=(s?d.replace(H,""):d).replace(Y,"$1").replace(z,"$1;"),d="function("+(l||"obj")+") {\n"+(l?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}",(n=Ps((function(){return o(u,f+"return "+d).apply(a,c)}))).source=d,Co(n))throw n;return n},Cn.times=function(e,t){if((e=Wo(e))<1||d<e)return[];var n=p,i=cn(e,p);for(t=Qr(t),e-=p,i=Dt(i,t);++n<e;)t(n);return i},Cn.toFinite=zo,Cn.toInteger=Wo,Cn.toLength=Ko,Cn.toLower=function(e){return Xo(e).toLowerCase()},Cn.toNumber=qo,Cn.toSafeInteger=function(e){return e?Xn(Wo(e),-d,d):0===e?e:0},Cn.toString=Xo,Cn.toUpper=function(e){return Xo(e).toUpperCase()},Cn.trim=function(e,t,n){return(e=Xo(e))&&(n||t===a)?kt(e):e&&(t=Xi(t))?lr(n=Kt(e),Nt(n,t=Kt(t)),Ft(n,t)+1).join(""):e},Cn.trimEnd=function(e,t,n){return(e=Xo(e))&&(n||t===a)?e.slice(0,qt(e)+1):e&&(t=Xi(t))?lr(n=Kt(e),0,Ft(n,Kt(t))+1).join(""):e},Cn.trimStart=function(e,t,n){return(e=Xo(e))&&(n||t===a)?e.replace(re,""):e&&(t=Xi(t))?lr(n=Kt(e),Nt(n,Kt(t))).join(""):e},Cn.truncate=function(e,t){var n,i,r=30,o="...";if(ko(t)&&(n="separator"in t?t.separator:n,r="length"in t?Wo(t.length):r,o="omission"in t?Xi(t.omission):o),t=(e=Xo(e)).length,(t=Gt(e)?(i=Kt(e)).length:t)<=r)return e;if((t=r-Wt(o))<1)return o;if(r=i?lr(i,0,t).join(""):e.slice(0,t),n!==a)if(i&&(t+=r.length-t),Fo(n)){if(e.slice(t).search(n)){var s,l=r;for((n=n.global?n:ae(n.source,Xo(fe.exec(n))+"g")).lastIndex=0;s=n.exec(l);)var u=s.index;r=r.slice(0,u===a?t:u)}}else e.indexOf(Xi(n),t)!=t&&-1<(i=r.lastIndexOf(n))&&(r=r.slice(0,i));return r+o},Cn.unescape=function(e){return(e=Xo(e))&&q.test(e)?e.replace(W,Qt):e},Cn.uniqueId=function(e){var t=++Pe;return Xo(e)+t},Cn.upperCase=Is,Cn.upperFirst=Cs,Cn.each=Za,Cn.eachRight=$a,Cn.first=Pa,Us(Cn,(Qs={},ui(Cn,(function(e,t){Le.call(Cn.prototype,t)||(Qs[t]=e)})),Qs),{chain:!1}),Cn.VERSION="4.17.21",ut(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Cn[e].placeholder=Cn})),ut(["drop","take"],(function(e,t){xn.prototype[e]=function(n){n=n===a?1:un(Wo(n),0);var i=this.__filtered__&&!t?new xn(this):this.clone();return i.__filtered__?i.__takeCount__=cn(n,i.__takeCount__):i.__views__.push({size:cn(n,p),type:e+(i.__dir__<0?"Right":"")}),i},xn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ut(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;xn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Qr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),ut(["head","last"],(function(e,t){var n="take"+(t?"Right":"");xn.prototype[e]=function(){return this[n](1).value()[0]}})),ut(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");xn.prototype[e]=function(){return this.__filtered__?new xn(this):this[n](1)}})),xn.prototype.compact=function(){return this.filter(Os)},xn.prototype.find=function(e){return this.filter(e).head()},xn.prototype.findLast=function(e){return this.reverse().find(e)},xn.prototype.invokeMap=Bi((function(e,t){return"function"==typeof e?new xn(this):this.map((function(n){return vi(n,e,t)}))})),xn.prototype.reject=function(e){return this.filter(mo(Qr(e)))},xn.prototype.slice=function(e,t){e=Wo(e);var n=this;return n.__filtered__&&(0<e||t<0)?new xn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a?(t=Wo(t))<0?n.dropRight(-t):n.take(t-e):n)},xn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},xn.prototype.toArray=function(){return this.take(p)},ui(xn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=Cn[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);r&&(Cn.prototype[t]=function(){function t(e){return e=r.apply(Cn,gt([e],u)),i&&f?e[0]:e}var s,l=this.__wrapped__,u=i?[1]:arguments,c=l instanceof xn,h=u[0],d=c||wo(l),f=(d&&n&&"function"==typeof h&&1!=h.length&&(c=d=!1),this.__chain__),p=(h=!!this.__actions__.length,o&&!f);return c=c&&!h,!o&&d?(l=c?l:new xn(this),(s=e.apply(l,u)).__actions__.push({func:Ka,args:[t],thisArg:a}),new kn(s,f)):p&&c?e.apply(this,u):(s=this.thru(t),p?i?s.value()[0]:s.value():s)})})),ut(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e,r=arguments;return i&&!this.__chain__?(e=this.value(),t.apply(wo(e)?e:[],r)):this[n]((function(e){return t.apply(wo(e)?e:[],r)}))}})),ui(xn.prototype,(function(e,t){var n,i=Cn[t];i&&(n=i.name+"",Le.call(An,n)||(An[n]=[]),An[n].push({name:t,func:i}))})),An[Ir(a,2).name]=[{name:"wrapper",func:a}],xn.prototype.clone=function(){var e=new xn(this.__wrapped__);return e.__actions__=gr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=gr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=gr(this.__views__),e},xn.prototype.reverse=function(){var e;return this.__filtered__?((e=new xn(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},xn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=wo(e),i=t<0,r=n?e.length:0,a=function(e,t,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=cn(t,e+o);break;case"takeRight":e=un(e,t-o)}}return{start:e,end:t}}(0,r,this.__views__),o=a.start,s=(a=a.end)-o,l=i?a:o-1,u=this.__iteratees__,c=u.length,h=0,d=cn(s,this.__takeCount__);if(!n||!i&&r==s&&d==s)return tr(e,this.__actions__);var f=[];e:for(;s--&&h<d;){for(var p=-1,m=e[l+=t];++p<c;){var g=(_=u[p]).iteratee,_=_.type;if(g=g(m),2==_)m=g;else if(!g){if(1==_)continue e;break e}}f[h++]=m}return f},Cn.prototype.at=qa,Cn.prototype.chain=function(){return Wa(this)},Cn.prototype.commit=function(){return new kn(this.value(),this.__chain__)},Cn.prototype.next=function(){this.__values__===a&&(this.__values__=Yo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Cn.prototype.plant=function(e){for(var t,n=this;n instanceof Dn;){var i=Ra(n),r=(i.__index__=0,i.__values__=a,t?r.__wrapped__=i:t=i,i);n=n.__wrapped__}return r.__wrapped__=e,t},Cn.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof xn?((e=(e=this.__actions__.length?new xn(this):e).reverse()).__actions__.push({func:Ka,args:[Ma],thisArg:a}),new kn(e,this.__chain__)):this.thru(Ma)},Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=function(){return tr(this.__wrapped__,this.__actions__)},Cn.prototype.first=Cn.prototype.head,Ct&&(Cn.prototype[Ct]=function(){return this}),Cn}();Je._=Xt,(r=function(){return Xt}.call(t,n,t,i))!==a&&(i.exports=r)}).call(this)}).call(this,n(26),n(188)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){n=[n(100),n(6),n(2)],t=function(e,t,n){function i(e){e.mediaController.off(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,e._onPlayAttempt),e.mediaController.off(t.JWPLAYER_PROVIDER_FIRST_FRAME,e._triggerFirstFrame),e.mediaController.off(t.JWPLAYER_MEDIA_TIME,e._onTime)}return{model:function(r){r.on("change:mediaModel",(function(r,a,o){var s;r._qoeItem&&o&&r._qoeItem.end(o.get("state")),r._qoeItem=new e,r._qoeItem.tick(t.JWPLAYER_PLAYLIST_ITEM),r._qoeItem.start(a.get("state")),i(s=r),s._triggerFirstFrame=n.once((function(){var e=((e=s._qoeItem).tick(t.JWPLAYER_MEDIA_FIRST_FRAME),e.between(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,t.JWPLAYER_MEDIA_FIRST_FRAME));s.mediaController.trigger(t.JWPLAYER_MEDIA_FIRST_FRAME,{loadTime:e}),i(s)})),s._onTime=function(e){var t=Number.MIN_VALUE;return function(n){n.position>t&&e(),t=n.position}}(s._triggerFirstFrame),s._onPlayAttempt=function(){s._qoeItem.tick(t.JWPLAYER_MEDIA_PLAY_ATTEMPT)},s.mediaController.on(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,s._onPlayAttempt),s.mediaController.once(t.JWPLAYER_PROVIDER_FIRST_FRAME,s._triggerFirstFrame),s.mediaController.on(t.JWPLAYER_MEDIA_TIME,s._onTime),a.on("change:state",(function(e,t,n){r._qoeItem.end(n),r._qoeItem.start(t)}))}))}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(7)],t=function(e,t){return e.extend({get:function(e){return this.attributes=this.attributes||{},this.attributes[e]},set:function(e,t){this.attributes=this.attributes||{};var n=this.attributes[e];this.attributes[e]=t,this.trigger("change:"+e,this,t,n)},clone:function(){return e.clone(this.attributes)}},t)}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n.r(t);var i=n(122),r=n.n(i),a=(i=n(2),n.n(i)),o=(i=n(1),n.n(i)),s=(i=n(34),n.n(i));t.default=class{constructor(e){this.api=null,e&&e.advs&&a.a.isArray(e.advs)&&e.advs.length?(this.processAdvs=e.advs,this.hasProcessAdv=!0,this.el=o.a.createElement(r()())):this.hasProcessAdv=!1,this.activeAdv=null}setApi(e){this.api=e}refreshProcessAdv(e){var t=a.a.find(this.processAdvs,(t=>e>=t.begin&&e<=t.end));t?t!==this.activeAdv&&(this.showAdv(t),this.activeAdv=t):this.hideAllProcessAdvs()}showAdv(e){var t=(n=this.element().getElementsByTagName("a")[0]).getElementsByTagName("img")[0],n=(n.setAttribute("href",e.material.landingPage),t.setAttribute("src",e.material.image),{display:"block","z-index":500,opacity:.9,left:"auto",right:"auto",top:"auto",bottom:"auto"});"left"===e.material.horizontalPosition?n.left=10:n.right=10,"top"===e.material.verticalPosition?n.top=10:n.bottom=50,s.a.style(this.element(),n)}hideAllProcessAdvs(){this.element().style.display="none",this.activeAdv=null}element(){if(this.api){var e=this.api.getContainer();if(0<o.a.getElementsByClassName("jw-process-adv",e).length)return o.a.getElementsByClassName("jw-process-adv",e)[0]}return this.el}}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var a=r(n(104)),o=i(n(203)),s=i(n(32)),l=r(n(22)),u=r(n(204));function c(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=o.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}n=i(n(206));var h=c();h.create=c,n.default(h),h.default=h,t.default=h,e.exports=t.default},function(e,t,n){t.__esModule=!0;var i=n(22);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var r=n.inverse,a=n.fn;return!0===t?a(this):!1===t||null==t?r(this):i.isArray(t)?0<t.length?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this):(n.data&&n.ids&&((r=i.createFrame(n.data)).contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:r}),a(t,n))}))},e.exports=t.default},function(e,t,n){t.__esModule=!0;var i=n(22),r=(n=n(32))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new r.default("Must pass iterator to #each");var n,a=t.fn,o=t.inverse,s=0,l="",u=void 0,c=void 0;function h(t,n,r){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!r,c)&&(u.contextPath=c+t),l+=a(e[t],{data:u,blockParams:i.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(u=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var d=e.length;s<d;s++)s in e&&h(s,s,s===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var f=[],p=e[Symbol.iterator](),m=p.next();!m.done;m=p.next())f.push(m.value);for(d=(e=f).length;s<d;s++)h(s,s,s===e.length-1)}else n=void 0,Object.keys(e).forEach((function(e){void 0!==n&&h(n,s-1),n=e,s++})),void 0!==n&&h(n,s-1,!0);return l=0===s?o(this):l}))},e.exports=t.default},function(e,t,n){t.__esModule=!0;var i=(n=n(32))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,n){t.__esModule=!0;var i=n(22),r=(n=n(32))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},function(e,t,n){t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)}))},e.exports=t.default},function(e,t,n){t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e&&n.lookupProperty(e,t)}))},e.exports=t.default},function(e,t,n){t.__esModule=!0;var i=n(22),r=(n=n(32))&&n.__esModule?n:{default:n};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new r.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n,a=t.fn;return i.isEmpty(e)?t.inverse(this):(n=t.data,t.data&&t.ids&&((n=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),a(e,{data:n,blockParams:i.blockParams([e],[n&&n.contextPath])}))}))},e.exports=t.default},function(e,t,n){t.__esModule=!0,t.registerDefaultDecorators=function(e){i.default(e)},t=n(201);var i=(n=t)&&n.__esModule?n:{default:n}},function(e,t,n){t.__esModule=!0;var i=n(22);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,r){var a=e;return t.partials||(t.partials={},a=function(r,a){var o=n.partials;return n.partials=i.extend({},o,t.partials),r=e(r,a),n.partials=o,r}),t.partials[r.args[0]]=r.fn,a}))},e.exports=t.default},function(e,t,n){t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.extend.apply(void 0,[Object.create(null)].concat(t))};var i=n(22)},function(e,t,n){function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},function(e,t,n){t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=a.COMPILER_REVISION;if(!(t>=a.LAST_COMPATIBLE_COMPILER_REVISION&&t<=a.COMPILER_REVISION))throw t<a.LAST_COMPATIBLE_COMPILER_REVISION?(n=a.REVISION_CHANGES[n],t=a.REVISION_CHANGES[t],new r.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+t+").")):new r.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new r.default("No environment passed to template");if(!e||!e.main)throw new r.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0],c={strict:function(e,t,n){if(e&&t in e)return c.lookupProperty(e,t);throw new r.default('"'+t+'" not defined in '+e,{loc:n})},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||l.resultIsAllowed(n,c.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(null!=(e[i]&&c.lookupProperty(e[i],t)))return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:function(n,a,o){o.hash&&(a=i.extend({},a,o.hash),o.ids)&&(o.ids[0]=!0),n=t.VM.resolvePartial.call(this,n,a,o);var s=i.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,a,s);if(null==l&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),l=o.partials[o.name](a,s)),null==l)throw new r.default("The partial "+o.name+" could not be compiled when running in runtime-only mode");if(o.indent){for(var u=l.split("\n"),c=0,h=u.length;c<h&&(u[c]||c+1!==h);c++)u[c]=o.indent+u[c];l=u.join("\n")}return l},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,r){var a=this.programs[e],o=this.fn(e);return t||r||i||n?u(this,e,o,t,n,i,r):a||(this.programs[e]=u(this,e,o))},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t?i.extend({},t,e):n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function d(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data,r=(d._setup(n),void(!n.partial&&e.useData&&(i=function(e,t){return t&&"root"in t||((t=t?a.createFrame(t):{}).root=e),t}(t,i)))),o=e.useBlockParams?[]:void 0;function s(t){return""+e.main(c,t,c.helpers,c.partials,i,o,r)}return e.useDepths&&(r=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(s=h(e.main,s,c,n.depths||[],i,o))(t,n)}return d.isTop=!0,d._setup=function(r){var a,u,h;r.partial?(c.protoAccessControl=r.protoAccessControl,c.helpers=r.helpers,c.partials=r.partials,c.decorators=r.decorators,c.hooks=r.hooks):(a=i.extend({},t.helpers,r.helpers),u=a,h=c,Object.keys(u).forEach((function(e){var t,n=u[e];u[e]=(t=h.lookupProperty,s.wrapHelper(n,(function(e){return i.extend({lookupProperty:t},e)})))})),c.helpers=a,e.usePartial&&(c.partials=c.mergeIfNeeded(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(c.decorators=i.extend({},t.decorators,r.decorators)),c.hooks={},c.protoAccessControl=l.createProtoAccessControl(r),a=r.allowCallsToHelperMissing||n,o.moveHelperToHooks(c,"helperMissing",a),o.moveHelperToHooks(c,"blockHelperMissing",a))},d._child=function(t,n,i,a){if(e.useBlockParams&&!i)throw new r.default("must pass block params");if(e.useDepths&&!a)throw new r.default("must pass parent depths");return u(c,t,e[t],n,0,i,a)},d},t.wrapProgram=u,t.resolvePartial=function(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e},t.invokePartial=function(e,t,n){var o=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var s=void 0;if(n.fn&&n.fn!==c&&function(){n.data=a.createFrame(n.data);var e=n.fn;s=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=a.createFrame(n.data),n.data["partial-block"]=o,e(t,n)},e.partials&&(n.partials=i.extend({},n.partials,e.partials))}(),void 0===e&&s&&(e=s),void 0===e)throw new r.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=c;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(22)),r=(t=n(32))&&t.__esModule?t:{default:t},a=n(104),o=n(105),s=n(205),l=n(107);function u(e,t,n,i,r,a,o){function s(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(s=[t].concat(o)),n(e,t,e.helpers,e.partials,r.data||i,a&&[r.blockParams].concat(a),s)}return(s=h(n,s,e,o,i,a)).program=t,s.depth=o?o.length:0,s.blockParams=r||0,s}function c(){return""}function h(e,t,n,r,a,o){return e.decorator&&(t=e.decorator(t,e={},n,r&&r[0],a,o,r),i.extend(t,e)),t}},function(e,t,n){t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},function(e,t,n){t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",(function(){return this})),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},function(e,t,n){n=[n(7),n(74),n(73),n(6),n(16),n(1),n(2)],t=function(e,t,n,i,r,a,o){function s(e,i){this.model=i,this._adModel=(new t).setup({id:i.get("id"),volume:i.get("volume"),fullscreen:i.get("fullscreen"),mute:i.get("mute")}),this._adModel.on("change:state",n,this),i=e.getContainer(),this.swf=i.querySelector("object")}return s.prototype=o.extend({init:function(){var e,t;a.isChrome()&&(t=!(e=-1),this.swf.on("throttle",(function(n){var i;clearTimeout(e),"resume"===n.state?t&&(t=!1,this.instreamPlay()):(i=this,e=setTimeout((function(){i._adModel.get("state")===r.PLAYING&&(t=!0,i.instreamPause())}),250))}),this)),this.swf.on("instream:state",(function(e){switch(e.newstate){case r.PLAYING:case r.PAUSED:this._adModel.set("state",e.newstate)}}),this).on("instream:time",(function(e){this._adModel.set("position",e.position),this._adModel.set("duration",e.duration),this.trigger(i.JWPLAYER_MEDIA_TIME,e)}),this).on("instream:complete",(function(e){this.trigger(i.JWPLAYER_MEDIA_COMPLETE,e)}),this).on("instream:error",(function(e){this.trigger(i.JWPLAYER_MEDIA_ERROR,e)}),this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(e){this.model.on("change:volume",(function(t,n){e.volume(n)}),this),this.model.on("change:mute",(function(t,n){e.mute(n)}),this)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null)},load:function(e){this.swf.triggerFlash("instream:load",e)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},e),s}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(209),n(7),n(2),n(6)],t=function(e,t,n,i){function r(t,r,a,o){var s,l=this,u=e.getQueue();function c(){d("安装超时","安装时间大于30秒，视频不能播放")}function h(){n.each(u,(function(e){var c,f;!0!==e.complete&&!0!==e.running&&null!==t&&(f=e.depends,n.all(f,(function(e){return u[e].complete})))&&(e.running=!0,(c=e).method((function(e){var t;t=c,"error"===(e=e=e||{}).type?d(e.msg,e.reason,e.code||""):"complete"===e.type?(clearTimeout(s),l.trigger(i.JWPLAYER_READY)):(t.complete=!0,h())}),r,t,a,o))}))}function d(e,t,n){clearTimeout(s),l.trigger(i.JWPLAYER_SETUP_ERROR,{message:e+": "+t,code:n}),l.destroy()}this.start=function(){s=setTimeout(c,3e4),h()},this.destroy=function(){clearTimeout(s),this.off(),u.length=0,a=r=t=null}}return r.prototype=t,r}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(48),n(79),n(109),n(80),n(47),n(2),n(1),n(6),n(15),n(35)],t=function(e,t,n,i,r,a,o,s,l,u){var c,h;function d(e){e()}function f(e){e()}function p(e){e()}function m(e){e()}function g(e,n){(c=t.loadPlugins(n.get("id"),n.get("plugins"))).on(s.COMPLETE,e),c.on(s.ERROR,a.partial(y,e)),c.load()}function _(e,t,n){c.setupPlugins(n,t),e()}function y(e,t){R(e,"Could not load plugin",t.message)}function v(e,t){var i=t.get("playlist");a.isString(i)?((h=new n).on(s.JWPLAYER_PLAYLIST_LOADED,(function(n){t.set("playlist",n.playlist),t.set("feedid",n.feedid),e()})),h.on(s.JWPLAYER_ERROR,a.partial(E,e)),h.load(i)):e()}function A(e,t,n,i,r){var a;r(t=t.get("playlist"))?e():(r={},t=function(e){return{errorMessage:o.isMobile()&&(o.isRtmp(e[0].file)||o.isFlv(e[0].file))?"手机上不能播放rtmp或flv格式的视频":"不支持的视频格式或者媒体问题",errorCode:"111"}}(t),r.message=t.errorMessage,r.code=t.errorCode,"111"===r.code?(t=e,(a=r)&&a.message&&R(t,"视频加载失败",a.message,a.code||"")):(t=e,(a=r)&&a.message&&R(t,"播放器加载失败",a.message,a.code||"")))}function E(e,t){t&&t.message?R(e,"播放列表加载失败",t.message):R(e,"播放器加载失败","未发现可播放的资源")}function b(e,t){var n=t.get("skin"),o=t.get("skinUrl");a.contains(r.SkinsIncluded,n)?e():(o=o||function(e,t){if(a.contains(r.SkinsLoadable,e))return t+"skins/"+e+".css"}(n,__DEBUG__?t.get("base"):r.repo),a.isString(o)&&!function(e){for(var t=document.styleSheets,n=0,i=t.length;n<i;n++)if(t[n].href===e)return 1}(o)&&(t.set("skin-loading",!0),(n=new i(o,!0)).addEventListener(s.COMPLETE,(function(){t.set("skin-loading",!1)})),n.addEventListener(s.ERROR,(function(){t.set("skin","bce"),t.set("skin-loading",!1)})),n.load()),a.defer((function(){e()})))}function w(t,n){var i=n.getProviders();n=n.get("playlist"),i=i.required(n),e.load(i).then(t)}function T(e,t,n,i){i.setup(),e()}function S(e){e({type:"complete"})}function R(e,t,n,i){e({type:"error",msg:t,reason:n,code:i||""})}return{getQueue:function(){return{LOAD_PROMISE_POLYFILL:{method:d,depends:[]},LOAD_BASE64_POLYFILL:{method:f,depends:[]},LOAD_JSON2:{method:p,depends:[]},LOADED_POLYFILLS:{method:m,depends:["LOAD_PROMISE_POLYFILL","LOAD_BASE64_POLYFILL","LOAD_JSON2"]},LOAD_PLUGINS:{method:g,depends:["LOADED_POLYFILLS"]},INIT_PLUGINS:{method:_,depends:["LOAD_PLUGINS","SETUP_VIEW"]},LOAD_PROVIDERS:{method:w,depends:["FILTER_PLAYLIST"]},LOAD_SKIN:{method:b,depends:["LOADED_POLYFILLS"]},LOAD_PLAYLIST:{method:v,depends:["LOADED_POLYFILLS"]},FILTER_PLAYLIST:{method:A,depends:[]},SETUP_VIEW:{method:T,depends:["LOAD_SKIN"]},SEND_READY:{method:S,depends:["INIT_PLUGINS","LOAD_PROVIDERS","SETUP_VIEW"]}}},error:R}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(62),n(1),n(6),n(7),n(2),n(80)],t=function(e,t,n,i,r,a){return function(o,s){var l,u=r.extend(this,i),c=a.loaderstatus.NEW,h=!1,d=r.size(s),f=!1;function p(){h||(h=!0,c=a.loaderstatus.COMPLETE,u.trigger(n.COMPLETE))}function m(){var i;f||(s&&0!==r.keys(s).length||p(),h)||(i=o.getPlugins(),l=r.after(d,p),r.each(s,(function(r,o){o=e.getPluginName(o);var s=(o=i[o]).getJS(),c=o.getTarget();(o=o.getStatus())!==a.loaderstatus.LOADING&&o!==a.loaderstatus.NEW&&(s&&!t.versionCheck(c)&&u.trigger(n.ERROR,{message:"Incompatible player version"}),l())})))}function g(e){var i;f||(i="File not found",e.url&&t.log(i,e.url),this.off(),this.trigger(n.ERROR,{message:i}),m())}this.setupPlugins=function(n,i){var a=[],s=o.getPlugins(),l=i.get("plugins");r.each(l,(function(i,o){var u=e.getPluginName(o),c=s[u],h=(o=c.getFlashPath(),c.getJS()),d=c.getURL();o&&(o=r.extend({name:u,swf:o,pluginmode:c.getPluginmode()},i),a.push(o)),t.tryCatch((function(){var e,i,a,o,s,f;function p(){var e=a.displayArea;e&&a.resize(e.clientWidth,e.clientHeight)}h&&l[d]&&((e=document.createElement("div")).id=n.id+"_"+u,e.className="jw-plugin jw-reset",i=r.extend({},l[d]),(i=c.getNewInstance(n,i,e)).addToPlayer=(o=n,s=i,f=e,function(){var e=t.getElementsByClassName("jw-overlays",o.getContainer())[0];e&&(e.appendChild(f),f.left=e.style.left,f.top=e.style.top,s.displayArea=e)}),i.resizeHandler=(a=i,function(){p(),setTimeout(p,400)}),n.addPlugin(u,i,e))}))instanceof t.Error&&t.log("ERROR: Failed to load "+u+".")})),i.set("flashPlugins",a)},this.load=function(){var e;t.exists(s)&&"object"!==t.typeOf(s)||(c=a.loaderstatus.LOADING,r.each(s,(function(e,i){t.exists(i)&&((i=o.addPlugin(i)).on(n.COMPLETE,m),i.on(n.ERROR,g))})),e=o.getPlugins(),r.each(e,(function(e){e.load()}))),m()},this.destroy=function(){f=!0,this.off()},this.getStatus=function(){return c}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(62),n(108)],t=function(e,t){return function(n){this.addPlugin=function(i){var r=e.getPluginName(i);return n[r]||(n[r]=new t(i)),n[r]},this.getPlugins=function(){return n}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(15),n(50),n(213),n(214),n(110)],t=function(e,t,n,i,r){var a=t.textContent,o=t.getChildNode,s=t.numChildren,l=t.localName;return t={parse:function(t){for(var u=[],c=0;c<s(t);c++){var h=o(t,c);if("channel"===l(h).toLowerCase())for(var d=0;d<s(h);d++){var f=o(h,d);"item"===l(f).toLowerCase()&&u.push(function(t){for(var o={},s=0;s<t.childNodes.length;s++){var u=t.childNodes[s],c=l(u);if(c)switch(c.toLowerCase()){case"enclosure":o.file=e.xmlAttribute(u,"url");break;case"title":o.title=a(u);break;case"guid":o.mediaid=a(u);break;case"pubdate":o.date=a(u);break;case"description":o.description=a(u);break;case"link":o.link=a(u);break;case"category":o.tags?o.tags+=a(u):o.tags=a(u)}}return o=i(t,o),o=n(t,o),new r(o)}(f))}}return u}},t}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(50),n(15),n(1)],t=function(e,t,n){return function(i,r){for(var a=[],o=[],s=t.xmlAttribute,l="default",u="file",c=0;c<i.childNodes.length;c++){var h,d=i.childNodes[c];"jwplayer"===d.prefix&&("source"===(h=e.localName(d))?(delete r.sources,a.push({file:s(d,u),default:s(d,l),label:s(d,"label"),type:s(d,"type")})):"track"===h?(delete r.tracks,o.push({file:s(d,u),default:s(d,l),kind:s(d,"kind"),label:s(d,"label")})):(r[h]=n.serialize(e.textContent(d)),"file"===h&&r.sources&&delete r.sources)),r.file||(r.file=r.link)}if(a.length)for(r.sources=[],c=0;c<a.length;c++)0<a[c].file.length&&(a[c][l]="true"===a[c][l],a[c].label.length||delete a[c].label,r.sources.push(a[c]));if(o.length)for(r.tracks=[],c=0;c<o.length;c++)0<o[c].file.length&&(o[c][l]="true"===o[c][l],o[c].kind=o[c].kind.length?o[c].kind:"captions",o[c].label.length||delete o[c].label,r.tracks.push(o[c]));return r}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(50),n(15),n(1)],t=function(e,t,n){var i=t.xmlAttribute,r=e.localName,a=e.textContent,o=e.numChildren;return function e(t,s){var l,u,c,h="tracks",d=[];for(u=0;u<o(t);u++)if("media"===(l=t.childNodes[u]).prefix&&r(l))switch(r(l).toLowerCase()){case"content":i(l,"duration")&&(s.duration=n.seconds(i(l,"duration"))),i(l,"url")&&(s.sources||(s.sources=[]),c={file:i(l,"url"),type:i(l,"type"),width:i(l,"width"),label:i(l,"label")},(f=function(e){for(var t=[],n=0;n<o(e);n++){var i=e.childNodes[n];"jwplayer"===i.prefix&&"mediatypes"===r(i).toLowerCase()&&t.push(a(i))}return t}(l)).length&&(c.mediaTypes=f),s.sources.push(c)),0<o(l)&&(s=e(l,s));break;case"title":s.title=a(l);break;case"description":s.description=a(l);break;case"guid":s.mediaid=a(l);break;case"thumbnail":s.image||(s.image=i(l,"url"));break;case"player":break;case"group":e(l,s);break;case"subtitle":var f={};f.file=i(l,"url"),f.kind="captions",0<i(l,"lang").length&&(f.label={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"}[c=i(l,"lang")]||c),d.push(f)}for(s.hasOwnProperty(h)||(s[h]=[]),u=0;u<d.length;u++)s[h].push(d[u]);return s}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){var t={kind:"captions",default:!1};return function(n){if(n&&n.file)return e.extend({},t,n)}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(50),n(81),n(217),n(1)],t=function(e,t,n,i){return function(r,a){function o(e){if(e.tracks.length){a.mediaController.off("meta",h),s=[],l={},u={},c=0;for(var t=e.tracks||[],n=0;n<t.length;n++){var i=t[n];i.id=i.name,i.label=i.name||i.language,p(i)}e=m(),this.setCaptionsList(e),g()}}a.on("change:playlistItem",f,this),a.on("change:captionsIndex",(function(e,t){var n=null;0!==t&&(n=s[t-1]),e.set("captionsTrack",n)}),this),a.on("itemReady",(function(r){f(),a.mediaController.off("meta",h),a.mediaController.off("subtitlesTracks",o);var l,u,c,_=r.tracks;for(a.get("provider").name,i.isChrome()||i.isIOS()||i.isSafari(),c=0;c<_.length;c++)(l=_[c]).file&&/\.(?:web)?vtt(?:\?.*)?$/i.test(l.file),"captions"!==(u=l.kind.toLowerCase())&&"subtitles"!==u||(l.file?(p(l),function(r){i.ajax(r.file,(function(i){var a=r,o=i.responseXML?i.responseXML.firstChild:null;if(o)for("xml"===e.localName(o)&&(o=o.nextSibling);o.nodeType===o.COMMENT_NODE;)o=o.nextSibling;try{o&&"tt"===e.localName(o)?a.data=n(i.responseXML):a.data=t(i.responseText)}catch(i){d(i.message+": "+a.file)}}),d)}(l)):l.data&&p(l));s.length||(a.mediaController.on("meta",h,this),a.mediaController.on("subtitlesTracks",o,this)),r=m(),this.setCaptionsList(r),g()}),this),a.mediaController.on("subtitlesTracks",o,this),a.mediaController.on("subtitlesTrackData",(function(e){var t=l[e.name];if(t){t.source=e.source;for(var n=e.captions||[],i=!1,r=0;r<n.length;r++){var a=n[r],o=e.name+"_"+a.begin+"_"+a.end;u[o]||(u[o]=a,t.data.push(a),i=!0)}i&&t.data.sort((function(e,t){return e.begin-t.begin}))}}),this),a.mediaController.on("meta",h,this),a.get("sdkplatform");var s=[],l={},u={},c=0;function h(e){var t,n,i,r=e.metadata;!r||"textdata"!==r.type||!r.text||((t=l[r.trackid])||(p(t={kind:"captions",id:r.trackid,data:[]}),i=m(),this.setCaptionsList(i)),i=r.useDTS?(t.source||(t.source=r.source||"mpegts"),n=r.begin,r.begin+"_"+r.text):(n=e.position||a.get("position"),Math.round(10*n)+"_"+r.text),e=u[i])||(e={begin:n,text:r.text},r.end&&(e.end=r.end),u[i]=e,t.data.push(e))}function d(e){i.log("CAPTIONS("+e+")")}function f(e,t){s=[],l={},u={},c=0}function p(e){"number"!=typeof e.id&&(e.id=e.name||e.file||"cc"+s.length),e.data=e.data||[],e.label||(e.label="Unknown CC",1<++c&&(e.label+=" ("+c+")")),s.push(e),l[e.id]=e}function m(){for(var e=[{id:"off",label:"Off"}],t=0;t<s.length;t++)e.push({id:s[t].id,label:s[t].label||"Unknown CC"});return e}function g(){var e=0,t=a.get("captionLabel");if("Off"===t)a.set("captionsIndex",0);else{for(var n,i=0;i<s.length;i++){var r=s[i];if(t&&t===r.label){e=i+1;break}r.default||r.defaulttrack||"default"===r.id?e=i+1:r.autoselect}n=e,s.length?a.setVideoSubtitleTrack(n,s):a.set("captionsIndex",n)}}this.getCurrentIndex=function(){return a.get("captionsIndex")},this.getCaptionsList=function(){return a.get("captionsList")},this.setCaptionsList=function(e){a.set("captionsList",e)}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(15)],t=function(e){var t=e.seconds;return function(r){n(r);var a=[],o=r.getElementsByTagName("p");n(o),o.length||(o=r.getElementsByTagName("tt:p")).length||(o=r.getElementsByTagName("tts:p"));for(var s=0;s<o.length;s++){var l,u,c=o[s],h=c.innerHTML||c.textContent||c.text||"";(h=e.trim(h).replace(/>\s+</g,"><").replace(/tts?:/g,""))&&(u=c.getAttribute("begin"),l=c.getAttribute("dur"),c=c.getAttribute("end"),u={begin:t(u),text:h},c?u.end=t(c):l&&(u.end=u.begin+t(l)),a.push(u))}return a.length||i(),a};function n(e){e||i()}function i(){throw new Error("Invalid DFXP file")}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(110),n(111),n(2),n(48)],t=function(e,t,n,i){function r(t){return t=n.isArray(t)?t:[t],n.compact(n.map(t,e))}r.filterPlaylist=function(e,t,i,r,l,u,c,h,d){var f=[];return n.each(e,(function(e){(e=n.extend({},e)).allSources=a(e.sources,i,e.drm||r,e.preload||l,s(e.withCredentials,c),h,d),e.sources=o(e.allSources,t),e.sources.length&&(e.file=e.sources[0].file,(e.preload||l)&&(e.preload=e.preload||l),(e.feedid||u)&&(e.feedid=e.feedid||u),f.push(e))})),f};var a=function(e,i,r,a,o,l,u){return n.compact(n.map(e,(function(e){if(n.isObject(e))return null!=i&&(e.androidhls=i),(e.drm||r)&&(e.drm=e.drm||r),(e.preload||a)&&(e.preload=e.preload||a),e.withCredentials=s(e.withCredentials,o),e.isHEVC=!0,e.isNative=!0,t(e)})))},o=function(e,t){return t=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(t.choose(i))return i.type}return null}(e,t=t&&t.choose?t:new i({primary:t?"flash":null})),n.where(e,{type:t})};function s(e,t){return n.isUndefined(e)?t:e}return r}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(6),n(7),n(47),n(16),n(220),n(221),n(222),n(224),n(226),n(228),n(241),n(242),n(244),n(245),n(247),n(248),n(2),n(250),n(251),n(253),n(254),n(78),n(51)],t=function(e,t,n,i,r,a,o,s,l,u,c,h,d,f,p,m,g,_,y,v,A,E,b,w){var T=e.style,S=e.bounds,R=e.isMobile(),I=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],C={versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1===e.indexOf("Safari"),weixin:-1<e.indexOf("MicroMessenger"),qq:" qq"===e.match(/\sQQ/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};return function(L,P){var D,k,x,M,O,N,F,B,U,j,G,V,H,Y,z,W,K,q,Q,X,J,Z,$,ee,te,ne,ie=-1,re=2e3,ae=!1,oe=!1,se=-1,le=-1,ue=!1,ce=_.extend(this,n),he=(this.model=P,this.api=L,D=e.createElement(y({id:P.get("id")})),e.isIE()&&e.addClass(D,"jw-ie"),e.isPoorIE()&&e.addClass(D,"jw-ie-poorie"),P.get("flashUI")&&e.addClass(D,"jw-flashui"),P.get("width")),de=P.get("height");function fe(t){var n=0,r=P.get("duration"),a=P.get("position");"DVR"===e.adaptiveType(r)&&(n=r,r=Math.max(a,i.dvrSeekLimit)),a=e.between(a+t,n,r),L.seek(a)}function pe(t){var n,i=P.get("volume");"-"===t?n=100<i?-50:-10:(n=100<=i?50:10,i<100&&100<i+n&&(n=100-i)),i=(t=P.getVideo())&&0===t.getName().name.indexOf("flash")?500:100,t=e.between(P.get("volume")+n,0,i),L.setVolume(t)}function me(e){var t,n=P.get("keyControls");if((t=e).ctrlKey||t.metaKey||!P.get("controls"))return!0;switch(ae||Ge(),e.keyCode){case 27:L.setFullscreen(!1);break;case 13:case 32:n&&L.play({reason:"interaction"});break;case 37:ae||fe((i=P.get("seek_step"))?1+~i:-5);break;case 39:ae||fe((i=P.get("seek_step"))||5);break;case 38:pe("+");break;case 40:pe("-");break;case 67:var i=L.getCaptionsList().length;i&&(i=(L.getCurrentCaptions()+1)%i,L.setCurrentCaptions(i));break;case 77:n&&L.setMute();break;case 70:n&&L.setFullscreen();break;default:n&&48<=e.keyCode&&e.keyCode<=59&&(i=(e.keyCode-48)/10*P.get("duration"),L.seek(i))}return/13|32|37|38|39|40/.test(e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0}function ge(){ue=!1,e.removeClass(D,"jw-no-focus")}function _e(){ue=!0,e.addClass(D,"jw-no-focus")}function ye(){ue||ge(),ae||Ge()}function ve(){var n=S(D),i=Math.round(n.width),r=Math.round(n.height);return document.body.contains(D)?i&&r&&(i===M&&r===O||(M=i,O=r,clearTimeout(se),se=setTimeout(Fe,50),P.set("containerWidth",i),P.set("containerHeight",r),ce.trigger(t.JWPLAYER_RESIZE,{width:i,height:r}))):(e.removeEventListener(window,"resize",ve),R&&e.removeEventListener(window,"orientationchange",ve)),n}function Ae(t,n){e.toggleClass(D,"jw-flag-casting",n=n||!1)}function Ee(t,n){e.toggleClass(D,"jw-flag-cast-available",n),e.toggleClass(k,"jw-flag-cast-available",n)}function be(t,n){e.replaceClass(D,/jw-stretch-\S+/,"jw-stretch-"+n)}function we(t,n){e.toggleClass(D,"jw-flag-compact-player",n)}function Te(t){t&&!R&&(e.addEventListener(t.element(),"mousemove",Ie,!1),e.addEventListener(t.element(),"mouseout",Ce,!1))}function Se(){P.get("state")!==r.IDLE&&P.get("state")!==r.COMPLETE&&P.get("state")!==r.PAUSED||!P.get("controls")||L.play({reason:"interaction"}),(oe?je:Ge)()}function Re(e){e.link?(L.pause(!0),L.setFullscreen(!1),window.open(e.link,e.linktarget)):P.get("controls")&&L.play({reason:"interaction"})}function Ie(){clearTimeout(ie)}function Ce(){Ge()}function Le(e){ce.trigger(e.type,e)}function Pe(t,n){n?(Q&&Q.destroy(),e.addClass(D,"jw-flag-flash-blocked")):(Q&&Q.setup(P,D,D),e.removeClass(D,"jw-flag-flash-blocked"))}T(D,{width:0<he.toString().indexOf("%")?he:he+"px",height:0<de.toString().indexOf("%")?de:de+"px"}),J=D.requestFullscreen||D.webkitRequestFullscreen||D.webkitRequestFullScreen||D.mozRequestFullScreen||D.msRequestFullscreen,Z=document.exitFullscreen||document.webkitExitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,ne=J&&Z,this.onChangeSkin=function(t,n){e.replaceClass(D,/jw-skin-\S+/,n?"jw-skin-"+n:"")},this.handleColorOverrides=function(){var t=P.get("id");function n(n,i,r){var a;r&&(n=e.prefix(n,"#"+t+" "),(a={})[i]=r,e.css(n.join(", "),a,t))}var i=P.get("skinColorActive"),r=P.get("skinColorInactive"),a=P.get("skinColorBackground");n([".jw-toggle",".jw-button-color:hover"],"color",i),n([".jw-active-option",".jw-progress",".jw-playlist-container .jw-option.jw-active-option",".jw-playlist-container .jw-option:hover"],"background",i),n([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-tooltip-title",".jw-skip .jw-skip-icon",".jw-playlist-container .jw-icon"],"color",r),n([".jw-cue",".jw-knob"],"background",r),n([".jw-playlist-container .jw-option"],"border-bottom-color",r),n([".jw-background-color",".jw-tooltip-title",".jw-playlist",".jw-playlist-container .jw-option"],"background",a),n([".jw-playlist-container ::-webkit-scrollbar"],"border-color",a)},this.setup=function(){te=new b,this.handleColorOverrides(),!0===P.get("skin-loading")&&(e.addClass(D,"jw-flag-skin-loading"),P.once("change:skin-loading",(function(){e.removeClass(D,"jw-flag-skin-loading")}))),this.onChangeSkin(P,P.get("skin"),""),P.on("change:skin",this.onChangeSkin,this),x=e.getElementsByClassName("jw-media",D)[0],k=e.getElementsByClassName("jw-controls",D)[0];var n,i=e.getElementsByClassName("jw-preview",D)[0],_=((B=new h(P)).setup(i),e.getElementsByClassName("jw-title",D)[0]);(z=new m(P)).setup(_),e.isPoorIE()?(e.style(e.getElementsByClassName("jw-marquee",D)[0],{display:"none"}),e.style(e.getElementsByClassName("jw-danmaku",D)[0],{display:"none"})):(U=new d(P,L),P.get("imageAdvs")&&D.appendChild(U.element()),P.get("marquee").show&&(_=e.getElementsByClassName("jw-marquee",D)[0],j=new f(P,_),e.style(D,{overflow:"hidden"})),P.get("danmaku")&&(this.api.danmaku=W=new g(D,P))),P.advManage&&P.advManage.hasProcessAdv&&D.appendChild(P.advManage.element()),_=e.getElementsByClassName("jw-overlays",D)[0],e.addEventListener(_,"mousemove",Ge),(G=new o(P,x,{useHover:!0})).on("click",(function(){if(e.isMobile()){var n=e.hasClass(D,"jw-flag-user-inactive");if(n&&(Ge(),"playing"===X))return}Le({type:t.JWPLAYER_DISPLAY_CLICK}),P.get("danmaku")&&(n=JSON.parse(JSON.stringify(P.get("danmaku"))),P.set("danmaku",Object.assign(n,{active:!1}))),P.get("controls")&&!P.get("flashUI")&&P.get("allowClickToDisplay")&&L.play({reason:"interaction"})})),G.on("tap",(function(){Le({type:t.JWPLAYER_DISPLAY_CLICK}),Se()})),P.get("allowDoubleClickFullscreen")&&G.on("doubleClick",ke),G.on("move",Ge),G.on("over",Ge),(_=new s(P)).on("click",(function(){Le({type:t.JWPLAYER_DISPLAY_CLICK}),L.play({reason:"interaction"})})),_.on("tap",(function(){Le({type:t.JWPLAYER_DISPLAY_CLICK}),Se()})),k.appendChild(_.element()),H=new l(P),(Y=new u(P)).on(t.JWPLAYER_LOGO_CLICK,Re),(_=document.createElement("div")).className="jw-controls-right jw-reset",Y.setup(_),_.appendChild(H.element()),k.appendChild(_),(K=new a(P)).setup(D.id,P.get("captions")),k.parentNode.insertBefore(K.element(),z.element()),P.get("watermark")&&(ee=new A(P,k,D.id)),_=P.get("height"),R&&("string"==typeof _||60<=_)?e.addClass(D,"jw-flag-touch"):(Q=new p).setup(P,D,D),(F=new c(L,P,D)).on(t.JWPLAYER_USER_ACTION,Ge),F.on(t.JWPLAYER_CHANGE_LANGs,qe),P.on("change:scrubbing",Me),P.on("change:compactUI",we),k.appendChild(F.element()),e.addEventListener(D,"focus",ye),e.addEventListener(D,"blur",ge),e.addEventListener(D,"keydown",me),D.onmousedown=_e,Ge(),P.set("mediaContainer",x),P.mediaController.on("fullscreenchange",Be);for(var y=I.length;y--;)e.addEventListener(document,I[y],Be,!1);e.removeEventListener(window,"resize",ve),e.addEventListener(window,"resize",ve,!1),R&&(e.removeEventListener(window,"orientationchange",ve),e.addEventListener(window,"orientationchange",ve,!1)),P.on("change:errorEvent",We),P.on("change:controls",De),De(P,P.get("controls")),P.on("change:state",Ke),P.on("change:duration",ze,this),P.on("change:flashBlocked",Pe),Pe(0,P.get("flashBlocked")),L.onPlaylistComplete(Ve),L.onPlaylistItem(He),P.on("change:castAvailable",Ee),Ee(0,P.get("castAvailable")),P.on("change:castActive",Ae),Ae(0,P.get("castActive")),P.get("stretching")&&be(0,P.get("stretching")),P.on("change:stretching",be),Ke(0,r.IDLE),P.on("change:fullscreen",Oe),Te(F),Te(Y),(_=P.get("aspectratio"))&&(e.addClass(D,"jw-flag-aspect-mode"),n=e.getElementsByClassName("jw-aspect",D)[0],T(n,{paddingTop:_})),L.on(t.JWPLAYER_READY,(function(){ve();var t=P.get("isMemoryPlay"),n=P.get("playlistItem").file;n=te.getItem("filePostion."+n),t&&n&&(n=e.timeFormat(n),t=P.get("lang")||"zh",new E({timeout:5e3,playerId:D.id,text:""+w.default[t].MEMORYPLAY.POSITION_TO+n},"memory-play-container").setup(k)),Ne(P.get("width"),P.get("height"))})),L.on(t.JWPLAYER_PERFORMANCE,(e=>{F.elements.pictInpict.hide();var t=P.get("liveInfoPanel");t&&t.showInfo&&($||($=new v(P)).setup(k),$.setData(e))})),P.on("connecting",(function(){ce.setAltText("正在与服务器建立连接"),e.toggleClass(D,"jw-flag-live",!0)})),P.on("connectFaild",(function(){L.stop(),ce.setAltText("连接已断开，请稍后重试"),e.toggleClass(D,"jw-flag-live",!0),e.getElementsByClassName("jw-controlbar",D)[0].style.display="block"})),P.on("alive",(function(){"idle"!==ce.model.get("state")&&(ce.setAltText("直播中"),e.toggleClass(D,"jw-flag-live",!0),i.style.display="none",e.getElementsByClassName("jw-controlbar",D)[0].style.removeProperty("display"))})),P.on("noLiveStream",(function(){"idle"!==ce.model.get("state")&&P.get("isLive")&&(ce.setAltText("无直播流"),e.toggleClass(D,"jw-flag-live",!0),P.get("image")&&(i.style.display="block"),e.getElementsByClassName("jw-controlbar",D)[0].style.display="block")})),P.on("liveStop",(function(){L.stop(),ce.setAltText("直播结束"),e.toggleClass(D,"jw-flag-live",!0),e.getElementsByClassName("jw-controlbar",D)[0].style.display="block"})),P.on("seekAfterLoadSuccess",(function(){ce.setAltText("自动跳转到上次的播放时间..."),e.addClass(F.element(),"jw-controlbar-textshow"),setTimeout((function(){e.removeClass(F.element(),"jw-controlbar-textshow")}),1e3)})),P.on("change:danmaku",(()=>{}))};var De=function(t,n){n&&Ke(0,(ae?N:P).get("state")),e.toggleClass(D,"jw-flag-controls-disabled",!n)};function ke(){null!==C&&null!=C.versions&&void 0!==C.versions.android&&null!==C.versions.android&&!0===C.versions.android||P.get("controls")&&L.setFullscreen()}function xe(t){t.get("state")===r.PAUSED?t.once("change:state",xe):!1===t.get("scrubbing")&&e.removeClass(D,"jw-flag-dragging")}function Me(t,n){t.off("change:state",xe),n?e.addClass(D,"jw-flag-dragging"):xe(t)}var Oe=function(t,n){var i=P.getVideo();ne?(n?J.apply(D):(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msExitFullscreenElement)&&Z.apply(document),Ue(D,n)):e.isIE()?Ue(D,n):(N&&N.getVideo()&&N.getVideo().setFullscreen(n),i.setFullscreen(n)),i&&0===i.getName().name.indexOf("flash")&&i.setFullscreen(n),j&&P.get("marquee").show&&j.reset(D.clientWidth,D.clientHeight)};function Ne(t,n,i){var r=D.className;(i=!!i)&&(r=r.replace(/\s*aspectMode/,""),D.className!==r&&(D.className=r),e.style(D,{display:"block"},i)),e.exists(t)&&e.exists(n)&&(P.set("width",t),P.set("height",n)),r={width:t},e.hasClass(D,"jw-flag-aspect-mode")||(r.height=n),T(D,r,!0),q=function(e){return!P.get("aspectratio")&&!(_.isString(e)&&-1<e.indexOf("%"))&&function(e){return e&&e<=40*(R?1.75:1)}(_.isNumber(e)?e:P.get("containerHeight"))}(i=n),F&&!q&&Ke(i=ae?N:P,i.get("state")),e.toggleClass(D,"jw-flag-audio-player",q),Fe(t,n)}function Fe(t,n){if(!t||isNaN(Number(t))){if(!x)return;t=x.clientWidth}if(!n||isNaN(Number(n))){if(!x)return;n=x.clientHeight}B&&B.resize(t,n,P.get("stretching")),e.isMSIE(9)&&document.all&&!window.atob&&(t=n="100%");var i,a=P.getVideo();a&&(i=P.get("rotate"),i=Math.abs(F.rotateDeg/90)%2&&i.innerRotate,a.resize(t,n,P.get("stretching"),i)&&(clearTimeout(se),se=setTimeout(Fe,250)),K.resize(),F.checkCompactMode(t),P.get("state")===r.PAUSED)&&P.get("imageAdvs")&&P.get("imageAdvs").pause&&U&&!U.isHidden()&&U.resizePauseAdv(t,n)}function Be(e){P.get("fullscreen")!==(e=void 0!==e.jwstate?e.jwstate:ne?!(!(e=document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement)||e.id!==P.get("id")):(ae?N:P).getVideo().getFullScreen())&&P.set("fullscreen",e)}function Ue(t,n){n?(e.addClass(t,"jw-flag-fullscreen"),T(document.body,{"overflow-y":"hidden"}),Ge()):(e.removeClass(t,"jw-flag-fullscreen"),T(document.body,{"overflow-y":""})),Fe()}function je(){oe=!1,clearTimeout(ie),F.hideComponents(),e.addClass(D,"jw-flag-user-inactive")}function Ge(){oe||(e.removeClass(D,"jw-flag-user-inactive"),F.checkCompactMode(x.clientWidth)),oe=!0,clearTimeout(ie),ie=setTimeout(je,re)}function Ve(){P.get("imageAdvs")&&P.get("imageAdvs").end&&U&&U.loadAdv("end")}function He(){V&&V.setState(P.get("state")),Ye(0,P.mediaModel.get("mediaType")),P.mediaModel.on("change:mediaType",Ye,this)}function Ye(t,n){n="audio"===n;var i=(i=P.getVideo())&&0===i.getName().name.indexOf("flash");e.toggleClass(D,"jw-flag-media-audio",n),n&&!i?D.insertBefore(B.el,x):D.insertBefore(B.el,K.element())}function ze(t,n){t=!0===t.get("isLive")||"LIVE"===e.adaptiveType(n)||"DVR"===e.adaptiveType(n),e.toggleClass(D,"jw-flag-live",t),t||ce.setAltText("")}function We(e,t){t?t.name?z.updateText(t.name,t.message):z.updateText(t.message,""):z.playlistItem(e,e.get("playlistItem"))}function Ke(t,n){var i;if(X=n,clearTimeout(le),n!==r.COMPLETE&&r.IDLE,!0===P.get("autostart")&&(X="idle"===X?"buffering":X),e.replaceClass(D,/jw-state-\S+/,"jw-state-"+X),(i=P.getVideo())&&i.isCaster)e.addClass(x,"jw-media-show");else switch(n){case r.PLAYING:U&&U.startAdvPlayed&&U.hide(),Math.abs(F.rotateDeg/90)%2==0&&Fe(),j&&P.get("marquee").show&&j.start(),W&&P.get("danmaku").show&&W.start();break;case r.PAUSED:U&&P.get("imageAdvs")&&P.get("imageAdvs").pause&&U.loadAdv("pause"),Ge(),j&&P.get("marquee").show&&j.pause(),W&&P.get("danmaku").show&&W.pause();break;case r.IDLE:j&&P.get("marquee").show&&j.pause(),W&&P.get("danmaku").show&&W.pause();break;case r.COMPLETE:j&&j.stop()}}function qe(e){$&&$.changeLang(e)}this.resize=function(e,t){Ne(e,t,!0),ve()},this.resizeMedia=Fe,this.reset=function(){document.contains(D)&&D.parentNode.replaceChild(void 0,D),e.emptyElement(D)},this.setupInstream=function(t){this.instreamModel=N=t,N.on("change:controls",De,this),N.on("change:state",Ke,this),ae=!0,e.addClass(D,"jw-flag-ads"),Ge()},this.setAltText=function(e){F.setAltText(e)},this.useExternalControls=function(){e.addClass(D,"jw-flag-ads-hide-controls")},this.destroyInstream=function(){ae=!1,N&&(N.off(null,null,this),N=null),this.setAltText(""),e.removeClass(D,"jw-flag-ads"),e.removeClass(D,"jw-flag-ads-hide-controls"),P.getVideo&&P.getVideo().setContainer(x),ze(P,P.get("duration")),G.revertAlternateClickHandlers()},this.addCues=function(e){F&&F.addCues(e)},this.addThumbnails=function(e){F&&F.addThumbnails(e)},this.clickHandler=function(){return G},this.controlsContainer=function(){return k},this.getContainer=this.element=function(){return D},this.getSafeRegion=function(t){var n={x:0,y:0,width:P.get("containerWidth")||0,height:P.get("containerHeight")||0},i=P.get("dock");return i&&i.length&&P.get("controls")&&(n.y=H.element().clientHeight,n.height-=n.y),(t=t||!e.exists(t))&&P.get("controls")&&(n.height-=F.element().clientHeight),n},this.setCaptions=function(e){K.clear(),K.setup(P.get("id"),e),K.resize()},this.destroy=function(){e.removeEventListener(window,"resize",ve),e.removeEventListener(window,"orientationchange",ve);for(var t=I.length;t--;)e.removeEventListener(document,I[t],Be,Be,!1);P.mediaController&&P.mediaController.off("fullscreenchange",Be),e.removeEventListener(D,"keydown",me),Q&&Q.destroy(),V&&(P.off("change:state",V.statusDelegate),V.destroy(),V=null),ae&&this.destroyInstream(),Y&&Y.destroy(),ee&&ee.destroy(),U&&U.destroy(),e.clearCss(P.get("id"))},this.showAdv=function(e){U&&U.loadAdv(e)},this.beginStartAdv=function(){U&&U.beginStartAdv()},this.sendDanmu=e=>{e&&P.get("danmaku")&&P.get("danmaku").show?this.api.danmaku.send(e):e&&e.trim()&&(!P.get("danmaku")||P.get("danmaku")&&P.get("danmaku").show)},this.setLang=e=>{F&&F.setLang&&F.setLang(e)},this.setWatermark=e=>{e&&ee&&ee.setWatermarkOptions(e)}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(34),n(16),n(2)],t=function(e,t,n,i){var r=t.style,a={back:!0,fontSize:15,fontFamily:"Arial,sans-serif",fontOpacity:100,color:"#FFF",backgroundColor:"#000",backgroundOpacity:100,edgeStyle:null,windowColor:"#FFF",windowOpacity:0,preprocessor:i.identity};return function(o){var s,l,u,c,h,d,f={};function p(t){var n="jw-captions-window jw-reset";(t=t||"")?(d.innerHTML=t,h.className=n+" jw-captions-window-active"):(h.className=n,e.empty(d))}function m(e,t){if(e&&e.data&&t){n=(n=e).source,r=t.metadata;var n,r,a=n?!(!r||!i.isNumber(r[n]))&&r[n]:t.position;if(!1!==a){var o=e.data;if(!(0<=l&&g(o,l,a))){for(var s=-1,u=0;u<o.length;u++)if(g(o,u,a)){s=u;break}-1===s?p(""):s!==l&&(l=s,p(f.preprocessor(o[l].text)))}}}}function g(e,t,n){return e[t].begin<=n&&(!e[t].end||e[t].end>=n)&&(t===e.length-1||e[t+1].begin>=n)}function _(e,n,i){i=t.hexToRgba("#000000",i),"dropshadow"===e?n.textShadow="0 2px 1px "+i:"raised"===e?n.textShadow="0 0 5px "+i+", 0 1px 5px "+i+", 0 2px 5px "+i:"depressed"===e?n.textShadow="0 -2px 1px "+i:"uniform"===e&&(n.textShadow="-2px 0 1px "+i+",2px 0 1px "+i+",0 -2px 1px "+i+",0 2px 1px "+i+",-1px 1px 1px "+i+",1px 1px 1px "+i+",1px -1px 1px "+i+",1px 1px 1px "+i)}(c=document.createElement("div")).className="jw-captions jw-reset",this.show=function(){c.className="jw-captions jw-captions-enabled jw-reset"},this.hide=function(){c.className="jw-captions jw-reset"},this.populate=function(e){l=-1,(s=e)?m(e,u):p("")},this.resize=function(){var e=c.clientWidth;(e=Math.pow(e/400,.6))&&(e=f.fontSize*e,r(c,{fontSize:Math.round(e)+"px"}))},this.setup=function(e,n){var s,l,u,p,m;h=document.createElement("div"),d=document.createElement("span"),h.className="jw-captions-window jw-reset",d.className="jw-captions-text jw-reset",f=i.extend({},a,n),n&&(n=f.fontOpacity,p=f.windowOpacity,s=f.edgeStyle,m=f.backgroundColor,l={},u={color:t.hexToRgba(f.color,n),fontFamily:f.fontFamily,fontStyle:f.fontStyle,fontWeight:f.fontWeight,textDecoration:f.textDecoration},p&&(l.backgroundColor=t.hexToRgba(f.windowColor,p)),_(s,u,n),f.back?u.backgroundColor=t.hexToRgba(m,f.backgroundOpacity):null===s&&_("uniform",u),r(h,l),r(d,u),p=e,n=l,m=u,t.css("#"+p+" .jw-video::-webkit-media-text-track-display",n,p),t.css("#"+p+" .jw-video::cue",m,p),m.backgroundColor)&&(n="{background-color: "+m.backgroundColor+" !important;}",t.css("#"+p+" .jw-video::-webkit-media-text-track-display-backdrop",n,p)),h.appendChild(d),c.appendChild(h),this.populate(o.get("captionsTrack")),o.set("captions",f)},this.clear=function(){e.empty(c)},this.element=function(){return c},o.on("change:playlistItem",(function(){u=null,l=-1,p("")}),this),o.on("change:captionsTrack",(function(e,t){this.populate(t)}),this),o.mediaController.on("seek",(function(){l=-1}),this),o.mediaController.on("time seek",(function(e){m(s,u=e)}),this),o.mediaController.on("subtitlesTrackData",(function(){m(s,u)}),this),o.on("change:state",(function(e,t){switch(t){case n.IDLE:case n.ERROR:case n.COMPLETE:this.hide();break;default:this.show()}}),this)}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(14),n(6),n(7),n(2)],t=function(e,t,n,i){return function(r,a,o){i.extend(this,n),s=a,this.element=function(){return s};var s,l,u,c=((a=new e(s,i.extend({enableDoubleTap:!0,useMove:!0},o))).on("click tap",h),a.on("doubleClick doubleTap",(function(){u?u():c.trigger("doubleClick")})),a.on("move",(function(){c.trigger("move")})),a.on("over",(function(){c.trigger("over")})),a.on("out",(function(){c.trigger("out")})),this.clickHandler=h,this);function h(e){r.get("flashBlocked")||(l?l(e):c.trigger(e.type===t.touchEvents.CLICK?"click":"tap"))}this.setAlternateClickHandlers=function(e,t){l=e,u=t||null},this.revertAlternateClickHandlers=function(){u=l=null}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(7),n(14),n(223),n(2)],t=function(e,t,n,i,r){function a(a){r.extend(this,t),this.model=a,this.el=e.createElement(i({}));var o=this;this.iconUI=new n(this.el).on("click tap",(function(e){o.trigger(e.type)}))}return r.extend(a.prototype,{element:function(){return this.el}}),a}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-display-icon-container jw-background-color jw-reset" style="cursor:none;pointer-events:none">\n    <div class="jw-icon jw-icon-display jw-button-color jw-reset"></div>\n</div>\n'},useData:!0})},function(e,t,n){n=[n(225),n(1),n(2),n(14)],t=function(e,t,n,i){function r(e){this.model=e,this.setup(),this.model.on("change:dock",this.render,this)}return n.extend(r.prototype,{setup:function(){var n=this.model.get("dock"),r=this.click.bind(this);n=e(n),this.el=t.createElement(n),new i(this.el).on("click tap",r)},getDockButton:function(e){return t.hasClass(e.target,"jw-dock-button")?e.target:(t.hasClass(e.target,"jw-dock-text")?e.target.parentElement:e.target).parentElement},click:function(e){var t=this.getDockButton(e).getAttribute("button"),i=this.model.get("dock");(i=n.findWhere(i,{id:t}))&&i.callback&&i.callback(e)},render:function(){var n=this.model.get("dock");n=e(n),n=t.createElement(n),this.el.innerHTML=n.innerHTML},element:function(){return this.el}}),r}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a,o,s=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="jw-dock-button jw-background-color jw-reset'+(null!=(a=l(n,"if").call(s,null!=t?l(t,"btnClass"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:59},end:{line:3,column:95}}}))?a:"")+'" button="'+e.escapeExpression("function"==typeof(o=null!=(o=l(n,"id")||(null!=t?l(t,"id"):t))?o:e.hooks.helperMissing)?o.call(s,{name:"id",hash:{},data:r,loc:{start:{line:3,column:105},end:{line:3,column:111}}}):o)+'">\n        <div class="jw-icon jw-dock-image jw-reset" '+(null!=(a=l(n,"if").call(s,null!=t?l(t,"img"):t,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:52},end:{line:4,column:110}}}))?a:"")+'></div>\n        <div class="jw-arrow jw-reset"></div>\n'+(null!=(a=l(n,"if").call(s,null!=t?l(t,"tooltip"):t,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:8},end:{line:10,column:15}}}))?a:"")+"    </div>\n"},2:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"btnClass")||(null!=t?a(t,"btnClass"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"btnClass",hash:{},data:r,loc:{start:{line:3,column:76},end:{line:3,column:88}}}):n)},4:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"style='background-image: url(\""+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"img")||(null!=t?a(t,"img"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"img",hash:{},data:r,loc:{start:{line:4,column:93},end:{line:4,column:100}}}):n)+"\")'"},6:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="jw-overlay jw-background-color jw-reset">\n            <span class="jw-text jw-dock-text jw-reset">'+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"tooltip")||(null!=t?a(t,"tooltip"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"tooltip",hash:{},data:r,loc:{start:{line:8,column:56},end:{line:8,column:67}}}):n)+"</span>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-dock jw-reset">\n'+(null!=(n=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:4},end:{line:12,column:13}}}))?n:"")+"</div>"},useData:!0})},function(e,t,n){n=[n(14),n(1),n(6),n(2),n(7),n(227)],t=function(e,t,n,i,r,a){var o=t.style,s={linktarget:"_blank",margin:8,hide:!1,position:"top-right"};return function(l){var u,c,h=new Image,d=i.extend({},l.get("logo"));return i.extend(this,r),this.setup=function(r){(c=i.extend({},s,d)).hide="true"===c.hide.toString(),u=t.createElement(a()),c.file&&(c.hide&&t.addClass(u,"jw-hide"),t.addClass(u,"jw-logo-"+(c.position||s.position)),"top-right"===c.position&&(l.on("change:dock",this.topRight,this),l.on("change:controls",this.topRight,this),this.topRight(l)),l.set("logo",c),h.onload=function(){var e,t={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};c.margin!==s.margin&&3===(e=/(\w+)-(\w+)/.exec(c.position)).length&&(t["margin-"+e[1]]=c.margin,t["margin-"+e[2]]=c.margin),o(u,t),l.set("logoWidth",t.width)},h.src=c.file,new e(u).on("click tap",(function(e){t.exists(e)&&e.stopPropagation&&e.stopPropagation(),this.trigger(n.JWPLAYER_LOGO_CLICK,{link:c.link,linktarget:c.linktarget})}),this),r.appendChild(u))},this.topRight=function(e){var t=e.get("controls"),n=e.get("dock");t=t&&(n&&n.length||e.get("sharing")||e.get("related")),o(u,{top:t?"3.5em":0})},this.element=function(){return u},this.position=function(){return c.position},this.destroy=function(){h.onload=null},this}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'src="'+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"file")||(null!=t?a(t,"file"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"file",hash:{},data:r,loc:{start:{line:2,column:48},end:{line:2,column:56}}}):n)+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-logo jw-reset">\n    <img class="jw-logo-image" '+(null!=(n=a(n,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"file"):t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:31},end:{line:2,column:64}}}))?n:"")+">\n</div>"},useData:!0})},function(e,t,n){let i,r,a=n(51);i=[n(1),n(2),n(7),n(47),n(14),n(63),n(230),n(233),n(235),n(237),n(238),n(239),n(112)],void 0!==(r=function(e,t,n,i,r,o,s,l,u,c,h,d,f){function p(e,t){var n=document.createElement("div");return n.className="jw-icon jw-icon-inline jw-button-color jw-reset "+e,n.style.display="none",t&&new r(n).on("click tap",(function(){t()})),{element:function(){return n},toggle:function(e){e?this.show():this.hide()},show:function(){n.style.display=""},hide:function(){n.style.display="none"}}}function m(e){var t=document.createElement("span");return t.className="jw-text jw-reset "+e,t}function g(e){return new l(e)}function _(e,n){var i=document.createElement("div");return i.className="jw-group jw-controlbar-"+e+"-group jw-reset",t.each(n,(function(e){e.element&&(e=e.element()),i.appendChild(e)})),i}function y(t,n,i){this._api=t,this._model=n,this._playerElement=i,this._isMobile=e.isMobile(),this._compactModeMaxSize=400,this._maxCompactWidth=-1,this.playlistIndex=0,this.resolutionIndex=0,this.langMenu=[],this.curSelectLangIndex=0,this.setup(),this.qualityChangeLang=a.default,this.qualitylevels=[],this.qualityIndex=0,this.rotateDeg=0,this.isFullScreen=!1}return t.extend(y.prototype,n,{setup:function(){this.initDefaultResolution(),this.build(),this.initialize()},initDefaultResolution:function(){var e=this._model.get("playlist"),t=e.findIndex((e=>e.default)),n=0;-1!=t&&(this._model.set("item",t),n=e[t].sources.findIndex((e=>e.default)),n=-1==t?0:n),-1!=n&&(this._model.set("currentLevel",n),this.resolutionIndex=n)},build:function(){var e,n,i,r,a,l,y,v,A=((A=(A=this._model.get("timeShift"))&&A.liveStartTime&&0<Date.now()/1e3-A.liveStartTime)&&(l=new f(!0,"live-shift-switch")),new s(this._model,this._api,A)),E=new h("jw-icon-more");!1!==this._model.get("visualplaylist")&&(e=new u("jw-icon-playlist")),r=p("jw-icon-volume",this._api.setMute),n=new o("jw-slider-volume","horizontal"),i=new c(this._model,"jw-icon-volume"),this._model.get("danmaku")&&this._model.get("danmaku").show&&(a=new d(this._model,"jw-icon-danmu")),this._model.get("isMirror")&&(y=p("jw-icon-mirror",this._api.setMirror)),this._model.get("rotate")&&(v=p("jw-icon-rotate",this.setRotate.bind(this))),this.elements={alt:m("jw-text-alt"),barLogo:p("jw-icon-barlogo-new",(()=>{window.open(this._model.get("controlbar").barLogoUrl)})),play:p("jw-icon-playback",this._api.play.bind(this,{reason:"interaction"})),prev:p("jw-icon-prev",this._api.playlistPrev.bind(this,{reason:"interaction"})),next:p("jw-icon-next",this._api.playlistNext.bind(this,{reason:"interaction"})),playlist:e,elapsed:m("jw-text-elapsed"),split:m("jw-text-split"),time:A,duration:m("jw-text-duration"),playRate:g("jw-icon-playrate"),drawer:E,hd:g("jw-icon-hd"),qualityChange:g("jw-icon-qualityChange"),cc:g("jw-icon-cc"),audiotracks:g("jw-icon-audio-tracks"),mute:r,volume:n,volumetooltip:i,cast:p("jw-icon-cast jw-off",this._api.castToggle),fullscreen:p("jw-icon-fullscreen",this._api.setFullscreen),screenshot:p("jw-icon-screenshot",this._api.setScreenshot),mirror:y,rotate:v,danmuTooltip:a,pictInpict:p("jw-icon-pictureinpicture",this._api.setPictInPict),lang:g("jw-icon-lang"),liveShiftSwitch:l,backLive:m("jw-text-backlive")},this._model.get("danmaku")&&this._model.get("danmaku").show,this.elements.split.innerHTML="/",this.layout={left:[this.elements.barLogo,this.elements.play,this.elements.prev,this.elements.playlist,this.elements.next,this.elements.elapsed,this.elements.split,this.elements.duration,this.elements.liveShiftSwitch,this.elements.backLive],center:[this.elements.time,this.elements.alt,this.elements.sendBox],right:[this.elements.playRate,this.elements.lang,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.drawer,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.mirror,this.elements.rotate,this.elements.fullscreen,this.elements.screenshot,this.elements.danmuBtn,this.elements.danmuTooltip,this.elements.pictInpict],drawer:[this.elements.hd,this.elements.qualityChange,this.elements.cc,this.elements.audiotracks]},this.menus=t.compact([this.elements.playlist,this.elements.hd,this.elements.qualityChange,this.elements.cc,this.elements.audiotracks,this.elements.volumetooltip,this.element.lang]),this.layout.left=t.compact(this.layout.left),this.layout.center=t.compact(this.layout.center),this.layout.right=t.compact(this.layout.right),this.layout.drawer=t.compact(this.layout.drawer),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=_("left",this.layout.left),this.elements.center=_("center",this.layout.center),this.elements.right=_("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right)},initialize:function(){this._model.get("controlbar").barLogo&&this.elements.barLogo.show(),this.elements.play.show(),this.elements.fullscreen.show(),this._model.get("screenshot")?this.elements.screenshot.show():this.elements.screenshot.hide(),this._model.get("pictinpict")&&e.isPictureInpicture()?this.elements.pictInpict.show():this.elements.pictInpict.hide(),this.elements.mute&&this.elements.mute.show(),this._model.get("isMirror")&&this.elements.mirror.show();var n=this._model.get("rotate");n&&(this.elements.rotate.show(),n=!!n.clockwise,rotateButton=p("jw-icon-rotate",this._api.setRotate),n||e.toggleClass(this.elements.rotate.element(),"jw-off",!n)),this.setUpLangMenu(),this.onVolume(this._model,this._model.get("volume")),this.onPlaylist(this._model,this._model.get("playlist")),this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.onMediaModel(this._model,this._model.get("mediaModel")),this.onCastAvailable(this._model,this._model.get("castAvailable")),this.onCastActive(this._model,this._model.get("castActive")),this.onCaptionsList(this._model,this._model.get("captionsList")),this._model.on("change:volume",this.onVolume,this),this._model.on("change:mute",this.onMute,this),this._model.on("change:playlist",this.onPlaylist,this),this._model.on("change:playlistItem",this.onPlaylistItem,this),this._model.on("change:mediaModel",this.onMediaModel,this),this._model.on("change:castAvailable",this.onCastAvailable,this),this._model.on("change:castActive",this.onCastActive,this),this._model.on("change:duration",this.onDuration,this),this._model.on("change:position",this.onElapsed,this),this._model.on("change:fullscreen",this.onFullscreen,this),this._model.on("change:screenshot",this.onScreenshot,this),this._model.on("change:captionsList",this.onCaptionsList,this),this._model.on("change:captionsIndex",this.onCaptionsIndex,this),this._model.on("change:compactUI",this.onCompactUI,this),this._model.on("change:provider",this.onProvider,this),this._model.on("change:danmaku",this.onDanmaku,this),this._model.on("change:mirror",this.onMirror,this),this.elements.volume&&this.elements.volume.on("update",(function(e){e=e.percentage,this._api.setVolume(e)}),this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",(function(e){e=e.percentage,this._api.setVolume(e)}),this),this.elements.volumetooltip.on("toggleValue",(function(){this._api.setMute()}),this)),this.elements.danmuTooltip&&(this.elements.danmuTooltip.on("toggleValue",(function(){var e=JSON.parse(JSON.stringify(this._model.get("danmaku")));this._model.set("danmaku",Object.assign(e,{active:!e.active}))})),this.elements.danmuTooltip.on("switch",(e=>{var t=JSON.parse(JSON.stringify(this._model.get("danmaku")));this._model.set("danmaku",Object.assign(t,{useMask:!t.useMask})),this._api.danmaku&&this._api.danmaku.updateUseMask(e)})),this.elements.danmuTooltip.on("update",(e=>{switch(e.type){case 0:this._api.danmaku&&this._api.danmaku.updateOpacity(e.val);break;case 1:this._api.danmaku&&this._api.danmaku.updateArea(e.val);break;case 2:this._api.danmaku&&this._api.danmaku.updateSpeed(e.val);break;case 3:this._api.danmaku&&this._api.danmaku.updateFontSize(e.val)}}))),this.elements.liveShiftSwitch&&setTimeout((()=>{let e="jw-flag-time-shift";this._playerElement.classList.add(e),this.elements.backLive.innerText="返回直播",this.elements.liveShiftSwitch.addEvent(),this.elements.liveShiftSwitch.on("switch",(t=>{t?this._playerElement.classList.add(e):this._playerElement.classList.remove(e)}))})),this.elements.playlist&&this.elements.playlist.on("select",(function(e){this._model.once("itemReady",(function(){this.playlistIndex=e,this._model.setCurrentQuality(this.resolutionIndex),this._api.play({reason:"interaction"})}),this),this._model.set("autostart",!0),this._api.load(e,this.resolutionIndex)}),this),this.elements.playRate.on("select",(function(e){e=this._model.get("playRateConfig")[e].label,e=parseFloat(e.substring(1)),this._model.setPlaybackRate(e)}),this),this.elements.hd.on("select",(function(e){this._model.set("autostart",!0),this._model.once("itemReady",(function(){this.resolutionIndex=e,this._model.setCurrentQuality(e),this._api.play({reason:"interaction"})}),this),this._api.load(this.playlistIndex,e)}),this),this.elements.qualityChange.on("select",(function(e){this._model.changeHlsQuality(e),this.elements.qualityChange.selectItem(e)}),this),this.elements.hd.on("toggleValue",(function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0)}),this),this.elements.cc.on("select",(function(e){this._api.setCurrentCaptions(e)}),this),this.elements.cc.on("toggleValue",(function(){var e=this._model.get("captionsIndex");this._api.setCurrentCaptions(e?0:1)}),this),this.elements.audiotracks.on("select",(function(e){this._model.getVideo().setCurrentAudioTrack(e)}),this),new r(this.elements.duration).on("click tap",(function(){var t;"DVR"===e.adaptiveType(this._model.get("duration"))&&(t=this._model.get("position"),this._api.seek(Math.max(i.dvrSeekLimit,t)))}),this),new r(this.el).on("click tap drag",(function(){this.trigger("userAction")}),this),new r(this.elements.backLive).on("click tap",(function(){this._model.gobackLive()}),this),this.elements.drawer.on("open-drawer close-drawer",(function(t,n){e.toggleClass(this.el,"jw-drawer-expanded",n.isOpen),n.isOpen||this.closeMenus()}),this),t.each(this.menus,(function(e){e.on("open-tooltip",this.closeMenus,this)}),this),this._model.get("danmaku")&&this._model.get("danmaku").show&&setTimeout((()=>{this.onDanmaku(this._model,this._model.get("danmaku"))}))},setUpLangMenu(){var e=this._model.get("lang"),t=this._model.get("languages");if(this._model.get("showLang")&&t&&t[e]){this.setLangMenu(0);let e=this;this.elements.lang.on("select",(function(t){t=e.langMenu[t],e.setLang(t.id)}))}},setLangMenu(){var e,t=this._model.get("lang"),n=this._model.get("languages"),i=[];let r=0;for(e in n)i.push({label:n[t][e],index:i.length,id:e}),t==e&&(r=i.length-1);this.langMenu=i,this.elements.lang.setup(i,r,{toggle:!1})},setHlsQulityLangMenu(e,t,n){this.qualitylevels=e||this.qualitylevels,this.qualityIndex=t||this.qualityIndex;var i=[];for(let e=0;e<this.qualitylevels.length;e++)i.push({label:-1==this.qualitylevels[e].id?this.qualityChangeLang[n].HLSQUALITYCHANGE.AUTO:this.qualitylevels[e].label});this.elements.qualityChange.setup(i,this.qualityIndex,{toggle:!1})},setLang:function(e){if("string"==typeof e)this._model.set("lang",e);else{if(!e.zh&&!e.en)return;var t=e.zh?"zh":"en",n=(this._model.set("lang",t),this._model.get("languages"));n=Object.assign(n,e),this._model.set("languages",n),e=t}if(this.elements.playlist.changeLang(e),this._model.get("showLang")&&this.setLangMenu(),n=this._model.get("playlist")[this.playlistIndex],currentLevel=this._model.get("currentLevel"),n&&n.sources){let e=[];n.sources.forEach((t=>{e.push({label:t.label})})),this.elements.hd.setup(e,this.resolutionIndex,{toggle:!1})}this.elements.danmuTooltip&&this.elements.danmuTooltip.changeLang(e),this.elements.qualityChange&&this.setHlsQulityLangMenu(void 0,void 0,e),this.trigger("change_lang",e)},onCaptionsList:function(e,t){e=e.get("captionsIndex"),this.elements.cc.setup(t,e),this.clearCompactMode()},onCaptionsIndex:function(e,t){this.elements.cc.selectItem(t)},onPlaylist:function(e,t){var n,i=1<t.length;this.elements.next.toggle(i),this.elements.prev.toggle(i),this.elements.playlist&&(i=e.get("lang"),n=e.get("languages"),this.elements.playlist.setup(t,e.get("item"),i,n))},onPlaylistItem:function(e){this.elements.time.updateBuffer(0),this.elements.time.render(0),this.elements.duration.innerHTML="00:00",this.elements.elapsed.innerHTML="00:00",this.clearCompactMode(),e=e.get("item"),this.elements.playlist&&this.elements.playlist.selectItem(e),this.elements.audiotracks.setup()},onMediaModel:function(n,i){i.on("change:levels",(function(e,t){this.elements.hd.setup(t,e.get("currentLevel"),{toggle:!1}),this.clearCompactMode(),this._model.setCurrentQuality(this.resolutionIndex)}),this),i.on("change:hlsQualityListChange",((e,t)=>{var n=this._model.get("lang")||"zh",i=t.findIndex((e=>e.selected));this.setHlsQulityLangMenu(t,i,n)})),i.on("change:currentLevel",(function(e,t){this.elements.hd.selectItem(t)}),this),i.on("change:audioTracks",(function(e,n){n=t.map(n,(function(e){return{label:e.name}})),this.elements.audiotracks.setup(n,e.get("currentAudioTrack"),{toggle:!1}),this.clearCompactMode()}),this),i.on("change:currentAudioTrack",(function(e,t){this.elements.audiotracks.selectItem(t)}),this),i.on("change:state",(function(t,n){"complete"===n&&(this.elements.drawer.closeTooltip(),e.removeClass(this.el,"jw-drawer-expanded"))}),this),i.on("change:playbackRate",(function(e,t){var n=this._model.get("playRateConfig");let i=-1;for(let e=0;e<n.length;e++)n[e].label==="×"+t&&(i=e);this.elements.playRate.selectItem(i)}),this)},onProvider:function(e,t){/(html5|videojs)/.test(t.name)&&e.get("playRate")?this.elements.playRate.setup(e.get("playRateConfig"),0):this.elements.playRate.hide()},onVolume:function(e,t,n){this.renderVolume(e.get("mute"),t,n)},onMute:function(e,t){this.renderVolume(t,e.get("volume"))},renderVolume:function(t,n,i){var r;i=i||n,this.elements.mute&&e.toggleClass(this.elements.mute.element(),"jw-off",t),this.elements.volume&&this.elements.volume.render(t?0:n),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(t?0:n),e.toggleClass(this.elements.volumetooltip.element(),"jw-off",t)),this.elements.volumetooltip&&this.elements.volumetooltip.valuetip&&(r=this.elements.volumetooltip.valuetip,t?r.innerHTML="0%":100===n&&i<n&&this._model.get("provider")&&/^flash/.test(this._model.get("provider").name)?r.innerHTML="100%(按↑可以继续增大音量)":r.innerText=Math.round(n)+"%")},onCastAvailable:function(e,t){this.elements.cast.toggle(t),this.clearCompactMode()},onCastActive:function(t,n){e.toggleClass(this.elements.cast.element(),"jw-off",!n)},onElapsed:function(t,n){t=t.get("duration"),t="DVR"===e.adaptiveType(t)?"-"+e.timeFormat(-t):e.timeFormat(n),this.elements.elapsed.innerHTML=t},onDuration:function(t,n){var i;"DVR"===e.adaptiveType(n)?(i="Live",this.clearCompactMode()):i=e.timeFormat(n),/NaN/.test(i)||(this.elements.duration.innerHTML=i)},onFullscreen:function(t,n){e.isIOS()||(this.isFullScreen=n,e.toggleClass(this.elements.fullscreen.element(),"jw-off",n))},onScreenshot:function(t,n){e.toggleClass(this.elements.screenshot.element(),"jw-off",n)},element:function(){return this.el},getVisibleBounds:function(){var t,n=this.el;return"table"===(getComputedStyle?getComputedStyle(n):n.currentStyle).display?e.bounds(n):(n.style.visibility="hidden",n.style.display="table",t=e.bounds(n),n.style.visibility=n.style.display="",t)},setAltText:function(e){this.elements.alt.innerHTML=e},addCues:function(e){this.elements.time&&(t.each(e,(function(e){this.elements.time.addCue(e)}),this),0===e.length&&this.elements.time.resetChapters(),this.elements.time.drawCues())},addThumbnails:function(e){this.elements.time&&(t.each(e,(function(e){this.elements.time.addThumbnail(e)}),this),this.elements.time.drawCues())},closeMenus:function(e){t.each(this.menus,(function(t){e&&e.target===t.el||t.closeTooltip(e)}))},hideComponents:function(){this.closeMenus(),this.elements.drawer.closeTooltip(),e.removeClass(this.el,"jw-drawer-expanded")},clearCompactMode:function(){this._maxCompactWidth=-1,this._model.set("compactUI",!1),this._containerWidth&&this.checkCompactMode(this._containerWidth)},setCompactModeBounds:function(){var t;0<this.element().offsetWidth&&(t=this.elements.left.offsetWidth+this.elements.right.offsetWidth,"LIVE"===e.adaptiveType(this._model.get("duration"))?this._maxCompactWidth=t+this.elements.alt.offsetWidth:(t+=this.elements.center.offsetWidth-this.elements.time.el.offsetWidth,this._maxCompactWidth=t/.8))},checkCompactMode:function(e){this.setCompactModeBounds(),this._containerWidth=e,-1!==this._maxCompactWidth&&(e>=this._compactModeMaxSize&&e>this._maxCompactWidth?this._model.set("compactUI",!1):(e<this._compactModeMaxSize||e<=this._maxCompactWidth)&&this._model.set("compactUI",!0))},onCompactUI:function(n,i){e.removeClass(this.el,"jw-drawer-expanded"),this.elements.drawer.setup(this.layout.drawer,i),(!i||this.elements.drawer.activeContents.length<2)&&t.each(this.layout.drawer,(function(e){this.elements.right.insertBefore(e.el,this.elements.drawer.el)}),this)},onDanmaku:function(t,n){n.active?this._api.danmaku.enable():this._api.danmaku.disable();var i=document.getElementsByClassName("jw-icon-danmu")[0].getElementsByClassName("jw-overlay ")[0],r=n.active?"block":"none";i.style.display=r,e.toggleClass(this.elements.danmuTooltip.element(),"jw-off",!n.active)},onMirror:function(t){t=t.get("mirror");var n=(e.toggleClass(this.elements.mirror.element(),"jw-off",t),"jw-state-mirror");t?this._playerElement.classList.add(n):this._playerElement.classList.remove(n)},setRotate:function(e=!0){var t=this._model.get("rotate");if(clockwise=!!t.clockwise,(innerRotate=!!t.innerRotate)||!this.isFullScreen){var n,i,r,a;t=e?clockwise?90:-90:0,this.rotateDeg+=t,360===Math.abs(this.rotateDeg)&&(this.rotateDeg=0),t=this._model.getVideo();try{e&&!innerRotate&&(i=(n=t.video).style.width,r=n.style.height,n.style.width=r,n.style.height=i,parseInt(i)>parseInt(r)?(a=(parseInt(i)-parseInt(r))/2,n.style.transform=`translate(${a}px, -${a}px) rotate(${this.rotateDeg}deg)`):n.style.transform="rotate("+this.rotateDeg+"deg)");let m=t.video.getElementsByTagName("video");var o,s=(m=0<m.length||0<(m=t.video.getElementsByTagName("canvas")).length?m[0]:m).style.width,l=m.style.height,u="video"==m.tagName.toLowerCase(),c=Math.abs(this.rotateDeg)/90%2==0,h=t.video.clientWidth,d=t.video.clientHeight,f=m.style.width,p=m.style.height;if(innerRotate)if(u)m.style.transform=`rotate(${this.rotateDeg}deg)`;else{let e=1;this.isFullScreen&&!c&&(e=h/parseInt(p))>d/parseInt(f)&&(e=d/parseInt(f)),m.style.transform=`scale(${e}) rotate(${this.rotateDeg}deg)`}else u||c?m.style.transform="none":(o=(parseInt(s)-parseInt(l))/2,m.style.transform=`translate(-${o}px, ${o}px)`),m.style.zIndex=c?"-1":"",c&&!u&&(m.style.position="relative");if("video"===m.tagName.toLowerCase()&&(m.style.width=l,m.style.height=s),innerRotate){let e="",t="";this.isFullScreen&&(u&&!c&&parseInt(p)>h&&(e=(h-parseInt(p))/2+"px"),!u)&&d>parseInt(p)&&(t=(d-parseInt(p))/2+"px"),m.style.marginLeft=e,m.style.marginTop=t}innerRotate||u||m.classList.add("rotate-inner")}catch(e){}}}}),y}.apply(t,i))&&(e.exports=r)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,l=e.escapeExpression;return e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},'<div class="'+l("function"==typeof(a=null!=(a=e(n,"className")||(null!=t?e(t,"className"):t))?a:s)?a.call(o,{name:"className",hash:{},data:r,loc:{start:{line:1,column:12},end:{line:1,column:25}}}):a)+" "+l("function"==typeof(a=null!=(a=e(n,"orientation")||(null!=t?e(t,"orientation"):t))?a:s)?a.call(o,{name:"orientation",hash:{},data:r,loc:{start:{line:1,column:26},end:{line:1,column:41}}}):a)+' jw-reset">\n    <div class="jw-slider-container jw-reset">\n        <div class="jw-rail jw-reset"></div>\n        <div class="jw-buffer jw-reset"></div>\n        <div class="jw-progress jw-reset"></div>\n        <div class="jw-knob jw-reset"></div>\n    </div>\n</div>'},useData:!0})},function(e,t,n){n=[n(2),n(1),n(47),n(63),n(40),n(231),n(232)],t=function(e,t,n,i,r,a,o){var s=r.extend({setup:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-reset";var e=document.createElement("div");e.className="jw-time-tip jw-background-color jw-reset",e.appendChild(this.img),e.appendChild(this.text),t.removeClass(this.el,"jw-hidden"),this.addContent(e)},image:function(e){t.style(this.img,e)},update:function(e){this.text.innerHTML=e}});return r=i.extend({constructor:function(t,n,r){this._model=t,this._api=n,this.isLiveShinft=r,this.timeTip=new s("jw-tooltip-time"),this.timeTip.setup(),this.cues=[],this.seekThrottled=e.throttle(this.performSeek,400),this._model.on("change:playlistItem",this.onPlaylistItem,this).on("change:position",this.onPosition,this).on("change:duration",this.onDuration,this).on("change:buffer",this.onBuffer,this),i.call(this,"jw-slider-time","horizontal")},setup:function(){i.prototype.setup.apply(this,arguments),this._model.get("playlistItem")&&this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.elementRail.appendChild(this.timeTip.element()),t.addEventListener(this.el,"mousemove",this.showTimeTooltip.bind(this),!1),t.addEventListener(this.el,"mouseout",this.hideTimeTooltip.bind(this),!1)},limit:function(i){var r,a,o;return this.activeCue&&e.isNumber(this.activeCue.pct)?this.activeCue.pct:(r=this._model.get("duration"),"DVR"===t.adaptiveType(r)?(a=(1-i/100)*r,o=this._model.get("position"),100-100*Math.min(a,Math.max(n.dvrSeekLimit,o))/r):i)},update:function(e){this.seekTo=e,this.seekThrottled(),i.prototype.update.apply(this,arguments)},dragStart:function(){this._model.set("scrubbing",!0),i.prototype.dragStart.apply(this,arguments)},dragEnd:function(){i.prototype.dragEnd.apply(this,arguments),this._model.set("scrubbing",!1)},onSeeked:function(){this._model.get("scrubbing")&&this.performSeek()},onBuffer:function(e,t){this.isLiveShinft||this.updateBuffer(t)},onPosition:function(e,t){this.updateTime(t,e.get("duration"))},onDuration:function(e,t){this.updateTime(e.get("position"),t)},updateTime:function(e,n){var i,r=0;n&&("DVR"===(i=t.adaptiveType(n))?r=(n-e)/n*100:"VOD"===i&&(r=e/n*100)),this.render(r)},onPlaylistItem:function(t,n){this.reset(),t.mediaModel.on("seeked",this.onSeeked,this),t=n.tracks,e.each(t,(function(e){e&&e.kind&&"thumbnails"===e.kind.toLowerCase()?this.loadThumbnails(e.file):e&&e.kind&&"chapters"===e.kind.toLowerCase()&&this.loadChapters(e.file)}),this)},performSeek:function(){var e,n=this.seekTo,i=this._model.get("duration"),r=t.adaptiveType(i);0===i?this._api.play():"DVR"===r?this._api.seek(e=(100-n)/100*i):this._model.attributes.controlbar.canDrag&&(e=n/100*i,this._api.seek(Math.min(e,i-.25)))},showTimeTooltip:function(i){var r=this._model.get("duration");if(0!==r){var a,o,s=t.bounds(this.elementRail),l=document.documentElement.scrollLeft||document.body.scrollLeft,u=(i.pageX||i.clientX+l)-Math.round(s.left),c=(l=r*(i=(u=t.between(u,0,Math.round(s.width)))/Math.round(s.width)),r<0&&(l=r-l),2),h=20;if(this.activeCue?(t.removeClass(this.timeTip.el,"jw-tooltip-time-jxm"),a=this.activeCue.text,(o=document.createElement("canvas").getContext("2d")).font="15px Arial",70<(o=o.measureText(a)).width&&(h=.05<i?Math.floor(o.width/70):90,c=100,t.addClass(this.timeTip.el,"jw-tooltip-time-jxm"))):(this.isLiveShinft&&(l=-1<l-r&l-r<=0?0:l-r),a=t.timeFormat(l,!0),r<0&&l>n.dvrSeekLimit&&(a="Live"),t.removeClass(this.timeTip.el,"jw-tooltip-time-jxm")),this.timeTip.update(a),this.showThumbnail(l),t.addClass(this.timeTip.el,"jw-open"),i=this.chooseThumbnail(l))if(0<i.indexOf("#xywh"))try{h=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(i)[4]/2;var d=t.between(u,h,s.width-h-c)/s.width;this.timeTip.el.style.left=100*d+"%"}catch(i){}else{var f=new Image;f.onload=e.bind((function(){f.onload=null,h=100;var e=t.between(u,h,s.width-h-c)/s.width;this.timeTip.el.style.left=100*e+"%"}),this),f.src=i}else d=t.between(u,h,s.width-h-c)/s.width,this.timeTip.el.style.left=100*d+"%"}},hideTimeTooltip:function(){t.removeClass(this.timeTip.el,"jw-open")},reset:function(){this.resetChapters(),this.resetThumbnails()}}),e.extend(r.prototype,a,o),r}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(1),n(81)],t=function(e,t,n){function i(e,t){this.time=e,this.text=t,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset",this.el.time=e}return e.extend(i.prototype,{align:function(e){"%"===this.time.toString().slice(-1)?this.pct=this.time:(e=this.time/e*100,this.pct=e+"%"),this.el.style.left=this.pct}}),{loadChapters:function(e){t.ajax(e,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(t){t=n(t.responseText),e.isArray(t)&&(e.each(t,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(e){this.cues.push(new i(e.begin,e.text))},drawCues:function(){var n,i=this._model.mediaModel.get("duration");!i||i<=0?this._model.mediaModel.once("change:duration",this.drawCues,this):e.each((n=this).cues,(function(e){e.align(i),t.addEventListener(e.el,"mouseover",(function(){n.activeCue=e})),t.addEventListener(e.el,"mouseout",(function(){n.activeCue=null})),t.addEventListener(e.el,"click",(function(e){n._api.seek(e.target.time)})),n.elementRail.appendChild(e.el)}))},resetChapters:function(){e.each(this.cues,(function(e){e.el.parentNode&&e.el.parentNode.removeChild(e.el)}),this),this.cues=[]}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(1),n(81)],t=function(e,t,n){function i(e){this.begin=e.begin,this.end=e.end,this.img=e.text}return{loadThumbnails:function(e){e&&(this.vttPath=e.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,t.ajax(e,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(t){t=n(t.responseText),e.isArray(t)&&(e.each(t,(function(e){this.thumbnails.push(new i(e))}),this),this.drawCues())},thumbnailsFailed:function(){},addThumbnail:function(t){var n=!1;e.each(this.thumbnails,(function(e){e.begin===t.begin&&e.end===t.end&&(e.img=t.text,n=!0)}),this),n||this.thumbnails.push(new i(t))},chooseThumbnail:function(t){var n;return e.find(this.thumbnails,(function(e){return e.begin<=t&&e.end>=t}))?((n=e.sortedIndex(this.thumbnails,{end:t},e.property("end")))>=this.thumbnails.length&&(n=this.thumbnails.length-1),(n=this.thumbnails[n].img).indexOf("://")<0&&this.vttPath?this.vttPath+"/"+n:n):""},loadThumbnail:function(t){var n={display:"block",margin:"0 auto",backgroundPosition:"0 0",backgroundRepeat:"no-repeat"};if(0<(t=this.chooseThumbnail(t)).indexOf("#xywh"))try{var i=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(t);t=i[1],n.backgroundPosition=-1*i[2]+"px "+-1*i[3]+"px",n.width=i[4],n.height=i[5]}catch(t){return}else t&&(this.individualImage?(n.width=this.individualImage.width,n.height=this.individualImage.height):(this.individualImage=new Image,this.individualImage.onload=e.bind((function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height})}),this),this.individualImage.src=t));return""===t&&(n.width=0,n.height=0),n.backgroundImage='url("'+t+'")',n},showThumbnail:function(e){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(e))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(40),n(1),n(2),n(14),n(234)],t=function(e,t,n,i,r){return e.extend({setup:function(e,a,o){this.iconUI||(this.iconUI=new i(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.select.bind(this)),this.reset(),e=n.isArray(e)?e:[],this.list=e,t.toggleClass(this.el,"jw-hidden",e.length<2);var s=!(o=2<=e.length||2===e.length&&o&&!1===o.toggle)&&2===e.length;t.toggleClass(this.el,"jw-toggle",s),t.toggleClass(this.el,"jw-button-color",!s),this.isActive=o||s,o?(t.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener).on("click",this.toggleOpenStateListener),o=r(e),e=t.createElement(o),this.addContent(e),this.contentUI=new i(this.content).on("click tap",this.selectListener)):s&&this.iconUI.on("click tap",this.toggleValueListener),this.selectItem(a)},toggleValue:function(){this.trigger("toggleValue")},select:function(e){e.target.parentElement===this.content&&(e=t.classList(e.target),e=n.find(e,(function(e){return 0===e.indexOf("jw-item")})))&&(this.trigger("select",parseInt(e.split("-")[2])),this.closeTooltipListener())},selectItem:function(e){if(this.content)for(var n=0;n<this.content.children.length;n++)t.toggleClass(this.content.children[n],"jw-active-option",e===n);else t.toggleClass(this.el,"jw-off",0===e);var i;this.isHDMenu()&&this.list&&2<=this.list.length&&(i=this.list[e].label,t.getElementsByClassName("jw-hd-label",this.el)[0].innerHTML=i),this.isCCMenu()&&this.list&&2<=this.list.length&&this.list[e]&&(t.getElementsByClassName("jw-cc-label",this.el)[0].innerHTML=this.list[e].label),this.isPlayrateMenu()&&this.list&&this.list[e]&&(t.getElementsByClassName("jw-playrate-label",this.el)[0].innerHTML=this.list[e].label),this.isQualityChange()&&this.list&&2<=this.list.length&&(i=this.list[e].label,t.getElementsByClassName("jw-qualityChange-label",this.el)[0].innerText=i),this.isLangMenu()&&this.list&&2<=this.list.length&&(i=this.list[e].label,t.getElementsByClassName("jw-lang-label",this.el)[0].innerText=i)},reset:function(){t.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()},isHDMenu:function(){return t.hasClass(this.el,"jw-icon-hd")},isPlayrateMenu:function(){return t.hasClass(this.el,"jw-icon-playrate")},isCCMenu:function(){return t.hasClass(this.el,"jw-icon-cc")},isQualityChange:function(){return t.hasClass(this.el,"jw-icon-qualityChange")},isLangMenu:function(){return t.hasClass(this.el,"jw-icon-lang")},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}})}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <li class='jw-text jw-option jw-item-"+a("function"==typeof(n=null!=(n=o(n,"index")||r&&o(r,"index"))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:3,column:45},end:{line:3,column:55}}}):n)+" jw-reset'>"+a(e.lambda(null!=t?o(t,"label"):t,t))+"</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<ul class="jw-menu jw-background-color jw-reset">\n'+(null!=(n=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:4},end:{line:4,column:13}}}))?n:"")+"</ul>"},useData:!0})},function(e,t,n){n=[n(1),n(2),n(40),n(14),n(236)],t=function(e,t,n,i,r){return n.extend({setup:function(n,r,a,o){this.selectedIndex=r,this.playListTitle="播放列表",a&&o&&o[a]&&(this.lang=a,this.languages=o,this.setPlayListLang(n)),this.iconUI||(this.iconUI=new i(this.el,{useHover:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.onSelect.bind(this)),this.reset(),n=t.isArray(n)?n:[],e.toggleClass(this.el,"jw-hidden",n.length<2),2<=n.length&&(this.iconUI=new i(this.el,{useHover:!0}).on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener).on("click",this.toggleOpenStateListener),a=this.menuTemplate(n,r),o=e.createElement(a),this.addContent(o),this.contentUI=new i(this.content),this.contentUI.on("click tap",this.selectListener)),this.originalList=n},menuTemplate:function(n,i){return n=t.map(n,(function(t,n){var r="";return t.title&&(r=(t=e.createElement(t.title)).textContent||t.data),{active:n===i,label:n+1+".",title:r}})),r({title:this.playListTitle,list:n})},onSelect:function(n){"UL"!==(n=n.target).tagName&&("LI"!==n.tagName&&(n=n.parentElement),n=e.classList(n),n=t.find(n,(function(e){return 0===e.indexOf("jw-item")})))&&(this.trigger("select",parseInt(n.split("-")[2])),this.closeTooltip())},selectItem:function(e){this.setup(this.originalList,e,this.lang,this.languages)},changeLang:function(e){this.lang=e,this.setup(this.originalList,this.selectedIndex,e,this.languages)},setPlayListLang:function(e){let t=this.lang,n=this.languages;t&&n[t]&&(e.forEach((e=>{e.lineTextKey&&n[t][e.lineTextKey]&&(e.title=n[t][e.lineTextKey]),e.sources&&e.sources.forEach((e=>{e.definitionTextKey&&n[t][e.definitionTextKey]&&(e.label=n[t][e.definitionTextKey])}))})),e=n[t].PLAYLIST_TITLE)&&(this.playListTitle=e)},reset:function(){this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(n=a(n,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"active"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.program(4,r,0),data:r,loc:{start:{line:14,column:12},end:{line:24,column:19}}}))?n:""},2:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lambda,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <li class='jw-option jw-text jw-active-option jw-item-"+a("function"==typeof(n=null!=(n=s(n,"index")||r&&s(r,"index"))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:15,column:70},end:{line:15,column:80}}}):n)+' jw-reset\'>\n                    <span class="jw-label jw-reset"><span class="jw-icon jw-icon-play jw-reset"></span></span>\n                    <span class="jw-name jw-reset" title="'+a(o(null!=t?s(t,"title"):t,t))+'">'+a(o(null!=t?s(t,"title"):t,t))+"</span>\n                </li>\n"},4:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lambda,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <li class='jw-option jw-text jw-item-"+a("function"==typeof(n=null!=(n=s(n,"index")||r&&s(r,"index"))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:20,column:53},end:{line:20,column:63}}}):n)+' jw-reset\'>\n                    <span class="jw-label jw-reset">'+a(o(null!=t?s(t,"label"):t,t))+'</span>\n                    <span class="jw-name jw-reset" title="'+a(o(null!=t?s(t,"title"):t,t))+'">'+a(o(null!=t?s(t,"title"):t,t))+"</span>\n                </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-menu jw-playlist-container jw-background-color jw-reset">\n\n    <div class="jw-tooltip-title jw-reset">\n        <span class="jw-icon jw-icon-inline jw-icon-playlist jw-reset"></span>\n        <span class="jw-text jw-reset">'+e.escapeExpression(e.lambda(null!=t?a(t,"title"):t,t))+'</span>\n    </div>\n\n    <ul class="jw-playlist jw-reset">\n'+(null!=(n=a(n,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"list"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:13,column:8},end:{line:25,column:17}}}))?n:"")+"    </ul>\n</div>"},useData:!0})},function(e,t,n){n=[n(40),n(63),n(14),n(1)],t=function(e,t,n,i){return e.extend({constructor:function(r,a){this._model=r,e.call(this,a),this.volumeSlider=new t("jw-slider-volume jw-volume-tip","vertical"),this.addContent(this.volumeSlider.element()),this.addVolumeValueTip(),this.volumeSlider.on("update",(function(e){this.trigger("update",e)}),this),i.removeClass(this.el,"jw-hidden"),new n(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this)},toggleValue:function(){this.trigger("toggleValue")},addVolumeValueTip:function(){var e=document.createElement("div");e.className="jw-volume-value-tip",i.getElementsByClassName("jw-overlay",this.el)[0].appendChild(e),this.valuetip=e}})}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(40),n(1),n(2),n(14)],t=function(e,t,n,i){return e.extend({constructor:function(t){e.call(this,t),this.container.className="jw-overlay-horizontal jw-reset",this.openClass="jw-open-drawer",this.componentType="drawer"},setup:function(e,r){this.iconUI||(this.iconUI=new i(this.el,{useHover:!0,directSelect:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this)),this.reset(),e=n.isArray(e)?e:[],this.activeContents=n.filter(e,(function(e){return e.isActive})),t.toggleClass(this.el,"jw-hidden",!r||this.activeContents.length<2),r&&1<this.activeContents.length&&(t.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener),n.each(e,(function(e){this.container.appendChild(e.el)}),this))},reset:function(){t.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){let i,r,a=n(51);i=[n(40),n(63),n(14),n(1),n(112)],void 0!==(r=function(e,t,n,i,r){return e.extend({constructor:function(o,s){var l,u="zh"==o.get("lang")||"en"==o.get("lang")?o.get("lang"):"zh";for(l in this.danmuLang=a.default[u].DANMU,this._model=o,e.call(this,s),this.initDanmuValue=JSON.parse(JSON.stringify(this._model.get("danmaku"))),this.addDanmTitleEle(),this.danmuEle={opacity:{slider:new t("jw-slider-opacityslider","horizontal",2),type:0,right:"",left:this.danmuLang.DANMUOPACITY,ID:"DANMUOPACITY"},area:{slider:new t("jw-slider-areaslider","horizontal",3),type:1,right:"",left:this.danmuLang.DANMUAREA,ID:"DANMUAREA"},speed:{slider:new t("jw-slider-speedslider","horizontal",3),type:2,right:"",left:this.danmuLang.DANMUSPEED,ID:"DANMUSPEED"},fontSize:{slider:new t("jw-slider-fontslider","horizontal"),type:3,right:null,left:this.danmuLang.DANMUFONT,ID:"DANMUFONT"}},null!=this.initDanmuValue.useMask&&(u={slider:new r(this.initDanmuValue.useMask),type:4,right:null,left:this.danmuLang.INTELLIGENTBLOCKING,ID:"INTELLIGENTBLOCKING"},this.danmuEle=Object.assign(this.danmuEle,{mark:u})),this.danmuEle){var c=this.danmuEle[l];this.addElement(c,l)}null!=this.initDanmuValue.useMask&&setTimeout((()=>{this.danmuEle.mark.slider.addEvent(),this.danmuEle.mark.slider.on("switch",(e=>{this.trigger("switch",e)}))}),10),this.initDanSet(),i.removeClass(this.el,"jw-hidden"),new n(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this)},initDanSet(){var e=this.initDanmuValue.opacity||1,t=(e=this.opacityContent(e),this.initDanmuValue.area||.5),n=(t=this.areaContent(t),this.initDanmuValue.speed||1),i=(n=this.speedContent(n),this.initDanmuValue&&this.initDanmuValue.fontSize?this.initDanmuValue.fontSize:24);return{oVal:e,aVal:t,sVal:n,fzVal:this.fontSizeContent(i)}},addElement(e,t){this.addVolumeValueTip(t);var n=document.createElement("div"),i=(n.className="jw-danmu-slider-left",n.innerHTML=e.left,n.id=e.ID,document.createElement("div"));i.innerHTML=e.right,i.id=e.ID,i.classList.add("jw-danmu-slider-right","jw-danmu-"+t),this.valuetip.appendChild(n),this.valuetip.appendChild(e.slider.element()),this.valuetip.appendChild(i),e.slider.on("update",(function(t){this.setDanMuStyle(e.type,t.percentage)}),this)},toggleValue:function(){this.openTooltip(),this.trigger("toggleValue")},setDanMuStyle(e,t){switch(e){case 0:var n=this.opacityContent(t/100);this.trigger("update",{val:n,type:e});break;case 1:n=this.areaContent(t/100),this.trigger("update",{val:n,type:e});break;case 2:n=this.speedContent(t/100),this.trigger("update",{val:n,type:e});break;case 3:n=parseInt(14*t/50),this.fontSizeContent(n),this.trigger("update",{val:n/24,type:e})}},opacityContent(e){var t=[{title:"0",percentage:0,value:.2,opacity:0},{title:"1 / 3",percentage:33,value:.4,opacity:.33},{title:"2 / 3",percentage:66,value:.7,opacity:.66},{title:"1",percentage:100,value:1,opacity:1}];let n=t[t.length-1];for(let i=0;i<t.length;i++)if(e<=t[i].value){n=t[i];break}return this.danmuEle.opacity.slider.render(n.percentage),setTimeout((()=>{document.getElementsByClassName("jw-danmu-opacity")[0].innerHTML=n.title}),40),n.opacity},areaContent(e){var t=[{title:this.danmuLang.QUARTERSCREEN,percentage:25,value:.25,ID:"QUARTERSCREEN"},{title:this.danmuLang.HALFSCREEN,percentage:50,value:.5,ID:"HALFSCREEN"},{title:this.danmuLang.THREEQUARTERSCREEN,percentage:75,value:.75,ID:"THREEQUARTERSCREEN"},{title:this.danmuLang.FULLSCREEN,percentage:100,value:1,ID:"FULLSCREEN"}];let n=t[0];for(let i=0;i<t.length;i++)if(t[i].value>=e){n=t[i];break}return n=1<=+e?t[t.length-1]:n,this.danmuEle.area.slider.render(n.percentage),setTimeout((()=>{document.getElementsByClassName("jw-danmu-area")[0].innerHTML=n.title,document.getElementsByClassName("jw-danmu-area")[0].id=n.ID}),40),n.value},fontSizeContent(e){let t=null,n=null;var i;return n=e<=12?(t=this.danmuLang.MINIMAL,"MINIMAL"):e<18?(t=this.danmuLang.MODERATE,"MODERATE"):(t=this.danmuLang.GREAT,"GREAT"),this.danmuEle.fontSize.slider.render(100<(i=50*e/14)?100:i),setTimeout((()=>{document.getElementsByClassName("jw-danmu-fontSize")[0].innerHTML=t,document.getElementsByClassName("jw-danmu-fontSize")[0].id=n}),40),e},speedContent(e){var t=[.25,.5,.75,1],n=[25,50,75,100];let i="",r="";for(let a=0;a<t.length;a++)if(e<=t[a]){i=t[a],r=n[a];break}return this.danmuEle.speed.slider.render(r),setTimeout((()=>{document.getElementsByClassName("jw-danmu-speed")[0].innerHTML=i}),40),i},addDanmTitleEle(){var e=i.getElementsByClassName("jw-overlay",this.el)[0],t=document.createElement("div");t.innerHTML=`<div class="jw-danmu-title-wrap" id="DANMUSETTING">${this.danmuLang.DANMUSETTING}</div><div class="jw-danmu-reset" id="jw-danmu-reset">${this.danmuLang.RESET}</div>`,t.classList.add("jw-danmu-title"),e.appendChild(t),setTimeout((()=>{document.getElementById("jw-danmu-reset").addEventListener("click",(()=>{var{oVal:e,aVal:t,sVal:n,fzVal:i}=this.initDanSet();this.trigger("update",{val:e,type:0}),this.trigger("update",{val:t,type:1}),this.trigger("update",{val:n,type:2}),this.trigger("update",{val:i/24,type:3})}))}))},addVolumeValueTip:function(e){var t=document.createElement("div");t.classList.add("jw-danmu-container",e),i.getElementsByClassName("jw-overlay",this.el)[0].appendChild(t),this.valuetip=t},changeLang:function(e){for(var t in this.danmuLang=a.default[e].DANMU,this.danmuLang){var n=document.getElementById(t);n&&(n.innerHTML=this.danmuLang[t]),"RESET"===t&&(document.getElementById("jw-danmu-reset").innerHTML=this.danmuLang[t])}}})}.apply(t,i))&&(e.exports=r)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-switch">\n    <input class="jw-switch-checkbox" id="onoffswitch" type="checkbox">\n    <label class="jw-switch-label" for="onoffswitch">\n        <span class="jw-switch-inner"></span>\n        <span class="jw-switch-switch"></span>\n    </label>\n</div>'},useData:!0})},function(e,t,n){n=[n(2),n(1)],t=function(e,t){function n(e){(this.model=e).on("change:playlistItem",r,this),e.on("change:mediaModel",i,this)}function i(e,t){t.off("change:mediaType",null,this),t.on("change:mediaType",(function(t,n){"audio"===n&&this.setImage(e.get("playlistItem").image)}),this)}function r(e,n){e.get("autostart")&&!t.isMobile()||0<e.get("item")?(this.setImage(null),e.off("change:state",null,this),e.on("change:state",(function(e,t){"complete"!==t&&"idle"!==t&&"error"!==t||this.setImage(n.image)}),this)):this.setImage(n.image)}return e.extend(n.prototype,{setup:function(e){this.el=e,(e=this.model.get("playlistItem"))&&this.setImage(e.image)},setImage:function(n){var i=this.image,r=(i&&(i.onload=null,this.image=null),this.model.off("change:state",null,this),"");e.isString(n)&&(r='url("'+n+'")',(i=this.image=new Image).src=n),t.isPoorIE()?this.el.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+n+'",sizingMethod="scale"':t.style(this.el,{backgroundImage:r})},resize:function(e,n,i){if("uniform"===i){var r,a=e/n,o=this.image,s=null;if(o){if(0===o.width)return r=this,void(o.onload=function(){r.resize(e,n,i)});o=o.width/o.height,Math.abs(a-o)<.09&&(s="cover")}t.style(this.el,{backgroundSize:s})}},element:function(){return this.el}}),n}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(243),n(1),n(2),n(14),n(34)],t=function(e,t,n,i,r){function a(e,t){this.model=e,this.api=t,this.imageUrl="",this.setup(),this.isHide=!0,this.startAdvPlayed=!1,this.timer=null}return n.extend(a.prototype,{setup:function(){var n=e(),i=(this.el=t.createElement(n),this);n=t.isMobile()?"touchstart":"click",t.addEventListener(this.el,n,(function(){window.open(i.imageUrl)}),!1)},loadAdv:function(e){var i,a,o,s,l=this.model.get("imageAdvs");l&&l[e]&&l[e].image&&(a=l[e].image,s=t.getElementsByClassName("jw-media",this.api.getContainer())[0],i=this,o={display:"block","z-index":1e3,width:"100%",height:"100%",top:0,left:0},n.isString(a)?(a=encodeURI(a),o.backgroundImage='url("'+a+'")'):o.backgroundImage="","end"===e&&(o["z-index"]=0),"pause"===e&&(a=s?s.clientHeight:this.model.get("height"),s=s?s.clientWidth:this.model.get("width"),o.width="400px",o.height="300px",o.top=(a-300)/2,o.left=(s-400)/2),r.style(this.el,o),a=t.getElementsByClassName("adv-close",this.el)[0],s=t.getElementsByClassName("adv-countdown",this.el)[0],a.style.display="none",s.style.display="none","start"===e&&(o=l[e].time<=60?l[e].time:60,s.style.display="block",s.innerHTML="广告: "+o+"秒"),"pause"===e&&(s=t.isMobile()?"touchstart":"click",a.addEventListener(s,(function(e){e.cancelBubble=!0,e.stopPropagation(),e.preventDefault(),i.el.style.display="none"}),!1),a.style.display="block"),this.imageUrl=l[e].url,this.element()&&this.api.getContainer().replaceChild(this.el,this.element()),this.isHide=!1)},beginStartAdv:function(){var e,n,i,r;this.startAdvPlayed?this.model.loadVideo():(e=this.model.get("imageAdvs").start,this.loadAdv("start"),n=e.time<=60?e.time:60,i=this.element(),(r=this).timer=setInterval((function(){var e;0<--n?(e="广告: "+n+"秒",t.getElementsByClassName("adv-countdown",i)[0].innerHTML=e):(clearInterval(r.timer),i.style.display="none",r.isHide=!0,r.startAdvPlayed=!0,r.model.loadVideo())}),1e3))},element:function(){var e=this.api.getContainer();return 0<t.getElementsByClassName("jw-adv",e).length?t.getElementsByClassName("jw-adv",e)[0]:this.el},isHidden:function(){return this.isHide},hide:function(){this.isHide=!0,this.element().style.display="none"},resizePauseAdv:function(e,t){r.style(this.element(),{top:(t-300)/2,left:(e-400)/2})},destroy:function(){this.timer&&clearInterval(this.timer),this.timer=null}}),a}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){return'<div class="jw-adv jw-reset">\n    <div class="adv-countdown"></div>\n    <div class="adv-close">X</div>\n</div>'},useData:!0})},function(e,t,n){n=[n(1),n(2),n(34)],t=function(e,t,n){function i(e,t){this.model=e,this.element=t,this.times=0,this.init()}return t.extend(i.prototype,{init:function(){if(e.isMSIE(9))return n.style(this.element,{display:"none"}),!1;var t=this.model.get("marquee").text,i=this.model.get("marquee").color,r=this.model.get("marquee").fontSize;t&&(this.element.innerHTML=t),i&&n.style(this.element,{color:i}),r&&n.style(this.element,{fontSize:r,lineHeight:r+8}),this.reset()},start:function(){if(e.isMSIE(9))return!1;n.style(this.element,{animationPlayState:"running",opacity:1,display:"block"})},stop:function(){this.reset(),n.style(this.element,{animationPlayState:"paused",opacity:0,display:"none"})},pause:function(){"running"===this.element.style.animationPlayState&&n.style(this.element,{animationPlayState:"paused"}),n.style(this.element,{opacity:0})},reset:function(t,i){t=t||this.model.get("width"),i=i||this.model.get("height");var r=this.element,a=(t=this.times%2==0?"marquee1":"marquee2",this);n.animation(r,t+" 18s infinite"),this.randomTop(r,i),e.addEventListener(r,"webkitAnimationIteration",(function(){a.randomTop(r,i)}),!1),e.addEventListener(r,"animationiteration",(function(){a.randomTop(r,i)}),!1),this.times++},randomTop:function(){var e=0;this.model.get("containerHeight")&&(e=this.model.get("containerHeight")),n.style(this.element,{top:100<e?30+Math.random()*(e-100):e/2})}}),i}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(1),n(246),n(2),n(14),n(35)],t=function(e,t,n,i,r){function a(){}return n.extend(a.prototype,{buildArray:function(){var t,i=r.split("+")[0],a={items:[]};return(t=this.model.get("rightclick"))&&n.isArray(t)&&0<t.length?n.each(t,(function(e){a.items.push({title:e.title,link:e.link})})):a.items.push({title:"About Cyber Player "+i,link:"https://bce.baidu.com/doc/MCT/Web-SDK.html#.E6.92.AD.E6.94.BE.E5.99.A8.20Web.20SDK.20.E7.AE.80.E4.BB.8B"}),(t=this.model.get("provider"))&&0<=t.name.indexOf("flash")&&(i="Flash Version "+e.flashVersion(),a.items.push({title:i,link:"http://www.adobe.com/software/flash/about/"})),a},buildMenu:function(){var n=this.buildArray();return e.createElement(t(n))},updateHtml:function(){this.el.innerHTML=this.buildMenu().innerHTML},rightClick:function(e){return this.lazySetup(),this.mouseOverContext||(this.hideMenu(),this.showMenu(e)),!1},getOffset:function(t){var n=t.target,i=t.layerX||t.offsetX,r=t.layerY||t.offsetY;if(e.isIE()&&(e.hasClass(n,"jw-video")||e.hasClass(n,"jw-warning")))return{x:i,y:r+40};for(;n!==this.playerElement;)i+=n.offsetLeft,r+=n.offsetTop,n=n.parentNode;return{x:i=i<=this.playerElement.clientWidth?i:this.playerElement.clientWidth,y:r=r<=this.playerElement.clientHeight?r:this.playerElement.clientHeight}},showMenu:function(t){return t=this.getOffset(t),this.el.style.left=t.x+"px",this.el.style.top=t.y+"px",e.addClass(this.playerElement,"jw-flag-rightclick-open"),e.addClass(this.el,"jw-open"),!1},hideMenu:function(){this.mouseOverContext||(e.removeClass(this.playerElement,"jw-flag-rightclick-open"),e.removeClass(this.el,"jw-open"))},lazySetup:function(){this.el||(this.el=this.buildMenu(),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.model.on("change:provider",this.updateHtml,this),this.elementUI=new i(this.el,{useHover:!0}).on("over",(function(){this.mouseOverContext=!0}),this).on("out",(function(){this.mouseOverContext=!1}),this))},setup:function(t,n,i){this.playerElement=n,this.model=t,this.mouseOverContext=!1,this.layer=i,e.isPoorIE()||(n.oncontextmenu=this.rightClick.bind(this))},addOffListener:function(t){e.addEventListener(t,"mousedown",this.hideMenuHandler),e.addEventListener(t,"touchstart",this.hideMenuHandler),e.addEventListener(t,"pointerdown",this.hideMenuHandler)},removeOffListener:function(t){e.removeEventListener(t,"mousedown",this.hideMenuHandler),e.removeEventListener(t,"touchstart",this.hideMenuHandler),e.removeEventListener(t,"pointerdown",this.hideMenuHandler)},destroy:function(){this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model.off("change:provider",this.updateHtml),this.model=null)}}),a}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({1:function(e,t,n,i,r){var a,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li class="jw-reset'+(null!=(a=c(n,"if").call(s,null!=t?c(t,"featured"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:27},end:{line:4,column:62}}}))?a:"")+'">\n            <a href="'+u("function"==typeof(o=null!=(o=c(n,"link")||(null!=t?c(t,"link"):t))?o:l)?o.call(s,{name:"link",hash:{},data:r,loc:{start:{line:5,column:21},end:{line:5,column:29}}}):o)+'" class="jw-reset" target="_blank">\n'+(null!=(a=c(n,"if").call(s,null!=t?c(t,"showLogo"):t,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:16},end:{line:8,column:23}}}))?a:"")+"                "+u("function"==typeof(o=null!=(o=c(n,"title")||(null!=t?c(t,"title"):t))?o:l)?o.call(s,{name:"title",hash:{},data:r,loc:{start:{line:9,column:16},end:{line:9,column:25}}}):o)+"\n            </a>\n        </li>\n"},2:function(e,t,n,i,r){return" jw-featured"},4:function(e,t,n,i,r){return'                <span class="jw-icon jw-rightclick-logo jw-reset"></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-rightclick jw-reset">\n    <ul class="jw-reset">\n'+(null!=(n=a(n,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"items"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:4},end:{line:12,column:13}}}))?n:"")+"    </ul>\n</div>"},useData:!0})},function(e,t,n){n=[n(2),n(1)],t=function(e,t){function n(e){this.model=e,this.model.on("change:playlistItem",this.playlistItem,this)}return e.extend(n.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(e){this.el=e,e=this.el.getElementsByTagName("div"),this.title=e[0],this.description=e[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(e){var n,i={paddingLeft:0,paddingRight:0},r=e.get("controls"),a=e.get("dock"),o=e.get("logo");o&&(n=+(""+o.margin).replace("px",""),e=e.get("logoWidth")+(isNaN(n)?0:n),"top-left"===o.position?i.paddingLeft=e:"top-right"===o.position&&(i.paddingRight=e)),r&&a&&a.length&&(n=56*a.length,i.paddingRight=Math.max(i.paddingRight,n)),t.style(this.el,i)},playlistItem:function(e,t){var n,i;e.get("displaytitle")||e.get("displaydescription")?(i=n="",t.title&&e.get("displaytitle")&&(n=t.title),t.description&&e.get("displaydescription")&&(i=t.description),this.updateText(n,i)):this.hide()},updateText:function(e,t){this.title.innerHTML=e,this.description.innerHTML=t,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),n}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(249),n(2),n(16),n(6)],t=function(e,t,n,i){function r(e){return!e||"string"==typeof e&&("#fff"===(e=e.toLowerCase())||"#ffffff"===e)}function a(){return{disabled:!1,blocked:[],fontSize:24,fontSizeScale:1,opacity:1,speed:1,area:.5,bottomUp:!1,colors:["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#CC0273","#222222","#FFFFFF"],duration:5,items:[],zIndex:5,maxPerinsert:20,poolSize:50,useMask:!1,isDefaultColor:r,discard:e=>!1}}function o(e,n){this.el,this.opts,this.enabled=!1,this.paused=!1,this.track=0,this.trackHeight=0,this.timer,this._bulletPool=[],this._aliveBullets=new Set,this._scrollBullets=[],this._topBullets=[],this._bottomBullets=[],this._items=[],this._pos=0,this._prevPauseTime=0,this.opts=t.extend(a(),n.get("danmaku")),this.playerEl=e,this._model=n,this._init(),this.opacityStyleObj={0:{class:"jw-danmaku-opacity-4",value:"0"},1:{class:"jw-danmaku-opacity-1",value:"1"},.33:{class:"jw-danmaku-opacity-3",value:"0.33"},.66:{class:"jw-danmaku-opacity-2",value:"0.66"}},this.curOpacityStyleObj=null}return t.extend(o.prototype,{_init:function(){var e=document.createElement("div");e.classList.add("jw-danmaku"),this.el=this.playerEl.appendChild(e),this.el.style.zIndex=String(this.opts.zIndex),this.el.style.opacity=this.opts.opacity,this._items=Array.isArray(this.opts.items)?this.opts.items:[],this.timer={_prevPauseTime:0,_pausedTime:0,_paused:!1,now(){return((this._paused?this._prevPauseTime:Date.now())-this._pausedTime)/1e3},play(){this._paused&&(this._pausedTime+=Date.now()-this._prevPauseTime,this._paused=!1)},pause(){this._paused||(this._prevPauseTime=Date.now(),this._paused=!0)}},this.opts.disabled||this.enable(),setTimeout((()=>{this._updateTrack()}))},getWidth(){return this.playerEl.getBoundingClientRect().width},getCurrentTime(){return this._model.get("position")},getPlaybackRate(){return this._model.get("playbackRate")},getFontSize(){return this.opts.fontSize*this.opts.fontSizeScale},getSpeedScale(){return this.getPlaybackRate()*this.opts.speed},getDuration(){return this._model.get("duration")},getItems(){return this._items},isPlaying(){return this._model.get("state")===n.PLAYING},_createBullet(t,n){let i=this._bulletPool.pop();return i?i.init(t,n):i=new e(this.el,this,t,n),this._aliveBullets.add(i),i},_unmountBullet(e){e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el)},_getShortestTrack(){let e=this._scrollBullets[0];if(!e||e.ended)return[0];for(let t,n=1;n<this.track;++n){if(!(t=this._scrollBullets[n])||t.ended)return[n];e.showAt>t.showAt&&(e=t)}return[e.track,e]},_getEmptyTrack(e,t){for(let n=0;n<this.track;++n)if(!t[n]||t[n]<=e)return n;return-1},_shouldDiscard(e){return!(!this.opts.blocked.includes(e.type||"scroll")&&!this.opts.discard(e)&&(!e.color||!this.opts.blocked.includes("color")||this.opts.isDefaultColor(e.color)))},_fire(){if(this.enabled&&this.isPlaying){this.paused&&this.start();var e=this.getCurrentTime(),t=e-.5,n=e+.5,i=this.timer.now(),r=this._items.length,a=this.opts.maxPerinsert;for(let e,o=0;this._pos<r;this._pos++)if(!((e=this._items[this._pos]).time<t)){if(e.time>n)break;if(!this._shouldDiscard(e)){if(!this._insert(e,i))break;if(++o>a)break}}}},_updateTrack(){var e=this.playerEl.getBoundingClientRect().height;this.trackHeight=this.getFontSize()+5,this.track=Math.floor(e*this.opts.area/this.trackHeight)},_handleSeeked(){this.clearScreen(),this._pos=0},_handleAddMask(e){if(this.opts.useMask){let t=(new TextDecoder).decode(e.data);t=(t=t.replaceAll("\n"," ")).replaceAll("#","%23"),this.el.setAttribute("style",t?`-webkit-mask-image: url('data:image/svg+xml;utf8,${t}')`:"")}},_handleSeekStart(){this.el.setAttribute("style","")},_clearMask(){this.el.setAttribute("style","")},_insert(e,t){if(!e.type||"scroll"===e.type){let[i,r]=this._getShortestTrack();var n=!e.force&&r&&r.showAt>t+2;return!n&&(this._scrollBullets[i]=this._createBullet(e,{track:i,prev:n?void 0:r}),!0)}n="top"===e.type?this._topBullets:this._bottomBullets;let i=this._getEmptyTrack(t,n);return-1!==(i=-1===i&&e.force?0:i)&&(n[i]=this._createBullet(e,{track:i}).endAt,!0)},recycleBullet(e){this._bulletPool.length>this.opts.poolSize?this._unmountBullet(e):this._bulletPool.push(e),this._aliveBullets.delete(e),"scroll"===e.type&&this._scrollBullets[e.track]===e&&(this._scrollBullets[e.track]=void 0)},send(e){var n;this.enabled&&(void 0===e.time&&(e.time=this.getCurrentTime()),e=t.extend({isMe:!0,force:!0},e),n=this.addItem(e),this._model.mediaController.trigger(i.JWPLAYER_DANMAKU_SEND,{data:e}),this._pos>n)&&this._insert(e,this.timer.now())},start(){this.isPlaying&&(this.timer.play(),this._aliveBullets.forEach((e=>e.run(this._prevPauseTime))),this.paused=!1,this.getCurrentTime()>=this.getDuration())&&(this._handleSeeked(),this._clearMask())},pause(){this._prevPauseTime=this.timer.now(),this.timer.pause(),this._aliveBullets.forEach((e=>e.pause(this._prevPauseTime))),this.paused=!0},addItem(e){if(null==e.time)return-1;var t=this._items.length;if(!t||e.time>=this._items[t-1].time)return this._items.push(e),t;if(e.time<=this._items[0].time)return this._items.unshift(e),0;let n=0;for(let i=0;i<t;i++)if(this._items[i].time>e.time){n=1;break}return this._items.splice(n,0,e),n},appendItems(e){this._items=this._items.concat(e)},resetItems(e){this._items=e,this._pos=0},updateOpacity(e=this.opts.opacity){this.curOpacityStyleObj&&this.el.classList.remove(this.curOpacityStyleObj.class),this.curOpacityStyleObj=this.opacityStyleObj[String(e)],this.el.classList.add(this.curOpacityStyleObj.class),this.el.style.opacity=String(e)},updateFontSize(e=this.opts.fontSizeScale){this.opts.fontSizeScale=e,this._updateTrack()},updateArea(e){[.25,.5,.75,1].includes(e)&&(this.opts.area=e,this._updateTrack())},updateBottomUp(e){this.opts.bottomUp=e,this._aliveBullets.forEach((t=>t.updateScrollY(e)))},updateSpeed(e){this.opts.speed=e},resetOptions(){this.opts=t.extend(a(),this._model.get("danmaku")),this.updateOpacity(),this.updateFontsize(),this.updateBottomUp(this.opts.bottomUp)},clearScreen(){Array.from(this._aliveBullets).forEach((e=>e.end())),this._topBullets=[],this._bottomBullets=[]},enable(){this.enabled||(this.enabled=!0,this._model&&(this._model.mediaController.on("seek",this._handleSeeked,this),this._model.mediaController.on("sei_info",this._handleAddMask,this),this._model.mediaController.on("seekStart",this._handleSeekStart,this),this._model.on("change:position",this._fire,this)))},disable(){this.enabled=!1,this.clearScreen(),this._model&&(this._model.mediaController.off("seek",this._handleSeeked,this),this._model.mediaController.off("sei_info",this._handleAddMask,this),this._model.mediaController.off("seekStart",this._handleSeekStart,this),this._model.off("change:position",this._fire,this))},dispose(){this.disable(),this._bulletPool=null,this._aliveBullets=null,this._scrollBullets=null,this._topBullets=null,this._bottomBullets=null,this._items=null,this.el=null,this.opts=null},updateUseMask(e){(this.opts.useMask=e)||this.el.setAttribute("style","")}}),o}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){let t="jw-danmaku-item";function n(e,n,i,r){this.el=e.appendChild(document.createElement("div")),this.container=e,this.el.className=t,this.type="scroll",this.left=0,this.width=0,this.length=0,this.showAt=0,this.startAt=0,this.endAt=0,this.speed=0,this.track=0,this.ended=!1,this.color="",this.danmaku=n,this.end=this.end.bind(this),this.init(i,r)}return e.extend(n.prototype,{init(e,t){var n,i;return this.el.textContent=e.text,this.type=e.type||"scroll",this.track=t.track,e.color&&(this.el.style.color=this.color=e.color),e.isMe&&this.el.classList.add("jw-danmaku-item-me"),(e=this.el.style).fontSize=this.danmaku.getFontSize()+"px",this.startAt=this.danmaku.timer.now(),"scroll"===this.type?(this.el.addEventListener("transitionend",this.end),n=this.el.getBoundingClientRect(),this.width=n.width+20,n=this.danmaku.getWidth(),t=t.prev,this.left=n,this.speed=this.danmaku.getSpeedScale()*(n+this.width)/this.danmaku.opts.duration,t&&!t.ended&&(0<=(i=t.length-n-(this.startAt-t.startAt)*t.speed)?(this.speed=t.speed,this.left+=i):(i=this.danmaku.getWidth()/(t.endAt-this.startAt),this.speed>i&&(this.speed=i))),this.length=this.left+this.width,t=this.length/this.speed,this.showAt=this.startAt+(this.length-n)/this.speed,this.endAt=this.startAt+t,this.updateScrollY(),e.left=this.left+"px",e.transition=`transform ${t}s linear`,e.transform=`translate3d(-${this.length}px,0,0)`):(e[this.type]=this._pos(),this.el.classList.add("jw-danmaku-item-center"),i=this.danmaku.getSpeedScale()*this.danmaku.opts.duration,this.endAt=this.startAt+i,this.centerTimer=setTimeout(this.end.bind(this),1e3*i)),this.ended=!1,this.show(),this.danmaku.paused&&this.pause(this.startAt),this},_pos(){return this.track*this.danmaku.trackHeight+2+"px"},updateScrollY(e=this.danmaku.opts.bottomUp){var t;"scroll"===this.type&&((t=this.el.style).top=t.bottom="",t[e?"bottom":"top"]=this._pos())},end(){this.el.removeEventListener("transitionend",this.end),clearTimeout(this.centerTimer),this.el.style.cssText="",this.color="",this.el.className=t,this.ended=!0,this.hide(),this.danmaku.recycleBullet(this)},show(){this.el.style.visibility=""},hide(){this.el&&this.container.contains(this.el)&&this.container.removeChild(this.el)},pause(e){var t;"scroll"===this.type?((t=this.el.style).transition="transform 0s linear",t.transform=`translate3d(-${(e-this.startAt)*this.speed}px,0,0)`):clearTimeout(this.centerTimer)},run(e){var t;"scroll"===this.type?((t=this.el.style).transition=`transform ${this.endAt-e}s linear`,t.transform=`translate3d(-${this.length}px,0,0)`):this.centerTimer=setTimeout(this.end.bind(this),1e3*(this.endAt-e))}}),n}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="'+e.escapeExpression("function"==typeof(n=null!=(n=a(n,"id")||(null!=t?a(t,"id"):t))?n:e.hooks.helperMissing)?n.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:r,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):n)+'" class="jwplayer jw-reset" tabindex="0">\n    <div class="jw-aspect jw-reset"></div>\n    <div class="jw-media jw-reset"></div>\n    <div class="jw-preview jw-reset"></div>\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset"></div>\n        <div class="jw-title-secondary jw-reset"></div>\n    </div>\n    <div class="jw-overlays jw-reset"></div>\n    <div class="jw-controls jw-reset"></div>\n    <div class="jw-warning jw-reset">\n        用户鉴权失败，请先<a target="_blank" href="http://bce.baidu.com">注册</a>成为百度智能云用户\n    </div>\n    <div class="jw-marquee">百度云</div>\n</div>'},useData:!0})},function(e,t,n){let i,r,a=n(51);i=[n(1),n(252)],void 0!==(r=function(e,t){return function(n){var i;return n="zh"==n.get("lang")||"en"==n.get("lang")?n.get("lang"):"zh",this.performanceLang=a.default[n].PERFORMANCE,this.container=null,this.setup=function(n){this.container=n,i=e.createElement(t(this.performanceLang)),n.appendChild(i)},this.setData=e=>{for(var t in e){var n=document.getElementById("performance-"+t);n&&(n.innerText=e[t])}},this.changeLang=function(e){this.performanceLang=a.default[e].PERFORMANCE,this.reset(),this.setup(this.container)},this.reset=function(){this.container.removeChild(i),i=null},this.destroy=function(){this.reset(),this.container=null},this}}.apply(t,i))&&(e.exports=r)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.lambda,o=e.escapeExpression;return e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},'<ul id="performance-info" class="performance-info  jw-reset">\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"FORMAT"):t,t))+'</span>\n        <span id="performance-playStyle"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"DECODEEFFICIENCY"):t,t))+'</span>\n        <span>\n             <span id="performance-decodeFrameRate"></span>\n             frames/s\n        </span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"DECODECONSUMPTION"):t,t))+'</span>\n        <span>\n             <span id="performance-decodeTime"></span>\n             ms\n        </span>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"FPS"):t,t))+'</span>\n        <span id="performance-frameRate"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"RESOLUTION"):t,t))+'</span>\n        <span id="performance-resolution">\n            <span id="performance-width"></span>\n            &nbsp; * &nbsp;\n            <span id="performance-height"></span>\n        </span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"ENCODETYPE"):t,t))+'</span>\n        <span id="performance-code"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"BUFFEREND"):t,t))+'</span>\n        <span id="performance-buffer"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+o(a(null!=t?e(t,"FIRSETIME"):t,t))+'</span>\n        <span id="performance-firstFrameTime"></span>\n    </li>\n</ul>'},useData:!0})},function(e,t,n){n=[n(1)],t=function(e){return class{constructor(e,t,n){this.watermarkOptions=Object.assign({},this.defaultConfig(),e.get("watermark")),this.isLeftToRight=!0,this.isTopToBottom=!0,this.watermarkEle=null,this.contentEle=null,this.playerId=n,this.container=t,this.undateChild(),this.timer=null,this.updateStyle()}getTag(){return{container:this.playerId+"-jw-watermark-container jw-watermark-container",content:this.playerId+"-jw-watermark-content jw-watermark-content"}}defaultConfig(){return{type:"text",speed:0,content:"",opacity:.5,"font-size":"12px",color:"#bdbdbd",left:"0%",top:"70%",rotate:"30deg"}}render(){return`<div class="${this.getTag().container}" >${this.renderContent()}</div>`}renderContent(){var{type:e,content:t}=this.watermarkOptions;return"image"==e?`<img class="${this.getTag().content}" style=${this.setStyle()} src=${this.setImage(t)} />`:`<div class="${this.getTag().content}" style=${this.setStyle()}>${t}</div>`}setImage(e){return 0==e.indexOf("http")?e:0==e.indexOf("://")?document.location.protocol+e:0==e.indexOf("//")?document.location.protocol+":"+e:document.location.protocol+"://"+e}setStyle(){let{left:e,top:t,rotate:n,speed:i,width:r}=this.watermarkOptions;if(0<i&&this.contentEle){var{offsetLeft:a,clientWidth:o,clientHeight:s,offsetTop:l}=this.contentEle;let r=this.watermarkEle.clientWidth,h=this.watermarkEle.clientHeight;var u,c=Math.abs(o/2*Math.sin(parseFloat(n)*(2*Math.PI/360)));e.includes("px")&&(e=parseFloat(e)/r*100),t.includes("px")&&(t=parseFloat(t)/h*100),parseFloat(e)<100&&0<=parseFloat(e)&&this.isLeftToRight&&a+o<r||parseFloat(e)<=0?(r-o<(a=parseFloat(e)+ +i)/100*r?(u=parseInt((r-o)/r*100),this.isLeftToRight=!1):(u=a,this.isLeftToRight=!0),this.watermarkOptions.left=e=u+"%"):(this.watermarkOptions.left=e=parseFloat(e)-+i+"%",this.isLeftToRight=!1),parseFloat(t)<100&&0<=parseFloat(t)&&this.isTopToBottom&&l+s+c<h||parseFloat(t)<=0?(a=h<(o=parseFloat(t)+ +i)/100*h+s?parseFloat((h-s)/h*100):o,this.watermarkOptions.top=t=a+"%",this.isTopToBottom=!0):0<l-c?(this.watermarkOptions.top=t=parseFloat(t)-+i+"%",this.isTopToBottom=!1):this.isTopToBottom=!0}let h="";for(var d in this.watermarkOptions)this.watermarkOptions[d]&&"type"!=d&&"content"!=d&&(h+=`${d}:${this.watermarkOptions[d]};`);return h}updateStyle(){this.timer&&clearInterval(this.timer),this.timer=null,this.timer=setInterval((()=>{this.undateChild()}),50)}undateChild(){var t,n,i;this.watermarkOptions.content&&(t=document.getElementsByClassName(this.getTag().container),0==(n=document.getElementsByClassName(this.getTag().content)).length&&0!=t.length&&(this.contentEle=e.createElement(this.renderContent()),t[0].appendChild(this.contentEle)),0!=n.length&&(this.contentEle=n[0],n[0].style=this.setStyle(),i=this.watermarkOptions.textShadow)&&(n[0].style.textShadow=i),0==t.length)&&(this.watermarkEle=e.createElement(this.render()),this.container.appendChild(this.watermarkEle))}setWatermarkOptions(e){e&&e.content&&e.content!=this.watermarkOptions.content&&this.watermarkEle.removeChild(this.contentEle),this.watermarkOptions=Object.assign(this.watermarkOptions,e)}destroy(){this.timer&&clearInterval(this.timer),this.timer=null,this.container&&this.container.removeChild(this.watermarkEle)}}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(64),n(255),n(1)],t=function(e,t,n){return e.extend({constructor:function(e,t){this.config=e,this.className=t,this.container=null,this.closeIconEl=null},setup:function(e){this.container=e,this.el=n.createElement(t(this.config)),this.el.classList.add(this.className),this.container.appendChild(this.el),this.addEvent(),this.config&&this.config.timeout&&setTimeout(function(){this.destroy()}.bind(this),this.config.timeout)},addEvent:function(){var e="closeToastTips-"+this.config.playerId;this.closeIconEl=document.getElementById(e),this.closeIconEl&&this.closeIconEl.addEventListener("click",this.destroy.bind(this))},element:function(){return this.el},destroy:function(){try{this.container&&(this.container.removeChild(this.el),this.el=null,this.closeIconEl&&this.closeIconEl.removeEventListener("click",this.destroy),this.classList=null)}catch(e){}}})}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-toast">\n  <p>'+a(e.lambda(null!=t?o(t,"text"):t,t))+'&nbsp;&nbsp;</p>\n  <span\n    class="jw-icon jw-icon-close-small"\n    id="closeToastTips-'+a("function"==typeof(a=null!=(a=o(n,"playerId")||(null!=t?o(t,"playerId"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"playerId",hash:{},data:r,loc:{start:{line:5,column:23},end:{line:5,column:35}}}):a)+'"\n  ></span>\n</div>\n'},useData:!0})},function(e,t,n){n=[n(257)],t=function(e){return function(t,n,i,r){return e({id:t,skin:n,title:i,body:r})}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=n(13),e.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,r){var a,o,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,u="function",c=e.escapeExpression;return e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},'<div id="'+c(typeof(o=null!=(o=e(n,"id")||(null!=t?e(t,"id"):t))?o:l)==u?o.call(s,{name:"id",hash:{},data:r,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):o)+'"class="jw-skin-'+c(typeof(o=null!=(o=e(n,"skin")||(null!=t?e(t,"skin"):t))?o:l)==u?o.call(s,{name:"skin",hash:{},data:r,loc:{start:{line:1,column:31},end:{line:1,column:39}}}):o)+' jw-error jw-reset">\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset">'+(null!=(a=typeof(o=null!=(o=e(n,"title")||(null!=t?e(t,"title"):t))?o:l)==u?o.call(s,{name:"title",hash:{},data:r,loc:{start:{line:3,column:47},end:{line:3,column:58}}}):o)?a:"")+'</div>\n        <div class="jw-title-secondary jw-reset">'+c(typeof(o=null!=(o=e(n,"body")||(null!=t?e(t,"body"):t))?o:l)==u?o.call(s,{name:"body",hash:{},data:r,loc:{start:{line:4,column:49},end:{line:4,column:57}}}):o)+'</div>\n    </div>\n\n    <div class="jw-error-icon-container  jw-reset">\n        <div class="jw-error-display-icon-container  jw-background-color jw-reset">\n            <div class="jw-icon jw-error-icon-display jw-reset"></div>\n        </div>\n    </div>\n</div>\n\n'},useData:!0})},function(e,t,n){n=[n(98),n(35),n(259),n(17)],t=function(e,t,n,i){var r,a,o,s,l={},u=document.getElementsByTagName("script")[0].parentNode,c=(window.__LOG_API__,0),h=0,d=!1,f=(new Date).getTime()+"",p=!1;function m(e){var t=(s=new Date).getFullYear(),n=s.getMonth()+1,i=s.getDate(),r=s.getHours(),a=s.getMinutes(),o=s.getSeconds(),s=s.getMilliseconds();return t=t+"-"+(n<10?"0"+n:n)+"-"+(i<10?"0"+i:i)+" "+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o),e?t+"."+s:t}function g(){return{flashVersion:e.flashVersion(),cyberPlayerVersion:t,ak:a.ak||"",provider:r.get("provider")?r.get("provider").name:"",config:""}}function _(e){var t;p||(t=e.action,delete e.action,e.sendTime=m(),e=function(e){var t,n=[];for(t in e)"object"==typeof e[t]?n.push(t+"="+encodeURIComponent(JSON.stringify(e[t]))):n.push(t+"="+e[t]);return n.join("&")}(e),o&&u.removeChild(o),(o=document.createElement("script")).setAttribute("type","text/javascript"),o.src=__LOG_API__+"/v1/sdk-player"+t+"?"+e,u.insertBefore(o,u.getElementsByTagName("script")[0]))}return function(e,o){if(a=(r=o).getConfiguration(),__DEBUG__||!1===a.withLog)return!1;var u,y,v,A=0;o=r.get("file")||r.getCurrentItem()&&r.getCurrentItem().file,this.APM=new n.default({url:o,version:"w"+t});let E=this;this.APM.onDoTask=()=>{if(e.getState&&e.getState()){"playing"==e.getState()&&this.APM.onPlayCount();let n=0;var t=window.navigator.connection;t&&t.downlink&&(n=1e3*t.downlink*1e3),this.APM.onNetworkSpeedReport(n)}},new Promise((e=>{fetch(__LOG_API__,{method:"get",mode:"no-cors"}).then((function(t){e(!1)})).catch((function(t){e(!0)}))})).then((e=>{p=e})),e.on("performance",(e=>{e.bitRate&&this.APM.onNetworkSpeedReport(e.bitRate)})),e.on("ready",(()=>{E.APM.onPlayerCreated()})),e.on("meta",(e=>{var t,n=r.get("file")||r.getCurrentItem().file;for(t in E.APM.setPlayConfig({url:n,isLive:e.isLive,decodeMode:e.decodeMode}),E.APM.onFirstFrameRendered(),e.metadata)l[t]=e.metadata[t];l.cdn_ip&&_({action:"/user/web/cdn",url:n,cdn:l.cdn_ip})})),e.on("beforePlay",(function(){d=p=!1,u=setInterval((function(){A+=100}),100)})),e.on("play",(function(){d?(clearInterval(u),u=null):(u&&(_({action:"/media/web/available",videoUrl:r.get("file")||r.getCurrentItem().file,type:"play",duration:A,time:m(!0),sessionTime:f,env:g()}),clearInterval(u),u=null),h=r.get("position"),_({action:"/user/web/play",videoUrl:r.get("file")||r.getCurrentItem().file,videoHeight:encodeURIComponent(l.height)||"",videoWidth:encodeURIComponent(l.width)||"",playerHeight:encodeURIComponent(a.height),playerWidth:encodeURIComponent(a.width),duration:l.duration||"",size:l.filesize||"",startPosition:r.get("position"),service:0<this.getDuration()?"vod":"lss",time:m(!0),sessionTime:f,env:g()}),d=!0,s||(s=setInterval((function(){_({action:"/user/web/count",session:f,url:r.get("file")||r.getCurrentItem().file})}),6e4),_({action:"/user/web/count",session:f,url:r.get("file")||r.getCurrentItem().file})))})),e.on("seek",(function(e){c+=e.position-h,h=e.offset,_({action:"/user/web/seek",videoUrl:r.get("file")||r.getCurrentItem().file,from:e.position,to:e.offset,time:m(!0),sessionTime:f,env:g()})})),e.on("pause",(function(){c+=r.get("position")-h,_({action:"/user/web/pause",videoUrl:r.get("file")||r.getCurrentItem().file,time:m(!0),sessionTime:f,env:g()})})),e.on("idle",(function(e){"complete"===e.reason&&(c+=r.get("duration")-h,_({action:"/user/web/end",videoUrl:r.get("file")||r.getCurrentItem().file,playInterval:c,time:m(!0),sessionTime:f,env:g()}))})),e.on("stop",(()=>{p=!0,clearInterval(u),u=null,clearInterval(s),s=null,l.duration&&(c+=r.get("position")-h,E.APM.onPlayEnd(i.PLAYENDSTATUS.NORMAL),_({action:"/user/web/end",videoUrl:r.get("file")||r.getCurrentItem().file,playInterval:c,time:m(!0),sessionTime:f,env:g()}))})),e.on("error",(e=>{clearInterval(u),E.APM.onPlayEnd(i.PLAYENDSTATUS.PLAY_FAIL,e.message),_({action:"/core/web/error",videoUrl:r.get("file")||r.getCurrentItem().file,error:e.code,errorInfo:e.message,time:m(!0),sessionTime:f,env:g()})})),e.on("setupError",(e=>{this.APM.onPlayEnd(i.PLAYENDSTATUS.PLAY_FAIL,e.message),_({action:"/core/web/error",videoUrl:r.get("file")||r.getCurrentItem().file,error:e.code,errorInfo:e.message,time:m(!0),sessionTime:f,env:g()})})),e.on("complete",(()=>{E.APM.onPlayEnded(i.PLAYENDSTATUS.NORMAL,i.PLAYENDMSG.COMPLETE)})),e.on("alive",(function(){y=(new Date).getTime()})),e.on("liveStop",(function(){v=(new Date).getTime(),_({action:"/user/web/end",videoUrl:r.get("file")||r.getCurrentItem().file,playInterval:(v-y)/1e3,time:m(!0),sessionTime:f,env:g()})}));var b,w,T=!0,S=!1,R=0;e.on("alive",(function(){S=!0,T?T=!1:b&&(w=(new Date).getTime()-b,R++,_({action:"/user/web/buffer",session:f,url:r.get("file")||r.getCurrentItem().file,bt:w,bc:R,env:g()}),b=null)})),e.on("noLiveStream",(function(){S&&(b=b||(new Date).getTime())}))}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n.r(t);var i=n(123),r=n.n(i),a=n(17);t.default=class{constructor(e){this.apm=new r.a(e),this.playerCreatedTime=Date.now(),this.BufferingStartTime=null,this.onDoTask=null,this.addEvent(),this.isFirstFrame=!0}addEvent(){this.apm.emitter.on(this.apm.Event.DO_TASK,(()=>{this.onDoTask&&this.onDoTask()}))}setPlayConfig(e){this.apm&&this.apm.setPlayConfig(e)}onPlayerCreated(){this.playerCreatedTime=Date.now(),this.apm&&this.apm.reportEventData({Name:a.Event.EVENT_PLAYER_CREATED,StartTime:this.playerCreatedTime})}onFirstFrameRendered(){var e;this.isFirstFrame&&(this.isFirstFrame=!1,e=Date.now(),this.apm)&&this.apm.reportEventData({Name:a.Event.EVENT_FIRST_FRAME_RENDERED,StartTime:e,Duration:e-this.playerCreatedTime})}onBufferingStart(){var e=this.BufferingStart=Date.now();this.apm&&this.apm.reportEventData({Name:a.Event.EVENT_BUFFER_MID_START,StartTime:e})}onBufferingEnd(){var e=Date.now();this.apm&&this.apm.reportEventData({Name:a.Event.EVENT_BUFFER_MID_END,StartTime:e,Duration:e-this.BufferingStart,EventData:{isFrameChasing:!1}})}onNetworkSpeedReport(e){var t=Date.now();this.apm&&this.apm.reportEventData({Name:a.Event.EVENT_NETWORK_SPEED_REPORT,StartTime:t,EventData:{speed:e}})}onPlayCount(){var e=Date.now();this.apm&&this.apm.reportEventData({Name:a.Event.EVENT_PLAY_COUNT,StartTime:e})}onPlayEnded(e,t){var n=Date.now();this.apm&&this.apm.reportEventData({Name:a.Event.EVENT_PLAY_END_APM,StartTime:n,Code:e,EventData:{detail:t}})}onUpdateCdn(e){var t=Date.now();this.apm&&this.apm.reportEventData({Name:a.Event.EVENT_UPDATE_CDN,StartTime:t,EventData:{cdnIp:e}})}destroy(){this.onPlayEnded(a.PLAYENDSTATUS.NORMAL,a.PLAYENDMSG.DESTROY),this.apm&&this.apm.destroy(),this.apm=null}}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){},function(e,t){},function(e,t,n){n=[n(79),n(2)],t=function(e,t){return function(n,i){t.each(["seek","skipAd","stop","playlistNext","playlistPrev","playlistItem","resize","addButton","removeButton","registerPlugin","attachMedia"],(function(e){n[e]=function(){return i[e].apply(i,arguments),n}})),n.registerPlugin=e.registerPlugin}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2)],t=function(e){return function(t,n){e.each(["buffer","controls","position","duration","fullscreen","volume","mute","item","stretching","playlist","captions","playbackRate","screenshot"],(function(e){var i=e.slice(0,1).toUpperCase()+e.slice(1);t["get"+i]=function(){return n._model.get(e)}})),e.each(["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia","getHlsCurrentLevel","getMediaInfo","VR"],(function(e){t[e]=function(){return n[e]?n[e].apply(n,arguments):null}})),e.each(["setControls","setKeyControls","setFullscreen","setVolume","enableGPU","disableGPU","setMute","setCues","setCaptions","setToken","setThumbnails","setPlaybackRate","setScreenshot","setSeekStep","setCaptureFrameStart","setCaptureFrameEnd","setDanmuStatus","sendDanmu","setPictInPict","setLang","setWatermark","setMirror","setMaxSeekTime","playNext"],(function(e){t[e]=function(){return n[e].apply(n,arguments),t}})),t.getPlaylistIndex=t.getItem}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(2),n(6)],t=function(e,t){return function(n){var i={onSeekFinished:t.JWPLAYER_MEDIA_SEEK_FINISHED,onBufferChange:t.JWPLAYER_MEDIA_BUFFER,onBufferFull:t.JWPLAYER_MEDIA_BUFFER_FULL,onError:t.JWPLAYER_ERROR,onSetupError:t.JWPLAYER_SETUP_ERROR,onFullscreen:t.JWPLAYER_FULLSCREEN,onMeta:t.JWPLAYER_MEDIA_META,onMute:t.JWPLAYER_MEDIA_MUTE,onPlaylist:t.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:t.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:t.JWPLAYER_PLAYLIST_COMPLETE,onReady:t.JWPLAYER_READY,onCoverImageReady:t.JWPLAYER_H265WEB_COVERLOADED,onResize:t.JWPLAYER_RESIZE,onComplete:t.JWPLAYER_MEDIA_COMPLETE,onSeek:t.JWPLAYER_MEDIA_SEEK,onTime:t.JWPLAYER_MEDIA_TIME,onVolume:t.JWPLAYER_MEDIA_VOLUME,onBeforePlay:t.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:t.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:t.JWPLAYER_DISPLAY_CLICK,onControls:t.JWPLAYER_CONTROLS,onQualityLevels:t.JWPLAYER_MEDIA_LEVELS,onQualityChange:t.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:t.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:t.JWPLAYER_CAPTIONS_CHANGED,onAdError:t.JWPLAYER_AD_ERROR,onAdClick:t.JWPLAYER_AD_CLICK,onAdImpression:t.JWPLAYER_AD_IMPRESSION,onAdTime:t.JWPLAYER_AD_TIME,onAdComplete:t.JWPLAYER_AD_COMPLETE,onAdCompanions:t.JWPLAYER_AD_COMPANIONS,onAdSkipped:t.JWPLAYER_AD_SKIPPED,onAdPlay:t.JWPLAYER_AD_PLAY,onAdPause:t.JWPLAYER_AD_PAUSE,onAdMeta:t.JWPLAYER_AD_META,onCast:t.JWPLAYER_CAST_SESSION,onAudioTrackChange:t.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:t.JWPLAYER_AUDIO_TRACKS,onCuepoint:t.JWPLAYER_CUEPOINT,onSeekForwardForbidden:t.JWPLAYER_SEEK_FORWARD_FORBIDDEN,onConnection:t.JWPLAYER_CONNECTING,onAlive:t.JWPLAYER_ALIVE,onNoLiveStream:t.JWPLAYER_NO_LIVE_STREAM,onLiveStop:t.JWPLAYER_LIVE_STOP,onPlaybackRate:t.JWPLAYER_PLAYBACKRATE,onScreenshot:t.JWPLAYER_SCREENSHOT,onCaptureFrameFinished:t.JWPLAYER_CaptureFrameFinished};e.each({onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle",onStop:"stop"},(function(t,i){n[i]=e.partial(n.on,t,e)})),e.each(i,(function(t,i){n[i]=e.partial(n.on,t,e)}))}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){n=[n(35),n(1)],t=function(e,t){function n(){for(var e=t.getElementsByClassName("jw-warning"),n=0;n<e.length;n++)e[n].style.display="block"}function i(e,t){this.config=e,this.api=t}return i.prototype={userCertify:function(){var i,r;return!__DEBUG__&&!1!==this.config.withLog&&(i=this.config.ak||"",/^[a-zA-Z0-9]{32}$/.test(i)||/^[a-zA-Z0-9]{26}$/.test(i)?(i="https://drm.media.baidubce.com/v1/playerAuth?ak="+i+"&player=web-html5-"+e+"&platform="+t.getBrowserInfo()+"&callback="+this._getCallback(),i=encodeURI(i),(r=document.createElement("script")).type="text/javascript",r.src=i,void document.getElementsByTagName("head")[0].appendChild(r)):(n(),!1))},_getCallback:function(){var e="jwplayer_"+(new Date).getTime()+"_"+(1e9*Math.random()>>>0);return window[e]=function(t){try{!(i=t).code||"UNAUTHORIZED"!==i.code&&"BAD_REQUEST"!==i.code||n(),delete window[e]}catch(t){window[e]=null}var i},e}},i}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,n){var i=n(268),r=("string"==typeof i&&(i=[[e.i,i,""]]),{hmr:!0});r.transform=void 0,r.insertInto=void 0,n(272)(i,r),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(269)()).push([e.i,".jw-reset {\n  color: inherit;\n  background-color: transparent;\n  padding: 0;\n  margin: 0;\n  float: none;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  line-height: 1em;\n  list-style: none;\n  text-align: left;\n  text-transform: none;\n  vertical-align: baseline;\n  border: 0;\n  direction: ltr;\n  font-variant: inherit;\n  font-stretch: inherit;\n  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n}\n/*** When not base64 encoded, fallbacks will work so that we won't load both fonts if we don't have to ***/\n/*** TTF is used for support for some older version of Android Stock (4.3 and less) ***/\n/*** https://kekee000.github.io/fonteditor/# icon生成器 ***/\n@font-face {\n  font-family: \"jw-icons\";\n  src: url("+n(270)+') format("woff"), url('+n(271)+') format("truetype");\n  font-weight: normal;\n  font-style: normal;\n}\n.jw-icon-inline,\n.jw-icon-tooltip,\n.jw-icon-display,\n.jw-controlbar .jw-menu .jw-option:before {\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\n/*** ICONS ***/\n.jw-icon-audio-tracks:before {\n  content: "\\E600";\n}\n.jw-icon-buffer:before {\n  content: "\\E601";\n}\n.jw-icon-cast:before {\n  content: "\\E603";\n}\n.jw-icon-cast.jw-off:before {\n  content: "\\E602";\n}\n.jw-icon-cc:before {\n  content: "\\E605";\n}\n.jw-icon-cue:before {\n  content: "\\E606";\n}\n.jw-icon-menu-bullet:before {\n  content: "\\E606";\n}\n.jw-icon-error:before {\n  content: "\\E607";\n}\n.jw-icon-fullscreen:before {\n  content: "\\E608";\n}\n.jw-icon-fullscreen.jw-off:before {\n  content: "\\E613";\n}\n.jw-icon-screenshot:before {\n  content: "\\E619";\n}\n.jw-icon-screenshot.jw-off:before {\n  content: "\\E619";\n}\n.jw-icon-pictureinpicture:before {\n  content: "\\E61C";\n}\n.jw-icon-pictureinpicture.jw-off:before {\n  content: "\\E61C";\n}\n.jw-icon-danmu:before {\n  content: "\\E61A";\n}\n.jw-icon-danmu.jw-off:before {\n  content: "\\E61B";\n}\n.jw-icon-hd:before {\n  content: none;\n}\n.jw-watermark:before,\n.jw-rightclick-logo:before {\n  content: "\\E60B";\n}\n.jw-icon-next:before {\n  content: "\\E60C";\n}\n.jw-icon-pause:before {\n  content: "\\E60D";\n}\n.jw-icon-play:before {\n  content: "\\E60E";\n}\n.jw-icon-prev:before {\n  content: "\\E60F";\n}\n.jw-icon-replay:before {\n  content: "\\E610";\n}\n.jw-icon-volume:before {\n  content: "\\E612";\n}\n.jw-icon-volume.jw-off:before {\n  content: "\\E611";\n}\n.jw-icon-more:before {\n  content: "\\E614";\n}\n.jw-icon-close:before {\n  content: "\\E615";\n}\n.jw-icon-close-small:before {\n  content: "\\E61D";\n}\n.jw-icon-playlist:before {\n  content: "\\E616";\n}\n.jw-icon-barlogo:before {\n  content: "\\E617";\n}\n.jw-icon-barlogo-new:before {\n  content: "\\E618";\n}\n.jw-icon-mirror:before {\n  content: "\\E620";\n  font-weight: 600;\n  font-size: 0.9em;\n  position: relative;\n  bottom: 0.18em;\n}\n.jw-icon-mirror.jw-off:before {\n  content: "\\E621";\n  font-weight: 600;\n}\n.jw-icon-rotate:before {\n  content: "\\E61F";\n  font-size: 1em;\n  position: relative;\n  bottom: 0.15em;\n}\n.jw-icon-rotate.jw-off:before {\n  content: "\\E61E";\n  font-size: 1em;\n}\n.jwplayer {\n  width: 100%;\n  font-size: 16px;\n  position: relative;\n  display: block;\n  min-height: 0;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-family: Arial, Helvetica, sans-serif;\n  background-color: #000;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.jwplayer * {\n  box-sizing: inherit;\n}\n.jwplayer.jw-flag-aspect-mode {\n  height: auto !important;\n}\n.jwplayer.jw-flag-aspect-mode .jw-aspect {\n  display: block;\n}\n.jwplayer .jw-aspect {\n  display: none;\n}\n.jwplayer.jw-no-focus:focus,\n.jwplayer .jw-swf {\n  outline: none;\n}\n.jwplayer.jw-ie:focus {\n  outline: #585858 dotted 1px;\n}\n.jwplayer:hover .jw-display-icon-container {\n  background-color: #333;\n  background: #333;\n  background-size: #333;\n}\n.jw-media,\n.jw-preview,\n.jw-adv,\n.jw-overlays,\n.jw-controls {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n.jwplayer .jw-adv {\n  background-size: 100% 100%;\n  cursor: pointer;\n}\n.jwplayer .jw-adv .adv-countdown {\n  position: absolute;\n  width: 95px;\n  padding-left: 10px;\n  height: 30px;\n  line-height: 30px;\n  background-color: #202020;\n  opacity: 0.7;\n  color: #ee6002;\n  font-size: 14px;\n  top: 0px;\n  right: 0px;\n  display: none;\n}\n.jwplayer .jw-adv .adv-close {\n  position: absolute;\n  height: 22px;\n  line-height: 22px;\n  color: #fff;\n  font-weight: bold;\n  font-size: 14px;\n  width: 20px;\n  top: 0px;\n  right: 5px;\n  display: none;\n  text-align: center;\n}\n.jw-media {\n  overflow: hidden;\n  cursor: pointer;\n}\n.jw-overlays {\n  cursor: auto;\n}\n.jw-media.jw-media-show {\n  visibility: visible;\n  opacity: 1;\n}\n.jw-controls.jw-controls-disabled {\n  display: none;\n}\n.jw-controls .jw-controls-right {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 2em;\n}\n.jw-warning {\n  color: #f00;\n  top: 10px;\n  right: 10px;\n  position: absolute;\n  z-index: 10000;\n  display: none;\n}\n.jw-warning a {\n  color: #108cee;\n}\n.jw-marquee {\n  opacity: 0;\n  color: #fff;\n  width: auto;\n  font-size: 16px;\n  font-weight: bold;\n  white-space: nowrap;\n  position: absolute;\n}\n@-webkit-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-moz-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-o-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-ms-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-webkit-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-moz-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-o-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-ms-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n.jw-text {\n  height: 1em;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 0.75em;\n  font-style: normal;\n  font-weight: normal;\n  color: white;\n  text-align: center;\n  font-variant: normal;\n  font-stretch: normal;\n}\n.jw-plugin {\n  position: absolute;\n  bottom: 2.5em;\n}\n.jw-plugin .jw-banner {\n  max-width: 100%;\n  opacity: 0;\n  cursor: pointer;\n  position: absolute;\n  margin: auto auto 0 auto;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: block;\n}\n.jw-cast-screen {\n  width: 100%;\n  height: 100%;\n}\n.jw-instream {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: none;\n}\n.jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jw-preview,\n.jw-captions,\n.jw-title,\n.jw-overlays,\n.jw-controls {\n  pointer-events: none;\n}\n.jw-overlays > div,\n.jw-media,\n.jw-controlbar,\n.jw-dock,\n.jw-logo,\n.jw-skip,\n.jw-display-icon-container {\n  pointer-events: all;\n}\n.jw-danmaku {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  pointer-events: none;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  mask-position: center;\n  -webkit-mask-repeat: no-repeat;\n  -webkit-mask-size: contain;\n  -webkit-mask-position: center;\n}\n.jw-danmaku-opacity-1 {\n  opacity: 1;\n}\n.jw-danmaku-opacity-2 {\n  opacity: 0.66;\n}\n.jw-danmaku-opacity-3 {\n  opacity: 0.33;\n}\n.jw-danmaku-opacity-4 {\n  opacity: 0;\n}\n.jw-danmaku-item {\n  position: absolute;\n  white-space: nowrap;\n  line-height: 1.125;\n  letter-spacing: 1px;\n  color: #fff;\n  text-shadow: #000000 1px 0px 1px, #000000 0px 1px 1px, #000000 0px -1px 1px, #000000 -1px 0px 1px;\n  will-change: transform;\n}\n.jw-danmaku-item-center {\n  left: 50%;\n  transform: translateX(-50%);\n  will-change: initial;\n  z-index: 1;\n}\n.jw-danmaku-item-me {\n  outline: 2px solid;\n  z-index: 2;\n}\n.jw-danmaku-sendbox {\n  display: flex;\n  align-items: center;\n  margin: 0 10px;\n  padding: 5px 10px;\n  color: white;\n  background: rgba(255, 255, 255, 0.15);\n}\n.jw-danmaku-sendbox input {\n  flex: 1;\n  width: 100px;\n  padding: 0;\n  color: currentColor;\n  background: transparent;\n  border: 0;\n  outline: 0;\n  font-size: 13px;\n}\n.jw-danmaku-sendbox input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n.jw-danmaku-sendbox-btn {\n  color: white;\n  font-size: 12px;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.performance-info {\n  color: #fff;\n  width: 178px;\n  height: 100%;\n  z-index: 8;\n  font-size: 12px;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.5);\n  font-weight: 400;\n  box-sizing: border-box;\n  overflow-y: auto;\n  position: absolute;\n  top: 0;\n}\n.performance-info li {\n  line-height: 35px;\n  color: #fff;\n  display: flex;\n  justify-content: space-between;\n}\n.performance-info #performance-buffer {\n  max-width: 70px;\n  display: inline-block;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  line-height: 35px;\n}\n.jw-watermark-container {\n  left: 0%;\n  top: 0%;\n  width: 100%;\n  height: 100%;\n  display: block;\n  visibility: visible;\n  position: absolute;\n  margin: 0px;\n  padding: 0px;\n}\n.jw-watermark-container .jw-watermark-content {\n  position: absolute;\n  height: fit-content;\n}\n.jw-watermark-container img {\n  width: 20px;\n}\n.jw-toast {\n  width: fit-content;\n  height: fit-content;\n  display: flex;\n  background-color: rgba(0, 0, 0, 0.5);\n  align-items: center;\n  border-radius: 5px;\n  color: #fff;\n  font-size: 14px;\n  padding: 2px 10px;\n  white-space: normal;\n  overflow-wrap: normal;\n  letter-spacing: 0.05em;\n}\n.memory-play-container {\n  position: absolute;\n  bottom: 40px;\n  pointer-events: all;\n  z-index: 1;\n}\n.memory-play-container p {\n  font-weight: 400;\n  color: #fff;\n  opacity: 0.9;\n}\n.memory-play-container .jw-icon-close-small {\n  font-size: 13px;\n  cursor: pointer;\n  font-weight: 800;\n}\n.jwplayer video {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  background: transparent;\n}\n.jwplayer video::-webkit-media-controls-start-playback-button {\n  display: none;\n}\n.jwplayer.jw-stretch-uniform video {\n  object-fit: contain;\n}\n.jwplayer.jw-stretch-none video {\n  object-fit: none;\n}\n.jwplayer.jw-stretch-fill video {\n  object-fit: cover;\n}\n.jwplayer.jw-stretch-exactfit video {\n  object-fit: fill;\n}\n.jwplayer.jw-state-mirror video,\n.jwplayer.jw-state-mirror canvas {\n  transform: rotateY(180deg);\n}\n/* W3C */\n/* icons */\n/* doc */\n/* IE9 SVG, needs conditional override of \'filter\' to \'none\' */\n/* IE9 SVG, needs conditional override of \'filter\' to \'none\' */\n.jw-click {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.jw-preview,\n.jw-adv {\n  position: absolute;\n  display: none;\n  opacity: 1;\n  visibility: visible;\n  width: 100%;\n  height: 100%;\n  background: #000 no-repeat 50% 50%;\n}\n.jwplayer .jw-preview,\n.jw-error .jw-preview,\n.jw-stretch-uniform .jw-preview {\n  background-size: 100% 100%;\n}\n#playerContainer_error {\n  z-index: 1;\n}\n.jw-stretch-none .jw-preview {\n  background-size: auto auto;\n}\n.jw-stretch-fill .jw-preview {\n  background-size: cover;\n}\n.jw-stretch-exactfit .jw-preview {\n  background-size: 100% 100%;\n}\n.jw-display-icon-container,\n.jw-error-display-icon-container {\n  position: relative;\n  top: 50%;\n  display: table;\n  height: 3.5em;\n  width: 3.5em;\n  margin: -1.75em auto 0;\n  cursor: pointer;\n}\n.jw-display-icon-container .jw-icon-display,\n.jw-error-display-icon-container .jw-icon-display,\n.jw-display-icon-container .jw-error-icon-display,\n.jw-error-display-icon-container .jw-error-icon-display {\n  position: relative;\n  display: table-cell;\n  text-align: center;\n  vertical-align: middle !important;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  font-size: 2em;\n}\n.jw-flag-audio-player .jw-display-icon-container,\n.jw-flag-dragging .jw-display-icon-container {\n  display: none;\n}\n.jw-icon {\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\n/* Mixin for common skin styles with variable colors */\n.jw-controlbar {\n  display: table;\n  position: absolute;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  height: 2em;\n  padding: 0 0.25em;\n  z-index: 1;\n}\n.jw-controlbar .jw-hidden {\n  display: none;\n}\n.jw-controlbar.jw-drawer-expanded .jw-controlbar-left-group,\n.jw-controlbar.jw-drawer-expanded .jw-controlbar-center-group {\n  opacity: 0;\n}\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-elapsed,\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-duration,\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-slider-time {\n  display: none;\n}\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-alt {\n  display: inline;\n}\n.jw-background-color {\n  background-color: #414040;\n}\n.jw-group {\n  display: table-cell;\n}\n.jw-controlbar-center-group {\n  width: 100%;\n  padding: 0 0.25em;\n}\n.jw-controlbar-center-group .jw-slider-time,\n.jw-controlbar-center-group .jw-text-alt {\n  padding: 0;\n}\n.jw-controlbar-center-group .jw-text-alt {\n  display: none;\n}\n.jw-controlbar-left-group,\n.jw-controlbar-right-group {\n  white-space: nowrap;\n}\n.jw-knob:hover,\n.jw-icon-inline:hover,\n.jw-icon-tooltip:hover,\n.jw-icon-display:hover,\n.jw-option:before:hover {\n  color: #eee;\n}\n.jw-icon-inline,\n.jw-icon-tooltip,\n.jw-slider-horizontal,\n.jw-text-elapsed,\n.jw-text-duration {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  line-height: 2em;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.jw-icon-inline,\n.jw-icon-tooltip {\n  min-width: 1.25em;\n  text-align: center;\n}\n.jw-icon-playback {\n  min-width: 2.25em;\n}\n.jw-icon-barlogo {\n  font-size: 19px;\n  min-width: 1.75em;\n}\n.jw-icon-barlogo-new {\n  font-size: 20px;\n  min-width: 1.5em;\n  height: 1em;\n  line-height: 1em;\n}\n.jw-icon-volume {\n  min-width: 1.75em;\n  text-align: left;\n}\n.jw-controlbar .jw-icon-volume .jw-overlay {\n  left: 42%;\n}\n.jw-time-tip {\n  line-height: 1em;\n  pointer-events: none;\n}\n.jw-icon-inline:after,\n.jw-icon-tooltip:after {\n  width: 100%;\n  height: 100%;\n  font-size: 1em;\n}\n.jw-icon-cast {\n  display: none;\n}\n.jw-slider-volume.jw-slider-horizontal,\n.jw-icon-inline.jw-icon-volume {\n  display: none;\n}\n.jw-icon-hd .jw-hd-label {\n  font-size: 12px;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n  pointer-events: none;\n}\n.jw-icon-qualityChange {\n  margin: 0px 5px;\n}\n.jw-icon-qualityChange .jw-qualityChange-label {\n  font-size: 14px;\n  pointer-events: none;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n}\n.jw-controlbar .jw-icon-playrate .jw-overlay {\n  bottom: 1.5em;\n}\n.jw-controlbar .jw-icon-playrate .jw-playrate-label {\n  font-size: 0.75em;\n  border-left: 1px solid #666;\n  padding: 0 0.7em;\n  display: inline-block;\n  line-height: 16px;\n  height: 16px;\n  vertical-align: text-top;\n}\n.jw-controlbar .jw-icon-cc:before {\n  content: none;\n}\n.jw-controlbar .jw-icon-cc .jw-cc-label {\n  font-size: 0.75em;\n  padding: 0 0.7em;\n  display: inline-block;\n  line-height: 16px;\n  height: 16px;\n  vertical-align: text-top;\n  pointer-events: none;\n}\n.jw-controlbar .jw-icon-lang {\n  margin: 0px 3px 0px 8px;\n}\n.jw-controlbar .jw-icon-lang .jw-lang-label {\n  font-size: 14px;\n  pointer-events: none;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n}\n.jw-text-backlive {\n  position: absolute;\n  left: 110px;\n  top: 13px;\n  cursor: pointer;\n}\n.jw-dock {\n  margin: 0.75em;\n  display: block;\n  opacity: 1;\n  clear: right;\n}\n.jw-dock:after {\n  content: \'\';\n  clear: both;\n  display: block;\n}\n.jw-dock-button {\n  cursor: pointer;\n  float: right;\n  position: relative;\n  width: 2.5em;\n  height: 2.5em;\n  margin: 0.5em;\n}\n.jw-dock-button .jw-arrow {\n  display: none;\n  position: absolute;\n  bottom: -0.2em;\n  width: 0.5em;\n  height: 0.2em;\n  left: 50%;\n  margin-left: -0.25em;\n}\n.jw-dock-button .jw-overlay {\n  display: none;\n  position: absolute;\n  top: 2.5em;\n  right: 0em;\n  margin-top: 0.25em;\n  padding: 0.5em;\n  white-space: nowrap;\n}\n.jw-dock-button:hover .jw-overlay,\n.jw-dock-button:hover .jw-arrow {\n  display: block;\n}\n.jw-dock-image {\n  width: 100%;\n  height: 100%;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  opacity: 0.75;\n}\n.jw-title {\n  display: none;\n  position: absolute;\n  top: 0;\n  width: 100%;\n  font-size: 0.875em;\n  height: 8em;\n  background: linear-gradient(to bottom, #000000 0, #000000 18%, rgba(0, 0, 0, 0) 100%);\n}\n.jw-title-primary,\n.jw-title-secondary {\n  padding: 0.75em 1.5em;\n  min-height: 2.5em;\n  color: white;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow-x: hidden;\n}\n.jw-title-primary {\n  font-weight: bold;\n}\n.jw-title-secondary {\n  margin-top: -0.5em;\n}\n.jw-slider-container {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  touch-action: none;\n}\n.jw-rail,\n.jw-buffer,\n.jw-progress {\n  position: absolute;\n  cursor: pointer;\n}\n.jw-progress {\n  background-color: #fff;\n}\n.jw-rail {\n  background-color: #aaa;\n}\n.jw-buffer {\n  background-color: #202020;\n}\n.jw-cue,\n.jw-knob {\n  position: absolute;\n  cursor: pointer;\n}\n.jw-cue {\n  background-color: #fff;\n  width: 0.1em;\n  height: 0.4em;\n}\n.jw-knob {\n  background-color: #aaa;\n  width: 0.4em;\n  height: 0.4em;\n}\n.jw-slider-horizontal {\n  width: 4em;\n  height: 1em;\n}\n.jw-slider-horizontal.jw-slider-volume {\n  margin-right: 5px;\n}\n.jw-slider-horizontal .jw-rail,\n.jw-slider-horizontal .jw-buffer,\n.jw-slider-horizontal .jw-progress {\n  width: 100%;\n  height: 0.4em;\n}\n.jw-slider-horizontal .jw-progress,\n.jw-slider-horizontal .jw-buffer {\n  width: 0;\n}\n.jw-slider-horizontal .jw-rail,\n.jw-slider-horizontal .jw-progress,\n.jw-slider-horizontal .jw-slider-container {\n  width: 100%;\n  left: 0;\n}\n.jw-slider-horizontal .jw-knob {\n  left: 0;\n  margin-left: -0.325em;\n}\n.jw-slider-vertical {\n  width: 0.75em;\n  height: 4em;\n  bottom: 0em;\n  position: absolute;\n  padding: 1em;\n}\n.jw-slider-vertical .jw-rail,\n.jw-slider-vertical .jw-buffer,\n.jw-slider-vertical .jw-progress {\n  bottom: 0;\n  height: 100%;\n}\n.jw-slider-vertical .jw-progress,\n.jw-slider-vertical .jw-buffer {\n  height: 0;\n}\n.jw-slider-vertical .jw-slider-container,\n.jw-slider-vertical .jw-rail,\n.jw-slider-vertical .jw-progress {\n  bottom: 0;\n  width: 0.75em;\n  height: 100%;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.jw-slider-vertical .jw-slider-container {\n  height: 4em;\n  position: relative;\n}\n.jw-slider-vertical .jw-knob {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.jw-slider-time {\n  right: 0;\n  left: 1%;\n  width: 98%;\n}\n.jw-tooltip-time {\n  position: absolute;\n}\n.jw-slider-volume .jw-buffer {\n  display: none;\n}\n.jw-slider-breakpoint {\n  position: absolute;\n  top: 1px;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  width: 3px;\n  height: 2px;\n  background-color: #b7becb;\n  border-radius: 50%;\n}\n.jwplayer .jw-process-adv {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n}\n.jwplayer .jw-process-adv img {\n  border: none;\n}\n.jw-captions {\n  position: absolute;\n  display: none;\n  margin: 0 auto;\n  width: 100%;\n  left: 0;\n  bottom: 3em;\n  right: 0;\n  max-width: 90%;\n  text-align: center;\n}\n.jw-captions.jw-captions-enabled {\n  display: block;\n}\n.jw-captions-window {\n  display: none;\n  padding: 0.25em;\n  border-radius: 0.25em;\n}\n.jw-captions-window.jw-captions-window-active {\n  display: inline-block;\n}\n.jw-captions-text {\n  display: inline-block;\n  color: white;\n  background-color: black;\n  word-wrap: break-word;\n  white-space: pre-line;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  text-decoration: none;\n  line-height: 1.3em;\n  padding: 0.1em 0.8em;\n}\n.jwplayer video::-webkit-media-controls {\n  justify-content: flex-start;\n}\n.jwplayer video::-webkit-media-text-track-container {\n  max-height: calc(97% - 6.25 * 2em);\n  line-height: 1.3em;\n}\n.jwplayer.jw-flag-compact-player video::-webkit-media-text-track-container {\n  max-height: calc(97% - 7.5 * 2em);\n}\n.jwplayer .jw-rightclick {\n  display: none;\n  position: absolute;\n  white-space: nowrap;\n}\n.jwplayer .jw-rightclick.jw-open {\n  display: block;\n}\n.jwplayer .jw-rightclick ul {\n  list-style: none;\n  font-weight: bold;\n  border-radius: 0.15em;\n  margin: 0;\n  border: 1px solid #444;\n  padding: 0;\n}\n.jwplayer .jw-rightclick ul li {\n  background-color: #000;\n  border-bottom: 1px solid #444;\n  margin: 0;\n}\n.jwplayer .jw-rightclick ul li .jw-rightclick-logo {\n  font-size: 2em;\n  color: #ff0147;\n  vertical-align: middle;\n  padding-right: 0.3em;\n  margin-right: 0.3em;\n  border-right: 1px solid #444;\n}\n.jwplayer .jw-rightclick ul li a {\n  color: #fff;\n  text-decoration: none;\n  padding: 1em;\n  display: block;\n  font-size: 0.6875em;\n  line-height: 1em;\n}\n.jwplayer .jw-rightclick ul li:last-child {\n  border-bottom: none;\n}\n.jwplayer .jw-rightclick ul li:hover {\n  background-color: #1a1a1a;\n  cursor: pointer;\n}\n.jwplayer .jw-rightclick ul .jw-featured {\n  background-color: #252525;\n  vertical-align: middle;\n}\n.jwplayer .jw-rightclick ul .jw-featured a {\n  color: #777;\n}\n.jw-logo {\n  position: absolute;\n  margin: 0.75em;\n  cursor: pointer;\n  pointer-events: all;\n  background-repeat: no-repeat;\n  background-size: contain;\n  top: auto;\n  right: auto;\n  left: auto;\n  bottom: auto;\n}\n.jw-logo .jw-flag-audio-player {\n  display: none;\n}\n.jw-logo-top-right {\n  top: 0;\n  right: 0;\n}\n.jw-logo-top-left {\n  top: 0;\n  left: 0;\n}\n.jw-logo-bottom-left {\n  bottom: 0;\n  left: 0;\n}\n.jw-logo-bottom-right {\n  bottom: 0;\n  right: 0;\n}\n.jw-watermark {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  text-align: center;\n  font-size: 14em;\n  color: #eee;\n  opacity: 0.33;\n  pointer-events: none;\n}\n.jw-icon-tooltip.jw-open .jw-overlay {\n  opacity: 1;\n  visibility: visible;\n}\n.jw-icon-tooltip.jw-hidden {\n  display: none;\n}\n.jw-overlay-horizontal {\n  display: none;\n}\n.jw-icon-tooltip.jw-open-drawer:before {\n  display: none;\n}\n.jw-icon-tooltip.jw-open-drawer .jw-overlay-horizontal {\n  opacity: 1;\n  display: inline-block;\n  vertical-align: top;\n}\n.jw-overlay:before {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: -50%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0);\n  content: " ";\n}\n.jw-slider-time .jw-overlay:before {\n  height: 1em;\n  top: auto;\n}\n.jw-time-tip,\n.jw-volume-tip,\n.jw-menu {\n  position: relative;\n  left: -50%;\n  border: solid 1px #000;\n  margin: 0;\n}\n.jw-menu {\n  max-height: 10em;\n  overflow-y: auto;\n}\n.jw-volume-value-tip {\n  font-size: 12px;\n  position: absolute;\n  top: -26px;\n  right: 20px;\n  background-color: #000;\n  line-height: 20px;\n  border-radius: 3px;\n  padding: 0 3px;\n  color: #FFF;\n}\n.jw-volume-tip {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n.jw-time-tip {\n  text-align: center;\n  font-family: inherit;\n  color: #aaa;\n  bottom: 1em;\n  border: solid 4px #000;\n}\n.jw-time-tip .jw-text {\n  line-height: 1em;\n}\n.jw-controlbar .jw-overlay {\n  margin: 0;\n  position: absolute;\n  bottom: 2em;\n  left: 50%;\n  opacity: 0;\n  visibility: hidden;\n}\n.jw-controlbar .jw-overlay .jw-contents {\n  position: relative;\n}\n.jw-controlbar .jw-option {\n  position: relative;\n  white-space: nowrap;\n  cursor: pointer;\n  list-style: none;\n  height: 1.5em;\n  font-family: inherit;\n  line-height: 1.5em;\n  color: #aaa;\n  padding: 0 0.5em;\n  font-size: 0.8em;\n}\n.jw-controlbar .jw-option:hover,\n.jw-controlbar .jw-option:before:hover {\n  color: #eee;\n}\n.jw-controlbar .jw-option:before {\n  padding-right: 0.125em;\n}\n.jw-playlist-container ::-webkit-scrollbar-track {\n  background-color: #333;\n  border-radius: 10px;\n}\n.jw-playlist-container ::-webkit-scrollbar {\n  width: 5px;\n  border: 10px solid black;\n  border-bottom: 0;\n  border-top: 0;\n}\n.jw-playlist-container ::-webkit-scrollbar-thumb {\n  background-color: white;\n  border-radius: 5px;\n}\n.jw-tooltip-title {\n  border-bottom: 1px solid #444;\n  text-align: left;\n  padding-left: 0.7em;\n}\n.jw-playlist {\n  max-height: 11em;\n  min-height: 4.5em;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  width: calc(100% - 4px);\n}\n.jw-playlist .jw-option {\n  height: 3em;\n  margin-right: 5px;\n  color: white;\n  padding-left: 1em;\n  font-size: 0.8em;\n}\n.jw-playlist .jw-label,\n.jw-playlist .jw-name {\n  display: inline-block;\n  line-height: 3em;\n  text-align: left;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.jw-playlist .jw-label {\n  width: 1em;\n}\n.jw-playlist .jw-name {\n  width: 11em;\n}\n.jw-skip {\n  cursor: default;\n  position: absolute;\n  float: right;\n  display: inline-block;\n  right: 0.75em;\n  bottom: 3em;\n}\n.jw-skip.jw-skippable {\n  cursor: pointer;\n}\n.jw-skip.jw-hidden {\n  visibility: hidden;\n}\n.jw-skip .jw-skip-icon {\n  display: none;\n  margin-left: -0.75em;\n}\n.jw-skip .jw-skip-icon:before {\n  content: "\\E60C";\n}\n.jw-skip .jw-text,\n.jw-skip .jw-skip-icon {\n  color: #aaa;\n  vertical-align: middle;\n  line-height: 1.5em;\n  font-size: 0.7em;\n}\n.jw-skip.jw-skippable:hover {\n  cursor: pointer;\n}\n.jw-skip.jw-skippable:hover .jw-text,\n.jw-skip.jw-skippable:hover .jw-skip-icon {\n  color: #eee;\n}\n.jw-skip.jw-skippable .jw-skip-icon {\n  display: inline;\n  margin: 0;\n}\n.jwplayer.jw-state-playing.jw-flag-casting .jw-display-icon-container,\n.jwplayer.jw-state-paused.jw-flag-casting .jw-display-icon-container {\n  display: table;\n}\n.jwplayer.jw-flag-casting .jw-display-icon-container {\n  border-radius: 0;\n  border: 1px solid white;\n  position: absolute;\n  top: auto;\n  left: 0.5em;\n  right: 0.5em;\n  bottom: 50%;\n  margin-bottom: -12.5%;\n  height: 50%;\n  width: 50%;\n  padding: 0;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jwplayer.jw-flag-casting .jw-display-icon-container .jw-icon {\n  font-size: 3em;\n}\n.jwplayer.jw-flag-casting.jw-state-complete .jw-preview {\n  display: none;\n}\n.jw-cast {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-size: auto;\n  background-position: 50% 50%;\n}\n.jw-cast-label {\n  position: absolute;\n  left: 0.5em;\n  right: 0.5em;\n  bottom: 75%;\n  margin-bottom: 1.5em;\n  text-align: center;\n}\n.jw-cast-name {\n  color: #cccccc;\n}\n.jw-switch {\n  position: relative;\n  float: left;\n  width: 30px;\n  margin: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  display: inline-block;\n  position: absolute;\n  right: 10px;\n  top: 18px;\n}\n.live-shift-switch {\n  position: absolute;\n  left: inherit;\n  right: initial;\n  top: 11px;\n  margin-left: 25px;\n}\n.live-shift-switch::before {\n  content: \'\\65F6\\79FB\\FF1A\';\n  position: absolute;\n  left: -30px;\n  z-index: 1;\n  color: #fff;\n  font-size: 12px;\n}\n.jw-switch-checkbox {\n  display: none;\n}\n.jw-switch-label {\n  display: block;\n  overflow: hidden;\n  cursor: pointer;\n  border-radius: 20px;\n}\n.jw-switch-inner {\n  display: block;\n  width: 200%;\n  margin-left: -100%;\n  transition: margin 0.3s ease-in 0s;\n}\n.jw-switch-inner::before,\n.jw-switch-inner::after {\n  display: block;\n  float: right;\n  width: 50%;\n  height: 15px;\n  padding: 0;\n  line-height: 15px;\n  font-size: 14px;\n  color: white;\n  font-family: Trebuchet, Arial, sans-serif;\n  font-weight: bold;\n  box-sizing: border-box;\n}\n.jw-switch-inner::after {\n  content: attr(data-on);\n  padding-left: 10px;\n  background-color: #0D5DEC;\n  color: #FFFFFF;\n}\n.jw-switch-inner::before {\n  content: attr(data-off);\n  padding-right: 10px;\n  background-color: #EEEEEE;\n  color: #999999;\n  text-align: right;\n}\n.jw-switch-switch {\n  position: absolute;\n  display: block;\n  width: 12px;\n  height: 12px;\n  margin: 2px 1px 2px 1px;\n  background: #FFFFFF;\n  top: 0;\n  bottom: 0;\n  right: 14px;\n  border: 1px solid #999999;\n  border-radius: 20px;\n  transition: all 0.3s ease-in 0s;\n}\n.jw-switch-checkbox:checked + .jw-switch-label .jw-switch-inner {\n  margin-left: 0;\n}\n.jw-switch-checkbox:checked + .jw-switch-label .jw-switch-switch {\n  right: 0px;\n}\n.jwplayer .view360-container {\n  width: 100%;\n  height: 100%;\n}\n.jwplayer .view360-container canvas {\n  z-index: 1;\n  position: absolute;\n  inset: 0px;\n  margin: auto;\n  width: 100%;\n  height: 100%;\n  outline: none;\n}\n.jwplayer .view360-container video {\n  background: #000;\n}\n.jwplayer .view360-controls {\n  position: relative;\n}\n.jwplayer .view360-controls .view360-controls-float-right {\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  right: 10px;\n  z-index: 1;\n}\n.jwplayer .view360-controls .view360-controls-pie {\n  color: #fff;\n}\n.jwplayer .view360-controls .view360-controls-button {\n  display: none;\n}\n.vr-container .jw-controlbar {\n  display: block !important;\n}\n.jw-state-idle .jw-preview {\n  display: block;\n}\n.jw-state-idle .jw-icon-display:before {\n  content: "\\E60E";\n}\n.jw-state-idle .jw-controlbar {\n  display: none;\n}\n.jw-state-idle .jw-captions {\n  display: none;\n}\n.jw-state-idle .jw-title {\n  display: block;\n}\n.jwplayer.jw-state-playing .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-state-playing .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-playing .jw-icon-playback:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display {\n  position: relative;\n  left: 0.1em;\n}\n.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-paused .jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display {\n  -webkit-animation: spin 2s linear infinite;\n  -moz-animation: spin 2s linear infinite;\n  animation: spin 2s linear infinite;\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E601";\n}\n@-moz-keyframes spin {\n  100% {\n    -moz-transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-text {\n  display: none;\n}\n.jwplayer.jw-state-buffering .jw-icon-playback:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-buffering .jw-preview {\n  display: block;\n  background-image: none !important;\n}\n.jwplayer.jw-state-complete .jw-preview {\n  display: block;\n}\n.jwplayer.jw-state-complete .jw-display-icon-container {\n  z-index: 10;\n}\n.jwplayer.jw-state-complete .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E610";\n}\n.jwplayer.jw-state-complete .jw-display-icon-container .jw-text {\n  display: none;\n}\n.jwplayer.jw-state-complete .jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-complete .jw-captions {\n  display: none;\n}\nbody .jw-error .jw-title,\n.jwplayer.jw-state-error .jw-title {\n  display: block;\n  z-index: 1;\n  pointer-events: auto;\n}\nbody .jw-error .jw-title .jw-title-primary,\n.jwplayer.jw-state-error .jw-title .jw-title-primary {\n  white-space: normal;\n}\nbody .jw-error .jw-title .jw-title-primary a,\n.jwplayer.jw-state-error .jw-title .jw-title-primary a {\n  cursor: pointer;\n  color: #699f00;\n  pointer-events: auto;\n}\nbody .jw-error .jw-preview,\n.jwplayer.jw-state-error .jw-preview {\n  display: block;\n}\nbody .jw-error .jw-controlbar,\n.jwplayer.jw-state-error .jw-controlbar {\n  display: none;\n}\nbody .jw-error .jw-captions,\n.jwplayer.jw-state-error .jw-captions {\n  display: none;\n}\nbody .jw-error:hover .jw-display-icon-container,\n.jwplayer.jw-state-error:hover .jw-display-icon-container {\n  cursor: default;\n  color: #fff;\n  background: #000;\n}\nbody .jw-error .jw-icon-display,\n.jwplayer.jw-state-error .jw-icon-display,\nbody .jw-error .jw-error-icon-display,\n.jwplayer.jw-state-error .jw-error-icon-display {\n  cursor: default;\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\nbody .jw-error .jw-icon-display:before,\n.jwplayer.jw-state-error .jw-icon-display:before,\nbody .jw-error .jw-error-icon-display:before,\n.jwplayer.jw-state-error .jw-error-icon-display:before {\n  content: "\\E607";\n}\nbody .jw-error .jw-icon-display:hover,\n.jwplayer.jw-state-error .jw-icon-display:hover,\nbody .jw-error .jw-error-icon-display:hover,\n.jwplayer.jw-state-error .jw-error-icon-display:hover {\n  color: #fff;\n}\nbody .jw-error {\n  font-size: 16px;\n  background-color: #000;\n  color: #eee;\n  width: 100%;\n  height: 100%;\n  display: table;\n  opacity: 1;\n  position: relative;\n}\nbody .jw-error .jw-icon-container,\nbody .jw-error .jw-error-icon-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\nbody #license_error {\n  position: absolute;\n  top: 0px;\n}\n.jwplayer.jw-flag-cast-available .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-cast-available .jw-icon-cast {\n  display: inline-block;\n}\n.jwplayer.jw-flag-skin-loading .jw-captions,\n.jwplayer.jw-flag-skin-loading .jw-controls,\n.jwplayer.jw-flag-skin-loading .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1000;\n  margin: 0;\n  position: fixed;\n}\n.jwplayer.jw-flag-fullscreen .rotate-inner {\n  transform: none !important;\n}\n.jwplayer.jw-flag-live .jw-controlbar {\n  border-top: 1px solid #333;\n}\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-split,\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,\n.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time,\n.jwplayer.jw-flag-live .jw-controlbar .jw-icon-playrate {\n  display: none;\n}\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt {\n  display: inline;\n}\n.jwplayer.jw-flag-time-shift .jw-controlbar .jw-slider-time {\n  display: inline;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-controlbar,\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-dock {\n  display: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-logo.jw-hide {\n  display: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-plugin,\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-captions {\n  bottom: 0.5em;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-media {\n  cursor: none;\n  -webkit-cursor-visibility: auto-hide;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container {\n  max-height: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-buffering .jw-controlbar {\n  display: none;\n}\n.jwplayer.jw-flag-media-audio .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-plugin,\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-captions {\n  bottom: 3em;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container {\n  max-height: calc(97% - 6.25 * 2em);\n}\n.jw-flag-media-audio .jw-preview {\n  display: block;\n}\n.jwplayer.jw-flag-ads .jw-preview,\n.jwplayer.jw-flag-ads .jw-dock,\n.jwplayer.jw-flag-ads .jw-logo,\n.jwplayer.jw-flag-ads .jw-captions.jw-captions-enabled {\n  display: none;\n}\n.jwplayer.jw-flag-ads video::-webkit-media-text-track-container {\n  display: none;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-text,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-horizontal {\n  display: none;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-playback,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-volume,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-fullscreen {\n  display: inline-block;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt {\n  display: inline;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume.jw-slider-horizontal,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline.jw-icon-volume {\n  display: inline-block;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip.jw-icon-volume {\n  display: none;\n}\n.jwplayer.jw-flag-ads-googleima .jw-controlbar {\n  display: table;\n  bottom: 0;\n}\n.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar {\n  font-size: 1em;\n}\n.jwplayer.jw-flag-ads-googleima.jw-flag-touch.jw-state-paused .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-flag-ads-googleima.jw-skin-seven .jw-controlbar {\n  font-size: 0.9em;\n}\n.jwplayer.jw-flag-ads-vpaid .jw-controlbar {\n  display: none;\n}\n.jwplayer.jw-flag-ads-hide-controls .jw-controls {\n  display: none !important;\n}\n.jwplayer.jw-flag-ads.jw-flag-touch .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-overlay-open .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-overlay-open .jw-controls-right .jw-logo {\n  display: none;\n}\n.jwplayer.jw-flag-overlay-open-sharing .jw-controls,\n.jwplayer.jw-flag-overlay-open-related .jw-controls,\n.jwplayer.jw-flag-overlay-open-sharing .jw-title,\n.jwplayer.jw-flag-overlay-open-related .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-rightclick-open {\n  overflow: visible;\n}\n.jwplayer.jw-flag-rightclick-open .jw-rightclick {\n  z-index: 16777215;\n}\n.jw-flag-controls-disabled .jw-controls {\n  visibility: hidden;\n}\n.jw-flag-controls-disabled .jw-logo {\n  visibility: visible;\n}\n.jw-flag-controls-disabled .jw-media {\n  cursor: auto;\n}\nbody .jwplayer.jw-flag-flash-blocked .jw-title {\n  display: block;\n}\nbody .jwplayer.jw-flag-flash-blocked .jw-controls,\nbody .jwplayer.jw-flag-flash-blocked .jw-overlays,\nbody .jwplayer.jw-flag-flash-blocked .jw-preview {\n  display: none;\n}\n.jw-flag-touch .jw-controlbar,\n.jw-flag-touch .jw-skip,\n.jw-flag-touch .jw-plugin {\n  font-size: 1.5em;\n}\n.jw-flag-touch .jw-captions {\n  bottom: 4.25em;\n}\n.jw-flag-touch video::-webkit-media-text-track-container {\n  max-height: 70%;\n}\n.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before {\n  display: inline;\n}\n.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before {\n  content: "\\E615";\n}\n.jw-flag-touch .jw-display-icon-container {\n  pointer-events: none;\n}\n.jw-flag-touch.jw-state-paused .jw-display-icon-container {\n  display: table;\n}\n.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display-icon-container {\n  display: none;\n}\n.jw-flag-compact-player .jw-text-elapsed,\n.jw-flag-compact-player .jw-text-duration,\n.jw-flag-compact-player .jw-text-split,\n.jw-flag-compact-player .jw-icon-danmu {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player {\n  background-color: transparent;\n}\n.jwplayer.jw-flag-audio-player .jw-media {\n  visibility: hidden;\n}\n.jwplayer.jw-flag-audio-player .jw-media object {\n  width: 1px;\n  height: 1px;\n}\n.jwplayer.jw-flag-audio-player .jw-preview,\n.jwplayer.jw-flag-audio-player .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar {\n  display: table;\n  height: auto;\n  left: 0;\n  bottom: 0;\n  margin: 0;\n  width: 100%;\n  min-width: 100%;\n  opacity: 1;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-fullscreen,\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal,\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-inline.jw-icon-volume {\n  display: inline-block;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip.jw-icon-volume {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player.jw-flag-user-inactive .jw-controlbar {\n  display: table;\n}\n.jw-ie-poorie.jw-flag-media-audio .jw-preview {\n  display: none;\n}\n.jw-ie-poorie .jw-display-icon-container .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/display_play.png\');\n  width: 56px;\n  height: 56px;\n}\n.jw-ie-poorie.jw-state-idle .jw-icon-display,\n.jw-ie-poorie.jw-state-complete .jw-icon-display {\n  visibility: visible;\n}\n.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media {\n  visibility: visible;\n}\n.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media object {\n  width: 100%;\n  height: 100%;\n}\n.background-base {\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-playlist-container .jw-label .jw-icon-play {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/play_small.png\');\n  background-repeat: no-repeat;\n  background-position: left;\n}\n.jw-ie-poorie .jw-controlbar {\n  /*\n        .jw-icon-hd {\n            background-image: url(\'http://cyberplayer.bcelive.com/resource/img/hd.png\');\n            .background-base;\n            // width: 47px;\n            // height: 32px;\n        }\n        */\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-barlogo {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/baiduLogo.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 15px;\n  height: 15px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-barlogo-new {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/bce.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 13px;\n  height: 14px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-playback {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/play.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 15px;\n  height: 15px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-prev {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/prev.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 26px;\n  height: 21px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-next {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/next.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-playlist {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/playlist.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-knob {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/cue.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 10px;\n  height: 10px;\n  background-color: inherit;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-cc {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/cc.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-volume {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/volume.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-fullscreen {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/fullscreen.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controls-right {\n  display: none;\n}\n.jw-ie-poorie .jw-display-icon-container {\n  text-align: center;\n}\n.jw-ie-poorie.jw-state-playing .jw-icon-playback,\n.jw-ie-poorie.jw-state-buffering .jw-icon-playback {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/pause.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie.jw-state-buffering .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/loading.gif\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 56px;\n  height: 56px;\n}\n.jw-ie-poorie.jw-state-error .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/error.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 36px;\n  height: 32px;\n}\n.jw-ie-poorie.jw-state-complete .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/replay.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 28px;\n  height: 32px;\n}\n.jw-flashui .jw-controlbar {\n  display: none;\n}\n.jw-flashui.jw-state-buffering .jw-display-icon-container {\n  display: none;\n}\n.jw-skin-bce {\n  outline: none;\n  /* Controlbar styles */\n  /* Contains icons, time text, and slider */\n  /* Playlist container - need second background-color declaration to overwrite the .jw-background-color class */\n  /* ul container */\n  /* Playlist title */\n  /* Colors, padding for icons and text */\n  /* Styles for play button on idle */\n  /* Rail/slider styles */\n  /* Timeline and horizontal volume slider */\n  /* Volume slider */\n  /* Volume slider container */\n  /* Color of video\'s duration time */\n  /* Icon borders on the right side of the controlbar */\n  /* Icons, text and container styles for the dock, in the upper right corner */\n  /* Styles for active list items */\n  /* A min-width on the volume icon to keep the width from collapsing on toggle */\n  /* For the overlay containers */\n  /* Position and padding of slider thumbnail */\n  /* Position of remaining overlay containers */\n  /* Skip icon and text styles */\n}\n.jw-skin-bce .jw-background-color {\n  background: #000;\n}\n.jw-skin-bce .jw-controlbar {\n  border: none;\n  height: 2.5em;\n}\n.jw-skin-bce .jw-group {\n  vertical-align: middle;\n}\n.jw-skin-bce .jw-playlist {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.jw-skin-bce .jw-playlist-container {\n  left: -43%;\n  background-color: rgba(0, 0, 0, 0.5);\n  /* li list option */\n  /* play icon is always active */\n}\n.jw-skin-bce .jw-playlist-container .jw-option {\n  border-bottom: 1px solid #444;\n  /* Playlist items are black when active, or hovered */\n  /* Number color when li is hovered */\n}\n.jw-skin-bce .jw-playlist-container .jw-option:hover,\n.jw-skin-bce .jw-playlist-container .jw-option.jw-active-option {\n  background-color: black;\n}\n.jw-skin-bce .jw-playlist-container .jw-option:hover .jw-label {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-playlist-container .jw-icon-playlist {\n  margin-left: 0;\n}\n.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play:before {\n  padding-left: 0;\n}\n.jw-skin-bce .jw-icon-playlist .jw-overlay {\n  z-index: 100;\n  bottom: 1.6em;\n}\n.jw-skin-bce .jw-tooltip-title {\n  background-color: #000;\n  color: #fff;\n}\n.jw-skin-bce .jw-text {\n  color: #fff;\n}\n.jw-skin-bce .jw-button-color {\n  color: #fff;\n}\n.jw-skin-bce .jw-button-color:hover {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-toggle {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-toggle.jw-off {\n  color: #fff;\n}\n.jw-skin-bce .jw-controlbar .jw-icon:before,\n.jw-skin-bce .jw-text-elapsed,\n.jw-skin-bce .jw-text-duration {\n  padding: 0 0.7em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-barlogo-new:before {\n  padding: 0;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-prev:before {\n  padding-right: 0.25em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-playlist:before {\n  padding: 0 0.45em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-next:before {\n  padding-left: 0.25em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd:before {\n  content: none;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label {\n  color: #000;\n  background: #FFF;\n  padding: 0 4px;\n  border-radius: 2px;\n  margin: 0 0.7em;\n  margin-top: 1px;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label:hover {\n  background: #108CEE;\n}\n.jw-skin-bce .jw-icon-prev,\n.jw-skin-bce .jw-icon-next {\n  font-size: 0.7em;\n}\n.jw-skin-bce .jw-icon-prev:before {\n  border-left: 1px solid #666;\n}\n.jw-skin-bce .jw-icon-next:before {\n  border-right: 1px solid #666;\n}\n.jw-skin-bce .jw-icon-display {\n  color: #fff;\n}\n.jw-skin-bce .jw-icon-display:before {\n  padding-left: 0;\n}\n.jw-skin-bce .jw-display-icon-container,\n.jw-skin-bce .jw-error-display-icon-container {\n  border-radius: 50%;\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-rail {\n  background-color: #333;\n  box-shadow: none;\n  opacity: 0.5;\n}\n.jw-skin-bce .jw-buffer {\n  background-color: #666F82;\n  opacity: 0.5;\n}\n.jw-skin-bce .jw-progress {\n  background: #108CEE;\n  opacity: 0.3;\n}\n.jw-skin-bce .jw-knob {\n  width: 0.6em;\n  height: 0.6em;\n  background-color: #fff;\n  border-radius: 1em;\n  display: none;\n}\n.jw-skin-bce .jw-slider-volume .jw-knob {\n  display: inline-block;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-slider-container {\n  position: relative;\n  height: 0.95em;\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-rail,\n.jw-skin-bce .jw-slider-horizontal .jw-buffer,\n.jw-skin-bce .jw-slider-horizontal .jw-progress {\n  height: 0.2em;\n  top: 5px;\n  border-radius: 0;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-knob {\n  top: -0.2em;\n  top: 0;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-cue {\n  top: 0.2em;\n  width: 0.4em;\n  height: 0.4em;\n  background-color: #fff;\n  border-radius: 50%;\n  margin-left: -0.325em;\n}\n.jw-skin-bce .jw-slider-vertical .jw-rail,\n.jw-skin-bce .jw-slider-vertical .jw-buffer,\n.jw-skin-bce .jw-slider-vertical .jw-progress {\n  width: 0.2em;\n}\n.jw-skin-bce .jw-slider-vertical .jw-knob {\n  margin-bottom: -0.3em;\n}\n.jw-skin-bce .jw-volume-tip {\n  width: 100%;\n  left: -45%;\n  padding-bottom: 0.7em;\n}\n.jw-skin-bce .jw-text-duration {\n  color: #666F82;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-inline:first-child:before {\n  border: none;\n}\n.jw-skin-bce .jw-dock .jw-dock-button {\n  border-radius: 50%;\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-dock .jw-overlay {\n  border-radius: 2.5em;\n}\n.jw-skin-bce .jw-icon-tooltip .jw-active-option {\n  background-color: #108CEE;\n  color: #fff;\n}\n.jw-skin-bce .jw-time-tip,\n.jw-skin-bce .jw-menu,\n.jw-skin-bce .jw-volume-tip,\n.jw-skin-bce .jw-skip {\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-time-tip {\n  padding: 0.2em;\n  bottom: -18px;\n}\n.jw-skin-bce .jw-menu,\n.jw-skin-bce .jw-volume-tip {\n  bottom: 0.24em;\n}\n.jw-skin-bce .jw-skip {\n  padding: 0.4em;\n  border-radius: 1.75em;\n}\n.jw-skin-bce .jw-skip .jw-text,\n.jw-skin-bce .jw-skip .jw-icon-inline {\n  color: #fff;\n  line-height: 1.75em;\n}\n.jw-skin-bce .jw-skip.jw-skippable:hover .jw-text,\n.jw-skin-bce .jw-skip.jw-skippable:hover .jw-icon-inline {\n  color: #108CEE;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon:before,\n.jw-skin-bce.jw-flag-touch .jw-text-elapsed,\n.jw-skin-bce.jw-flag-touch .jw-text-duration {\n  padding: 0 0.35em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-prev:before {\n  padding: 0 0.125em 0 0.7em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-next:before {\n  padding: 0 0.7em 0 0.125em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-playlist:before {\n  padding: 0 0.225em;\n}\n.jw-skin-bce .jw-slider-time {\n  background: 0 0;\n  position: absolute;\n  top: -8px;\n  height: 8px;\n  line-height: 1em;\n}\n.jw-skin-bce .jw-slider-time .jw-slider-container {\n  height: 8px;\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-knob {\n  display: block;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container {\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-rail,\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-buffer,\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-progress {\n  height: 0.6em;\n  border-radius: 0;\n  top: 0;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-cue {\n  top: 0;\n  width: 0.6em;\n  height: 0.6em;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-elapsed {\n  padding-right: 0;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-split {\n  padding: 0 2px;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-duration {\n  padding-left: 0;\n  color: #FFF;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-center-group .jw-tooltip-time {\n  top: -7px;\n  height: 1em;\n  transform: translate(-10px);\n}\n.jw-skin-bce .jw-controlbar-center-group .jw-overlay {\n  z-index: 100;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate {\n  height: 24px;\n  line-height: 24px;\n  margin-top: -2px;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate .jw-playrate-label {\n  border: 1px solid #333;\n  line-height: 24px;\n  height: 24px;\n  vertical-align: bottom;\n}\n.jw-skin-bce .jw-media {\n  width: 100%;\n  height: 100%;\n}\n.jw-skin-bce .jw-icon-danmu {\n  position: relative;\n  z-index: 11;\n}\n.jw-skin-bce .jw-icon-danmu .jw-overlay {\n  background-color: #000c;\n  box-shadow: 0 1px 15px #0b122342;\n  position: relative;\n  position: absolute;\n  width: 300px;\n  height: 210px;\n  z-index: 1;\n  left: -250px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-title {\n  padding: 15px 10px 0px 10px;\n  display: flex;\n  justify-content: space-between;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-title div {\n  color: #fff;\n  font-size: 15px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-background-color {\n  background-color: transparent;\n}\n.jw-skin-bce .jw-icon-danmu .jw-progress {\n  background-color: #0d5de7;\n  opacity: 1;\n}\n.jw-skin-bce .jw-icon-danmu .jw-knob {\n  display: inline-block;\n  position: absolute;\n  top: 2px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-overlay:before {\n  right: 0px !important;\n  left: initial !important;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container {\n  height: 35px;\n  line-height: 35px;\n  padding: 10px;\n  position: relative;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-slider-horizontal {\n  width: 170px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-left {\n  margin-right: 8px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-left,\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-right {\n  color: #fff;\n  display: inline-block;\n  font-size: 13px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-right {\n  position: absolute;\n  right: 10px;\n}\n',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t){e.exports="data:application/font-woff;base64,d09GRgABAAAAACFsAAoAAAAAISQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgPJRctWNtYXAAAAFUAAABSgAAAUrmWOe1Z2x5ZgAAAqAAABpgAAAaYHAJo79oZWFkAAAdAAAAADYAAAA2L+w/EWhoZWEAAB04AAAAJAAAACQJZQU1aG10eAAAHVwAAACGAAAAhpbECERsb2NhAAAd5AAAAEYAAABGdLJtIG1heHAAAB4sAAAAIAAAACAAMwFxbmFtZQAAHkwAAAGtAAABrRlSpcxwb3N0AAAf/AAAAW4AAAFumY/zTQAEBI4BkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAgAGAwAAAAAAAAAAAAEQAAAAAAAAAAAAAABQZkVkAMDmAeYjAyz/LABcAywA1AAAAAEAAAAAAxgAAAAAACAAAQAAAAMAAAADAAAAHAABAAAAAABEAAMAAQAAABwABAAoAAAABgAEAAEAAuYh5iP//wAA5gHmI///GgAZ3QABAAAAAAAAAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAZwBeA5MCzAAOAAAlLgEnIREhFS4BJzUhESEB4gIEAwGJ/TYJIAgDLP5PXggeCAIQ0QIHAvb9kgAAAAEAaf+8A5IC5QAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxrTRce0ZFe1w0RD9ulFNUlG4/P26UVEZ7XDQBUUZ7XDQ0XHtGVJRuPz9ulFRTlG4/RDRce0UAAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQ///A6ADfgCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAID/mAOAAyAABAAJAAAFESERIQEhESERAoABAP8A/gABAP8AaAOA/IADiPyAA4AAAAAAAQBA/34DwAL+AAMAAAkBEQEDwPyAA4ABPv5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAEIAAgO+A34AIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIACP++AGYCmgOXACkAUAB/AK8BKgE8AVkBcAAAEg4BIg4EFB4IPgouCSImEz4BNz4BNz4BNz4BNz4BJy4CNDUuAQcOAQcOAQcGFBUUFhceARcFJhYnLgEnJgYnLgEjJgYHIiYHDgEHFBYOAQcOAQcOAhQOAQcGFhceARc3PgE3IS4CNDUuAScqAScGNgcOAQcOAhQHDgEXHgEXHgEXMz4BNz4BNzY0PgI0PgE3JAYiBiIOBxQOFRQGFB4KMj4FMh4DMh4CMj4PNC4NIi4VIiYDDgEHBhYHDgEVBjIXHgEXNycXByMuAScuAS8BPgE3PgM3PgE3PgEzPgE/ATMXHgEXMz8BHwEHIyYWJyYiIy4BJzU3M8oGCQYYDQwHAgQDAhMPBwcFGwUNEwQFEwEEAgQCAgQCBQUCBQIIGAcI4hADAQYKBQcBBQEDAQ0NAgEDAgs5HwQbGwUKBAESEwQOBv7iCgoHBx0OCQMIAwUCCQcKAQQCCxYFAQIEAQICAQIDAQIDAQIPEAkSCjEUIQ0CJQYDAgYgDgMIHC0XCg4GCQEDAQEKAQEEAQUIERs2BwwHBQwCAQEEAQIDBv6DDwgLBQUGBQUJBgYODAUHJgkMCQgHBQYRCQQGBRAIBQEHBQUFAgMCBgoZDAMMFVYKBx0JFgw+DgoVCAkFGglCEgcPBQkMBQkEBQUIBQUBBQUBBQIGBBAJBQYKCgkFAw8nBQoGCAUFCQQFBwwGBAMNBAYFCAYJDIwHCgUHAgIBBAMDBAMJDjcBQAKHCxgJBAsIAQILEQMEBQgDAQECAwYDEiQSBDpUAwIHNwEDOwECkAkKCwIEAQ4KBwM6A5cBBhIQGRgYGB8ICiIPBQIFAgIBDAUDHgYFEAYwHQYODQYFBAcJEgX+/gYDAQMIAwYFCQEBAhM3GAIFBgUCHS8JAhQgCxcMCxULGCkPAwUCFQ4OFBEgCwcDAQEDAgQDAQEEFQsBAgMEAgUKBQMEBgcHCAQaNhUJCwcCCRsvGwIDBQIPIAUFBwMGBwoMAQEEBQIdLSUIEQgLEQoEBAQDDgQCAwQBAwUEBCE+BQUGAQUBBwUKDgQSBA0sBg8FBgsBBQ4KAgYIDxEFBwkRCQ4bDxAICg4RGwUFBAkBBAEFAgUBBgEFAQcEAgMCBQEMAQgGBwQUDgcPDDAKDQYIDQUVBQYHBQ0FBw8pCQgHDgYEEAYDDwkHAwcGBQIFAQQE/vYDAwUIAwoDBQQNBw4PBgFikwIGCgsFERY2CRoQAwYFAgICAwEBAQEDAUfXBwEFkwMCxAICAgYBCQ8MmgMAAAMAsgB+A04DawANABsALAAAATU0LwERFBcFNTQvASYFBwYdASU2NREHBh0BFAMnJgcFFxY/ATY3Nh8BFj8BATsnYQwBKiZ8DAF+fCYBKgxhJzZ9DAz+1GEnJn4CAwoJfScmYgGLjSwWN/6tDgeqbywWRwcHRxYsb6oHDgFTNxYsjQ0Bn0cHB6s4FhZIAQEDBUgWFjgAAAAABABA/5QE4gO4AAcADAAUABkAABcmJzY3FhcGJRY3NgEDJic2NxYXBgEAFxY38qMPD6OjDw/+335+PALBPaIPD6KjDw/75AK+PX5+OA+kog8PoqQlaGg7A4H8EA+kog8PoqQD4fx+OmhoAAAACgAN/zQGHAMkACoALgAyADYAOgA+AEIAUQBhAHgAAAUyFhcOASMhLgEnET4BNyEWFxYXFQYHBgcmJyY9ASYnJichBgcGBxEeARcBMzUjFyE1IQEzNSMXITUhEyE1IQczNSMlFhcWFw4BByYnJic2NzYTNjc2NyYnJicGBwYHFhcWExYVFA8BBiMiLwEmNTQ3NjMyHwE3NjIDYhIVAQEVEv1iS2kDA2lLA7pLNDUCAQoLERIKCgIfHyn8RiseHwEBPSsBG01NmwE2/sr+fE1NnAE1/suaATb+yppNTQNoelNSAwOlentSUwMDU1J7WT09AgI9PVlaPTwDAzw9/AwMog0PDwtuCwsNDw8MUYgNHjEVERMVA2lLAjZLaQICNTRLMhILCgEBCgsSMiofHgICHh8q/corPAICH05OTv7wTU1N/vFNTU3CA1JTenulAwNTUnt6U1L+CwM9PFpaPD0CAj08Wlo8PQEsDBAPC6QLC24LDw8NCwtSiAwAAAAKAA3/NAYcAyQAKgAuADIANgA6AD4AQgBRAF4AawAABTIWFw4BIyEuAScRPgE3IRYXFhcVBgcGByYnJj0BJicmJyEGBwYHER4BFwEzNSMXITUhATM1IxchNSERMzUjFyE1ISUWFxYXDgEHJicmJzY3NhMyNzY3AQYHBhUWFxY3Njc2NSYnJiciBwYHA2ISFQEBFRL9YktpAwNpSwO6SzQ1AgEKCxESCgoCHx8p/EYrHh8BAT0rARtNTZsBNv7K/nxNTZwBNf7LTU2aATb+ygLOelNSAwOlentSUwMDU1J7HRoaF/7dDAcIAzw9/BgODQI9PVknIiIdMRURExUDaUsCNktpAgI1NEsyEgsKAQEKCxIyKh8eAgIeHyr9yis8AgIfTk5O/vBNTU3+8U1NTcIDUlN6e6UDA1NSe3pTUv4LCAcNASMYGhodWjw9SxsjIydaPD0CDQ4YAAIAEv80BHIDJAAVACkAAAEyFxYXESMRIREhFSEiJyYnETY3NjMBMhcWFxEGBwYjISInJjURNDc2MwQ5GBAQAXD8gAFQ/ncXDxABARAPFwPwGBAQAQEQEBj+QhgSDw8SGAMkEBEX/ngBT/zxcBARFwOAFxEQ/dAQEBj+sBcREBARFwFQGBAQAAABABEAOAL9AyQALgAACQEWFRQHBgcGIyImJwkBBgcGIyInJicmNTQ3CQEmNTQ3NjMyFwkBNjMyFxYVFAcBvAE1CwsGBgcIBw0F/sr+ygYIBQgHBgcGCwsBNv7KCwsMDhALATYBNgsQDgwLCwGv/skLEA4LBgIEBgYBNv7KBgIEBAIGCw4QCwE2ATYMDw4MCwv+ygE2CwsLDw8KAAACABD/NAPYAzIACwA0AAABFhcVBgchJic1NjcDNDM3NhcWDwE3NhcWFxYXFgcGJyY3NicmJyYnJgcjBxcWBwYvASYnNgJMgw0Ng/5TgwwMgxABoiEjHRtXwXptbkVFDAsxFSolDScJCTg3V1hiArdWHRohI60QAQEBQQyD74INDYLvgwwBJAGvHRohI14BBDg3ZmZ6enAnDhUqWmJhUlAtLQMBUSEjHRuhDhcTAAAAAAIAKv80A6oDMgALADQAAAEWFxUGByEmJzU2NwAXBg8BBicmPwEnIyYHBgcGBwYXFgcGJyY3Njc2NzYfAScmNzYfATIVAxqDDQ2D/lODDAyDAhEBARCtIyEaHVa3AmJYVzc4CQknDSUqFTELDEVFbm16wVcbHSMhogEBQQyD74INDYLvgwwBGBMXDqEbHSMhUQEDLS1QUmFiWioVDidwenpmZjc4BAFeIyEaHa8BAAAAEAAU/zQEHgMkAAMABwALAA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUBESMRBSURJQURBREUAZ7+jAFL/uQTAY4WFhYWFhYWFhYWFhYWFhYWFhYWAaMV/s8Bnf5jAXT+tcwD8JP9NgMJ/LhqAnT9TAL0/QwDEUxMZExMZExMZExMaU1NY0xMZUxMZExMYUxMZExMA2n9DAL0FZP8EJM/A0hq/YoAAA4AFP8wBBQDJAADAAcACwAPABMAFwAbAB8AIwAnACsALwAzADcAABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUTJRElFAGe/owBS/7kEwGOFhYWFhYWFhYWFhYWFhYWFhYWFlMBnf5jzAPwk/02Awn8uGoCdP1MAvT9DAMRTExkTExkTExkTExpTU1jTExlTExkTExhTExkTEwDUJP8EJMAAQAAAAEAAI/vQAJfDzz1CAsEAAAAAADheX2WAAAAAOF5fZb/vv8wBhwDuAAAAAgAAgAAAAAAAAABAAADLP8sAFwGLP++/7sGHAABAAAAAAAAAAAAAAAAAAAAIQQAAGcD5gBpBQAAQAUAAEAGAABABgAAQAQAAOAEgABABAAAQAYAAEAGAAA9A+AAQwSAAEYEAACABAAAQASAAEoDgABDBMAAQATAAEAEAABABgAAQAQAAEIEAABEAlX/vgQAALIFIgBABiwADQYsAA0EggASBBoAEQPoABAD6AAqBC4AFAAUAAAAAAAeAE4AmgD2AhwDSANqA54DwAQ6BLwFfgWWBbAFwAXYBhYGKAaKBqwG5gccB04JNgmCCbgKdgsiC2YLtAwMDGQM0g0wAAAAAQAAACIBcQAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAlgABAAAAAAABAAoAAAABAAAAAAACAAYACgABAAAAAAADABsAEAABAAAAAAAEAAoAKwABAAAAAAAFAB4ANQABAAAAAAAGAAoAUwADAAEECQABABQAXQADAAEECQACAAwAcQADAAEECQADADYAfQADAAEECQAEABQAswADAAEECQAFADwAxwADAAEECQAGABQBA2ZvbnRlZGl0b3JNZWRpdW1Gb250RWRpdG9yIDEuMCA6IGZvbnRlZGl0b3Jmb250ZWRpdG9yVmVyc2lvbiAxLjA7IEZvbnRFZGl0b3IgKHYxLjApZm9udGVkaXRvcgBmAG8AbgB0AGUAZABpAHQAbwByAE0AZQBkAGkAdQBtAEYAbwBuAHQARQBkAGkAdABvAHIAIAAxAC4AMAAgADoAIABmAG8AbgB0AGUAZABpAHQAbwByAGYAbwBuAHQAZQBkAGkAdABvAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADsAIABGAG8AbgB0AEUAZABpAHQAbwByACAAKAB2ADEALgAwACkAZgBvAG4AdABlAGQAaQB0AG8AcgAAAAACAAAAAAAAADIAAAAAAAAAAAAAAAAAAAAAAAAAAAAiACIAAAECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEgASEBIgd1bmlFNjAxB3VuaUU2MDIHdW5pRTYwMwd1bmlFNjA0B3VuaUU2MDUHdW5pRTYwNgd1bmlFNjA3B3VuaUU2MDgHdW5pRTYwOQd1bmlFNjBBB3VuaUU2MEIHdW5pRTYwQwd1bmlFNjBEB3VuaUU2MEUHdW5pRTYwRgd1bmlFNjEwB3VuaUU2MTEHdW5pRTYxMgd1bmlFNjEzB3VuaUU2MTQHdW5pRTYxNQd1bmlFNjE2B3VuaUU2MTcHdW5pRTYxOAd1bmlFNjE5B3VuaUU2MUEHdW5pRTYxQgd1bmlFNjFDB3VuaUU2MUQHdW5pRTYxRQd1bmlFNjFGB3VuaUU2MjAHdW5pRTYyMQAA"},function(e,t){e.exports="data:application/octet-stream;base64,AAEAAAAKAIAAAwAgT1MvMjyUXLUAAACsAAAAYGNtYXDmWOe1AAABDAAAAUpnbHlmcAmjvwAAAlgAABpgaGVhZC/sPxEAABy4AAAANmhoZWEJZQU1AAAc8AAAACRobXR4lsQIRAAAHRQAAACGbG9jYXSybSAAAB2cAAAARm1heHAAMwFxAAAd5AAAACBuYW1lGVKlzAAAHgQAAAGtcG9zdJmP800AAB+0AAABbgAEBI4BkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAgAGAwAAAAAAAAAAAAEQAAAAAAAAAAAAAABQZkVkAMDmAeYjAyz/LABcAywA1AAAAAEAAAAAAxgAAAAAACAAAQAAAAMAAAADAAAAHAABAAAAAABEAAMAAQAAABwABAAoAAAABgAEAAEAAuYh5iP//wAA5gHmI///GgAZ3QABAAAAAAAAAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAZwBeA5MCzAAOAAAlLgEnIREhFS4BJzUhESEB4gIEAwGJ/TYJIAgDLP5PXggeCAIQ0QIHAvb9kgAAAAEAaf+8A5IC5QAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxrTRce0ZFe1w0RD9ulFNUlG4/P26UVEZ7XDQBUUZ7XDQ0XHtGVJRuPz9ulFRTlG4/RDRce0UAAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQ///A6ADfgCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAID/mAOAAyAABAAJAAAFESERIQEhESERAoABAP8A/gABAP8AaAOA/IADiPyAA4AAAAAAAQBA/34DwAL+AAMAAAkBEQEDwPyAA4ABPv5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAEIAAgO+A34AIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIACP++AGYCmgOXACkAUAB/AK8BKgE8AVkBcAAAEg4BIg4EFB4IPgouCSImEz4BNz4BNz4BNz4BNz4BJy4CNDUuAQcOAQcOAQcGFBUUFhceARcFJhYnLgEnJgYnLgEjJgYHIiYHDgEHFBYOAQcOAQcOAhQOAQcGFhceARc3PgE3IS4CNDUuAScqAScGNgcOAQcOAhQHDgEXHgEXHgEXMz4BNz4BNzY0PgI0PgE3JAYiBiIOBxQOFRQGFB4KMj4FMh4DMh4CMj4PNC4NIi4VIiYDDgEHBhYHDgEVBjIXHgEXNycXByMuAScuAS8BPgE3PgM3PgE3PgEzPgE/ATMXHgEXMz8BHwEHIyYWJyYiIy4BJzU3M8oGCQYYDQwHAgQDAhMPBwcFGwUNEwQFEwEEAgQCAgQCBQUCBQIIGAcI4hADAQYKBQcBBQEDAQ0NAgEDAgs5HwQbGwUKBAESEwQOBv7iCgoHBx0OCQMIAwUCCQcKAQQCCxYFAQIEAQICAQIDAQIDAQIPEAkSCjEUIQ0CJQYDAgYgDgMIHC0XCg4GCQEDAQEKAQEEAQUIERs2BwwHBQwCAQEEAQIDBv6DDwgLBQUGBQUJBgYODAUHJgkMCQgHBQYRCQQGBRAIBQEHBQUFAgMCBgoZDAMMFVYKBx0JFgw+DgoVCAkFGglCEgcPBQkMBQkEBQUIBQUBBQUBBQIGBBAJBQYKCgkFAw8nBQoGCAUFCQQFBwwGBAMNBAYFCAYJDIwHCgUHAgIBBAMDBAMJDjcBQAKHCxgJBAsIAQILEQMEBQgDAQECAwYDEiQSBDpUAwIHNwEDOwECkAkKCwIEAQ4KBwM6A5cBBhIQGRgYGB8ICiIPBQIFAgIBDAUDHgYFEAYwHQYODQYFBAcJEgX+/gYDAQMIAwYFCQEBAhM3GAIFBgUCHS8JAhQgCxcMCxULGCkPAwUCFQ4OFBEgCwcDAQEDAgQDAQEEFQsBAgMEAgUKBQMEBgcHCAQaNhUJCwcCCRsvGwIDBQIPIAUFBwMGBwoMAQEEBQIdLSUIEQgLEQoEBAQDDgQCAwQBAwUEBCE+BQUGAQUBBwUKDgQSBA0sBg8FBgsBBQ4KAgYIDxEFBwkRCQ4bDxAICg4RGwUFBAkBBAEFAgUBBgEFAQcEAgMCBQEMAQgGBwQUDgcPDDAKDQYIDQUVBQYHBQ0FBw8pCQgHDgYEEAYDDwkHAwcGBQIFAQQE/vYDAwUIAwoDBQQNBw4PBgFikwIGCgsFERY2CRoQAwYFAgICAwEBAQEDAUfXBwEFkwMCxAICAgYBCQ8MmgMAAAMAsgB+A04DawANABsALAAAATU0LwERFBcFNTQvASYFBwYdASU2NREHBh0BFAMnJgcFFxY/ATY3Nh8BFj8BATsnYQwBKiZ8DAF+fCYBKgxhJzZ9DAz+1GEnJn4CAwoJfScmYgGLjSwWN/6tDgeqbywWRwcHRxYsb6oHDgFTNxYsjQ0Bn0cHB6s4FhZIAQEDBUgWFjgAAAAABABA/5QE4gO4AAcADAAUABkAABcmJzY3FhcGJRY3NgEDJic2NxYXBgEAFxY38qMPD6OjDw/+335+PALBPaIPD6KjDw/75AK+PX5+OA+kog8PoqQlaGg7A4H8EA+kog8PoqQD4fx+OmhoAAAACgAN/zQGHAMkACoALgAyADYAOgA+AEIAUQBhAHgAAAUyFhcOASMhLgEnET4BNyEWFxYXFQYHBgcmJyY9ASYnJichBgcGBxEeARcBMzUjFyE1IQEzNSMXITUhEyE1IQczNSMlFhcWFw4BByYnJic2NzYTNjc2NyYnJicGBwYHFhcWExYVFA8BBiMiLwEmNTQ3NjMyHwE3NjIDYhIVAQEVEv1iS2kDA2lLA7pLNDUCAQoLERIKCgIfHyn8RiseHwEBPSsBG01NmwE2/sr+fE1NnAE1/suaATb+yppNTQNoelNSAwOlentSUwMDU1J7WT09AgI9PVlaPTwDAzw9/AwMog0PDwtuCwsNDw8MUYgNHjEVERMVA2lLAjZLaQICNTRLMhILCgEBCgsSMiofHgICHh8q/corPAICH05OTv7wTU1N/vFNTU3CA1JTenulAwNTUnt6U1L+CwM9PFpaPD0CAj08Wlo8PQEsDBAPC6QLC24LDw8NCwtSiAwAAAAKAA3/NAYcAyQAKgAuADIANgA6AD4AQgBRAF4AawAABTIWFw4BIyEuAScRPgE3IRYXFhcVBgcGByYnJj0BJicmJyEGBwYHER4BFwEzNSMXITUhATM1IxchNSERMzUjFyE1ISUWFxYXDgEHJicmJzY3NhMyNzY3AQYHBhUWFxY3Njc2NSYnJiciBwYHA2ISFQEBFRL9YktpAwNpSwO6SzQ1AgEKCxESCgoCHx8p/EYrHh8BAT0rARtNTZsBNv7K/nxNTZwBNf7LTU2aATb+ygLOelNSAwOlentSUwMDU1J7HRoaF/7dDAcIAzw9/BgODQI9PVknIiIdMRURExUDaUsCNktpAgI1NEsyEgsKAQEKCxIyKh8eAgIeHyr9yis8AgIfTk5O/vBNTU3+8U1NTcIDUlN6e6UDA1NSe3pTUv4LCAcNASMYGhodWjw9SxsjIydaPD0CDQ4YAAIAEv80BHIDJAAVACkAAAEyFxYXESMRIREhFSEiJyYnETY3NjMBMhcWFxEGBwYjISInJjURNDc2MwQ5GBAQAXD8gAFQ/ncXDxABARAPFwPwGBAQAQEQEBj+QhgSDw8SGAMkEBEX/ngBT/zxcBARFwOAFxEQ/dAQEBj+sBcREBARFwFQGBAQAAABABEAOAL9AyQALgAACQEWFRQHBgcGIyImJwkBBgcGIyInJicmNTQ3CQEmNTQ3NjMyFwkBNjMyFxYVFAcBvAE1CwsGBgcIBw0F/sr+ygYIBQgHBgcGCwsBNv7KCwsMDhALATYBNgsQDgwLCwGv/skLEA4LBgIEBgYBNv7KBgIEBAIGCw4QCwE2ATYMDw4MCwv+ygE2CwsLDw8KAAACABD/NAPYAzIACwA0AAABFhcVBgchJic1NjcDNDM3NhcWDwE3NhcWFxYXFgcGJyY3NicmJyYnJgcjBxcWBwYvASYnNgJMgw0Ng/5TgwwMgxABoiEjHRtXwXptbkVFDAsxFSolDScJCTg3V1hiArdWHRohI60QAQEBQQyD74INDYLvgwwBJAGvHRohI14BBDg3ZmZ6enAnDhUqWmJhUlAtLQMBUSEjHRuhDhcTAAAAAAIAKv80A6oDMgALADQAAAEWFxUGByEmJzU2NwAXBg8BBicmPwEnIyYHBgcGBwYXFgcGJyY3Njc2NzYfAScmNzYfATIVAxqDDQ2D/lODDAyDAhEBARCtIyEaHVa3AmJYVzc4CQknDSUqFTELDEVFbm16wVcbHSMhogEBQQyD74INDYLvgwwBGBMXDqEbHSMhUQEDLS1QUmFiWioVDidwenpmZjc4BAFeIyEaHa8BAAAAEAAU/zQEHgMkAAMABwALAA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUBESMRBSURJQURBREUAZ7+jAFL/uQTAY4WFhYWFhYWFhYWFhYWFhYWFhYWAaMV/s8Bnf5jAXT+tcwD8JP9NgMJ/LhqAnT9TAL0/QwDEUxMZExMZExMZExMaU1NY0xMZUxMZExMYUxMZExMA2n9DAL0FZP8EJM/A0hq/YoAAA4AFP8wBBQDJAADAAcACwAPABMAFwAbAB8AIwAnACsALwAzADcAABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUTJRElFAGe/owBS/7kEwGOFhYWFhYWFhYWFhYWFhYWFhYWFlMBnf5jzAPwk/02Awn8uGoCdP1MAvT9DAMRTExkTExkTExkTExpTU1jTExlTExkTExhTExkTEwDUJP8EJMAAQAAAAEAAI/vQAJfDzz1CAsEAAAAAADheX2WAAAAAOF5fZb/vv8wBhwDuAAAAAgAAgAAAAAAAAABAAADLP8sAFwGLP++/7sGHAABAAAAAAAAAAAAAAAAAAAAIQQAAGcD5gBpBQAAQAUAAEAGAABABgAAQAQAAOAEgABABAAAQAYAAEAGAAA9A+AAQwSAAEYEAACABAAAQASAAEoDgABDBMAAQATAAEAEAABABgAAQAQAAEIEAABEAlX/vgQAALIFIgBABiwADQYsAA0EggASBBoAEQPoABAD6AAqBC4AFAAUAAAAAAAeAE4AmgD2AhwDSANqA54DwAQ6BLwFfgWWBbAFwAXYBhYGKAaKBqwG5gccB04JNgmCCbgKdgsiC2YLtAwMDGQM0g0wAAAAAQAAACIBcQAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAlgABAAAAAAABAAoAAAABAAAAAAACAAYACgABAAAAAAADABsAEAABAAAAAAAEAAoAKwABAAAAAAAFAB4ANQABAAAAAAAGAAoAUwADAAEECQABABQAXQADAAEECQACAAwAcQADAAEECQADADYAfQADAAEECQAEABQAswADAAEECQAFADwAxwADAAEECQAGABQBA2ZvbnRlZGl0b3JNZWRpdW1Gb250RWRpdG9yIDEuMCA6IGZvbnRlZGl0b3Jmb250ZWRpdG9yVmVyc2lvbiAxLjA7IEZvbnRFZGl0b3IgKHYxLjApZm9udGVkaXRvcgBmAG8AbgB0AGUAZABpAHQAbwByAE0AZQBkAGkAdQBtAEYAbwBuAHQARQBkAGkAdABvAHIAIAAxAC4AMAAgADoAIABmAG8AbgB0AGUAZABpAHQAbwByAGYAbwBuAHQAZQBkAGkAdABvAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADsAIABGAG8AbgB0AEUAZABpAHQAbwByACAAKAB2ADEALgAwACkAZgBvAG4AdABlAGQAaQB0AG8AcgAAAAACAAAAAAAAADIAAAAAAAAAAAAAAAAAAAAAAAAAAAAiACIAAAECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEgASEBIgd1bmlFNjAxB3VuaUU2MDIHdW5pRTYwMwd1bmlFNjA0B3VuaUU2MDUHdW5pRTYwNgd1bmlFNjA3B3VuaUU2MDgHdW5pRTYwOQd1bmlFNjBBB3VuaUU2MEIHdW5pRTYwQwd1bmlFNjBEB3VuaUU2MEUHdW5pRTYwRgd1bmlFNjEwB3VuaUU2MTEHdW5pRTYxMgd1bmlFNjEzB3VuaUU2MTQHdW5pRTYxNQd1bmlFNjE2B3VuaUU2MTcHdW5pRTYxOAd1bmlFNjE5B3VuaUU2MUEHdW5pRTYxQgd1bmlFNjFDB3VuaUU2MUQHdW5pRTYxRQd1bmlFNjFGB3VuaUU2MjAHdW5pRTYyMQAA"},function(e,t,n){var i,r,a,o={},s=(i=function(){return window&&document&&document.all&&!window.atob},function(){return r=void 0===r?i.apply(this,arguments):r}),l=(a={},function(e,t){if("function"==typeof e)return e();if(void 0===a[e]){if(t=function(e,t){return(t||document).querySelector(e)}.call(this,e,t),window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}a[e]=t}return a[e]}),u=null,c=0,h=[],d=n(273);function f(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=o[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(v(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(v(i.parts[a],t));o[i.id]={id:i.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0];a={css:a[1],media:a[2],sourceMap:a[3]},i[o]?i[o].parts.push(a):n.push(i[o]={id:o,parts:[a]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=h[h.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),h.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");i=l(e.insertAt.before,n),n.insertBefore(t,i)}}function g(e){null!==e.parentNode&&(e.parentNode.removeChild(e),0<=(e=h.indexOf(e)))&&h.splice(e,1)}function _(e){var t,i=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce&&(t=n.nc)&&(e.attrs.nonce=t),y(i,e.attrs),m(e,i),i}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function v(e,t){var n,i,r,a,o;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}return r=t.singleton?(a=c++,n=u=u||_(t),i=b.bind(null,n,a,!1),b.bind(null,n,a,!0)):e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=t,o=document.createElement("link"),void 0===a.attrs.type&&(a.attrs.type="text/css"),a.attrs.rel="stylesheet",y(o,a.attrs),m(a,o),i=function(e,t,n){var i=n.css,r=(n=n.sourceMap,void 0===t.convertToAbsoluteUrls&&n);(t.convertToAbsoluteUrls||r)&&(i=d(i)),n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t=new Blob([i],{type:"text/css"}),r=e.href,e.href=URL.createObjectURL(t),r&&URL.revokeObjectURL(r)}.bind(null,n=o,t),function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=_(t),i=function(e,t){var n=t.css;if((t=t.media)&&e.setAttribute("media",t),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){g(n)}),i(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap||i(e=t):r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return f(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var a=n[r];(s=o[a.id]).refs--,i.push(s)}var s;for(e&&f(p(e,t),t),r=0;r<i.length;r++)if(0===(s=i[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}},A=[];var A,E=function(e,t){return A[e]=t,A.filter(Boolean).join("\n")};function b(e,t,n,i){n=n?"":i.css,e.styleSheet?e.styleSheet.cssText=E(t,n):(i=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i))}},function(e,t){e.exports=function(e){var t,n,i="undefined"!=typeof window&&window.location;if(i)return e&&"string"==typeof e?(t=i.protocol+"//"+i.host,n=t+i.pathname.replace(/\/[^\/]*$/,"/"),e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,i){return i=i.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t})),/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(e=0===i.indexOf("//")?i:0===i.indexOf("/")?t+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(e)+")")}))):e;throw new Error("fixUrls requires window.location")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n.r(t);var i=n(23),r=n.n(i);function a(){return r()('/*! WebPlayer built @6/25/2024, 8:30:15 PM */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,r){r.r(t);let n={WASM_LOAD_FINISH:0,DECRYPE_CONTENT:1,WAMS_ERROR:111},o={GET_DECRYPE_CONTENT:0,DESTROR_WAMS:1,LOAD_WAMS_JS:111};self.Module={onRuntimeInitialized:function(){self.decrype&&self.decrype.onWasmLoaded()},onAbort:function(e){self.postMessage({t:n.WAMS_ERROR,data:{msg:""+e,errorType:(void 0).NOT_SUPPORT,event:(void 0).WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}},self.wasmPath=null;self.onmessage=e=>{var t=e["data"];switch(t.t){case o.GET_DECRYPE_CONTENT:self.decrype.getDecrypeContent(t.encrypeKey);break;case o.LOAD_WAMS_JS:self.decrype.loadJs(t.pathUrl);break;case o.DESTROR_WAMS:self.decrype.destroy()}},self.decrype=new class{constructor(){this.wasmLoaded=!1,this.privateKey="LbhexgsgihBYYM8rBQUNM9RAYjXdFPdeiwTmww+Mw2gSCXDqexH6B+kfIglVjnAH\\nX9UIgPVtu10e4Ls=\\n"}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:n.WASM_LOAD_FINISH}))}loadJs(e){self.wasmPath=e,self.importScripts(e+"license.js")}getDecrypeContent(e){e=Module.getLicenseStr(e,this.privateKey);self.postMessage({t:n.DECRYPE_CONTENT,data:e})}destroy(){Module.HEAP8&&Module.HEAP8.buffer&&(Module.HEAP8.buffer=null)}}}]);',"Worker",void 0,n.p+"license.worker.worker.js")}let o="linceseError",s="CheckPass",l={NO_APPID:"noAppid",NO_LICENSE:"noLicense",ERROR_LICENSE_URL:"errorLicenseUrl",WASM_ERROR:"wasmError",CHECK_SUCCESS:"checkSuccess",DOMAIN_FAIL:"domainFail",IS_EXPIRED:"isExpired",FETCH_ERROR:"fetchError",BASE_FUNC_NOT_SUPPORT:"baseFuncNotSupport",EXPIRED_COUNT_DOWM:"expiredCountDown"},u={CHECK_SUCCESS:0,NO_APPID:51,NO_LICENSE:52,ERROR_LICENSE_URL:53,DOMAIN_FAIL:54,IS_EXPIRED:55,FETCH_ERROR:56,BASE_FUNC_NOT_SUPPORT:57,EXPIRED_COUNT_DOWM:58},c="NO_APPID",h="NO_LICENSE",d="ERROR_LICENSE_URL",f="DOMAIN_FAIL",p="CHECK_SUCCESS",m="IS_EXPIRED",g="FETCH_ERROR",_="BASE_FUNC_NOT_SUPPORT",y="EXPIRED_COUNT_DOWM",v=0,A=1,E=111,b=0,w=1,T=111;var S=n(20),R=(i=n(69),n.n(i)),I=(i=n(5),n.n(i));t.default=class{constructor(e,t){this.licenseUrl=e,this.appid=t,this.worker=null,this.onMessage=null,this.localDomain=["127.0.0.1","localhost"],this.mediaInfo=null,this.isHighVersion=null}async init(){var e;this.localDomain.includes(location.hostname)||/^(\d{1,3}\.){3}\d{1,3}$/.test(location.hostname)?this.onMessage&&this.onMessage({code:u.CHECK_SUCCESS,event:l.CHECK_SUCCESS}):this.appid?this.licenseUrl?(e=this.licenseUrl.split("/").pop(),`player${R()(this.appid)}.license`!=e?this.onMessage&&this.onMessage(this.setError(d,o)):this.loadlicenseWasm()):this.onMessage&&this.onMessage(this.setError(h,o)):this.onMessage&&this.onMessage(this.setError(c,o))}async getlicenseContent(){var e=await fetch(this.licenseUrl);200!==e.status?this.onMessage(this.setError(g,o)):200===e.status&&(e=await e.text(),this.worker.postMessage({t:b,encrypeKey:e}))}loadlicenseWasm(){this.worker=new a;var e=Object(S.getPlayerPath)();this.worker.postMessage({t:T,pathUrl:e}),this.worker.onmessage=e=>{var t=e.data;switch(t.t){case v:this.getlicenseContent();break;case A:this.checkDecrypeContent(t.data);break;case E:this.onMessage&&this.onMessage(t.data)}}}checkDecrypeContent(e){var{vc:e,expireTime:t,funcCodeList:n}=JSON.parse(e);return this._checkHostName(e)?(this.isHighVersion=!!(n&&1<n.length),this._checkFuncList(),Date.now()-6048e5>new Date(t)?this.onMessage&&this.onMessage(this.setError(m,o)):Date.now()>new Date(t)?(e=parseInt((Date.now()-new Date(t))/864e5),this.onMessage&&this.onMessage(this.setError(y,o,e))):void(this.onMessage&&this.onMessage(this.setError(p,s)))):this.onMessage&&this.onMessage(this.setError(f,o))}_checkHostName(e){var t=[],n=location.hostname.split(".");let i=!1;for(let e=0;e<n.length;e++){var r="";for(let t=e+1;t<n.length;t++)r=r?r+"."+n[t]:n[e]+"."+n[t];r&&(0!=e&&(r="*."+r),t.push(r))}for(let n=0;n<t.length;n++)if(e==R()(t[n]+R()(this.appid))){i=!0;break}return i}setMediaData(e){this.mediaInfo=e,this._checkFuncList()}_checkFuncList(){var e;this.mediaInfo&&!this.isHighVersion&&(e=this.mediaInfo,0==this.isHighVersion)&&(e.formatType&&(e.formatType==I.a.PLAYER_IN_TYPE_TS||e.videoCodec==I.a.CODEC_H265||e.videoCodec==I.a.CODEC_AV1||e.videoCodec==I.a.CODEC_VVC)||e.isVR)&&this.onMessage&&this.onMessage(this.setError(_,o))}setError(e,t,n){return{code:u[e],event:l[e],errorType:t,type:e,expireDay:n}}destroy(){this.worker&&(this.worker.postMessage({t:w}),this.worker)&&this.worker.terminate(),this.worker=null,this.onMessage=null,this.mediaInfo=null,this.isHighVersion=null}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(139)}],n={},e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=336);function e(i){var r;return(n[i]||(r=n[i]={i:i,l:!1,exports:{}},t[i].call(r.exports,r,r.exports,e),r.l=!0,r)).exports}var t,n},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cyberplayer=t():e.cyberplayer=t();