/*! WebPlayer built @3/25/2024, 2:47:27 PM */
var e,t;e=window,t=function(){return t=[function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return r})),i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}));const n={WASM_LOAD_FINISH:0,DECODE_FINISH:1,DEOCDE_INIT_FINISH:2,SET_FRAME:3,WASM_POST_RUN:11,DEMUXER_INIT_FINISH:12,POST_DEMUXER_INFO:13,DEMUXER_FINISH:14,DEMUXER_ERROR:20,WAMS_ERROR:111},r={INIT_DECODER:0,DECODE_VIDEO:1,RETURN_VIDEO_BUFFER:2,INIT_DEMUXER:11,DEMUXER_BOX:12,GET_DEMUXER_INFO:13,RELEASE_DECODE:14,RELEASE_DEMUXER:15,LOAD_WAMS_JS:111},a={WASM_LOAD_FINISH:0,SNIFF_INIT_FINISH:1,POST_PROBEDATA:2,POST_NALUDATA:3,POST_AACDATA:4,POST_FRAMEDATA:5,POST_NALU_LENGTH:6,WAMS_ERROR:111},s={INIT_DECODER:0,PUSH_SNIFF_DATA:1,GET_SNIFF_PACKET:2,DECODE_VIDEO:3,GET_NALU_LENGTH:4,GET_SNIFF_FLV_PACKE:5,GET_BUFFER_LENGTH:6,PUSH_SNIFF_FLV_PACKET:7,RELEASE_SNIFF:8,LOAD_WAMS_JS:111}},function(e,t,i){i=[i(15),i(2),i(95),i(70),i(32),i(58),i(96),i(97),i(44),i(141),i(142),i(143)],t=function(e,t,i,n,r,a,s,o,l,h,u,d){var c={log:function(){window.console&&console.log},between:function(e,t,i){return Math.max(Math.min(e,i),t)},foreach:function(e,t){for(var i in e)("function"!==c.typeOf(e.hasOwnProperty)||e.hasOwnProperty(i))&&t(i,e[i])}};return c.indexOf=t.indexOf,c.noop=function(){},c.seconds=e.seconds,c.prefix=e.prefix,c.suffix=e.suffix,t.extend(c,a,s,l,i,o,n,r,h,u,d),c}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){t=function(){function e(e){return null==e?A.identity:A.isFunction(e)?e:A.property(e)}function t(t){return function(i,n,r){var a={};return n=e(n),E(i,(function(e,s){s=n.call(r,e,s,i),t(a,s,e)})),a}}function i(){}var n={},r=Array.prototype,a=Object.prototype,s=Function.prototype,o=r.slice,l=r.concat,h=a.toString,u=a.hasOwnProperty,d=r.map,c=r.reduce,f=r.forEach,p=r.filter,m=r.every,g=r.some,_=r.indexOf,y=(a=Array.isArray,Object.keys),v=s.bind,A=function(e){return e instanceof A?e:this instanceof A?void 0:new A(e)},E=A.each=A.forEach=function(e,t,i){if(null!=e)if(f&&e.forEach===f)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,a=e.length;r<a;r++)if(t.call(i,e[r],r,e)===n)return}else{var s=A.keys(e);for(r=0,a=s.length;r<a;r++)if(t.call(i,e[s[r]],s[r],e)===n)return}return e},b=(A.map=A.collect=function(e,t,i){var n=[];if(null!=e){if(d&&e.map===d)return e.map(t,i);E(e,(function(e,r,a){n.push(t.call(i,e,r,a))}))}return n},A.reduce=A.foldl=A.inject=function(e,t,i,n){var r=2<arguments.length;if(null==e&&(e=[]),c&&e.reduce===c)return n&&(t=A.bind(t,n)),r?e.reduce(t,i):e.reduce(t);if(E(e,(function(e,a,s){r?i=t.call(n,i,e,a,s):(i=e,r=!0)})),r)return i;throw new TypeError("Reduce of empty array with no initial value")},A.find=A.detect=function(e,t,i){var n;return b(e,(function(e,r,a){if(t.call(i,e,r,a))return n=e,!0})),n},A.filter=A.select=function(e,t,i){var n=[];if(null!=e){if(p&&e.filter===p)return e.filter(t,i);E(e,(function(e,r,a){t.call(i,e,r,a)&&n.push(e)}))}return n},A.reject=function(e,t,i){return A.filter(e,(function(e,n,r){return!t.call(i,e,n,r)}),i)},A.compact=function(e){return A.filter(e,A.identity)},A.every=A.all=function(e,t,i){t=t||A.identity;var r=!0;return null==e?r:m&&e.every===m?e.every(t,i):(E(e,(function(e,a,s){if(!(r=r&&t.call(i,e,a,s)))return n})),!!r)},A.some=A.any=function(e,t,i){t=t||A.identity;var r=!1;return null==e?r:g&&e.some===g?e.some(t,i):(E(e,(function(e,a,s){if(r=r||t.call(i,e,a,s))return n})),!!r)}),w=(A.size=function(e){return null==e?0:(e.length===+e.length?e:A.keys(e)).length},A.last=function(e,t,i){if(null!=e)return null==t||i?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},A.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},A.before=function(e,t){var i;return function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},A.groupBy=t((function(e,t,i){A.has(e,t)?e[t].push(i):e[t]=[i]})),A.indexBy=t((function(e,t,i){e[t]=i})),A.sortedIndex=function(t,i,n,r){for(var a=(n=e(n)).call(r,i),s=0,o=t.length;s<o;){var l=s+o>>>1;n.call(r,t[l])<a?s=1+l:o=l}return s},b=A.some=A.any=function(e,t,i){t=t||A.identity;var r=!1;return null==e?r:g&&e.some===g?e.some(t,i):(E(e,(function(e,a,s){if(r=r||t.call(i,e,a,s))return n})),!!r)},A.contains=A.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=A.values(e)),0<=A.indexOf(e,t))},A.pluck=function(e,t){return A.map(e,A.property(t))},A.where=function(e,t){return A.filter(e,A.matches(t))},A.findWhere=function(e,t){return A.find(e,A.matches(t))},A.max=function(e,t,i){var n,r;return!t&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535?Math.max.apply(Math,e):(r=n=-1/0,E(e,(function(e,a,s){a=t?t.call(i,e,a,s):e,r<a&&(n=e,r=a)})),n)},A.difference=function(e){var t=l.apply(r,o.call(arguments,1));return A.filter(e,(function(e){return!A.contains(t,e)}))},A.without=function(e){return A.difference(e,o.call(arguments,1))},A.indexOf=function(e,t,i){if(null!=e){var n=0,r=e.length;if(i){if("number"!=typeof i)return e[n=A.sortedIndex(e,t)]===t?n:-1;n=i<0?Math.max(0,r+i):i}if(_&&e.indexOf===_)return e.indexOf(t,i);for(;n<r;n++)if(e[n]===t)return n}return-1},A.bind=function(e,t){var n,r;if(v&&e.bind===v)return v.apply(e,o.call(arguments,1));if(A.isFunction(e))return n=o.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(o.call(arguments)));i.prototype=e.prototype;var a=new i,s=(i.prototype=null,e.apply(a,n.concat(o.call(arguments))));return Object(s)===s?s:a};throw new TypeError},A.partial=function(e){var t=o.call(arguments,1);return function(){for(var i=0,n=t.slice(),r=0,a=n.length;r<a;r++)n[r]===A&&(n[r]=arguments[i++]);for(;i<arguments.length;)n.push(arguments[i++]);return e.apply(this,n)}},A.once=A.partial(A.before,2),A.memoize=function(e,t){var i={};return t=t||A.identity,function(){var n=t.apply(this,arguments);return A.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},A.delay=function(e,t){var i=o.call(arguments,2);return setTimeout((function(){return e.apply(null,i)}),t)},A.defer=function(e){return A.delay.apply(A,[e,1].concat(o.call(arguments,1)))},A.throttle=function(e,t,i){function n(){l=!1===i.leading?0:A.now(),o=null,s=e.apply(r,a),r=a=null}var r,a,s,o=null,l=0;return i=i||{},function(){var h=A.now(),u=(l||!1!==i.leading||(l=h),t-(h-l));return r=this,a=arguments,u<=0?(clearTimeout(o),o=null,l=h,s=e.apply(r,a),r=a=null):o||!1===i.trailing||(o=setTimeout(n,u)),s}},A.keys=function(e){if(!A.isObject(e))return[];if(y)return y(e);var t,i=[];for(t in e)A.has(e,t)&&i.push(t);return i},A.invert=function(e){for(var t={},i=A.keys(e),n=0,r=i.length;n<r;n++)t[e[i[n]]]=i[n];return t},A.defaults=function(e){return E(o.call(arguments,1),(function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])})),e},A.extend=function(e){return E(o.call(arguments,1),(function(t){if(t)for(var i in t)e[i]=t[i]})),e},A.pick=function(e){var t={},i=l.apply(r,o.call(arguments,1));return E(i,(function(i){i in e&&(t[i]=e[i])})),t},A.omit=function(e){var t,i={},n=l.apply(r,o.call(arguments,1));for(t in e)A.contains(n,t)||(i[t]=e[t]);return i},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.isArray=a||function(e){return"[object Array]"==h.call(e)},A.isObject=function(e){return e===Object(e)},E(["Arguments","Function","String","Number","Date","RegExp"],(function(e){A["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}})),A.isArguments(arguments)||(A.isArguments=function(e){return!(!e||!A.has(e,"callee"))}),A.isFunction=function(e){return"function"==typeof e},A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&e!=+e},A.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==h.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,t){return u.call(e,t)},A.identity=function(e){return e},A.constant=function(e){return function(){return e}},A.property=function(e){return function(t){return t[e]}},A.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},A.matches=function(e){return function(t){if(t!==e)for(var i in e)if(e[i]!==t[i])return!1;return!0}},A.now=Date.now||function(){return(new Date).getTime()},A.result=function(e,t){if(null!=e)return t=e[t],A.isFunction(t)?t.call(e):t},0);return A.uniqueId=function(e){var t=++w+"";return e?e+t:t},A}.apply(t,[]),void 0!==t&&(e.exports=t)},,function(e,t,i){"use strict";i.r(t),i.d(t,"ErrorTypes",(function(){return n})),i.d(t,"ErrorDetails",(function(){return r})),i.d(t,"ErrorEvent",(function(){return a})),i.d(t,"MsgCode",(function(){return s}));const n={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},r={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"demuxer_error",OPEN_MEDIA_FAILED:"failed to open media"},a={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError"},s={DEOCDE_NOT_SUPPORT:4,UNKNOW_ERROR:0,PLAY_ERROR:9,DEMUXER_ERROR:10}},function(e,t){e.exports={H265WEBJS_COMPILE_MULTI_THREAD_SHAREDBUFFER:0,DEFAULT_PLAYERE_LOAD_TIMEOUT:20,DEFAILT_WEBGL_PLAY_ID:"glplayer",PLAYER_IN_TYPE_MP4:"mp4",PLAYER_IN_TYPE_FLV:"flv",PLAYER_IN_TYPE_HTTPFLV:"httpflv",PLAYER_IN_TYPE_RAW_265:"raw265",PLAYER_IN_TYPE_TS:"ts",PLAYER_IN_TYPE_MPEGTS:"mpegts",PLAYER_IN_TYPE_M3U8:"hls",PLAYER_IN_TYPE_M3U8_VOD:"m3u8",PLAYER_IN_TYPE_M3U8_LIVE:"hls",PLAYER_IN_TYPE_RTC:"rtc",APPEND_TYPE_STREAM:0,APPEND_TYPE_FRAME:1,APPEND_TYPE_SEQUENCE:2,DEFAULT_WIDTH:600,DEFAULT_HEIGHT:600,DEFAULT_FPS:30,DEFAULT_FRAME_DUR:40,DEFAULT_FIXED:!1,DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNELS:2,DEFAULT_CONSU_SAMPLE_LEN:20,PLAYER_MODE_VOD:"vod",PLAYER_MODE_NOTIME_LIVE:"live",AUDIO_MODE_ONCE:"ONCE",AUDIO_MODE_SWAP:"SWAP",DEFAULT_STRING_LIVE:"LIVE",CODEC_H265:0,CODEC_H264:1,CODEC_AV1:2,PLAYER_CORE_TYPE_DEFAULT:0,PLAYER_CORE_TYPE_CNATIVE:1,PLAYER_CNATIVE_VOD_RETRY_MAX:7,URI_PROTOCOL_WEBSOCKET:"ws",URI_PROTOCOL_WEBSOCKET_DESC:"websocket",URI_PROTOCOL_HTTP:"http",URI_PROTOCOL_HTTP_DESC:"http",FETCH_FIRST_MAX_TIMES:5,FETCH_HTTP_FLV_TIMEOUT_MS:7e3,V_CODEC_NAME_AV1:128,V_CODEC_NAME_HEVC:265,V_CODEC_NAME_AVC:264,V_CODEC_NAME_UNKN:500,A_CODEC_NAME_AAC:112,A_CODEC_NAME_MP3:113,A_CODEC_NAME_UNKN:500,CACHE_NO_LOADCACHE:1001,CACHE_WITH_PLAY_SIGN:1002,CACHE_WITH_NOPLAY_SIGN:1003,V_CODEC_AVC_DEFAULT_FPS:25}},function(e,t,i){void 0!==(t=function(){return{COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_H265WEB_COVERLOADED:"coverImageLoaded",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_SEEK_START:"seekStart",JWPLAYER_MEDIA_SEEK_FINISHED:"seekFinished",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_SCREENSHOT:"screenshot",JWPLAYER_CaptureFrameFinished:"captureFrameFinished",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_CONNECTING:"connecting",JWPLAYER_CONNECT_FAILD:"connectFaild",JWPLAYER_NO_LIVE_STREAM:"noLiveStream",JWPLAYER_ALIVE:"alive",JWPLAYER_VIDEO_SEI:"sei_info",JWPLAYER_LIVE_STOP:"liveStop",JWPLAYER_PLAYBACKRATE:"playbackRate",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick",JWPLAYER_CUEPOINT:"cuepoint",JWPLAYER_SEEK_FORWARD_FORBIDDEN:"seekForwardForbidden",JWPLAYER_PERFORMANCE:"performance",JWPLAYER_RTCEVENT:"rtcEvent",JWPLAYER_HLS_QUALITYLIST_CHANGE:"hls_qualitylist_change",JWPLAYER_HLS_LEVEL_UPDATED:"hls_level_updated",JWPLAYER_CHANGE_LANGs:"change_lang",touchEvents:{DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"}}}.apply(t,[]))&&(e.exports=t)},function(e,t,i){i=[i(2)],t=function(e){var t=[].slice,i=/\s+/,n=function(e,t,n,r){if(n){if("object"==typeof n){for(var a in n)e[t].apply(e,[a,n[a]].concat(r));return!1}if(i.test(n)){for(var s=n.split(i),o=0,l=s.length;o<l;o++)e[t].apply(e,[s[o]].concat(r));return!1}}return!0},r=function(e,t,i){var n,r=-1,a=e.length,s=t[0],o=t[1],l=t[2];switch(t.length){case 0:for(;++r<a;)(n=e[r]).callback.call(n.context||i);return;case 1:for(;++r<a;)(n=e[r]).callback.call(n.context||i,s);return;case 2:for(;++r<a;)(n=e[r]).callback.call(n.context||i,s,o);return;case 3:for(;++r<a;)(n=e[r]).callback.call(n.context||i,s,o,l);return;default:for(;++r<a;)(n=e[r]).callback.apply(n.context||i,t);return}},a=function(e,t,i){for(var n,r=-1,a=e.length;++r<a;)try{(n=e[r]).callback.apply(n.context||i,t)}catch(e){}};return{on:function(e,t,i){return n(this,"on",e,[t,i])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i})),this},once:function(t,i,r){var a,s;return n(this,"once",t,[i,r])&&i?(a=this,(s=e.once((function(){a.off(t,s),i.apply(this,arguments)})))._callback=i,this.on(t,s,r)):this},off:function(t,i,r){var a,s,o,l,h,u,d,c;if(this._events&&n(this,"off",t,[i,r]))if(t||i||r){for(h=0,u=(l=t?[t]:e.keys(this._events)).length;h<u;h++)if(t=l[h],o=this._events[t]){if(this._events[t]=a=[],i||r)for(d=0,c=o.length;d<c;d++)s=o[d],(i&&i!==s.callback&&i!==s.callback._callback||r&&r!==s.context)&&a.push(s);a.length||delete this._events[t]}}else this._events=void 0;return this},trigger:function(e){var i,a,s;return this._events&&(i=t.call(arguments,1),n(this,"trigger",e,i))&&(a=this._events[e],s=this._events.all,a&&r(a,i,this),s)&&r(s,arguments,this),this},triggerSafe:function(e){var i,r,s;return this._events&&(i=t.call(arguments,1),n(this,"trigger",e,i))&&(r=this._events[e],s=this._events.all,r&&a(r,i,this),s)&&a(s,arguments,this),this}}}.apply(t,i),void 0!==t&&(e.exports=t)},,,,,function(e,t,i){const n=[{format:"mp4",value:"mp4",core:(i=i(5)).PLAYER_CORE_TYPE_CNATIVE},{format:"mov",value:"mp4",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"mkv",value:"mp4",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"flv",value:"flv",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"m3u8",value:"hls",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"m3u",value:"hls",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"ts",value:"ts",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"ps",value:"ts",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"mpegts",value:"ts",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"hevc",value:"raw265",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"h265",value:"raw265",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"265",value:"raw265",core:i.PLAYER_CORE_TYPE_DEFAULT},{format:"mp3",value:"mp3",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"aac",value:"aac",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"flac",value:"flac",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"ogg",value:"ogg",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"wav",value:"wav",core:i.PLAYER_CORE_TYPE_CNATIVE},{format:"opus",value:"opus",core:i.PLAYER_CORE_TYPE_CNATIVE}],r=[{format:i.URI_PROTOCOL_HTTP,value:i.URI_PROTOCOL_HTTP_DESC},{format:i.URI_PROTOCOL_WEBSOCKET,value:i.URI_PROTOCOL_WEBSOCKET_DESC}];e.exports={frameDataAlignCrop:function(e,t,i,n,r,a,s,o){if(0==e-n)return[a,s,o];var l=n*r,h=l/4,u=new Uint8Array(l),d=new Uint8Array(h),c=new Uint8Array(h),f=n,p=n/2;for(let t=0;t<r;t++)u.set(a.subarray(t*e,f),t*r);for(let e=0;e<r/2;e++)d.set(s.subarray(e*t,p),e*r/2);for(let e=0;e<r/2;e++)c.set(o.subarray(e*i,p),e*r/2);return[u,d,c]},GetUriFormat:function(e){if(null!=e)for(let r=0;r<n.length;r++){var t=n[r],i="."+t.format;if(0<=e.toLocaleLowerCase().indexOf(i))return t.value}return n[0].value},GetFormatPlayCore:function(e){if(null!=e)for(let i=0;i<n.length;i++){var t=n[i];if(t.value===e)return t.core}return n[0].core},GetUriProtocol:function(e){if(null!=e)for(let n=0;n<r.length;n++){var t=r[n],i=t.format+"[s]{0,}://";if(0<=e.search(i))return t.value}return r[0].value},GetMsTime:function(){return(new Date).getTime()},GetScriptPath:function(e){return e=[(e=(e=e.toString()).match(/^\s*function\s*\(\s*\)\s*\{(([\s\S](?!\}$))*[\s\S])/))[1]],window.URL.createObjectURL(new Blob(e,{type:"text/javascript"}))},BrowserJudge:function(){let e=window.document,t=window.navigator.userAgent.toLowerCase(),i=e.documentMode,n=window.chrome||!1,r={agent:t,isIE:/msie/.test(t),isGecko:0<t.indexOf("gecko")&&t.indexOf("like gecko")<0,isWebkit:0<t.indexOf("webkit"),isStrict:"CSS1Compat"===e.compatMode,supportSubTitle:function(){return"track"in e.createElement("track")},supportScope:function(){return"scoped"in e.createElement("style")},ieVersion:function(){try{return t.match(/msie ([\d.]+)/)[1]||0}catch(e){return i}},operaVersion:function(){try{return window.opera?t.match(/opera.([\d.]+)/)[1]:0<t.indexOf("opr")?t.match(/opr\/([\d.]+)/)[1]:void 0}catch(e){return 0}},versionFilter:function(){if(1!==arguments.length||"string"!=typeof arguments[0])return 1===arguments.length?arguments[0]:0;var e=arguments[0],t=e.indexOf(".");return 0<t&&-1!==(t=e.indexOf(".",t+1))?e.substr(0,t):e}};try{r.type=r.isIE?"IE":window.opera||0<t.indexOf("opr")?"Opera":0<t.indexOf("chrome")?"Chrome":0<t.indexOf("safari")||window.openDatabase?"Safari":0<t.indexOf("firefox")?"Firefox":"unknow",r.version="IE"===r.type?r.ieVersion():"Firefox"===r.type?t.match(/firefox\/([\d.]+)/)[1]:"Chrome"===r.type?t.match(/chrome\/([\d.]+)/)[1]:"Opera"===r.type?r.operaVersion():"Safari"===r.type?t.match(/version\/([\d.]+)/)[1]:"0",r.shell=function(){var e,i;return 0<t.indexOf("maxthon")?(r.version=t.match(/maxthon\/([\d.]+)/)[1]||r.version,"鍌叉父娴忚鍣�"):0<t.indexOf("qqbrowser")?(r.version=t.match(/qqbrowser\/([\d.]+)/)[1]||r.version,"QQ娴忚鍣�"):0<t.indexOf("se 2.x")?"鎼滅嫍娴忚鍣�":n&&"Opera"!==r.type?(i=window.external,e=window.clientInformation.languages,i&&"LiebaoGetVersion"in i?"鐚庤惫娴忚鍣�":0<t.indexOf("bidubrowser")?(r.version=t.match(/bidubrowser\/([\d.]+)/)[1]||t.match(/chrome\/([\d.]+)/)[1],"鐧惧害娴忚鍣�"):r.supportSubTitle()&&void 0===e?(i=Object.keys(n.webstore).length,window,1<i?"360鏋侀€熸祻瑙堝櫒":"360瀹夊叏娴忚鍣�"):"Chrome"):r.type},r.name=r.shell(),r.version=r.versionFilter(r.version)}catch(e){}return[r.type,r.version]},ParseGetMediaURL:function(e,t="http"){return"ws"===(t="http"!==t&&"ws"!==t&&"wss"!==t&&(0<=e.indexOf("ws")||0<=e.indexOf("wss"))?"ws":t)||"wss"===t||0<=e.indexOf(t)?e:"/"===e[0]?"/"===e[1]?t+":"+e:window.location.origin+e:":"===e[0]?t+e:(t=window.location.href.split("/"),window.location.href.replace(t[t.length-1],e))},IsSupport265Mse:function(){return MediaSource.isTypeSupported('video/mp4;codecs=hvc1.1.1.L63.B0"')}}},function(e,t,i){e.exports=i(180).default},function(e,t,i){i=[i(7),i(6),i(2),i(1)],t=function(e,t,i,n){var r=!i.isUndefined(window.PointerEvent),a=!r&&n.isMobile(),s=!r&&!a,o=n.isFF()&&n.isOSX();function l(e,t){return(/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]:e)["page"+t]}function h(e,t,i){var r=!n.isPoorIE()&&t instanceof MouseEvent||!t.touches&&!t.changedTouches?t:(t.touches&&t.touches.length?t.touches:t.changedTouches)[0],a=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop;return{type:e,target:t.target||t.srcElement,currentTarget:i,pageX:r.pageX||r.clientX+a,pageY:r.pageY||r.clientY+s}}function u(e){(n.isPoorIE()||e instanceof MouseEvent||e instanceof window.TouchEvent)&&(e.preventManipulation&&e.preventManipulation(),e.cancelable)&&e.preventDefault&&e.preventDefault()}function d(e,a){var d,c,f=e,p=!1,m=0,g=0,_=0,y=300;function v(e){(s||r&&"touch"!==e.pointerType)&&C(t.touchEvents.OVER,e)}function A(e){(s||r&&"touch"!==e.pointerType)&&C(t.touchEvents.MOVE,e)}function E(i){(s||r&&"touch"!==i.pointerType&&!e.contains(document.elementFromPoint(i.x,i.y)))&&C(t.touchEvents.OUT,i)}function b(t){var i,h;d=t.target,m=l(t,"X"),g=l(t,"Y"),h=(i=t)||window.event,(n.isPoorIE()||i instanceof MouseEvent)&&("which"in h?3===h.which:"button"in h&&2===h.button)||(r?t.isPrimary&&(a.preventScrolling&&(c=t.pointerId,e.setPointerCapture(c)),n.addEventListener(e,"pointermove",w),n.addEventListener(e,"pointercancel",S),n.addEventListener(e,"pointerup",S)):s&&(n.addEventListener(document,"mousemove",w),o&&"object"===t.target.nodeName.toLowerCase()?n.addEventListener(e,"click",S):n.addEventListener(document,"mouseup",S)),d&&(n.addEventListener(d,"touchmove",w),n.addEventListener(d,"touchcancel",S),n.addEventListener(d,"touchend",S)))}function w(e){var i,n,r=t.touchEvents;p?C(r.DRAG,e):(n=l(e,"X"),i=l(e,"Y"),36<(n-=m)*n+(n=i-g)*n&&(C(r.DRAG_START,e),p=!0,C(r.DRAG,e))),a.preventScrolling&&u(e)}function S(i){var o=t.touchEvents;r?(a.preventScrolling&&e.releasePointerCapture(c),n.removeEventListener(e,"pointermove",w),n.removeEventListener(e,"pointercancel",S),n.removeEventListener(e,"pointerup",S)):s&&(n.removeEventListener(document,"mousemove",w),n.removeEventListener(document,"mouseup",S)),d&&(n.removeEventListener(d,"touchmove",w),n.removeEventListener(d,"touchcancel",S),n.removeEventListener(d,"touchend",S)),p?C(o.DRAG_END,i):a.directSelect&&i.target!==e||-1!==i.type.indexOf("cancel")||(r&&i instanceof window.PointerEvent?(i.pointerType,C(o.CLICK,i)):s?C(o.CLICK,i):(C(o.TAP,i),u(i))),d=null,p=!1}a=a||{},r?(n.addEventListener(e,"pointerdown",b),a.useHover&&(n.addEventListener(e,"pointerover",v),n.addEventListener(e,"pointerout",E)),a.useMove&&n.addEventListener(e,"pointermove",A)):s&&(n.addEventListener(e,"mousedown",b),a.useHover&&(n.addEventListener(e,"mouseover",v),n.addEventListener(e,"mouseout",E)),a.useMove)&&n.addEventListener(e,"mousemove",A),n.addEventListener(e,"touchstart",b);var T=this;function C(e,n){var r,s;!a.enableDoubleTap||e!==t.touchEvents.CLICK&&e!==t.touchEvents.TAP||(_=i.now()-_<y?(s=h(r=e===t.touchEvents.CLICK?t.touchEvents.DOUBLE_CLICK:t.touchEvents.DOUBLE_TAP,n,f),T.trigger(r,s),0):i.now()),s=h(e,n,f),T.trigger(e,s)}return this.triggerEvent=C,this.destroy=function(){n.removeEventListener(e,"touchstart",b),n.removeEventListener(e,"mousedown",b),d&&(n.removeEventListener(d,"touchmove",w),n.removeEventListener(d,"touchcancel",S),n.removeEventListener(d,"touchend",S)),r&&(a.preventScrolling&&e.releasePointerCapture(c),n.removeEventListener(e,"pointerover",v),n.removeEventListener(e,"pointerdown",b),n.removeEventListener(e,"pointermove",w),n.removeEventListener(e,"pointermove",A),n.removeEventListener(e,"pointercancel",S),n.removeEventListener(e,"pointerout",E),n.removeEventListener(e,"pointerup",S)),n.removeEventListener(e,"click",S),n.removeEventListener(e,"mouseover",v),n.removeEventListener(e,"mousemove",A),n.removeEventListener(e,"mouseout",E),n.removeEventListener(document,"mousemove",w),n.removeEventListener(document,"mouseup",S)},this}return i.extend(d.prototype,e),d}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2)],t=function(e){function t(e,t,i){for(e=""+e,i=i||"0";e.length<t;)e=i+e;return e}return{trim:function(e){return e.replace(/^\s+|\s+$/g,"")},pad:t,xmlAttribute:function(e,t){for(var i=0;i<e.attributes.length;i++)if(e.attributes[i].name&&e.attributes[i].name.toLowerCase()===t.toLowerCase())return e.attributes[i].value.toString();return""},extension:function(e){return e&&"rtmp"!==e.substr(0,4)?/[\(,]format=m3u8-/i.test(e)?"m3u8":-1<(e=e.split("?")[0].split("#")[0]).lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0:""},hms:function(e){var i=parseInt(e/3600),n=parseInt(e/60)%60;return e%=60,t(i,2)+":"+t(n,2)+":"+t(e.toFixed(3),6)},seconds:function(t){var i,n;return e.isNumber(t)?t:(i=(t=t.replace(",",".")).split(":"),n=0,"s"===t.slice(-1)?n=parseFloat(t):"m"===t.slice(-1)?n=60*parseFloat(t):"h"===t.slice(-1)?n=3600*parseFloat(t):1<i.length?(n=parseFloat(i[i.length-1]),n+=60*parseFloat(i[i.length-2]),3===i.length&&(n+=3600*parseFloat(i[i.length-3]))):n=parseFloat(t),n)},suffix:function(t,i){return e.map(t,(function(e){return e+i}))},prefix:function(t,i){return e.map(t,(function(e){return i+e}))}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){void 0!==(t=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"}}.apply(t,[]))&&(e.exports=t)},function(e,t,i){e.exports=function(){"use strict";function e(){e=function(){return i};var t,i={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},s=(A="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=A.asyncIterator||"@@asyncIterator",l=A.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,i){return e[t]=i}}function u(e,i,n,r){var s,o,l,h;return i=i&&i.prototype instanceof _?i:_,i=Object.create(i.prototype),r=new L(r||[]),a(i,"_invoke",{value:(s=e,o=n,l=r,h=c,function(e,i){if(h===p)throw new Error("Generator is already running");if(h===m){if("throw"===e)throw i;return{value:t,done:!0}}for(l.method=e,l.arg=i;;){var n=l.delegate;if(n&&(n=function e(i,n){var r=n.method,a=i.iterator[r];return a===t?(n.delegate=null,"throw"===r&&i.iterator.return&&(n.method="return",n.arg=t,e(i,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g):"throw"===(r=d(a,i.iterator,n.arg)).type?(n.method="throw",n.arg=r.arg,n.delegate=null,g):(a=r.arg)?a.done?(n[i.resultName]=a.value,n.next=i.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,l),n)){if(n===g)continue;return n}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(h===c)throw h=m,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);if(h=p,"normal"===(n=d(s,o,l)).type){if(h=l.done?m:f,n.arg===g)continue;return{value:n.arg,done:l.done}}"throw"===n.type&&(h=m,l.method="throw",l.arg=n.arg)}})}),i}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}i.wrap=u;var c="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function _(){}function y(){}function v(){}var A,E,b=(h(A={},s,(function(){return this})),(E=(E=Object.getPrototypeOf)&&E(E(R([]))))&&E!==n&&r.call(E,s)&&(A=E),v.prototype=_.prototype=Object.create(A));function w(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){var i;a(this,"_invoke",{value:function(n,a){function s(){return new t((function(i,s){!function i(n,a,s,o){var l;if("throw"!==(n=d(e[n],e,a)).type)return(a=(l=n.arg).value)&&"object"==typeof a&&r.call(a,"__await")?t.resolve(a.__await).then((function(e){i("next",e,s,o)}),(function(e){i("throw",e,s,o)})):t.resolve(a).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,o)}));o(n.arg)}(n,a,i,s)}))}return i=i?i.then(s,s):s()}})}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(e){if(e||""===e){var i,n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return i=-1,(n=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n}).next=n}throw new TypeError(typeof e+" is not iterable")}return a(b,"constructor",{value:y.prototype=v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=h(v,l,"GeneratorFunction"),i.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,h(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},i.awrap=function(e){return{__await:e}},w(S.prototype),h(S.prototype,o,(function(){return this})),i.AsyncIterator=S,i.async=function(e,t,n,r,a){void 0===a&&(a=Promise);var s=new S(u(e,t,n,r),a);return i.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(b),h(b,l,"Generator"),h(b,s,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),i.keys=function(e){var t,i=Object(e),n=[];for(t in i)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in i)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=R,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(n,r){return o.type="throw",o.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var a=this.tryEntries.length-1;0<=a;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),h=r.call(s,"finallyLoc");if(l&&h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}var s=(a=a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc?null:a)?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),C(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i,n,r=this.tryEntries[t];if(r.tryLoc===e)return"throw"===(i=r.completion).type&&(n=i.arg,C(r)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:R(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),g}},i}function t(e,t,i,n,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return i(e)}o.done?t(l):Promise.resolve(l).then(n,r)}function i(e){return function(){var i=this,n=arguments;return new Promise((function(r,a){var s=e.apply(i,n);function o(e){t(s,r,a,o,l,"next",e)}function l(e){t(s,r,a,o,l,"throw",e)}o(void 0)}))}}function n(e,t){for(var i,n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,"symbol"==typeof(i=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(r.key))?i:String(i),r)}}function r(e,t,i){t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1})}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e,t){e.prototype=Object.create(t.prototype),o(e.prototype.constructor=e,t)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l,h;function u(){}function d(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function c(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");return i=new d(i,n||e,r),n=h?h+t:t,e._events[n]?e._events[n].fn?e._events[n]=[e._events[n],i]:e._events[n].push(i):(e._events[n]=i,e._eventsCount++),e}function f(e,t){0==--e._eventsCount?e._events=new u:delete e._events[t]}function p(){this._events=new u,this._eventsCount=0}me=U={exports:{}},l=Object.prototype.hasOwnProperty,h="~",Object.create&&(u.prototype=Object.create(null),(new u).__proto__||(h=!1)),p.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)l.call(e,t)&&i.push(h?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},p.prototype.listeners=function(e){e=h?h+e:e;var t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,r=new Array(n);i<n;i++)r[i]=t[i].fn;return r},p.prototype.listenerCount=function(e){return e=h?h+e:e,(e=this._events[e])?e.fn?1:e.length:0},p.prototype.emit=function(e,t,i,n,r,a){var s=h?h+e:e;if(!this._events[s])return!1;var o,l=this._events[s],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,r),!0;case 6:return l.fn.call(l.context,t,i,n,r,a),!0}for(f=1,o=new Array(u-1);f<u;f++)o[f-1]=arguments[f];l.fn.apply(l.context,o)}else for(var d,c=l.length,f=0;f<c;f++)switch(l[f].once&&this.removeListener(e,l[f].fn,void 0,!0),u){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,t);break;case 3:l[f].fn.call(l[f].context,t,i);break;case 4:l[f].fn.call(l[f].context,t,i,n);break;default:if(!o)for(d=1,o=new Array(u-1);d<u;d++)o[d-1]=arguments[d];l[f].fn.apply(l[f].context,o)}return!0},p.prototype.on=function(e,t,i){return c(this,e,t,i,!1)},p.prototype.once=function(e,t,i){return c(this,e,t,i,!0)},p.prototype.removeListener=function(e,t,i,n){if(e=h?h+e:e,this._events[e])if(t){var r=this._events[e];if(r.fn)r.fn!==t||n&&!r.once||i&&r.context!==i||f(this,e);else{for(var a=0,s=[],o=r.length;a<o;a++)(r[a].fn!==t||n&&!r[a].once||i&&r[a].context!==i)&&s.push(r[a]);s.length?this._events[e]=1===s.length?s[0]:s:f(this,e)}}else f(this,e);return this},p.prototype.removeAllListeners=function(e){return e?(e=h?h+e:e,this._events[e]&&f(this,e)):(this._events=new u,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=h,me.exports=p.EventEmitter=p;var m,g,_,y=(me=U.exports)&&me.__esModule&&Object.prototype.hasOwnProperty.call(me,"default")?me.default:me,v=((U={}).REMOTE_STREAM_ADD="remoteStreamAdd",U.CONNECTION_STATE_CHANGE="connectionStateChange",U.CANDIDATE_ERROR="candidateError",U.ON_DATA_CHANNEL_OPEN="onDataChannelOpen",U.ON_DATA_CHANNEL_MSG="onDataChannelMsg",U.ON_DATA_CHANNEL_ERROR="onDataChannelError",U.ON_DATA_CHANNEL_CLOSE="onDataChannelClose",U.RE_CONNECTING="reConnecting",U.RE_CONNECT_FAILED="reConnectFailed",U.RE_CONNECT_SUCCESS="reConnectSuccess",U.ERROR="error",U.DESTROY="destroy",U),A=((me={}).ON_PLAY="play",me.ON_PAUSE="pause",me.ON_VOLUME_CHANGE="volumechange",me.LOADEDMETADATA="loadedmetadata",me.CANPLAY="canplay",me),E=((U={}).APPENDNALU="appendNalu",U.APPENDADTS="appendAdts",U),b=((me={}).HEVC="hevc",me.CODEC="codec",me.WIDTH="width",me.HEIGHT="height",me.FRAMERATE="framerate",me),w=((U={}).PLAYING="playing",U.PAUSED="paused",U),S=((me={}).RECONNECTING="reconnecting",me.RECONNECT_FAILED="reconnectFailed",me.RECONNECT_SUCCESS="reconnectSuccess",me),T=function(){},C={trace:T,debug:T,log:T,warn:T,info:T,error:T},L=C,R=L,I=((U={}).NETWORK_ERROR="networkError",U.CONNECTION_ERROR="connectionError",U.CREATE_PEERCONNECTION_ERROR="createPeerConnectionError",U),k=((me={}).HTTP_LOAD_ERROR="httpLoadError",me),P=((U={})[U.CREATE_PEERCONNECTION_ERROR=100]="CREATE_PEERCONNECTION_ERROR",U),D=(J.prototype.load=function(e,t){return new Promise((function(i){fetch(e,t).then((function(e){return e.json()})).then((function(t){var n=t.code,r=t.msg;i(0!=n?{type:I.NETWORK_ERROR,details:k.HTTP_LOAD_ERROR,code:n,msg:r,url:e}:t)})).catch((function(t){var n=t?t.code||-1:0;t=t?t.message:null,i({type:I.NETWORK_ERROR,details:k.HTTP_LOAD_ERROR,code:n,msg:t,url:e})}))}))},J),x=((me=K.prototype).parseData=function(e){var t=this.ReadBig32(e,8),i=(126&(this.pts=t,t=e[16]))>>>1;if((31&t)<24&&49!=i)return this.h265data=this.concatUint8(new Uint8Array([0,0,0,1]),new Uint8Array(e.subarray(16))),32==i?void(this.vps=this.h265data):33==i?void(this.sps=this.h265data):34==i?void(this.pps=this.h265data):void this._onDataAvailable({nalu:this.h265data,pps:this.pps,pts:this.pts,iskeyframe:!1,size:this.h265data.byteLength,type:i});this.CombineFrame(e,i)},me.CombineFrame=function(e,t){var i=128&e[18],n=64&e[18],r=63&e[18];128==i?(this.h265data=new Uint8Array(0),this.h265data=this.concatUint8(new Uint8Array([1==r?2:38,1]),new Uint8Array(e.subarray(19)))):64==n?(this.h265data=this.concatUint8(new Uint8Array([0,0,0,1]),this.h265data,new Uint8Array(e.subarray(19))),i=this.vps.length,r=this.sps.length,n=this.pps.length,0<i&&0<r&&0<n&&this.isFirseData&&(this.h265data=this.concatUint8(this.vps,this.sps,this.pps,this.h265data),this.isFirseData=!1),this._onDataAvailable({nalu:this.h265data,pps:this.pps,pts:this.pts,iskeyframe:!0,size:this.h265data.byteLength,type:t}),this.h265data=new Uint8Array(0)):this.h265data=this.concatUint8(this.h265data,new Uint8Array(e.subarray(19)))},me.ReadBig32=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},me.concatUint8=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.reduce((function(e,t){return e+t.byteLength}),0),r=new Uint8Array(n),a=0;return t.forEach((function(e){r.set(e,a),a+=e.byteLength})),r},me.destroy=function(){this.isFirseData=!0,this.pts=0,this.vps=new Uint8Array(0),this.sps=new Uint8Array(0),this.pps=new Uint8Array(0),this.h265data=new Uint8Array(0),this._onDataAvailable=function(){}},r(K,[{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}},{key:"getVps",get:function(){return{vps:this.vps}}},{key:"getSps",get:function(){return{sps:this.sps}}},{key:"getPps",get:function(){return{pps:this.pps}}}]),K),M={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},F=((U=Q.prototype).setAudioInfo=function(e){e&&(e=e.split("/"),this.audioInfo.sample=e[1],this.audioInfo.channel=e[2])},U.parseData=function(e){var t=128&e[5];this.pts=this.ReadBig32(e,8),this.aacData=this.concatUint8(this.aacData,new Uint8Array(e.subarray(20))),128==t&&(e[18],e[19],t=this._build_adts_header(this.audioInfo.sample,this.audioInfo.channel,this.aacData.byteLength),e=this.concatUint8(t,this.aacData),this._onDataAvailable({adts:e,pts:this.pts}),this.aacData=new Uint8Array(0))},U._build_adts_header=function(e,t,i){return e=this.sample_req_map[e],i+=7,new Uint8Array([255,241,64|e<<2,i>>11&3|t<<6,i>>3&255,(7&i)<<5|31,252])},U.ReadBig32=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]},U.concatUint8=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.reduce((function(e,t){return e+t.byteLength}),0),r=new Uint8Array(n),a=0;return t.forEach((function(e){r.set(e,a),a+=e.byteLength})),r},U.destroy=function(){this.pts=0,this.aacData=new Uint8Array(0),this.sample_req_map=M,this._onDataAvailable=function(){}},r(Q,[{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e}}]),Q),B=(s(z,_=y),(me=z.prototype).addEvent=function(){this.H265Parser.onDataAvailable=this.onDataAvailable.bind(this),this.AACADTSParser.onDataAvailable=this.onAdtsDataAvailable.bind(this)},me.setAudioInfo=function(e){this.AACADTSParser.setAudioInfo(e)},me.appendBuffer=function(e){(96==(127&(e=new Uint8Array(e))[5])?this.H265Parser:this.AACADTSParser).parseData(e)},me.onDataAvailable=function(e){this.emit(E.APPENDNALU,e)},me.onAdtsDataAvailable=function(e){this.emit(E.APPENDADTS,e)},me.destroy=function(){this.hevcData=[],this.H265Parser.destroy(),this.AACADTSParser.destroy()},z),O=((U={})[U.INIT=0]="INIT",U[U.INITED=1]="INITED",U[U.LOADWASMJS=2]="LOADWASMJS",U[U.DECODE=3]="DECODE",U[U.DECODED=4]="DECODED",U[U.RELEASE=5]="RELEASE",U[U.WASMLOADEDED=6]="WASMLOADEDED",U[U.BATCHFINISHFLAG=7]="BATCHFINISHFLAG",U[U.AUDIODECODED=8]="AUDIODECODED",U),U=(s(W,g=y),(me=W.prototype).init=function(e){this._workerMessageCallback=e,this._initDecoder()},me._initDecoder=function(){throw new Error("need override by children")},me.checkToDecode=function(e){!this._inDecoding&&e<=this.needToDecode&&this.doDecode()},me.doDecode=function(){var e=this,t=this._getFramesToDecode();t&&t.length&&(t.forEach((function(t){e._doDecodeFrame(t)})),this._finishFlag())},me._getFramesToDecode=function(){var e=this.parent._nalQueue;if(this._decoderReady&&e){var t=6;if(!(e.frameLength<t)){for(var i=[];0<t;){var n=e.getNalu();i.push(n),t--}return i}}},me._doDecodeFrame=function(e){throw new Error("need override by children")},me._finishFlag=function(){throw new Error("need override by children")},r(W,[{key:"needToDecode",get:function(){return this._inDecoding?0:this._continueDecodeThreshold}}]),W),N=window.VideoDecoder,j=window.AudioDecoder,V=window.EncodedVideoChunk,G=window.EncodedAudioChunk,H=(s(Y,m=U),Y.isSupported=function(){return!!window.VideoDecoder},(me=Y.prototype)._initDecoder=function(){this._initAudioDecoder(),this._initVideoDecoder(),this._decoderReady=!0},me._initVideoDecoder=function(){var e=this;this.videoDecoder=new N({output:function(t){e._workerMessageCallback({t:O.DECODED,frame:t})},error:function(e){}}),this.videoDecoder.configure({codec:"hvc1.1.6.L120"})},me._initAudioDecoder=function(){var t,n=this,r={output:(t=i(e().mark((function t(i){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.format&&n._workerMessageCallback({t:O.AUDIODECODED,audioData:i});case 1:case"end":return e.stop()}}),t)}))),function(e){return t.apply(this,arguments)}),error:function(e){}};this.audioDeocder=new j(r),this.audioDeocder.configure({codec:"mp4a.40.5",sampleRate:8e3,numberOfChannels:1})},me.decodeVideo=function(e){e=new V({data:e.nalu,timestamp:e.pts,type:e.isKeyframe?"key":"delta"}),this.videoDecoder.decode(e)},me._decodeAudio=function(e){e=new G({data:e.adts,timestamp:e.pts,type:"key"}),this.audioDeocder.decode(e)},me._doDecodeFrame=function(e){e=new V({data:e.nalu,timestamp:e.pts,type:e.iskeyframe?"key":"delta"}),this.videoDecoder.decode(e)},me._finishFlag=function(){},Y);function Y(e){var t;return(t=m.call(this)||this).videoDecoder=void 0,t.audioDeocder=void 0,t._continueDecodeThreshold=void 0,t.parent=void 0,t.parent=e,t.videoDecoder,t.audioDeocder,t._continueDecodeThreshold=20,t}function W(e){var t;return(t=g.call(this)||this)._inDecoding=void 0,t._decoderReady=void 0,t.parent=void 0,t._workerMessageCallback=void 0,t.parent=e,t._inDecoding=!1,t._decoderReady=!1,t._workerMessageCallback=null,t}function z(){(e=_.call(this)||this).log=void 0,e.warn=void 0,e.error=void 0,e.H265Parser=void 0,e.hevcData=void 0,e.AACADTSParser=void 0;var e,t="[rtc-demuxer-rtp]";return e.log=R.log.bind(R,t),e.warn=R.warn.bind(R,t),e.error=R.error.bind(R,t),e.H265Parser=new x,e.AACADTSParser=new F,e.addEvent(),e.hevcData=[],e}function Q(){this.aacData=void 0,this.sample_req_map=void 0,this._onDataAvailable=void 0,this.pts=void 0,this.audioInfo=void 0,this.pts=0,this.aacData=new Uint8Array(0),this.sample_req_map=M,this._onDataAvailable=function(){},this.audioInfo={sample:8e3,channel:1}}function K(){this.isFirseData=void 0,this.pts=void 0,this.vps=void 0,this.sps=void 0,this.pps=void 0,this.h265data=void 0,this._onDataAvailable=void 0,this.isFirseData=!0,this.pts=0,this.vps=new Uint8Array(0),this.sps=new Uint8Array(0),this.pps=new Uint8Array(0),this.h265data=new Uint8Array(0),this._onDataAvailable=function(){}}function J(){}var Z,q,X=function(e){return Z=Z||(i=void 0===(i=null)?null:i,r=(n=function(e){var i=atob(t);if(e){for(var n=new Uint8Array(i.length),r=0,a=i.length;r<a;++r)n[r]=i.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}(void 0!==(n=!(t="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoKICAgKiBAQXV0aG9yOiBkdWFueXVhbnl1YW4wMSBkdWFueXVhbnl1YW4wMUBiYWlkdS5jb20KICAgKiBARGF0ZTogMjAyMy0wOC0wOSAxOTo1NTo1NQogICAqIEBMYXN0RWRpdG9yczogZHVhbnl1YW55dWFuMDEgZHVhbnl1YW55dWFuMDFAYmFpZHUuY29tCiAgICogQExhc3RFZGl0VGltZTogMjAyNC0wMS0xOCAxNjoxNDo1OAogICAqIEBGaWxlUGF0aDogL3dvcmtlci9iYWlkdS9iY2UtbXVsdGltZWRpYS9ydGNQbGF5ZXIvc3JjL2Jhc2UvY29uZmlnLnRzCiAgICogQERlc2NyaXB0aW9uOiDov5nmmK/pu5jorqTorr7nva4s6K+36K6+572uYGN1c3RvbU1hZGVgLCDmiZPlvIBrb3JvRmlsZUhlYWRlcuafpeeci+mFjee9riDov5vooYzorr7nva46IGh0dHBzOi8vZ2l0aHViLmNvbS9PQktvcm8xL2tvcm8xRmlsZUhlYWRlci93aWtpLyVFOSU4NSU4RCVFNyVCRCVBRQogICAqLwoKICB2YXIgREVDT0RFU1RBVFVTID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChERUNPREVTVEFUVVMpIHsKICAgIERFQ09ERVNUQVRVU1tERUNPREVTVEFUVVNbIklOSVQiXSA9IDBdID0gIklOSVQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siSU5JVEVEIl0gPSAxXSA9ICJJTklURUQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siTE9BRFdBU01KUyJdID0gMl0gPSAiTE9BRFdBU01KUyI7CiAgICBERUNPREVTVEFUVVNbREVDT0RFU1RBVFVTWyJERUNPREUiXSA9IDNdID0gIkRFQ09ERSI7CiAgICBERUNPREVTVEFUVVNbREVDT0RFU1RBVFVTWyJERUNPREVEIl0gPSA0XSA9ICJERUNPREVEIjsKICAgIERFQ09ERVNUQVRVU1tERUNPREVTVEFUVVNbIlJFTEVBU0UiXSA9IDVdID0gIlJFTEVBU0UiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siV0FTTUxPQURFREVEIl0gPSA2XSA9ICJXQVNNTE9BREVERUQiOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siQkFUQ0hGSU5JU0hGTEFHIl0gPSA3XSA9ICJCQVRDSEZJTklTSEZMQUciOwogICAgREVDT0RFU1RBVFVTW0RFQ09ERVNUQVRVU1siQVVESU9ERUNPREVEIl0gPSA4XSA9ICJBVURJT0RFQ09ERUQiOwogICAgcmV0dXJuIERFQ09ERVNUQVRVUzsKICB9KHt9KTsgLy/pn7PpopHop6PnoIHlrozmiJAKCiAgLy8gd2FzbeWKoOi9veWujOaIkAogIHZhciB3YXNtUGF0aCA9ICJodHRwczovL2JjZS1jZG4uYmouYmNlYm9zLmNvbS9qd3BsYXllci80LjMuMC4xLyI7IC8v5Zyw5Z2A5Li657q/5LiK5Zyw5Z2A5ZCO6Z2i5ZKM54mI5pys57uR5a6aCiAgc2VsZi5Nb2R1bGUgPSB7CiAgICBvblJ1bnRpbWVJbml0aWFsaXplZDogZnVuY3Rpb24gb25SdW50aW1lSW5pdGlhbGl6ZWQoKSB7CiAgICAgIG9uV2FzbUxvYWRlZCgpOwogICAgfSwKICAgIGxvY2F0ZUZpbGU6IGZ1bmN0aW9uIGxvY2F0ZUZpbGUodXJsKSB7CiAgICAgIGlmICh1cmwuc3RhcnRzV2l0aCgnaHR0cCcpKSByZXR1cm4gdXJsOwogICAgICByZXR1cm4gd2FzbVBhdGggKyB1cmw7CiAgICB9CiAgfTsKICB2YXIgRGVjb2RlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewogICAgICB0aGlzLndhc21Mb2FkZWQgPSB2b2lkIDA7CiAgICAgIHRoaXMudmlkZW9DYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5wbGF5ZXJEYXRhID0gdm9pZCAwOwogICAgICB0aGlzLnZjb2RlY2VyUHRyID0gdm9pZCAwOwogICAgICB0aGlzLndhc21Mb2FkZWQgPSBmYWxzZTsKICAgICAgdGhpcy52aWRlb0NhbGxiYWNrID0gbnVsbDsKICAgICAgdGhpcy5wbGF5ZXJEYXRhID0gewogICAgICAgIHRva2VuOiAiYmFzZTY0OlFYVjBhRzl5T21Ob1lXNW5lV0Z1Ykc5dVozeHVkVzFpWlhKM2IyeG1MRWRwZEdoMVlqcG9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZiblZ0WW1WeWQyOXNaaXhGYldGcGJEcHdiM0p6WTJobFozUXlNMEJtYjNodFlXbHNMbU52YlN4UlVUbzFNekV6TmpVNE56SXNTRzl0WlZCaFoyVTZhSFIwY0RvdkwzaDJhV1JsYnk1MmFXUmxieXhFYVhOamIzSmtPbTUxYldKbGNuZHZiR1lqT0RZNU5DeDNaV05vWVhJNmJuVnRZbVZ5ZDI5c1pqRXhMRUpsYVdwcGJtY3NWMjl5YTBsdU9rSmhhV1IxIiwKICAgICAgICBwbGF5ZXJWZXJzaW9uOiAiNC4yLjAiLAogICAgICAgIHZpZGVvQ29kZWM6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy52Y29kZWNlclB0ciA9IG51bGw7CiAgICB9CiAgICB2YXIgX3Byb3RvID0gRGVjb2Rlci5wcm90b3R5cGU7CiAgICBfcHJvdG8uaW5pdERlY29kZXIgPSBmdW5jdGlvbiBpbml0RGVjb2RlcigpIHsKICAgICAgdmFyIF90aGlzJHBsYXllckRhdGEgPSB0aGlzLnBsYXllckRhdGEsCiAgICAgICAgdG9rZW4gPSBfdGhpcyRwbGF5ZXJEYXRhLnRva2VuLAogICAgICAgIHBsYXllclZlcnNpb24gPSBfdGhpcyRwbGF5ZXJEYXRhLnBsYXllclZlcnNpb24sCiAgICAgICAgdmlkZW9Db2RlYyA9IF90aGlzJHBsYXllckRhdGEudmlkZW9Db2RlYzsKICAgICAgdGhpcy52Y29kZWNlclB0ciA9IE1vZHVsZS5jd3JhcCgicmVnaXN0ZXJQbGF5ZXIiLCAibnVtYmVyIiwgWyJzdHJpbmciLCAic3RyaW5nIl0pKHRva2VuLCBwbGF5ZXJWZXJzaW9uKTsKICAgICAgLy8g6Kej56CB5oiQ5Yqf5Zue6LCDCiAgICAgIHRoaXMudmlkZW9DYWxsYmFjayA9IE1vZHVsZS5hZGRGdW5jdGlvbihmdW5jdGlvbiAoYWRkcl95LCBhZGRyX3UsIGFkZHJfdiwgc3RyaWRlX3ksIHN0cmlkZV91LCBzdHJpZGVfdiwgd2lkdGgsIGhlaWdodCwgcHRzKSB7CiAgICAgICAgdmFyIHlBcnJheSA9IE1vZHVsZS5IRUFQVTguc3ViYXJyYXkoYWRkcl95LCBhZGRyX3kgKyBzdHJpZGVfeSAqIGhlaWdodCk7CiAgICAgICAgdmFyIHVBcnJheSA9IE1vZHVsZS5IRUFQVTguc3ViYXJyYXkoYWRkcl91LCBhZGRyX3UgKyBzdHJpZGVfdSAqIGhlaWdodCAvIDIpOwogICAgICAgIHZhciB2QXJyYXkgPSBNb2R1bGUuSEVBUFU4LnN1YmFycmF5KGFkZHJfdiwgYWRkcl92ICsgc3RyaWRlX3YgKiBoZWlnaHQgLyAyKTsKICAgICAgICB2YXIgZnJhbWUgPSB7CiAgICAgICAgICB5OiBuZXcgVWludDhBcnJheSh5QXJyYXkpLAogICAgICAgICAgdTogbmV3IFVpbnQ4QXJyYXkodUFycmF5KSwKICAgICAgICAgIHY6IG5ldyBVaW50OEFycmF5KHZBcnJheSksCiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICAgIHdpZHRoOiBzdHJpZGVfeSwKICAgICAgICAgIHB0c1NlYzogcHRzICogMS4wIC8gMTAwMCwKICAgICAgICAgIHN0cmlkZV95OiBzdHJpZGVfeSwKICAgICAgICAgIHN0cmlkZV91OiBzdHJpZGVfdSwKICAgICAgICAgIHN0cmlkZV92OiBzdHJpZGVfdgogICAgICAgIH07CiAgICAgICAgLy8gTW9kdWxlLmFzbS5mcmVlKHlBcnJheSk7CiAgICAgICAgeUFycmF5ID0gbnVsbDsKICAgICAgICAvLyBNb2R1bGUuYXNtLmZyZWUodUFycmF5KTsKICAgICAgICB1QXJyYXkgPSBudWxsOwogICAgICAgIC8vIE1vZHVsZS5hc20uZnJlZSh2QXJyYXkpOyAKICAgICAgICB2QXJyYXkgPSBudWxsOwogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgdDogREVDT0RFU1RBVFVTLkRFQ09ERUQsCiAgICAgICAgICBmcmFtZTogZnJhbWUKICAgICAgICB9LCBbZnJhbWUueS5idWZmZXIsIGZyYW1lLnUuYnVmZmVyLCBmcmFtZS52LmJ1ZmZlcl0pOwogICAgICB9LCAidmlpaWlpaWlpZCIpOwogICAgICBNb2R1bGUuY3dyYXAoInNldENvZGVjVHlwZSIsICJudW1iZXIiLCBbIm51bWJlciIsICJudW1iZXIiLCAibnVtYmVyIl0pKHRoaXMudmNvZGVjZXJQdHIsIHZpZGVvQ29kZWMsIHRoaXMudmlkZW9DYWxsYmFjayk7CiAgICAgIE1vZHVsZS5jd3JhcCgiaW5pdGlhbGl6ZURlY29kZXIiLCAibnVtYmVyIiwgWyJudW1iZXIiXSkodGhpcy52Y29kZWNlclB0cik7CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgIHQ6IERFQ09ERVNUQVRVUy5JTklURUQKICAgICAgfSk7CiAgICB9OwogICAgX3Byb3RvLmRlY29kZVZpZGVvID0gZnVuY3Rpb24gZGVjb2RlVmlkZW8oZGF0YSkgewogICAgICB2YXIgbmFsQnVmID0gZGF0YS5uYWx1LAogICAgICAgIHB0cyA9IGRhdGEucHRzOwogICAgICB2YXIgb2Zmc2V0ID0gTW9kdWxlLmFzbS5tYWxsb2MobmFsQnVmLmxlbmd0aCk7CiAgICAgIE1vZHVsZS5IRUFQOC5zZXQobmFsQnVmLCBvZmZzZXQpOwogICAgICBNb2R1bGUuY3dyYXAoImRlY29kZUNvZGVjQ29udGV4dCIsICJudW1iZXIiLCBbIm51bWJlciIsICJudW1iZXIiLCAibnVtYmVyIiwgIm51bWJlciIsICJudW1iZXIiXSkodGhpcy52Y29kZWNlclB0ciwgb2Zmc2V0LCBuYWxCdWYubGVuZ3RoLCBwdHMsIDApOwogICAgICBNb2R1bGUuYXNtLmZyZWUob2Zmc2V0KTsKICAgICAgb2Zmc2V0ID0gbnVsbDsKICAgIH07CiAgICBfcHJvdG8ubG9hZEpzID0gZnVuY3Rpb24gbG9hZEpzKHVybCkgewogICAgICBzZWxmLmltcG9ydFNjcmlwdHModXJsKTsKICAgIH07CiAgICBfcHJvdG8ucmVsZWFzZSA9IGZ1bmN0aW9uIHJlbGVhc2UoKSB7CiAgICAgIE1vZHVsZS5jd3JhcCgicmVsZWFzZSIsICJudW1iZXIiLCBbIm51bWJlciJdKSh0aGlzLnZjb2RlY2VyUHRyKTsKICAgICAgTW9kdWxlLmN3cmFwKCJleGl0TWlzc2lsZSIsICJudW1iZXIiLCBbIm51bWJlciJdKSh0aGlzLnZjb2RlY2VyUHRyKTsKICAgIH07CiAgICBfcHJvdG8ub25XYXNtTG9hZGVkID0gZnVuY3Rpb24gb25XYXNtTG9hZGVkKCkgewogICAgICBpZiAodGhpcy53YXNtTG9hZGVkKSByZXR1cm47CiAgICAgIHRoaXMud2FzbUxvYWRlZCA9IHRydWU7CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgIHQ6IERFQ09ERVNUQVRVUy5XQVNNTE9BREVERUQKICAgICAgfSk7CiAgICAgIC8vICDliqDovb3lrozmiJDliJ3lp4vljJbop6PnoIHlmagKICAgICAgdGhpcy5pbml0RGVjb2RlcigpOwogICAgfTsKICAgIHJldHVybiBEZWNvZGVyOwogIH0oKTsKICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldnQpIHsKICAgIHZhciBkYXRhID0gZXZ0LmRhdGE7CiAgICBzd2l0Y2ggKGRhdGEudCkgewogICAgICBjYXNlIERFQ09ERVNUQVRVUy5JTklUOgogICAgICAgIC8vIHNlbGYuZGVjb2Rlci5pbml0RGVjb2RlcihkYXRhKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuREVDT0RFOgogICAgICAgIHNlbGYuZGVjb2Rlci5kZWNvZGVWaWRlbyhkYXRhLmZyYW1lKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuTE9BRFdBU01KUzoKICAgICAgICBzZWxmLmRlY29kZXIubG9hZEpzKGRhdGEucGF0aFVybCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgREVDT0RFU1RBVFVTLlJFTEVBU0U6CiAgICAgICAgc2VsZi5kZWNvZGVyLnJlbGVhc2UoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBERUNPREVTVEFUVVMuQkFUQ0hGSU5JU0hGTEFHOgogICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICAgICAgdDogREVDT0RFU1RBVFVTLkJBVENIRklOSVNIRkxBRwogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgfQogIH07CiAgc2VsZi5kZWNvZGVyID0gbmV3IERlY29kZXIoKTsKICBmdW5jdGlvbiBvbldhc21Mb2FkZWQoKSB7CiAgICBpZiAoc2VsZi5kZWNvZGVyKSB7CiAgICAgIHNlbGYuZGVjb2Rlci5vbldhc21Mb2FkZWQoKTsKICAgIH0KICB9Cgp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1oZXZjLXdvcmtlci5qcy5tYXAKCg=="))&&n)).indexOf("\n",10)+1,n=n.substring(r)+(i?"//# sourceMappingURL="+i:""),r=new Blob([n],{type:"application/javascript"}),URL.createObjectURL(r)),new Worker(Z,e);var t,i,n,r},$=(s(he,q=U),(me=he.prototype)._initDecoder=function(){this._bindWorkerEvent(),this.HevcWorker.postMessage({t:O.LOADWASMJS,pathUrl:this.IsSafari?this.wasmUrl:this.simdWasmUrl})},me._doDecodeFrame=function(e){this.HevcWorker.postMessage({t:O.DECODE,frame:e})},me._finishFlag=function(){this.HevcWorker.postMessage({t:O.BATCHFINISHFLAG})},me._bindWorkerEvent=function(){var e=this;this.HevcWorker.onmessage=function(t){var i=t.data;switch(i.t){case O.INITED:e._decoderReady=!0;break;case O.DECODED:e._workerMessageCallback(i),e._inDecoding=!0;break;case O.BATCHFINISHFLAG:if(e._inDecoding=!1,!e._workerMessageCallback)return;e._workerMessageCallback(i)}}},me._offWorkerBind=function(){this.HevcWorker.postMessage({t:O.RELEASE}),this.HevcWorker.onmessage=null,this.HevcWorker.terminate()},me.destroy=function(){this._offWorkerBind()},r(he,[{key:"IsSafari",get:function(){return/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform)}}]),he),ee=[],te=((U=le.prototype)._bindEvent=function(){this._worker.addEventListener("message",this._doTask)},U.start=function(e){60<(e=(e=parseInt(e))<10?10:e)?e=60:25<e&&(e=25),this._worker.postMessage({type:"START",interval:e})},U.stop=function(){this._worker.postMessage({type:"DESTROY"})},U.destroy=function(){this._worker&&(this._worker.postMessage({type:"DESTROY"}),this._worker.removeEventListener("message",this._doTask),ee.push(this._worker),this._worker=null,this._task=null)},le),ie=((me=oe.prototype).append=function(e){this._frames.push(e)},me.shift=function(){return this._frames.shift()},me.destroy=function(){this._frames.forEach((function(e){var t;null!=(t=e.buffer)&&t.close&&e.buffer.close()})),this._frames=[]},r(oe,[{key:"length",get:function(){return this._frames.length}},{key:"frames",get:function(){return this._frames}}]),oe),ne=((U=se.prototype).append=function(e){this.naluList.push(e),this._estimateBitRate()},U._estimateBitRate=function(){},U.getNalu=function(){return this.naluList.shift()},U.destroy=function(){this.naluList=[]},r(se,[{key:"frameLength",get:function(){return this.naluList.length}}]),se),re=((me=ae.prototype)._initTrackGenerator=function(){var e=new MediaStreamTrackGenerator({kind:"audio"}),t=new MediaStreamTrackGenerator({kind:"video"}),i=e.writable;this.writerVideo=t.writable.getWriter(),this.writerAudio=i.getWriter(),i=new MediaStream([e,t]),this.video.srcObject=i},me.render=function(e){this.writerVideo.write(e),e.close()},me.renderAudio=function(e){this.writerAudio.write(e)},me.destroy=function(){this.writerVideo=null,this.writerAudio=null},r(ae,[{key:"currentTime",get:function(){return this.video.currentTime}}]),ae);function ae(e){this.video=void 0,this.writerVideo=void 0,this.writerAudio=void 0,this.video=e,this.writerVideo=null,this.writerAudio=null,this._initTrackGenerator()}function se(e){this.naluList=void 0,this.naluList=[]}function oe(){this._frames=void 0,this._frames=[]}function le(e){var t=this;this._task=void 0,this._worker=void 0,this._doTask=function(){var e;null!=(e=t._task)&&e.call(t)},this._task=e,e=new Blob(["\n    var timer;\n\n    function initTimer (interval) {\n      destroy()\n      clearInterval(timer);\n      timer = setInterval(() => {\n          self.postMessage({type: 'NEXT_TICK'});\n      }, interval)\n    }\n\n    function destroy () {\n      clearInterval(timer);\n    }\n\n    self.onmessage = function (e) {\n      var {type,interval} = e.data;\n      switch (type) {\n          case 'START':\n            initTimer(interval);\n            break;\n          case 'DESTROY':\n            destroy();\n            break;\n      }\n    }\n"],{type:"application/javascript"}),this._worker=ee.pop()||new Worker(URL.createObjectURL(e)),this._bindEvent()}function he(e){var t;return(t=q.call(this)||this).HevcWorker=void 0,t.simdWasmUrl=void 0,t.wasmUrl=void 0,t._continueDecodeThreshold=void 0,t.parent=void 0,t.parent=e,t.HevcWorker=new X,t.simdWasmUrl="https://bce-cdn.bj.bcebos.com/jwplayer/4.3.0.1/missile-smid-v20230529.js",t.wasmUrl="https://bce-cdn.bj.bcebos.com/jwplayer/4.3.0.1/missile-v20230529.js",t._continueDecodeThreshold=10,t}function ue(e){this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}ue.prototype.bind=function(e,t,i){var n=this.gl;n.activeTexture([n.TEXTURE0,n.TEXTURE1,n.TEXTURE2][e]),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(n.getUniformLocation(t,i),e)},ue.prototype.fill=function(e,t,i){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e,t,0,n.LUMINANCE,n.UNSIGNED_BYTE,i)};var de,ce,fe,pe,me,ge={renderFrame:function(e,t,i,n,r,a){var s=e.canvas.width,o=r/a*e.canvas.height;e.viewport((s-o)/2,0,o,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.y.fill(r,a,t),e.u.fill(r>>1,a>>1,i),e.v.fill(r>>1,a>>1,n),e.drawArrays(e.TRIANGLE_STRIP,0,4)},setupCanvas:function(e,t){var i,n,r,a;return(e=e.getContext("webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0}))&&(i=e.createProgram(),n=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {"," gl_Position = aVertexPosition;"," vTextureCoord = aTextureCoord;","}"].join("\n"),r=e.createShader(e.VERTEX_SHADER),e.shaderSource(r,n),e.compileShader(r),n=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),a=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(a,n),e.compileShader(a),e.attachShader(i,r),e.attachShader(i,a),e.linkProgram(i),e.useProgram(i),e.getProgramParameter(i,e.LINK_STATUS),n=e.getAttribLocation(i,"aVertexPosition"),e.enableVertexAttribArray(n),r=e.getAttribLocation(i,"aTextureCoord"),e.enableVertexAttribArray(r),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW),e.vertexAttribPointer(n,3,e.FLOAT,!1,0,0),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.y=new ue(e),e.u=new ue(e),e.v=new ue(e),e.y.bind(0,i,"YTexture"),e.u.bind(1,i,"UTexture"),e.v.bind(2,i,"VTexture")),e},releaseContext:function(e){e&&(e.deleteTexture(e.y.texture),e.deleteTexture(e.u.texture),e.deleteTexture(e.v.texture),e.clearColor(0,0,0,0))}},_e=((U=be.prototype)._initAudioCtx=function(){var e=window.AudioContext||window.webkitAudioContext;this._audioCtx=new e,this._audioCtx&&(this._gainNode=this._audioCtx.createGain(),this._gainNode.gain.value=1,this._gainNode.connect(this._audioCtx.destination),this._audioCanAutoplay="running"===this._audioCtx.state,this._bindAudioCtxEvent())},U._bindAudioCtxEvent=function(){var e=this;this._onStateChange=function(){e._audioCtx&&"running"===e._audioCtx.state&&e._ready},this._audioCtx.addEventListener("statechange",this._onStateChange)},U.decode=function(e){e&&this._sampleQueue.push(e),e=this._sampleQueue.length,this._inDecoding||e<10||this._decodeAACWrapper()},U._decodeAACWrapper=(pe=i(e().mark((function t(){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._inDecoding=!0,i=this._concatAdts(this._sampleQueue.map((function(e){return e.adts})),0),this._sampleQueue=[],e.next=5,this._decodeAAC(i);case 5:this._inDecoding=!1;case 6:case"end":return e.stop()}}),t,this)}))),function(){return pe.apply(this,arguments)}),U._decodeAAC=function(e){var t=this;return new Promise((function(i,n){var r=t._audioCtx.decodeAudioData(e.buffer,(function(e){t._buffers.push(e),t._isRender&&t._isStartPlay||t._startRender(),i()}),n);r.catch&&r.catch(n)}))},U._onSourceBufferEnded=function(){this._isSourceBufferEnd=!0,this._startRender()},U._startRender=function(){"suspended"===this._audioCtx.state&&this._audioCtx.resume().catch((function(e){})),this._isStartPlay=!0;var e=this._getAudioBuffer();if(e){this._isRender=!0;var t=this._audioCtx.createBufferSource();t.buffer=e,t.loop=!1,(this._source=t).addEventListener("ended",this._onSourceBufferEnded),t.connect(this._gainNode);try{this._isSourceBufferEnd=!1,t.start()}catch(e){}}else this._isRender=!1},U._getAudioBuffer=function(){return this._buffers.shift()},U._concatAdts=function(e,t){void 0===t&&(t=0);for(var i=0,n=0,r=e.length;n<r;n++)t&&n%t==0||(i+=e[n].byteLength);for(var a=new Uint8Array(i),s=0,o=0,l=e.length;o<l;o++)t&&o%t==0||(a.set(e[o],s),s+=e[o].byteLength);return a},U.resume=function(){if(this._audioCtx&&"suspended"===this._audioCtx.state)return this._audioCtx.resume().catch((function(e){}))},U.mute=function(e){this._gainNode.gain.value=e?0:1,"running"!=this.audioState&&this.resume()},r(be,[{key:"currentTime",get:function(){return 0}},{key:"audioCanAutoplay",get:function(){return this._audioCanAutoplay}},{key:"audioState",get:function(){return this._audioCtx.state}}]),be),ye=((me=Ee.prototype)._bindEvent=function(){var e=this;this.demuxer.on(E.APPENDNALU,(function(t){e.isWebCodecs?e._decodeController._doDecodeFrame(t):e._nalQueue.append(t)})),this.demuxer.on(E.APPENDADTS,(function(t){e.isWebCodecs?e._decodeController._decodeAudio(t):e.AudioRender.decode(t)}))},me._selectDecoder=function(){this.isWebCodecs?this._decodeController=new H(this):this._decodeController=new $(this)},me._initDecoder=function(){var e;null!=(e=this._decodeController)&&e.init(this._decoderMessageCallback.bind(this)),this.isWebCodecs||this._startRender()},me._decoderMessageCallback=function(e){var t;switch(e.t){case O.DECODED:this._receiveFrame(e.frame);break;case O.BATCHFINISHFLAG:null!=(t=this._decodeController)&&t._decoderReady&&this._startDecode();break;case O.AUDIODECODED:this._frameRender.renderAudio(e.audioData)}},me._initWebgl=function(){this._createCanvas(),this.gl=ge.setupCanvas(this.renderEle,{preserveDrawingBuffer:!1})},me._createCanvas=function(){var e=this.renderEle.parentNode,t=document.createElement("canvas");t.id=this.renderEle.id,t.width=this.renderEle.clientWidth,t.height=this.renderEle.clientHeight,e.appendChild(t),e.removeChild(this.renderEle),this.renderEle=t},me._startRender=function(){this._tickTimer.start(20)},me._render=function(){var e=this._frameQueue.shift();e&&(this.isWebCodecs?this._frameRender.render(e):this.webGlRender(e),this._getFramerate()),this._checkToDecode()},me._getFramerate=function(){this.framerate++,-1==this.oneTime?this.oneTime=(new Date).getTime():1e3<(new Date).getTime()-this.oneTime&&(this.oneTime=(new Date).getTime(),this.renderFramerate=JSON.parse(JSON.stringify(this.framerate)),this.framerate=0)},me.webGlRender=function(e){this._isPaused||(this.VideoInfo[b.WIDTH]||(this.VideoInfo[b.WIDTH]=e.width,this.VideoInfo[b.HEIGHT]=e.height,this.renderEle.width=e.width,this.renderEle.height=e.height,this._addEvent(A.CANPLAY),this._addEvent(A.ON_PLAY)),ge.renderFrame(this.gl,e.y,e.u,e.v,e.width,e.height),this.isWebCodecs)||(e.y=null,e.u=null,e.v=null)},me._startDecode=function(){var e;null!=(e=this._decodeController)&&e.doDecode()},me._checkToDecode=function(){var e;null!=(e=this._decodeController)&&e.checkToDecode(this._frameQueue.length)},me._receiveFrame=function(e){this.isWebCodecs&&this._getFramerate(),this.isWebCodecs?this._frameRender.render(e):this._frameQueue.append(e)},me.mute=function(e){this.AudioRender&&this.AudioRender.mute(e)},me.play=function(){this._isPaused=!1,this._addEvent(A.ON_PLAY)},me.pause=function(){this._isPaused=!0,this._addEvent(A.ON_PAUSE)},me.getPlayStatus=function(){return this._isPaused?w.PAUSED:w.PLAYING},me._addEvent=function(e){this.rtcPlayer.trigger(e,{type:e})},me.destroy=function(){var e;null!=(e=this._tickTimer)&&e.destroy(),(this._tickTimer=null)!=ge&&ge.releaseContext(this.gl),null!=(e=this._nalQueue)&&e.destroy(),null!=(e=this._frameQueue)&&e.destroy(),null!=(e=this._frameRender)&&e.destroy()},r(Ee,[{key:"renderIsVideo",get:function(){var e;return null==(e=this.renderEle)?void 0:e.tagName.toLocaleLowerCase().includes("video")}},{key:"isWebCodecs",get:function(){return H.isSupported()}},{key:"videoInfo",get:function(){var e;return a(this.renderIsVideo?((e={})[b.WIDTH]=this.renderEle.videoWidth,e[b.HEIGHT]=this.renderEle.videoHeight,e):this.VideoInfo,((e={})[b.FRAMERATE]=this.renderFramerate,e))}}]),Ee),ve=((U=Ae.prototype)._initHevcController=function(){this.isEvs&&this.useDataChannel&&(this.demuxer=new B,this.HevcController=new ye(this.demuxer,this.ele,this.rtcPlayer))},U._initPeerConnection=function(){try{this.pc=new RTCPeerConnection,this._addEvent()}catch(t){var e={type:v.ERROR,errorTypes:I.CREATE_PEERCONNECTION_ERROR,msg:t,details:t,code:P.CREATE_PEERCONNECTION_ERROR,url:null==(e=this.postMsg)?void 0:e.requsetUrl};this.callBack&&this.callBack(e),this.rtcPlayer.trigger(v.ERROR,e),this.reconnectTimerFunc()}},U._viedeoEventList=function(){return[A.ON_PLAY,A.ON_PAUSE,A.LOADEDMETADATA,A.CANPLAY,A.ON_VOLUME_CHANGE]},U._addVideoEvent=function(){var e=this,t=this.ele;t&&this._viedeoEventList().forEach((function(i){t.addEventListener(i,e._onVideoEvnet.bind(e))}))},U._removeVideoEvent=function(){var e=this,t=this.ele;t&&this._viedeoEventList().forEach((function(i){t.removeEventListener(i,e._onVideoEvnet.bind(e))}))},U._onVideoEvnet=function(e){e=e.type,this.reconnectStatus!=S.RECONNECT_SUCCESS&&e==A.ON_PLAY||this.rtcPlayer.trigger(e,{type:e})},U._addEvent=function(){var e;this.pc.addEventListener("icecandidate",this._onIceCandidate.bind(this)),this.pc.addEventListener("track",this._onTrack.bind(this)),this.pc.addEventListener("icecandidateerror",this._onIceCandidateError.bind(this)),this.pc.addEventListener("iceconnectionstatechange",this._onConnectionStateChange.bind(this)),this.isEvs&&null!=(e=this.rtcPlayer)&&null!=(e=e.rtcConfig)&&e.usedatachannel&&(this.datachannel=this.pc.createDataChannel("chat"),this.datachannel.binaryType="arraybuffer",this.datachannel.addEventListener("open",this._onDataChannelOpen.bind(this)),this.datachannel.addEventListener("message",this._onDataChannelMsg.bind(this)),this.datachannel.addEventListener("close",this._onDataChannelClose.bind(this)),this.datachannel.addEventListener("error",this._onDataChannelError.bind(this)))},U._onIceCandidate=function(){},U._onTrack=function(e){!this.isHevcCode&&this.ele instanceof HTMLMediaElement&&(this.ele.srcObject=e.streams[0]),this.isHevcCode||this.rtcPlayer.trigger(v.REMOTE_STREAM_ADD,{MediaStream:e.streams[0]})},U._onIceCandidateError=function(){},U._onConnectionStateChange=function(){this.pc&&("disconnected"===this.pc.iceConnectionState&&(this.reconnectStatus=S.RECONNECTING,this.reConnecting(),this.rtcPlayer.trigger(v.RE_CONNECTING,{type:v.RE_CONNECTING})),this.pc&&"connected"===this.pc.iceConnectionState&&this.reconnectStatus==S.RECONNECTING&&this.reConnectSuccess(),this.rtcPlayer.trigger(v.CONNECTION_STATE_CHANGE,{state:this.pc&&this.pc.iceConnectionState}))},U._onDataChannelOpen=function(){this.rtcPlayer.trigger(v.ON_DATA_CHANNEL_OPEN,{type:v.ON_DATA_CHANNEL_OPEN})},U._onDataChannelMsg=function(e){e=e.data,this.demuxer.appendBuffer(e)},U._onDataChannelClose=function(){this.rtcPlayer.trigger(v.ON_DATA_CHANNEL_CLOSE,{type:v.ON_DATA_CHANNEL_CLOSE})},U._onDataChannelError=function(){this.rtcPlayer.trigger(v.ON_DATA_CHANNEL_ERROR,{type:v.ON_DATA_CHANNEL_ERROR})},U.subscribeLiveStream=(fe=i(e().mark((function t(){var n,r,a,s,o,l=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.postMsg,r=n.serverUrl,a=n.requsetUrl,s=n.headers,o=n.isEvsLive,t.abrupt("return",new Promise(function(){var t=i(e().mark((function t(i,n){var h,u,d,c,f,p;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.pc){e.next=2;break}return e.abrupt("return");case 2:return l.pc.addTransceiver("video",{direction:"recvonly",sendEncodings:[]}),l.pc.addTransceiver("audio",{direction:"recvonly",sendEncodings:[]}),e.next=6,l.pc.createOffer();case 6:return h=e.sent,e.next=9,l.pc.setLocalDescription(h);case 9:return d=o?h.sdp:JSON.stringify({streamurl:r,sdp:h.sdp}),e.prev=10,e.next=14,l.fetch.load(a||"",{method:"post",body:d,headers:s});case 14:if(0!=(u=e.sent).code){e.next=38;break}if(d=u.sdp,c={sdp:d,type:"answer"},!d.includes("rtpmap:265 HEVC/90000")){e.next=34;break}l.isHevc=!0,l._initHevcController(),f=d.split("\r\n"),p=0;case 24:if(p<f.length){if(f[p].includes("rtpmap:265 HEVC/90000"))return l.demuxer&&l.demuxer.setAudioInfo(f[p].split("_")[1]),f.splice(p,1),e.abrupt("break",32);e.next=29}else e.next=32;break;case 29:p++,e.next=24;break;case 32:f.push(""),c.sdp=f.join("\r\n");case 34:return e.next=36,l.pc.setRemoteDescription(c);case 36:e.next=39;break;case 38:l.rtcPlayer.trigger(v.ERROR,u);case 39:i(u),e.next=46;break;case 42:e.prev=42,e.t0=e.catch(10),R.warn("subscribeLiveStream fetch: "+e.t0.message),n(e.t0);case 46:case"end":return e.stop()}}),t,null,[[10,42]])})));return function(e,i){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(){return fe.apply(this,arguments)}),U.getStats=(ce=i(e().mark((function t(){var i,n,r,s,o,l,h,u=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={},n=e().mark((function t(){var n,s,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.pc.getReceivers()[r],e.next=3,n.getStats();case 3:s=e.sent,o=n.track.kind,s.forEach((function(e){"inbound-rtp"!=e.type&&"codec"!==e.type||(i[o]=i[o]?a(i[o],e):e)}));case 6:case"end":return e.stop()}}),t)})),r=0;case 3:if(r<this.pc.getReceivers().length)return t.delegateYield(n(),"t0",5);t.next=8;break;case 5:r++,t.next=3;break;case 8:for(o in s={video:{width:"frameWidth",height:"frameHeight",code:"mimeType",frameRate:"framesPerSecond",playStyle:"rtc",demuxStyle:"rtc",bitRate:"bytesReceived"},audio:{sampleRate:"clockRate",code:"mimeType",bitRate:"bytesReceived",channels:"channels"}})for(l in s[o])h=s[o][l],i&&i[o]&&i[o][h]&&(s[o][l]=i[o][h]);return this.isHevc&&(s=this._HevcMediaInfo()),t.abrupt("return",s);case 12:case"end":return t.stop()}}),t,this)}))),function(){return ce.apply(this,arguments)}),U._HevcMediaInfo=function(){var e=null==(e=this.HevcController)?void 0:e.videoInfo;return e[b.CODEC]=b.HEVC,{video:e,audio:{}}},U.sendMsg=function(e){try{this.datachannel.send(e)}catch(e){this.rtcPlayer.trigger(v.ERROR,{type:"datachannelSend",err:e})}},U.reConnecting=(de=i(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reConnectNumber--,this.closeReconnect(),this.reConnectNumber<0)return this.reConnectFailed(),e.abrupt("return");e.next=5;break;case 5:if(this.pc&&"connected"!=this.pc.iceConnectionState||!this.pc)return this.destroyPc(),this._initPeerConnection(),e.next=10,this.subscribeLiveStream();e.next=12;break;case 10:e.next=14;break;case 12:return this.reConnectSuccess(),e.abrupt("return");case 14:this.reconnectTimerFunc();case 15:case"end":return e.stop()}}),t,this)}))),function(){return de.apply(this,arguments)}),U.reconnectTimerFunc=function(){var t=this;this.closeReconnect(),this.reconnectStatus==S.RECONNECTING&&(this.reConnectTimer=setTimeout(i(e().mark((function i(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t.pc&&"connected"!=t.pc.iceConnectionState||!t.pc)&&t.reConnecting();case 1:case"end":return e.stop()}}),i)}))),1e3*this.oneReConnectTime))},U.reConnectFailed=function(){this.closeReconnect(),this._removeVideoEvent(),this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reconnectStatus=S.RECONNECT_FAILED,this.rtcPlayer.trigger(v.RE_CONNECT_FAILED,{type:v.RE_CONNECT_FAILED})},U.reConnectSuccess=function(){this.reconnectStatus==S.RECONNECTING&&(this.closeReconnect(),this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reconnectStatus=S.RECONNECT_SUCCESS,this.rtcPlayer.trigger(v.RE_CONNECT_SUCCESS,{type:v.RE_CONNECT_SUCCESS}))},U.closeReconnect=function(){this.reConnectTimer&&(clearTimeout(this.reConnectTime),this.reConnectTimer=null)},U.closeDataChannel=function(){this.datachannel&&(this.datachannel.close&&this.datachannel.close(),this.datachannel=null)},U.setVolume=function(e){"video"===this.eleTagName&&this.ele&&(this.ele,HTMLMediaElement),this.mute(0===e,e)},U.mute=function(e,t){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?(this.ele.muted=e,null!=t&&(this.ele.volume=e?0:t)):this.HevcController&&this.HevcController.mute(e)},U.getAudioStatus=function(){if("video"===this.eleTagName)return this.rtcPlayer.getEelement&&this.rtcPlayer.getEelement.muted?"muted":"unmuted"},U.play=function(){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.play():this.HevcController&&this.HevcController.play()},U.pause=function(){"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.pause():this.HevcController&&this.HevcController.pause()},U.getPlayStatus=function(){return"video"===this.eleTagName&&this.ele&&this.ele instanceof HTMLMediaElement?this.ele&&this.ele.paused?w.PAUSED:w.PLAYING:this.HevcController&&this.HevcController.getPlayStatus()},U.destroyPc=function(){this.closeDataChannel(),this.pc&&(this.pc.close(),this.pc=null)},U.destroy=function(){var e;this.destroyPc(),null!=(e=this.demuxer)&&e.destroy(),null!=(e=this.HevcController)&&e.destroy(),this._removeVideoEvent(),this.reConnectTime=-1,this.reConnectNumber=-1,this.reConnectTimer=null,this.reconnectStatus=S.RECONNECT_SUCCESS,this.rtcPlayer.trigger(v.DESTROY,{type:v.DESTROY})},r(Ae,[{key:"eleTagName",get:function(){var e;return null==(e=this.rtcPlayer.getEelement)?void 0:e.tagName.toLocaleLowerCase()}},{key:"ele",get:function(){return this.rtcPlayer.getEelement}},{key:"isEvs",get:function(){var e=this.rtcPlayer.rtcConfig.serverUrl;return null==e?void 0:e.includes(".rtc")}},{key:"isHevcCode",get:function(){return this.isHevc}},{key:"postMsg",get:function(){var e,t,i,n=this.rtcPlayer.rtcConfig.serverUrl,r=null==n?void 0:n.includes(".rtc");return i=r?(t=n,{"Content-Type":"text/plain;charset=utf-8"}):(e=null==n?void 0:n.replace("webrtc://","http://"),e=new URL(e||""),i="http://",t=(i=this.useHttps?"https://":i)+e.host+"/brtc/v3/pullstream",{"Content-Type":"application/json"}),{requsetUrl:t,headers:i,isEvsLive:r,serverUrl:n}}},{key:"useDataChannel",get:function(){var e;return null==(e=this.rtcPlayer)||null==(e=e.rtcConfig)?void 0:e.usedatachannel}},{key:"useHttps",get:function(){var e;return null==(e=this.rtcPlayer)||null==(e=e.rtcConfig)?void 0:e.usehttps}}]),Ae);function Ae(e,t){this.rtcPlayer=void 0,this.pc={},this.datachannel={},this.demuxer=void 0,this.fetch=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this.reConnectTime=void 0,this.reConnectNumber=void 0,this.reConnectTimer=void 0,this.HevcController=void 0,this.isHevc=void 0,this.oneReConnectTime=void 0,this.reconnectStatus=void 0,this.callBack=void 0,this.rtcPlayer=e,this.callBack=t,this.fetch=new D,e="[rtc-peerconnection]",this.log=R.log.bind(R,e),this.warn=R.warn.bind(R,e),this.error=R.error.bind(R,e),this.reConnectTime=this.rtcPlayer.rtcConfig.reConnectTimeOut||30,this.reConnectNumber=this.rtcPlayer.rtcConfig.reConnectTime||6,this.reConnectTimer=null,this.oneReConnectTime=this.reConnectTime/this.reConnectNumber,this.reconnectStatus=S.RECONNECT_SUCCESS,this.isHevc=!1,this.demuxer=null,this.HevcController=null,this._initPeerConnection(),this._addVideoEvent()}function Ee(e,t,i){this.rtcPlayer=void 0,this.demuxer=void 0,this._decodeController=void 0,this._tickTimer=void 0,this._nalQueue=void 0,this._frameQueue=void 0,this._frameRender=void 0,this.gl=void 0,this.AudioRender=void 0,this.renderEle=void 0,this.VideoInfo=void 0,this._isPaused=void 0,this.framerate=void 0,this.oneTime=void 0,this.renderFramerate=void 0,this.rtcPlayer=i,this.demuxer=e,this.renderEle=t,this._nalQueue=new ne(this),this._frameQueue=new ie,this._decodeController=null,this._isPaused=!1,this.VideoInfo={},this._tickTimer=new te(this._render.bind(this)),this.gl=null,this._frameRender=this.isWebCodecs?new re(this.renderEle):this._initWebgl(),this.AudioRender=new _e,this._selectDecoder(),this._initDecoder(),this._bindEvent(),this.framerate=0,this.oneTime=-1,this.renderFramerate=0}function be(){this._audioCtx=void 0,this._gainNode=void 0,this._audioCanAutoplay=void 0,this._onStateChange=void 0,this._ready=void 0,this._sampleQueue=void 0,this._inDecoding=void 0,this._isSourceBufferEnd=void 0,this._buffers=void 0,this._source=void 0,this._isStartPlay=void 0,this._isRender=void 0,this._audioCtx,this._gainNode,this._audioCanAutoplay,this._onSourceBufferEnded=this._onSourceBufferEnded.bind(this),this._onStateChange,this._ready=!1,this._inDecoding=!1,this._sampleQueue=[],this._isSourceBufferEnd=!1,this._source,this._initAudioCtx(),this._isStartPlay=!1,this._buffers=[],this._isRender=!1}return(me=we.prototype).on=function(e,t,i){this._emitter.on(e,t,i=void 0===i?this:i)},me.once=function(e,t,i){this._emitter.once(e,t,i=void 0===i?this:i)},me.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},me.off=function(e,t,i,n){this._emitter.off(e,t,i=void 0===i?this:i,n)},me.listeners=function(e){return this._emitter.listeners(e)},me.emit=function(e,t,i){return this._emitter.emit(e,t,i)},me.trigger=function(e,t){return this.emit(e,e,t)},me.listenerCount=function(e){return this._emitter.listenerCount(e)},me.subscribeLiveStream=function(){this.peerConnection.subscribeLiveStream()},me.sendMsg=function(e){this.peerConnection.sendMsg(e)},me.closeDataChannel=function(){this.peerConnection.closeDataChannel()},me.getStats=function(){return this.peerConnection.getStats()},me.mute=function(e){this.peerConnection.mute(e)},me.setVolume=function(e){this.peerConnection.setVolume(e)},me.getAudioStatus=function(){return this.peerConnection.getAudioStatus()},me.play=function(){return this.peerConnection.play()},me.pause=function(){return this.peerConnection.pause()},me.getPlayStatus=function(){return this.peerConnection.getPlayStatus()},me.destroy=function(){this.peerConnection.destroy()},r(we,[{key:"getEelement",get:function(){return document.getElementById(this.rtcConfig.id)}}],[{key:"Events",get:function(){return a({},v,A)}}]),we;function we(e,t){if(void 0===e&&(e={}),this._emitter=new y,this.rtcConfig=void 0,this.peerConnection=void 0,self.console){!function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.forEach((function(t){var i;L[t]=e[t]?e[t].bind(e):(i=self.console[t])?i.bind(self.console,"["+t+"] >"):T}))}(!0,"debug","log","info","warn","error");try{L.log("Debug logs enabled for 'RTC instance' in rtcplayer.js version 1.0.0")}catch(e){L=C}}else L=C;this.rtcConfig=e,this.peerConnection=new ve(this,t)}}()},,function(e,t,i){"use strict";i.r(t),i.d(t,"getPlayerPath",(function(){return a})),i.d(t,"loadWasm",(function(){return s})),i.d(t,"setPerformance",(function(){return o})),t=i(117);var n=i.n(t),r=(t=i(1),i.n(t));const a=(e=0)=>{var t=document.getElementsByTagName("script"),i=null;for(let e=0;e<t.length;e++)if(t[e].src.includes("cyberplayer.js")&&!t[e].src.includes("sdk-player")){i=t[e].src.substring(0,t[e].src.lastIndexOf("/")+1);break}return i},s=e=>{var t=document.getElementsByTagName("html"),i=n.a.simd(),s=a();let o=document.getElementById("cyberplayer-wasm");var l=r.a.isSafari();o&&e(),o||((o=document.createElement("script")).type="text/javascript",o.id="cyberplayer-wasm",o.src=i&&!l?s+"missile-simd.js":s+"missile.js",t[0].appendChild(o)),o.addEventListener("load",(()=>{e()}))},o=e=>{}},,function(e,t,i){"use strict";t.__esModule=!0,t.extend=o,t.indexOf=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return a.test(e)?e.replace(r,s):e},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=o({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,a=/[&<>"'`=]/;function s(e){return n[e]}function o(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}var l=Object.prototype.toString,h=(t.toString=l,function(e){return"function"==typeof e}),u=(h(/x/)&&(t.isFunction=h=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=h,Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)});t.isArray=u},function(e,t,i){"use strict";e.exports=function(e,t,i,n){var r,a=self||window;try{try{try{r=new a.Blob([e])}catch(s){(r=new(a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder)).append(e),r=r.getBlob()}var s=a.URL||a.webkitURL,o=s.createObjectURL(r),l=new a[t](o,i);return s.revokeObjectURL(o),l}catch(s){return new a[t]("data:application/javascript,".concat(encodeURIComponent(e)),i)}}catch(s){if(n)return new a[t](n,i);throw Error("Inline worker is not supported")}}},,,,function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),t=i(22);var n=i.n(t);function r(){return n()('/*! WebPlayer built @3/25/2024, 2:47:27 PM */!function(r){var s={};function a(e){var t;return(s[e]||(t=s[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,a),t.l=!0,t)).exports}a.m=r,a.c=s,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2)}([function(e,t){e.exports={DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNEL:1,H264AUD:[0,0,0,1,9,224],H265AUD:[0,0,0,1,70,1,80],DEF_AAC:"aac",DEF_MP3:"mp3",DEF_H265:"h265",DEF_HEVC:"hevc",DEF_H264:"h264",DEF_AVC:"avc",CODEC_OFFSET_TABLE:["hevc","h265","avc","h264","aac","mp3"]}},function(e,t,r){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,r){"use strict";r.r(t);const s={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},a={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"demuxer_error",OPEN_MEDIA_FAILED:"failed to open media"},i={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError"};const m={WASM_LOAD_FINISH:0,DECODE_FINISH:1,DEOCDE_INIT_FINISH:2,SET_FRAME:3,WASM_POST_RUN:11,DEMUXER_INIT_FINISH:12,POST_DEMUXER_INFO:13,DEMUXER_FINISH:14,DEMUXER_ERROR:20,WAMS_ERROR:111},n={INIT_DECODER:0,DECODE_VIDEO:1,RETURN_VIDEO_BUFFER:2,INIT_DEMUXER:11,DEMUXER_BOX:12,GET_DEMUXER_INFO:13,RELEASE_DECODE:14,RELEASE_DEMUXER:15,LOAD_WAMS_JS:111};var t=r(1),o=r.n(t),t=r(0),f=r.n(t);self.Module={onRuntimeInitialized:function(){self.decoder&&self.decoder.onWasmLoaded()},postRun:function(){self.decoder&&self.decoder.onPostRun()},onAbort:function(e){self.postMessage({t:m.WAMS_ERROR,data:{msg:""+a.WASM_ERROR+e,errorType:s.NOT_SUPPORT,event:i.WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}},self.wasmPath=null;self.onmessage=e=>{var t=e["data"];switch(t.t){case n.INIT_DECODER:self.decoder.initDecoder(t.data);break;case n.DECODE_VIDEO:self.decoder.decodeVideo(t);break;case n.RETURN_VIDEO_BUFFER:self.decoder.returnVideoBuffer(t.f);break;case n.INIT_DEMUXER:self.decoder.initDemuxer();break;case n.DEMUXER_BOX:self.decoder.demuxCore(t);break;case n.GET_DEMUXER_INFO:self.decoder.getReadLayer(t);break;case n.RELEASE_DECODE:self.decoder.release();break;case n.RELEASE_DEMUXER:self.decoder.releaseTsDemuxer();case n.LOAD_WAMS_JS:self.decoder.loadJs(t.pathUrl,t.isSafari)}},self.decoder=new class{constructor(){this.wasmLoaded=!1,this.videoCallback=null,this.vcodecerPtr=null,this.playerData=null,this.videoFrameBuffer=[],this.time=null,this.decodeTime=null,this.oneScondTime=(new Date).getTime(),this.frameRate=null,this.naluLayer={vps:null,sps:null,pps:null,sei:null},this.vlcLayer={vlc:null},this.offsetDemux=null,this.mediaAttr={},this.extensionInfo={vWidth:0,vHeight:0},this.isReadDemuxData=!1}initDecoder(e){this.playerData=e,this.vcodecerPtr=Module.cwrap("registerPlayer","number",["string","string"])(e.token,e.playerVersion);let u=this;this.videoCallback=Module.addFunction(function(e,t,r,s,a,i,n,o,l){var e=Module.HEAPU8.subarray(e,e+s*o),t=Module.HEAPU8.subarray(t,t+a*o/2),r=Module.HEAPU8.subarray(r,r+i*o/2);0<self.decoder.videoFrameBuffer.length&&self.decoder.videoFrameBuffer[0].y.length<s*o&&(self.decoder.videoFrameBuffer=[]);let d=null;0<self.decoder.videoFrameBuffer.length?((d={t:m.DECODE_FINISH,y:self.decoder.videoFrameBuffer[0].y,u:self.decoder.videoFrameBuffer[0].u,v:self.decoder.videoFrameBuffer[0].v,height:o,width:s,ptsSec:+l/1e3,stride_y:s,stride_u:a,stride_v:i}).y.set(e),d.u.set(t),d.v.set(r),self.decoder.videoFrameBuffer.shift()):d={t:m.DECODE_FINISH,y:new Uint8Array(e),u:new Uint8Array(t),v:new Uint8Array(r),height:o,width:s,ptsSec:+l/1e3,stride_y:s,stride_u:a,stride_v:i},u.frameRate++,u.oneScondTime&&1e3<(new Date).getTime()-u.oneScondTime&&(e=JSON.parse(JSON.stringify(u.frameRate)),u.frameRate=0,u.oneScondTime=(new Date).getTime(),self.postMessage({t:m.SET_FRAME,frameRate:e,decodeTime:parseInt(1e3/e)})),self.postMessage(d,[d.y.buffer,d.u.buffer,d.v.buffer])},"viiiiiiiid"),Module.cwrap("setCodecType","number",["number","number","number"])(this.vcodecerPtr,e.videoCodec,this.videoCallback),Module.cwrap("initializeDecoder","number",["number"])(this.vcodecerPtr),self.postMessage({t:m.DEOCDE_INIT_FINISH})}decodeVideo(e){var{nalBuf:e,pts:t,flushDecoder:r}=e,s=Module._malloc(e.length),t=(Module.HEAP8.set(e,s),parseInt(1e3*t));Module.cwrap("decodeCodecContext","number",["number","number","number","number","number"])(this.vcodecerPtr,s,e.length,t,r),Module._free(s)}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:m.WASM_LOAD_FINISH}))}returnVideoBuffer(e){this.videoFrameBuffer.length<10&&this.videoFrameBuffer.push(e)}loadJs(e,t){var r=o.a.simd(),r=navigator.userAgent.toLocaleLowerCase().includes("iphone")?e+"missile-min.js":r&&!t?e+"missile-simd.js":e+"missile.js";self.wasmPath=e,self.importScripts(r)}onPostRun(){self.postMessage({t:m.WASM_POST_RUN})}initDemuxer(){Module.cwrap("initTsMissile","number",[])(),Module.cwrap("initializeDemuxer","number",[])(),self.postMessage({t:m.DEMUXER_INIT_FINISH})}releaseTsDemuxer(){Module.cwrap("exitTsMissile","number",[])()}releaseOffset(){void 0!==this.offsetDemux&&null!==this.offsetDemux&&(Module._free(this.offsetDemux),this.offsetDemux=null)}demuxBox(e){var{d:e,isLive:t}=e,e=(this.offsetDemux=Module._malloc(e.length),Module.HEAP8.set(e,this.offsetDemux),Module.cwrap("demuxBox","number",["number","number","number"])(this.offsetDemux,e.length,t));0<=e?(this.setMediaInfo(),this.setExtensionInfo(),postMessage({t:m.DEMUXER_FINISH,mediaAttr:this.mediaAttr,extensionInfo:this.extensionInfo})):postMessage({t:m.DEMUXER_ERROR,type:"demux",message:"demux error"})}setMediaInfo(){var e=Module.cwrap("getMediaInfo","number",[])(),t=Module.HEAPU32[e/4],r=Module.HEAPU32[e/4+1],s=Module.HEAPF64[e/8+1],a=Module.HEAPF64[e/8+1+1],i=Module.HEAPF64[e/8+1+1+1],n=Module.HEAPF64[e/8+1+1+1+1],e=Module.HEAPU32[e/4+2+2+2+2+2],s=(this.mediaAttr.vFps=s,this.mediaAttr.vGop=e,this.mediaAttr.vDuration=a,this.mediaAttr.aDuration=i,this.mediaAttr.duration=n,Module.cwrap("getAudioCodecID","number",[])()),e=(0<=s?(this.mediaAttr.aCodec=f.a.CODEC_OFFSET_TABLE[s],this.mediaAttr.sampleRate=0<t?t:f.a.DEFAULT_SAMPLERATE,this.mediaAttr.sampleChannel=0<=r?r:f.a.DEFAULT_CHANNEL):(this.mediaAttr.sampleRate=0,this.mediaAttr.sampleChannel=0,this.mediaAttr.audioNone=!0),Module.cwrap("getVideoCodecID","number",[])());0<=e&&(this.mediaAttr.vCodec=f.a.CODEC_OFFSET_TABLE[e])}setExtensionInfo(){var e=Module.cwrap("getExtensionInfo","number",[])(),t=Module.HEAPU32[e/4],e=Module.HEAPU32[e/4+1];this.extensionInfo.vWidth=t,this.extensionInfo.vHeight=e}demuxCore(e){this.releaseOffset(),this.refreshDemuxer(),this.demuxBox(e)}refreshDemuxer(){this.releaseTsDemuxer(),this.initDemuxer()}getReadLayer(){var e=Module.cwrap("getPacket","number",[])(),t=Module.HEAPU32[e/4],r=Module.HEAPU32[e/4+1],s=Module.HEAPF64[e/8+1],a=Module.HEAPF64[e/8+1+1],i=Module.HEAPU32[e/4+1+1+2+2];if(0==t||1==t){var e=Module.HEAPU32[e/4+1+1+2+2+1],e=Module.HEAPU8.subarray(e,e+r),n=new Uint8Array(e),o=Module.cwrap("getSPSLen","number",[])(),l=Module.cwrap("getSPS","number",[])();if(!(o<0)){var d,l=Module.HEAPU8.subarray(l,l+o),o=(this.naluLayer.sps=new Uint8Array(o),this.naluLayer.sps.set(l,0),Module.cwrap("getPPSLen","number",[])()),u=Module.cwrap("getPPS","number",[])(),u=Module.HEAPU8.subarray(u,u+o),o=(this.naluLayer.pps=new Uint8Array(o),this.naluLayer.pps.set(u,0),Module.cwrap("getSEILen","number",[])()),c=Module.cwrap("getSEI","number",[])(),c=Module.HEAPU8.subarray(c,c+o),o=(this.naluLayer.sei=new Uint8Array(o),this.naluLayer.sei.set(c,0),Module.cwrap("getVLCLen","number",[])()),E=Module.cwrap("getVLC","number",[])(),E=Module.HEAPU8.subarray(E,E+o);this.vlcLayer.vlc=new Uint8Array(o),this.vlcLayer.vlc.set(E,0),this.mediaAttr.vCodec==f.a.DEF_HEVC||this.mediaAttr.vCodec==f.a.DEF_H265?(o=Module.cwrap("getVPSLen","number",[])(),d=Module.cwrap("getVPS","number",[])(),d=Module.HEAPU8.subarray(d,d+o),this.naluLayer.vps=new Uint8Array(o),this.naluLayer.vps.set(d,0),Module._free(d),d=null):this.mediaAttr.vCodec!=f.a.DEF_AVC&&(this.mediaAttr.vCodec,f.a.DEF_H264);try{postMessage({t:m.POST_DEMUXER_INFO,type:t,size:r,ptime:s,dtime:a,keyframe:i,src:n,layer:{nalu:this.naluLayer,vlc:this.vlcLayer}},[n.buffer,this.vlcLayer.vlc.buffer]),this.getReadLayer()}catch(e){}Module._free(e),Module._free(l),Module._free(u),Module._free(c),Module._free(E)}}}release(){Module.cwrap("release","number",["number"])(this.vcodecerPtr),Module.cwrap("exitMissile","number",["number"])(this.vcodecerPtr)}}}]);',"Worker",void 0,i.p+"decoder.worker.worker.js")}},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){e.exports={PLAYER_VERSION:"4.3.1.0"}},function(e,t,i){const n=i(37);e.exports=()=>{let e={videoBuffer:[],audioBuffer:[],idrIdxBuffer:[],videoptsec:-1,appendFrame:(t,i,r=!0,a=!1)=>{i=new n.BufferFrame(t,a,i,r);let s=parseInt(t);return r?(s==e.videoptsec&&(s+=1),e.videoBuffer.length-1>=s?e.videoBuffer[s].push(i):e.videoBuffer.push([i]),a&&!e.idrIdxBuffer.includes(t)&&e.idrIdxBuffer.push(t)):e.audioBuffer.length-1>=s&&null!=e.audioBuffer[s]&&null!=e.audioBuffer[s]?e.audioBuffer[s]&&e.audioBuffer[s].push(i):e.audioBuffer.push([i]),!0},appendFrameWithDts:(t,i,r,a=!0,s=!1)=>(t=n.ConstructWithDts(t,i,s,r,a),r=parseInt(i),a?(e.videoBuffer.length-1>=r?e.videoBuffer[r].push(t):e.videoBuffer.push([t]),s&&!e.idrIdxBuffer.includes(i)&&e.idrIdxBuffer.push(i)):e.audioBuffer.length-1>=r&&null!=e.audioBuffer[r]&&null!=e.audioBuffer[r]?e.audioBuffer[r]&&e.audioBuffer[r].push(t):e.audioBuffer.push([t]),!0),appendFrameByBufferFrame:t=>{var i=t.pts,n=parseInt(i);return t.video?(e.videoBuffer.length-1>=n?e.videoBuffer[n].push(t):e.videoBuffer.push([t]),isKey&&!e.idrIdxBuffer.includes(i)&&e.idrIdxBuffer.push(i)):e.audioBuffer.length-1>=n?e.audioBuffer[n].push(t):e.audioBuffer.push([t]),!0},cleanPipeline:()=>{e.videoBuffer.length=0,e.audioBuffer.length=0,e.videoptsec=-1,e.videoBuffer=[],e.audioBuffer=[]},vFrame:(t=-1)=>{if(!(t<0||t>e.videoBuffer.length-1))return e.videoptsec=t,e.videoBuffer[t]},aFrame:(t=-1)=>{if(!(t<0||t>e.audioBuffer.length-1))return e.audioBuffer[t]},seekIDR:(t=-1)=>{if(t<0)return null;if(e.idrIdxBuffer.includes(t))return t;for(let n=0;n<e.idrIdxBuffer.length;n++)if(n===e.idrIdxBuffer.length-1||e.idrIdxBuffer[n]<t&&e.idrIdxBuffer[n+1]>t||0===n&&e.idrIdxBuffer[n]>=t){for(let t=1;0<=t;t--){var i=n-t;if(0<=i)return e.idrIdxBuffer[i]}return e.idrIdxBuffer[n]}}};return e}},function(e,t,i){"use strict";t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){for(var i=void 0,a=void 0,s=void 0,o=void 0,l=((t=t&&t.loc)&&(i=t.start.line,a=t.end.line,s=t.start.column,o=t.end.column,e+=" - "+i+":"+s),Error.prototype.constructor.call(this,e)),h=0;h<n.length;h++)this[n[h]]=l[n[h]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{t&&(this.lineNumber=i,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:o,enumerable:!0})):(this.column=s,this.endColumn=o))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},,function(e,t,i){i=[i(15),i(140)],t=function(e,t){function i(t,i){if(null!=t){void 0===t.length&&(t=[t]);var n,r={};for(n in i)r[n]=function(t,i,n){return""===i||null==i?"":(n=n?" !important":"","string"==typeof i&&isNaN(i)?/png|gif|jpe?g/i.test(i)&&i.indexOf("url")<0?"url("+i+")":i+n:0===i||"z-index"===t||"opacity"===t?i+n:/color/i.test(t)?"#"+e.pad(i.toString(16).replace(/^0x/i,""),6)+n:Math.ceil(i)+"px"+n)}(n,i[n]);for(var a=0;a<t.length;a++){var s,o=t[a];if(null!=o)for(n in r)s=function(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}(n),o.style[s]!==r[n]&&(o.style[s]=r[n])}}}return{css:function(e,n,r){r=r||"all-players";var a,s="";"object"==typeof n?(i(a=document.createElement("div"),n),s="{"+a.style.cssText+"}"):"string"==typeof n&&(s=n),t.style([[e,e+s]],r)},style:i,clearCss:t.clear,transform:function(e,t){i(e,{transform:t,webkitTransform:t,msTransform:t,mozTransform:t,oTransform:t})},animation:function(e,t){i(e,{animation:t,webkitAnimation:t,msAnimation:t,mozAnimation:t,oAnimation:t})},hexToRgba:function(e,t){var i="rgb";return e?3===(e=String(e).replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)):e="000000",e=[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)],void 0!==t&&100!==t&&(i+="a",e.push(t/100)),i+"("+e.join(",")+")"}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){void 0!==(t=function(){return"4.4.0.1"}.apply(t,[]))&&(e.exports=t)},function(e,t,i){(function(t){i(35),t.CACHE_APPEND_STATUS_CODE={FAILED:-1,OVERFLOW:-2,OK:0,NOT_FULL:1,FULL:2,NULL:3},e.exports=(e=60)=>{let t={limit:e,yuvCache:[],appendCacheByCacheYuv:e=>{e.pts,t.yuvCache.push(e)},getState:()=>t.yuvCache.length<=0?CACHE_APPEND_STATUS_CODE.NULL:t.yuvCache.length>=t.limit?CACHE_APPEND_STATUS_CODE.FULL:CACHE_APPEND_STATUS_CODE.NOT_FULL,cleanPipeline:()=>{t.yuvCache.length=0},vYuv:()=>t.yuvCache.length<=0?null:t.yuvCache.shift(),getYuv:()=>t.yuvCache.length<=0?null:t.yuvCache[0]};return t}}).call(this,i(27))},function(e,t){t.CacheYuvStruct=class{constructor(e,t,i,n,r,a){this.pts=e,this.width=t,this.height=i,this.y=n,this.u=r,this.v=a}setYuv(e,t,i,n,r,a){this.pts=e,this.width=t,this.height=i,this.y=n,this.u=r,this.v=a}}},function(e,t,i){function n(e){this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}i(12),n.prototype.bind=function(e,t,i){var n=this.gl;n.activeTexture([n.TEXTURE0,n.TEXTURE1,n.TEXTURE2][e]),n.bindTexture(n.TEXTURE_2D,this.texture),n.uniform1i(n.getUniformLocation(t,i),e)},n.prototype.fill=function(e,t,i){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e,t,0,n.LUMINANCE,n.UNSIGNED_BYTE,i)},e.exports={renderFrame:function(e,t,i,n,r,a){e.viewport(0,0,e.canvas.width,e.canvas.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.y.fill(r,a,t),e.u.fill(r>>1,a>>1,i),e.v.fill(r>>1,a>>1,n),e.drawArrays(e.TRIANGLE_STRIP,0,4)},setupCanvas:function(e,t){var i,r,a,s;return(e=e.getContext("webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0})||e.getContext("experimental-webgl",{alpha:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0}))&&(i=e.createProgram(),r=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {"," gl_Position = aVertexPosition;"," vTextureCoord = aTextureCoord;","}"].join("\n"),a=e.createShader(e.VERTEX_SHADER),e.shaderSource(a,r),e.compileShader(a),r=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","("," 1.1643828125, 0, 1.59602734375, -.87078515625,"," 1.1643828125, -.39176171875, -.81296875, .52959375,"," 1.1643828125, 2.017234375, 0, -1.081390625,"," 0, 0, 0, 1",");","void main(void) {"," gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),s=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(s,r),e.compileShader(s),e.attachShader(i,a),e.attachShader(i,s),e.linkProgram(i),e.useProgram(i),e.getProgramParameter(i,e.LINK_STATUS),r=e.getAttribLocation(i,"aVertexPosition"),e.enableVertexAttribArray(r),a=e.getAttribLocation(i,"aTextureCoord"),e.enableVertexAttribArray(a),s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.y=new n(e),e.u=new n(e),e.v=new n(e),e.y.bind(0,i,"YTexture"),e.u.bind(1,i,"UTexture"),e.v.bind(2,i,"VTexture")),e},releaseContext:function(e){e.deleteTexture(e.y.texture),e.deleteTexture(e.u.texture),e.deleteTexture(e.v.texture)}}},function(e,t){class i{constructor(e,t,i,n){this.pts=e,this.dts=e,this.isKey=t,this.data=i,this.video=n}setFrame(e,t,i,n){this.pts=e,this.isKey=t,this.data=i,this.video=n}}t.BufferFrame=i,t.ConstructWithDts=(e,t,n,r,a)=>((e=new i(e,n,r,a)).dts=t,e)},function(e,t,i){i=[i(62),i(1)],t=function(e,t){return e.extend({constructor:function(e){var t,i;this.el=document.createElement("div"),this.el.className="jw-icon jw-icon-tooltip "+e+" jw-button-color jw-reset jw-hidden",this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip","jw-icon-hd"===e?((t=document.createElement("span")).className="jw-hd-label",this.el.appendChild(t)):"jw-icon-playrate"===e?((t=document.createElement("span")).className="jw-playrate-label",this.el.appendChild(t)):"jw-icon-cc"===e?((t=document.createElement("span")).className="jw-cc-label",this.el.appendChild(t)):"jw-icon-qualityChange"===e?((i=document.createElement("span")).className="jw-qualityChange-label",this.el.appendChild(i)):"jw-icon-lang"===e&&((i=document.createElement("span")).className="jw-lang-label",this.el.appendChild(i)),this.el.appendChild(this.container)},addContent:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)},removeContent:function(){this.content&&(this.container.removeChild(this.content),this.content=null)},hasContent:function(){return!!this.content},element:function(){return this.el},openTooltip:function(e){this.trigger("open-"+this.componentType,e,{isOpen:!0}),this.isOpen=!0,t.toggleClass(this.el,this.openClass,this.isOpen)},closeTooltip:function(e){this.trigger("close-"+this.componentType,e,{isOpen:!1}),this.isOpen=!1,t.toggleClass(this.el,this.openClass,this.isOpen)},toggleOpenState:function(e){this.isOpen?this.closeTooltip(e):this.openTooltip(e)}})}.apply(t,i),void 0!==t&&(e.exports=t)},,,,,,function(e,t,i){i=[i(2),i(15)],t=function(e,t){var i={exists:function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},isHTTPS:function(){return 0===window.location.href.indexOf("https")},isRtmp:function(e,t){return e&&(0===e.indexOf("rtmp")||"rtmp"===t)},isHls:function(e,i){return e&&("m3u8"===t.extension(e)||"hls"===t.extension(e)||"hls"===i)},isFlv:function(e,i){return e&&("flv"===t.extension(e)||"flv"===i)},isMp4:function(e,i){return e&&("mp4"===t.extension(e)||"mp4"===i)},isMov:function(e,i){return e&&("mov"===t.extension(e)||"mov"===i)},isMpegTs:function(e,i){return e&&("ts"===t.extension(e)||"ts"===i)},isHtml5Flv:function(e,t=""){return i.isFlv(e,t)&&i.isFlvjsSupported()},isFlvjsSupported:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},isMutipleHls:function(t){if(e.isArray(t)&&1<t.length){var n=0;if(e.each(t,(function(e){i.isHls(e.file,e.type)&&n++})),n===t.length)return!0}return!1},typeOf:function(t){var i;return null===t?"null":"object"==(i=typeof t)&&e.isArray(t)?"array":i},isRtc:function(e){return"rtc"==e},isMp3:function(e,i){return e&&("mp3"===t.extension(e)||"mp3"===i)},isAac:function(e,i){return e&&("aac"===t.extension(e)||"aac"===i)},isFlac:function(e,i){return e&&("flac"===t.extension(e)||"flac"===i)},isOgg:function(e,i){var n=document.createElement("audio").canPlayType('audio/ogg;codecs="vorbis"');return e&&("ogg"===t.extension(e)||"ogg"===i)&&n},isWav:function(e,i){return e&&("wav"===t.extension(e)||"wav"===i)},isOpus:function(e,i){return e&&("opus"===t.extension(e)||"opus"===i)}};return i}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){void 0!==(t=function(){return{repo:"https://bce.bdstatic.com/jwplayer/",SkinsIncluded:["bce"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","seven","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(t,[]))&&(e.exports=t)},function(e,t,i){i=[i(99),i(100),i(149),i(2)],t=function(e,t,i,n){function r(e){this.providers=t.slice(),this.config=e||{}}return r.registerProvider=function(r){var a=r.getName().name;if(!i[a]){if(!n.find(t,n.matches({name:a}))){if(!n.isFunction(r.supports))throw{message:"Tried to register a provider with an invalid object"};t.unshift({name:a,supports:r.supports})}function s(){}s.prototype=e,r.prototype=new s,i[a]=r}},r.load=function(e){return Promise.all(n.map(e,(function(e){return new Promise((function(t){e.name,t()})).then((function(e){e&&r.registerProvider(e)}))})))},n.extend(r.prototype,{providerSupports:function(e,t){return e.supports(t)},required:function(e,t){return e=e.slice(),n.compact(n.map(this.providers,(function(i){for(var n=!1,r=e.length;r--;){var a=e[r];(a=i.supports(a.sources[0],t))&&e.splice(r,1),n=n||a}if(n)return i})))},choose:function(e){e=n.isObject(e)?e:{};for(var t=this.providers.length,r=0;r<t;r++){var a=this.providers[r];if(this.providerSupports(a,e))return{priority:t-r-1,name:a.name,type:e.type,provider:i[a.name]}}return null}}),r}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){const n=window.AudioContext||window.webkitAudioContext,r=i(5),a=i(12);e.exports=e=>{let t={options:{sampleRate:e.sampleRate||r.DEFAULT_SAMPLERATE,appendType:e.appendType||r.APPEND_TYPE_STREAM,playMode:e.playMode||r.AUDIO_MODE_SWAP},sourceChannel:-1,audioCtx:new n({latencyHint:"interactive",sampleRate:e.sampleRate}),gainNode:null,sourceList:[],startStatus:!1,sampleQueue:[],nextBuffer:null,playTimestamp:0,playStartTime:0,durationMs:-1,isLIVE:!1,voice:1,onLoadCache:null,videoPTS:null,isDecodeError:!1,resetStartParam:()=>{t.playTimestamp=0,t.playStartTime=0},setOnLoadCache:e=>{t.onLoadCache=e},setDurationMs:(e=-1)=>{t.durationMs=e},setVoice:(e=1,i)=>{var n;"running"!=t.audioCtx.state&&(t.videoPTS=i,-1<(n=t.sampleQueue.findIndex((e=>e.pts>=i)))&&t.sampleQueue.splice(0,n),t.audioCtx.resume()),t.voice=e,t.gainNode.gain.value=e},setVideoPTS:e=>{t.videoPTS&&(t.videoPTS=e)},getAlignVPTS:()=>t.playTimestamp+(a.GetMsTime()-t.playStartTime)/1e3,swapSource:(e=-1,i=-1)=>{if(0==t.startStatus)return null;if(e<0||e>=t.sourceList.length)return null;if(i<0||i>=t.sourceList.length)return null;try{t.sourceChannel===e&&null!==t.sourceList[e]&&(t.sourceList[e].disconnect(t.gainNode),t.sourceList[e]=null)}catch(e){}t.sourceChannel=i,-2==t.decodeSample(i,e)&&t.isLIVE&&(t.getAlignVPTS()>=t.durationMs/1e3-.04?t.pause():null!==t.onLoadCache&&t.onLoadCache())},addSample:(e=null)=>!(null==e||!e||null==e||(0==t.sampleQueue.length&&(t.seekPos=e.pts),t.sampleQueue.push(e),0)),runNextBuffer:()=>{window.setInterval((()=>{if(!(null!=t.nextBuffer||t.sampleQueue.length<r.DEFAULT_CONSU_SAMPLE_LEN)){var e;t.nextBuffer={data:null,pts:-1};for(let i=0;i<r.DEFAULT_CONSU_SAMPLE_LEN;i++){e=t.sampleQueue.shift();let i=null;if(i=t.options.appendType==r.APPEND_TYPE_STREAM?e:e.data,t.nextBuffer.pts<0&&(t.nextBuffer.pts=e.pts),null==t.nextBuffer.data?t.nextBuffer.data=new Uint8Array(i):((e=new Uint8Array(i.length+t.nextBuffer.data.length)).set(t.nextBuffer.data,0),e.set(i,t.nextBuffer.data.length),t.nextBuffer.data=e),t.sampleQueue.length<=0)break}}}),20)},decodeSample:(e=-1,i=-1)=>{if(e<0||e>=t.sourceList.length)return-1;if(null!=t.sourceList[e]&&null!=t.sourceList[e]&&t.sourceList[e]||(t.sourceList[e]=t.audioCtx.createBufferSource(),t.sourceList[e].onended=function(){t.swapSource(e,i)}),0==t.sampleQueue.length)return t.isLIVE?(t.sourceList[e].connect(t.gainNode),t.sourceList[e].start(),t.sourceList[e].onended=function(){t.swapSource(e,i)},t.sourceList[e].stop(),0):-2;if(t.sourceList[e].buffer)t.swapSource(e,i);else{if(null==t.nextBuffer||t.nextBuffer.data.length<1)return t.sourceList[e].connect(t.gainNode),t.sourceList[e].start(),t.sourceList[e].startState=!0,t.sourceList[e].stop(),1;var n=t.nextBuffer.data.buffer;(!t.videoPTS||t.videoPTS<=t.nextBuffer.pts)&&(t.videoPTS=null,t.playTimestamp=t.nextBuffer.pts,t.playStartTime=a.GetMsTime());try{t.audioCtx.decodeAudioData(n,(function(i){null!==t.sourceList[e]&&(t.sourceList[e].buffer=i,t.sourceList[e].connect(t.gainNode),t.sourceList[e].context.resume(),t.sourceList[e].start(),t.sourceList[e].startState=!0)}),(function(e){t.isDecodeError=!0}))}catch(i){return t.nextBuffer=null,t.isDecodeError=!0,-3}t.nextBuffer=null}return 0},decodeWholeSamples:(e=-1)=>{if((t.sourceChannel=e)<0||e>=t.sourceList.length)return-1;if(null!=t.sourceList[e]&&null!=t.sourceList[e]&&t.sourceList[e]||(t.sourceList[e]=t.audioCtx.createBufferSource(),t.sourceList[e].onended=function(){}),0==t.sampleQueue.length)return-2;let i=null;var n;for(let e=0;e<t.sampleQueue.length;e++){n=t.sampleQueue.shift();let e=null;if(e=t.options.appendType==r.APPEND_TYPE_STREAM?n:n.data,i=null==i?new Uint8Array(e):((n=new Uint8Array(e.length+i.length)).set(i,0),n.set(e,i.length),n),t.sampleQueue.length<=0)break}var a=i;if(null==a||a.length<1)return t.sourceList[e].connect(t.gainNode),t.sourceList[e].start(),t.sourceList[e].stop(),1;a=a.buffer;try{t.audioCtx.decodeAudioData(a,(function(i){t.sourceList[e].buffer=i,t.sourceList[e].connect(t.gainNode),t.audioCtx.resume(),t.sourceList[e].start(),t.sourceList[e].startState=!0}),(function(e){e.err}))}catch(a){return-3}return 0},play:()=>{if(!t.isDecodeError&&0==t.startStatus){t.startStatus=!0;let e=0;"running"!=t.audioCtx.state&&t.audioCtx.resume(),-2==(e=t.options.playMode==r.AUDIO_MODE_ONCE?t.decodeWholeSamples(0):t.swapSource(0,1))&&t.pause()}},pause:()=>{t.startStatus=!1;for(let e=0;e<t.sourceList.length;e++)if(void 0!==t.sourceList[e]&&null!==t.sourceList[e])try{void 0!==t.sourceList[e].buffer&&null!==t.sourceList[e].buffer&&(t.sourceList[e].stop(),t.sourceList[e].disconnect(t.gainNode)),t.sourceList[e]=null}catch(e){}},stop:()=>{t.pause(),t.cleanQueue(),t.nextBuffer=null,t.sourceChannel=-1},cleanQueue:()=>{for(let e=t.sampleQueue.length=0;e<t.sourceList.length;e++)try{void 0!==t.sourceList[e].buffer&&null!==t.sourceList[e].buffer&&(t.sourceList[e].stop(),t.sourceList[e].disconnect(t.gainNode)),t.sourceList[e]=null}catch(e){}}};return t.sourceList.push(t.audioCtx.createBufferSource()),t.sourceList.push(t.audioCtx.createBufferSource()),t.sourceList[0].onended=function(){t.swapSource(0,1)},t.sourceList[1].onended=function(){t.swapSource(1,0)},t.gainNode=t.audioCtx.createGain(),t.gainNode.gain.value=t.voice,t.gainNode.connect(t.audioCtx.destination),"running"!=t.audioCtx.state&&t.audioCtx.resume(),t.runNextBuffer(),t}},function(e,t,i){i=[i(15)],t=function(e){return{localName:function(e){return e&&(e.localName||e.baseName)||""},textContent:function(t){return t?t.textContent?e.trim(t.textContent):t.text?e.trim(t.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t){t.default={zh:{DANMU:{DANMUSETTING:"寮瑰箷璁剧疆",RESET:"閲嶇疆",DANMUOPACITY:"涓嶉€忔槑搴�",DANMUAREA:"鏄剧ず鍖哄煙",DANMUSPEED:"寮瑰箷閫熷害",DANMUFONT:"瀛椾綋澶у皬",INTELLIGENTBLOCKING:"鏅鸿兘鎸℃澘",MINIMAL:"鏋佸皬",MODERATE:"閫備腑",GREAT:"鏋佸ぇ",QUARTERSCREEN:"1/4",THREEQUARTERSCREEN:"3/4",HALFSCREEN:"1/2",FULLSCREEN:"1"},PERFORMANCE:{FORMAT:"鏍煎紡",FPS:"甯х巼",RESOLUTION:"鍒嗚鲸鐜�",ENCODETYPE:"缂栫爜鏂瑰紡",BUFFEREND:"buffer姘翠綅绾�",FIRSETIME:"棣栧抚鏃堕棿",DECODEEFFICIENCY:"瑙ｇ爜鏁堢巼",DECODECONSUMPTION:"瑙ｇ爜娑堣€�"},HLSQUALITYCHANGE:{AUTO:"鑷姩"},ERRORTIPS:{NOTSUPPORT:"闊�/瑙嗛鏍煎紡涓嶆敮鎸侊紝鎴栨湭鎵惧埌鍙敤璧勬簮"},LICENSE:{NO_APPID:"license楠岃瘉澶辫触:璇峰湪閰嶇疆鏂囦欢涓～鍐檃ppid",NO_LICENSE:"license楠岃瘉澶辫触:璇峰湪閰嶇疆鏂囦欢涓厤缃甽icenseUrl",ERROR_LICENSE_URL:"license楠岃瘉澶辫触:绛惧悕鏍￠獙閿欒",DOMAIN_FAIL:"license楠岃瘉澶辫触:璇佷功涓庡煙鍚嶄笉鍖归厤",IS_EXPIRED:"license楠岃瘉澶辫触:璇佷功宸茶繃鏈�",FETCH_ERROR:"license楠岃瘉澶辫触:璇诲彇涓嶅埌璇佷功",BASE_FUNC_NOT_SUPPORT:"璇ュ姛鑳戒笉鏀寔,璇峰崌绾т负楂樼骇鐗堣瘉涔�",EXPIRED_COUNT_DOWM:"璇佷功宸茶繃鏈�:",DAY:"澶�"},MEMORYPLAY:{POSITION_TO:"宸蹭负鎮ㄥ畾浣嶈嚦"}},en:{DANMU:{DANMUSETTING:"Barrage settings",RESET:"Reset",DANMUOPACITY:"Opacity",DANMUAREA:"Display  area",DANMUSPEED:"Barrage speed",DANMUFONT:"Font size",INTELLIGENTBLOCKING:"Intelligent blocking",MINIMAL:"Minimal",MODERATE:"Moderate",GREAT:"Great",QUARTERSCREEN:"1/4",THREEQUARTERSCREEN:"3/4",HALFSCREEN:"1/2",FULLSCREEN:"1"},PERFORMANCE:{FORMAT:"format",FPS:"fps",RESOLUTION:"resolution",ENCODETYPE:"encodeType",BUFFEREND:"bufferEnd",FIRSETIME:"firstTime",DECODEEFFICIENCY:"decodeEfficiency",DECODECONSUMPTION:"decodeConsumption"},HLSQUALITYCHANGE:{AUTO:"Auto"},ERRORTIPS:{NOTSUPPORT:"Audio/video is not supported or no playable source found"},LICENSE:{NO_APPID:"license error:Lack appid.",NO_LICENSE:"license error:Lack license url.",ERROR_LICENSE_URL:"license error:License verification failed.",DOMAIN_FAIL:"license error:Domain verification failed.",IS_EXPIRED:"license error:The license has expired.",FETCH_ERROR:"license error:Get license data failed.",BASE_FUNC_NOT_SUPPORT:"This feature is not supported, please upgrade to the advanced version certificate",EXPIRED_COUNT_DOWM:"The license has expired:",DAY:"day"},MEMORYPLAY:{POSITION_TO:"Has located for you to "}}}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),t=i(22);var n=i.n(t);function r(){return n()('/*! WebPlayer built @3/25/2024, 2:47:27 PM */!function(r){var a={};function n(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}n.m=r,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,r){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,r){"use strict";r.r(t);const a={NOT_SUPPORT:"NotSupport",NETWORK_ERROR:"networkError",OTHER:"other"},n={NOT_SUPPORT_DETAIL:"play format not support",RECONNECT_ERROR_DETAIL:"reconnect is timeout",WASM_ERROR:"wasm error reason:",DEMUXER_ERROR:"demuxer_error",OPEN_MEDIA_FAILED:"failed to open media"},i={TIMEOUT:"timeout",ERROR:"error",WASM_ERROR:"wasmError"};const d={WASM_LOAD_FINISH:0,SNIFF_INIT_FINISH:1,POST_PROBEDATA:2,POST_NALUDATA:3,POST_AACDATA:4,POST_FRAMEDATA:5,POST_NALU_LENGTH:6,WAMS_ERROR:111},s={INIT_DECODER:0,PUSH_SNIFF_DATA:1,GET_SNIFF_PACKET:2,DECODE_VIDEO:3,GET_NALU_LENGTH:4,GET_SNIFF_FLV_PACKE:5,GET_BUFFER_LENGTH:6,PUSH_SNIFF_FLV_PACKET:7,RELEASE_SNIFF:8,LOAD_WAMS_JS:111};var t=r(0),l=r.n(t);self.Module={onRuntimeInitialized:function(){self.decoder&&self.decoder.onWasmLoaded()},onAbort:function(e){self.postMessage({t:d.WAMS_ERROR,data:{msg:""+n.WASM_ERROR+e,errorType:a.NOT_SUPPORT,event:i.WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}};self.onmessage=e=>{var t=e["data"];switch(t.t){case s.INIT_DECODER:self.decoder.initDecoder(t.data);break;case s.PUSH_SNIFF_DATA:self.decoder.pushSniffData(t.d,t.probeSize);break;case s.GET_SNIFF_PACKET:self.decoder.getSniffStreamPacket(t.p);break;case s.DECODE_VIDEO:self.decoder.decodeVideo(t);break;case s.GET_NALU_LENGTH:self.decoder.getNaluListLength();break;case s.GET_SNIFF_FLV_PACKE:self.decoder.getSniffHttpFlvPacket();break;case s.GET_BUFFER_LENGTH:self.decoder.getBufferLengthApi();break;case s.PUSH_SNIFF_FLV_PACKET:self.decoder.pushSniffHttpFlvData(t);break;case s.RELEASE_SNIFF:self.decoder.releaseSniffStream();break;case s.LOAD_WAMS_JS:self.decoder.loadJs(t.pathUrl,t.isSafari)}},self.decoder=new class{constructor(){this.wasmLoaded=!1,this.corePtr=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.time=null}initDecoder(e){let o=this;var{token:e,VersionModule:t,ignoreAudio:r,playModeEnum:a,defaultFps:n,mode:i}=e,e=(this.corePtr=Module.cwrap(1==i?"AVSniffHttpFlvInit":"AVSniffStreamInit","number",["string","string"])(e,t),1==i?"vdiidiiiiii":"vdiidiiiii"),t=(this._ptr_probeCallback=Module.addFunction(function(e,t,r,a,n,i,s,l,o,u=0){e={t:d.POST_PROBEDATA,duration:e,width:t,height:r,fps:a,audioIdx:n,sample_rate:i,channels:s,vcodec_name_id:l,sample_fmt:o,trans_to_gcore:u};self.postMessage(e)},e),this._ptr_frameCallback=Module.addFunction(function(e,t,r,a,n,i,s,l,o,u){e=Module.HEAPU8.subarray(e,e+a*l),t=Module.HEAPU8.subarray(t,t+n*l/2),r=Module.HEAPU8.subarray(r,r+i*l/2),e=new Uint8Array(e),t=new Uint8Array(t),r=new Uint8Array(r),e={t:d.POST_FRAMEDATA,buf_y:e,buf_u:t,buf_v:r,line1:a,line2:n,line3:i,width:s,height:l,pts:o,tag:u};self.postMessage(e,[e.buf_y.buffer,e.buf_u.buffer,e.buf_v.buffer])},"viiiiiiiidi"),1==i?"viiiiidd":"viiiiiddi");this._ptr_naluCallback=Module.addFunction(function(e,t,r,a,n,i,s,l){e=Module.HEAPU8.subarray(e,e+t),e=new Uint8Array(e),e={t:d.POST_NALUDATA,d:e,len:t,isKey:r,width:a,height:n,pts:i,dts:s,isRawStream:l};self.postMessage(e,[e.d.buffer]),o.time,o.time=(new Date).getTime()},t),this._ptr_sampleCallback=Module.addFunction(function(){},"vi"),this._ptr_aacCallback=Module.addFunction(function(e,t,r,a){e=Module.HEAPU8.subarray(e,e+t),e=new Uint8Array(e),e={t:d.POST_AACDATA,d:e,line1:t,channel:r,pts:a};self.postMessage(e,[e.d.buffer])},"viiid"),1==i?Module.cwrap("initializeSniffHttpFlvModule","number",["number","number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_frameCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback,r):Module.cwrap("initializeSniffStreamModuleWithAOpt","number",["number","number","number","number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_frameCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback,r,a,n),self.postMessage({t:d.SNIFF_INIT_FINISH})}pushSniffData(e,t){var e=new Uint8Array(e),r=Module._malloc(e.length);Module.HEAP8.set(e,r),Module.cwrap("pushSniffStreamData","number",["number","number","number","number"])(this.corePtr,r,e.length,t)}getSniffStreamPacket(e){(1==e?Module.cwrap("getSniffStreamPkg","number",["number"]):Module.cwrap("getSniffStreamPkgNoCheckProbe","number",["number"]))(this.corePtr)}getSniffHttpFlvPacket(){Module.cwrap("getSniffHttpFlvPkg","number",["number"])(this.corePtr)}decodeVideo(e){var{d:e,ptsMS:t,dtsMS:r,frameCallTag:a}=e,n=Module._malloc(e.length),n=(Module.HEAP8.set(e,n),Module.cwrap("decodeVideoFrame","number",["number","number","number","number","number"])(this.corePtr,n,e.length,t,r,a));self.postMessage({t:6,l:n})}getNaluListLength(){var e=Module.cwrap("naluLListLength","number",["number"])(this.corePtr);self.postMessage({t:d.POST_NALU_LENGTH,l:e})}getBufferLengthApi(){var e=Module.cwrap("getBufferLengthApi","number",["number"])(this.corePtr);self.postMessage({t:d.POST_NALU_LENGTH,l:e})}pushSniffHttpFlvData(e){var{d:e,probeSize:t}=e,r=Module._malloc(e.length);Module.HEAP8.set(e,r),Module.cwrap("pushSniffHttpFlvData","number",["number","number","number","number"])(this.corePtr,r,e.length,t)}releaseSniffStream(){void 0!==this.corePtr&&null!==this.corePtr&&(Module.cwrap("releaseSniffStream","number",["number"])(this.corePtr),this.corePtr=null)}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:d.WASM_LOAD_FINISH}))}loadJs(e,t){var r=l.a.simd(),r=navigator.userAgent.toLocaleLowerCase().includes("iphone")?e+"missile-min.js":r&&!t?e+"missile-simd.js":e+"missile.js";self.wasmPath=e,self.importScripts(r)}}}]);',"Worker",void 0,i.p+"cNativeCoreDecoder.worker.worker.js")}},,,,,,,function(e,t,i){i=[i(2),i(44)],t=function(e,t){var i={};function n(t){return e.some(t,(function(e){return"parsererror"===e.nodeName}))}return i.getAbsolutePath=function(e,i){if(t.exists(i)||(i=document.location.href),t.exists(e)){if(/^(?:(?:https?|file)\:)?\/\//.test(e))return e;for(var n,r=i.substring(0,i.indexOf("://")+3),a=i.substring(r.length,i.indexOf("/",r.length+1)),s=(n=0===e.indexOf("/")?e.split("/"):(i=(i=i.split("?")[0]).substring(r.length+a.length+1,i.lastIndexOf("/"))).split("/").concat(e.split("/")),[]),o=0;o<n.length;o++)n[o]&&t.exists(n[o])&&"."!==n[o]&&(".."===n[o]?s.pop():s.push(n[o]));return r+a+"/"+s.join("/")}},i.getScriptPath=e.memoize((function(e){for(var t=document.getElementsByTagName("script"),i=0;i<t.length;i++){var n=t[i].src;if(n&&0<=n.indexOf(e))return n.substr(0,n.indexOf(e))}return""})),i.parseXML=function(e){var t=null;try{"DOMParser"in window?(n((t=(new window.DOMParser).parseFromString(e,"text/xml")).childNodes)||t.childNodes&&n(t.childNodes[0].childNodes))&&(t=null):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){}return t},i.serialize=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e},i.parseDimension=function(e){return"string"==typeof e?""===e?0:-1<e.lastIndexOf("%")?e:parseInt(e.replace("px",""),10):e},i.timeFormat=function(e,t){return e<=0&&!t?"00:00":(t=e<0?"-":"",e=Math.abs(e),t+((t=Math.floor(e/3600))?t+":":"")+((t=Math.floor((e-3600*t)/60))<10?"0":"")+t+":"+((t=Math.floor(e%60))<10?"0":"")+t)},i.adaptiveType=function(e){if(0!==e){if(e<=-120)return"DVR";if(e<0||e===1/0)return"LIVE"}return"VOD"},i.getUrlParams=function(e){if(e=e.split("?")[1]){var t={},i=e.split("&");for(let e=0,r=i.length;e<r;e++){var n=i[e].split("=");t[n[0]]=n[1]}return t}},i}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){const n=window.AudioContext||window.webkitAudioContext;i(5);const r=i(12);t.AudioPcmPlayer=class{constructor(){this._sample_rate=44100,this._seg_dur=.1,this._channels=1,this._swapStartPlay=!0,this.playStartTime=-1,this.playTimestamp=0,this._now_seg_dur=-1,this._push_start_idx=0,this._playInterval=null,this._pcm_array_buf=null,this._pcm_array_frame=[],this._once_pop_len=parseInt(this._sample_rate*this._seg_dur),this._active_node=null,this._ctx=new n,this._gain=this._ctx.createGain(),this._gain.gain.value=1,this._gain.connect(this._ctx.destination)}setVoice(e){this._gain.gain.value=e}pushBufferFrame(e,t){}pushBuffer(e){let t=null;var i=(e=e.buffer).byteLength%4;t=0!=i?((i=new Uint8Array(e.byteLength+i)).set(new Uint8Array(e),0),new Float32Array(i.buffer)):new Float32Array(e);let n=null;if(2<=this._channels){i=t.length/2,n=new Float32Array(i);let e=0;for(let i=0;i<t.length;i+=2)n[e]=t[i],e++}else n=new Float32Array(t);null===this._pcm_array_buf?this._pcm_array_buf=new Float32Array(n):((e=new Float32Array(this._pcm_array_buf.length+n.length)).set(this._pcm_array_buf,0),e.set(n,this._pcm_array_buf.length),this._pcm_array_buf=e)}readingLoopWithF32(){if(!(null!==this._pcm_array_buf&&this._pcm_array_buf.length>this._push_start_idx))return-1;{this.playStartTime<0&&(this.playStartTime=r.GetMsTime(),this.playTimestamp=r.GetMsTime()),this._swapStartPlay=!1;let i=this._push_start_idx+this._once_pop_len;i>this._pcm_array_buf.length&&(i=this._pcm_array_buf.length);var e=this._pcm_array_buf.slice(this._push_start_idx,i),t=(this._push_start_idx+=e.length,this._now_seg_dur=+e.length/this._sample_rate*1e3,this._ctx.createBuffer(1,e.length,this._sample_rate));t.copyToChannel(e,0),this._active_node=this._ctx.createBufferSource(),this._active_node.buffer=t,this._active_node.connect(this._gain),this.playStartTime=r.GetMsTime(),this._active_node.start(0),this.playTimestamp+=this._now_seg_dur}return 0}getAlignVPTS(){return this.playTimestamp}pause(){null!==this._playInterval&&(window.clearInterval(this._playInterval),this._playInterval=null)}play(){let e=this;this._playInterval=window.setInterval((()=>{e.readingLoopWithF32()}),10)}}},function(e,t,i){i=[i(15)],t=function(e){var t={},i=t.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return t.getPluginPathType=function(t){var n,r;if("string"==typeof t)return 0<(n=(t=t.split("?")[0]).indexOf("://"))?i.ABSOLUTE:(r=t.indexOf("/"),t=e.extension(t),!(n<0&&r<0)||t&&isNaN(t)?i.RELATIVE:i.CDN)},t.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},t.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},t}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(62),i(14),i(217),i(1)],t=function(e,t,i,n){return e.extend({constructor:function(e,t,i){this.className=e+" jw-background-color jw-reset",this.orientation=t,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this),this.setup(i)},setup:function(e){var r={default:this.default,className:this.className,orientation:"jw-slider-"+this.orientation};this.el=n.createElement(i(r)),this.elementRail=n.getElementsByClassName("jw-slider-container",this.el)[0],this.elementBuffer=n.getElementsByClassName("jw-buffer",this.el)[0],this.elementProgress=n.getElementsByClassName("jw-progress",this.el)[0],this.elementThumb=n.getElementsByClassName("jw-knob",this.el)[0],this.elementJwRail=n.getElementsByClassName("jw-rail",this.el)[0],this.userInteract=new t(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener),e&&this.addBreakpointElement(e)},dragStart:function(){this.trigger("dragStart"),this.railBounds=n.bounds(this.elementRail)},dragEnd:function(e){this.dragMove(e),this.trigger("dragEnd")},dragMove:function(e){var t=this.railBounds=this.railBounds||n.bounds(this.elementRail),i="horizontal"===this.orientation?(i=e.pageX)<t.left?0:i>t.right?100:100*n.between((i-t.left)/t.width,0,1):(i=e.pageY)>=t.bottom?0:i<=t.top?100:100*n.between((t.height-(i-t.top))/t.height,0,1);return t=this.limit(i),this.render(t),"drag"===e.type&&n.hasClass(e.currentTarget,"jw-slider-time")||this.update(t),!1},tap:function(e){this.railBounds=n.bounds(this.elementRail),this.dragMove(e)},limit:function(e){return e},update:function(e){this.trigger("update",{percentage:e})},render:function(e){e=parseInt(Math.max(0,Math.min(e,100))),"horizontal"===this.orientation?(this.elementThumb.style.left=e+"%",this.elementProgress.style.width=e+"%"):(this.elementThumb.style.bottom=e+"%",this.elementProgress.style.height=e+"%")},updateBuffer:function(e){e&&(this.elementBuffer.style.width=e+"%")},element:function(){return this.el},addBreakpointElement:function(e){var t=parseInt(100/(e+1));for(let r=1;r<e+1;r++){var i=t*r,n=document.createElement("div");n.classList.add("jw-slider-breakpoint"),n.style.left=i-2+"%",this.elementJwRail.appendChild(n)}}})}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(7),i(2)],t=function(e,t){function i(){}return i.extend=function(e,i){function n(){this.constructor=a}var r=this,a=e&&t.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)};return t.extend(a,r,i),n.prototype=r.prototype,a.prototype=new n,e&&t.extend(a.prototype,e),a.__super__=r.prototype,a},t.extend(i.prototype,e),i}.apply(t,i),void 0!==t&&(e.exports=t)},,,,function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));const n=i(1);function r(e){n.isWeChat()&&n.isIOS()&&e&&document.addEventListener("WeixinJSBridgeReady",(()=>{e.muted=!0,e.play()}))}},function(e,t,i){(function(t,n){var r;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.8.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */!function(){"use strict";function a(e){var t=typeof e;if("string"==t)return[e,!0];if("object"==t&&null!==e){if(m&&e.constructor===ArrayBuffer)return[new Uint8Array(e),!1];if(b(e)||w(e))return[e,!1]}throw new Error(u)}function s(e){return function(t){return new S(!0).update(t)[e]()}}function o(e){return function(t,i){return new T(t,!0).update(i)[e]()}}var l,h,u="input is invalid type",d=(c="object"==typeof window)?window:{},c=!(c=!d.JS_MD5_NO_WINDOW&&c)&&"object"==typeof self,f=!d.JS_MD5_NO_NODE_JS&&"object"==typeof t&&t.versions&&t.versions.node,p=(f?d=n:c&&(d=self),c=!d.JS_MD5_NO_COMMON_JS&&"object"==typeof e&&e.exports,i(247)),m=!d.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,g="0123456789abcdef".split(""),_=[128,32768,8388608,-2147483648],y=[0,8,16,24],v=["hex","array","digest","buffer","arrayBuffer","base64"],A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),E=[],b=(m&&(l=new ArrayBuffer(68),h=new Uint8Array(l),E=new Uint32Array(l)),Array.isArray),w=(!d.JS_MD5_NO_NODE_JS&&b||(b=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),ArrayBuffer.isView);function S(e){e?(E[0]=E[16]=E[1]=E[2]=E[3]=E[4]=E[5]=E[6]=E[7]=E[8]=E[9]=E[10]=E[11]=E[12]=E[13]=E[14]=E[15]=0,this.blocks=E,this.buffer8=h):m?(e=new ArrayBuffer(68),this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}function T(e,t){var i=a(e);if(e=i[0],i[1]){for(var n,r=[],s=e.length,o=0,l=0;l<s;++l)(n=e.charCodeAt(l))<128?r[o++]=n:(n<2048?r[o++]=192|n>>>6:(n<55296||57344<=n?r[o++]=224|n>>>12:(n=65536+((1023&n)<<10|1023&e.charCodeAt(++l)),r[o++]=240|n>>>18,r[o++]=128|n>>>12&63),r[o++]=128|n>>>6&63),r[o++]=128|63&n);e=r}64<e.length&&(e=new S(!0).update(e).array());var h=[],u=[];for(l=0;l<64;++l){var d=e[l]||0;h[l]=92^d,u[l]=54^d}S.call(this,t),this.update(u),this.oKeyPad=h,this.inner=!0,this.sharedMemory=t}!m||!d.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&w||(w=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer}),S.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");for(var t,i,n=a(e),r=(e=n[0],n[1]),s=0,o=e.length,l=this.blocks,h=this.buffer8;s<o;){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),r)if(m)for(i=this.start;s<o&&i<64;++s)(t=e.charCodeAt(s))<128?h[i++]=t:(t<2048?h[i++]=192|t>>>6:(t<55296||57344<=t?h[i++]=224|t>>>12:(t=65536+((1023&t)<<10|1023&e.charCodeAt(++s)),h[i++]=240|t>>>18,h[i++]=128|t>>>12&63),h[i++]=128|t>>>6&63),h[i++]=128|63&t);else for(i=this.start;s<o&&i<64;++s)(t=e.charCodeAt(s))<128?l[i>>>2]|=t<<y[3&i++]:(t<2048?l[i>>>2]|=(192|t>>>6)<<y[3&i++]:(t<55296||57344<=t?l[i>>>2]|=(224|t>>>12)<<y[3&i++]:(t=65536+((1023&t)<<10|1023&e.charCodeAt(++s)),l[i>>>2]|=(240|t>>>18)<<y[3&i++],l[i>>>2]|=(128|t>>>12&63)<<y[3&i++]),l[i>>>2]|=(128|t>>>6&63)<<y[3&i++]),l[i>>>2]|=(128|63&t)<<y[3&i++]);else if(m)for(i=this.start;s<o&&i<64;++s)h[i++]=e[s];else for(i=this.start;s<o&&i<64;++s)l[i>>>2]|=e[s]<<y[3&i++];this.lastByteIndex=i,this.bytes+=i-this.start,64<=i?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this},S.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,(e=this.blocks)[(t=this.lastByteIndex)>>>2]|=_[3&t],56<=t&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash())},S.prototype.hash=function(){var e,t,i,n,r,a=this.blocks,s=this.first?((s=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879|0)^(t=((t=(-271733879^(i=((i=(-1732584194^2004318071&e)+a[1]-117830708)<<12|i>>>20)+e|0)&(-271733879^e))+a[2]-1126478375)<<17|t>>>15)+i|0)&(i^e))+a[3]-1316259209)<<22|s>>>10)+t|0:(e=this.h0,s=this.h1,t=this.h2,((s+=((e=((e+=((i=this.h3)^s&(t^i))+a[0]-680876936)<<7|e>>>25)+s|0)^(t=((t+=(s^(i=((i+=(t^e&(s^t))+a[1]-389564586)<<12|i>>>20)+e|0)&(e^s))+a[2]+606105819)<<17|t>>>15)+i|0)&(i^e))+a[3]-1044525330)<<22|s>>>10)+t|0);s=((s+=((e=((e+=(i^s&(t^i))+a[4]-176418897)<<7|e>>>25)+s|0)^(t=((t+=(s^(i=((i+=(t^e&(s^t))+a[5]+1200080426)<<12|i>>>20)+e|0)&(e^s))+a[6]-1473231341)<<17|t>>>15)+i|0)&(i^e))+a[7]-45705983)<<22|s>>>10)+t|0,s=((s+=((e=((e+=(i^s&(t^i))+a[8]+1770035416)<<7|e>>>25)+s|0)^(t=((t+=(s^(i=((i+=(t^e&(s^t))+a[9]-1958414417)<<12|i>>>20)+e|0)&(e^s))+a[10]-42063)<<17|t>>>15)+i|0)&(i^e))+a[11]-1990404162)<<22|s>>>10)+t|0,s=((s+=((e=((e+=(i^s&(t^i))+a[12]+1804603682)<<7|e>>>25)+s|0)^(t=((t+=(s^(i=((i+=(t^e&(s^t))+a[13]-40341101)<<12|i>>>20)+e|0)&(e^s))+a[14]-1502002290)<<17|t>>>15)+i|0)&(i^e))+a[15]+1236535329)<<22|s>>>10)+t|0,s=((s+=((i=((i+=(s^t&((e=((e+=(t^i&(s^t))+a[1]-165796510)<<5|e>>>27)+s|0)^s))+a[6]-1069501632)<<9|i>>>23)+e|0)^e&((t=((t+=(e^s&(i^e))+a[11]+643717713)<<14|t>>>18)+i|0)^i))+a[0]-373897302)<<20|s>>>12)+t|0,s=((s+=((i=((i+=(s^t&((e=((e+=(t^i&(s^t))+a[5]-701558691)<<5|e>>>27)+s|0)^s))+a[10]+38016083)<<9|i>>>23)+e|0)^e&((t=((t+=(e^s&(i^e))+a[15]-660478335)<<14|t>>>18)+i|0)^i))+a[4]-405537848)<<20|s>>>12)+t|0,s=((s+=((i=((i+=(s^t&((e=((e+=(t^i&(s^t))+a[9]+568446438)<<5|e>>>27)+s|0)^s))+a[14]-1019803690)<<9|i>>>23)+e|0)^e&((t=((t+=(e^s&(i^e))+a[3]-187363961)<<14|t>>>18)+i|0)^i))+a[8]+1163531501)<<20|s>>>12)+t|0,s=((s+=((i=((i+=(s^t&((e=((e+=(t^i&(s^t))+a[13]-1444681467)<<5|e>>>27)+s|0)^s))+a[2]-51403784)<<9|i>>>23)+e|0)^e&((t=((t+=(e^s&(i^e))+a[7]+1735328473)<<14|t>>>18)+i|0)^i))+a[12]-1926607734)<<20|s>>>12)+t|0,s=((s+=((r=(i=((i+=((n=s^t)^(e=((e+=(n^i)+a[5]-378558)<<4|e>>>28)+s|0))+a[8]-2022574463)<<11|i>>>21)+e|0)^e)^(t=((t+=(r^s)+a[11]+1839030562)<<16|t>>>16)+i|0))+a[14]-35309556)<<23|s>>>9)+t|0,s=((s+=((r=(i=((i+=((n=s^t)^(e=((e+=(n^i)+a[1]-1530992060)<<4|e>>>28)+s|0))+a[4]+1272893353)<<11|i>>>21)+e|0)^e)^(t=((t+=(r^s)+a[7]-155497632)<<16|t>>>16)+i|0))+a[10]-1094730640)<<23|s>>>9)+t|0,s=((s+=((r=(i=((i+=((n=s^t)^(e=((e+=(n^i)+a[13]+681279174)<<4|e>>>28)+s|0))+a[0]-358537222)<<11|i>>>21)+e|0)^e)^(t=((t+=(r^s)+a[3]-722521979)<<16|t>>>16)+i|0))+a[6]+76029189)<<23|s>>>9)+t|0,s=((s+=((r=(i=((i+=((n=s^t)^(e=((e+=(n^i)+a[9]-640364487)<<4|e>>>28)+s|0))+a[12]-421815835)<<11|i>>>21)+e|0)^e)^(t=((t+=(r^s)+a[15]+530742520)<<16|t>>>16)+i|0))+a[2]-995338651)<<23|s>>>9)+t|0,s=((s+=((i=((i+=(s^((e=((e+=(t^(s|~i))+a[0]-198630844)<<6|e>>>26)+s|0)|~t))+a[7]+1126891415)<<10|i>>>22)+e|0)^((t=((t+=(e^(i|~s))+a[14]-1416354905)<<15|t>>>17)+i|0)|~e))+a[5]-57434055)<<21|s>>>11)+t|0,s=((s+=((i=((i+=(s^((e=((e+=(t^(s|~i))+a[12]+1700485571)<<6|e>>>26)+s|0)|~t))+a[3]-1894986606)<<10|i>>>22)+e|0)^((t=((t+=(e^(i|~s))+a[10]-1051523)<<15|t>>>17)+i|0)|~e))+a[1]-2054922799)<<21|s>>>11)+t|0,s=((s+=((i=((i+=(s^((e=((e+=(t^(s|~i))+a[8]+1873313359)<<6|e>>>26)+s|0)|~t))+a[15]-30611744)<<10|i>>>22)+e|0)^((t=((t+=(e^(i|~s))+a[6]-1560198380)<<15|t>>>17)+i|0)|~e))+a[13]+1309151649)<<21|s>>>11)+t|0,s=((s+=((i=((i+=(s^((e=((e+=(t^(s|~i))+a[4]-145523070)<<6|e>>>26)+s|0)|~t))+a[11]-1120210379)<<10|i>>>22)+e|0)^((t=((t+=(e^(i|~s))+a[2]+718787259)<<15|t>>>17)+i|0)|~e))+a[9]-343485551)<<21|s>>>11)+t|0,this.first?(this.h0=e+1732584193|0,this.h1=s-271733879|0,this.h2=t-1732584194|0,this.h3=i+271733878|0,this.first=!1):(this.h0=this.h0+e|0,this.h1=this.h1+s|0,this.h2=this.h2+t|0,this.h3=this.h3+i|0)},S.prototype.toString=S.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,n=this.h3;return g[e>>>4&15]+g[15&e]+g[e>>>12&15]+g[e>>>8&15]+g[e>>>20&15]+g[e>>>16&15]+g[e>>>28&15]+g[e>>>24&15]+g[t>>>4&15]+g[15&t]+g[t>>>12&15]+g[t>>>8&15]+g[t>>>20&15]+g[t>>>16&15]+g[t>>>28&15]+g[t>>>24&15]+g[i>>>4&15]+g[15&i]+g[i>>>12&15]+g[i>>>8&15]+g[i>>>20&15]+g[i>>>16&15]+g[i>>>28&15]+g[i>>>24&15]+g[n>>>4&15]+g[15&n]+g[n>>>12&15]+g[n>>>8&15]+g[n>>>20&15]+g[n>>>16&15]+g[n>>>28&15]+g[n>>>24&15]},S.prototype.array=S.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,n=this.h3;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&i,i>>>8&255,i>>>16&255,i>>>24&255,255&n,n>>>8&255,n>>>16&255,n>>>24&255]},S.prototype.buffer=S.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},S.prototype.base64=function(){for(var e,t,i,n="",r=this.array(),a=0;a<15;)e=r[a++],t=r[a++],i=r[a++],n+=A[e>>>2]+A[63&(e<<4|t>>>4)]+A[63&(t<<2|i>>>6)]+A[63&i];return e=r[a],n+(A[e>>>2]+A[e<<4&63]+"==")},(T.prototype=new S).finalize=function(){var e;S.prototype.finalize.call(this),this.inner&&(this.inner=!1,e=this.array(),S.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(e),S.prototype.finalize.call(this))};var C=function(){var e=s("hex");(e=f?function(e){var t,n=i(248),r=i(249).Buffer;return t=r.from&&!d.JS_MD5_NO_BUFFER_FROM?r.from:function(e){return new r(e)},function(i){if("string"==typeof i)return n.createHash("md5").update(i,"utf8").digest("hex");if(null==i)throw new Error(u);return i.constructor===ArrayBuffer&&(i=new Uint8Array(i)),b(i)||w(i)||i.constructor===r?n.createHash("md5").update(t(i)).digest("hex"):e(i)}}(e):e).create=function(){return new S},e.update=function(t){return e.create().update(t)};for(var t=0;t<v.length;++t){var n=v[t];e[n]=s(n)}return e}();(C.md5=C).md5.hmac=function(){var e=o("hex");e.create=function(e){return new T(e)},e.update=function(t,i){return e.create(t).update(i)};for(var t=0;t<v.length;++t){var i=v[t];e[i]=o(i)}return e}(),c?e.exports=C:(d.md5=C,p&&void 0!==(r=function(){return C}.call(C,i,C,e))&&(e.exports=r))}()}).call(this,i(102),i(27))},,,function(e,t,i){i=[i(15),i(2),i(138),i(139)],t=function(e,t,i,n){function r(e){return t.isString(e.className)?e.className.split(" "):[]}function a(t,i){i=e.trim(i),t.className!==i&&(t.className=i)}var s={createElement:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},styleDimension:function(e){return e+(0<e.toString().indexOf("%")?"":"px")},classList:function(e){return e.classList||r(e)}};return s.hasClass=i.hasClass,s.addClass=function(e,i){var n=r(e);i=t.isArray(i)?i:i.split(" "),t.each(i,(function(e){t.contains(n,e)||n.push(e)})),a(e,n.join(" "))},s.removeClass=function(e,i){var n=r(e);i=t.isArray(i)?i:i.split(" "),a(e,t.difference(n,i).join(" "))},s.replaceClass=function(e,t,i){var n=e.className||"";t.test(n)?n=n.replace(t,i):i&&(n+=" "+i),a(e,n)},s.toggleClass=function(e,i,n){var r=s.hasClass(e,i);(n=t.isBoolean(n)?n:!r)!==r&&(n?s.addClass(e,i):s.removeClass(e,i))},s.emptyElement=function(e){if(e)for(var t=0;0<e.childElementCount-t;)e.children[t].hasAttribute("remove-ignore")&&e.children[t].getAttribute("remove-ignore")===n.DOM_REMOVE_IGNORE?t++:e.removeChild(e.children[t])},s.addStyleSheet=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},s.empty=function(e){if(e)for(var t=0;0<e.childElementCount-t;)e.children[t].hasAttribute("remove-ignore")&&e.children[t].getAttribute("remove-ignore")===n.DOM_REMOVE_IGNORE?t++:e.removeChild(e.children[t])},s.bounds=function(e){var t,i,n={left:0,right:0,width:0,height:0,top:0,bottom:0};return e&&document.body.contains(e)&&(e=e.getBoundingClientRect(e),t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,e.width||e.height||e.left||e.top)&&(n.left=e.left+i,n.right=e.right+i,n.top=e.top+t,n.bottom=e.bottom+t,n.width=e.right-e.left,n.height=e.bottom-e.top),n},s}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(16)],t=function(e){function t(t){return t===e.COMPLETE||t===e.ERROR?e.IDLE:t}return function(e,i,n){var r;(i=t(i))!==(n=t(n))&&(i={type:r=i.replace(/(?:ing|d)$/,""),newstate:i,oldstate:n,reason:e.mediaModel.get("state")},"play"===r&&(i.playReason=e.get("playReason")),this.trigger(r,i))}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(46),i(75),i(177),i(2),i(7),i(178),i(6),i(16),i(179)],t=function(e,t,i,n,r,a,s,o,l,h){function u(){var s,u,c,f,p=this,m=e.noop;function g(e,t){var i=r.extend({},t,{type:e});switch(e){case"flashThrottle":var n="resume"!==t.state;this.set("flashThrottle",n),this.set("flashBlocked",n);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":case"mute":return void this.set(e,t[e]);case o.JWPLAYER_MEDIA_TYPE:return void(this.mediaModel.get("mediaType")!==t.mediaType&&(this.mediaModel.set("mediaType",t.mediaType),this.mediaController.trigger(e,i)));case o.JWPLAYER_PLAYER_STATE:return void this.mediaModel.set("state",t.newstate);case o.JWPLAYER_MEDIA_BUFFER:this.set("buffer",t.bufferPercent);case o.JWPLAYER_MEDIA_META:n=t.duration,r.isNumber(n)&&(this.mediaModel.set("duration",n),this.set("duration",n)),t.duration===1/0&&this.trigger("alive");break;case o.JWPLAYER_MEDIA_BUFFER_FULL:this.mediaModel.get("playAttempt")?this.playVideo():this.mediaModel.on("change:playAttempt",(function(){this.playVideo()}),this);break;case o.JWPLAYER_MEDIA_TIME:this.mediaModel.set("position",t.position),this.set("position",t.position),r.isNumber(t.duration)&&(this.mediaModel.set("duration",t.duration),this.set("duration",t.duration),0<t.duration&&this.recordMediaPosition(t.position,t.duration),t.duration===1/0)&&this.trigger("alive"),this.advManage&&this.get("imageAdvs").advs&&this.advManage.refreshProcessAdv(t.position);break;case o.JWPLAYER_PROVIDER_CHANGED:this.set("provider",u.getName());break;case o.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(t.currentQuality,t.levels),this.mediaModel.set("levels",t.levels);break;case o.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(t.currentQuality,t.levels),this.persistQualityLevel(t.currentQuality,t.levels);break;case o.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(t.currentTrack,t.tracks),this.mediaModel.set("audioTracks",t.tracks);break;case o.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(t.currentTrack,t.tracks);break;case o.JWPLAYER_CONNECTING:this.trigger("connecting");break;case o.JWPLAYER_CONNECT_FAILD:this.trigger("connectFaild");break;case o.JWPLAYER_ALIVE:this.trigger("alive");break;case o.JWPLAYER_NO_LIVE_STREAM:this.trigger("noLiveStream");break;case o.JWPLAYER_LIVE_STOP:this.trigger("liveStop");break;case"stop":this.set("duration",0);break;case"subtitlesTrackChanged":this.setVideoSubtitleTrack(t.currentTrack,t.tracks);break;case"visualQuality":n=r.extend({},t),this.mediaModel.set("visualQuality",n);break;case o.JWPLAYER_PLAYBACKRATE:this.set("playbackRate",t.playbackRate),this.mediaModel.set("playbackRate",t.playbackRate);break;case o.JWPLAYER_HLS_QUALITYLIST_CHANGE:this.mediaModel.set("hlsQualityListChange",t.levels)}this.mediaController.trigger(e,i)}this.mediaController=r.extend({},a),this.mediaModel=new d,this.advManage=null,n.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(t){if(f=new i,r.extend(this.attributes,t,{item:0,state:l.IDLE,flashBlocked:!1,fullscreen:!1,compactUI:!1,scrubbing:!1,duration:t.duration||0,position:0,buffer:0}),e.isMobile()&&!t.mobileSdk)try{var n=new AudioContext;n&&("running"!==n.state||e.isWeChat())&&this.set("autostart",!1)}catch(t){this.set("autostart",!1)}return this.get("imageAdvs")&&(this.advManage=new h.default(this.get("imageAdvs"))),this.updateProviders(),this},this.getConfiguration=function(){return r.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){s=new t(this.getConfiguration())},this.recordMediaPosition=function(e,t){var i=c&&c.sources&&c.sources[0],n=this;i&&i.file&&!isNaN(e)&&!isNaN(t)&&0<t&&!1!==isFinite(t)&&r.each(c.sources,(function(i){parseInt(e)<parseInt(t)&&2<e?n.mediaModel.get("isMemoryPlay")&&f.setItem("filePostion."+i.file,e):parseInt(e)>=parseInt(t)&&f.clearItem("filePostion."+i.file)}))},this.getLastPosition=function(t){var i=0;return t&&"array"===e.typeOf(t.sources)&&0<t.sources.length&&f.getItem("filePostion."+t.sources[0].file)?f.getItem("filePostion."+t.sources[0].file):i},this.setQualityLevel=function(e,t){-1<e&&1<t.length&&this.mediaModel.set("currentLevel",parseInt(e))},this.setCurrentQuality=function(e){u.setCurrentQuality(e)},this.persistQualityLevel=function(e,t){t=(t[e]||{}).label,this.set("qualityLabel",t)},this.setCurrentAudioTrack=function(e,t){-1<e&&0<t.length&&e<t.length&&this.mediaModel.set("currentAudioTrack",parseInt(e))},this.onMediaContainer=function(){var e=this.get("mediaContainer");m.setContainer(e)},this.changeVideoProvider=function(e){var t;this.off("change:mediaContainer",this.onMediaContainer),u&&(u.off(null,null,this),u.getContainer())&&u.remove(),e?(m=new e(p.get("id"),p.getConfiguration()),(t=this.get("mediaContainer"))?m.setContainer(t):this.once("change:mediaContainer",this.onMediaContainer),this.once("change:provider",(function(){this.setVolume(this.get("volume"))}),this),this.set("provider",m.getName()),-1===m.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),(u=m).volume(p.get("volume")),u.mute(p.get("mute")),u.on("all",g,this)):(u=m=e,this.set("provider",void 0))},this.destroy=function(){u&&(u.off(null,null,this),u.destroy())},this.getVideo=function(){return u},this.setFullscreen=function(e){(e=!!e)!==p.get("fullscreen")&&p.set("fullscreen",e)},this.chooseProvider=function(e){return s.choose(e).provider},this.setActiveItem=function(e,t){u&&u.extPlayerPTS&&(e.starttime=u.extPlayerPTS,this.set("starttime",e.starttime||0)),this.mediaModel.off(),this.mediaModel=new d,this.set("mediaModel",this.mediaModel),this.set("position",e.starttime||0),this.set("duration",this.get("duration")?this.get("duration"):e.duration||0),this.setProvider(e,t)},this.setProvider=function(e,t){t=null!=t?Number(t):0,void 0!==(t=e&&e.sources&&e.sources[t])&&(c=e,t=this.chooseProvider(t),p.changeVideoProvider(t),m)&&(m.init&&m.init(e,this.attributes),this.trigger("itemReady",e))},this.getCurrentItem=function(){return c},this.getProviders=function(){return s},this.resetProvider=function(){m=null},this.setVolume=function(e){e=Math.round(e),e=u&&"html5"===u.getName().name?Math.min(e,100):Math.min(e,500),p.set("volume",e),u&&u.volume(e),(e=0===e)!==p.get("mute")&&p.setMute(e)},this.enableGPU=function(){u.enableGPU()},this.disableGPU=function(){u.disableGPU()},this.setToken=function(e){var t=[];"string"==typeof arguments[0]&&"string"==typeof arguments[1]&&(t[0]={file:arguments[0],tokenText:arguments[1]},e=t),u.setToken&&u.setToken(e)},this.setMute=function(t){e.exists(t)||(t=!this.get("mute")),this.set("mute",t),u&&u.mute(t),t||(t=0==this.get("volume")&&this.attributes.origin_volume?this.attributes.origin_volume:0!=this.get("volume")?this.get("volume"):10,this.setVolume(t))},this.loadVideo=function(e){e||(t=this.get("item"),e=this.get("playlist")[t]),void 0!==this.get("starttime")&&(e.starttime=this.get("starttime"));var t=this.get("isMemoryPlay");t&&(this.mediaModel.set("isMemoryPlay",!0),e.starttime=this.getLastPosition(e)),this.set("position",e.starttime||0),this.set("duration",e.duration||0),this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(o.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),u.load(e)},this.stopVideo=function(){u&&u.stop()},this.playVideo=function(){u.play()},this.prevFrame=function(){return u.prevFrame()},this.nextFrame=function(){return u.nextFrame()},this.snapshot=function(e){return u.snapshot(e)},this.test1=function(){u.test1()},this.persistCaptionsTrack=function(){var e=this.get("captionsTrack");e?this.set("captionLabel",e.label):this.set("captionLabel","Off")},this.setDanmuStatus=function(){var e=JSON.parse(JSON.stringify(p.get("danmaku")));p.set("danmaku",Object.assign(e,{active:!e.active}))},this.setVideoSubtitleTrack=function(e,t){this.set("captionsIndex",e),e&&t&&e<=t.length&&t[e-1].data&&this.set("captionsTrack",t[e-1]),u&&u.setSubtitlesTrack&&u.setSubtitlesTrack(e)},this.persistVideoSubtitleTrack=function(e){this.setVideoSubtitleTrack(e),this.persistCaptionsTrack()},this.setPlaybackRate=function(e){u.setPlaybackRate(e)},this.changeHlsQuality=function(e){u.changeHlsQuality(e)},this.getMediaInfo=function(){return u.getMediaInfo()},this.gobackLive=function(){u.gobackLive()},this.setMaxSeekTime=function(e){u.setMaxSeekTime(e)}}var d=u.MediaModel=function(){this.set("state",l.IDLE)};return r.extend(u.prototype,s),r.extend(d.prototype,s),u}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){"use strict";i.r(t),function(e){var n=i(119),r=i(19),a=i(26),s=i(0),o=i(1),l=i.n(o);const h=i(168),u=i(169);t.default={MPEG_JS_Module:class{constructor(e){this.configFormat={},this.isLive=0,this.mediaAttr={sampleRate:0,sampleChannel:0,vFps:0,vGop:0,vDuration:0,aDuration:0,duration:0,aCodec:"",vCodec:"",audioNone:!1},this.extensionInfo={vWidth:0,vHeight:0},this.controller=new AbortController,this.offsetDemux=null,this.wasmState=0,this.naluLayer=null,this.vlcLayer=null,this.onReady=null,this.onDemuxed=null,this.onDemuxedFailed=null,this.aacDec=null,this.demux=null,this.onNalu=null,this.onError=null,this.onWasmError=null}makeWasm(){var e=Object(r.getPlayerPath)();this.demux=new a.a,this.demux.postMessage({t:s.d.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.demux.onmessage=e=>{var t=e.data;switch(t.t){case s.c.WASM_LOAD_FINISH:case s.c.WASM_POST_RUN:null!=this.onReady&&0==this.wasmState&&(this.wasmState=1,this.onReady());break;case s.c.DEMUXER_INIT_FINISH:break;case s.c.POST_DEMUXER_INFO:let i=null;i=1==e.data.type&&this.mediaAttr.aCodec==u.DEF_AAC?this.aacDec.sliceAACFrames(e.data.ptime,e.data.src):e.data.src.buffer,e.data.data=i,this.onNalu(e.data);break;case s.c.DEMUXER_FINISH:this.mediaAttr=t.mediaAttr,this.extensionInfo=t.extensionInfo,null==this.aacDec?this.aacDec=new h.AACDecoder(this.mediaAttr):this.aacDec.updateConfig(this.mediaAttr),null!=this.onDemuxed&&this.onDemuxed();break;case s.c.DEMUXER_ERROR:this.onError&&this.onError(t);break;case s.c.WAMS_ERROR:this.onWasmError&&this.onWasmError(t.data)}}}initDemuxer(){let t=this;if(window.WebAssembly)this.makeWasm(),1===e.STATIC_MEM_wasmDecoderState?(t.wasmState=1,t.onReady()):(Module.onRuntimeInitialized=()=>{null!=t.onReady&&0==t.wasmState&&(t.wasmState=1,t.onReady())},Module.postRun=()=>{null!=t.onReady&&0==t.wasmState&&(t.wasmState=1,t.onReady())});else{let e="unsupport WASM!";/iPhone|iPad/.test(window.navigator.userAgent)&&(e+=" ios:min-version 11")}return this.WorkerFetch(),!0}WorkerFetch(){this.downloaderWorker=new n.a,this.downloaderWorker.onmessage=e=>{this._demuxCore(e.data)}}demuxURL(e){this.downloaderWorker.postMessage({videoURL:e,type:"pushUrl"})}demuxUint8Buf(e){this._demuxCore(e)}_demuxerTsInit(e){let t=this;var i=this.controller.signal;fetch(e,{signal:i}).then((e=>e.arrayBuffer())).then((e=>{e.fileStart=0,null!=(e=new Uint8Array(e))&&t._demuxCore(e)})).catch((i=>{t._releaseOffset(),t.onDemuxedFailed&&t.onDemuxedFailed(i,e)}))}_releaseOffset(){void 0!==this.offsetDemux&&null!==this.offsetDemux&&(Module._free(this.offsetDemux),this.offsetDemux=null)}_demuxCore(e){this.demux.postMessage({t:s.d.DEMUXER_BOX,d:e,isLive:this.isLive},[e.buffer])}_setMediaInfo(){var e=Module.cwrap("getMediaInfo","number",[])(),t=Module.HEAPU32[e/4],i=Module.HEAPU32[e/4+1],n=Module.HEAPF64[e/8+1],r=Module.HEAPF64[e/8+1+1],a=Module.HEAPF64[e/8+1+1+1],s=Module.HEAPF64[e/8+1+1+1+1];e=Module.HEAPU32[e/4+2+2+2+2+2],0<=(0<=(this.mediaAttr.vFps=n,this.mediaAttr.vGop=e,this.mediaAttr.vDuration=r,this.mediaAttr.aDuration=a,this.mediaAttr.duration=s,n=Module.cwrap("getAudioCodecID","number",[])())?(this.mediaAttr.aCodec=u.CODEC_OFFSET_TABLE[n],this.mediaAttr.sampleRate=0<t?t:u.DEFAULT_SAMPLERATE,this.mediaAttr.sampleChannel=0<=i?i:u.DEFAULT_CHANNEL):(this.mediaAttr.sampleRate=0,this.mediaAttr.sampleChannel=0,this.mediaAttr.audioNone=!0),e=Module.cwrap("getVideoCodecID","number",[])())&&(this.mediaAttr.vCodec=u.CODEC_OFFSET_TABLE[e]),null==this.aacDec?this.aacDec=new h.AACDecoder(this.mediaAttr):this.aacDec.updateConfig(this.mediaAttr)}_setExtensionInfo(){var e=Module.cwrap("getExtensionInfo","number",[])(),t=Module.HEAPU32[e/4];e=Module.HEAPU32[e/4+1],this.extensionInfo.vWidth=t,this.extensionInfo.vHeight=e}readMediaInfo(){return this.mediaAttr}readExtensionInfo(){return this.extensionInfo}readAudioNone(){return this.mediaAttr.audioNone}_readLayer(){null===this.naluLayer?this.naluLayer={vps:null,sps:null,pps:null,sei:null}:(this.naluLayer.vps=null,this.naluLayer.sps=null,this.naluLayer.pps=null,this.naluLayer.sei=null),null===this.vlcLayer?this.vlcLayer={vlc:null}:this.vlcLayer.vlc=null;var e,t,i,n,r=Module.cwrap("getSPSLen","number",[])(),a=Module.cwrap("getSPS","number",[])();if(!(r<0))return a=Module.HEAPU8.subarray(a,a+r),this.naluLayer.sps=new Uint8Array(r),this.naluLayer.sps.set(a,0),r=Module.cwrap("getPPSLen","number",[])(),e=Module.cwrap("getPPS","number",[])(),e=Module.HEAPU8.subarray(e,e+r),this.naluLayer.pps=new Uint8Array(r),this.naluLayer.pps.set(e,0),r=Module.cwrap("getSEILen","number",[])(),t=Module.cwrap("getSEI","number",[])(),t=Module.HEAPU8.subarray(t,t+r),this.naluLayer.sei=new Uint8Array(r),this.naluLayer.sei.set(t,0),r=Module.cwrap("getVLCLen","number",[])(),i=Module.cwrap("getVLC","number",[])(),i=Module.HEAPU8.subarray(i,i+r),this.vlcLayer.vlc=new Uint8Array(r),this.vlcLayer.vlc.set(i,0),this.mediaAttr.vCodec==u.DEF_HEVC||this.mediaAttr.vCodec==u.DEF_H265?(r=Module.cwrap("getVPSLen","number",[])(),n=Module.cwrap("getVPS","number",[])(),n=Module.HEAPU8.subarray(n,n+r),this.naluLayer.vps=new Uint8Array(r),this.naluLayer.vps.set(n,0),Module._free(n),n=null):this.mediaAttr.vCodec!=u.DEF_AVC&&(this.mediaAttr.vCodec,u.DEF_H264),Module._free(a),a=null,Module._free(e),e=null,Module._free(t),t=null,Module._free(i),i=null,{nalu:this.naluLayer,vlc:this.vlcLayer}}isHEVC(){return this.mediaAttr.vCodec==u.DEF_HEVC||this.mediaAttr.vCodec==u.DEF_H265}readPacket(){this.demux.postMessage({t:s.d.GET_DEMUXER_INFO})}_refreshDemuxer(){this.releaseTsDemuxer(),this._initDemuxer()}_initDemuxer(){Module.cwrap("initTsMissile","number",[])(),Module.cwrap("initializeDemuxer","number",[])()}releaseTsDemuxer(){}release(){this.downloaderWorker.postMessage({type:"destory"}),this.downloaderWorker&&this.downloaderWorker.terminate(),this.demux.postMessage({t:s.d.RELEASE_DEMUXER}),this.demux.postMessage({t:s.d.RELEASE_DECODE}),this.demux&&this.demux.terminate()}}}}.call(this,i(27))},function(e,t,i){const n=i(103),r=[n.HEVC_NAL_VPS,n.HEVC_NAL_SPS,n.HEVC_NAL_PPS,n.HEVC_NAL_SEI_PREFIX,n.HEVC_NAL_SEI_SUFFIX];e.exports={IS_HEV_PS_INFO_CHAR:e=>(e=(126&e)>>1,r.indexOf(e)),GET_NALU_TYPE:e=>1<=(e=(126&e)>>1)&&e<=9?n.DEFINE_P_FRAME:16<=e&&e<=21?n.DEFINE_KEY_FRAME:0<=(e=r.indexOf(e))?r[e]:n.DEFINE_OTHERS_FRAME,PACK_NALU:e=>{var t=e.nalu,i=(e=e.vlc.vlc,null==t.vps&&(t.vps=new Uint8Array),new Uint8Array(t.vps.length+t.sps.length+t.pps.length+t.sei.length+e.length));return i.set(t.vps,0),i.set(t.sps,t.vps.length),i.set(t.pps,t.vps.length+t.sps.length),i.set(t.sei,t.vps.length+t.sps.length+t.pps.length),i.set(e,t.vps.length+t.sps.length+t.pps.length+t.sei.length),i}}},function(e,t,i){i=[i(2),i(1)],t=function(e,t){var i={getItem:t.noop,setItem:t.noop,removeItem:t.noop};try{i=window.localStorage}catch(a){}function n(e){return("baiducyberplayer."+e).toString()}function r(e,t){try{i[n(e)]=t}catch(e){__DEBUG__}}function a(){this.persistItems=["volume","mute","captionLabel","qualityLabel","playbackRate"]}return e.extend(a.prototype,{getAllItems:function(){return e.reduce(this.persistItems,(function(e,r){var a=i[n(r)];return a&&(e[r]=t.serialize(a)),e}),{})},track:function(t){e.each(this.persistItems,(function(e){t.on("change:"+e,(function(t,i){r(e,i)}))}))},clear:function(){e.each(this.persistItems,(function(e){i.removeItem(n(e))}))},setItem:r,getItem:function(e){return i[n(e)]},clearItem:function(e){return i.removeItem(n(e))}}),a}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(198),i(199),i(108),i(60)],t=function(e,t,i,n){var r={},a={};return{loadPlugins:function(i,n){return a[i]=new e(new t(r),n),a[i]},registerPlugin:function(e,t,a,s){var o=n.getPluginName(e);r[o]||(r[o]=new i(e)),r[o].registerPlugin(e,t,a,s)}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(6),i(7),i(2)],t=function(e,t,i){function n(n,s){var o=i.extend(this,t),l=a.NEW;function h(t){l=a.ERROR,o.trigger(e.ERROR,t)}function u(t){l=a.COMPLETE,o.trigger(e.COMPLETE,t)}this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},this.makeScriptTag=function(e){var t=document.createElement("script");return t.src=e,t},this.makeTag=s?this.makeStyleLink:this.makeScriptTag,this.load=function(){var t,i,o,d;l===a.NEW&&((t=r[n])&&(l=t.getStatus())<2?(t.on(e.ERROR,h),t.on(e.COMPLETE,u)):(i=document.getElementsByTagName("head")[0]||document.documentElement,o=this.makeTag(n),d=!1,o.onload=o.onreadystatechange=function(e){d||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d=!0,u(e),o.onload=o.onreadystatechange=null,i&&o.parentNode&&!s&&i.removeChild(o))},o.onerror=h,i.insertBefore(o,i.firstChild),l=a.LOADING,r[n]=this))},this.getStatus=function(){return l}}var r={},a={NEW:0,LOADING:1,ERROR:2,COMPLETE:3};return n.loaderstatus=a,n}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(15)],t=function(e,t){var i=e.seconds;return function(e){var n=[],r=(e=(e=(e=t.trim(e)).replace(/\n\n \n\n/g,"\r\n\r\n")).replace(/\n \n\n/g,"\r\n\r\n")).split("\r\n\r\n");1===r.length&&(r=e.split("\n\n"));for(var a,s=0;s<r.length;s++)"WEBVTT"!==r[s]&&(r[s]=r[s].replace(/\n\n/g,"\r\n"),(a=function(e){var t,n,r={},a=e.split("\r\n");return 1===a.length&&(a=e.split("\n")),e=1,0<a[0].indexOf(" --\x3e ")&&(e=0),a.length>e+1&&a[e+1]&&0<(n=(t=a[e]).indexOf(" --\x3e "))&&(r.begin=i(t.substr(0,n)),r.end=i(t.substr(n+5)),r.text=a.slice(e+1).join("<br/>")),r}(r[s])).text)&&n.push(a);return n}}.apply(t,i),void 0!==t&&(e.exports=t)},,,,,,,,,,,,,,,,,function(e,t,i){i=[i(2)],t=function(e){var t={},i=e.memoize((function(e){return null!==navigator.userAgent.toLowerCase().match(e)}));function n(e){return function(){return i(e)}}var r=t.isInt=function(e){return parseFloat(e)%1==0},a=(t.isFlashSupported=function(){var e=t.flashVersion();return e&&e>=__FLASH_VERSION__},t.isFF=n(/firefox/i),t.isIPod=n(/iP(hone|od)/i),t.isIPad=n(/iPad/i),t.isSafari602=n(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),t.isOSX=n(/Mac OS X/i),t.isEdge=n(/\sedge\/\d+/i),t.isIETrident=function(e){return!!t.isEdge()||(e?(e=parseFloat(e).toFixed(1),i(new RegExp("trident/.+rv:\\s*"+e,"i"))):i(/trident/i))}),s=t.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),i(new RegExp("msie\\s*"+e,"i"))):i(/msie/i)},o=n(/chrome/i),l=(t.isChrome=function(){return o()&&!t.isEdge()},t.isChrome66=function(){var e=window.navigator.userAgent.toLowerCase().match(/chrome\/([\d.]+)/);return!!(this.isChrome()&&e&&e[1]&&66<=parseInt(e[1]))},t.isIE=function(e){return e?(11<=(e=parseFloat(e).toFixed(1))?a:s)(e):s()||a()},t.isSafari=function(){return i(/safari/i)&&!i(/chrome/i)&&!i(/chromium/i)&&!i(/android/i)},t.isIOS=function(e){return i(e?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+e+"|.*\\sVersion/"+e+")","i"):/iP(hone|ad|od)/i)}),h=(t.isAndroidNative=function(e){return h(e,!0)},t.isAndroid=function(e,t){return!(t&&i(/chrome\/[123456789]/i)&&!i(/chrome\/18/))&&(e?(r(e)&&!/\./.test(e)&&(e+="."),i(new RegExp("Android\\s*"+e,"i"))):i(/Android/i))});return t.isMobile=function(){return l()||h()},t.isWeChat=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},t.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},t.flashVersion=function(){if(t.isAndroid())return 0;var e,i=navigator.plugins;if(i&&(e=i["Shockwave Flash"])&&e.description)return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if(void 0===window.ActiveXObject)return 0;try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(e){return 0}return e},t.getBrowserInfo=function(){var e,t=window.navigator.userAgent.toLowerCase();return this.isIE()?t.match(/msie ([\d.]+)/)?"IE-"+t.match(/msie ([\d.]+)/)[1]:"IE-unknown":this.isChrome()?(e=t.match(/chrome\/([\d.]+)/))&&1<e.length?"Chrome-"+e[1]:"Chrome-unknown":this.isFF()?"Firefox-"+t.match(/firefox\/([\d.]+)/)[1]:this.isSafari()?"Safari"+((e=t.match(/version\/([\d.]+)/))&&e.length?"-"+t.match(/version\/([\d.]+)/)[1]:""):l()?"ios":h()?"android":"other"},t.isPoorIE=function(){return this.isIE()&&(s(8)||s(7)||s(6)||document.documentMode&&document.documentMode<=8)},t.getChromeVersion=function(){var e=window.navigator.userAgent.toLowerCase();return this.isChrome()&&(e=e.match(/chrome\/([\d.]+)/))&&1<e.length?e[1]:-1},t.browserJudge=function(){let e=window.document,t=window.navigator.userAgent.toLowerCase(),i=e.documentMode,n=window.chrome||!1,r={agent:t,isIE:/msie/.test(t),isGecko:0<t.indexOf("gecko")&&t.indexOf("like gecko")<0,isWebkit:0<t.indexOf("webkit"),isStrict:"CSS1Compat"===e.compatMode,supportSubTitle:function(){return"track"in e.createElement("track")},supportScope:function(){return"scoped"in e.createElement("style")},ieVersion:function(){try{return t.match(/msie ([\d.]+)/)[1]||0}catch(e){return i}},operaVersion:function(){try{return window.opera?t.match(/opera.([\d.]+)/)[1]:0<t.indexOf("opr")?t.match(/opr\/([\d.]+)/)[1]:void 0}catch(e){return 0}},versionFilter:function(){if(1!==arguments.length||"string"!=typeof arguments[0])return 1===arguments.length?arguments[0]:0;var e=arguments[0],t=e.indexOf(".");return 0<t&&-1!==(t=e.indexOf(".",t+1))?e.substr(0,t):e}};try{r.type=r.isIE?"IE":window.opera||0<t.indexOf("opr")?"Opera":0<t.indexOf("chrome")?"Chrome":0<t.indexOf("safari")||window.openDatabase?"Safari":0<t.indexOf("firefox")?"Firefox":"unknow",r.version="IE"===r.type?r.ieVersion():"Firefox"===r.type?t.match(/firefox\/([\d.]+)/)[1]:"Chrome"===r.type?t.match(/chrome\/([\d.]+)/)[1]:"Opera"===r.type?r.operaVersion():"Safari"===r.type?t.match(/version\/([\d.]+)/)[1]:"0",r.shell=function(){var e,i;return 0<t.indexOf("maxthon")?(r.version=t.match(/maxthon\/([\d.]+)/)[1]||r.version,"鍌叉父娴忚鍣�"):0<t.indexOf("qqbrowser")?(r.version=t.match(/qqbrowser\/([\d.]+)/)[1]||r.version,"QQ娴忚鍣�"):0<t.indexOf("se 2.x")?"鎼滅嫍娴忚鍣�":n&&"Opera"!==r.type?(i=window.external,e=window.clientInformation.languages,i&&"LiebaoGetVersion"in i?"鐚庤惫娴忚鍣�":0<t.indexOf("bidubrowser")?(r.version=t.match(/bidubrowser\/([\d.]+)/)[1]||t.match(/chrome\/([\d.]+)/)[1],"鐧惧害娴忚鍣�"):r.supportSubTitle()&&void 0===e?(i=Object.keys(n.webstore).length,window,1<i?"360鏋侀€熸祻瑙堝櫒":"360瀹夊叏娴忚鍣�"):"Chrome"):r.type},r.name=r.shell(),r.version=r.versionFilter(r.version)}catch(e){}return[r.type,r.version]},t.isSupportWASM=function(){if(!1===(i=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})()))return!1;if(!0===i){var e=(i=t.browserJudge())[0],i=i[1];if("Chrome"===e&&i<85)return!1;if(0<=e.indexOf("360"))return!1;if(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&13<i)return!1}return!0},t.isPictureInpicture=()=>document.pictureInPictureEnabled,t}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2)],t=function(e){var t={},i={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};return t.utf8ArrayToStr=function(e,t){for(var i,n,r,a="",s=e.length,o=t||0;o<s;)if(0!==(i=e[o++])&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:n=e[o++],a+=String.fromCharCode((31&i)<<6|63&n);break;case 14:n=e[o++],r=e[o++],a+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&r)}return a},t.utf16BigEndianArrayToStr=function(e,t){for(var i="",n=e.length-1,r=t||0;r<n;)254===e[r]&&255===e[r+1]||(i+=String.fromCharCode((e[r]<<8)+e[r+1])),r+=2;return i},t.syncSafeInt=function(e){return 127&(e=t.arrayToInt(e))|(32512&e)>>1|(8323072&e)>>2|(2130706432&e)>>3},t.arrayToInt=function(e){for(var t="0x",i=0;i<e.length;i++)t+=e[i].toString(16);return parseInt(t)},t.parseID3=function(n){return e.reduce(n,(function(n,r){if(!("value"in r)&&"data"in r&&r.data instanceof ArrayBuffer){for(var a=new Uint8Array(r.data),s=a.length,o=(r={value:{key:"",data:""}},10);o<14&&o<a.length&&0!==a[o];)r.value.key+=String.fromCharCode(a[o]),o++;var l,h=19,u=a[h],d=(3!==u&&0!==u||(u=a[++h],s--),0);if(1!==u&&2!==u)for(var c=h+1;c<s;c++)if(0===a[c]){d=c-h;break}0<d?(u=t.utf8ArrayToStr(a.subarray(h,h+=d),0),"PRIV"===r.value.key?("com.apple.streaming.transportStreamTimestamp"===u?(l=1&t.syncSafeInt(a.subarray(h,h+=4)),f=t.syncSafeInt(a.subarray(h,h+=4)),l&&(f+=4294967296),r.value.data=f):r.value.data=t.utf8ArrayToStr(a,h+1),r.value.info=u):(r.value.info=u,r.value.data=t.utf8ArrayToStr(a,h+1))):(l=a[h],r.value.data=1===l||2===l?t.utf16BigEndianArrayToStr(a,h+1):t.utf8ArrayToStr(a,h+1))}var f;return i.hasOwnProperty(r.value.key)&&(n[i[r.value.key]]=r.value.data),r.value.info?(f=n[r.value.key],e.isObject(f)||(n[r.value.key]=f={}),f[r.value.info]=r.value.data):n[r.value.key]=r.value.data,n}),{})},t}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(58)],t=function(e,t){function i(){}function n(e){var t=document.createElement("a"),i=document.createElement("a");t.href=location.href;try{return i.href=e,i.href=i.href,t.protocol+"//"+t.host!=i.protocol+"//"+i.host}catch(e){}return!0}var r=!1,a=function(t,l,h,u){e.isObject(t)&&(t=(u=t).url);var d,c,f,p=e.extend({xhr:null,url:t,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:l||i,onerror:h||i,mimeType:u&&!u.responseType?"text/xml":"",requireValidXML:!1,responseType:u&&u.plainText?"text":""},u);if("XDomainRequest"in window&&n(t))(d=p.xhr=new window.XDomainRequest).onload=o(p),d.ontimeout=d.onprogress=i,r=!0;else{if(!("XMLHttpRequest"in window))return void p.onerror("",t);(d=p.xhr=new window.XMLHttpRequest).onreadystatechange=(c=p,function(e){var t,i=e&&e.currentTarget||c.xhr;if(4===i.readyState)return clearTimeout(c.timeoutId),400<=i.status?(t=404===i.status?"File not found":i.status+"("+i.statusText+")",c.onerror(t,c.url,i)):200===i.status?o(c)(e):void 0})}f=p,l=function(t){var i;t=t&&t.currentTarget||f.xhr,clearTimeout(f.timeoutId),f.retryWithoutCredentials&&f.xhr.withCredentials?(s(t),i=e.extend({},f,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1}),a(i)):f.onerror("鏂囦欢鍔犺浇澶辫触",f.url,t)},d.onerror=l,"overrideMimeType"in d?p.mimeType&&d.overrideMimeType(p.mimeType):r=!0;try{t=t.replace(/#.*$/,""),d.open("GET",t,!0)}catch(t){return l(t),d}if(p.responseType)try{d.responseType=p.responseType}catch(t){}p.timeout&&(p.timeoutId=setTimeout((function(){s(d),p.onerror("Timeout",t,d)}),p.timeout),d.onabort=function(){clearTimeout(p.timeoutId)});try{p.withCredentials&&"withCredentials"in d&&(d.withCredentials=!0),d.send()}catch(t){l(t)}return d};function s(e){e.onload=null,e.onprogress=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()}function o(i){return function(n){if(n=n&&n.currentTarget||i.xhr,clearTimeout(i.timeoutId),i.responseType){if("json"===i.responseType){var a=n,s=i;if(!a.response||e.isString(a.response)&&'"'!==a.responseText.substr(1))try{a=e.extend({},a,{response:JSON.parse(a.responseText)})}catch(n){return void s.onerror("Invalid JSON",s.url,a)}return s.oncomplete(a)}}else{var o;if(s=n.responseXML)try{o=s.firstChild}catch(n){}if(s&&o)return l(n,s,i);if(r&&n.responseText&&!s&&(s=t.parseXML(n.responseText))&&s.firstChild)return l(n,s,i);if(i.requireValidXML)return void i.onerror("Invalid XML",i.url,n)}i.oncomplete(n)}}function l(t,i,n){var r=i.documentElement;if(!n.requireValidXML||"parsererror"!==r.nodeName&&!r.getElementsByTagName("parsererror").length)return t.responseXML||(t=e.extend({},t,{responseXML:i})),n.oncomplete(t);n.onerror("Invalid XML",n.url,t)}return{ajax:a,crossdomain:n}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2)],t=function(e){return function(){var t={},i={},n={},r={};return{start:function(i){t[i]=e.now(),n[i]=n[i]+1||1},end:function(n){var r;t[n]&&(r=e.now()-t[n],i[n]=i[n]+r||r)},dump:function(){return{counts:n,sums:i,events:r}},tick:function(t,i){r[t]=i||e.now()},between:function(e,t){return r[t]&&r[e]?r[t]-r[e]:-1}}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(6),i(16),i(2)],t=function(e,t,i,n){return e=e.noop,{supports:n=n.constant(!1),prevFrame:e,nextFrame:e,snapshot:e,test1:e,play:e,load:e,stop:e,volume:e,mute:e,seek:e,resize:e,remove:e,destroy:e,setVisibility:e,setFullscreen:n,getFullscreen:e,getContainer:e,setContainer:n,getName:e,getQualityLevels:e,getCurrentQuality:e,setCurrentQuality:e,getAudioTracks:e,getCurrentAudioTrack:e,setCurrentAudioTrack:e,checkComplete:e,setControls:e,attachMedia:e,detachMedia:e,setState:function(e){var n=this.state||i.IDLE;(this.state=e)!==n&&this.trigger(t.JWPLAYER_PLAYER_STATE,{newstate:e})},sendMediaType:function(e){e=e[0].type,this.trigger(t.JWPLAYER_MEDIA_TYPE,{mediaType:"oga"===e||"aac"===e||"mp3"===e||"mpeg"===e||"vorbis"===e?"audio":"video"})}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(2),i(148),i(44)],t=function(e,t,i,n){return[{name:"cybercore",supports:function(e){return!!(n.isHls(e.file,"")||n.isMp4(e.file,"")||n.isMov(e.file,"")||n.isFlv(e.file,"")||n.isMpegTs(e.file,"")||n.isRtc(e.type)||n.isMp3(e.file,"")||n.isAac(e.file,"")||n.isFlac(e.file,"")||n.isOgg(e.file,"")||n.isWav(e.file,"")||n.isOpus(e.file,""))&&e.isHEVC}}]}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){(function(e,n){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a,s,o,l,h="Expected a function",u="__lodash_hash_undefined__",d="__lodash_placeholder__",c=128,f=9007199254740991,p=NaN,m=4294967295,g=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],_="[object Arguments]",y="[object Array]",v="[object Boolean]",A="[object Date]",E="[object Error]",b="[object Function]",w="[object GeneratorFunction]",S="[object Map]",T="[object Number]",C="[object Object]",L="[object Promise]",R="[object RegExp]",I="[object Set]",k="[object String]",P="[object Symbol]",D="[object WeakMap]",x="[object ArrayBuffer]",M="[object DataView]",F="[object Float32Array]",B="[object Float64Array]",O="[object Int8Array]",U="[object Int16Array]",N="[object Int32Array]",j="[object Uint8Array]",V="[object Uint8ClampedArray]",G="[object Uint16Array]",H="[object Uint32Array]",Y=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,J=RegExp(Q.source),Z=RegExp(K.source),q=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,re=RegExp(ne.source),ae=/^\s+/,se=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,he=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,Ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,be=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\ufe0e\\ufe0f",Ce="["+we+"]",Le="["+(xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000")+"]",Re="["+Se+"]",Ie="["+(s="\\u2700-\\u27bf")+"]",ke="["+(qe="a-z\\xdf-\\xf6\\xf8-\\xff")+"]",Pe="\\u200d",De="(?:"+ke+"|"+(xe="[^"+we+xe+"\\d+"+s+qe+(o="A-Z\\xc0-\\xd6\\xd8-\\xde")+"]")+")",xe="(?:"+(o="["+o+"]")+"|"+xe+")",Me="(?:['鈥橾(?:d|ll|m|re|s|t|ve))?",Fe="(?:['鈥橾(?:D|LL|M|RE|S|T|VE))?",Be=(Be="["+Te+"]?")+(Oe="(?:"+Re+"|"+(s="\\ud83c[\\udffb-\\udfff]")+")?")+"(?:"+Pe+"(?:"+[qe="[^"+we+"]",Xe="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+Be+Oe+")*",Oe="(?:"+[Ie,Xe,l].join("|")+")"+Be,Ue=(Ie="(?:"+[qe+Re+"?",Re,Xe,l,Ce].join("|")+")",RegExp("['鈥橾","g")),Ne=RegExp(Re,"g"),je=RegExp(s+"(?="+s+")|"+Ie+Be,"g"),Ve=RegExp([o+"?"+ke+"+"+Me+"(?="+[Le,o,"$"].join("|")+")",xe+"+"+Fe+"(?="+[Le,o+De,"$"].join("|")+")",o+"?"+De+"+"+Me,o+"+"+Fe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Oe].join("|"),"g"),Ge=RegExp("["+Pe+we+Se+Te+"]"),He=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],We=-1,ze={},Qe=(ze[F]=ze[B]=ze[O]=ze[U]=ze[N]=ze[j]=ze[V]=ze[G]=ze[H]=!0,ze[_]=ze[y]=ze[x]=ze[v]=ze[M]=ze[A]=ze[E]=ze[b]=ze[S]=ze[T]=ze[C]=ze[R]=ze[I]=ze[k]=ze[D]=!1,{}),Ke=(Qe[_]=Qe[y]=Qe[x]=Qe[M]=Qe[v]=Qe[A]=Qe[F]=Qe[B]=Qe[O]=Qe[U]=Qe[N]=Qe[S]=Qe[T]=Qe[C]=Qe[R]=Qe[I]=Qe[k]=Qe[P]=Qe[j]=Qe[V]=Qe[G]=Qe[H]=!0,Qe[E]=Qe[b]=Qe[D]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),Je=parseFloat,Ze=parseInt,qe="object"==typeof e&&e&&e.Object===Object&&e,Xe="object"==typeof self&&self&&self.Object===Object&&self,$e=qe||Xe||Function("return this")(),et=(l=t&&!t.nodeType&&t)&&"object"==typeof n&&n&&!n.nodeType&&n,tt=et&&et.exports===l,it=tt&&qe.process,nt=(Ce=function(){try{var e=et&&et.require&&et.require("util").types;return e||it&&it.binding&&it.binding("util")}catch(e){}}(),Ce&&Ce.isArrayBuffer),rt=Ce&&Ce.isDate,at=Ce&&Ce.isMap,st=Ce&&Ce.isRegExp,ot=Ce&&Ce.isSet,lt=Ce&&Ce.isTypedArray;function ht(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function ut(e,t,i,n){for(var r=-1,a=null==e?0:e.length;++r<a;){var s=e[r];t(n,s,i(s),e)}return n}function dt(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function ct(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function ft(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function pt(e,t){for(var i=-1,n=null==e?0:e.length,r=0,a=[];++i<n;){var s=e[i];t(s,i,e)&&(a[r++]=s)}return a}function mt(e,t){return!(null==e||!e.length)&&-1<Tt(e,t,0)}function gt(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function _t(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function yt(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}function vt(e,t,i,n){var r=-1,a=null==e?0:e.length;for(n&&a&&(i=e[++r]);++r<a;)i=t(i,e[r],r,e);return i}function At(e,t,i,n){var r=null==e?0:e.length;for(n&&r&&(i=e[--r]);r--;)i=t(i,e[r],r,e);return i}function Et(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var bt=It("length");function wt(e,t,i){var n;return i(e,(function(e,i,r){if(t(e,i,r))return n=i,!1})),n}function St(e,t,i,n){for(var r=e.length,a=i+(n?1:-1);n?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function Tt(e,t,i){if(t!=t)return St(e,Lt,i);for(var n=e,r=t,a=i-1,s=n.length;++a<s;)if(n[a]===r)return a;return-1}function Ct(e,t,i,n){for(var r=i-1,a=e.length;++r<a;)if(n(e[r],t))return r;return-1}function Lt(e){return e!=e}function Rt(e,t){var i=null==e?0:e.length;return i?Dt(e,t)/i:p}function It(e){return function(t){return null==t?a:t[e]}}function kt(e){return function(t){return null==e?a:e[t]}}function Pt(e,t,i,n,r){return r(e,(function(e,r,a){i=n?(n=!1,e):t(i,e,r,a)})),i}function Dt(e,t){for(var i,n=-1,r=e.length;++n<r;){var s=t(e[n]);s!==a&&(i=i===a?s:i+s)}return i}function xt(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Mt(e){return e&&e.slice(0,Zt(e)+1).replace(ae,"")}function Ft(e){return function(t){return e(t)}}function Bt(e,t){return _t(t,(function(t){return e[t]}))}function Ot(e,t){return e.has(t)}function Ut(e,t){for(var i=-1,n=e.length;++i<n&&-1<Tt(t,e[i],0););return i}function Nt(e,t){for(var i=e.length;i--&&-1<Tt(t,e[i],0););return i}var jt=kt({"脌":"A","脕":"A","脗":"A","脙":"A","脛":"A","脜":"A","脿":"a","谩":"a","芒":"a","茫":"a","盲":"a","氓":"a","脟":"C","莽":"c","脨":"D","冒":"d","脠":"E","脡":"E","脢":"E","脣":"E","猫":"e","茅":"e","锚":"e","毛":"e","脤":"I","脥":"I","脦":"I","脧":"I","矛":"i","铆":"i","卯":"i","茂":"i","脩":"N","帽":"n","脪":"O","脫":"O","脭":"O","脮":"O","脰":"O","脴":"O","貌":"o","贸":"o","么":"o","玫":"o","枚":"o","酶":"o","脵":"U","脷":"U","脹":"U","脺":"U","霉":"u","煤":"u","没":"u","眉":"u","脻":"Y","媒":"y","每":"y","脝":"Ae","忙":"ae","脼":"Th","镁":"th","脽":"ss","膧":"A","膫":"A","膭":"A","膩":"a","膬":"a","膮":"a","膯":"C","膱":"C","膴":"C","膶":"C","膰":"c","膲":"c","膵":"c","膷":"c","膸":"D","膼":"D","膹":"d","膽":"d","膾":"E","臄":"E","臇":"E","臉":"E","臍":"E","膿":"e","臅":"e","臈":"e","臋":"e","臎":"e","臏":"G","臑":"G","臓":"G","蘑":"G","臐":"g","臒":"g","摹":"g","模":"g","膜":"H","摩":"H","磨":"h","魔":"h","抹":"I","莫":"I","默":"I","漠":"I","陌":"I","末":"i","墨":"i","沫":"i","寞":"i","谋":"i","拇":"J","牡":"j","亩":"K","姆":"k","母":"k","墓":"L","幕":"L","慕":"L","目":"L","艁":"L","暮":"l","募":"l","木":"l","艀":"l","艂":"l","艃":"N","艆":"N","艊":"N","艎":"N","艅":"n","艈":"n","艌":"n","艐":"n","艑":"O","艓":"O","艕":"O","艒":"o","艔":"o","艖":"o","艛":"R","艝":"R","艠":"R","艜":"r","艞":"r","艡":"r","艢":"S","艤":"S","艦":"S","艩":"S","艣":"s","艥":"s","艧":"s","拧":"s","泞":"T","扭":"T","纽":"T","牛":"t","钮":"t","脓":"t","浓":"U","弄":"U","努":"U","女":"U","虐":"U","挪":"U","农":"u","奴":"u","怒":"u","暖":"u","疟":"u","懦":"u","糯":"W","诺":"w","哦":"Y","欧":"y","鸥":"Y","殴":"Z","呕":"Z","沤":"Z","藕":"z","偶":"z","啪":"z","牟":"IJ","某":"ij","艗":"Oe","艙":"oe","艍":"'n","趴":"s"}),Vt=kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Gt(e){return"\\"+Ke[e]}function Ht(e){return Ge.test(e)}function Yt(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function Wt(e,t){return function(i){return e(t(i))}}function zt(e,t){for(var i=-1,n=e.length,r=0,a=[];++i<n;){var s=e[i];s!==t&&s!==d||(e[i]=d,a[r++]=i)}return a}function Qt(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function Kt(e){return(Ht(e)?function(e){for(var t=je.lastIndex=0;je.test(e);)++t;return t}:bt)(e)}function Jt(e){return Ht(e)?e.match(je)||[]:e.split("")}function Zt(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var qt=kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Xt=function e(t){var i=(t=null==t?$e:Xt.defaults($e.Object(),t,Xt.pick($e,Ye))).Array,n=t.Date,r=t.Error,s=t.Function,o=t.Math,l=t.Object,se=t.RegExp,we=t.String,Se=t.TypeError,Te=i.prototype,Ce=s.prototype,Le=l.prototype,Re=t["__core-js_shared__"],Ie=Ce.toString,ke=Le.hasOwnProperty,Pe=0,De=(Ce=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+Ce:"",xe=Le.toString,Me=Ie.call(l),Fe=$e._,Be=se("^"+Ie.call(ke).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=(Ce=tt?t.Buffer:a,t.Symbol),je=t.Uint8Array,Ge=Ce?Ce.allocUnsafe:a,Ke=Wt(l.getPrototypeOf,l),qe=l.create,Xe=Le.propertyIsEnumerable,et=Te.splice,it=Oe?Oe.isConcatSpreadable:a,bt=Oe?Oe.iterator:a,kt=Oe?Oe.toStringTag:a,$t=function(){try{var e=$r(l,"defineProperty");return e({},"",{}),e}catch(e){}}(),ei=t.clearTimeout!==$e.clearTimeout&&t.clearTimeout,ti=n&&n.now!==$e.Date.now&&n.now,ii=t.setTimeout!==$e.setTimeout&&t.setTimeout,ni=o.ceil,ri=o.floor,ai=l.getOwnPropertySymbols,si=(Ce=Ce?Ce.isBuffer:a,t.isFinite),oi=Te.join,li=Wt(l.keys,l),hi=o.max,ui=o.min,di=n.now,ci=t.parseInt,fi=o.random,pi=Te.reverse,mi=(n=$r(t,"DataView"),$r(t,"Map")),gi=$r(t,"Promise"),_i=$r(t,"Set"),yi=(t=$r(t,"WeakMap"),$r(l,"create")),vi=t&&new t,Ai={},Ei=Ca(n),bi=Ca(mi),wi=Ca(gi),Si=Ca(_i),Ti=Ca(t),Ci=(Oe=Oe?Oe.prototype:a)?Oe.valueOf:a,Li=Oe?Oe.toString:a;function Ri(e){if(xs(e)&&!ws(e)&&!(e instanceof xi)){if(e instanceof Di)return e;if(ke.call(e,"__wrapped__"))return La(e)}return new Di(e)}var Ii=function(e){return Ds(e)?qe?qe(e):(ki.prototype=e,e=new ki,ki.prototype=a,e):{}};function ki(){}function Pi(){}function Di(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function xi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Mi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Fi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Bi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Oi(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Bi;++t<i;)this.add(e[t])}function Ui(e){e=this.__data__=new Fi(e),this.size=e.size}function Ni(e,t){var i,n=ws(e),r=!n&&bs(e),a=!n&&!r&&Ls(e),s=!n&&!r&&!a&&Vs(e),o=n||r||a||s,l=o?xt(e.length,we):[],h=l.length;for(i in e)!t&&!ke.call(e,i)||o&&("length"==i||a&&("offset"==i||"parent"==i)||s&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||sa(i,h))||l.push(i);return l}function ji(e){var t=e.length;return t?e[On(0,t-1)]:a}function Vi(e,t){return ba(_r(e),Zi(t,0,e.length))}function Gi(e){return ba(_r(e))}function Hi(e,t,i){(i===a||vs(e[t],i))&&(i!==a||t in e)||Ki(e,t,i)}function Yi(e,t,i){var n=e[t];ke.call(e,t)&&vs(n,i)&&(i!==a||t in e)||Ki(e,t,i)}function Wi(e,t){for(var i=e.length;i--;)if(vs(e[i][0],t))return i;return-1}function zi(e,t,i,n){return tn(e,(function(e,r,a){t(n,e,i(e),a)})),n}function Qi(e,t){return e&&yr(t,ho(t),e)}function Ki(e,t,i){"__proto__"==t&&$t?$t(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Ji(e,t){for(var n=-1,r=t.length,s=i(r),o=null==e;++n<r;)s[n]=o?a:ro(e,t[n]);return s}function Zi(e,t,i){return e==e&&(i!==a&&(e=e<=i?e:i),t!==a)?t<=e?e:t:e}function qi(e,t,i,n,r,s){var o,h=1&t,u=2&t,d=4&t;if((o=i?r?i(e,n,r,s):i(e):o)===a){if(!Ds(e))return e;var c;if(n=ws(e)){if(o=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&ke.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!h)return _r(e,o)}else{var f=ia(e),p=f==b||f==w;if(Ls(e))return dr(e,h);if(f==C||f==_||p&&!r){if(o=u||p?{}:ra(e),!h)return u?(m=p=e,m=(c=o)&&yr(m,uo(m),c),yr(p,ta(p),m)):(p=Qi(o,c=e),yr(c,ea(c),p))}else{if(!Qe[f])return r?e:{};o=function(e,t,i){var n=e.constructor;switch(t){case x:return cr(e);case v:case A:return new n(+e);case M:return function(e,t){return t=t?cr(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength)}(e,i);case F:case B:case O:case U:case N:case j:case V:case G:case H:return fr(e,i);case S:return new n;case T:case k:return new n(e);case R:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new n;case P:return function(e){return Ci?l(Ci.call(e)):{}}(e)}}(e,f,h)}}var m=(s=s||new Ui).get(e);if(m)return m;s.set(e,o),Us(e)?e.forEach((function(n){o.add(qi(n,t,i,n,e,s))})):Ms(e)&&e.forEach((function(n,r){o.set(r,qi(n,t,i,r,e,s))}));var g=n?a:(d?u?zr:Wr:u?uo:ho)(e);dt(g||e,(function(n,r){g&&(n=e[r=n]),Yi(o,r,qi(n,t,i,r,e,s))}))}return o}function Xi(e,t,i){var n=i.length;if(null==e)return!n;for(e=l(e);n--;){var r=i[n],s=t[r],o=e[r];if(o===a&&!(r in e)||!s(o))return!1}return!0}function $i(e,t,i){if("function"!=typeof e)throw new Se(h);return ya((function(){e.apply(a,i)}),t)}function en(e,t,i,n){var r=-1,a=mt,s=!0,o=e.length,l=[],h=t.length;if(o){i&&(t=_t(t,Ft(i))),n?(a=gt,s=!1):200<=t.length&&(a=Ot,s=!1,t=new Oi(t));e:for(;++r<o;){var u=e[r],d=null==i?u:i(u);if(u=n||0!==u?u:0,s&&d==d){for(var c=h;c--;)if(t[c]===d)continue e;l.push(u)}else a(t,d,n)||l.push(u)}}return l}Ri.templateSettings={escape:q,evaluate:X,interpolate:$,variable:"",imports:{_:Ri}},(Ri.prototype=Pi.prototype).constructor=Ri,(Di.prototype=Ii(Pi.prototype)).constructor=Di,(xi.prototype=Ii(Pi.prototype)).constructor=xi,Mi.prototype.clear=function(){this.__data__=yi?yi(null):{},this.size=0},Mi.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Mi.prototype.get=function(e){var t,i=this.__data__;return yi?(t=i[e])===u?a:t:ke.call(i,e)?i[e]:a},Mi.prototype.has=function(e){var t=this.__data__;return yi?t[e]!==a:ke.call(t,e)},Mi.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=yi&&t===a?u:t,this},Fi.prototype.clear=function(){this.__data__=[],this.size=0},Fi.prototype.delete=function(e){var t=this.__data__;return!((e=Wi(t,e))<0||(e==t.length-1?t.pop():et.call(t,e,1),--this.size,0))},Fi.prototype.get=function(e){var t=this.__data__;return(e=Wi(t,e))<0?a:t[e][1]},Fi.prototype.has=function(e){return-1<Wi(this.__data__,e)},Fi.prototype.set=function(e,t){var i=this.__data__,n=Wi(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Bi.prototype.clear=function(){this.size=0,this.__data__={hash:new Mi,map:new(mi||Fi),string:new Mi}},Bi.prototype.delete=function(e){return e=qr(this,e).delete(e),this.size-=e?1:0,e},Bi.prototype.get=function(e){return qr(this,e).get(e)},Bi.prototype.has=function(e){return qr(this,e).has(e)},Bi.prototype.set=function(e,t){var i=qr(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},Oi.prototype.add=Oi.prototype.push=function(e){return this.__data__.set(e,u),this},Oi.prototype.has=function(e){return this.__data__.has(e)},Ui.prototype.clear=function(){this.__data__=new Fi,this.size=0},Ui.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Ui.prototype.get=function(e){return this.__data__.get(e)},Ui.prototype.has=function(e){return this.__data__.has(e)},Ui.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Fi){var n=i.__data__;if(!mi||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Bi(n)}return i.set(e,t),this.size=i.size,this};var tn=Er(un),nn=Er(dn,!0);function rn(e,t){var i=!0;return tn(e,(function(e,n,r){return i=!!t(e,n,r)})),i}function an(e,t,i){for(var n=-1,r=e.length;++n<r;){var s,o,l=e[n],h=t(l);null!=h&&(s===a?h==h&&!js(h):i(h,s))&&(s=h,o=l)}return o}function sn(e,t){var i=[];return tn(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function on(e,t,i,n,r){var a=-1,s=e.length;for(i=i||aa,r=r||[];++a<s;){var o=e[a];0<t&&i(o)?1<t?on(o,t-1,i,n,r):yt(r,o):n||(r[r.length]=o)}return r}var ln=br(),hn=br(!0);function un(e,t){return e&&ln(e,t,ho)}function dn(e,t){return e&&hn(e,t,ho)}function cn(e,t){return pt(t,(function(t){return Is(e[t])}))}function fn(e,t){for(var i=0,n=(t=or(t,e)).length;null!=e&&i<n;)e=e[Ta(t[i++])];return i&&i==n?e:a}function pn(e,t,i){return t=t(e),ws(e)?t:yt(t,i(e))}function mn(e){if(null==e)return e===a?"[object Undefined]":"[object Null]";if(kt&&kt in l(e)){var t=e,i=ke.call(t,kt),n=t[kt];try{t[kt]=a;var r=!0}catch(e){}var s=xe.call(t);return r&&(i?t[kt]=n:delete t[kt]),s}return xe.call(e)}function gn(e,t){return t<e}function _n(e,t){return null!=e&&ke.call(e,t)}function yn(e,t){return null!=e&&t in l(e)}function vn(e,t,n){for(var r=n?gt:mt,s=e[0].length,o=e.length,l=o,h=i(o),u=1/0,d=[];l--;){var c=e[l];l&&t&&(c=_t(c,Ft(t))),u=ui(c.length,u),h[l]=!n&&(t||120<=s&&120<=c.length)?new Oi(l&&c):a}c=e[0];var f=-1,p=h[0];e:for(;++f<s&&d.length<u;){var m=c[f],g=t?t(m):m;if(m=n||0!==m?m:0,!(p?Ot(p,g):r(d,g,n))){for(l=o;--l;){var _=h[l];if(!(_?Ot(_,g):r(e[l],g,n)))continue e}p&&p.push(g),d.push(m)}}return d}function An(e,t,i){return null==(t=null==(e=ma(e,t=or(t,e)))?e:e[Ta(Da(t))])?a:ht(t,e,i)}function En(e){return xs(e)&&mn(e)==_}function bn(e,t,i,n,r){if(e===t)return!0;if(null==e||null==t||!xs(e)&&!xs(t))return e!=e&&t!=t;var s=bn,o=ws(e),l=ws(t),h=o?y:ia(e),u=(l=l?y:ia(t),(h=h==_?C:h)==C),d=(l=l==_?C:l)==C;if((l=h==l)&&Ls(e)){if(!Ls(t))return!1;u=!(o=!0)}if(l&&!u){if(r=r||new Ui,o||Vs(e))return Hr(e,t,i,n,s,r);var c=e,f=t,p=i,m=n,g=s,b=r;switch(h){case M:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case x:return!(c.byteLength!=f.byteLength||!g(new je(c),new je(f)));case v:case A:case T:return vs(+c,+f);case E:return c.name==f.name&&c.message==f.message;case R:case k:return c==f+"";case S:var w=Yt;case I:var L=1&p;return w=w||Qt,!(c.size!=f.size&&!L)&&((L=b.get(c))?L==f:(p|=2,b.set(c,f),L=Hr(w(c),w(f),p,m,g,b),b.delete(c),L));case P:if(Ci)return Ci.call(c)==Ci.call(f)}return!1}if(!(1&i)&&(o=u&&ke.call(e,"__wrapped__"),h=d&&ke.call(t,"__wrapped__"),o||h))return s(u=o?e.value():e,d=h?t.value():t,i,n,r=r||new Ui);if(l){var D=e,F=t,B=i,O=n,U=s,N=r=r||new Ui,j=1&B,V=Wr(D),G=V.length;if(G!=(o=Wr(F).length)&&!j)return!1;for(var H=G;H--;){var Y=V[H];if(!(j?Y in F:ke.call(F,Y)))return!1}if(o=N.get(D),h=N.get(F),o&&h)return o==F&&h==D;for(var W=!0,z=(N.set(D,F),N.set(F,D),j);++H<G;){var Q,K=D[Y=V[H]],J=F[Y];if(!((Q=O?j?O(J,K,Y,F,D,N):O(K,J,Y,D,F,N):Q)===a?K===J||U(K,J,B,O,N):Q)){W=!1;break}z=z||"constructor"==Y}return W&&!z&&(o=D.constructor)!=(h=F.constructor)&&"constructor"in D&&"constructor"in F&&!("function"==typeof o&&o instanceof o&&"function"==typeof h&&h instanceof h)&&(W=!1),N.delete(D),N.delete(F),W}return!1}function wn(e,t,i,n){var r=i.length,s=r,o=!n;if(null==e)return!s;for(e=l(e);r--;){var h=i[r];if(o&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++r<s;){var u=(h=i[r])[0],d=e[u],c=h[1];if(o&&h[2]){if(d===a&&!(u in e))return!1}else{var f,p=new Ui;if(!((f=n?n(d,c,u,e,t,p):f)===a?bn(c,d,3,n,p):f))return!1}}return!0}function Sn(e){var t;return!(!Ds(e)||(t=e,De&&De in t))&&(Is(e)?Be:_e).test(Ca(e))}function Tn(e){return"function"==typeof e?e:null==e?Bo:"object"==typeof e?ws(e)?kn(e[0],e[1]):In(e):Wo(e)}function Cn(e){if(!da(e))return li(e);var t,i=[];for(t in l(e))ke.call(e,t)&&"constructor"!=t&&i.push(t);return i}function Ln(e,t){return e<t}function Rn(e,t){var n=-1,r=Ts(e)?i(e.length):[];return tn(e,(function(e,i,a){r[++n]=t(e,i,a)})),r}function In(e){var t=Xr(e);return 1==t.length&&t[0][2]?fa(t[0][0],t[0][1]):function(i){return i===e||wn(i,e,t)}}function kn(e,t){return la(e)&&ca(t)?fa(Ta(e),t):function(i){var n=ro(i,e);return n===a&&n===t?ao(i,e):bn(t,n,3)}}function Pn(e,t,i,n,r){e!==t&&ln(t,(function(s,o){var l,h,u,d,c,f,p,m,g,_,y,v,A;r=r||new Ui,Ds(s)?(h=t,d=i,c=Pn,f=n,p=r,y=ga(l=e,u=o),v=ga(h,u),(A=p.get(v))||((h=(A=f?f(y,v,u+"",l,h,p):a)===a)&&(g=!(m=ws(v))&&Ls(v),_=!m&&!g&&Vs(v),A=v,m||g||_?A=ws(y)?y:Cs(y)?_r(y):g?dr(v,!(h=!1)):_?fr(v,!(h=!1)):[]:Bs(v)||bs(v)?bs(A=y)?A=Js(y):Ds(y)&&!Is(y)||(A=ra(v)):h=!1),h&&(p.set(v,A),c(A,v,d,f,p),p.delete(v))),Hi(l,u,A)):(m=n?n(ga(e,o),s,o+"",e,t,r):a,Hi(e,o,m=m===a?s:m))}),uo)}function Dn(e,t){var i=e.length;if(i)return sa(t+=t<0?i:0,i)?e[t]:a}function xn(e,t,i){t=t.length?_t(t,(function(e){return ws(e)?function(t){return fn(t,1===e.length?e[0]:e)}:e})):[Bo];var n=-1;t=_t(t,Ft(Zr()));var r=Rn(e,(function(e,i,r){return{criteria:_t(t,(function(t){return t(e)})),index:++n,value:e}})),a=(e=function(e,t){for(var n=i,r=-1,a=e.criteria,s=t.criteria,o=a.length,l=n.length;++r<o;){var h=pr(a[r],s[r]);if(h)return l<=r?h:h*("desc"==n[r]?-1:1)}return e.index-t.index},r.length);for(r.sort(e);a--;)r[a]=r[a].value;return r}function Mn(e,t,i){for(var n=-1,r=t.length,a={};++n<r;){var s=t[n],o=fn(e,s);i(o,s)&&Gn(a,or(s,e),o)}return a}function Fn(e,t,i,n){var r=n?Ct:Tt,a=-1,s=t.length,o=e;for(e===t&&(t=_r(t)),i&&(o=_t(e,Ft(i)));++a<s;)for(var l=0,h=t[a],u=i?i(h):h;-1<(l=r(o,u,l,n));)o!==e&&et.call(o,l,1),et.call(e,l,1);return e}function Bn(e,t){for(var i=e?t.length:0,n=i-1;i--;){var r,a=t[i];i!=n&&a===r||(sa(r=a)?et.call(e,a,1):$n(e,a))}}function On(e,t){return e+ri(fi()*(t-e+1))}function Un(e,t){var i="";if(!(!e||t<1||f<t))for(;t%2&&(i+=e),(t=ri(t/2))&&(e+=e),t;);return i}function Nn(e,t){return va(pa(e,t,Bo),e+"")}function jn(e){return ji(vo(e))}function Vn(e,t){return ba(e=vo(e),Zi(t,0,e.length))}function Gn(e,t,i,n){if(Ds(e))for(var r=-1,s=(t=or(t,e)).length,o=s-1,l=e;null!=l&&++r<s;){var h,u=Ta(t[r]),d=i;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;Yi(l,u,d=r!=o&&(h=l[u],(d=n?n(h,u,l):a)===a)?Ds(h)?h:sa(t[r+1])?[]:{}:d),l=l[u]}return e}var Hn=vi?function(e,t){return vi.set(e,t),e}:Bo;function Yn(e){return ba(vo(e))}function Wn(e,t,n){for(var r=-1,a=e.length,s=((n=a<n?a:n)<0&&(n+=a),a=n<(t=t<0?a<-t?0:a+t:t)?0:n-t>>>0,t>>>=0,i(a));++r<a;)s[r]=e[r+t];return s}function zn(e,t){var i;return tn(e,(function(e,n,r){return!(i=t(e,n,r))})),!!i}function Qn(e,t,i){var n=0,r=null==e?n:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;n<r;){var a=n+r>>>1,s=e[a];null!==s&&!js(s)&&(i?s<=t:s<t)?n=1+a:r=a}return r}return Kn(e,t,Bo,i)}function Kn(e,t,i,n){var r=0,s=null==e?0:e.length;if(0===s)return 0;for(var o=(t=i(t))!=t,l=null===t,h=js(t),u=t===a;r<s;){var d=ri((r+s)/2),c=i(e[d]),f=c!==a,p=null===c,m=c==c,g=js(c);(m=o?n||m:u?m&&(n||f):l?m&&f&&(n||!p):h?m&&f&&!p&&(n||!g):!p&&!g&&(n?c<=t:c<t))?r=d+1:s=d}return ui(s,4294967294)}function Jn(e,t){for(var i=-1,n=e.length,r=0,a=[];++i<n;){var s,o=e[i],l=t?t(o):o;i&&vs(l,s)||(s=l,a[r++]=0===o?0:o)}return a}function Zn(e){return"number"==typeof e?e:js(e)?p:+e}function qn(e){var t;return"string"==typeof e?e:ws(e)?_t(e,qn)+"":js(e)?Li?Li.call(e):"":"0"==(t=e+"")&&1/e==-1/0?"-0":t}function Xn(e,t,i){var n=-1,r=mt,a=e.length,s=!0,o=[],l=o;if(i)s=!1,r=gt;else if(200<=a){var h=t?null:Or(e);if(h)return Qt(h);s=!1,r=Ot,l=new Oi}else l=t?[]:o;e:for(;++n<a;){var u=e[n],d=t?t(u):u;if(u=i||0!==u?u:0,s&&d==d){for(var c=l.length;c--;)if(l[c]===d)continue e;t&&l.push(d),o.push(u)}else r(l,d,i)||(l!==o&&l.push(d),o.push(u))}return o}function $n(e,t){return null==(e=ma(e,t=or(t,e)))||delete e[Ta(Da(t))]}function er(e,t,i,n){return Gn(e,t,i(fn(e,t)),n)}function tr(e,t,i,n){for(var r=e.length,a=n?r:-1;(n?a--:++a<r)&&t(e[a],a,e););return i?Wn(e,n?0:a,n?a+1:r):Wn(e,n?a+1:0,n?r:a)}function ir(e,t){var i=e;return vt(t,(function(e,t){return t.func.apply(t.thisArg,yt([e],t.args))}),i=e instanceof xi?e.value():i)}function nr(e,t,n){var r=e.length;if(r<2)return r?Xn(e[0]):[];for(var a=-1,s=i(r);++a<r;)for(var o=e[a],l=-1;++l<r;)l!=a&&(s[a]=en(s[a]||o,e[l],t,n));return Xn(on(s,1),t,n)}function rr(e,t,i){for(var n=-1,r=e.length,s=t.length,o={};++n<r;){var l=n<s?t[n]:a;i(o,e[n],l)}return o}function ar(e){return Cs(e)?e:[]}function sr(e){return"function"==typeof e?e:Bo}function or(e,t){return ws(e)?e:la(e,t)?[e]:Sa(Zs(e))}Oe=$t?function(e,t){return $t(e,"toString",{configurable:!0,enumerable:!1,value:xo(t),writable:!0})}:Bo;var lr=Nn;function hr(e,t,i){var n=e.length;return i=i===a?n:i,!t&&n<=i?e:Wn(e,t,i)}var ur=ei||function(e){return $e.clearTimeout(e)};function dr(e,t){return t?e.slice():(t=e.length,t=Ge?Ge(t):new e.constructor(t),e.copy(t),t)}function cr(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function fr(e,t){return t=t?cr(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)}function pr(e,t){if(e!==t){var i=e!==a,n=null===e,r=e==e,s=js(e),o=t!==a,l=null===t,h=t==t,u=js(t);if(!l&&!u&&!s&&t<e||s&&o&&h&&!l&&!u||n&&o&&h||!i&&h||!r)return 1;if(!n&&!s&&!u&&e<t||u&&i&&r&&!n&&!s||l&&i&&r||!o&&r||!h)return-1}return 0}function mr(e,t,n,r){for(var a=-1,s=e.length,o=n.length,l=-1,h=t.length,u=hi(s-o,0),d=i(h+u),c=!r;++l<h;)d[l]=t[l];for(;++a<o;)(c||a<s)&&(d[n[a]]=e[a]);for(;u--;)d[l++]=e[a++];return d}function gr(e,t,n,r){for(var a=-1,s=e.length,o=-1,l=n.length,h=-1,u=t.length,d=hi(s-l,0),c=i(d+u),f=!r;++a<d;)c[a]=e[a];for(var p=a;++h<u;)c[p+h]=t[h];for(;++o<l;)(f||a<s)&&(c[p+n[o]]=e[a++]);return c}function _r(e,t){var n=-1,r=e.length;for(t=t||i(r);++n<r;)t[n]=e[n];return t}function yr(e,t,i,n){for(var r=!i,s=(i=i||{},-1),o=t.length;++s<o;){var l=t[s],h=n?n(i[l],e[l],l,i,e):a;(r?Ki:Yi)(i,l,h=h===a?e[l]:h)}return i}function vr(e,t){return function(i,n){var r=ws(i)?ut:zi,a=t?t():{};return r(i,e,Zr(n,2),a)}}function Ar(e){return Nn((function(t,i){var n=-1,r=i.length,s=1<r?i[r-1]:a,o=2<r?i[2]:a;for(s=3<e.length&&"function"==typeof s?(r--,s):a,o&&oa(i[0],i[1],o)&&(s=r<3?a:s,r=1),t=l(t);++n<r;){var h=i[n];h&&e(t,h,n,s)}return t}))}function Er(e,t){return function(i,n){if(null!=i){if(!Ts(i))return e(i,n);for(var r=i.length,a=t?r:-1,s=l(i);(t?a--:++a<r)&&!1!==n(s[a],a,s););}return i}}function br(e){return function(t,i,n){for(var r=-1,a=l(t),s=n(t),o=s.length;o--;){var h=s[e?o:++r];if(!1===i(a[h],h,a))break}return t}}function wr(e){return function(t){var i=(n=Ht(t=Zs(t))?Jt(t):a)?n[0]:t.charAt(0),n=n?hr(n,1).join(""):t.slice(1);return i[e]()+n}}function Sr(e){return function(t){return vt(ko(bo(t).replace(Ue,"")),e,"")}}function Tr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Ii(e.prototype),n=e.apply(i,t);return Ds(n)?n:i}}function Cr(e){return function(t,i,n){var r,s=l(t);return-1<(Ts(t)||(r=Zr(i,3),t=ho(t),i=function(e){return r(s[e],e,s)}),i=e(t,i,n))?s[r?t[i]:i]:a}}function Lr(e){return Yr((function(t){var i=t.length,n=i,r=Di.prototype.thru;for(e&&t.reverse();n--;){var s=t[n];if("function"!=typeof s)throw new Se(h);r&&!u&&"wrapper"==Kr(s)&&(u=new Di([],!0))}for(n=u?n:i;++n<i;)var o=Kr(s=t[n]),l="wrapper"==o?Qr(s):a,u=l&&ha(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[Kr(l[0])].apply(u,l[3]):1==s.length&&ha(s)?u[o]():u.thru(s);return function(){var e=arguments,n=e[0];if(u&&1==e.length&&ws(n))return u.plant(n).value();for(var r=0,a=i?t[r].apply(this,e):n;++r<i;)a=t[r].call(this,a);return a}}))}function Rr(e,t,n,r,s,o,l,h,u,d){var f=t&c,p=1&t,m=2&t,g=24&t,_=512&t,y=m?a:Tr(e);return function c(){for(var v,A,E,b=i(E=arguments.length),w=E;w--;)b[w]=arguments[w];return g&&(A=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(b,v=Jr(c))),r&&(b=mr(b,r,s,g)),o&&(b=gr(b,o,l,g)),E-=A,g&&E<d?(A=zt(b,v),Fr(e,t,Rr,c.placeholder,n,b,A,h,u,d-E)):(v=p?n:this,A=m?v[e]:e,E=b.length,h?b=function(e,t){for(var i=e.length,n=ui(t.length,i),r=_r(e);n--;){var s=t[n];e[n]=sa(s,i)?r[s]:a}return e}(b,h):_&&1<E&&b.reverse(),f&&u<E&&(b.length=u),(A=this&&this!==$e&&this instanceof c?y||Tr(A):A).apply(v,b))}}function Ir(e,t){return function(i,n){return r=e,a=t(n),s={},un(i,(function(e,t,i){r(s,a(e),t,i)})),s;var r,a,s}}function kr(e,t){return function(i,n){var r;if(i===a&&n===a)return t;if(i!==a&&(r=i),n!==a){if(r===a)return n;n=("string"==typeof i||"string"==typeof n?(i=qn(i),qn):(i=Zn(i),Zn))(n),r=e(i,n)}return r}}function Pr(e){return Yr((function(t){return t=_t(t,Ft(Zr())),Nn((function(i){var n=this;return e(t,(function(e){return ht(e,n,i)}))}))}))}function Dr(e,t){var i=(t=t===a?" ":qn(t)).length;return i<2?i?Un(t,e):t:(i=Un(t,ni(e/Kt(t))),Ht(t)?hr(Jt(i),0,e).join(""):i.slice(0,e))}function xr(e){return function(t,n,r){r&&"number"!=typeof r&&oa(t,n,r)&&(n=r=a),t=Ws(t),n===a?(n=t,t=0):n=Ws(n);for(var s=t,o=r=r===a?t<n?1:-1:Ws(r),l=e,h=-1,u=hi(ni((n-s)/(o||1)),0),d=i(u);u--;)d[l?u:++h]=s,s+=o;return d}}function Mr(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=Ks(t),i=Ks(i)),e(t,i)}}function Fr(e,t,i,n,r,s,o,l,h,u){var d=8&t;return 4&(t=(t|(d?32:64))&~(d?64:32))||(t&=-4),r=[e,t,r,d?s:a,d?o:a,d?a:s,d?a:o,l,h,u],s=i.apply(a,r),ha(e)&&_a(s,r),s.placeholder=n,Aa(s,e,t)}function Br(e){var t=o[e];return function(e,i){var n;return e=Ks(e),(i=null==i?0:ui(zs(i),292))&&si(e)?(n=(Zs(e)+"e").split("e"),+((n=(Zs(t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))):t(e)}}var Or=_i&&1/Qt(new _i([,-0]))[1]==1/0?function(e){return new _i(e)}:Vo;function Ur(e){return function(t){var i,n,r,a=ia(t);return a==S?Yt(t):a==I?(a=t,i=-1,n=Array(a.size),a.forEach((function(e){n[++i]=[e,e]})),n):_t(e(r=t),(function(e){return[e,r[e]]}))}}function Nr(e,t,n,r,s,o,l,u){var f,p,m,g,_,y,v,A,E,b,w,S,T,C=2&t;if(C||"function"==typeof e)return(f=r?r.length:0)||(t&=-97,r=s=a),l=l===a?l:hi(zs(l),0),u=u===a?u:zs(u),f-=s?s.length:0,64&t&&(m=r,g=s,r=s=a),m=[e,t,n,r,s,m,g,o,l,u],(p=C?a:Qr(e))&&(g=p,A=(v=(l=(o=m)[1])|(y=g[1]))<131,E=y==c&&8==l||y==c&&256==l&&o[7].length<=g[8]||384==y&&g[7].length<=g[8]&&8==l,A||E)&&(1&y&&(o[2]=g[2],v|=1&l?0:4),(A=g[3])&&(_=o[3],o[3]=_?mr(_,A,g[4]):A,o[4]=_?zt(o[3],d):g[4]),(A=g[5])&&(_=o[5],o[5]=_?gr(_,A,g[6]):A,o[6]=_?zt(o[5],d):g[6]),(A=g[7])&&(o[7]=A),y&c&&(o[8]=null==o[8]?g[8]:ui(o[8],g[8])),null==o[9]&&(o[9]=g[9]),o[0]=g[0],o[1]=v),e=m[0],t=m[1],n=m[2],r=m[3],s=m[4],!(u=m[9]=m[9]===a?C?0:e.length:hi(m[9]-f,0))&&24&t&&(t&=-25),E=t&&1!=t?8==t||16==t?function(e,t,n){var r=Tr(e);return function s(){for(var o=arguments.length,l=i(o),h=o,u=Jr(s);h--;)l[h]=arguments[h];return(o-=(u=o<3&&l[0]!==u&&l[o-1]!==u?[]:zt(l,u)).length)<n?Fr(e,t,Rr,s.placeholder,a,l,u,a,a,n-o):ht(this&&this!==$e&&this instanceof s?r:e,this,l)}}(e,t,u):32!=t&&33!=t||s.length?Rr.apply(a,m):function(e,t,n,r){var a=1&t,s=Tr(e);return function t(){for(var o=-1,l=arguments.length,h=-1,u=r.length,d=i(u+l),c=this&&this!==$e&&this instanceof t?s:e;++h<u;)d[h]=r[h];for(;l--;)d[h++]=arguments[++o];return ht(c,a?n:this,d)}}(e,t,n,r):(w=n,S=1&t,T=Tr(b=e),function e(){return(this&&this!==$e&&this instanceof e?T:b).apply(S?w:this,arguments)}),Aa((p?Hn:_a)(E,m),e,t);throw new Se(h)}function jr(e,t,i,n){return e===a||vs(e,Le[i])&&!ke.call(n,i)?t:e}function Vr(e,t,i,n,r,s){return Ds(e)&&Ds(t)&&(s.set(t,e),Pn(e,t,a,Vr,s),s.delete(t)),e}function Gr(e){return Bs(e)?a:e}function Hr(e,t,i,n,r,s){var o=1&i,l=e.length;if(l!=(h=t.length)&&!(o&&l<h))return!1;var h=s.get(e),u=s.get(t);if(h&&u)return h==t&&u==e;var d=-1,c=!0,f=2&i?new Oi:a;for(s.set(e,t),s.set(t,e);++d<l;){var p,m=e[d],g=t[d];if((p=n?o?n(g,m,d,t,e,s):n(m,g,d,e,t,s):p)!==a){if(p)continue;c=!1;break}if(f){if(!Et(t,(function(e,t){return!Ot(f,t)&&(m===e||r(m,e,i,n,s))&&f.push(t)}))){c=!1;break}}else if(m!==g&&!r(m,g,i,n,s)){c=!1;break}}return s.delete(e),s.delete(t),c}function Yr(e){return va(pa(e,a,ka),e+"")}function Wr(e){return pn(e,ho,ea)}function zr(e){return pn(e,uo,ta)}var Qr=vi?function(e){return vi.get(e)}:Vo;function Kr(e){for(var t=e.name+"",i=Ai[t],n=ke.call(Ai,t)?i.length:0;n--;){var r=i[n],a=r.func;if(null==a||a==e)return r.name}return t}function Jr(e){return(ke.call(Ri,"placeholder")?Ri:e).placeholder}function Zr(){var e=(e=Ri.iteratee||Oo)===Oo?Tn:e;return arguments.length?e(arguments[0],arguments[1]):e}function qr(e,t){var i,n;return e=e.__data__,("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?e["string"==typeof t?"string":"hash"]:e.map}function Xr(e){for(var t=ho(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,ca(r)]}return t}function $r(e,t){return Sn(e=null==e?a:e[t])?e:a}var ea=ai?function(e){return null==e?[]:(e=l(e),pt(ai(e),(function(t){return Xe.call(e,t)})))}:Ko,ta=ai?function(e){for(var t=[];e;)yt(t,ea(e)),e=Ke(e);return t}:Ko,ia=mn;function na(e,t,i){for(var n=-1,r=(t=or(t,e)).length,a=!1;++n<r;){var s=Ta(t[n]);if(!(a=null!=e&&i(e,s)))break;e=e[s]}return a||++n!=r?a:!!(r=null==e?0:e.length)&&Ps(r)&&sa(s,r)&&(ws(e)||bs(e))}function ra(e){return"function"!=typeof e.constructor||da(e)?{}:Ii(Ke(e))}function aa(e){return ws(e)||bs(e)||!!(it&&e&&e[it])}function sa(e,t){var i=typeof e;return!!(t=null==t?f:t)&&("number"==i||"symbol"!=i&&ve.test(e))&&-1<e&&e%1==0&&e<t}function oa(e,t,i){var n;if(Ds(i))return("number"==(n=typeof t)?Ts(i)&&sa(t,i.length):"string"==n&&t in i)&&vs(i[t],e)}function la(e,t){var i;if(!ws(e))return"number"==(i=typeof e)||"symbol"==i||"boolean"==i||null==e||js(e)||te.test(e)||!ee.test(e)||null!=t&&e in l(t)}function ha(e){var t=Kr(e),i=Ri[t];return"function"==typeof i&&t in xi.prototype&&(e===i||(t=Qr(i))&&e===t[0])}(n&&ia(new n(new ArrayBuffer(1)))!=M||mi&&ia(new mi)!=S||gi&&ia(gi.resolve())!=L||_i&&ia(new _i)!=I||t&&ia(new t)!=D)&&(ia=function(e){var t=mn(e);if(e=(e=t==C?e.constructor:a)?Ca(e):"")switch(e){case Ei:return M;case bi:return S;case wi:return L;case Si:return I;case Ti:return D}return t});var ua=Re?Is:Jo;function da(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function ca(e){return e==e&&!Ds(e)}function fa(e,t){return function(i){return null!=i&&i[e]===t&&(t!==a||e in l(i))}}function pa(e,t,n){return t=hi(t===a?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=hi(r.length-t,0),o=i(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=i(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),ht(e,this,l)}}function ma(e,t){return t.length<2?e:fn(e,Wn(t,0,-1))}function ga(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _a=Ea(Hn),ya=ii||function(e,t){return $e.setTimeout(e,t)},va=Ea(Oe);function Aa(e,t,i){var n,r,a;return va(e,(r=(t=(t=e=t+="").match(le))?t[1].split(he):[],a=i,dt(g,(function(e){var t="_."+e[0];a&e[1]&&!mt(r,t)&&r.push(t)})),(i=(t=r.sort()).length)?(t[n=i-1]=(1<i?"& ":"")+t[n],t=t.join(2<i?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")):e))}function Ea(e){var t=0,i=0;return function(){var n=di(),r=16-(n-i);if(i=n,0<r){if(800<=++t)return arguments[0]}else t=0;return e.apply(a,arguments)}}function ba(e,t){var i=-1,n=e.length,r=n-1;for(t=t===a?n:t;++i<t;){var s=On(i,r),o=e[s];e[s]=e[i],e[i]=o}return e.length=t,e}wa=(ei=ps(ei=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,i,n,r){t.push(n?r.replace(ce,"$1"):i||e)})),t},(function(e){return 500===wa.size&&wa.clear(),e}))).cache;var wa,Sa=ei;function Ta(e){var t;return"string"==typeof e||js(e)?e:"0"==(t=e+"")&&1/e==-1/0?"-0":t}function Ca(e){if(null!=e){try{return Ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function La(e){var t;return e instanceof xi?e.clone():((t=new Di(e.__wrapped__,e.__chain__)).__actions__=_r(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t)}function Ra(e,t,i){var n=null==e?0:e.length;return n?((i=null==i?0:zs(i))<0&&(i=hi(n+i,0)),St(e,Zr(t,3),i)):-1}function Ia(e,t,i){var n,r=null==e?0:e.length;return r?(n=r-1,i!==a&&(n=zs(i),n=i<0?hi(r+n,0):ui(n,r-1)),St(e,Zr(t,3),n,!0)):-1}function ka(e){return null!=e&&e.length?on(e,1):[]}function Pa(e){return e&&e.length?e[0]:a}function Da(e){var t=null==e?0:e.length;return t?e[t-1]:a}function xa(e,t){return e&&e.length&&t&&t.length?Fn(e,t):e}n=Nn((function(e,t){return Cs(e)?en(e,on(t,1,Cs,!0)):[]})),gi=Nn((function(e,t){var i=Da(t);return Cs(i)&&(i=a),Cs(e)?en(e,on(t,1,Cs,!0),Zr(i,2)):[]})),t=Nn((function(e,t){var i=Da(t);return Cs(i)&&(i=a),Cs(e)?en(e,on(t,1,Cs,!0),a,i):[]})),Re=Nn((function(e){var t=_t(e,ar);return t.length&&t[0]===e[0]?vn(t):[]})),ii=Nn((function(e){var t=Da(e),i=_t(e,ar);return t===Da(i)?t=a:i.pop(),i.length&&i[0]===e[0]?vn(i,Zr(t,2)):[]})),Oe=Nn((function(e){var t=Da(e),i=_t(e,ar);return(t="function"==typeof t?t:a)&&i.pop(),i.length&&i[0]===e[0]?vn(i,a,t):[]})),ei=Nn(xa);var Ma=Yr((function(e,t){var i=null==e?0:e.length,n=Ji(e,t);return Bn(e,_t(t,(function(e){return sa(e,i)?+e:e})).sort(pr)),n}));function Fa(e){return null==e?e:pi.call(e)}var Ba=Nn((function(e){return Xn(on(e,1,Cs,!0))})),Oa=Nn((function(e){var t=Da(e);return Cs(t)&&(t=a),Xn(on(e,1,Cs,!0),Zr(t,2))})),Ua=Nn((function(e){var t="function"==typeof(t=Da(e))?t:a;return Xn(on(e,1,Cs,!0),a,t)}));function Na(e){var t;return e&&e.length?(t=0,e=pt(e,(function(e){return Cs(e)&&(t=hi(e.length,t),1)})),xt(t,(function(t){return _t(e,It(t))}))):[]}function ja(e,t){return e&&e.length?(e=Na(e),null==t?e:_t(e,(function(e){return ht(t,a,e)}))):[]}var Va=Nn((function(e,t){return Cs(e)?en(e,t):[]})),Ga=Nn((function(e){return nr(pt(e,Cs))})),Ha=Nn((function(e){var t=Da(e);return Cs(t)&&(t=a),nr(pt(e,Cs),Zr(t,2))})),Ya=Nn((function(e){var t="function"==typeof(t=Da(e))?t:a;return nr(pt(e,Cs),a,t)})),Wa=Nn(Na),za=Nn((function(e){var t="function"==typeof(t=1<(t=e.length)?e[t-1]:a)?(e.pop(),t):a;return ja(e,t)}));function Qa(e){return(e=Ri(e)).__chain__=!0,e}function Ka(e,t){return t(e)}var Ja=Yr((function(e){function t(t){return Ji(t,e)}var i=e.length,n=i?e[0]:0,r=this.__wrapped__;return!(1<i||this.__actions__.length)&&r instanceof xi&&sa(n)?((r=r.slice(n,+n+(i?1:0))).__actions__.push({func:Ka,args:[t],thisArg:a}),new Di(r,this.__chain__).thru((function(e){return i&&!e.length&&e.push(a),e}))):this.thru(t)})),Za=vr((function(e,t,i){ke.call(e,i)?++e[i]:Ki(e,i,1)})),qa=Cr(Ra),Xa=Cr(Ia);function $a(e,t){return(ws(e)?dt:tn)(e,Zr(t,3))}function es(e,t){return(ws(e)?ct:nn)(e,Zr(t,3))}var ts=vr((function(e,t,i){ke.call(e,i)?e[i].push(t):Ki(e,i,[t])})),is=Nn((function(e,t,n){var r=-1,a="function"==typeof t,s=Ts(e)?i(e.length):[];return tn(e,(function(e){s[++r]=a?ht(t,e,n):An(e,t,n)})),s})),ns=vr((function(e,t,i){Ki(e,i,t)}));function rs(e,t){return(ws(e)?_t:Rn)(e,Zr(t,3))}var as=vr((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]})),ss=Nn((function(e,t){var i;return null==e?[]:(1<(i=t.length)&&oa(e,t[0],t[1])?t=[]:2<i&&oa(t[0],t[1],t[2])&&(t=[t[0]]),xn(e,on(t,1),[]))})),os=ti||function(){return $e.Date.now()};function ls(e,t,i){return t=i?a:t,t=e&&null==t?e.length:t,Nr(e,c,a,a,a,a,t)}function hs(e,t){var i;if("function"!=typeof t)throw new Se(h);return e=zs(e),function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=a),i}}var us=Nn((function(e,t,i){var n,r=1;return i.length&&(n=zt(i,Jr(us)),r|=32),Nr(e,r,t,i,n)})),ds=Nn((function(e,t,i){var n,r=3;return i.length&&(n=zt(i,Jr(ds)),r|=32),Nr(t,r,e,i,n)}));function cs(e,t,i){var n,r,s,o,l,u,d=0,c=!1,f=!1,p=!0;if("function"!=typeof e)throw new Se(h);function m(t){var i=n,s=r;return n=r=a,d=t,o=e.apply(s,i)}function g(e){var i=e-u;return u===a||t<=i||i<0||f&&s<=e-d}function _(){var e,i=os();if(g(i))return y(i);l=ya(_,(e=t-(i-u),f?ui(e,s-(i-d)):e))}function y(e){return l=a,p&&n?m(e):(n=r=a,o)}function v(){var e=os(),i=g(e);if(n=arguments,r=this,u=e,i){if(l===a)return d=e=u,l=ya(_,t),c?m(e):o;if(f)return ur(l),l=ya(_,t),m(u)}return l===a&&(l=ya(_,t)),o}return t=Ks(t)||0,Ds(i)&&(c=!!i.leading,s=(f="maxWait"in i)?hi(Ks(i.maxWait)||0,t):s,p="trailing"in i?!!i.trailing:p),v.cancel=function(){l!==a&&ur(l),d=0,n=u=r=l=a},v.flush=function(){return l===a?o:y(os())},v}ti=Nn((function(e,t){return $i(e,1,t)}));var fs=Nn((function(e,t,i){return $i(e,Ks(t)||0,i)}));function ps(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Se(h);function i(){var n=arguments,r=t?t.apply(this,n):n[0],a=i.cache;return a.has(r)?a.get(r):(n=e.apply(this,n),i.cache=a.set(r,n)||a,n)}return i.cache=new(ps.Cache||Bi),i}function ms(e){if("function"!=typeof e)throw new Se(h);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ps.Cache=Bi,lr=lr((function(e,t){var i=(t=1==t.length&&ws(t[0])?_t(t[0],Ft(Zr())):_t(on(t,1),Ft(Zr()))).length;return Nn((function(n){for(var r=-1,a=ui(n.length,i);++r<a;)n[r]=t[r].call(this,n[r]);return ht(e,this,n)}))}));var gs=Nn((function(e,t){var i=zt(t,Jr(gs));return Nr(e,32,a,t,i)})),_s=Nn((function(e,t){var i=zt(t,Jr(_s));return Nr(e,64,a,t,i)})),ys=Yr((function(e,t){return Nr(e,256,a,a,a,t)}));function vs(e,t){return e===t||e!=e&&t!=t}var As=Mr(gn),Es=Mr((function(e,t){return t<=e})),bs=En(function(){return arguments}())?En:function(e){return xs(e)&&ke.call(e,"callee")&&!Xe.call(e,"callee")},ws=i.isArray,Ss=nt?Ft(nt):function(e){return xs(e)&&mn(e)==x};function Ts(e){return null!=e&&Ps(e.length)&&!Is(e)}function Cs(e){return xs(e)&&Ts(e)}var Ls=Ce||Jo;function Rs(e){var t;return!!xs(e)&&((t=mn(e))==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Bs(e))}function Is(e){return!!Ds(e)&&((e=mn(e))==b||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function ks(e){return"number"==typeof e&&e==zs(e)}function Ps(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=f}function Ds(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function xs(e){return null!=e&&"object"==typeof e}Ce=rt?Ft(rt):function(e){return xs(e)&&mn(e)==A};var Ms=at?Ft(at):function(e){return xs(e)&&ia(e)==S};function Fs(e){return"number"==typeof e||xs(e)&&mn(e)==T}function Bs(e){return!(!xs(e)||mn(e)!=C)&&(null===(e=Ke(e))||"function"==typeof(e=ke.call(e,"constructor")&&e.constructor)&&e instanceof e&&Ie.call(e)==Me)}var Os=st?Ft(st):function(e){return xs(e)&&mn(e)==R},Us=ot?Ft(ot):function(e){return xs(e)&&ia(e)==I};function Ns(e){return"string"==typeof e||!ws(e)&&xs(e)&&mn(e)==k}function js(e){return"symbol"==typeof e||xs(e)&&mn(e)==P}var Vs=lt?Ft(lt):function(e){return xs(e)&&Ps(e.length)&&!!ze[mn(e)]},Gs=Mr(Ln),Hs=Mr((function(e,t){return e<=t}));function Ys(e){if(!e)return[];if(Ts(e))return(Ns(e)?Jt:_r)(e);if(bt&&e[bt]){for(var t,i=e[bt](),n=[];!(t=i.next()).done;)n.push(t.value);return n}var r=ia(e);return(r==S?Yt:r==I?Qt:vo)(e)}function Ws(e){return e?(e=Ks(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function zs(e){var t=(e=Ws(e))%1;return e==e?t?e-t:e:0}function Qs(e){return e?Zi(zs(e),0,m):0}function Ks(e){if("number"==typeof e)return e;if(js(e))return p;if("string"!=typeof(e=Ds(e)?Ds(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=Mt(e);var t=ge.test(e);return t||ye.test(e)?Ze(e.slice(2),t?2:8):me.test(e)?p:+e}function Js(e){return yr(e,uo(e))}function Zs(e){return null==e?"":qn(e)}var qs=Ar((function(e,t){if(da(t)||Ts(t))yr(t,ho(t),e);else for(var i in t)ke.call(t,i)&&Yi(e,i,t[i])})),Xs=Ar((function(e,t){yr(t,uo(t),e)})),$s=Ar((function(e,t,i,n){yr(t,uo(t),e,n)})),eo=Ar((function(e,t,i,n){yr(t,ho(t),e,n)})),to=Yr(Ji),io=Nn((function(e,t){e=l(e);var i=-1,n=t.length,r=2<n?t[2]:a;for(r&&oa(t[0],t[1],r)&&(n=1);++i<n;)for(var s=t[i],o=uo(s),h=-1,u=o.length;++h<u;){var d=o[h],c=e[d];(c===a||vs(c,Le[d])&&!ke.call(e,d))&&(e[d]=s[d])}return e})),no=Nn((function(e){return e.push(a,Vr),ht(fo,a,e)}));function ro(e,t,i){return(e=null==e?a:fn(e,t))===a?i:e}function ao(e,t){return null!=e&&na(e,t,yn)}var so=Ir((function(e,t,i){e[t=null!=t&&"function"!=typeof t.toString?xe.call(t):t]=i}),xo(Bo)),oo=Ir((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=xe.call(t)),ke.call(e,t)?e[t].push(i):e[t]=[i]}),Zr),lo=Nn(An);function ho(e){return(Ts(e)?Ni:Cn)(e)}function uo(e){return Ts(e)?Ni(e,!0):function(e){if(!Ds(e)){var t=e,i=[];if(null!=t)for(var n in l(t))i.push(n);return i}var r,a=da(e),s=[];for(r in e)("constructor"!=r||!a&&ke.call(e,r))&&s.push(r);return s}(e)}var co=Ar((function(e,t,i){Pn(e,t,i)})),fo=Ar((function(e,t,i,n){Pn(e,t,i,n)})),po=Yr((function(e,t){var i={};if(null!=e)for(var n=!1,r=(t=_t(t,(function(t){return t=or(t,e),n=n||1<t.length,t})),yr(e,zr(e),i),n&&(i=qi(i,7,Gr)),t.length);r--;)$n(i,t[r]);return i})),mo=Yr((function(e,t){return null==e?{}:Mn(i=e,t,(function(e,t){return ao(i,t)}));var i}));function go(e,t){var i;return null==e?{}:(i=_t(zr(e),(function(e){return[e]})),t=Zr(t),Mn(e,i,(function(e,i){return t(e,i[0])})))}var _o=Ur(ho),yo=Ur(uo);function vo(e){return null==e?[]:Bt(e,ho(e))}var Ao=Sr((function(e,t,i){return t=t.toLowerCase(),e+(i?Eo(t):t)}));function Eo(e){return Io(Zs(e).toLowerCase())}function bo(e){return(e=Zs(e))&&e.replace(Ae,jt).replace(Ne,"")}var wo=Sr((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),So=Sr((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),To=wr("toLowerCase"),Co=Sr((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()})),Lo=Sr((function(e,t,i){return e+(i?" ":"")+Io(t)})),Ro=Sr((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),Io=wr("toUpperCase");function ko(e,t,i){return e=Zs(e),(t=i?a:t)===a?(i=e,He.test(i)?e.match(Ve)||[]:e.match(ue)||[]):e.match(t)||[]}var Po=Nn((function(e,t){try{return ht(e,a,t)}catch(e){return Rs(e)?e:new r(e)}})),Do=Yr((function(e,t){return dt(t,(function(t){t=Ta(t),Ki(e,t,us(e[t],e))})),e}));function xo(e){return function(){return e}}var Mo=Lr(),Fo=Lr(!0);function Bo(e){return e}function Oo(e){return Tn("function"==typeof e?e:qi(e,1))}var Uo=Nn((function(e,t){return function(i){return An(i,e,t)}})),No=Nn((function(e,t){return function(i){return An(e,i,t)}}));function jo(e,t,i){var n=ho(t),r=cn(t,n),a=(null!=i||Ds(t)&&(r.length||!n.length)||(i=t,t=e,e=this,r=cn(t,ho(t))),!(Ds(i)&&"chain"in i&&!i.chain)),s=Is(e);return dt(r,(function(i){var n=t[i];e[i]=n,s&&(e.prototype[i]=function(){var t,i=this.__chain__;return a||i?(((t=e(this.__wrapped__)).__actions__=_r(this.__actions__)).push({func:n,args:arguments,thisArg:e}),t.__chain__=i,t):n.apply(e,yt([this.value()],arguments))})})),e}function Vo(){}var Go=Pr(_t),Ho=Pr(ft),Yo=Pr(Et);function Wo(e){return la(e)?It(Ta(e)):(t=e,function(e){return fn(e,t)});var t}var zo=xr(),Qo=xr(!0);function Ko(){return[]}function Jo(){return!1}var Zo,qo=kr((function(e,t){return e+t}),0),Xo=Br("ceil"),$o=kr((function(e,t){return e/t}),1),el=Br("floor"),tl=kr((function(e,t){return e*t}),1),il=Br("round"),nl=kr((function(e,t){return e-t}),0);return Ri.after=function(e,t){if("function"!=typeof t)throw new Se(h);return e=zs(e),function(){if(--e<1)return t.apply(this,arguments)}},Ri.ary=ls,Ri.assign=qs,Ri.assignIn=Xs,Ri.assignInWith=$s,Ri.assignWith=eo,Ri.at=to,Ri.before=hs,Ri.bind=us,Ri.bindAll=Do,Ri.bindKey=ds,Ri.castArray=function(){var e;return arguments.length?ws(e=arguments[0])?e:[e]:[]},Ri.chain=Qa,Ri.chunk=function(e,t,n){t=(n?oa(e,t,n):t===a)?1:hi(zs(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var s=0,o=0,l=i(ni(r/t));s<r;)l[o++]=Wn(e,s,s+=t);return l},Ri.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,r=[];++t<i;){var a=e[t];a&&(r[n++]=a)}return r},Ri.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return yt(ws(n)?_r(n):[n],on(t,1))},Ri.cond=function(e){var t=null==e?0:e.length,i=Zr();return e=t?_t(e,(function(e){if("function"!=typeof e[1])throw new Se(h);return[i(e[0]),e[1]]})):[],Nn((function(i){for(var n=-1;++n<t;){var r=e[n];if(ht(r[0],this,i))return ht(r[1],this,i)}}))},Ri.conforms=function(e){return t=qi(e,1),i=ho(t),function(e){return Xi(e,t,i)};var t,i},Ri.constant=xo,Ri.countBy=Za,Ri.create=function(e,t){return e=Ii(e),null==t?e:Qi(e,t)},Ri.curry=function e(t,i,n){return(t=Nr(t,8,a,a,a,a,a,i=n?a:i)).placeholder=e.placeholder,t},Ri.curryRight=function e(t,i,n){return(t=Nr(t,16,a,a,a,a,a,i=n?a:i)).placeholder=e.placeholder,t},Ri.debounce=cs,Ri.defaults=io,Ri.defaultsDeep=no,Ri.defer=ti,Ri.delay=fs,Ri.difference=n,Ri.differenceBy=gi,Ri.differenceWith=t,Ri.drop=function(e,t,i){var n=null==e?0:e.length;return n?Wn(e,(t=i||t===a?1:zs(t))<0?0:t,n):[]},Ri.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?Wn(e,0,(t=n-(t=i||t===a?1:zs(t)))<0?0:t):[]},Ri.dropRightWhile=function(e,t){return e&&e.length?tr(e,Zr(t,3),!0,!0):[]},Ri.dropWhile=function(e,t){return e&&e.length?tr(e,Zr(t,3),!0):[]},Ri.fill=function(e,t,i,n){if(!(h=null==e?0:e.length))return[];i&&"number"!=typeof i&&oa(e,t,i)&&(i=0,n=h);var r=e,s=t,o=i,l=n,h=r.length;for((o=zs(o))<0&&(o=h<-o?0:h+o),(l=l===a||h<l?h:zs(l))<0&&(l+=h),l=l<o?0:Qs(l);o<l;)r[o++]=s;return r},Ri.filter=function(e,t){return(ws(e)?pt:sn)(e,Zr(t,3))},Ri.flatMap=function(e,t){return on(rs(e,t),1)},Ri.flatMapDeep=function(e,t){return on(rs(e,t),1/0)},Ri.flatMapDepth=function(e,t,i){return i=i===a?1:zs(i),on(rs(e,t),i)},Ri.flatten=ka,Ri.flattenDeep=function(e){return null!=e&&e.length?on(e,1/0):[]},Ri.flattenDepth=function(e,t){return null!=e&&e.length?on(e,t=t===a?1:zs(t)):[]},Ri.flip=function(e){return Nr(e,512)},Ri.flow=Mo,Ri.flowRight=Fo,Ri.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var r=e[t];n[r[0]]=r[1]}return n},Ri.functions=function(e){return null==e?[]:cn(e,ho(e))},Ri.functionsIn=function(e){return null==e?[]:cn(e,uo(e))},Ri.groupBy=ts,Ri.initial=function(e){return null!=e&&e.length?Wn(e,0,-1):[]},Ri.intersection=Re,Ri.intersectionBy=ii,Ri.intersectionWith=Oe,Ri.invert=so,Ri.invertBy=oo,Ri.invokeMap=is,Ri.iteratee=Oo,Ri.keyBy=ns,Ri.keys=ho,Ri.keysIn=uo,Ri.map=rs,Ri.mapKeys=function(e,t){var i={};return t=Zr(t,3),un(e,(function(e,n,r){Ki(i,t(e,n,r),e)})),i},Ri.mapValues=function(e,t){var i={};return t=Zr(t,3),un(e,(function(e,n,r){Ki(i,n,t(e,n,r))})),i},Ri.matches=function(e){return In(qi(e,1))},Ri.matchesProperty=function(e,t){return kn(e,qi(t,1))},Ri.memoize=ps,Ri.merge=co,Ri.mergeWith=fo,Ri.method=Uo,Ri.methodOf=No,Ri.mixin=jo,Ri.negate=ms,Ri.nthArg=function(e){return e=zs(e),Nn((function(t){return Dn(t,e)}))},Ri.omit=po,Ri.omitBy=function(e,t){return go(e,ms(Zr(t)))},Ri.once=function(e){return hs(2,e)},Ri.orderBy=function(e,t,i,n){return null==e?[]:xn(e,t=ws(t)?t:null==t?[]:[t],i=ws(i=n?a:i)?i:null==i?[]:[i])},Ri.over=Go,Ri.overArgs=lr,Ri.overEvery=Ho,Ri.overSome=Yo,Ri.partial=gs,Ri.partialRight=_s,Ri.partition=as,Ri.pick=mo,Ri.pickBy=go,Ri.property=Wo,Ri.propertyOf=function(e){return function(t){return null==e?a:fn(e,t)}},Ri.pull=ei,Ri.pullAll=xa,Ri.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Fn(e,t,Zr(i,2)):e},Ri.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?Fn(e,t,a,i):e},Ri.pullAt=Ma,Ri.range=zo,Ri.rangeRight=Qo,Ri.rearg=ys,Ri.reject=function(e,t){return(ws(e)?pt:sn)(e,ms(Zr(t,3)))},Ri.remove=function(e,t){var i=[];if(e&&e.length){var n=-1,r=[],a=e.length;for(t=Zr(t,3);++n<a;){var s=e[n];t(s,n,e)&&(i.push(s),r.push(n))}Bn(e,r)}return i},Ri.rest=function(e,t){if("function"!=typeof e)throw new Se(h);return Nn(e,t=t===a?t:zs(t))},Ri.reverse=Fa,Ri.sampleSize=function(e,t,i){return t=(i?oa(e,t,i):t===a)?1:zs(t),(ws(e)?Vi:Vn)(e,t)},Ri.set=function(e,t,i){return null==e?e:Gn(e,t,i)},Ri.setWith=function(e,t,i,n){return n="function"==typeof n?n:a,null==e?e:Gn(e,t,i,n)},Ri.shuffle=function(e){return(ws(e)?Gi:Yn)(e)},Ri.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i=i&&"number"!=typeof i&&oa(e,t,i)?(t=0,n):(t=null==t?0:zs(t),i===a?n:zs(i)),Wn(e,t,i)):[]},Ri.sortBy=ss,Ri.sortedUniq=function(e){return e&&e.length?Jn(e):[]},Ri.sortedUniqBy=function(e,t){return e&&e.length?Jn(e,Zr(t,2)):[]},Ri.split=function(e,t,i){return i&&"number"!=typeof i&&oa(e,t,i)&&(t=i=a),(i=i===a?m:i>>>0)?(e=Zs(e))&&("string"==typeof t||null!=t&&!Os(t))&&!(t=qn(t))&&Ht(e)?hr(Jt(e),0,i):e.split(t,i):[]},Ri.spread=function(e,t){if("function"!=typeof e)throw new Se(h);return t=null==t?0:hi(zs(t),0),Nn((function(i){var n=i[t];return i=hr(i,0,t),n&&yt(i,n),ht(e,this,i)}))},Ri.tail=function(e){var t=null==e?0:e.length;return t?Wn(e,1,t):[]},Ri.take=function(e,t,i){return e&&e.length?Wn(e,0,(t=i||t===a?1:zs(t))<0?0:t):[]},Ri.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?Wn(e,(t=n-(t=i||t===a?1:zs(t)))<0?0:t,n):[]},Ri.takeRightWhile=function(e,t){return e&&e.length?tr(e,Zr(t,3),!1,!0):[]},Ri.takeWhile=function(e,t){return e&&e.length?tr(e,Zr(t,3)):[]},Ri.tap=function(e,t){return t(e),e},Ri.throttle=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new Se(h);return Ds(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),cs(e,t,{leading:n,maxWait:t,trailing:r})},Ri.thru=Ka,Ri.toArray=Ys,Ri.toPairs=_o,Ri.toPairsIn=yo,Ri.toPath=function(e){return ws(e)?_t(e,Ta):js(e)?[e]:_r(Sa(Zs(e)))},Ri.toPlainObject=Js,Ri.transform=function(e,t,i){var n,r=ws(e),a=r||Ls(e)||Vs(e);return t=Zr(t,4),null==i&&(n=e&&e.constructor,i=a?r?new n:[]:Ds(e)&&Is(n)?Ii(Ke(e)):{}),(a?dt:un)(e,(function(e,n,r){return t(i,e,n,r)})),i},Ri.unary=function(e){return ls(e,1)},Ri.union=Ba,Ri.unionBy=Oa,Ri.unionWith=Ua,Ri.uniq=function(e){return e&&e.length?Xn(e):[]},Ri.uniqBy=function(e,t){return e&&e.length?Xn(e,Zr(t,2)):[]},Ri.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?Xn(e,a,t):[]},Ri.unset=function(e,t){return null==e||$n(e,t)},Ri.unzip=Na,Ri.unzipWith=ja,Ri.update=function(e,t,i){return null==e?e:er(e,t,sr(i))},Ri.updateWith=function(e,t,i,n){return n="function"==typeof n?n:a,null==e?e:er(e,t,sr(i),n)},Ri.values=vo,Ri.valuesIn=function(e){return null==e?[]:Bt(e,uo(e))},Ri.without=Va,Ri.words=ko,Ri.wrap=function(e,t){return gs(sr(t),e)},Ri.xor=Ga,Ri.xorBy=Ha,Ri.xorWith=Ya,Ri.zip=Wa,Ri.zipObject=function(e,t){return rr(e||[],t||[],Yi)},Ri.zipObjectDeep=function(e,t){return rr(e||[],t||[],Gn)},Ri.zipWith=za,Ri.entries=_o,Ri.entriesIn=yo,Ri.extend=Xs,Ri.extendWith=$s,jo(Ri,Ri),Ri.add=qo,Ri.attempt=Po,Ri.camelCase=Ao,Ri.capitalize=Eo,Ri.ceil=Xo,Ri.clamp=function(e,t,i){return i===a&&(i=t,t=a),i!==a&&(i=(i=Ks(i))==i?i:0),t!==a&&(t=(t=Ks(t))==t?t:0),Zi(Ks(e),t,i)},Ri.clone=function(e){return qi(e,4)},Ri.cloneDeep=function(e){return qi(e,5)},Ri.cloneDeepWith=function(e,t){return qi(e,5,t="function"==typeof t?t:a)},Ri.cloneWith=function(e,t){return qi(e,4,t="function"==typeof t?t:a)},Ri.conformsTo=function(e,t){return null==t||Xi(e,t,ho(t))},Ri.deburr=bo,Ri.defaultTo=function(e,t){return null==e||e!=e?t:e},Ri.divide=$o,Ri.endsWith=function(e,t,i){e=Zs(e),t=qn(t);var n=e.length;return n=i=i===a?n:Zi(zs(i),0,n),0<=(i-=t.length)&&e.slice(i,n)==t},Ri.eq=vs,Ri.escape=function(e){return(e=Zs(e))&&Z.test(e)?e.replace(K,Vt):e},Ri.escapeRegExp=function(e){return(e=Zs(e))&&re.test(e)?e.replace(ne,"\\$&"):e},Ri.every=function(e,t,i){return(ws(e)?ft:rn)(e,Zr(t=i&&oa(e,t,i)?a:t,3))},Ri.find=qa,Ri.findIndex=Ra,Ri.findKey=function(e,t){return wt(e,Zr(t,3),un)},Ri.findLast=Xa,Ri.findLastIndex=Ia,Ri.findLastKey=function(e,t){return wt(e,Zr(t,3),dn)},Ri.floor=el,Ri.forEach=$a,Ri.forEachRight=es,Ri.forIn=function(e,t){return null==e?e:ln(e,Zr(t,3),uo)},Ri.forInRight=function(e,t){return null==e?e:hn(e,Zr(t,3),uo)},Ri.forOwn=function(e,t){return e&&un(e,Zr(t,3))},Ri.forOwnRight=function(e,t){return e&&dn(e,Zr(t,3))},Ri.get=ro,Ri.gt=As,Ri.gte=Es,Ri.has=function(e,t){return null!=e&&na(e,t,_n)},Ri.hasIn=ao,Ri.head=Pa,Ri.identity=Bo,Ri.includes=function(e,t,i,n){return e=Ts(e)?e:vo(e),i=i&&!n?zs(i):0,n=e.length,i<0&&(i=hi(n+i,0)),Ns(e)?i<=n&&-1<e.indexOf(t,i):!!n&&-1<Tt(e,t,i)},Ri.indexOf=function(e,t,i){var n=null==e?0:e.length;return n?Tt(e,t,e=(e=null==i?0:zs(i))<0?hi(n+e,0):e):-1},Ri.inRange=function(e,t,i){return t=Ws(t),i===a?(i=t,t=0):i=Ws(i),(e=e=Ks(e))>=ui(t,i)&&e<hi(t,i)},Ri.invoke=lo,Ri.isArguments=bs,Ri.isArray=ws,Ri.isArrayBuffer=Ss,Ri.isArrayLike=Ts,Ri.isArrayLikeObject=Cs,Ri.isBoolean=function(e){return!0===e||!1===e||xs(e)&&mn(e)==v},Ri.isBuffer=Ls,Ri.isDate=Ce,Ri.isElement=function(e){return xs(e)&&1===e.nodeType&&!Bs(e)},Ri.isEmpty=function(e){if(null!=e){if(Ts(e)&&(ws(e)||"string"==typeof e||"function"==typeof e.splice||Ls(e)||Vs(e)||bs(e)))return!e.length;var t,i=ia(e);if(i==S||i==I)return!e.size;if(da(e))return!Cn(e).length;for(t in e)if(ke.call(e,t))return!1}return!0},Ri.isEqual=function(e,t){return bn(e,t)},Ri.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:a)?i(e,t):a;return n===a?bn(e,t,a,i):!!n},Ri.isError=Rs,Ri.isFinite=function(e){return"number"==typeof e&&si(e)},Ri.isFunction=Is,Ri.isInteger=ks,Ri.isLength=Ps,Ri.isMap=Ms,Ri.isMatch=function(e,t){return e===t||wn(e,t,Xr(t))},Ri.isMatchWith=function(e,t,i){return i="function"==typeof i?i:a,wn(e,t,Xr(t),i)},Ri.isNaN=function(e){return Fs(e)&&e!=+e},Ri.isNative=function(e){if(ua(e))throw new r("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Sn(e)},Ri.isNil=function(e){return null==e},Ri.isNull=function(e){return null===e},Ri.isNumber=Fs,Ri.isObject=Ds,Ri.isObjectLike=xs,Ri.isPlainObject=Bs,Ri.isRegExp=Os,Ri.isSafeInteger=function(e){return ks(e)&&-f<=e&&e<=f},Ri.isSet=Us,Ri.isString=Ns,Ri.isSymbol=js,Ri.isTypedArray=Vs,Ri.isUndefined=function(e){return e===a},Ri.isWeakMap=function(e){return xs(e)&&ia(e)==D},Ri.isWeakSet=function(e){return xs(e)&&"[object WeakSet]"==mn(e)},Ri.join=function(e,t){return null==e?"":oi.call(e,t)},Ri.kebabCase=wo,Ri.last=Da,Ri.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n;if(i!==a&&(r=(r=zs(i))<0?hi(n+r,0):ui(r,n-1)),t!=t)return St(e,Lt,r,!0);for(var s=e,o=t,l=r+1;l--;)if(s[l]===o)return l;return l},Ri.lowerCase=So,Ri.lowerFirst=To,Ri.lt=Gs,Ri.lte=Hs,Ri.max=function(e){return e&&e.length?an(e,Bo,gn):a},Ri.maxBy=function(e,t){return e&&e.length?an(e,Zr(t,2),gn):a},Ri.mean=function(e){return Rt(e,Bo)},Ri.meanBy=function(e,t){return Rt(e,Zr(t,2))},Ri.min=function(e){return e&&e.length?an(e,Bo,Ln):a},Ri.minBy=function(e,t){return e&&e.length?an(e,Zr(t,2),Ln):a},Ri.stubArray=Ko,Ri.stubFalse=Jo,Ri.stubObject=function(){return{}},Ri.stubString=function(){return""},Ri.stubTrue=function(){return!0},Ri.multiply=tl,Ri.nth=function(e,t){return e&&e.length?Dn(e,zs(t)):a},Ri.noConflict=function(){return $e._===this&&($e._=Fe),this},Ri.noop=Vo,Ri.now=os,Ri.pad=function(e,t,i){e=Zs(e);var n=(t=zs(t))?Kt(e):0;return!t||t<=n?e:Dr(ri(t=(t-n)/2),i)+e+Dr(ni(t),i)},Ri.padEnd=function(e,t,i){e=Zs(e);var n=(t=zs(t))?Kt(e):0;return t&&n<t?e+Dr(t-n,i):e},Ri.padStart=function(e,t,i){e=Zs(e);var n=(t=zs(t))?Kt(e):0;return t&&n<t?Dr(t-n,i)+e:e},Ri.parseInt=function(e,t,i){return t=i||null==t?0:t&&+t,ci(Zs(e).replace(ae,""),t||0)},Ri.random=function(e,t,i){var n;return i&&"boolean"!=typeof i&&oa(e,t,i)&&(t=i=a),i===a&&("boolean"==typeof t?(i=t,t=a):"boolean"==typeof e&&(i=e,e=a)),e===a&&t===a?(e=0,t=1):(e=Ws(e),t===a?(t=e,e=0):t=Ws(t)),t<e&&(n=e,e=t,t=n),i||e%1||t%1?(n=fi(),ui(e+n*(t-e+Je("1e-"+((n+"").length-1))),t)):On(e,t)},Ri.reduce=function(e,t,i){var n=ws(e)?vt:Pt,r=arguments.length<3;return n(e,Zr(t,4),i,r,tn)},Ri.reduceRight=function(e,t,i){var n=ws(e)?At:Pt,r=arguments.length<3;return n(e,Zr(t,4),i,r,nn)},Ri.repeat=function(e,t,i){return t=(i?oa(e,t,i):t===a)?1:zs(t),Un(Zs(e),t)},Ri.replace=function(){var e=arguments,t=Zs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Ri.result=function(e,t,i){var n=-1,r=(t=or(t,e)).length;for(r||(r=1,e=a);++n<r;){var s=null==e?a:e[Ta(t[n])];s===a&&(n=r,s=i),e=Is(s)?s.call(e):s}return e},Ri.round=il,Ri.runInContext=e,Ri.sample=function(e){return(ws(e)?ji:jn)(e)},Ri.size=function(e){var t;return null==e?0:Ts(e)?Ns(e)?Kt(e):e.length:(t=ia(e))==S||t==I?e.size:Cn(e).length},Ri.snakeCase=Co,Ri.some=function(e,t,i){return(ws(e)?Et:zn)(e,Zr(t=i&&oa(e,t,i)?a:t,3))},Ri.sortedIndex=function(e,t){return Qn(e,t)},Ri.sortedIndexBy=function(e,t,i){return Kn(e,t,Zr(i,2))},Ri.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=Qn(e,t);if(n<i&&vs(e[n],t))return n}return-1},Ri.sortedLastIndex=function(e,t){return Qn(e,t,!0)},Ri.sortedLastIndexBy=function(e,t,i){return Kn(e,t,Zr(i,2),!0)},Ri.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var i=Qn(e,t,!0)-1;if(vs(e[i],t))return i}return-1},Ri.startCase=Lo,Ri.startsWith=function(e,t,i){return e=Zs(e),i=null==i?0:Zi(zs(i),0,e.length),t=qn(t),e.slice(i,i+t.length)==t},Ri.subtract=nl,Ri.sum=function(e){return e&&e.length?Dt(e,Bo):0},Ri.sumBy=function(e,t){return e&&e.length?Dt(e,Zr(t,2)):0},Ri.template=function(e,t,i){var n,o,l=Ri.templateSettings;i&&oa(e,t,i)&&(t=a),e=Zs(e),t=$s({},t,l,jr);var h=ho(i=$s({},t.imports,l.imports,jr)),u=Bt(i,h),d=0,c=(l=t.interpolate||Ee,"__p += '"),f=(i=se((t.escape||Ee).source+"|"+l.source+"|"+(l===$?fe:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),"//# sourceURL="+(ke.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++We+"]")+"\n");if(e.replace(i,(function(t,i,r,a,s,l){return r=r||a,c+=e.slice(d,l).replace(be,Gt),i&&(n=!0,c+="' +\n__e("+i+") +\n'"),s&&(o=!0,c+="';\n"+s+";\n__p += '"),r&&(c+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=l+t.length,t})),c+="';\n",l=ke.call(t,"variable")&&t.variable){if(de.test(l))throw new r("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";if(c=(o?c.replace(Y,""):c).replace(W,"$1").replace(z,"$1;"),c="function("+(l||"obj")+") {\n"+(l?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(n?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}",(i=Po((function(){return s(h,f+"return "+c).apply(a,u)}))).source=c,Rs(i))throw i;return i},Ri.times=function(e,t){if((e=zs(e))<1||f<e)return[];var i=m,n=ui(e,m);for(t=Zr(t),e-=m,n=xt(n,t);++i<e;)t(i);return n},Ri.toFinite=Ws,Ri.toInteger=zs,Ri.toLength=Qs,Ri.toLower=function(e){return Zs(e).toLowerCase()},Ri.toNumber=Ks,Ri.toSafeInteger=function(e){return e?Zi(zs(e),-f,f):0===e?e:0},Ri.toString=Zs,Ri.toUpper=function(e){return Zs(e).toUpperCase()},Ri.trim=function(e,t,i){return(e=Zs(e))&&(i||t===a)?Mt(e):e&&(t=qn(t))?hr(i=Jt(e),Ut(i,t=Jt(t)),Nt(i,t)+1).join(""):e},Ri.trimEnd=function(e,t,i){return(e=Zs(e))&&(i||t===a)?e.slice(0,Zt(e)+1):e&&(t=qn(t))?hr(i=Jt(e),0,Nt(i,Jt(t))+1).join(""):e},Ri.trimStart=function(e,t,i){return(e=Zs(e))&&(i||t===a)?e.replace(ae,""):e&&(t=qn(t))?hr(i=Jt(e),Ut(i,Jt(t))).join(""):e},Ri.truncate=function(e,t){var i,n,r=30,s="...";if(Ds(t)&&(i="separator"in t?t.separator:i,r="length"in t?zs(t.length):r,s="omission"in t?qn(t.omission):s),t=(e=Zs(e)).length,(t=Ht(e)?(n=Jt(e)).length:t)<=r)return e;if((t=r-Kt(s))<1)return s;if(r=n?hr(n,0,t).join(""):e.slice(0,t),i!==a)if(n&&(t+=r.length-t),Os(i)){if(e.slice(t).search(i)){var o,l=r;for((i=i.global?i:se(i.source,Zs(pe.exec(i))+"g")).lastIndex=0;o=i.exec(l);)var h=o.index;r=r.slice(0,h===a?t:h)}}else e.indexOf(qn(i),t)!=t&&-1<(n=r.lastIndexOf(i))&&(r=r.slice(0,n));return r+s},Ri.unescape=function(e){return(e=Zs(e))&&J.test(e)?e.replace(Q,qt):e},Ri.uniqueId=function(e){var t=++Pe;return Zs(e)+t},Ri.upperCase=Ro,Ri.upperFirst=Io,Ri.each=$a,Ri.eachRight=es,Ri.first=Pa,jo(Ri,(Zo={},un(Ri,(function(e,t){ke.call(Ri.prototype,t)||(Zo[t]=e)})),Zo),{chain:!1}),Ri.VERSION="4.17.21",dt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Ri[e].placeholder=Ri})),dt(["drop","take"],(function(e,t){xi.prototype[e]=function(i){i=i===a?1:hi(zs(i),0);var n=this.__filtered__&&!t?new xi(this):this.clone();return n.__filtered__?n.__takeCount__=ui(i,n.__takeCount__):n.__views__.push({size:ui(i,m),type:e+(n.__dir__<0?"Right":"")}),n},xi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),dt(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;xi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Zr(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),dt(["head","last"],(function(e,t){var i="take"+(t?"Right":"");xi.prototype[e]=function(){return this[i](1).value()[0]}})),dt(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");xi.prototype[e]=function(){return this.__filtered__?new xi(this):this[i](1)}})),xi.prototype.compact=function(){return this.filter(Bo)},xi.prototype.find=function(e){return this.filter(e).head()},xi.prototype.findLast=function(e){return this.reverse().find(e)},xi.prototype.invokeMap=Nn((function(e,t){return"function"==typeof e?new xi(this):this.map((function(i){return An(i,e,t)}))})),xi.prototype.reject=function(e){return this.filter(ms(Zr(e)))},xi.prototype.slice=function(e,t){e=zs(e);var i=this;return i.__filtered__&&(0<e||t<0)?new xi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==a?(t=zs(t))<0?i.dropRight(-t):i.take(t-e):i)},xi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},xi.prototype.toArray=function(){return this.take(m)},un(xi.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),r=Ri[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);r&&(Ri.prototype[t]=function(){function t(e){return e=r.apply(Ri,yt([e],h)),n&&f?e[0]:e}var o,l=this.__wrapped__,h=n?[1]:arguments,u=l instanceof xi,d=h[0],c=u||ws(l),f=(c&&i&&"function"==typeof d&&1!=d.length&&(u=c=!1),this.__chain__),p=(d=!!this.__actions__.length,s&&!f);return u=u&&!d,!s&&c?(l=u?l:new xi(this),(o=e.apply(l,h)).__actions__.push({func:Ka,args:[t],thisArg:a}),new Di(o,f)):p&&u?e.apply(this,h):(o=this.thru(t),p?n?o.value()[0]:o.value():o)})})),dt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Ri.prototype[e]=function(){var e,r=arguments;return n&&!this.__chain__?(e=this.value(),t.apply(ws(e)?e:[],r)):this[i]((function(e){return t.apply(ws(e)?e:[],r)}))}})),un(xi.prototype,(function(e,t){var i,n=Ri[t];n&&(i=n.name+"",ke.call(Ai,i)||(Ai[i]=[]),Ai[i].push({name:t,func:n}))})),Ai[Rr(a,2).name]=[{name:"wrapper",func:a}],xi.prototype.clone=function(){var e=new xi(this.__wrapped__);return e.__actions__=_r(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=_r(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=_r(this.__views__),e},xi.prototype.reverse=function(){var e;return this.__filtered__?((e=new xi(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},xi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=ws(e),n=t<0,r=i?e.length:0,a=function(e,t,i){for(var n=-1,r=i.length;++n<r;){var a=i[n],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=ui(t,e+s);break;case"takeRight":e=hi(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=a.start,o=(a=a.end)-s,l=n?a:s-1,h=this.__iteratees__,u=h.length,d=0,c=ui(o,this.__takeCount__);if(!i||!n&&r==o&&c==o)return ir(e,this.__actions__);var f=[];e:for(;o--&&d<c;){for(var p=-1,m=e[l+=t];++p<u;){var g=(_=h[p]).iteratee,_=_.type;if(g=g(m),2==_)m=g;else if(!g){if(1==_)continue e;break e}}f[d++]=m}return f},Ri.prototype.at=Ja,Ri.prototype.chain=function(){return Qa(this)},Ri.prototype.commit=function(){return new Di(this.value(),this.__chain__)},Ri.prototype.next=function(){this.__values__===a&&(this.__values__=Ys(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Ri.prototype.plant=function(e){for(var t,i=this;i instanceof Pi;){var n=La(i),r=(n.__index__=0,n.__values__=a,t?r.__wrapped__=n:t=n,n);i=i.__wrapped__}return r.__wrapped__=e,t},Ri.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof xi?((e=(e=this.__actions__.length?new xi(this):e).reverse()).__actions__.push({func:Ka,args:[Fa],thisArg:a}),new Di(e,this.__chain__)):this.thru(Fa)},Ri.prototype.toJSON=Ri.prototype.valueOf=Ri.prototype.value=function(){return ir(this.__wrapped__,this.__actions__)},Ri.prototype.first=Ri.prototype.head,bt&&(Ri.prototype[bt]=function(){return this}),Ri}();$e._=Xt,(r=function(){return Xt}.call(t,i,t,n))!==a&&(n.exports=r)}).call(this)}).call(this,i(27),i(155)(e))},function(e,t){var i,n;function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}e=e.exports={};try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return(i=setTimeout)(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}var o,l=[],h=!1,u=-1;function d(){h&&o&&(h=!1,o.length?l=o.concat(l):u=-1,l.length)&&c()}function c(){if(!h){for(var e=s(d),t=(h=!0,l.length);t;){for(o=l,l=[];++u<t;)o&&o[u].run();u=-1,t=l.length}o=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new f(e,t)),1!==l.length||h||s(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){e.exports={HEVC_NAL_TRAIL_N:0,HEVC_NAL_TRAIL_R:1,HEVC_NAL_TSA_N:2,HEVC_NAL_TSA_R:3,HEVC_NAL_STSA_N:4,HEVC_NAL_STSA_R:5,HEVC_NAL_RADL_N:6,HEVC_NAL_RADL_R:7,HEVC_NAL_RASL_N:8,HEVC_NAL_RASL_R:9,HEVC_NAL_VCL_N10:10,HEVC_NAL_VCL_R11:11,HEVC_NAL_VCL_N12:12,HEVC_NAL_VCL_R13:13,HEVC_NAL_VCL_N14:14,HEVC_NAL_VCL_R15:15,HEVC_NAL_BLA_W_LP:16,HEVC_NAL_BLA_W_RADL:17,HEVC_NAL_BLA_N_LP:18,HEVC_NAL_IDR_W_RADL:19,HEVC_NAL_IDR_N_LP:20,HEVC_NAL_CRA_NUT:21,HEVC_NAL_IRAP_VCL22:22,HEVC_NAL_IRAP_VCL23:23,HEVC_NAL_RSV_VCL24:24,HEVC_NAL_RSV_VCL25:25,HEVC_NAL_RSV_VCL26:26,HEVC_NAL_RSV_VCL27:27,HEVC_NAL_RSV_VCL28:28,HEVC_NAL_RSV_VCL29:29,HEVC_NAL_RSV_VCL30:30,HEVC_NAL_RSV_VCL31:31,HEVC_NAL_VPS:32,HEVC_NAL_SPS:33,HEVC_NAL_PPS:34,HEVC_NAL_AUD:35,HEVC_NAL_EOS_NUT:36,HEVC_NAL_EOB_NUT:37,HEVC_NAL_FD_NUT:38,HEVC_NAL_SEI_PREFIX:39,HEVC_NAL_SEI_SUFFIX:40,HEVC_NAL_RSV_NVCL41:41,HEVC_NAL_RSV_NVCL42:42,HEVC_NAL_RSV_NVCL43:43,HEVC_NAL_RSV_NVCL44:44,HEVC_NAL_RSV_NVCL45:45,HEVC_NAL_RSV_NVCL46:46,HEVC_NAL_RSV_NVCL47:47,HEVC_NAL_UNSPEC48:48,HEVC_NAL_UNSPEC49:49,HEVC_NAL_UNSPEC50:50,HEVC_NAL_UNSPEC51:51,HEVC_NAL_UNSPEC52:52,HEVC_NAL_UNSPEC53:53,HEVC_NAL_UNSPEC54:54,HEVC_NAL_UNSPEC55:55,HEVC_NAL_UNSPEC56:56,HEVC_NAL_UNSPEC57:57,HEVC_NAL_UNSPEC58:58,HEVC_NAL_UNSPEC59:59,HEVC_NAL_UNSPEC60:60,HEVC_NAL_UNSPEC61:61,HEVC_NAL_UNSPEC62:62,HEVC_NAL_UNSPEC63:63,SOURCE_CODE_VPS:64,SOURCE_CODE_SPS:66,SOURCE_CODE_PPS:68,SOURCE_CODE_SEI:78,SOURCE_CODE_IDR:38,SOURCE_CODE_P:2,SOURCE_CODE_SEI_END:128,DEFINE_STARTCODE:new Uint8Array([0,0,0,1]),DEFINE_KEY_FRAME:21,DEFINE_P_FRAME:9,DEFINE_OTHERS_FRAME:153}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=d;var r=i(21),a=n(i(30)),s=i(105),o=i(188),l=n(i(106)),h=i(107),u=(t.VERSION="4.7.8",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"},"[object Object]");function d(e,t,i){this.helpers=e||{},this.partials=t||{},this.decorators=i||{},s.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}d.prototype={constructor:d,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(r.toString.call(e)===u){if(t)throw new a.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===u)r.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===u){if(t)throw new a.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){h.resetLoggedProperties()}},i=l.default.log,t.log=i,t.createFrame=r.createFrame,t.logger=l.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){r.default(e),a.default(e),s.default(e),o.default(e),l.default(e),h.default(e),u.default(e)},t.moveHelperToHooks=function(e,t,i){e.helpers[t]&&(e.hooks[t]=e.helpers[t],i||delete e.helpers[t])};var r=n(i(181)),a=n(i(182)),s=n(i(183)),o=n(i(184)),l=n(i(185)),h=n(i(186)),u=n(i(187))},function(e,t,i){"use strict";t.__esModule=!0;var n=i(21),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){var t;return"string"==typeof e?0<=(t=n.indexOf(r.methodMap,e.toLowerCase()))?t:parseInt(e,10):e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){e=r.methodMap[e],console[e]||(e="log");for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n]}}};t.default=r,e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null),i=(t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1,Object.create(null));return i.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(i,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,i){return function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(!0!==a[e=t]&&(a[e]=!0,r.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1)}("function"==typeof e?t.methods:t.properties,i)},t.resetLoggedProperties=function(){Object.keys(a).forEach((function(e){delete a[e]}))};var n=i(190),r=(t=i(106),(i=t)&&i.__esModule?i:{default:i}),a=Object.create(null)},function(e,t,i){i=[i(1),i(60),i(6),i(7),i(77),i(2)],t=function(e,t,i,n,r,a){return function(s){var o,l,h,u,d=a.extend(this,n),c=r.loaderstatus.NEW;function f(){switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return e.getAbsolutePath(s,window.location.href)}}function p(){a.defer((function(){c=r.loaderstatus.COMPLETE,d.trigger(i.COMPLETE)}))}function m(){c=r.loaderstatus.ERROR,d.trigger(i.ERROR,{url:s})}this.load=function(){var e;c===r.loaderstatus.NEW&&(0<s.lastIndexOf(".swf")?(o=s,c=r.loaderstatus.COMPLETE,d.trigger(i.COMPLETE)):t.getPluginPathType(s)===t.pluginPathType.CDN?(c=r.loaderstatus.COMPLETE,d.trigger(i.COMPLETE)):(c=r.loaderstatus.LOADING,(e=new r(f())).on(i.COMPLETE,p),e.on(i.ERROR,m),e.load()))},this.registerPlugin=function(e,t,n,a){u&&(clearTimeout(u),u=void 0),h=t,n&&a?(o=a,l=n):"string"==typeof n?o=n:"function"==typeof n?l=n:n||a||(o=e),c=r.loaderstatus.COMPLETE,d.trigger(i.COMPLETE)},this.getStatus=function(){return c},this.getPluginName=function(){return t.getPluginName(s)},this.getFlashPath=function(){if(o)switch(t.getPluginPathType(o)){case t.pluginPathType.ABSOLUTE:return o;case t.pluginPathType.RELATIVE:return 0<s.lastIndexOf(".swf")?e.getAbsolutePath(o,window.location.href):e.getAbsolutePath(o,f())}return null},this.getJS=function(){return l},this.getTarget=function(){return h},this.getPluginmode=function(){return 2},this.getNewInstance=function(e,t,i){return new l(e,t,i)},this.getURL=function(){return s}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(48),i(200),i(1),i(6),i(7),i(2)],t=function(e,t,i,n,r,a){return function(){var s=a.extend(this,r);function o(r){i.tryCatch((function(){var i,o=r.responseXML?r.responseXML.childNodes:null,l="";if(o){for(var u=0;u<o.length&&8===(l=o[u]).nodeType;u++);"xml"===e.localName(l)&&(l=l.nextSibling),"rss"===e.localName(l)&&(i={playlist:t.parse(l)})}if(!i)try{var d=JSON.parse(r.responseText);if(a.isArray(d))i={playlist:d};else{if(!a.isArray(d.playlist))throw null;i=d}}catch(i){return void h("Not a valid RSS/JSON feed")}s.trigger(n.JWPLAYER_PLAYLIST_LOADED,i)}))instanceof i.Error&&h()}function l(e){h("Playlist load error: "+e)}function h(e){s.trigger(n.JWPLAYER_ERROR,{message:e||"鏂囦欢鍔犺浇澶辫触"})}this.load=function(e){i.ajax(e,o,l)},this.destroy=function(){this.off()}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(111),i(203)],t=function(e,t,i){var n={sources:[],tracks:[]};return function(r){e.isArray((r=r||{}).tracks)||delete r.tracks;var a=e.extend({},n,r);e.isObject(a.sources)&&!e.isArray(a.sources)&&(a.sources=[t(a.sources)]),e.isArray(a.sources)&&0!==a.sources.length||(r.levels?a.sources=r.levels:a.sources=[t(r)]);for(var s=0;s<a.sources.length;s++){var o,l=a.sources[s];l&&(o=l.default,l.default=!!o&&"true"===o.toString(),a.sources[s].label||(a.sources[s].label=s.toString()),a.sources[s]=t(a.sources[s]))}return a.sources=e.compact(a.sources),e.isArray(a.tracks)||(a.tracks=[]),e.isArray(a.captions)&&(a.tracks=a.tracks.concat(a.captions),delete a.captions),a.tracks=e.compact(e.map(a.tracks,i)),a}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(15),i(2)],t=function(e,t,i){var n={default:!1,isHEVC:!1,isNative:!1};return function(r){if(r&&r.file){(e.isRtmp(r.file)||e.isFlv(r.file))&&e.isMobile()&&r.fallbackfile&&e.isHls(r.fallbackfile)&&(r.file=r.fallbackfile),e.isMobile()||e.isFlvjsSupported()||!e.isHls(r.file)&&!e.isFlv(r.file)||!r.fallbackfile||(r.file=r.fallbackfile);var a=i.extend({},n,r);if(a.file=t.trim(""+a.file),r=/^[^\/]+\/(?:x-)?([^\/]+)$/,e.isRtmp(a.file)?a.type="rtmp":r.test(a.type)?a.type=a.type.replace(r,"$1"):a.type?a.isrtc&&(a.type="rtc"):a.type=t.extension(a.file),a.type){switch(a.type){case"m3u8":case"vnd.apple.mpegurl":a.type="hls";break;case"dash+xml":a.type="dash";break;case"smil":a.type="rtmp";break;case"m4a":a.type="aac"}return i.each(a,(function(e,t){""===e&&delete a[t]})),a}}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(62),i(14),i(228),i(1)],t=function(e,t,i,n){return e.extend({constructor:function(e,t){this.defaultStatus=e,this.className=t,this.setup()},setup:function(){this.el=n.createElement(i()),this.el.classList.add(this.className)},addEvent:function(){document.getElementById("onoffswitch").checked=!!this.defaultStatus,document.getElementById("onoffswitch").addEventListener("click",(()=>{document.getElementById("onoffswitch").checked?this.trigger("switch",!0):this.trigger("switch",!1)}))},element:function(){return this.el}})}.apply(t,i),void 0!==t&&(e.exports=t)},,,,,function(e,t,i){e.exports=function(){"use strict";return{bigInt:()=>(async e=>{try{return(await WebAssembly.instantiate(e)).instance.exports.b(BigInt(0))===BigInt(0)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,126,1,126,3,2,1,0,7,5,1,1,98,0,0,10,6,1,4,0,32,0,11])),bulkMemory:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),exceptions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),multiValue:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,0,2,127,127,3,2,1,0,10,8,1,6,0,65,0,65,0,11])),mutableGlobals:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1])),referenceTypes:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,7,1,5,0,208,112,26,11])),saturatedFloatToInt:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])),signExtensions:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])),simd:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tailCall:async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,6,1,4,0,18,0,11])),threads:()=>(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}}()},function(e,t,i){"use strict";var n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},a=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,a),n(i)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}var s,o,l;g(e,t,a,{once:!0}),"error"!==t&&(o=r,l={once:!0},"function"==typeof(s=e).on)&&g(s,"error",o,l)}))},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function h(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,i,n){var r,a;return h(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener||i),r=e._events),a=r[t]),void 0===a?(a=r[t]=i,++e._eventsCount):("function"==typeof a?a=r[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),0<(r=u(e))&&a.length>r&&!a.warned&&(a.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,console)&&console.warn),e}function c(e,t,i){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:i}),t.listener=i,e.wrapFn=t}function f(e,t,i){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return i?[e.listener||e]:[e];if(i){for(var n=e,r=new Array(n.length),a=0;a<r.length;++a)r[a]=n[a].listener||n[a];return r}return m(e,e.length)}function p(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function m(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function g(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){n.once&&e.removeEventListener(t,r),i(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){if((s=0<t.length?t[0]:s)instanceof Error)throw s;throw(n=new Error("Unhandled error."+(s?" ("+s.message+")":""))).context=s,n}var s=a[e];if(void 0===s)return!1;if("function"==typeof s)r(s,this,t);else{var o=s.length,l=m(s,o);for(i=0;i<o;++i)r(l[i],this,t)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return h(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return h(t),this.prependListener(e,c(this,e,t)),this},o.prototype.off=o.prototype.removeListener=function(e,t){var i,n,r,a,s;if(h(t),void 0!==(n=this._events)&&void 0!==(i=n[e]))if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;0<=a;a--)if(i[a]===t||i[a].listener===t){s=i[a].listener,r=a;break}if(r<0)return this;if(0===r)i.shift();else{for(var o=i,l=r;l+1<o.length;l++)o[l]=o[l+1];o.pop()}1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.removeAllListeners=function(e){var t,i=this._events;if(void 0!==i)if(void 0===i.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]);else if(0===arguments.length){for(var n,r=Object.keys(i),a=0;a<r.length;++a)"removeListener"!==(n=r[a])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),t=i(22);var n=i.n(t);function r(){return n()('/*! WebPlayer built @3/25/2024, 2:47:27 PM */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){self.controller=new AbortController,self.onmessage=e=>{var t,e=e["data"];"pushUrl"==e.type?(t=self.controller.signal,fetch(e.videoURL,{signal:t}).then(e=>e.arrayBuffer()).then(e=>{e=new Uint8Array(e);postMessage(e,[e.buffer])}).catch(e=>{})):"destory"==e.type&&self.controller.signal.about()}}]);',"Worker",void 0,i.p+"fetch.worker.worker.js")}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),t=i(17);var n=i.n(t),r=i(66),a=i(4);class s{constructor(e,t){this.config=e,this.configFormat=t,this.myPlayer=null,this.playerId=t.playerId,this.myPlayerID=t.playerId+"-rtc",this.duration=1/0,this.loadSuccess=!1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onRtcEvent=null,this.onError=null}makeIt(){let e=this;this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.videoTag.width=this.configFormat.playerW,this.videoTag.height=this.configFormat.playerH,!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",this.videoTag.autoplay="autoplay",window.onclick=document.body.onclick=function(t){e.videoTag.muted=!1});var t=document.querySelector("#"+this.configFormat.playerId);this.config.id=this.myPlayerID,t.insertBefore(this.videoTag,t.firstChild),Object(r.a)(this.videoTag),this.myPlayer=new n.a(this.config,(e=>{"error"===e.type&&setTimeout((()=>{this.onRtcEvent&&this.onRtcEvent(e),this.onError({msg:a.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:a.ErrorTypes.NOT_SUPPORT,info:e})}))})),this.myPlayer.subscribeLiveStream(),this.myPlayer.on(n.a.Events.RE_CONNECT_SUCCESS,(()=>{this.play()})),this.myPlayer.on(n.a.Events.ERROR,((e,t)=>{this.onError&&this.onError(Object.assign({event:e},t))}));for(let e in n.a.Events)this.myPlayer.on(n.a.Events[e],((t,i)=>{n.a.Events[e]===n.a.Events.CANPLAY&&this._onLoaded(),n.a.Events[e]===n.a.Events.ON_PLAY&&this.loadSuccess&&this.onPlayState&&this.onPlayState(!0),n.a.Events[e]===n.a.Events.ON_PAUSE&&this.onPlayState&&this.onPlayState(!1),this.onRtcEvent&&this.onRtcEvent(Object.assign({event:t},i))}));this.onMakeItReady&&this.onMakeItReady()}async _onLoaded(){!0!==this.loadSuccess&&(this.onLoadFinish&&await this.onLoadFinish(),this.onReadyShowDone&&this.onReadyShowDone(),this.loadSuccess=!0,this.configFormat.autoPlay)&&this.onPlayState&&this.onPlayState(!0)}_refreshVideoTagEvent(){this.videoTag=document.getElementById(this.myPlayerID).querySelector("video")}async getSize(){var e=(await this.myPlayer.getStats()).video;return{width:this.videoTag.videoWidth||e&&e.width||640,height:this.videoTag.videoHeight||e&&e.height||320}}play(){this.myPlayer&&this.myPlayer.play()}setVoice(e){this.myPlayer&&this.myPlayer.setVolume(e)}pause(){this.myPlayer&&this.myPlayer.pause()}isPlayingState(){return!(!this.myPlayer||"play"!=this.myPlayer.getPlayStatus())}async getMediaInfo(){return this.myPlayer&&await this.myPlayer.getStats()}release(){this.loadSuccess=!1,this.myPlayer.destroy(),this.myPlayerID=null,this.myPlayer=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),t=i(22);var n=i.n(t);function r(){return n()('/*! WebPlayer built @3/25/2024, 2:47:27 PM */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){self.onmessage=e=>{var t,o,e=e["data"];0==e.type?(self.controller&&self.controller.abort(),self.controller=new AbortController,t=self.controller.signal,o=0,fetch(e.videoURL,{signal:t}).then(e=>{function n(r){return r.read().then(function(e){var t;if(!e.done)return e=e.value,t=JSON.parse(JSON.stringify(e.byteLength)),self.postMessage({type:0,fileStart:o,buffer:e.buffer},[e.buffer]),o+=t,n(r);self.postMessage({type:1})})}return n(e.body.getReader())}).catch(e=>{})):1==e.type&&self.controller&&self.controller.abort()}}]);',"Worker",void 0,i.p+"downloader.worker.worker.js")}},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){return'<div class="jw-process-adv jw-reset">\n    <a target="_blank"><img/></a>\n</div>'},useData:!0})},,,,,,,,,,,,,function(e,t,i){i=[i(136),i(254)],t=function(e){return window.__DEBUG__=!1,window.__LOG_API__="https://drm.media.baidubce.com:8888/v1/sdk-player",window.cyberplayer=e.selectPlayer,e.selectPlayer}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(137),i(2),i(46),i(100),i(76)],t=function(e,t,i,n,r){function a(t){var i,n;return t?"string"==typeof t?(i=s(t))||(n=document.getElementById(t)):"number"==typeof t?i=u[t]:t.nodeType&&(i=s((n=t).id)):i=u[0],i||(n?(t=new e(n,o),d++,t.uniqueId=d,u.push(t),t):{registerPlugin:r.registerPlugin})}function s(e){for(var t=0;t<u.length;t++)if(u[t].id===e)return u[t];return null}function o(e){for(var t=u.length;t--;)if(u[t].uniqueId===e.uniqueId){u.splice(t,1);break}}var l,h,u=[],d=0;i={selectPlayer:a,registerProvider:i.registerProvider,availableProviders:n,registerPlugin:r.registerPlugin},a.api=i,_hmt=[];try{navigator.onLine?((l=document.createElement("script")).onerror=function(){_hmt=null},l.src="https://hm.baidu.com/hm.js?20ba3a41aeedac500c94bdef787f57e6",(h=document.getElementsByTagName("script")[0]).parentNode.insertBefore(l,h),_hmt.push(["_setAutoPageview",!1])):_hmt=null}catch(t){_hmt=null}return i}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(6),i(16),i(7),i(1),i(98),i(2),i(144),i(250),i(251),i(252),i(253),i(33),i(4),i(49)],t=function(e,t,i,n,r,a,s,o,l,h,u,d,c,f){return function(u,p){function m(){_=new s(u),o(y,_),l(y,_),_.on(e.JWPLAYER_PLAYLIST_ITEM,(function(){v={}})),_.on(e.JWPLAYER_MEDIA_META,(function(e){a.extend(v,e)})),_.on(e.JWPLAYER_READY,(function(e){A.tick("ready"),e.setupTime=A.between("setup","ready")})),_.on("all",y.trigger),_.on(e.JWPLAYER_ERROR,(function(e){const{errorType:t,type:i,expireDay:r}=e;var a=y.getConfig()&&y.getConfig().options;let s=a&&a.lang?a.lang:"zh";if("mediaError"===e.type&&n.isMp4(e.videoSrc)&&e.detail&&("DEMUXER_ERROR_COULD_NOT_OPEN: FFmpegDemuxer: open context failed"===e.detail.message||4===e.detail.code))a.primary="justflash",_.setup(a,y);else if(t&&t==c.ErrorTypes.NOT_SUPPORT)_.setupError({message:f.default[s].ERRORTIPS.NOTSUPPORT});else if("linceseError"===t)if("EXPIRED_COUNT_DOWM"!=i)setTimeout((function(){y.remove(),_.setupError({message:f.default[s].LICENSE[i]},"license_error")}));else for(var o=f.default[s].LICENSE[i]+""+r+f.default[s].LICENSE.DAY,l=n.getElementsByClassName("jw-warning"),h=0;h<l.length;h++){var u=l[h];u.innerText=o,u.style.display="block"}}))}function g(){v={},y.off(),localStorage.setItem("baiducyberplayer.playbackRate",1),localStorage.setItem("baiducyberplayer.mute",!0),_&&_.off(),_&&_.playerDestroy&&_.playerDestroy()}var _,y=this,v={},A=(a.extend(this,i),this.utils=n,this._=a,this.Events=i,this.version=d,this.trigger=function(e,t){return(t=a.isObject(t)?a.extend({},t):{}).type=e,(window.jwplayer&&window.jwplayer.debug?i.trigger:i.triggerSafe).call(y,e,t)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this),m(),h(this),this.id=u.id,this._qoe=new r);return A.tick("init"),this.getPlugin=function(e){return y.plugins&&y.plugins[e]},this.addPlugin=function(e,t){this.plugins=this.plugins||{},this.plugins[e]=t,this.onReady(t.addToPlayer),t.resize&&this.onResize(t.resizeHandler)},this.setup=function(e){return A.tick("setup"),g(),m(),n.foreach(e.events,(function(e,t){"function"==typeof(e=y[e])&&e.call(y,t)})),e.id=y.id,_.setup(e,this),y},this.qoe=function(){var t=_.getItemQoe();return{setupTime:A.between("setup","ready"),firstFrame:t.between(e.JWPLAYER_MEDIA_PLAY_ATTEMPT,e.JWPLAYER_MEDIA_FIRST_FRAME),player:A.dump(),item:t.dump()}},this.getContainer=function(){return _.getContainer?_.getContainer():u},this.getMeta=this.getItemMeta=function(){return v},this.getPlaylistItem=function(e){var t;return n.exists(e)?(t=y.getPlaylist())?t[e]:null:_._model.get("playlistItem")},this.getRenderingMode=function(){return"html5"},this.load=function(e,t){var i=this.getPlugin("vast")||this.getPlugin("googima");return i&&i.destroy(),_.load(e,t),y},this.prevFrame=function(){return _.prevFrame()},this.nextFrame=function(){return _.nextFrame()},this.snapshot=function(e){return _.snapshot(e)},this.test1=function(){return _.test1(),y},this.play=function(e,i){return i=(i=a.isBoolean(e)?i:e)||{reason:"external"},!0===e?_.play(i):!1===e||(e=y.getState())===t.PLAYING?_.pause():_.play(i),y},this.pause=function(e){return a.isBoolean(e)?this.play(!e):this.play()},this.createInstream=function(){return _.createInstream()},this.castToggle=function(){_&&_.castToggle&&_.castToggle()},this.playAd=this.pauseAd=n.noop,this.remove=function(){return p(y),y.trigger("remove"),g(),y},this}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){t=function(){return{hasClass:function(e,t){return t=" "+t+" ",1===e.nodeType&&0<=(" "+e.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(t)}}}.apply(t,[]),void 0!==t&&(e.exports=t)},function(e,t,i){void 0!==(t=function(){return{DOM_REMOVE_IGNORE:"dom-remove-ignore"}}.apply(t,[]))&&(e.exports=t)},function(e,t,i){i=function(e,t,i){var n,r,a={},s={},o=(n=function(){return document.head||document.getElementsByTagName("head")[0]},function(){return r=void 0===r?n.apply(this,arguments):r});function l(e){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-jwplayer-id",e),e=t,o().appendChild(e),t}function h(e,t){e=(i=(i=s[e])||(s[e]={element:l(e),counter:0})).counter++;var i=i.element,n=c.bind(null,i,e,!1),r=c.bind(null,i,e,!0);return n(t),function(e){e?e.css===t.css&&e.media===t.media||n(t=e):r()}}i.exports={style:function(e,t){!function(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=(a[e]||{})[n.id];if(r){for(var s=0;s<r.parts.length;s++)r.parts[s](n.parts[s]);for(;s<n.parts.length;s++)r.parts.push(h(e,n.parts[s]))}else{var o=[];for(s=0;s<n.parts.length;s++)o.push(h(e,n.parts[s]));a[e]=a[e]||{},a[e][n.id]={id:n.id,parts:o}}}}(t,function(e){for(var t=[],i={},n=0;n<e.length;n++){var r,a=(r=e[n])[0],s={css:s=r[1],media:r=r[2]};i[a]?i[a].parts.push(s):t.push(i[a]={id:a,parts:[s]})}return t}(e))},clear:function(e){var t=a[e];if(t){for(var i=Object.keys(t),n=0;n<i.length;n+=1)for(var r=t[i[n]],s=0;s<r.parts.length;s+=1)r.parts[s]();delete a[e]}}},u=[];var u,d=function(e,t){return u[e]=t,u.filter(Boolean).join("\n")};function c(e,t,i,n){i=i?"":n.css,e.styleSheet?e.styleSheet.cssText=d(t,i):(n=document.createTextNode(i),(i=e.childNodes)[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n))}}.call(t,i,t,e),void 0!==i&&(e.exports=i)},function(e,t,i){i=[i(45),i(2),i(44),i(58),i(33)],t=function(e,t,i,n,r){var a={};return a.repo=t.memoize((function(){var t=r.split("+")[0];return t=e.repo+t+"/",i.isHTTPS()?t.replace(/^http:/,"https:"):t})),a.versionCheck=function(e){e=("0"+e).split(/\W/);var t=r.split(/\W/),i=parseFloat(e[0]),n=parseFloat(t[0]);return!(n<i||i===n&&parseFloat("0"+e[1])>parseFloat(t[1]))},a.loadFrom=function(){return __DEBUG__?n.getScriptPath("cyberplayer.js"):a.repo()},a}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){t=function(){function e(e,t){this.name=e,this.message=t.message||t.toString(),this.error=t}return{tryCatch:function(t,i,n){if(i=i||this,n=n||[],window.jwplayer&&window.jwplayer.debug)return t.apply(i,n);try{return t.apply(i,n)}catch(i){return new e(t.name,i)}},Error:e}}.apply(t,[]),void 0!==t&&(e.exports=t)},function(e,t,i){t=function(){var e={getElementsByClassName:function(e,t,i){if(i=i||"*",(t=t||document).getElementsByClassName)return t.getElementsByClassName(e);for(var n=[],r=t.getElementsByTagName(i),a=r.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)"),o=0;o<a;o++)s.test(r[o].className)&&n.push(r[o]);return n},addEventListener:function(e,t,i,n){n=n||!1,(e=e||document).addEventListener?e.addEventListener(t,i,n):e.attachEvent("on"+t,i)},removeEventListener:function(e,t,i,n){n=n||!1,(e=e||document).removeEventListener?e.removeEventListener(t,i,n):e.detachEvent("on"+t,i)},arrayFilter:function(){Array.prototype.filter||(Array.prototype.filter=function(e){if(null==this)throw TypeError();var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw TypeError();for(var n,r=[],a=arguments[1],s=0;s<i;s++)s in t&&(n=t[s],e.call(a,n,s,t))&&r.push(n);return r})},funcBind:function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){return n.apply(this instanceof r&&e?this:e||window,i.concat(Array.prototype.slice.call(arguments)))}var i=Array.prototype.slice.call(arguments,1),n=this,r=function(){};return r.prototype=this.prototype,t.prototype=new r,t})}};return e.arrayFilter(),e.funcBind(),e}.apply(t,[]),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(145),i(146),i(2),i(196),i(204),i(72),i(75),i(206),i(109),i(1),i(207),i(46),i(7),i(71),i(16),i(6),i(244),i(246),i(289)],t=function(e,t,i,n,r,a,s,o,l,h,u,d,c,f,p,m,g,_,y){function v(e){return function(){var t=Array.prototype.slice.call(arguments,0);this._model.getVideo()?this["_"+e].apply(this,t):this.eventsQueue.push([e,t])}}function A(e){this.originalContainer=this.currentContainer=e,this.errorElement=null,this.eventsQueue=[],this.isFirstTriggerPlay=!0,i.extend(this,c),this._model=new a,this.volume=-1,this.mute=-1}return A.prototype={prevFrame:v("prevFrame"),nextFrame:v("nextFrame"),snapshot:v("snapshot"),test1:v("test1"),play:v("play"),pause:v("pause"),setVolume:v("setVolume"),enableGPU:v("enableGPU"),disableGPU:v("disableGPU"),setToken:v("setToken"),setMute:v("setMute"),seek:v("seek"),stop:v("stop"),load:v("load"),playlistNext:v("next"),playlistPrev:v("prev"),playlistItem:v("item"),setFullscreen:v("setFullscreen"),setScreenshot:v("setScreenshot"),setPictInPict:v("setPictInPict"),setCaptureFrameStart:v("setCaptureFrameStart"),setCaptureFrameEnd:v("setCaptureFrameEnd"),setCurrentCaptions:v("setCurrentCaptions"),setCurrentQuality:v("setCurrentQuality"),setDanmuStatus:v("setDanmuStatus"),sendDanmu:v("sendDanmu"),setWatermark:v("setWatermark"),setMirror:v("setMirror"),setMaxSeekTime:v("setMaxSeekTime"),setup:function(a,c){!0!==a.autostart||h.isMobile()||(a.origin_volume=a.volume,a.volume=0);var g,v,A,E,b,w=this._model,S=!1,T=!1,C=!0,L=this,R=(this.recording=!1,function(){return w.getVideo()}),I=new s,k=(I.track(w),new e(a,I));function P(){w.mediaModel.on("change:state",(function(e,t){"playing"!==t||!h.isChrome66()&&!h.isMobile()||0!==c.getVolume()||w.get("autostart")||w.setVolume(k.originVolume),t=t===p.LOADING||t===p.STALLED?p.BUFFERING:t,w.set("state",t)}))}function D(){L.trigger(m.JWPLAYER_READY,{setupTime:0}),L.trigger(m.JWPLAYER_PLAYLIST_LOADED,{playlist:w.get("playlist")}),L.trigger(m.JWPLAYER_PLAYLIST_ITEM,{index:w.get("item"),item:w.get("playlistItem")}),L.trigger(m.JWPLAYER_CAPTIONS_LIST,{tracks:w.get("captionsList"),track:w.get("captionsIndex")}),w.get("autostart")&&(!h.isPoorIE()&&w.get("imageAdvs")&&w.get("imageAdvs").start?g.beginStartAdv():M({reason:"autostart"})),x()}function x(){for(;0<L.eventsQueue.length;){var e=(t=L.eventsQueue.shift())[0],t=t[1]||[];L["_"+e].apply(L,t)}}function M(e){var t;if(e&&w.set("playReason",e.reason),w.get("state")!==p.ERROR){var n=L._instreamAdapter&&L._instreamAdapter.getState();if(i.isString(n))return c.pauseAd(!1);if(w.get("state")===p.COMPLETE&&(F(!0),j(0)),!S){S=!0;let t=w.getVideo().getCurrentQuality();var r=w.get("playlistItem");let i=!1;if(t<0&&r&&w.get("qualityLabel")){for(let e=0;e<r.sources.length;e++)r.sources[e].label.toString()===w.get("qualityLabel").toString()&&(t=e);"flash"===w.getVideo().getName().name&&(i=!0)}if(t<0&&(t=0),(e&&"interaction"!=e.reason||L.isFirstTriggerPlay)&&(L.isFirstTriggerPlay=!1,L.trigger(m.JWPLAYER_MEDIA_BEFOREPLAY,{file:w.get("file")||w.get("playlistItem").sources[t].file,currentQuality:i?++t:t})),S=!1,b)return b=!1,void(E=null)}if(!0===w.get("hevc"))C=!1,t=h.tryCatch((function(){w.playVideo()}));else if(O()){if(C=!1,0===w.get("playlist").length)return!1;!h.isPoorIE()&&w.get("imageAdvs")&&w.get("imageAdvs").start?g.beginStartAdv():t=h.tryCatch((function(){w.loadVideo()}))}else if(w.get("state")===p.PAUSED){if(C&&!w.get("autostart"))return C=!1,void(t=h.tryCatch((function(){w.loadVideo()})));C=!1,t=h.tryCatch((function(){w.playVideo()}))}return!(t instanceof h.Error&&(L.triggerError(t),E=null,1))}}function F(e){w.off("itemReady",M),e=!e;var t=(E=null,h.tryCatch((function(){w.stopVideo()}),L));return t instanceof h.Error?(L.triggerError(t),!1):(e&&(T=!0),S&&(b=!0),!0)}function B(){E=null;var e=L._instreamAdapter&&L._instreamAdapter.getState();if(i.isString(e))return c.pauseAd(!0);switch(w.get("state")){case p.ERROR:return!1;case p.PLAYING:case p.BUFFERING:var t=h.tryCatch((function(){R().pause()}),this);if(t instanceof h.Error)return L.triggerError(t),!1;break;default:S&&(b=!0)}return!0}function O(){var e=w.get("state");return e===p.IDLE||e===p.COMPLETE||e===p.ERROR}function U(e,t,i){F(!0),j(e,null,i),M(t)}function N(e){return e=o(e),e=o.filterPlaylist(e,w.getProviders(),w.get("androidhls"),w.get("drm"),w.get("preload"),w.get("feedid"),w.get("withCredentials"),w.get("hevc"),w.get("native")),w.set("playlist",e),!(!i.isArray(e)||0===e.length)||(L.triggerError({message:"Error loading playlist: No playable sources found"}),!1)}function j(e,t,i){void 0!==_hmt&&null!==_hmt&&_hmt.push(["_trackPageview","/init/playerItem/hevc/"+(!0===w.get("hevc"))]);var n=w.get("playlist");e=((e=parseInt(e,10)||0)+n.length)%n.length,w.set("item",e),null!=t&&n[e].sources&&n[e].sources[t]&&(n[e].file=n[e].sources[t].file),i&&i.url&&w.set("file",i.url),w.set("playlistItem",n[e]),w.setActiveItem(n[e],t,i)}function V(e){U(w.get("item")+1,e||{reason:"external"})}function G(){O()&&(T?T=!1:(E=G,w.get("item")===w.get("playlist").length-1?w.get("repeat")?V({reason:"repeat"}):(w.set("state",p.COMPLETE),L.trigger(m.JWPLAYER_PLAYLIST_COMPLETE,{})):V({reason:"playlist"})))}function H(){return R()?R().getCurrentQuality():-1}function Y(){return R()?R().getQualityLevels():null}function W(){return v.getCurrentIndex()}function z(){return v.getCaptionsList()}w.setup(k,I),w.advManage&&w.advManage.setApi(c),h.isSupportWASM()&&(this._license=new y.default(k.licenseUrl,k.appid),this._license.onMessage=e=>{0!=e.code&&this.trigger(m.JWPLAYER_ERROR,e)},this._license.init()),g=this._view=new u(c,w),new _(c,w),v=new r(c,w),(A=new n(c,w,g,N)).on(m.JWPLAYER_READY,(function(){var e=w.get("playlist"),t=e.findIndex((e=>e.default)),n=0;-1!=t&&(w.set("item",t),n=-1==(n=e[t].sources.findIndex((e=>e.default)))?0:n),A=null,g.on("all",L.trigger.bind(L)),this.showView(g.element()),j(w.get("item"),n),w.on("change:state",f,this),w.on("change:castState",(function(e,t){L.trigger(m.JWPLAYER_CAST_SESSION,t)})),w.on("change:fullscreen",(function(e,t){L.trigger(m.JWPLAYER_FULLSCREEN,{fullscreen:t})})),w.on("change:screenshot",(function(e,t){L.trigger(m.JWPLAYER_SCREESHOT,{img:t})})),w.on("itemReady",(function(){L.trigger(m.JWPLAYER_PLAYLIST_ITEM,{index:w.get("item"),item:w.get("playlistItem")})})),w.on("change:playlist",(function(e,t){t.length&&L.trigger(m.JWPLAYER_PLAYLIST_LOADED,{playlist:t})})),w.on("change:volume",(function(e,t){L.volume!=t&&(L.volume=t,L.trigger(m.JWPLAYER_MEDIA_VOLUME,{volume:t}))})),w.on("change:mute",(function(e,t){L.mute!=t&&(L.mute=t,L.trigger(m.JWPLAYER_MEDIA_MUTE,{mute:t}))})),w.on("change:controls",(function(e,t){L.trigger(m.JWPLAYER_CONTROLS,{controls:t})})),w.on("change:scrubbing",(function(e,t){(t?B:M)()})),w.on("change:captionsList",(function(e,t){L.trigger(m.JWPLAYER_CAPTIONS_LIST,{tracks:t,track:W()})})),w.on("change:danmaku",((e,t)=>{})),w.mediaModel.set("mediaType",null),w.mediaController.on("all",L.trigger.bind(L)),i.defer(D)}),this),A.on(m.JWPLAYER_SETUP_ERROR,this.setupError,this),w.mediaController.on(m.JWPLAYER_MEDIA_COMPLETE,(function(){i.defer(G)})),w.mediaController.on(m.JWPLAYER_MEDIA_ERROR,this.triggerError,this),w.mediaController.on(m.JWPLAYER_MEDIA_META,(e=>{e.formatType&&this._license&&this._license.setMediaData&&this._license.setMediaData(e)})),P(),w.on("change:mediaModel",P),this._prevFrame=function(){return void 0!==w.get("hevc")&&!0===w.get("hevc")&&w.prevFrame()},this._nextFrame=function(){return void 0!==w.get("hevc")&&!0===w.get("hevc")&&w.nextFrame()},this._snapshot=function(e){return!0===w.get("hevc")&&w.snapshot(e)},this._test1=function(){w.test1()},this._play=M,this._pause=B,this._seek=function(e){w.get("state")!==p.ERROR&&(this.getConfig().disableSeekForward&&e>this._model.get("position")?L.trigger(m.JWPLAYER_SEEK_FORWARD_FORBIDDEN):(w.get("scrubbing")||w.get("state")===p.PLAYING||M(!0),R().seek(e)))},this._stop=F,this._load=function e(t,i){switch(w.get("state")===p.ERROR&&w.set("state",p.IDLE),F(!0),w.get("autostart")&&w.once("itemReady",M),typeof t){case"string":!function(t){var i=new l;i.on(m.JWPLAYER_PLAYLIST_LOADED,(function(t){e(t.playlist)})),i.on(m.JWPLAYER_ERROR,(function(e){e.message="鎾斁鍒楄〃鍔犺浇澶辫触: "+e.message,this.triggerError(e)}),this),i.load(t)}(t);break;case"object":var n=o(t),r=w.get("edition");n=w.getProviders().required(n,r),d.load(n,r).then((function(){L.getProvider()||(w.setProvider(w.get("playlistItem")),x())})),N(t)&&j(0);break;case"number":j(t,i)}},this._next=V,this._prev=function(e){U(w.get("item")-1,e||{reason:"external"})},this._item=U,this._setCurrentCaptions=function(e){e=parseInt(e,10)||0,w.persistVideoSubtitleTrack(e),L.trigger(m.JWPLAYER_CAPTIONS_CHANGED,{tracks:z(),track:e})},this._setCurrentQuality=function(e){R()&&(e=parseInt(e,10)||0,R().setCurrentQuality(e))},this._setFullscreen=function(e){i.isBoolean(e)||(e=!w.get("fullscreen")),w.set("fullscreen",!!h.isIOS()||e),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",e)},this._setScreenshot=function(){var e,t,i;void 0!==w.get("hevc")&&!0===w.get("hevc")?(document.getElementById("snapshot-player")&&document.getElementById("snapshot-player").remove(),e=document.createElement("canvas"),document.body.appendChild(e),e.setAttribute("id","snapshot-player"),e.setAttribute("crossOrigin","anonymous"),w.snapshot(e),L.trigger(m.JWPLAYER_SCREENSHOT,e)):((e=document.querySelector("video"))||(i=document.querySelector("canvas")),(t=document.createElement("img")).setAttribute("crossOrigin","anonymous"),t.src="",i?t.src=i.toDataURL("image/jpg"):(e.setAttribute("crossOrigin","anonymous"),i=document.createElement("canvas"),void 0!==e.videoWidth&&(i.width=e.videoWidth,i.height=e.videoHeight,i.getContext("2d").drawImage(e,0,0,i.width,i.height),t.src=i.toDataURL())),L.trigger(m.JWPLAYER_SCREENSHOT,t))},this._setPictInPict=function(e){i.isBoolean(e)||(e=!w.get("pictinpict")),(e=document.querySelector("video"))&&e!==document.pictureInPictureElement?(e.requestPictureInPicture(),w.set("pictinpict",!0)):(document.exitPictureInPicture(),w.set("pictinpict",!1))},this._setCaptureFrameStart=function(){if(!this.recording){let n=m.JWPLAYER_CaptureFrameFinished;if(this.recording_start=window.performance.now(),t=document.getElementById(this._model.get("id")).querySelector("video"))if(t.captureStream){var e=(t=t.captureStream()).getVideoTracks()[0],t=t.getAudioTracks()[0],i=new MediaStream;i.addTrack(e),0!==a.volume&&i.addTrack(t);try{this.mediaRecorder=new MediaRecorder(i,{mimeType:"video/webm;codecs=vp8"})}catch(t){return void this.trigger(n,{recorder_video_url:"",code:-1,error:t})}this.captureFrameData=[];let r=this;this.mediaRecorder.ondataavailable=function(e){e.data&&0<e.data.size&&r.captureFrameData.push(e.data)},this.mediaRecorder.onstop=function(){r.CaptureFrameFinished(),r.mediaRecorder=null},this.mediaRecorder.onerror=function(e){r.trigger(n,{recorder_video_url:"",code:-2,error:e})},this.recording=!this.recording,this.mediaRecorder.start()}else this.trigger(n,{recorder_video_url:"",code:-4,error:"captureStream error"});else this.trigger(n,{recorder_video_url:"",code:-3,error:"playback error"})}},this._setCaptureFrameEnd=function(){if(this.recording){this.recording_end=window.performance.now(),this.recording=!this.recording;let t=this;var e=this.recording_end-this.recording_start;setTimeout((()=>{t.mediaRecorder.stop()}),e/2)}},this.CaptureFrameFinished=function(){let e=m.JWPLAYER_CaptureFrameFinished;return new Promise((t=>{setTimeout((()=>{var i=new Blob(this.captureFrameData,{type:"video/webm"});this.videoUrl=window.URL.createObjectURL(i),L.trigger(e,{recorder_video_url:this.videoUrl,blobSize:i.size,code:0}),t()}))}))},this.detachMedia=function(){var e=w.getVideo();return e&&(e=e.detachMedia())instanceof HTMLVideoElement?e:null},this.attachMedia=function(){var e=h.tryCatch((function(){w.getVideo().attachMedia()}));e instanceof h.Error?h.log("Error calling _attachMedia",e):"function"==typeof E&&E()},this.getCurrentQuality=H,this.getQualityLevels=Y,this.setCurrentAudioTrack=function(e){R()&&(e=parseInt(e,10)||0,R().setCurrentAudioTrack(e))},this.getCurrentAudioTrack=function(){return R()?R().getCurrentAudioTrack():-1},this.getAudioTracks=function(){return R()?R().getAudioTracks():null},this.getCurrentCaptions=W,this.getCaptionsList=z,this.getVisualQuality=function(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");if(t=Y()){var e=H(),t=t[e];if(t)return{level:i.extend({index:e},t),mode:"",reason:""}}return null},this.getConfig=function(){if(this._model)return this._model.getConfiguration()},this.getState=function(){var e=L._instreamAdapter&&L._instreamAdapter.getState();return i.isString(e)?e:w.get("state")},this.getHlsCurrentLevel=function(){return R()?R().getHlsCurrentLevel():null},this.setMirror=function(){var e=w.get("mirror");w.set("mirror",!e)},this.setVolume=w.setVolume.bind(w),this.setMute=w.setMute.bind(w),this.enableGPU=w.enableGPU,this.disableGPU=w.disableGPU,this.setToken=w.setToken,this.setPlaybackRate=w.setPlaybackRate,this.setDanmuStatus=w.setDanmuStatus,this.setMaxSeekTime=w.setMaxSeekTime,this.getProvider=function(){return w.get("provider")},this.getWidth=function(){return w.get("containerWidth")},this.getHeight=function(){return w.get("containerHeight")},this.getMediaInfo=function(){return w.getMediaInfo()},this.getContainer=function(){return this.currentContainer},this.resize=g.resize,this.getSafeRegion=g.getSafeRegion,this.setCues=g.addCues,this.setThumbnails=g.addThumbnails,this.setCaptions=g.setCaptions,this.sendDanmu=g.sendDanmu,this.setLang=g.setLang,this.setWatermark=g.setWatermark,this.addButton=function(e,t,n,r,a){e={img:e,tooltip:t,callback:n,id:r,btnClass:a},t=(t=w.get("dock"))?t.slice(0):[],(t=i.reject(t,i.matches({id:e.id}))).push(e),w.set("dock",t)},this.removeButton=function(e){var t=w.get("dock")||[];t=i.reject(t,i.matches({id:e})),w.set("dock",t)},this.checkBeforePlay=function(){return S},this.getItemQoe=function(){return w._qoeItem},this.setControls=function(e){i.isBoolean(e)||(e=!w.get("controls")),w.set("controls",e);var t=w.getVideo();t&&t.setControls(e)},this.setSeekStep=function(e){w.set("seek_step",e)},this.setKeyControls=function(e){w.set("keyControls",e)},this.playerDestroy=function(){this.errorElement=null,this.stop(),this.showView(this.originalContainer),g&&g.destroy(),w&&w.destroy(),A&&(A.destroy(),A=null),this._license&&this._license.destroy&&this._license.destroy()},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return w.getVideo().checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new t(this,w,g),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){L._instreamAdapter&&L._instreamAdapter.destroy()},A.start()},showView:function(e,t){(document.documentElement.contains(this.currentContainer)||(this.currentContainer=document.getElementById(this._model.get("id")),this.currentContainer))&&(this.currentContainer.parentElement&&(t||(this.errorElement&&e.appendChild(this.errorElement),this.currentContainer.parentElement.replaceChild(e,this.currentContainer)),t)?this.currentContainer.appendChild(e):this.currentContainer=e)},triggerError:function(e){this._model.set("errorEvent",e),this._model.set("state",p.ERROR),this._model.once("change:state",(function(){this._model.set("errorEvent",void 0)}),this),this.trigger(m.JWPLAYER_ERROR,e)},setupError:function(e,t){var n=e.message,r=h.createElement(g(t||this._model.get("id"),this._model.get("skin"),n)),a=this._model.get("width"),s=this._model.get("height"),o=(h.style(r,{width:0<a.toString().indexOf("%")?a:a+"px",height:0<s.toString().indexOf("%")?s:s+"px"}),this.showView(r,t),t&&(this.errorElement=r),this);i.defer((function(){o.trigger(m.JWPLAYER_SETUP_ERROR,{message:n,code:e.code})}))}},A}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){var n=[i(1),i(2)];t=function(e,t){var n={autostart:!1,controls:!0,keyControls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,repeat:!1,castAvailable:!1,skin:"bce",stretching:"uniform",mute:!1,volume:100,width:480,height:270,controlbar:{barLogo:!1,barLogoUrl:"https://cloud.baidu.com/solution/media.html",canDrag:!0},marquee:{show:!1,text:"鐧惧害浜�",fontSize:12,color:"#FFF"},startseek:!0,flashUI:!1,playRate:!0,playbackRate:1,playRateConfig:[{label:"脳0.5"},{label:"脳1"},{label:"脳1.5"},{label:"脳2"},{label:"脳3"},{label:"脳4"},{label:"脳5"},{label:"脳8"}],isLive:!1,allowDoubleClickFullscreen:!0,allowClickToDisplay:!0,retryCount:0,tokenEncrypt:!1,crossoriginAnonymous:!1,withLog:!0};function r(e){return e.slice&&"px"===e.slice(-2)?e.slice(0,-2):e}return function(a,s){var o;return a.autoStart&&(a.autostart=!0),"over"!==a.controls&&"none"!==a.controls||(a.controls="over"===a.controls),a.startParam&&(a.startparam=a.startParam),s=s&&s.getAllItems(),s=t.extend({},(window.jwplayer||{}).defaults,s,a),o=s,t.each(o,(function(t,i){o[i]=e.serialize(t)})),(s=t.extend({},n,s)).options=a,void 0===s.controlbar.canDrag&&(s.controlbar.canDrag=!0),"."===s.base&&(s.base=e.getScriptPath("cyberplayer.js")),s.playRate||(s.playbackRate=1),s.base=(s.base||e.loadFrom()).replace(/\/?$/,"/"),i.p=s.base,s.width=r(s.width),s.height=r(s.height),s.flashplayer=s.flashplayer||e.getScriptPath("cyberplayer.js")+"cyberplayer.flash.swf","http:"===window.location.protocol&&(s.flashplayer=s.flashplayer.replace("https","http")),s.aspectratio=function(t,i){if(-1===i.toString().indexOf("%"))return 0;if("string"!=typeof t||!e.exists(t))return 0;if(/^\d*\.?\d+%$/.test(t))return t;if(-1===(i=t.indexOf(":")))return 0;var n=parseFloat(t.substr(0,i));return t=parseFloat(t.substr(i+1)),n<=0||t<=0?0:t/n*100+"%"}(s.aspectratio,s.width),t.isObject(s.skin)&&(s.skinUrl=s.skin.url,s.skinColorInactive=s.skin.inactive,s.skinColorActive=s.skin.active,s.skinColorBackground=s.skin.background,s.skin=t.isString(s.skin.name)?s.skin.name:n.skin),t.isString(s.skin)&&0<s.skin.indexOf(".xml")&&(s.skin=s.skin.replace(".xml","")),s.aspectratio||delete s.aspectratio,s.playlist||(!(a=t.pick(s,["title","description","type","mediaid","image","file","sources","tracks","preload","fallbackfile"])).file&&s.RtcPlugin&&(a=Object.assign(a,{file:s.RtcPlugin.serverUrl,isrtc:!0},s.RtcPlugin)),s.playlist=[a]),e.isPoorIE()&&(a=s,(e.isMSIE(7)||e.isMSIE(6))&&(a.flashUI=!0),a.skin="bce",a.startseek=!1,delete a.skinColorInactive,delete a.skinColorActive,delete a.skinColorBackground,s=a),(e.isChrome66()||e.isMobile())&&(s.originVolume=s.volume,s.volume=0),s}}.apply(t,n),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(147),i(195),i(6),i(16),i(1),i(7),i(2)],t=function(e,t,i,n,r,a,s){function o(a,o,h){var u,d,c,f,p,m=new(0<=(o.get("provider").name||"").indexOf("flash")?t:e)(a,o),g=0,_={},y=s.bind((function(e){(e=e||{}).hasControls=!!o.get("controls"),this.trigger(i.JWPLAYER_INSTREAM_CLICK,e),m&&m._adModel&&(m._adModel.get("state")===n.PAUSED?e.hasControls&&m.instreamPlay():m.instreamPause())}),this),v=s.bind((function(){m&&m._adModel&&m._adModel.get("state")===n.PAUSED&&o.get("controls")&&(a.setFullscreen(),a.play())}),this);function A(e,t){"complete"!==e&&(t=t||{},_.tag&&!t.tag&&(t.tag=_.tag),this.trigger(e,t))}function E(e){m._adModel.set("duration",e.duration),m._adModel.set("position",e.position)}function b(e){var t,n,r={};_.tag&&(r.tag=_.tag),u&&g+1<u.length?(this.trigger(i.JWPLAYER_MEDIA_COMPLETE,r),m._adModel.set("state","buffering"),o.set("skipButton",!1),t=u[++g],d&&(n=d[g]),this.loadItem(t,n)):(e.type===i.JWPLAYER_MEDIA_COMPLETE&&(this.trigger(i.JWPLAYER_MEDIA_COMPLETE,r),this.trigger(i.JWPLAYER_PLAYLIST_COMPLETE,{})),this.destroy())}this.type="instream",this.init=function(){c=o.getVideo(),f=o.get("position"),p=o.get("playlist")[o.get("item")],m.on("all",A,this),m.on(i.JWPLAYER_MEDIA_TIME,E,this),m.on(i.JWPLAYER_MEDIA_COMPLETE,b,this),m.init(),c.detachMedia(),o.mediaModel.set("state",n.BUFFERING),a.checkBeforePlay()||0===f&&!c.checkComplete()?(f=0,o.set("preInstreamState","instream-preroll")):c&&c.checkComplete()||o.get("state")===n.COMPLETE?o.set("preInstreamState","instream-postroll"):o.set("preInstreamState","instream-midroll");var e=o.get("state");return e!==n.PLAYING&&e!==n.BUFFERING||c.pause(),h.setupInstream(m._adModel),m._adModel.set("state",n.BUFFERING),h.clickHandler().setAlternateClickHandlers(r.noop,null),this.setText("Loading ad"),this},this.loadItem=function(e,t){r.isAndroid(2.3)?this.trigger({type:i.JWPLAYER_ERROR,message:"娴佸姞杞藉け璐ワ細鍦ˋndroid 2.3涓婁笉鑳藉姞杞芥祦"}):(s.isArray(e)&&(d=t,e=(u=e)[g],d)&&(t=d[g]),this.trigger(i.JWPLAYER_PLAYLIST_ITEM,{index:g,item:e}),_=s.extend({},l,t),m.load(e),this.addClickHandler(),(t=e.skipoffset||_.skipoffset)&&(m._adModel.set("skipMessage",_.skipMessage),m._adModel.set("skipText",_.skipText),m._adModel.set("skipOffset",t),o.set("skipButton",!0)))},this.applyProviderListeners=function(e){m.applyProviderListeners(e),this.addClickHandler()},this.play=function(){m.instreamPlay()},this.pause=function(){m.instreamPause()},this.hide=function(){m.hide()},this.addClickHandler=function(){h.clickHandler().setAlternateClickHandlers(y,v),m.on(i.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(e){var t=i.JWPLAYER_AD_SKIPPED;this.trigger(t,e),b.call(this,{type:t})},this.metaHandler=function(e){e.width&&e.height&&h.resizeMedia()},this.destroy=function(){if(this.off(),o.set("skipButton",!1),m)switch(h.clickHandler()&&h.clickHandler().revertAlternateClickHandlers(),m.instreamDestroy(),h.destroyInstream(),m=null,a.attachMedia(),o.get("preInstreamState")){case"instream-preroll":case"instream-midroll":var e=s.extend({},p);e.starttime=f,o.loadVideo(e),r.isMobile()&&o.mediaModel.get("state")===n.BUFFERING&&c.setState(n.BUFFERING),c.play();break;case"instream-postroll":case"instream-idle":c.stop()}},this.getState=function(){return!(!m||!m._adModel)&&m._adModel.get("state")},this.setText=function(e){h.setAltText(e||"")},this.hide=function(){h.useExternalControls()}}var l={skipoffset:null,tag:null};return s.extend(o.prototype,a),o}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(7),i(71),i(6),i(16),i(72)],t=function(e,t,i,n,r,a){return function(s,o){var l,h,u=e.extend(this,t);function d(t){t=t||l.getVideo(),h!==t&&(h=t)&&(t.off(),t.on("all",(function(t,i){i=e.extend({},i,{type:t}),this.trigger(t,i)}),u),t.on(n.JWPLAYER_MEDIA_BUFFER_FULL,p),t.on(n.JWPLAYER_PLAYER_STATE,c),t.attachMedia(),t.volume(o.get("volume")),t.mute(o.get("mute")),l.on("change:state",i,u))}function c(e){switch(e.newstate){case r.PLAYING:case r.PAUSED:l.set("state",e.newstate)}}function f(e){o.trigger(e.type,e),u.trigger(n.JWPLAYER_FULLSCREEN,{fullscreen:e.jwstate})}function p(){l.getVideo().play()}return s.on(n.JWPLAYER_FULLSCREEN,(function(e){this.trigger(n.JWPLAYER_FULLSCREEN,e)}),u),this.init=function(){(l=(new a).setup({id:o.get("id"),volume:o.get("volume"),fullscreen:o.get("fullscreen"),mute:o.get("mute")})).on("fullscreenchange",f),this._adModel=l},u.load=function(e){l.set("item",0),l.set("playlistItem",e),l.setActiveItem(e),d(),l.off(n.JWPLAYER_ERROR),l.on(n.JWPLAYER_ERROR,(function(e){this.trigger(n.JWPLAYER_ERROR,e)}),u),l.loadVideo(e)},u.applyProviderListeners=function(e){d(e),e.off(n.JWPLAYER_ERROR),e.on(n.JWPLAYER_ERROR,(function(e){this.trigger(n.JWPLAYER_ERROR,e)}),u),o.on("change:volume",(function(e,t){h.volume(t)}),u),o.on("change:mute",(function(e,t){h.mute(t)}),u)},this.instreamDestroy=function(){l&&(l.off(),this.off(),h&&(h.detachMedia(),h.off(),l.getVideo())&&h.destroy(),l=null,s.off(null,null,this),s=null)},u.instreamPlay=function(){l.getVideo()&&l.getVideo().play(!0)},u.instreamPause=function(){l.getVideo()&&l.getVideo().pause(!0)},u}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){void 0!==(t=function(){return document.createElement("video")}.apply(t,[]))&&(e.exports=t)},function(e,t,i){i=[i(150)],t=function(e){return{cybercore:e}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i(12),i=[i(32),i(1),i(70),i(2),i(6),i(16),i(99),i(7),i(151),i(44),i(152),i(12)],t=function(e,t,i,n,r,a,s,o,l,h,u,d){var c=window.clearTimeout,f=t.isIE(),p=(t.isMSIE(),t.isMobile(),t.isFF(),t.isAndroidNative());function m(i,h){let m=h.file,g=h.isMemoryPlay?localStorage.getItem("baiducyberplayer.filePostion."+h.file):h.starttime||null;!m&&h.playlist.length&&(_=h.item||0,m=h.playlist[_].file);var _=h.width,y=h.height;const v=h.autostart;var A=h.repeat,E=h.duration;const b=h.controls;this.isInitSeek=!0;let w=40960,S=0;h.hevcProbe?w=h.hevcProbe:S=.1;var T=this;function C(){return T.extPlayerMediaInfo&&(void 0===T.extPlayerMediaInfo.meta.size.width||null===T.extPlayerMediaInfo.meta.size.width||0===T.extPlayerMediaInfo.meta.size.width||void 0===T.extPlayerMediaInfo.meta.size.height||null===T.extPlayerMediaInfo.meta.size.height||0===T.extPlayerMediaInfo.meta.size.height||!T.extPlayerGL)}function L(){T.extPlayer.setVoice(T.vol/100);var e={duration:T.extPlayerDur,height:T.extPlayerMediaInfo.meta.size.height,width:T.extPlayerMediaInfo.meta.size.width,videoCodec:T.extPlayerMediaInfo.meta.videoCodec,formatType:T.extPlayerMediaInfo.formatType};if(!(T.extPlayer&&T.extPlayer.configFormat&&T.extPlayer.configFormat.useSoftDecoding)&&0<g&&g<=T.extPlayerDur&&v?f?(T.pause(),T.setState(a.PLAYING),T.isInitSeek=!1):T.extPlayer.seek(g,null,!0):T.isFirstSeek=!0,T.trigger(r.JWPLAYER_MEDIA_META,e),V(T.extPlayerDur),(e=document.querySelector(".jw-display-icon-container"))&&(e.parentNode.style="pointer-events:none",e.style.display=""),!0===v&&T.isMuted&&(T.mute(!0),T.extPlayer.player.isPlayingState)&&!T.extPlayer.player.isPlayingState()&&T.play(!0),P||(P=!0,T.trigger(r.JWPLAYER_MEDIA_BUFFER_FULL)),T.extPlayerGL.setAttribute("disableRemotePlayback",""),T.extPlayerGL.setAttribute("x-webkit-airplay","allow"),T.extPlayerGL.setAttribute("webkit-playsinline",""),T.extPlayerGL.setAttribute("playsinline",""),T.extPlayerGL.setAttribute("x5-playsinline",""),T.extPlayerGL.setAttribute("crossOrigin","anonymous"),!0===b&&h.playRate){const n="jw-icon jw-icon-tooltip jw-icon-playrate jw-button-color jw-reset",r="jw-text jw-option jw-item-0 jw-reset";let a=T.extPlayerContainer.querySelector(".jw-icon-playrate"),s=(a.style.display="",a.setAttribute("class","jw-icon jw-icon-tooltip jw-icon-playrate jw-button-color jw-reset"),a.contains(document.querySelector(".jw-menu-playrate"))&&document.querySelector(".jw-menu-playrate").parentElement.removeChild(document.querySelector(".jw-menu-playrate")),a.openShow=!1,a.onclick=function(e){!1===a.openShow?a.setAttribute("class",n+" jw-open"):a.setAttribute("class",n),a.openShow=!a.openShow},T.extPlayerContainer.querySelector(".jw-playrate-label"));s.textContent="x1",e=a.querySelector("div.jw-overlay");var t=document.createElement("ul"),i=(t.setAttribute("class","jw-menu jw-menu-playrate jw-background-color jw-reset"),e.appendChild(t),h.playRateConfig||[{label:"脳0.5"},{label:"脳1"},{label:"脳2"},{label:"脳3"},{label:"脳4"},{label:"脳8"}]);for(let e=0;e<i.length;e++){const n=i[e].label;let a=document.createElement("li");a.setAttribute("class",r+"jw-active-option"),a.textContent=n,a.onmouseenter=function(){a.setAttribute("class",r+" jw-active-option")},a.onmouseleave=function(){a.setAttribute("class",r)},a.onclick=function(e){s.textContent=n,T.setPlaybackRate(n.slice(1))},t.appendChild(a)}1!=T.playbackRate&&T.setPlaybackRate(JSON.stringify(T.playbackRate))}}_={player:i,width:_,height:y,token:"base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1",danmaku:h.danmaku,extInfo:{probeSize:w,coreProbePart:S,moovStartFlag:!0,ignoreAudio:h.audioNone||0,autoPlay:v,repeat:A,duration:E,hevc:!h.native},useSoftDecoding:!!h.useSoftDecoding,RtcPlugin:h.RtcPlugin,openToken:h.openToken,maxBufferLength:h.maxBufferLength,headers:h.headers,timeShift:h.timeShift,enableDecoderDegrade:0!=h.enableDecoderDegrade},this.videoURL=m,this.alreadyMvNode=!1,this.extNeedManualClickBoot=!1,this.extPlayerContainer=null,this.extPlayerPTS=0,this.extPlayerDur=0,this.vol=h.volume||h.options.origin_volume||h.options.volume,this.isMuted=h.mute,this.playbackRate=h.playbackRate,this.extPlayerGL=null,this.extPlayerLoadOK=!1,this.extPlayerMediaInfo=null,this.hlsTokenObj=null,this.isFirstSeek=!1,this.maxSeekTime=-1,this.extPlayer=u.default.createPlayer(m,_),this.extPlayer.onMakeItReady=()=>{var e=document.querySelector("#"+i),t=e.getElementsByTagName("div");T.extPlayerGL=e.getElementsByTagName("video")[0],!1===T.alreadyMvNode&&T.extPlayerGL&&t[0]&&T.extPlayerGL!==t[0]&&(T.alreadyMvNode=!0,T.extPlayerGL.parentNode===e?T.extPlayerGL.parentNode.insertBefore(T.extPlayerGL,t[0]):T.extPlayerGL.parentNode.parentNode.insertBefore(T.extPlayerGL.parentNode,t[0])),!0===v&&T.setState(a.LOADING),h.image&&T.trigger(r.JWPLAYER_H265WEB_COVERLOADED)},this.extPlayer.onPerformance=e=>{this.trigger(r.JWPLAYER_PERFORMANCE,e)},this.extPlayer.onNetworkError=e=>{T.trigger(r.JWPLAYER_MEDIA_ERROR,{message:message,code:"111",detail:"network error",videoSrc:m})},this.extPlayer.onReadyShowDone=()=>{this.extPlayerLoadOK=!0;let e=4;if(C()){let t=window.setInterval((function(){var n;0===e&&(window.clearInterval(t),t=null),C()?(--e,T.extPlayerContainer=document.querySelector("#"+i),h.native||!0!==T.extPlayerMediaInfo.useSoftDecoding?(T.extPlayerGL=T.extPlayerContainer.getElementsByTagName("video")[0],T.extPlayerGL||T.extPlayer.onMakeItReady(),!0===v&&(T.extPlayerGL.muted=!0,T.volume(0)),void 0!==T.extPlayerGL&&null!==T.extPlayerGL&&T.extPlayerGL&&(n=T.extPlayerContainer.getElementsByTagName("div"),!1===T.alreadyMvNode&&T.extPlayerGL!==n[0]&&(T.alreadyMvNode=!0,T.extPlayerGL.parentNode.insertBefore(T.extPlayerGL,n[0])),void 0!==T.extPlayerMediaInfo.meta.size.width&&null!==T.extPlayerMediaInfo.meta.size.width&&0!==T.extPlayerMediaInfo.meta.size.width&&void 0!==T.extPlayerMediaInfo.meta.size.height&&null!==T.extPlayerMediaInfo.meta.size.height&&0!==T.extPlayerMediaInfo.meta.size.height||(T.extPlayerMediaInfo.meta.size.width=T.extPlayerGL.videoWidth,T.extPlayerMediaInfo.meta.size.height=T.extPlayerGL.videoHeight))):(T.extPlayerGL=T.extPlayerContainer.getElementsByTagName("canvas")[0],T.extPlayerGL.setAttribute("crossOrigin","anonymous"))):(window.clearInterval(t),t=null,L())}),500)}else L()},this.extPlayer.onLoadFinish=e=>{this.extNeedManualClickBoot=!1;try{this.extPlayerMediaInfo=this.extPlayer.mediaInfo(),this.extPlayerDur=this.extPlayerMediaInfo.meta.durationMs/1e3}catch(e){}this.extPlayerContainer=document.querySelector("#"+i),void 0!==this.extPlayerGL&&null!==this.extPlayerGL||(!0===this.extPlayerMediaInfo.useSoftDecoding?(this.extPlayerGL=this.extPlayerContainer.getElementsByTagName("canvas")[0],this.extPlayerGL.setAttribute("crossOrigin","anonymous")):(this.extPlayerGL=this.extPlayerContainer.getElementsByTagName("video")[0],void 0!==this.extPlayerGL&&null!==this.extPlayerGL&&this.extPlayerGL&&(t=this.extPlayerContainer.getElementsByTagName("div"),!1===this.alreadyMvNode&&this.extPlayerGL!==t[0]&&(this.alreadyMvNode=!0,this.extPlayerGL.parentNode.insertBefore(this.extPlayerGL,t[0])),void 0!==this.extPlayerMediaInfo.meta.size.width&&null!==this.extPlayerMediaInfo.meta.size.width&&0!==this.extPlayerMediaInfo.meta.size.width&&void 0!==this.extPlayerMediaInfo.meta.size.height&&null!==this.extPlayerMediaInfo.meta.size.height&&0!==this.extPlayerMediaInfo.meta.size.height||(this.extPlayerMediaInfo.meta.size.width=this.extPlayerGL.videoWidth,this.extPlayerMediaInfo.meta.size.height=this.extPlayerGL.videoHeight))));var t={duration:this.extPlayerDur,height:this.extPlayerMediaInfo.meta.size.height,width:this.extPlayerMediaInfo.meta.size.width};!1===e?this.setState(a.LOADING):(this.extPlayer.setVoice(this.vol/100),this.mute(0==this.vol),!0===v||h.image||this.extPlayer.isPlaying()||this.setState(a.PAUSED)),this.trigger(r.JWPLAYER_MEDIA_META,t),V(this.extPlayerDur)},this.extPlayer.onLoadCache=()=>{this.setState(a.LOADING)},this.extPlayer.onLoadCacheFinshed=()=>{this.extPlayer.isPlaying()?this.setState(a.PLAYING):this.setState(a.PAUSED)},this.extPlayer.onPlayState=e=>{!0===e?0<g&&g<=T.extPlayerDur&&this.isInitSeek||T.setState(a.PLAYING):T.setState(a.PAUSED)},this.extPlayer.onPlayTime=(e,t,i)=>{this.extPlayerPTS=e;var n=this.extPlayerPTS;k=n=I<0?-(!0-n):n,this.state===a.PLAYING&&this.trigger(r.JWPLAYER_MEDIA_TIME,{position:t?t+e:k,duration:i||(t?t+I:I)})},this.extPlayer.onSeiInfo=e=>{this.state===a.PLAYING&&this.trigger(r.JWPLAYER_VIDEO_SEI,e)},this.extPlayer.onCacheProcess=e=>{var t,i;e=Math.min(+e/I,1),t=this.extPlayerPTS,i=I,e===F&&i===I||(F=e,T.trigger(r.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:i}))},this.extPlayer.onSeekStart=e=>{this.seeking=!0,this.extPlayer.isPlaying()&&this.setState(a.LOADING),this.trigger(r.JWPLAYER_MEDIA_SEEK_START),e||this.mute(!0)},this.extPlayer.onSeekFinish=(e,t)=>{this.seeking=!1,(this.extPlayer.isPlaying()&&e&&!t||0<g&&g<=T.extPlayerDur&&this.isInitSeek&&e&&!t)&&(this.isInitSeek=!1,this.extPlayer.isPlaying())&&this.setState(a.PLAYING),e&&this.mute(!1),this.trigger(r.JWPLAYER_MEDIA_SEEK_FINISHED)},this.extPlayer.onPlayFinish=()=>{c(M),T.setState(a.PAUSED),U=!1,T.trigger(r.JWPLAYER_MEDIA_COMPLETE)},this.extPlayer.onRtcEvent=e=>{this.trigger(r.JWPLAYER_RTCEVENT,e)},this.extPlayer.onLiveShift=()=>{T.isMuted=!1,T.extPlayerGL=null},this.extPlayer.onError=e=>{setTimeout((()=>{this.trigger(r.ERROR,e)}))},this.extPlayer.onRender=(e,t,i,n,r)=>{},this.extPlayer.onQualityLevels=e=>{this.trigger(r.JWPLAYER_HLS_QUALITYLIST_CHANGE,{levels:e})},this.extPlayer.onLevelUpdates=e=>{this.trigger(r.JWPLAYER_HLS_LEVEL_UPDATED,{data:e})},this.extPlayer.onPause=()=>{this.pause()},this.extPlayer.onPlay=()=>{this.play()},this.cybercorePlay=(e=!1)=>{this.extPlayer&&!this.extPlayer.isPlaying()?("ts"===d.GetUriFormat(this.videoURL)||g||this.setState(a.PLAYING),this.extPlayer.play(),!0===this.autoPlayWithInterrupt&&(0===this.vol&&(this.vol=h.options.origin_volume),this.volume(this.vol),0<this.vol)&&this.mute(!1)):!1===e?(this.setState(a.PAUSED),this.extPlayer.pause()):(g||this.setState(a.PLAYING),this.extPlayer.play(),!0===this.autoPlayWithInterrupt&&this.volume(this.vol))},this.cybercorePause=()=>{this.extPlayer.pause(),!0===v&&(this.autoPlayWithInterrupt=!0)},this.state=a.IDLE,this.seeking=!1,n.extend(this,o,l),this.trigger=function(e,t){if(B)return o.trigger.call(this,e,t)},this.setState=function(e){return s.setState.call(this,e)},this.setControls=function(e){},T=this;var R,I,k,P,D,x=0,M=-1,F=-1,B=!0,O=-1,U=(y=!!h.sdkplatform,!1),N={level:{}},j=null;function V(e){I=e,x&&e&&e!==1/0&&T.seek(x)}function G(e){var i;return"array"===t.typeOf(e)&&0<e.length?n.map(e,(function(e,t){return{label:e.label||t}})):i}A=document.getElementById(i),this.isSDK=y,this.itemTracks=null,this.video=A,this.stop=function(){c(M),B&&(this.setState(a.IDLE),this.extPlayerLoadOK=!1)},this.destroy=function(){this.remove(),this.alreadyMvNode=!1},this.init=function(e,t){B&&(D=e.sources,e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),k=e.starttime||0,I=e.duration||0,N.reason="",this.itemTracks,j=t)},this.load=function(e){var t;B&&(function(e){O=function(e){var t=Math.max(0,O),i=h.qualityLabel;if(e)for(var n=0;n<e.length;n++)if(e[n].default&&(t=n),i&&e[n].label===i)return n;return N.reason="initial choice",N.level={},t}(D=e),(e=G(e))&&T.trigger(r.JWPLAYER_MEDIA_LEVELS,{levels:e,currentQuality:O})}(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),t=e.starttime||0,e.duration,g=t,!(T.extPlayer&&T.extPlayer.configFormat&&T.extPlayer.configFormat.useSoftDecoding))&&T.isInitSeek&&!v&&g&&0<g&&(!T.extPlayerDur||T.extPlayerDur&&g<T.extPlayerDur)&&T.extPlayer&&T.extPlayer.player&&(T.seek(g),T.isFirstSeek=!0)},this.test1=function(){},this.play=function(e=!0){T.seeking?(T.setState(a.LOADING),T.once(r.JWPLAYER_MEDIA_SEEKED,T.play)):([e=!1]=[e],T.cybercorePlay(e))},this.prevFrame=function(){this.pause(),T.extPlayer.seek(k-.033)},this.nextFrame=function(){T.extPlayer.playNextFrame()},this.snapshot=function(e){return null!=e&&(T.extPlayer.snapshot(e),!0)},this.pause=function(){c(M),this.cybercorePause(),this.setState(a.PAUSED)},this.seek=function(e){-1!=this.maxSeekTime&&this.maxSeekTime<e?this.trigger(r.JWPLAYER_MEDIA_SEEK,{position:this.extPlayerPTS,offset:e}):(!0===v&&(this.autoPlayWithInterrupt=!0,0===this.vol&&(this.vol=h.options.origin_volume),this.volume(this.vol),this.mute(0===this.vol)),B&&(this.extPlayer.seek(e),this.trigger(r.JWPLAYER_MEDIA_SEEK,{position:this.extPlayerPTS,offset:e})))},this.volume=function(e){this.extPlayerLoadOK&&(e=t.between(e/100,0,1),!0===this.extPlayerLoadOK&&(this.extPlayer.setVoice(e),this.trigger("volume",{volume:Math.round(100*e)})),this.vol=100*e,0===e)&&T.trigger("mute",{mute:!0})},this.enableGPU=function(){throw"鍙湁浣跨敤Flash鎾斁鎵嶆敮鎸佸紑鍚疓PU"},this.disableGPU=function(){throw"鍙湁浣跨敤Flash鎾斁鎵嶆敮鎸佸紑鍚疓PU"},this.mute=function(e){this.extPlayerLoadOK&&!0===this.extPlayerLoadOK&&(!0===e?(this.extPlayer.setVoice(0),this.trigger("volume",{volume:Math.round(0)}),this.trigger("mute",{mute:!0})):(this.extPlayer.setVoice(this.vol/100),this.extPlayer.player.videoTag&&(this.extPlayer.player.videoTag.muted=!1),this.trigger("volume",{volume:this.vol}),this.trigger("mute",{mute:!1})))},this.checkComplete=function(){return U},this.detachMedia=function(){c(M),this.disableTextTrack(),B=!1},this.setContainer=function(e){R=e},this.getContainer=function(){return R},this.remove=function(){c(M),this.extPlayerLoadOK=!1,this.maxSeekTime=-1,null!==this.extPlayer&&(this.extPlayer.pause(),this.extPlayer.release(),this.extPlayer=null,void 0!==this.extPlayerGL&&null!==this.extPlayerGL&&this.extPlayerGL.remove&&this.extPlayerGL.remove(),this.extPlayerGL=null)},this.setVisibility=function(t){(t=!!t)||p?e.style(R,{visibility:"visible",opacity:1}):e.style(R,{visibility:"",opacity:0})},this.resize=function(e,t,n,r){if(null!==this.extPlayerMediaInfo&&null!==this.extPlayerGL){if(!1===this.extPlayerMediaInfo.meta.isHEVC&&this.extPlayerMediaInfo.meta.size.width<=0&&(this.extPlayerMediaInfo.meta.size.width=this.extPlayerGL.videoWidth,this.extPlayerMediaInfo.meta.size.height=this.extPlayerGL.videoHeight),!(e&&t&&this.extPlayerMediaInfo.meta.size.width&&this.extPlayerMediaInfo.meta.size.height))return!1;mediaW=this.extPlayerMediaInfo.meta.size.width,mediaH=this.extPlayerMediaInfo.meta.size.height;var a=document.getElementById(i+"-rtc");a&&"canvas"==a.tagName.toLocaleLowerCase()||!0===this.extPlayerMediaInfo.meta.isHEVC?(a&&(this.extPlayerGL=a),a=e,s=t,o=T.getFullScreen(),l=T.extPlayerContainer.style.transform&&(-1<T.extPlayerContainer.style.transform.indexOf("90deg)")||-1<T.extPlayerContainer.style.transform.indexOf("270deg)")),h=!o&&l?s:a,o=!o&&l?a:s,l=mediaW/h>mediaH/s,a=h/mediaW,s=o/mediaH,l=l?a:s,a=parseInt(mediaW*l,10),s=parseInt(mediaH*l,10),l=[parseInt((o-s)/2,10),parseInt((h-a)/2,10),a,s],this.extPlayerGL.style.marginTop=l[0]+"px",this.extPlayerGL.style.marginLeft=l[1]+"px",this.extPlayerGL.style.width=l[2]+"px",this.extPlayerGL.style.height=l[3]+"px",this.extPlayerGL.style.pointerEvents="none"):(o=0==r?t:e,this.extPlayerGL.style.width=(h=0==r?e:t)+"px",this.extPlayerGL.style.height=o+"px",a=this.extPlayerContainer.clientWidth,this.extPlayerGL.style.marginLeft=a<h?(a-h)/2+"px":"")}var s,o,l,h;return!1},this.getSize=function(e,t){var i=this.extPlayerContainer.clientWidth,n=this.extPlayerContainer.clientHeight;return[e=e<i?e:i,t=t<n?t:n]},this.setFullscreen=function(e){let i=this.extPlayerGL;var n;return(e=!!e)?!(t.tryCatch((function(){var e=i.webkitEnterFullscreen||i.webkitEnterFullScreen;e&&e.apply(i)}))instanceof t.Error)&&T.getFullScreen(i):((n=i.webkitExitFullscreen||i.webkitExitFullScreen)&&n.apply(i),e)},T.getFullScreen=function(){var e=this.extPlayerGL,t=-1<T.extPlayerContainer.getAttribute("class").indexOf("jw-flag-fullscreen");return e&&!!e.webkitDisplayingFullscreen||t},this.setCurrentQuality=function(e){O!==e&&0<=e&&D&&D.length>e&&(O=e,N.reason="api",N.level={},this.trigger(r.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:G(D),file:D[O].file}),h.qualityLabel=D[e].label)},this.getCurrentQuality=function(){return O},this.getQualityLevels=function(){return G(D)},this.getName=function(){return{name:"cybercore"}},this.setCurrentAudioTrack=function(e){},this.getAudioTracks=function(){return[]},this.getCurrentAudioTrack=function(){return-1},this.setPlaybackRate=function(e){j.isLive||(!1===this.extPlayer.setPlaybackRate(e)&&this.extPlayerGL&&(this.extPlayerGL.playbackRate=e),this.extPlayerContainer&&(this.extPlayerContainer.querySelector(".jw-playrate-label").innerText="x"+e),this.trigger(r.JWPLAYER_PLAYBACKRATE,{playbackRate:Number(e)}))},this.changeHlsQuality=e=>{this.extPlayer.changeHlsQuality(e)},this.gobackLive=()=>{this.extPlayer&&this.extPlayer.gobackLive&&this.extPlayer.gobackLive()},this.getHlsCurrentLevel=()=>T.extPlayer&&T.extPlayer.player&&T.extPlayer.player.getCurrentLevel(),this.setToken=e=>{if(!this.hlsTokenObj||!this.hlsTokenObj[e[0].file]){this.hlsTokenObj={};for(var t=0;t<e.length;t++)this.hlsTokenObj[e[t].file]=e[t].tokenText;T.extPlayer&&T.extPlayer.release(),T.extPlayer.do(this.hlsTokenObj),T.isMuted=!0}},this.getMediaInfo=()=>T.extPlayer&&T.extPlayer.player&&T.extPlayer.player.getMediaInfo&&T.extPlayer.player.getMediaInfo(),this.setMaxSeekTime=e=>{this.maxSeekTime=e},h.tokenEncrypt||T.extPlayer.do()}function g(){}return t.isIOS(7),t.isIOS(8),g.prototype=s,m.prototype=new g,m.getName=function(){return{name:"cybercore"}},m}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(96),i(1),i(70)],t=function(e,t,i,n){var r=null,a=null,s=-1,o=0;function l(i){var n,r;(i=i.currentTarget.activeCues)&&i.length&&(n=i[i.length-1].startTime,r=[],e.each(i,(function(e){e.startTime<n||(e.data?r.push(e):e.text&&this.trigger("meta",{metadataTime:n,metadata:JSON.parse(e.text)}))}),this),r.length)&&(i=t.parseID3(r),this.trigger("meta",{metadataTime:n,metadata:i}))}function h(){r=[],a={}}function u(){if(r){for(var e=-1,t=0;t<r.length;t++)if("showing"===r[t].mode){e=t;break}this.setSubtitlesTrack(e+1)}else this.setTextTracks()}function d(){r&&r[s]&&(r[s].mode="disabled")}return{addTracksListener:function(e,t,i){i=i.bind(this),e.addEventListener?e.addEventListener(t,i):e["on"+t]=i},clearTracks:function(){a=r=null,o=0},disableTextTrack:d,getSubtitlesTrack:function(){return s},removeTracksListener:function(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)},setTextTracks:function(){var e=this.video.textTracks;if(s=-1,e){if(r||h(),e.length){var t=0,i=e.length;for(o=0;t<i;t++){var n,d=e[t];a[t+d.kind]||("metadata"===d.kind?(d.oncuechange=l.bind(this),d.mode="showing","ID3 Metadata"===(a[t+d.kind]=d).label&&o++):"subtitles"!==d.kind&&"captions"!==d.kind||(n=d.mode,d.mode="hidden",!d.cues.length&&"caterpillar"===this.getName().name&&"Unknown CC"===d.label)||(d.mode=n,r.push(d),"Unknown CC"!==(a[t+d.kind]=d).label)||o++)}}this.addTracksListener(e,"change",u),r&&r.length&&this.trigger("subtitlesTracks",{tracks:r})}},setupSideloadedTracks:function(t){var s=i.isChrome()||i.isIOS()||i.isSafari();!this._isSDK&&s&&t&&!function(e){return e===this.itemTracks&&r&&r.length===o+this.itemTracks.length}.call(this,t)&&(d(),n.emptyElement(this.video),r&&(s=e.filter(r,(function(e){return"Unknown CC"===e.label||"ID3 Metadata"===e.label})),h(),e.each(s,(function(e,t){a[t+e]=e})),r=s),this.itemTracks=t,function(e){if(e){var t=!1;r||h();for(var n=0;n<e.length;n++){var s,o=e[n];/\.(?:web)?vtt(?:\?.*)?$/i.test(o.file)?/subtitles|captions|descriptions|chapters|metadata/i.test(o.kind)&&(t||!this.video.hasAttribute("crossorigin")&&i.crossdomain(o.file)&&(this.video.setAttribute("crossorigin","anonymous"),t=!0),(s=document.createElement("track")).src=o.file,s.kind=o.kind,s.srclang=o.language||"",s.label=o.label,s.mode="disabled",s.id=o.defaulttrack?"default":"",this.video.appendChild(s)):(r.push(o),a[n+o.kind]=s)}}}.call(this,t))},setSubtitlesTrack:function(t){r&&(0===t&&e.each(r,(function(e){e.mode="disabled"})),s!==t-1)&&(d(),r[s=t-1]&&(r[s].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:s+1,tracks:r}))},textTrackChangeHandler:u}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return n})),i(153);class n{static createPlayer(e,t){return window.newcybercorejs(e,t)}static clear(){e.STATICE_MEM_playerCount=-1,e.STATICE_MEM_playerIndexPtr=0}}}.call(this,i(27))},function(e,t,i){"use strict";i.r(t),function(e){var n=i(120),r=i(121),a=i(4);const s=i(154),o=i(156),l=i(157),h=i(158),u=i(159),d=i(161),c=i(162),f=i(164),p=i(166),m=i(12);i(73);const g=i(170),_=i(172),y=i(173),v=i(5);i(175);const A=i(176);i(34);const E=i(36),b=i(1);var{}=i(101);const w=i(19).loadWasm;i(5);const S={moovStartFlag:!0,readyShow:!0,rawFps:24,autoCrop:!1,core:v.PLAYER_CORE_TYPE_DEFAULT,coreProbePart:0,checkProbe:!0,ignoreAudio:0,probeSize:4096,autoPlay:!1,repeat:!1,cacheLength:50,loadTimeout:30,hevc:!0},T=(e,t)=>t-1e3/e;void 0!==e.Module&&null!==e.Module||(e.Module={}),Module.onRuntimeInitialized=()=>{e.STATIC_MEM_wasmDecoderState=1},window.g_players={},window.addEventListener("wasmLoaded",(function(){e.STATIC_MEM_wasmDecoderState=1})),e.onWASMLoaded=function(){e.STATIC_MEM_wasmDecoderState=1};class C{constructor(t,i){if(e.STATICE_MEM_playerCount+=1,this.playerIndex=e.STATICE_MEM_playerCount,this.mp4Obj=null,this.mpegTsObj=null,this.hlsObj=null,this.hlsConf={hlsType:v.PLAYER_IN_TYPE_M3U8_VOD},this.snapshotCanvasContext=null,this.snapshotYuvLastFrame={width:0,height:0,luma:null,chromaB:null,chromaR:null},this.videoURL=t,this.sei_maps=[],this.configFormat={playerId:i.player||v.DEFAILT_WEBGL_PLAY_ID,playerW:i.width||v.DEFAULT_WIDTH,playerH:i.height||v.DEFAULT_HEIGHT,type:i.type||m.GetUriFormat(this.videoURL),accurateSeek:i.accurateSeek||!0,playIcon:i.playIcon||"assets/icon-play@300.png",loadIcon:i.loadIcon||"assets/icon-loading.gif",token:i.token||null,danmaku:i.danmaku,repeat:i.repeat,duration:i.duration,audioNone:i.audioNone,extInfo:S,useSoftDecoding:i.useSoftDecoding||!1,RtcPlugin:i.RtcPlugin,openToken:i.openToken,maxBufferLength:i.maxBufferLength,headers:i.headers,timeShift:i.timeShift,enableDecoderDegrade:i.enableDecoderDegrade},i.RtcPlugin&&(this.configFormat.type="rtc"),this.mediaExtFormat=this.configFormat.type,this.mediaExtProtocol=null,void 0!==this.videoURL&&null!==this.videoURL&&(this.mediaExtProtocol=m.GetUriProtocol(this.videoURL)),i.extInfo.duration&&(this.configFormat.extInfo.duration=i.extInfo.duration),i.extInfo.ignoreAudio&&(this.configFormat.extInfo.ignoreAudio=1),null==this.configFormat.token);else{for(var n in this.configFormat.extInfo.core=m.GetFormatPlayCore(this.configFormat.type),i.extInfo)n in this.configFormat.extInfo&&(this.configFormat.extInfo[n]=i.extInfo[n]);this.playMode=v.PLAYER_MODE_VOD,this.seekTarget=0,this.playParam=null,this.timerFeed=null,this.player=null,this.volume=1,this.rawModePts=0,this.loadTimeoutInterval=null,this.loadTimeoutSecNow=this.configFormat.extInfo.loadTimeout,this.autoScreenClose=!0,this.feedMP4Data=null,this.workerFetch=null,this.workerParse=null,this.onPlayTime=null,this.onLoadFinish=null,this.onSeekStart=null,this.onSeekFinish=null,this.onRender=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onPlayFinish=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.onOpenFullScreen=null,this.onCloseFullScreen=null,this.onError=null,this.onProbeError=null,this.onMakeItReady=null,this.onPlayState=null,this.onPerformance=null,this._g_init=null,this.onRtcEvent=null,this.onLiveShift=null,this.filterConfigParams();let e=this;document.addEventListener("fullscreenchange",(function(t){e._isFullScreen()?e.onOpenFullScreen&&e.onOpenFullScreen():(!0===e.autoScreenClose&&e.closeFullScreen(!0),e.onCloseFullScreen&&e.onCloseFullScreen())})),this.screenW=window.screen.width,this.screenH=window.screen.height,this.controller=null,this.downLoadWorker=null,this.onQualityLevels=null,this.onLevelUpdates=null,this.isCacheLimit=!1,this.init()}}init(){window.onmessage=e=>{var{event:e,handler:t}=e.data;"WeixinJSBridgeReady"===e&&(t&&"WeixinJSBridge"===t?this.play():t&&"iframeOnload"===t&&this.player&&this.player.onLoadFinish())}}filterConfigParams(){void 0!==this.configFormat.extInfo.checkProbe&&null!==this.configFormat.extInfo.checkProbe||(this.configFormat.extInfo.checkProbe=!0),this.configFormat.type===v.PLAYER_IN_TYPE_FLV?(this.configFormat.extInfo.core=v.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=v.PLAYER_IN_TYPE_MP4):this.configFormat.type===v.PLAYER_IN_TYPE_HTTPFLV&&(this.configFormat.extInfo.core=v.PLAYER_CORE_TYPE_CNATIVE,this.configFormat.type=v.PLAYER_IN_TYPE_MP4,this.playMode=v.PLAYER_MODE_NOTIME_LIVE)}do(e){e&&(this.configFormat=Object.assign(this.configFormat,{authToken:e}));let t=!1;0<this.configFormat.extInfo.ignoreAudio&&(t=!0),this.configFormat.type===v.PLAYER_IN_TYPE_RAW_265&&(t=!0,this.playMode=v.PLAYER_MODE_NOTIME_LIVE),this.playParam={durationMs:0,fps:0,sampleRate:0,size:{width:0,height:0},audioNone:t,videoCodec:null},A.UI.createPlayerRender(this.configFormat.playerId,this.configFormat.playerW,this.configFormat.playerH),this._makeMP4Player(!0)}release(){return void 0!==this.player&&null!==this.player&&(window.clearInterval(this.timerFeed),this.timerFeed=null,this.playParam.videoCodec===v.CODEC_H265&&this.player&&this.configFormat.type==v.PLAYER_IN_TYPE_M3U8&&void 0!==this.hlsObj&&null!==this.hlsObj&&this.hlsObj.release(),this.player.release(),void 0!==this.snapshotCanvasContext&&null!==this.snapshotCanvasContext&&(E.releaseContext(this.snapshotCanvasContext),this.snapshotCanvasContext=null,void 0!==this.snapshotYuvLastFrame)&&null!==this.snapshotYuvLastFrame&&(this.snapshotYuvLastFrame.luma=null,this.snapshotYuvLastFrame.chromaB=null,this.snapshotYuvLastFrame.chromaR=null,this.snapshotYuvLastFrame.width=0,this.snapshotYuvLastFrame.height=0),void 0!==this.workerFetch&&null!==this.workerFetch&&(this.workerFetch.postMessage({cmd:"stop",params:"",type:this.mediaExtProtocol}),this.workerFetch.onmessage=null),void 0!==this.workerParse&&null!==this.workerParse&&(this.workerParse.postMessage({cmd:"stop",params:""}),this.workerParse.onmessage=null),this.workerFetch=null,this.workerParse=null,this.configFormat.extInfo.readyShow=!0,window.onclick=document.body.onclick=null,window.g_players={},this.downLoadWorker&&this.downLoadWorker.postMessage({type:1}),!0)}debugYUV(e){this.player.debugYUV(e)}setPlaybackRate(e=1){return!(this.playParam.videoCodec===v.CODEC_H265||e<=0||void 0===this.player||null===this.player)&&this.player.setPlaybackRate(e)}changeHlsQuality(e){this.player&&this.player.changeHlsQuality&&this.player.changeHlsQuality(e)}gobackLive(){this.player&&this.player.gobackLive()}getPlaybackRate(){return void 0!==this.player&&null!==this.player&&(this.playParam.videoCodec===v.CODEC_H265?1:this.player.getPlaybackRate())}setRenderScreen(e=!1){return void 0!==this.player&&null!==this.player&&(this.player.setScreen(e),!0)}play(){var e;return void 0!==this.player&&null!==this.player&&(this.configFormat&&this.configFormat.useSoftDecoding?(e={seekPos:this._getSeekTarget(),mode:this.playMode,accurateSeek:this.configFormat.accurateSeek,seekEvent:!1,realPlay:!0},this.player.play(e)):this.player.play(),!0)}pause(){return void 0!==this.player&&null!==this.player&&(this.player.pause(),!0)}isPlaying(){return void 0!==this.player&&null!==this.player&&this.player.isPlayingState()}setVoice(e){return!((e=0<e?e:0)<0||void 0===this.player||null===this.player||(this.volume=e,this.player&&this.player.setVoice(e),0))}getVolume(){return this.volume}mediaInfo(){var e={meta:this.playParam,videoType:this.playMode,formatType:this.configFormat.type,useSoftDecoding:this.configFormat.useSoftDecoding};return e.meta.isHEVC=0===this.playParam.videoCodec,e}snapshot(e=null){return null!==e&&void 0!==this.playParam&&null!==this.playParam&&(b.isFF()?(this.player.setScreen(!0),e.width=this.snapshotYuvLastFrame.width,e.height=this.snapshotYuvLastFrame.height,void 0!==this.snapshotCanvasContext&&null!==this.snapshotCanvasContext||(this.snapshotCanvasContext=E.setupCanvas(e,{preserveDrawingBuffer:!1})),E.renderFrame(this.snapshotCanvasContext,this.snapshotYuvLastFrame.luma,this.snapshotYuvLastFrame.chromaB,this.snapshotYuvLastFrame.chromaR,this.snapshotYuvLastFrame.width,this.snapshotYuvLastFrame.height)):(e.width=this.playParam.size.width,e.height=this.playParam.size.height,e.getContext("2d").drawImage(this.player.videoTag,0,0,e.width,e.height))),null}_seekHLS(e,t,i){if(void 0===this.player||null===this.player)return!1;setTimeout((function(){t.player.getCachePTS()>e?i():t._seekHLS(e,t,i)}),100)}_seek(e,t,i,n){this.hlsObj&&this.hlsObj.toSeek(e,i,n),t()}seek(e,t,i=0){if(void 0===this.player||null===this.player)return!1;let n=this,r=(this.seekTarget=e,this.onSeekStart&&this.onSeekStart(e),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null),this._getSeekTarget());var a;if(!this.configFormat.useSoftDecoding)return a=this.player.seek(e),this.onSeekFinish&&this.onSeekFinish(a,!0),a;if(this.configFormat.extInfo.core===v.PLAYER_CORE_TYPE_CNATIVE)this.pause(),this._seekHLS(e,this,(function(){n.player.seek((()=>{}),{seekTime:r,mode:n.playMode,accurateSeek:n.configFormat.accurateSeek})}));else{if(n.configFormat.type==v.PLAYER_IN_TYPE_M3U8)return void n._seek(e,(()=>{n.player.seek(null,{seekTime:r,mode:n.playMode,accurateSeek:n.configFormat.accurateSeek},(()=>{t&&t()}))}),0<n.player.timeShiftData,n.player.durationMs);this._seekHLS(e,this,(function(){n.player.seek((()=>{n.configFormat.type==v.PLAYER_IN_TYPE_MP4?n.mp4Obj.seek(e):n.configFormat.type==v.PLAYER_IN_TYPE_TS||n.configFormat.type==v.PLAYER_IN_TYPE_MPEGTS?n.mpegTsObj.seek(e):n.configFormat.type==v.PLAYER_IN_TYPE_M3U8&&(n.hlsObj.onSamples=null,n.hlsObj.seek(e));var t=function(){let t=0;return t=n.configFormat.accurateSeek?e:n._getBoxBufSeekIDR(),parseInt(t)}(),i=parseInt(n._getBoxBufSeekIDR())||0;n._avFeedMP4Data(i,t)}),{seekTime:r,mode:n.playMode,accurateSeek:n.configFormat.accurateSeek})}))}return!0}fullScreen(){var e,t,i;this.autoScreenClose=!0,this.player.vCodecID===v.V_CODEC_NAME_HEVC?(t=(e=document.querySelector("#"+this.configFormat.playerId)).getElementsByTagName("canvas")[0],e.style.width=this.screenW+"px",e.style.height=this.screenH+"px",i=this._checkScreenDisplaySize(this.screenW,this.screenH,this.playParam.size.width,this.playParam.size.height),t.style.marginTop=i[0]+"px",t.style.marginLeft=i[1]+"px",t.style.width=i[2]+"px",t.style.height=i[3]+"px",this._requestFullScreen(e)):this._requestFullScreen(this.player.videoTag)}closeFullScreen(e=!1){var t,i;!1===e&&(this.autoScreenClose=!1,this._exitFull()),this.player.vCodecID===v.V_CODEC_NAME_HEVC&&(t=(e=document.querySelector("#"+this.configFormat.playerId)).getElementsByTagName("canvas")[0],i=e.style.transform&&(-1<e.style.transform.indexOf("90deg)")||-1<e.style.transform.indexOf("270deg)")),e.style.width=i?this.configFormat.playerH+"px":this.configFormat.playerW+"px",e.style.height=i?this.configFormat.playerW+"px":this.configFormat.playerH+"px",e=this._checkScreenDisplaySize(this.configFormat.playerW,this.configFormat.playerH,this.playParam.size.width,this.playParam.size.height),t.style.marginTop=e[0]+"px",t.style.marginLeft=e[1]+"px",t.style.width=e[2]+"px",t.style.height=e[3]+"px")}playNextFrame(){return this.pause(),void 0!==this.playParam&&null!==this.playParam&&(0===this.playParam.videoCodec?this.player.playYUV():this.player.nativeNextFrame(),!0)}resize(e,t){var i,n,r;if(void 0===this.player||null===this.player)return!1;{if(!(e&&t&&this.playParam.size.width&&this.playParam.size.height))return!1;const h=this.playParam.size.width,u=this.playParam.size.height;var a,s,o=0===this.playParam.videoCodec,l=document.querySelector("#"+this.configFormat.playerId);return l.style.width=e+"px",l.style.height=t+"px",1==o?(o=l.getElementsByTagName("canvas")[0],a=h/(i=e)>u/(s=t),n=(i/h).toFixed(2),r=(s/u).toFixed(2),a=a?n:r,n=parseInt(h*a,10),r=parseInt(u*a,10),a=[parseInt((s-r)/2,10),parseInt((i-n)/2,10),n,r],o.style.marginTop=a[0]+"px",o.style.marginLeft=a[1]+"px",o.style.width=a[2]+"px",o.style.height=a[3]+"px"):((s=l.getElementsByTagName("video")[0]).style.width=e+"px",s.style.height=t+"px"),!0}}_checkScreenDisplaySize(e,t,i,n){var r=n/t<i/e,a=(e/i).toFixed(2),s=(t/n).toFixed(2);return r=r?a:s,a=this.fixed?e:parseInt(i*r),s=this.fixed?t:parseInt(n*r),[parseInt((t-s)/2),parseInt((e-a)/2),a,s]}_isFullScreen(){var e=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement;return document.fullscreenEnabled||document.mozFullscreenEnabled||document.webkitFullscreenEnabled,null!=e}_requestFullScreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullScreen()}_exitFull(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}_durationText(e){return e<0?"Play":(e=Math.round(e),Math.floor(e/3600)+":"+Math.floor(e%3600/60)+":"+Math.floor(e%60))}_getSeekTarget(){return this.configFormat.accurateSeek?this.seekTarget:this._getBoxBufSeekIDR()}_getBoxBufSeekIDR(){return this.configFormat.type==v.PLAYER_IN_TYPE_MP4?this.mp4Obj.seekPos:this.configFormat.type==v.PLAYER_IN_TYPE_TS||this.configFormat.type==v.PLAYER_IN_TYPE_MPEGTS?this.mpegTsObj.seekPos:this.configFormat.type==v.PLAYER_IN_TYPE_M3U8?this.hlsObj.seekPos:void 0}_playControl(){this.isPlaying()?this.pause():this.play()}_avFeedMP4Data(e=0,t=0,i=null){if(void 0===this.player||null===this.player)return!1;let n=parseInt(this.playParam.durationMs/1e3);this.player.clearAllCache(),this.timerFeed=window.setInterval((()=>{if(!this.isCacheLimit){let r=null,a=null,s=!0,o=!0;if(this.configFormat.type==v.PLAYER_IN_TYPE_MP4?(r=this.mp4Obj.popBuffer(1,e),a=this.mp4Obj.audioNone?null:this.mp4Obj.popBuffer(2,t)):this.configFormat.type==v.PLAYER_IN_TYPE_TS||this.configFormat.type==v.PLAYER_IN_TYPE_MPEGTS?(r=this.mpegTsObj.popBuffer(1,e),a=this.mpegTsObj.getAudioNone()?null:this.mpegTsObj.popBuffer(2,t)):this.configFormat.type==v.PLAYER_IN_TYPE_M3U8&&(r=this.hlsObj.popBuffer(1,e),a=this.hlsObj.audioNone?null:this.hlsObj.popBuffer(2,t),e<n-1&&e>=this.hlsObj.getLastIdx()&&(s=!1),t<n-1)&&t>=this.hlsObj.getALastIdx()&&(o=!1),!0===s&&null!=r)for(let e=0;e<r.length;e++)this.player.appendHevcFrame(r[e]);if(!0===o&&null!=a)for(let e=0;e<a.length;e++)this.player.appendAACFrame(a[e]);this.playMode!==v.PLAYER_MODE_NOTIME_LIVE&&this.configFormat.type!==v.PLAYER_IN_TYPE_M3U8&&this.onCacheProcess&&this.onCacheProcess(this.player.getCachePTS()),!0===s&&null!=r&&(this.configFormat.extInfo.readyShow&&(this.configFormat.type===v.PLAYER_IN_TYPE_M3U8?this.configFormat.extInfo.readyShow=!1:this.configFormat.extInfo.core!==v.PLAYER_CORE_TYPE_CNATIVE&&(this.player.cacheYuvBuf.getState(),CACHE_APPEND_STATUS_CODE.NULL,!0===this.player.playYUV(!0,!0))&&(this.configFormat.extInfo.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone()),e++),!0===o&&null!=a&&t++,e>n&&(window.clearInterval(this.timerFeed),(this.timerFeed=null)!=i)&&i()}}),5)}_isSupportWASM(){window.document;var e=window.navigator,t="ipad"==(d=e.userAgent.toLowerCase()).match(/ipad/i),i="iphone os"==d.match(/iphone os/i),n="iPad"==d.match(/iPad/i),r="iPhone os"==d.match(/iPhone os/i),a="midp"==d.match(/midp/i),s="rv:1.2.3.4"==d.match(/rv:1.2.3.4/i),o="ucweb"==d.match(/ucweb/i),l="android"==d.match(/android/i),h="Android"==d.match(/Android/i),u="windows ce"==d.match(/windows ce/i),d="windows mobile"==d.match(/windows mobile/i);if(t||i||n||r||a||s||o||l||h||u||d)return!1;if(t=(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})(),!1===t)return!1;if(!0===t){if(n=(i=m.BrowserJudge())[0],r=i[1],"Chrome"===n&&r<85)return!1;if(0<=n.indexOf("360"))return!1;if(/Safari/.test(e.userAgent)&&!/Chrome/.test(e.userAgent)&&13<r)return!1}return!0}_makeMP4Player(e=!1){if(-1!=["mp3","ogg","flac","aac","wav","opus"].indexOf(this.configFormat.type))this._makeNativePlayer();else{if(!1===this._isSupportWASM()||!0===e){if(this.configFormat.type==v.PLAYER_IN_TYPE_MP4)this.mediaExtFormat===v.PLAYER_IN_TYPE_FLV?this.configFormat.useSoftDecoding?this._cDemuxDecoderEntry():this._flvJsPlayer(this.playParam.durationMs,this.playParam.audioNone):this.configFormat.danmaku&&null!=this.configFormat.danmaku.useMask?this._mp4EntryVodStream():this._makeNativePlayer();else if(this.configFormat.type==v.PLAYER_IN_TYPE_TS||this.configFormat.type==v.PLAYER_IN_TYPE_MPEGTS)this.configFormat.extInfo.duration?this._mpegTsNv3rdPlayer(1e3*this.configFormat.extInfo.duration,!1):this._mpegTsEntry();else if(this.configFormat.type==v.PLAYER_IN_TYPE_M3U8)this._m3u8Entry();else{if(this.configFormat.type===v.PLAYER_IN_TYPE_RAW_265)return-1;this.configFormat.type==v.PLAYER_IN_TYPE_RTC&&this._rtcPlayer()}return 1}this.mediaExtProtocol===v.URI_PROTOCOL_WEBSOCKET_DESC?this.configFormat.type===v.PLAYER_IN_TYPE_RAW_265?this._raw265Entry():this._cWsFLVDecoderEntry():null!=this.configFormat.extInfo.core&&null!==this.configFormat.extInfo.core&&this.configFormat.extInfo.core===v.PLAYER_CORE_TYPE_CNATIVE?this.mediaExtFormat===v.PLAYER_IN_TYPE_MP4?this._mp4EntryVodStream():this._cDemuxDecoderEntry():this.configFormat.type==v.PLAYER_IN_TYPE_MP4?this.configFormat.extInfo.moovStartFlag?this._mp4EntryVodStream():this._mp4Entry():this.configFormat.type==v.PLAYER_IN_TYPE_TS||this.configFormat.type==v.PLAYER_IN_TYPE_MPEGTS?this._mpegTsEntry():this.configFormat.type==v.PLAYER_IN_TYPE_M3U8?this._m3u8Entry():this.configFormat.type===v.PLAYER_IN_TYPE_RAW_265&&this._raw265Entry()}return 0}_makeMP4PlayerViewEvent(e,t,i,n,r=!1,a=null,s){let o=this;var l,h;this.playParam.durationMs=e,this.playParam.fps=t,this.playParam.sampleRate=i,this.playParam.size=n,this.playParam.audioNone=r,this.playParam.videoCodec=a||v.CODEC_H265,(this.configFormat.type==v.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==v.PLAYER_IN_TYPE_M3U8_LIVE||this.configFormat.type==v.PLAYER_IN_TYPE_RAW_265)&&(this.playMode=v.PLAYER_MODE_NOTIME_LIVE),o.configFormat.extInfo.autoCrop&&(l=document.querySelector("#"+this.configFormat.playerId),n=n.width/n.height,(h=this.configFormat.playerW/this.configFormat.playerH)<n?l.style.height=this.configFormat.playerW/n+"px":n<h&&(l.style.width=this.configFormat.playerH*n+"px")),this.player.setConfig({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:i,fps:t,appendHevcType:v.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:r,token:this.configFormat.token,videoCodec:a,repeat:this.configFormat.extInfo&&this.configFormat.extInfo.repeat}),this.player.onPlayingTime=(t,i,n)=>{o._durationText(t),o._durationText(e/1e3),null!=o.onPlayTime&&o.onPlayTime(t,i,n)},this.player.onPlayingFinish=e=>{this.pause(),o.configFormat.type!=v.PLAYER_IN_TYPE_MP4&&this.seek(0,(()=>{e&&e()})),this.configFormat.useSoftDecoding=!0,null!=this.onPlayFinish&&this.onPlayFinish()},this.player.onSeekStart=()=>{var e;null!=o.onSeekStart&&(e=this.player.timeShiftData&&0<this.player.timeShiftData,o.onSeekStart(e))},this.player.onSeekFinish=()=>{null!=o.onSeekFinish&&o.onSeekFinish()},this.player.onRender=(e,t,i,n,r)=>{window.performance.now(),o._g_init,null!=o.onRender&&o.onRender(e,t,i,n,r)},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},o.player.setDurationMs(e),o.player.setFrameRate(t),null!=o.onLoadFinish&&(o.onLoadFinish(),o.configFormat.type!=v.PLAYER_IN_TYPE_M3U8&&o.configFormat.type!=v.PLAYER_IN_TYPE_MP4||o.onReadyShowDone&&o.onReadyShowDone()),this.player.onInitDecodeComplete=()=>{s&&s()}}_makeNativePlayer(e=0,t=0,i=0,n,r=0,s){if(!this.configFormat.useSoftDecoding){let l=this,h=(this.playParam.durationMs=e,this.playParam.fps=t,this.playParam.sampleRate=i,this.playParam.size=n,this.playParam.audioNone=this.configFormat.extInfo.ignoreAudio||r,this.playParam.videoCodec=s||v.CODEC_H264,this.configFormat.type==v.PLAYER_IN_TYPE_M3U8&&this.hlsConf.hlsType==v.PLAYER_IN_TYPE_M3U8_LIVE&&(this.playMode=v.PLAYER_MODE_NOTIME_LIVE),this.configFormat.useSoftDecoding=!1,this.player=new o.Mp4Player({width:this.configFormat.playerW,height:this.configFormat.playerH,sampleRate:i,fps:t,appendHevcType:v.APPEND_TYPE_FRAME,fixed:!1,playerId:this.configFormat.playerId,audioNone:this.playParam.audioNone,token:this.configFormat.token,videoCodec:s,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat}),0),u=window.setInterval((function(){h++,void 0!==l.player&&null!==l.player||(window.clearInterval(u),u=null),h>v.DEFAULT_PLAYERE_LOAD_TIMEOUT&&(l.player.release(),l.onPlayState&&l.onPlayState(!0),l.onError({msg:"reconnect is timeout",event:"timeout",url:l.videoURL,type:"networkError"}),l.player=null,window.clearInterval(u),u=null)}),1e3);return this.player.onSeekStart=()=>{null!=l.onSeekStart&&l.onSeekStart()},this.player.onPlayingTime=t=>{var i;l._durationText(t),l._durationText(e/1e3),this.player.sei_maps&&null!=l.onSeiInfo&&(i=this.player.sei_maps.findIndex((e=>e.pts>t)),l.onSeiInfo(this.player.sei_maps[i])),null!=l.onPlayTime&&l.onPlayTime(t)},this.player.onSeiTimer=e=>{var t;this.player.sei_maps&&null!=l.onSeiInfo&&(t=this.player.sei_maps.findIndex((t=>t.pts>e)),l.onSeiInfo(this.player.sei_maps[t]))},this.player.onSeiInfo=e=>{null!=l.onSeiInfo&&l.onSeiInfo(e)},this.player.onPlayingFinish=()=>{null!=l.onPlayFinish&&l.onPlayFinish()},this.player.onMakeItReady=()=>{null!=l.onMakeItReady&&l.onMakeItReady()},this.player.onLoadFinish=()=>{window.clearInterval(u),u=null,l.playParam.durationMs=1e3*l.player.duration,l.playParam.size=l.player.getSize(),l.onLoadFinish&&l.onLoadFinish(),l.onReadyShowDone&&l.onReadyShowDone(),l.configFormat.useSoftDecoding=!1},this.player.onPlayState=e=>{l.onPlayState&&l.onPlayState(e)},this.player.onCacheProcess=e=>{l.onCacheProcess&&l.onCacheProcess(e)},this.player.onSeekFinish=e=>{l.onSeekFinish&&l.onSeekFinish(e)},this.player.onError=e=>{var t=e.code===a.MsgCode.DEOCDE_NOT_SUPPORT;window.clearInterval(u),this.configFormat.enableDecoderDegrade&&t&&"mp4"===this.configFormat.type?(this.player.release(),this.configFormat.useSoftDecoding=!0,this._mp4EntryVodStream()):l.onError(e)},this.player.makeIt(this.videoURL),this.player}this._mp4EntryVodStream()}_initMp4BoxObject(){this.timerFeed=null,this.mp4Obj=new g,this.mp4Obj.onMp4BoxReady=e=>{var t=this.mp4Obj.getFPS();let i,n=T(t,this.mp4Obj.getDurationMs());var r=this.mp4Obj.getSampleRate(),a=this.mp4Obj.getSize(),s=this.mp4Obj.getVideoCoder();if(this.configFormat.useSoftDecoding){let e=!1;this.initDecoder(),this._makeMP4PlayerViewEvent(n,t,r,a,this.mp4Obj.audioNone,s,(()=>{e||(e=!0,parseInt(n/1e3),this._avFeedMP4Data(0,0))}))}else i=this._makeNativePlayer(n,t,r,a,this.mp4Obj.audioNone,s);this.mp4Obj.on("parse_sei",(function(e){i&&i.sei_maps.push(e)}))}}_mp4Entry(){let e=this;fetch(this.videoURL).then((e=>e.arrayBuffer())).then((t=>{e._initMp4BoxObject(),this.mp4Obj.demux(),this.mp4Obj.appendBufferData(t,0),this.mp4Obj.finishBuffer(),this.mp4Obj.seek(-1)}))}_mp4EntryVodStream(){this.timerFeed=null,this.mp4Obj=new g,this._initMp4BoxObject(),this.mp4Obj.demux(),this._downLoadeWorker()}_downLoadeWorker(){this.downLoadWorker=new r.a,this.downLoadWorker.postMessage({type:0,videoURL:this.videoURL}),this.downLoadWorker.onmessage=e=>{switch(e.data.type){case 0:this.mp4Obj.appendBufferData(e.data.buffer,e.data.fileStart);break;case 1:this.mp4Obj.finishBuffer(),this.mp4Obj.seek(-1)}}}_downLoader(e){let t=this,i=0;t.controller&&t.controller.abort(),t.controller=new AbortController;var n=t.controller.signal;fetch(this.videoURL,e?{headers:{Range:`bytes=${e}-`},signal:n}:{signal:n}).then((function(e){return function e(n){return n.read().then((function(r){if(!r.done)return r=r.value,t.mp4Obj.appendBufferData(r.buffer,i),i+=r.byteLength,e(n);t.mp4Obj.finishBuffer(),t.mp4Obj.seek(-1),window.clearInterval(networkInterval)}))}(e.body.getReader())})).catch((function(e){}))}_cDemuxDecoderEntry(e=0,t=!1){let i=this,n=!1,r=new AbortController,a=r.signal,s={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,token:this.configFormat.token,readyShow:this.configFormat.extInfo.readyShow,checkProbe:this.configFormat.extInfo.checkProbe,ignoreAudio:this.configFormat.extInfo.ignoreAudio,playMode:this.playMode,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,defaultFps:this.configFormat.extInfo.rawFps,cacheLength:this.configFormat.extInfo.cacheLength},o=(this.player=new l.default.CNativeCore(s),window.g_players[this.player.corePtr]=this.player,i.configFormat.useSoftDecoding=!0,this.player.onReadyShowDone=()=>{i.configFormat.extInfo.readyShow=!1,i.onReadyShowDone&&i.onReadyShowDone()},this.player.onRelease=()=>{r&&r.abort()},this.player.onProbeFinish=()=>{n=!0,i.playParam.fps=i.player.config.fps,i.playParam.durationMs=T(i.playParam.fps,1e3*i.player.duration),i.player.duration<0&&(i.playMode=v.PLAYER_MODE_NOTIME_LIVE,i.playParam.durationMs=-1),i.playParam.sampleRate=i.player.config.sampleRate,i.playParam.size={width:i.player.width,height:i.player.height},i.playParam.audioNone=i.player.audioNone,i.player.vCodecID===v.V_CODEC_NAME_HEVC?(i.playParam.videoCodec=v.CODEC_H265,i.playParam.audioIdx<0&&(i.playParam.audioNone=!0),this.configFormat.useSoftDecoding||!0!==m.IsSupport265Mse()||!1!==t||i.mediaExtFormat!==v.PLAYER_IN_TYPE_MP4&&i.mediaExtFormat!==v.PLAYER_IN_TYPE_FLV?i.onLoadFinish&&i.onLoadFinish():(r.abort(),i.player.release(),i.player=null,i.mediaExtFormat===v.PLAYER_IN_TYPE_MP4?i._makeNativePlayer(i.playParam.durationMs,i.playParam.fps,i.playParam.sampleRate,i.playParam.size,!1,i.playParam.videoCodec):i.mediaExtFormat===v.PLAYER_IN_TYPE_FLV&&i._flvJsPlayer(i.playParam.durationMs,i.playParam.audioNone))):(i.playParam.videoCodec=v.CODEC_H264,r.abort(),i.player.release(),i.player=null,i.mediaExtFormat===v.PLAYER_IN_TYPE_MP4?i._makeNativePlayer(i.playParam.durationMs,i.playParam.fps,i.playParam.sampleRate,i.playParam.size,!1,i.playParam.videoCodec):i.mediaExtFormat===v.PLAYER_IN_TYPE_FLV?i._flvJsPlayer(i.playParam.durationMs,i.playParam.audioNone):i.onLoadFinish&&i.onLoadFinish())},this.player.onPlayingTime=e=>{i._durationText(e),i._durationText(i.player.duration),null!=i.onPlayTime&&i.onPlayTime(e)},this.player.onPlayingFinish=()=>{i.pause(),null!=i.onPlayTime&&i.onPlayTime(0),i.onPlayFinish&&i.onPlayFinish(),i.player.reFull=!0,i.seek(0)},this.player.onCacheProcess=e=>{this.onCacheProcess&&this.onCacheProcess(e)},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,t,n,r,a)=>{i.snapshotYuvLastFrame.luma=null,i.snapshotYuvLastFrame.chromaB=null,i.snapshotYuvLastFrame.chromaR=null,i.snapshotYuvLastFrame.width=e,i.snapshotYuvLastFrame.height=t,i.snapshotYuvLastFrame.luma=new Uint8Array(n),i.snapshotYuvLastFrame.chromaB=new Uint8Array(r),i.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=i.onRender&&i.onRender(e,t,n,r,a)},this.player.onSeekFinish=()=>{null!=this.onSeekFinish&&this.onSeekFinish()},this.player.onPerformance=e=>{i.onPerformance&&i.onPerformance(e)},!(this.player.onWasmError=e=>{i.onError&&i.onError(e)})),h=!1,u=0;this.player.onWasmFinished=()=>{!function t(l){setTimeout((function(){!1===o&&(r.abort(),r=null,a=null,l>=v.FETCH_FIRST_MAX_TIMES?(i.player.release(),i.onPlayState&&i.onPlayState(!0),i.onError&&i.onError({msg:"fetch is timeout",event:"timeout",url:i.videoURL,type:"networkError"})):(r=new AbortController,a=r.signal,t(l+1)))}),v.FETCH_HTTP_FLV_TIMEOUT_MS),fetch(i.videoURL,{signal:a,headers:new Headers(i.configFormat.headers)}).then((function(t){if(!t.ok)return!1;if(o=!0,t.headers.has("Content-Length"))u=t.headers.get("Content-Length"),i.configFormat.extInfo.coreProbePart<=0?i.player&&i.player.setProbeSize(i.configFormat.extInfo.probeSize):i.player&&i.player.setProbeSize(u*i.configFormat.extInfo.coreProbePart);else{if(i.mediaExtFormat===v.PLAYER_IN_TYPE_FLV)return r.abort(),i.player.release(),i.player=null,i._cLiveFLVDecoderEntry(s),!0;i.player&&i.player.setProbeSize(40960)}let a=function(t){return t.read().then((function(r){return r.done&&setTimeout((()=>!0!==n?(i.player.release(),i.player=null,e<v.PLAYER_CNATIVE_VOD_RETRY_MAX?(e+=1,i._cDemuxDecoderEntry(e),!0):(i._mp4EntryVodStream(),!1)):h=!0),100),r.value.buffer,i.player&&i.player.pushBuffer(r.value.buffer)<0?(i.player.release(),i.player=null,e<v.PLAYER_CNATIVE_VOD_RETRY_MAX?(e+=1,i._cDemuxDecoderEntry(e),!0):(i._mp4EntryVodStream(),!1)):a(t)}))};return a(t.body.getReader())})).catch((function(e){e.toString().includes("user aborted")}))}(0)}}_cLiveG711DecoderEntry(e){let t=this;e.probeSize=this.configFormat.extInfo.probeSize,this.player=new u.CHttpG711Core(e),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=()=>{t.playParam.fps=t.player.mediaInfo.fps,t.playParam.durationMs=-1,t.playMode=v.PLAYER_MODE_NOTIME_LIVE,t.playParam.sampleRate=t.player.mediaInfo.sampleRate,t.playParam.size={width:t.player.mediaInfo.width,height:t.player.mediaInfo.height},t.playParam.audioNone=t.player.mediaInfo.audioNone,t.player.vCodecID===v.V_CODEC_NAME_HEVC?(t.playParam.audioIdx<0&&(t.playParam.audioNone=!0),t.playParam.videoCodec=v.CODEC_H265,t.onLoadFinish&&t.onLoadFinish()):(t.playParam.videoCodec=v.CODEC_H264,t.player.release(),t.player=null,t._flvJsPlayer(t.playParam.durationMs,t.playParam.audioNone))},this.player.onError=e=>{t.onError&&t.onError(e)},this.player.onReadyShowDone=()=>{t.configFormat.extInfo.readyShow=!1,t.onReadyShowDone&&t.onReadyShowDone()},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,i,n,r,a)=>{t.snapshotYuvLastFrame.luma=null,t.snapshotYuvLastFrame.chromaB=null,t.snapshotYuvLastFrame.chromaR=null,t.snapshotYuvLastFrame.width=e,t.snapshotYuvLastFrame.height=i,t.snapshotYuvLastFrame.luma=new Uint8Array(n),t.snapshotYuvLastFrame.chromaB=new Uint8Array(r),t.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=t.onRender&&t.onRender(e,i,n,r,a)},this.player.onPlayState=e=>{t.onPlayState&&t.onPlayState(e)},this.player.start(this.videoURL)}_cLiveFLVDecoderEntry(e){let t=this;e.probeSize=this.configFormat.extInfo.probeSize,this.player=new h.default.CHttpLiveCore(e),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=(i=0)=>{if(1===i)t.player.release(),t.player=null,t._cLiveG711DecoderEntry(e);else if(t.playParam.fps=t.player.mediaInfo.fps,t.playParam.durationMs=-1,t.playMode=v.PLAYER_MODE_NOTIME_LIVE,t.playParam.sampleRate=t.player.mediaInfo.sampleRate,t.playParam.size={width:t.player.mediaInfo.width,height:t.player.mediaInfo.height},t.playParam.audioNone=t.player.mediaInfo.audioNone,t.player.vCodecID===v.V_CODEC_NAME_HEVC)t.playParam.videoCodec=v.CODEC_H265,t.playParam.audioIdx<0&&(t.playParam.audioNone=!0),this.configFormat.useSoftDecoding||!0!==m.IsSupport265Mse()||t.mediaExtFormat!==v.PLAYER_IN_TYPE_FLV?t.onLoadFinish&&t.onLoadFinish():(t.player.release(),t.player=null,t.mediaExtFormat===v.PLAYER_IN_TYPE_FLV&&t._flvJsPlayer(t.playParam.durationMs,t.playParam.audioNone));else if(t.playParam.videoCodec=v.CODEC_H264,t.player.release(),t.player=null,t.mediaExtFormat===v.PLAYER_IN_TYPE_FLV)t._flvJsPlayer(t.playParam.durationMs,t.playParam.audioNone);else{if(t.mediaExtFormat!==v.PLAYER_IN_TYPE_TS&&t.mediaExtFormat!==v.PLAYER_IN_TYPE_MPEGTS)return-1;t._mpegTsNv3rdPlayer(t.playParam.durationMs,t.playParam.audioNone)}},this.player.onError=e=>{t.onError&&t.onError(e)},this.player.onReadyShowDone=()=>{t.configFormat.extInfo.readyShow=!1,t.onReadyShowDone&&t.onReadyShowDone(),this.configFormat.useSoftDecoding=!0},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(e,i,n,r,a)=>{t.snapshotYuvLastFrame.luma=null,t.snapshotYuvLastFrame.chromaB=null,t.snapshotYuvLastFrame.chromaR=null,t.snapshotYuvLastFrame.width=e,t.snapshotYuvLastFrame.height=i,t.snapshotYuvLastFrame.luma=new Uint8Array(n),t.snapshotYuvLastFrame.chromaB=new Uint8Array(r),t.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=t.onRender&&t.onRender(e,i,n,r,a)},this.player.onPlayState=e=>{t.onPlayState&&t.onPlayState(e)},this.player.start(this.videoURL),this.player.onPerformance=e=>{t.onPerformance&&t.onPerformance(e)}}_cWsFLVDecoderEntry(){let e=this;var t={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,token:this.configFormat.token,readyShow:this.configFormat.extInfo.readyShow,checkProbe:this.configFormat.extInfo.checkProbe,ignoreAudio:this.configFormat.extInfo.ignoreAudio,playMode:this.playMode,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat};t.probeSize=this.configFormat.extInfo.probeSize,this.player=new d.CWsLiveCore(t),window.g_players[this.player.corePtr]=this.player,this.player.onProbeFinish=()=>{e.playParam.fps=e.player.mediaInfo.fps,e.playParam.durationMs=-1,e.playMode=v.PLAYER_MODE_NOTIME_LIVE,e.playParam.sampleRate=e.player.mediaInfo.sampleRate,e.playParam.size={width:e.player.mediaInfo.width,height:e.player.mediaInfo.height},e.playParam.audioNone=e.player.mediaInfo.audioNone,e.player.vCodecID===v.V_CODEC_NAME_HEVC?(e.playParam.audioIdx<0&&(e.playParam.audioNone=!0),e.playParam.videoCodec=v.CODEC_H265,!0===m.IsSupport265Mse()&&e.mediaExtFormat===v.PLAYER_IN_TYPE_FLV?(e.player.release(),e.player=null,e._flvJsPlayer(e.playParam.durationMs,e.playParam.audioNone)):e.onLoadFinish&&e.onLoadFinish()):(e.playParam.videoCodec=v.CODEC_H264,e.player.release(),e.player=null,e._flvJsPlayer(e.playParam.durationMs,e.playParam.audioNone))},this.player.onError=t=>{e.onError&&e.onError(t)},this.player.onReadyShowDone=()=>{e.configFormat.extInfo.readyShow=!1,e.onReadyShowDone&&e.onReadyShowDone()},this.player.onLoadCache=()=>{null!=this.onLoadCache&&this.onLoadCache()},this.player.onLoadCacheFinshed=()=>{null!=this.onLoadCacheFinshed&&this.onLoadCacheFinshed()},this.player.onRender=(t,i,n,r,a)=>{e.snapshotYuvLastFrame.luma=null,e.snapshotYuvLastFrame.chromaB=null,e.snapshotYuvLastFrame.chromaR=null,e.snapshotYuvLastFrame.width=t,e.snapshotYuvLastFrame.height=i,e.snapshotYuvLastFrame.luma=new Uint8Array(n),e.snapshotYuvLastFrame.chromaB=new Uint8Array(r),e.snapshotYuvLastFrame.chromaR=new Uint8Array(a),null!=e.onRender&&e.onRender(t,i,n,r,a)},this.player.start(this.videoURL)}_mpegTsEntry(){let e=this,t=new AbortController,i=t.signal;this.timerFeed=null,this.mpegTsObj=new _.MpegTs,this.mpegTsObj.bindReady(e),this.mpegTsObj.onDemuxed=this._mpegTsEntryReady.bind(this),this.mpegTsObj.onReady=()=>{let n=null;fetch(e.videoURL,{signal:i,headers:new Headers(this.configFormat.headers)}).then((function(r){if(r.headers.has("Content-Length")){e.onMakeItReady&&e.onMakeItReady();let t=function(i){return i.read().then((function(r){var a;if(!r.done)return r=r.value,null===n?n=r:(a=n.length+r.length,(a=new Uint8Array(a)).set(n),a.set(r,n.length),n=new Uint8Array(a),a=r=null),t(i);e.mpegTsObj.demux(n)}))};return t(r.body.getReader())}t.abort(),i=null,t=null,r={width:e.configFormat.playerW,height:e.configFormat.playerH,playerId:e.configFormat.playerId,token:e.configFormat.token,readyShow:e.configFormat.extInfo.readyShow,checkProbe:e.configFormat.extInfo.checkProbe,ignoreAudio:e.configFormat.extInfo.ignoreAudio,playMode:e.playMode,autoPlay:e.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat},e._cLiveFLVDecoderEntry(r)})).catch((function(e){e.toString().includes("user aborted")}))},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.initMPEG()}_mpegTsEntryReady(e){let t=e;t.mpegTsObj.getVCodec();let i=t.mpegTsObj.getACodec(),n=t.mpegTsObj.getDurationMs(),r=t.mpegTsObj.getFPS(),a=t.mpegTsObj.getSampleRate(),s=t.mpegTsObj.getSize();e=this.mpegTsObj.isHEVC(),!b.isFF()||b.isFF()&&!e?(this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null,this.playParam.durationMs=n,this.playParam.fps=r,this.playParam.sampleRate=a,this.playParam.size=s,this.playParam.audioNone=""===i,this.playParam.videoCodec=e?0:1,this._mpegTsNv3rdPlayer(this.playParam.durationMs,this.playParam.audioNone)):(t.initDecoder(),setTimeout((()=>{t._makeMP4PlayerViewEvent(n,r,a,s,""===i,""),t._avFeedMP4Data(0,0)}),1e3))}_m3u8Entry(e=!1){let t=this;if(!this.configFormat.useSoftDecoding||e)return this._HjsJsPlayer();let i,n=!1,r=0;this._g_init=window.performance.now(),this.hlsObj=new y.M3u8({headers:this.configFormat.headers},this.videoURL),this.hlsObj.bindReady(t),this.initDecoder(),this.isHjsJsPlayer=!1,this.hlsObj.onFinished=(e,a)=>{!1===n&&(window.performance.now(),t._g_init,r=t.hlsObj.getDurationMs(),i=r/1e3,t.hlsConf.hlsType=a.type,n=!0)},this.hlsObj.onCacheProcess=e=>{this.playMode!==v.PLAYER_MODE_NOTIME_LIVE&&this.onCacheProcess&&this.onCacheProcess(e)},this.hlsObj.onDemuxed=e=>{if(!this.player||!this.player.config.token){t.hlsObj.isHevcParam;var i=t.hlsObj.getVCodec();if(b.isFF()&&"h264"==i)this.hlsObj.release(),this._m3u8Entry(!0),this.configFormat.useSoftDecoding=!1;else{i=t.hlsObj.getACodec();var n=t.hlsObj.getFPS(),a=t.hlsObj.getSampleRate(),s=t.hlsObj.getSize();let e=!1;e=t.hlsObj.getSampleChannel()<=0||""===i,window.performance.now(),t._g_init,t._makeMP4PlayerViewEvent(r,n,a,s,e),window.performance.now(),t._g_init}}},this.hlsObj.onSamples=this._hlsOnSamples.bind(this),this.hlsObj.onError=()=>{b.isFF()&&!this.isHjsJsPlayer&&(this.isHjsJsPlayer=!0,this.hlsObj.release(),this._m3u8Entry(!0),this.configFormat.useSoftDecoding=!1)},this.hlsObj.onWasmError=e=>{this.onError&&this.onError(e)},this.hlsObj.demux(this.videoURL),window.performance.now(),this._g_init}_hlsOnSamples(e,t){window.performance.now(),this._g_init,!0===t.video?this.player&&this.player.appendHevcFrame&&this.player.appendHevcFrame(t):!1===this.hlsObj.audioNone&&this.player&&this.player.appendAACFrame&&this.player.appendAACFrame(t)}_HjsJsPlayer(e=-1){let t=this;e={probeDurationMS:e,width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,playMode:this.playMode,danmaku:this.configFormat.danmaku,authToken:this.configFormat.authToken,openToken:this.configFormat.openToken,maxBufferLength:this.configFormat.maxBufferLength,headers:this.configFormat.headers,timeShift:this.configFormat.timeShift},this.player=new c.NvHLSjsCore(e,this.videoURL),this.player.onMakeItReady=()=>{t.onMakeItReady&&t.onMakeItReady()},this.player.onLoadFinish=()=>{t.playParam.size=t.player.getSize(),t.playParam.videoCodec=t.player.videoCodec,t.player.duration===1/0||t.player.duration<0?(t.playParam.durationMs=-1,t.playMode=v.PLAYER_MODE_NOTIME_LIVE):(t.playParam.durationMs=1e3*t.player.duration,t.playMode=v.PLAYER_MODE_VOD),t.onLoadFinish&&t.onLoadFinish()},this.player.onReadyShowDone=()=>{t.onReadyShowDone&&t.onReadyShowDone()},this.player.onPlayingFinish=()=>{t.pause(),t.seek(0),null!=t.onPlayFinish&&t.onPlayFinish()},this.player.onPlayingTime=(e,i,n)=>{t._durationText(e),t._durationText(t.player.duration),null!=t.onPlayTime&&t.onPlayTime(e,i,n)},this.player.onSeekFinish=e=>{t.onSeekFinish&&t.onSeekFinish(e)},this.player.onPlayState=e=>{t.onPlayState&&t.onPlayState(e)},this.player.onCacheProcess=e=>{t.onCacheProcess&&t.onCacheProcess(e)},this.player.onQualityLevels=e=>{t.onQualityLevels&&t.onQualityLevels(e)},this.player.onLevelUpdates=e=>{t.onLevelUpdates&&t.onLevelUpdates(e)},this.player.onError=e=>{var i=e.msg&&"bufferAddCodecError"===e.msg.details&&"video/mp4;codecs=hvc1.1.1.L120.B0"===e.msg.mimeType,n=e.isAppleMpegurl;this.configFormat.enableDecoderDegrade&&i?(this.player.release(),this.configFormat.useSoftDecoding=!0,this._m3u8Entry(!1)):n?this._makeNativePlayer():t.onError&&t.onError(e)},this.player.onLiveShift=e=>{t.onLiveShift&&t.onLiveShift(e)},this.player.makeIt(this.videoURL)}_flvJsPlayer(e=-1,t=!1){let i=this;e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,duration:e,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,audioNone:t,headers:this.configFormat.headers},this.player=new f.NvFlvjsCore(e),this.player.onLoadFinish=()=>{i.playParam.size=i.player.getSize(),i.playParam.videoCodec=i.player.videoCodec,!i.player.duration||NaN===i.player.duration||i.player.duration===1/0||i.player.duration<0?(i.playParam.durationMs=-1,i.playMode=v.PLAYER_MODE_NOTIME_LIVE):(i.playParam.durationMs=1e3*i.player.duration,i.playMode=v.PLAYER_MODE_VOD),i.onLoadFinish&&i.onLoadFinish()},this.player.onReadyShowDone=()=>{i.onReadyShowDone&&i.onReadyShowDone()},this.player.onPlayingTime=(e,t)=>{i._durationText(e),i._durationText(i.player.duration),null!=i.onPlayTime&&i.onPlayTime(e,t)},this.player.onPlayingFinish=()=>{i.pause(),i.seek(0),null!=i.onPlayFinish&&i.onPlayFinish()},this.player.onPlayState=e=>{i.onPlayState&&i.onPlayState(e)},this.player.onCacheProcess=e=>{i.onCacheProcess&&i.onCacheProcess(e)},this.player.onError=e=>{var t=e.msg&&e.msg.code===a.MsgCode.PLAY_ERROR;i.configFormat.enableDecoderDegrade&&t?(i.player.release(),i._cDemuxDecoderEntry()):i.onError&&i.onError(e)},this.player.onSeekFinish=e=>{i.onSeekFinish&&i.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_mpegTsNv3rdPlayer(e=-1,t=!1){let i=this;e={width:this.configFormat.playerW,height:this.configFormat.playerH,playerId:this.configFormat.playerId,ignoreAudio:this.configFormat.extInfo.ignoreAudio,duration:e,autoPlay:this.configFormat.extInfo.autoPlay,repeat:this.configFormat.extInfo.repeat,audioNone:t,headers:this.configFormat.headers},this.player=new p.NvMpegTsCore(e),this.player.onLoadFinish=e=>{i.configFormat.useSoftDecoding=!1,i.playParam.size=i.player.getSize(),i.playParam.videoCodec=i.player.videoCodec,!i.player.duration||NaN===i.player.duration||i.player.duration===1/0||i.player.duration<0?(i.playParam.durationMs=-1,i.playMode=v.PLAYER_MODE_NOTIME_LIVE):(i.playParam.durationMs=1e3*i.player.duration,i.playMode=v.PLAYER_MODE_VOD),i.onLoadFinish&&i.onLoadFinish(e)},this.player.onReadyShowDone=()=>{i.onReadyShowDone&&i.onReadyShowDone()},this.player.onMakeItReady=()=>{null!=i.onMakeItReady&&i.onMakeItReady()},this.player.onPlayingTime=e=>{i._durationText(e),i._durationText(i.player.duration),null!=i.onPlayTime&&i.onPlayTime(e)},this.player.onPlayingFinish=()=>{i.pause(),i.seek(0),null!=i.onPlayFinish&&i.onPlayFinish()},this.player.onPlayState=e=>{i.onPlayState&&i.onPlayState(e)},this.player.onCacheProcess=e=>{i.onCacheProcess&&i.onCacheProcess(e)},this.player.onError=e=>{var t=e.msg&&e.msg.code===a.MsgCode.PLAY_ERROR;i.configFormat.enableDecoderDegrade&&t?(i.configFormat.extInfo.duration=null,i.player.release(),i._mpegTsEntry()):(i.player.release(),i.onPlayState&&i.onPlayState(!0),i.onError&&i.onError(e))},this.player.onSeekFinish=e=>{i.onSeekFinish&&i.onSeekFinish(e)},this.player.makeIt(this.videoURL)}_raw265Entry(){let e=this,t=function(){setTimeout((()=>{e.workerParse.postMessage({cmd:"get-nalu",data:null,msg:"get-nalu"}),!0===e.workerFetch.onMsgFetchFinished&&!0===e.workerParse.frameListEmpty&&!1===e.workerParse.streamEmpty&&e.workerParse.postMessage({cmd:"last-nalu",data:null,msg:"last-nalu"}),!0===e.workerParse.parseEmpty&&(e.workerParse.stopNaluInterval=!0),!0!==e.workerParse.stopNaluInterval&&t()}),1e3)},i=function(){setTimeout((()=>{e.configFormat.extInfo.readyShow&&(e.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL?(e.player.playFrameYUV(!0,!0),e.configFormat.extInfo.readyShow=!1,e.onReadyShowDone&&e.onReadyShowDone()):i())}),1e3)};this._makeMP4PlayerViewEvent(-1,this.configFormat.extInfo.rawFps,-1,{width:this.configFormat.playerW,height:this.configFormat.playerH},!0,v.CODEC_H265),this.timerFeed&&(window.clearInterval(this.timerFeed),this.timerFeed=null),e.workerFetch=new Worker(m.GetScriptPath((function(){let e=new AbortController,t=e.signal,i=null;onmessage=n=>{var r=n.data;let a=null;switch(a=void 0===r.cmd||null===r.cmd?"":r.cmd){case"start":var s=r.url;"http"===r.type?fetch(s,{signal:t}).then((function(e){let t=function(e){return e.read().then((function(i){if(!i.done)return i=i.value,postMessage({cmd:"fetch-chunk",data:i,msg:"fetch-chunk"}),t(e);postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}))};return t(e.body.getReader())})).catch((function(e){})):"websocket"===r.type&&((i=new WebSocket(s)).binaryType="arraybuffer",i.onopen=function(e){i.send("Hello WebSockets!")},i.onmessage=function(e){e.data instanceof ArrayBuffer&&0<(e=e.data).byteLength&&postMessage({cmd:"fetch-chunk",data:new Uint8Array(e),msg:"fetch-chunk"})},i.onclose=function(e){postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}),postMessage({cmd:"default",data:"WORKER STARTED",msg:"default"});break;case"stop":"http"===r.type?e.abort():"websocket"===r.type&&i&&i.close(),close()}}}))),e.workerFetch.onMsgFetchFinished=!1,e.workerFetch.onmessage=function(i){var n=i.data;let r=null;switch(r=void 0===n.cmd||null===n.cmd?"":n.cmd){case"fetch-chunk":var a=n.data;e.workerParse.postMessage({cmd:"append-chunk",data:a,msg:"append-chunk"});break;case"fetch-fin":e.workerFetch.onMsgFetchFinished=!0,t()}},e.workerParse=new Worker(m.GetScriptPath((function(){let e=function(){let e=new Object;return e.frameList=[],e.stream=null,e.frameListEmpty=function(){return e.frameList.length<=0},e.streamEmpty=function(){return null===e.stream||e.stream.length<=0},e.checkEmpty=function(){return!0===e.streamEmpty()&&!0===e.frameListEmpty()},e.pushFrameRet=function(t){return!(!t||null==t||(e.frameList&&null!=e.frameList&&null!=e.frameList||(e.frameList=[]),e.frameList.push(t),0))},e.nextFrame=function(){return!e.frameList&&null==e.frameList||null==e.frameList&&e.frameList.length<1?null:e.frameList.shift()},e.clearFrameRet=function(){e.frameList=null},e.setStreamRet=function(t){e.stream=t},e.getStreamRet=function(){return e.stream},e.appendStreamRet=function(t){if(!t||void 0===t||null==t)return!1;if(e.stream&&void 0!==e.stream&&null!=e.stream){var i=e.stream.length,n=t.length;(n=new Uint8Array(i+n)).set(e.stream,0),n.set(t,i),e.stream=n;for(let t=0;t<9999;t++){var r=e.nextNalu();if(!1===r||null==r)break;e.frameList.push(r)}}else e.stream=t;return!0},e.subBuf=function(t,i){return t=new Uint8Array(e.stream.subarray(t,i+1)),e.stream=new Uint8Array(e.stream.subarray(i+1)),t},e.lastNalu=function(){var t=e.subBuf(0,e.stream.length);e.frameList.push(t)},e.nextNalu=function(t=1){if(!(null==e.stream||e.stream.length<=4)){let n=-1;for(let r=0;r<e.stream.length;r++){if(r+5>=e.stream.length)return!1;if(0==e.stream[r]&&0==e.stream[r+1]&&1==e.stream[r+2]||0==e.stream[r]&&0==e.stream[r+1]&&0==e.stream[r+2]&&1==e.stream[r+3]){var i=r;if(r+=3,-1==n)n=i;else{if(t<=1)return e.subBuf(n,i-1);--t}}}}return!1},e.nextNalu2=function(t=1){if(!(null==e.stream||e.stream.length<=4)){let r=-1,a=null;for(let s=0;s<e.stream.length;s++){if(s+5>=e.stream.length)return-1!=r&&(a=e.subBuf(r,e.stream.length-1));var i="0 0 1"==e.stream.slice(s,s+3).join(" "),n="0 0 0 1"==e.stream.slice(s,s+4).join(" ");if(i||n)if(i=s,s+=3,-1==r)r=i;else{if(t<=1)return a=e.subBuf(r,i-1);--t}}}return!1},e}();onmessage=t=>{var i=t.data;let n=null;switch(n=void 0===i.cmd||null===i.cmd?"":i.cmd){case"append-chunk":var r=i.data;e.appendStreamRet(r),r=e.nextFrame(),postMessage({cmd:"return-nalu",data:r,msg:"return-nalu",parseEmpty:e.checkEmpty(),streamEmpty:e.streamEmpty(),frameListEmpty:e.frameListEmpty()});break;case"get-nalu":r=e.nextFrame(),postMessage({cmd:"return-nalu",data:r,msg:"return-nalu",parseEmpty:e.checkEmpty(),streamEmpty:e.streamEmpty(),frameListEmpty:e.frameListEmpty()});break;case"last-nalu":r=e.lastNalu(),postMessage({cmd:"return-nalu",data:r,msg:"return-nalu",parseEmpty:e.checkEmpty(),streamEmpty:e.streamEmpty(),frameListEmpty:e.frameListEmpty()});break;case"stop":postMessage("parse - WORKER STOPPED: "+i),close()}}}))),e.workerParse.stopNaluInterval=!1,e.workerParse.parseEmpty=!1,e.workerParse.streamEmpty=!1,e.workerParse.frameListEmpty=!1,e.workerParse.onmessage=t=>{var i,n,r;let a=null;"return-nalu"===(a=void 0===(t=t.data).cmd||null===t.cmd?"":t.cmd)&&(i=t.data,n=t.parseEmpty,r=t.streamEmpty,t=t.frameListEmpty,e.workerParse.parseEmpty=n,e.workerParse.streamEmpty=r,e.workerParse.frameListEmpty=t,!1===i||null==i?!0===e.workerFetch.onMsgFetchFinished&&!0===n&&(e.workerParse.stopNaluInterval=!0):(e.append265NaluFrame(i),e.workerParse.postMessage({cmd:"get-nalu",data:null,msg:"get-nalu"})))},this.workerFetch.postMessage({cmd:"start",url:m.ParseGetMediaURL(this.videoURL),type:this.mediaExtProtocol,msg:"start"}),i()}append265NaluFrame(e){e={data:e,pts:this.rawModePts},this.player.appendHevcFrame(e),this.configFormat.extInfo.readyShow&&this.player.cacheYuvBuf.getState()!=CACHE_APPEND_STATUS_CODE.NULL&&(this.player.playFrameYUV(!0,!0),this.configFormat.extInfo.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone(),this.rawModePts+=1/this.configFormat.extInfo.rawFps}_rtcPlayer(){let e=this;this.player=new n.a(this.configFormat.RtcPlugin,this.configFormat),this.player.onMakeItReady=()=>{e.onMakeItReady&&e.onMakeItReady()},this.player.onLoadFinish=async()=>{e.playParam.size=await e.player.getSize(),e.playParam.durationMs=e.player.duration,e.playParam.videoCodec=1,e.onLoadFinish&&e.onLoadFinish(),e.onReadyShowDone&&e.onReadyShowDone()},this.player.onReadyShowDone=()=>{e.onReadyShowDone&&e.onReadyShowDone()},this.player.onPlayingFinish=()=>{null!=e.onPlayFinish&&e.onPlayFinish()},this.player.onRtcEvent=t=>{null!=e.onRtcEvent&&e.onRtcEvent(t)},this.player.onPlayState=t=>{e.onPlayState&&e.onPlayState(t)},this.player.onError=t=>{e.onPlayState&&e.onPlayState(!1),e.onError&&e.onError(t)},this.player.makeIt()}initDecoder(){let e=this;this.player=s.default.Player(),this.player.onPerformance=t=>{e.onPerformance&&e.onPerformance(t)},this.player.onCacheLimit=e=>{this.hlsObj&&this.hlsObj.limitDownloads(e),this.isCacheLimit=e},this.player.onPause=()=>{e.onPause()},this.player.onPlay=()=>{e.onPlay()},this.player.onWasmError=t=>{e.onError&&e.onError(t),e.player.release&&e.player.release()},this.configFormat.useSoftDecoding=!0}loadJsWasm(e){w(e)}}t.default={cybercorejs:C},e.newcybercorejs=(e,t)=>new C(e,t)}.call(this,i(27))},function(e,t,i){"use strict";i.r(t);var n=i(19),r=i(26),a=i(0),s=i(1),o=i.n(s);i(101),i(5);const l=i(12),h=i(47),u=i(34),d=i(35),c=i(36),f=i(5),p=i(28);t.default={Player:e=>{let t={config:{width:e&&e.width||f.DEFAULT_WIDTH,height:e&&e.height||f.DEFAULT_HEIGHT,fps:e&&e.fps||f.DEFAULT_FPS,fixed:e&&e.fixed||f.DEFAULT_FIXED,sampleRate:e&&e.sampleRate||f.DEFAULT_SAMPLERATE,appendHevcType:e&&e.appendHevcType||f.APPEND_TYPE_STREAM,frameDurMs:e&&e.frameDur||f.DEFAULT_FRAME_DUR,playerId:e&&e.playerId||f.DEFAILT_WEBGL_PLAY_ID,audioNone:e&&e.audioNone||!1,token:e&&e.token||null,videoCodec:e&&e.videoCodec||f.CODEC_H265},vcodecerPtr:null,videoCallback:null,frameList:[],cacheInterval:null,cacheYuvBuf:u(25),nowPacket:null,stream:new Uint8Array,vCodecID:f.V_CODEC_NAME_HEVC,audio:null,liveStartMs:-1,durationMs:-1,videoPTS:0,loop:null,debugYUVSwitch:!1,debugID:null,cacheLoop:null,playParams:{seekPos:-1,mode:f.PLAYER_MODE_VOD,accurateSeek:!0,seekEvent:!1,realPlay:!0},calcuteStartTime:-1,fix_poc_err_skip:0,frameTime:0,frameTimeSec:0,preCostTime:0,realVolume:1,isPlaying:!1,isCaching:f.CACHE_NO_LOADCACHE,isNewSeek:!1,flushDecoder:0,isCheckDisplay:!1,isPlayLoadingFinish:0,vCachePTS:0,aCachePTS:0,showScreen:!1,noCacheFrame:0,onPlayingTime:null,onPlayingFinish:null,onSeekFinish:null,onLoadCache:null,onLoadCacheFinshed:null,onRender:null,resampleFps:0,seekTime:null,isSeekBack:null,appendAudioStatus:0,appendVideoStatus:0,yuvVideoStatus:0,performance:{frameRate:30,buffer:0,broken:[],bitRate:0,seek:[],decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0,decodeTime:null},seekInitTime:0,oneScondTime:(new Date).getTime(),frameRate:0,startPlayTime:0,onPerformance:null,onCacheLimit:null,curDecoderTime:null,onInitDecodeComplete:null,seekFinishCallBack:!1,onWasmError:null,wasmLoadFinish:!1,initPerformance:()=>{t.performance={frameRate:30,buffer:0,broken:[],bitRate:0,seek:[]}},setConfig:e=>{t.config=Object.assign(t.config,e),null==t.config.token||(t.config.token&&t.decoder&&t.wasmLoadFinish&&t.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:t.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:t.config.videoCodec}}),t.makeIt(),t.cacheThread())},setScreen:(e=!1)=>{null!=t&&(t.showScreen=e)},setSize:(e,i)=>{t.config.width=e||f.DEFAULT_WIDTH,t.config.height=i||f.DEFAULT_HEIGHT},setFrameRate:(e=25)=>{t.config.fps=e,t.config.frameDurMs=1e3/e},setDurationMs:(e=-1)=>{t.durationMs=e,0==t.config.audioNone&&t.audio.setDurationMs(e)},setPlayingCall:e=>{t.onPlayingTime=e},setVoice:e=>{t.realVolume=e,0==t.config.audioNone&&t.audio.setVoice(t.realVolume,t.videoPTS)},isPlayingState:()=>t.isPlaying||t.isCaching===f.CACHE_WITH_PLAY_SIGN,appendAACFrame:e=>{!0===t.isSeekBack&&(e.pts<t.seekTime&&0==t.appendAudioStatus&&(t.appendAudioStatus=-2),-2==t.appendAudioStatus)&&e.pts>t.seekTime&&(t.appendAudioStatus=-1),!1===t.isSeekBack&&e.pts-t.seekTime<0||!0===t.isSeekBack&&-1!=t.appendVideoStatus||(t.audio.addSample(e),t.aCachePTS=Math.max(e.pts,t.aCachePTS))},appendHevcFrame:e=>{var i,n,r;t.config.appendHevcType==f.APPEND_TYPE_STREAM?t.stream=new Uint8Array([...t.stream].concat(...e)):t.config.appendHevcType==f.APPEND_TYPE_FRAME&&(!0===t.isSeekBack&&(e.pts<t.seekTime&&0==t.appendVideoStatus&&(t.appendVideoStatus=-2),-2==t.appendVideoStatus)&&e.pts>t.seekTime&&(t.appendVideoStatus=-1),!1===t.isSeekBack&&e.pts-t.seekTime<0||!0===t.isSeekBack&&-1!=t.appendVideoStatus||((10<t.cacheYuvBuf.yuvCache.length||(({data:i,pts:n,isKey:r}=0==t.frameList.length?e:t.frameList.shift()),t.decodeNalu1Frame(i,n,!0,r),0<t.frameList.length))&&t.frameList.push(e),t.vCachePTS=Math.max(e.pts,t.vCachePTS)))},getCachePTS:()=>Math.max(t.vCachePTS,t.aCachePTS),endAudio:()=>{0==t.config.audioNone&&t.audio&&t.audio.stop()},cleanSample:()=>{0==t.config.audioNone&&t.audio&&t.audio.cleanQueue()},cleanVideoQueue:()=>{t.config.appendHevcType==f.APPEND_TYPE_STREAM?t.stream=new Uint8Array:t.config.appendHevcType==f.APPEND_TYPE_FRAME&&(t.frameList=[],t.frameList.length=0)},cleanCacheYUV:()=>{t.cacheYuvBuf.cleanPipeline()},pause:()=>{t.loop&&window.clearInterval(t.loop),cancelAnimationFrame(t.requestAnimationFrameId),t.loop=null,0==t.config.audioNone&&t.audio&&t.audio.pause(),t.isPlaying=!1,t.isCaching===f.CACHE_WITH_PLAY_SIGN&&(t.isCaching=f.CACHE_WITH_NOPLAY_SIGN)},checkFinished:(e=f.PLAYER_MODE_VOD)=>e==f.PLAYER_MODE_VOD&&t.cacheYuvBuf.yuvCache.length<=0&&t.videoPTS.toFixed(1)>=(t.durationMs-t.config.frameDurMs)/1e3&&(null!=t.onPlayingFinish&&t.onPlayingFinish((()=>{t.config&&t.config.repeat&&t.onPlay()})),!0),clearAllCache:()=>{t.nowPacket=null,t.vCachePTS=0,t.aCachePTS=0,t.cleanSample(),t.cleanVideoQueue(),t.cleanCacheYUV()},seek:(e,i={},n)=>{t.decoder.postMessage({t:a.d.RELEASE_DECODE}),t.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:t.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:t.config.videoCodec}}),t.seekInitTime=(new Date).getTime(),t.performance.seek.push({seekPts:i.seekTime,fromSeekPts:t.videoPTS,time:0});var r=t.isPlaying;null!=t.onLoadCache&&t.onLoadCache(),t.pause(),t.stopCacheThread(),t.clearAllCache(),e&&e(),t.isNewSeek=!0,t.flushDecoder=1,t.isSeekBack=t.videoPTS>i.seekTime,t.videoPTS=0,e={seekPos:i.seekTime||-1,mode:i.mode||f.PLAYER_MODE_VOD,accurateSeek:i.accurateSeek||!0,seekEvent:i.seekEvent||!0,realPlay:r},t.seekTime=i.seekTime,t.cacheThread(),t.play(e),n&&(t.seekFinishCallBack=n)},getNalu1Packet:(e=!0)=>{window.performance.now();let i=null,n=-1,r=!1;if(t.config.appendHevcType==f.APPEND_TYPE_STREAM)i=t.nextNalu();else{if(t.config.appendHevcType!=f.APPEND_TYPE_FRAME)return null;var a=t.frameList.shift();if(!a)return null;i=a.data,n=a.pts,r=a.isKey,e&&(t.videoPTS=n)}return window.performance.now(),{nalBuf:i,pts:n,isKey:r}},decodeNalu1Frame:(e,i,n=0,r)=>{var s={t:a.d.DECODE_VIDEO,nalBuf:e,pts:i,flushDecoder:t.flushDecoder};t.decoder.postMessage(s,[e.buffer]),t.curDecoderTime=i},cacheThread:()=>{t.stopCacheThread(),t.cacheLoop=window.setInterval((()=>{var e,i,n=t.getNalu1Packet(!1);null==n?t.playParams.mode!=f.PLAYER_MODE_NOTIME_LIVE&&t.stopCacheThread():(e=n.nalBuf,i=n.pts,n=n.isKey,t.decodeNalu1Frame(e,i,!0,n))}),10)},stopCacheThread:()=>{null!==t.cacheLoop&&(window.clearInterval(t.cacheLoop),t.cacheLoop=null)},loadCache:()=>{if(!(0<((t.durationMs-t.config.frameDurMs)/1e3-t.videoPTS.toFixed(1)<1))){var e=t.isPlaying;t.cacheYuvBuf.yuvCache.length<=3&&(t.pause(),null!=t.onLoadCache&&t.onLoadCache(),t.performance.broken.push({start:(new Date).getTime,end:null,time:null}),t.isCaching=e?f.CACHE_WITH_PLAY_SIGN:f.CACHE_WITH_NOPLAY_SIGN,e=t.frameDur,null===t.cacheInterval&&(t.cacheInterval=window.setInterval((()=>{var e,i;25<=t.cacheYuvBuf.yuvCache.length&&(null!=t.onLoadCacheFinshed&&t.onLoadCacheFinshed(),(e=t.performance.broken[t.performance.broken.length-1])&&e.start&&!e.end&&(i=(new Date).getTime(),e.end=i,e.time=i-e.start),window.clearInterval(t.cacheInterval),t.cacheInterval=null,t.isCaching===f.CACHE_WITH_PLAY_SIGN&&t.play(t.playParams),t.isCaching=f.CACHE_NO_LOADCACHE)}),e)))}},playFunc:()=>{let e=!1;if(t.playParams.seekEvent||l.GetMsTime()-t.calcuteStartTime>=t.frameTime-t.preCostTime){let r=e=!0;if(t.calcuteStartTime=l.GetMsTime(),t.config.audioNone)t.playFrameYUV(r,t.playParams.accurateSeek);else{0<t.fix_poc_err_skip&&(t.fix_poc_err_skip--,r=!1),t.audio.setVideoPTS(t.videoPTS);var i=t.videoPTS-t.audio.getAlignVPTS();if(0<i)return void(t.playParams.seekEvent&&!t.config.audioNone&&t.audio.setVoice(0));if(r){if(!(r=-1*i<=+t.frameTimeSec)){var n=parseInt(i/t.frameTimeSec);for(let e=0;e<n;e++)t.playFrameYUV(!1,t.playParams.accurateSeek);null!=t.onLoadCacheFinshed&&t.onLoadCacheFinshed(),t.playFrameYUV(!0,t.playParams.accurateSeek)}t.playFrameYUV(r,t.playParams.accurateSeek)}}}return t.playParams.seekEvent&&(t.playParams.seekEvent=!1,t.onSeekFinish(),t.isPlaying||(t.playFrameYUV(!0,t.playParams.accurateSeek),t.pause()),t.config.audioNone||t.audio.setVoice(t.realVolume)),t.onPlayingTime&&t.onPlayingTime(t.videoPTS),t.checkFinished(t.playParams.mode),e},play:e=>{if(t.playParams=e,t.calcuteStartTime=l.GetMsTime(),t.noCacheFrame=0,t.isPlaying=t.playParams.realPlay,t.performance.code="hevc",t.performance.playStyle="hls_"+t.playParams.mode,!0===t.config.audioNone&&t.playParams.mode==f.PLAYER_MODE_NOTIME_LIVE){t.liveStartMs=l.GetMsTime(),t.frameTime=Math.floor(1e3/t.config.fps),t.frameTimeSec=t.frameTime/1e3;let e=0;t.loop=window.setInterval((()=>{(l.GetMsTime()-t.liveStartMs)/t.frameTime>=e&&(t.playFrameYUV(!0,t.playParams.accurateSeek),e+=1)}),1)}else t.videoPTS>=t.playParams.seekPos&&!t.isNewSeek||0===t.playParams.seekPos||0===t.playParams.seekPos?(t.frameTime=1e3/t.config.fps,t.frameTimeSec=t.frameTime/1e3,0==t.config.audioNone&&t.audio.play(),t.realVolume=t.config.audioNone?0:t.audio.voice,t.playParams.seekEvent&&(t.fix_poc_err_skip=10),cancelAnimationFrame(t.requestAnimationFrameId),t.displayLoop()):(t.loop=window.setInterval((()=>{t.playFrameYUV(!1,t.playParams.accurateSeek),t.checkFinished(t.playParams.mode)?(window.clearInterval(t.loop),t.loop=null):t.videoPTS>t.playParams.seekPos&&(window.clearInterval(t.loop),t.loop=null,t.play(t.playParams),t.isSeekBack=null,t.seekTime=null,t.appendAudioStatus=0,t.appendVideoStatus=0,t.yuvVideoStatus=0,t.performance.seek[t.performance.seek.length-1].time=(new Date).getTime()-t.seekInitTime,t.seekFinishCallBack)&&t.seekFinishCallBack()}),35),t.isNewSeek=!1)},displayLoop:()=>{var e=l.GetMsTime();t.requestAnimationFrameId=requestAnimationFrame(t.displayLoop.bind(void 0)),t.playFunc(),t.preCostTime=l.GetMsTime()-e},stop:()=>{t.release(),t.stream=new Uint8Array},release:()=>(void 0!==t.yuv&&null!==t.yuv&&(c.releaseContext(t.yuv),t.yuv=null),t.decoder.postMessage({t:a.d.RELEASE_DECODE}),t.endAudio(),t.cacheLoop&&window.clearInterval(t.cacheLoop),t.cacheLoop=null,t.loop&&window.clearInterval(t.loop),t.loop=null,t.pause(),null!==t.videoCallback&&Module.removeFunction(t.videoCallback),t.videoCallback=null,t.stream=null,t.clearAllCache(),t.frameList.length=0,t.durationMs=-1,t.videoPTS=0,t.isPlaying=!1,t.canvas&&t.canvas.remove(),t.canvas=null,t.decoder&&t.decoder.terminate(),!(window.onclick=document.body.onclick=null)),nextNalu:(e=1)=>{if(!(t.stream.length<=4)){let r=-1;for(let a=0;a<t.stream.length;a++){if(a+5>=t.stream.length)return-1!=r&&(i=t.stream.subarray(r),t.stream=new Uint8Array,i);var i="0 0 1"==t.stream.slice(0,3).join(" "),n="0 0 0 1"==t.stream.slice(0,4).join(" ");if(i||n){if(-1==r)r=a;else{if(e<=1)return n=t.stream.subarray(r,a),t.stream=t.stream.subarray(a),n;--e}a+=3}}}return!1},decodeSendPacket:e=>{var i=Module._malloc(e.length);return Module.HEAP8.set(e,i),e=Module.cwrap("decodeSendPacket","number",["number","number","number"])(t.vcodecerPtr,i,e.length),Module._free(i),e},decodeRecvFrame:()=>Module.cwrap("decodeRecv","number",["number"])(t.vcodecerPtr),playYUV:()=>t.playFrameYUV(!0,!0),playFrameYUV:(e=!1,i=!1)=>{var n=t.cacheYuvBuf.vYuv();if(null==n)return t.noCacheFrame+=1,e&&!t.playParams.seekEvent&&t.loadCache(),!1;if(80<t.cacheYuvBuf.yuvCache.length||100<t.frameList.length?t.onCacheLimit&&t.onCacheLimit(!0):t.onCacheLimit&&t.onCacheLimit(!1),t.noCacheFrame=0,t.cacheYuvBuf.yuvCache.length<100&&0<t.frameList.length){const{data:e,pts:i,isKey:n}=t.frameList.shift();t.decodeNalu1Frame(e,i,!0,n)}let r=n.pts;return t.videoPTS=r,(!e&&i||e)&&e&&(t.onRender(n.width,n.height,n.y,n.u,n.v),t.drawImage(n.width,n.height,n.y,n.u,n.v)),e&&!t.playParams.seekEvent&&t.isPlaying&&t.loadCache(),!0},drawImage:(e,i,n,r,a)=>{window.performance.now(),t.canvas.width===e&&t.canvas.height==i||(t.canvas.width=e,t.canvas.height=i),t.showScreen&&null!=t.onRender&&t.onRender(e,i,n,r,a),t.isCheckDisplay||t.checkDisplaySize(e,i),c.renderFrame(t.yuv,n,r,a,e,i),t.frameRate++,-1==t.performance.firstFrameTime&&(t.performance.firstFrameTime=(new Date).getTime()-t.startPlayTime),t.oneScondTime&&1e3<(new Date).getTime()-t.oneScondTime&&(n=JSON.parse(JSON.stringify(t.frameRate)),t.frameRate=0,t.oneScondTime=(new Date).getTime(),t.performance.frameRate=n,0<t.cacheYuvBuf.yuvCache.length&&(t.performance.buffer=t.cacheYuvBuf.yuvCache[t.cacheYuvBuf.yuvCache.length-1].pts-t.cacheYuvBuf.yuvCache[0].pts),t.onPerformance)&&t.onPerformance(t.performance)},debugYUV:e=>{t.debugYUVSwitch=!0,t.debugID=e},checkDisplaySize:(e,i)=>{var n=e/t.config.width>i/t.config.height,r=t.config.width/e,a=t.config.height/i;return n=n?r:a,a=(r=t.config.fixed)?t.config.width:parseInt(e*n),e=r?t.config.height:parseInt(i*n),t.canvas.offsetWidth==a&&t.canvas.offsetHeight==e||(r=parseInt((t.canvasBox.offsetHeight-e)/2),i=parseInt((t.canvasBox.offsetWidth-a)/2),t.canvas.style.marginTop=r+"px",t.canvas.style.marginLeft=i+"px",t.canvas.style.width=a+"px",t.canvas.style.height=e+"px"),t.isCheckDisplay=!0,[a,e]},makeWasm:()=>{var e=Object(n.getPlayerPath)();t.decoder=new r.a,t.decoder.postMessage({t:a.d.LOAD_WAMS_JS,pathUrl:e,isSafari:o.a.isSafari()}),t.decoder.onmessage=e=>{var i,n,r,s=e.data;switch(s.t){case a.c.WASM_LOAD_FINISH:t.startPlayTime=(new Date).getTime(),t.wasmLoadFinish=!0,t.config.token&&t.decoder.postMessage({t:a.d.INIT_DECODER,data:{token:t.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:t.config.videoCodec}});break;case a.c.DECODE_FINISH:!0===t.isSeekBack&&-1!=t.yuvVideoStatus&&(!(s.ptsSe-t.seekTime<0||5<s.ptsSe-t.seekTime||-3==t.yuvVideoStatu)||(t.yuvVideoStatus=-3,s.ptsSec<t.seekTime&&0==t.yuvVideoStatus&&(t.yuvVideoStatus=-2),-2==t.yuvVideoStatus&&streamBytes.pts>t.seekTime))&&(t.yuvVideoStatus=-1),!1===t.isSeekBack&&s.ptsSec-t.seekTime<0||!0===t.isSeekBack&&-1!=t.yuvVideoStatus||(t.decodeFramecount--,t.performance.width||(t.performance.width=s.width,t.performance.height=s.height),i=new d.CacheYuvStruct(s.ptsSec,s.width,s.height,s.y,s.u,s.v),t.cacheYuvBuf.appendCacheByCacheYuv(i),80<t.cacheYuvBuf.yuvCache.length||15<t.curDecoderTime-s.ptsSec||100<t.frameList.length?t.onCacheLimit&&t.onCacheLimit(!0):t.onCacheLimit&&t.onCacheLimit(!1),t.cacheYuvBuf.yuvCache.length<100&&0<t.frameList.length&&(({data:i,pts:n,isKey:r}=t.frameList.shift()),t.decodeNalu1Frame(i,n,!0,r)));break;case a.c.DEOCDE_INIT_FINISH:t.onInitDecodeComplete&&t.onInitDecodeComplete();break;case a.c.SET_FRAME:t.performance.decodeFrameRate=s.frameRate,t.performance.decodeTime=s.decodeTime;break;case a.c.WAMS_ERROR:t.onWasmError&&t.onWasmError(s.data)}}},makeIt:()=>{var e=document.querySelector("div#"+t.config.playerId),i=document.createElement("canvas");i.style.width=e.clientWidth+"px",i.style.height=e.clientHeight+"px",i.style.top="0px",i.style.left="0px",e.appendChild(i),t.canvasBox=e,t.canvas=i,t.yuv=c.setupCanvas(i,{preserveDrawingBuffer:!1}),0==t.config.audioNone&&(t.audio=h({sampleRate:t.config.sampleRate,appendType:t.config.appendHevcType})),t.isPlayLoadingFinish=1},bindEvents:()=>{document.addEventListener("visibilitychange",t._onVisibilityChange.bind(void 0))},_onVisibilityChange:()=>{"visible"!==document.visibilityState||t.isPlayingState()?t.onPause():t.onPlay()}};return t.makeWasm(),t.bindEvents(),t}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";i.r(t),i.d(t,"Mp4Player",(function(){return s}));var n=i(4),r=i(66);const a=i(5);i(1);var s=class{constructor(e){this.configFormat={width:e.width||a.DEFAULT_WIDTH,height:e.height||a.DEFAULT_HEIGHT,fps:e.fps||a.DEFAULT_FPS,fixed:e.fixed||a.DEFAULT_FIXED,sampleRate:e.sampleRate||a.DEFAULT_SAMPLERATE,appendHevcType:e.appendHevcType||a.APPEND_TYPE_STREAM,frameDurMs:e.frameDur||a.DEFAULT_FRAME_DUR,playerId:e.playerId||a.DEFAILT_WEBGL_PLAY_ID,audioNone:e.audioNone||!1,token:e.token||null,videoCodec:e.videoCodec||a.CODEC_H265,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1},this.videoTag=null,this.isPlaying=!1,this.duration=-1,this.bufferInterval=null,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onPlayState=null,this.onCacheProcess=null,this.onSeekFinish=null,this.onSeiInfo=null,this.sei_maps=[],this.sei_count=0,this.seiTimer=null,this.onSeiTimer=null,this.onSeekStart=null,this.seekResult=null,this.onError=null}makeIt(e){let t=this;this.videoTag=null,this.videoTag=document.createElement("video"),this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),this.videoTag.setAttribute("crossOrigin","anonymous"),this.videoTag.setAttribute("webkit-playsinline","true"),this.videoTag.setAttribute("playsinline","true"),!0===this.configFormat.autoPlay&&(this.play(),window.onclick=document.body.onclick=function(e){t.videoTag.muted=!1}),this.configFormat.audioNone&&(this.videoTag.setAttribute("muted","true"),this.videoTag.setAttribute("autoplay","autoplay")),Object(r.a)(this.videoTag),this.insertVideo(),this.videoTag.onplay=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e),t.seiTimer&&(clearInterval(t.seiTimer),t.seiTimer=null),t.seiTimer=setInterval((()=>{t.onSeiTimer&&t.onSeiTimer(t.videoTag.currentTime)}),30)},this.videoTag.onpause=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e)},this.videoTag.ontimeupdate=()=>{t.onPlayingTime&&t.onPlayingTime(t.videoTag.currentTime)},this.videoTag.onended=()=>{t.sei_count=0,t.onPlayingFinish&&t.onPlayingFinish()},this.videoTag.onloadedmetadata=e=>{t.duration=t.videoTag.duration,t.insertVideo(),t.onLoadFinish&&t.onLoadFinish(),null!==t.bufferInterval&&(window.clearInterval(t.bufferInterval),t.bufferInterval=null),t.bufferInterval=window.setInterval((function(){var e,i;t.videoTag.buffered.length&&((e=t.videoTag.buffered.end(t.videoTag.buffered.length-1))>=t.duration-.04&&(t.onCacheProcess&&t.onCacheProcess(t.duration),window.clearInterval(t.bufferInterval)),t.seekReadyPts&&e>t.seekReadyPts&&(i=t.seek(t.seekReadyPts),t.seekResult=i,t.seekReadyPts=null),t.onCacheProcess)&&t.onCacheProcess(e)}),200)},this.videoTag.onerror=i=>{var r=i.target.error,a=-1<r.message.toLowerCase().indexOf(n.ErrorDetails.DEMUXER_ERROR),s=!a&&r&&r.code===n.MsgCode.DEOCDE_NOT_SUPPORT;t.onError&&t.onError({msg:s?n.ErrorDetails.NOT_SUPPORT_DETAIL:r,code:a?n.MsgCode.DEMUXER_ERROR:r&&r.code||n.MsgCode.UNKNOW_ERROR,event:i.type,url:e,errorType:s||a?n.ErrorTypes.NOT_SUPPORT:i.type})},this.videoTag.onseeking=()=>{this.onSeekStart&&this.onSeekStart()},this.videoTag.onseeked=()=>{t.onSeekFinish&&t.onSeekFinish(t.seekResult||!0)},this.videoTag.src=e,this.videoTag.style.width="100%",this.videoTag.style.height="100%",this.onMakeItReady&&this.onMakeItReady()}insertVideo(){var e,t=document.querySelector("#"+this.configFormat.playerId);t.getElementsByTagName("video")[0]||(e=t.getElementsByTagName("div"),t.insertBefore(this.videoTag,e[0]))}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.configFormat.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.configFormat.height}}play(){var e=this.videoTag.play();void 0!==e&&e.then((e=>{})).catch((e=>{}))}seek(e){try{this.videoTag.currentTime=e}catch(t){return this.videoTag.currentTime=0,this.seekReadyPts=e,this.seekResult=!1}}pause(){this.videoTag&&this.videoTag.pause&&this.videoTag.pause()}setVoice(e){this.videoTag.volume=e,this.videoTag.muted=0==e}isPlayingState(){return this.videoTag&&!this.videoTag.paused}release(){this.videoTag&&(["src","onplay","onpause","ontimeupdate","onended","onloadedmetadata","onerror","onseeking","onseeked"].forEach((e=>{this.videoTag[e]&&(this.videoTag[e]=null)})),this.videoTag.currentTime&&(this.videoTag.currentTime=0),this.pause());var e=document.querySelector("#"+this.configFormat.playerId);if(e)try{e.removeChild(this.videoTag)}catch(e){}this.videoTag&&this.videoTag.remove&&this.videoTag.remove(),this.videoTag=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onPlayState=null,this.sei_maps=[],this.sei_count=0,null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this.seiTimer&&(clearInterval(this.seiTimer),this.seiTimer=null),window.onclick=document.body.onclick=null}nativeNextFrame(){void 0!==this.videoTag&&null!==this.videoTag&&(this.videoTag.currentTime+=1/this.configFormat.fps)}}},function(e,t,i){"use strict";i.r(t);var n=i(51),r=i(0),a=i(26),s=i(19),o=i(1),l=i.n(o);const h=i(37),u=i(29);i(34),i(35);const d=i(36),c=i(12);i(59);const f=i(47),p=i(5),m=i(28);class g{constructor(e,t,i,n,r,a,s,o,l){this.pts=l,this.data_y=e,this.data_u=t,this.data_v=i,this.line1=n,this.line2=r,this.line3=a,this.width=s,this.height=o,this.byteAlignIncr=this.line1-this.width}}t.default={CNativeCore:class{constructor(e){this.config={width:e.width||p.DEFAULT_WIDTH,height:e.height||p.DEFAULT_HEIGHT,fps:e.fps||p.DEFAULT_FPS,sampleRate:e.sampleRate||p.DEFAULT_SAMPLERATE,playerId:e.playerId||p.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,readyShow:e.readyShow||!1,checkProbe:e.checkProbe,ignoreAudio:e.ignoreAudio,playMode:e.playMode||p.PLAYER_MODE_VOD,autoPlay:e.autoPlay||!1,defaultFps:e.defaultFps||-1,cacheLength:e.cacheLength||50,videoCodec:e&&e.videoCodec||p.CODEC_H265},this.config.cacheLength=Math.max(this.config.cacheLength,5),this.probeSize=4524611,this.audioWAudio=null,this.audioVoice=1,this.frameCallTag=0,this.seekTarget=0,this.avSeekVState=!1,this.isNewSeek=!1,this.openFrameCall=!0,this.bufRecvStat=!1,this.bufObject=u(),this.bufLastVDTS=0,this.bufLastADTS=0,this.yuvMaxTime=0,this.loopMs=10,this.isCacheV=p.CACHE_NO_LOADCACHE,this.playVPipe=[],this._videoQueue=[],this._VIDEO_CACHE_LEN=this.config.cacheLength,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.duration=-1,this.channels=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.isCheckDisplay=!1,this.frameTime=1e3/this.config.fps,this.vCodecID=p.V_CODEC_NAME_UNKN,this.audioIdx=-1,this.audioNone=!1,this.frameDur=0,this.canvasBox=null,this.canvas=null,this.yuv=null,this.retryAuSampleNo=0,this.cacheStatus=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.reFull=!1,this.bufOK=!1,this.avRecvInterval=null,this.avFeedVideoInterval=null,this.avFeedAudioInterval=null,this.decVFrameInterval=null,this.playFrameInterval=null,this.onProbeFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onCacheProcess=null,this.onReadyShowDone=null,this.onRelease=null,this.playModeEnum=this.config.playMode===p.PLAYER_MODE_NOTIME_LIVE?1:0,this.decoder=null,this.demuxWorker=null,this.isWasmInit=!1,this.isDemuxWasmInit=!1,this.makeWasm(),this.onWasmFinished=null,this.naluLListLength=0,this.time=0,this.resampleFps=0,this.requestAnimationFrameId=null,this.calcuteStartTime=0,this.nowTimestamp=0,this.playFrameCostTime=0,this.performance={frameRate:30,buffer:0,broken:[],bitRate:0,seek:[],decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0,decodeTime:null},this.seekInitTime=0,this.oneScondTime=(new Date).getTime(),this.frameRate=0,this.startPlayTime=0,this.onPerformance=null,this.onWasmError=null}makeWasm(){var e=Object(s.getPlayerPath)();this.demuxWorker=new n.a,this.demuxWorker.postMessage({t:r.b.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.demuxWorker.onmessage=e=>{var t=e.data;switch(t.t){case r.a.WASM_LOAD_FINISH:-1==this.performance.firstFrameTime&&(this.startPlayTime=(new Date).getTime()),this.config.token&&this.demuxWorker.postMessage({t:r.b.INIT_DECODER,data:{token:this.config.token,playerVersion:m.PLAYER_VERSION,ignoreAudio:this.config.ignoreAudio,playModeEnum:this.playModeEnum,defaultFps:this.config.defaultFps}});break;case r.a.SNIFF_INIT_FINISH:this.isDemuxWasmInit=!0,this.isWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case r.a.POST_PROBEDATA:var{duration:i,width:n,height:a,fps:s,audioIdx:o,sample_rate:l,channels:h,vcodec_name_id:u,sample_fmt:d}=t;this._probeFinCallback(i,n,a,s,o,l,h,u,d);break;case r.a.POST_NALUDATA:var{d:i,len:n,isKey:a,pts:s,dts:o,isRawStream:l}=t;this._naluCallback(i,n,a,t.width,t.height,s,o,l);break;case r.a.POST_AACDATA:var{line1:h,channel:u}=t;this._aacFrameCallback(t.d,h,u,t.pts);break;case r.a.POST_FRAMEDATA:this._frameCallback(t.buf_y,t.buf_u,t.buf_v,t.line1,t.line2,t.line3,t.width,t.height,t.pts,t.tag);break;case r.a.POST_NALU_LENGTH:this.naluLListLength=t.l;break;case r.a.WAMS_ERROR:this.onWasmError&&this.onWasmError(t.data)}},this.decoder=new a.a,this.decoder.postMessage({t:r.d.LOAD_WAMS_JS,pathUrl:e,isSafari:l.a.isSafari()}),this.decoder.onmessage=e=>{var t,i=e.data;switch(i.t){case r.c.WASM_LOAD_FINISH:this.config.token&&this.decoder.postMessage({t:r.d.INIT_DECODER,data:{token:this.config.token,playerVersion:m.PLAYER_VERSION,videoCodec:this.videoCodec}});break;case r.c.DECODE_FINISH:3<this.resampleFps?(this.resampleFps=0,t={t:r.d.RETURN_VIDEO_BUFFER,f:i},this.decoder.postMessage(t,[t.f.y.buffer,t.f.u.buffer,t.f.v.buffer])):(this.performance.width||(this.performance.width=i.width,this.performance.height=i.height),this.resampleFps++,this._frameCallback(i.y,i.u,i.v,i.stride_y,i.stride_u,i.stride_v,i.width,i.height,i.ptsSec,this.frameCallTag));break;case r.c.DEOCDE_INIT_FINISH:this.isWasmInit=!0,this.isDemuxWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case r.c.SET_FRAME:this.performance.decodeFrameRate=i.frameRate,this.performance.decodeTime=i.decodeTime}}}_createWorker1(){let e=this;this.worker1=new n.a("./dist/dc-worker-dist.js"),this.worker1ready=!1,this.worker1decing=!1,this.worker1.onmessage=function(t){var i=(t=t.data).cmd,n=t.params;switch(i){case"onRuntimeInitialized":e.worker1.postMessage({cmd:"AVSniffStreamInit",params:[e.config.token,m.PLAYER_VERSION]});break;case"onInitDecOK":e.worker1ready=!0;break;case"decodeVideoFrame_Start":e.worker1decing=!0;break;case"decodeVideoFrame_End":e.worker1decing=!1;break;case"_frameCallback":e._handleFrameYUVCallback(n.buf_y,n.buf_u,n.buf_v,n.line1,n.line2,n.line3,n.width,n.height,n.pts,n.tag);break;case"stop_End":e.worker1.onmessage=null,e.worker1=null}}}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return null!==this.playFrameInterval&&(window.clearInterval(this.playFrameInterval),this.playFrameInterval=null),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),this._clearDecInterval(),this._removeBindFuncPtr(),this.demuxWorker.postMessage({t:r.b.RELEASE_SNIFF}),this.demuxWorker&&this.demuxWorker.terminate(),this.decoder.postMessage({t:r.d.RELEASE_DECODE}),this.decoder&&this.decoder.terminate(),this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,this.bufRecvStat=!1,this.bufObject.cleanPipeline(),this.playVPipe.length=0,this.loopMs=10,void 0!==this.yuv&&null!==this.yuv&&(d.releaseContext(this.yuv),this.yuv=null),void 0!==this.canvas&&null!==this.canvas&&(this.canvas.remove(),this.canvas=null),this.config.readyShow=!0,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],this.onRelease&&this.onRelease(),-1}setScreen(e=!1){this.showScreen=e}getCachePTS(){return 1!==this.config.ignoreAudio&&this.audioWAudio?Math.max(this.vCachePTS,this.aCachePTS):this.vCachePTS}getMaxPTS(){return Math.max(this.vCachePTS,this.aCachePTS)}isPlayingState(){return this.isPlaying}_clearDecInterval(){this.decVFrameInterval&&window.clearInterval(this.decVFrameInterval),this.decVFrameInterval=null}_checkPlayFinished(){return!(this.config.playMode!==p.PLAYER_MODE_VOD||!(!0===this.bufRecvStat&&(this.playPTS>=this.bufLastVDTS||this.audioWAudio&&this.playPTS>=this.bufLastADTS)||this.duration-this.playPTS<this.frameDur)||(this.pause(),this._clearDecInterval(),this.onPlayingTime&&this.onPlayingTime(this.duration),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.onPlayingFinish&&this.onPlayingFinish(),this.setPerformanceBrokenEnd(),0))}play(){let e=this;if(this.performance.playStyle="flv_vod",this.performance.code="hevc",this.isCacheV===p.CACHE_WITH_NOPLAY_SIGN&&(this.isCacheV=p.CACHE_WITH_PLAY_SIGN),this.isPlaying=!0,!this.playFrameInterval||null===this.playFrameInterval||null==this.playFrameInterval){let t=0,i=0,n=0;const r=+this.frameTime;this.config.playMode===p.PLAYER_MODE_NOTIME_LIVE?this.playFrameInterval=window.setInterval((()=>{var r;i=c.GetMsTime(),0<e._videoQueue.length&&i-t>=e.frameTime-n&&(r=e._videoQueue.shift(),d.renderFrame(e.yuv,r.data_y,r.data_u,r.data_v,r.line1,r.height),this.setPerformance(),(n=c.GetMsTime()-i)>=e.frameTime&&(n=e.frameTime),t=i)}),2):this.playFrameInterval=window.setInterval((()=>{if(i=c.GetMsTime(),0<this._videoQueue.length&&i-t>=this.frameTime-n){var e=this._videoQueue[0].pts;let s=0;if(this.isNewSeek||null===this.audioWAudio||void 0===this.audioWAudio||(s=1e3*(e-this.audioWAudio.getAlignVPTS()),this.playPTS=Math.max(this.audioWAudio.getAlignVPTS(),this.playPTS)),t=i,0<s)return;if(this.playPTS=Math.max(e,this.playPTS),this.isNewSeek&&this.seekTarget-this.frameDur>e)return n=this.frameTime,void this._videoQueue.shift();this.isNewSeek&&(this.audioWAudio&&this.audioWAudio.setVoice(this.audioVoice),this.audioWAudio&&this.audioWAudio.play(),n=0,this.isNewSeek=!1,this.seekTarget=0,this.performance.seek[this.performance.seek.length-1].time=(new Date).getTime()-this.seekInitTime);var a=this._videoQueue.shift();if(this.showScreen&&this.onRender&&this.onRender(a.line1,a.height,a.data_y,a.data_u,a.data_v),d.renderFrame(this.yuv,a.data_y,a.data_u,a.data_v,a.line1,a.height),this.setPerformance(),this.onPlayingTime&&this.onPlayingTime(e),!this.isNewSeek&&this.audioWAudio&&(s<0&&-1*s<=r||0<=s)){if(this.config.playMode===p.PLAYER_MODE_VOD)if(e>=this.duration)this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.onPlayingFinish&&this.onPlayingFinish(),this._clearDecInterval(),this.pause();else if(this._checkPlayFinished())return;n=c.GetMsTime()-i}else!this.isNewSeek&&this.audioWAudio&&(n=this.frameTime)}this._checkPlayFinished()}),30)}this.isNewSeek||this.audioWAudio&&this.audioWAudio.play()}displayLoop(e){this.playFunc(e),this.requestAnimationFrameId=requestAnimationFrame(this.displayLoop.bind(this))}playFunc(e){if(this.nowTimestamp=c.GetMsTime(),0<this._videoQueue.length&&this.nowTimestamp-this.calcuteStartTime>=this.frameTime-this.playFrameCostTime){var t=this._videoQueue[0].pts;let n=0;if(this.isNewSeek||null===this.audioWAudio||void 0===this.audioWAudio||(n=1e3*(t-this.audioWAudio.getAlignVPTS()),this.playPTS=Math.max(this.audioWAudio.getAlignVPTS(),this.playPTS)),this.calcuteStartTime=this.nowTimestamp,0<n)return;if(this.playPTS=Math.max(t,this.playPTS),this.isNewSeek&&this.seekTarget-this.frameDur>t)return this.playFrameCostTime=this.frameTime,void this._videoQueue.shift();this.isNewSeek&&(this.audioWAudio&&this.audioWAudio.setVoice(this.audioVoice),this.audioWAudio&&this.audioWAudio.play(),this.playFrameCostTime=0,this.isNewSeek=!1,this.seekTarget=0);var i=this._videoQueue.shift();if(this.showScreen&&this.onRender&&this.onRender(i.line1,i.height,i.data_y,i.data_u,i.data_v),d.renderFrame(this.yuv,i.data_y,i.data_u,i.data_v,i.line1,i.height),this.setPerformance(),this.onPlayingTime&&this.onPlayingTime(t),!this.isNewSeek&&this.audioWAudio&&(n<0&&-1*n<=e||0<=n)){if(this.config.playMode===p.PLAYER_MODE_VOD)if(t>=this.duration)this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.onPlayingFinish&&this.onPlayingFinish(),this.setPerformanceBrokenEnd(),this._clearDecInterval(),this.pause();else if(this._checkPlayFinished())return;this.playFrameCostTime=c.GetMsTime()-this.nowTimestamp}else!this.isNewSeek&&this.audioWAudio&&(n<0&&-1*n>e?this.playFrameCostTime=this.frameTime:this.layFrameCostTime=this.frameTime)}this._checkPlayFinished()}pause(){this.isPlaying=!1,this._pause(),this.isCacheV===p.CACHE_WITH_PLAY_SIGN&&(this.isCacheV=p.CACHE_WITH_NOPLAY_SIGN)}_pause(){this.playFrameInterval&&window.clearInterval(this.playFrameInterval),this.playFrameInterval=null,this.audioWAudio&&this.audioWAudio.pause()}seek(e,t={}){this.seekInitTime=(new Date).getTime(),this.performance.seek.push({seekPts:t.seekTime,fromSeekPts:this._videoQueue[0]&&this._videoQueue[0].pts||0,time:0}),this.openFrameCall=!1,this.pause(),this._clearDecInterval(),null!==this.avFeedVideoInterval&&(window.clearInterval(this.avFeedVideoInterval),this.avFeedVideoInterval=null),null!==this.avFeedAudioInterval&&(window.clearInterval(this.avFeedAudioInterval),this.avFeedAudioInterval=null),this.yuvMaxTime=0,this.playVPipe.length=0,this._videoQueue.length=0,this.audioWAudio&&this.audioWAudio.stop(),e&&e(),this.isNewSeek=!0,this.avSeekVState=!0,this.seekTarget=t.seekTime,null!==this.audioWAudio&&void 0!==this.audioWAudio&&(this.audioWAudio.setVoice(0),this.audioWAudio.resetStartParam(),this.audioWAudio.stop()),this._avFeedData(t.seekTime),setTimeout((()=>{this.yuvMaxTime=0,this._videoQueue.length=0,this.openFrameCall=!0,this.frameCallTag+=1,this._decVFrameIntervalFunc()}),1e3)}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}cacheIsFull(){return this._videoQueue.length>=this._VIDEO_CACHE_LEN}_checkDisplaySize(e,t,i){e=this.config.width+Math.ceil((t-e)/2);var n=t/this.config.width>i/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/i).toFixed(2);return n=n?r:a,a=(r=this.config.fixed)?e:parseInt(t*n),e=r?this.config.height:parseInt(i*n),this.canvas.offsetWidth==a&&this.canvas.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.canvas.style.marginTop=(t=t<0?0:t)+"px",this.canvas.style.marginLeft=r+"px",this.canvas.style.width=a+"px",this.canvas.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_createYUVCanvas(){this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.canvas=document.createElement("canvas"),this.canvas.style.width=this.canvasBox.clientWidth+"px",this.canvas.style.height=this.canvasBox.clientHeight+"px",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvasBox.appendChild(this.canvas),this.yuv=d.setupCanvas(this.canvas,{preserveDrawingBuffer:!1})}_avRecvPackets(){this.bufObject.cleanPipeline(),null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),!0===this.config.checkProbe?this.avRecvInterval=window.setInterval((()=>{this.demuxWorker.postMessage({t:r.b.GET_SNIFF_PACKET,p:1}),this._avCheckRecvFinish()}),5):this.avRecvInterval=window.setInterval((()=>{this.demuxWorker.postMessage({t:r.b.GET_SNIFF_PACKET,p:0}),this._avCheckRecvFinish()}),5),this._avFeedData(0,!1)}_avCheckRecvFinish(){this.config.playMode===p.PLAYER_MODE_VOD&&this.duration-this.getMaxPTS()<this.frameDur&&this._avSetRecvFinished()}_avSetRecvFinished(){this.bufRecvStat=!0,null!==this.avRecvInterval&&(window.clearInterval(this.avRecvInterval),this.avRecvInterval=null),this.bufOK=!0}_afterAvFeedSeekToStartWithFinishedBuffer(e){let t=this,i=window.setInterval((()=>{t._videoQueue.length>=t._VIDEO_CACHE_LEN&&(t.onSeekFinish&&t.onSeekFinish(),t.onPlayingTime&&t.onPlayingTime(e),t.play(),window.clearInterval(i),i=null)}),10);return!0}_afterAvFeedSeekToStartWithUnFinBuffer(e){let t=this,i=window.setInterval((()=>{t._videoQueue.length>=t._VIDEO_CACHE_LEN&&(t.onSeekFinish&&t.onSeekFinish(),t.onPlayingTime&&t.onPlayingTime(e),!1===t.reFull?t.play():t.reFull=!1,window.clearInterval(i),i=null)}),10);return!0}_avFeedData(e){let t=this;if(this.playVPipe.length=0,this.audioWAudio&&this.audioWAudio.cleanQueue(),e<=0&&!1===this.bufOK){let i=0;if(t.avFeedVideoInterval=window.setInterval((()=>{var n=t.bufObject.videoBuffer.length;if(n-1>i||0<t.duration&&t.duration-t.getMaxPTS()<t.frameDur&&n-1==i){var r=t.bufObject.videoBuffer[i].length;if(0<r){for(let e=0;e<r;e++)t.playVPipe.push(h.ConstructWithDts(t.bufObject.videoBuffer[i][e].pts,t.bufObject.videoBuffer[i][e].dts,t.bufObject.videoBuffer[i][e].isKey,t.bufObject.videoBuffer[i][e].data,!0));i+=1}t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.bufLastVDTS&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null);t.avSeekVState&&t.config.playMode===p.PLAYER_MODE_VOD&&(t._afterAvFeedSeekToStartWithFinishedBuffer(e),t.avSeekVState=!1)}),5),void 0!==t.audioWAudio&&null!==t.audioWAudio&&t.config.ignoreAudio<1){let e=0;t.avFeedAudioInterval=window.setInterval((()=>{var i=t.bufObject.audioBuffer.length;if(i-1>e||t.duration-t.getMaxPTS()<t.frameDur&&i-1==e){var n=t.bufObject.audioBuffer[e].length;for(let i=0;i<n;i++)t.audioWAudio.addSample(new h.BufferFrame(t.bufObject.audioBuffer[e][i].pts,t.bufObject.audioBuffer[e][i].isKey,t.bufObject.audioBuffer[e][i].data,!1));e+=1,t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.bufLastADTS&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}),5)}}else{var i=this.bufObject.seekIDR(e);i=parseInt(i,10),this.playPTS=0;let n=i;if(this.avFeedVideoInterval=window.setInterval((()=>{var i=t.bufObject.videoBuffer.length;if(i-1>n||t.duration-t.getMaxPTS()<t.frameDur&&i-1==n){var r=t.bufObject.videoBuffer[n].length;if(0<r){for(let e=0;e<r;e++)t.playVPipe.push(h.ConstructWithDts(t.bufObject.videoBuffer[n][e].pts,t.bufObject.videoBuffer[n][e].dts,t.bufObject.videoBuffer[n][e].isKey,t.bufObject.videoBuffer[n][e].data,!0));n+=1}t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.bufLastVDTS&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.playVPipe.length&&t.playVPipe[t.playVPipe.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedVideoInterval),t.avFeedVideoInterval=null);t.avSeekVState&&t.config.playMode===p.PLAYER_MODE_VOD&&(t._afterAvFeedSeekToStartWithUnFinBuffer(e),t.avSeekVState=!1)}),5),this.audioWAudio&&this.config.ignoreAudio<1){let i=parseInt(e,10);this.avFeedAudioInterval=window.setInterval((()=>{var e=t.bufObject.audioBuffer.length;if(e-1>i||t.duration-t.getMaxPTS()<t.frameDur&&e-1==i){var n=t.bufObject.audioBuffer[i].length;for(let e=0;e<n;e++)t.bufObject.audioBuffer[i][e].pts<t.seekTarget||t.audioWAudio.addSample(new h.BufferFrame(t.bufObject.audioBuffer[i][e].pts,t.bufObject.audioBuffer[i][e].isKey,t.bufObject.audioBuffer[i][e].data,!1));i+=1,t.config.playMode===p.PLAYER_MODE_VOD&&t.duration-t.getMaxPTS()<t.frameDur&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.bufLastADTS&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}else t.config.playMode===p.PLAYER_MODE_VOD&&0<t.audioWAudio.sampleQueue.length&&t.audioWAudio.sampleQueue[t.audioWAudio.sampleQueue.length-1].pts>=t.duration&&(window.clearInterval(t.avFeedAudioInterval),t.avFeedAudioInterval=null)}),5)}}}_probeFinCallback(e,t,i,n,r,a,s,o,l){let h=this;this._createYUVCanvas(),this.config.fps=+n,this.frameTime=1e3/this.config.fps,this.width=t,this.height=i,this.frameDur=1/this.config.fps,this.duration=e-this.frameDur,this.vCodecID=o,this.config.sampleRate=a,this.channels=s,this.audioIdx=r,this.duration<0&&(this.config.playMode=p.PLAYER_MODE_NOTIME_LIVE),0<=r&&this.config.ignoreAudio<1?this.audioNone=!1:this.audioNone=!0,p.V_CODEC_NAME_HEVC!==this.vCodecID&&p.V_CODEC_NAME_AV1!==this.vCodecID||(!1===this.audioNone&&(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=f({sampleRate:a,appendType:p.APPEND_TYPE_FRAME}),this.audioWAudio.setDurationMs(1e3*e),this.onLoadCache)&&this.audioWAudio.setOnLoadCache((()=>{if(h.retryAuSampleNo<=5){h.pause(),h.onLoadCache&&h.onLoadCache(),h.setPerformanceBrokenStart();let e=window.setInterval((()=>{2<h.audioWAudio.sampleQueue.length?(h.onLoadCacheFinshed&&h.onLoadCacheFinshed(),h.setPerformanceBrokenEnd(),h.play(),h.retryAuSampleNo=0,window.clearInterval(e),e=null):(h.retryAuSampleNo+=1,5<h.retryAuSampleNo&&(h.play(),h.onLoadCacheFinshed&&h.onLoadCacheFinshed(),h.setPerformanceBrokenEnd(),window.clearInterval(e),e=null))}),1e3)}})),this._avRecvPackets(),this._decVFrameIntervalFunc()),this.onProbeFinish&&this.onProbeFinish()}_ptsFixed2(e){return Math.ceil(100*e)/100}_naluCallback(e,t,i,n,r,a,s,o){let l=this._ptsFixed2(a);0<o&&(l=a),this.bufObject.appendFrameWithDts(l,s,e,!0,i),this.bufLastVDTS=Math.max(s,this.bufLastVDTS),this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}_samplesCallback(e,t,i,n){}_aacFrameCallback(e,t,i,n){n=this._ptsFixed2(n),this.audioWAudio&&(this.bufObject.appendFrame(n,e,!1,!0),this.bufLastADTS=Math.max(n,this.bufLastADTS),this.aCachePTS=Math.max(n,this.aCachePTS),this.onCacheProcess)&&this.onCacheProcess(this.getCachePTS())}_setLoadCache(){var e;return null===this.avFeedVideoInterval&&null===this.avFeedAudioInterval&&this.playVPipe.length<=0?1:(e=this.isPlaying,this.pause(),this.onLoadCache&&this.onLoadCache(),this.isCacheV=e?p.CACHE_WITH_PLAY_SIGN:p.CACHE_WITH_NOPLAY_SIGN,0)}_setLoadCacheFinished(){this.isCacheV!==p.CACHE_NO_LOADCACHE&&(this.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.isCacheV=p.CACHE_NO_LOADCACHE)}_createDecVframeInterval(e=10){let t=this;null!==this.decVFrameInterval&&(window.clearInterval(this.decVFrameInterval),this.decVFrameInterval=null),this.naluLListLength=0,this.loopMs=e,this.decVFrameInterval=window.setInterval((()=>{var e,i;t._videoQueue.length<1?t._setLoadCache():t._videoQueue.length>=t._VIDEO_CACHE_LEN&&t._setLoadCacheFinished(),t._videoQueue.length<t._VIDEO_CACHE_LEN&&this.naluLListLength<=t._VIDEO_CACHE_LEN&&0<t.playVPipe.length&&(100===t.loopMs&&t._createDecVframeInterval(10),i=(e=t.playVPipe.shift()).data,t.yuvMaxTime=Math.max(e.pts,t.yuvMaxTime),i={t:r.d.DECODE_VIDEO,nalBuf:i,pts:e.pts,flushDecoder:0},this.decoder.postMessage(i))}),e)}_decVFrameIntervalFunc(){null==this.decVFrameInterval&&this._createDecVframeInterval(10)}_frameCallback(e,t,i,n,r,a,s,o,l,h){if(this.canvas){if(!1===this.openFrameCall)return-1;if(h!==this.frameCallTag)return-2;if(l>this.yuvMaxTime+this.frameDur)return-3;if(this.isNewSeek&&this.seekTarget-l>3*this.frameDur)return-4;var u=this._videoQueue.length;if(this.canvas.width==n&&this.canvas.height==o||(this.canvas.width=n,this.canvas.height=o,this.isCheckDisplay)||this._checkDisplaySize(s,n,o),this.playPTS>l)return-5;var d=new g(e,t,i,n,r,a,s,o,l);if(u<=0||l>this._videoQueue[u-1].pts)this._videoQueue.push(d);else if(l<this._videoQueue[0].pts)this._videoQueue.splice(0,0,d);else if(l<this._videoQueue[u-1].pts)for(let e=0;e<u;e++)if(l>this._videoQueue[e].pts&&e+1<u&&l<this._videoQueue[e+1].pts){this._videoQueue.splice(e+1,0,d);break}return this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS()),this.config.readyShow&&!0===this.playYUV()&&(this.config.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone(),0}}_handleFrameYUVCallback(e,t,i,n,r,a,s,o,l,h){if(e=new Uint8Array(e),t=new Uint8Array(t),i=new Uint8Array(i),!(!1===this.openFrameCall||h!==this.frameCallTag||l>this.yuvMaxTime+this.frameDur||this.isNewSeek&&this.seekTarget-l>3*this.frameDur)){var u=this._videoQueue.length;if(this.canvas.width==n&&this.canvas.height==o||(this.canvas.width=n,this.canvas.height=o,this.isCheckDisplay)||this._checkDisplaySize(s,n,o),!(this.playPTS>l)){var d=new g(e,t,i,n,r,a,s,o,l);if(u<=0||l>this._videoQueue[u-1].pts)this._videoQueue.push(d);else if(l<this._videoQueue[0].pts)this._videoQueue.splice(0,0,d);else if(l<this._videoQueue[u-1].pts)for(let e=0;e<u;e++)if(l>this._videoQueue[e].pts&&e+1<u&&l<this._videoQueue[e+1].pts){this._videoQueue.splice(e+1,0,d);break}this.vCachePTS=Math.max(l,this.vCachePTS),this.onCacheProcess&&this.onCacheProcess(this.getCachePTS()),this.config.readyShow&&!0===this.playYUV()&&(this.config.readyShow=!1,this.onReadyShowDone)&&this.onReadyShowDone()}}}playYUV(){var e;return 0<this._videoQueue.length&&(e=this._videoQueue.shift(),this.onRender&&this.onRender(e.line1,e.height,e.data_y,e.data_u,e.data_v),d.renderFrame(this.yuv,e.data_y,e.data_u,e.data_v,e.line1,e.height),!0)}setProbeSize(e){this.probeSize=e}setPerformance(){var e;this.frameRate++,-1==this.performance.firstFrameTime&&(this.performance.firstFrameTime=(new Date).getTime()-this.startPlayTime),this.oneScondTime&&1e3<(new Date).getTime()-this.oneScondTime&&(e=JSON.parse(JSON.stringify(this.frameRate)),this.frameRate=0,this.oneScondTime=(new Date).getTime(),this.performance.frameRate=e,0<this._videoQueue.length&&(this.performance.buffer=this._videoQueue[this._videoQueue.length-1].pts-this._videoQueue[0].pts),this.onPerformance)&&this.onPerformance(this.performance)}setPerformanceBrokenStart(){this.performance.broken.push({start:(new Date).getTime(),end:null,time:null})}setPerformanceBrokenEnd(){var e,t=this.performance.broken[this.performance.broken.length-1];t&&null==t.end&&(e=(new Date).getTime(),t.end=e,t.time=e-t.start)}pushBuffer(e){return this.demuxWorker.postMessage({t:r.b.PUSH_SNIFF_DATA,d:e,probeSize:this.probeSize},[e]),0}}}},function(e,t,i){"use strict";i.r(t);var n=i(118),r=i.n(n),a=i(51),s=i(0),o=i(26),l=i(19),h=(n=i(1),i.n(n));i(37),i(29),i(34),i(35);const u=i(36),d=i(12);i(59);const c=i(47),f=i(5),p=i(28);t.default={CHttpLiveCore:class{constructor(e){let t=this;this.config={width:e.width||f.DEFAULT_WIDTH,height:e.height||f.DEFAULT_HEIGHT,fps:e.fps||f.DEFAULT_FPS,sampleRate:e.sampleRate||f.DEFAULT_SAMPLERATE,playerId:e.playerId||f.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},this.mediaInfo={noFPS:!1,fps:f.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=f.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.AVDecodeInterval=null,this.decVFrameInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.isCacheV=f.CACHE_NO_LOADCACHE,this.muted=this.config.autoPlay,!0===this.config.autoPlay&&this.config.ignoreAudio<1&&(window.onclick=document.body.onclick=function(e){t.muted=!1,t._reinitAudioModule(t.mediaInfo.sampleRate),!0===t.isPlayingState()&&(t.pause(),t.play()),window.onclick=document.body.onclick=null}),this.frameTimeSec=1/this.config.fps,this.frameTime=1e3*this.frameTimeSec,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.onPlayState=null,this.decoder=null,this.demuxWorker=null,this.isWasmInit=!1,this.isDemuxWasmInit=!1,this._emitter=new r.a,this.makeWasm(),this.onWasmFinished=null,this.naluLListLength=0,this.time=0,this.resampleFps=0,this.requestAnimationFrameId=null,this.calcuteStartTime=0,this.nowTimestamp=0,this.playFrameCostTime=0,this.performance={frameRate:30,buffer:0,broken:[],bitRate:0,decodeFrameRate:30,firstFrameTime:-1,playStyle:"",height:0,width:0,code:null,progress:0},this.oneScondTime=(new Date).getTime(),this.frameRate=0,this.startPlayTime=0,this.onPerformance=null}makeWasm(){var e=Object(l.getPlayerPath)();this.demuxWorker=new a.a,this.demuxWorker.postMessage({t:s.b.LOAD_WAMS_JS,pathUrl:e,isSafari:h.a.isSafari()}),this.demuxWorker.onmessage=e=>{var t=e.data;switch(t.t){case s.a.WASM_LOAD_FINISH:-1==this.performance.firstFrameTime&&(this.startPlayTime=(new Date).getTime()),this.config.token&&this.demuxWorker.postMessage({t:s.b.INIT_DECODER,data:{token:this.config.token,playerVersion:p.PLAYER_VERSION,ignoreAudio:this.config.ignoreAudio,playModeEnum:this.playModeEnum,defaultFps:this.config.defaultFps,mode:1}});break;case s.a.SNIFF_INIT_FINISH:this.isDemuxWasmInit=!0,this._emitter.emit("isDemuxWasmInit",!0),this.isWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case s.a.POST_PROBEDATA:var{duration:i,width:n,height:r,fps:a,audioIdx:o,sample_rate:l,channels:h,vcodec_name_id:u,sample_fmt:d,trans_to_gcore:c}=t;this._callbackProbe(i,n,r,a,o,l,h,u,d,c);break;case s.a.POST_NALUDATA:var{d:i,len:n,isKey:r,pts:a,dts:o,isRawStream:l}=t;this._callbackNALU(i,n,r,t.width,t.height,a,o,l);break;case s.a.POST_AACDATA:var{line1:h,channel:u}=t;this._callbackAAC(t.d,h,u,t.pts);break;case s.a.POST_FRAMEDATA:this._frameCallback(t.buf_y,t.buf_u,t.buf_v,t.line1,t.line2,t.line3,t.width,t.height,t.pts,t.tag);break;case s.a.POST_NALU_LENGTH:this.naluLListLength=t.l}},this.decoder=new o.a,this.decoder.postMessage({t:s.d.LOAD_WAMS_JS,pathUrl:e,isSafari:h.a.isSafari()}),this.decoder.onmessage=e=>{var t,i=e.data;switch(i.t){case s.c.WASM_LOAD_FINISH:this.config.token&&this.decoder.postMessage({t:s.d.INIT_DECODER,data:{token:this.config.token,playerVersion:p.PLAYER_VERSION,videoCodec:this.videoCodec}});break;case s.c.DECODE_FINISH:3<this.resampleFps?(this.resampleFps=0,t={t:s.d.RETURN_VIDEO_BUFFER,f:i},this.decoder.postMessage(t,[t.f.y.buffer,t.f.u.buffer,t.f.v.buffer])):(this.resampleFps++,this.performance.width||(this.performance.width=i.width,this.performance.height=i.height),this._callbackYUV(i.y,i.u,i.v,i.stride_y,i.stride_u,i.stride_v,i.width,i.height,i.ptsSec,this.frameCallTag));break;case s.c.DEOCDE_INIT_FINISH:this.isWasmInit=!0,this.isDemuxWasmInit&&this.onWasmFinished&&this.onWasmFinished();break;case s.c.SET_FRAME:this.performance.decodeFrameRate=i.frameRate}}}_workerFetch_onmessage(e,t){var i=e.data;let n=null;switch(n=void 0===i.cmd||null===i.cmd?"":i.cmd){case"startok":t.getPackageTimeMS=d.GetMsTime(),void 0!==t.AVGetInterval&&null!==t.AVGetInterval||(t.AVGetInterval=window.setInterval((function(){t.demuxWorker.postMessage({t:s.b.GET_BUFFER_LENGTH}),t.naluLListLength>t.config.probeSize?(t.demuxWorker.postMessage({t:s.b.GET_SNIFF_FLV_PACKE}),--t.pushPkg):0<t.getPackageTimeMS&&d.GetMsTime()-t.getPackageTimeMS>=f.FETCH_HTTP_FLV_TIMEOUT_MS&&(t.getPackageTimeMS=d.GetMsTime(),t.workerFetch.postMessage({cmd:"retry",data:null,msg:"retry"}))}),5));break;case"fetch-chunk":let e=i.data;t.download_length+=e.length,setTimeout((function(){t.demuxWorker.postMessage({t:s.b.PUSH_SNIFF_FLV_PACKET,d:e,probeSize:t.config.probeSize},[e.buffer])}),0),t.totalLen+=e.length,0<e.length&&(t.getPackageTimeMS=d.GetMsTime()),t.pushPkg++;break;case"close":t.AVGetInterval&&clearInterval(t.AVGetInterval),t.AVGetInterval=null;break;case"fetch-fin":break;case"fetch-error":t.onError&&t.onError(i.data)}}_checkDisplaySize(e,t,i){e=this.config.width+Math.ceil((t-e)/2);var n=t/this.config.width>i/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/i).toFixed(2);return n=n?r:a,a=(r=this.config.fixed)?e:parseInt(t*n),e=r?this.config.height:parseInt(i*n),this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_reinitAudioModule(e=44100){0<this.config.ignoreAudio||(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=c({sampleRate:e,appendType:f.APPEND_TYPE_FRAME}),this.audioWAudio.isLIVE=!0)}_callbackProbe(e,t,i,n,r,a,s,o,l,h=0){if(1===h)this.onProbeFinish&&this.onProbeFinish(h);else{let e=n;100<n&&(e=f.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=o,this.config.fps=e,this.mediaInfo.fps=e,this.mediaInfo.size.width=t,this.mediaInfo.size.height=i,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+5)),this.chaseFrame=0,this.CanvasObj.width==t&&this.CanvasObj.height==i||(this.CanvasObj.width=t,this.CanvasObj.height=i,this.isCheckDisplay)||this._checkDisplaySize(t,t,i),0<=r&&!1===this.mediaInfo.noFPS?(this.config.sampleRate=a,this.mediaInfo.sampleRate=a,this.config.ignoreAudio<1&&!1===this.muted&&this._reinitAudioModule(this.mediaInfo.sampleRate)):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}}_callbackYUV(e,t,i,n,r,a,s,o,l,h){this.YuvBuf.push({bufY:e,bufU:t,bufV:i,line_y:n,h:o,pts:l}),this.checkCacheState(),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||!0!==this.config.autoPlay||(this.play(),setTimeout((function(){}),3e3)))}_callbackNALU(e,t,i,n,r,a,s){if(!1===this.readyKeyFrame){if(i<=0)return;this.readyKeyFrame=!0}this.NaluBuf.push({bufData:e,len:t,isKey:i,w:n,h:r,pts:1e3*a,dts:1e3*s})}_callbackPCM(e){this.config.ignoreAudio}_callbackAAC(e,t,i,n){0<this.config.ignoreAudio||(n=this._ptsFixed2(n),this.audioWAudio&&!1===this.muted&&(this.audioWAudio.addSample({pts:n,data:e}),this.checkCacheState()))}_decode(e=0){let t=this;setTimeout((()=>{var e,i;null!==t.workerFetch&&(null!=(e=t.NaluBuf.shift())&&(i=e.bufData,i={t:s.d.DECODE_VIDEO,nalBuf:i,pts:e.pts,flushDecoder:0},this.decoder.postMessage(i)),t._decode())}),1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.muted||0<this.config.ignoreAudio||!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.setPerformanceBrokenEnd(),this.cache_status=!0),e}setVoice(e){this.config.ignoreAudio<1&&(this.audioWAudio||(this.muted=!1,this._reinitAudioModule(this.mediaInfo.sampleRate)),this.audioVoice=e,this.audioWAudio)&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(u.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.config.ignoreAudio<1&&this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.chaseFrame=0,this.onPlayState&&this.onPlayState(this.isPlayingState())}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),u.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){this.performance.playStyle="flv_live",this.performance.code="hevc";let e=this;if(this.chaseFrame=0,!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout((()=>{this.play()}),100),!1;const t=+e.frameTime;if(void 0===this.playInterval||null===this.playInterval){let i=0,n=0,r=0;if(this.config.ignoreAudio<1&&!1===this.mediaInfo.audioNone&&null!=this.audioWAudio&&!1===this.mediaInfo.noFPS)this.playInterval=setInterval((function(){var a,s;n=d.GetMsTime(),e.cache_status?n-i>=e.frameTime-r&&(0<e.YuvBuf[0].pts-1e3*e.audioWAudio.getAlignVPTS()||(null!=(a=e.YuvBuf.shift())&&null!==a&&(s=0,r=null===e.audioWAudio||void 0===e.audioWAudio||(s=1e3*(a.pts-e.audioWAudio.getAlignVPTS()))<0&&-1*s<=t||0<s&&s<=t||0==s||0<s&&s>t?d.GetMsTime()-n+1:e.frameTime,e.showScreen&&e.onRender&&e.onRender(a.line_y,a.h,a.bufY,a.bufU,a.bufV),u.renderFrame(e.AVGLObj,a.bufY,a.bufU,a.bufV,a.line_y,a.h),e.setPerformance()),(e.YuvBuf.length<=0||e.audioWAudio&&e.audioWAudio.sampleQueue.length<=0)&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.audioWAudio&&e.audioWAudio.pause(),e.setPerformanceBrokenStart()),i=n)):r=e.frameTime}),30),this.audioWAudio&&this.audioWAudio.play();else{let t=-1;this.playInterval=setInterval((function(){if(n=d.GetMsTime(),e.cache_status){let s=-1;var a;0<t&&(s=n-i,e.frameTime,e.chaseFrame<=0)&&0<r&&(e.chaseFrame=Math.floor(r/e.frameTime)),!(t<=0||s>=e.frameTime||0<e.chaseFrame)||d.GetMsTime()&&d.GetMsTime()<e.YuvBuf[0].pts||(t=1,null!=(a=e.YuvBuf.shift())&&null!==a&&(e.showScreen&&e.onRender&&e.onRender(a.line_y,a.h,a.bufY,a.bufU,a.bufV),u.renderFrame(e.AVGLObj,a.bufY,a.bufU,a.bufV,a.line_y,a.h),e.setPerformance(),r=d.GetMsTime()-n+1),e.YuvBuf.length<=0&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.setPerformanceBrokenStart()),i=n,0<e.chaseFrame&&(e.chaseFrame--,0===e.chaseFrame)&&(r=e.frameTime))}else r=e.frameTime,t=-1,e.chaseFrame=0,i=0,n=0,r=0}),30)}}this.onPlayState&&this.onPlayState(this.isPlayingState())}isLoad(e){this.isDemuxWasmInit?e():this._emitter.addListener("isDemuxWasmInit",(()=>{e()}))}start(e){let t=this;this.isLoad((()=>{this.workerFetch=new Worker(d.GetScriptPath((function(){let e=null,t=new AbortController,i=t.signal;self;let n=e=>{fetch(e,{signal:i}).then((function(e){let t=function(e){return e.read().then((function(i){if(!i.done)return i=i.value,self.postMessage({cmd:"fetch-chunk",data:i,msg:"fetch-chunk"}),t(e);self.postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}))};return t(e.body.getReader())})).catch((function(e){e.toString().includes("user aborted")||(e=" httplive request error:"+e+" start to retry",self.postMessage({cmd:"fetch-error",data:e,msg:"fetch-error"}))}))};self.onmessage=r=>{var a=r.data;let s=null;switch(s=void 0===a.cmd||null===a.cmd?"":a.cmd){case"start":e=a.data,n(e),self.postMessage({cmd:"startok",data:"WORKER STARTED",msg:"startok"});break;case"stop":t.abort(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"});break;case"retry":t.abort(),t=null,i=null,t=new AbortController,i=t.signal,setTimeout((function(){n(e)}),3e3)}}}))),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this.AVGLObj=u.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),this._decode()}))}setPerformance(){var e;this.frameRate++,-1==this.performance.firstFrameTime&&(this.performance.firstFrameTime=(new Date).getTime()-this.startPlayTime),this.oneScondTime&&1e3<(new Date).getTime()-this.oneScondTime&&(e=JSON.parse(JSON.stringify(this.frameRate)),this.frameRate=0,this.oneScondTime=(new Date).getTime(),this.performance.frameRate=e,0<this.YuvBuf.length&&(this.performance.buffer=(this.YuvBuf[this.YuvBuf.length-1].pts-this.YuvBuf[0].pts)/100),this.onPerformance)&&this.onPerformance(this.performance)}setPerformanceBrokenStart(){this.performance.broken.push({start:(new Date).getTime(),end:null,time:null})}setPerformanceBrokenEnd(){var e,t=this.performance.broken[this.performance.broken.length-1];t&&null==t.end&&(e=(new Date).getTime(),t.end=e,t.time=e-t.start)}}}},function(e,t,i){i(37),i(29),i(34),i(35);const n=i(36),r=i(12);i(59),i(47);const a=i(160),s=i(5);i(28),t.CHttpG711Core=class{constructor(e){let t=this;this.config={width:e.width||s.DEFAULT_WIDTH,height:e.height||s.DEFAULT_HEIGHT,fps:e.fps||s.DEFAULT_FPS,sampleRate:e.sampleRate||s.DEFAULT_SAMPLERATE,playerId:e.playerId||s.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},this.config.probeSize,this.config.ignoreAudio,this.mediaInfo={noFPS:!1,fps:s.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=s.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.muted=this.config.autoPlay,!0===this.config.autoPlay&&this.config.ignoreAudio<1&&(window.onclick=document.body.onclick=function(e){t.muted=!1,t._reinitAudioModule(t.mediaInfo.sampleRate),!0===t.isPlayingState()&&(t.pause(),t.play()),window.onclick=document.body.onclick=null}),this.frameTime=1e3/this.config.fps,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.onPlayState=null,this.corePtr=Module.cwrap("AVSniffHttpG711Init","number",["string","string"])(this.config.token,"0.0.0")}_workerFetch_onmessage(e,t){var i=e.data;let n=null;switch(n=void 0===i.cmd||null===i.cmd?"":i.cmd){case"startok":t.getPackageTimeMS=r.GetMsTime(),void 0!==t.AVGetInterval&&null!==t.AVGetInterval||(t.AVGetInterval=window.setInterval((function(){Module.cwrap("getG711BufferLengthApi","number",["number"])(t.corePtr)<=t.config.probeSize&&0<t.getPackageTimeMS&&r.GetMsTime()-t.getPackageTimeMS>=s.FETCH_HTTP_FLV_TIMEOUT_MS&&(t.getPackageTimeMS=r.GetMsTime(),t.workerFetch.postMessage({cmd:"retry",data:null,msg:"retry"}))}),5));break;case"fetch-chunk":let e=i.data,n=void(t.download_length+=e.length);setTimeout((function(){var i=Module._malloc(e.length);Module.HEAP8.set(e,i),n=Module.cwrap("pushSniffG711FlvData","number",["number","number","number","number"])(t.corePtr,i,e.length,t.config.probeSize),Module._free(i)}),0),t.totalLen+=e.length,0<e.length&&(t.getPackageTimeMS=r.GetMsTime()),t.pushPkg++;break;case"close":t.AVGetInterval&&clearInterval(t.AVGetInterval),t.AVGetInterval=null;case"fetch-fin":break;case"fetch-error":t.onError&&t.onError(i.data)}}_checkDisplaySize(e,t,i){e=this.config.width+Math.ceil((t-e)/2);var n=t/this.config.width>i/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/i).toFixed(2);return n=n?r:a,a=(r=this.config.fixed)?e:parseInt(t*n),e=r?this.config.height:parseInt(i*n),this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_reinitAudioModule(e=0){void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.audioWAudio=a()}_callbackProbe(e,t,i,n,r,a,o,l,h){var u=Module.HEAPU8.subarray(h,h+10);let d="";for(let e=0;e<u.length;e++)d+=String.fromCharCode(u[e]);let c=n;100<n&&(c=s.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=l,this.config.fps=c,this.mediaInfo.fps=c,this.mediaInfo.size.width=t,this.mediaInfo.size.height=i,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+2)),this.CanvasObj.width==t&&this.CanvasObj.height==i||(this.CanvasObj.width=t,this.CanvasObj.height=i,this.isCheckDisplay)||this._checkDisplaySize(t,t,i),0<=r&&!1===this.mediaInfo.noFPS?(this.config.sampleRate=a,this.mediaInfo.sampleRate=a,!1===this.muted&&this._reinitAudioModule(this.mediaInfo.sampleRate)):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}_callbackYUV(e,t,i,n,r,a,s,o,l,h){e=Module.HEAPU8.subarray(e,e+n*o);var u=new Uint8Array(e);t=Module.HEAPU8.subarray(t,t+r*o/2),r=new Uint8Array(t),i=Module.HEAPU8.subarray(i,i+a*o/2),a=new Uint8Array(i),this.YuvBuf.push({bufY:u,bufU:r,bufV:a,line_y:n,h:o,pts:l}),this.checkCacheState(),Module._free(e),Module._free(t),Module._free(i),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||!0!==this.config.autoPlay||(this.play(),setTimeout((function(){}),3e3)))}_callbackNALU(e,t,i,n,r,a,s){if(!1===this.readyKeyFrame){if(i<=0)return;this.readyKeyFrame=!0}e=Module.HEAPU8.subarray(e,e+t);var o=new Uint8Array(e);this.NaluBuf.push({bufData:o,len:t,isKey:i,w:n,h:r,pts:1e3*a,dts:1e3*s}),Module._free(e)}_callbackPCM(e,t,i,n){e=Module.HEAPU8.subarray(e,e+t),t=new Uint8Array(e).buffer;let r=null;i={pts:e=this._ptsFixed2(i),data:r=0!=(i=t.byteLength%4)?((e=new Uint8Array(t.byteLength+i)).set(new Uint8Array(t),0),new Float32Array(e.buffer)):new Float32Array(t)},this.audioWAudio.addSample(i),this.checkCacheState()}_decode(){let e=this;setTimeout((()=>{null!==e.workerFetch&&(Module.cwrap("decodeG711Frame","number",["number"])(e.corePtr),e._decode())}),1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.cache_status=!0),e}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),void 0!==this.corePtr&&null!==this.corePtr&&Module.cwrap("releaseG711","number",["number"])(this.corePtr),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(n.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,delete window.g_players[this.corePtr],0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.onPlayState&&this.onPlayState(this.isPlayingState())}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),n.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){let e=this;if(!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout((()=>{e.play()}),100),!1;const t=+e.frameTime;if(void 0===this.playInterval||null===this.playInterval){let i,a=0,s=0;!1===this.mediaInfo.audioNone&&this.audioWAudio&&!1===this.mediaInfo.noFPS?(this.playInterval=setInterval((function(){var o,l;i=r.GetMsTime(),e.cache_status?i-a>=e.frameTime-s&&(null!=(o=e.YuvBuf.shift())&&null!==o&&(l=0,s=null===e.audioWAudio||void 0===e.audioWAudio||(l=1e3*(o.pts-e.audioWAudio.getAlignVPTS()))<0&&-1*l<=t||0<l&&l<=t||0==l||0<l&&l>t?r.GetMsTime()-i+1:e.frameTime,e.showScreen&&e.onRender&&e.onRender(o.line_y,o.h,o.bufY,o.bufU,o.bufV),n.renderFrame(e.AVGLObj,o.bufY,o.bufU,o.bufV,o.line_y,o.h)),e.YuvBuf.length<=0&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.audioWAudio)&&e.audioWAudio.pause(),a=i):s=e.frameTime}),1),this.audioWAudio&&this.audioWAudio.play()):this.playInterval=setInterval((function(){var t=e.YuvBuf.shift();null!=t&&null!==t&&(e.showScreen&&e.onRender&&e.onRender(t.line_y,t.h,t.bufY,t.bufU,t.bufV),n.renderFrame(e.AVGLObj,t.bufY,t.bufU,t.bufV,t.line_y,t.h)),e.YuvBuf.length<=0&&(e.cache_status=!1)}),e.frameTime)}this.onPlayState&&this.onPlayState(this.isPlayingState())}start(e){let t=this;this.workerFetch=new Worker(r.GetScriptPath((function(){let e=null,t=new AbortController,i=t.signal;self;let n=e=>{fetch(e,{signal:i}).then((function(e){let t=function(e){return e.read().then((function(i){if(!i.done)return i=i.value,self.postMessage({cmd:"fetch-chunk",data:i,msg:"fetch-chunk"}),t(e);self.postMessage({cmd:"fetch-fin",data:null,msg:"fetch-fin"})}))};return t(e.body.getReader())})).catch((function(e){e.toString().includes("user aborted")||(e=" httplive request error:"+e+" start to retry",self.postMessage({cmd:"fetch-error",data:e,msg:"fetch-error"}))}))};self.onmessage=r=>{var a=r.data;let s=null;switch(s=void 0===a.cmd||null===a.cmd?"":a.cmd){case"start":e=a.data,n(e),self.postMessage({cmd:"startok",data:"WORKER STARTED",msg:"startok"});break;case"stop":t.abort(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"});break;case"retry":t.abort(),t=null,i=null,t=new AbortController,i=t.signal,setTimeout((function(){n(e)}),3e3)}}}))),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this._ptr_probeCallback=Module.addFunction(this._callbackProbe.bind(this),"vdiidiiiiii"),this._ptr_yuvCallback=Module.addFunction(this._callbackYUV.bind(this),"vi"),this._ptr_sampleCallback=Module.addFunction(this._callbackPCM.bind(this),"vi"),Module.cwrap("initializeSniffG711Module","number",["number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_yuvCallback,this._ptr_sampleCallback,0,1),this.AVGLObj=n.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),0===s.H265WEBJS_COMPILE_MULTI_THREAD_SHAREDBUFFER&&this._decode()}}},function(e,t,i){const n=window.AudioContext||window.webkitAudioContext,r=i(5),a=i(12);e.exports=()=>{let e={options:{sampleRate:r.DEFAULT_SAMPLERATE,appendType:r.APPEND_TYPE_FRAME,playMode:r.AUDIO_MODE_SWAP},sourceChannel:-1,audioCtx:new n({latencyHint:"interactive",sampleRate:r.DEFAULT_SAMPLERATE}),gainNode:null,sourceList:[],startStatus:!1,sampleQueue:[],nextBuffer:null,playTimestamp:0,playStartTime:0,durationMs:-1,isLIVE:!1,voice:1,onLoadCache:null,resetStartParam:()=>{e.playTimestamp=0,e.playStartTime=0},setOnLoadCache:t=>{e.onLoadCache=t},setDurationMs:(t=-1)=>{e.durationMs=t},setVoice:(t=1)=>{e.voice=t,e.gainNode.gain.value=t},getAlignVPTS:()=>e.playTimestamp+(a.GetMsTime()-e.playStartTime)/1e3,swapSource:(t=-1,i=-1)=>{if(0==e.startStatus)return null;if(t<0||t>=e.sourceList.length)return null;if(i<0||i>=e.sourceList.length)return null;try{e.sourceChannel===t&&null!==e.sourceList[t]&&(e.sourceList[t].disconnect(e.gainNode),e.sourceList[t]=null)}catch(t){}e.sourceChannel=i,-2==(i=e.decodeSample(i,t))&&e.isLIVE&&(e.getAlignVPTS()>=e.durationMs/1e3-.04?e.pause():null!==e.onLoadCache&&e.onLoadCache())},addSample:(t=null)=>!(null==t||!t||null==t||(0==e.sampleQueue.length&&(e.seekPos=t.pts),e.sampleQueue.push(t),0)),runNextBuffer:()=>{window.setInterval((()=>{if(!(null!=e.nextBuffer||e.sampleQueue.length<r.DEFAULT_CONSU_SAMPLE_LEN)){var t;e.nextBuffer={data:null,pts:-1};for(let i=0;i<r.DEFAULT_CONSU_SAMPLE_LEN;i++){t=e.sampleQueue.shift();let i=null;if(i=e.options.appendType==r.APPEND_TYPE_STREAM?t:t.data,e.nextBuffer.pts<0&&(e.nextBuffer.pts=t.pts),null==e.nextBuffer.data?e.nextBuffer.data=new Float32Array(i):((t=new Float32Array(i.length+e.nextBuffer.data.length)).set(e.nextBuffer.data,0),t.set(i,e.nextBuffer.data.length),e.nextBuffer.data=t),e.sampleQueue.length<=0)break}e.nextBuffer.data.length}}),10)},decodeSample:(t=-1,i=-1)=>{if(t<0||t>=e.sourceList.length)return-1;if(null!=e.sourceList[t]&&null!=e.sourceList[t]&&e.sourceList[t]||(e.sourceList[t]=e.audioCtx.createBufferSource(),e.sourceList[t].onended=function(){e.swapSource(t,i)}),0==e.sampleQueue.length)return e.isLIVE?(e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].onended=function(){e.swapSource(t,i)},e.sourceList[t].stop(),0):-2;if(e.sourceList[t].buffer)e.swapSource(t,i);else{if(null==e.nextBuffer||e.nextBuffer.data.length<1)return e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].startState=!0,e.sourceList[t].stop(),1;var n=e.nextBuffer.data;e.playTimestamp=e.nextBuffer.pts,e.playStartTime=a.GetMsTime();try{var r=e.audioCtx.createBuffer(1,n.length,e.options.sampleRate);r.copyToChannel(n,0),null!==e.sourceList[t]&&(e.sourceList[t].buffer=r,e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].startState=!0)}catch(t){return e.nextBuffer=null,-3}e.nextBuffer=null}return 0},decodeWholeSamples:(t=-1)=>{if((e.sourceChannel=t)<0||t>=e.sourceList.length)return-1;if(null!=e.sourceList[t]&&null!=e.sourceList[t]&&e.sourceList[t]||(e.sourceList[t]=e.audioCtx.createBufferSource(),e.sourceList[t].onended=function(){}),0==e.sampleQueue.length)return-2;let i=null;var n;for(let t=0;t<e.sampleQueue.length;t++){n=e.sampleQueue.shift();let t=null;if(t=e.options.appendType==r.APPEND_TYPE_STREAM?n:n.data,i=null==i?new Uint8Array(t):((n=new Uint8Array(t.length+i.length)).set(i,0),n.set(t,i.length),n),e.sampleQueue.length<=0)break}var a=i;if(null==a||a.length<1)return e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].stop(),1;a=a.buffer;try{var s=e.audioCtx.createBuffer(1,a.byteLength,e.options.sampleRate);s.copyToChannel(a,0),e.sourceList[t].buffer=s,e.sourceList[t].connect(e.gainNode),e.sourceList[t].start(),e.sourceList[t].startState=!0}catch(t){return-3}return 0},play:()=>{if(0==e.startStatus){e.startStatus=!0;let t=0;-2==(t=e.options.playMode==r.AUDIO_MODE_ONCE?e.decodeWholeSamples(0):e.swapSource(0,1))&&e.pause()}},pause:()=>{e.startStatus=!1;for(let t=0;t<e.sourceList.length;t++)if(void 0!==e.sourceList[t]&&null!==e.sourceList[t])try{void 0!==e.sourceList[t].buffer&&null!==e.sourceList[t].buffer&&(e.sourceList[t].stop(),e.sourceList[t].disconnect(e.gainNode)),e.sourceList[t]=null}catch(e){}},stop:()=>{e.pause(),e.cleanQueue(),e.nextBuffer=null,e.sourceChannel=-1},cleanQueue:()=>{for(let t=e.sampleQueue.length=0;t<e.sourceList.length;t++)try{void 0!==e.sourceList[t].buffer&&null!==e.sourceList[t].buffer&&(e.sourceList[t].stop(),e.sourceList[t].disconnect(e.gainNode)),e.sourceList[t]=null}catch(e){}}};return e.sourceList.push(e.audioCtx.createBufferSource()),e.sourceList.push(e.audioCtx.createBufferSource()),e.sourceList[0].onended=function(){e.swapSource(0,1)},e.sourceList[1].onended=function(){e.swapSource(1,0)},e.gainNode=e.audioCtx.createGain(),e.gainNode.gain.value=e.voice,e.gainNode.connect(e.audioCtx.destination),e.runNextBuffer(),e}},function(e,t,i){i(37),i(29),i(34),i(35);const n=i(36),r=i(12);i(59);const a=i(47),s=i(5);i(28),t.CWsLiveCore=class{constructor(e){this.config={width:e.width||s.DEFAULT_WIDTH,height:e.height||s.DEFAULT_HEIGHT,fps:e.fps||s.DEFAULT_FPS,sampleRate:e.sampleRate||s.DEFAULT_SAMPLERATE,playerId:e.playerId||s.DEFAILT_WEBGL_PLAY_ID,token:e.token||null,probeSize:e.probeSize||4096,ignoreAudio:e.ignoreAudio||0,autoPlay:e.autoPlay||!1},this.config.probeSize,this.config.ignoreAudio,this.mediaInfo={noFPS:!1,fps:s.DEFAULT_FPS,width:this.config.width,height:this.config.height,sampleRate:this.config.sampleRate,size:{width:-1,height:-1},audioNone:!1},this.duration=-1,this.vCodecID=s.V_CODEC_NAME_HEVC,this.corePtr=null,this.AVGetInterval=null,this.readyShowDone=!1,this.readyKeyFrame=!1,this.cache_status=!1,this.download_length=0,this.AVGLObj=null,this.canvasBox=document.querySelector("#"+this.config.playerId),this.canvasBox.style.overflow="hidden",this.CanvasObj=null,this.CanvasObj=document.createElement("canvas"),this.CanvasObj.style.width=this.canvasBox.clientWidth+"px",this.CanvasObj.style.height=this.canvasBox.clientHeight+"px",this.CanvasObj.style.top="0px",this.CanvasObj.style.left="0px",this.canvasBox.appendChild(this.CanvasObj),this.audioWAudio=null,this.audioVoice=1,this.frameTime=1e3/this.config.fps,this.NaluBuf=[],this.YuvBuf=[],this.getPackageTimeMS=0,this.workerFetch=null,this.playInterval=null,this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null,this.totalLen=0,this.pushPkg=0,this.showScreen=!1,this.onProbeFinish=null,this.onLoadCache=null,this.onLoadCacheFinshed=null,this.onRender=null,this.onReadyShowDone=null,this.onError=null,this.corePtr=Module.cwrap("AVSniffHttpFlvInit","number",["string","string"])("base64:QXV0aG9yOmNoYW5neWFubG9uZ3xudW1iZXJ3b2xmLEdpdGh1YjpodHRwczovL2dpdGh1Yi5jb20vbnVtYmVyd29sZixFbWFpbDpwb3JzY2hlZ3QyM0Bmb3htYWlsLmNvbSxRUTo1MzEzNjU4NzIsSG9tZVBhZ2U6aHR0cDovL3h2aWRlby52aWRlbyxEaXNjb3JkOm51bWJlcndvbGYjODY5NCx3ZWNoYXI6bnVtYmVyd29sZjExLEJlaWppbmcsV29ya0luOkJhaWR1","0.0.0")}_workerFetch_onmessage(e,t){var i=e.data;let n=null;switch(n=void 0===i.cmd||null===i.cmd?"":i.cmd){case"fetch-chunk":let e=i.data,n=void(t.download_length+=e.length);setTimeout((function(){var i=Module._malloc(e.length);Module.HEAP8.set(e,i),n=Module.cwrap("pushSniffHttpFlvData","number",["number","number","number","number"])(t.corePtr,i,e.length,t.config.probeSize),Module._free(i)}),0),t.totalLen+=e.length,0<e.length&&(t.getPackageTimeMS=r.GetMsTime()),t.pushPkg++,void 0!==t.AVGetInterval&&null!==t.AVGetInterval||(t.AVGetInterval=window.setInterval((function(){Module.cwrap("getBufferLengthApi","number",["number"])(t.corePtr)>t.config.probeSize&&(Module.cwrap("getSniffHttpFlvPkg","number",["number"])(t.corePtr),--t.pushPkg)}),5));break;case"close":t.AVGetInterval&&clearInterval(t.AVGetInterval),t.AVGetInterval=null;case"fetch-fin":break;case"fetch-error":t.onError&&t.onError(i.data)}}_checkDisplaySize(e,t,i){e=this.config.width+Math.ceil((t-e)/2);var n=t/this.config.width>i/this.config.height,r=(e/t).toFixed(2),a=(this.config.height/i).toFixed(2);return n=n?r:a,a=(r=this.config.fixed)?e:parseInt(t*n),e=r?this.config.height:parseInt(i*n),this.CanvasObj.offsetWidth==a&&this.CanvasObj.offsetHeight==e||(t=parseInt((this.canvasBox.offsetHeight-e)/2),r=(r=parseInt((this.canvasBox.offsetWidth-a)/2))<0?0:r,this.CanvasObj.style.marginTop=(t=t<0?0:t)+"px",this.CanvasObj.style.marginLeft=r+"px",this.CanvasObj.style.width=a+"px",this.CanvasObj.style.height=e+"px"),this.isCheckDisplay=!0,[a,e]}_ptsFixed2(e){return Math.ceil(100*e)/100}_callbackProbe(e,t,i,n,r,o,l,h,u){var d=Module.HEAPU8.subarray(u,u+10);let c="";for(let e=0;e<d.length;e++)c+=String.fromCharCode(d[e]);let f=n;100<n&&(f=s.DEFAULT_FPS,this.mediaInfo.noFPS=!0),this.vCodecID=h,this.config.fps=f,this.mediaInfo.fps=f,this.mediaInfo.size.width=t,this.mediaInfo.size.height=i,this.frameTime=Math.floor(1e3/(this.mediaInfo.fps+2)),this.CanvasObj.width==t&&this.CanvasObj.height==i||(this.CanvasObj.width=t,this.CanvasObj.height=i,this.isCheckDisplay)||this._checkDisplaySize(t,t,i),0<=r&&!1===this.mediaInfo.noFPS&&this.config.ignoreAudio<1?(void 0!==this.audioWAudio&&null!==this.audioWAudio&&(this.audioWAudio.stop(),this.audioWAudio=null),this.config.sampleRate=o,this.mediaInfo.sampleRate=o,this.audioWAudio=a({sampleRate:this.mediaInfo.sampleRate,appendType:s.APPEND_TYPE_FRAME}),this.audioWAudio.isLIVE=!0):this.mediaInfo.audioNone=!0,this.onProbeFinish&&this.onProbeFinish()}_callbackYUV(e,t,i,n,r,a,s,o,l){e=Module.HEAPU8.subarray(e,e+n*o);var h=new Uint8Array(e);t=Module.HEAPU8.subarray(t,t+r*o/2),r=new Uint8Array(t),i=Module.HEAPU8.subarray(i,i+a*o/2),a=new Uint8Array(i),this.YuvBuf.push({bufY:h,bufU:r,bufV:a,line_y:n,h:o,pts:l}),this.checkCacheState(),Module._free(e),Module._free(t),Module._free(i),!1===this.readyShowDone&&!0===this.playYUV()&&(this.readyShowDone=!0,this.onReadyShowDone&&this.onReadyShowDone(),this.audioWAudio||this.play())}_callbackNALU(e,t,i,n,r,a,s){if(!1===this.readyKeyFrame){if(i<=0)return;this.readyKeyFrame=!0}e=Module.HEAPU8.subarray(e,e+t);var o=new Uint8Array(e);this.NaluBuf.push({bufData:o,len:t,isKey:i,w:n,h:r,pts:1e3*a,dts:1e3*s}),Module._free(e)}_callbackPCM(e){}_callbackAAC(e,t,i,n){n=this._ptsFixed2(n),this.audioWAudio&&(e=Module.HEAPU8.subarray(e,e+t),t=new Uint8Array(e),this.audioWAudio.addSample({pts:n,data:t}),this.checkCacheState())}_decode(){let e=this;setTimeout((()=>{var t,i;null!==e.workerFetch&&(null!=(t=e.NaluBuf.shift())&&(i=Module._malloc(t.bufData.length),Module.HEAP8.set(t.bufData,i),Module.cwrap("decodeHttpFlvVideoFrame","number",["number","number","number","number","number"])(e.corePtr,i,t.bufData.length,t.pts,t.dts,0),Module._free(i),i=null),e._decode())}),1)}setScreen(e=!1){this.showScreen=e}checkCacheState(){var e=25<=this.YuvBuf.length&&(!0===this.mediaInfo.audioNone||this.audioWAudio&&50<=this.audioWAudio.sampleQueue.length);return!1===this.cache_status&&e&&(this.playInterval&&this.audioWAudio&&this.audioWAudio.play(),this.onLoadCacheFinshed&&this.onLoadCacheFinshed(),this.cache_status=!0),e}setVoice(e){this.audioVoice=e,this.audioWAudio&&this.audioWAudio.setVoice(e)}_removeBindFuncPtr(){null!==this._ptr_probeCallback&&Module.removeFunction(this._ptr_probeCallback),null!==this._ptr_frameCallback&&Module.removeFunction(this._ptr_frameCallback),null!==this._ptr_naluCallback&&Module.removeFunction(this._ptr_naluCallback),null!==this._ptr_sampleCallback&&Module.removeFunction(this._ptr_sampleCallback),null!==this._ptr_aacCallback&&Module.removeFunction(this._ptr_aacCallback),this._ptr_probeCallback=null,this._ptr_frameCallback=null,this._ptr_naluCallback=null,this._ptr_sampleCallback=null,this._ptr_aacCallback=null}release(){return this.pause(),this.NaluBuf.length=0,void(this.YuvBuf.length=0)!==this.workerFetch&&null!==this.workerFetch&&this.workerFetch.postMessage({cmd:"stop",data:"stop",msg:"stop"}),this.workerFetch=null,this.AVGetInterval&&clearInterval(this.AVGetInterval),this.AVGetInterval=null,this._removeBindFuncPtr(),void 0!==this.corePtr&&null!==this.corePtr&&Module.cwrap("releaseHttpFLV","number",["number"])(this.corePtr),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null,this.audioWAudio&&this.audioWAudio.stop(),this.audioWAudio=null,void 0!==this.AVGLObj&&null!==this.AVGLObj&&(n.releaseContext(this.AVGLObj),this.AVGLObj=null),this.CanvasObj&&this.CanvasObj.remove(),this.CanvasObj=null,window.onclick=document.body.onclick=null,0}isPlayingState(){return null!==this.playInterval&&void 0!==this.playInterval}pause(){this.audioWAudio&&this.audioWAudio.pause(),this.playInterval&&clearInterval(this.playInterval),this.playInterval=null}playYUV(){var e;return 0<this.YuvBuf.length&&(e=this.YuvBuf.shift(),this.onRender&&this.onRender(e.line_y,e.h,e.bufY,e.bufU,e.bufV),n.renderFrame(this.AVGLObj,e.bufY,e.bufU,e.bufV,e.line_y,e.h),!0)}play(){let e=this;if(!1===this.checkCacheState())return this.onLoadCache&&this.onLoadCache(),setTimeout((()=>{this.play()}),100),!1;if(void 0===this.playInterval||null===this.playInterval){let t,i=0,a=0;!1===this.mediaInfo.audioNone&&this.audioWAudio&&!1===this.mediaInfo.noFPS?(this.playInterval=setInterval((function(){if(t=r.GetMsTime(),e.cache_status){if(t-i>=e.frameTime-a){var s=e.YuvBuf.shift();if(null!=s&&null!==s){let i=0;null!==e.audioWAudio&&void 0!==e.audioWAudio&&(i=1e3*(s.pts-e.audioWAudio.getAlignVPTS())),a=!e.audioWAudio||i<0&&-1*i<=e.frameTime||0<=i?r.GetMsTime()-t+1:e.frameTime,e.showScreen&&e.onRender&&e.onRender(s.line_y,s.h,s.bufY,s.bufU,s.bufV),n.renderFrame(e.AVGLObj,s.bufY,s.bufU,s.bufV,s.line_y,s.h)}(e.YuvBuf.length<=0||e.audioWAudio&&e.audioWAudio.sampleQueue.length<=0)&&(e.cache_status=!1,e.onLoadCache&&e.onLoadCache(),e.audioWAudio)&&e.audioWAudio.pause(),i=t}}else a=e.frameTime}),1),this.audioWAudio&&this.audioWAudio.play()):this.playInterval=setInterval((function(){var t=e.YuvBuf.shift();null!=t&&null!==t&&(e.showScreen&&e.onRender&&e.onRender(t.line_y,t.h,t.bufY,t.bufU,t.bufV),n.renderFrame(e.AVGLObj,t.bufY,t.bufU,t.bufV,t.line_y,t.h)),e.YuvBuf.length<=0&&(e.cache_status=!1)}),e.frameTime)}}start(e){let t=this;this.workerFetch=new Worker(r.GetScriptPath((function(){var e=null;self,self.onmessage=t=>{var i=t.data;let n=null;switch(n=void 0===i.cmd||null===i.cmd?"":i.cmd){case"start":var r=i.data;(e=new WebSocket(r)).binaryType="arraybuffer",e.onopen=function(t){e.send("Hello WebSockets!")},e.onmessage=function(e){e.data instanceof ArrayBuffer&&0<(e=e.data).byteLength&&postMessage({cmd:"fetch-chunk",data:new Uint8Array(e),msg:"fetch-chunk"})},e.onclose=function(e){};break;case"stop":e&&e.close(),self.close(),self.postMessage({cmd:"close",data:"close",msg:"close"})}}}))),this.workerFetch.onmessage=function(e){t._workerFetch_onmessage(e,t)},this._ptr_probeCallback=Module.addFunction(this._callbackProbe.bind(this),"vdiidiiiiii"),this._ptr_yuvCallback=Module.addFunction(this._callbackYUV.bind(this),"vi"),this._ptr_naluCallback=Module.addFunction(this._callbackNALU.bind(this),"vi"),this._ptr_sampleCallback=Module.addFunction(this._callbackPCM.bind(this),"vi"),this._ptr_aacCallback=Module.addFunction(this._callbackAAC.bind(this),"vi"),Module.cwrap("initializeSniffHttpFlvModule","number",["number","number","number","number","number","number"])(this.corePtr,this._ptr_probeCallback,this._ptr_yuvCallback,this._ptr_naluCallback,this._ptr_sampleCallback,this._ptr_aacCallback),this.AVGLObj=n.setupCanvas(this.CanvasObj,{preserveDrawingBuffer:!1}),this.workerFetch.postMessage({cmd:"start",data:e,msg:"start"}),this._decode()}}},function(e,t,i){"use strict";i.r(t),i.d(t,"NvHLSjsCore",(function(){return o}));var n=i(4);const r=i(5),a=i(163),s=i(58);var o=class{constructor(e,t){this.configFormat={probeDurationMS:e.probeDurationMS,width:e.width||r.DEFAULT_WIDTH,height:e.height||r.DEFAULT_HEIGHT,playerId:e.playerId||r.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,danmaku:e.danmaku,authToken:e.authToken,openToken:e.openToken,maxBufferLength:e.maxBufferLength},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-vjs",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.vCodecID=r.V_CODEC_NAME_AVC,this.audioNone=!1,this.metadata={},this.showScreen=!1,this.playPTS=0,this.loadSuccess=!1,this.bufferInterval=null,this.bootInterval=null,this.qualityList=[],this.manualLevel=-1,this.onMakeItReady=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onCacheProcess=null,this.onQualityLevels=null,this.onError=null,this.onLevelUpdates=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.bufferCodecsInfo=null,this.headers=e.headers,this.timeShift=e.timeShift,this.timeShiftData=this.timeShift&&this.timeShift.liveStartTime?Date.now()/1e3-this.timeShift.liveStartTime:null,this.liveStartTime=this.timeShiftData,this.url=t,this.onLiveShift=null,this.isPause=!1,this.videoCodec=r.CODEC_H264}makeIt(e){let t=this;this.configFormat.width,this.configFormat.height,this.configFormat.autoPlay;var i,s,o=document.querySelector("#"+this.configFormat.playerId),l=document.createElement("video");l.id=this.myPlayerID,this.videoTag=l,a.isSupported()?(this.configFormat.repeatPlay&&l.setAttribute("loop","loop"),o.insertBefore(l,o.firstChild),!0===this.configFormat.autoPlay&&(this.videoTag.muted="muted",window.onclick=document.body.onclick=function(e){t.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.onplay=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e)},this.videoTag.onpause=function(){var e=t.isPlayingState();t.onPlayState&&t.onPlayState(e)},this.videoTag.ontimeupdate=()=>{t.onPlayingTime&&t.onPlayingTime(t.videoTag.currentTime)},this.videoTag.onended=()=>{t.onPlayingFinish&&t.onPlayingFinish()},this.videoTag.onseeked=function(){t.onSeekFinish&&t.onSeekFinish(t.seekResult)},o=this.configFormat.maxBufferLength,s={},s=this.configFormat.authToken&&this.configFormat.authToken[e]||this.configFormat.openToken?(i=this.configFormat.authToken[e],o?{token:i,maxBufferLength:o}:{token:i}):o?{maxBufferLength:o}:{},this.headers&&(s=Object.assign({},s,{xhrSetup:e=>{for(var t in this.headers)e.setRequestHeader(t,this.headers[t])}})),t.myPlayer=new a(s),t.myPlayer.attachMedia(l),t.myPlayer.on(a.Events.MEDIA_ATTACHED,(function(i,n){t.myPlayer.loadSource(e)})),t.myPlayer.on(a.Events.LEVEL_LOADED,(function(e,i){0<t.timeShiftData?t.duration=t.timeShiftData:t.duration=i.details.totalduration})),t.myPlayer.on(a.Events.LEVEL_UPDATED,(function(e){t.onLevelUpdates(t.getCurrentLevel())})),t.myPlayer.on(a.Events.BUFFER_APPENDING,(function(e,t){})),t.myPlayer.on(a.Events.BUFFER_CODECS,(function(e,i){var n;t.bufferCodecsInfo=i,t.metadata=i.video.metadata,i.video.codec&&-1<i.video.codec.indexOf("hvc1")&&(t.vCodecID=r.V_CODEC_NAME_HEVC,t.videoCodec=r.CODEC_H265),(i=document.querySelector("#"+t.configFormat.playerId)).getElementsByTagName("video")[0]||(n=i.getElementsByTagName("div"),i.insertBefore(t.videoTag,n[0])),!0!==t.loadSuccess&&(t.onLoadFinish&&t.onLoadFinish(),t.onReadyShowDone&&t.onReadyShowDone(),t.loadSuccess=!0)})),t.myPlayer.on(a.Events.MANIFEST_PARSED,(function(e,i){var n=i.levels;if(t.qualityList=[],1<n.length){i={id:-1,label:"鑷姩",index:0,selected:-1===t.manualLevel},t.qualityList.push(i);for(let e=0;e<n.length;e++){var r={id:e,label:(r=n[e]).height+"P",index:e+1,selected:e===t.manualLevel,with:r.width,height:r.height,bitrate:r.bitrate};t.qualityList.push(r)}t.onQualityLevels&&t.onQualityLevels(t.qualityList)}})),t.myPlayer.on(a.Events.ERROR,((e,i)=>{if(i.fatal)switch(i.type){case a.ErrorTypes.NETWORK_ERROR:t.onError({msg:i.response,event:i.details,url:i.url,type:i.type});break;case a.ErrorTypes.MEDIA_ERROR:case a.ErrorTypes.MUX_ERROR:t.onError({msg:i,url:i.url,type:i.type});break;default:a.ErrorTypes.OTHER_ERROR,t.onError({msg:i,url:i.url,type:n.ErrorTypes.OTHER})}else t.onError({msg:i,url:i.url,type:n.ErrorTypes.OTHER})})),t.onMakeItReady&&t.onMakeItReady()):(i=this.videoTag.canPlayType("application/vnd.apple.mpegurl"),this.release(),t.onError({url:e,msg:n.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:n.ErrorTypes.NOT_SUPPORT,isAppleMpegurl:i}))}_refreshVideoTagEvent(){this.videoTag=document.getElementById(this.myPlayerID).querySelector("video")}setPlaybackRate(e=1){return!(e<=0||void 0===this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return void 0===this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:this.videoTag.videoWidth||this.metadata.width,height:this.videoTag.videoHeight||this.metadata.height}}play(){let e=this;e.isPause&&0<e.timeShiftData&&e.shiftRequestUrl?(e.isPause=!1,this.seekTimeShift(e.liveStartTime,e.shiftRequestUrl)):(e.videoTag.play(),e.isPause=!1,e.videoTag.ontimeupdate=function(){var t,i;e.videoTag&&0!=e.videoTag.buffered.length&&((t=e.videoTag.buffered.end(e.videoTag.buffered.length-1))>=e.duration-.04?e.onCacheProcess&&e.onCacheProcess(e.duration):e.onCacheProcess&&e.onCacheProcess(t),i=e.videoTag.currentTime>e.duration?e.duration:e.videoTag.currentTime,0<e.timeShiftData&&(e.duration=e.videoTag.currentTime+e.timeShiftData,i=e.liveStartTime+e.videoTag.currentTime),e.onPlayingTime(i,null,e.duration),e.seekReadyPts&&t>e.seekReadyPts&&(i=e.seek(e.seekReadyPts),e.seekResult=i,e.seekReadyPts=null),e.getFrameRate())})}seek(e){var t,i;if(!(0<this.timeShiftData))return this.videoTag.currentTime=e,-1!=(i=(t=this.videoTag.buffered).length-1)&&t.end(i)<e?(this.seekReadyPts=e,!1):this.seekResult=!0;this.seekTimeShift(e)}pause(){0<this.timeShiftData&&(this.isPause=!0,this.myPlayer.stopLoad()),this.videoTag&&this.videoTag.pause()}setVoice(e){this.videoTag.volume=e}isPlayingState(){return!this.videoTag.paused}changeHlsQuality(e){var t=this.qualityList.find((t=>t.index===e));t&&this.manualLevel!==t.id&&(this.manualLevel=t.id,this.myPlayer.nextLevel=t.id)}getCurrentLevel(){if(0==this.qualityList.length)return!1;const e=this.myPlayer&&this.myPlayer.loadLevel;return this.qualityList.find((t=>e==t.id))}getMediaInfo(){var e,t;if(this.myPlayer)return({videoPts:e,audioPts:t}=this.getPts()),{video:{width:this.getSize().width,height:this.getSize().height,codec:this.bufferCodecsInfo&&this.bufferCodecsInfo.video&&this.bufferCodecsInfo.video.codec,frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"hls_live":"hls_vod",demuxStyle:"hls",bitRate:this.myPlayer.bandwidthEstimate/1024/8,videoPts:e},audio:{bitRate:this.myPlayer.bandwidthEstimate,sampleRate:this.bufferCodecsInfo&&this.bufferCodecsInfo.audio&&this.bufferCodecsInfo.audio.metadata.samplerate,codec:this.bufferCodecsInfo&&this.bufferCodecsInfo.audio&&this.bufferCodecsInfo.audio.metadata.segmentCodec,audioPts:t}}}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getPts(){var e;return{audioPts:e=(e=this.myPlayer&&this.myPlayer.abrController.fragCurrent)&&e.endPTS,videoPts:e}}seekTimeShift(e,t){this.onLiveShift&&this.onLiveShift();var i=parseInt(Date.now()/1e3-(this.duration-e)),n=parseInt(Date.now()/1e3);i=s.getUrlParams(this.url)?this.url+`&starttime=${i}&requesttime=`+n:this.url+`?starttime=${i}&requesttime=`+n,i=t||(!1===e?this.url:i),this.timeShiftDestroy(),this.makeIt(i),this.shiftRequestUrl=i,this.play(),this.liveStartTime=0==e?this.duration:e,this.timeShiftData=this.duration}timeShiftDestroy(){this.loadSuccess=!1,this.myPlayer.destroy(),document.querySelector("#"+this.configFormat.playerId).removeChild(this.videoTag),this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.qualityList=[]}gobackLive(){this.seekTimeShift(!1)}release(){this.loadSuccess=!1,void 0!==this.bootInterval&&null!==this.bootInterval&&(window.clearInterval(this.bootInterval),this.bootInterval=null),this.myPlayer&&this.myPlayer.destroy(),this.myPlayerID=null,this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.qualityList=[],this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,(this.onQualityLevels=null)!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),window.onclick=document.body.onclick=null}}},function(e,t,i){!function t(i){e.exports=function(){"use strict";function e(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)),n}function n(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){var i=t,r=n[e];(e=p(e))in i?Object.defineProperty(i,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[e]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function a(e,t,i){t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1})}function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),h(e.prototype.constructor=e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,i){return(u=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(e){}}}()?Reflect.construct.bind():function(e,t,i){var n=[null];return n.push.apply(n,t),t=new(Function.bind.apply(e,n)),i&&h(t,i.prototype),t}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return u(e,arguments,l(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h(i,e)})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){var i,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e){var t;if(e)return"string"==typeof e?c(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),i=0,function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!=typeof(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e),"symbol"==typeof e?e:String(e)}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}g=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,_=/^(?=([^\/?#]*))\1([^]*)$/,y=/(?:\/|^)\.(?=\/)/g,v=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,A={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=A.parseURL(e);if(n)return n.path=A.normalizePath(n.path),A.buildURLFromParts(n);throw new Error("Error trying to parse base URL.")}if(!(n=A.parseURL(t)))throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=A.normalizePath(n.path),A.buildURLFromParts(n)):t;if(!(t=A.parseURL(e)))throw new Error("Error trying to parse base URL.");var r;return!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=_.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/"),e={scheme:t.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment},n.netLoc||(e.netLoc=t.netLoc,"/"===n.path[0])||(n.path?(r=(r=t.path).substring(0,r.lastIndexOf("/")+1)+n.path,e.path=A.normalizePath(r)):(e.path=t.path,n.params||(e.params=t.params,n.query)||(e.query=t.query))),null===e.path&&(e.path=i.alwaysNormalize?A.normalizePath(n.path):n.path),A.buildURLFromParts(e)},parseURL:function(e){return(e=g.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(y,"");e.length!==(e=e.replace(v,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};var g,_,y,v,A,E=A,b=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},w=((G={}).MEDIA_ATTACHING="hlsMediaAttaching",G.MEDIA_ATTACHED="hlsMediaAttached",G.MEDIA_DETACHING="hlsMediaDetaching",G.MEDIA_DETACHED="hlsMediaDetached",G.BUFFER_RESET="hlsBufferReset",G.BUFFER_CODECS="hlsBufferCodecs",G.BUFFER_CREATED="hlsBufferCreated",G.BUFFER_APPENDING="hlsBufferAppending",G.BUFFER_APPENDED="hlsBufferAppended",G.BUFFER_EOS="hlsBufferEos",G.BUFFER_FLUSHING="hlsBufferFlushing",G.BUFFER_FLUSHED="hlsBufferFlushed",G.MANIFEST_LOADING="hlsManifestLoading",G.MANIFEST_LOADED="hlsManifestLoaded",G.MANIFEST_PARSED="hlsManifestParsed",G.LEVEL_SWITCHING="hlsLevelSwitching",G.LEVEL_SWITCHED="hlsLevelSwitched",G.LEVEL_LOADING="hlsLevelLoading",G.LEVEL_LOADED="hlsLevelLoaded",G.LEVEL_UPDATED="hlsLevelUpdated",G.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",G.LEVELS_UPDATED="hlsLevelsUpdated",G.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",G.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",G.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",G.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",G.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",G.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",G.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",G.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",G.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",G.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",G.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",G.CUES_PARSED="hlsCuesParsed",G.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",G.INIT_PTS_FOUND="hlsInitPtsFound",G.FRAG_LOADING="hlsFragLoading",G.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",G.FRAG_LOADED="hlsFragLoaded",G.FRAG_DECRYPTED="hlsFragDecrypted",G.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",G.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",G.FRAG_PARSING_METADATA="hlsFragParsingMetadata",G.FRAG_PARSED="hlsFragParsed",G.FRAG_BUFFERED="hlsFragBuffered",G.FRAG_CHANGED="hlsFragChanged",G.FPS_DROP="hlsFpsDrop",G.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",G.ERROR="hlsError",G.DESTROYING="hlsDestroying",G.KEY_LOADING="hlsKeyLoading",G.KEY_LOADED="hlsKeyLoaded",G.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",G.BACK_BUFFER_REACHED="hlsBackBufferReached",G.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",G),S=((G={}).NETWORK_ERROR="networkError",G.MEDIA_ERROR="mediaError",G.KEY_SYSTEM_ERROR="keySystemError",G.MUX_ERROR="muxError",G.OTHER_ERROR="otherError",G),T=((G={}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",G.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",G.KEY_SYSTEM_NO_SESSION="keySystemNoSession",G.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",G.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",G.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",G.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",G.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",G.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",G.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",G.MANIFEST_LOAD_ERROR="manifestLoadError",G.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",G.MANIFEST_PARSING_ERROR="manifestParsingError",G.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",G.LEVEL_EMPTY_ERROR="levelEmptyError",G.LEVEL_LOAD_ERROR="levelLoadError",G.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",G.LEVEL_PARSING_ERROR="levelParsingError",G.LEVEL_SWITCH_ERROR="levelSwitchError",G.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",G.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",G.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",G.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",G.FRAG_LOAD_ERROR="fragLoadError",G.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",G.FRAG_DECRYPT_ERROR="fragDecryptError",G.FRAG_PARSING_ERROR="fragParsingError",G.FRAG_GAP="fragGap",G.REMUX_ALLOC_ERROR="remuxAllocError",G.KEY_LOAD_ERROR="keyLoadError",G.KEY_LOAD_TIMEOUT="keyLoadTimeOut",G.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",G.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",G.BUFFER_APPEND_ERROR="bufferAppendError",G.BUFFER_APPENDING_ERROR="bufferAppendingError",G.BUFFER_STALLED_ERROR="bufferStalledError",G.BUFFER_FULL_ERROR="bufferFullError",G.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",G.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",G.INTERNAL_EXCEPTION="internalException",G.INTERNAL_ABORTED="aborted",G.UNKNOWN="unknown",G),C=function(){},L={trace:C,debug:C,log:C,warn:C,info:C,error:C},R=L;function I(e,t){if(self.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.forEach((function(t){var i;R[t]=e[t]?e[t].bind(e):(i=self.console[t])?i.bind(self.console,"["+t+"] >"):C}))}(e,"debug","log","info","warn","error");try{R.log('Debug logs enabled for "'+t+'" in hls.js version '+void 0)}catch(e){R=L}}else R=L}var k=R,P=/^(\d+)x(\d+)$/,D=/(.+?)=(".*?"|.*?)(?:,|$)/g,x=((G=M.prototype).decimalInteger=function(e){return(e=parseInt(this[e],10))>Number.MAX_SAFE_INTEGER?1/0:e},G.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,i=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)i[n]=parseInt(t.slice(2*n,2*n+2),16);return i}return null},G.hexadecimalIntegerAsNumber=function(e){return(e=parseInt(this[e],16))>Number.MAX_SAFE_INTEGER?1/0:e},G.decimalFloatingPoint=function(e){return parseFloat(this[e])},G.optionalFloat=function(e,t){return(e=this[e])?parseFloat(e):t},G.enumeratedString=function(e){return this[e]},G.bool=function(e){return"YES"===this[e]},G.decimalResolution=function(e){if(null!==(e=P.exec(this[e])))return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},M.parseAttrList=function(e){var t,i={};for(D.lastIndex=0;null!==(t=D.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),i[t[1].trim()]=n}return i},M);function M(e){for(var t in e="string"==typeof e?M.parseAttrList(e):e)e.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}a(Z,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){var e;return this._endDate||(null!==(e=this.duration)?new Date(this._startDate.getTime()+1e3*e):null)}},{key:"duration",get:function(){if("DURATION"in this.attr){var e=this.attr.decimalFloatingPoint("DURATION");if(b(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&b(this.startDate.getTime())&&(null===this.duration||0<=this.duration)&&(!this.endOnNext||!!this.class)}}]);var F,B,O=Z,U=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},N="audio",j="video",V="audiovideo",G=(J.prototype.setByteRange=function(e,t){var i=[];1===(e=e.split("@",2)).length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(e[1]),i[1]=parseInt(e[0])+i[0],this._byteRange=i},a(J,[{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=E.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),J),H=(o(K,B=G),(ai=K.prototype).setKeyFormat=function(e){this.levelkeys&&(e=this.levelkeys[e])&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))},ai.abortRequests=function(){var e;null!=(e=this.loader)&&e.abort(),null!=(e=this.keyLoader)&&e.abort()},ai.setElementaryStreamInfo=function(e,t,i,n,r,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,i),o.startDTS=Math.min(o.startDTS,n),o.endDTS=Math.max(o.endDTS,r)):s[e]={startPTS:t,endPTS:i,startDTS:n,endDTS:r,partial:a}},ai.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[N]=null,e[j]=null,e[V]=null},a(K,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else if(1===(e=Object.keys(this.levelkeys)).length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){var e;return null!==this.programDateTime&&b(this.programDateTime)?(e=b(this.duration)?this.duration:0,this.programDateTime+1e3*e):null}},{key:"encrypted",get:function(){if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var e=Object.keys(this.levelkeys),t=e.length;if(1<t||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}}]),K),Y=(o(Q,F=G),a(Q,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),Q),W=(z.prototype.reloaded=function(e){var t,i;e?(t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex,this.updated=this.endSN!==e.endSN||!!i||!!t,this.advanced=this.endSN>e.endSN||0<t||0==t&&0<i,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay):(this.advanced=!0,this.updated=!0)},a(z,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&b(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return 0<e?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),z);function z(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}function Q(e,t,i,n,r){return(i=F.call(this,i)||this).fragOffset=0,i.duration=0,i.gap=!1,i.independent=!1,i.relurl=void 0,i.fragment=void 0,i.index=void 0,i.stats=new U,i.duration=e.decimalFloatingPoint("DURATION"),i.gap=e.bool("GAP"),i.independent=e.bool("INDEPENDENT"),i.relurl=e.enumeratedString("URI"),i.fragment=t,i.index=n,(t=e.enumeratedString("BYTERANGE"))&&i.setByteRange(t,r),r&&(i.fragOffset=r.fragOffset+r.duration),i}function K(e,t){return(t=B.call(this,t)||this)._decryptdata=null,t.rawProgramDateTime=null,t.programDateTime=null,t.tagList=[],t.duration=0,t.sn=0,t.levelkeys=void 0,t.type=void 0,t.loader=null,t.keyLoader=null,t.level=-1,t.cc=0,t.startPTS=void 0,t.endPTS=void 0,t.startDTS=void 0,t.endDTS=void 0,t.start=0,t.deltaPTS=void 0,t.maxStartPTS=void 0,t.minEndPTS=void 0,t.stats=new U,t.urlId=0,t.data=void 0,t.bitrateTest=!1,t.title=null,t.initSegment=null,t.endList=void 0,t.gap=void 0,t.type=e,t}function J(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[N]=null,t[j]=null,t[V]=null,t),this.baseurl=e}function Z(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var i,n=t.attr;for(i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){k.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=i;break}e=s(new x({}),n,e)}this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr&&(t=new Date(this.attr["END-DATE"]),b(t.getTime()))&&(this._endDate=t)}function q(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function X(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(function(e){return e.charCodeAt(0)}))}var $={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ee="org.w3.clearkey",te="com.apple.streamingkeydelivery",ie="com.microsoft.playready",ne="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function re(e){switch(e){case te:return $.FAIRPLAY;case ie:return $.PLAYREADY;case ne:return $.WIDEVINE;case ee:return $.CLEARKEY}}var ae="edef8ba979d64acea3c827dcd51d21ed";function se(e){switch(e){case $.FAIRPLAY:return te;case $.PLAYREADY:return ie;case $.WIDEVINE:return ne;case $.CLEARKEY:return ee}}function oe(e){var t=e.drmSystems,i=(e=e.widevineLicenseUrl,t?[$.FAIRPLAY,$.WIDEVINE,$.PLAYREADY,$.CLEARKEY].filter((function(e){return!!t[e]})):[]);return!i[$.WIDEVINE]&&e&&i.push($.WIDEVINE),i}var le="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function he(e,t,i){return Uint8Array.prototype.slice?e.slice(t,i):new Uint8Array(Array.prototype.slice.call(e,t,i))}function ue(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function de(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function ce(e,t){for(var i=t,n=0;ue(e,t);)n=(n+=10)+_e(e,t+6),de(e,t+10)&&(n+=10),t+=n;if(0<n)return e.subarray(i,i+n)}function fe(e){for(var t=me(e),i=0;i<t.length;i++)if(pe(r=t[i])){if(8===r.data.byteLength){var n=1&(r=new Uint8Array(r.data))[3],r=(r[4]<<23)+(r[5]<<15)+(r[6]<<7)+r[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}return}}function pe(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function me(e){for(var t,i=0,n=[];ue(e,i);){for(var r=_e(e,i+6),a=(i+=10)+r;i+8<a;){t=e.subarray(i),o=s=void 0;var s={type:s=String.fromCharCode(t[0],t[1],t[2],t[3]),size:o=_e(t,4),data:t.subarray(10,10+o)},o=("PRIV"===(t=s).type?ye:"W"===t.type[0]?Ae:ve)(t);o&&n.push(o),i+=s.size+10}de(e,i)&&(i+=10)}return n}var ge,_e=function(e,t){var i=0;return i=(127&e[t])<<21,(i=(i|=(127&e[t+1])<<14)|(127&e[t+2])<<7)|127&e[t+3]},ye=function(e){var t,i;if(!(e.size<2))return t=Ee(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1)),{key:e.type,info:t,data:i.buffer}},ve=function(e){var t,i;if(!(e.size<2))return"TXXX"===e.type?(t=1,t+=(i=Ee(e.data.subarray(1),!0)).length+1,t=Ee(e.data.subarray(t)),{key:e.type,info:i,data:t}):(i=Ee(e.data.subarray(1)),{key:e.type,data:i})},Ae=function(e){var t,i;return"WXXX"===e.type?e.size<2?void 0:(t=1,t+=(i=Ee(e.data.subarray(1),!0)).length+1,t=Ee(e.data.subarray(t)),{key:e.type,info:i,data:t}):(i=Ee(e.data),{key:e.type,data:i})},Ee=function(e,t){var i,n;if(void 0===t&&(t=!1),ge=ge||void 0===self.TextDecoder?ge:new self.TextDecoder("utf-8"))return i=ge.decode(e),t?-1!==(n=i.indexOf("\0"))?i.substring(0,n):i:i.replace(/\0/g,"");for(var r,a,s,o=e.length,l="",h=0;h<o;){if(0===(r=e[h++])&&t)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:a=e[h++],l+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=e[h++],s=e[h++],l+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&s)}}return l};function be(e){for(var t="",i=0;i<e.length;i++){var n=e[i].toString(16);t+=n=n.length<2?"0"+n:n}return t}var we=Math.pow(2,32)-1,Se=[].push,Te={video:1,audio:2,id3:3,text:4};function Ce(e){return String.fromCharCode.apply(null,e)}function Le(e,t){return(e=e[t]<<8|e[t+1])<0?65536+e:e}function Re(e,t){return(e=Ie(e,t))<0?4294967296+e:e}function Ie(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function ke(e,t,i){e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function Pe(e,t){var i=[];if(t.length)for(var n=e.byteLength,r=0;r<n;){var a,s=1<(s=Re(e,r))?r+s:n;Ce(e.subarray(r+4,r+8))===t[0]&&(1===t.length?i.push(e.subarray(r+8,s)):(a=Pe(e.subarray(r+8,s),t.slice(1))).length&&Se.apply(i,a)),r=s}return i}function De(e){for(var t=[],i=Pe(e,["moov","trak"]),r=0;r<i.length;r++){var a,s,o=i[r],l=Pe(o,["tkhd"])[0];l&&(l=Re(l,0===l[0]?12:20),a=Pe(o,["mdia","mdhd"])[0])&&(a=Re(a,0===a[0]?12:20),s=Pe(o,["mdia","hdlr"])[0])&&(s=Ce(s.subarray(8,12)),s={soun:N,vide:j}[s])&&(o=function(e){var t,i=e.subarray(8),n=i.subarray(86),r=Ce(i.subarray(4,8)),a=r,s="enca"===r||"encv"===r;switch(s&&(t=Pe(i,[r])[0],Pe(t.subarray("enca"===r?28:78),["sinf"]).forEach((function(e){var t=Pe(e,["schm"])[0];!t||"cbcs"!==(t=Ce(t.subarray(4,8)))&&"cenc"!==t||(t=Pe(e,["frma"])[0])&&(a=Ce(t))}))),a){case"avc1":case"avc2":case"avc3":case"avc4":a+="."+xe(e[111])+xe(e[112])+xe(e[113]);break;case"mp4a":var o=Pe(i,[r])[0];(o=Pe(o.subarray(28),["esds"])[0])&&12<o.length&&0!==o[11]&&(a=(a+="."+xe(o[11]))+"."+(o[12]>>>2&63).toString(16).toUpperCase());break;case"hvc1":case"hev1":var l=["","A","B","C"][(d=(o=Pe(n,["hvcC"])[0])[1])>>6],h=31&d,u=Re(o,2),d=(32&d)>>5?"H":"L",c=o[12],f=o.subarray(6,12);a=(a=(a+="."+l+h)+"."+u.toString(16).toUpperCase())+"."+d+c;for(var p="",m=f.length;m--;){var g=f[m];(g||p)&&(p="."+g.toString(16).toUpperCase()+p)}a+=p;break;case"dvh1":case"dvhe":l=(o=Pe(n,["dvcC"])[0])[2]>>1&127,h=o[2]<<5&32|o[3]>>3&31,a+="."+Me(l)+"."+Me(h);break;case"vp09":d=(u=Pe(n,["vpcC"])[0])[4],c=u[5],o=u[6]>>4&15,a+="."+Me(d)+"."+Me(c)+"."+Me(o);break;case"av01":h=(l=Pe(n,["av1C"])[0])[1]>>>3,u=31&l[1],d=l[2]>>>7?"H":"M",c=(64&l[2])>>6,o=(32&l[2])>>5,o=2==h&&c?o?12:10:c?10:8,c=(16&l[2])>>4;var _=(8&l[2])>>3,y=(4&l[2])>>2;l=3&l[2],a+="."+h+"."+Me(u)+d+"."+Me(o)+"."+c+"."+_+y+l}return{codec:a,encrypted:s}}(Pe(o,["mdia","minf","stbl","stsd"])[0]),t[l]={timescale:a,type:s},t[s]=n({timescale:a,id:l},o))}return Pe(e,["moov","mvex","trex"]).forEach((function(e){var i=Re(e,4);(i=t[i])&&(i.default={duration:Re(e,12),flags:Re(e,20)})})),t}function xe(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function Me(e){return(e<10?"0":"")+e}function Fe(e){var t=Pe(e,["schm"])[0];return!t||"cbcs"!==(t=Ce(t.subarray(4,8)))&&"cenc"!==t?(k.error("[eme] missing 'schm' box"),null):Pe(e,["schi","tenc"])[0]}function Be(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function Oe(e,t){var i=[],n=t.samples,r=t.timescale,a=t.id,s=!1;return Pe(n,["moof"]).map((function(o){var l=o.byteOffset-8;Pe(o,["traf"]).map((function(o){var h=Pe(o,["tfdt"]).map((function(e){var t=e[0],i=Re(e,4);return(i=1===t?(i*=Math.pow(2,32))+Re(e,8):i)/r}))[0];return void 0!==h&&(e=h),Pe(o,["tfhd"]).map((function(h){var u=Re(h,4),d=16777215&Re(h,0),c=0,f=0,p=8;u===a&&(!!(1&d)&&(p+=8),!!(2&d)&&(p+=4),!!(8&d)&&(c=Re(h,p),p+=4),!!(16&d)&&(f=Re(h,p),p+=4),!!(32&d)&&(p+=4),"video"===t.type&&(u=t.codec,s=!!u&&("hvc1"===(u=(h=u.indexOf("."))<0?u:u.substring(0,h))||"hev1"===u||"dvh1"===u||"dvhe"===u)),Pe(o,["trun"]).map((function(a){var o=a[0],h=16777215&Re(a,0),u=0,d=!!(256&h),p=0,m=!!(512&h),g=0,_=!!(1024&h),y=!!(2048&h),v=0,A=Re(a,4),E=8;!!(1&h)&&(u=Re(a,E),E+=4),4&h&&(E+=4);for(var b=u+l,w=0;w<A;w++){if(d?(p=Re(a,E),E+=4):p=c,m?(g=Re(a,E),E+=4):g=f,_&&(E+=4),y&&(v=(0===o?Re:Ie)(a,E),E+=4),t.type===j)for(var S=0;S<g;){var T=Re(n,b);!function(e,t){return e?39==(e=t>>1&63)||40==e:6==(31&t)}(s,n[b+=4])||Ue(n.subarray(b,b+T),s?2:1,e+v/r,i),b+=T,S+=T+4}e+=p/r}})))}))}))})),i}function Ue(e,t,i,n){var r=Ne(e),a=0;a+=t;for(var s=0,o=0,l=!1,h=0;a<r.length;){for(s=0;!(a>=r.length)&&(s+=h=r[a++],255===h););for(o=0;!(a>=r.length)&&(o+=h=r[a++],255===h););var u=r.length-a;if(!l&&4===s&&a<r.length){if(l=!0,181===r[a++]){var d=Le(r,a);if(a+=2,49===d&&(d=Re(r,a),a+=4,1195456820===d&&3===(d=r[a++]))){var c=r[a++],f=64&c,p=f?2+3*(31&c):0,m=new Uint8Array(p);if(f){m[0]=c;for(var g=1;g<p;g++)m[g]=r[a++]}n.push({type:d,payloadType:s,pts:i,bytes:m})}}}else if(5===s&&o<u){if(l=!0,16<o){for(var _=[],y=0;y<16;y++){var v=r[a++].toString(16);_.push(1==v.length?"0"+v:v),3!==y&&5!==y&&7!==y&&9!==y||_.push("-")}for(var A=o-16,E=new Uint8Array(A),b=0;b<A;b++)E[b]=r[a++];n.push({payloadType:s,pts:i,uuid:_.join(""),userData:Ee(E),userDataBytes:E})}}else if(o<u)a+=o;else if(u<o)break}}function Ne(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return e;var r=t-i.length,a=new Uint8Array(r),s=0;for(n=0;n<r;s++,n++)s===i[0]&&(s++,i.shift()),a[n]=e[s];return a}var je={},Ve=(He.clearKeyUriToKeyIdMap=function(){je={}},(ai=He.prototype).isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case te:case ne:case ie:case ee:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},ai.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv)return"number"!=typeof e&&("AES-128"!==this.method||this.iv||k.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0),e=function(e){for(var t=new Uint8Array(16),i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}(e),new He(this.method,this.uri,"identity",this.keyFormatVersions,e);t=null,"data"===(e=(e=this.uri).split(":"))[0]&&2===e.length&&2===(n=(e=e[1].split(";"))[e.length-1].split(",")).length&&(i="base64"===n[0],n=n[1],t=i?(e.splice(-1,1),q(n)):(i=X(n).subarray(0,16),(e=new Uint8Array(16)).set(i,16-i.length),e));var t,i,n,r=t;if(r)switch(this.keyFormat){case ne:22<=(this.pssh=r).length&&(this.keyId=r.subarray(r.length-22,r.length-6));break;case ie:var a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(e,t,i){if(16!==e.byteLength)throw new RangeError("Invalid system id");var n,r,a;r=0,a=new Uint8Array,0<r?(n=new Uint8Array(4),0<t.length&&new DataView(n.buffer).setUint32(0,t.length,!1)):n=new Uint8Array;var s=new Uint8Array(4);return i&&0<i.byteLength&&new DataView(s.buffer).setUint32(0,i.byteLength,!1),function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=i.length,a=8,s=r;s--;)a+=i[s].byteLength;var o=new Uint8Array(a);for(o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,o.set(e,4),s=0,a=8;s<r;s++)o.set(i[s],a),a+=i[s].byteLength;return o}([112,115,115,104],new Uint8Array([r,0,0,0]),e,n,a,s,i||new Uint8Array)}(a,null,r),a=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),a=(a=String.fromCharCode.apply(null,Array.from(a))).substring(a.indexOf("<"),a.length),(a=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("KID")[0])&&(a=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE"))&&(o(s=a=q(a).subarray(0,16),0,3),o(s,1,2),o(s,4,5),o(s,6,7),this.keyId=a);break;default:var s=r.subarray(0,16);16!==s.length&&((a=new Uint8Array(16)).set(s,16-s.length),s=a),this.keyId=s}function o(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}return this.keyId&&16===this.keyId.byteLength||((n=je[this.uri])||(i=Object.keys(je).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,i),je[this.uri]=n),this.keyId=n),this},He),Ge=/\{\$([a-zA-Z0-9-_]+)\}/g;function He(e,t,i,n,r,a){void 0===n&&(n=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.token=void 0,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=n,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e,this.token=a,"media-drm-player-binding"===this.keyFormat&&(this.uri=this.uri+"&playerId=pid-1-5-1"),"media-drm-token"===this.keyFormat&&this.token&&(this.uri=this.uri+"&playerId=pid-1-5-1&token="+this.token),!this.keyFormat&&this.token&&(this.uri=this.uri+"&token="+this.token)}function Ye(e){return Ge.test(e)}function We(e,t,i){if(null!==e.variableList||e.hasVariableRefs)for(var n=i.length;n--;){var r=i[n],a=t[r];a&&(t[r]=ze(e,a))}}function ze(e,t){var i;return null!==e.variableList||e.hasVariableRefs?(i=e.variableList,t.replace(Ge,(function(t){var n=t.substring(2,t.length-1),r=null==i?void 0:i[n];return void 0===r?(e.playlistParsingError||(e.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+n+'"')),t):r}))):t}function Qe(e,t,i){var n,r,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){n=t.QUERYPARAM;try{var s=new self.URL(i).searchParams;if(!s.has(n))throw new Error('"'+n+'" does not match any query parameter in URI: "'+i+'"');r=s.get(n)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+t.message))}}else n=t.NAME,r=t.VALUE;n in a?e.playlistParsingError||(e.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+n+'"')):a[n]=r||""}function Ke(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}var Je={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,fLaC:!0,flac:!0,FLAC:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},Ze=Ke();function qe(e,t){return!e.split(",").some((function(e){return!Xe(e,t)}))}function Xe(e,t){return null!=(t=null==Ze?void 0:Ze.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"'))&&t}var $e={},et=/flac|opus/i;function tt(e){return e.replace(et,(function(e){var t=e.toLowerCase();if($e[t])return $e[t];for(var i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t],n=0;n<i.length;n++)if(Xe(i[n],"audio"))return $e[t]=i[n],i[n];return t}))}var it=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,nt=/#EXT-X-MEDIA:(.*)/g,rt=/^#EXT(?:INF|-X-TARGETDURATION):/m,at=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),st=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),ot=(lt.findGroup=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n}},lt.convertAVC1ToAVCOTI=function(e){var t,i=e.split(".");return 2<i.length?(t=i.shift()+".",(t+=parseInt(i.shift()).toString(16))+("000"+parseInt(i.shift()).toString(16)).slice(-4)):e},lt.resolve=function(e,t){return E.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},lt.isMediaPlaylist=function(e){return rt.test(e)},lt.parseMasterPlaylist=function(e,t){var i,n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ye(e)},r=[];for(it.lastIndex=0;null!=(i=it.exec(e));)if(i[1]){var a=(We(n,o=new x(i[1]),["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]),ze(n,i[2])),s=(a={attrs:o,bitrate:o.decimalInteger("BANDWIDTH")||o.decimalInteger("AVERAGE-BANDWIDTH"),name:o.NAME,url:lt.resolve(a,t)},o.decimalResolution("RESOLUTION"));s&&(a.width=s.width,a.height=s.height),function(e,t){["video","audio","text"].forEach((function(i){var n=e.filter((function(e){return!!(t=Je[i])&&!0===t[e.slice(0,4)];var t}));n.length&&(t[i+"Codec"]=n.join(","),e=e.filter((function(e){return-1===n.indexOf(e)})))})),t.unknownCodecs=e}((o.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=lt.convertAVC1ToAVCOTI(a.videoCodec)),null!=(s=a.unknownCodecs)&&s.length||r.push(a),n.levels.push(a)}else if(i[3]){var o=i[3],l=i[4];switch(o){case"SESSION-DATA":var h=new x(l),u=(We(n,h,["DATA-ID","LANGUAGE","VALUE","URI"]),h["DATA-ID"]);u&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[u]=h);break;case"SESSION-KEY":(u=ht(l,t,n)).encrypted&&u.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(u)):k.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+l+'"');break;case"DEFINE":We(n,h=new x(l),["NAME","VALUE","QUERYPARAM"]),Qe(n,h,t);break;case"CONTENT-STEERING":var d=new x(l);We(n,d,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:lt.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break;case"START":n.startTimeOffset=ut(l)}}var c=0<r.length&&r.length<n.levels.length;return n.levels=c?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n},lt.parseMasterPlaylistMedia=function(e,t,i){var n={},r=i.levels,a={AUDIO:r.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),SUBTITLES:r.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),"CLOSED-CAPTIONS":[]},s=0;for(nt.lastIndex=0;null!==(h=nt.exec(e));){var o,l,h=new x(h[1]),u=h.TYPE;u&&(o=a[u],l=n[u]||[],n[u]=l,We(i,h,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]),u={attrs:h,bitrate:0,id:s++,groupId:h["GROUP-ID"]||"",instreamId:h["INSTREAM-ID"],name:h.NAME||h.LANGUAGE||"",type:u,default:h.bool("DEFAULT"),autoselect:h.bool("AUTOSELECT"),forced:h.bool("FORCED"),lang:h.LANGUAGE,url:h.URI?lt.resolve(h.URI,t):""},null!=o&&o.length&&(dt(u,h=lt.findGroup(o,u.groupId)||o[0],"audioCodec"),dt(u,h,"textCodec")),l.push(u))}return n},lt.parseLevelPlaylist=function(e,t,i,n,r,a,o){var l,h,u,d=new W(t),c=d.fragments,f=null,p=0,m=0,g=0,_=0,y=null,v=new H(n,t),A=-1,E=!1;for(at.lastIndex=0,d.m3u8=e,d.hasVariableRefs=Ye(e);null!==(l=at.exec(e));){E&&(E=!1,(v=new H(n,t)).start=g,v.sn=p,v.cc=_,v.level=i,f)&&(v.initSegment=f,v.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null);var w=l[1];if(w){v.duration=parseFloat(w);var S=(" "+l[2]).slice(1);v.title=S||null,v.tagList.push(S?["INF",w,S]:["INF",w])}else if(l[3])b(v.duration)&&(v.start=g,u&&pt(v,u,d),v.sn=p,v.level=i,v.cc=_,v.urlId=r,c.push(v),S=(" "+l[3]).slice(1),v.relurl=ze(d,S),ct(v,y),g+=(y=v).duration,p++,E=!(m=0));else if(l[4])w=(" "+l[4]).slice(1),y?v.setByteRange(w,y):v.setByteRange(w);else if(l[5])v.rawProgramDateTime=(" "+l[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),-1===A&&(A=c.length);else if(l=l[0].match(st)){for(h=1;h<l.length&&void 0===l[h];h++);var T=(" "+l[h]).slice(1),C=(" "+l[h+1]).slice(1),L=l[h+2]?(" "+l[h+2]).slice(1):"";switch(T){case"PLAYLIST-TYPE":d.type=C.toUpperCase();break;case"MEDIA-SEQUENCE":p=d.startSN=parseInt(C);break;case"SKIP":var R=new x(C),I=(We(d,R,["RECENTLY-REMOVED-DATERANGES"]),R.decimalInteger("SKIPPED-SEGMENTS"));if(b(I)){for(var P=d.skippedSegments=I;P--;)c.unshift(null);p+=I}(I=R.enumeratedString("RECENTLY-REMOVED-DATERANGES"))&&(d.recentlyRemovedDateranges=I.split("\t"));break;case"TARGETDURATION":d.targetduration=Math.max(parseInt(C),1);break;case"VERSION":d.version=parseInt(C);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"#":(C||L)&&v.tagList.push(L?[C,L]:[C]);break;case"DISCONTINUITY":_++,v.tagList.push(["DIS"]);break;case"GAP":v.gap=!0,v.tagList.push([T]);break;case"BITRATE":v.tagList.push([T,C]);break;case"DATERANGE":We(d,R=new x(C),["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),We(d,R,R.clientAttrs),(I=new O(R,d.dateRanges[R.ID])).isValid||d.skippedSegments?d.dateRanges[I.id]=I:k.warn('Ignoring invalid DATERANGE tag: "'+C+'"'),v.tagList.push(["EXT-X-DATERANGE",C]);break;case"DEFINE":var D=new x(C);We(d,D,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in D?(F=d,B=a,M=void 0,U=(U=D).IMPORT,B&&U in B?((M=F.variableList)||(F.variableList=M={}),M[U]=B[U]):F.playlistParsingError||(F.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+U+'"'))):Qe(d,D,t);break;case"DISCONTINUITY-SEQUENCE":_=parseInt(C);break;case"KEY":var M=ht(C,t,d,o);if(M.isSupported()){if("NONE"===M.method){u=void 0;break}(u=(u=u||{})[M.keyFormat]?s({},u):u)[M.keyFormat]=M}else k.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+C+'"');break;case"START":d.startTimeOffset=ut(C);break;case"MAP":var F,B=new x(C);We(d,B,["BYTERANGE","URI"]),v.duration?(ft(F=new H(n,t),B,i,u),(v.initSegment=f=F).rawProgramDateTime&&!v.rawProgramDateTime&&(v.rawProgramDateTime=f.rawProgramDateTime)):(ft(v,B,i,u),f=v,E=!0);break;case"SERVER-CONTROL":var U=new x(C);d.canBlockReload=U.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=U.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=0<d.canSkipUntil&&U.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=U.optionalFloat("PART-HOLD-BACK",0),d.holdBack=U.optionalFloat("HOLD-BACK",0);break;case"PART-INF":D=new x(C),d.partTarget=D.decimalFloatingPoint("PART-TARGET");break;case"PART":var N=(N=d.partList)||(d.partList=[]),j=0<m?N[N.length-1]:void 0,V=m++,G=(We(d,G=new x(C),["BYTERANGE","URI"]),new Y(G,v,t,V,j));N.push(G),v.duration+=G.duration;break;case"PRELOAD-HINT":We(d,V=new x(C),["URI"]),d.preloadHint=V;break;case"RENDITION-REPORT":We(d,j=new x(C),["URI"]),d.renditionReports=d.renditionReports||[],d.renditionReports.push(j);break;default:k.warn("line parsed but not handled: "+l)}}else k.warn("No matches on slow regex match for level playlist!")}y&&!y.relurl?(c.pop(),g-=y.duration,d.partList&&(d.fragmentHint=y)):d.partList&&(ct(v,y),v.cc=_,d.fragmentHint=v,u)&&pt(v,u,d);var z=c.length,Q=c[0],K=c[z-1];return 0<(g+=d.skippedSegments*d.targetduration)&&z&&K?(d.averagetargetduration=g/z,z=K.sn,d.endSN="initSegment"!==z?z:0,d.live||(K.endList=!0),Q&&(d.startCC=Q.cc)):(d.endSN=0,d.startCC=0),d.fragmentHint&&(g+=d.fragmentHint.duration),d.totalduration=g,d.endCC=_,0<A&&function(e,t){for(var i=e[t],n=t;n--;){var r=e[n];if(!r)return;r.programDateTime=i.programDateTime-1e3*r.duration,i=r}}(c,A),d},lt);function lt(){}function ht(e,t,i,n){We(i,e=new x(e),["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]),i=null!=(i=e.METHOD)?i:"";var r=e.URI,a=e.hexadecimalInteger("IV"),s=e.KEYFORMATVERSIONS,o=null!=(o=e.KEYFORMAT)?o:"identity";return r&&e.IV&&!a&&k.error("Invalid IV: "+e.IV),e=r?ot.resolve(r,t):"",r=(s||"1").split("/").map(Number).filter(Number.isFinite),new Ve(i,e,o,r,a,n.token)}function ut(e){return e=new x(e).decimalFloatingPoint("TIME-OFFSET"),b(e)?e:null}function dt(e,t,i){(t=t[i])&&(e[i]=t)}function ct(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),b(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function ft(e,t,i,n){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",n&&(e.levelkeys=n),e.initSegment=null}function pt(e,t,i){e.levelkeys=t,(i=i.encryptedFragments).length&&i[i.length-1].levelkeys===t||!Object.keys(t).some((function(e){return t[e].isCommonEncryption}))||i.push(e)}var mt="manifest",gt="level",_t="audioTrack",yt="subtitleTrack",vt="main",At="audio",Et="subtitle";function bt(e){switch(e.type){case _t:return At;case yt:return Et;default:return vt}}function wt(e,t){return void 0!==(e=e.url)&&0!==e.indexOf("data:")?e:t.url}(G=Tt.prototype).startLoad=function(e){},G.stopLoad=function(){this.destroyInternalLoaders()},G.registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},G.unregisterListeners=function(){var e=this.hls;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},G.createInternalLoader=function(e){var t=this.hls.config,i=t.pLoader,n=t.loader;return i=new(i||n)(t),this.loaders[e.type]=i},G.getInternalLoader=function(e){return this.loaders[e.type]},G.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},G.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},G.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},G.onManifestLoading=function(e,t){t=t.url,this.variableList=null,this.load({id:null,level:0,responseType:"text",type:mt,url:t,deliveryDirectives:null})},G.onLevelLoading=function(e,t){var i=t.id,n=t.level,r=t.url;t=t.deliveryDirectives,this.load({id:i,level:n,responseType:"text",type:gt,url:r,deliveryDirectives:t})},G.onAudioTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url;t=t.deliveryDirectives,this.load({id:i,groupId:n,level:null,responseType:"text",type:_t,url:r,deliveryDirectives:t})},G.onSubtitleTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url;t=t.deliveryDirectives,this.load({id:i,groupId:n,level:null,responseType:"text",type:yt,url:r,deliveryDirectives:t})},G.load=function(e){var t=this,i=this.hls.config,n=this.getInternalLoader(e);if(n){var r=n.context;if(r&&r.url===e.url)return void k.trace("[playlist-loader]: playlist request ongoing");k.log("[playlist-loader]: aborting previous loader for type: "+e.type),n.abort()}r=e.type===mt?i.manifestLoadPolicy.default:s({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),n=this.createInternalLoader(e),b(null==(i=e.deliveryDirectives)?void 0:i.part)&&(e.type===gt&&null!==e.level?a=this.hls.levels[e.level].details:e.type===_t&&null!==e.id?a=this.hls.audioTracks[e.id].details:e.type===yt&&null!==e.id&&(a=this.hls.subtitleTracks[e.id].details),a)&&(i=a.partTarget,a=a.targetduration,i&&a&&(i=1e3*Math.max(3*i,.8*a),r=s({},r,{maxTimeToFirstByteMs:Math.min(i,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(i,r.maxTimeToFirstByteMs)})));var a=r.errorRetry||r.timeoutRetry||{};i={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},n.load(e,i,{onSuccess:function(e,i,n,r){var a=t.getInternalLoader(n),s=(t.resetInternalLoader(n.type),e.data);0===s.indexOf("#EXTM3U")?(i.parsing.start=performance.now(),ot.isMediaPlaylist(s)?t.handleTrackOrLevelPlaylist(e,i,n,r||null,a):t.handleMasterPlaylist(e,i,n,r)):t.handleManifestParsingError(e,n,new Error("no EXTM3U delimiter"),r||null,i)},onError:function(e,i,n,r){t.handleNetworkError(i,n,!1,e,r)},onTimeout:function(e,i,n){t.handleNetworkError(i,n,!0,void 0,e)}})},G.handleMasterPlaylist=function(e,t,i,n){var r,a,s,o,l,h=this.hls,u=e.data,d=wt(e,i),c=ot.parseMasterPlaylist(u,d);c.playlistParsingError?this.handleManifestParsingError(e,i,c.playlistParsingError,n,t):(e=c.contentSteering,i=c.levels,r=c.sessionData,a=c.sessionKeys,s=c.startTimeOffset,o=c.variableList,this.variableList=o,c=(u=ot.parseMasterPlaylistMedia(u,d,c)).AUDIO,l=u.SUBTITLES,u=u["CLOSED-CAPTIONS"],(c=void 0===c?[]:c).length&&!c.some((function(e){return!e.url}))&&i[0].audioCodec&&!i[0].attrs.AUDIO&&(k.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),c.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new x({}),bitrate:0,url:""})),h.trigger(w.MANIFEST_LOADED,{levels:i,audioTracks:c,subtitles:l,captions:u,contentSteering:e,url:d,stats:t,networkDetails:n,sessionData:r,sessionKeys:a,startTimeOffset:s,variableList:o}))},G.handleTrackOrLevelPlaylist=function(e,t,i,n,r){var a=this.hls,s=i.id,o=i.level,l=i.type,h=wt(e,i),u=(s=b(s)?s:0,o=b(o)?o:s,bt(i));o=ot.parseLevelPlaylist(e.data,h,o,u,s,this.variableList,a.config),l===mt&&(u={attrs:new x({}),bitrate:0,details:o,name:"",url:h},a.trigger(w.MANIFEST_LOADED,{levels:[u],audioTracks:[],url:h,stats:t,networkDetails:n,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})),t.parsing.end=performance.now(),i.levelDetails=o,this.handlePlaylistLoaded(o,e,t,i,n,r)},G.handleManifestParsingError=function(e,t,i,n,r){this.hls.trigger(w.ERROR,{type:S.NETWORK_ERROR,details:T.MANIFEST_PARSING_ERROR,fatal:t.type===mt,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:n,stats:r})},G.handleNetworkError=function(e,t,i,r,a){var s="A network "+((i=void 0!==i&&i)?"timeout":"error"+(r?" (status "+r.code+")":""))+" occurred while loading "+e.type,o=(e.type===gt?s+=": "+e.level+" id: "+e.id:e.type!==_t&&e.type!==yt||(s+=" id: "+e.id+' group-id: "'+e.groupId+'"'),new Error(s)),l=(k.warn("[playlist-loader]: "+s),T.UNKNOWN),h=!1;switch(s=this.getInternalLoader(e),e.type){case mt:l=i?T.MANIFEST_LOAD_TIMEOUT:T.MANIFEST_LOAD_ERROR,h=!0;break;case gt:l=i?T.LEVEL_LOAD_TIMEOUT:T.LEVEL_LOAD_ERROR,h=!1;break;case _t:l=i?T.AUDIO_TRACK_LOAD_TIMEOUT:T.AUDIO_TRACK_LOAD_ERROR,h=!1;break;case yt:l=i?T.SUBTITLE_TRACK_LOAD_TIMEOUT:T.SUBTITLE_LOAD_ERROR,h=!1}s&&this.resetInternalLoader(e.type),s={type:S.NETWORK_ERROR,details:l,fatal:h,url:e.url,loader:s,context:e,error:o,networkDetails:t,stats:a},r&&(o=(null==t?void 0:t.url)||e.url,s.response=n({url:o,data:void 0},r)),this.hls.trigger(w.ERROR,s)},G.handlePlaylistLoaded=function(e,t,i,n,r,a){var s=this.hls,o=n.type,l=n.level,h=n.id,u=n.groupId,d=n.deliveryDirectives,c=wt(t,n),f=bt(n),p="number"==typeof n.level&&f===vt?l:void 0;if(e.fragments.length)if(e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration")),l=e.playlistParsingError)s.trigger(w.ERROR,{type:S.NETWORK_ERROR,details:T.LEVEL_PARSING_ERROR,fatal:!1,url:c,error:l,reason:l.message,response:t,context:n,level:p,parent:f,networkDetails:r,stats:i});else switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),o){case mt:case gt:s.trigger(w.LEVEL_LOADED,{details:e,level:p||0,id:h||0,stats:i,networkDetails:r,deliveryDirectives:d});break;case _t:s.trigger(w.AUDIO_TRACK_LOADED,{details:e,id:h||0,groupId:u||"",stats:i,networkDetails:r,deliveryDirectives:d});break;case yt:s.trigger(w.SUBTITLE_TRACK_LOADED,{details:e,id:h||0,groupId:u||"",stats:i,networkDetails:r,deliveryDirectives:d})}else l=new Error("No Segments found in Playlist"),s.trigger(w.ERROR,{type:S.NETWORK_ERROR,details:T.LEVEL_EMPTY_ERROR,fatal:!1,url:c,error:l,reason:l.message,response:t,context:n,level:p,parent:f,networkDetails:r,stats:i})};var St=Tt;function Tt(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}function Ct(e,t){var i;try{i=new Event("addtrack")}catch(e){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}function Lt(e,t){var i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(i){k.debug("[texttrack-utils]: "+i);try{var n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(e){k.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+e)}}"disabled"===i&&(e.mode=i)}function Rt(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)}function It(e,t,i,n){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&0<e.cues.length)for(var a=function(e,t,i){var n=[],r=function(e,t){if(t<e[0].startTime)return 0;var i=e.length-1;if(t>e[i].endTime)return-1;for(var n=0,r=i;n<=r;){var a=Math.floor((r+n)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&n<i))return a;n=a+1}}return e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(-1<r)for(var a=r,s=e.length;a<s;a++){var o=e[a];if(o.startTime>=t&&o.endTime<=i)n.push(o);else if(o.startTime>i)return n}return n}(e.cues,t,i),s=0;s<a.length;s++)n&&!n(a[s])||e.removeCue(a[s]);"disabled"===r&&(e.mode=r)}var kt="org.id3",Pt="https://aomedia.org/emsg/ID3";function Dt(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var xt=function(){var e=Dt();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Mt(e,t){return e.getTime()/1e3-t}(ai=Ht.prototype).destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},ai._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},ai._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this)},ai.onMediaAttached=function(e,t){this.media=t.media},ai.onMediaDetaching=function(){this.id3Track&&(Rt(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},ai.onManifestLoading=function(){this.dateRangeCuesAppended={}},ai.createTrack=function(e){return(e=this.getID3Track(e.textTracks)).mode="hidden",e},ai.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var i=e[t];if("metadata"===i.kind&&"id3"===i.label)return Ct(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},ai.onFragParsingMetadata=function(e,t){if(this.media){var i=this.hls.config,n=i.enableEmsgMetadataCues,r=i.enableID3MetadataCues;if(n||r){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var s=Dt(),o=0;o<a.length;o++){var l=a[o].type;if((l!==Pt||n)&&r){var h=me(a[o].data);if(h){var u=a[o].pts,d=u+a[o].duration;(d=xt<d?xt:d)-u<=0&&(d=u+.25);for(var c=0;c<h.length;c++){var f,p=h[c];pe(p)||(this.updateId3CueEnds(u,l),(f=new s(u,d,"")).value=p,l&&(f.type=l),this.id3Track.addCue(f))}}}}}}},ai.updateId3CueEnds=function(e,t){var i,n=null==(i=this.id3Track)?void 0:i.cues;if(n)for(var r=n.length;r--;){var a=n[r];a.type===t&&a.startTime<e&&a.endTime===xt&&(a.endTime=e)}},ai.onBufferFlushing=function(e,t){var i,n,r=t.startOffset,a=t.endOffset,s=(t=t.type,this.id3Track),o=this.hls;o&&(o=o.config,i=o.enableEmsgMetadataCues,n=o.enableID3MetadataCues,s)&&(i||n)&&It(s,r,a,"audio"===t?function(e){return e.type===kt&&n}:"video"===t?function(e){return e.type===Pt&&i}:function(e){return e.type===kt&&n||e.type===Pt&&i})},ai.onLevelUpdated=function(e,t){var i=this;if(t=t.details,this.media&&t.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var n=this.dateRangeCuesAppended,r=this.id3Track,a=t.dateRanges,s=Object.keys(a);if(r)for(var o=Object.keys(n).filter((function(e){return!s.includes(e)})),l=o.length;l--;)!function(){var e=o[l];Object.keys(n[e].cues).forEach((function(t){r.removeCue(n[e].cues[t])})),delete n[e]}();if(t=t.fragments[t.fragments.length-1],0!==s.length&&b(null==t?void 0:t.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var h=t.programDateTime/1e3-t.start,u=Dt(),d=0;d<s.length;d++)!function(){var e=s[d],t=a[e],r=n[e],o=(null==r?void 0:r.cues)||{},l=(null==r?void 0:r.durationKnown)||!1,c=Mt(t.startDate,h),f=xt,p=t.endDate;p?(f=Mt(p,h),l=!0):t.endOnNext&&!l&&(p=s.reduce((function(e,i){var n=a[i];return n.class===t.class&&n.id!==i&&n.startDate>t.startDate&&e.push(n),e}),[]).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()}))[0])&&(f=Mt(p.startDate,h),l=!0);for(var m,g=Object.keys(t.attr),_=0;_<g.length;_++){var y,v,A=g[_];"ID"!==A&&"CLASS"!==A&&"START-DATE"!==A&&"DURATION"!==A&&"END-DATE"!==A&&"END-ON-NEXT"!==A&&((v=o[A])?l&&!r.durationKnown&&(v.endTime=f):(y=t.attr[A],v=new u(c,f,""),"SCTE35-OUT"!==(m=A)&&"SCTE35-IN"!==m||(m=y,y=Uint8Array.from(m.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),v.value={key:A,data:y},v.type="com.apple.quicktime.HLS",v.id=e,i.id3Track.addCue(v),o[A]=v))}n[e]={cues:o,dateRange:t,durationKnown:l}}()}}};var Ft=Ht,Bt=((G=Gt.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},G.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(w.ERROR,this.onError,this)},G.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(w.ERROR,this.onError,this)},G.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},G.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},G.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},G.onLevelUpdated=function(e,t){t=t.details,(this.levelDetails=t).advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},G.onError=function(e,t){t.details===T.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(t=this.levelDetails))&&t.live&&k.warn("[playback-rate-controller]: Stall detected, adjusting target latency")},G.timeupdate=function(){var e,t,i,n=this.media,r=this.levelDetails;n&&r&&(this.currentTime=n.currentTime,null!==(t=this.computeLatency()))&&(this._latency=t,i=(e=this.config).lowLatencyMode,e=e.maxLiveSyncPlaybackRate,i)&&1!==e&&null!==(i=this.targetLatency)&&(i=(t-=i)<Math.min(this.maxLatency,i+r.targetduration),r.live&&i&&.05<t&&1<this.forwardBufferLength?(r=Math.min(2,Math.max(1,e)),i=Math.round(2/(1+Math.exp(-.75*t-this.edgeStalled))*20)/20,n.playbackRate=Math.min(r,Math.max(1,i))):1!==n.playbackRate&&0!==n.playbackRate&&(n.playbackRate=1))},G.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},G.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},a(Gt,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e,t,i,n,r,a=this.levelDetails;return null===a?null:(e=a.holdBack,n=a.partHoldBack,a=a.targetduration,t=(r=this.config).liveSyncDuration,i=r.liveSyncDurationCount,r=r.lowLatencyMode&&n||e,(r=(n=this.hls.userConfig).liveSyncDuration||n.liveSyncDurationCount||0===r?void 0!==t?t:i*a:r)+Math.min(+this.stallCount,a))}},{key:"liveSyncPosition",get:function(){var e,t=this.estimateLiveEdge(),i=this.targetLatency,n=this.levelDetails;return null===t||null===i||null===n?null:(e=n.edge,t=t-i-this.edgeStalled,i=e-n.totalduration,e-=this.config.lowLatencyMode&&n.partTarget||n.targetduration,Math.min(Math.max(i,t),e))}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e,t=this.levelDetails;return null===t?0:(e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration),Math.max(t.age-e,0))}},{key:"forwardBufferLength",get:function(){var e,t=this.media,i=this.levelDetails;return t&&i?((e=t.buffered.length)?t.buffered.end(e-1):i.edge)-this.currentTime:0}}]),Gt),Ot=["NONE","TYPE-0","TYPE-1",null],Ut=(Vt.prototype.addDirectives=function(e){return e=new self.URL(e),void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href},Vt),Nt=(jt.prototype.addFallback=function(e){this.url.push(e.url),this._attrs.push(e.attrs)},a(jt,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"averageBitrate",get:function(){return this._avgBitrate||this.realBitrate||this.bitrate}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){e%=this.url.length,this._urlId!==e&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=e)}},{key:"audioGroupId",get:function(){var e;return null==(e=this.audioGroupIds)?void 0:e[this.urlId]}},{key:"textGroupId",get:function(){var e;return null==(e=this.textGroupIds)?void 0:e[this.urlId]}}]),jt);function jt(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this._avgBitrate=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this._avgBitrate=this.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}function Vt(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}function Gt(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}function Ht(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}function Yt(e,t,i){i&&("audio"===t?(e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds[e.url.length-1]=i):"text"===t&&(e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds[e.url.length-1]=i))}function Wt(e,t){var i,n=t.startPTS;b(n)?(i=0,(n=t.sn>e.sn?(i=n-e.start,e):(i=e.start-n,t)).duration!==i&&(n.duration=i)):t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function zt(e,t,i,n,r,a){n-i<=0&&(k.warn("Fragment should have a positive duration",t),n=i+t.duration,a=r+t.duration);var s,o=i,l=n,h=t.startPTS,u=t.endPTS,d=(b(h)&&(d=Math.abs(h-i),b(t.deltaPTS)?t.deltaPTS=Math.max(d,t.deltaPTS):t.deltaPTS=d,o=Math.max(i,h),i=Math.min(i,h),r=Math.min(r,t.startDTS),l=Math.min(n,u),n=Math.max(n,u),a=Math.max(a,t.endDTS)),i-t.start);if(0!==t.start&&(t.start=i),t.duration=n-t.start,t.startPTS=i,t.maxStartPTS=o,t.startDTS=r,t.endPTS=n,t.minEndPTS=l,t.endDTS=a,h=t.sn,!e||h<e.startSN||h>e.endSN)return 0;u=h-e.startSN;var c=e.fragments;for(c[u]=t,s=u;0<s;s--)Wt(c[s],c[s-1]);for(s=u;s<c.length-1;s++)Wt(c[s],c[s+1]);return e.fragmentHint&&Wt(c[c.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,d}function Qt(e,t){var i=t.startSN+t.skippedSegments-e.startSN;e=e.fragments,i<0||i>=e.length||Kt(t,e[i].start)}function Kt(e,t){if(t){for(var i=e.fragments,n=e.skippedSegments;n<i.length;n++)i[n].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function Jt(e,t,i){return null!=e&&e.details?Zt(null==(e=e.details)?void 0:e.partList,t,i):null}function Zt(e,t,i){if(e)for(var n=e.length;n--;){var r=e[n];if(r.index===i&&r.fragment.sn===t)return r}return null}function qt(e){switch(e.details){case T.FRAG_LOAD_TIMEOUT:case T.KEY_LOAD_TIMEOUT:case T.LEVEL_LOAD_TIMEOUT:case T.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Xt(e,t){return t=qt(t),e.default[(t?"timeout":"error")+"Retry"]}function $t(e,t){return t="linear"===e.backoff?1:Math.pow(2,t),Math.min(t*e.retryDelayMs,e.maxRetryDelayMs)}function ei(e){return n(n({},e),{errorRetry:null,timeoutRetry:null})}function ti(e,t,i,n){return e&&t<e.maxNumRetry&&(0===n&&!1===navigator.onLine||n&&(n<400||499<n)||i)}var ii=function(e,t){for(var i,n,r=0,a=e.length-1;r<=a;){var s=t(n=e[i=(r+a)/2|0]);if(0<s)r=1+i;else{if(!(s<0))return n;a=i-1}}return null};function ni(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=null;return e?r=t[e.sn-t[0].sn+1]||null:0===i&&0===t[0].start&&(r=t[0]),r&&0===ri(i,n,r)||!(t=ii(t,ri.bind(null,i,n)))||t===e&&r?r:t}function ri(e,t,i){return void 0===t&&(t=0),i.start<=(e=void 0===e?0:e)&&i.start+i.duration>e?0:(t=Math.min(t,i.duration+(i.deltaPTS||0)),i.start+i.duration-t<=e?1:i.start-t>e&&i.start?-1:0)}(ai=vi.prototype).registerListeners=function(){var e=this.hls;e.on(w.ERROR,this.onError,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},ai.unregisterListeners=function(){var e=this.hls;e&&(e.off(w.ERROR,this.onError,this),e.off(w.ERROR,this.onErrorOut,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this))},ai.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},ai.startLoad=function(e){},ai.stopLoad=function(){this.playlistError=0},ai.getVariantLevelIndex=function(e){return(null==e?void 0:e.type)===vt?e.level:this.hls.loadLevel},ai.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},ai.onLevelUpdated=function(){this.playlistError=0},ai.onError=function(e,t){if(!t.fatal){var i,n=this.hls,r=t.context;switch(t.details){case T.FRAG_LOAD_ERROR:case T.FRAG_LOAD_TIMEOUT:case T.KEY_LOAD_ERROR:case T.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case T.FRAG_PARSING_ERROR:if(null!=(a=t.frag)&&a.gap)return void(t.errorAction={action:0,flags:0});case T.FRAG_GAP:case T.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case T.LEVEL_EMPTY_ERROR:case T.LEVEL_PARSING_ERROR:var a=t.parent===vt?t.level:n.loadLevel;return void(t.details===T.LEVEL_EMPTY_ERROR&&null!=(s=t.context)&&null!=(s=s.levelDetails)&&s.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,a)));case T.LEVEL_LOAD_ERROR:case T.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==r?void 0:r.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level)));case T.AUDIO_TRACK_LOAD_ERROR:case T.AUDIO_TRACK_LOAD_TIMEOUT:case T.SUBTITLE_LOAD_ERROR:case T.SUBTITLE_TRACK_LOAD_TIMEOUT:return r&&(s=n.levels[n.loadLevel])&&(r.type===_t&&r.groupId===s.audioGroupId||r.type===yt&&r.groupId===s.textGroupId)?(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)):void 0;case T.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var s;return void((s=null==(a=n.levels[n.loadLevel])?void 0:a.attrs["HDCP-LEVEL"])&&(t.errorAction={action:2,flags:2,hdcpLevel:s}));case T.BUFFER_ADD_CODEC_ERROR:case T.REMUX_ALLOC_ERROR:case T.BUFFER_APPEND_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:n.loadLevel));case T.INTERNAL_EXCEPTION:case T.BUFFER_APPENDING_ERROR:case T.BUFFER_FULL_ERROR:case T.LEVEL_SWITCH_ERROR:case T.BUFFER_STALLED_ERROR:case T.BUFFER_SEEK_OVER_HOLE:case T.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}t.type===S.KEY_SYSTEM_ERROR&&(i=this.getVariantLevelIndex(t.frag),t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,i))}},ai.getPlaylistRetryOrSwitchAction=function(e,t){var i=Xt(this.hls.config.playlistLoadPolicy,e),n=this.playlistError++,r=null==(r=e.response)?void 0:r.code;return ti(i,n,qt(e),r)?{action:5,flags:0,retryConfig:i,retryCount:n}:(r=this.getLevelSwitchAction(e,t),i&&(r.retryConfig=i,r.retryCount=n),r)},ai.getFragRetryOrSwitchAction=function(e){var t=this.hls,i=this.getVariantLevelIndex(e.frag),n=t.levels[i],r=(a=t.config).fragLoadPolicy,a=a.keyLoadPolicy;return a=Xt(e.details.startsWith("key")?a:r,e),r=t.levels.reduce((function(e,t){return e+t.fragmentError}),0),n&&(e.details!==T.FRAG_GAP&&n.fragmentError++,n=null==(t=e.response)?void 0:t.code,ti(a,r,qt(e),n))?{action:5,flags:0,retryConfig:a,retryCount:r}:(t=this.getLevelSwitchAction(e,i),a&&(t.retryConfig=a,t.retryCount=r),t)},ai.getLevelSwitchAction=function(e,t){var i=this.hls,n=(null==t&&(t=i.loadLevel),this.hls.levels[t]);if(n&&(n.loadError++,i.autoLevelEnabled)){for(var r=-1,a=i.levels,s=i.loadLevel,o=i.minAutoLevel,l=i.maxAutoLevel,h=null==(t=e.frag)?void 0:t.type,u=(t=null!=(t=e.context)?t:{}).type,d=t.groupId,c=a.length;c--;){var f=(c+s)%a.length;if(f!==s&&o<=f&&f<=l&&0===a[f].loadError){var p=a[f];if(e.details===T.FRAG_GAP&&e.frag){var m=a[f].details;if(m&&null!=(m=ni(e.frag,m.fragments,e.frag.start))&&m.gap)continue}else{if(u===_t&&d===p.audioGroupId||u===yt&&d===p.textGroupId)continue;if(h===At&&n.audioGroupId===p.audioGroupId||h===Et&&n.textGroupId===p.textGroupId)continue}r=f;break}}if(-1<r&&i.loadLevel!==r)return e.levelRetry=!0,{action:2,flags:this.playlistError=0,nextAutoLevel:r}}return{action:2,flags:1}},ai.onErrorOut=function(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===T.FRAG_GAP||(t.fatal=!0)}t.fatal&&this.hls.stopLoad()},ai.sendAlternateToPenaltyBox=function(e){var t=this.hls,i=e.errorAction;if(i){var n=i.flags,r=i.hdcpLevel,a=i.nextAutoLevel;switch(n){case 0:this.switchLevel(e,a);break;case 1:i.resolved||(i.resolved=this.redundantFailover(e));break;case 2:r&&(t.maxHdcpLevel=Ot[Ot.indexOf(r)-1],i.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}i.resolved||this.switchLevel(e,a)}},ai.switchLevel=function(e,t){void 0!==t&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},ai.redundantFailover=function(e){var t=this,i=this.hls,n=this.penalizedRenditions,r=e.parent===vt?e.level||0:i.loadLevel,a=i.levels[r],s=a.url.length,o=(e.frag||a).urlId;a.urlId!==o||e.frag&&!a.details||this.penalizeRendition(a,e);for(var l,h=1;h<s;h++)if(l=function(){var l=(o+h)%s,u=n[l];if(!u||function(e,t,i){if(3e5<performance.now()-e.lastErrorPerfMs)return 1;var n=e.details;if(t.details===T.FRAG_GAP&&n&&t.frag){var r=t.frag.start;if((r=ni(null,n.fragments,r))&&!r.gap)return 1}return i&&e.errors.length<i.errors.length&&(r=e.errors[e.errors.length-1],n&&r.frag&&t.frag&&Math.abs(r.frag.start-t.frag.start)>3*n.targetduration)?1:void 0}(u,e,n[o]))return t.warn("Switching to Redundant Stream "+(1+l)+"/"+s+': "'+a.url[l]+'" after '+e.details),t.playlistError=0,i.levels.forEach((function(e){e.urlId=l})),i.nextLoadLevel=r,{v:!0}}())return l.v;return!1},ai.penalizeRendition=function(e,t){var i=this.penalizedRenditions,n=i[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};n.lastErrorPerfMs=performance.now(),n.errors.push(t),n.details=e.details,i[e.urlId]=n},G=vi;var ai=((ai=yi.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},ai.clearTimer=function(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)},ai.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},ai.stopLoad=function(){this.canLoad=!1,this.clearTimer()},ai.switchParams=function(e,t){var i=null==t?void 0:t.renditionReports;if(i){for(var n,r,a,s=-1,o=0;o<i.length;o++){var l=i[o],h=void 0;try{h=new self.URL(l.URI,t.url).href}catch(e){k.warn("Could not construct new URL for Rendition Report: "+e),h=l.URI||""}if(h===e){s=o;break}h===e.substring(0,h.length)&&(s=o)}if(-1!==s)return r=i[s],n=parseInt(r["LAST-MSN"])||(null==t?void 0:t.lastPartSn),r=parseInt(r["LAST-PART"])||(null==t?void 0:t.lastPartIndex),this.hls.config.lowLatencyMode&&(a=Math.min(t.age-t.partTarget,t.targetduration),0<=r)&&a>t.partTarget&&(r+=1),new Ut(n,0<=r?r:void 0,"")}},ai.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},ai.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},ai.shouldReloadPlaylist=function(e){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(e)},ai.playlistLoaded=function(e,t,i){var n=this,r=t.details,a=t.stats,o=self.performance.now(),l=a.loading.first?Math.max(0,o-a.loading.first):0;if(r.advancedDateTime=Date.now()-l,r.live||null!=i&&i.live){if(r.reloaded(i),i&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:"MISSED")),i&&0<r.fragments.length&&function(e,t){for(var i=null,n=e.fragments,r=n.length-1;0<=r;r--){var a=n[r].initSegment;if(a){i=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;for(var o,l,h,u=0,d=e,c=t,f=c.skippedSegments,p=Math.max(d.startSN,c.startSN)-c.startSN,m=(d.fragmentHint?1:0)+(f?c.endSN:Math.min(d.endSN,c.endSN))-c.startSN,g=c.startSN-d.startSN,_=c.fragmentHint?c.fragments.concat(c.fragmentHint):c.fragments,y=d.fragmentHint?d.fragments.concat(d.fragmentHint):d.fragments,v=p;v<=m;v++){var A=y[g+v],E=_[v];f&&!E&&v<f&&(E=c.fragments[v]=A),A&&E&&(A.relurl&&(u=A.cc-E.cc),b(A.startPTS)&&b(A.endPTS)&&(E.start=E.startPTS=A.startPTS,E.startDTS=A.startDTS,E.maxStartPTS=A.maxStartPTS,E.endPTS=A.endPTS,E.endDTS=A.endDTS,E.minEndPTS=A.minEndPTS,E.duration=A.endPTS-A.startPTS,E.duration&&(o=E),t.PTSKnown=t.alignedSliding=!0),E.elementaryStreams=A.elementaryStreams,E.loader=A.loader,E.stats=A.stats,E.urlId=A.urlId,A.initSegment)&&(E.initSegment=A.initSegment,i=A.initSegment)}if(i&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){e.initSegment&&e.initSegment.relurl!==(null==i?void 0:i.relurl)||(e.initSegment=i)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed){k.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var w=t.skippedSegments;w--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=(d=e.dateRanges,l=t.dateRanges,p=t.recentlyRemovedDateranges,h=s({},d),p&&p.forEach((function(e){delete h[e]})),Object.keys(l).forEach((function(e){var t=new O(l[e].attr,h[e]);t.isValid?h[e]=t:k.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[e].attr)+'"')})),h));var S=t.fragments;if(u){k.warn("discontinuity sliding from playlist, take drift into account");for(var T=0;T<S.length;T++)S[T].cc+=u}t.skippedSegments&&(t.startCC=t.fragments[0].cc);var C=e.partList,L=t.partList;if(C&&L)for(var R=0,I=0,P=C.length;I<=P;I++){var D=C[I],x=L[I+R];D&&x&&D.index===x.index&&D.fragment.sn===x.fragment.sn?(x.elementaryStreams=D.elementaryStreams,x.stats=D.stats):R--}o?zt(t,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):Qt(e,t),S.length&&(t.totalduration=t.edge-S[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart,d=t.advancedDateTime,t.advanced&&d?(p=t.edge,t.driftStart||(t.driftStartTime=d,t.driftStart=p),t.driftEndTime=d,t.driftEnd=p):(t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime)}(i,r),this.canLoad&&r.live){l=void 0;var h,u=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var d,c,f=this.hls.config.lowLatencyMode,p=(d=r.lastPartSn)===(c=r.endSN),m=(-1!==(m=r.lastPartIndex)?(l=p?c+1:d,u=p?f?0:m:m+1):l=c+1,(d=r.age)+r.ageHeader);if(0<(c=Math.min(m-r.partTarget,1.5*r.targetduration))&&(i&&c>i.tuneInGoal?(this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+c+" with playlist age: "+r.age),c=0):(l+=m=Math.floor(c/r.targetduration),void 0!==u&&(u+=Math.round(c%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+d.toFixed(2)+"s goal: "+c+" skip sn "+m+" to part "+u)),r.tuneInGoal=c),h=this.getDeliveryDirectives(r,t.deliveryDirectives,l,u),f||!p)return void this.loadPlaylist(h)}else r.canBlockReload&&(h=this.getDeliveryDirectives(r,t.deliveryDirectives,l,u));d=(i=this.hls.mainForwardBufferInfo)?i.end-i.len:0,void 0===(m=1e3*(r.edge-d))&&(m=1/0),c=1e3*r.targetduration,r.updated?(f=r.fragments).length&&m<4*c&&(m=1e3*f[f.length-1].duration)<c&&(c=m):c/=2,p=Math.round(c),r.updated&&o>this.requestScheduled+p&&(this.requestScheduled=a.loading.start),void 0!==l&&r.canBlockReload?this.requestScheduled=a.loading.first+p-(1e3*r.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+p<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=p),t=this.requestScheduled-o,t=Math.max(0,t),this.log("reload live playlist "+e+" in "+Math.round(t)+" ms"),this.timer=self.setTimeout((function(){return n.loadPlaylist(h)}),t)}}else this.clearTimer()},ai.getDeliveryDirectives=function(e,t,i,n){o=i,r=e.canSkipUntil,a=e.canSkipDateRanges,s=e.endSN;var r,a,s,o=r&&(void 0!==o?o-s:0)<r?a?"v2":"YES":"";return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,n=t.part,o=""),new Ut(i,n,o)},ai.checkRetry=function(e){var t=this,i=e.details,n=qt(e),r=e.errorAction,a=(o=r||{}).action,s=void 0===(s=o.retryCount)?0:s,o=o.retryConfig;if(a=!!r&&!!o&&(5===a||!r.resolved&&2===a)){if(this.requestScheduled=-1,s>=o.maxNumRetry)return!1;n&&null!=(n=e.context)&&n.deliveryDirectives?(this.warn("Retrying playlist loading "+(s+1)+"/"+o.maxNumRetry+' after "'+i+'" without delivery-directives'),this.loadPlaylist()):(n=$t(o,s),this.timer=self.setTimeout((function(){return t.loadPlaylist()}),n),this.warn("Retrying playlist loading "+(s+1)+"/"+o.maxNumRetry+' after "'+i+'" in '+n+"ms")),e.levelRetry=!0,r.resolved=!0}return a},yi),si=((li=_i.prototype).sample=function(e,t){var i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e},li.getTotalWeight=function(){return this.totalWeight_},li.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},_i),oi=((li=gi.prototype).update=function(e,t){var i=this.slow_,n=this.fast_,r=this.ttfb_;i.halfLife!==e&&(this.slow_=new si(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.fast_=new si(t,n.getEstimate(),n.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new si(e,r.getEstimate(),r.getTotalWeight()))},li.sample=function(e,t){t=8*t/(e=(e=Math.max(e,this.minDelayMs_))/1e3),this.fast_.sample(e,t),this.slow_.sample(e,t)},li.sampleTTFB=function(e){var t=e/1e3;t=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2),this.ttfb_.sample(t,Math.max(e,5))},li.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},li.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},li.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},li.destroy=function(){},gi),li=((li=mi.prototype).resetEstimator=function(e){e&&(k.log("setting initial bwe to "+e),this.hls.config.abrEwmaDefaultEstimate=e),this.bwEstimator=this.initEstimator()},li.initEstimator=function(){var e=this.hls.config;return new oi(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)},li.registerListeners=function(){var e=this.hls;e.on(w.FRAG_LOADING,this.onFragLoading,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this)},li.unregisterListeners=function(){var e=this.hls;e.off(w.FRAG_LOADING,this.onFragLoading,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this)},li.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},li.onFragLoading=function(e,t){var i=t.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=null!=(i=t.part)?i:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},li.onLevelSwitching=function(e,t){this.clearTimer()},li.getTimeToLoadFrag=function(e,t,i,n){return e+i/t+(n?this.lastLevelLoadSec:0)},li.onLevelLoaded=function(e,t){var i=this.hls.config,n=(r=t.stats).total,r=r.bwEstimate;b(n)&&b(r)&&(this.lastLevelLoadSec=8*n/r),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},li._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.autoLevelEnabled,r=i.media;if(e&&r){var a=performance.now(),s=(t||e).stats,o=(t||e).duration;if(a-=s.loading.start,s.aborted||s.loaded&&s.loaded===s.total||0===e.level)this.clearTimer(),this._nextAutoLevel=-1;else if(n&&!r.paused&&r.playbackRate&&r.readyState&&null!==(n=i.mainForwardBufferInfo)){var l=this.bwEstimator.getEstimateTTFB();if(r=Math.abs(r.playbackRate),!(a<=Math.max(l,o/(2*r)*1e3))){var h=n.len/r;if(!(2*o/r<=h)){n=s.loading.first?s.loading.first-s.loading.start:-1,r=s.loaded&&-1<n;var u,d=this.getBwEstimate(),c=i.levels,f=i.minAutoLevel,p=c[e.level];if(p=s.total||Math.max(s.loaded,Math.round(o*p.maxBitrate/8)),(u=a-n)<1&&r&&(u=Math.min(a,8*s.loaded/d)),!((p=(u=r?1e3*s.loaded/u:0)?(p-s.loaded)/u:8*p/d+l/1e3)<=h)){for(var m=u?8*u:d,g=Number.POSITIVE_INFINITY,_=e.level-1;f<_;_--){var y=c[_].maxBitrate;if((g=this.getTimeToLoadFrag(l/1e3,m,o*y,!c[_].details))<h)break}p<=g||10*o<g||(i.nextLoadLevel=_,r?this.bwEstimator.sample(a-Math.min(l,n),s.loaded):this.bwEstimator.sampleTTFB(a),this.clearTimer(),k.warn("[abr] Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly;\n      Time to underbuffer: "+h.toFixed(3)+" s\n      Estimated load time for current fragment: "+p.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+g.toFixed(3)+" s\n      TTFB estimate: "+n+"\n      Current BW estimate: "+(b(d)?(d/1024).toFixed(3):"Unknown")+" Kb/s\n      New BW estimate: "+(this.bwEstimator.getEstimate()/1024).toFixed(3)+" Kb/s\n      Aborting and switching to level "+_),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),i.trigger(w.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:s}))}}}}}},li.onFragLoaded=function(e,t){var i,n,r,a=t.frag,s=((t=t.part)||a).stats;a.type===vt&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),this.ignoreFragment(a)||(this.clearTimer(),this.lastLoadedFragLevel=a.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(n=(t||a).duration,i=((r=this.hls.levels[a.level]).loaded?r.loaded.bytes:0)+s.loaded,n=(r.loaded?r.loaded.duration:0)+n,r.loaded={bytes:i,duration:n},r.realBitrate=Math.round(8*i/n)),a.bitrateTest&&(r={stats:s,frag:a,part:t,id:a.type},this.onFragBuffered(w.FRAG_BUFFERED,r),a.bitrateTest=!1))},li.onFragBuffered=function(e,t){var i,n=t.frag;(t=(null!=(t=t.part)&&t.stats.loaded?t:n).stats).aborted||this.ignoreFragment(n)||(i=t.parsing.end-t.loading.start-Math.min(t.loading.first-t.loading.start,this.bwEstimator.getEstimateTTFB()),this.bwEstimator.sample(i,t.loaded),t.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0)},li.ignoreFragment=function(e){return e.type!==vt||"initSegment"===e.sn},li.clearTimer=function(){self.clearInterval(this.timer)},li.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,i=(s=this.hls).maxAutoLevel,n=s.config,r=s.minAutoLevel,a=s.media,s=(t=t?t.duration:e?e.duration:0,e=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,a=this.getBwEstimate(),((s=s.mainForwardBufferInfo)?s.len:0)/e);if(0<=(e=this.findBestLevel(a,r,i,s,n.abrBandWidthFactor,n.abrBandWidthUpFactor)))return e;k.trace("[abr] "+(s?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var o,l=t?Math.min(t,n.maxStarvationDelay):n.maxStarvationDelay,h=n.abrBandWidthFactor,u=n.abrBandWidthUpFactor;return s||(o=this.bitrateTestDelay)&&(l=(t?Math.min(t,n.maxLoadingDelay):n.maxLoadingDelay)-o,k.trace("[abr] bitrate test took "+Math.round(1e3*o)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*l)+" ms"),h=u=1),e=this.findBestLevel(a,r,i,s+l,h,u),Math.max(e,0)},li.getBwEstimate=function(){return this.bwEstimator?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate},li.findBestLevel=function(e,t,i,n,r,a){for(var s,o=this.fragCurrent,l=this.partCurrent,h=this.lastLoadedFragLevel,u=this.hls.levels,d=u[h],c=!(null==d||null==(s=d.details)||!s.live),f=null==d?void 0:d.codecSet,p=l?l.duration:o?o.duration:0,m=this.bwEstimator.getEstimateTTFB()/1e3,g=t,_=-1,y=i;t<=y;y--)if(!(A=u[y])||f&&A.codecSet!==f)A&&(g=Math.min(y,g),_=Math.max(y,_));else{-1!==_&&k.trace("[abr] Skipped level(s) "+g+"-"+_+' with CODECS:"'+u[_].attrs.CODECS+'"; not compatible with "'+d.attrs.CODECS+'"');var v,A=A.details,E=(l?null==A?void 0:A.partTarget:null==A?void 0:A.averagetargetduration)||p,w=u[y].maxBitrate;if(A=this.getTimeToLoadFrag(m,v=y<=h?r*e:a*e,w*E,void 0===A),k.trace("[abr] level:"+y+" adjustedbw-bitrate:"+Math.round(v-w)+" avgDuration:"+E.toFixed(1)+" maxFetchDuration:"+n.toFixed(1)+" fetchDuration:"+A.toFixed(1)),w<v&&(A<=m||!b(A)||c&&!this.bitrateTestDelay||A<n))return y}return-1},a(mi,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;if(t=this.getNextABRAutoLevel(),-1!==e){var i=this.hls.levels;if(i.length>Math.max(e,t)&&i[e].loadError<=i[t].loadError)return e}return-1!==e?Math.min(e,t):t},set:function(e){this._nextAutoLevel=e}}]),mi),hi=((hi=pi.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},hi.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},hi.onHandlerDestroyed=function(){},hi.hasInterval=function(){return!!this._tickInterval},hi.hasNextTick=function(){return!!this._tickTimer},hi.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},hi.clearInterval=function(){return!(!this._tickInterval||(self.clearInterval(this._tickInterval),this._tickInterval=null))},hi.clearNextTick=function(){return!(!this._tickTimer||(self.clearTimeout(this._tickTimer),this._tickTimer=null))},hi.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},hi.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},hi.doTick=function(){},pi),ui="NOT_LOADED",di="PARTIAL",ci=((rr=fi.prototype)._registerListeners=function(){var e=this.hls;e.on(w.BUFFER_APPENDED,this.onBufferAppended,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this)},rr._unregisterListeners=function(){var e=this.hls;e.off(w.BUFFER_APPENDED,this.onBufferAppended,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this)},rr.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},rr.getAppendedFrag=function(e,t){var i=this.activePartLists[t];if(i)for(var n=i.length;n--;){var r=i[n];if(!r)break;var a=r.end;if(r.start<=e&&null!==a&&e<=a)return r}return this.getBufferedFrag(e,t)},rr.getBufferedFrag=function(e,t){for(var i=this.fragments,n=Object.keys(i),r=n.length;r--;){var a=i[n[r]];if((null==a?void 0:a.body.type)===t&&a.buffered&&(a=a.body).start<=e&&e<=a.end)return a}return null},rr.detectEvictedFragments=function(e,t,i,n){var r=this,a=(this.timeRanges&&(this.timeRanges[e]=t),(null==n?void 0:n.fragment.sn)||-1);Object.keys(this.fragments).forEach((function(n){var s=r.fragments[n];!s||a>=s.body.sn||(s.buffered||s.loaded?(n=s.range[e])&&n.time.some((function(e){return(e=!r.isTimeBuffered(e.startPTS,e.endPTS,t))&&r.removeFragment(s.body),e})):s.body.type===i&&r.removeFragment(s.body))}))},rr.detectPartialFragments=function(e){var t,i,n=this,r=this.timeRanges,a=e.frag,s=e.part;r&&"initSegment"!==a.sn&&(e=Ei(a),!(t=this.fragments[e])||t.buffered&&a.gap||(i=!a.relurl,Object.keys(r).forEach((function(e){var o,l=a.elementaryStreams[e];l&&(o=r[e],l=i||!0===l.partial,t.range[e]=n.getBufferedTimes(a,s,l,o))})),t.loaded=null,Object.keys(t.range).length?(t.buffered=!0,t.body.endList&&(this.endListFragments[t.body.type]=t),Ai(t)||this.removeParts(a.sn-1,a.type)):this.removeFragment(t.body)))},rr.removeParts=function(e,t){var i=this.activePartLists[t];i&&(this.activePartLists[t]=i.filter((function(t){return t.fragment.sn>=e})))},rr.fragBuffered=function(e,t){var i=Ei(e),n=this.fragments[i];!n&&t&&(n=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap)&&(this.hasGaps=!0),n&&(n.loaded=null,n.buffered=!0)},rr.getBufferedTimes=function(e,t,i,n){for(var r={time:[],partial:i},a=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a,h=0;h<n.length;h++){var u=n.start(h)-this.bufferPadding,d=n.end(h)+this.bufferPadding;if(u<=l&&o<=d){r.time.push({startPTS:Math.max(a,n.start(h)),endPTS:Math.min(s,n.end(h))});break}if(a<d&&u<s)r.partial=!0,r.time.push({startPTS:Math.max(a,n.start(h)),endPTS:Math.min(s,n.end(h))});else if(s<=u)break}return r},rr.getPartialFragment=function(e){var t,i,n=null,r=0,a=this.bufferPadding,s=this.fragments;return Object.keys(s).forEach((function(o){(o=s[o])&&Ai(o)&&(t=o.body.start-a,i=o.body.end+a,t<=e)&&e<=i&&(t=Math.min(e-t,i-e),r<=t)&&(n=o.body,r=t)})),n},rr.isEndListAppended=function(e){return void 0!==(e=this.endListFragments[e])&&(e.buffered||Ai(e))},rr.getState=function(e){return e=Ei(e),(e=this.fragments[e])?e.buffered?Ai(e)?di:"OK":"APPENDING":ui},rr.isTimeBuffered=function(e,t,i){for(var n,r,a=0;a<i.length;a++){if(n=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,n<=e&&t<=r)return!0;if(t<=n)return!1}return!1},rr.onFragLoaded=function(e,t){var i,n=t.frag,r=t.part;"initSegment"===n.sn||n.bitrateTest||(i=Ei(n),this.fragments[i]={body:n,appendedPTS:null,loaded:r?null:t,buffered:!1,range:Object.create(null)})},rr.onBufferAppended=function(e,t){var i,n=this,r=t.frag,a=t.part,s=t.timeRanges;"initSegment"!==r.sn&&(i=r.type,a&&((t=this.activePartLists[i])||(this.activePartLists[i]=t=[]),t.push(a)),this.timeRanges=s,Object.keys(s).forEach((function(e){var t=s[e];n.detectEvictedFragments(e,t,i,a)})))},rr.onFragBuffered=function(e,t){this.detectPartialFragments(t)},rr.hasFragment=function(e){return e=Ei(e),!!this.fragments[e]},rr.hasParts=function(e){return!(null==(e=this.activePartLists[e])||!e.length)},rr.removeFragmentsInRange=function(e,t,i,n,r){var a=this;n&&!this.hasGaps||Object.keys(this.fragments).forEach((function(s){var o;!(s=a.fragments[s])||(o=s.body).type!==i||n&&!o.gap||o.start<t&&o.end>e&&(s.buffered||r)&&a.removeFragment(o)}))},rr.removeFragment=function(e){var t,i=Ei(e),n=(e.stats.loaded=0,e.clearElementaryStreamInfo(),this.activePartLists[e.type]);n&&(t=e.sn,this.activePartLists[e.type]=n.filter((function(e){return e.fragment.sn!==t}))),delete this.fragments[i],e.endList&&delete this.endListFragments[e.type]},rr.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},fi);function fi(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}function pi(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}function mi(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}function gi(e,t,i,n){void 0===n&&(n=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new si(e),this.fast_=new si(t),this.defaultTTFB_=n,this.ttfb_=new si(e)}function _i(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}function yi(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=k.log.bind(k,t+":"),this.warn=k.warn.bind(k,t+":"),this.hls=e}function vi(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=k.log.bind(k,"[info]:"),this.warn=k.warn.bind(k,"[warning]:"),this.error=k.error.bind(k,"[error]:"),this.registerListeners()}function Ai(e){var t;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(t=e.range.audio)?void 0:t.partial)||(null==(t=e.range.audiovideo)?void 0:t.partial))}function Ei(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}function bi(e,t,i,n,r,a){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=n,this.part=r,this.partial=a}var wi={length:0,start:function(){return 0},end:function(){return 0}},Si=(Ti.isBuffered=function(e,t){try{if(e)for(var i=Ti.getBuffered(e),n=0;n<i.length;n++)if(t>=i.start(n)&&t<=i.end(n))return!0}catch(e){}return!1},Ti.bufferInfo=function(e,t,i){try{if(e){for(var n=Ti.getBuffered(e),r=[],a=0;a<n.length;a++)r.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(r,t,i)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},Ti.bufferedInfo=function(e,t,i){t=Math.max(0,t),e.sort((function(e,t){return e.start-t.start||t.end-e.end}));var n=[];if(i)for(var r=0;r<e.length;r++){var a,s=n.length;s&&(a=n[s-1].end,e[r].start-a<i)?e[r].end>a&&(n[s-1].end=e[r].end):n.push(e[r])}else n=e;for(var o,l=0,h=t,u=t,d=0;d<n.length;d++){var c=n[d].start,f=n[d].end;if(c<=t+i&&t<f)h=c,l=(u=f)-t;else if(t+i<c){o=c;break}}return{len:l,start:h||0,end:u||0,nextStart:o}},Ti.getBuffered=function(e){try{return e.buffered}catch(e){return k.log("failed to get media.buffered",e),wi}},Ti);function Ti(){}function Ci(e,t){for(var i,n=0,r=e.length;n<r;n++)if((null==(i=e[n])?void 0:i.cc)===t)return e[n];return null}function Li(e,t){e&&(t=e.start+t,e.start=e.startPTS=t,e.endPTS=t+e.duration)}function Ri(e,t){for(var i=t.fragments,n=0,r=i.length;n<r;n++)Li(i[n],e);t.fragmentHint&&Li(t.fragmentHint,e),t.alignedSliding=!0}function Ii(e,t){var i,n,r,a,s;e.hasProgramDateTime&&t.hasProgramDateTime&&(i=e.fragments,n=t.fragments,i.length)&&n.length&&(s=Math.min(t.endCC,e.endCC),t.startCC<s&&e.startCC<s&&(r=Ci(n,s),a=Ci(i,s)),r&&a||(a=Ci(i,(r=n[Math.floor(n.length/2)]).cc)||i[Math.floor(i.length/2)]),t=r.programDateTime,s=a.programDateTime,t)&&s&&Ri((s-t)/1e3-(a.start-r.start),e)}var ki=Math.pow(2,17),Pi=((rr=Di.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},rr.abort=function(){this.loader&&this.loader.abort()},rr.load=function(e,t){var i=this,r=e.url;if(!r)return Promise.reject(new Oi({type:S.NETWORK_ERROR,details:T.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(r?"part list":"url")),networkDetails:null}));this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(l,h){if(i.loader&&i.loader.destroy(),e.gap){if(e.tagList.some((function(e){return"GAP"===e[0]})))return void h(Mi(e));e.gap=!1}var u=i.loader=e.loader=new(s||o)(a),d=xi(e),c=ei(a.fragLoadPolicy.default),f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:ki};e.stats=u.stats,u.load(d,f,{onSuccess:function(t,n,r,a){i.resetLoader(e,u),t=t.data,r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(t.slice(0,16)),t=t.slice(16)),l({frag:e,part:null,payload:t,networkDetails:a})},onError:function(t,a,s,o){i.resetLoader(e,u),h(new Oi({type:S.NETWORK_ERROR,details:T.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:n({url:r,data:void 0},t),error:new Error("HTTP Error "+t.code+" "+t.text),networkDetails:s,stats:o}))},onAbort:function(t,n,r){i.resetLoader(e,u),h(new Oi({type:S.NETWORK_ERROR,details:T.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:function(t,n,r){i.resetLoader(e,u),h(new Oi({type:S.NETWORK_ERROR,details:T.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:r,stats:t}))},onProgress:function(i,n,r,a){t&&t({frag:e,part:null,payload:r,networkDetails:a})}})}))},rr.loadPart=function(e,t,i){var r=this,a=(this.abort(),this.config),s=a.fLoader,o=a.loader;return new Promise((function(l,h){var u,d,c,f;r.loader&&r.loader.destroy(),e.gap||t.gap?h(Mi(e,t)):(u=r.loader=e.loader=new(s||o)(a),d=xi(e,t),c=ei(a.fragLoadPolicy.default),f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ki},t.stats=u.stats,u.load(d,f,{onSuccess:function(n,a,s,o){r.resetLoader(e,u),r.updateStatsFromPart(e,t),n={frag:e,part:t,payload:n.data,networkDetails:o},i(n),l(n)},onError:function(i,a,s,o){r.resetLoader(e,u),h(new Oi({type:S.NETWORK_ERROR,details:T.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n({url:d.url,data:void 0},i),error:new Error("HTTP Error "+i.code+" "+i.text),networkDetails:s,stats:o}))},onAbort:function(i,n,a){e.stats.aborted=t.stats.aborted,r.resetLoader(e,u),h(new Oi({type:S.NETWORK_ERROR,details:T.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:a,stats:i}))},onTimeout:function(i,n,a){r.resetLoader(e,u),h(new Oi({type:S.NETWORK_ERROR,details:T.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:a,stats:i}))}}))}))},rr.updateStatsFromPart=function(e,t){var i=e.stats,n=t.stats,r=n.total;i.loaded+=n.loaded,r?(r=((e=Math.round(e.duration/t.duration))-(t=Math.min(Math.round(i.loaded/r),e)))*Math.round(i.loaded/t),i.total=i.loaded+r):i.total=Math.max(i.loaded,i.total),e=i.loading,t=n.loading,e.start?e.first+=t.first-t.start:(e.start=t.start,e.first=t.first),e.end=t.end},rr.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},Di);function Di(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}function xi(e,t){var i,n,r=(t=void 0===t?null:t)||e,a=(t={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},r.byteRangeStartOffset);return r=r.byteRangeEndOffset,b(a)&&b(r)&&(i=a,n=r,"initSegment"===e.sn&&"AES-128"===(null==(e=e.decryptdata)?void 0:e.method)&&((e=r-a)%16&&(n=r+(16-e%16)),0!==a)&&(t.resetIV=!0,i=a-16),t.rangeStart=i,t.rangeEnd=n),t}function Mi(e,t){var i=new Error("GAP "+(e.gap?"tag":"attribute")+" found");return i={type:S.MEDIA_ERROR,details:T.FRAG_GAP,fatal:!1,frag:e,error:i,networkDetails:null},t&&(i.part=t),(t||e).stats.aborted=!0,new Oi(i)}o(ln,Bi=d(Error));var Fi,Bi,Oi=ln,Ui=(on.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},on),Ni=(sn.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},sn),ji=((rr=an.prototype).uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),i=new Uint32Array(4),n=0;n<4;n++)i[n]=t.getUint32(4*n);return i},rr.initTable=function(){var e,t=this.sBox,i=this.invSBox,n=(e=this.subMix)[0],r=e[1],a=e[2],s=e[3],o=(e=this.invSubMix)[0],l=e[1],h=e[2],u=e[3],d=new Uint32Array(256),c=0,f=0,p=0;for(p=0;p<256;p++)d[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var m=f^f<<1^f<<2^f<<3^f<<4,g=(t[c]=m=m>>>8^255&m^99,d[i[m]=c]),_=d[g],y=d[_],v=257*d[m]^16843008*m;n[c]=v<<24|v>>>8,r[c]=v<<16|v>>>16,a[c]=v<<8|v>>>24,s[c]=v,o[m]=(v=16843009*y^65537*_^257*g^16843008*c)<<24|v>>>8,l[m]=v<<16|v>>>16,h[m]=v<<8|v>>>24,u[m]=v,c?(c=g^d[d[d[y^g]]],f^=d[d[f]]):c=f=1}},rr.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),i=!0,n=0;n<t.length&&i;)i=t[n]===this.key[n],n++;if(!i){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var a,s,o,l=this.ksRows=4*(r+6+1),h=this.keySchedule=new Uint32Array(l),u=this.invKeySchedule=new Uint32Array(l),d=this.sBox,c=this.rcon,f=(e=this.invSubMix)[0],p=e[1],m=e[2],g=e[3],_=0;_<l;_++)_<r?s=h[_]=t[_]:(o=s,_%r==0?(o=d[(o=o<<8|o>>>24)>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o],o^=c[_/r|0]<<24):6<r&&_%r==4&&(o=d[o>>>24]<<24|d[o>>>16&255]<<16|d[o>>>8&255]<<8|d[255&o]),h[_]=s=(h[_-r]^o)>>>0);for(a=0;a<l;a++)_=l-a,o=3&a?h[_]:h[_-4],u[a]=a<4||_<=4?o:f[d[o>>>24]]^p[d[o>>>16&255]]^m[d[o>>>8&255]]^g[d[255&o]],u[a]=u[a]>>>0}},rr.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},rr.decrypt=function(e,t,i){for(var n,r,a,s,o,l,h,u,d,c,f,p,m,g,_,y=this.keySize+6,v=this.invKeySchedule,A=this.invSBox,E=(_=this.invSubMix)[0],b=_[1],w=_[2],S=_[3],T=(_=this.uint8ArrayToUint32Array_(i))[0],C=_[1],L=_[2],R=_[3],I=new Int32Array(e),k=new Int32Array(I.length),P=this.networkToHostOrderSwap;t<I.length;){for(d=P(I[t]),c=P(I[t+1]),f=P(I[t+2]),p=P(I[t+3]),o=d^v[0],l=p^v[1],h=f^v[2],u=c^v[3],m=4,g=1;g<y;g++)n=E[o>>>24]^b[l>>16&255]^w[h>>8&255]^S[255&u]^v[m],r=E[l>>>24]^b[h>>16&255]^w[u>>8&255]^S[255&o]^v[m+1],a=E[h>>>24]^b[u>>16&255]^w[o>>8&255]^S[255&l]^v[m+2],s=E[u>>>24]^b[o>>16&255]^w[l>>8&255]^S[255&h]^v[m+3],o=n,l=r,h=a,u=s,m+=4;n=A[o>>>24]<<24^A[l>>16&255]<<16^A[h>>8&255]<<8^A[255&u]^v[m],r=A[l>>>24]<<24^A[h>>16&255]<<16^A[u>>8&255]<<8^A[255&o]^v[m+1],a=A[h>>>24]<<24^A[u>>16&255]<<16^A[o>>8&255]<<8^A[255&l]^v[m+2],s=A[u>>>24]<<24^A[o>>16&255]<<16^A[l>>8&255]<<8^A[255&h]^v[m+3],k[t]=P(n^T),k[t+1]=P(s^C),k[t+2]=P(a^L),k[t+3]=P(r^R),T=d,C=c,L=f,R=p,t+=4}return k.buffer},an),Vi=((rr=rn.prototype).destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},rr.isSync=function(){return this.useSoftware},rr.flush=function(){var e,t,i=this.currentResult,n=this.remainderData;return!i||n?(this.reset(),null):(n=new Uint8Array(i),this.reset(),this.removePKCS7Padding?(t=(e=(i=n).byteLength)&&new DataView(i.buffer).getUint8(e-1))?he(i,0,e-t):i:n)},rr.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},rr.decrypt=function(e,t,i){var n=this;return this.useSoftware?new Promise((function(r,a){n.softwareDecrypt(new Uint8Array(e),t,i);var s=n.flush();s?r(s.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,i)},rr.softwareDecrypt=function(e,t,i){var n=this.currentIV,r=this.currentResult,a=this.remainderData;return(this.logOnce("JS AES decrypt"),a&&(e=Be(a,e),this.remainderData=null),a=this.getValidChunk(e)).length?(n&&(i=n),(e=(e=this.softwareDecrypter)||(this.softwareDecrypter=new ji)).expandKey(t),n=r,this.currentResult=e.decrypt(a.buffer,0,i),this.currentIV=he(a,-16).buffer,n||null):null},rr.webCryptoDecrypt=function(e,t,i){var n=this,r=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new Ni(r,t)),this.fastAesKey.expandKey().then((function(t){return r?(n.logOnce("WebCrypto AES decrypt"),new Ui(r,new Uint8Array(i)).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return k.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+r.name+": "+r.message),n.onWebCryptoError(e,t,i)}))},rr.onWebCryptoError=function(e,t,i){if(this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i),e=this.flush())return e.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},rr.getValidChunk=function(e){var t=e,i=e.length-e.length%16;return i!==e.length&&(t=he(e,0,i),this.remainderData=he(e,i)),t},rr.logOnce=function(e){this.logEnabled&&(k.log("[decrypter]: "+e),this.logEnabled=!1)},rn),Gi="STOPPED",Hi="IDLE",Yi="KEY_LOADING",Wi="FRAG_LOADING",zi="FRAG_LOADING_WAITING_RETRY",Qi="WAITING_TRACK",Ki="PARSING",Ji="PARSED",Zi="ENDED",qi="ERROR",Xi="WAITING_INIT_PTS",$i="WAITING_LEVEL",en=(o(nn,Fi=hi),(rr=nn.prototype).doTick=function(){this.onTickEnd()},rr.onTickEnd=function(){},rr.startLoad=function(e){},rr.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Gi},rr._streamEnded=function(e,t){return!(t.live||e.nextStart||!e.end||!this.media)&&(null!=(e=t.partList)&&e.length?(e=e[e.length-1],Si.isBuffered(this.media,e.start+e.duration/2)):(e=t.fragments[t.fragments.length-1].type,this.fragmentTracker.isEndListAppended(e)))},rr.getLevelDetails=function(){var e;return this.levels&&null!==this.levelLastLoaded&&null!=(e=this.levels[this.levelLastLoaded])?e.details:void 0},rr.onMediaAttached=function(e,t){t=this.media=this.mediaBuffer=t.media,this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended),t=this.config,this.levels&&t.autoStartLoad&&this.state===Gi&&this.startLoad(t.startPosition)},rr.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},rr.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,i=this.media,n=this.mediaBuffer,r=this.state,a=i?i.currentTime:0;n=Si.bufferInfo(n||i,a,e.maxBufferHole),this.log("media seeking to "+(b(a)?a.toFixed(3):a)+", state: "+r),this.state===Zi?this.resetLoadingState():t&&(r=e.maxFragLookUpTolerance,e=t.start-r,r=t.start+t.duration+r,!n.len||r<n.start||e>n.end)&&(r=r<a,a<e||r)&&(r&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null),i&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||n.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},rr.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},rr.onManifestLoaded=function(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]},rr.onHandlerDestroying=function(){this.stopLoad(),Fi.prototype.onHandlerDestroying.call(this)},rr.onHandlerDestroyed=function(){this.state=Gi,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,Fi.prototype.onHandlerDestroyed.call(this)},rr.loadFragment=function(e,t,i){this._loadFragForPlayback(e,t,i)},rr._loadFragForPlayback=function(e,t,i){var n=this;this._doFragLoad(e,t,i,(function(t){n.fragContextChanged(e)?(n.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),n.fragmentTracker.removeFragment(e)):(e.stats.chunkCount++,n._handleFragmentLoadProgress(t))})).then((function(t){var i;t&&(i=n.state,n.fragContextChanged(e)?i!==Wi&&(n.fragCurrent||i!==Ki)||(n.fragmentTracker.removeFragment(e),n.state=Hi):("payload"in t&&(n.log("Loaded fragment "+e.sn+" of level "+e.level),n.hls.trigger(w.FRAG_LOADED,t)),n._handleFragmentLoadComplete(t)))})).catch((function(t){n.state!==Gi&&n.state!==qi&&(n.warn(t),n.resetFragmentLoading(e))}))},rr.clearTrackerIfNeeded=function(e){var t,i=this.fragmentTracker;"APPENDING"===i.getState(e)?(t=e.type,t=this.getFwdBufferInfo(this.mediaBuffer,t),t=Math.max(e.duration,t?t.len:this.config.maxBufferLength),this.reduceMaxBufferLength(t)&&i.removeFragment(e)):0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===di)&&i.removeFragment(e)},rr.flushMainBuffer=function(e,t,i){void 0===i&&(i=null),e-t&&this.hls.trigger(w.BUFFER_FLUSHING,{startOffset:e,endOffset:t,type:i})},rr._loadInitSegment=function(e,t){var i=this;this._doFragLoad(e,t).then((function(t){if(t&&!i.fragContextChanged(e)&&i.levels)return t;throw new Error("init load aborted")})).then((function(t){var n,r=i.hls,a=t.payload,s=e.decryptdata;return a&&0<a.byteLength&&s&&s.key&&s.iv&&"AES-128"===s.method?(n=self.performance.now(),i.decrypter.decrypt(new Uint8Array(a),s.key.buffer,s.iv.buffer).catch((function(t){throw r.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((function(i){var a=self.performance.now();return r.trigger(w.FRAG_DECRYPTED,{frag:e,payload:i,stats:{tstart:n,tdecrypt:a}}),t.payload=i,t}))):t})).then((function(n){if(!i.levels)throw new Error("init load aborted, missing levels");var r=e.stats;i.state=Hi,t.fragmentError=0,e.data=new Uint8Array(n.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),i.tick()})).catch((function(t){i.state!==Gi&&i.state!==qi&&(i.warn(t),i.resetFragmentLoading(e))}))},rr.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},rr.fragBufferedComplete=function(e,t){var i=this.mediaBuffer||this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+(this.playlistType===vt?"level":"track")+" "+e.level+" (frag:["+(null!=(t=e.startPTS)?t:NaN).toFixed(3)+"-"+(null!=(t=e.endPTS)?t:NaN).toFixed(3)+"] > buffer:"+(i?function(e){for(var t="",i=e.length,n=0;n<i;n++)t+="["+e.start(n).toFixed(3)+"-"+e.end(n).toFixed(3)+"]";return t}(Si.getBuffered(i)):"(detached)")+")"),this.state=Hi,i&&(!this.loadedmetadata&&e.type==vt&&i.buffered.length&&(null==(t=this.fragCurrent)?void 0:t.sn)===(null==(e=this.fragPrevious)?void 0:e.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},rr.seekToStartPos=function(){},rr._handleFragmentLoadComplete=function(e){var t,i,n=this.transmuxer;n&&(i=e.frag,t=e.part,e=!(e=e.partsLoaded)||0===e.length||e.some((function(e){return!e})),i=new bi(i.level,i.sn,i.stats.chunkCount+1,0,t?t.index:-1,!e),n.flush(i))},rr._handleFragmentLoadProgress=function(e){},rr._doFragLoad=function(e,t,i,n){var r=this,a=(void 0===i&&(i=null),null==t?void 0:t.details);if(!this.levels||!a)throw new Error("frag load aborted, missing level"+(a?"":" detail")+"s");var s=null;if(!e.encrypted||null!=(o=e.decryptdata)&&o.key?!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments):(this.log("Loading key for "+e.sn+" of ["+a.startSN+"-"+a.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=Yi,this.fragCurrent=e,s=this.keyLoader.load(e).then((function(e){if(!r.fragContextChanged(e.frag))return r.hls.trigger(w.KEY_LOADED,e),r.state===Yi&&(r.state=Hi),e})),this.hls.trigger(w.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(s=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),i=Math.max(e.start,i||0),this.config.lowLatencyMode&&"initSegment"!==e.sn){var o=a.partList;if(o&&n){var l;if(i>e.end&&a.fragmentHint&&(e=a.fragmentHint),-1<(u=this.getNextPart(o,e,i)))return l=o[u],this.log("Loading part sn: "+e.sn+" p: "+l.index+" cc: "+e.cc+" of playlist ["+a.startSN+"-"+a.endSN+"] parts [0-"+u+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=l.start+l.duration,this.state=Wi,u=s?s.then((function(i){return!i||r.fragContextChanged(i.frag)?null:r.doFragPartsLoad(e,l,t,n)})).catch((function(e){return r.handleFragLoadError(e)})):this.doFragPartsLoad(e,l,t,n).catch((function(e){return r.handleFragLoadError(e)})),this.hls.trigger(w.FRAG_LOADING,{frag:e,part:l,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):u;if(!e.url||this.loadedEndOfParts(o,i))return Promise.resolve(null)}}this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(a?"of ["+a.startSN+"-"+a.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),b(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Wi;var h=this.config.progressive,u=h&&s?s.then((function(t){return!t||r.fragContextChanged(null==t?void 0:t.frag)?null:r.fragmentLoader.load(e,n)})).catch((function(e){return r.handleFragLoadError(e)})):Promise.all([this.fragmentLoader.load(e,h?n:void 0),s]).then((function(e){return e=e[0],!h&&e&&n&&n(e),e})).catch((function(e){return r.handleFragLoadError(e)}));return this.hls.trigger(w.FRAG_LOADING,{frag:e,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u},rr.doFragPartsLoad=function(e,t,i,n){var r=this;return new Promise((function(a,s){var o,l=[],h=null==(o=i.details)?void 0:o.partList;!function t(o){r.fragmentLoader.loadPart(e,o,n).then((function(n){var s=(l[o.index]=n).part;if(r.hls.trigger(w.FRAG_LOADED,n),!(n=Jt(i,e.sn,o.index+1)||Zt(h,e.sn,o.index+1)))return a({frag:e,part:s,partsLoaded:l});t(n)})).catch(s)}(t)}))},rr.handleFragLoadError=function(e){var t;return"data"in e?(t=e.data,e.data&&t.details===T.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(w.ERROR,t)):this.hls.trigger(w.ERROR,{type:S.OTHER_ERROR,details:T.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0}),null},rr._handleTransmuxerFlush=function(e){var t,i,n,r=this.getCurrentContext(e);r&&this.state===Ki?(t=r.frag,i=r.part,r=r.level,n=self.performance.now(),t.stats.parsing.end=n,i&&(i.stats.parsing.end=n),this.updateLevelTiming(t,i,r,e.partial)):this.fragCurrent||this.state===Gi||this.state===qi||(this.state=Hi)},rr.getCurrentContext=function(e){var t,i,n=this.levels,r=this.fragCurrent,a=e.level,s=e.sn;return e=e.part,null!=n&&n[a]?(n=n[a],(i=(e=-1<e?Jt(n,s,e):null)?e.fragment:null!=n&&n.details?(t=n.details).fragments[s-t.startSN]||((i=t.fragmentHint)&&i.sn===s?i:s<t.startSN&&r&&r.sn===s?r:null):null)?(r&&r!==i&&(i.stats=r.stats),{frag:i,part:e,level:n}):null):(this.warn("Levels object was unset while buffering fragment "+s+" of level "+a+". The current chunk will not be buffered."),null)},rr.bufferFragmentData=function(e,t,i,n,r){var a,s,o;e&&this.state===Ki&&(o=e.data1,a=e.data2,null!=(s=(s=o)&&a?Be(o,a):s))&&s.length&&(o={type:e.type,frag:t,part:i,chunkMeta:n,parent:t.type,data:s},this.hls.trigger(w.BUFFER_APPENDING,o),e.dropped)&&e.independent&&!i&&!r&&this.flushBufferGap(t)},rr.flushBufferGap=function(e){var t,i,n=this.media;n&&(Si.isBuffered(n,n.currentTime)?(t=n.currentTime,n=Si.bufferInfo(n,t,0),i=e.duration,i=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),n=Math.max(Math.min(e.start-i,n.end-i),t+i),e.start-n>i&&this.flushMainBuffer(n,e.start)):this.flushMainBuffer(0,e.start))},rr.getFwdBufferInfo=function(e,t){var i=this.getLoadPosition();return b(i)?this.getFwdBufferInfoAtPos(e,i,t):null},rr.getFwdBufferInfoAtPos=function(e,t,i){var n=this.config.maxBufferHole,r=Si.bufferInfo(e,t,n);return 0===r.len&&void 0!==r.nextStart&&(i=this.fragmentTracker.getBufferedFrag(t,i))&&r.nextStart<i.end?Si.bufferInfo(e,t,Math.max(r.nextStart,n)):r},rr.getMaxBufferLength=function(e){var t=this.config;return e=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(e,t.maxMaxBufferLength)},rr.reduceMaxBufferLength=function(e){var t=this.config;return e=e||t.maxBufferLength,t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},rr.getAppendedFrag=function(e,t){return(e=this.fragmentTracker.getAppendedFrag(e,vt))&&"fragment"in e?e.fragment:e},rr.getNextFragment=function(e,t){var i=t.fragments,n=i.length;if(!n)return null;var r,a=this.config,s=i[0].start;if(t.live){var o=a.initialLiveManifestSize;if(n<o)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+o+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,i),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=s&&(r=i[0]);return r||(n=a.lowLatencyMode?t.partEnd:t.fragmentEnd,r=this.getFragmentAtPosition(e,n,t)),this.mapToInitFragWhenRequired(r)},rr.isLoopLoading=function(e,t){var i=this.fragmentTracker.getState(e);return("OK"===i||i===di&&!!e.gap)&&this.nextLoadPosition>t},rr.getNextFragmentLoopLoading=function(e,t,i,n,r){var a=e.gap;return null===(t=this.getNextFragment(this.nextLoadPosition,t))?t:(e=t,a&&e&&!e.gap&&i.nextStart&&null!==(t=this.getFwdBufferInfoAtPos(this.mediaBuffer||this.media,i.nextStart,n))&&i.len+t.len>=r?(this.log('buffer full after gaps in "'+n+'" playlist starting at sn: '+e.sn),null):e)},rr.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},rr.getNextPart=function(e,t,i){for(var n=-1,r=!1,a=!0,s=0,o=e.length;s<o;s++){var l=e[s];if(a=a&&!l.independent,-1<n&&i<l.start)break;var h=l.loaded;h?n=-1:(r||l.independent||a)&&l.fragment===t&&(n=s),r=h}return n},rr.loadedEndOfParts=function(e,t){return(e=e[e.length-1])&&t>e.start&&e.loaded},rr.getInitialLiveFragment=function(e,t){var i,n,r=this.fragPrevious,a=null;return r?(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(e,t,i){if(null!==t&&Array.isArray(e)&&e.length&&b(t)&&!(t<(e[0].programDateTime||0)||t>=(e[e.length-1].endProgramDateTime||0))){i=i||0;for(var n,r,a,s=0;s<e.length;++s){var o=e[s];if(n=t,a=o,r=1e3*Math.min(i,a.duration+(a.deltaPTS||0)),(a.endProgramDateTime||0)-r>n)return o}}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),a||((i=r.sn+1)>=e.startSN&&i<=e.endSN&&(i=t[i-e.startSN],r.cc===i.cc)&&this.log("Live playlist, switching playlist, load frag with next SN: "+(a=i).sn),!a&&(n=r.cc,a=ii(t,(function(e){return e.cc<n?1:e.cc>n?-1:0})))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn))):null!==(i=this.hls.liveSyncPosition)&&(a=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e)),a},rr.getFragmentAtPosition=function(e,t,i){var n=this.config,r=this.fragPrevious,a=i.fragments,s=i.endSN,o=i.fragmentHint,l=n.maxFragLookUpTolerance,h=i.partList;return(n=!!(n.lowLatencyMode&&null!=h&&h.length&&o))&&o&&!this.bitrateTest&&(a=a.concat(o),s=o.sn),(o=e<t?ni(r,a,e,t-l<e?0:l):a[a.length-1])&&(t=o.sn-i.startSN,r="OK"===(e=this.fragmentTracker.getState(o))||e===di&&o.gap?o:r)&&o.sn===r.sn&&(!n||h[0].fragment.sn>o.sn)&&r&&o.level===r.level&&(l=a[1+t],o=o.sn<s&&"OK"!==this.fragmentTracker.getState(l)?l:null),o},rr.synchronizeToLiveEdge=function(e){var t,i,n,r,a=this.config,s=this.media;s&&(t=this.hls.liveSyncPosition,i=s.currentTime,r=e.fragments[0].start,n=e.edge,r=i>=r-a.maxFragLookUpTolerance&&i<=n,null!==t)&&s.duration>t&&(i<t||!r)&&(a=void 0!==a.liveMaxLatencyDuration?a.liveMaxLatencyDuration:a.liveMaxLatencyDurationCount*e.targetduration,!r&&s.readyState<4||i<n-a)&&(this.loadedmetadata||(this.nextLoadPosition=t),s.readyState)&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+n+", reset currentTime to : "+t.toFixed(3)),s.currentTime=t)},rr.alignPlaylists=function(e,t){var i,n,r,a,s,o=this.levels,l=this.levelLastLoaded,h=this.fragPrevious;return o=null!==l?o[l]:null,(l=e.fragments.length)?(i=e.fragments[0].start,n=!t,r=e.alignedSliding&&b(i),n||!r&&!i?(n=h,r=e,o&&(a=r,(s=o).details&&(a.endCC>a.startCC||n&&n.cc<a.startCC)&&(n=function(){var e=s.details.fragments,t=a.fragments;if(t.length&&e.length){if((e=Ci(e,t[0].cc))&&(!e||e.startPTS))return e;k.log("No frag in previous level to align on")}else k.log("No fragments to align")}())&&b(n.start)&&(k.log("Adjusting PTS using last level due to CC increase within current level "+a.url),Ri(n.start,a)),!r.alignedSliding&&o.details&&Ii(r,o.details),r.alignedSliding||!o.details||r.skippedSegments||Qt(o.details,r)),n=e.fragments[0].start,this.log("Live playlist sliding: "+n.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(h?h.sn:"na")+" fragments: "+l),n):i):(this.warn("No fragments in live playlist"),0)},rr.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},rr.setStartPosition=function(e,t){var i,n,r=this.startPosition;-1!==(r=r<t?-1:r)&&-1!==this.lastCurrentTime||(null!==(n=((i=null!==this.startTimeOffset)?this:e).startTimeOffset)&&b(n)?(r=t+n,n<0&&(r+=e.totalduration),r=Math.min(Math.max(t,r),t+e.totalduration),this.log("Start time offset "+n+" found in "+(i?"multivariant":"media")+" playlist, adjust startPosition to "+r),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r),this.nextLoadPosition=r},rr.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},rr.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},rr.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===zi)||(this.state=Hi)},rr.onFragmentOrKeyLoadError=function(e,t){t.chunkMeta&&!t.frag&&(i=this.getCurrentContext(t.chunkMeta))&&(t.frag=i.frag);var i=t.frag;if(i&&i.type===e&&this.levels)if(this.fragContextChanged(i))this.warn("Frag load error must match current frag to retry "+i.url+" > "+(null==(n=this.fragCurrent)?void 0:n.url));else{var n=t.details===T.FRAG_GAP,r=(n&&this.fragmentTracker.fragBuffered(i,!0),t.errorAction),a=(o=r||{}).action,s=void 0===(s=o.retryCount)?0:s,o=o.retryConfig;if(r&&5===a&&o){this.resetStartWhenNotLoaded(null!=(l=this.levelLastLoaded)?l:i.level);var l=$t(o,s);this.warn("Fragment "+i.sn+" of "+e+" "+i.level+" errored with "+t.details+", retrying loading "+(s+1)+"/"+o.maxNumRetry+" in "+l+"ms"),r.resolved=!0,this.retryDate=self.performance.now()+l,this.state=zi}else if(o&&r){if(this.resetFragmentErrors(e),!(s<o.maxNumRetry))return void k.warn(t.details+" reached or exceeded max retry ("+s+")");n||3===a||(r.resolved=!0)}else 2===(null==r?void 0:r.action)?this.state=$i:this.state=qi;this.tickImmediate()}},rr.reduceLengthAndFlushBuffer=function(e){var t,i,n;return(this.state===Ki||this.state===Ji)&&(t=e.parent,(i=(n=this.getFwdBufferInfo(this.mediaBuffer,t))&&.5<n.len)&&this.reduceMaxBufferLength(n.len),(n=!i)&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+t+" buffer"),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),n)},rr.resetFragmentErrors=function(e){e===At&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Gi&&(this.state=Hi)},rr.afterBufferFlushed=function(e,t,i){e&&(e=Si.getBuffered(e),this.fragmentTracker.detectEvictedFragments(t,e,i),this.state===Zi)&&this.resetLoadingState()},rr.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Hi},rr.resetStartWhenNotLoaded=function(e){this.loadedmetadata||(this.startFragRequested=!1,null!=(e=this.levels?this.levels[e].details:null)&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition)},rr.resetWhenMissingContext=function(e){var t;this.warn("The loading context changed while buffering fragment "+e.sn+" of level "+e.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:e.level),this.resetLoadingState()},rr.removeUnbufferedFrags=function(e){this.fragmentTracker.removeFragmentsInRange(e=void 0===e?0:e,1/0,this.playlistType,!1,!0)},rr.updateLevelTiming=function(e,t,i,n){var r=this,a=i.details;if(a){if(Object.keys(e.elementaryStreams).reduce((function(t,s){var o,l=e.elementaryStreams[s];return l?(o=l.endPTS-l.startPTS)<=0?(r.warn("Could not parse fragment "+e.sn+" "+s+" duration reliably ("+o+")"),t||!1):(o=n?0:zt(a,e,l.startPTS,l.endPTS,l.startDTS,l.endDTS),r.hls.trigger(w.LEVEL_PTS_UPDATED,{details:a,level:i,drift:o,type:s,frag:e,start:l.startPTS,end:l.endPTS}),!0):t}),!1))i.fragmentError=0;else if(null===(null==(s=this.transmuxer)?void 0:s.error)){var s=new Error("Found no media in fragment "+e.sn+" of level "+e.level+" resetting transmuxer to fallback to playlist timing");if(0===i.fragmentError&&(i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(s.message),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,fatal:!1,error:s,frag:e,reason:"Found no media in msn "+e.sn+' of level "'+i.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Ji,this.hls.trigger(w.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")},rr.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},rr.recoverWorkerError=function(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(e=null!=(e=this.levelLastLoaded)?e:null==(e=this.fragCurrent)?void 0:e.level)?e:0),this.resetLoadingState())},a(nn,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),hi=nn,(rr=tn.prototype).push=function(e){this.chunks.push(e),this.dataLength+=e.length},rr.flush=function(){var e=this.chunks,t=this.dataLength;return e.length?(e=1===e.length?e[0]:function(e){for(var i=new Uint8Array(t),n=0,r=0;r<e.length;r++){var a=e[r];i.set(a,n),n+=a.length}return i}(e),this.reset(),e):new Uint8Array(0)},rr.reset=function(){this.chunks.length=0,this.dataLength=0},tn);function tn(){this.chunks=[],this.dataLength=0}function nn(e,t,i,n,r){var a;return(a=Fi.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=Gi,a.playlistType=void 0,a.media=null,a.mediaBuffer=null,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.startTimeOffset=null,a.loadedmetadata=!1,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.keyLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.playlistType=r,a.logPrefix=n,a.log=k.log.bind(k,n+":"),a.warn=k.warn.bind(k,n+":"),a.hls=e,a.fragmentLoader=new Pi(e.config),a.keyLoader=i,a.fragmentTracker=t,a.config=e.config,a.decrypter=new Vi(e.config),e.on(w.MANIFEST_LOADED,a.onManifestLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}function rn(e,t){if(t=void 0===(t=(void 0===t?{}:t).removePKCS7Padding)||t,this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}function an(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}function sn(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}function on(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}function ln(e){var t;return(t=Bi.call(this,e.error.message)||this).data=void 0,t.data=e,t}function hn(e,t){return{type:e=void 0===e?"":e,id:-1,pid:-1,inputTimeScale:t=void 0===t?9e4:t,sequenceNumber:-1,samples:[],dropped:0}}(rr=dn.prototype).resetInitSegment=function(e,t,i,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},rr.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},rr.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},rr.canParse=function(e,t){return!1},rr.appendFrame=function(e,t,i){},rr.demux=function(e,t){this.cachedData&&(e=Be(this.cachedData,e),this.cachedData=null);var i,n,r,a=ce(e,0),s=a?a.length:0,o=this._audioTrack,l=this._id3Track,h=a?fe(a):void 0,u=e.length;for((null===this.basePTS||0===this.frameIndex&&b(h))&&(this.basePTS=un(h,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),a&&0<a.length&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:kt,duration:Number.POSITIVE_INFINITY});s<u;)this.canParse(e,s)?(n=this.appendFrame(o,e,s))?(this.frameIndex++,this.lastPTS=n.sample.pts,i=s+=n.length):s=u:ue(n=e,r=s)&&_e(n,r+6)+10<=n.length-r?(a=ce(e,s),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:a,type:kt,duration:Number.POSITIVE_INFINITY}),i=s+=a.length):s++,s===u&&i!==u&&(r=he(e,i),this.cachedData?this.cachedData=Be(this.cachedData,r):this.cachedData=r);return{audioTrack:o,videoTrack:hn(),id3Track:l,textTrack:hn()}},rr.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},rr.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:hn(),id3Track:this._id3Track,textTrack:hn()}},rr.destroy=function(){};var un=function(e,t,i){return b(e)?90*e:9e4*t+(i?9e4*i.baseTime/i.timescale:0)};function dn(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}function cn(e,t){return 255===e[t]&&240==(246&e[t+1])}function fn(e,t){return 1&e[t+1]?7:9}function pn(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function mn(e,t){return t+1<e.length&&cn(e,t)}function gn(e,t,i,n,r){var a,s,o,l,h,u;!e.samplerate&&(s=navigator.userAgent.toLowerCase(),o=r,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],h=1+((192&i[n+2])>>>6),u=(60&i[n+2])>>>2,n=l.length-1<u?void t.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u}):(t=(1&i[n+2])<<2,t|=(192&i[n+3])>>>6,k.log("manifest codec:"+r+", ADTS type:"+h+", samplingIndex:"+u),i=/firefox/i.test(s)?6<=u?(h=5,a=new Array(4),u-3):(h=2,a=new Array(2),u):-1!==s.indexOf("android")?(h=2,a=new Array(2),u):(h=5,a=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&6<=u?u-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(6<=u&&1==t||/vivaldi/i.test(s))||!r&&1==t)&&(h=2,a=new Array(2)),u)),a[0]=h<<3,a[0]|=(14&u)>>1,a[1]|=(1&u)<<7,a[1]|=t<<3,5===h&&(a[1]|=(14&i)>>1,a[2]=(1&i)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:l[u],channelCount:t,codec:"mp4a.40."+h,manifestCodec:o}))&&(e.config=n.config,e.samplerate=n.samplerate,e.channelCount=n.channelCount,e.codec=n.codec,e.manifestCodec=n.manifestCodec,k.log("parsed codec:"+e.codec+", rate:"+n.samplerate+", channels:"+n.channelCount))}function _n(e){return 9216e4/e}function yn(e,t,i,n,r){var a,s,o;return n+=r*_n(e.samplerate),r=function(){var e=fn(t,i);if(i+e<=t.length){var n=pn(t,i)-e;if(0<n)return{headerLength:e,frameLength:n}}}(),r?(s=r.frameLength,s=(r=r.headerLength)+s,(o=Math.max(0,i+s-t.length))?(a=new Uint8Array(s-r)).set(t.subarray(i+r,t.length),0):a=t.subarray(i+r,i+s),r={unit:a,pts:n},o||e.samples.push(r),{sample:r,length:s,missing:o}):(e=t.length-i,(a=new Uint8Array(e)).set(t.subarray(i,t.length),0),{sample:{unit:a,pts:n},length:e,missing:-1})}o(In,vn=rr=dn),(An=In.prototype).resetInitSegment=function(e,t,i,n){vn.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},In.probe=function(e){if(e)for(var t,i,n,r,a=(ce(e,0)||[]).length,s=e.length;a<s;a++)if(r=n=void 0,!mn(t=e,i=a)||i+(r=fn(t,i))>=t.length?void 0:!((n=pn(t,i))<=r)&&((r=i+n)===t.length||mn(t,r)))return k.log("ADTS sync word found !"),!0;return!1},An.canParse=function(e,t){return t+5<e.length&&cn(e,t)&&pn(e,t)<=e.length-t},An.appendFrame=function(e,t,i){if(gn(e,this.observer,t,i,e.manifestCodec),(e=yn(e,t,i,this.basePTS,this.frameIndex))&&0===e.missing)return e};var vn,An=In,En=/\/emsg[-/]ID3/i,bn=((bn=Rn.prototype).resetTimeStamp=function(){},bn.resetInitSegment=function(e,t,i,n){var r,a,s,o=this.videoTrack=hn("video",1),l=this.audioTrack=hn("audio",1),h=this.txtTrack=hn("text",1);this.id3Track=hn("id3",1),this.timeOffset=0,null!=e&&e.byteLength&&((e=De(e)).video&&(r=(s=e.video).id,a=s.timescale,s=s.codec,o.id=r,o.timescale=h.timescale=a,o.codec=s),e.audio&&(a=(r=e.audio).id,s=r.timescale,e=r.codec,l.id=a,l.timescale=s,l.codec=e),h.id=Te.text,o.sampleDuration=0,o.duration=l.duration=n)},bn.resetContiguity=function(){this.remainderData=null},Rn.probe=function(e){return 0<Pe(e=16384<e.length?e.subarray(0,16384):e,["moof"]).length},bn.demux=function(e,t){this.timeOffset=t;var i,n=e,r=this.videoTrack,a=this.txtTrack,s=(this.config.progressive?(this.remainderData&&(n=Be(this.remainderData,e)),e={valid:null,remainder:null},(s=Pe(i=n,["moof"]))&&(s.length<2?e.remainder=i:(s=s[s.length-1],e.valid=he(i,0,s.byteOffset-8),e.remainder=he(i,s.byteOffset-8))),i=e,this.remainderData=i.remainder,r.samples=i.valid||new Uint8Array):r.samples=n,this.extractID3Track(r,t));return a.samples=Oe(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}},bn.flush=function(){var e=this.timeOffset,t=this.videoTrack,i=this.txtTrack,n=(t.samples=this.remainderData||new Uint8Array,this.remainderData=null,this.extractID3Track(t,this.timeOffset));return i.samples=Oe(e,t),{videoTrack:t,audioTrack:hn(),id3Track:n,textTrack:hn()}},bn.extractID3Track=function(e,t){var i=this.id3Track;return e.samples.length&&(e=Pe(e.samples,["emsg"]))&&e.forEach((function(e){var n,r;e=function(e){var t="",i="",n=0,r=0,a=0,s=0,o=0,l=0;if(0===(h=e[0])){for(;"\0"!==Ce(e.subarray(l,l+1));)t+=Ce(e.subarray(l,l+1)),l+=1;for(t+=Ce(e.subarray(l,l+1)),l+=1;"\0"!==Ce(e.subarray(l,l+1));)i+=Ce(e.subarray(l,l+1)),l+=1;i+=Ce(e.subarray(l,l+1)),l+=1,n=Re(e,12),r=Re(e,16),s=Re(e,20),o=Re(e,24),l=28}else if(1===h){n=Re(e,l+=4);var h=Re(e,l+=4),u=Re(e,l+=4);for(l+=4,a=Math.pow(2,32)*h+u,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,k.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=Re(e,l),o=Re(e,l+=4),l+=4;"\0"!==Ce(e.subarray(l,l+1));)t+=Ce(e.subarray(l,l+1)),l+=1;for(t+=Ce(e.subarray(l,l+1)),l+=1;"\0"!==Ce(e.subarray(l,l+1));)i+=Ce(e.subarray(l,l+1)),l+=1;i+=Ce(e.subarray(l,l+1)),l+=1}return{schemeIdUri:t,value:i,timeScale:n,presentationTime:a,presentationTimeDelta:r,eventDuration:s,id:o,payload:e.subarray(l,e.byteLength)}}(e),En.test(e.schemeIdUri)&&(n=b(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale,(r=4294967295===e.eventDuration?Number.POSITIVE_INFINITY:e.eventDuration/e.timeScale)<=.001&&(r=Number.POSITIVE_INFINITY),e=e.payload,i.samples.push({data:e,len:e.byteLength,dts:n,pts:n,type:Pt,duration:r}))})),i},bn.demuxSampleAes=function(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},bn.destroy=function(){},Rn),wn=null,Sn=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Tn=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Cn=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Ln=[0,1,1,4];function Rn(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}function In(e,t){var i;return(i=vn.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=t,i}function kn(e,t,i,n,r){if(!(i+24>t.length)){var a=Pn(t,i);if(a&&i+a.frameLength<=t.length)return n+=r*(9e4*a.samplesPerFrame/a.sampleRate),r={unit:t.subarray(i,i+a.frameLength),pts:n,dts:n},e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(r),{sample:r,length:a.frameLength,missing:0}}}function Pn(e,t){var i,n,r,a,s,o=e[t+1]>>3&3,l=e[t+1]>>1&3,h=e[t+2]>>4&15,u=e[t+2]>>2&3;if(1!=o&&0!=h&&15!=h&&3!=u)return s=e[t+2]>>1&1,i=e[t+3]>>6,h=1e3*Sn[14*(3==o?3-l:3==l?3:4)+h-1],u=Tn[3*(3==o?0:2==o?1:2)+u],n=3==i?1:2,a=8*(o=Cn[o][l])*(r=Ln[l]),o=Math.floor(o*h/u+s)*r,null===wn&&(s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),wn=s?parseInt(s[1]):0),wn&&wn<=87&&2==l&&224e3<=h&&0==i&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:n,frameLength:o,samplesPerFrame:a}}function Dn(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function xn(e,t){return t+1<e.length&&Dn(e,t)}function Mn(e,t){var i=0,n=5;t+=n;for(var r=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);0<n;){s[0]=e[t];var o=Math.min(n,8),l=8-o;a[0]=4278190080>>>24+l<<l,r[0]=(s[0]&a[0])>>l,i=i?i<<o|r[0]:r[0],t+=1,n-=o}return i}o(On,Fn=rr),(Bn=On.prototype).resetInitSegment=function(e,t,i,n){Fn.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},Bn.canParse=function(e,t){return t+64<e.length},Bn.appendFrame=function(e,t,i){if(-1!==(t=Un(e,t,i,this.basePTS,this.frameIndex)))return{sample:e.samples[e.samples.length-1],length:t,missing:0}},On.probe=function(e){var t,i;return!!e&&!!(t=ce(e,0))&&11===e[i=t.length]&&119===e[i+1]&&void 0!==fe(t)&&Mn(e,i)<16};var Fn,Bn=On;function On(e){var t;return(t=Fn.call(this)||this).observer=void 0,t.observer=e,t}function Un(e,t,i,n,r){var a,s,o,l,h,u,d,c,f;return i+8>t.length||11!==t[i]||119!==t[i+1]||3<=(d=t[i+4]>>6)||(a=[48e3,44100,32e3][d],i+(o=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*(s=63&t[i+4])+d])>t.length)?-1:(h=0,(2==(l=t[i+6]>>5)||(1&l&&1!=l&&(h+=2),4&l))&&(h+=2),h=(t[i+6]<<8|t[i+7])>>12-h&1,u=[2,1,2,3,3,4,4,5][l]+h,c=t[i+5]>>3,f=7&t[i+5],d=new Uint8Array([d<<6|c<<1|f>>2,(3&f)<<6|l<<3|h<<2|s>>4,s<<4&224]),c=n+r*(1536/a*9e4),f=t.subarray(i,i+o),e.config=d,e.channelCount=u,e.samplerate=a,e.samples.push({unit:f,pts:c}),o)}(Vn=$n.prototype).createVideoSample=function(e,t,i,n){return{key:e,frame:!1,pts:t,dts:i,units:[],debug:n,length:0}},Vn.getLastNalUnit=function(e){var t,i=this.VideoSample;return null!=(i=i&&0!==i.units.length?i:e[e.length-1])&&i.units?(e=i.units)[e.length-1]:t},Vn.pushAccessUnit=function(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var i=t.samples,n=i.length;if(!n)return void t.dropped++;i=i[n-1],e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}e.debug.length&&k.log(e.pts+"/"+e.dts+":"+e.debug)};var Nn,jn,Vn=$n,Gn=((_r=Xn.prototype).loadWord=function(){var e=this.data,t=this.bytesAvailable,i=e.byteLength-t,n=new Uint8Array(4);if(0===(t=Math.min(4,t)))throw new Error("no bytes available");n.set(e.subarray(i,i+t)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*t,this.bytesAvailable-=t},_r.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e||(e=(e-=this.bitsAvailable)-((t=e>>3)<<3),this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},_r.readBits=function(e){var t=Math.min(this.bitsAvailable,e),i=this.word>>>32-t;if(32<e&&k.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable)this.word<<=t;else{if(!(0<this.bytesAvailable))throw new Error("no bits available");this.loadWord()}return 0<(t=e-t)&&this.bitsAvailable?i<<t|this.readBits(t):i},_r.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},_r.skipUEG=function(){this.skipBits(1+this.skipLZ())},_r.skipEG=function(){this.skipBits(1+this.skipLZ())},_r.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},_r.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},_r.readBoolean=function(){return 1===this.readBits(1)},_r.readUByte=function(){return this.readBits(8)},_r.readUShort=function(){return this.readBits(16)},_r.readUInt=function(){return this.readBits(32)},_r.skipScalingList=function(e){for(var t=8,i=8,n=0;n<e;n++)t=0===(i=0!==i?(t+this.readEG()+256)%256:i)?t:i},_r.readSPS=function(){var e,t,i,n=0,r=0,a=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),h=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),c=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this),m=(o(),o());if(l(5),d(3),o(),f(),(100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m)&&(3===(m=h())&&d(1),f(),f(),d(1),u()))for(t=3!==m?8:12,i=0;i<t;i++)u()&&p(i<6?16:64);if(f(),0===(m=h()))h();else if(1===m)for(d(1),c(),c(),e=h(),i=0;i<e;i++)c();f(),d(1),m=h(),f=h();var g=(0===(l=l(1))&&d(1),d(1),u()&&(n=h(),r=h(),a=h(),s=h()),[1,1]);if(u()&&u())switch(o()){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(m+1)-2*n-2*r),height:(2-l)*(f+1)*16-(l?2:4)*(a+s),pixelRatio:g}},_r.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},_r.destroy=function(){this.data=null},Xn),Hn=(o(qn,jn=Vn),(_r=qn.prototype).parseAVCPES=function(e,t,i,n,r){var a,s=this,o=this.parseAVCNALu(e,i.data),l=this.VideoSample,h=!1;i.data=null,l&&o.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),o.forEach((function(n){switch(n.type){case 1:var o=!1;a=!0;var u=n.data;h&&4<u.length&&(2!==(u=new Gn(u).readSliceType())&&4!==u&&7!==u&&9!==u||(o=!0)),o&&null!=l&&l.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),(l=l||(s.VideoSample=s.createVideoSample(!0,i.pts,i.dts,""))).frame=!0,l.key=o;break;case 5:a=!0,null!=l&&l.frame&&!l.key&&(s.pushAccessUnit(l,e),l=s.VideoSample=null),(l=l||(s.VideoSample=s.createVideoSample(!0,i.pts,i.dts,""))).key=!0,l.frame=!0;break;case 6:a=!0,Ue(n.data,1,i.pts,t.samples);break;case 7:if(h=a=!0,!e.sps){u=n.data,o=new Gn(u).readSPS(),e.width=o.width,e.height=o.height,e.pixelRatio=o.pixelRatio,e.sps=[u],e.duration=r;for(var d=u.subarray(1,4),c="avc1.",f=0;f<3;f++){var p=d[f].toString(16);c+=p=p.length<2?"0"+p:p}e.codec=c}break;case 8:a=!0,e.pps||(e.pps=[n.data]);break;case 9:a=!0,e.audFound=!0,l&&s.pushAccessUnit(l,e),l=s.VideoSample=s.createVideoSample(!1,i.pts,i.dts,"");break;case 12:a=!0;break;default:a=!1,l&&(l.debug+="unknown NAL "+n.type+" ")}l&&a&&l.units.push(n)})),n&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)},_r.parseAVCNALu=function(e,t){var i,n,r,a,s=t.byteLength,o=e.naluState||0,l=o,h=[],u=0,d=-1,c=0;for(-1===o&&(c=31&t[d=0],o=0,u=1);u<s;)i=t[u++],o=o?1!==o?i?1===i?(r=u-o-1,0<=d?(n={data:t.subarray(d,r),type:c},h.push(n)):(n=this.getLastNalUnit(e.samples))&&(l&&u<=4-l&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-l)),0<r)&&(n.data=Be(n.data,t.subarray(0,r)),n.state=0),u<s?(c=31&t[d=u],0):-1):0:3:i?0:2:i?0:1;return 0<=d&&0<=o&&(a={data:t.subarray(d,s),type:c,state:o},h.push(a)),0===h.length&&(a=this.getLastNalUnit(e.samples))&&(a.data=Be(a.data,t)),e.naluState=o,h},qn),Yn=(Zn._ebsp2rbsp=function(e){for(var t=e,i=t.byteLength,n=new Uint8Array(i),r=0,a=0;a<i;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(n[r]=t[a],r++);return new Uint8Array(n.buffer,0,r)},Zn.parseVPS=function(e){return e=Zn._ebsp2rbsp(e),(e=new Gn(e)).readUByte(),e.readUByte(),e.readBits(4),e.readBits(2),e.readBits(6),{num_temporal_layers:e.readBits(3)+1,temporal_id_nested:e.readBoolean()}},Zn.parseSPS=function(e){e=Zn._ebsp2rbsp(e);var t=new Gn(e),i=(t.readUByte(),t.readUByte(),e=0,0),n=0,r=0,a=(t.readBits(4),t.readBits(3));t.readBoolean();for(var s=t.readBits(2),o=t.readBoolean(),l=t.readBits(5),h=t.readUByte(),u=t.readUByte(),d=t.readUByte(),c=t.readUByte(),f=t.readUByte(),p=t.readUByte(),m=t.readUByte(),g=t.readUByte(),_=t.readUByte(),y=t.readUByte(),v=t.readUByte(),A=[],E=[],b=0;b<a;b++)A.push(t.readBoolean()),E.push(t.readBoolean());if(0<a)for(var w=a;w<8;w++)t.readBits(2);for(var S=0;S<a;S++)A[S]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),E[S]&&t.readUByte();t.readUEG();var T=t.readUEG(),C=(3==T&&t.readBits(1),t.readUEG()),L=t.readUEG();t.readBoolean()&&(e+=t.readUEG(),i+=t.readUEG(),n+=t.readUEG(),r+=t.readUEG());for(var R=t.readUEG(),I=t.readUEG(),k=t.readUEG(),P=t.readBoolean()?0:a;P<=a;P++)t.readUEG(),t.readUEG(),t.readUEG();if(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBoolean()&&t.readBoolean())for(var D=0;D<4;D++)for(var x=0;x<(3===D?2:6);x++)if(t.readBoolean()){var M=Math.min(64,1<<4+(D<<1));1<D&&t.readEG();for(var F=0;F<M;F++)t.readEG()}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUEG(),t.readUEG(),t.readBoolean());for(var B=t.readUEG(),O=0,U=0;U<B;U++){var N=!1;if(N=0!==U?t.readBoolean():N){U===B&&t.readUEG(),t.readBoolean(),t.readUEG();for(var j=0,V=0;V<=O;V++){var G=t.readBoolean(),H=!1;G||(H=t.readBoolean()),(G||H)&&j++}O=j}else{for(var Y=t.readUEG(),W=t.readUEG(),z=(O=Y+W,0);z<Y;z++)t.readUEG(),t.readBoolean();for(var Q=0;Q<W;Q++)t.readUEG(),t.readBoolean()}}if(t.readBoolean())for(var K=t.readUEG(),J=0;J<K;J++){for(var Z=0;Z<k+4;Z++)t.readBits(1);t.readBits(1)}var q=0,X=1,$=1,ee=!1,te=1,ie=1;if(t.readBoolean(),t.readBoolean(),t.readBoolean()){if(t.readBoolean()&&(0<(fe=t.readUByte())&&fe<=16?(X=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][fe-1],$=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][fe-1]):255===fe&&(X=t.readBits(16),$=t.readBits(16))),t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean())&&(t.readUByte(),t.readUByte(),t.readUByte()),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG()),t.readBoolean()&&(te=t.readBits(32),ie=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){var ne=!1,re=t.readBoolean(),ae=t.readBoolean();(re||ae)&&((ne=t.readBoolean())&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),ne&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(var se=0;se<=a;se++){var oe=t.readBoolean(),le=(ee=oe,!0),he=1,ue=!1;if((le=oe?le:t.readBoolean())?t.readUEG():ue=t.readBoolean(),ue||(he=t.readUEG()+1),re){for(var de=0;de<he;de++)t.readUEG(),t.readUEG(),ne&&(t.readUEG(),t.readUEG());t.readBoolean()}if(ae){for(var ce=0;ce<he;ce++)t.readUEG(),t.readUEG(),ne&&(t.readUEG(),t.readUEG());t.readBoolean()}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),q=t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG())}t.readBoolean();var fe="hvc1."+l+".1.L"+v+".B0";return C-=(e+i)*(1===T||2===T?2:1),e=L-(n+r)*(1===T?2:1),i=1!==X&&1!==$?X/$:1,t.destroy(),t=null,{codec_mimetype:fe,level_string:Zn.getLevelString(v),profile_idc:l,bit_depth:R+8,ref_frames:1,chroma_format:T,chroma_format_string:Zn.getChromaFormatString(T),general_level_idc:v,general_profile_space:s,general_tier_flag:o,general_profile_idc:l,general_profile_compatibility_flags_1:h,general_profile_compatibility_flags_2:u,general_profile_compatibility_flags_3:d,general_profile_compatibility_flags_4:c,general_constraint_indicator_flags_1:f,general_constraint_indicator_flags_2:p,general_constraint_indicator_flags_3:m,general_constraint_indicator_flags_4:g,general_constraint_indicator_flags_5:_,general_constraint_indicator_flags_6:y,min_spatial_segmentation_idc:q,constant_frame_rate:0,chroma_format_idc:T,bit_depth_luma_minus8:R,bit_depth_chroma_minus8:I,frame_rate:{fixed:ee,fps:ie/te,fps_den:te,fps_num:ie},sar_ratio:{width:X,height:$},codec_size:{width:C,height:e},present_size:{width:C*i,height:e}}},Zn.parsePPS=function(e){e=Zn._ebsp2rbsp(e);var t=((e=new Gn(e)).readUByte(),e.readUByte(),e.readUEG(),e.readUEG(),e.readBoolean(),e.readBoolean(),e.readBits(3),e.readBoolean(),e.readBoolean(),e.readUEG(),e.readUEG(),e.readEG(),e.readBoolean(),e.readBoolean(),e.readBoolean()&&e.readUEG(),e.readEG(),e.readEG(),e.readBoolean(),e.readBoolean(),e.readBoolean(),e.readBoolean(),e.readBoolean()),i=1;return(e=e.readBoolean())&&t?i=0:e?i=3:t&&(i=2),{parallelismType:i}},Zn.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},Zn.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},Zn.getLevelString=function(e){return(e/30).toFixed(1)},Zn),Wn=(o(Jn,Nn=Vn),(_r=Jn.prototype).parseAVCPES=function(e,t,i,r,a){var s,o=this,l=this.parseAVCNALu(e,i.data),h=this.VideoSample;i.data=null,h&&l.length&&!e.audFound&&(this.pushAccessUnit(h,e),h=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts,"")),l.forEach((function(r){switch(r.type){case 0:case 1:s=!0,(h=h||(o.VideoSample=o.createVideoSample(!0,i.pts,i.dts,""))).frame=!0;break;case 19:case 20:case 21:s=!0,(h=h||(o.VideoSample=o.createVideoSample(!0,i.pts,i.dts,""))).key=!0,h.frame=!0;break;case 32:s=!0,e.vps||(e.vps=[r.data]);break;case 33:var l;s=!0,e.sps||(u=r.data,l=Yn.parseSPS(u),e.width=l.codec_size.width,e.height=l.codec_size.height,e.pixelRatio=[l.sar_ratio.width,l.sar_ratio.height],e.sps=[u],e.duration=a,e.codec=l.codec_mimetype,e.details=n(n({},e.details),l));break;case 34:var u;s=!0,e.pps||(e.pps=[r.data],u=Yn.parsePPS(r.data),e.details=n(n({},e.details),u));break;case 35:s=!1,e.audFound=!0,h&&o.pushAccessUnit(h,e),h=o.VideoSample=o.createVideoSample(!1,i.pts,i.dts,"");break;case 39:s=!0,Ue(r.data,1,i.pts,t.samples);break;default:s=!0}h&&s&&h.units.push(r)})),r&&h&&(this.pushAccessUnit(h,e),this.VideoSample=null)},_r.parseAVCNALu=function(e,t){var i,n,r,a,s=t.byteLength,o=e.naluState||0,l=o,h=[],u=0,d=-1,c=0;for(-1===o&&(c=t[d=0]>>1&63,o=0,u=1);u<s;)i=t[u++],o=o?1!==o?i?1===i?(r=u-o-1,0<=d?(n={data:t.subarray(d,r),type:c},h.push(n)):(n=this.getLastNalUnit(e.samples))&&(l&&u<=4-l&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-l)),0<r)&&(n.data=Be(n.data,t.subarray(0,r)),n.state=0),u<s?(c=t[d=u]>>1&63,0):-1):0:3:i?0:2:i?0:1;return 0<=d&&0<=o&&(a={data:t.subarray(d,s),type:c,state:o},h.push(a)),0===h.length&&(a=this.getLastNalUnit(e.samples))&&(a.data=Be(a.data,t)),e.naluState=o,h},Jn),zn=((Vn=Kn.prototype).decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},Vn.decryptAacSample=function(e,t,i){var n,r=this,a=e[t].unit;a.length<=16||(n=(n=a.subarray(16,a.length-a.length%16)).buffer.slice(n.byteOffset,n.byteOffset+n.length),this.decryptBuffer(n).then((function(n){n=new Uint8Array(n),a.set(n,16),r.decrypter.isSync()||r.decryptAacSamples(e,t+1,i)})))},Vn.decryptAacSamples=function(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,i),this.decrypter.isSync())))return}},Vn.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)i.set(e.subarray(r,r+16),n);return i},Vn.getAvcDecryptedUnit=function(e,t){for(var i=new Uint8Array(t),n=0,r=32;r<e.length-16;r+=160,n+=16)e.set(i.subarray(n,n+16),r);return e},Vn.decryptAvcSample=function(e,t,i,n,r){var a=this,s=Ne(r.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then((function(o){r.data=a.getAvcDecryptedUnit(s,o),a.decrypter.isSync()||a.decryptAvcSamples(e,t,i+1,n)}))},Vn.decryptAvcSamples=function(e,t,i,n){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void n();for(var r=e[t].units;!(i>=r.length);i++){var a=r[i];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,i,n,a),this.decrypter.isSync())))return}}},Kn);function Qn(e,t,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.hevcVideoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.videoParser=new Hn,this.hevcVideoParser=new Wn}function Kn(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Vi(t,{removePKCS7Padding:!1})}function Jn(){return Nn.apply(this,arguments)||this}function Zn(){}function qn(){return jn.apply(this,arguments)||this}function Xn(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}function $n(){this.VideoSample=null}function er(e,t){return((31&e[t+1])<<8)+e[t+2]}function tr(e){k.log(e+" with AES-128-CBC encryption found in unencrypted stream")}function ir(e){var t,i,n,r,a=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&1<s.length;)s[0]=Be(s[0],s[1]),s.splice(1,1);if(1!==((t=s[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;var o=t[7],l=(192&o&&(n=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&o?54e5<n-(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(k.warn(Math.round((n-r)/9e4)+"s delta between PTS and DTS, align them"),n=r):r=n),(o=t[8])+9);if(e.size<=l)return null;e.size-=l;for(var h=new Uint8Array(e.size),u=0,d=s.length;u<d;u++){var c=(t=s[u]).byteLength;if(l){if(c<l){l-=c;continue}t=t.subarray(l),c-=l,l=0}h.set(t,a),a+=c}return i&&(i-=o+3),{data:h,pts:n,dts:r,len:i}}Qn.probe=function(e){return 0<(e=Qn.syncOffset(e))&&k.warn("MPEG2-TS detected but first sync word found @ offset "+e),-1!==e},Qn.syncOffset=function(e){for(var t=e.length,i=Math.min(940,e.length-188)+1,n=0;n<i;){for(var r=!1,a=-1,s=0,o=n;o<t;o+=188){if(71!==e[o]){if(s)return-1;break}if(s++,-1===a&&0!==(a=o)&&(i=Math.min(a+18612,e.length-188)+1),(r=r||0===er(e,o))&&1<s&&(0===a&&2<s||i<o+188))return a}n++}return-1},Qn.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:Te[e],pid:-1,segmentVideoCodec:"",inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}},(_r=Qn.prototype).resetInitSegment=function(e,t,i,n){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Qn.createTrack("video"),this._audioTrack=Qn.createTrack("audio",n),this._id3Track=Qn.createTrack("id3"),this._txtTrack=Qn.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i,this._duration=n},_r.resetTimeStamp=function(){},_r.resetContiguity=function(){var e=this._audioTrack,t=this._videoTrack,i=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null},_r.parseVideoAVCPES=function(e,t,i,n,r){"avc"===e.segmentCodec&&this.videoParser.parseAVCPES(e,t,i,n,r),"hevc"===e.segmentCodec&&this.hevcVideoParser.parseAVCPES(e,t,i,n,r)},_r.demux=function(e,t,i,n){void 0===n&&(n=!1),(i=void 0!==i&&i)||(this.sampleAes=null);var r,a=this._videoTrack,s=this._audioTrack,o=this._id3Track,l=this._txtTrack,h=a.pid,u=a.pesData,d=s.pid,c=o.pid,f=s.pesData,p=o.pesData,m=null,g=this.pmtParsed,_=this._pmtId,y=e.length;if(this.remainderData&&(y=(e=Be(this.remainderData,e)).length,this.remainderData=null),y<188&&!n)return this.remainderData=e,{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};var v=Math.max(0,Qn.syncOffset(e));(y-=(y-v)%188)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));for(var A,E=0,b=v;b<y;b+=188)if(71===e[b]){var C=!!(64&e[b+1]),L=er(e,b),R=void 0;if(1<(48&e[b+3])>>4){if((R=b+5+e[b+4])===b+188)continue}else R=b+4;switch(L){case h:C&&(u&&(r=ir(u))&&this.parseVideoAVCPES(a,l,r,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(e.subarray(R,b+188)),u.size+=b+188-R);break;case d:if(C){if(f&&(r=ir(f)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,r);break;case"mp3":this.parseMPEGPES(s,r);break;case"ac3":this.parseAC3PES(s,r)}f={data:[],size:0}}f&&(f.data.push(e.subarray(R,b+188)),f.size+=b+188-R);break;case c:C&&(p&&(r=ir(p))&&this.parseID3PES(o,r),p={data:[],size:0}),p&&(p.data.push(e.subarray(R,b+188)),p.size+=b+188-R);break;case 0:C&&(R+=e[R]+1),_=this._pmtId=(31&(I=e)[(A=R)+10])<<8|I[A+11];break;case _:C&&(R+=e[R]+1);var I=function(e,t,i,n){var r={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var s=er(e,t),o=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!n){tr("ADTS AAC");break}case 15:-1===r.audioPid&&(r.audioPid=s);break;case 21:-1===r.id3Pid&&(r.id3Pid=s);break;case 219:if(!n){tr("H.264");break}case 27:-1===r.videoPid&&(r.videoPid=s,r.segmentVideoCodec="avc");break;case 3:case 4:i.mpeg||i.mp3?-1===r.audioPid&&(r.audioPid=s,r.segmentAudioCodec="mp3"):k.log("MPEG audio found, not supported in this browser");break;case 193:if(!n){tr("AC-3");break}case 129:i.ac3?-1===r.audioPid&&(r.audioPid=s,r.segmentAudioCodec="ac3"):k.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===r.audioPid&&0<o)for(var l=t+5,h=o;2<h;){106===e[l]&&(!0!==i.ac3?k.log("AC-3 audio found, not supported in this browser for now"):(r.audioPid=s,r.segmentAudioCodec="ac3"));var u=e[l+1]+2;l+=u,h-=u}break;case 194:case 135:k.warn("Unsupported EC-3 in M2TS found");break;case 36:-1===r.videoPid&&(r.videoPid=s,r.segmentVideoCodec="hevc")}t+=5+o}return r}(e,R,this.typeSupported,i);0<(h=I.videoPid)&&(a.pid=h,a.segmentCodec=I.segmentVideoCodec),0<(d=I.audioPid)&&(s.pid=d,s.segmentCodec=I.segmentAudioCodec),0<(c=I.id3Pid)&&(o.pid=c),null===m||g||(k.warn("MPEG-TS PMT found at "+b+" after unknown PID '"+m+"'. Backtracking to sync byte @"+v+" to parse all TS packets."),m=null,b=v-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=L}}else E++;0<E&&(P=new Error("Found "+E+" TS packet/s that do not start with 0x47"),this.observer.emit(w.ERROR,w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,fatal:!1,error:P,reason:P.message})),a.pesData=u,s.pesData=f,o.pesData=p;var P={audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};return n&&this.extractRemainingSamples(P),P},_r.flush=function(){var e=this.remainderData;return this.remainderData=null,e=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},_r.extractRemainingSamples=function(e){var t,i=e.audioTrack,n=e.videoTrack,r=e.id3Track,a=(e=e.textTrack,n.pesData),s=i.pesData,o=r.pesData;if(a&&(t=ir(a))?(this.parseVideoAVCPES(n,e,t,!0,this._duration),n.pesData=null):n.pesData=a,s&&(t=ir(s))){switch(i.segmentCodec){case"aac":this.parseAACPES(i,t);break;case"mp3":this.parseMPEGPES(i,t);break;case"ac3":this.parseAC3PES(i,t)}i.pesData=null}else null!=s&&s.size&&k.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=s;o&&(t=ir(o))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=o},_r.demuxSampleAes=function(e,t,i){return e=this.demux(e,i,!0,!this.config.progressive),i=this.sampleAes=new zn(this.observer,this.config,t),this.decrypt(e,i)},_r.decrypt=function(e,t){return new Promise((function(i){var n=e.audioTrack,r=e.videoTrack;n.samples&&"aac"===n.segmentCodec?t.decryptAacSamples(n.samples,0,(function(){r.samples?t.decryptAvcSamples(r.samples,0,0,(function(){i(e)})):i(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(function(){i(e)}))}))},_r.destroy=function(){this._duration=0},_r.parseAACPES=function(e,t){var i,n,r=0,a=this.aacOverFlow,s=t.data;for(a&&(this.aacOverFlow=null,o=a.missing,l=a.sample.unit.byteLength,-1===o?s=Be(a.sample.unit,s):(l-=o,a.sample.unit.set(s.subarray(0,o),l),e.samples.push(a.sample),r=a.missing)),i=r,n=s.length;i<n-1&&!mn(s,i);i++);if(i!==r){var o=i<n-1,l=o?"AAC PES did not start with ADTS header,offset:"+i:"No ADTS header found in AAC PES";if(r=new Error(l),k.warn("parsing error: "+l),this.observer.emit(w.ERROR,w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,fatal:!1,levelRetry:o,error:r,reason:l}),!o)return}if(gn(e,this.observer,s,i,this.audioCodec),void 0!==t.pts)h=t.pts;else{if(!a)return void k.warn("[tsdemuxer]: AAC PES unknown PTS");r=_n(e.samplerate);var h=a.sample.pts+r}for(var u,d=0;i<n;){if(i+=(u=yn(e,s,i,h,d)).length,u.missing){this.aacOverFlow=u;break}for(d++;i<n-1&&!mn(s,i);i++);}},_r.parseMPEGPES=function(e,t){var i=t.data,n=i.length,r=0,a=0,s=t.pts;if(void 0!==s)for(;a<n;)if(xn(i,a)){var o=kn(e,i,a,s,r);if(!o)break;a+=o.length,r++}else a++;else k.warn("[tsdemuxer]: MPEG PES unknown PTS")},_r.parseAC3PES=function(e,t){var i=t.data,n=t.pts;if(void 0!==n)for(var r,a=i.length,s=0,o=0;o<a&&0<(r=Un(e,i,o,n,s++));)o+=r;else k.warn("[tsdemuxer]: AC3 PES unknown PTS")},_r.parseID3PES=function(e,t){void 0!==t.pts?(t=s({},t,{type:this._videoTrack?Pt:kt,duration:Number.POSITIVE_INFINITY}),e.samples.push(t)):k.warn("[tsdemuxer]: ID3 PES unknown PTS")},Vn=Qn,o(cr,nr=rr),(_r=cr.prototype).resetInitSegment=function(e,t,i,n){nr.prototype.resetInitSegment.call(this,e,t,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:n,inputTimeScale:9e4,dropped:0}},cr.probe=function(e){if(e){var t=ce(e,0),i=(null==t?void 0:t.length)||0;if(!(t&&11===e[i]&&119===e[i+1]&&void 0!==fe(t)&&Mn(e,i)<=16))for(var n=e.length;i<n;i++)if(function(e,t){var i;if(t+1<e.length&&Dn(e,t))return i=4,(t+=i=null!=(t=Pn(e,t))&&t.frameLength?t.frameLength:i)===e.length||xn(e,t)}(e,i))return k.log("MPEG Audio sync word found !"),!0}return!1},_r.canParse=function(e,t){return Dn(e,t)&&4<=e.length-t},_r.appendFrame=function(e,t,i){if(null!==this.basePTS)return kn(e,t,i,this.basePTS,this.frameIndex)};var nr,rr=cr,ar=(dr.getSilentFrame=function(e,t){return"mp4a.40.2"===e?1===t?new Uint8Array([0,200,0,128,35,128]):2===t?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):void 0:1===t?new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):2===t||3===t?new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):void 0},dr),sr=(ur.prototype.getData=function(){return this.data},ur),or=Math.pow(2,32)-1,lr=(hr.init=function(){for(var e in hr.types={avc1:[],avcC:[],hvc1:[],hvcC:[],av01:[],av1C:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})hr.types.hasOwnProperty(e)&&(hr.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),n=(hr.HDLR_TYPES={video:t,audio:i},t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]),hr.STTS=hr.STSC=hr.STCO=i,hr.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),hr.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),hr.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),hr.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),i=new Uint8Array([105,115,111,109]),new Uint8Array([97,118,99,49])),r=new Uint8Array([0,0,0,1]);hr.FTYP=hr.box(hr.types.ftyp,i,r,i,n),hr.DINF=hr.box(hr.types.dinf,hr.box(hr.types.dref,t))},hr.box=function(e){for(var t=8,i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=n.length,s=a;a--;)t+=n[a].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),a=0,t=8;a<s;a++)o.set(n[a],t),t+=n[a].byteLength;return o},hr.hdlr=function(e){return hr.box(hr.types.hdlr,hr.HDLR_TYPES[e])},hr.mdat=function(e){return hr.box(hr.types.mdat,e)},hr.mdhd=function(e,t){t*=e;var i=Math.floor(t/(1+or));return t=Math.floor(t%(1+or)),hr.box(hr.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,85,196,0,0]))},hr.mdia=function(e){return hr.box(hr.types.mdia,hr.mdhd(e.timescale,e.duration),hr.hdlr(e.type),hr.minf(e))},hr.mfhd=function(e){return hr.box(hr.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},hr.minf=function(e){return"audio"===e.type?hr.box(hr.types.minf,hr.box(hr.types.smhd,hr.SMHD),hr.DINF,hr.stbl(e)):hr.box(hr.types.minf,hr.box(hr.types.vmhd,hr.VMHD),hr.DINF,hr.stbl(e))},hr.moof=function(e,t,i){return hr.box(hr.types.moof,hr.mfhd(e),hr.traf(i,t))},hr.moov=function(e){for(var t=e.length,i=[];t--;)i[t]=hr.trak(e[t]);return hr.box.apply(null,[hr.types.moov,hr.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(hr.mvex(e)))},hr.mvex=function(e){for(var t=e.length,i=[];t--;)i[t]=hr.trex(e[t]);return hr.box.apply(null,[hr.types.mvex].concat(i))},hr.mvhd=function(e,t){t*=e;var i=Math.floor(t/(1+or));return t=Math.floor(t%(1+or)),e=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),hr.box(hr.types.mvhd,e)},hr.sdtp=function(e){for(var t,i=e.samples||[],n=new Uint8Array(4+i.length),r=0;r<i.length;r++)t=i[r].flags,n[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return hr.box(hr.types.sdtp,n)},hr.stbl=function(e){return hr.box(hr.types.stbl,hr.stsd(e),hr.box(hr.types.stts,hr.STTS),hr.box(hr.types.stsc,hr.STSC),hr.box(hr.types.stsz,hr.STSZ),hr.box(hr.types.stco,hr.STCO))},hr.avc1=function(e){for(var t,i,n=[],r=[],a=0;a<e.sps.length;a++)i=(t=e.sps[a]).byteLength,n.push(i>>>8&255),n.push(255&i),n=n.concat(Array.prototype.slice.call(t));for(a=0;a<e.pps.length;a++)i=(t=e.pps[a]).byteLength,r.push(i>>>8&255),r.push(255&i),r=r.concat(Array.prototype.slice.call(t));var s=hr.box(hr.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),o=e.width,l=e.height,h=e.pixelRatio[0],u=e.pixelRatio[1];return hr.box(hr.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,hr.box(hr.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),hr.box(hr.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,255&h,u>>24,u>>16&255,u>>8&255,255&u])))},hr.hvc1=function(e){for(var t=new Uint8Array,i=new Uint8Array,n=new Uint8Array,r=e.width,a=e.height,s=(r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>>8&255,255&r,a>>>8&255,255&a,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),0);s<e.vps.length;s++){var o=e.vps[s],l=new Uint8Array(t.length+o.length);l.set(t),l.set(o,t.length),t=l}for(s=0;s<e.sps.length;s++){o=e.sps[s];var h=new Uint8Array(i.length+o.length);h.set(i),h.set(o,i.length),i=h}for(s=0;s<e.pps.length;s++){o=e.pps[s];var u=new Uint8Array(n.length+o.length);u.set(n),u.set(o,n.length),n=u}return a=new sr(t,i,n,e.details),hr.box(hr.types.hvc1,r,hr.box(hr.types.hvcC,a.getData()))},hr.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},hr.audioStsd=function(e){var t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0])},hr.mp4a=function(e){return hr.box(hr.types.mp4a,hr.audioStsd(e),hr.box(hr.types.esds,hr.esds(e)))},hr.mp3=function(e){return hr.box(hr.types[".mp3"],hr.audioStsd(e))},hr.ac3=function(e){return hr.box(hr.types["ac-3"],hr.audioStsd(e),hr.box(hr.types.dac3,e.config))},hr.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?hr.box(hr.types.stsd,hr.STSD,hr.mp3(e)):"ac3"===e.segmentCodec?hr.box(hr.types.stsd,hr.STSD,hr.ac3(e)):hr.box(hr.types.stsd,hr.STSD,hr.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?hr.box(hr.types.stsd,hr.STSD,hr.hvc1(e)):hr.box(hr.types.stsd,hr.STSD,hr.avc1(e))},hr.tkhd=function(e){var t=e.id,i=e.duration*e.timescale,n=e.width,r=(e=e.height,Math.floor(i/(1+or)));return i=Math.floor(i%(1+or)),hr.box(hr.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,e>>8&255,255&e,0,0]))},hr.traf=function(e,t){var i=hr.sdtp(e),n=e.id,r=Math.floor(t/(1+or));return t=Math.floor(t%(1+or)),hr.box(hr.types.traf,hr.box(hr.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),hr.box(hr.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,t>>24,t>>16&255,t>>8&255,255&t])),hr.trun(e,i.length+16+20+8+16+8+8),i)},hr.trak=function(e){return e.duration=e.duration||4294967295,hr.box(hr.types.trak,hr.tkhd(e),hr.mdia(e))},hr.trex=function(e){return e=e.id,hr.box(hr.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},hr.trun=function(e,t){var i,n,r,a,s,o=e.samples||[],l=o.length,h=12+16*l,u=new Uint8Array(h);for(u.set(["video"===e.type?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,(t+=8+h)>>>24&255,t>>>16&255,t>>>8&255,255&t],0),i=0;i<l;i++)n=(s=o[i]).duration,r=s.size,a=s.flags,s=s.cts,u.set([n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,s>>>24&255,s>>>16&255,s>>>8&255,255&s],12+16*i);return hr.box(hr.types.trun,u)},hr.initSegment=function(e){return hr.types||hr.init(),e=hr.moov(e),Be(hr.FTYP,e)},hr);function hr(){}function ur(e,t,i,n){this.data=void 0;var r=23+(5+e.byteLength)+(5+t.byteLength)+(5+i.byteLength);(r=this.data=new Uint8Array(r))[0]=1,r[1]=(3&n.general_profile_space)<<6|(n.general_tier_flag?1:0)<<5|31&n.general_profile_idc,r[2]=n.general_profile_compatibility_flags_1,r[3]=n.general_profile_compatibility_flags_2,r[4]=n.general_profile_compatibility_flags_3,r[5]=n.general_profile_compatibility_flags_4,r[6]=n.general_constraint_indicator_flags_1,r[7]=n.general_constraint_indicator_flags_2,r[8]=n.general_constraint_indicator_flags_3,r[9]=n.general_constraint_indicator_flags_4,r[10]=n.general_constraint_indicator_flags_5,r[11]=n.general_constraint_indicator_flags_6,r[12]=n.general_level_idc,r[13]=240|(3840&n.min_spatial_segmentation_idc)>>8,r[14]=255&n.min_spatial_segmentation_idc,r[15]=252|3&n.parallelismType,r[16]=252|3&n.chroma_format_idc,r[17]=248|7&n.bit_depth_luma_minus8,r[18]=248|7&n.bit_depth_chroma_minus8,r[19]=0,r[20]=0,r[21]=(3&n.constant_frame_rate)<<6|(7&n.num_temporal_layers)<<3|(n.temporal_id_nested?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=255&e.byteLength,r.set(e,28),r[23+(5+e.byteLength)+0]=161,r[23+(5+e.byteLength)+1]=0,r[23+(5+e.byteLength)+2]=1,r[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,r[23+(5+e.byteLength)+4]=255&t.byteLength,r.set(t,23+(5+e.byteLength)+5),r[23+(5+e.byteLength+5+t.byteLength)+0]=162,r[23+(5+e.byteLength+5+t.byteLength)+1]=0,r[23+(5+e.byteLength+5+t.byteLength)+2]=1,r[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&i.byteLength)>>8,r[23+(5+e.byteLength+5+t.byteLength)+4]=255&i.byteLength,r.set(i,23+(5+e.byteLength+5+t.byteLength)+5)}function dr(){}function cr(){return nr.apply(this,arguments)||this}function fr(e,t,i,n){return e=e*t*(i=void 0===i?1:i),(n=void 0!==n&&n)?Math.round(e):e}function pr(e,t){return fr(e,1e3,1/9e4,t=void 0!==t&&t)}lr.types=void 0,lr.HDLR_TYPES=void 0,lr.STTS=void 0,lr.STSC=void 0,lr.STCO=void 0,lr.STSZ=void 0,lr.VMHD=void 0,lr.SMHD=void 0,lr.STSD=void 0,lr.FTYP=void 0,lr.DINF=void 0;var mr=null,gr=null,_r=((_r=yr.prototype).destroy=function(){},_r.resetTimeStamp=function(e){k.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},_r.resetNextTimestamp=function(){k.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},_r.resetInitSegment=function(){k.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},_r.getVideoStartPts=function(e){var t=!1;return e=e.reduce((function(e,i){var n=i.pts-e;return n<-4294967296?(t=!0,vr(e,i.pts)):0<n?e:i.pts}),e[0].pts),t&&k.debug("PTS rollover detected"),e},_r.remux=function(e,t,i,n,r,a,s,o){var l,h,u,d,c,f,p,m=r,g=r,_=-1<e.pid,y=-1<t.pid,v=t.samples.length,A=0<e.samples.length,E=s&&0<v||1<v;return(_&&!A||y&&!E)&&!this.ISGenerated&&!s||(this.ISGenerated||(u=this.generateIS(e,t,r,a)),_=this.isVideoContiguous,s=-1,E&&(s=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!_)&&this.config.forceKeyFrameOnDiscontinuity&&(f=!0,0<s?(k.warn("[mp4-remuxer]: Dropped "+s+" out of "+v+" video samples due to a missing keyframe"),p=this.getVideoStartPts(t.samples),t.samples=t.samples.slice(s),t.dropped+=s,p=g+=(t.samples[0].pts-p)/t.inputTimeScale):-1===s&&(k.warn("[mp4-remuxer]: No keyframe found out of "+v+" video samples"),f=!1)),this.ISGenerated&&(A&&E&&(v=this.getVideoStartPts(t.samples),v=(vr(e.samples[0].pts,v)-v)/t.inputTimeScale,m+=Math.max(0,v),g+=Math.max(0,-v)),A?(e.samplerate||(k.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(e,t,r,a)),h=this.remuxAudio(e,m,this.isAudioContiguous,a,y||E||o===At?g:void 0),E&&(v=h?h.endPTS-h.startPTS:0,t.inputTimeScale||(k.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(e,t,r,a)),l=this.remuxVideo(t,g,_,v))):E&&(l=this.remuxVideo(t,g,_,0)),l)&&(l.firstKeyFrame=s,l.independent=-1!==s,l.firstKeyFramePTS=p)),{audio:h,video:l,initSegment:u,independent:f,text:d=this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(c=Ar(i,r,this._initPTS,this._initDTS)),n.samples.length)?Er(n,r,this._initPTS):d,id3:c}},_r.generateIS=function(e,t,i,n){var r,a,s,o=e.samples,l=t.samples,h=this.typeSupported,u={},d=this._initPTS,c="audio/mp4";if((n=!d||n)&&(s=a=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":h.mpeg?(c="audio/mpeg",e.codec=""):h.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}u.audio={id:"audio",container:c,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&h.mpeg?new Uint8Array(0):lr.initSegment([e]),metadata:{channelCount:e.channelCount,samplerate:e.samplerate,segmentCodec:e.segmentCodec}},n&&(r=e.inputTimeScale,d&&r===d.timescale?n=!1:s=a=o[0].pts-Math.round(r*i))}if(t.sps&&t.pps&&l.length&&(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:lr.initSegment([t]),metadata:{width:t.width,height:t.height}},n)&&(r=t.inputTimeScale,d&&r===d.timescale?n=!1:(o=this.getVideoStartPts(l),t=Math.round(r*i),a=Math.min(a,vr(l[0].dts,o)-t),s=Math.min(s,o-t))),Object.keys(u).length)return this.ISGenerated=!0,n?(this._initPTS={baseTime:s,timescale:r},this._initDTS={baseTime:a,timescale:r}):s=r=void 0,{tracks:u,initPTS:s,timescale:r}},_r.remuxVideo=function(e,t,i,n){var r=e.inputTimeScale,a=e.samples,o=[],l=a.length,h=this._initPTS,u=this.nextAvcDts,d=8,c=this.videoSampleDuration,f=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,m=!1;i&&null!==u||(u=t*r-(a[0].pts-vr(a[0].dts,a[0].pts)));for(var g=h.baseTime*r/h.timescale,_=0;_<l;_++){var y=a[_];y.pts=vr(y.pts-g,u),y.dts=vr(y.dts-g,u),y.dts<a[0<_?_-1:_].dts&&(m=!0)}m&&a.sort((function(e,t){var i=e.dts-t.dts;return e=e.pts-t.pts,i||e})),t=a[0].dts;var v=(h=a[a.length-1].dts-t)?Math.round(h/(l-1)):c||e.inputTimeScale/30;i&&(i=(h=t-u)<-1,(M=v<h)||i)&&(M?k.warn("AVC: "+pr(h,!0)+" ms ("+h+"dts) hole between fragments detected, filling it"):k.warn("AVC: "+pr(-h,!0)+" ms ("+h+"dts) overlapping between fragments detected"),!i||u>=a[0].pts)&&(t=u,M=a[0].pts-h,a[0].dts=t,a[0].pts=M,k.log("Video: First PTS/DTS adjusted: "+pr(M,!0)+"/"+pr(t,!0)+", delta: "+pr(h,!0)+" ms"));for(var A=0,E=0,b=t=Math.max(0,t),C=0;C<l;C++){for(var L=a[C],R=L.units,I=R.length,P=0,D=0;D<I;D++)P+=R[D].data.length;E+=P,A+=I,L.length=P,L.dts=L.dts<b?b++:L.dts,f=Math.min(L.pts,f),p=Math.max(L.pts,p)}i=a[l-1].dts;var x,M=E+4*A+8;try{x=new Uint8Array(M)}catch(e){return void this.observer.emit(w.ERROR,w.ERROR,{type:S.MUX_ERROR,details:T.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:M,reason:"fail allocating video mdat "+M})}var F=new DataView(x.buffer);F.setUint32(0,M),x.set(lr.types.mdat,4);for(var B=!1,O=Number.POSITIVE_INFINITY,U=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY,V=0;V<l;V++){for(var G=a[V],H=G.units,Y=0,W=0,z=H.length;W<z;W++){var Q=(K=H[W]).data,K=K.data.byteLength;F.setUint32(d,K),d+=4,x.set(Q,d),d+=K,Y+=4+K}var J,Z=void 0,q=(V<l-1?(c=a[V+1].dts-G.dts,Z=a[V+1].pts-G.pts):(q=this.config,J=0<V?G.dts-a[V-1].dts:v,Z=0<V?G.pts-a[V-1].pts:v,q.stretchShortVideoTrack&&null!==this.nextAudioPts&&Math.floor(q.maxBufferHole*r)<(q=(n?f+n*r:this.nextAudioPts)-G.pts)?((c=q-J)<0?c=J:B=!0,k.log("[mp4-remuxer]: It is approximately "+q/90+" ms to the next segment; using duration "+c/90+" ms for the last video frame.")):c=J),Math.round(G.pts-G.dts));O=Math.min(O,c),N=Math.max(N,c),U=Math.min(U,Z),j=Math.max(j,Z),o.push(new wr(G.key,c,Y,q))}if(o.length)if(mr)mr<70&&((h=o[0].flags).dependsOn=2,h.isNonSync=0);else if(gr&&j-U<N-O&&v/N<.025&&0===o[0].cts){k.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var X=t,$=0,ee=o.length;$<ee;$++){var te,ie=X+o[$].duration,ne=X+o[$].cts;$<ee-1?(te=ie+o[$+1].cts,o[$].duration=te-ne):o[$].duration=$?o[$-1].duration:v,o[$].cts=0,X=ie}}return this.nextAvcDts=u=i+(c=B||!c?v:c),this.videoSampleDuration=c,this.isVideoContiguous=!0,M={data1:lr.moof(e.sequenceNumber++,t,s({},e,{samples:o})),data2:x,startPTS:f/r,endPTS:(p+c)/r,startDTS:t/r,endDTS:u/r,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped},e.samples=[],e.dropped=0,M},_r.getSamplesPerFrame=function(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}},_r.remuxAudio=function(e,t,i,n,r){var a=e.inputTimeScale,o=a/(e.samplerate||a),l=this.getSamplesPerFrame(e),h=l*o,u=this._initPTS,d="mp3"===e.segmentCodec&&this.typeSupported.mpeg,c=[],f=void 0!==r,p=e.samples,m=d?0:8,g=this.nextAudioPts||-1,_=t*a,y=u.baseTime*a/u.timescale;if(this.isAudioContiguous=i=i||p.length&&0<g&&(n&&Math.abs(_-g)<9e3||Math.abs(vr(p[0].pts-y,_)-g)<20*h),p.forEach((function(e){e.pts=vr(e.pts-y,_)})),!i||g<0){if(!(p=p.filter((function(e){return 0<=e.pts}))).length)return;g=0===r?0:n&&!f?Math.max(0,_):p[0].pts}if("aac"===e.segmentCodec)for(var v=this.config.maxAudioFramesDrift,A=0,E=g;A<p.length;A++){var b=p[A],C=b.pts,L=C-E,R=Math.abs(1e3*L/a);if(L<=-v*h&&f)0===A&&(k.warn("Audio frame @ "+(C/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*L/a)+" ms."),this.nextAudioPts=g=E=C);else if(v*h<=L&&R<1e4&&f){var I=Math.round(L/h);(E=C-I*h)<0&&(I--,E+=h),0===A&&(this.nextAudioPts=g=E),k.warn("[mp4-remuxer]: Injecting "+I+" audio frame @ "+(E/a).toFixed(3)+"s due to "+Math.round(1e3*L/a)+" ms gap.");for(var P=0;P<I;P++)ar.getSilentFrame(e.manifestCodec||e.codec,e.channelCount)||(k.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),b.unit.subarray()),E+=h,A++}b.pts=E,E+=h}for(var D,x=null,M=null,F=0,B=p.length;B--;)F+=p[B].unit.byteLength;for(var O=0,U=p.length;O<U;O++){var N=(j=p[O]).unit,j=j.pts;if(null!==M)c[O-1].duration=Math.round((j-M)/o);else{if(x=j=i&&"aac"===e.segmentCodec?g:j,!(0<F))return;F+=m;try{D=new Uint8Array(F)}catch(e){return void this.observer.emit(w.ERROR,w.ERROR,{type:S.MUX_ERROR,details:T.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:F,reason:"fail allocating audio mdat "+F})}d||(new DataView(D.buffer).setUint32(0,F),D.set(lr.types.mdat,4))}D.set(N,m),m+=N=N.byteLength,c.push(new wr(!0,l,N,0)),M=j}if(t=c.length)return this.nextAudioPts=g=M+o*c[c.length-1].duration,n={data1:d?new Uint8Array(0):lr.moof(e.sequenceNumber++,x/o,s({},e,{samples:c})),data2:D,startPTS:u=x/a,endPTS:r=g/a,startDTS:u,endDTS:r,type:"audio",hasAudio:!0,hasVideo:!(e.samples=[]),nb:t},this.isAudioContiguous=!0,n},_r.remuxEmptyAudio=function(e,t,i,n){var r=e.inputTimeScale,a=r/(e.samplerate||r),s=this.nextAudioPts,o=9e4*(o=this._initDTS).baseTime/o.timescale,l=(null!==s?s:n.startDTS*r)+o,h=(s=n.endDTS*r+o,1024*a),u=Math.ceil((s-l)/h),d=ar.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(k.warn("[mp4-remuxer]: remux empty Audio"),d){for(var c=[],f=0;f<u;f++){var p=l+f*h;c.push({unit:d,pts:p,dts:p})}return e.samples=c,this.remuxAudio(e,t,i,!1)}k.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},yr);function yr(e,t,i,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,null===mr&&(e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),mr=e?parseInt(e[1]):0),null===gr&&(t=navigator.userAgent.match(/Safari\/(\d+)/i),gr=t?parseInt(t[1]):0)}function vr(e,t){var i;if(null!==t)for(i=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=i;return e}function Ar(e,t,i,n){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,s=0;s<r;s++){var o=e.samples[s];o.pts=vr(o.pts-i.baseTime*a/i.timescale,t*a)/a,o.dts=vr(o.dts-n.baseTime*a/n.timescale,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function Er(e,t,i){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,a=0;a<n;a++){var s=e.samples[a];s.pts=vr(s.pts-i.baseTime*r/i.timescale,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts}));var o=e.samples;return e.samples=[],{samples:o}}}var br,wr=function(e,t,i,n){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=i,this.cts=n,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}},Sr=((Sr=Tr.prototype).destroy=function(){},Sr.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},Sr.resetNextTimestamp=function(){this.lastEndTime=null},Sr.resetInitSegment=function(e,t,i,n){var r;this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(((t=e)&&n&&(r=n.keyId)&&n.isCommonEncryption&&Pe(t,["moov","trak"]).forEach((function(e){e=Pe(e,["mdia","minf","stbl","stsd"])[0].subarray(8);var t=Pe(e,["enca"]),i=0<t.length;(t=i?t:Pe(e,["encv"])).forEach((function(e){Pe(i?e.subarray(28):e.subarray(78),["sinf"]).forEach((function(e){var t;(e=Fe(e))&&!(t=e.subarray(8,24)).some((function(e){return 0!==e}))&&(k.log("[eme] Patching keyId in 'enc"+(i?"a":"v")+">sinf>>tenc' box: "+be(t)+" -> "+be(r)),e.set(r,8))}))}))})),t)),this.emitInitSegment=!0},Sr.generateInitSegment=function(e){var t,i,n=this.audioCodec,r=this.videoCodec;null!=e&&e.byteLength?((t=this.initData=De(e)).audio&&(n=Cr(t.audio,N)),t.video&&(r=Cr(t.video,j)),i={},t.audio&&t.video?i.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:e,id:"main"}:t.audio?i.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:t.video?i.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:k.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i):(this.initTracks=void 0,this.initData=void 0)},Sr.remux=function(e,t,i,n,r,a){var s,o,l,h,u,d,c,f,p,m,g,_=this.initPTS,y=this.lastEndTime,v={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0};return null!=(b(y)||(y=this.lastEndTime=r||0),t=t.samples)&&t.length&&(s={initPTS:void 0,timescale:1},null!=(o=this.initData)&&o.length||(this.generateInitSegment(t),o=this.initData),null!=o&&o.length?(this.emitInitSegment&&(s.tracks=this.initTracks,this.emitInitSegment=!1),l=function(e,t){for(var i=0,n=0,r=0,a=Pe(e,["moof","traf"]),s=0;s<a.length;s++){var o=a[s],l=Pe(o,["tfhd"])[0],h=t[Re(l,4)];if(h){var u=h.default,d=Re(l,0)|(null==u?void 0:u.flags),c=null==u?void 0:u.duration;8&d&&(c=Re(l,2&d?12:8));for(var f=h.timescale||9e4,p=Pe(o,["trun"]),m=0;m<p.length;m++)!(i=function(e){var t=Re(e,0),i=8;1&t&&(i+=4),4&t&&(i+=4);for(var n=0,r=Re(e,4),a=0;a<r;a++)256&t&&(n+=Re(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return n}(p[m]))&&c&&(i=c*Re(p[m],4)),h.type===j?n+=i/f:h.type===N&&(r+=i/f)}}if(0!==n||0!==r)return n||r;for(var g=0,_=Pe(e,["sidx"]),y=0;y<_.length;y++){var v=function(e){var t=[],i=e[0],n=8,r=Re(e,n),a=e.length+0,s=Le(e,n=(n+=4)+(0===i?8:16)+2);n+=2;for(var o=0;o<s;o++){var l=n,h=Re(e,l),u=(l+=4,2147483647&h);if(1==(2147483648&h)>>>31)return k.warn("SIDX has hierarchical references (not supported)"),null;h=Re(e,l),l+=4,t.push({referenceSize:u,subsegmentDuration:h,info:{duration:h/r,start:a,end:a+u-1}}),a+=u,n=l+=4}return{earliestPresentationTime:0,timescale:r,version:i,referencesCount:s,references:t}}(_[y]);null!=v&&v.references&&(g+=v.references.reduce((function(e,t){return e+t.info.duration||0}),0))}return g}(t,o),u=o,h=Pe(t,["moof","traf"]).reduce((function(e,t){var i=Pe(t,["tfdt"])[0],n=i[0];return t=Pe(t,["tfhd"]).reduce((function(e,t){if(t=Re(t,4),t=u[t]){var r=Re(i,4);if(1===n){if(r===we)return k.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;r=r*(1+we)+Re(i,8)}if(r/=t.timescale||9e4,isFinite(r)&&(null===e||r<e))return r}return e}),null),null!==t&&isFinite(t)&&(null===e||t<e)?t:e}),null),c=h=null===h?r:h,g=r,(null===(d=_)||(m=Math.max(l,1),c-=d.baseTime/d.timescale,Math.abs(c-g)>m)||s.timescale!==_.timescale&&a)&&(s.initPTS=h-r,_&&1===_.timescale&&k.warn("Adjusting initPTS by "+(s.initPTS-_.baseTime)),this.initPTS=_={baseTime:s.initPTS,timescale:1}),c=(d=e?h-_.baseTime/_.timescale:y)+l,f=o,p=_.baseTime/_.timescale,Pe(t,["moof","traf"]).forEach((function(e){Pe(e,["tfhd"]).forEach((function(t){var i;t=Re(t,4),(t=f[t])&&(i=t.timescale||9e4,Pe(e,["tfdt"]).forEach((function(e){var t=e[0],n=Re(e,4);0===t?(n-=p*i,ke(e,4,n=Math.max(n,0))):(n=(n=(n*=Math.pow(2,32))+Re(e,8))-p*i,n=Math.max(n,0),t=Math.floor(n/(1+we)),n=Math.floor(n%(1+we)),ke(e,4,t),ke(e,8,n))})))}))})),0<l?this.lastEndTime=c:(k.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp()),g="",(m=!!o.audio)&&(g+="audio"),(a=!!o.video)&&(g+="video"),v.audio="audio"===(e={data1:t,startPTS:d,startDTS:d,endPTS:c,endDTS:c,type:g,hasAudio:m,hasVideo:a,nb:1,dropped:0}).type?e:void 0,v.video="audio"!==e.type?e:void 0,v.initSegment=s,v.id3=Ar(i,r,_,_),n.samples.length&&(v.text=Er(n,r,_))):k.warn("[passthrough-remuxer.ts]: Failed to generate initSegment.")),v},Tr);function Tr(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}function Cr(e,t){return(e=null==e?void 0:e.codec)&&4<e.length?e:t===N?"ec-3"===e||"ac-3"===e||"alac"===e?e:"fLaC"===e||"Opus"===e?tt(e):(k.warn('Unhandled audio codec "'+e+'" or audio object type'),"mp4a.40.5"):(k.warn('Unhandled video codec "'+e+'"'),"hvc1"===e||"hev1"===e?"hvc1.1.6.L120.90":"av01"===e?"av01.0.04M.08":"avc1.42e01e")}try{br=self.performance.now.bind(self.performance)}catch(o){k.debug("Unable to use Performance API on this environment"),br="undefined"!=typeof self&&self.Date.now}var Lr,Rr,Ir=[{demux:bn,remux:Sr},{demux:Vn,remux:_r},{demux:An,remux:_r},{demux:rr,remux:_r}],kr=(Ir.splice(2,0,{demux:Bn,remux:_r}),(bn=Dr.prototype).configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},bn.push=function(e,t,i,n){var r=this,a=i.transmuxing,s=(a.executeStart=br(),e=new Uint8Array(e),this.currentTransmuxState),o=this.transmuxConfig,l=(s=(n&&(this.currentTransmuxState=n),n=n||s).contiguous,n.discontinuity),h=n.trackSwitch,u=n.accurateTimeOffset,d=n.timeOffset,c=(n=n.initSegmentChange,o.audioCodec),f=o.videoCodec,p=o.defaultInitPts,m=o.duration,g=(o=o.initSegmentData,g=null,g=0<e.byteLength&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method?t:g);if(g&&"AES-128"===g.method){var _=this.getDecrypter();if(!_.isSync())return this.decryptionPromise=_.webCryptoDecrypt(e,g.key.buffer,g.iv.buffer).then((function(e){return e=r.push(e,null,i),r.decryptionPromise=null,e})),this.decryptionPromise;var y=_.softwareDecrypt(e,g.key.buffer,g.iv.buffer);if(!(y=-1<i.part?_.flush():y))return a.executeEnd=br(),Pr(i);e=new Uint8Array(y)}return(_=this.needsProbing(l,h))&&(y=this.configureTransmuxer(e))?(k.warn("[transmuxer] "+y.message),this.observer.emit(w.ERROR,w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,fatal:!1,error:y,reason:y.message}),a.executeEnd=br(),Pr(i)):((l||h||n||_)&&this.resetInitSegment(o,c,f,m,t),(l||n||_)&&this.resetInitialTimestamp(p),s||this.resetContiguity(),y=this.transmux(e,g,d,u,i),(h=this.currentTransmuxState).contiguous=!0,h.discontinuity=!1,h.trackSwitch=!1,a.executeEnd=br(),y)},bn.flush=function(e){var t,i=this,n=e.transmuxing,r=(n.executeStart=br(),this.decrypter),a=this.currentTransmuxState,s=this.decryptionPromise;return s?s.then((function(){return i.flush(e)})):(t=[],s=a.timeOffset,r&&(a=r.flush())&&t.push(this.push(a,null,e)),r=this.demuxer,a=this.remuxer,r&&a?xr(a=r.flush(s))?a.then((function(n){return i.flushRemux(t,n,e),t})):(this.flushRemux(t,a,e),t):(n.executeEnd=br(),[Pr(e)]))},bn.flushRemux=function(e,t,i){var n=t.audioTrack,r=t.videoTrack,a=t.id3Track,s=(t=t.textTrack,(o=this.currentTransmuxState).accurateTimeOffset),o=o.timeOffset;k.log("[transmuxer.ts]: Flushed fragment "+i.sn+(-1<i.part?" p: "+i.part:"")+" of level "+i.level),n=this.remuxer.remux(n,r,a,t,o,s,!0,this.id),e.push({remuxResult:n,chunkMeta:i}),i.transmuxing.executeEnd=br()},bn.resetInitialTimestamp=function(e){var t=this.demuxer,i=this.remuxer;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))},bn.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},bn.resetInitSegment=function(e,t,i,n,r){var a=this.demuxer,s=this.remuxer;a&&s&&(a.resetInitSegment(e,t,i,n),s.resetInitSegment(e,t,i,r))},bn.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},bn.transmux=function(e,t,i,n,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,n,r):this.transmuxUnencrypted(e,i,n,r)},bn.transmuxUnencrypted=function(e,t,i,n){var r=(e=this.demuxer.demux(e,t,!1,!this.config.progressive)).audioTrack,a=e.videoTrack,s=e.id3Track;return e=e.textTrack,{remuxResult:this.remuxer.remux(r,a,s,e,t,i,!1,this.id),chunkMeta:n}},bn.transmuxSampleAes=function(e,t,i,n,r){var a=this;return this.demuxer.demuxSampleAes(e,t,i).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,n,!1,a.id),chunkMeta:r}}))},bn.configureTransmuxer=function(e){for(var t,i,n=this.config,r=this.observer,a=this.typeSupported,s=this.vendor,o=0,l=Ir.length;o<l;o++)if(null!=(i=Ir[o].demux)&&i.probe(e)){t=Ir[o];break}if(!t)return new Error("Failed to find demuxer by probing fragment data");var h=this.demuxer,u=this.remuxer,d=t.remux,c=t.demux;u&&u instanceof d||(this.remuxer=new d(r,n,a,s)),h&&h instanceof c||(this.demuxer=new c(r,n,a),this.probe=c.probe)},bn.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},bn.getDecrypter=function(){return this.decrypter||(this.decrypter=new Vi(this.config))},Dr),Pr=function(e){return{remuxResult:{},chunkMeta:e}};function Dr(e,t,i,n,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.vendor=n,this.id=r}function xr(e){return"then"in e&&e.then instanceof Function}function Mr(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=n,this.defaultInitPts=r||null}function Fr(e,t,i,n,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=n,this.timeOffset=r,this.initSegmentChange=a}function Br(){}function Or(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function Ur(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");return i=new Or(i,n||e,r),n=Rr?Rr+t:t,e._events[n]?e._events[n].fn?e._events[n]=[e._events[n],i]:e._events[n].push(i):(e._events[n]=i,e._eventsCount++),e}function Nr(e,t){0==--e._eventsCount?e._events=new Br:delete e._events[t]}function jr(){this._events=new Br,this._eventsCount=0}Vn=Sr={exports:{}},Lr=Object.prototype.hasOwnProperty,Rr="~",Object.create&&(Br.prototype=Object.create(null),(new Br).__proto__||(Rr=!1)),jr.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)Lr.call(e,t)&&i.push(Rr?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},jr.prototype.listeners=function(e){e=Rr?Rr+e:e;var t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,r=new Array(n);i<n;i++)r[i]=t[i].fn;return r},jr.prototype.listenerCount=function(e){return e=Rr?Rr+e:e,(e=this._events[e])?e.fn?1:e.length:0},jr.prototype.emit=function(e,t,i,n,r,a){var s=Rr?Rr+e:e;if(!this._events[s])return!1;var o,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,r),!0;case 6:return l.fn.call(l.context,t,i,n,r,a),!0}for(c=1,o=new Array(h-1);c<h;c++)o[c-1]=arguments[c];l.fn.apply(l.context,o)}else for(var u,d=l.length,c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,i);break;case 4:l[c].fn.call(l[c].context,t,i,n);break;default:if(!o)for(u=1,o=new Array(h-1);u<h;u++)o[u-1]=arguments[u];l[c].fn.apply(l[c].context,o)}return!0},jr.prototype.on=function(e,t,i){return Ur(this,e,t,i,!1)},jr.prototype.once=function(e,t,i){return Ur(this,e,t,i,!0)},jr.prototype.removeListener=function(e,t,i,n){if(e=Rr?Rr+e:e,this._events[e])if(t){var r=this._events[e];if(r.fn)r.fn!==t||n&&!r.once||i&&r.context!==i||Nr(this,e);else{for(var a=0,s=[],o=r.length;a<o;a++)(r[a].fn!==t||n&&!r[a].once||i&&r[a].context!==i)&&s.push(r[a]);s.length?this._events[e]=1===s.length?s[0]:s:Nr(this,e)}}else Nr(this,e);return this},jr.prototype.removeAllListeners=function(e){return e?(e=Rr?Rr+e:e,this._events[e]&&Nr(this,e)):(this._events=new Br,this._eventsCount=0),this},jr.prototype.off=jr.prototype.removeListener,jr.prototype.addListener=jr.prototype.on,jr.prefixed=Rr,Vn.exports=jr.EventEmitter=jr;var Vr=m(Sr.exports);function Gr(e,t){var i,n,r;return!!((i=t.remuxResult).audio||i.video||i.text||i.id3||i.initSegment)&&(i=[],n=(r=t.remuxResult).audio,r=r.video,n&&Hr(i,n),r&&Hr(i,r),e.postMessage({event:"transmuxComplete",data:t},i),!0)}function Hr(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function Yr(e,t,i){t.reduce((function(t,i){return Gr(e,i)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:i})}{function Ho(){for(var e in k)!function(e){k[e]=function(t){Qr("workerLog",{logType:e,message:t})}}(e)}var Wr,zr,Qr;void 0!==i&&i&&(Wr=self,zr=new Vr,Qr=function(e,t){Wr.postMessage({event:e,data:t})},zr.on(w.FRAG_DECRYPTED,Qr),zr.on(w.ERROR,Qr),Wr.addEventListener("message",(function(e){var t=e.data;switch(t.cmd){case"init":var i=JSON.parse(t.config);Wr.transmuxer=new kr(zr,t.typeSupported,i,t.vendor,t.id),I(i.debug,t.id),Ho(),Qr("init",null);break;case"configure":Wr.transmuxer.configure(t.config);break;case"demux":xr(i=Wr.transmuxer.push(t.data,t.decryptdata,t.chunkMeta,t.state))?(Wr.transmuxer.async=!0,i.then((function(e){Gr(Wr,e)})).catch((function(e){Qr(w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})}))):(Wr.transmuxer.async=!1,Gr(Wr,i));break;case"flush":var n=t.chunkMeta;xr(i=Wr.transmuxer.flush(n))||Wr.transmuxer.async?(i=xr(i)?i:Promise.resolve(i)).then((function(e){Yr(Wr,e,n)})).catch((function(e){Qr(w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,chunkMeta:t.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})})):Yr(Wr,i,n)}})))}var Kr,Jr,Zr=Ke()||{isTypeSupported:function(){return!1}},qr=((An=ea.prototype).resetWorker=function(){var e,t;this.workerContext&&(e=(t=this.workerContext).worker,(t=t.objectURL)&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null)},An.destroy=function(){this.workerContext?(this.resetWorker(),this.onwmsg=void 0):(e=this.transmuxer)&&(e.destroy(),this.transmuxer=null);var e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},An.push=function(e,t,i,n,r,a,s,o,l,h){var u=this,d=(l.transmuxing.start=self.performance.now(),this.transmuxer),c=(a||r).start,f=r.decryptdata,p=this.frag,m=!(p&&r.cc===p.cc),g=!(p&&l.level===p.level),_=p?l.sn-p.sn:-1,y=this.part?l.part-this.part.index:-1,v=0==_&&1<l.id&&l.id===(null==p?void 0:p.stats.chunkCount),A=(v=!g&&(1==_||0==_&&(1==y||v&&y<=0)),self.performance.now());_=new Fr(m,v,o,g,c,((g||_||0===r.stats.parsing.start)&&(r.stats.parsing.start=A),!a||!y&&v||(a.stats.parsing.start=A),A=!(p&&(null==(_=r.initSegment)?void 0:_.url)===(null==(y=p.initSegment)?void 0:y.url)))),v&&!m&&!A||(k.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+g+"\n        contiguous: "+v+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+c+"\n        initSegmentChange: "+A),p=new Mr(i,n,t,s,h),this.configureTransmuxer(p)),this.frag=r,this.part=a,this.workerContext?this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:f,chunkMeta:l,state:_},e instanceof ArrayBuffer?[e]:[]):d&&(xr(y=d.push(e,f,l,_))?(d.async=!0,y.then((function(e){u.handleTransmuxComplete(e)})).catch((function(e){u.transmuxerError(e,l,"transmuxer-interface push error")}))):(d.async=!1,this.handleTransmuxComplete(y)))},An.flush=function(e){var t,i=this,n=(e.transmuxing.start=self.performance.now(),this.transmuxer);this.workerContext?this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e}):n&&(xr(t=n.flush(e))||n.async?(t=xr(t)?t:Promise.resolve(t)).then((function(t){i.handleFlushResult(t,e)})).catch((function(t){i.transmuxerError(t,e,"transmuxer-interface flush error")})):this.handleFlushResult(t,e))},An.transmuxerError=function(e,t,i){this.hls&&(this.error=e,this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:i}))},An.handleFlushResult=function(e,t){var i=this;e.forEach((function(e){i.handleTransmuxComplete(e)})),this.onFlush(t)},An.onWorkerMessage=function(e){var t=e.data,i=this.hls;switch(t.event){case"init":var n=null==(n=this.workerContext)?void 0:n.objectURL;n&&self.URL.revokeObjectURL(n);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":k[t.data.logType]&&k[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,i.trigger(t.event,t.data)}},An.configureTransmuxer=function(e){var t=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)},An.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},ea);function Xr(e){return(e=Kr.call(this,e,"[audio-track-controller]")||this).tracks=[],e.groupId=null,e.tracksInGroup=[],e.trackId=-1,e.currentTrack=null,e.selectDefaultTrack=!0,e.registerListeners(),e}function $r(e,t,i){return(e=Jr.call(this,e,t,i,"[audio-stream-controller]",At)||this).videoBuffer=null,e.videoTrackCC=-1,e.waitingVideoCC=-1,e.bufferedTrack=null,e.switchingTrack=null,e.trackId=-1,e.waitingData=null,e.mainDetails=null,e.bufferFlushed=!1,e.cachedTrackLoadedData=null,e._registerListeners(),e}function ea(e,i,n,r){function a(e,t){(t=t||{}).frag=u.frag,t.id=u.id,e===w.ERROR&&(u.error=t.error),u.hls.trigger(e,t)}var s,o,l,h,u=this,d=(this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,e.config);if(this.hls=e,this.id=i,this.useWorker=!!d.enableWorker,this.onTransmuxComplete=n,this.onFlush=r,this.observer=new Vr,this.observer.on(w.FRAG_DECRYPTED,a),this.observer.on(w.ERROR,a),e={mpeg:Zr.isTypeSupported("audio/mpeg"),mp3:Zr.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:Zr.isTypeSupported('audio/mp4; codecs="ac-3"')},n=navigator.vendor,!this.useWorker||"undefined"==typeof Worker||(d.workerPath,0))this.transmuxer=new kr(this.observer,e,d,n,i);else try{d.workerPath?(k.log("loading Web Worker "+d.workerPath+' for "'+i+'"'),this.workerContext=(l=d.workerPath,h=new self.URL(l,self.location.href).href,{worker:new self.Worker(h),scriptURL:h})):(k.log('injecting Web Worker for "'+i+'"'),this.workerContext=(s=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+t.toString()+")(true);"],{type:"text/javascript"}),o=self.URL.createObjectURL(s),{worker:new self.Worker(o),objectURL:o})),this.onwmsg=function(e){return u.onWorkerMessage(e)};var c=this.workerContext.worker;c.addEventListener("message",this.onwmsg),c.onerror=function(e){e=new Error(e.message+"  ("+e.filename+":"+e.lineno+")"),d.enableWorker=!1,k.warn('Error in "'+i+'" Web Worker, fallback to inline'),u.hls.trigger(w.ERROR,{type:S.OTHER_ERROR,details:T.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:e})},c.postMessage({cmd:"init",typeSupported:e,vendor:n,id:i,config:JSON.stringify(d)})}catch(r){k.warn('Error setting up "'+i+'" Web Worker, fallback to inline',r),this.resetWorker(),this.error=null,this.transmuxer=new kr(this.observer,e,d,n,i)}}function ta(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(!function(e,t){var i=e["STABLE-RENDITION-ID"];return i?i===t["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((function(i){return e[i]!==t[i]}))}(e[i].attrs,t[i].attrs))return;return 1}}o($r,Jr=hi),(rr=$r.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},rr._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(w.ERROR,this.onError,this),e.on(w.BUFFER_RESET,this.onBufferReset,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this),e.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(w.ERROR,this.onError,this),e.off(w.BUFFER_RESET,this.onBufferReset,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this),e.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr.onInitPtsFound=function(e,t){var i=t.frag,n=t.id,r=t.initPTS;t=t.timescale,"main"===n&&(n=i.cc,this.initPTS[i.cc]={baseTime:r,timescale:t},this.log("InitPTS for cc: "+n+" found from main: "+r),this.videoTrackCC=n,this.state===Xi)&&this.tick()},rr.startLoad=function(e){var t;this.levels?(t=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),0<t&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=Hi):(this.loadedmetadata=!1,this.state=Qi),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.startPosition=e,this.state=Gi)},rr.doTick=function(){switch(this.state){case Hi:this.doTickIdle();break;case Qi:var e=this.levels,t=this.trackId;if(t=null==e||null==(e=e[t])?void 0:e.details){if(this.waitForCdnTuneIn(t))break;this.state=Xi}break;case zi:e=performance.now(),(!(t=this.retryDate)||t<=e||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Hi);break;case Xi:var i,n;(e=this.waitingData)?(t=e.frag,i=e.part,n=e.cache,e=e.complete,void 0!==this.initPTS[t.cc]?(this.waitingData=null,this.waitingVideoCC=-1,this.state=Wi,i={frag:t,part:i,payload:n.flush(),networkDetails:null},this._handleFragmentLoadProgress(i),e&&Jr.prototype._handleFragmentLoadComplete.call(this,i)):this.videoTrackCC!==this.waitingVideoCC?(this.log("Waiting fragment cc ("+t.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment()):(n=this.getLoadPosition(),ri((e=Si.bufferInfo(this.mediaBuffer,n,this.config.maxBufferHole)).end,this.config.maxFragLookUpTolerance,t)<0&&(this.log("Waiting fragment cc ("+t.cc+") @ "+t.start+" cancelled because another fragment at "+e.end+" is needed"),this.clearWaitingFragment()))):this.state=Hi}this.onTickEnd()},rr.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Hi)},rr.resetLoadingState=function(){this.clearWaitingFragment(),Jr.prototype.resetLoadingState.call(this)},rr.onTickEnd=function(){var e=this.media;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},rr.doTickIdle=function(){var e=this.hls,t=this.levels,i=this.media,n=this.trackId,r=e.config;if(null!=t&&t[n]&&(i||!this.startFragRequested&&r.startFragPrefetch))if(!(t=(r=t[n]).details)||t.live&&this.levelLastLoaded!==n||this.waitForCdnTuneIn(t))this.state=Qi;else if(n=this.mediaBuffer||this.media,this.bufferFlushed&&n&&(this.bufferFlushed=!1,this.afterBufferFlushed(n,N,At)),null!==(n=this.getFwdBufferInfo(n,At))){var a=this.bufferedTrack,s=this.switchingTrack;if(!s&&this._streamEnded(n,t))e.trigger(w.BUFFER_EOS,{type:"audio"}),this.state=Zi;else{e=this.getFwdBufferInfo(this.videoBuffer||this.media,vt);var o=n.len,l=this.getMaxBufferLength(null==e?void 0:e.len),h=t.fragments,u=h[0].start,d=n.end;if(s&&i&&(c=this.getLoadPosition(),a&&s.attrs!==a.attrs&&(d=c),t.PTSKnown)&&c<u&&(n.end>u||n.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=u+.05),!(l<=o&&!s&&d<h[h.length-1].start)){var c=!1;if((a=this.getNextFragment(d,t))&&this.isLoopLoading(a,d)&&(c=!!a.gap,a=this.getNextFragmentLoopLoading(a,t,n,vt,l)),a){if((i=e&&a.start>e.end+t.targetduration)||(null==e||!e.len)&&n.len){if(null===(u=this.getAppendedFrag(a.start,vt)))return;if(c=c||!!u.gap||!!i&&0===e.len,i&&!c||c&&n.nextStart&&n.nextStart<u.end)return}this.loadFragment(a,r,d)}else this.bufferFlushed=!0}}}},rr.getMaxBufferLength=function(e){var t=Jr.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t},rr.onMediaDetaching=function(){this.videoBuffer=null,Jr.prototype.onMediaDetaching.call(this)},rr.onAudioTracksUpdated=function(e,t){t=t.audioTracks,this.resetTransmuxer(),this.levels=t.map((function(e){return new Nt(e)}))},rr.onAudioTrackSwitching=function(e,t){var i=!!t.url,n=(this.trackId=t.id,this.fragCurrent);n&&(n.abortRequests(),this.removeUnbufferedFrags(n.start)),this.resetLoadingState(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.switchingTrack=t,this.state=Hi,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=Gi),this.tick()},rr.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},rr.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(w.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},rr.onAudioTrackLoaded=function(e,t){if(null!=this.mainDetails){var i=this.levels,n=t.details,r=t.id;if(i){this.log("Track "+r+" loaded ["+n.startSN+","+n.endSN+"]"+(n.lastPartSn?"[part-"+n.lastPartSn+"-"+n.lastPartIndex+"]":"")+",duration:"+n.totalduration),i=i[r];var a=0;if(n.live||null!=(s=i.details)&&s.live){var s=this.mainDetails;if(n.fragments[0]||(n.deltaUpdateFailed=!0),n.deltaUpdateFailed||!s)return;a=!i.details&&n.hasProgramDateTime&&s.hasProgramDateTime?(Ii(n,s),n.fragments[0].start):this.alignPlaylists(n,i.details)}i.details=n,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(i.details,a),this.state!==Qi||this.waitForCdnTuneIn(n)||(this.state=Hi),this.tick()}else this.warn("Audio tracks were reset while loading level "+r)}else this.cachedTrackLoadedData=t},rr._handleFragmentLoadProgress=function(e){var t,i,n,r,a=e.frag,s=e.part,o=(e=e.payload,this.config),l=this.trackId,h=this.levels;h?(h=h[l])?(t=h.details)?(o=o.defaultAudioCodec||h.audioCodec||"mp4a.40.2",h=(h=this.transmuxer)||(this.transmuxer=new qr(this.hls,At,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))),i=this.initPTS[a.cc],n=null==(n=a.initSegment)?void 0:n.data,void 0!==i?(r=s?s.index:-1,r=new bi(a.level,a.sn,a.stats.chunkCount,e.byteLength,r,-1!==r),h.push(e,n,o,"",a,s,t.totalduration,!1,r,i)):(this.log("Unknown video PTS for cc "+a.cc+", waiting for video PTS before demuxing audio frag "+a.sn+" of ["+t.startSN+" ,"+t.endSN+"],track "+l),(this.waitingData=this.waitingData||{frag:a,part:s,cache:new en,complete:!1}).cache.push(new Uint8Array(e)),this.waitingVideoCC=this.videoTrackCC,this.state=Xi)):(this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(a.start)):this.warn("Audio track is undefined on fragment load progress"):this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+a.sn+" of level "+a.level+" will not be buffered")},rr._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:Jr.prototype._handleFragmentLoadComplete.call(this,e)},rr.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},rr.onBufferCreated=function(e,t){var i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},rr.onFragBuffered=function(e,t){var i,r=t.frag;t=t.part,r.type===At?this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(t?" p: "+t.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false")):("initSegment"!==r.sn&&(this.fragPrevious=r,i=this.switchingTrack)&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(w.AUDIO_TRACK_SWITCHED,n({},i))),this.fragBufferedComplete(r,t)):this.loadedmetadata||r.type!==vt||(i=this.videoBuffer||this.media)&&Si.getBuffered(i).length&&(this.loadedmetadata=!0)},rr.onError=function(e,t){var i;if(t.fatal)this.state=qi;else switch(t.details){case T.FRAG_GAP:case T.FRAG_PARSING_ERROR:case T.FRAG_DECRYPT_ERROR:case T.FRAG_LOAD_ERROR:case T.FRAG_LOAD_TIMEOUT:case T.KEY_LOAD_ERROR:case T.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(At,t);break;case T.AUDIO_TRACK_LOAD_ERROR:case T.AUDIO_TRACK_LOAD_TIMEOUT:case T.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Qi||(null==(i=t.context)?void 0:i.type)!==_t||(this.state=Hi);break;case T.BUFFER_APPEND_ERROR:case T.BUFFER_FULL_ERROR:t.parent&&"audio"===t.parent&&(t.details===T.BUFFER_APPEND_ERROR?this.resetLoadingState():this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,Jr.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")));break;case T.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},rr.onBufferFlushed=function(e,t){var i;(t=t.type)===N&&(this.bufferFlushed=!0,this.state===Zi&&(this.state=Hi),i=this.mediaBuffer||this.media)&&(this.afterBufferFlushed(i,t,At),this.tick())},rr._handleTransmuxComplete=function(e){var t,i,n,r,a,o,l,h,u=this.hls,d=e.remuxResult,c=(e=e.chunkMeta,this.getCurrentContext(e));c?(t=c.frag,i=c.part,n=(c=c.level).details,r=d.audio,a=d.text,o=d.id3,d=d.initSegment,!this.fragContextChanged(t)&&n?(this.state=Ki,this.switchingTrack&&r&&this.completeAudioSwitch(this.switchingTrack),null!=d&&d.tracks&&(h=t.initSegment||t,this._bufferInitSegment(c,d.tracks,h,e),u.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:h,id:"audio",tracks:d.tracks})),r&&(c=r.startPTS,h=r.endPTS,d=r.startDTS,l=r.endDTS,i&&(i.elementaryStreams[N]={startPTS:c,endPTS:h,startDTS:d,endDTS:l}),t.setElementaryStreamInfo(N,c,h,d,l),this.bufferFragmentData(r,t,i,e)),null!=o&&null!=(c=o.samples)&&c.length&&(h=s({id:"audio",frag:t,details:n},o),u.trigger(w.FRAG_PARSING_METADATA,h)),a&&(d=s({id:"audio",frag:t,details:n},a),u.trigger(w.FRAG_PARSING_USERDATA,d))):this.fragmentTracker.removeFragment(t)):this.resetWhenMissingContext(e)},rr._bufferInitSegment=function(e,t,i,n){var r;this.state===Ki&&(t.video&&delete t.video,r=t.audio)&&(r.id="audio",e=e.audioCodec,this.log("Init audio buffer, container:"+r.container+", codecs[level/parsed]=["+e+"/"+r.codec+"]"),e&&1===e.split(",").length&&(r.levelCodec=e),this.hls.trigger(w.BUFFER_CODECS,t),null!=(e=r.initSegment)&&e.byteLength&&(t={type:"audio",frag:i,part:null,chunkMeta:n,parent:i.type,data:e},this.hls.trigger(w.BUFFER_APPENDING,t)),this.tickImmediate())},rr.loadFragment=function(e,t,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,this.switchingTrack||n===ui||n===di?"initSegment"===e.sn?this._loadInitSegment(e,t):null!=(n=t.details)&&n.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=Xi,(n=this.mainDetails)&&n.fragments[0].start!==t.details.fragments[0].start&&Ii(t.details,n)):(this.startFragRequested=!0,Jr.prototype.loadFragment.call(this,e,t,i)):this.clearTrackerIfNeeded(e)},rr.flushAudioIfNeeded=function(e){var t=this.media,i=null==(i=this.bufferedTrack)?void 0:i.attrs;e=e.attrs,t&&i&&(i.CHANNELS!==e.CHANNELS||i.NAME!==e.NAME||i.LANGUAGE!==e.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),Jr.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)},rr.completeAudioSwitch=function(e){var t=this.hls;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(w.AUDIO_TRACK_SWITCHED,n({},e))},Bn=$r,o(Xr,Kr=ai),(_r=Xr.prototype).registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(w.ERROR,this.onError,this)},_r.unregisterListeners=function(){var e=this.hls;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(w.ERROR,this.onError,this)},_r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,Kr.prototype.destroy.call(this)},_r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},_r.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},_r.onAudioTrackLoaded=function(e,t){var i,n=t.id,r=t.groupId,a=t.details,s=this.tracksInGroup[n];s&&s.groupId===r?(i=s.details,s.details=t.details,this.log("audio-track "+n+' "'+s.name+'" lang:'+s.lang+" group:"+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),n===this.trackId&&this.playlistLoaded(n,t,i)):this.warn("Track with id:"+n+" and group:"+r+" not found in active group "+s.groupId)},_r.onLevelLoading=function(e,t){this.switchLevel(t.level)},_r.onLevelSwitching=function(e,t){this.switchLevel(t.level)},_r.switchLevel=function(e){var t,i;null!=(e=this.hls.levels[e])&&e.audioGroupIds&&(t=e.audioGroupIds[e.urlId],this.groupId!==t?(this.groupId=t||null,e=this.tracks.filter((function(e){return!t||e.groupId===t})),this.selectDefaultTrack&&!e.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),i={audioTracks:this.tracksInGroup=e},this.log("Updating audio tracks, "+e.length+" track(s) found in group:"+t),this.hls.trigger(w.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()):this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId))},_r.onError=function(e,t){!t.fatal&&t.context&&t.context.type===_t&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))},_r.setAudioTrack=function(e){var t,i,r,a=this.tracksInGroup;e<0||e>=a.length?this.warn("Invalid id passed to audio-track controller"):(this.clearTimer(),t=this.currentTrack,a[this.trackId],i=(a=a[e]).groupId,r=a.name,this.log("Switching to audio-track "+e+' "'+r+'" lang:'+a.lang+" group:"+i),this.trackId=e,this.currentTrack=a,this.selectDefaultTrack=!1,this.hls.trigger(w.AUDIO_TRACK_SWITCHING,n({},a)),a.details&&!a.details.live||(r=this.switchParams(a.url,null==t?void 0:t.details),this.loadPlaylist(r)))},_r.selectInitialTrack=function(){var e=this.tracksInGroup,t=this.findTrackId(this.currentTrack);-1!==(t=-1===t?this.findTrackId(null):t)?this.setAudioTrack(t):(t=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+e.length),this.warn(t.message),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t}))},_r.findTrackId=function(e){for(var t=this.tracksInGroup,i=0;i<t.length;i++){var n=t[i];if(!this.selectDefaultTrack||n.default){if(!e||void 0!==e.attrs["STABLE-RENDITION-ID"]&&e.attrs["STABLE-RENDITION-ID"]===n.attrs["STABLE-RENDITION-ID"])return n.id;if(e.name===n.name&&e.lang===n.lang)return n.id}}return-1},_r.loadPlaylist=function(e){Kr.prototype.loadPlaylist.call(this);var t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){var i=t.id,n=t.groupId,r=t.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist "+i+' "'+t.name+'" lang:'+t.lang+" group:"+n),this.clearTimer(),this.hls.trigger(w.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:n,deliveryDirectives:e||null})}},a(Xr,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),bn=Xr,o(sa,na=hi),(Vn=sa.prototype).onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},Vn._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.ERROR,this.onError,this),e.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},Vn._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.ERROR,this.onError,this),e.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},Vn.startLoad=function(e){this.stopLoad(),this.state=Hi,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},Vn.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},Vn.onMediaDetaching=function(){this.tracksBuffered=[],na.prototype.onMediaDetaching.call(this)},Vn.onLevelLoaded=function(e,t){this.mainDetails=t.details},Vn.onSubtitleFragProcessed=function(e,t){var i=t.frag;if(t=t.success,this.fragPrevious=i,this.state=Hi,t){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var r,a=i.start,s=0;s<n.length;s++)if(a>=n[s].start&&a<=n[s].end){r=n[s];break}t=i.start+i.duration,r?r.end=t:n.push(r={start:a,end:t}),this.fragmentTracker.fragBuffered(i)}}},Vn.onBufferFlushing=function(e,t){var i,n=t.startOffset,r=t.endOffset;0!==n||r===Number.POSITIVE_INFINITY||(i=r-1)<=0||(t.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=i)e.shift();else{if(!(e[t].start<i))break;e[t].start=i,t++}})),this.fragmentTracker.removeFragmentsInRange(n,i,Et))},Vn.onFragBuffered=function(e,t){this.loadedmetadata||t.frag.type!==vt||null!=(t=this.media)&&t.buffered.length&&(this.loadedmetadata=!0)},Vn.onError=function(e,t){(null==(t=t.frag)?void 0:t.type)===Et&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Gi)&&(this.state=Hi)},Vn.onSubtitleTracksUpdated=function(e,t){var i=this;t=t.subtitleTracks,ta(this.levels,t)?this.levels=t.map((function(e){return new Nt(e)})):(this.tracksBuffered=[],this.levels=t.map((function(e){return e=new Nt(e),i.tracksBuffered[e.id]=[],e})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Et),this.fragPrevious=null,this.mediaBuffer=null)},Vn.onSubtitleTrackSwitch=function(e,t){this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId?(null!=(t=this.levels[this.currentTrackId])&&t.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,t&&this.setInterval(500)):this.clearInterval()},Vn.onSubtitleTrackLoaded=function(e,t){var i=t.details,n=(t=t.id,this.currentTrackId),r=this.levels;if(r.length){var a=r[n];if(!(t>=r.length||t!==n)&&a){if(this.mediaBuffer=this.mediaBufferTimeRanges,r=0,i.live||null!=(n=a.details)&&n.live){if(n=this.mainDetails,i.deltaUpdateFailed||!n)return;var s=n.fragments[0];a.details?0===(r=this.alignPlaylists(i,a.details))&&s&&Kt(i,r=s.start):i.hasProgramDateTime&&n.hasProgramDateTime?(Ii(i,n),r=i.fragments[0].start):s&&Kt(i,r=s.start)}a.details=i,this.levelLastLoaded=t,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(a.details,r),this.tick(),!i.live||this.fragCurrent||!this.media||this.state!==Hi||ni(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),a.details=void 0)}}},Vn._handleFragmentLoadComplete=function(e){var t,i=this,n=e.frag,r=(e=e.payload,n.decryptdata),a=this.hls;!this.fragContextChanged(n)&&e&&0<e.byteLength&&r&&r.key&&r.iv&&"AES-128"===r.method&&(t=performance.now(),this.decrypter.decrypt(new Uint8Array(e),r.key.buffer,r.iv.buffer).catch((function(e){throw a.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e})).then((function(e){var i=performance.now();a.trigger(w.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:t,tdecrypt:i}})})).catch((function(e){i.warn(e.name+": "+e.message),i.state=Hi})))},Vn.doTick=function(){var e,t,i,n,r,a,s,o,l;this.media?this.state===Hi&&(e=this.currentTrackId,e=(o=this.levels)[e],o.length)&&e&&e.details&&(o=this.config,n=this.getLoadPosition(),t=(n=Si.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,o.maxBufferHole)).end,n=n.len,r=this.getFwdBufferInfo(this.media,vt),i=e.details,n>this.getMaxBufferLength(null==r?void 0:r.len)+i.levelTargetDuration||(r=(n=i.fragments).length,l=i.edge,a=null,s=this.fragPrevious,t<l?(o=l-(l=o.maxFragLookUpTolerance)<t?0:l,!(a=ni(s,n,Math.max(n[0].start,t),o))&&s&&s.start<n[0].start&&(a=n[0])):a=n[r-1],a&&("initSegment"!==(a=this.mapToInitFragWhenRequired(a)).sn&&(l=n[a.sn-i.startSN-1])&&l.cc===a.cc&&this.fragmentTracker.getState(l)===ui&&(a=l),this.fragmentTracker.getState(a)===ui)&&this.loadFragment(a,e,t))):this.state=Hi},Vn.getMaxBufferLength=function(e){var t=na.prototype.getMaxBufferLength.call(this);return e?Math.max(t,e):t},Vn.loadFragment=function(e,t,i){"initSegment"===(this.fragCurrent=e).sn?this._loadInitSegment(e,t):(this.startFragRequested=!0,na.prototype.loadFragment.call(this,e,t,i))},a(sa,[{key:"mediaBufferTimeRanges",get:function(){return new ra(this.tracksBuffered[this.currentTrackId]||[])}}]),Sr=sa;var ia,na,ra=function(e){function t(t,i,n){if((i>>>=0)>n-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+i+") is greater than the maximum bound ("+n+")");return e[i][t]}this.buffered=void 0,this.buffered={get length(){return e.length},end:function(i){return t("end",i,e.length)},start:function(i){return t("start",i,e.length)}}};function aa(e){var t;return(t=ia.call(this,e,"[subtitle-track-controller]")||this).media=null,t.tracks=[],t.groupId=null,t.tracksInGroup=[],t.trackId=-1,t.selectDefaultTrack=!0,t.queuedDefaultTrack=-1,t.trackChangeListener=function(){return t.onTextTracksChanged()},t.asyncPollTrackChange=function(){return t.pollTrackChange(0)},t.useTextTrackPolling=!1,t.subtitlePollingInterval=-1,t._subtitleDisplay=!0,t.registerListeners(),t}function sa(e,t,i){return(e=na.call(this,e,t,i,"[subtitle-stream-controller]",Et)||this).levels=[],e.currentTrackId=-1,e.tracksBuffered=[],e.mainDetails=null,e._registerListeners(),e}function oa(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];"subtitles"!==n.kind&&"captions"!==n.kind||!n.label||t.push(e[i])}return t}function la(e){var t=e;return fa.hasOwnProperty(e)&&(t=fa[e]),String.fromCharCode(t)}function ha(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString(16));return t}o(aa,ia=ai),(An=aa.prototype).destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,ia.prototype.destroy.call(this)},An.registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(w.ERROR,this.onError,this)},An.unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADING,this.onLevelLoading,this),e.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(w.ERROR,this.onError,this)},An.onMediaAttached=function(e,t){this.media=t.media,this.media&&(-1<this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},An.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},An.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),-1<this.trackId&&(this.queuedDefaultTrack=this.trackId),oa(this.media.textTracks).forEach((function(e){Rt(e)})),this.subtitleTrack=-1,this.media=null)},An.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},An.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},An.onSubtitleTrackLoaded=function(e,t){var i,n=t.id,r=t.details,a=this.trackId;(a=this.tracksInGroup[a])?(i=a.details,a.details=t.details,this.log("subtitle track "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&this.playlistLoaded(n,t,i)):this.warn("Invalid subtitle track id "+n)},An.onLevelLoading=function(e,t){this.switchLevel(t.level)},An.onLevelSwitching=function(e,t){this.switchLevel(t.level)},An.switchLevel=function(e){var t,i,n,r;null!=(e=this.hls.levels[e])&&e.textGroupIds&&(t=e.textGroupIds[e.urlId],e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,this.groupId!==t?(i=this.tracks.filter((function(e){return!t||e.groupId===t})),this.tracksInGroup=i,n=this.findTrackId(null==e?void 0:e.name)||this.findTrackId(),this.groupId=t||null,r={subtitleTracks:i},this.log("Updating subtitle tracks, "+i.length+' track(s) found in "'+t+'" group-id'),this.hls.trigger(w.SUBTITLE_TRACKS_UPDATED,r),-1!==n&&this.setSubtitleTrack(n,e)):this.shouldReloadPlaylist(e)&&this.setSubtitleTrack(this.trackId,e))},An.findTrackId=function(e){for(var t=this.tracksInGroup,i=0;i<t.length;i++){var n=t[i];if((!this.selectDefaultTrack||n.default)&&(!e||e===n.name))return n.id}return-1},An.onError=function(e,t){!t.fatal&&t.context&&t.context.type===yt&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)},An.loadPlaylist=function(e){ia.prototype.loadPlaylist.call(this);var t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){var i=t.id,n=t.groupId;if(t=t.url,e)try{t=e.addDirectives(t)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(w.SUBTITLE_TRACK_LOADING,{url:t,id:i,groupId:n,deliveryDirectives:e||null})}},An.toggleTrackModes=function(e){var t,i=this,n=this.media,r=this.trackId;n&&(t=(n=oa(n.textTracks)).filter((function(e){return e.groupId===i.groupId})),-1===e?[].slice.call(n).forEach((function(e){e.mode="disabled"})):(n=t[r])&&(n.mode="disabled"),r=t[e])&&(r.mode=this.subtitleDisplay?"showing":"hidden")},An.setSubtitleTrack=function(e,t){var i,n,r,a,s,o=this.tracksInGroup;this.media?(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(-1===e||null!=(i=o[e])&&i.details)||e<-1||e>=o.length||(this.clearTimer(),i=o[e],this.log("Switching to subtitle-track "+e+(i?' "'+i.name+'" lang:'+i.lang+" group:"+i.groupId:"")),this.trackId=e,i?(o=i.id,n=i.groupId,r=i.name,a=i.type,s=i.url,this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:o,groupId:void 0===n?"":n,name:r,type:a,url:s}),o=this.switchParams(i.url,null==t?void 0:t.details),this.loadPlaylist(o)):this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:e}))):this.queuedDefaultTrack=e},An.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=oa(this.media.textTracks),i=0;i<t.length;i++)if("hidden"===t[i].mode)e=i;else if("showing"===t[i].mode){e=i;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},a(aa,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,-1<this.trackId&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),rr=aa,(_r=Ba.prototype).append=function(e,t,i){var n=this.queues[t];n.push(e),1!==n.length||i||this.executeNext(t)},_r.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},_r.appendBlocker=function(e){var t,i=new Promise((function(e){t=e})),n={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(n,e),i},_r.executeNext=function(e){var t=this.queues[e];if(t.length){var i=t[0];try{i.execute()}catch(t){k.warn('[buffer-operation-queue]: Exception executing "'+e+'" SourceBuffer operation: '+t),i.onError(t),null!=(i=this.buffers[e])&&i.updating||this.shiftAndExecuteNext(e)}}},_r.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},_r.current=function(e){return this.queues[e][0]};var ua=Ba,da=Ke(),ca=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,fa=((Vn=Fa.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},Vn.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},Vn.registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.BUFFER_RESET,this.onBufferReset,this),e.on(w.BUFFER_APPENDING,this.onBufferAppending,this),e.on(w.BUFFER_CODECS,this.onBufferCodecs,this),e.on(w.BUFFER_EOS,this.onBufferEos,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(w.FRAG_PARSED,this.onFragParsed,this),e.on(w.FRAG_CHANGED,this.onFragChanged,this)},Vn.unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.BUFFER_RESET,this.onBufferReset,this),e.off(w.BUFFER_APPENDING,this.onBufferAppending,this),e.off(w.BUFFER_CODECS,this.onBufferCodecs,this),e.off(w.BUFFER_EOS,this.onBufferEos,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(w.FRAG_PARSED,this.onFragParsed,this),e.off(w.FRAG_CHANGED,this.onFragChanged,this)},Vn._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new ua(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},Vn.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},Vn.onManifestParsed=function(e,t){var i=2;(!t.audio||t.video)&&t.altAudio||(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},Vn.onMediaAttaching=function(e,t){var i;(t=this.media=t.media)&&da&&((i=this.mediaSource=new da).addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),t.src=self.URL.createObjectURL(i),this._objectUrl=t.src,t.addEventListener("emptied",this._onMediaEmptied))},Vn.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,i=this._objectUrl;if(t){if(this.log("media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){this.warn("onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),e.src===i?(e.removeAttribute("src"),e.load()):this.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(w.MEDIA_DETACHED,void 0)},Vn.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var i=e.sourceBuffer[t];try{i&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(i),e.sourceBuffer[t]=void 0)}catch(i){e.warn("Failed to reset the "+t+" buffer",i)}})),this._initSourceBuffer()},Vn.onBufferCodecs=function(e,t){var i=this,n=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){var r,a,s,o,l,h,u,d,c;n?(r=i.tracks[e])&&"function"==typeof r.buffer.changeType&&(a=(h=t[e]).id,s=h.codec,o=h.levelCodec,l=h.container,h=h.metadata,(u=(r.levelCodec||r.codec).replace(ca,"$1"))!==(d=(o||s).replace(ca,"$1")))&&(c=o||s,c=l+";codecs="+(c="audio"===e.slice(0,5)?tt(c):c),i.appendChangeType(e,c),i.log("switching codec "+u+" to "+d),i.tracks[e]={buffer:r.buffer,codec:s,container:l,levelCodec:o,metadata:h,id:a}):i.pendingTracks[e]=t[e]})),n||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},Vn.appendChangeType=function(e,t){var i=this,n=this.operationQueue;n.append({execute:function(){var r=i.sourceBuffer[e];r&&(i.log("changing "+e+" sourceBuffer type to "+t),r.changeType(t)),n.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){i.warn("Failed to change "+e+" SourceBuffer type",t)}},e,!!this.pendingTracks[e])},Vn.onBufferAppending=function(e,t){var i=this,n=this.hls,r=this.operationQueue,a=this.tracks,s=t.data,o=t.type,l=t.frag,h=t.part,u=t.chunkMeta,d=u.buffering[o],c=(t=self.performance.now(),d.start=t,l.stats.buffering),f=h?h.stats.buffering:null,p=(0===c.start&&(c.start=t),f&&0===f.start&&(f.start=t),t=a.audio,!1),m=("audio"===o&&"audio/mpeg"===(null==t?void 0:t.container)&&(p=!this.lastMpegAudioChunk||1===u.id||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u),l.start);r.append({execute:function(){var e,t;d.executeStart=self.performance.now(),p&&(e=i.sourceBuffer[o])&&(t=m-e.timestampOffset,.1<=Math.abs(t))&&(i.log("Updating audio SourceBuffer timestampOffset to "+m+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=m),i.appendExecutor(s,o)},onStart:function(){},onComplete:function(){var e,t=self.performance.now(),n=(d.executeEnd=d.end=t,0===c.first&&(c.first=t),f&&0===f.first&&(f.first=t),i.sourceBuffer),r={};for(e in n)r[e]=Si.getBuffered(n[e]);i.appendErrors[o]=0,i.hls.trigger(w.BUFFER_APPENDED,{type:o,frag:l,part:h,chunkMeta:u,parent:l.type,timeRanges:r})},onError:function(e){var t={type:S.MEDIA_ERROR,parent:l.type,details:T.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:l,part:h,chunkMeta:u,error:e,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=T.BUFFER_FULL_ERROR:(e=++i.appendErrors[o],t.details=T.BUFFER_APPEND_ERROR,i.warn("Failed "+e+"/"+n.config.appendErrorMaxRetry+' times to append segment in "'+o+'" sourceBuffer'),e>n.config.appendErrorMaxRetry&&(t.fatal=!0)),n.trigger(w.ERROR,t)}},o,!!this.pendingTracks[o])},Vn.onBufferFlushing=function(e,t){function i(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(w.BUFFER_FLUSHED,{type:e})},onError:function(t){n.warn("Failed to remove from "+e+" SourceBuffer",t)}}}var n=this,r=this.operationQueue;t.type?r.append(i(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){r.append(i(e),e)}))},Vn.onFragParsed=function(e,t){var i=this,n=t.frag,r=t.part,a=(t=[],(r||n).elementaryStreams);a[V]?t.push("audiovideo"):(a[N]&&t.push("audio"),a[j]&&t.push("video")),0===t.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+n.type+" level: "+n.level+" sn: "+n.sn),this.blockBuffers((function(){var e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e),e=(r||n).stats,i.hls.trigger(w.FRAG_BUFFERED,{frag:n,part:r,stats:e,id:n.type})}),t)},Vn.onFragChanged=function(e,t){this.flushBackBuffer()},Vn.onBufferEos=function(e,t){var i=this;this.getSourceBufferTypes().reduce((function(e,n){var r=i.sourceBuffer[n];return!r||t.type&&t.type!==n||(r.ending=!0,r.ended)||(r.ended=!0,i.log(n+" sourceBuffer now EOS")),e&&!(r&&!r.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){i.getSourceBufferTypes().forEach((function(e){(e=i.sourceBuffer[e])&&(e.ending=!1)}));var e=i.mediaSource;e&&"open"===e.readyState?(i.log("Calling mediaSource.endOfStream()"),e.endOfStream()):e&&i.log("Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)})))},Vn.onLevelUpdated=function(e,t){(t=t.details).fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},Vn.flushBackBuffer=function(){var e,t,i,n,r,a=this,s=this.hls,o=this.details,l=this.media,h=this.sourceBuffer;l&&null!==o&&(e=this.getSourceBufferTypes()).length&&(t=o.live&&null!==s.config.liveBackBufferLength?s.config.liveBackBufferLength:s.config.backBufferLength,!b(t)||t<0||(i=l.currentTime,n=o.levelTargetDuration,l=Math.max(t,n),r=Math.floor(i/n)*n-l,e.forEach((function(e){var t=h[e];if(t){var l=Si.getBuffered(t);if(0<l.length&&r>l.start(0)){if(s.trigger(w.BACK_BUFFER_REACHED,{bufferEnd:r}),o.live)s.trigger(w.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(t.ended&&l.end(l.length-1)-i<2*n)return void a.log("Cannot flush "+e+" back buffer while SourceBuffer is in ended state");s.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:e})}}}))))},Vn.updateMediaElementDuration=function(){var e,t,i,n,r,a;this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState&&(e=this.details,t=this.hls,r=this.media,i=this.mediaSource,n=e.fragments[0].start+e.totalduration,r=r.duration,a=b(i.duration)?i.duration:0,e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(a<n&&r<n||!b(r))&&(this.log("Updating Media Source duration to "+n.toFixed(3)),i.duration=n))},Vn.updateSeekableRange=function(e){var t=this.mediaSource,i=e.fragments;i.length&&e.live&&null!=t&&t.setLiveSeekableRange&&(i=Math.max(0,i[0].start),e=Math.max(i,i+e.totalduration),this.log("Media Source duration is set to "+t.duration+". Setting seekable range to "+i+"-"+e+"."),t.setLiveSeekableRange(i,e))},Vn.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,i=this.pendingTracks,n=Object.keys(i).length;(n&&!e||2===n)&&(this.createSourceBuffers(i),this.pendingTracks={},(e=this.getSourceBufferTypes()).length?(this.hls.trigger(w.BUFFER_CREATED,{tracks:this.tracks}),e.forEach((function(e){t.executeNext(e)}))):(n=new Error("could not create source buffer for media codec(s)"),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:n,reason:n.message})))},Vn.createSourceBuffers=function(e){var t,i=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(t in e)if(!i[t]){var r=e[t];if(!r)throw Error("source buffer exists for track "+t+", however track does not");var a=r.levelCodec||r.codec,s=(a&&"audio"===t.slice(0,5)&&(a=tt(a)),r.container+";codecs="+a);this.log("creating sourceBuffer("+s+")");try{var o=i[t]=n.addSourceBuffer(s),l=t;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[t]={buffer:o,codec:a,container:r.container,levelCodec:r.levelCodec,metadata:r.metadata,id:r.id}}catch(e){this.error("error while trying to add sourceBuffer: "+e.message),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:t,mimeType:s})}}},Vn._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},Vn._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},Vn._onSBUpdateError=function(e,t){var i=new Error(e+" SourceBuffer error");this.error(""+i,t),this.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1}),(i=this.operationQueue.current(e))&&i.onError(t)},Vn.removeExecutor=function(e,t,i){var n=this.media,r=this.mediaSource,a=this.operationQueue,s=this.sourceBuffer[e];n&&r&&s?(n=b(n.duration)?n.duration:1/0,r=b(r.duration)?r.duration:1/0,(t=Math.max(0,t))<(i=Math.min(i,n,r))&&(!s.ending||s.ended)?(s.ended=!1,this.log("Removing ["+t+","+i+"] from the "+e+" SourceBuffer"),s.remove(t,i)):a.shiftAndExecuteNext(e)):(this.warn("Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),a.shiftAndExecuteNext(e))},Vn.appendExecutor=function(e,t){var i=this.sourceBuffer[t];if(i)i.ended=!1,i.appendBuffer(e);else if(!this.pendingTracks[t])throw new Error("Attempting to append to the "+t+" SourceBuffer, but it does not exist")},Vn.blockBuffers=function(e,t){var i,n,r=this;(t=void 0===t?this.getSourceBufferTypes():t).length?(i=this.operationQueue,n=t.map((function(e){return i.appendBlocker(e)})),Promise.all(n).then((function(){e(),t.forEach((function(e){var t=r.sourceBuffer[e];null!=t&&t.updating||i.shiftAndExecuteNext(e)}))}))):(this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e))},Vn.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},Vn.addBufferListener=function(e,t,i){var n=this.sourceBuffer[e];n&&(i=i.bind(this,e),this.listeners[e].push({event:t,listener:i}),n.addEventListener(t,i))},Vn.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},An=Fa,{42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499}),pa=15,ma=100,ga={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_a={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ya={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},va={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Aa=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Ea=(Ma.prototype.log=function(e,t){this.verboseLevel>=e&&(t="function"==typeof t?t():t,k.log(this.time+" ["+e+"] "+t))},Ma),ba=((_r=xa.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},_r.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],i=0;i<t.length;i++){var n=t[i];e.hasOwnProperty(n)&&(this[n]=e[n])}},_r.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},_r.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},_r.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},_r.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},xa),wa=((Vn=Da.prototype).reset=function(){this.uchar=" ",this.penState.reset()},Vn.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},Vn.setPenState=function(e){this.penState.copy(e)},Vn.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},Vn.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},Vn.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},Da),Sa=((_r=Pa.prototype).equals=function(e){for(var t=0;t<ma;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0},_r.copy=function(e){for(var t=0;t<ma;t++)this.chars[t].copy(e.chars[t])},_r.isEmpty=function(){for(var e=!0,t=0;t<ma;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},_r.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ma&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ma)},_r.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)},_r.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},_r.insertChar=function(e){var t=this,i=(144<=e&&this.backSpace(),la(e));this.pos>=ma?this.logger.log(0,(function(){return"Cannot insert "+e.toString(16)+" ("+i+") at position "+t.pos+". Skipping it!"})):(this.chars[this.pos].setChar(i,this.currPenState),this.moveCursor(1))},_r.clearFromPos=function(e){for(var t=e;t<ma;t++)this.chars[t].reset()},_r.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},_r.clearToEndOfRow=function(){this.clearFromPos(this.pos)},_r.getTextString=function(){for(var e=[],t=!0,i=0;i<ma;i++){var n=this.chars[i].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},_r.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},Pa),Ta=((Vn=ka.prototype).reset=function(){for(var e=0;e<pa;e++)this.rows[e].clear();this.currRow=14},Vn.equals=function(e){for(var t=!0,i=0;i<pa;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t},Vn.copy=function(e){for(var t=0;t<pa;t++)this.rows[t].copy(e.rows[t])},Vn.isEmpty=function(){for(var e=!0,t=0;t<pa;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},Vn.backSpace=function(){this.rows[this.currRow].backSpace()},Vn.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},Vn.insertChar=function(e){this.rows[this.currRow].insertChar(e)},Vn.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},Vn.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},Vn.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},Vn.setPAC=function(e){this.logger.log(2,(function(){return"pacData = "+JSON.stringify(e)}));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var i=0;i<pa;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[n].cueStartTime,s=this.logger.time;if(null!==a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(r.rows[n+o])}}this.currRow=t,a=this.rows[this.currRow],null!==e.indent&&(s=e.indent,s=Math.max(s-1,0),a.setCursor(e.indent),e.color=a.chars[s].penState.foreground),a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1},this.setPen(a)},Vn.setBkgData=function(e){this.logger.log(2,(function(){return"bkgData = "+JSON.stringify(e)})),this.backSpace(),this.setPen(e),this.insertChar(32)},Vn.setRollUpRows=function(e){this.nrRollUpRows=e},Vn.rollUp=function(){var e,t=this;null!==this.nrRollUpRows?(this.logger.log(1,(function(){return t.getDisplayText()})),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),this.logger.log(2,"Rolling up")):this.logger.log(3,"roll_up but nrRollUpRows not set yet")},Vn.getDisplayText=function(e){e=e||!1;for(var t=[],i="",n=0;n<pa;n++){var r=this.rows[n].getTextString();r&&t.push(e?"Row "+(n+1)+": '"+r+"'":r.trim())}return 0<t.length?e?"["+t.join(" | ")+"]":t.join("\n"):i},Vn.getTextAndFormat=function(){return this.rows},ka),Ca=((_r=Ia.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},_r.getHandler=function(){return this.outputFilter},_r.setHandler=function(e){this.outputFilter=e},_r.setPAC=function(e){this.writeScreen.setPAC(e)},_r.setBkgData=function(e){this.writeScreen.setBkgData(e)},_r.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(function(){return"MODE="+e})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},_r.insertChars=function(e){for(var t=this,i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return n+": "+t.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},_r.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},_r.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory)&&this.outputDataUpdate()},_r.ccAOF=function(){},_r.ccAON=function(){},_r.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},_r.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},_r.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},_r.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},_r.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},_r.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},_r.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},_r.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},_r.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},_r.ccEOC=function(){var e,t=this;this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return"DISP: "+t.displayedMemory.getDisplayText()}))),this.outputDataUpdate(!0)},_r.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},_r.ccMIDROW=function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},_r.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},_r.cueSplitAtTime=function(e){!this.outputFilter||this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)},Ia),La=((Vn=Ra.prototype).getHandler=function(e){return this.channels[e].getHandler()},Vn.setHandler=function(e,t){this.channels[e].setHandler(t)},Vn.addData=function(e,t){var i,n=!1;this.logger.time=e;for(var r=0;r<t.length;r+=2){var a,s=127&t[r],o=127&t[r+1];0==s&&0==o||(this.logger.log(3,"["+ha([t[r],t[r+1]])+"] -> ("+ha([s,o])+")"),!(i=(i=(i=(i=this.parseCmd(s,o))||this.parseMidrow(s,o))||this.parsePAC(s,o))||this.parseBackgroundAttributes(s,o))&&(n=this.parseChars(s,o))&&((a=this.currentChannel)&&0<a?this.channels[a].insertChars(n):this.logger.log(2,"No channel found yet. TEXT-MODE?")),i)||n||this.logger.log(2,"Couldn't parse cleaned data "+ha([s,o])+" orig: "+ha([t[r],t[r+1]]))}},Vn.parseCmd=function(e,t){var i,n,r=this.cmdHistory;return((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35)&&(Ua(e,t,r)?(Oa(null,null,r),this.logger.log(3,"Repeated command ("+ha([e,t])+") is dropped")):(n=this.channels[i=20===e||21===e||23===e?1:2],20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),Oa(e,t,r),this.currentChannel=i),!0)},Vn.parseMidrow=function(e,t){var i;return(17===e||25===e)&&32<=t&&t<=47&&((i=17===e?1:2)!==this.currentChannel?(this.logger.log(0,"Mismatch channel in midrow parsing"),!1):!!(i=this.channels[i])&&(i.ccMIDROW(t),this.logger.log(3,"MIDROW ("+ha([e,t])+")"),!0))},Vn.parsePAC=function(e,t){var i,n,r=this.cmdHistory;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(Ua(e,t,r)?(Oa(null,null,r),!0):!!(n=this.channels[i=e<=23?1:2])&&(n.setPAC(this.interpretPAC((64<=t&&t<=95?1==i?ga:ya:1==i?_a:va)[e],t)),Oa(e,t,r),this.currentChannel=i,!0))},Vn.interpretPAC=function(e,t){return(e={color:null,italics:!1,indent:null,underline:!1,row:e}).underline=!(1&~(t=95<t?t-96:t-64)),t<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(t/2)]:t<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((t-16)/2),e},Vn.parseChars=function(e,t){var i,n=null,r=null;return 17<=(r=25<=e?(i=2,e-8):(i=1,e))&&r<=19?(this.logger.log(2,"Special char '"+la(r=17===r?t+80:18===r?t+112:t+144)+"' in channel "+i),n=[r]):32<=e&&e<=127&&(n=0===t?[e]:[e,t]),n&&(i=ha(n),this.logger.log(3,"Char codes =  "+i.join(",")),Oa(e,t,this.cmdHistory)),n},Vn.parseBackgroundAttributes=function(e,t){var i,n;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=Aa[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),this.channels[e<=23?1:2].setBkgData(n),Oa(e,t,this.cmdHistory),!0)},Vn.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},Vn.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var i=this.channels[t];i&&i.cueSplitAtTime(e)}},Ra);function Ra(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;var n=this.logger=new Ea;this.channels=[null,new Ca(e,t,n),new Ca(e+1,i,n)]}function Ia(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ta(i),this.nonDisplayedMemory=new Ta(i),this.lastOutputScreen=new Ta(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}function ka(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(var t=0;t<pa;t++)this.rows.push(new Sa(e));this.logger=e}function Pa(e){this.chars=[],this.pos=0,this.currPenState=new ba,this.cueStartTime=null,this.logger=void 0;for(var t=0;t<ma;t++)this.chars.push(new wa);this.logger=e}function Da(){this.uchar=" ",this.penState=new ba}function xa(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}function Ma(){this.time=null,this.verboseLevel=0}function Fa(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onMediaSourceOpen=function(){var e=t.media,i=t.mediaSource;t.log("Media source opened"),e&&(e.removeEventListener("emptied",t._onMediaEmptied),t.updateMediaElementDuration(),t.hls.trigger(w.MEDIA_ATTACHED,{media:e})),i&&i.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){t.log("Media source closed")},this._onMediaSourceEnded=function(){t.log("Media source ended")},this._onMediaEmptied=function(){var e=t.media,i=t._objectUrl;e&&e.src!==i&&t.error("Media element src was set while attaching MediaSource ("+i+" > "+e.src+")")},this.hls=e,e="[buffer-controller]",this.log=k.log.bind(k,e),this.warn=k.warn.bind(k,e),this.error=k.error.bind(k,e),this._initSourceBuffer(),this.registerListeners()}function Ba(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}function Oa(e,t,i){i.a=e,i.b=t}function Ua(e,t,i){return i.a===e&&i.b===t}(_r=Ja.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},_r.newCue=function(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},_r.reset=function(){this.cueRanges=[],this.startTime=null};var Na,ja,Va=Ja,Ga="undefined"!=typeof self&&self.VTTCue?self.VTTCue:(Na=["","lr","rl"],ja=["start","middle","end","left","right"],Ka.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},Ka),Ha=(Ya.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},Ya);function Ya(){}function Wa(e,t){return"string"==typeof t&&!!Array.isArray(e)&&(t=t.toLowerCase(),!!~e.indexOf(t))&&t}function za(e){return Wa(ja,e)}function Qa(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=1;r<arguments.length;r++){var a,s=arguments[r];for(a in s)e[a]=s[a]}return e}function Ka(e,t,i){var n=this,r={enumerable:!0},a=(n.hasBeenReset=!1,""),s=!1,o=e,l=t,h=i,u=null,d="",c=!0,f="auto",p="start",m=50,g="middle",_=50,y="middle";Object.defineProperty(n,"id",Qa({},r,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(n,"pauseOnExit",Qa({},r,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(n,"startTime",Qa({},r,{get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",Qa({},r,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",Qa({},r,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",Qa({},r,{get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",Qa({},r,{get:function(){return d},set:function(e){if(!1===(e=Wa(Na,e)))throw new SyntaxError("An invalid or illegal string was specified.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",Qa({},r,{get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",Qa({},r,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",Qa({},r,{get:function(){return p},set:function(e){if(!(e=za(e)))throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",Qa({},r,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",Qa({},r,{get:function(){return g},set:function(e){if(!(e=za(e)))throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",Qa({},r,{get:function(){return _},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",Qa({},r,{get:function(){return y},set:function(e){if(!(e=za(e)))throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),n.displayState=void 0}function Ja(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}function Za(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(n||0)}return(e=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/))?59<parseFloat(e[2])?t(e[2],e[3],0,e[4]):t(e[1],e[2],e[3],e[4]):null}(Vn=Xa.prototype).set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},Vn.get=function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},Vn.has=function(e){return e in this.values},Vn.alt=function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},Vn.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},Vn.percent=function(e,t){return!!(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)};var qa=Xa;function Xa(){this.values=Object.create(null)}function $a(e,t,i,n){var r,a,s=n?e.split(n):[e];for(r in s)"string"==typeof s[r]&&2===(a=s[r].split(i)).length&&t(a[0],a[1])}var es=new Ga(0,0,""),ts="middle"===es.align?"middle":"center";function is(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function ns(e,t,i){return e.slice(i=void 0===i?0:i,i+t.length)===t}(_r=os.prototype).parse=function(e){var t=this;function i(){for(var e=0,i=is(i=t.buffer);e<i.length&&"\r"!==i[e]&&"\n"!==i[e];)++e;var n=i.slice(0,e);return"\r"===i[e]&&++e,"\n"===i[e]&&++e,t.buffer=i.slice(e),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(n=i()).match(/^(茂禄驴)?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:n=i(),t.state){case"HEADER":/:/.test(n)?$a(n,(function(e,t){}),/:/):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new Ga(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{!function(e,t,i){var n,r,a=e;function s(){var t=Za(e);if(null===t)throw new Error("Malformed timestamp: "+a);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=s(),o(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);e=e.slice(3),o(),t.endTime=s(),o(),n=e,r=new qa,$a(n,(function(e,t){var n;switch(e){case"region":for(var a=i.length-1;0<=a;a--)if(i[a].id===t){r.set(e,i[a].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":n=t.split(","),r.integer(e,n[0]),r.percent(e,n[0])&&r.set("snapToLines",!1),r.alt(e,n[0],["auto"]),2===n.length&&r.alt("lineAlign",n[1],["start",ts,"end"]);break;case"position":n=t.split(","),r.percent(e,n[0]),2===n.length&&r.alt("positionAlign",n[1],["start",ts,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",ts,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),"auto"===(n=r.get("line","auto"))&&-1===es.line&&(n=-1),t.line=n,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",ts),"auto"===(n=r.get("position","auto"))&&50===es.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}(n,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==n.indexOf("--\x3e");if(!n||s&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},_r.flush=function(){var e=this;try{if(!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this};var rs=os,as=/\r\n|\n\r|\n|\r/g,ss=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()};function os(){this.state="INITIAL",this.buffer="",this.decoder=new Ha,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}function ls(e,t,i){return ss(e.toString())+ss(t.toString())+ss(i)}var hs="stpp.ttml.im1t",us=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ds=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,cs={left:"start",center:"center",right:"end",start:"start",end:"end"};function fs(e,t,i,n){if(0!==(a=Pe(new Uint8Array(e),["mdat"])).length){var r,a=a.map((function(e){return Ee(e)})),o=fr(t.baseTime,1,1/(t=void 0===(t=t.timescale)?1:t),r=void 0!==r&&r);try{a.forEach((function(e){return i(function(e,t){var i,n,r,a,o,l=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(l)return i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(i).reduce((function(e,t){return e[t]=l.getAttribute("ttp:"+t)||i[t],e}),{}),r="preserve"!==l.getAttribute("xml:space"),a=ms(ps(l,"styling","style")),o=ms(ps(l,"layout","region")),e=ps(l,"body","[begin]"),[].map.call(e,(function(e){var i=function e(t,i){return[].slice.call(t.childNodes).reduce((function(t,n,r){return"br"===n.nodeName&&r?t+"\n":null!=(r=n.childNodes)&&r.length?e(n,i):i?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent}),"")}(e,r);if(!i||!e.hasAttribute("begin"))return null;var l,h,u,d,c=ys(e.getAttribute("begin"),n),f=ys(e.getAttribute("dur"),n),p=ys(e.getAttribute("end"),n);if(null===c)throw _s(e);if(null===p){if(null===f)throw _s(e);p=c+f}return(f=new Ga(c-t,p-t,i)).id=ls(f.startTime,f.endTime,f.text),l=o[e.getAttribute("region")],h=a[e.getAttribute("style")],c=a,u="http://www.w3.org/ns/ttml#styling",(p=(d=null)!=l&&l.hasAttribute("style")?l.getAttribute("style"):null)&&c.hasOwnProperty(p)&&(d=c[p]),i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(e,t){var i=gs(h,u,t)||gs(l,u,t)||gs(d,u,t);return i&&(e[t]=i),e}),{}),(e=i.textAlign)&&((c=cs[e])&&(f.lineAlign=c),f.align=e),s(f,i),f})).filter((function(e){return null!==e}));throw new Error("Invalid ttml")}(e,o))}))}catch(e){n(e)}}else n(new Error("Could not parse IMSC1 mdat"))}function ps(e,t,i){return(e=e.getElementsByTagName(t)[0])?[].slice.call(e.querySelectorAll(i)):[]}function ms(e){return e.reduce((function(e,t){var i=t.getAttribute("xml:id");return i&&(e[i]=t),e}),{})}function gs(e,t,i){return e&&e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function _s(e){return new Error("Could not parse ttml timestamp "+e)}function ys(e,t){var i,n,r,a;return e?(null===(i=Za(e))&&(us.test(e)?(n=t,a=(0|(r=us.exec(e))[4])+(0|r[5])/n.subFrameRate,i=3600*(0|r[1])+60*(0|r[2])+(0|r[3])+a/n.frameRate):ds.test(e)&&(i=function(t){var i=ds.exec(e),n=Number(i[1]);switch(i[2]){case"h":return 3600*n;case"m":return 60*n;case"ms":return 1e3*n;case"f":return n/t.frameRate;case"t":return n/t.tickRate}return n}(t))),i):null}function vs(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(w.FRAG_LOADING,this.onFragLoading,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(w.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this)}(Vn=vs.prototype).destroy=function(){var e=this.hls;e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(w.FRAG_LOADING,this.onFragLoading,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(w.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},Vn.lazyInit608=function(){var e,t,i,n;!this.config.enableCEA708Captions||this.cea608Parser1&&this.cea608Parser2||(e=new Va(this,"textTrack1"),t=new Va(this,"textTrack2"),i=new Va(this,"textTrack3"),n=new Va(this,"textTrack4"),this.cea608Parser1=new La(1,e,t),this.cea608Parser2=new La(3,i,n))},Vn.addCues=function(e,t,i,n,r){for(var a,s,o,l=!1,h=r.length;h--;){var u=r[h],d=(a=u[0],d=u[1],s=t,Math.min(d,i)-Math.max(a,s));if(0<=d&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],i),l=!0,.5<d/(i-t)))return}l||r.push([t,i]),this.config.renderTextTracksNatively?(o=this.captionsTracks[e],this.Cues.newCue(o,t,i,n)):(o=this.Cues.newCue(null,t,i,n),this.hls.trigger(w.CUES_PARSED,{type:"captions",cues:o,track:e}))},Vn.onInitPtsFound=function(e,t){var i=this,n=t.frag,r=t.id,a=t.initPTS,s=(t=t.timescale,this.unparsedVttFrags);"main"===r&&(this.initPTS[n.cc]={baseTime:a,timescale:t}),s.length&&(this.unparsedVttFrags=[],s.forEach((function(e){i.onFragLoaded(w.FRAG_LOADED,e)})))},Vn.getExistingTrack=function(e){var t=this.media;if(t)for(var i=0;i<t.textTracks.length;i++){var n=t.textTracks[i];if(n[e])return n}return null},Vn.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},Vn.createNativeTrack=function(e){var t,i,n,r,a;this.captionsTracks[e]||(r=this.captionsProperties,t=this.captionsTracks,i=this.media,n=(r=r[e]).label,r=r.languageCode,(a=this.getExistingTrack(e))?(t[e]=a,Rt(t[e]),Ct(t[e],i)):(a=this.createTextTrack("captions",n,r))&&(a[e]=!0,t[e]=a))},Vn.createNonNativeTrack=function(e){var t;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(t={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=t,this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[t]}))},Vn.createTextTrack=function(e,t,i){var n=this.media;if(n)return n.addTextTrack(e,t,i)},Vn.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},Vn.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Rt(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},Vn.onManifestLoading=function(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},Vn._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var i=0;i<t.length;i++)Rt(t[i])}},Vn.onSubtitleTracksUpdated=function(e,t){var i,n=this,r=(t=t.subtitleTracks||[]).some((function(e){return e.textCodec===hs}));(this.config.enableWebVTT||r&&this.config.enableIMSC1)&&(ta(this.tracks,t)?this.tracks=t:(this.textTracks=[],this.tracks=t,this.config.renderTextTracksNatively?(i=this.media?this.media.textTracks:null,this.tracks.forEach((function(e,t){var r,a,s;if(i&&t<i.length){for(var o=null,l=0;l<i.length;l++)if(s=e,(a=i[l])&&a.label===s.name&&!a.textTrack1&&!a.textTrack2){o=i[l];break}o&&(r=o)}r?Rt(r):(t=n._captionsOrSubtitlesFromCharacteristics(e),(r=n.createTextTrack(t,e.name,e.lang))&&(r.mode="disabled")),r&&(r.groupId=e.groupId,n.textTracks.push(r))}))):this.tracks.length&&(r=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}})),this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:r}))))},Vn._captionsOrSubtitlesFromCharacteristics=function(e){return e.attrs.CHARACTERISTICS&&/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS)&&/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS)?"captions":"subtitles"},Vn.onManifestLoaded=function(e,t){var i=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);t&&(t="textTrack"+t[1],t=i.captionsProperties[t])&&(t.label=e.name,e.lang&&(t.languageCode=e.lang),t.media=e)}))},Vn.closedCaptionsForLevel=function(e){return null==(e=this.hls.levels[e.level])?void 0:e.attrs["CLOSED-CAPTIONS"]},Vn.onFragLoading=function(e,t){var i,n,r=this.cea608Parser1,a=this.cea608Parser2,s=this.lastCc,o=this.lastSn,l=this.lastPartIndex;this.enabled&&r&&a&&t.frag.type===vt&&(i=(n=t.frag).cc,n=n.sn,t=null!=(t=null==t||null==(t=t.part)?void 0:t.index)?t:-1,n===o+1||n===o&&t===l+1||i===s||(r.reset(),a.reset()),this.lastCc=i,this.lastSn=n,this.lastPartIndex=t)},Vn.onFragLoaded=function(e,t){var i,n,r=t.frag,a=t.payload;r.type===Et&&(a.byteLength?(n="stats"in t,null!=(i=r.decryptdata)&&i.encrypted&&!n||(i=this.tracks[r.level],(n=this.vttCCs)[r.cc]||(n[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),i&&i.textCodec===hs?this._parseIMSC1(r,a):this._parseVTTs(t))):this.hls.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")}))},Vn._parseIMSC1=function(e,t){var i=this,n=this.hls;fs(t,this.initPTS[e.cc],(function(t){i._appendCues(t,e.level),n.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){k.log("Failed to parse IMSC1: "+t),n.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},Vn._parseVTTs=function(e){var t,i,n,r,a,s,o,l,h,u,d,c,f,p,m,g,_=this,y=e.frag,v=e.payload,A=this.initPTS,E=this.unparsedVttFrags,S=A.length-1;A[y.cc]||-1!=S?(t=this.hls,A=null!=(A=y.initSegment)&&A.data?Be(y.initSegment.data,new Uint8Array(v)):v,i=this.initPTS[y.cc],n=this.vttCCs,r=y.cc,a=y.start,s=function(e){_._appendCues(e,y.level),t.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:y})},o=function(i){var n="Missing initPTS for VTT MPEGTS"===i.message;n?E.push(e):_._fallbackToIMSC1(y,v),k.log("Failed to parse VTT cue: "+i),n&&S>y.cc||t.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:y,error:i})},u=new rs,A=Ee(new Uint8Array(A)).trim().replace(as,"\n").split("\n"),d=[],c=i?fr(i.baseTime,9e4,1/(l=void 0===(l=i.timescale)?1:l)):0,f="00:00.000",g=!(m=p=0),u.oncue=function(e){var t=n[r],s=n.ccOffset,o=(p-c)/9e4;if(null!=t&&t.new&&(void 0!==m?s=n.ccOffset=t.start:function(e,t){var i=e[r],n=e[i.prevCC];if(!n||!n.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,i.new=!1;for(;null!=n&&n.new;)e.ccOffset+=i.start-n.start,i.new=!1,n=e[(i=n).prevCC];e.presentationOffset=t}(n,o)),o){if(!i)return void(h=new Error("Missing initPTS for VTT MPEGTS"));s=o-n.presentationOffset}t=e.endTime-e.startTime,o=vr(9e4*(e.startTime+s-m),9e4*a)/9e4,e.startTime=Math.max(o,0),e.endTime=Math.max(o+t,0),s=e.text.trim(),e.text=decodeURIComponent(encodeURIComponent(s)),e.id||(e.id=ls(e.startTime,e.endTime,s)),0<e.endTime&&d.push(e)},u.onparsingerror=function(e){h=e},u.onflush=function(){h?o(h):s(d)},A.forEach((function(e){if(g){if(ns(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach((function(e){ns(e,"LOCAL:")?f=e.slice(6):ns(e,"MPEGTS:")&&(p=parseInt(e.slice(7)))}));try{m=function(e){var t=parseInt(e.slice(-3)),i=parseInt(e.slice(-6,-4)),n=parseInt(e.slice(-9,-7)),r=9<e.length?parseInt(e.substring(0,e.indexOf(":"))):0;if(b(t)&&b(i)&&b(n)&&b(r))return t+1e3*i+6e4*n+36e5*r;throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e)}(f)/1e3}catch(e){h=e}return}""===e&&(g=!1)}u.parse(e+"\n")})),u.flush()):E.push(e)},Vn._fallbackToIMSC1=function(e,t){var i=this,n=this.tracks[e.level];n.textCodec||fs(t,this.initPTS[e.cc],(function(){n.textCodec=hs,i._parseIMSC1(e,t)}),(function(){n.textCodec="wvtt"}))},Vn._appendCues=function(e,t){var i,n,r=this.hls;this.config.renderTextTracksNatively?(i=this.textTracks[t])&&"disabled"!==i.mode&&e.forEach((function(e){return Lt(i,e)})):(n=this.tracks[t])&&(n=n.default?"default":"subtitles"+t,r.trigger(w.CUES_PARSED,{type:"subtitles",cues:e,track:n}))},Vn.onFragDecrypted=function(e,t){t.frag.type===Et&&this.onFragLoaded(w.FRAG_LOADED,t)},Vn.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},Vn.onFragParsingUserdata=function(e,t){if(this.enabled){var i=t.frag,n=t.samples;if(i.type!==vt||"NONE"!==this.closedCaptionsForLevel(i)){this.lazyInit608();var r=this.cea608Parser1,a=this.cea608Parser2;if(r&&a)for(var s=0;s<n.length;s++){var o=n[s].bytes;o&&(o=this.extractCea608Data(o),r.addData(n[s].pts,o[0]),a.addData(n[s].pts,o[1]))}}}},Vn.onBufferFlushing=function(e,t){var i,n,r=t.startOffset,a=t.endOffset,s=t.endOffsetSubtitles,o=(t=t.type,this.media);!o||o.currentTime<a||(t&&"video"!==t||(i=this.captionsTracks,Object.keys(i).forEach((function(e){return It(i[e],r,a)}))),this.config.renderTextTracksNatively&&0===r&&void 0!==s&&(n=this.textTracks,Object.keys(n).forEach((function(e){return It(n[e],r,s)}))))},Vn.extractCea608Data=function(e){for(var t=[[],[]],i=31&e[0],n=2,r=0;r<i;r++){var a=e[n++],s=127&e[n++],o=127&e[n++];0==s&&0==o||!(4&a)||0!=(a&=3)&&1!=a||(t[a].push(s),t[a].push(o))}return t},_r=vs,(Vn=Ts.prototype).setStreamController=function(e){this.streamController=e},Vn.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},Vn.registerListeners=function(){var e=this.hls;e.on(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.BUFFER_CODECS,this.onBufferCodecs,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this)},Vn.unregisterListener=function(){var e=this.hls;e.off(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.BUFFER_CODECS,this.onBufferCodecs,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this)},Vn.onFpsDropLevelCapping=function(e,t){t=this.hls.levels[t.droppedLevel],this.isLevelAllowed(t)&&this.restrictedLevels.push({bitrate:t.bitrate,height:t.height,width:t.width})},Vn.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null},Vn.onManifestParsed=function(e,t){var i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()},Vn.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},Vn.onMediaDetaching=function(){this.stopCapping()},Vn.detectPlayerSize=function(){var e,t,i;this.media&&(this.mediaHeight<=0||this.mediaWidth<=0?this.clientRect=null:(e=this.hls.levels).length&&(t=this.hls,(i=this.getMaxLevel(e.length-1))!==this.autoLevelCapping&&k.log("Setting autoLevelCapping to "+i+": "+e[i].height+"p@"+e[i].bitrate+" for media "+this.mediaWidth+"x"+this.mediaHeight),t.autoLevelCapping=i,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping))},Vn.getMaxLevel=function(e){var t=this,i=this.hls.levels;return i.length?(i=i.filter((function(i,n){return t.isLevelAllowed(i)&&n<=e})),this.clientRect=null,Ts.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)):-1},Vn.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},Vn.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},Vn.getDimensions=function(){var e,t,i;return this.clientRect||(t={width:0,height:0},(e=this.media)&&(i=e.getBoundingClientRect(),t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)),this.clientRect=t)},Vn.isLevelAllowed=function(e){return!this.restrictedLevels.some((function(t){return e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height}))},Ts.getMaxLevelByMediaSize=function(e,t,i){if(null==e||!e.length)return-1;for(var n,r=e.length-1,a=Math.max(t,i),s=0;s<e.length;s+=1){var o=e[s];if((o.width>=a||o.height>=a)&&(!(n=e[s+1])||o.width!==n.width||o.height!==n.height)){r=s;break}}return r},a(Ts,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}]),Vn=Ts;var As=((As=Ss.prototype).setStreamController=function(e){this.streamController=e},As.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},As.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},As.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},As.onMediaAttaching=function(e,t){var i=this.hls.config;i.capLevelOnFPSDrop&&(t=t.media instanceof self.HTMLVideoElement?t.media:null,(this.media=t)&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod))},As.checkFPS=function(e,t,i){var n,r,a,s,o=performance.now();t&&(this.lastTime&&(s=o-this.lastTime,n=i-this.lastDroppedFrames,r=t-this.lastDecodedFrames,s=1e3*n/s,(a=this.hls).trigger(w.FPS_DROP,{currentDropped:n,currentDecoded:r,totalDroppedFrames:i}),0<s)&&n>a.config.fpsDroppedMonitoringThreshold*r&&(s=a.currentLevel,k.warn("drop FPS ratio greater than max allowed value for currentLevel: "+s),0<s)&&(-1===a.autoLevelCapping||a.autoLevelCapping>=s)&&(a.trigger(w.FPS_DROP_LEVEL_CAPPING,{level:--s,droppedLevel:a.currentLevel}),a.autoLevelCapping=s,this.streamController.nextLevelSwitch()),this.lastTime=o,this.lastDroppedFrames=i,this.lastDecodedFrames=t)},As.checkFPSInterval=function(){var e,t=this.media;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},Ss),Es="[eme]",bs=((bs=ws.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},bs.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.MANIFEST_LOADED,this.onManifestLoaded,this)},bs.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.MANIFEST_LOADED,this.onManifestLoaded,this)},bs.getLicenseServerUrl=function(e){var t=(i=this.config).drmSystems,i=i.widevineLicenseUrl;if(t=t[e])return t.licenseUrl;if(e===$.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+e+'"')},bs.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},bs.attemptKeySystemAccess=function(e){function t(e,t,i){return!!e&&i.indexOf(e)===t}var i=this,n=this.hls.levels,r=n.map((function(e){return e.audioCodec})).filter(t),a=n.map((function(e){return e.videoCodec})).filter(t);return r.length+a.length===0&&a.push("avc1.42e01e"),new Promise((function(t,n){!function e(s){var o=s.shift();i.getMediaKeysPromise(o,r,a).then((function(e){return t({keySystem:o,mediaKeys:e})})).catch((function(t){s.length?e(s):n(t instanceof Ls?t:new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))}(e)}))},bs.requestMediaKeySystemAccess=function(e,t){var i,n=this.config.requestMediaKeySystemAccessFunc;return"function"!=typeof n?(i="Configured requestMediaKeySystemAccess is not a function "+n,null===le&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))):n(e,t)},bs.getMediaKeysPromise=function(e,t,i){var n,r=this,a=(t=function(e,t,i,n){var r,a;switch(e){case $.FAIRPLAY:r=["cenc","sinf"];break;case $.WIDEVINE:case $.PLAYREADY:r=["cenc"];break;case $.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return[{initDataTypes:r,persistentState:(a=n).persistentState||"not-allowed",distinctiveIdentifier:a.distinctiveIdentifier||"not-allowed",sessionTypes:a.sessionTypes||[a.sessionType||"temporary"],audioCapabilities:t.map((function(e){return{contentType:'audio/mp4; codecs="'+e+'"',robustness:a.audioRobustness||"",encryptionScheme:a.audioEncryptionScheme||null}})),videoCapabilities:i.map((function(e){return{contentType:'video/mp4; codecs="'+e+'"',robustness:a.videoRobustness||"",encryptionScheme:a.videoEncryptionScheme||null}}))}]}(e,t,i,this.config.drmSystemOptions),this.keySystemAccessPromises[e]);return(i=null==a?void 0:a.keySystemAccess)?i.then((function(){return a.mediaKeys})):(this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(t)),i=this.requestMediaKeySystemAccess(e,t),n=this.keySystemAccessPromises[e]={keySystemAccess:i},i.catch((function(t){r.log('Failed to obtain access to key-system "'+e+'": '+t)})),i.then((function(t){r.log('Access for key-system "'+t.keySystem+'" obtained');var i=r.fetchServerCertificate(e);return r.log('Create media-keys for "'+e+'"'),n.mediaKeys=t.createMediaKeys().then((function(t){return r.log('Media-keys created for "'+e+'"'),i.then((function(i){return i?r.setMediaKeysServerCertificate(t,e,i):t}))})),n.mediaKeys.catch((function(t){r.error('Failed to create media-keys for "'+e+'"}: '+t)})),n.mediaKeys})))},bs.createMediaKeySessionContext=function(e){var t=e.decryptdata,i=e.keySystem,n=(e=e.mediaKeys,this.log('Creating key-system session "'+i+'" keyId: '+be(t.keyId||[])),e.createSession());return t={decryptdata:t,keySystem:i,mediaKeys:e,mediaKeysSession:n,keyStatus:"status-pending"},this.mediaKeySessions.push(t),t},bs.renewKeySession=function(e){var t,i,n=e.decryptdata;n.pssh?(t=this.createMediaKeySessionContext(e),i=this.getKeyIdString(n),this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(t,"cenc",n.pssh,"expired")):this.warn("Could not renew expired session. Missing pssh initData."),this.removeSession(e)},bs.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return be(e.keyId)},bs.updateKeySession=function(e,t){var i=e.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+be((null==(e=e.decryptdata)?void 0:e.keyId)||[])+"\n      } (data length: "+(t&&t.byteLength)+")"),i.update(t)},bs.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},bs.getKeyFormatPromise=function(e){var t=this;return new Promise((function(i,n){var r=oe(t.config),a=e.map(re).filter((function(e){return!!e&&-1!==r.indexOf(e)}));return t.getKeySystemSelectionPromise(a).then((function(e){var t=se(e=e.keySystem);t?i(t):n(new Error('Unable to find format for key-system "'+e+'"'))})).catch(n)}))},bs.loadKey=function(e){var t=this,i=e.keyInfo.decryptdata,n=this.getKeyIdString(i),r="(keyId: "+n+' format: "'+i.keyFormat+'" method: '+i.method+" uri: "+i.uri+")",a=(this.log("Starting session for key "+r),this.keyIdToKeySessionPromise[n]);return a||(a=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(i).then((function(n){var a=n.keySystem,s=n.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+r),t.attemptSetMediaKeys(a,s).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({keySystem:a,mediaKeys:s,decryptdata:i});return t.generateRequestWithPreferredKeySession(e,"cenc",i.pssh,"playlist-key")}))}))).catch((function(e){return t.handleError(e)})),a},bs.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},bs.handleError=function(e){this.hls&&(this.error(e.message),e instanceof Ls?this.hls.trigger(w.ERROR,e.data):this.hls.trigger(w.ERROR,{type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},bs.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e);return(t=this.keyIdToKeySessionPromise[t])||(e=(t=re(e.keyFormat))?[t]:oe(this.config),this.attemptKeySystemAccess(e))},bs.getKeySystemSelectionPromise=function(e){if(0===(e=e.length?e:oe(this.config)).length)throw new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},bs._onMediaEncrypted=function(e){var t,i,n=this,r=e.initDataType,a=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+r+'"'),null!==a){if("sinf"===r&&this.config.drmSystems[$.FAIRPLAY]){var s=Ce(new Uint8Array(a));try{var o=q(JSON.parse(s).sinf),l=Fe(new Uint8Array(o));if(!l)return;t=l.subarray(8,24),i=$.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var h=function(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},i=new DataView(e),n=i.getUint32(0);if(e.byteLength!==n&&44<n)return null;if(1886614376!==i.getUint32(4))return null;if(t.version=i.getUint32(8)>>>24,1<t.version)return null;t.systemId=be(new Uint8Array(e,12,16));var r=i.getUint32(28);if(0===t.version){if(n-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(var a=0;a<r;a++)t.kids.push(new Uint8Array(e,32+16*a,16))}return t}(a);if(null===h)return;0===h.version&&h.systemId===ae&&h.data&&(t=h.data.subarray(8,24)),i=function(){if(h.systemId===ae)return $.WIDEVINE}()}if(i&&t){for(var u,d=be(t),c=this.keyIdToKeySessionPromise,f=this.mediaKeySessions,p=c[d],m=0;m<f.length&&(0===(u=function(){var e,i=f[m],s=i.decryptdata;return s.pssh||!s.keyId?0:(e=be(s.keyId),d===e||-1!==s.uri.replace(/-/g,"").indexOf(d)?(p=c[e],delete c[e],s.pssh=new Uint8Array(a),s.keyId=t,p=c[d]=p.then((function(){return n.generateRequestWithPreferredKeySession(i,r,a,"encrypted-event-key-match")})),1):void 0)}())||1!==u);m++);(p=p||(c[d]=this.getKeySystemSelectionPromise([i]).then((function(e){var i=e.keySystem,s=e.mediaKeys,o=(n.throwIfDestroyed(),new Ve("ISO-23001-7",d,null!=(e=se(i))?e:""));return o.pssh=new Uint8Array(a),o.keyId=t,n.attemptSetMediaKeys(i,s).then((function(){n.throwIfDestroyed();var e=n.createMediaKeySessionContext({decryptdata:o,keySystem:i,mediaKeys:s});return n.generateRequestWithPreferredKeySession(e,r,a,"encrypted-event-no-match")}))})))).catch((function(e){return n.handleError(e)}))}}},bs._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},bs.attemptSetMediaKeys=function(e,t){var i=this,n=this.setMediaKeysQueue.slice(),r=(this.log('Setting media-keys for "'+e+'"'),Promise.all(n).then((function(){if(i.media)return i.media.setMediaKeys(t);throw new Error("Attempted to set mediaKeys without media element attached")})));return this.setMediaKeysQueue.push(r),r.then((function(){i.log('Media-keys set for "'+e+'"'),n.push(r),i.setMediaKeysQueue=i.setMediaKeysQueue.filter((function(e){return-1===n.indexOf(e)}))}))},bs.generateRequestWithPreferredKeySession=function(e,t,i,n){var r,a,s,o=this,l=null==(l=this.config.drmSystems)||null==(l=l[e.keySystem])?void 0:l.generateRequest;if(l)try{var h=l.call(this.hls,t,i,e);if(!h)throw new Error("Invalid response from configured generateRequest filter");t=h.initDataType,i=e.decryptdata.pssh=h.initData?new Uint8Array(h.initData):null}catch(e){if(this.warn(e.message),null!=(l=this.hls)&&l.config.debug)throw e}return null===i?(this.log('Skipping key-session request for "'+n+'" (no initData)'),Promise.resolve(e)):(r=this.getKeyIdString(e.decryptdata),this.log('Generating key-session request for "'+n+'": '+r+" (init data type: "+t+" length: "+(i?i.byteLength:null)+")"),a=new Vr,e.mediaKeysSession.onmessage=function(t){var i,n=e.mediaKeysSession;n?(i=t.messageType,t=t.message,o.log('"'+i+'" message event for session "'+n.sessionId+'" message size: '+t.byteLength),"license-request"===i||"license-renewal"===i?o.renewLicense(e,t).catch((function(e){o.handleError(e),a.emit("error",e)})):"license-release"===i?e.keySystem===$.FAIRPLAY&&(o.updateKeySession(e,X("acknowledged")),o.removeSession(e)):o.warn('unhandled media key message type "'+i+'"')):a.emit("error",new Error("invalid state"))},e.mediaKeysSession.onkeystatuseschange=function(t){var i;e.mediaKeysSession?(o.onKeyStatusChange(e),i=e.keyStatus,a.emit("keyStatus",i),"expired"===i&&(o.warn(e.keySystem+" expired for key "+r),o.renewKeySession(e))):a.emit("error",new Error("invalid state"))},s=new Promise((function(e,t){a.on("error",t),a.on("keyStatus",(function(i){i.startsWith("usable")?e():"output-restricted"===i?t(new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===i?t(new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+i+'"')):"expired"===i?t(new Error("key expired while generating request")):o.warn('unhandled key status change "'+i+'"')}))})),e.mediaKeysSession.generateRequest(t,i).then((function(){var t;o.log('Request generated for key-session "'+(null==(t=e.mediaKeysSession)?void 0:t.sessionId)+'" keyId: '+r)})).catch((function(e){throw new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)})).then((function(){return s})).catch((function(t){throw a.removeAllListeners(),o.removeSession(e),t})).then((function(){return a.removeAllListeners(),e})))},bs.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach((function(i,n){t.log('key status change "'+i+'" for keyStatuses keyId: '+be("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))+" session keyId: "+be(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=i}))},bs.fetchServerCertificate=function(e){var t=this.config,i=new t.loader(t),r=this.getServerCertificateUrl(e);return r?(this.log('Fetching serverCertificate for "'+e+'"'),new Promise((function(a,s){var o={responseType:"arraybuffer",url:r},l={loadPolicy:l=t.certLoadPolicy.default,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};i.load(o,l,{onSuccess:function(e,t,i,n){a(e.data)},onError:function(t,i,a,l){s(new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:n({url:o.url,data:void 0},t)},'"'+e+'" certificate request failed ('+r+"). Status: "+t.code+" ("+t.text+")"))},onTimeout:function(t,i,n){s(new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:o.url,data:void 0}},'"'+e+'" certificate request timed out ('+r+")"))},onAbort:function(e,t,i){s(new Error("aborted"))}})}))):Promise.resolve()},bs.setMediaKeysServerCertificate=function(e,t,i){var n=this;return new Promise((function(r,a){e.setServerCertificate(i).then((function(a){n.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==i?void 0:i.byteLength)+') on "'+t+'"'),r(e)})).catch((function(e){a(new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))},bs.renewLicense=function(e,t){var i=this;return this.requestLicense(e,new Uint8Array(t)).then((function(t){return i.updateKeySession(e,new Uint8Array(t)).catch((function(e){throw new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}))},bs.setupLicenseXHR=function(e,t,i,n){var r=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(i.decryptdata)return a.call(r.hls,e,t,i,n);throw new Error("Key removed")})).catch((function(s){if(i.decryptdata)return e.open("POST",t,!0),a.call(r.hls,e,t,i,n);throw s})).then((function(i){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:i||n}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:n}))},bs.requestLicense=function(e,t){var i=this,n=this.config.keyLoadPolicy.default;return new Promise((function(r,a){var s=i.getLicenseServerUrl(e.keySystem),o=(i.log("Sending license request to URL: "+s),new XMLHttpRequest);o.responseType="arraybuffer",o.onreadystatechange=function(){if(!i.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===o.readyState)if(200===o.status){i._requestLicenseFailureCount=0;var l=o.response;if(i.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l)),h=i.config.licenseResponseCallback)try{l=h.call(i.hls,o,s,e)}catch(l){i.error(l)}r(l)}else{var h;l=(h=n.errorRetry)?h.maxNumRetry:0,i._requestLicenseFailureCount++,i._requestLicenseFailureCount>l||400<=o.status&&o.status<500?a(new Ls({type:S.KEY_SYSTEM_ERROR,details:T.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},"License Request XHR failed ("+s+"). Status: "+o.status+" ("+o.statusText+")")):(h=l-i._requestLicenseFailureCount+1,i.warn("Retrying license request, "+h+" attempts left"),i.requestLicense(e,t).then(r,a))}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,i.setupLicenseXHR(o,s,e,t).then((function(e){var t=e.xhr;e=e.licenseChallenge,t.send(e)}))}))},bs.onMediaAttached=function(e,t){this.config.emeEnabled&&(t=t.media,(this.media=t).addEventListener("encrypted",this.onMediaEncrypted),t.addEventListener("waitingforkey",this.onWaitingForKey))},bs.onMediaDetached=function(){var e=this,t=this.media,i=this.mediaKeySessions,n=(t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ve.clearKeyUriToKeyIdMap(),i.length);ws.CDMCleanupPromise=Promise.all(i.map((function(t){return e.removeSession(t)})).concat(null==t?void 0:t.setMediaKeys(null).catch((function(i){e.log("Could not clear media keys: "+i+". media.src: "+(null==t?void 0:t.src))})))).then((function(){n&&(e.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((function(i){e.log("Could not close sessions and clear media keys: "+i+". media.src: "+(null==t?void 0:t.src))}))},bs.onManifestLoading=function(){this.keyFormatPromise=null},bs.onManifestLoaded=function(e,t){(t=t.sessionKeys)&&this.config.emeEnabled&&!this.keyFormatPromise&&(t=t.reduce((function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e}),[]),this.log("Selecting key-system from session-keys "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t))},bs.removeSession=function(e){var t=this,i=e.mediaKeysSession,n=e.licenseXhr;if(i)return this.log("Remove licenses and keys and close session "+i.sessionId),i.onmessage=null,i.onkeystatuseschange=null,n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0,-1<(n=this.mediaKeySessions.indexOf(e))&&this.mediaKeySessions.splice(n,1),i.remove().catch((function(e){t.log("Could not remove session: "+e)})).then((function(){return i.close()})).catch((function(e){t.log("Could not close session: "+e)}))},ws);function ws(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=ws.CDMCleanupPromise?[ws.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=k.debug.bind(k,Es),this.log=k.log.bind(k,Es),this.warn=k.warn.bind(k,Es),this.error=k.error.bind(k,Es),this.hls=e,this.config=e.config,this.registerListeners()}function Ss(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}function Ts(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}bs.CDMCleanupPromise=void 0,o(Ms,Cs=d(Error));var Cs,Ls=Ms,Rs="a",Is="av",ks=((ks=xs.prototype).registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHED,this.onMediaDetached,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this)},ks.unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHED,this.onMediaDetached,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this)},ks.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},ks.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},ks.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},ks.onBufferCreated=function(e,t){var i;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(i=t.tracks.video)?void 0:i.buffer},ks.createData=function(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},ks.apply=function(e,t){s(t=void 0===t?{}:t,this.createData());var i="i"===t.ot||"v"===t.ot||t.ot===Is;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders?(i=xs.toHeaders(t),Object.keys(i).length&&(e.headers||(e.headers={}),s(e.headers,i))):(i=xs.toQuery(t))&&(e.url=xs.appendQueryToUri(e.url,i))},ks.getObjectType=function(e){var t=e.type;return"subtitle"===t?"tt":"initSegment"===e.sn?"i":"audio"===t?Rs:"main"===t?this.hls.audioTracks.length?"v":Is:void 0},ks.getTopBandwidth=function(e){for(var t=0,i=this.hls,n=f(e===Rs?i.audioTracks:(e=-1<(e=i.maxAutoLevel)?e+1:i.levels.length,i.levels.slice(0,e)));!(r=n()).done;){var r=r.value;r.bitrate>t&&(t=r.bitrate)}return 0<t?t:NaN},ks.getBufferLength=function(e){var t=this.hls.media;return(e=e===Rs?this.audioBuffer:this.videoBuffer)&&t?1e3*Si.bufferInfo(e,t.currentTime,this.config.maxBufferHole).len:NaN},ks.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,i=e||this.config.loader;return(e=n.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,i,n){t(e),this.loader.load(e,i,n)},a(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n;function n(e){this.loader=void 0,this.loader=new i(e)}},ks.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,i=e||this.config.loader;return(e=n.prototype).destroy=function(){this.loader.destroy()},e.abort=function(){this.loader.abort()},e.load=function(e,i,n){t(e),this.loader.load(e,i,n)},a(n,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),n;function n(e){this.loader=void 0,this.loader=new i(e)}},xs.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},xs.serialize=function(e){for(var t=[],i=function(e){return Math.round(e)},n=function(e){return 100*i(e/100)},r={br:i,d:i,bl:n,dl:n,mtp:n,nor:function(e){return encodeURIComponent(e)},rtp:n,tb:i},a=f(Object.keys(e||{}).sort());!(l=a()).done;){var s,o,l=l.value,h=e[l];s=h,Number.isNaN(s)||null==s||""===s||!1===s||"v"===l&&1===h||"pr"==l&&1===h||(s=typeof(h=(s=r[l])?s(h):h),o="ot"===l||"sf"===l||"st"===l?l+"="+h:"boolean"==s?l:"number"==s?l+"="+h:l+"="+JSON.stringify(h),t.push(o))}return t.join(",")},xs.toHeaders=function(e){for(var t={},i=["Object","Request","Session","Status"],n=[{},{},{},{}],r={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},a=0,s=Object.keys(e);a<s.length;a++){var o=s[a];n[null!=r[o]?r[o]:1][o]=e[o]}for(var l=0;l<n.length;l++){var h=xs.serialize(n[l]);h&&(t["CMCD-"+i[l]]=h)}return t},xs.toQuery=function(e){return"CMCD="+encodeURIComponent(xs.serialize(e))},xs.appendQueryToUri=function(e,t){var i;return t?(i=e.includes("?")?"&":"?",e+i+t):e},xs),Ps=((Ps=Ds.prototype).registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.ERROR,this.onError,this)},Ps.unregisterListeners=function(){var e=this.hls;e&&(e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.ERROR,this.onError,this))},Ps.startLoad=function(){var e;this.started=!0,this.clearTimeout(),this.enabled&&this.uri&&(this.updated?(e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0),this.scheduleRefresh(this.uri,e)):this.loadSteeringManifest(this.uri))},Ps.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()},Ps.clearTimeout=function(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)},Ps.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},Ps.removeLevel=function(e){var t=this.levels;t&&(this.levels=t.filter((function(t){return t!==e})))},Ps.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},Ps.onManifestLoaded=function(e,t){null!==(t=t.contentSteering)&&(this.pathwayId=t.pathwayId,this.uri=t.uri,this.started)&&this.startLoad()},Ps.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},Ps.onError=function(e,t){var i,n;2===(null==(t=t.errorAction)?void 0:t.action)&&1===t.flags&&(i=this.pathwayPriority,n=this.pathwayId,this.penalizedPathways[n]||(this.penalizedPathways[n]=performance.now()),i=!i&&this.levels?this.levels.reduce((function(e,t){return-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e}),[]):i)&&1<i.length&&(this.updatePathwayPriority(i),t.resolved=this.pathwayId!==n)},Ps.filterParsedLevels=function(e){this.levels=e;var t,i=this.getLevelsForPathway(this.pathwayId);return 0===i.length&&(t=e[0].pathwayId,this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+t+'"'),i=this.getLevelsForPathway(t),this.pathwayId=t),i.length!==e.length?(this.log("Found "+i.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),i):e},Ps.getLevelsForPathway=function(e){return null===this.levels?[]:this.levels.filter((function(t){return e===t.pathwayId}))},Ps.updatePathwayPriority=function(e){this.pathwayPriority=e;var t,i=this.penalizedPathways,n=performance.now();Object.keys(i).forEach((function(e){3e5<n-i[e]&&delete i[e]}));for(var r=0;r<e.length;r++){var a=e[r];if(!i[a]){if(a===this.pathwayId)return;var s=this.hls.nextLoadLevel,o=this.hls.levels[s];if(0<(t=this.getLevelsForPathway(a)).length){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,this.hls.trigger(w.LEVELS_UPDATED,{levels:t}),a=this.hls.levels[s],o&&a&&this.levels&&(a.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&a.bitrate!==o.bitrate&&this.log("Unstable Pathways change from bitrate "+o.bitrate+" to "+a.bitrate),this.hls.nextLoadLevel=s);break}}}},Ps.clonePathways=function(e){var t,i,n=this,r=this.levels;r&&(t={},i={},e.forEach((function(e){var a=e.ID,o=e["BASE-ID"],l=e["URI-REPLACEMENT"];r.some((function(e){return e.pathwayId===a}))||(e=n.getLevelsForPathway(o).map((function(e){var n=s({},e),r=((n.details=void 0,n.url=Bs(e.uri,e.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),e=new x(e.attrs))["PATHWAY-ID"]=a,e.AUDIO&&e.AUDIO+"_clone_"+a),o=e.SUBTITLES&&e.SUBTITLES+"_clone_"+a;return Yt((r&&(t[e.AUDIO]=r,e.AUDIO=r),o&&(i[e.SUBTITLES]=o,e.SUBTITLES=o),n.attrs=e,e=new Nt(n)),"audio",r),Yt(e,"text",o),e})),r.push.apply(r,e),Fs(n.audioTracks,t,l,a),Fs(n.subtitleTracks,i,l,a))})))},Ps.loadSteeringManifest=function(e){var t,i=this,n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);try{t=new self.URL(e)}catch(t){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}"data:"!==t.protocol&&(r=0|(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate),t.searchParams.set("_HLS_pathway",this.pathwayId),t.searchParams.set("_HLS_throughput",""+r)),e={responseType:"json",url:t.href},n=(r=n.steeringManifestLoadPolicy.default).errorRetry||r.timeoutRetry||{},r={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:n.maxNumRetry||0,retryDelay:n.retryDelayMs||0,maxRetryDelay:n.maxRetryDelayMs||0},n={onSuccess:function(e,n,r,a){i.log('Loaded steering manifest: "'+t+'"');var s=e.data;if(1===s.VERSION){i.updated=performance.now(),i.timeToLoad=s.TTL;var o=s["RELOAD-URI"],l=s["PATHWAY-CLONES"],h=s["PATHWAY-PRIORITY"];if(o)try{i.uri=new self.URL(o,t).href}catch(e){return i.enabled=!1,void i.log("Failed to parse Steering Manifest RELOAD-URI: "+o)}i.scheduleRefresh(i.uri||r.url),l&&i.clonePathways(l),o={steeringManifest:s,url:t.toString()},i.hls.trigger(w.STEERING_MANIFEST_LOADED,o),h&&i.updatePathwayPriority(h)}else i.log("Steering VERSION "+s.VERSION+" not supported!")},onError:function(e,t,n,r){var a;i.log("Error loading steering manifest: "+e.code+" "+e.text+" ("+t.url+")"),i.stopLoad(),410===e.code?(i.enabled=!1,i.log("Steering manifest "+t.url+" no longer available")):(a=1e3*i.timeToLoad,429!==e.code?i.scheduleRefresh(i.uri||t.url,a):("function"==typeof(null==(e=i.loader)?void 0:e.getResponseHeader)&&(e=e.getResponseHeader("Retry-After"))&&(a=1e3*parseFloat(e)),i.log("Steering manifest "+t.url+" rate limited")))},onTimeout:function(e,t,n){i.log("Timeout loading steering manifest ("+t.url+")"),i.scheduleRefresh(i.uri||t.url)}},this.log("Requesting steering manifest: "+t),this.loader.load(e,r,n)},Ps.scheduleRefresh=function(e,t){var i=this;void 0===t&&(t=1e3*this.timeToLoad),this.clearTimeout(),this.reloadTimer=self.setTimeout((function(){i.loadSteeringManifest(e)}),t)},Ds);function Ds(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=k.log.bind(k,"[content-steering]:"),this.registerListeners()}function xs(e){var t=this,i=(this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1},this.applyPlaylistData=function(e){try{t.apply(e,{ot:"m",su:!t.initialized})}catch(e){k.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var i=e.frag,n=t.hls.levels[i.level],r=t.getObjectType(i),a={d:1e3*i.duration,ot:r};"v"!==r&&r!==Rs&&r!=Is||(a.br=n.bitrate/1e3,a.tb=t.getTopBandwidth(r)/1e3,a.bl=t.getBufferLength(r)),t.apply(e,a)}catch(e){k.warn("Could not generate segment CMCD data.",e)}},this.hls=e,(e=this.config=e.config).cmcd);null!=i&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||xs.uuid(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.registerListeners())}function Ms(e,t){var i;return(i=Cs.call(this,t)||this).data=void 0,e.error||(e.error=new Error(t)),(i.data=e).err=e.error,i}function Fs(e,t,i,n){e&&Object.keys(t).forEach((function(r){var a=e.filter((function(e){return e.groupId===r})).map((function(e){var a=s({},e);return a.details=void 0,a.attrs=new x(a.attrs),a.url=a.attrs.URI=Bs(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),a.groupId=a.attrs["GROUP-ID"]=t[r],a.attrs["PATHWAY-ID"]=n,a}));e.push.apply(e,a)}))}function Bs(e,t,i,n){var r,a=n.HOST,s=n.PARAMS,o=(n=n[i],t&&(r=null==n?void 0:n[t])&&(e=r),new self.URL(e));return a&&!r&&(o.host=a),s&&Object.keys(s).sort().forEach((function(e){e&&o.searchParams.set(e,s[e])})),o.href}var Os=/^age:\s*[\d.]+\s*$/im,Us=((Xs=Gs.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null},Xs.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState)&&(this.stats.aborted=!0,e.abort())},Xs.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},Xs.load=function(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()},Xs.loadInternal=function(){var e,t,i,n=this,r=this.config,a=this.context;r&&a&&(e=this.loader=new self.XMLHttpRequest,(t=this.stats).loading.first=0,t.loaded=0,t.aborted=!1,(i=this.xhrSetup)?Promise.resolve().then((function(){if(!n.stats.aborted)return i(e,a.url)})).catch((function(t){return e.open("GET",a.url,!0),i(e,a.url)})).then((function(){n.stats.aborted||n.openAndSendXhr(e,a,r)})).catch((function(i){n.callbacks.onError({code:e.status,text:i.message},a,e,t)})):this.openAndSendXhr(e,a,r))},Xs.openAndSendXhr=function(e,t,i){e.readyState||e.open("GET",t.url,!0),t.url.includes("playerId")&&(t.responseType="text");var n=t.headers,r=(a=i.loadPolicy).maxTimeToFirstByteMs,a=a.maxLoadTimeMs;if(n)for(var s in n)e.setRequestHeader(s,n[s]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&b(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()},Xs.readystatechange=function(){var e,t,i,n,r=this.context,a=this.loader,s=this.stats;r&&a&&(t=a.readyState,e=this.config,!s.aborted)&&2<=t&&(0===s.loading.first&&(s.loading.first=Math.max(self.performance.now(),s.loading.start),e.timeout!==e.loadPolicy.maxLoadTimeMs)&&(self.clearTimeout(this.requestTimeout),e.timeout=e.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.loadPolicy.maxLoadTimeMs-(s.loading.first-s.loading.start))),4===t)&&(self.clearTimeout(this.requestTimeout),a.onreadystatechange=null,a.onprogress=null,t=a.status,n="text"!==a.responseType,200<=t&&t<300&&(n&&a.response||null!==a.responseText)?(s.loading.end=Math.max(self.performance.now(),s.loading.first),n=n?a.response:a.responseText,i="arraybuffer"===a.responseType?n.byteLength:n.length,s.loaded=s.total=i,s.bwEstimate=8e3*s.total/(s.loading.end-s.loading.first),this.callbacks&&((i=this.callbacks.onProgress)&&i(s,r,n,a),this.callbacks)&&(i={url:a.responseURL,data:n,code:t},this.callbacks.onSuccess(i,s,r,a))):ti(n=e.loadPolicy.errorRetry,s.retry,!1,t)?this.retry(n):(k.error(t+" while loading "+r.url),this.callbacks.onError({code:t,text:a.statusText},r,a,s)))},Xs.loadtimeout=function(){var e=null==(e=this.config)?void 0:e.loadPolicy.timeoutRetry;ti(e,this.stats.retry,!0)?this.retry(e):(k.warn("timeout while loading "+(null==(e=this.context)?void 0:e.url)),(e=this.callbacks)&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader)))},Xs.retry=function(e){var t=this.context,i=this.stats;this.retryDelay=$t(e,i.retry),i.retry++,k.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+(null==t?void 0:t.url)+", retrying "+i.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},Xs.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},Xs.getCacheAge=function(){var e,t=null;return this.loader&&Os.test(this.loader.getAllResponseHeaders())?(e=this.loader.getResponseHeader("age"))?parseFloat(e):null:t},Xs.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},Gs),Ns=/(\d+)-(\d+)\/(\d+)/,js=((Xs=Vs.prototype).destroy=function(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null},Xs.abortInternal=function(){var e=this.response;!this.controller||null!=e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},Xs.abort=function(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},Xs.load=function(e,t,i){var n=this,r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();var a=function(e,t){return t={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(s({},e.headers))},e.rangeEnd&&t.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),t}(e,this.controller.signal),o=i.onProgress,l="arraybuffer"===e.responseType,h=l?"byteLength":"length",u=t.loadPolicy,d=u.maxTimeToFirstByteMs,c=u.maxLoadTimeMs;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=d&&b(d)?d:c,this.requestTimeout=self.setTimeout((function(){n.abortInternal(),i.onTimeout(r,e,n.response)}),t.timeout),self.fetch(this.request).then((function(a){n.response=n.loader=a;var s,h=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(n.requestTimeout),t.timeout=c,n.requestTimeout=self.setTimeout((function(){n.abortInternal(),i.onTimeout(r,e,n.response)}),c-(h-r.loading.start)),a.ok)return r.loading.first=h,r.total=function(e){var t=e.get("Content-Range");if(t){var i=function(){var e=Ns.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}();if(b(i))return i}if(i=e.get("Content-Length"))return parseInt(i)}(a.headers)||r.total,o&&b(t.highWaterMark)?n.loadProgressively(a,r,e,t.highWaterMark,o):l?a.arrayBuffer():"json"===e.responseType?a.json():a.text();throw h=a.status,s=a.statusText,new zs(s||"fetch, bad network response",h,a)})).then((function(a){var s=n.response;if(!s)throw new Error("loader destroyed");self.clearTimeout(n.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);var l=((l=a[h])&&(r.loaded=r.total=l),{url:s.url,data:a,code:s.status});o&&!b(t.highWaterMark)&&o(r,e,a,s),i.onSuccess(l,r,e,s)})).catch((function(t){var a,s;self.clearTimeout(n.requestTimeout),r.aborted||(a=t&&t.code||0,s=t?t.message:null,i.onError({code:a,text:s},e,t?t.details:null,r))}))},Xs.getCacheAge=function(){var e,t=null;return this.response?(e=this.response.headers.get("age"))?parseFloat(e):null:t},Xs.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},Xs.loadProgressively=function(e,t,i,n,r){void 0===n&&(n=0);var a=new en,s=e.body.getReader();return function o(){return s.read().then((function(s){var l;return s.done?(a.dataLength&&r(t,i,a.flush(),e),Promise.resolve(new ArrayBuffer(0))):(l=(s=s.value).length,t.loaded+=l,l<n||a.dataLength?(a.push(s),a.dataLength>=n&&r(t,i,a.flush(),e)):r(t,i,s,e),o())})).catch((function(){return Promise.reject()}))}()},Vs);function Vs(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Hs,this.controller=new self.AbortController,this.stats=new U}function Gs(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new U,this.retryDelay=0}function Hs(e,t){return new self.Request(e.url,t)}o(Js,Ws=d(Error));var Ys,Ws,zs=Js,Qs=/\s/,Ks=n(n({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Us,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:li,bufferController:An,capLevelController:Vn,errorController:G,fpsController:As,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:le,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(e,t,i,n){for(var r,a,s,o,l=[],h=self.VTTCue||self.TextTrackCue,u=0;u<n.rows.length;u++)if(a=!0,s=0,o="",!(r=n.rows[u]).isEmpty()){for(var d,c=0;c<r.chars.length;c++)Qs.test(r.chars[c].uchar)&&a?s++:(o+=r.chars[c].uchar,a=!1);(r.cueStartTime=t)===i&&(i+=1e-4),16<=s?s--:s++;var f=is(o.trim()),p=ls(t,i,f);null!=e&&null!=(d=e.cues)&&d.getCueById(p)||((d=new h(t,i,f)).id=p,d.line=u+1,d.align="left",d.position=10+Math.min(80,10*Math.floor(8*s/32)),l.push(d))}return e&&l.length&&(l.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:8<e.line&&8<t.line?t.line-e.line:e.line-t.line})),l.forEach((function(t){return Lt(e,t)}))),l}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Sr,subtitleTrackController:rr,timelineController:_r,audioStreamController:Bn,audioTrackController:bn,emeController:bs,cmcdController:ks,contentSteeringController:Ps});function Js(e,t,i){return(e=Ws.call(this,e)||this).code=void 0,e.details=void 0,e.code=t,e.details=i,e}function Zs(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Zs):Object.keys(e).reduce((function(t,i){return t[i]=Zs(e[i]),t}),{}):e}o(To,qs=ai),(Xs=To.prototype)._registerListeners=function(){var e=this.hls;e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(w.FRAG_LOADED,this.onFragLoaded,this),e.on(w.ERROR,this.onError,this)},Xs._unregisterListeners=function(){var e=this.hls;e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(w.FRAG_LOADED,this.onFragLoaded,this),e.off(w.ERROR,this.onError,this)},Xs.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),qs.prototype.destroy.call(this)},Xs.stopLoad=function(){this._levels.forEach((function(e){e.loadError=0,e.fragmentError=0})),qs.prototype.stopLoad.call(this)},Xs.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},Xs.onManifestLoading=function(e,t){this.resetLevels()},Xs.onManifestLoaded=function(e,t){var i,n=[],r={};t.levels.forEach((function(e){var t=e.attrs,a=(-1!==(null==(a=e.audioCodec)?void 0:a.indexOf("mp4a.40.34"))&&(Ys=Ys||/chrome|firefox/i.test(navigator.userAgent))&&(e.audioCodec=void 0),e.audioCodec&&(e.audioCodec=tt(e.audioCodec)),t.AUDIO),s=t.CODECS,o=t["FRAME-RATE"],l=t["PATHWAY-ID"],h=t.RESOLUTION;t=t.SUBTITLES,l=(l||".")+"-"+e.bitrate+"-"+h+"-"+o+"-"+s,(i=r[l])?i.addFallback(e):(i=new Nt(e),r[l]=i,n.push(i)),Yt(i,"audio",a),Yt(i,"text",t)})),this.filterAndSortMediaOptions(n,t)},Xs.filterAndSortMediaOptions=function(e,t){var i=this,n=[],r=[],a=!1,s=!1,o=!1,l=e.filter((function(e){var t=e.audioCodec,i=e.videoCodec,n=e.width,r=e.height;return e=e.unknownCodecs,a=a||!(!n||!r),s=s||!!i,o=o||!!t,!(null!=e&&e.length)&&(!t||qe(t,"audio"))&&(!i||qe(i,"video"))}));if(0!==(l=(a||s)&&o?l.filter((function(e){var t=e.videoCodec,i=e.width;return e=e.height,!!t||!(!i||!e)})):l).length){t.audioTracks&&Co(n=t.audioTracks.filter((function(e){return!e.audioCodec||qe(e.audioCodec,"audio")}))),t.subtitles&&Co(r=t.subtitles);var h=l.slice(0),u=(l.sort((function(e,t){return e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs["FRAME-RATE"]!==t.attrs["FRAME-RATE"]?e.attrs.decimalFloatingPoint("FRAME-RATE")-t.attrs.decimalFloatingPoint("FRAME-RATE"):e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):a&&e.height!==t.height?e.height-t.height:0})),h[0]);if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==h.length)for(var d=0;d<h.length;d++)if(h[d].pathwayId===l[0].pathwayId){u=h[d];break}this._levels=l;for(var c=0;c<l.length;c++)if(l[c]===u){this._firstLevel=c;var f,p=u.bitrate,m=this.hls.bandwidthEstimate;this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+p),void 0===(null==(f=this.hls.userConfig)?void 0:f.abrEwmaDefaultEstimate)&&m<(f=Math.min(p,this.hls.config.abrEwmaDefaultEstimateMax))&&m===Ks.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=f);break}var g=o&&!s;r={levels:l,audioTracks:n,subtitleTracks:r,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:s,altAudio:!g&&n.some((function(e){return!!e.url}))},this.hls.trigger(w.MANIFEST_PARSED,r),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){var n;i.hls&&(e.length&&i.warn('One or more CODECS in variant not supported: "'+e[0].attrs.CODECS+'"'),n=new Error("no level with compatible codecs found in manifest"),i.hls.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:n,reason:n.message}))}))},Xs.onError=function(e,t){!t.fatal&&t.context&&t.context.type===gt&&t.context.level===this.level&&this.checkRetry(t)},Xs.onFragLoaded=function(e,t){void 0!==(t=t.frag)&&t.type===vt&&void 0!==(t=this._levels[t.level])&&(t.loadError=0)},Xs.onLevelLoaded=function(e,t){var i=t.level,n=t.details,r=this._levels[i];r?i===this.currentLevelIndex?(0===r.fragmentError&&(r.loadError=0),this.playlistLoaded(i,t,r.details)):null!=(r=t.deliveryDirectives)&&r.skip&&(n.deltaUpdateFailed=!0):(this.warn("Invalid level index "+i),null!=(r=t.deliveryDirectives)&&r.skip&&(n.deltaUpdateFailed=!0))},Xs.onAudioTrackSwitched=function(e,t){var i=this.currentLevel;if(i){var n=this.hls.audioTracks[t.id].groupId;if(i.audioGroupIds&&i.audioGroupId!==n){for(var r=-1,a=0;a<i.audioGroupIds.length;a++)if(i.audioGroupIds[a]===n){r=a;break}-1!==r&&r!==i.urlId&&(i.urlId=r,this.canLoad)&&this.startLoad()}}},Xs.loadPlaylist=function(e){qs.prototype.loadPlaylist.call(this);var t=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var n=i.urlId,r=i.uri;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}var a=i.attrs["PATHWAY-ID"];this.log("Loading level index "+t+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(a?" Pathway "+a:"")+" URI "+(n+1)+"/"+i.url.length+" "+r),this.clearTimer(),this.hls.trigger(w.LEVEL_LOADING,{url:r,level:t,id:n,deliveryDirectives:e||null})}},Xs.removeLevel=function(e,t){function i(e,i){return i!==t}var n=this,r=this._levels.filter((function(r,a){return!(a===e&&(1<r.url.length&&void 0!==t?(r.url=r.url.filter(i),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(i)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(i)),r.urlId=0):(n.steering&&n.steering.removeLevel(r),1)))}));this.hls.trigger(w.LEVELS_UPDATED,{levels:r})},Xs.onLevelsUpdated=function(e,t){(t=t.levels).forEach((function(e,t){null!=(e=e.details)&&e.fragments&&e.fragments.forEach((function(e){e.level=t}))})),this._levels=t},a(To,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){if(0!==(n=this._levels).length){if(e<0||e>=n.length){var t=new Error("invalid level idx"),i=e<0;if(this.hls.trigger(w.ERROR,{type:S.OTHER_ERROR,details:T.LEVEL_SWITCH_ERROR,level:e,fatal:i,error:t,reason:t.message}),i)return;e=Math.min(e,n.length-1)}t=this.currentLevelIndex;var n,r=(i=this.currentLevel)?i.attrs["PATHWAY-ID"]:void 0,a=(n=n[e]).attrs["PATHWAY-ID"];this.currentLevelIndex=e,this.currentLevel=n,t===e&&n.details&&i&&r===a||(this.log("Switching to level "+e+(a?" with Pathway "+a:"")+" from level "+t+(r?" with Pathway "+r:"")),delete(a=s({},n,{level:e,maxBitrate:n.maxBitrate,attrs:n.attrs,uri:n.uri,urlId:n.urlId}))._attrs,delete a._urlId,delete a._avgBitrate,this.hls.trigger(w.LEVEL_SWITCHING,a),(t=n.details)&&!t.live)||(r=this.switchParams(n.uri,null==i?void 0:i.details),this.loadPlaylist(r))}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){var e;return void 0===this._startLevel?void 0!==(e=this.hls.config.startLevel)?e:this._firstLevel:this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]);var qs,Xs,$s,eo,to,io,no,ro,ao,so,oo,lo,ho,uo,co,fo,po,mo,go,_o,yo,vo,Ao,Eo,bo,wo,So=To;function To(e,t){return(e=qs.call(this,e,"[level-controller]")||this)._levels=[],e._firstLevel=-1,e._startLevel=void 0,e.currentLevel=null,e.currentLevelIndex=-1,e.manualLevelIndex=-1,e.steering=void 0,e.onParsedComplete=void 0,e.steering=t,e._registerListeners(),e}function Co(e){var t={};e.forEach((function(e){var i=e.groupId||"";e.id=t[i]=t[i]||0,t[i]++}))}
/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */function Lo(e){return parseInt(e)===e}function Ro(e){if(Lo(e.length)){for(var t=0;t<e.length;t++)if(!Lo(e[t])||e[t]<0||255<e[t])return;return 1}}function Io(e,t){if(e.buffer&&"Uint8Array"===e.name)return t?e.slice?e.slice():Array.prototype.slice.call(e):e;if(Array.isArray(e)){if(Ro(e))return new Uint8Array(e);throw new Error("Array contains invalid value: "+e)}if(Lo(e.length)&&Ro(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function ko(e){return new Uint8Array(e)}function Po(e,t,i,n,r){null==n&&null==r||(e=e.slice?e.slice(n,r):Array.prototype.slice.call(e,n,r)),t.set(e,i)}function Do(e){for(var t=[],i=0;i<e.length;i+=4)t.push(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]);return t}An=li={exports:{}},Vn={toBytes:function(e){var t=[],i=0;for(e=encodeURI(e);i<e.length;){var n=e.charCodeAt(i++);37===n?(t.push(parseInt(e.substr(i,2),16)),i+=2):t.push(n)}return Io(t)},fromBytes:function(e){for(var t=[],i=0;i<e.length;){var n=e[i];n<128?(t.push(String.fromCharCode(n)),i++):191<n&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[i+1])),i+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[i+1])<<6|63&e[i+2])),i+=3)}return t.join("")}},$s="0123456789abcdef",G={toBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},fromBytes:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push($s[(240&n)>>4]+$s[15&n])}return t.join("")}},eo={16:10,24:12,32:14},to=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],io=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],no=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ro=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],ao=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],so=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],oo=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],lo=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],ho=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],uo=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],co=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],fo=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],po=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],mo=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],go=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925],(_o=function(e){if(!(this instanceof _o))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:Io(e,!0)}),this._prepare()}).prototype._prepare=function(){var e=eo[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var i,n=4*(e+1),r=this.key.length/4,a=Do(this.key);for(t=0;t<r;t++)this._Ke[i=t>>2][t%4]=a[t],this._Kd[e-i][t%4]=a[t];for(var s,o=0,l=r;l<n;){if(s=a[r-1],a[0]^=io[s>>16&255]<<24^io[s>>8&255]<<16^io[255&s]<<8^io[s>>24&255]^to[o]<<24,o+=1,8!=r)for(t=1;t<r;t++)a[t]^=a[t-1];else{for(t=1;t<r/2;t++)a[t]^=a[t-1];for(s=a[r/2-1],a[r/2]^=io[255&s]^io[s>>8&255]<<8^io[s>>16&255]<<16^io[s>>24&255]<<24,t=r/2+1;t<r;t++)a[t]^=a[t-1]}for(t=0;t<r&&l<n;)this._Ke[h=l>>2][u=l%4]=a[t],this._Kd[e-h][u]=a[t++],l++}for(var h=1;h<e;h++)for(var u=0;u<4;u++)s=this._Kd[h][u],this._Kd[h][u]=fo[s>>24&255]^po[s>>16&255]^mo[s>>8&255]^go[255&s]},_o.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,i=[0,0,0,0],n=Do(e),r=0;r<4;r++)n[r]^=this._Ke[0][r];for(var a=1;a<t;a++){for(r=0;r<4;r++)i[r]=ro[n[r]>>24&255]^ao[n[(r+1)%4]>>16&255]^so[n[(r+2)%4]>>8&255]^oo[255&n[(r+3)%4]]^this._Ke[a][r];n=i.slice()}var s,o=ko(16);for(r=0;r<4;r++)s=this._Ke[t][r],o[4*r]=255&(io[n[r]>>24&255]^s>>24),o[4*r+1]=255&(io[n[(r+1)%4]>>16&255]^s>>16),o[4*r+2]=255&(io[n[(r+2)%4]>>8&255]^s>>8),o[4*r+3]=255&(io[255&n[(r+3)%4]]^s);return o},_o.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,i=[0,0,0,0],n=Do(e),r=0;r<4;r++)n[r]^=this._Kd[0][r];for(var a=1;a<t;a++){for(r=0;r<4;r++)i[r]=lo[n[r]>>24&255]^ho[n[(r+3)%4]>>16&255]^uo[n[(r+2)%4]>>8&255]^co[255&n[(r+1)%4]]^this._Kd[a][r];n=i.slice()}var s,o=ko(16);for(r=0;r<4;r++)s=this._Kd[t][r],o[4*r]=255&(no[n[r]>>24&255]^s>>24),o[4*r+1]=255&(no[n[(r+3)%4]>>16&255]^s>>16),o[4*r+2]=255&(no[n[(r+2)%4]>>8&255]^s>>8),o[4*r+3]=255&(no[255&n[(r+1)%4]]^s);return o},(yo=function(e){if(!(this instanceof yo))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new _o(e)}).prototype.encrypt=function(e){if((e=Io(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=ko(e.length),i=ko(16),n=0;n<e.length;n+=16)Po(e,i,0,n,n+16),Po(i=this._aes.encrypt(i),t,n);return t},yo.prototype.decrypt=function(e){if((e=Io(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=ko(e.length),i=ko(16),n=0;n<e.length;n+=16)Po(e,i,0,n,n+16),Po(i=this._aes.decrypt(i),t,n);return t},(vo=function(e,t){if(!(this instanceof vo))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=ko(16);this._lastCipherblock=Io(t,!0),this._aes=new _o(e)}).prototype.encrypt=function(e){if((e=Io(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=ko(e.length),i=ko(16),n=0;n<e.length;n+=16){Po(e,i,0,n,n+16);for(var r=0;r<16;r++)i[r]^=this._lastCipherblock[r];this._lastCipherblock=this._aes.encrypt(i),Po(this._lastCipherblock,t,n)}return t},vo.prototype.decrypt=function(e){if((e=Io(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=ko(e.length),i=ko(16),n=0;n<e.length;n+=16){Po(e,i,0,n,n+16),i=this._aes.decrypt(i);for(var r=0;r<16;r++)t[n+r]=i[r]^this._lastCipherblock[r];Po(e,this._lastCipherblock,0,n,n+16)}return t},(Ao=function(e,t,i){if(!(this instanceof Ao))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=ko(16);this.segmentSize=i=i||1,this._shiftRegister=Io(t,!0),this._aes=new _o(e)}).prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t=Io(e,!0),i=0;i<t.length;i+=this.segmentSize){for(var n=this._aes.encrypt(this._shiftRegister),r=0;r<this.segmentSize;r++)t[i+r]^=n[r];Po(this._shiftRegister,this._shiftRegister,0,this.segmentSize),Po(t,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return t},Ao.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t=Io(e,!0),i=0;i<t.length;i+=this.segmentSize){for(var n=this._aes.encrypt(this._shiftRegister),r=0;r<this.segmentSize;r++)t[i+r]^=n[r];Po(this._shiftRegister,this._shiftRegister,0,this.segmentSize),Po(e,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return t},(Eo=function(e,t){if(!(this instanceof Eo))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=ko(16);this._lastPrecipher=Io(t,!0),this._lastPrecipherIndex=16,this._aes=new _o(e)}).prototype.encrypt=function(e){for(var t=Io(e,!0),i=0;i<t.length;i++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[i]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},Eo.prototype.decrypt=Eo.prototype.encrypt,(bo=function(e){if(!(this instanceof bo))throw Error("Counter must be instanitated with `new`");"number"==typeof(e=0!==e?e||1:e)?(this._counter=ko(16),this.setValue(e)):this.setBytes(e)}).prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");if(e>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var t=15;0<=t;--t)this._counter[t]=e%256,e=parseInt(e/256)},bo.prototype.setBytes=function(e){if(16!=(e=Io(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},bo.prototype.increment=function(){for(var e=15;0<=e;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}},(wo=function(e,t){if(!(this instanceof wo))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof bo||(t=new bo(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new _o(e)}).prototype.encrypt=function(e){for(var t=Io(e,!0),i=0;i<t.length;i++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[i]^=this._remainingCounter[this._remainingCounterIndex++];return t},wo.prototype.decrypt=wo.prototype.encrypt,An.exports={AES:_o,Counter:bo,ModeOfOperation:{ecb:yo,cbc:vo,cfb:Ao,ofb:Eo,ctr:wo},utils:{hex:G,utf8:Vn},padding:{pkcs7:{pad:function(e){var t=16-(e=Io(e,!0)).length%16,i=ko(e.length+t);Po(e,i);for(var n=e.length;n<i.length;n++)i[n]=t;return i},strip:function(e){if((e=Io(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(16<t)throw new Error("PKCS#7 padding byte out of range");for(var i=e.length-t,n=0;n<t;n++)if(e[i+n]!==t)throw new Error("PKCS#7 invalid padding byte");var r=ko(i);return Po(e,r,0,0,i),r}}},_arrayTest:{coerceArray:Io,createArray:ko,copyArray:Po}};var xo=m(li.exports),Mo=((As=Fo.prototype).abort=function(e){for(var t in this.keyUriToKeyInfo){var i;if(t=this.keyUriToKeyInfo[t].loader){if(e&&e!==(null==(i=t.context)?void 0:i.frag.type))return;t.abort()}}},As.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},As.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo)(e=this.keyUriToKeyInfo[e].loader)&&e.destroy();this.keyUriToKeyInfo={}},As.createKeyLoadError=function(e,t,i,n,r){return void 0===t&&(t=T.KEY_LOAD_ERROR),new Oi({type:S.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:n})},As.loadClear=function(e,t){var i=this;if(this.emeController&&this.config.emeEnabled)for(var n=e.sn,r=e.cc,a=0;a<t.length&&!function(){var e=t[a];if(r<=e.cc&&("initSegment"===n||"initSegment"===e.sn||n<e.sn))return i.emeController.selectKeySystemFormat(e).then((function(t){e.setKeyFormat(t)})),1}();a++);},As.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((function(i){return t.loadInternal(e,i)})):this.loadInternal(e)},As.loadInternal=function(e,t){t&&e.setKeyFormat(t);var i=e.decryptdata;if(!i)return t=new Error(t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading"),Promise.reject(this.createKeyLoadError(e,T.KEY_LOAD_ERROR,t));if(!(t=i.uri))return Promise.reject(this.createKeyLoadError(e,T.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+t+'"')));var n,r=this.keyUriToKeyInfo[t];if(null!=r&&r.decryptdata.key)return i.key=r.decryptdata.key,Promise.resolve({frag:e,keyInfo:r});if(null!=r&&r.keyLoadPromise)switch(null==(n=r.mediaKeySessionContext)?void 0:n.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return r.keyLoadPromise.then((function(t){return i.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:r}}))}switch(r=this.keyUriToKeyInfo[t]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(r,e):this.loadKeyEME(r,e);case"AES-128":return this.loadKeyHTTP(r,e);default:return Promise.reject(this.createKeyLoadError(e,T.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+i.method+'"')))}},As.loadKeyEME=function(e,t){var i={frag:t,keyInfo:e};return this.emeController&&this.config.emeEnabled&&(t=this.emeController.loadKey(i))?(e.keyLoadPromise=t.then((function(t){return e.mediaKeySessionContext=t,i}))).catch((function(t){throw e.keyLoadPromise=null,t})):Promise.resolve(i)},As.loadKeyHTTP=function(e,t){var i=this,r=this.config,a=new r.loader(r);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((function(s,o){var l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},h={loadPolicy:h=r.keyLoadPolicy.default,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0};a.load(l,h,{onSuccess:function(e,t,n,r){var a=n.frag,l=n.keyInfo;if(n=n.url,!a.decryptdata||l!==i.keyUriToKeyInfo[n])return o(i.createKeyLoadError(a,T.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));if(n.includes("playerId")){for(var h=JSON.parse(e.data).encryptedVideoKey,u=(r=xo.utils.utf8.toBytes("72Fhskjglp8qjpqx"),n=new xo.ModeOfOperation.ecb(r),[]),d=0;d<h.length;d+=2)u.push(parseInt(h[d]+h[d+1],16));r=n.decrypt(u);for(var c=xo.utils.utf8.fromBytes(r),f=(n=new ArrayBuffer(c.length),new Uint8Array(n)),p=(d=0,c.length);d<p;d++)f[d]=c.charCodeAt(d);l.decryptdata.key=f}else l.decryptdata.key=a.decryptdata.key=new Uint8Array(e.data);a.keyLoader=null,l.loader=null,s({frag:a,keyInfo:l})},onError:function(e,r,a,s){i.resetLoader(r),o(i.createKeyLoadError(t,T.KEY_LOAD_ERROR,new Error("HTTP Error "+e.code+" loading key "+e.text),a,n({url:l.url,data:void 0},e)))},onTimeout:function(e,n,r){i.resetLoader(n),o(i.createKeyLoadError(t,T.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:function(e,n,r){i.resetLoader(n),o(i.createKeyLoadError(t,T.INTERNAL_ABORTED,new Error("key loading aborted"),r))}})}))},As.resetLoader=function(e){var t=e.frag,i=e.keyInfo,n=(e=e.url,i.loader);t.keyLoader===n&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[e],n&&n.destroy()},Fo);function Fo(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}function Bo(){return self.SourceBuffer||self.WebKitSourceBuffer}(Sr=Go.prototype).destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},Sr.poll=function(e,t){var i=this.config,n=this.media,r=this.stalled;if(null!==n){var a=n.currentTime,s=n.seeking,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,a===e){if(l||o)this.stalled=null;else if(!(n.paused&&!s||n.ended||0===n.playbackRate)&&Si.getBuffered(n).length&&(l=0<(e=Si.bufferInfo(n,a,0)).len,o=e.nextStart||0,l||o)){if(s){if(l=2<e.len,t=!o||t&&t.start<=a||2<o-a&&!this.fragmentTracker.getPartialFragment(a),l||t)return;this.moved=!1}if(!this.moved&&null!==this.stalled&&(l=Math.max(o,e.start||0)-a,o=null!=(t=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null)&&null!=(o=t.details)&&o.live?2*t.details.targetduration:2,t=this.fragmentTracker.getPartialFragment(a),0<l&&(l<=o||t)))return void(n.paused||this._trySkipBufferHole(t));l=self.performance.now(),null!==r?(o=l-r,!s&&250<=o&&(this._reportStall(e),!this.media)||(t=Si.bufferInfo(n,a,i.maxBufferHole),this._tryFixBufferStall(t,o))):this.stalled=l}}else this.moved=!0,null!==r&&(this.stallReported&&(s=self.performance.now()-r,k.warn("playback not stuck anymore @"+a+", after "+Math.round(s)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)}},Sr._tryFixBufferStall=function(e,t){var i=this.config,n=this.fragmentTracker,r=this.media;null!==r&&(r=r.currentTime,!(n=n.getPartialFragment(r))||!this._trySkipBufferHole(n)&&this.media)&&(e.len>i.maxBufferHole||e.nextStart&&e.nextStart-r<i.maxBufferHole)&&t>1e3*i.highBufferWatchdogPeriod&&(k.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},Sr._reportStall=function(e){var t=this.hls,i=this.media;!this.stallReported&&i&&(this.stallReported=!0,i=new Error("Playback stalling at @"+i.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),k.warn(i.message),t.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len}))},Sr._trySkipBufferHole=function(e){var t=this.config,i=this.hls,n=this.media;if(null!==n){var r=n.currentTime,a=r<(o=Si.bufferInfo(n,r,0)).start?o.start:o.nextStart;if(a){var s=o.len<=t.maxBufferHole,o=0<o.len&&o.len<1&&n.readyState<3,l=a-r;if(0<l&&(s||o)){if(l>t.maxBufferHole){var h=this.fragmentTracker;if(s=!1,!(s=!!(0===r&&(o=h.getAppendedFrag(0,vt))&&a<o.end)||s)&&(l=e||h.getAppendedFrag(r,vt))){for(var u=!1,d=l.end;d<a;){var c=h.getPartialFragment(d);if(!c){u=!0;break}d+=c.duration}if(u)return 0}}return t=Math.max(a+.05,r+.1),k.warn("skipping hole, adjusting currentTime from "+r+" to "+t),this.moved=!0,this.stalled=null,n.currentTime=t,e&&!e.gap&&(o=new Error("fragment loaded with buffer holes, seeking from "+r+" to "+t),i.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:o,reason:o.message,frag:e})),t}}}return 0},Sr._tryNudgeBuffer=function(){var e,t,i=this.config,n=this.hls,r=this.media,a=this.nudgeRetry;null!==r&&(e=r.currentTime,this.nudgeRetry++,a<i.nudgeMaxRetry?(a=e+(a+1)*i.nudgeOffset,t=new Error("Nudging 'currentTime' from "+e+" to "+a),k.warn(t.message),r.currentTime=a,n.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.BUFFER_NUDGE_ON_STALL,error:t,fatal:!1})):(r=new Error("Playhead still not moving while enough data buffered @"+e+" after "+i.nudgeMaxRetry+" nudges"),k.error(r.message),n.trigger(w.ERROR,{type:S.MEDIA_ERROR,details:T.BUFFER_STALLED_ERROR,error:r,fatal:!0})))};var Oo,Uo=Go,No=(o(Vo,Oo=hi),(rr=Vo.prototype)._registerListeners=function(){var e=this.hls;e.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(w.MANIFEST_LOADING,this.onManifestLoading,this),e.on(w.MANIFEST_PARSED,this.onManifestParsed,this),e.on(w.LEVEL_LOADING,this.onLevelLoading,this),e.on(w.LEVEL_LOADED,this.onLevelLoaded,this),e.on(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(w.ERROR,this.onError,this),e.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(w.BUFFER_CREATED,this.onBufferCreated,this),e.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr._unregisterListeners=function(){var e=this.hls;e.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(w.MANIFEST_LOADING,this.onManifestLoading,this),e.off(w.MANIFEST_PARSED,this.onManifestParsed,this),e.off(w.LEVEL_LOADED,this.onLevelLoaded,this),e.off(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(w.ERROR,this.onError,this),e.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(w.BUFFER_CREATED,this.onBufferCreated,this),e.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},rr.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},rr.startLoad=function(e){var t,i,n;this.levels?(t=this.lastCurrentTime,i=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.startFragRequested||(-1===(n=i.startLevel)&&(i.config.testBandwidth&&1<this.levels.length?this.bitrateTest=!(n=0):n=i.nextAutoLevel),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1),0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Hi,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this._forceStartLoad=!0,this.state=Gi)},rr.stopLoad=function(){this._forceStartLoad=!1,Oo.prototype.stopLoad.call(this)},rr.doTick=function(){switch(this.state){case $i:var e=this.levels,t=this.level;if(!(t=null==e||null==(e=e[t])?void 0:e.details)||t.live&&this.levelLastLoaded!==this.level)this.hls.nextLoadLevel!==this.level&&(this.state=Hi);else{if(this.waitForCdnTuneIn(t))break;this.state=Hi}break;case zi:e=self.performance.now(),(!(t=this.retryDate)||t<=e||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Hi)}this.state===Hi&&this.doTickIdle(),this.onTickEnd()},rr.onTickEnd=function(){Oo.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},rr.doTickIdle=function(){var e,t,i=this.hls,n=this.levelLastLoaded,r=this.levels,a=this.media,s=i.config,o=i.nextLoadLevel;null===n||!(a||!this.startFragRequested&&s.startFragPrefetch)||this.altAudio&&this.audioOnly||null==r||!r[o]||(n=r[o],null!==(a=this.getMainFwdBufferInfo())&&((s=this.getLevelDetails())&&this._streamEnded(a,s)?(r={},this.altAudio&&(r.type="video"),this.hls.trigger(w.BUFFER_EOS,r),this.state=Zi):(i.loadLevel!==o&&-1===i.manualLevel&&this.log("Adapting to level "+o+" from level "+this.level),this.level=i.nextLoadLevel=o,!(s=n.details)||this.state===$i||s.live&&this.levelLastLoaded!==o?(this.level=o,this.state=$i):(r=a.len,(i=this.getMaxBufferLength(n.maxBitrate))<=r||(this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null),o=this.backtrackFragment?this.backtrackFragment.start:a.end,r=this.getNextFragment(o,s),this.couldBacktrack&&!this.fragPrevious&&r&&"initSegment"!==r.sn&&"OK"!==this.fragmentTracker.getState(r)?(e=(null!=(e=this.backtrackFragment)?e:r).sn-s.startSN,(e=s.fragments[e-1])&&r.cc===e.cc&&this.fragmentTracker.removeFragment(r=e)):this.backtrackFragment&&a.len&&(this.backtrackFragment=null),r&&this.isLoopLoading(r,o)&&(r.gap||(t=((e=this.audioOnly&&!this.altAudio?N:j)===j?this.videoBuffer:this.mediaBuffer)||this.media)&&this.afterBufferFlushed(t,e,vt),r=this.getNextFragmentLoopLoading(r,s,a,vt,i)),r&&(!r.initSegment||r.initSegment.data||this.bitrateTest||(r=r.initSegment),this.loadFragment(r,n,o)))))))},rr.loadFragment=function(e,t,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===ui||n===di?"initSegment"===e.sn?this._loadInitSegment(e,t):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,Oo.prototype.loadFragment.call(this,e,t,i)):this.clearTrackerIfNeeded(e)},rr.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,vt)},rr.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},rr.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},rr.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var i;if(null!=((i=this.getAppendedFrag(t.currentTime))&&1<i.start&&this.flushMainBuffer(0,i.start-1),i=this.getLevelDetails())&&i.live){var n=this.getMainFwdBufferInfo();if(!n||n.len<2*i.targetduration)return}e=!t.paused&&e&&(n=e[this.hls.nextLoadLevel],i=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*n.maxBitrate/(1e3*i)+1:0,(n=this.getBufferedFrag(t.currentTime+e))&&(i=this.followingBufferedFrag(n))&&(this.abortCurrentFrag(),t=i.maxStartPTS||i.start,e=i.duration,i=Math.max(n.end,t+Math.min(Math.max(e-this.config.maxFragLookUpTolerance,.5*e),.75*e)),this.flushMainBuffer(i,Number.POSITIVE_INFINITY))}},rr.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Yi:case Wi:case zi:case Ki:case Ji:this.state=Hi}this.nextLoadPosition=this.getLoadPosition()},rr.flushMainBuffer=function(e,t){Oo.prototype.flushMainBuffer.call(this,e,t,this.altAudio?"video":null)},rr.onMediaAttached=function(e,t){Oo.prototype.onMediaAttached.call(this,e,t),e=t.media,this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),e.addEventListener("playing",this.onvplaying),e.addEventListener("seeked",this.onvseeked),this.gapController=new Uo(this.config,e,this.fragmentTracker,this.hls)},rr.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),Oo.prototype.onMediaDetaching.call(this)},rr.onMediaPlaying=function(){this.tick()},rr.onMediaSeeked=function(){var e=(e=this.media)?e.currentTime:null;null!==(b(e)&&this.log("Media seeked to "+e.toFixed(3)),e=this.getMainFwdBufferInfo())&&0!==e.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(e?e.len:"empty")+")")},rr.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(w.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1},rr.onManifestParsed=function(e,t){var i,n,r=!1,a=!1;t.levels.forEach((function(e){(i=e.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(r=!0),-1!==i.indexOf("mp4a.40.5"))&&(a=!0)})),this.audioCodecSwitch=r&&a&&!("function"==typeof(null==(n=Bo())||null==(n=n.prototype)?void 0:n.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},rr.onLevelLoading=function(e,t){var i=this.levels;i&&this.state===Hi&&(!(i=i[t.level]).details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=$i)},rr.onLevelLoaded=function(e,t){var i=this.levels,n=t.level,r=t.details,a=r.totalduration;if(i){if(this.log("Level "+n+" loaded ["+r.startSN+","+r.endSN+"]"+(r.lastPartSn?"[part-"+r.lastPartSn+"-"+r.lastPartIndex+"]":"")+", cc ["+r.startCC+", "+r.endCC+"] duration:"+a),a=i[n],!(i=this.fragCurrent)||this.state!==Wi&&this.state!==zi||i.level===t.level&&i.urlId===a.urlId||!i.loader||this.abortCurrentFrag(),t=0,r.live||null!=(i=a.details)&&i.live){if(r.fragments[0]||(r.deltaUpdateFailed=!0),r.deltaUpdateFailed)return;t=this.alignPlaylists(r,a.details)}if(a.details=r,this.levelLastLoaded=n,this.hls.trigger(w.LEVEL_UPDATED,{details:r,level:n}),this.state===$i){if(this.waitForCdnTuneIn(r))return;this.state=Hi}this.startFragRequested?r.live&&this.synchronizeToLiveEdge(r):this.setStartPosition(r,t),this.tick()}else this.warn("Levels were reset while loading level "+n)},rr._handleFragmentLoadProgress=function(e){var t,i,n,r,a,s,o,l=e.frag,h=e.part,u=(e=e.payload,this.levels);u?(t=(u=u[l.level]).details)?(i=u.videoCodec,n=t.PTSKnown||!t.live,r=null==(r=l.initSegment)?void 0:r.data,u=this._getAudioCodec(u),a=this.transmuxer=this.transmuxer||new qr(this.hls,vt,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),s=h?h.index:-1,s=new bi(l.level,l.sn,l.stats.chunkCount,e.byteLength,s,-1!==s),o=this.initPTS[l.cc],a.push(e,r,u,i,l,h,t.totalduration,n,s,o)):(this.warn("Dropping fragment "+l.sn+" of level "+l.level+" after level details were reset"),this.fragmentTracker.removeFragment(l)):this.warn("Levels were reset while fragment load was in progress. Fragment "+l.sn+" of level "+l.level+" will not be buffered")},rr.onAudioTrackSwitching=function(e,t){var i,n=this.altAudio;t.url||(this.mediaBuffer!==this.media?(this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(i=this.fragCurrent)&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState()):this.audioOnly&&this.resetTransmuxer(),i=this.hls,n&&(i.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),i.trigger(w.AUDIO_TRACK_SWITCHED,t))},rr.onAudioTrackSwitched=function(e,t){var i;t=t.id,(t=!!this.hls.audioTracks[t].url)&&(i=this.videoBuffer)&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i),this.altAudio=t,this.tick()},rr.onBufferCreated=function(e,t){var i,n=t.tracks,r=!1;for(i in n){var a,s,o=n[i];"main"===o.id?(s=o,"video"===(a=i)&&(o=n[i])&&(this.videoBuffer=o.buffer)):r=!0}r&&s?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media},rr.onFragBuffered=function(e,t){var i,n=t.frag;t=t.part,n&&n.type!==vt||(this.fragContextChanged(n)?(this.warn("Fragment "+n.sn+(t?" p: "+t.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),this.state===Ji&&(this.state=Hi)):(i=(t||n).stats,this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,t)))},rr.onError=function(e,t){var i;if(t.fatal)this.state=qi;else switch(t.details){case T.FRAG_GAP:case T.FRAG_PARSING_ERROR:case T.FRAG_DECRYPT_ERROR:case T.FRAG_LOAD_ERROR:case T.FRAG_LOAD_TIMEOUT:case T.KEY_LOAD_ERROR:case T.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(vt,t);break;case T.LEVEL_LOAD_ERROR:case T.LEVEL_LOAD_TIMEOUT:case T.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==$i||(null==(i=t.context)?void 0:i.type)!==gt||(this.state=Hi);break;case T.BUFFER_APPEND_ERROR:case T.BUFFER_FULL_ERROR:t.parent&&"main"===t.parent&&(t.details===T.BUFFER_APPEND_ERROR?this.resetLoadingState():this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case T.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}},rr.checkBuffer=function(){var e,t=this.media,i=this.gapController;t&&i&&t.readyState&&(!this.loadedmetadata&&Si.getBuffered(t).length||(e=this.state!==Hi?this.fragCurrent:null,i.poll(this.lastCurrentTime,e)),this.lastCurrentTime=t.currentTime)},rr.onFragLoadEmergencyAborted=function(){this.state=Hi,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},rr.onBufferFlushed=function(e,t){var i;((t=t.type)!==N||this.audioOnly&&!this.altAudio)&&(i=(t===j?this.videoBuffer:this.mediaBuffer)||this.media,this.afterBufferFlushed(i,t,vt),this.tick())},rr.onLevelsUpdated=function(e,t){this.levels=t.levels},rr.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},rr.seekToStartPos=function(){var e,t,i,n=this.media;n&&(e=n.currentTime,0<=(t=this.startPosition))&&e<t&&(n.seeking?this.log("could not seek to "+t+", already seeking at "+e):(0<(i=((i=Si.getBuffered(n)).length?i.start(0):0)-t)&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+i+" to match buffer start"),this.startPosition=t+=i),this.log("seek to target start position "+t+" from current time "+e),n.currentTime=t))},rr._getAudioCodec=function(e){return e=this.config.defaultAudioCodec||e.audioCodec,this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},rr._loadBitrateTestFrag=function(e,t){var i=this;e.bitrateTest=!0,this._doFragLoad(e,t).then((function(n){var r,a=i.hls;n&&!i.fragContextChanged(e)&&(t.fragmentError=0,i.state=Hi,i.startFragRequested=!1,i.bitrateTest=!1,(r=e.stats).parsing.start=r.parsing.end=r.buffering.start=r.buffering.end=self.performance.now(),a.trigger(w.FRAG_LOADED,n),e.bitrateTest=!1)}))},rr._handleTransmuxComplete=function(e){var t="main",i=this.hls,n=e.remuxResult;if(e=e.chunkMeta,s=this.getCurrentContext(e)){var r=s.frag,a=s.part,s=s.level,o=n.video,l=n.text,h=n.id3,u=n.initSegment,d=s.details,c=this.altAudio?void 0:n.audio;if(this.fragContextChanged(r))this.fragmentTracker.removeFragment(r);else{if(this.state=Ki,u&&(null!=u&&u.tracks&&(f=r.initSegment||r,this._bufferInitSegment(s,u.tracks,f,e),i.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:f,id:t,tracks:u.tracks})),s=u.initPTS,f=u.timescale,b(s))&&(this.initPTS[r.cc]={baseTime:s,timescale:f},i.trigger(w.INIT_PTS_FOUND,{frag:r,id:t,initPTS:s,timescale:f})),o&&d&&"initSegment"!==r.sn){u=d.fragments[r.sn-1-d.startSN],s=r.sn===d.startSN;var f=!u||r.cc>u.cc;if(!1!==n.independent){u=o.startPTS,n=o.endPTS;var p=o.startDTS,m=o.endDTS;if(a)a.elementaryStreams[o.type]={startPTS:u,endPTS:n,startDTS:p,endDTS:m};else if(o.firstKeyFrame&&o.independent&&1===e.id&&!f&&(this.couldBacktrack=!0),o.dropped&&o.independent){var g=((g=this.getMainFwdBufferInfo())?g.end:this.getLoadPosition())+this.config.maxBufferHole,_=o.firstKeyFramePTS||u;if(!s&&g<_-this.config.maxBufferHole&&!f)return void this.backtrack(r);f&&(r.gap=!0),r.setElementaryStreamInfo(o.type,r.start,n,r.start,m,!0)}r.setElementaryStreamInfo(o.type,u,n,p,m),this.backtrackFragment&&(this.backtrackFragment=r),this.bufferFragmentData(o,r,a,e,s||f)}else{if(!s&&!f)return void this.backtrack(r);r.gap=!0}}c&&(g=c.startPTS,_=c.endPTS,u=c.startDTS,n=c.endDTS,a&&(a.elementaryStreams[N]={startPTS:g,endPTS:_,startDTS:u,endDTS:n}),r.setElementaryStreamInfo(N,g,_,u,n),this.bufferFragmentData(c,r,a,e)),d&&null!=h&&null!=(p=h.samples)&&p.length&&(m={id:t,frag:r,details:d,samples:h.samples},i.trigger(w.FRAG_PARSING_METADATA,m)),d&&l&&(o={id:t,frag:r,details:d,samples:l.samples},i.trigger(w.FRAG_PARSING_USERDATA,o))}}else this.resetWhenMissingContext(e)},rr._bufferInitSegment=function(e,t,i,n){var r,a,s,o,l,h=this;this.state===Ki&&(this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio,r=t.audio,a=t.video,s=t.audiovideo,r&&(o=e.audioCodec,l=navigator.userAgent.toLowerCase(),(o=this.audioCodecSwitch&&(o=o&&(-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==r.metadata.channelCount)&&-1===l.indexOf("firefox")?"mp4a.40.5":o)&&-1!==o.indexOf("mp4a.40.5")&&-1!==l.indexOf("android")&&"audio/mpeg"!==r.container&&this.log("Android: force audio codec to "+(o="mp4a.40.2")),e.audioCodec&&e.audioCodec!==o&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+o+'"'),r.levelCodec=o,r.id="main",this.log("Init audio buffer, container:"+r.container+", codecs[selected/level/parsed]=["+(o||"")+"/"+(e.audioCodec||"")+"/"+r.codec+"]")),a&&(a.levelCodec=e.videoCodec,a.id="main",this.log("Init video buffer, container:"+a.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+a.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+s.codec+"]"),this.hls.trigger(w.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var r=t[e].initSegment;null!=r&&r.byteLength&&h.hls.trigger(w.BUFFER_APPENDING,{type:e,data:r,frag:i,part:null,chunkMeta:n,parent:i.type})})),this.tickImmediate())},rr.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer||this.media,vt)},rr.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Hi},rr.checkFragmentChanged=function(){var e,t=this.media,i=null;t&&1<t.readyState&&!1===t.seeking&&(e=t.currentTime,Si.isBuffered(t,e)?i=this.getAppendedFrag(e):Si.isBuffered(t,e+.1)&&(i=this.getAppendedFrag(e+.1)),i)&&(this.backtrackFragment=null,t=this.fragPlaying,e=i.level,t&&i.sn===t.sn&&t.level===e&&i.urlId===t.urlId||(this.fragPlaying=i,this.hls.trigger(w.FRAG_CHANGED,{frag:i}),t&&t.level===e)||this.hls.trigger(w.LEVEL_SWITCHED,{level:e}))},a(Vo,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){if(e=this.media){var e=e.currentTime,t=this.currentFrag;if(t&&b(e)&&b(t.programDateTime))return e=t.programDateTime+1e3*(e-t.start),new Date(e)}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),Vo);function jo(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Vr,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,I(e.debug||!1,"Hls instance");var t=this.config=function(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var i=Zs(e),r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((function(e){var n=("level"===e?"playlist":e)+"LoadPolicy",a=void 0===t[n],s=[];r.forEach((function(r){var o=e+"Loading"+r,l=t[o];if(void 0!==l&&a){s.push(o);var h=i[n].default;switch(t[n]={default:h},r){case"TimeOut":h.maxLoadTimeMs=l,h.maxTimeToFirstByteMs=l;break;case"MaxRetry":h.errorRetry.maxNumRetry=l,h.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":h.errorRetry.retryDelayMs=l,h.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=l,h.timeoutRetry.maxRetryDelayMs=l}}})),s.length&&k.warn('hls.js config: "'+s.join('", "')+'" setting(s) are deprecated, use "'+n+'": '+JSON.stringify(t[n]))})),n(n({},i),t)}(jo.DefaultConfig,e),i=(this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&((i=(e=t).loader)!==js&&i!==Us?(k.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),1}catch(e){}}()&&(e.loader=js,e.progressive=!0,e.enableSoftwareAES=!0,k.log("[config]: Progressive streaming enabled, using FetchLoader"))),t.abrController),r=(e=t.bufferController,t.capLevelController),a=t.errorController,s=t.fpsController,o=(a=new a(this),this.abrController=new i(this)),l=(e=this.bufferController=new e(this),r=this.capLevelController=new r(this),s=new s(this),new St(this)),h=new Ft(this),u=(u=t.contentSteeringController)?new u(this):null,d=this.levelController=new So(this,u),c=new ci(this),f=new Mo(this.config),p=this.streamController=new No(this,c,f);r.setStreamController(p),s.setStreamController(p),l=[l,d,p],u&&l.splice(1,0,u),this.networkControllers=l,d=[o,e,r,s,h,c],"function"==(this.audioTrackController=this.createController(t.audioTrackController,l),(p=t.audioStreamController)&&l.push(new p(this,c,f)),this.subtitleTrackController=this.createController(t.subtitleTrackController,l),(u=t.subtitleStreamController)&&l.push(new u(this,c,f)),this.createController(t.timelineController,d),f.emeController=this.emeController=this.createController(t.emeController,d),this.cmcdController=this.createController(t.cmcdController,d),this.latencyController=this.createController(Bt,d),this.coreComponents=d,l.push(a),typeof(o=a.onErrorOut))&&this.on(w.ERROR,o,a)}function Vo(e,t,i){return(e=Oo.call(this,e,t,i,"[stream-controller]",vt)||this).audioCodecSwap=!1,e.gapController=null,e.level=-1,e._forceStartLoad=!1,e.altAudio=!1,e.audioOnly=!1,e.fragPlaying=null,e.onvplaying=null,e.onvseeked=null,e.fragLastKbps=0,e.couldBacktrack=!1,e.backtrackFragment=null,e.audioCodecSwitch=!1,e.videoBuffer=null,e._registerListeners(),e}function Go(e,t,i,n){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=i,this.hls=n}return jo.isSupported=function(){return!!(t=Ke())&&(e=Bo(),t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove,!!t)&&!!e;var e,t},(_r=jo.prototype).createController=function(e,t){return e?(e=new e(this),t&&t.push(e),e):null},_r.on=function(e,t,i){this._emitter.on(e,t,i=void 0===i?this:i)},_r.once=function(e,t,i){this._emitter.once(e,t,i=void 0===i?this:i)},_r.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},_r.off=function(e,t,i,n){this._emitter.off(e,t,i=void 0===i?this:i,n)},_r.listeners=function(e){return this._emitter.listeners(e)},_r.emit=function(e,t,i){return this._emitter.emit(e,t,i)},_r.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){var i;k.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.triggeringException||(this.triggeringException=!0,i=e===w.ERROR,this.trigger(w.ERROR,{type:S.OTHER_ERROR,details:T.INTERNAL_EXCEPTION,fatal:i,event:e,error:t}),this.triggeringException=!1)}return!1},_r.listenerCount=function(e){return this._emitter.listenerCount(e)},_r.destroy=function(){k.log("destroy"),this.trigger(w.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},_r.attachMedia=function(e){k.log("attachMedia"),this._media=e,this.trigger(w.MEDIA_ATTACHING,{media:e})},_r.detachMedia=function(){k.log("detachMedia"),this.trigger(w.MEDIA_DETACHING,void 0),this._media=null},_r.loadSource=function(e){this.stopLoad();var t=this.media,i=this.url,n=this.url=E.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});k.log("loadSource:"+n),t&&i&&(i!==n||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(w.MANIFEST_LOADING,{url:e})},_r.startLoad=function(e){void 0===e&&(e=-1),k.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},_r.stopLoad=function(){k.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},_r.swapAudioCodec=function(){k.log("swapAudioCodec"),this.streamController.swapAudioCodec()},_r.recoverMediaError=function(){k.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},_r.removeLevel=function(e,t){this.levelController.removeLevel(e,t=void 0===t?0:t)},a(jo,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){k.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){k.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){k.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){k.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){k.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){(e=!!e)!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(k.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN},set:function(e){this.abrController.resetEstimator(e)}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){-1<Ot.indexOf(e)&&(this._maxHdcpLevel=e)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(e)for(var i=e.length,n=0;n<i;n++)if(e[n].maxBitrate>=t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping,i=this.maxHdcpLevel;if(t=-1===t&&e&&e.length?e.length-1:t,i)for(var n=t;n--;){var r=e[n].attrs["HDCP-LEVEL"];if(r&&r<=i)return n}return t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){}},{key:"Events",get:function(){return w}},{key:"ErrorTypes",get:function(){return S}},{key:"ErrorDetails",get:function(){return T}},{key:"DefaultConfig",get:function(){return jo.defaultConfig||Ks},set:function(e){jo.defaultConfig=e}}]),(Bn=jo).defaultConfig=void 0,Bn}()}(!1)},function(e,t,i){"use strict";i.r(t),i.d(t,"NvFlvjsCore",(function(){return o}));var n=i(4);const r=i(5);i(28);var a=i(165);const s=i(12);var o=class{constructor(e){this.configFormat={width:e.width||r.DEFAULT_WIDTH,height:e.height||r.DEFAULT_HEIGHT,playerId:e.playerId||r.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,duration:e.duration,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,audioNone:e.audioNone},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-flv-hevc",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.vCodecID=r.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1,this.checkStartIntervalCount=0,this.checkStartInterval=null,this.checkPicBlockInterval=null,this.bufferInterval=null,this.onPlayState=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onCacheProcess=null,this.isReBuildTime=3,this.onError=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.headers=e.headers,this.seekStartTime=0,this.videoCodec=r.CODEC_H264}_reBuildFlvjs(e,t){0==this.isReBuildTime?(this.onError&&this.onError({msg:n.ErrorDetails.RECONNECT_ERROR_DETAIL,event:n.ErrorEvent.TIMEOUT,url:e,errorType:n.ErrorTypes.NETWORK_ERROR}),this.release()):(this._releaseFlvjs(),this.makeIt(e,t))}_checkPicBlock(e){let t=this;this.checkPicBlockInterval=window.setInterval((function(){0<t.lastDecodedFrameTime&&1e4<s.GetMsTime()-t.lastDecodedFrameTime&&t.isPlayingState()&&(window.clearInterval(t.checkPicBlockInterval),t.checkPicBlockInterval=null,t._reBuildFlvjs(e))}),1e3)}_checkLoadState(e){let t=this;this.checkStartIntervalCount=0,this.isReBuildTime--,this.checkStartInterval=window.setInterval((function(){!1!==t.isInitDecodeFrames?(t.checkStartIntervalCount=0,window.clearInterval(t.checkStartInterval),t.checkStartInterval=null):(t.checkStartIntervalCount+=1,20<t.checkStartIntervalCount&&(window.clearInterval(t.checkStartInterval),t.checkStartIntervalCount=0,t.checkStartInterval=null,!1===t.isInitDecodeFrames)&&t._reBuildFlvjs(e))}),500)}makeIt(e,t){let i=this;var o,l,h;a.isSupported()?(l=document.querySelector("#"+this.configFormat.playerId),this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.configFormat.repeatPlay&&this.videoTag.setAttribute("loop","loop"),this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",(h=l.getElementsByTagName("video")[0])&&(o=l.getElementsByTagName("div"),l.insertBefore(h,o[0])),!0===this.configFormat.autoPlay&&(window.onclick=document.body.onclick=function(e){i.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.onplay=function(){var e=i.isPlayingState();i.onPlayState&&i.onPlayState(e)},this.videoTag.onpause=function(){var e=i.isPlayingState();i.onPlayState&&i.onPlayState(e)},this.videoTag.ontimeupdate=()=>{i.videoTag&&i.onPlayingTime&&i.onPlayingTime(i.videoTag.currentTime)},this.videoTag.onseeked=()=>{0==this.seekStartTime&&this.seekReadyPts&&this.seekReadyPts>this.seekStartTime&&1<=parseInt(this.seekReadyPts-this.videoTag.currentTime)||(this.seekReadyPts=null,this.seekStartTime=null,this.onSeekFinish&&this.onSeekFinish(this.seekResult))},l={hasVideo:!0,hasAudio:!(!0===this.configFormat.audioNone),type:"flv",url:e,withCredentials:!1},this.options=t||l,this.options=Object.assign(this.options),h=this.headers?{headers:this.headers}:null,this.myPlayer=a.createPlayer(this.options,h),this.myPlayer.attachMediaElement(this.videoTag),this.myPlayer.on(a.Events.MEDIA_INFO,(function(e){var t;!1===i.isInitDecodeFrames&&(i.isInitDecodeFrames=!0,i.width=Math.max(i.videoTag.videoWidth,e.width),i.height=Math.max(i.videoTag.videoHeight,e.height),i.duration=i.videoTag.duration||e.duration/1e3,i.videoCodec=e.mimeType&&-1<e.mimeType.indexOf("hvc1")?r.CODEC_H265:r.CODEC_H264,(e=document.querySelector("#"+i.configFormat.playerId)).getElementsByTagName("video")[0]||(t=e.getElementsByTagName("div"),e.insertBefore(i.videoTag,t[0])),i.onLoadFinish&&i.onLoadFinish(),i.onReadyShowDone&&i.onReadyShowDone(),i._loopBufferState(),i.videoTag.ontimeupdate=()=>{i.onPlayingTime&&i.onPlayingTime(i.videoTag.currentTime,window.startPts),i.getFrameRate()},i.duration!==1/0&&0<i.duration?i.videoTag.onended=()=>{i.onPlayingFinish&&i.onPlayingFinish()}:i.videoTag.onended=()=>{i._reBuildFlvjs&&i._reBuildFlvjs(i.options.url)})})),this.myPlayer.on(a.Events.STATISTICS_INFO,(function(e){var t,n;!1===i.isInitDecodeFrames&&0<i.videoTag.videoWidth&&0<i.videoTag.videoHeight&&(i.isInitDecodeFrames=!0,i.width=i.videoTag.videoWidth,i.height=i.videoTag.videoHeight,i.duration=i.videoTag.duration,(t=document.querySelector("#"+i.configFormat.playerId)).getElementsByTagName("video")[0]||(n=t.getElementsByTagName("div"),t.insertBefore(i.videoTag,n[0])),i.onLoadFinish&&i.onLoadFinish(),i.onReadyShowDone&&i.onReadyShowDone(),i._loopBufferState(),i.videoTag.ontimeupdate=()=>{i.onPlayingTime&&i.onPlayingTime(i.videoTag.currentTime)},i.duration!==1/0)&&(i.videoTag.onended=()=>{i.onPlayingFinish&&i.onPlayingFinish()}),i.lastDecodedFrame=e.decodedFrames,i.lastDecodedFrameTime=s.GetMsTime()})),this.myPlayer.on(a.Events.SCRIPTDATA_ARRIVED,(function(e){})),this.myPlayer.on(a.Events.METADATA_ARRIVED,(function(e){e.width&&e.audiosize||e.detectAudio||i.options.hasAudio===e.detectAudio||(e={hasVideo:!0,hasAudio:e.detectAudio,type:"flv",url:i.options.url,withCredentials:!1},i._reBuildFlvjs(i.options.url,e))})),this.myPlayer.on(a.Events.ERROR,(function(t,n,r){9===r.code?(i.onError&&i.onError({msg:r,event:t,url:e,errorType:t}),i.release()):i.myPlayer&&i._reBuildFlvjs(e)})),this.myPlayer.load(),this._checkLoadState(e)):i.onError&&i.onError({msg:n.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:n.ErrorTypes.NOT_SUPPORT,event:n.ErrorEvent.ERROR,url:e})}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.height}}play(){this.myPlayer.play(),this.lastDecodedFrameTime=s.GetMsTime()}seek(e){this.setVoice(0);var t=this.videoTag.buffered,i=t.length-1;return-1!=i&&t.end(i)<e?(this.seekReadyPts=e.toFixed(2),!1):(this.videoTag.currentTime=e,this.seekReadyPts=Number(e).toFixed(2),this.seekResult=!0)}pause(){this.myPlayer&&this.myPlayer.pause()}setVoice(e){this.myPlayer.volume=e}isPlayingState(){return!this.videoTag.paused}_loopBufferState(){let e=this;e.duration<=0&&(e.duration=e.videoTag.duration),null!==e.bufferInterval&&(window.clearInterval(e.bufferInterval),e.bufferInterval=null),e.bufferInterval=window.setInterval((function(){if(!e.duration||e.duration<0)window.clearInterval(e.bufferInterval);else{let i=null;if(e.videoTag.buffered){try{i=e.videoTag.buffered.end(e.videoTag.buffered.length-1)}catch(e){}var t;e.onCacheProcess&&e.onCacheProcess(i),e.seekReadyPts&&i>e.seekReadyPts&&(t=e.seek(e.seekReadyPts),e.seekStartTime=null,e.seekResult=t,e.onSeekFinish&&e.onSeekFinish(t),e.seekReadyPts=null),i>=e.duration-.04&&(e.onCacheProcess&&e.onCacheProcess(e.duration),window.clearInterval(e.bufferInterval))}}}),200)}_releaseFlvjs(){this.myPlayer&&(this.myPlayer.pause(),this.myPlayer.unload(),this.myPlayer.detachMediaElement(),this.myPlayer.destroy(),this.myPlayer=null),this.videoTag&&(this.videoTag.remove(),this.videoTag=null),null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1}getMediaInfo(){if(!this.myPlayer||!this.myPlayer._mediaInfo||!this.myPlayer._statisticsInfo)return null;var e,t=null,{videoPts:i,audioPts:n}=(this.myPlayer._statisticsInfo.speed&&(t=JSON.parse(JSON.stringify(this.myPlayer._statisticsInfo.speed))),this.getPts()),r={video:{width:"width",height:"height",codec:"videoCodec",frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"flv_live":"flv_vod",demuxStyle:"flv",bitRate:8*t,pts:i},audio:{bitRate:"audioDataRate",sampleRate:"audioSampleRate",codec:this.getAudioCodec(this.myPlayer._mediaInfo.metadata.audiocodecid),pts:n}},a=Object.assign(this.myPlayer._mediaInfo,this.myPlayer._statisticsInfo);for(e in r){var s,o=r[e];for(s in o)a[o[s]]&&(r[e][s]=a[o[s]])}return r}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getAudioCodec(e){return{0:"Linear PCM, platform endian",1:"ADPCM",2:"MP3",3:"Linear PCM, little endian",4:"Nellymoser 16 kHz mono",5:"Nellymoser 8 kHz mono",6:"Nellymoser",7:"G.711 A-law logarithmic PCM",8:"G.711 mu-law logarithmic PCM",9:"reserved",10:"aac",11:"Speex",14:"MP3 8 kHz",15:"Device-specific sound"}[e]}getPts(){var e=this.myPlayer&&this.myPlayer._transmuxer&&this.myPlayer._transmuxer._controller._remuxer;return{audioPts:e&&e._audioNextPts?e._audioNextPts:0,videoPts:e&&e._videoNextPts?e._videoNextPts:0}}release(){null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this._releaseFlvjs(),this.myPlayerID=null,this.videoContaner=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,this.onError=null,this.isReBuildTime=3,window.onclick=document.body.onclick=null}}},function(e,t,i){(function(t){function i(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e].call(t.exports,t,t.exports,i)),t.exports}var n,r;self,e.exports=(n={970:function(e,i,n){
/*!
           * @overview es6-promise - a tiny implementation of Promises/A+.
           * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
           * @license   Licensed under MIT license
           *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
           * @version   v4.2.8+1e68dce6
           */
e.exports=function(){"use strict";function e(e){return"function"==typeof e}var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,a=void 0,s=void 0,o=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(s?s(p):y())},l="undefined"!=typeof window?window:void 0,h=(h=l||{}).MutationObserver||h.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(p,1)}}var f=new Array(1e3);function p(){for(var e=0;e<r;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;r=0}var m,g,_,y=void 0;function v(e,t){var i,n=this,r=new this.constructor(b),a=(void 0===r[E]&&F(r),n._state);return a?(i=arguments[a-1],o((function(){return x(a,r,i,n._result)}))):P(n,r,e,t),r}function A(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(L(t=new this(b),e),t)}y=u?function(){return t.nextTick(p)}:h?(g=0,u=new h(p),_=document.createTextNode(""),u.observe(_,{characterData:!0}),function(){_.data=g=++g%2}):d?((m=new MessageChannel).port1.onmessage=p,function(){return m.port2.postMessage(0)}):(void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(p)}:c()}catch(e){return c()}}:c)();var E=Math.random().toString(36).substring(2);function b(){}var w=void 0,S=1,T=2;function C(t,i,n){var r,a;i.constructor===t.constructor&&n===v&&i.constructor.resolve===A?(r=t,(a=i)._state===S?I(r,a._result):a._state===T?k(r,a._result):P(a,void 0,(function(e){return L(r,e)}),(function(e){return k(r,e)}))):void 0!==n&&e(n)?function(e,t,i){o((function(e){var n=!1,r=function(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}(i,t,(function(i){n||(n=!0,(t!==i?L:I)(e,i))}),(function(t){n||(n=!0,k(e,t))}),e._label);!n&&r&&(n=!0,k(e,r))}),e)}(t,i,n):I(t,i)}function L(e,t){if(e===t)k(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof t,null===t||"object"!=i&&"function"!=i)I(e,t);else{i=void 0;try{i=t.then}catch(t){return void k(e,t)}C(e,t,i)}var i}function R(e){e._onerror&&e._onerror(e._result),D(e)}function I(e,t){e._state===w&&(e._result=t,e._state=S,0!==e._subscribers.length)&&o(D,e)}function k(e,t){e._state===w&&(e._state=T,e._result=t,o(R,e))}function P(e,t,i,n){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+S]=i,r[a+T]=n,0===a&&e._state&&o(D,e)}function D(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n,r=void 0,a=e._result,s=0;s<t.length;s+=3)n=t[s],r=t[s+i],n?x(i,n,r,a):r(a);e._subscribers.length=0}}function x(t,i,n,r){var a=e(n),s=void 0,o=void 0,l=!0;if(a){try{s=n(r)}catch(t){l=!1,o=t}if(i===s)return void k(i,new TypeError("A promises callback cannot return that same promise."))}else s=r;i._state===w&&(a&&l?L(i,s):!1===l?k(i,o):t===S?I(i,s):t===T&&k(i,s))}var M=0;function F(e){e[E]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}O.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},O.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===A){var r,a=void 0,s=void 0,o=!1;try{a=e.then}catch(e){o=!0,s=e}a===v&&e._state!==w?this._settledAt(e._state,t,e._result):"function"!=typeof a?(this._remaining--,this._result[t]=e):i===U?(r=new i(b),o?k(r,s):C(r,e,a),this._willSettleAt(r,t)):this._willSettleAt(new i((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},O.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===w&&(this._remaining--,e===T?k(n,i):this._result[t]=i),0===this._remaining&&I(n,this._result)},O.prototype._willSettleAt=function(e,t){var i=this;P(e,void 0,(function(e){return i._settledAt(S,t,e)}),(function(e){return i._settledAt(T,t,e)}))};var B=O;function O(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[E]||F(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||I(this.promise,this._result)):k(this.promise,new Error("Array Methods must be provided an Array"))}N.prototype.catch=function(e){return this.then(null,e)},N.prototype.finally=function(t){var i=this.constructor;return e(t)?this.then((function(e){return i.resolve(t()).then((function(){return e}))}),(function(e){return i.resolve(t()).then((function(){throw e}))})):this.then(t,t)};var U=N;function N(e){if(this[E]=M++,this._result=this._state=void 0,this._subscribers=[],b!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof N))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,i=e;try{i((function(e){L(t,e)}),(function(e){k(t,e)}))}catch(i){k(t,i)}}}return U.prototype.then=v,U.all=function(e){return new B(this,e).promise},U.race=function(e){var t=this;return i(e)?new t((function(i,n){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(i,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},U.resolve=A,U.reject=function(e){var t=new this(b);return k(t,e),t},U._setScheduler=function(e){s=e},U._setAsap=function(e){o=e},U._asap=o,U.polyfill=function(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=U},U.Promise=U}()},393:function(e){"use strict";var t="object"==typeof Reflect?Reflect:null,i=t&&"function"==typeof t.apply?t.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},n=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},r=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,a),n(i)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}p(e,t,a,{once:!0}),"error"!==t&&"function"==typeof e.on&&p(e,"error",r,{once:!0})}))},(a.EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,i,n){var r,a;return o(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener||i),r=e._events),a=r[t]),void 0===a?(a=r[t]=i,++e._eventsCount):("function"==typeof a?a=r[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),0<(r=l(e))&&a.length>r&&!a.warned&&(a.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,console)&&console.warn),e}function u(e,t,i){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:i}),t.listener=i,e.wrapFn=t}function d(e,t,i){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return i?[e.listener||e]:[e];if(i){for(var n=e,r=new Array(n.length),a=0;a<r.length;++a)r[a]=n[a].listener||n[a];return r}return f(e,e.length)}function c(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function f(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function p(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){n.once&&e.removeEventListener(t,r),i(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){if((s=0<t.length?t[0]:s)instanceof Error)throw s;throw(r=new Error("Unhandled error."+(s?" ("+s.message+")":""))).context=s,r}var s=a[e];if(void 0===s)return!1;if("function"==typeof s)i(s,this,t);else{var o=s.length,l=f(s,o);for(n=0;n<o;++n)i(l[n],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var i,n,r,a,s;if(o(t),void 0!==(n=this._events)&&void 0!==(i=n[e]))if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;0<=a;a--)if(i[a]===t||i[a].listener===t){s=i[a].listener,r=a;break}if(r<0)return this;if(0===r)i.shift();else{for(var l=i,h=r;h+1<l.length;h++)l[h]=l[h+1];l.pop()}1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,i;if(void 0!==(i=this._events))if(void 0===i.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]);else if(0===arguments.length){for(var n,r=Object.keys(i),a=0;a<r.length;++a)"removeListener"!==(n=r[a])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},a.prototype.listenerCount=c,a.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},227:function(e,t,i){function n(e){var t={};function i(n){var r;return(t[n]||(r=t[n]={i:n,l:!1,exports:{}},e[n].call(r.exports,r,r.exports,i),r.l=!0,r)).exports}i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw e};var n=i(i.s=ENTRY_MODULE);return n.default||n}var r="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+r+").*?\\)";function s(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(e,t){var o={main:i.m},l=(t=t||{}).all?{main:Object.keys(o.main)}:function(t){for(var n={main:[e]},o={main:[]},l={main:{}};function(e){return Object.keys(e).reduce((function(t,i){return t||0<e[i].length}),!1)}(n);)for(var h=Object.keys(n),u=0;u<h.length;u++){var d=h[u],c=n[d].pop();if(l[d]=l[d]||{},!l[d][c]&&t[d][c]){l[d][c]=!0,o[d]=o[d]||[],o[d].push(c);for(var f=function(e,t,n){var o={},l=(o[n]=[],t.toString());if(t=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)){t=t[1];for(var h,u=new RegExp("(\\\\n|\\W)"+s(t)+a,"g");h=u.exec(l);)"dll-reference"!==h[3]&&o[n].push(h[3]);for(u=new RegExp("\\("+s(t)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+a,"g");h=u.exec(l);)e[h[2]]||(o[n].push(h[1]),e[h[2]]=i(h[1]).m),o[h[2]]=o[h[2]]||[],o[h[2]].push(h[4]);for(var d,c=Object.keys(o),f=0;f<c.length;f++)for(var p=0;p<o[c[f]].length;p++)d=o[c[f]][p],isNaN(+d)||(o[c[f]][p]=+o[c[f]][p])}return o}(t,t[d][c],d),p=Object.keys(f),m=0;m<p.length;m++)n[p[m]]=n[p[m]]||[],n[p[m]]=n[p[m]].concat(f[p[m]])}}return o}(o),h="",u=(Object.keys(l).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;l[e][t];)t++;l[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+l[e].map((function(t){return JSON.stringify(t)+": "+o[e][t].toString()})).join(",")+"});\n"})),h=h+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+l.main.map((function(e){return JSON.stringify(e)+": "+o.main[e].toString()})).join(",")+"}))(self);",new window.Blob([h],{type:"text/javascript"}));return t.bare||(t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),(u=new window.Worker(t)).objectURL=t),u}},70:function(e,t){"use strict";function i(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}i.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!==this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},i.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},i.prototype.getNearestKeyframe=function(e){var t;return null==this.keyframesIndex?null:(t=this.keyframesIndex,{index:e=this._search(t.times,e),milliseconds:t.times[e],fileposition:t.filepositions[e]})},i.prototype._search=function(e,t){var i,n=0,r=e.length-1,a=0,s=r;for(t<e[0]&&(n=0,a=s+1);a<=s;){if((i=a+Math.floor((s-a)/2))===r||t>=e[i]&&t<e[i+1]){n=i;break}e[i]<t?a=i+1:s=i-1}return n},t.Z=i},779:function(e,t,i){"use strict";i.d(t,{J1:function(){return s},Vn:function(){return a},Wk:function(){return n},Yy:function(){return r}});var n=function(e,t,i,n,r){this.dts=e,this.pts=t,this.duration=i,this.originalDts=n,this.isSyncPoint=r,this.fileposition=null},r=(h.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},h),a=(l.prototype.clear=function(){this._list=[]},l.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},l.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t,i=this._list,n=0,r=i.length-1,a=0,s=r;for(e<i[0].dts&&(n=0,a=s+1);a<=s;){if((t=a+Math.floor((s-a)/2))===r||e>=i[t].dts&&e<i[t+1].dts){n=t;break}i[t].dts<e?a=t+1:s=t-1}return this._list[n]},l),s=(Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),o.prototype.isEmpty=function(){return 0===this._list.length},o.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},o.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var i,n=t.length-1,r=0,a=n,s=0;if(e<t[0].originalBeginDts)return-1;for(;r<=a;){if((i=r+Math.floor((a-r)/2))===n||e>t[i].lastSample.originalDts&&e<t[i+1].originalBeginDts){s=i;break}t[i].originalBeginDts<e?r=i+1:a=i-1}return s},o.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},o.prototype.append=function(e){var t=this._list,i=this._lastAppendLocation,n=0;-1!==i&&i<t.length&&e.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&e.originalBeginDts<t[i+1].originalBeginDts)?n=i+1:0<t.length&&(n=this._searchNearestSegmentBefore(e.originalBeginDts)+1),this._lastAppendLocation=n,this._list.splice(n,0,e)},o.prototype.getLastSegmentBefore=function(e){return 0<=(e=this._searchNearestSegmentBefore(e))?this._list[e]:null},o.prototype.getLastSampleBefore=function(e){return null!=(e=this.getLastSegmentBefore(e))?e.lastSample:null},o.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),i=this._list[t].syncPoints;0===i.length&&0<t;)i=this._list[--t].syncPoints;return 0<i.length?i[i.length-1]:null},o);function o(e){this._type=e,this._list=[],this._lastAppendLocation=-1}function l(){this._list=[]}function h(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}},131:function(e,t,i){"use strict";i.d(t,{Z:function(){return P}}),t=i(393);var n=i.n(t),r=i(240),a=i(340),s=i(70);function o(e,t,i){var n=e;if(t+i<n.length){for(;i--;)if(128!=(192&n[++t]))return;return 1}}function l(e){for(var t,i=[],n=e,r=0,a=e.length;r<a;){if(n[r]<128)i.push(String.fromCharCode(n[r]));else{if(!(n[r]<192))if(n[r]<224){if(o(n,r,1)&&128<=(t=(31&n[r])<<6|63&n[r+1])){i.push(String.fromCharCode(65535&t)),r+=2;continue}}else if(n[r]<240){if(o(n,r,2)&&2048<=(t=(15&n[r])<<12|(63&n[r+1])<<6|63&n[r+2])&&55296!=(63488&t)){i.push(String.fromCharCode(65535&t)),r+=3;continue}}else if(n[r]<248&&o(n,r,3)&&65536<(t=(7&n[r])<<18|(63&n[r+1])<<12|(63&n[r+2])<<6|63&n[r+3])&&t<1114112){t-=65536,i.push(String.fromCharCode(t>>>10|55296)),i.push(String.fromCharCode(1023&t|56320)),r+=4;continue}i.push(String.fromCharCode(65533))}++r}return i.join("")}var h=i(996),u=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),d=(E.parseScriptData=function(e,t,i){var n={};try{var a=E.parseValue(e,t,i),s=E.parseValue(e,t+a.size,i-a.size);n[a.data]=s.data}catch(e){r.Z.e("AMF",e.toString())}return n},E.parseObject=function(e,t,i){if(i<3)throw new h.rT("Data not enough when parse ScriptDataObject");var n=E.parseString(e,t,i);return t=(e=E.parseValue(e,t+n.size,i-n.size)).objectEnd,{data:{name:n.data,value:e.data},size:n.size+e.size,objectEnd:t}},E.parseVariable=function(e,t,i){return E.parseObject(e,t,i)},E.parseString=function(e,t,i){if(i<2)throw new h.rT("Data not enough when parse String");return{data:0<(i=new DataView(e,t,i).getUint16(0,!u))?l(new Uint8Array(e,t+2,i)):"",size:2+i}},E.parseLongString=function(e,t,i){if(i<4)throw new h.rT("Data not enough when parse LongString");return{data:0<(i=new DataView(e,t,i).getUint32(0,!u))?l(new Uint8Array(e,t+4,i)):"",size:4+i}},E.parseDate=function(e,t,i){if(i<10)throw new h.rT("Data size invalid when parse Date");return t=(e=new DataView(e,t,i)).getFloat64(0,!u),i=e.getInt16(8,!u),{data:new Date(t+=60*i*1e3),size:10}},E.parseValue=function(e,t,i){if(i<1)throw new h.rT("Data not enough when parse Value");var n=new DataView(e,t,i),a=1,s=n.getUint8(0),o=!1;try{switch(s){case 0:d=n.getFloat64(1,!u),a+=8;break;case 1:d=!!n.getUint8(1),a+=1;break;case 2:var l=E.parseString(e,t+1,i-1),d=l.data;a+=l.size;break;case 3:d={};var c=0;for(9==(16777215&n.getUint32(i-4,!u))&&(c=3);a<i-4;){var f=E.parseObject(e,t+a,i-a-c);if(f.objectEnd)break;d[f.data.name]=f.data.value,a+=f.size}a<=i-3&&9==(16777215&n.getUint32(a-1,!u))&&(a+=3);break;case 8:for(d={},a+=4,c=0,9==(16777215&n.getUint32(i-4,!u))&&(c=3);a<i-8;){var p=E.parseVariable(e,t+a,i-a-c);if(p.objectEnd)break;d[p.data.name]=p.data.value,a+=p.size}a<=i-3&&9==(16777215&n.getUint32(a-1,!u))&&(a+=3);break;case 9:a=1,o=!(d=void 0);break;case 10:d=[];var m=n.getUint32(1,!u);a+=4;for(var g=0;g<m;g++){var _=E.parseValue(e,t+a,i-a);d.push(_.data),a+=_.size}break;case 11:var y=E.parseDate(e,t+1,i-1);d=y.data,a+=y.size;break;case 12:var v=E.parseString(e,t+1,i-1);d=v.data,a+=v.size;break;default:a=i,r.Z.w("AMF","Unsupported AMF value type "+s)}}catch(e){r.Z.e("AMF",e.toString())}return{data:d,size:a,objectEnd:o}},E),c=(A.prototype.destroy=function(){this._buffer=null},A.prototype._fillCurrentWord=function(){if((e=this._total_bytes-this._buffer_index)<=0)throw new h.rT("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,e),t=new Uint8Array(4);t.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(t.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e},A.prototype.readBits=function(e){if(32<e)throw new h.OC("ExpGolomb: readBits() bits exceeded max 32bits!");var t,i;return e<=this._current_word_bits_left?(t=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t):(t=this._current_word_bits_left?this._current_word:0,t>>>=32-this._current_word_bits_left,e-=this._current_word_bits_left,this._fillCurrentWord(),e=Math.min(e,this._current_word_bits_left),i=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t<<e|i)},A.prototype.readBool=function(){return 1===this.readBits(1)},A.prototype.readByte=function(){return this.readBits(8)},A.prototype._skipLeadingZero=function(){for(var e=0;e<this._current_word_bits_left;e++)if(this._current_word&2147483648>>>e)return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},A.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},A.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},A),f=(v._ebsp2rbsp=function(e){for(var t=e,i=t.byteLength,n=new Uint8Array(i),r=0,a=0;a<i;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(n[r]=t[a],r++);return new Uint8Array(n.buffer,0,r)},v.parseSPS=function(e){e=v._ebsp2rbsp(e);var t=new c(e),i=(t.readByte(),e=t.readByte(),t.readByte(),t.readByte()),n=(t.readUEG(),v.getProfileString(e)),r=(i=v.getLevelString(i),1),a=420,s=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(3===(r=t.readUEG())&&t.readBits(1),r<=3&&(a=[0,420,422,444][r]),s=t.readUEG()+8,t.readUEG(),t.readBits(1),t.readBool()))for(var o=3!==r?8:12,l=0;l<o;l++)t.readBool()&&v._skipScalingList(t,l<6?16:64);if(t.readUEG(),0===(e=t.readUEG()))t.readUEG();else if(1===e){t.readBits(1),t.readSEG(),t.readSEG();var h=t.readUEG();for(l=0;l<h;l++)t.readSEG()}e=t.readUEG();var u=(t.readBits(1),t.readUEG()),d=t.readUEG(),f=t.readBits(1),p=(0===f&&t.readBits(1),t.readBits(1),0),m=0,g=0,_=0,y=(t.readBool()&&(p=t.readUEG(),m=t.readUEG(),g=t.readUEG(),_=t.readUEG()),1),A=1,E=0,b=!0,w=0,S=0,T=(t.readBool()&&(t.readBool()&&(0<(C=t.readByte())&&C<16?(y=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][C-1],A=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][C-1]):255===C&&(y=t.readByte()<<8|t.readByte(),A=t.readByte()<<8|t.readByte())),t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(4),t.readBool())&&t.readBits(24),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool())&&(C=t.readBits(32),T=t.readBits(32),b=t.readBool(),E=(w=T)/(S=2*C)),1),C=(1===y&&1===A||(T=y/A),0),L=0===r?(C=1,2-f):(C=3===r?1:2,(1===r?2:1)*(2-f));return r=16*(u+1),u=16*(d+1)*(2-f),r-=(p+m)*C,u-=(g+_)*L,d=Math.ceil(r*T),t.destroy(),t=null,{profile_string:n,level_string:i,bit_depth:s,ref_frames:e,chroma_format:a,chroma_format_string:v.getChromaFormatString(a),frame_rate:{fixed:b,fps:E,fps_den:S,fps_num:w},sar_ratio:{width:y,height:A},codec_size:{width:r,height:u},present_size:{width:d,height:u}}},v._skipScalingList=function(e,t){for(var i=8,n=8,r=0;r<t;r++)i=0===(n=0!==n?(i+e.readSEG()+256)%256:n)?i:n},v.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},v.getLevelString=function(e){return(e/10).toFixed(1)},v.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},v),p=(y.parseSPS=function(e){e=f._ebsp2rbsp(e);var t=new c(e),i=(e={},t.readBits(16),t.readBits(4),t.readBits(3)),n=(t.readBits(1),y._hvcc_parse_ptl(t,e,i),t.readUEG(),0),r=t.readUEG(),a=(3==r&&(n=t.readBits(1)),e.sar_width=e.sar_height=1,e.conf_win_left_offset=e.conf_win_right_offset=e.conf_win_top_offset=e.conf_win_bottom_offset=0,e.def_disp_win_left_offset=e.def_disp_win_right_offset=e.def_disp_win_top_offset=e.def_disp_win_bottom_offset=0,t.readUEG()),s=t.readUEG(),o=(t.readBits(1)&&(e.conf_win_left_offset=t.readUEG(),e.conf_win_right_offset=t.readUEG(),e.conf_win_top_offset=t.readUEG(),e.conf_win_bottom_offset=t.readUEG(),1===e.default_display_window_flag)&&(e.conf_win_left_offset,e.def_disp_win_left_offset,e.conf_win_right_offset,e.def_disp_win_right_offset,e.conf_win_top_offset,e.def_disp_win_top_offset,e.conf_win_bottom_offset,e.def_disp_win_bottom_offset),t.readUEG()+8);t.readUEG();for(var l=t.readUEG(),h=t.readBits(1)?0:i;h<=i;h++)y._skip_sub_layer_ordering_info(t);t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBits(1)&&t.readBits(1)&&y._skip_scaling_list_data(t),t.readBits(1),t.readBits(1),t.readBits(1)&&(t.readBits(4),t.readBits(4),t.readUEG(),t.readUEG(),t.readBits(1));var u=[],d=t.readUEG();for(h=0;h<d;h++){var p=y._parse_rps(t,h,d,u);if(p<0)return p}if(t.readBits(1)){var m=t.readUEG();for(h=0;h<m;h++){var g=Math.min(l+4,16);if(32<g){for(var _=g/32,v=g%32,A=0;A<_;A++)t.readBits(32);t.readBits(v)}else t.readBits(g);t.readBits(1)}}t.readBits(1),t.readBits(1),t.readBits(1)&&y._hvcc_parse_vui(t,e,i);var E=y.getProfileString(e.profile_idc),b=y.getLevelString(e.level_idc),w=1;return 1===e.sar_width&&1===e.sar_height||(w=e.sar_width/e.sar_height),a-=(1!==r&&2!=r||0!==n?1:2)*(e.conf_win_left_offset+e.conf_win_right_offset),s-=(1===r&&0===n?2:1)*(e.conf_win_top_offset+e.conf_win_bottom_offset),n=Math.ceil(a*w),t.destroy(),t=null,{profile_string:E,level_string:b,profile_idc:e.profile_idc,level_idc:e.level_idc,bit_depth:o,ref_frames:1,chroma_format:r,chroma_format_string:y.getChromaFormatString(r),frame_rate:{fixed:e.fps_fixed,fps:e.fps,fps_den:e.fps_den,fps_num:e.fps_num},sar_ratio:{width:e.sar_width,height:e.sar_height},codec_size:{width:a,height:s},present_size:{width:n,height:s}}},y._hvcc_parse_ptl=function(e,t,i){e.readBits(2);var n=e.readBits(1),r=e.readBits(5),a=(e.readBits(32),e.readBits(32),e.readBits(16),e.readByte());void 0===t.tier_flag||void 0===t.level_idc||t.tier_flag<n?t.level_idc=a:t.level_idc=Math.max(t.level_idc,a),t.profile_idc=Math.max(void 0===t.profile_idc?0:t.profile_idc,r);for(var s=[],o=[],l=0;l<i;l++)s.push(e.readBits(1)),o.push(e.readBits(1));if(0<i)for(l=i;l<8;l++)e.readBits(2);for(l=0;l<i;l++)s[l]&&(e.readBits(32),e.readBits(32),e.readBits(24)),o[l]&&e.readByte()},y._parse_rps=function(e,t,i,n){if(t&&e.readBits(1)){if(i<=t)return-1;e.readBits(1),e.readUEG();for(var r=n[t]=0;r<=n[t-1];r++){var a=0,s=e.readBits(1);s||(a=e.readBits(1)),(s||a)&&n[t]++}}else{var o=e.readUEG(),l=e.readUEG();for(n[t]=o+l,r=0;r<o;r++)e.readUEG(),e.readBits(1);for(r=0;r<l;r++)e.readUEG(),e.readBits(1)}return 0},y._hvcc_parse_vui=function(e,t,i){e.readBits(1)&&255==e.readByte()&&(t.sar_width=e.readBits(16),t.sar_height=e.readBits(16)),e.readBits(1)&&e.readBits(1),e.readBits(1)&&(e.readBits(4),e.readBits(1))&&e.readBits(24),e.readBits(1)&&(e.readUEG(),e.readUEG()),e.readBits(3),t.default_display_window_flag=e.readBits(1),t.default_display_window_flag&&(t.def_disp_win_left_offset=e.readUEG(),t.def_disp_win_right_offset=e.readUEG(),t.def_disp_win_top_offset=e.readUEG(),t.def_disp_win_bottom_offset=e.readUEG()),e.readBits(1)&&(y._skip_timing_info(e,t),e.readBits(1))&&y._skip_hrd_parameters(e,t,1,i),e.readBits(1)&&(e.readBits(3),e.readUEG(),e.readUEG(),e.readUEG(),e.readUEG(),e.readUEG())},y._skip_sub_layer_ordering_info=function(e,t){e.readUEG(),e.readUEG(),e.readUEG()},y._skip_scaling_list_data=function(e){for(var t=0;t<4;t++)for(var i=0;i<(3==t?2:6);i++)if(e.readBits(1)){var n=Math.min(64,1<<4+(t<<1));1<t&&e.readSEG();for(var r=0;r<n;r++)e.readSEG()}else e.readUEG()},y._skip_sub_layer_hrd_parameters=function(e,t,i){for(var n=0;n<=t;n++)e.readUEG(),e.readUEG(),i&&(e.readUEG(),e.readUEG()),e.readBits(1)},y._skip_timing_info=function(e,t){t.fps_den=e.readBits(32),t.fps_num=e.readBits(32),0<t.fps_den&&(t.fps=t.fps_num/t.fps_den);var i=0;e.readBits(1)&&0<=(i=e.readUEG())&&(t.fps/=i+1)},y._skip_hrd_parameters=function(e,t,i){var n=0,r=0;t&&(n=e.readBits(1),r=e.readBits(1),n||r)&&((t=e.readBits(1))&&e.readBits(19),e.readByte(),t&&e.readBits(4),e.readBits(15));for(var a=0;a<=i;a++){var s=0,o=0,l=0,h=e.readBits(1);(l=(hvcc.fps_fixed=h)?l:e.readBits(1))?e.readUEG():o=e.readBits(1),o||(s=e.readUEG(e)),n&&y._skip_sub_layer_hrd_parameters(e,s,0),r&&y._skip_sub_layer_hrd_parameters(e,s,0)}},y.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},y.getLevelString=function(e){return(e/30).toFixed(1)},y.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},y),m=i(61),g=(_.parseOBUs=function(e){for(var t=null,i=0;i<e.byteLength;){e[i];var n=(120&e[i])>>3,r=!!(4&e[i]),a=!!(2&e[i]),s=(e[i],i+=1,r&&(i+=1),Number.POSITIVE_INFINITY);if(a){s=0;for(var o=0;s|=(127&e[i])<<7*o,128&e[i+=1];o++);}1==n&&(t=_.parseSeuqneceHeader(e.subarray(i,i+s))),i+=s}return t},_.parseSeuqneceHeader=function(e){var t=new c(e),i=(e=t.readBits(3),!0),n=0,r=0,a=[];if(t.readBool(),A=t.readBool())a.push({operating_point_idc:0,level:t.readBits(5),tier:0});else{if(t.readBool()){var s=t.readBits(32),o=t.readBits(32);if(g=t.readBool()){for(var l=0;0===t.readBits(1);)l+=1;32<=l||t.readBits(l)}n=o,r=s,i=g,t.readBool()&&(t.readBits(5),t.readBits(32),t.readBits(5),t.readBits(5))}for(var h=t.readBool(),u=t.readBits(5),d=0;d<=u;d++){var f=t.readBits(12),p=t.readBits(5),m=7<p?t.readBits(1):0;a.push({operating_point_idc:f,level:p,tier:m}),!h||t.readBool()&&t.readBits(4)}}s=(o=a[0]).level;var g=o.tier,y=(o=t.readBits(4),t.readBits(4)),v=(o=t.readBits(o+1)+1,y=t.readBits(y+1)+1,!1),A=((v=A?v:t.readBool())&&(t.readBits(4),t.readBits(4)),t.readBool(),t.readBool(),t.readBool(),A||(t.readBool(),t.readBool(),t.readBool(),t.readBool(),(v=t.readBool())&&(t.readBool(),t.readBool()),!t.readBool()&&!t.readBits(1)||t.readBool()||t.readBits(1),v&&t.readBits(3)),t.readBool(),t.readBool(),t.readBool(),t.readBool()),E=(v=8,v=2===e&&A?t.readBool()?12:10:A?10:8,A=!1,1!==e&&(A=t.readBool()),t.readBool()&&(t.readBits(8),t.readBits(8),t.readBits(8)),1),b=1;return A?(t.readBits(1),b=E=1):(t.readBits(1),0==e?b=E=1:1==e?b=E=0:12==v?t.readBits(1)&&t.readBits(1):(E=1,b=0),E&&b&&t.readBits(2),t.readBits(1)),t.readBool(),t.destroy(),t=null,{codec_mimetype:"av01.".concat(e,".").concat(_.getLevelString(s,g),".").concat(v.toString(10).padStart(2,"0")),level:s,tier:g,level_string:_.getLevelString(s,g),profile_idc:e,profile_string:"".concat(e),bit_depth:v,ref_frames:1,chroma_format:_.getChromaFormat(A,E,b),chroma_format_string:_.getChromaFormatString(A,E,b),frame_rate:{fixed:i,fps:n/r,fps_den:r,fps_num:n},sar_ratio:{width:1,height:1},codec_size:{width:o,height:y},present_size:{width:+o,height:y}}},_.getLevelString=function(e,t){return"".concat(e.toString(10).padStart(2,"0")).concat(0===t?"M":"H")},_.getChromaFormat=function(e,t,i){return e?0:0===t&&0===i?3:1===t&&0===i?2:1===t&&1===i?1:Number.NaN},_.getChromaFormatString=function(e,t,i){return e?"4:0:0":0===t&&0===i?"4:4:4":1===t&&0===i?"4:2:2":1===t&&1===i?"4:2:0":"Unknown"},_);function _(){}function y(){}function v(){}function A(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function E(){}S.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},S.probe=function(e){var t,i;return(e=new Uint8Array(e)).byteLength<4||70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3]||(t=(4&e[4])>>>2!=0,i=!!(1&e[4]),(e=e[5]<<24|e[6]<<16|e[7]<<8|e[8])<9)?{match:!1}:{match:!0,consumed:e,dataOffset:e,hasAudioTrack:t,hasVideoTrack:i}},S.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(S.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onDemuxData",{get:function(){return this._onDemuxData},set:function(e){this._onDemuxData=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),S.prototype.resetMediaInfo=function(){this._mediaInfo=new s.Z},S.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},S.prototype.parseChunks=function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new h.rT("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var i=0,n=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;i=S.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+i!==this._dataOffset&&r.Z.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(a=new DataView(e,i)).getUint32(0,!n)&&r.Z.w(this.TAG,"PrevTagSize0 !== 0 !!!"),i+=4);i<e.byteLength;){this._dispatch=!0;var a=new DataView(e,i);if(i+11+4>e.byteLength)break;var s=a.getUint8(0),o=16777215&a.getUint32(0,!n);if(i+11+o+4>e.byteLength)break;if(8===s||9===s||18===s){var l=a.getUint8(4),u=a.getUint8(5),d=a.getUint8(6)|u<<8|l<<16|a.getUint8(7)<<24,c=(!!(16777215&a.getUint32(7,!n))&&r.Z.w(this.TAG,"Meet tag which has StreamID != 0!"),i+11);switch(s){case 8:this._parseAudioData(e,c,o,d);break;case 9:this._parseVideoData(e,c,o,d,t+i);break;case 18:this._parseScriptData(e,c,o)}(u=a.getUint32(11+o,!n))!==11+o&&r.Z.w(this.TAG,"Invalid PrevTagSize ".concat(u))}else r.Z.w(this.TAG,"Unsupported tag type ".concat(s,", skipped"));i+=11+o+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),i},S.prototype._parseScriptData=function(e,t,i){if((e=d.parseScriptData(e,t,i)).hasOwnProperty("onMetaData")){if(null==e.onMetaData||"object"!=typeof e.onMetaData)return void r.Z.w(this.TAG,"Invalid onMetaData structure!");var n;this._metadata&&r.Z.w(this.TAG,"Found another onMetaData tag!"),this._metadata=e,t=this._metadata.onMetaData,this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},t)),"boolean"==typeof t.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=t.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof t.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=t.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof t.audiodatarate&&(this._mediaInfo.audioDataRate=t.audiodatarate),"number"==typeof t.videodatarate&&(this._mediaInfo.videoDataRate=t.videodatarate),"number"==typeof t.width&&(this._mediaInfo.width=t.width),"number"==typeof t.height&&(this._mediaInfo.height=t.height),"number"==typeof t.duration?this._durationOverrided||(i=Math.floor(t.duration*this._timescale),this._duration=i,this._mediaInfo.duration=i):this._mediaInfo.duration=0,"number"==typeof t.framerate&&0<(i=Math.floor(1e3*t.framerate))&&(n=i/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=n,this._referenceFrameRate.fps_num=i,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=n),"object"==typeof t.keyframes?(this._mediaInfo.hasKeyframesIndex=!0,i=t.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(i),t.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=t,r.Z.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(e).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},e))},S.prototype._parseKeyframesIndex=function(e){for(var t=[],i=[],n=1;n<e.times.length;n++){var r=this._timestampBase+Math.floor(1e3*e.times[n]);t.push(r),i.push(e.filepositions[n])}return{times:t,filepositions:i}},S.prototype._parseAudioData=function(e,t,i,n){if(i<=1)r.Z.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var a=(u=new DataView(e,t,i).getUint8(0))>>>4;if(2==a||10==a){var s=(12&u)>>>2;if(0<=s&&s<=4){var o,l,h=this._flvSoundRateTable[s],u=1&u,d=this._audioMetadata,c=this._audioTrack;if(d||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(d=this._audioMetadata={}).type="audio",d.id=c.id,d.timescale=this._timescale,d.duration=this._duration,d.audioSampleRate=h,d.channelCount=0==u?1:2),10==a)null!=(h=this._parseAACAudioData(e,t+1,i-1,this._timestampBase+n))&&(0===h.packetType?(d.config&&r.Z.w(this.TAG,"Found another AudioSpecificConfig!"),l=h.data,d.audioSampleRate=l.samplingRate,d.channelCount=l.channelCount,d.codec=l.codec,d.originalCodec=l.originalCodec,d.config=l.config,d.audioconfig=l.audioconfig,d.samplingIndex=l.samplingIndex,d.refSampleDuration=1024/d.audioSampleRate*d.timescale,r.Z.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",d),(o=this._mediaInfo).audioCodec=d.originalCodec,o.audioSampleRate=d.audioSampleRate,o.audioChannelCount=d.channelCount,o.hasVideo?null!=o.videoCodec&&(o.mimeType='video/x-flv; codecs="'+o.videoCodec+","+o.audioCodec+'"'):o.mimeType='video/x-flv; codecs="'+o.audioCodec+'"',o.isComplete()&&this._onMediaInfo(o)):1===h.packetType?(f=this._timestampBase+n,u={unit:h.data,length:h.data.byteLength,dts:f,pts:f},c.samples.push(u),c.length+=h.data.length):r.Z.e(this.TAG,"Flv: Unsupported AAC data type ".concat(h.packetType)));else if(2==a){if(!d.codec){if(null==(l=this._parseMP3AudioData(e,t+1,i-1,!0)))return;d.audioSampleRate=l.samplingRate,d.channelCount=l.channelCount,d.codec=l.codec,d.originalCodec=l.originalCodec,d.refSampleDuration=1152/d.audioSampleRate*d.timescale,r.Z.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",d),(o=this._mediaInfo).audioCodec=d.codec,o.audioSampleRate=d.audioSampleRate,o.audioChannelCount=d.channelCount,o.audioDataRate=l.bitRate,o.hasVideo?null!=o.videoCodec&&(o.mimeType='video/x-flv; codecs="'+o.videoCodec+","+o.audioCodec+'"'):o.mimeType='video/x-flv; codecs="'+o.audioCodec+'"',o.isComplete()&&this._onMediaInfo(o)}var f;null!=(u=this._parseMP3AudioData(e,t+1,i-1,!1))&&(f=this._timestampBase+n,h={unit:u,length:u.byteLength,dts:f,pts:f},c.samples.push(h),c.length+=u.length)}}else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+s)}else this._onError(m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+a)}},S.prototype._parseAACAudioData=function(e,t,i,n){var a,s;if(!(i<=1))return a={},s=new Uint8Array(e,t,i),a.packetType=s[0],0===s[0]?a.data=this._parseAACAudioSpecificConfig(e,t+1,i-1):(a.data=s.subarray(1),this._onlyDemuxer&&(e=this._constructAdtsHeader(this._audioMetadata,a.data),t=this._concatUint8(new Uint8Array(e),a.data),this._onDemuxData({type:"audio",data:{data:t,pts:n}}))),a;r.Z.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},S.prototype._constructAdtsHeader=function(e,t){var i=e.audioSampleRate,n=e.channelCount;return e=e.audioconfig,i=this._doubleCheckSampleRateIndex(e,i),(e=new Uint8Array(7))[0]=255,e[1]=240,e[1]=1|e[1],e[2]=64,e[2]=e[2]|60&i<<2,e[2]=e[2]|1&n>>2,e[3]=192&n<<6,i=t.byteLength+7,e[3]=e[3]|3&i>>11,e[4]=255&i>>3,e[5]=224&i<<5,e[5]=31|e[5],e[6]=252,e},S.prototype._doubleCheckSampleRateIndex=function(e,t){return(e=(7&e[0])<<1|e[1]>>>7)!==t?e:t},S.prototype._parseAACAudioSpecificConfig=function(e,t,i){e=new Uint8Array(e,t,i),t=null,i=0;var n,r,a=null;if(i=n=e[0]>>>3,(r=(7&e[0])<<1|e[1]>>>7)<0||r>=this._mpegSamplingRates.length)this._onError(m.Z.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var s,o=this._mpegSamplingRates[r],l=(120&e[1])>>>3;if(!(l<0||8<=l))return 5===i&&(a=(7&e[1])<<1|e[2]>>>7,e[2]),-1!==(s=self.navigator.userAgent.toLowerCase()).indexOf("firefox")?a=6<=r?(i=5,t=new Array(4),r-3):(i=2,t=new Array(2),r):-1!==s.indexOf("android")?(i=2,t=new Array(2),a=r):(i=5,a=r,t=new Array(4),6<=r?a=r-3:1==l&&(i=2,t=new Array(2),a=r)),t[0]=i<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&l)<<3,5===i&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),{config:t,audioconfig:[e[0],e[1]],samplingRate:o,channelCount:l,samplingIndex:r,codec:"mp4a.40."+i,originalCodec:"mp4a.40."+n};this._onError(m.Z.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},S.prototype._parseMP3AudioData=function(e,t,i,n){if(!(i<4)){if(this._littleEndian,e=new Uint8Array(e,t,i),t=null,n){if(255!==e[0])return;i=e[1]>>>3&3,n=(6&e[1])>>1;var a=(240&e[2])>>>4,s=(12&e[2])>>>2,o=3&~(e[3]>>>6)?2:1,l=0,h=0;switch(i){case 0:l=this._mpegAudioV25SampleRateTable[s];break;case 2:l=this._mpegAudioV20SampleRateTable[s];break;case 3:l=this._mpegAudioV10SampleRateTable[s]}switch(n){case 1:a<this._mpegAudioL3BitRateTable.length&&(h=this._mpegAudioL3BitRateTable[a]);break;case 2:a<this._mpegAudioL2BitRateTable.length&&(h=this._mpegAudioL2BitRateTable[a]);break;case 3:a<this._mpegAudioL1BitRateTable.length&&(h=this._mpegAudioL1BitRateTable[a])}t={bitRate:h,samplingRate:l,channelCount:o,codec:"mp3",originalCodec:"mp3"}}else t=e;return t}r.Z.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},S.prototype._parseVideoData=function(e,t,i,n,a){var s,o,l,h;i<=1?r.Z.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(o=(112&(s=new Uint8Array(e,t,i)[0]))>>>4,128&s?(l=15&s,"hvc1"===(h=String.fromCharCode.apply(String,new Uint8Array(e,t,i).slice(1,5)))?this._parseHVCVideoPacket(e,t+5,i-5,n,a,o,l):"av01"!==h?this._onError(m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(h)):this._parseEnhancedAV1VideoPacket(e,t+5,i-5,n,a,o,l)):7==(h=15&s)?this._parseAVCVideoPacket(e,t+1,i-1,n,a,o):12!=h?this._onError(m.Z.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: ".concat(h)):this._parseHVCVideoPacket(e,t+1,i-1,n,a,o))},S.prototype._parseAVCVideoPacket=function(e,t,i,n,a,s){if(i<4)r.Z.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var o=this._littleEndian,l=(h=new DataView(e,t,i)).getUint8(0),h=(16777215&h.getUint32(0,!o))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,i-4);else if(1===l)this._parseAVCVideoData(e,t+4,i-4,n,a,s,h);else if(2!==l)return void this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(l))}},S.prototype._parseAVCDecoderConfigurationRecord=function(e,t,i){if(i<7)r.Z.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var n=this._videoMetadata,a=this._videoTrack,s=this._littleEndian,o=new DataView(e,t,i),l=(n?void 0!==n.avcc&&r.Z.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(n=this._videoMetadata={}).type="video",n.id=a.id,n.timescale=this._timescale,n.duration=this._duration),a=o.getUint8(0),o.getUint8(1));if(o.getUint8(2),o.getUint8(3),1===a&&0!==l)if(this._naluLengthSize=1+(3&o.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var h=31&o.getUint8(5);if(0!=h){1<h&&r.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ".concat(h));for(var u=6,d=0;d<h;d++){var c=o.getUint16(u,!s);if(u+=2,0!==c){var p=new Uint8Array(e,t+u,c),g=(u+=c,f.parseSPS(p));if(0===d){n.codecWidth=g.codec_size.width,n.codecHeight=g.codec_size.height,n.presentWidth=g.present_size.width,n.presentHeight=g.present_size.height,n.profile=g.profile_string,n.level=g.level_string,n.bitDepth=g.bit_depth,n.chromaFormat=g.chroma_format,n.sarRatio=g.sar_ratio,n.frameRate=g.frame_rate,!1!==g.frame_rate.fixed&&0!==g.frame_rate.fps_num&&0!==g.frame_rate.fps_den||(n.frameRate=this._referenceFrameRate);var _=n.frameRate.fps_den,y=n.frameRate.fps_num;n.refSampleDuration=n.timescale*(_/y);for(var v=p.subarray(1,4),A="avc1.",E=0;E<3;E++){var b=v[E].toString(16);A+=b=b.length<2?"0"+b:b}n.codec=A,(_=this._mediaInfo).width=n.codecWidth,_.height=n.codecHeight,_.fps=n.frameRate.fps,_.profile=n.profile,_.level=n.level,_.refFrames=g.ref_frames,_.chromaFormat=g.chroma_format_string,_.sarNum=n.sarRatio.width,_.sarDen=n.sarRatio.height,_.videoCodec=A,_.hasAudio?null!=_.audioCodec&&(_.mimeType='video/x-flv; codecs="'+_.videoCodec+","+_.audioCodec+'"'):_.mimeType='video/x-flv; codecs="'+_.videoCodec+'"',_.isComplete()&&this._onMediaInfo(_)}}}var w=o.getUint8(u);if(0!==w){for(1<w&&r.Z.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ".concat(w)),u++,d=0;d<w;d++)c=o.getUint16(u,!s),u+=2,0!==c&&(u+=c);n.avcc=new Uint8Array(i),n.avcc.set(new Uint8Array(e,t,i),0),r.Z.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",n)}else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(m.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},S.prototype._parseAVCVideoData=function(e,t,i,n,a,s,o){for(var l=this._littleEndian,h=new DataView(e,t,i),u=[],d=0,c=0,f=this._naluLengthSize,p=this._timestampBase+n,m=1===s;c<i;){if(i<=c+4){r.Z.w(this.TAG,"Malformed Nalu near timestamp ".concat(p,", offset = ").concat(c,", dataSize = ").concat(i));break}var g=h.getUint32(c,!l);if(3===f&&(g>>>=8),i-f<g)return void r.Z.w(this.TAG,"Malformed Nalus near timestamp ".concat(p,", NaluSize > DataSize!"));var _=31&h.getUint8(c+f),y=(5==_&&(m=!0),new Uint8Array(e,t+c,f+g));if(6==_&&5===h.getUint8(c+f+1)){for(var v=0,A=0;255==y[5+ ++A];)v+=255;for(var E=6+--A,b=y[E]+v,w="",S=1;S<=16;S++)w+=y[++E];for(var T=b-16,C=0,L=new Uint8Array(T);L[C]=y[++E],++C<=T;);this._onSeiInfo&&this._onSeiInfo({unitType:_,data:L,pts:(p+o)/1e3,uuid:w})}u.push({type:_,data:y}),d+=y.byteLength,c+=f+g}u.length&&(n=this._videoTrack,s={units:u,length:d,isKeyframe:m,dts:p,cts:o,pts:p+o},m&&(s.fileposition=a),n.samples.push(s),n.length+=d)},S.prototype._parseHVCVideoPacket=function(e,t,i,n,a,s){if(i<4)r.Z.w(this.TAG,"Flv: Invalid HVC packet, missing HVCPacketType or/and CompositionTime");else{var o=this._littleEndian,l=(h=new DataView(e,t,i)).getUint8(0),h=(16777215&h.getUint32(0,!o))<<8>>8;if(0===l)this._parseHVCDecoderConfigurationRecord(e,t+4,i-4);else if(1===l)this._parseHVCVideoData(e,t+4,i-4,n,a,s,h);else if(2!==l)return void this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(l))}},S.prototype._parseHVCDecoderConfigurationRecord=function(e,t,i){if(i<23)r.Z.w(this.TAG,"Flv: Invalid HVCDecoderConfigurationRecord, lack of data!");else{var n=this._videoMetadata,a=this._videoTrack,s=this._littleEndian,o=new DataView(e,t,i),l=(n?void 0!==n.hvcc&&r.Z.w(this.TAG,"Found another HVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(n=this._videoMetadata={}).type="video",n.id=a.id,n.timescale=this._timescale,n.duration=this._duration),a=o.getUint8(0),31&o.getUint8(1));if(1===a&&0!=l)if(this._naluLengthSize=1+(3&o.getUint8(21)),3===this._naluLengthSize||4===this._naluLengthSize){for(var h,u,d,c,f=o.getUint8(22),g=23,_=[],y=[],v=[],A=0;A<f;A++){var E=63&o.getUint8(g++),b=o.getUint16(g,!s);if(g+=2,0!==b){switch(E){case 32:h+=b;break;case 33:u+=b;break;case 34:d+=b}for(var w=0;w<b;w++){var S,T,C=o.getUint16(g,!s);g+=2,0!==C&&(33==E?(S=new Uint8Array(e,t+g,C),_.push(S)):32==E?(S=new Uint8Array(e,t+g,C),y.push(S)):34==E&&(T=new Uint8Array(e,t+g,C),v.push(T)),g+=C)}}}this.firstData=this._concatUint8(new Uint8Array([0,0,0,1]),y[0],new Uint8Array([0,0,0,1]),_[0],new Uint8Array([0,0,0,1]),v[0]),0!==h?(1<h&&r.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: VPS Count = ".concat(h)),0!==u?(1<u&&r.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: SPS Count = ".concat(u)),0!==d?(1<d&&r.Z.w(this.TAG,"Flv: Strange HVCDecoderConfigurationRecord: PPS Count = ".concat(u)),a=p.parseSPS(_[0]),n.codecWidth=a.codec_size.width,n.codecHeight=a.codec_size.height,n.presentWidth=a.present_size.width,n.presentHeight=a.present_size.height,n.profile=a.profile_string,n.level=a.level_string,n.profile_idc=a.profile_idc,n.level_idc=a.level_idc,n.bitDepth=a.bit_depth,n.chromaFormat=a.chroma_format,n.sarRatio=a.sar_ratio,n.frameRate=a.frame_rate,!1!==a.frame_rate.fixed&&0!==a.frame_rate.fps_num&&0!==a.frame_rate.fps_den&&a.frame_rate.fixed||(n.frameRate=this._referenceFrameRate),l=n.frameRate.fps_den,c=n.frameRate.fps_num,n.refSampleDuration=n.timescale*(l/c),l="hvc1."+n.profile_idc+".1.L"+n.level_idc+".B0",n.codec=l,(c=this._mediaInfo).width=n.codecWidth,c.height=n.codecHeight,c.fps=n.frameRate.fps||25,c.profile=n.profile,c.level=n.level,c.refFrames=a.ref_frames,c.chromaFormat=a.chroma_format_string,c.sarNum=n.sarRatio.width,c.sarDen=n.sarRatio.height,c.videoCodec=l,c.hasAudio?null!=c.audioCodec&&(c.mimeType='video/x-flv; codecs="'+c.videoCodec+","+c.audioCodec+'"'):c.mimeType='video/x-flv; codecs="'+c.videoCodec+'"',c.isComplete()&&this._onMediaInfo(c),n.hvcc=new Uint8Array(i),n.hvcc.set(new Uint8Array(e,t,i),0),r.Z.v(this.TAG,"Parsed HVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",n)):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No PPS")):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No SPS")):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord: No VPS")}else this._onError(m.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: ".concat(this._naluLengthSize-1));else this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid HVCDecoderConfigurationRecord")}},S.prototype._parseHVCVideoData=function(e,t,i,n,a,s,o){for(var l=this._littleEndian,h=new DataView(e,t,i),u=[],d=0,c=0,f=this._naluLengthSize,p=this._timestampBase+n,m=1===s;c<i;){if(i<=c+4){r.Z.w(this.TAG,"Malformed Nalu near timestamp ".concat(p,", offset = ").concat(c,", dataSize = ").concat(i));break}var g=h.getUint32(c,!l);if(3===f&&(g>>>=8),i-f<g)return void r.Z.w(this.TAG,"Malformed Nalus near timestamp ".concat(p,", NaluSize > DataSize!"));var _=h.getUint8(c+f)>>1&63,y=(16<=_&&_<=23&&(m=!0),new Uint8Array(e,t+c,f+g));u.push({type:_,data:y}),d+=y.byteLength,c+=f+g}if(u.length&&(n={units:u,length:d,isKeyframe:m,dts:p,cts:o,pts:p+o,firstData:this.firstData},m&&(n.fileposition=a),this._onlyDemuxer||((s=this._videoTrack).samples.push(n),s.length+=d),this._onlyDemuxer)){for(var v=null,A=0;A<u.length;A++){var E=u[A].data;E[0]=0,E[1]=0,E[2]=0,E[3]=1,v=v?this._concatUint8(v,new Uint8Array(E,0,E.length)):new Uint8Array(E,0,E.length)}n.videoData=this._concatUint8(this.firstData,new Uint8Array(v,0,v.length)),this._onDemuxData({type:"video",data:n}),this.isFirstData=!1}},S.prototype._parseEnhancedAV1VideoPacket=function(e,t,i,n,r,a,s){this._littleEndian,new DataView(e,t,i),0===s?this._parseAV1CodecConfigurationRecord(e,t,i):1===s?this._parseAV1VideoData(e,t,i,n,r,a,0):5===s?this._onError(m.Z.FORMAT_ERROR,"Flv: Not Suported MP2T AV1 video packet type ".concat(s)):2!==s&&this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid video packet type ".concat(s))},S.prototype._parseAV1CodecConfigurationRecord=function(e,t,i){var n,a,s,o;i<4?r.Z.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!"):(n=this._videoMetadata,o=this._videoTrack,this._littleEndian,a=new DataView(e,t,i),n?void 0!==n.av1c&&r.Z.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(n=this._videoMetadata={}).type="video",n.id=o.id,n.timescale=this._timescale,n.duration=this._duration),o=127&a.getUint8(0),a.getUint8(1),a.getUint8(1),a.getUint8(2),1==o&&null!=(a=g.parseOBUs(new Uint8Array(e,t+4,i-4)))?(n.codecWidth=a.codec_size.width,n.codecHeight=a.codec_size.height,n.presentWidth=a.present_size.width,n.presentHeight=a.present_size.height,n.profile=a.profile_string,n.level=a.level_string,n.bitDepth=a.bit_depth,n.chromaFormat=a.chroma_format,n.sarRatio=a.sar_ratio,n.frameRate=a.frame_rate,!1!==a.frame_rate.fixed&&0!==a.frame_rate.fps_num&&0!==a.frame_rate.fps_den||(n.frameRate=this._referenceFrameRate),o=n.frameRate.fps_den,s=n.frameRate.fps_num,n.refSampleDuration=n.timescale*(o/s),n.codec=a.codec_mimetype,(o=this._mediaInfo).width=n.codecWidth,o.height=n.codecHeight,o.fps=n.frameRate.fps,o.profile=n.profile,o.level=n.level,o.refFrames=a.ref_frames,o.chromaFormat=a.chroma_format_string,o.sarNum=n.sarRatio.width,o.sarDen=n.sarRatio.height,o.videoCodec=a.codec_mimetype,o.hasAudio?null!=o.audioCodec&&(o.mimeType='video/x-flv; codecs="'+o.videoCodec+","+o.audioCodec+'"'):o.mimeType='video/x-flv; codecs="'+o.videoCodec+'"',o.isComplete()&&this._onMediaInfo(o),n.av1c=new Uint8Array(i),n.av1c.set(new Uint8Array(e,t,i),0),r.Z.v(this.TAG,"Parsed AV1CodecConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",n)):this._onError(m.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"))},S.prototype._parseAV1VideoData=function(e,t,i,n,r,a,s){this._littleEndian,new DataView(e,t,i);var o=[],l=(n=this._timestampBase+n,a=1===a,i);o.push({unitType:0,data:new Uint8Array(e,t+0,i)}),o.length&&(e=this._videoTrack,t={units:o,length:l,isKeyframe:a,dts:n,cts:s,pts:n+s},a&&(t.fileposition=r),e.samples.push(t),e.length+=l)},S.prototype._concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e.reduce((function(e,t){return e+t.byteLength}),0),n=new Uint8Array(i),r=0;return e.forEach((function(e){n.set(e,r),r+=e.byteLength})),n};var b=S;function w(){}function S(e,t){this.TAG="FLVDemuxer",this._config=t,this._onlyDemuxer=t.onlyDemuxer||!1,this._onError=null,this._onMediaInfo=null,this._onDemuxData=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.Z,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]),this.curPts=null,this.firstData=[],this.isFirstData=!0}w.init=function(){for(var e in w.types={hvc1:[],hvcC:[],av01:[],av1C:[],avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],pasp:[],".mp3":[]})w.types.hasOwnProperty(e)&&(w.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=w.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},w.box=function(e){for(var t=8,i=null,n=Array.prototype.slice.call(arguments,1),r=n.length,a=0;a<r;a++)t+=n[a].byteLength;(i=new Uint8Array(t))[0]=t>>>24&255,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i.set(e,4);var s=8;for(a=0;a<r;a++)i.set(n[a],s),s+=n[a].byteLength;return i},w.generateInitSegment=function(e){var t=w.box(w.types.ftyp,w.constants.FTYP),i=(e=w.moov(e),new Uint8Array(t.byteLength+e.byteLength));return i.set(t,0),i.set(e,t.byteLength),i},w.moov=function(e){var t=w.mvhd(e.timescale,e.duration),i=w.trak(e);return e=w.mvex(e),w.box(w.types.moov,t,i,e)},w.mvhd=function(e,t){return w.box(w.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},w.trak=function(e){return w.box(w.types.trak,w.tkhd(e),w.mdia(e))},w.tkhd=function(e){var t=e.id,i=e.duration,n=e.presentWidth;return e=e.presentHeight,w.box(w.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,e>>>8&255,255&e,0,0]))},w.mdia=function(e){return w.box(w.types.mdia,w.mdhd(e),w.hdlr(e),w.minf(e))},w.mdhd=function(e){var t=e.timescale;return e=e.duration,w.box(w.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))},w.hdlr=function(e){return e="audio"===e.type?w.constants.HDLR_AUDIO:w.constants.HDLR_VIDEO,w.box(w.types.hdlr,e)},w.minf=function(e){var t="audio"===e.type?w.box(w.types.smhd,w.constants.SMHD):w.box(w.types.vmhd,w.constants.VMHD);return w.box(w.types.minf,t,w.dinf(),w.stbl(e))},w.dinf=function(){return w.box(w.types.dinf,w.box(w.types.dref,w.constants.DREF))},w.stbl=function(e){return w.box(w.types.stbl,w.stsd(e),w.box(w.types.stts,w.constants.STTS),w.box(w.types.stsc,w.constants.STSC),w.box(w.types.stsz,w.constants.STSZ),w.box(w.types.stco,w.constants.STCO))},w.stsd=function(e){return"audio"===e.type?"mp3"===e.codec?w.box(w.types.stsd,w.constants.STSD_PREFIX,w.mp3(e)):w.box(w.types.stsd,w.constants.STSD_PREFIX,w.mp4a(e)):0<=e.codec.indexOf("avc1")?w.box(w.types.stsd,w.constants.STSD_PREFIX,w.avc1(e)):"video"===e.type&&e.codec.startsWith("av01")?w.box(w.types.stsd,w.constants.STSD_PREFIX,w.av01(e)):w.box(w.types.stsd,w.constants.STSD_PREFIX,w.hvc1(e))},w.mp3=function(e){var t=e.channelCount;return e=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]),w.box(w.types[".mp3"],t)},w.mp4a=function(e){var t=e.channelCount,i=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]),w.box(w.types.mp4a,t,w.esds(e))},w.esds=function(e){var t=(e=e.config||[]).length;return t=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2])),w.box(w.types.esds,t)},w.avc1=function(e){var t=e.avcc,i=e.codecWidth;return e=e.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),w.box(w.types.avc1,i,w.box(w.types.avcC,t))},w.hvc1=function(e){var t=e.hvcc,i=e.codecWidth;return e=e.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),w.box(w.types.hvc1,i,w.box(w.types.hvcC,t))},w.av01=function(e){var t=e.av1c,i=e.codecWidth||192;return e=e.codecHeight||108,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),w.box(w.types.av01,i,w.box(w.types.av1C,t))},w.mvex=function(e){return w.box(w.types.mvex,w.trex(e))},w.trex=function(e){return e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]),w.box(w.types.trex,e)},w.moof=function(e,t){return w.box(w.types.moof,w.mfhd(e.sequenceNumber),w.traf(e,t))},w.mfhd=function(e){return e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]),w.box(w.types.mfhd,e)},w.traf=function(e,t){var i=e.id,n=(i=w.box(w.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),t=w.box(w.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),w.sdtp(e));return e=w.trun(e,n.byteLength+16+16+8+16+8+8),w.box(w.types.traf,i,t,e,n)},w.sdtp=function(e){for(var t=e.samples||[],i=t.length,n=new Uint8Array(4+i),r=0;r<i;r++){var a=t[r].flags;n[r+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return w.box(w.types.sdtp,n)},w.trun=function(e,t){var i=e.samples||[],n=i.length,r=(e=12+16*n,new Uint8Array(e));r.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var a=0;a<n;a++){var s=i[a].duration,o=i[a].size,l=i[a].flags,h=i[a].cts;r.set([s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*a)}return w.box(w.types.trun,r)},w.mdat=function(e){return w.box(w.types.mdat,e)},(t=w).init();var T=t,C=(M.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},M),L=i(779),R=(x.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},x.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(x.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),x.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0,this._audioNextPts=this._videoNextPts=void 0},x.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},x.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new h.rT("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},x.prototype._onTrackMetadataReceived=function(e,t){var i=null,n="mp4",r=t.codec;if("audio"===e)i="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(n="mpeg",r="",new Uint8Array):T.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,i=T.generateInitSegment(t)}if(!this._onInitSegment)throw new h.rT("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:i.buffer,codec:r,container:"".concat(e,"/").concat(n),mediaDuration:t.duration})},x.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},x.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,i={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(i.samples.push(e),i.length=e.length),e={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(i,!0),this._remuxAudio(e,!0)},x.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var i=e.samples,n=void 0,s=-1,o=this._audioMeta.refSampleDuration,l="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,h=this._dtsBaseInited&&void 0===this._audioNextDts,u=!1;if(i&&0!==i.length&&(1!==i.length||t)){var d,c,f=0,p=null,m=0,g=(m=l?(f=0,e.length):(f=8)+e.length,null);1<i.length&&(m-=(g=i.pop()).length),null!=this._audioStashedLastSample&&(d=this._audioStashedLastSample,this._audioStashedLastSample=null,i.unshift(d),m+=d.length),null!=g&&(this._audioStashedLastSample=g),t=i[0].dts-this._dtsBase,this._audioNextDts?n=t-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(n=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(u=!0)):n=null!=(x=this._audioSegmentInfoList.getLastSampleBefore(t))?(M=t-(x.originalDts+x.duration),t-(x.dts+x.duration+(M=M<=3?0:M))):0,u&&(x=t-n,null!=(M=this._videoSegmentInfoList.getLastSegmentBefore(t))&&M.beginDts<x?(R=C.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(c=M.beginDts,t=x-M.beginDts,r.Z.v(this.TAG,"InsertPrefixSilentAudio: dts: ".concat(c,", duration: ").concat(t)),i.unshift({unit:R,dts:c,pts:c}),m+=R.byteLength):u=!1);for(var _=[],y=0;y<i.length;y++){var v=(d=i[y]).unit,A=d.dts-this._dtsBase,E=!1,b=null,w=0;if(!((c=A)<-.001)){if("mp3"!==this._audioMeta.codec){var S=A;if((n=A-(S=this._audioNextDts?this._audioNextDts:S))<=-3*o){r.Z.w(this.TAG,"Dropping 1 audio frame (originalDts: ".concat(A," ms ,curRefDts: ").concat(S," ms)  due to dtsCorrection: ").concat(n," ms overlap."));continue}if(3*o<=n&&this._fillAudioTimestampGap&&!a.Z.safari){E=!0;var R,I=Math.floor(n/o);r.Z.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\n"+"originalDts: ".concat(A," ms, curRefDts: ").concat(S," ms, ")+"dtsCorrection: ".concat(Math.round(n)," ms, generate: ").concat(I," frames")),c=Math.floor(S),w=Math.floor(S+o)-c,null==(R=C.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(r.Z.w(this.TAG,"Unable to generate silent frame for "+"".concat(this._audioMeta.originalCodec," with ").concat(this._audioMeta.channelCount," channels, repeat last frame")),R=v),b=[];for(var k=0;k<I;k++){S+=o;var P=Math.floor(S),D=Math.floor(S+o)-P;P={dts:P,pts:P,cts:0,unit:R,size:R.byteLength,duration:D,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}},b.push(P),m+=P.size}}else c=Math.floor(S),w=Math.floor(S+o)-c;this._audioNextPts=this._audioNextDts=S+o}else c=A-n,w=y!==i.length-1?i[y+1].dts-this._dtsBase-n-c:null!=g?g.dts-this._dtsBase-n-c:1<=_.length?_[_.length-1].duration:Math.floor(o),this._audioNextPts=this._audioNextDts=c+w;-1===s&&(s=c),_.push({dts:c,pts:c,cts:0,unit:d.unit,size:d.unit.byteLength,duration:w,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),E&&_.push.apply(_,b)}}if(0===_.length)e.samples=[],e.length=0;else{for(l?p=new Uint8Array(m):((p=new Uint8Array(m))[0]=m>>>24&255,p[1]=m>>>16&255,p[2]=m>>>8&255,p[3]=255&m,p.set(T.types.mdat,4)),y=0;y<_.length;y++)v=_[y].unit,p.set(v,f),f+=v.byteLength;var x=_[_.length-1],M=x.dts+x.duration;(t=new L.Yy).beginDts=s,t.endDts=M,t.beginPts=s,t.endPts=M,t.originalBeginDts=_[0].originalDts,t.originalEndDts=x.originalDts+x.duration,t.firstSample=new L.Wk(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,!1),t.lastSample=new L.Wk(x.dts,x.pts,x.duration,x.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(t),e.samples=_,e.sequenceNumber++,u=l?new Uint8Array:T.moof(e,s),e.samples=[],e.length=0,M={type:"audio",data:this._mergeBoxes(u,p).buffer,sampleCount:_.length,info:t},l&&h&&(M.timestampOffset=s),this._onMediaSegment("audio",M)}}}},x.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var i=e,n=i.samples,r=void 0,a=-1,s=-1;if(n&&0!==n.length&&(1!==n.length||t)){var o,l=8,h=null,u=(t=8+e.length,null);1<n.length&&(t-=(u=n.pop()).length),null!=this._videoStashedLastSample&&(o=this._videoStashedLastSample,this._videoStashedLastSample=null,n.unshift(o),t+=o.length),null!=u&&(this._videoStashedLastSample=u),e=n[0].dts-this._dtsBase,r=this._videoNextDts?e-this._videoNextDts:this._videoSegmentInfoList.isEmpty()||null==(w=this._videoSegmentInfoList.getLastSampleBefore(e))?0:(S=e-(w.originalDts+w.duration),e-(w.dts+w.duration+(S=S<=3?0:S)));for(var d=new L.Yy,c=[],f=0;f<n.length;f++){var p,m=(o=n[f]).dts-this._dtsBase,g=o.isKeyframe,_=m-r,y=o.cts,v=_+y,A=-1===a&&(a=_,s=v);A=f!==n.length-1?n[f+1].dts-this._dtsBase-r-_:null!=u?u.dts-this._dtsBase-r-_:1<=c.length?c[c.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),g&&((p=new L.Wk(_,v,A,o.dts,!0)).fileposition=o.fileposition,d.appendSyncPoint(p)),c.push({dts:_,pts:v,cts:y,units:o.units,size:o.length,isKeyframe:g,duration:A,originalDts:m,flags:{isLeading:0,dependsOn:g?2:1,isDependedOn:g?1:0,hasRedundancy:0,isNonSync:g?0:1}})}for((h=new Uint8Array(t))[0]=t>>>24&255,h[1]=t>>>16&255,h[2]=t>>>8&255,h[3]=255&t,h.set(T.types.mdat,4),f=0;f<c.length;f++)for(var E=c[f].units;E.length;){var b=E.shift().data;h.set(b,l),l+=b.byteLength}var w=(e=c[c.length-1]).dts+e.duration,S=e.pts+e.duration;this._videoNextDts=w,this._videoNextPts=S,d.beginDts=a,d.endDts=w,d.beginPts=s,d.endPts=S,d.originalBeginDts=c[0].originalDts,d.originalEndDts=e.originalDts+e.duration,d.firstSample=new L.Wk(c[0].dts,c[0].pts,c[0].duration,c[0].originalDts,c[0].isKeyframe),d.lastSample=new L.Wk(e.dts,e.pts,e.duration,e.originalDts,e.isKeyframe),this._isLive||this._videoSegmentInfoList.append(d),i.samples=c,i.sequenceNumber++,this._forceFirstIDR&&((t=c[0].flags).dependsOn=2,t.isNonSync=0),w=T.moof(i,a),i.samples=[],i.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(w,h).buffer,sampleCount:c.length,info:d})}}},x.prototype._mergeBoxes=function(e,t){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(e,0),i.set(t,e.byteLength),i},x),I=i(979),k=i(458),P=(i(475),D.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},D.prototype.on=function(e,t){this._emitter.addListener(e,t)},D.prototype.off=function(e,t){this._emitter.removeListener(e,t)},D.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},D.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var i=this._mediaDataSource.segments[e];(i=this._ioctl=new I.Z(i,this._config,e)).onError=this._onIOException.bind(this),i.onSeeked=this._onIOSeeked.bind(this),i.onComplete=this._onIOComplete.bind(this),i.onRedirect=this._onIORedirect.bind(this),i.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):i.onDataArrival=this._onInitChunkArrival.bind(this),i.open(t)},D.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},D.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},D.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},D.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},D.prototype.seek=function(e){var t,i,n;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(n=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(i=n.getNearestKeyframe(e),this._remuxer.seek(i.milliseconds),this._ioctl.seek(i.fileposition),this._pendingResolveSeekPoint=i.milliseconds):null==(n=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(i=n.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,i.fileposition),this._pendingResolveSeekPoint=i.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())},D.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,i=t.length-1,n=0;n<t.length;n++)if(e<t[n].timestampBase){i=n-1;break}return i},D.prototype._onInitChunkArrival=function(e,t){var i,n=this;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,this._demuxer.parseChunks(e,t)):(i=b.probe(e)).match?(this._demuxer=new b(i,this._config),this._remuxer||(this._remuxer=new R(this._config)),null==(i=this._mediaDataSource).duration||isNaN(i.duration)||(this._demuxer.overridedDuration=i.duration),"boolean"==typeof i.hasAudio&&(this._demuxer.overridedHasAudio=i.hasAudio),"boolean"==typeof i.hasVideo&&(this._demuxer.overridedHasVideo=i.hasVideo),this._demuxer.timestampBase=i.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onDemuxData=this._onDemuxData.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),this._demuxer.parseChunks(e,t)):(r.Z.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then((function(){n._internalAbort()})),this._emitter.emit(k.Z.DEMUX_ERROR,m.Z.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),0)},D.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,s.Z.prototype)),e=Object.assign({},e),Object.setPrototypeOf(e,s.Z.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},D.prototype._onDemuxData=function(e){this._emitter.emit(k.Z.DEMUX_DATA,e)},D.prototype._onMetaDataArrived=function(e){this._emitter.emit(k.Z.METADATA_ARRIVED,e)},D.prototype._onScriptDataArrived=function(e){this._emitter.emit(k.Z.SCRIPTDATA_ARRIVED,e)},D.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},D.prototype._onIOComplete=function(e){(e+=1)<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer.flushStashedSamples(),this._emitter.emit(k.Z.LOADING_COMPLETE),this._disableStatisticsReporter())},D.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},D.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(k.Z.RECOVERED_EARLY_EOF)},D.prototype._onIOException=function(e,t){r.Z.e(this.TAG,"IOException: type = ".concat(e,", code = ").concat(t.code,", msg = ").concat(t.msg)),this._emitter.emit(k.Z.IO_ERROR,e,t),this._disableStatisticsReporter()},D.prototype._onDemuxException=function(e,t){r.Z.e(this.TAG,"DemuxException: type = ".concat(e,", info = ").concat(t)),this._emitter.emit(k.Z.DEMUX_ERROR,e,t)},D.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(k.Z.INIT_SEGMENT,e,t)},D.prototype._onRemuxerMediaSegmentArrival=function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(k.Z.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint)&&"video"===e&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,a.Z.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(k.Z.RECOMMEND_SEEKPOINT,t))},D.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},D.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},D.prototype._reportSegmentMediaInfo=function(e){e=this._mediaInfo.segments[e],(e=Object.assign({},e)).duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(k.Z.MEDIA_INFO,e)},D.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(k.Z.STATISTICS_INFO,e)},D);function D(e,t){this.TAG="TransmuxingController",this._emitter=new(n()),this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e;var i=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach((function(n){n.timestampBase=i,i+=n.duration,n.cors=e.cors,n.withCredentials=e.withCredentials,t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy)})),isNaN(i)||this._mediaDataSource.duration===i||(this._mediaDataSource.duration=i),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function x(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._audioNextPts=void 0,this._videoNextDts=void 0,this._videoNextPts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new L.J1("audio"),this._videoSegmentInfoList=new L.J1("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!a.Z.chrome||!(a.Z.version.major<50||50===a.Z.version.major&&a.Z.version.build<2661)),this._fillSilentAfterSeek=a.Z.msedge||a.Z.msie,this._mp3UseMpegAudio=!a.Z.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function M(){}},458:function(e,t){"use strict";t.Z={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint",DEMUX_DATA:"demux_data"}},919:function(e,t,i){"use strict";i(240),i(45),i(344),i(131),i(458)},61:function(e,t){"use strict";t.Z={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},319:function(e,t,i){"use strict";i.d(t,{default:function(){return F}}),t=i(344);var n=i(979),r={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function a(){return Object.assign({},r)}M.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},M.supportMSEH265Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')},M.supportNetworkStreamIO=function(){var e=new n.Z({},a()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},M.getNetworkLoaderTypeName=function(){var e=new n.Z({},a()),t=e.loaderType;return e.destroy(),t},M.supportNativeMediaPlayback=function(e){return"probably"===(e=(M.videoElement=null==M.videoElement?window.document.createElement("video"):M.videoElement).canPlayType(e))||"maybe"==e},M.getFeatureList=function(){var e={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.mseFlvPlayback=M.supportMSEH264Playback(),e.networkStreamIO=M.supportNetworkStreamIO(),e.networkLoaderName=M.getNetworkLoaderTypeName(),e.mseLiveFlvPlayback=e.mseFlvPlayback&&e.networkStreamIO,e.nativeMP4H264Playback=M.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=M.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=M.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=M.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e};var s=M,o=i(475),l=i(393),h=i.n(l),u=i(240),d=i(340),c={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",DEMUX_DATA:"demux_data"},f=(l=i(227),i.n(l)),p=i(45),m=i(131),g=i(458),_=(i(919),i(70)),y=(x.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),p.Z.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},x.prototype.on=function(e,t){this._emitter.addListener(e,t)},x.prototype.off=function(e,t){this._emitter.removeListener(e,t)},x.prototype.hasWorker=function(){return null!=this._worker},x.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},x.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},x.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},x.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},x.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},x.prototype._onInitSegment=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(g.Z.INIT_SEGMENT,e,t)}))},x.prototype._onMediaSegment=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(g.Z.MEDIA_SEGMENT,e,t)}))},x.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(g.Z.LOADING_COMPLETE)}))},x.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(g.Z.RECOVERED_EARLY_EOF)}))},x.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.MEDIA_INFO,e)}))},x.prototype._onDemuxData=function(e){this._emitter.emit(g.Z.DEMUX_DATA,e)},x.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.METADATA_ARRIVED,e)}))},x.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.SCRIPTDATA_ARRIVED,e)}))},x.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.STATISTICS_INFO,e)}))},x.prototype._onIOError=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(g.Z.IO_ERROR,e,t)}))},x.prototype._onDemuxError=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(g.Z.DEMUX_ERROR,e,t)}))},x.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(g.Z.RECOMMEND_SEEKPOINT,e)}))},x.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},x.prototype._onWorkerMessage=function(e){var t=e.data,i=t.data;if("destroyed"===t.msg||this._workerDestroying)this._workerDestroying=!1,this._worker.terminate(),this._worker=null;else switch(t.msg){case g.Z.INIT_SEGMENT:case g.Z.MEDIA_SEGMENT:this._emitter.emit(t.msg,i.type,i.data);break;case g.Z.LOADING_COMPLETE:case g.Z.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case g.Z.MEDIA_INFO:Object.setPrototypeOf(i,_.Z.prototype),this._emitter.emit(t.msg,i);break;case g.Z.METADATA_ARRIVED:case g.Z.SCRIPTDATA_ARRIVED:case g.Z.STATISTICS_INFO:this._emitter.emit(t.msg,i);break;case g.Z.IO_ERROR:case g.Z.DEMUX_ERROR:this._emitter.emit(t.msg,i.type,i.info);break;case g.Z.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,i);break;case"logcat_callback":u.Z.emitter.emit("log",i.type,i.logcat)}},x),v="error",A="source_open",E="update_end",b="buffer_full",w=i(779),S=i(996),T=(D.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},D.prototype.on=function(e,t){this._emitter.addListener(e,t)},D.prototype.off=function(e,t){this._emitter.removeListener(e,t)},D.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new S.rT("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},D.prototype.detachMediaElement=function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var i;if((i=this._pendingSegments[e]).splice(0,i.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null,i=this._sourceBuffers[e]){if("closed"!==t.readyState){try{t.removeSourceBuffer(i)}catch(t){u.Z.e(this.TAG,t.message)}i.removeEventListener("error",this.e.onSourceBufferError),i.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){u.Z.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},D.prototype.appendInitSegment=function(e,t){if(this._mediaSource&&"open"===this._mediaSource.readyState){var i=e,n="".concat(i.container),r=(i.codec&&0<i.codec.length&&(n+=";codecs=".concat(i.codec)),!1);if(u.Z.v(this.TAG,"Received Initialization Segment, mimeType: "+n),this._lastInitSegments[i.type]=i,n!==this._mimeTypes[i.type]){if(this._mimeTypes[i.type])u.Z.v(this.TAG,"Notice: ".concat(i.type," mimeType changed, origin: ").concat(this._mimeTypes[i.type],", target: ").concat(n));else{r=!0;try{var a=this._sourceBuffers[i.type]=this._mediaSource.addSourceBuffer(n);a.addEventListener("error",this.e.onSourceBufferError),a.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return u.Z.e(this.TAG,e.message),void this._emitter.emit(v,{code:e.code,msg:e.message})}}this._mimeTypes[i.type]=n}t||this._pendingSegments[i.type].push(i),r||this._sourceBuffers[i.type]&&!this._sourceBuffers[i.type].updating&&this._doAppendSegments(),d.Z.safari&&"audio/mpeg"===i.container&&0<i.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=i.mediaDuration/1e3,this._updateMediaSourceDuration())}else this._pendingSourceBufferInit.push(e),this._pendingSegments[e.type].push(e)},D.prototype.appendMediaSegment=function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer(),!(e=this._sourceBuffers[e.type])||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},D.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var i=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{i.abort()}catch(e){u.Z.e(this.TAG,e.message)}this._idrList.clear();var n=this._pendingSegments[t];if(n.splice(0,n.length),"closed"!==this._mediaSource.readyState){for(var r=0;r<i.buffered.length;r++){var a=i.buffered.start(r),s=i.buffered.end(r);this._pendingRemoveRanges[t].push({start:a,end:s})}i.updating||this._doRemoveRanges(),d.Z.safari&&(n=this._lastInitSegments[t])&&(this._pendingSegments[t].push(n),i.updating||this._doAppendSegments())}}},D.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},D.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},D.prototype._needCleanupSourceBuffer=function(){if(this._config.autoCleanupSourceBuffer){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var i=this._sourceBuffers[e];if(i&&1<=(i=i.buffered).length&&t-i.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},D.prototype._doCleanupSourceBuffer=function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var i=this._sourceBuffers[e];if(i){for(var n=i.buffered,r=!1,a=0;a<n.length;a++){var s,o=n.start(a),l=n.end(a);o<=t&&t<l+3?t-o>=this._config.autoCleanupMaxBackwardDuration&&(r=!0,s=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:o,end:s})):l<t&&(r=!0,this._pendingRemoveRanges[e].push({start:o,end:l}))}r&&!i.updating&&this._doRemoveRanges()}}},D.prototype._updateMediaSourceDuration=function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(t=this._mediaSource.duration,0<(e=this._pendingMediaDuration)&&(isNaN(t)||t<e)&&(u.Z.v(this.TAG,"Update MediaSource duration from ".concat(t," to ").concat(e)),this._mediaSource.duration=e),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)},D.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],i=this._pendingRemoveRanges[e];i.length&&!t.updating;){var n=i.shift();t.remove(n.start,n.end)}},D.prototype._doAppendSegments=function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var i,n,r=t[e].shift();if(r.timestampOffset&&(i=this._sourceBuffers[e].timestampOffset,n=r.timestampOffset/1e3,.1<Math.abs(i-n)&&(u.Z.v(this.TAG,"Update MPEG audio timestampOffset from ".concat(i," to ").concat(n)),this._sourceBuffers[e].timestampOffset=n),delete r.timestampOffset),!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(r.data),this._isBufferFull=!1,"video"===e&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(r),22===t.code?(this._isBufferFull||this._emitter.emit(b),this._isBufferFull=!0):(u.Z.e(this.TAG,e,t.message),this._emitter.emit(v,{code:t.code,msg:t.message}))}}},D.prototype._onSourceOpen=function(){if(u.Z.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(A)},D.prototype._onSourceEnded=function(){u.Z.v(this.TAG,"MediaSource onSourceEnded")},D.prototype._onSourceClose=function(){u.Z.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},D.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return 0<(e.video&&e.video.length)||e.audio&&0<e.audio.length},D.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return 0<(e.video&&e.video.length)||e.audio&&0<e.audio.length},D.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(E)},D.prototype._onSourceBufferError=function(e){u.Z.e(this.TAG,"SourceBuffer Error: ".concat(e))},D),C=(l=i(61),{NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"}),L={NETWORK_EXCEPTION:o.nm.EXCEPTION,NETWORK_STATUS_CODE_INVALID:o.nm.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:o.nm.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:o.nm.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:l.Z.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:l.Z.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:l.Z.CODEC_UNSUPPORTED},R=(P.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},P.prototype.on=function(e,t){var i=this;e===c.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){i._emitter.emit(c.MEDIA_INFO,i.mediaInfo)})):e===c.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){i._emitter.emit(c.STATISTICS_INFO,i.statisticsInfo)})),this._emitter.addListener(e,t)},P.prototype.off=function(e,t){this._emitter.removeListener(e,t)},P.prototype.attachMediaElement=function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new T(this._config),this._msectl.on(E,this._onmseUpdateEnd.bind(this)),this._msectl.on(b,this._onmseBufferFull.bind(this)),this._msectl.on(A,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(v,(function(e){t._emitter.emit(c.ERROR,C.MEDIA_ERROR,L.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},P.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},P.prototype.load=function(){var e=this;if(!this._mediaElement)throw new S.rT("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new S.rT("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new y(this._mediaDataSource,this._config),this._transmuxer.on(g.Z.INIT_SEGMENT,(function(t,i){e._msectl.appendInitSegment(i)})),this._transmuxer.on(g.Z.MEDIA_SEGMENT,(function(t,i){var n;e._msectl.appendMediaSegment(i),e._config.lazyLoad&&!e._config.isLive&&(n=e._mediaElement.currentTime,i.info.endDts>=1e3*(n+e._config.lazyLoadMaxDuration))&&null==e._progressChecker&&(u.Z.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())})),this._transmuxer.on(g.Z.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(c.LOADING_COMPLETE)})),this._transmuxer.on(g.Z.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(c.RECOVERED_EARLY_EOF)})),this._transmuxer.on(g.Z.IO_ERROR,(function(t,i){e._emitter.emit(c.ERROR,C.NETWORK_ERROR,t,i)})),this._transmuxer.on(g.Z.DEMUX_ERROR,(function(t,i){e._emitter.emit(c.ERROR,C.MEDIA_ERROR,t,{code:-1,msg:i})})),this._transmuxer.on(g.Z.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(c.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(g.Z.DEMUX_DATA,(function(t){e._emitter.emit(c.DEMUX_DATA,Object.assign({},t))})),this._transmuxer.on(g.Z.METADATA_ARRIVED,(function(t){e._emitter.emit(c.METADATA_ARRIVED,t)})),this._transmuxer.on(g.Z.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(c.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(g.Z.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(c.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(g.Z.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},P.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},P.prototype.play=function(){return this._mediaElement.play()},P.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(P.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(e){this._mediaElement.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),P.prototype._fillStatisticsInfo=function(e){var t,i,n,r;return e.playerType=this._type,this._mediaElement instanceof HTMLVideoElement&&(t=!0,r=n=0,this._mediaElement.getVideoPlaybackQuality?(n=(i=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,r=i.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1,t&&(e.decodedFrames=n,e.droppedFrames=r)),e},P.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,i=0,n=0;n<e.length;n++){var r=e.start(n),a=e.end(n);if(r<=t&&t<a){i=a;break}}i>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(u.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},P.prototype._onmseBufferFull=function(){u.Z.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this.isChrome&&this._transmuxer&&this._transmuxer.pause(),null==this._progressChecker&&this._suspendTransmuxer()},P.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker)&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},P.prototype._progressCheckers=function(){null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},P.prototype._checkProgressAndResume=function(){if(this._transmuxer._controller._ioctl._loader._isLive)this._config.isLive=!0;else{for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,i=!1,n=0;n<t.length;n++){var r=t.start(n),a=t.end(n);if(r<=e&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(!this.isChrome||this._transmuxer._controller._ioctl._paused?i=!0:(this.needResumeTime++,10==this.needResumeTime&&this._transmuxer&&(this._transmuxer.pause(),i=!(this.needResumeTime=0))));break}}i&&(u.Z.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume())}},P.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,i=0;i<t.length;i++){var n=t.start(i),r=t.end(i);if(n<=e&&e<r)return!0}return!1},P.prototype._internalSeek=function(e){var t,i=this._isTimepointBuffered(e),n=!1,r=0;e<1&&0<this._mediaElement.buffered.length&&((t=this._mediaElement.buffered.start(0))<1&&e<t||d.Z.safari)&&(n=!0,r=d.Z.safari?.1:t),n?(this._requestSetTime=!0,this._mediaElement.currentTime=r):i?(this._alwaysSeekKeyframe?(t=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=t?t.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))},P.prototype._checkAndApplyUnbufferedSeekpoint=function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))},P.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(u.Z.w(this.TAG,"Playback seems stuck at ".concat(t.currentTime,", seek to ").concat(e.start(0))),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)},P.prototype._onvLoadedMetadata=function(e){this.isChrome&&this._progressCheckers(),null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},P.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,i=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<i.length&&((i=i.start(0))<1&&t<i||d.Z.safari))return this._requestSetTime=!0,void(this._mediaElement.currentTime=d.Z.safari?.1:i);this._isTimepointBuffered(t)?(this._alwaysSeekKeyframe&&null!=(i=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=i.dts/1e3),null!=this._progressChecker&&this._checkProgressAndResume()):(this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},P.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},P.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},P.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},P),I=(k.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},k.prototype.on=function(e,t){var i=this;e===c.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){i._emitter.emit(c.MEDIA_INFO,i.mediaInfo)})):e===c.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){i._emitter.emit(c.STATISTICS_INFO,i.statisticsInfo)})),this._emitter.addListener(e,t)},k.prototype.off=function(e,t){this._emitter.removeListener(e,t)},k.prototype.attachMediaElement=function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},k.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},k.prototype.load=function(){if(!this._mediaElement)throw new S.rT("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},k.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},k.prototype.play=function(){return this._mediaElement.play()},k.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(k.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"speed",{get:function(){return this._mediaElement.playbackRate},set:function(e){this._mediaElement.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement)&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight),e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"statisticsInfo",{get:function(){var e,t,i,n,r={playerType:this._type,url:this._mediaDataSource.url};return this._mediaElement instanceof HTMLVideoElement&&(e=!0,n=i=0,this._mediaElement.getVideoPlaybackQuality?(i=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,n=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,n=this._mediaElement.webkitDroppedFrameCount):e=!1,e)&&(r.decodedFrames=i,r.droppedFrames=n),r},enumerable:!1,configurable:!0}),k.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(c.MEDIA_INFO,this.mediaInfo)},k.prototype._reportStatisticsInfo=function(){this._emitter.emit(c.STATISTICS_INFO,this.statisticsInfo)},k);function k(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(h()),this._config=a(),"object"==typeof t&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new S.OC("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new S.OC("NativePlayer(".concat(e.type,") doesn't support multipart playback!"));this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function P(e,t){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(h()),this._config=a(),"object"==typeof t&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new S.OC("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null,t=d.Z.chrome&&(d.Z.version.major<50||50===d.Z.version.major&&d.Z.version.build<2661),this._alwaysSeekKeyframe=!!(t||d.Z.msedge||d.Z.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1),this.needResumeTime=0,this.isChrome=navigator.userAgent.toLowerCase().match(/chrome/)}function D(e){this.TAG="MSEController",this._config=e,this._emitter=new(h()),this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new w.Vn}function x(e,t){if(this.TAG="Transmuxer",this._emitter=new(h()),t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=f()(919),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},p.Z.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:p.Z.getConfig()})}catch(i){u.Z.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new m.Z(e,t)}else this._controller=new m.Z(e,t);var i;this._controller&&((i=this._controller).on(g.Z.IO_ERROR,this._onIOError.bind(this)),i.on(g.Z.DEMUX_ERROR,this._onDemuxError.bind(this)),i.on(g.Z.INIT_SEGMENT,this._onInitSegment.bind(this)),i.on(g.Z.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),i.on(g.Z.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),i.on(g.Z.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),i.on(g.Z.MEDIA_INFO,this._onMediaInfo.bind(this)),i.on(g.Z.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),i.on(g.Z.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),i.on(g.Z.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),i.on(g.Z.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)),i.on(g.Z.DEMUX_DATA,this._onDemuxData.bind(this)))}function M(){}t.Z.install(),i={createPlayer:function(e,t){if(null==e||"object"!=typeof e)throw new S.OC("MediaDataSource must be an javascript object!");if(e.hasOwnProperty("type"))return new("flv"===e.type?R:I)(e,t);throw new S.OC("MediaDataSource must has type field to indicate video file type!")},isSupported:function(){return s.supportMSEH264Playback()},getFeatureList:function(){return s.getFeatureList()}};var F=(i.BaseLoader=o.fp,i.LoaderStatus=o.GM,i.LoaderErrors=o.nm,i.Events=c,i.ErrorTypes=C,i.ErrorDetails=L,i.FlvPlayer=R,i.NativePlayer=I,i.LoggingControl=p.Z,Object.defineProperty(i,"version",{enumerable:!0,get:function(){return"1.7.2"}}),i)},611:function(e,t,i){e.exports=i(319).default},979:function(e,t,i){"use strict";i.d(t,{Z:function(){return w}});var n,r,a,s,o,l,h,u,d,c=i(240),f=(P.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},P.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(P.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return this._intervalBytes/(e=0==e?1:e)/1024},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),P),p=i(475),m=i(340),g=i(996),_=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},function(e){function t(t,i){var n=e.call(this,"fetch-stream-loader")||this;return n.TAG="FetchStreamLoader",n._seekHandler=t,n._config=i,n._needStash=!0,n._requestAbort=!1,n._contentLength=null,n._receivedLength=0,n._isLive=null,n}var i=t,r=e;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function a(){this.constructor=i}return n(i,r),i.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a),t.isSupported=function(){try{var e=m.Z.msedge&&15048<=m.Z.version.minor,t=!m.Z.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){var i=this,n=(this._dataSource=e,this._range=t,e.url),r=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL),this._seekHandler.getConfig(n,t)),a=new self.Headers;if("object"==typeof r.headers){var s=r.headers;for(o in s)s.hasOwnProperty(o)&&a.append(o,s[o])}if(n={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},"object"==typeof this._config.headers)for(var o in this._config.headers)a.append(o,this._config.headers[o]);!1===e.cors&&(n.mode="same-origin"),e.withCredentials&&(n.credentials="include"),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,n.signal=this._abortController.signal),this._status=p.GM.kConnecting,self.fetch(r.url,n).then((function(e){if(i._requestAbort)i._status=p.GM.kIdle,e.body.cancel();else{var t;if(e.ok&&200<=e.status&&e.status<=299)return e.url!==r.url&&i._onURLRedirect&&(t=i._seekHandler.removeURLParameters(e.url),i._onURLRedirect(t)),null!=(t=e.headers.get("Content-Length"))?(i._contentLength=parseInt(t),0!==i._contentLength&&i._onContentLengthKnown&&i._onContentLengthKnown(i._contentLength),i._isLive=!1):i._isLive=!0,i._pump.call(i,e.body.getReader());if(i._status=p.GM.kError,!i._onError)throw new g.OZ("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);i._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}})).catch((function(e){if(!i._abortController||!i._abortController.signal.aborted){if(i._status=p.GM.kError,!i._onError)throw e;i._onError(p.nm.EXCEPTION,{code:-1,msg:e.message})}}))},t.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==p.GM.kBuffering||!m.Z.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},t.prototype._pump=function(e){var t=this;return e.read().then((function(i){if(i.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=p.GM.kError;var n=p.nm.EARLY_EOF,r={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new g.OZ(r.msg);t._onError(n,r)}else t._status=p.GM.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else if(t._abortController&&t._abortController.signal.aborted)t._status=p.GM.kComplete;else{if(!0===t._requestAbort)return t._status=p.GM.kComplete,e.cancel();t._status=p.GM.kBuffering,n=i.value.buffer,r=t._range.from+t._receivedLength,t._receivedLength+=n.byteLength,t._onDataArrival&&t._onDataArrival(n,r,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=p.GM.kComplete;else if(11!==e.code||!m.Z.msedge){t._status=p.GM.kError;var i=0,n=19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(i=p.nm.EXCEPTION,{code:e.code,msg:e.message}):(i=p.nm.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!t._onError)throw new g.OZ(n.msg);t._onError(i,n)}}))},t}(p.fp)),y=(d=function(e,t){return(d=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},t=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},t(k,u=p.fp),k.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return c.Z.w("MozChunkedLoader",e.message),!1}},k.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),u.prototype.destroy.call(this)},k.prototype.open=function(e,t){this._dataSource=e,this._range=t;var i=e.url,n=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL),i=this._seekHandler.getConfig(i,t),this._requestURL=i.url,this._xhr=new XMLHttpRequest);if(n.open("GET",i.url,!0),n.responseType="moz-chunked-arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onloadend=this._onLoadEnd.bind(this),n.onerror=this._onXhrError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"==typeof i.headers){var r=i.headers;for(a in r)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a]);this._status=p.GM.kConnecting,n.send()},k.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=p.GM.kComplete},k.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect&&(t=this._seekHandler.removeURLParameters(e.responseURL),this._onURLRedirect(t)),0!==e.status&&(e.status<200||299<e.status)){if(this._status=p.GM.kError,!this._onError)throw new g.OZ("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=p.GM.kBuffering},k.prototype._onProgress=function(e){var t;this._status!==p.GM.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength),e=e.target.response,t=this._range.from+this._receivedLength,this._receivedLength+=e.byteLength,this._onDataArrival)&&this._onDataArrival(e,t,this._receivedLength)},k.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==p.GM.kError&&(this._status=p.GM.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1):this._requestAbort=!1},k.prototype._onXhrError=function(e){this._status=p.GM.kError;var t=0,i=this._contentLength&&e.loaded<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=p.nm.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(i.msg);this._onError(t,i)},k),v=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i(I,l=p.fp),I.isSupported=function(){try{var e;return void 0!==self.MSStream&&void 0!==self.MSStreamReader&&((e=new XMLHttpRequest).open("GET","https://example.com",!0),(e.responseType="ms-stream")===e.responseType)}catch(e){return c.Z.w("MSStreamLoader",e.message),!1}},I.prototype.destroy=function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),l.prototype.destroy.call(this)},I.prototype.open=function(e,t){this._internalOpen(e,t,!1)},I.prototype._internalOpen=function(e,t,i){this._dataSource=e,i?this._currentRange=t:this._totalRange=t,i=e.url,this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?i=this._currentRedirectedURL:null!=e.redirectedURL&&(i=e.redirectedURL)),i=this._seekHandler.getConfig(i,t);var n=((this._currentRequestURL=i.url,t=this._reader=new self.MSStreamReader).onprogress=this._msrOnProgress.bind(this),t.onload=this._msrOnLoad.bind(this),t.onerror=this._msrOnError.bind(this),this._xhr=new XMLHttpRequest);if(n.open("GET",i.url,!0),n.responseType="ms-stream",n.onreadystatechange=this._xhrOnReadyStateChange.bind(this),n.onerror=this._xhrOnError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"==typeof i.headers){var r=i.headers;for(a in r)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a]);this._isReconnecting?this._isReconnecting=!1:this._status=p.GM.kConnecting,n.send()},I.prototype.abort=function(){this._internalAbort(),this._status=p.GM.kComplete},I.prototype._internalAbort=function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)},I.prototype._xhrOnReadyStateChange=function(e){if(2===(e=e.target).readyState)if(200<=e.status&&e.status<=299){this._status=p.GM.kBuffering,null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t);var t=e.getResponseHeader("Content-Length");null!=t&&null==this._contentLength&&0<(t=parseInt(t))&&(this._contentLength=t,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength)}else{if(this._status=p.GM.kError,!this._onError)throw new g.OZ("MSStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else 3===e.readyState&&200<=e.status&&e.status<=299&&(this._status=p.GM.kBuffering,t=e.response,this._reader.readAsArrayBuffer(t))},I.prototype._xhrOnError=function(e){this._status=p.GM.kError;var t=p.nm.EXCEPTION;if(e={code:-1,msg:e.constructor.name+" "+e.type},!this._onError)throw new g.OZ(e.msg);this._onError(t,e)},I.prototype._msrOnProgress=function(e){var t,i;null!=(e=e.target.result)?(t=e.slice(this._lastTimeBufferSize),this._lastTimeBufferSize=e.byteLength,i=this._totalRange.from+this._receivedLength,this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,i,this._receivedLength),e.byteLength>=this._bufferLimit&&(c.Z.v(this.TAG,"MSStream buffer exceeded max size near ".concat(i+t.byteLength,", reconnecting...")),this._doReconnectIfNeeded())):this._doReconnectIfNeeded()},I.prototype._doReconnectIfNeeded=function(){var e;(null==this._contentLength||this._receivedLength<this._contentLength)&&(this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort(),e={from:this._totalRange.from+this._receivedLength,to:-1},this._internalOpen(this._dataSource,e,!0))},I.prototype._msrOnLoad=function(e){this._status=p.GM.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)},I.prototype._msrOnError=function(e){this._status=p.GM.kError;var t=0,i=this._contentLength&&this._receivedLength<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"MSStream meet Early-Eof"}):(t=p.nm.EARLY_EOF,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(i.msg);this._onError(t,i)},o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},t=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},t(R,s=p.fp),R.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return c.Z.w("RangeLoader",e.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),s.prototype.destroy.call(this)},Object.defineProperty(R.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),R.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=p.GM.kConnecting,e=!1,null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(e=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||e?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},R.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength;e=t+e,null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)},R.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var i=e.url,n=(this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?i=this._currentRedirectedURL:null!=e.redirectedURL&&(i=e.redirectedURL)),i=this._seekHandler.getConfig(i,t),this._currentRequestURL=i.url,this._xhr=new XMLHttpRequest);if(n.open("GET",i.url,!0),n.responseType="arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onload=this._onLoad.bind(this),n.onerror=this._onXhrError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"==typeof i.headers){var r=i.headers;for(a in r)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a]);n.send()},R.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=p.GM.kComplete},R.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},R.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t),200<=e.status&&e.status<=299)this._waitForTotalLength||(this._status=p.GM.kBuffering);else{if(this._status=p.GM.kError,!this._onError)throw new g.OZ("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}},R.prototype._onProgress=function(e){if(this._status!==p.GM.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,t=this._totalLengthReceived=!0,i=e.total,this._internalAbort(),null!=i&0!==i)&&(this._totalLength=i),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var i=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(i)}},R.prototype._normalizeSpeed=function(e){var t,i=this._chunkSizeKBList,n=i.length-1,r=0,a=n;if(e<i[0])return i[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===n||e>=i[t]&&e<i[t+1])return i[t];i[t]<e?r=t+1:a=t-1}},R.prototype._onLoad=function(e){var t,i;this._status!==p.GM.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)!==(t=0===(t=this._speedSampler.lastSecondKBps)&&(this._zeroSpeedChunkCount++,3<=this._zeroSpeedChunkCount)?this._speedSampler.currentKBps:t)&&(t=this._normalizeSpeed(t),this._currentSpeedNormalized!==t)&&(this._currentSpeedNormalized=t,this._currentChunkSizeKB=t),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,i=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():i=!0,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),i&&(this._status=p.GM.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))},R.prototype._onXhrError=function(e){this._status=p.GM.kError;var t=0,i=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=p.nm.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=p.nm.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.OZ(i.msg);this._onError(t,i)},R),A=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i(L,r=p.fp),L.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},L.prototype.destroy=function(){this._ws&&this.abort(),r.prototype.destroy.call(this)},L.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=p.GM.kConnecting}catch(e){if(this._status=p.GM.kError,t={code:e.code,msg:e.message},!this._onError)throw new g.OZ(t.msg);this._onError(p.nm.EXCEPTION,t)}},L.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=p.GM.kComplete},L.prototype._onWebSocketOpen=function(e){this._status=p.GM.kBuffering},L.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=p.GM.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},L.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var i=new FileReader;i.onload=function(){t._dispatchArrayBuffer(i.result)},i.readAsArrayBuffer(e.data)}else{if(this._status=p.GM.kError,e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name},!this._onError)throw new g.OZ(e.msg);this._onError(p.nm.EXCEPTION,e)}},L.prototype._dispatchArrayBuffer=function(e){var t=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,t,this._receivedLength)},L.prototype._onWebSocketError=function(e){if(this._status=p.GM.kError,e={code:e.code,msg:e.message},!this._onError)throw new g.OZ(e.msg);this._onError(p.nm.EXCEPTION,e)},L),E=(C.prototype.getConfig=function(e,t){var i,n={};return 0!==t.from||-1!==t.to?(i=-1!==t.to?"bytes=".concat(t.from.toString(),"-").concat(t.to.toString()):"bytes=".concat(t.from.toString(),"-"),n.Range=i):this._zeroStart&&(n.Range="bytes=0-"),{url:e,headers:n}},C.prototype.removeURLParameters=function(e){return e},C),b=(T.prototype.getConfig=function(e,t){var i;return 0===t.from&&-1===t.to||(i=!0,-1===e.indexOf("?")&&(e+="?",i=!1),i&&(e+="&"),e+="".concat(this._startName,"=").concat(t.from.toString()),-1!==t.to&&(e+="&".concat(this._endName,"=").concat(t.to.toString()))),{url:e,headers:{}}},T.prototype.removeURLParameters=function(e){var t=e.split("?")[0],i=void 0,n=e.indexOf("?"),r="";if(null!=(i=-1!==n?e.substring(n+1):i)&&0<i.length)for(var a=i.split("&"),s=0;s<a.length;s++){var o=a[s].split("=");o[0]!==this._startName&&o[0]!==this._endName&&(0<s&&(r+="&"),r+=a[s])}return 0===r.length?t:t+"?"+r},T),w=(S.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},S.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},S.prototype.isPaused=function(){return this._paused},Object.defineProperty(S.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentSpeed",{get:function(){return this._loaderClass===v?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),S.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new E(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",i=e.seekParamEnd||"bend";this._seekHandler=new b(t,i)}else{if("custom"!==e.seekType)throw new g.OC("Invalid seekType in config: ".concat(e.seekType));if("function"!=typeof e.customSeekHandler)throw new g.OC("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},S.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=A;else if(_.isSupported())this._loaderClass=_;else if(y.isSupported())this._loaderClass=y;else{if(!v.isSupported())throw new g.OZ("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=v}},S.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},S.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},S.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},S.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},S.prototype.resume=function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))},S.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},S.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null,t={from:e,to:-1},this._currentRange={from:t.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,t),this._onSeeked&&this._onSeeked()},S.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new g.OC("Url must be a non-empty string!");this._dataSource.url=e},S.prototype._expandBuffer=function(e){for(var t,i,n=this._stashSize;n+1048576<e;)n*=2;(n+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(n),0<this._stashUsed&&(i=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,n).set(i,0)),this._stashBuffer=t,this._bufferSize=n)},S.prototype._normalizeSpeed=function(e){var t,i=this._speedNormalizeList,n=i.length-1,r=0,a=n;if(e<i[0])return i[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===n||e>=i[t]&&e<i[t+1])return i[t];i[t]<e?r=t+1:a=t-1}},S.prototype._adjustStashSize=function(e){var t=0;e=1024*(t=8192<(t=this._config.isLive||e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)?8192:t)+1048576,this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t},S.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},S.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},S.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},S.prototype._onLoaderChunkArrival=function(e,t,i){if(!this._onDataArrival)throw new g.rT("IOController: No existing consumer (onDataArrival) callback!");var n,r,a,s,o;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof)&&this._onRecoveredEarlyEof(),this._speedSampler.addBytes(e.byteLength),0!==(n=this._speedSampler.lastSecondKBps)&&(n=this._normalizeSpeed(n),this._speedNormalized!==n)&&(this._speedNormalized=n,this._adjustStashSize(n)),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?((a=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(a=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(n=this._stashBuffer.slice(0,this._stashUsed),(s=this._dispatchChunks(n,this._stashByteStart))<n.byteLength?0<s&&(o=new Uint8Array(n,s),a.set(o,0),this._stashUsed=o.byteLength,this._stashByteStart+=s):(this._stashUsed=0,this._stashByteStart+=s),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(s=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-s)>this._bufferSize&&(this._expandBuffer(r),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e,s),0),this._stashUsed+=r,this._stashByteStart=t+s))):0===this._stashUsed?(s=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-s)>this._bufferSize&&this._expandBuffer(r),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,s),0),this._stashUsed+=r,this._stashByteStart=t+s):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(s=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<s&&(o=new Uint8Array(this._stashBuffer,s),a.set(o,0)),this._stashUsed-=s,this._stashByteStart+=s))},S.prototype._flushStashBuffer=function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),i=this._dispatchChunks(t,this._stashByteStart),n=t.byteLength-i;if(i<t.byteLength){if(!e)return 0<i&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,i),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=i),0;c.Z.w(this.TAG,"".concat(n," bytes unconsumed data remain when flush buffer, dropped"))}return this._stashUsed=0,this._stashByteStart=0,n}return 0},S.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},S.prototype._onLoaderError=function(e,t){switch(c.Z.e(this.TAG,"Loader error, code = ".concat(t.code,", msg = ").concat(t.msg)),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=p.nm.UNRECOVERABLE_EARLY_EOF),e){case p.nm.EARLY_EOF:var i;if(!this._config.isLive&&this._totalLength)return void((i=this._currentRange.to+1)<this._totalLength&&(c.Z.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(i,!1)));e=p.nm.UNRECOVERABLE_EARLY_EOF;case p.nm.UNRECOVERABLE_EARLY_EOF:case p.nm.CONNECTING_TIMEOUT:case p.nm.HTTP_STATUS_CODE_INVALID:case p.nm.EXCEPTION:}if(!this._onError)throw new g.OZ("IOException: "+t.msg);this._onError(e,t)},S);function S(e,t,i){this.TAG="IOController",this._config=t,this._extraData=i,this._stashInitialSize=393216,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new f,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function T(e,t){this._startName=e,this._endName=t}function C(e){this._zeroStart=e||!1}function L(){var e=r.call(this,"websocket-loader")||this;return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function R(e,t){var i=s.call(this,"xhr-range-loader")||this;return i.TAG="RangeLoader",i._seekHandler=e,i._config=t,i._needStash=!1,i._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],i._currentChunkSizeKB=384,i._currentSpeedNormalized=0,i._zeroSpeedChunkCount=0,i._xhr=null,i._speedSampler=new f,i._requestAbort=!1,i._waitForTotalLength=!1,i._totalLengthReceived=!1,i._currentRequestURL=null,i._currentRedirectedURL=null,i._currentRequestRange=null,i._totalLength=null,i._contentLength=null,i._receivedLength=0,i._lastTimeLoaded=0,i}function I(e,t){var i=l.call(this,"xhr-msstream-loader")||this;return i.TAG="MSStreamLoader",i._seekHandler=e,i._config=t,i._needStash=!0,i._xhr=null,i._reader=null,i._totalRange=null,i._currentRange=null,i._currentRequestURL=null,i._currentRedirectedURL=null,i._contentLength=null,i._receivedLength=0,i._bufferLimit=16777216,i._lastTimeBufferSize=0,i._isReconnecting=!1,i}function k(e,t){var i=u.call(this,"xhr-moz-chunked-loader")||this;return i.TAG="MozChunkedLoader",i._seekHandler=e,i._config=t,i._needStash=!0,i._xhr=null,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i}function P(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}},475:function(e,t,i){"use strict";i.d(t,{GM:function(){return r},fp:function(){return s},nm:function(){return a}});var n=i(996),r={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},a={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},s=(o.prototype.destroy=function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},o.prototype.isWorking=function(){return this._status===r.kConnecting||this._status===r.kBuffering},Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),o.prototype.open=function(e,t){throw new n.do("Unimplemented abstract function!")},o.prototype.abort=function(){throw new n.do("Unimplemented abstract function!")},o);function o(e){this._type=e||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},340:function(e,t){"use strict";var i,n,r={},a=self.navigator.userAgent.toLowerCase(),s=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(iemobile)[\/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0<=a.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(a)||[];for(n in a=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(windows phone)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(android)/.exec(a)||/(windows)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||[],s={browser:s[5]||s[3]||s[1]||"",version:s[2]||s[4]||"0",majorVersion:s[4]||s[2]||"0",platform:a[0]||""},a={},s.browser&&(a[s.browser]=!0,i=s.majorVersion.split("."),a.version={major:parseInt(s.majorVersion,10),string:s.version},1<i.length&&(a.version.minor=parseInt(i[1],10)),2<i.length)&&(a.version.build=parseInt(i[2],10)),s.platform&&(a[s.platform]=!0),(a.chrome||a.opr||a.safari)&&(a.webkit=!0),(a.rv||a.iemobile)&&(a.rv&&delete a.rv,s.browser="msie",a.msie=!0),a.edge&&(delete a.edge,s.browser="msedge",a.msedge=!0),a.opr&&(s.browser="opera",a.opera=!0),a.safari&&a.android&&(s.browser="android",a.android=!0),a.name=s.browser,a.platform=s.platform,r)r.hasOwnProperty(n)&&delete r[n];Object.assign(r,a),t.Z=r},996:function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}i.d(t,{OC:function(){return u},OZ:function(){return l},do:function(){return d},rT:function(){return h}}),r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},Object.defineProperty(m.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),m.prototype.toString=function(){return this.name+": "+this.message};var r,a,s,o,l=m,h=(n(p,o=l),Object.defineProperty(p.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),p),u=(n(f,s=l),Object.defineProperty(f.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),f),d=(n(c,a=l),Object.defineProperty(c.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),c);function c(e){return a.call(this,e)||this}function f(e){return s.call(this,e)||this}function p(e){return o.call(this,e)||this}function m(e){this._message=e}},240:function(e,t,i){"use strict";var n=i(393);function r(){}i=i.n(n),r.e=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","error",e),r.ENABLE_ERROR&&!console.error&&console.warn},r.i=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","info",e),r.ENABLE_INFO&&console.info},r.w=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","warn",e),r.ENABLE_WARN&&console.warn},r.d=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","debug",e),r.ENABLE_DEBUG&&console.debug},r.v=function(e,t){e="[".concat(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG,"] > ").concat(t),r.ENABLE_CALLBACK&&r.emitter.emit("log","verbose",e)},(n=r).GLOBAL_TAG="flv.js",n.FORCE_GLOBAL_TAG=!1,n.ENABLE_ERROR=!0,n.ENABLE_INFO=!0,n.ENABLE_WARN=!0,n.ENABLE_DEBUG=!0,n.ENABLE_VERBOSE=!0,n.ENABLE_CALLBACK=!1,n.emitter=new(i()),t.Z=n},45:function(e,t,i){"use strict";var n=i(393),r=(n=i.n(n),i(240));function a(){}Object.defineProperty(a,"forceGlobalTag",{get:function(){return r.Z.FORCE_GLOBAL_TAG},set:function(e){r.Z.FORCE_GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return r.Z.GLOBAL_TAG},set:function(e){r.Z.GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return r.Z.ENABLE_VERBOSE&&r.Z.ENABLE_DEBUG&&r.Z.ENABLE_INFO&&r.Z.ENABLE_WARN&&r.Z.ENABLE_ERROR},set:function(e){r.Z.ENABLE_VERBOSE=e,r.Z.ENABLE_DEBUG=e,r.Z.ENABLE_INFO=e,r.Z.ENABLE_WARN=e,r.Z.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return r.Z.ENABLE_DEBUG},set:function(e){r.Z.ENABLE_DEBUG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return r.Z.ENABLE_VERBOSE},set:function(e){r.Z.ENABLE_VERBOSE=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return r.Z.ENABLE_INFO},set:function(e){r.Z.ENABLE_INFO=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return r.Z.ENABLE_WARN},set:function(e){r.Z.ENABLE_WARN=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return r.Z.ENABLE_ERROR},set:function(e){r.Z.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:r.Z.GLOBAL_TAG,forceGlobalTag:r.Z.FORCE_GLOBAL_TAG,enableVerbose:r.Z.ENABLE_VERBOSE,enableDebug:r.Z.ENABLE_DEBUG,enableInfo:r.Z.ENABLE_INFO,enableWarn:r.Z.ENABLE_WARN,enableError:r.Z.ENABLE_ERROR,enableCallback:r.Z.ENABLE_CALLBACK}},a.applyConfig=function(e){r.Z.GLOBAL_TAG=e.globalTag,r.Z.FORCE_GLOBAL_TAG=e.forceGlobalTag,r.Z.ENABLE_VERBOSE=e.enableVerbose,r.Z.ENABLE_DEBUG=e.enableDebug,r.Z.ENABLE_INFO=e.enableInfo,r.Z.ENABLE_WARN=e.enableWarn,r.Z.ENABLE_ERROR=e.enableError,r.Z.ENABLE_CALLBACK=e.enableCallback},a._notifyChange=function(){var e,t=a.emitter;0<t.listenerCount("change")&&(e=a.getConfig(),t.emit("change",e))},a.registerListener=function(e){a.emitter.addListener("change",e)},a.removeListener=function(e){a.emitter.removeListener("change",e)},a.addLogListener=function(e){r.Z.emitter.addListener("log",e),0<r.Z.emitter.listenerCount("log")&&(r.Z.ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(e){r.Z.emitter.removeListener("log",e),0===r.Z.emitter.listenerCount("log")&&(r.Z.ENABLE_CALLBACK=!1,a._notifyChange())},(i=a).emitter=new(n()),t.Z=i},344:function(e,t,i){"use strict";r.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},"function"!=typeof self.Promise&&i(970).polyfill()};var n=r;function r(){}n.install(),t.Z=n}},r={},i.m=n,i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i(611))}).call(this,i(102))},function(e,t,i){"use strict";i.r(t),i.d(t,"NvMpegTsCore",(function(){return o}));var n=i(4);const r=i(5);i(28);const a=i(167),s=i(12);var o=class{constructor(e){this.configFormat={width:e.width||r.DEFAULT_WIDTH,height:e.height||r.DEFAULT_HEIGHT,playerId:e.playerId||r.DEFAILT_WEBGL_PLAY_ID,ignoreAudio:e.ignoreAudio,duration:e.duration,autoPlay:e.autoPlay||!1,repeatPlay:e.repeat||!1,audioNone:e.audioNone},this.audioVoice=1,this.myPlayerID=this.configFormat.playerId+"-jsmpegts",this.myPlayer=null,this.videoContaner=null,this.videoTag=null,this.duration=this.configFormat.duration/1e3||-1,this.width=-1,this.height=-1,this.isPlaying=!1,this.vCodecID=r.V_CODEC_NAME_AVC,this.audioNone=!1,this.showScreen=!1,this.playPTS=0,this.vCachePTS=0,this.aCachePTS=0,this.isInitDecodeFrames=!1,this.reset_player=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1,this.checkStartIntervalCount=0,this.checkStartInterval=null,this.checkPicBlockInterval=null,this.bufferInterval=null,this.onPlayState=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onReadyShowDone=null,this.onCacheProcess=null,this.seekResult=null,this.frameRate=30,this.curTime=0,this.totalVideoFrames=0,this.headers=e.headers,this.videoCodec=r.CODEC_H264}_reBuildMpegTsjs(e){this._releaseMpegTsjs(),this.makeIt(e)}_checkPicBlock(e){let t=this;this.checkPicBlockInterval=window.setInterval((function(){0<t.lastDecodedFrameTime&&1e4<s.GetMsTime()-t.lastDecodedFrameTime&&(window.clearInterval(t.checkPicBlockInterval),t.checkPicBlockInterval=null,t._reBuildMpegTsjs(e))}),1e3)}_checkLoadState(e){let t=this;this.checkStartIntervalCount=0,this.checkStartInterval=window.setInterval((function(){!1!==t.isInitDecodeFrames?(t.checkStartIntervalCount=0,window.clearInterval(t.checkStartInterval),t.checkStartInterval=null):(t.checkStartIntervalCount+=1,20<t.checkStartIntervalCount&&(window.clearInterval(t.checkStartInterval),t.checkStartIntervalCount=0,t.checkStartInterval=null,!1===t.isInitDecodeFrames)&&t._reBuildMpegTsjs(e))}),500)}init_player(e,t){let i=this;var s={type:"mpegts",url:e,duration:this.configFormat.duration,isLive:!1},o={hasVideo:!0,hasAudio:!(!0===this.configFormat.audioNone),isLive:this.configFormat.duration<=0,withCredentials:!1,seekType:"range",cors:!0,stashInitialSize:3145728,headers:this.headers};this.myPlayer=a.createPlayer(s,o),this.myPlayer.attachMediaElement(this.videoTag),this.myPlayer.on(a.Events.MEDIA_INFO,(function(e){var t;!1===i.isInitDecodeFrames&&(i.isInitDecodeFrames=!0,i.width=Math.max(i.videoTag.videoWidth,e.width),i.height=Math.max(i.videoTag.videoHeight,e.height),i.videoCodec=e.mimeType&&-1<e.mimeType.indexOf("hvc1")?r.CODEC_H265:r.CODEC_H264,i.videoTag.duration&&e.duration?i.videoTag.duration?i.duration=i.videoTag.duration:e.duration&&(i.duration=e.duration):i.duration=i.configFormat.duration/1e3,(e=document.querySelector("#"+i.configFormat.playerId)).getElementsByTagName("video")[0]||(t=e.getElementsByTagName("div"),e.insertBefore(i.videoTag,t[0])),i.onLoadFinish&&i.onLoadFinish(),!1===i.reset_player&&i.onReadyShowDone&&i.onReadyShowDone(),i._loopBufferState(),i.videoTag.onplay=function(){var e=i.isPlayingState();i.onPlayState&&i.onPlayState(e)},i.videoTag.ontimeupdate=()=>{var e;i.myPlayer&&(e=i.seekReadyPts||i.myPlayer.currentTime,i.onPlayingTime&&i.onPlayingTime(e),i.getFrameRate())},i.videoTag.onpause=function(){var e=i.isPlayingState();!1===i.reset_player&&i.onPlayState&&i.onPlayState(e)},i.duration!==1/0&&0<i.duration&&(i.videoTag.onended=()=>{i.onPlayingFinish&&i.onPlayingFinish()}),i.videoTag.onseeked=function(){i.onSeekFinish&&i.onSeekFinish(i.seekResult)})})),this.myPlayer.on(a.Events.SCRIPTDATA_ARRIVED,(function(e){})),this.myPlayer.on(a.Events.ERROR,(function(t,r,a){a.code===n.MsgCode.PLAY_ERROR?i.onError&&i.onError({msg:a,event:t,url:e,errorType:t}):i.myPlayer&&416!=a.code&&i._reBuildMpegTsjs(e)})),this.myPlayer.load(),t&&(this.pause(),this.seekReadyPts=t)}makeIt(e){let t=this;var i,r,s;this.url=e,a.isSupported()?(i=document.querySelector("#"+this.configFormat.playerId),this.videoTag=document.createElement("video"),this.videoTag.id=this.myPlayerID,this.videoTag.style.width=this.configFormat.width+"px",this.videoTag.style.height=this.configFormat.height+"px",r=i.getElementsByTagName("video")[0],s=i.getElementsByTagName("div"),this.configFormat.repeatPlay&&(this.videoTag.setAttribute("loop","loop"),r)&&r.setAttribute("loop","loop"),r?i.insertBefore(r,s[0]):s[0]&&i.insertBefore(this.videoTag,s[0]),!0===this.configFormat.autoPlay&&(window.onclick=document.body.onclick=function(e){t.videoTag.muted=!1,window.onclick=document.body.onclick=null}),this.videoTag.oncanplay=function(){var e,i;!1===t.isInitDecodeFrames&&(t.isInitDecodeFrames=!0,(e=document.querySelector("#"+t.configFormat.playerId)).getElementsByTagName("video")[0]||(i=e.getElementsByTagName("div"),e.insertBefore(t.videoTag,i[0])),t.onLoadFinish&&t.onLoadFinish(),t.onReadyShowDone&&t.onReadyShowDone(),t._loopBufferState(),t.videoTag.ontimeupdate=()=>{t.onPlayingTime&&t.onPlayingTime(t.myPlayer.currentTime)},t.duration!==1/0)&&0<t.duration&&(t.videoTag.onended=()=>{t.onPlayingFinish&&t.onPlayingFinish()})},this.seekReadyPts?this.init_player(e,this.seekReadyPts):this.init_player(e),this._checkLoadState(e),this._checkPicBlock(e),t.onMakeItReady&&t.onMakeItReady()):t.onError&&t.onError({msg:n.ErrorDetails.NOT_SUPPORT_DETAIL,errorType:n.ErrorTypes.NOT_SUPPORT,event:n.ErrorEvent.ERROR,url:e})}setPlaybackRate(e=1){return!(e<=0||null==this.videoTag||null===this.videoTag||(this.videoTag.playbackRate=e,0))}getPlaybackRate(){return null==this.videoTag||null===this.videoTag?0:this.videoTag.playbackRate}getSize(){return{width:0<this.videoTag.videoWidth?this.videoTag.videoWidth:this.width,height:0<this.videoTag.videoHeight?this.videoTag.videoHeight:this.height}}play(){this.myPlayer.play()}reload_mpegts(e){this.reset_player=!0,this.myPlayer.unload(),this.myPlayer.load(),this.onLoadFinish&&this.onLoadFinish(!1),this.pause(),this.seekReadyPts=e}seek(e){var t,i,n;if(!(e>=this.duration))return this.videoTag.muted=!0,(n=this.videoTag.buffered).length?(t=n.length-1,i=n.end(t),n=n.start(t),i-1<=e?(this.seekReadyPts||(this.seekReadyPts=e),this.myPlayer.currentTime=parseFloat(i-.1),!(this.seekResult=!0)):n<=e?(this.onPlayingTime&&this.onPlayingTime(e-.1),this.myPlayer.currentTime=parseFloat(e),this.seekReadyPts&&this.seekReadyPts!==e&&(this.seekReadyPts=e),this.seekResult=!0):0==e&&0<=n?(this.myPlayer.currentTime=parseFloat(e),this.seekResult=!0):(this.reset_player||this.reload_mpegts(e),!1)):(this.reset_player||this.reload_mpegts(e),!1)}pause(){this.myPlayer&&this.myPlayer.pause()}setVoice(e){this.videoTag.volume=e}isPlayingState(){return!this.videoTag.paused}_loopBufferState(){let e=this;e.duration<=0&&e.videoTag.duration&&(e.duration=e.videoTag.duration),null!==e.bufferInterval&&(window.clearInterval(e.bufferInterval),e.bufferInterval=null),e.bufferInterval=window.setInterval((function(){if(e.configFormat.duration<=0)window.clearInterval(e.bufferInterval);else{var t,i=e.videoTag.buffered.length,n=e.videoTag.buffered.end.length;let r;i=n<i?i:n,(r=e.videoTag.buffered.length?e.videoTag.buffered.end(i-1):r)>=e.duration-.04&&(e.onCacheProcess&&e.onCacheProcess(e.duration),e.cacheCompleted=!0,window.clearInterval(e.bufferInterval)),e.onCacheProcess&&e.onCacheProcess(r),e.seekReadyPts&&r>e.seekReadyPts?(t=e.seek(e.seekReadyPts),(e.seekResult=t)&&(e.videoTag.paused&&(e.play(),e.videoTag.muted&&(e.videoTag.muted=!1),e.reset_player=!1),e.seekReadyPts=null)):e.seekReadyPts&&r<=e.seekReadyPts&&(t=e.seek(r-.1),e.seekResult=t)}}),200)}_releaseMpegTsjs(){this.myPlayer&&(this.myPlayer.pause(),this.myPlayer.unload(),this.myPlayer.detachMediaElement(),this.myPlayer.destroy(),this.myPlayer=null),this.videoTag&&(this.videoTag.remove(),this.videoTag=null),null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),this.isInitDecodeFrames=!1,this.lastDecodedFrame=0,this.lastDecodedFrameTime=-1}getMediaInfo(){if(!this.myPlayer||!this.myPlayer._mediaInfo||!this.myPlayer._statisticsInfo)return null;var e,t={video:{width:"width",height:"height",codec:"videoCodec",frameRate:this.frameRate,playStyle:"Infinity"==this.videoTag.duration?"ts_live":"ts_vod",demuxStyle:"ts",bitRate:"speed"},audio:{bitRate:"speed",sampleRate:"audioSampleRate",codec:this.getAudioCodec()}},i=Object.assign(this.myPlayer._mediaInfo,this.myPlayer._statisticsInfo);for(e in t){var n,r=t[e];for(n in r)i[r[n]]&&(t[e][n]=i[r[n]])}return t}getFrameRate(){this.videoTag&&this.videoTag.currentTime&&1<this.videoTag.currentTime-this.curTime&&(this.curTime=this.videoTag.currentTime,this.frameRate=this.getVideoPlaybackQuality().totalVideoFrames-this.totalVideoFrames,this.totalVideoFrames=this.getVideoPlaybackQuality().totalVideoFrames)}getVideoPlaybackQuality(){return this.videoTag.getVideoPlaybackQuality()}getAudioCodec(){return this.myPlayer._transmuxer&&this.myPlayer._transmuxer._controller._demuxer.audio_metadata_&&this.myPlayer._transmuxer._controller._demuxer.audio_metadata_.codec}release(){null!==this.checkStartInterval&&(this.checkStartIntervalCount=0,window.clearInterval(this.checkStartInterval),this.checkStartInterval=null),null!==this.checkPicBlockInterval&&(window.clearInterval(this.checkPicBlockInterval),this.checkPicBlockInterval=null),null!==this.bufferInterval&&(window.clearInterval(this.bufferInterval),this.bufferInterval=null),this._releaseMpegTsjs(),this.myPlayerID=null,this.videoContaner=null,this.onLoadFinish=null,this.onPlayingTime=null,this.onPlayingFinish=null,this.onSeekFinish=null,this.onReadyShowDone=null,this.onPlayState=null,window.onclick=document.body.onclick=null}}},function(e,t,i){function n(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}var r,a;window,e.exports=(r=[function(e,t,i){"use strict";var n=i(6);function r(){}i=i.n(n),r.e=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","error",e),r.ENABLE_ERROR&&!console.error&&console.warn},r.i=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","info",e),r.ENABLE_INFO&&console.info},r.w=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","warn",e),r.ENABLE_WARN&&console.warn},r.d=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","debug",e),r.ENABLE_DEBUG&&console.debug},r.v=function(e,t){e="["+(e=e&&!r.FORCE_GLOBAL_TAG?e:r.GLOBAL_TAG)+"] > "+t,r.ENABLE_CALLBACK&&r.emitter.emit("log","verbose",e)},(n=r).GLOBAL_TAG="mpegts.js",n.FORCE_GLOBAL_TAG=!1,n.ENABLE_ERROR=!0,n.ENABLE_INFO=!0,n.ENABLE_WARN=!0,n.ENABLE_DEBUG=!0,n.ENABLE_VERBOSE=!0,n.ENABLE_CALLBACK=!1,n.emitter=new i.a,t.a=n},function(e,t,i){"use strict";t.a={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return s}));var n=i(3),r={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},a={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},s=(o.prototype.destroy=function(){this._status=r.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},o.prototype.isWorking=function(){return this._status===r.kConnecting||this._status===r.kBuffering},Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),o.prototype.open=function(e,t){throw new n.c("Unimplemented abstract function!")},o.prototype.abort=function(){throw new n.c("Unimplemented abstract function!")},o);function o(e){this._type=e||"undefined",this._status=r.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},function(e,t,i){"use strict";function n(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return d})),r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)},Object.defineProperty(m.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),m.prototype.toString=function(){return this.name+": "+this.message};var r,a,s,o,l=m,h=(n(p,o=l),Object.defineProperty(p.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),p),u=(n(f,s=l),Object.defineProperty(f.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),f),d=(n(c,a=l),Object.defineProperty(c.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),c);function c(e){return a.call(this,e)||this}function f(e){return s.call(this,e)||this}function p(e){return o.call(this,e)||this}function m(e){this._message=e}},function(e,t,i){"use strict";var n,r,a={},s=self.navigator.userAgent.toLowerCase(),o=/(edge)\/([\w.]+)/.exec(s)||/(opr)[\/]([\w.]+)/.exec(s)||/(chrome)[ \/]([\w.]+)/.exec(s)||/(iemobile)[\/]([\w.]+)/.exec(s)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(s)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(s)||/(webkit)[ \/]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||0<=s.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(s)||s.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(s)||[];for(r in s=/(ipad)/.exec(s)||/(ipod)/.exec(s)||/(windows phone)/.exec(s)||/(iphone)/.exec(s)||/(kindle)/.exec(s)||/(android)/.exec(s)||/(windows)/.exec(s)||/(mac)/.exec(s)||/(linux)/.exec(s)||/(cros)/.exec(s)||[],o={browser:o[5]||o[3]||o[1]||"",version:o[2]||o[4]||"0",majorVersion:o[4]||o[2]||"0",platform:s[0]||""},s={},o.browser&&(s[o.browser]=!0,n=o.majorVersion.split("."),s.version={major:parseInt(o.majorVersion,10),string:o.version},1<n.length&&(s.version.minor=parseInt(n[1],10)),2<n.length)&&(s.version.build=parseInt(n[2],10)),o.platform&&(s[o.platform]=!0),(s.chrome||s.opr||s.safari)&&(s.webkit=!0),(s.rv||s.iemobile)&&(s.rv&&delete s.rv,o.browser="msie",s.msie=!0),s.edge&&(delete s.edge,o.browser="msedge",s.msedge=!0),s.opr&&(o.browser="opera",s.opera=!0),s.safari&&s.android&&(o.browser="android",s.android=!0),s.name=o.browser,s.platform=o.platform,a)a.hasOwnProperty(r)&&delete a[r];Object.assign(a,s),t.a=a},function(e,t,i){"use strict";t.a={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},function(e,t,i){"use strict";var n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},a=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,a),n(i)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}g(e,t,a,{once:!0}),"error"!==t&&"function"==typeof e.on&&g(e,"error",r,{once:!0})}))},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function h(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,i,n){var r,a;return h(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener||i),r=e._events),a=r[t]),void 0===a?(a=r[t]=i,++e._eventsCount):("function"==typeof a?a=r[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),0<(r=u(e))&&a.length>r&&!a.warned&&(a.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=a.length,console)&&console.warn),e}function c(e,t,i){return t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:i}),t.listener=i,e.wrapFn=t}function f(e,t,i){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return i?[e.listener||e]:[e];if(i){for(var n=e,r=new Array(n.length),a=0;a<r.length;++a)r[a]=n[a].listener||n[a];return r}return m(e,e.length)}function p(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function m(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function g(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){n.once&&e.removeEventListener(t,r),i(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){if((s=0<t.length?t[0]:s)instanceof Error)throw s;throw(n=new Error("Unhandled error."+(s?" ("+s.message+")":""))).context=s,n}var s=a[e];if(void 0===s)return!1;if("function"==typeof s)r(s,this,t);else{var o=s.length,l=m(s,o);for(i=0;i<o;++i)r(l[i],this,t)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return h(t),this.on(e,c(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return h(t),this.prependListener(e,c(this,e,t)),this},o.prototype.off=o.prototype.removeListener=function(e,t){var i,n,r,a,s;if(h(t),void 0!==(n=this._events)&&void 0!==(i=n[e]))if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;0<=a;a--)if(i[a]===t||i[a].listener===t){s=i[a].listener,r=a;break}if(r<0)return this;if(0===r)i.shift();else{for(var o=i,l=r;l+1<o.length;l++)o[l]=o[l+1];o.pop()}1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.removeAllListeners=function(e){var t,i;if(void 0!==(i=this._events))if(void 0===i.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]);else if(0===arguments.length){for(var n,r=Object.keys(i),a=0;a<r.length;++a)"removeListener"!==(n=r[a])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return s}));var n=function(e,t,i,n,r){this.dts=e,this.pts=t,this.duration=i,this.originalDts=n,this.isSyncPoint=r,this.fileposition=null},r=(h.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},h),a=(l.prototype.clear=function(){this._list=[]},l.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(0<t.length&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},l.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t,i=this._list,n=0,r=i.length-1,a=0,s=r;for(e<i[0].dts&&(n=0,a=s+1);a<=s;){if((t=a+Math.floor((s-a)/2))===r||e>=i[t].dts&&e<i[t+1].dts){n=t;break}i[t].dts<e?a=t+1:s=t-1}return this._list[n]},l),s=(Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),o.prototype.isEmpty=function(){return 0===this._list.length},o.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},o.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var i,n=t.length-1,r=0,a=n,s=0;if(e<t[0].originalBeginDts)return-1;for(;r<=a;){if((i=r+Math.floor((a-r)/2))===n||e>t[i].lastSample.originalDts&&e<t[i+1].originalBeginDts){s=i;break}t[i].originalBeginDts<e?r=i+1:a=i-1}return s},o.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},o.prototype.append=function(e){var t=this._list,i=this._lastAppendLocation,n=0;-1!==i&&i<t.length&&e.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&e.originalBeginDts<t[i+1].originalBeginDts)?n=i+1:0<t.length&&(n=this._searchNearestSegmentBefore(e.originalBeginDts)+1),this._lastAppendLocation=n,this._list.splice(n,0,e)},o.prototype.getLastSegmentBefore=function(e){return 0<=(e=this._searchNearestSegmentBefore(e))?this._list[e]:null},o.prototype.getLastSampleBefore=function(e){return null!=(e=this.getLastSegmentBefore(e))?e.lastSample:null},o.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),i=this._list[t].syncPoints;0===i.length&&0<t;)i=this._list[--t].syncPoints;return 0<i.length?i[i.length-1]:null},o);function o(e){this._type=e,this._list=[],this._lastAppendLocation=-1}function l(){this._list=[]}function h(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}},function(e,t,i){"use strict";function n(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}n.prototype.isComplete=function(){var e=null!==this.hasAudio||!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!==this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&e&&t},n.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},n.prototype.getNearestKeyframe=function(e){var t;return null==this.keyframesIndex?null:(t=this.keyframesIndex,{index:e=this._search(t.times,e),milliseconds:t.times[e],fileposition:t.filepositions[e]})},n.prototype._search=function(e,t){var i,n=0,r=e.length-1,a=0,s=r;for(t<e[0]&&(n=0,a=s+1);a<=s;){if((i=a+Math.floor((s-a)/2))===r||t>=e[i]&&t<e[i+1]){n=i;break}e[i]<t?a=i+1:s=i-1}return n},t.a=n},function(e,t,i){"use strict";var n=i(6),r=(n=i.n(n),i(0));function a(){}Object.defineProperty(a,"forceGlobalTag",{get:function(){return r.a.FORCE_GLOBAL_TAG},set:function(e){r.a.FORCE_GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"globalTag",{get:function(){return r.a.GLOBAL_TAG},set:function(e){r.a.GLOBAL_TAG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableAll",{get:function(){return r.a.ENABLE_VERBOSE&&r.a.ENABLE_DEBUG&&r.a.ENABLE_INFO&&r.a.ENABLE_WARN&&r.a.ENABLE_ERROR},set:function(e){r.a.ENABLE_VERBOSE=e,r.a.ENABLE_DEBUG=e,r.a.ENABLE_INFO=e,r.a.ENABLE_WARN=e,r.a.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableDebug",{get:function(){return r.a.ENABLE_DEBUG},set:function(e){r.a.ENABLE_DEBUG=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableVerbose",{get:function(){return r.a.ENABLE_VERBOSE},set:function(e){r.a.ENABLE_VERBOSE=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableInfo",{get:function(){return r.a.ENABLE_INFO},set:function(e){r.a.ENABLE_INFO=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableWarn",{get:function(){return r.a.ENABLE_WARN},set:function(e){r.a.ENABLE_WARN=e,a._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(a,"enableError",{get:function(){return r.a.ENABLE_ERROR},set:function(e){r.a.ENABLE_ERROR=e,a._notifyChange()},enumerable:!1,configurable:!0}),a.getConfig=function(){return{globalTag:r.a.GLOBAL_TAG,forceGlobalTag:r.a.FORCE_GLOBAL_TAG,enableVerbose:r.a.ENABLE_VERBOSE,enableDebug:r.a.ENABLE_DEBUG,enableInfo:r.a.ENABLE_INFO,enableWarn:r.a.ENABLE_WARN,enableError:r.a.ENABLE_ERROR,enableCallback:r.a.ENABLE_CALLBACK}},a.applyConfig=function(e){r.a.GLOBAL_TAG=e.globalTag,r.a.FORCE_GLOBAL_TAG=e.forceGlobalTag,r.a.ENABLE_VERBOSE=e.enableVerbose,r.a.ENABLE_DEBUG=e.enableDebug,r.a.ENABLE_INFO=e.enableInfo,r.a.ENABLE_WARN=e.enableWarn,r.a.ENABLE_ERROR=e.enableError,r.a.ENABLE_CALLBACK=e.enableCallback},a._notifyChange=function(){var e,t=a.emitter;0<t.listenerCount("change")&&(e=a.getConfig(),t.emit("change",e))},a.registerListener=function(e){a.emitter.addListener("change",e)},a.removeListener=function(e){a.emitter.removeListener("change",e)},a.addLogListener=function(e){r.a.emitter.addListener("log",e),0<r.a.emitter.listenerCount("log")&&(r.a.ENABLE_CALLBACK=!0,a._notifyChange())},a.removeLogListener=function(e){r.a.emitter.removeListener("log",e),0===r.a.emitter.listenerCount("log")&&(r.a.ENABLE_CALLBACK=!1,a._notifyChange())},(i=a).emitter=new n.a,t.a=i},function(e,t,i){"use strict";var n=i(6),r=i.n(n),a=i(0),s=i(4),o=i(8);function l(e,t,i){var n=e;if(t+i<n.length){for(;i--;)if(128!=(192&n[++t]))return;return 1}}function h(e){for(var t,i=[],n=e,r=0,a=e.length;r<a;){if(n[r]<128)i.push(String.fromCharCode(n[r]));else{if(!(n[r]<192))if(n[r]<224){if(l(n,r,1)&&128<=(t=(31&n[r])<<6|63&n[r+1])){i.push(String.fromCharCode(65535&t)),r+=2;continue}}else if(n[r]<240){if(l(n,r,2)&&2048<=(t=(15&n[r])<<12|(63&n[r+1])<<6|63&n[r+2])&&55296!=(63488&t)){i.push(String.fromCharCode(65535&t)),r+=3;continue}}else if(n[r]<248&&l(n,r,3)&&65536<(t=(7&n[r])<<18|(63&n[r+1])<<12|(63&n[r+2])<<6|63&n[r+3])&&t<1114112){t-=65536,i.push(String.fromCharCode(t>>>10|55296)),i.push(String.fromCharCode(1023&t|56320)),r+=4;continue}i.push(String.fromCharCode(65533))}++r}return i.join("")}var u=i(3),d=(n=new ArrayBuffer(2),new DataView(n).setInt16(0,256,!0),256===new Int16Array(n)[0]),c=(A.parseScriptData=function(e,t,i){var n={};try{var r=A.parseValue(e,t,i),s=A.parseValue(e,t+r.size,i-r.size);n[r.data]=s.data}catch(e){a.a.e("AMF",e.toString())}return n},A.parseObject=function(e,t,i){if(i<3)throw new u.a("Data not enough when parse ScriptDataObject");var n=A.parseString(e,t,i);return t=(e=A.parseValue(e,t+n.size,i-n.size)).objectEnd,{data:{name:n.data,value:e.data},size:n.size+e.size,objectEnd:t}},A.parseVariable=function(e,t,i){return A.parseObject(e,t,i)},A.parseString=function(e,t,i){if(i<2)throw new u.a("Data not enough when parse String");return{data:0<(i=new DataView(e,t,i).getUint16(0,!d))?h(new Uint8Array(e,t+2,i)):"",size:2+i}},A.parseLongString=function(e,t,i){if(i<4)throw new u.a("Data not enough when parse LongString");return{data:0<(i=new DataView(e,t,i).getUint32(0,!d))?h(new Uint8Array(e,t+4,i)):"",size:4+i}},A.parseDate=function(e,t,i){if(i<10)throw new u.a("Data size invalid when parse Date");return t=(e=new DataView(e,t,i)).getFloat64(0,!d),i=e.getInt16(8,!d),{data:new Date(t+=60*i*1e3),size:10}},A.parseValue=function(e,t,i){if(i<1)throw new u.a("Data not enough when parse Value");var n=new DataView(e,t,i),r=1,s=n.getUint8(0),o=!1;try{switch(s){case 0:h=n.getFloat64(1,!d),r+=8;break;case 1:h=!!n.getUint8(1),r+=1;break;case 2:var l=A.parseString(e,t+1,i-1),h=l.data;r+=l.size;break;case 3:h={};var c=0;for(9==(16777215&n.getUint32(i-4,!d))&&(c=3);r<i-4;){var f=A.parseObject(e,t+r,i-r-c);if(f.objectEnd)break;h[f.data.name]=f.data.value,r+=f.size}r<=i-3&&9==(16777215&n.getUint32(r-1,!d))&&(r+=3);break;case 8:for(h={},r+=4,c=0,9==(16777215&n.getUint32(i-4,!d))&&(c=3);r<i-8;){var p=A.parseVariable(e,t+r,i-r-c);if(p.objectEnd)break;h[p.data.name]=p.data.value,r+=p.size}r<=i-3&&9==(16777215&n.getUint32(r-1,!d))&&(r+=3);break;case 9:r=1,o=!(h=void 0);break;case 10:h=[];var m=n.getUint32(1,!d);r+=4;for(var g=0;g<m;g++){var _=A.parseValue(e,t+r,i-r);h.push(_.data),r+=_.size}break;case 11:var y=A.parseDate(e,t+1,i-1);h=y.data,r+=y.size;break;case 12:var v=A.parseString(e,t+1,i-1);h=v.data,r+=v.size;break;default:r=i,a.a.w("AMF","Unsupported AMF value type "+s)}}catch(e){a.a.e("AMF",e.toString())}return{data:h,size:r,objectEnd:o}},A),f=(v.prototype.destroy=function(){this._buffer=null},v.prototype._fillCurrentWord=function(){if((e=this._total_bytes-this._buffer_index)<=0)throw new u.a("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,e),t=new Uint8Array(4);t.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(t.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e},v.prototype.readBits=function(e){if(32<e)throw new u.b("ExpGolomb: readBits() bits exceeded max 32bits!");var t,i;return e<=this._current_word_bits_left?(t=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t):(t=this._current_word_bits_left?this._current_word:0,t>>>=32-this._current_word_bits_left,e-=this._current_word_bits_left,this._fillCurrentWord(),e=Math.min(e,this._current_word_bits_left),i=this._current_word>>>32-e,this._current_word<<=e,this._current_word_bits_left-=e,t<<e|i)},v.prototype.readBool=function(){return 1===this.readBits(1)},v.prototype.readByte=function(){return this.readBits(8)},v.prototype._skipLeadingZero=function(){for(var e=0;e<this._current_word_bits_left;e++)if(this._current_word&2147483648>>>e)return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},v.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},v.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},v),p=(y._ebsp2rbsp=function(e){for(var t=e,i=t.byteLength,n=new Uint8Array(i),r=0,a=0;a<i;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(n[r]=t[a],r++);return new Uint8Array(n.buffer,0,r)},y.parseSPS=function(e){for(var t=e.subarray(1,4),i="avc1.",n=0;n<3;n++){var r=t[n].toString(16);i+=r=r.length<2?"0"+r:r}e=y._ebsp2rbsp(e);var a=new f(e),s=(a.readByte(),e=a.readByte(),a.readByte(),a.readByte()),o=(a.readUEG(),y.getProfileString(e)),l=y.getLevelString(s),h=1,u=420,d=8,c=8;if((100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e||138===e||144===e)&&(3===(h=a.readUEG())&&a.readBits(1),h<=3&&(u=[0,420,422,444][h]),d=a.readUEG()+8,c=a.readUEG()+8,a.readBits(1),a.readBool()))for(var p=3!==h?8:12,m=0;m<p;m++)a.readBool()&&y._skipScalingList(a,m<6?16:64);if(a.readUEG(),0===(_=a.readUEG()))a.readUEG();else if(1===_){a.readBits(1),a.readSEG(),a.readSEG();var g=a.readUEG();for(m=0;m<g;m++)a.readSEG()}var _=a.readUEG(),v=(a.readBits(1),a.readUEG()),A=a.readUEG(),E=(0===(M=a.readBits(1))&&a.readBits(1),a.readBits(1),0),b=0,w=0,S=0,T=(a.readBool()&&(E=a.readUEG(),b=a.readUEG(),w=a.readUEG(),S=a.readUEG()),1),C=1,L=0,R=!0,I=0,k=0,P=(a.readBool()&&(a.readBool()&&(0<(D=a.readByte())&&D<16?(T=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][D-1],C=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][D-1]):255===D&&(T=a.readByte()<<8|a.readByte(),C=a.readByte()<<8|a.readByte())),a.readBool()&&a.readBool(),a.readBool()&&(a.readBits(4),a.readBool())&&a.readBits(24),a.readBool()&&(a.readUEG(),a.readUEG()),a.readBool())&&(D=a.readBits(32),P=a.readBits(32),R=a.readBool(),L=(I=P)/(k=2*D)),1),D=(1===T&&1===C||(P=T/C),0),x=0===h?(D=1,2-M):(D=3===h?1:2,(1===h?2:1)*(2-M)),M=(v=16*(v+1),A=16*(A+1)*(2-M),v-=(E+b)*D,A-=(w+S)*x,Math.ceil(v*P));return a.destroy(),a=null,{codec_mimetype:i,profile_idc:e,level_idc:s,profile_string:o,level_string:l,chroma_format_idc:h,bit_depth:d,bit_depth_luma:d,bit_depth_chroma:c,ref_frames:_,chroma_format:u,chroma_format_string:y.getChromaFormatString(u),frame_rate:{fixed:R,fps:L,fps_den:k,fps_num:I},sar_ratio:{width:T,height:C},codec_size:{width:v,height:A},present_size:{width:M,height:A}}},y._skipScalingList=function(e,t){for(var i=8,n=8,r=0;r<t;r++)i=0===(n=0!==n?(i+e.readSEG()+256)%256:n)?i:n},y.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},y.getLevelString=function(e){return(e/10).toFixed(1)},y.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},y),m=i(5),g=(_._ebsp2rbsp=function(e){for(var t=e,i=t.byteLength,n=new Uint8Array(i),r=0,a=0;a<i;a++)2<=a&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(n[r]=t[a],r++);return new Uint8Array(n.buffer,0,r)},_.parseVPS=function(e){return e=_._ebsp2rbsp(e),(e=new f(e)).readByte(),e.readByte(),e.readBits(4),e.readBits(2),e.readBits(6),{num_temporal_layers:e.readBits(3)+1,temporal_id_nested:e.readBool()}},_.parseSPS=function(e){e=_._ebsp2rbsp(e);var t=new f(e);t.readByte(),t.readByte(),e=0;for(var i=0,n=0,r=0,a=(t.readBits(4),t.readBits(3)),s=(t.readBool(),t.readBits(2)),o=t.readBool(),l=t.readBits(5),h=t.readByte(),u=t.readByte(),d=t.readByte(),c=t.readByte(),p=t.readByte(),m=t.readByte(),g=t.readByte(),y=t.readByte(),v=t.readByte(),A=t.readByte(),E=t.readByte(),b=[],w=[],S=0;S<a;S++)b.push(t.readBool()),w.push(t.readBool());if(0<a)for(S=a;S<8;S++)t.readBits(2);for(S=0;S<a;S++)b[S]&&(t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte()),w[S]&&t.readByte();t.readUEG();var T=t.readUEG(),C=(3==T&&t.readBits(1),t.readUEG()),L=t.readUEG(),R=(t.readBool()&&(e+=t.readUEG(),i+=t.readUEG(),n+=t.readUEG(),r+=t.readUEG()),t.readUEG()),I=t.readUEG(),k=t.readUEG();for(S=t.readBool()?0:a;S<=a;S++)t.readUEG(),t.readUEG(),t.readUEG();if(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readBool()&&t.readBool())for(var P=0;P<4;P++)for(var D=0;D<(3===P?2:6);D++)if(t.readBool()){var x=Math.min(64,1<<4+(P<<1));for(1<P&&t.readSEG(),S=0;S<x;S++)t.readSEG()}else t.readUEG();t.readBool(),t.readBool(),t.readBool()&&(t.readByte(),t.readUEG(),t.readUEG(),t.readBool());var M=t.readUEG(),F=0;for(S=0;S<M;S++){var B=!1;if(B=0!==S?t.readBool():B){S===M&&t.readUEG(),t.readBool(),t.readUEG();for(var O=0,U=0;U<=F;U++){var N=t.readBool(),j=!1;N||(j=t.readBool()),(N||j)&&O++}F=O}else{var V=t.readUEG(),G=t.readUEG();for(F=V+G,U=0;U<V;U++)t.readUEG(),t.readBool();for(U=0;U<G;U++)t.readUEG(),t.readBool()}}if(t.readBool()){var H=t.readUEG();for(S=0;S<H;S++){for(U=0;U<k+4;U++)t.readBits(1);t.readBits(1)}}var Y=0,W=1,z=1,Q=!1,K=1,J=1;if(t.readBool(),t.readBool(),t.readBool()){if(t.readBool()&&(0<(ne=t.readByte())&&ne<=16?(W=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][ne-1],z=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][ne-1]):255===ne&&(W=t.readBits(16),z=t.readBits(16))),t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(3),t.readBool(),t.readBool())&&(t.readByte(),t.readByte(),t.readByte()),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool(),t.readBool(),t.readBool(),t.readBool()&&(t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG()),t.readBool()&&(K=t.readBits(32),J=t.readBits(32),t.readBool())&&(t.readUEG(),t.readBool())){var Z=!1,q=t.readBool(),X=t.readBool();for((q||X)&&((Z=t.readBool())&&(t.readByte(),t.readBits(5),t.readBool(),t.readBits(5)),t.readBits(4),t.readBits(4),Z&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5)),S=0;S<=a;S++){var $=t.readBool(),ee=(Q=$,!1),te=1,ie=!1;if((ee=$?ee:t.readBool())?t.readSEG():ie=t.readBool(),ie||(te=t.readUEG()+1),q)for(U=0;U<te;U++)t.readUEG(),t.readUEG(),Z&&(t.readUEG(),t.readUEG());if(X)for(U=0;U<te;U++)t.readUEG(),t.readUEG(),Z&&(t.readUEG(),t.readUEG())}}t.readBool()&&(t.readBool(),t.readBool(),t.readBool(),Y=t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG(),t.readUEG())}t.readBool();var ne="hvc1."+l+".1.L"+E+".B0";return C-=(e+i)*(1===T||2===T?2:1),e=L-(n+r)*(1===T?2:1),i=1!==W&&1!==z?W/z:1,t.destroy(),t=null,{codec_mimetype:ne,level_string:_.getLevelString(E),profile_idc:l,bit_depth:R+8,ref_frames:1,chroma_format:T,chroma_format_string:_.getChromaFormatString(T),general_level_idc:E,general_profile_space:s,general_tier_flag:o,general_profile_idc:l,general_profile_compatibility_flags_1:h,general_profile_compatibility_flags_2:u,general_profile_compatibility_flags_3:d,general_profile_compatibility_flags_4:c,general_constraint_indicator_flags_1:p,general_constraint_indicator_flags_2:m,general_constraint_indicator_flags_3:g,general_constraint_indicator_flags_4:y,general_constraint_indicator_flags_5:v,general_constraint_indicator_flags_6:A,min_spatial_segmentation_idc:Y,constant_frame_rate:0,chroma_format_idc:T,bit_depth_luma_minus8:R,bit_depth_chroma_minus8:I,frame_rate:{fixed:Q,fps:J/K,fps_den:K,fps_num:J},sar_ratio:{width:W,height:z},codec_size:{width:C,height:e},present_size:{width:C*i,height:e}}},_.parsePPS=function(e){e=_._ebsp2rbsp(e);var t=((e=new f(e)).readByte(),e.readByte(),e.readUEG(),e.readUEG(),e.readBool(),e.readBool(),e.readBits(3),e.readBool(),e.readBool(),e.readUEG(),e.readUEG(),e.readSEG(),e.readBool(),e.readBool(),e.readBool()&&e.readUEG(),e.readSEG(),e.readSEG(),e.readBool(),e.readBool(),e.readBool(),e.readBool(),e.readBool()),i=1;return(e=e.readBool())&&t?i=0:e?i=3:t&&(i=2),{parallelismType:i}},_.getChromaFormatString=function(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}},_.getProfileString=function(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}},_.getLevelString=function(e){return(e/30).toFixed(1)},_);function _(){}function y(){}function v(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}function A(){}function E(e){return e.byteOffset%2==0&&e.byteLength%2==0}function b(e){return e.byteOffset%4==0&&e.byteLength%4==0}function w(e,t){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function S(e,t){return e.byteLength===t.byteLength&&(b(e)&&b(t)?(i=t,w(new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4),new Uint32Array(i.buffer,i.byteOffset,i.byteLength/4))):E(e)&&E(t)?(i=t,w(new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2))):w(e,t));var i}function T(){this.program_pmt_pid={}}k.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},k.probe=function(e){var t,i,n;return(e=new Uint8Array(e)).byteLength<9?{needMoreData:!0}:(t={match:!1},70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3]||(i=(4&e[4])>>>2!=0,n=!!(1&e[4]),(e=e[5]<<24|e[6]<<16|e[7]<<8|e[8])<9)?t:{match:!0,consumed:e,dataOffset:e,hasAudioTrack:i,hasVideoTrack:n})},k.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(k.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),k.prototype.resetMediaInfo=function(){this._mediaInfo=new o.a},k.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},k.prototype.parseChunks=function(e,t){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new u.a("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var i=0,n=this._littleEndian;if(0===t){if(!(13<e.byteLength))return 0;i=k.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,t+i!==this._dataOffset&&a.a.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(r=new DataView(e,i)).getUint32(0,!n)&&a.a.w(this.TAG,"PrevTagSize0 !== 0 !!!"),i+=4);i<e.byteLength;){this._dispatch=!0;var r=new DataView(e,i);if(i+11+4>e.byteLength)break;var s=r.getUint8(0),o=16777215&r.getUint32(0,!n);if(i+11+o+4>e.byteLength)break;if(8===s||9===s||18===s){var l=r.getUint8(4),h=r.getUint8(5),d=r.getUint8(6)|h<<8|l<<16|r.getUint8(7)<<24,c=(!!(16777215&r.getUint32(7,!n))&&a.a.w(this.TAG,"Meet tag which has StreamID != 0!"),i+11);switch(s){case 8:this._parseAudioData(e,c,o,d);break;case 9:this._parseVideoData(e,c,o,d,t+i);break;case 18:this._parseScriptData(e,c,o)}(h=r.getUint32(11+o,!n))!==11+o&&a.a.w(this.TAG,"Invalid PrevTagSize "+h)}else a.a.w(this.TAG,"Unsupported tag type "+s+", skipped");i+=11+o+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),i},k.prototype._parseScriptData=function(e,t,i){if((e=c.parseScriptData(e,t,i)).hasOwnProperty("onMetaData")){if(null==e.onMetaData||"object"!=typeof e.onMetaData)return void a.a.w(this.TAG,"Invalid onMetaData structure!");var n;this._metadata&&a.a.w(this.TAG,"Found another onMetaData tag!"),this._metadata=e,t=this._metadata.onMetaData,this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},t)),"boolean"==typeof t.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=t.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof t.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=t.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof t.audiodatarate&&(this._mediaInfo.audioDataRate=t.audiodatarate),"number"==typeof t.videodatarate&&(this._mediaInfo.videoDataRate=t.videodatarate),"number"==typeof t.width&&(this._mediaInfo.width=t.width),"number"==typeof t.height&&(this._mediaInfo.height=t.height),"number"==typeof t.duration?this._durationOverrided||(i=Math.floor(t.duration*this._timescale),this._duration=i,this._mediaInfo.duration=i):this._mediaInfo.duration=0,"number"==typeof t.framerate&&0<(i=Math.floor(1e3*t.framerate))&&(n=i/1e3,this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=n,this._referenceFrameRate.fps_num=i,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=n),"object"==typeof t.keyframes?(this._mediaInfo.hasKeyframesIndex=!0,i=t.keyframes,this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(i),t.keyframes=null):this._mediaInfo.hasKeyframesIndex=!1,this._dispatch=!1,this._mediaInfo.metadata=t,a.a.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}0<Object.keys(e).length&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},e))},k.prototype._parseKeyframesIndex=function(e){for(var t=[],i=[],n=1;n<e.times.length;n++){var r=this._timestampBase+Math.floor(1e3*e.times[n]);t.push(r),i.push(e.filepositions[n])}return{times:t,filepositions:i}},k.prototype._parseAudioData=function(e,t,i,n){if(i<=1)a.a.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var r=(h=new DataView(e,t,i).getUint8(0))>>>4;if(2==r||10==r){var s=(12&h)>>>2;if(0<=s&&s<=4){var o,l=this._flvSoundRateTable[s],h=1&h,u=this._audioMetadata,d=this._audioTrack;if(u||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(u=this._audioMetadata={}).type="audio",u.id=d.id,u.timescale=this._timescale,u.duration=this._duration,u.audioSampleRate=l,u.channelCount=0==h?1:2),10==r){if(null!=(l=this._parseAACAudioData(e,t+1,i-1)))if(0===l.packetType){if(u.config){if(S(l.data.config,u.config))return;a.a.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}var c=l.data;u.audioSampleRate=c.samplingRate,u.channelCount=c.channelCount,u.codec=c.codec,u.originalCodec=c.originalCodec,u.config=c.config,u.refSampleDuration=1024/u.audioSampleRate*u.timescale,a.a.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",u),(o=this._mediaInfo).audioCodec=u.originalCodec,o.audioSampleRate=u.audioSampleRate,o.audioChannelCount=u.channelCount,o.hasVideo?null!=o.videoCodec&&(o.mimeType='video/x-flv; codecs="'+o.videoCodec+","+o.audioCodec+'"'):o.mimeType='video/x-flv; codecs="'+o.audioCodec+'"',o.isComplete()&&this._onMediaInfo(o)}else 1===l.packetType?(f=this._timestampBase+n,h={unit:l.data,length:l.data.byteLength,dts:f,pts:f},d.samples.push(h),d.length+=l.data.length):a.a.e(this.TAG,"Flv: Unsupported AAC data type "+l.packetType)}else if(2==r){if(!u.codec){if(null==(c=this._parseMP3AudioData(e,t+1,i-1,!0)))return;u.audioSampleRate=c.samplingRate,u.channelCount=c.channelCount,u.codec=c.codec,u.originalCodec=c.originalCodec,u.refSampleDuration=1152/u.audioSampleRate*u.timescale,a.a.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",u),(o=this._mediaInfo).audioCodec=u.codec,o.audioSampleRate=u.audioSampleRate,o.audioChannelCount=u.channelCount,o.audioDataRate=c.bitRate,o.hasVideo?null!=o.videoCodec&&(o.mimeType='video/x-flv; codecs="'+o.videoCodec+","+o.audioCodec+'"'):o.mimeType='video/x-flv; codecs="'+o.audioCodec+'"',o.isComplete()&&this._onMediaInfo(o)}var f;null!=(h=this._parseMP3AudioData(e,t+1,i-1,!1))&&(f=this._timestampBase+n,l={unit:h,length:h.byteLength,dts:f,pts:f},d.samples.push(l),d.length+=h.length)}}else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+s)}else this._onError(m.a.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+r)}},k.prototype._parseAACAudioData=function(e,t,i){var n,r;if(!(i<=1))return n={},r=new Uint8Array(e,t,i),n.packetType=r[0],0===r[0]?n.data=this._parseAACAudioSpecificConfig(e,t+1,i-1):n.data=r.subarray(1),n;a.a.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},k.prototype._parseAACAudioSpecificConfig=function(e,t,i){e=new Uint8Array(e,t,i),t=null,i=0;var n,r,a=null;if(i=n=e[0]>>>3,(r=(7&e[0])<<1|e[1]>>>7)<0||r>=this._mpegSamplingRates.length)this._onError(m.a.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var s=this._mpegSamplingRates[r],o=(120&e[1])>>>3;if(!(o<0||8<=o))return 5===i&&(a=(7&e[1])<<1|e[2]>>>7,e[2]),-1!==(e=self.navigator.userAgent.toLowerCase()).indexOf("firefox")?a=6<=r?(i=5,t=new Array(4),r-3):(i=2,t=new Array(2),r):-1!==e.indexOf("android")?(i=2,t=new Array(2),a=r):(i=5,a=r,t=new Array(4),6<=r?a=r-3:1==o&&(i=2,t=new Array(2),a=r)),t[0]=i<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&o)<<3,5===i&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),{config:t,samplingRate:s,channelCount:o,codec:"mp4a.40."+i,originalCodec:"mp4a.40."+n};this._onError(m.a.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},k.prototype._parseMP3AudioData=function(e,t,i,n){if(!(i<4)){if(this._littleEndian,e=new Uint8Array(e,t,i),t=null,n){if(255!==e[0])return;i=e[1]>>>3&3,n=(6&e[1])>>1;var r=(240&e[2])>>>4,s=(12&e[2])>>>2,o=3&~(e[3]>>>6)?2:1,l=0,h=0;switch(i){case 0:l=this._mpegAudioV25SampleRateTable[s];break;case 2:l=this._mpegAudioV20SampleRateTable[s];break;case 3:l=this._mpegAudioV10SampleRateTable[s]}switch(n){case 1:r<this._mpegAudioL3BitRateTable.length&&(h=this._mpegAudioL3BitRateTable[r]);break;case 2:r<this._mpegAudioL2BitRateTable.length&&(h=this._mpegAudioL2BitRateTable[r]);break;case 3:r<this._mpegAudioL1BitRateTable.length&&(h=this._mpegAudioL1BitRateTable[r])}t={bitRate:h,samplingRate:l,channelCount:o,codec:"mp3",originalCodec:"mp3"}}else t=e;return t}a.a.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},k.prototype._parseVideoData=function(e,t,i,n,r){var s,o,l,h;i<=1?a.a.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!"):!0===this._hasVideoFlagOverrided&&!1===this._hasVideo||(o=(112&(s=new Uint8Array(e,t,i)[0]))>>>4,128&s?(l=15&s,"hvc1"!==(h=String.fromCharCode.apply(String,new Uint8Array(e,t,i).slice(1,5)))?this._onError(m.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+h):this._parseEnhancedHEVCVideoPacket(e,t+5,i-5,n,r,o,l)):7==(h=15&s)?this._parseAVCVideoPacket(e,t+1,i-1,n,r,o):12!=h?this._onError(m.a.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+h):this._parseHEVCVideoPacket(e,t+1,i-1,n,r,o))},k.prototype._parseAVCVideoPacket=function(e,t,i,n,r,s){if(i<4)a.a.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var o=this._littleEndian,l=(h=new DataView(e,t,i)).getUint8(0),h=(16777215&h.getUint32(0,!o))<<8>>8;if(0===l)this._parseAVCDecoderConfigurationRecord(e,t+4,i-4);else if(1===l)this._parseAVCVideoData(e,t+4,i-4,n,r,s,h);else if(2!==l)return void this._onError(m.a.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}},k.prototype._parseHEVCVideoPacket=function(e,t,i,n,r,s){if(i<4)a.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var o=this._littleEndian,l=(h=new DataView(e,t,i)).getUint8(0),h=(16777215&h.getUint32(0,!o))<<8>>8;if(0===l)this._parseHEVCDecoderConfigurationRecord(e,t+4,i-4);else if(1===l)this._parseHEVCVideoData(e,t+4,i-4,n,r,s,h);else if(2!==l)return void this._onError(m.a.FORMAT_ERROR,"Flv: Invalid video packet type "+l)}},k.prototype._parseEnhancedHEVCVideoPacket=function(e,t,i,n,r,s,o){if(i<4)a.a.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");else{var l=this._littleEndian,h=new DataView(e,t,i);if(0===o)this._parseHEVCDecoderConfigurationRecord(e,t,i);else if(1===o)h=(4294967040&h.getUint32(0,!l))>>8,this._parseHEVCVideoData(e,t+3,i-3,n,r,s,h);else if(3===o)this._parseHEVCVideoData(e,t,i,n,r,s,0);else if(2!==o)return void this._onError(m.a.FORMAT_ERROR,"Flv: Invalid video packet type "+o)}},k.prototype._parseAVCDecoderConfigurationRecord=function(e,t,i){if(i<7)a.a.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var n=this._videoMetadata,r=this._videoTrack,s=this._littleEndian,o=new DataView(e,t,i);if(n){if(void 0!==n.avcc){var l=new Uint8Array(e,t,i);if(S(l,n.avcc))return;a.a.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(n=this._videoMetadata={}).type="video",n.id=r.id,n.timescale=this._timescale,n.duration=this._duration;if(l=o.getUint8(0),r=o.getUint8(1),o.getUint8(2),o.getUint8(3),1===l&&0!==r)if(this._naluLengthSize=1+(3&o.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var h=31&o.getUint8(5);if(0!=h){1<h&&a.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+h);for(var u=6,d=0;d<h;d++){var c=o.getUint16(u,!s);if(u+=2,0!==c){var f=new Uint8Array(e,t+u,c),g=(u+=c,p.parseSPS(f));if(0===d){n.codecWidth=g.codec_size.width,n.codecHeight=g.codec_size.height,n.presentWidth=g.present_size.width,n.presentHeight=g.present_size.height,n.profile=g.profile_string,n.level=g.level_string,n.bitDepth=g.bit_depth,n.chromaFormat=g.chroma_format,n.sarRatio=g.sar_ratio,n.frameRate=g.frame_rate,!1!==g.frame_rate.fixed&&0!==g.frame_rate.fps_num&&0!==g.frame_rate.fps_den||(n.frameRate=this._referenceFrameRate);var _=n.frameRate.fps_den,y=n.frameRate.fps_num;n.refSampleDuration=n.timescale*(_/y);for(var v=f.subarray(1,4),A="avc1.",E=0;E<3;E++){var b=v[E].toString(16);A+=b=b.length<2?"0"+b:b}n.codec=A,(_=this._mediaInfo).width=n.codecWidth,_.height=n.codecHeight,_.fps=n.frameRate.fps,_.profile=n.profile,_.level=n.level,_.refFrames=g.ref_frames,_.chromaFormat=g.chroma_format_string,_.sarNum=n.sarRatio.width,_.sarDen=n.sarRatio.height,_.videoCodec=A,_.hasAudio?null!=_.audioCodec&&(_.mimeType='video/x-flv; codecs="'+_.videoCodec+","+_.audioCodec+'"'):_.mimeType='video/x-flv; codecs="'+_.videoCodec+'"',_.isComplete()&&this._onMediaInfo(_)}}}var w=o.getUint8(u);if(0!==w){for(1<w&&a.a.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+w),u++,d=0;d<w;d++)c=o.getUint16(u,!s),u+=2,0!==c&&(u+=c);n.avcc=new Uint8Array(i),n.avcc.set(new Uint8Array(e,t,i),0),a.a.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",n)}else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(m.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},k.prototype._parseHEVCDecoderConfigurationRecord=function(e,t,i){if(i<22)a.a.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");else{var n=this._videoMetadata,r=this._videoTrack,s=this._littleEndian,o=new DataView(e,t,i);if(n){if(void 0!==n.hvcc){var l=new Uint8Array(e,t,i);if(S(l,n.hvcc))return;a.a.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(n=this._videoMetadata={}).type="video",n.id=r.id,n.timescale=this._timescale,n.duration=this._duration;if(l=o.getUint8(0),r=31&o.getUint8(1),1===l&&0!=r)if(this._naluLengthSize=1+(3&o.getUint8(21)),3===this._naluLengthSize||4===this._naluLengthSize){for(var h=o.getUint8(22),u=0,d=23;u<h;u++){var c=63&o.getUint8(d+0),f=o.getUint16(d+1,!s);d+=3;for(var p=0;p<f;p++){var _,y,v,A=o.getUint16(d+0,!s);0===p&&33==c?(d+=2,_=new Uint8Array(e,t+d,A),_=g.parseSPS(_),n.codecWidth=_.codec_size.width,n.codecHeight=_.codec_size.height,n.presentWidth=_.present_size.width,n.presentHeight=_.present_size.height,n.profile=_.profile_string,n.level=_.level_string,n.bitDepth=_.bit_depth,n.chromaFormat=_.chroma_format,n.sarRatio=_.sar_ratio,n.frameRate=_.frame_rate,!1!==_.frame_rate.fixed&&0!==_.frame_rate.fps_num&&0!==_.frame_rate.fps_den||(n.frameRate=this._referenceFrameRate),v=n.frameRate.fps_den,y=n.frameRate.fps_num,n.refSampleDuration=n.timescale*(v/y),n.codec=_.codec_mimetype,(v=this._mediaInfo).width=n.codecWidth,v.height=n.codecHeight,v.fps=n.frameRate.fps,v.profile=n.profile,v.level=n.level,v.refFrames=_.ref_frames,v.chromaFormat=_.chroma_format_string,v.sarNum=n.sarRatio.width,v.sarDen=n.sarRatio.height,v.videoCodec=_.codec_mimetype,v.hasAudio?null!=v.audioCodec&&(v.mimeType='video/x-flv; codecs="'+v.videoCodec+","+v.audioCodec+'"'):v.mimeType='video/x-flv; codecs="'+v.videoCodec+'"',v.isComplete()&&this._onMediaInfo(v),d+=A):d+=2+A}}n.hvcc=new Uint8Array(i),n.hvcc.set(new Uint8Array(e,t,i),0),a.a.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",n)}else this._onError(m.a.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(m.a.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord")}},k.prototype._parseAVCVideoData=function(e,t,i,n,r,s,o){for(var l=this._littleEndian,h=new DataView(e,t,i),u=[],d=0,c=0,f=this._naluLengthSize,p=this._timestampBase+n,m=1===s;c<i;){if(i<=c+4){a.a.w(this.TAG,"Malformed Nalu near timestamp "+p+", offset = "+c+", dataSize = "+i);break}var g=h.getUint32(c,!l);if(3===f&&(g>>>=8),i-f<g)return void a.a.w(this.TAG,"Malformed Nalus near timestamp "+p+", NaluSize > DataSize!");var _=31&h.getUint8(c+f),y=(5==_&&(m=!0),new Uint8Array(e,t+c,f+g));u.push({type:_,data:y}),d+=y.byteLength,c+=f+g}u.length&&(n=this._videoTrack,s={units:u,length:d,isKeyframe:m,dts:p,cts:o,pts:p+o},m&&(s.fileposition=r),n.samples.push(s),n.length+=d)},k.prototype._parseHEVCVideoData=function(e,t,i,n,r,s,o){for(var l=this._littleEndian,h=new DataView(e,t,i),u=[],d=0,c=0,f=this._naluLengthSize,p=this._timestampBase+n,m=1===s;c<i;){if(i<=c+4){a.a.w(this.TAG,"Malformed Nalu near timestamp "+p+", offset = "+c+", dataSize = "+i);break}var g=h.getUint32(c,!l);if(3===f&&(g>>>=8),i-f<g)return void a.a.w(this.TAG,"Malformed Nalus near timestamp "+p+", NaluSize > DataSize!");var _=31&h.getUint8(c+f),y=(19!=_&&20!=_||(m=!0),new Uint8Array(e,t+c,f+g));u.push({type:_,data:y}),d+=y.byteLength,c+=f+g}u.length&&(n=this._videoTrack,s={units:u,length:d,isKeyframe:m,dts:p,cts:o,pts:p+o},m&&(s.fileposition=r),n.samples.push(s),n.length+=d)};var C,L,R=k;function I(){}function k(e,t){this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new o.a,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(t=new ArrayBuffer(2),new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0])}function P(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.scte_35_pids={},this.smpte2038_pids={}}function D(){}function x(){}function M(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0}function F(){}function B(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}I.prototype.destroy=function(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null},n=I,(be=C=C||{})[be.kMPEG1Audio=3]="kMPEG1Audio",be[be.kMPEG2Audio=4]="kMPEG2Audio",be[be.kPESPrivateData=6]="kPESPrivateData",be[be.kADTSAAC=15]="kADTSAAC",be[be.kLOASAAC=17]="kLOASAAC",be[be.kAC3=129]="kAC3",be[be.kID3=21]="kID3",be[be.kSCTE35=134]="kSCTE35",be[be.kH264=27]="kH264",be[be.kH265=36]="kH265",(be=L=L||{})[be.kUnspecified=0]="kUnspecified",be[be.kSliceNonIDR=1]="kSliceNonIDR",be[be.kSliceDPA=2]="kSliceDPA",be[be.kSliceDPB=3]="kSliceDPB",be[be.kSliceDPC=4]="kSliceDPC",be[be.kSliceIDR=5]="kSliceIDR",be[be.kSliceSEI=6]="kSliceSEI",be[be.kSliceSPS=7]="kSliceSPS",be[be.kSlicePPS=8]="kSlicePPS",be[be.kSliceAUD=9]="kSliceAUD",be[be.kEndOfSequence=10]="kEndOfSequence",be[be.kEndOfStream=11]="kEndOfStream",be[be.kFiller=12]="kFiller",be[be.kSPSExt=13]="kSPSExt",be[be.kReserved0=14]="kReserved0",j.prototype.findNextStartCodeOffset=function(e){for(var t=e,i=this.data_;;){if(t+3>=i.byteLength)return this.eof_flag_=!0,i.byteLength;var n=i[t+0]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3],r=i[t+0]<<16|i[t+1]<<8|i[t+2];if(1==n||1==r)return t;t++}},j.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var i=this.current_startcode_offset_,n=31&e[i+=1==(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])?4:3],r=(128&e[i])>>>7,a=this.findNextStartCodeOffset(i);this.current_startcode_offset_=a,n>=L.kReserved0||0!=r||(r=e.subarray(i,a),(t=new F).type=n,t.data=r)}return t};var O=j,U=(N.prototype.getData=function(){return this.data},N);function N(e,t,i){var n=8+e.byteLength+1+2+t.byteLength,r=!1,a=((66!==e[3]&&77!==e[3]&&88!==e[3]&&(r=!0,n+=4),n=this.data=new Uint8Array(n))[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225,e.byteLength),s=(n[6]=a>>>8,n[7]=255&a,8);n.set(e,8),n[s+=a]=1,e=t.byteLength,n[s+1]=e>>>8,n[s+2]=255&e,n.set(t,s+3),s+=3+e,r&&(n[s]=252|i.chroma_format_idc,n[s+1]=248|i.bit_depth_luma-8,n[s+2]=248|i.bit_depth_chroma-8,n[s+3]=0)}function j(e){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not find H264 startcode until payload end!")}function V(){}function G(e){var t=null,i=e.audio_object_type,n=e.audio_object_type,r=e.sampling_freq_index,a=(e=e.channel_config,0),s=navigator.userAgent.toLowerCase();-1!==s.indexOf("firefox")?a=6<=r?(n=5,t=new Array(4),r-3):(n=2,t=new Array(2),r):-1!==s.indexOf("android")?(n=2,t=new Array(2),a=r):(n=5,a=r,t=new Array(4),6<=r?a=r-3:1===e&&(n=2,t=new Array(2),a=r)),t[0]=n<<3,t[0]|=(15&r)>>>1,t[1]=(15&r)<<7,t[1]|=(15&e)<<3,5===n&&(t[1]|=(15&a)>>>1,t[2]=(1&a)<<7,t[2]|=8,t[3]=0),this.config=t,this.sampling_rate=K[r],this.channel_count=e,this.codec_mimetype="mp4a.40."+n,this.original_codec_mimetype="mp4a.40."+i}function H(){}function Y(){}var W,z,Q,K=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],J=(function(e,t){(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)}(Q=ee,be=z=V),Q.prototype=null===be?Object.create(be):(te.prototype=be.prototype,new te),ee),Z=($.prototype.findNextSyncwordOffset=function(e){for(var t=e,i=this.data_;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(4095==(i[t+0]<<8|i[t+1])>>>4)return t;t++}},$.prototype.readNextAACFrame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var i=this.current_syncword_offset_,n=(8&e[i+1])>>>3,r=(6&e[i+1])>>>1,a=1&e[i+1],s=(192&e[i+2])>>>6,o=(60&e[i+2])>>>2,l=(1&e[i+2])<<2|(192&e[i+3])>>>6,h=(3&e[i+3])<<11|e[i+4]<<3|(224&e[i+5])>>>5;if(e[i+6],i+h>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}h-=a=1==a?7:9,i+=a,a=this.findNextSyncwordOffset(i+h),this.current_syncword_offset_=a,0!=n&&1!=n||0!=r||(a=e.subarray(i,i+h),(t=new V).audio_object_type=1+s,t.sampling_freq_index=o,t.sampling_frequency=K[o],t.channel_config=l,t.data=a)}return t},$.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},$.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},$),q=(X.prototype.findNextSyncwordOffset=function(e){for(var t=e,i=this.data_;;){if(t+1>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(695==(i[t+0]<<3|i[t+1]>>>5))return t;t++}},X.prototype.getLATMValue=function(e){for(var t=e.readBits(2),i=0,n=0;n<=t;n++)i=(i<<=8)|e.readByte();return i},X.prototype.readNextAACFrame=function(e){for(var t=this.data_,i=null;null==i&&!this.eof_flag_;){var n=this.current_syncword_offset_,r=(31&t[n+1])<<8|t[n+2];if(n+3+r>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var s=new f(t.subarray(n+3,n+3+r)),o=null;if(s.readBool()){if(null==e){a.a.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(n+3+r),s.destroy();continue}o=e}else{var l=s.readBool();if(l&&s.readBool()){a.a.e(this.TAG,"audioMuxVersionA is Not Supported"),s.destroy();break}if(l&&this.getLATMValue(s),!s.readBool()){a.a.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),s.destroy();break}if(0!==s.readBits(6)){a.a.e(this.TAG,"more than 2 numSubFrames Not Supported"),s.destroy();break}if(0!==s.readBits(4)){a.a.e(this.TAG,"more than 2 numProgram Not Supported"),s.destroy();break}if(0!==s.readBits(3)){a.a.e(this.TAG,"more than 2 numLayer Not Supported"),s.destroy();break}var h=l?this.getLATMValue(s):0,u=s.readBits(5),d=(h-=5,s.readBits(4)),c=(h-=4,s.readBits(4));if(0!==(h-=4,s.readBits(3),0<(h-=3)&&s.readBits(h),h=s.readBits(3))){a.a.e(this.TAG,"frameLengthType = "+h+". Only frameLengthType = 0 Supported"),s.destroy();break}if(s.readByte(),h=s.readBool())if(l)this.getLATMValue(s);else for(;;){var p=s.readBool();if(s.readByte(),!p)break}s.readBool()&&s.readByte(),(o=new J).audio_object_type=u,o.sampling_freq_index=d,o.sampling_frequency=K[o.sampling_freq_index],o.channel_config=c,o.other_data_present=h}for(var m=0;;){var g=s.readByte();if(m+=g,255!==g)break}for(var _=new Uint8Array(m),y=0;y<m;y++)_[y]=s.readByte();(i=new J).audio_object_type=o.audio_object_type,i.sampling_freq_index=o.sampling_freq_index,i.sampling_frequency=K[o.sampling_freq_index],i.channel_config=o.channel_config,i.other_data_present=o.other_data_present,i.data=_,this.current_syncword_offset_=this.findNextSyncwordOffset(n+3+r)}return i},X.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},X.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},X);function X(e){this.TAG="AACLOASParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not found LOAS syncword until payload end")}function $(e){this.TAG="AACADTSParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not found ADTS syncword until payload end")}function ee(){return null!==z&&z.apply(this,arguments)||this}function te(){this.constructor=Q}function ie(){}function ne(e){var t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t),new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}function re(){}function ae(){}function se(){}function oe(e){var t=[e.sampling_rate_code<<6|e.bit_stream_identification<<1|e.bit_stream_mode>>2,(3&e.bit_stream_mode)<<6|e.channel_mode<<3|e.low_frequency_effects_channel_on<<2|e.frame_size_code>>4,e.frame_size_code<<4&224];this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.bit_stream_mode=e.bit_stream_mode,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"}(be=W=W||{})[be.kSpliceNull=0]="kSpliceNull",be[be.kSpliceSchedule=4]="kSpliceSchedule",be[be.kSpliceInsert=5]="kSpliceInsert",be[be.kTimeSignal=6]="kTimeSignal",be[be.kBandwidthReservation=7]="kBandwidthReservation",be[be.kPrivateCommand=255]="kPrivateCommand";var le,he=function(e){var t=e.readBool();return t?(e.readBits(6),{time_specified_flag:t,pts_time:4*e.readBits(31)+e.readBits(2)}):(e.readBits(7),{time_specified_flag:t})},ue=function(e){var t=e.readBool();return e.readBits(6),{auto_return:t,duration:4*e.readBits(31)+e.readBits(2)}},de=function(e){return{component_tag:e.readBits(8),utc_splice_time:e.readBits(32)}},ce=function(e){var t=e.readBits(8);return e.readBits(7),{component_tag:t,pts_offset:4*e.readBits(31)+e.readBits(2)}},fe=function(e){return{component_tag:e.readBits(8),ISO_code:String.fromCharCode(e.readBits(8),e.readBits(8),e.readBits(8)),Bit_Stream_Mode:e.readBits(3),Num_Channels:e.readBits(4),Full_Srvc_Audio:e.readBool()}},pe=((be=le=le||{})[be.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",be[be.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",be[be.kSliceCRA_NUT=21]="kSliceCRA_NUT",be[be.kSliceVPS=32]="kSliceVPS",be[be.kSliceSPS=33]="kSliceSPS",be[be.kSlicePPS=34]="kSlicePPS",be[be.kSliceAUD=35]="kSliceAUD",Le.prototype.findNextStartCodeOffset=function(e){for(var t=e,i=this.data_;;){if(t+3>=i.byteLength)return this.eof_flag_=!0,i.byteLength;var n=i[t+0]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3],r=i[t+0]<<16|i[t+1]<<8|i[t+2];if(1==n||1==r)return t;t++}},Le.prototype.readNextNaluPayload=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var i=this.current_startcode_offset_,n=e[i+=1==(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])?4:3]>>1&63,r=(128&e[i])>>>7,a=this.findNextStartCodeOffset(i);this.current_startcode_offset_=a,0==r&&(r=e.subarray(i,a),(t=new ie).type=n,t.data=r)}return t},Le),me=(Ce.prototype.getData=function(){return this.data},Ce),ge=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]],_e=(Te.prototype.findNextSyncwordOffset=function(e){for(var t=e,i=this.data_;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(2935==(i[t+0]<<8|i[t+1]))return t;t++}},Te.prototype.readNextAC3Frame=function(){for(var e=this.data_,t=null;null==t&&!this.eof_flag_;){var i,n=this.current_syncword_offset_,r=[48e3,44200,33e3][i=e[n+4]>>6],a=63&e[n+4];if(n+(i=2*ge[i][a])>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}var s=this.findNextSyncwordOffset(n+i),o=(this.current_syncword_offset_=s,s=e[n+5]>>3,7&e[n+5]),l=e[n+6]>>5,h=0,u=(!!(1&l)&&1!=l&&(h+=2),!!(4&l)&&(h+=2),2==l&&(h+=2),h=(e[n+6]<<8|e[n+7])>>12-h&1,[2,1,2,3,3,4,4,5][l]+h);(t=new se).sampling_frequency=r,t.channel_count=u,t.channel_mode=l,t.bit_stream_identification=s,t.low_frequency_effects_channel_on=h,t.bit_stream_mode=o,t.frame_size_code=a,t.data=e.subarray(n,n+i)}return t},Te.prototype.hasIncompleteData=function(){return this.has_last_incomplete_data},Te.prototype.getIncompleteData=function(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null},Te);ve=function(e,t){return(ve=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var ye,ve,Ae=function(){return(Ae=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ee=(function(e,t){function i(){this.constructor=e}ve(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(Se,ye=n),Se.prototype.destroy=function(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,ye.prototype.destroy.call(this)},Se.probe=function(e){var t=new Uint8Array(e),i=-1,n=188;if(t.byteLength<=3*n)return{needMoreData:!0};for(;-1===i;){for(var r=Math.min(1e3,t.byteLength-3*n),s=0;s<r;){if(71===t[s]&&71===t[s+n]&&71===t[s+2*n]){i=s;break}s++}if(-1===i)if(188===n)n=192;else{if(192!==n)break;n=204}}return-1===i?{match:!1}:(192===n&&4<=i?(a.a.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),i-=4):204===n&&a.a.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:n,sync_offset:i})},Se.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Se.prototype.resetMediaInfo=function(){this.media_info_=new o.a},Se.prototype.parseChunks=function(e,t){if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new u.a("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var i=0;for(this.first_parse_&&(this.first_parse_=!1,i=this.sync_offset_);i+this.ts_packet_size_<=e.byteLength;){var n=t+i;if(71!==(s=(192===this.ts_packet_size_&&(i+=4),f=new Uint8Array(e,i,188))[0])){a.a.e(this.TAG,"sync_byte = "+s+", not 0x47");break}var r,s=(64&f[1])>>>6,o=(f[1],(31&f[1])<<8|f[2]),l=(48&f[3])>>>4,h=15&f[3],d={},c=4;if(2==l||3==l){var f;if(5+(f=f[4])===188){i+=188,204===this.ts_packet_size_&&(i+=16);continue}0<f&&(d=this.parseAdaptationField(e,i+4,1+f)),c=5+f}1!=l&&3!=l||(0==o||o===this.current_pmt_pid_||null!=this.pmt_&&this.pmt_.pid_stream_type[o]===C.kSCTE35?this.handleSectionSlice(e,i+c,r=188-c,{pid:o,file_position:n,payload_unit_start_indicator:s,continuity_conunter:h,random_access_indicator:d.random_access_indicator}):null!=this.pmt_&&null!=this.pmt_.pid_stream_type[o]&&(r=188-c,f=this.pmt_.pid_stream_type[o],o!==this.pmt_.common_pids.h264&&o!==this.pmt_.common_pids.h265&&o!==this.pmt_.common_pids.adts_aac&&o!==this.pmt_.common_pids.loas_aac&&o!==this.pmt_.common_pids.ac3&&o!==this.pmt_.common_pids.opus&&o!==this.pmt_.common_pids.mp3&&!0!==this.pmt_.pes_private_data_pids[o]&&!0!==this.pmt_.timed_id3_pids[o]||this.handlePESSlice(e,i+c,r,{pid:o,stream_type:f,file_position:n,payload_unit_start_indicator:s,continuity_conunter:h,random_access_indicator:d.random_access_indicator}))),i+=188,204===this.ts_packet_size_&&(i+=16)}return this.dispatchAudioVideoMediaSegment(),i},Se.prototype.parseAdaptationField=function(e,t,i){return 0<(t=(e=new Uint8Array(e,t,i))[0])?183<t?(a.a.w(this.TAG,"Illegal adaptation_field_length: "+t),{}):{discontinuity_indicator:(128&e[1])>>>7,random_access_indicator:(64&e[1])>>>6,elementary_stream_priority_indicator:(32&e[1])>>>5}:{}},Se.prototype.handleSectionSlice=function(e,t,i,n){var r=new Uint8Array(e,t,i),a=this.section_slice_queues_[n.pid];if(n.payload_unit_start_indicator){var s,o=r[0];null!=a&&0!==a.total_length&&(s=new Uint8Array(e,t+1,Math.min(i,o)),a.slices.push(s),a.total_length+=s.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,n):this.clearSlices(a,n));for(var l=1+o;l<r.byteLength&&255!==r[l+0];){var h=(15&r[l+1])<<8|r[l+2];this.section_slice_queues_[n.pid]=new M,(a=this.section_slice_queues_[n.pid]).expected_length=3+h,a.file_position=n.file_position,a.random_access_indicator=n.random_access_indicator,s=new Uint8Array(e,t+l,Math.min(i-l,a.expected_length-a.total_length)),a.slices.push(s),a.total_length+=s.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,n):a.total_length>=a.expected_length&&this.clearSlices(a,n),l+=s.byteLength}}else null!=a&&0!==a.total_length&&(s=new Uint8Array(e,t,Math.min(i,a.expected_length-a.total_length)),a.slices.push(s),a.total_length+=s.byteLength,a.total_length===a.expected_length?this.emitSectionSlices(a,n):a.total_length>=a.expected_length&&this.clearSlices(a,n))},Se.prototype.handlePESSlice=function(e,t,i,n){if(t=(e=new Uint8Array(e,t,i))[0]<<16|e[1]<<8|e[2],e[3],i=e[4]<<8|e[5],n.payload_unit_start_indicator){if(1!=t)return void a.a.e(this.TAG,"handlePESSlice: packet_start_code_prefix should be 1 but with value "+t);(t=this.pes_slice_queues_[n.pid])&&(0===t.expected_length||t.expected_length===t.total_length?this.emitPESSlices(t,n):this.clearSlices(t,n)),this.pes_slice_queues_[n.pid]=new M,this.pes_slice_queues_[n.pid].file_position=n.file_position,this.pes_slice_queues_[n.pid].random_access_indicator=n.random_access_indicator}null!=this.pes_slice_queues_[n.pid]&&((t=this.pes_slice_queues_[n.pid]).slices.push(e),n.payload_unit_start_indicator&&(t.expected_length=0==i?0:6+i),t.total_length+=e.byteLength,0<t.expected_length&&t.expected_length===t.total_length?this.emitPESSlices(t,n):0<t.expected_length&&t.expected_length<t.total_length&&this.clearSlices(t,n))},Se.prototype.emitSectionSlices=function(e,t){for(var i=new Uint8Array(e.total_length),n=0,r=0;n<e.slices.length;n++){var a=e.slices[n];i.set(a,r),r+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var s=new x;s.pid=t.pid,s.data=i,s.file_position=e.file_position,s.random_access_indicator=e.random_access_indicator,this.parseSection(s)},Se.prototype.emitPESSlices=function(e,t){for(var i=new Uint8Array(e.total_length),n=0,r=0;n<e.slices.length;n++){var a=e.slices[n];i.set(a,r),r+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;var s=new D;s.pid=t.pid,s.data=i,s.stream_type=t.stream_type,s.file_position=e.file_position,s.random_access_indicator=e.random_access_indicator,this.parsePES(s)},Se.prototype.clearSlices=function(e,t){e.slices=[],e.expected_length=-1,e.total_length=0},Se.prototype.parseSection=function(e){var t=e.data;0===(e=e.pid)?this.parsePAT(t):e===this.current_pmt_pid_?this.parsePMT(t):null!=this.pmt_&&this.pmt_.scte_35_pids[e]&&this.parseSCTE35(t)},Se.prototype.parsePES=function(e){var t=e.data,i=t[0]<<16|t[1]<<8|t[2],n=t[3],r=t[4]<<8|t[5];if(1==i)if(188!==n&&190!==n&&191!==n&&240!==n&&241!==n&&255!==n&&242!==n&&248!==n){t[6];var s=(192&t[7])>>>6,o=t[8],l=void 0,h=void 0,u=(2!=s&&3!=s||(l=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,h=3==s?536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2:l),void(s=9+o));if(0!=r){if(r<3+o)return void a.a.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");u=r-3-o}else u=t.byteLength-s;var d=t.subarray(s,s+u);switch(e.stream_type){case C.kMPEG1Audio:case C.kMPEG2Audio:this.parseMP3Payload(d,l);break;case C.kPESPrivateData:this.pmt_.common_pids.opus===e.pid?this.parseOpusPayload(d,l):this.pmt_.common_pids.ac3===e.pid?this.parseAC3Payload(d,l):this.pmt_.smpte2038_pids[e.pid]?this.parseSMPTE2038MetadataPayload(d,l,h,e.pid,n):this.parsePESPrivateDataPayload(d,l,h,e.pid,n);break;case C.kADTSAAC:this.parseADTSAACPayload(d,l);break;case C.kLOASAAC:this.parseLOASAACPayload(d,l);break;case C.kAC3:this.parseAC3Payload(d,l);break;case C.kID3:this.parseTimedID3MetadataPayload(d,l,h,e.pid,n);break;case C.kH264:this.parseH264Payload(d,l,h,e.file_position,e.random_access_indicator);break;case C.kH265:this.parseH265Payload(d,l,h,e.file_position,e.random_access_indicator)}}else 188!==n&&191!==n&&240!==n&&241!==n&&255!==n&&242!==n&&248!==n||e.stream_type!==C.kPESPrivateData||(s=6,u=void 0,u=0!=r?r:t.byteLength-s,d=t.subarray(s,s+u),this.parsePESPrivateDataPayload(d,void 0,void 0,e.pid,n));else a.a.e(this.TAG,"parsePES: packet_start_code_prefix should be 1 but with value "+i)},Se.prototype.parsePAT=function(e){var t=e[0];if(0===t){var i=(15&e[1])<<8|e[2],n=(e[3],e[4],(62&e[5])>>>1),r=1&e[5],s=e[6],o=(e[7],null);if(1==r&&0===s)(o=new T).version_number=n;else if(null==(o=this.pat_))return;for(var l=i-5-4,h=-1,u=-1,d=8;d<8+l;d+=4){var c=e[d]<<8|e[d+1],f=(31&e[d+2])<<8|e[d+3];0==c?o.network_pid=f:(o.program_pmt_pid[c]=f,-1===h&&(h=c),-1===u&&(u=f))}1==r&&0===s&&(null==this.pat_&&a.a.v(this.TAG,"Parsed first PAT: "+JSON.stringify(o)),this.pat_=o,this.current_program_=h,this.current_pmt_pid_=u)}else a.a.e(this.TAG,"parsePAT: table_id "+t+" is not corresponded to PAT!")},Se.prototype.parsePMT=function(e){var t=e[0];if(2===t){var i=(15&e[1])<<8|e[2],n=e[3]<<8|e[4],r=(62&e[5])>>>1,s=1&e[5],o=e[6],l=(e[7],null);if(1==s&&0===o)(l=new P).program_number=n,l.version_number=r,this.program_pmt_map_[n]=l;else if(null==(l=this.program_pmt_map_[n]))return;e[8],e[9];for(var h=12+(s=(15&e[10])<<8|e[11]),u=i-9-s-4,d=h;d<h+u;){var c=e[d],f=(31&e[d+1])<<8|e[d+2],p=(15&e[d+3])<<8|e[d+4],m=(l.pid_stream_type[f]=c,l.common_pids.h264||l.common_pids.h265),g=l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.opus||l.common_pids.mp3;if(c!==C.kH264||m)if(c!==C.kH265||m)if(c!==C.kADTSAAC||g)if(c!==C.kLOASAAC||g)if(c!==C.kAC3||g)if(c!==C.kMPEG1Audio&&c!==C.kMPEG2Audio||g)if(c===C.kPESPrivateData){if(l.pes_private_data_pids[f]=!0,0<p){for(var _=d+5;_<d+5+p;){var y=e[_+0],v=e[_+1];if(5===y){var A=String.fromCharCode.apply(String,Array.from(e.subarray(_+2,_+2+v)));"VANC"===A?l.smpte2038_pids[f]=!0:"Opus"===A&&(l.common_pids.opus=f)}else if(127===y&&f===l.common_pids.opus){if(A=null,null==(A=128===e[_+2]?e[_+3]:A)){a.a.e(this.TAG,"Not Supported Opus channel count.");continue}var E={codec:"opus",meta:y={codec:"opus",channel_count:15&A?15&A:2,channel_config_code:A,sample_rate:48e3}};0==this.audio_init_segment_dispatched_?(this.audio_metadata_=y,this.dispatchAudioInitSegment(E)):this.detectAudioMetadataChange(E)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(E))}_+=2+v}m=e.subarray(d+5,d+5+p),this.dispatchPESPrivateDataDescriptor(f,c,m)}}else c===C.kID3?l.timed_id3_pids[f]=!0:c===C.kSCTE35&&(l.scte_35_pids[f]=!0);else l.common_pids.mp3=f;else l.common_pids.ac3=f;else l.common_pids.loas_aac=f;else l.common_pids.adts_aac=f;else l.common_pids.h265=f;else l.common_pids.h264=f;d+=5+p}n===this.current_program_&&(null==this.pmt_&&a.a.v(this.TAG,"Parsed first PMT: "+JSON.stringify(l)),((this.pmt_=l).common_pids.h264||l.common_pids.h265)&&(this.has_video_=!0),l.common_pids.adts_aac||l.common_pids.loas_aac||l.common_pids.ac3||l.common_pids.opus||l.common_pids.mp3)&&(this.has_audio_=!0)}else a.a.e(this.TAG,"parsePMT: table_id "+t+" is not corresponded to PMT!")},Se.prototype.parseSCTE35=function(e){var t;e=function(e){var t,i,n=new f(e),r=n.readBits(8),a=n.readBool(),s=n.readBool(),o=(n.readBits(2),n.readBits(12)),l=n.readBits(8),h=n.readBool(),u=n.readBits(6),d=4*n.readBits(31)+n.readBits(2),c=n.readBits(8),p=n.readBits(12),m=n.readBits(12),g=n.readBits(8),_=null;g===W.kSpliceNull?_={}:g===W.kSpliceSchedule?_=function(e){for(var t=e.readBits(8),i=[],n=0;n<t;n++)i.push(function(e){var t=e.readBits(32),i=e.readBool(),n=(e.readBits(7),{splice_event_id:t,splice_event_cancel_indicator:i});if(!i){if(n.out_of_network_indicator=e.readBool(),n.program_splice_flag=e.readBool(),n.duration_flag=e.readBool(),e.readBits(5),n.program_splice_flag)n.utc_splice_time=e.readBits(32);else{n.component_count=e.readBits(8),n.components=[];for(var r=0;r<n.component_count;r++)n.components.push(de(e))}n.duration_flag&&(n.break_duration=ue(e)),n.unique_program_id=e.readBits(16),n.avail_num=e.readBits(8),n.avails_expected=e.readBits(8)}return n}(e));return{splice_count:t,events:i}}(n):g===W.kSpliceInsert?_=function(e){var t,i,n,r=e.readBits(32),a=e.readBool(),s=(e.readBits(7),{splice_event_id:r,splice_event_cancel_indicator:a});if(!a){if(s.out_of_network_indicator=e.readBool(),s.program_splice_flag=e.readBool(),s.duration_flag=e.readBool(),s.splice_immediate_flag=e.readBool(),e.readBits(4),s.program_splice_flag&&!s.splice_immediate_flag&&(s.splice_time=he(e)),!s.program_splice_flag){s.component_count=e.readBits(8),s.components=[];for(var o=0;o<s.component_count;o++)s.components.push((t=s.splice_immediate_flag,n=(i=e).readBits(8),t?{component_tag:n}:{component_tag:n,splice_time:he(i)}))}s.duration_flag&&(s.break_duration=ue(e)),s.unique_program_id=e.readBits(16),s.avail_num=e.readBits(8),s.avails_expected=e.readBits(8)}return s}(n):g===W.kTimeSignal?_={splice_time:he(n)}:g===W.kBandwidthReservation?_={}:g===W.kPrivateCommand?_=function(e,t){for(var i=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8)),n=new Uint8Array(e-4),r=0;r<e-4;r++)n[r]=t.readBits(8);return{identifier:i,private_data:n.buffer}}(m,n):n.readBits(8*m);for(var y,v=[],A=n.readBits(16),E=0;E<A;){var b=n.readBits(8),w=n.readBits(8),S=String.fromCharCode(n.readBits(8),n.readBits(8),n.readBits(8),n.readBits(8));0===b?v.push({descriptor_tag:b,descriptor_length:w,identifier:S,provider_avail_id:n.readBits(32)}):1===b?v.push(function(e,t,i,n){var r=n.readBits(8),a=n.readBits(3);n.readBits(5);for(var s="",o=0;o<a;o++)s+=String.fromCharCode(n.readBits(8));return{descriptor_tag:e,descriptor_length:t,identifier:i,preroll:r,dtmf_count:a,DTMF_char:s}}(b,w,S,n)):2===b?v.push(function(e,t,i,n){var r=n.readBits(32),a=n.readBool(),s=(n.readBits(7),{descriptor_tag:e,descriptor_length:t,identifier:i,segmentation_event_id:r,segmentation_event_cancel_indicator:a});if(!a){if(s.program_segmentation_flag=n.readBool(),s.segmentation_duration_flag=n.readBool(),s.delivery_not_restricted_flag=n.readBool(),s.delivery_not_restricted_flag?n.readBits(5):(s.web_delivery_allowed_flag=n.readBool(),s.no_regional_blackout_flag=n.readBool(),s.archive_allowed_flag=n.readBool(),s.device_restrictions=n.readBits(2)),!s.program_segmentation_flag){s.component_count=n.readBits(8),s.components=[];for(var o=0;o<s.component_count;o++)s.components.push(ce(n))}s.segmentation_duration_flag&&(s.segmentation_duration=n.readBits(40)),s.segmentation_upid_type=n.readBits(8),s.segmentation_upid_length=n.readBits(8);var l=new Uint8Array(s.segmentation_upid_length);for(o=0;o<s.segmentation_upid_length;o++)l[o]=n.readBits(8);s.segmentation_upid=l.buffer,s.segmentation_type_id=n.readBits(8),s.segment_num=n.readBits(8),s.segments_expected=n.readBits(8),52!==s.segmentation_type_id&&54!==s.segmentation_type_id&&56!==s.segmentation_type_id&&58!==s.segmentation_type_id||(s.sub_segment_num=n.readBits(8),s.sub_segments_expected=n.readBits(8))}return s}(b,w,S,n)):3===b?v.push({descriptor_tag:b,descriptor_length:w,identifier:S,TAI_seconds:(y=n).readBits(48),TAI_ns:y.readBits(32),UTC_offset:y.readBits(16)}):4===b?v.push(function(e,t,i,n){for(var r=n.readBits(4),a=[],s=0;s<r;s++)a.push(fe(n));return{descriptor_tag:e,descriptor_length:t,identifier:i,audio_count:r,components:a}}(b,w,S,n)):n.readBits(8*(w-4)),E+=2+w}return r={table_id:r,section_syntax_indicator:a,private_indicator:s,section_length:o,protocol_version:l,encrypted_packet:h,encryption_algorithm:u,pts_adjustment:d,cw_index:c,tier:p,splice_command_length:m,splice_command_type:g,splice_command:_,descriptor_loop_length:A,splice_descriptors:v,E_CRC32:h?n.readBits(32):void 0,CRC32:n.readBits(32)},g===W.kSpliceInsert?(a=_).splice_event_cancel_indicator?{splice_command_type:g,detail:r,data:e}:a.program_splice_flag&&!a.splice_immediate_flag?(t=a.duration_flag?a.break_duration.auto_return:void 0,i=a.duration_flag?a.break_duration.duration/90:void 0,a.splice_time.time_specified_flag?{splice_command_type:g,pts:(d+a.splice_time.pts_time)%Math.pow(2,33),auto_return:t,duraiton:i,detail:r,data:e}:{splice_command_type:g,auto_return:t,duraiton:i,detail:r,data:e}):{splice_command_type:g,auto_return:t=a.duration_flag?a.break_duration.auto_return:void 0,duraiton:i=a.duration_flag?a.break_duration.duration/90:void 0,detail:r,data:e}:g===W.kTimeSignal&&(s=_).splice_time.time_specified_flag?{splice_command_type:g,pts:(d+s.splice_time.pts_time)%Math.pow(2,33),detail:r,data:e}:{splice_command_type:g,detail:r,data:e}}(e),null!=e.pts?(t=Math.floor(e.pts/this.timescale_),e.pts=t):e.nearest_pts=this.aac_last_sample_pts_,this.onSCTE35Metadata&&this.onSCTE35Metadata(e)},Se.prototype.parseH264Payload=function(e,t,i,n,r){for(var s=new O(e),o=[],l=0,h=!1;null!=(u=s.readNextNaluPayload());){var u,d=new B(u);d.type===L.kSliceSPS?(u=p.parseSPS(u.data),this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(d,u)&&(a.a.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:d,pps:void 0,details:u}):(this.video_metadata_.sps=d,this.video_metadata_.details=u)):d.type===L.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_.pps=d,this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(d.type===L.kSliceIDR||d.type===L.kSliceNonIDR&&1===r)&&(h=!0),this.video_init_segment_dispatched_&&(o.push(d),l+=d.data.byteLength)}e=Math.floor(t/this.timescale_),t=Math.floor(i/this.timescale_),o.length&&((i=this.video_track_).samples.push({units:o,length:l,isKeyframe:h,dts:t,pts:e,cts:e-t,file_position:n}),i.length+=l)},Se.prototype.parseH265Payload=function(e,t,i,n,r){for(var s,o=new pe(e),l=[],h=0,u=!1;null!=(s=o.readNextNaluPayload());){var d,c=new ne(s);c.type===le.kSliceVPS?this.video_init_segment_dispatched_||(d=g.parseVPS(s.data),this.video_metadata_.vps=c,this.video_metadata_.details=Ae(Ae({},this.video_metadata_.details),d)):c.type===le.kSliceSPS?(d=g.parseSPS(s.data),this.video_init_segment_dispatched_?!0===this.detectVideoMetadataChange(c,d)&&(a.a.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:c,pps:void 0,details:d}):(this.video_metadata_.sps=c,this.video_metadata_.details=Ae(Ae({},this.video_metadata_.details),d))):c.type===le.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(d=g.parsePPS(s.data),this.video_metadata_.pps=c,this.video_metadata_.details=Ae(Ae({},this.video_metadata_.details),d),this.video_metadata_.vps&&this.video_metadata_.sps&&this.video_metadata_.pps&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):c.type!==le.kSliceIDR_W_RADL&&c.type!==le.kSliceIDR_N_LP&&c.type!==le.kSliceCRA_NUT||(u=!0),this.video_init_segment_dispatched_&&(l.push(c),h+=c.data.byteLength)}e=Math.floor(t/this.timescale_),t=Math.floor(i/this.timescale_),l.length&&((i=this.video_track_).samples.push({units:l,length:h,isKeyframe:u,dts:t,pts:e,cts:e-t,file_position:n}),i.length+=h)},Se.prototype.detectVideoMetadataChange=function(e,t){var i,n;return t.codec_mimetype!==this.video_metadata_.details.codec_mimetype?(a.a.v(this.TAG,"Video: Codec mimeType changed from "+this.video_metadata_.details.codec_mimetype+" to "+t.codec_mimetype),!0):t.codec_size.width!==this.video_metadata_.details.codec_size.width||t.codec_size.height!==this.video_metadata_.details.codec_size.height?(i=this.video_metadata_.details.codec_size,n=t.codec_size,a.a.v(this.TAG,"Video: Coded Resolution changed from "+i.width+"x"+i.height+" to "+n.width+"x"+n.height),!0):t.present_size.width!==this.video_metadata_.details.present_size.width&&(a.a.v(this.TAG,"Video: Present resolution width changed from "+this.video_metadata_.details.present_size.width+" to "+t.present_size.width),!0)},Se.prototype.isInitSegmentDispatched=function(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_},Se.prototype.dispatchVideoInitSegment=function(){var e,t,i=this.video_metadata_.details,n={type:"video"},r=(n.id=this.video_track_.id,n.timescale=1e3,n.duration=this.duration_,n.codecWidth=i.codec_size.width,n.codecHeight=i.codec_size.height,n.presentWidth=i.present_size.width,n.presentHeight=i.present_size.height,n.profile=i.profile_string,n.level=i.level_string,n.bitDepth=i.bit_depth,n.chromaFormat=i.chroma_format,n.sarRatio=i.sar_ratio,n.frameRate=i.frame_rate,n.frameRate.fps_den),s=n.frameRate.fps_num;(n.refSampleDuration=r/s*1e3,n.codec=i.codec_mimetype,this.video_metadata_.vps?(r=this.video_metadata_.vps.data.subarray(4),e=this.video_metadata_.sps.data.subarray(4),t=this.video_metadata_.pps.data.subarray(4),s=new me(r,e,t,i),n.hvcc=s.getData(),0==this.video_init_segment_dispatched_&&a.a.v(this.TAG,"Generated first HEVCDecoderConfigurationRecord for mimeType: "+n.codec)):(e=this.video_metadata_.sps.data.subarray(4),t=this.video_metadata_.pps.data.subarray(4),r=new U(e,t,i),n.avcc=r.getData(),0==this.video_init_segment_dispatched_&&a.a.v(this.TAG,"Generated first AVCDecoderConfigurationRecord for mimeType: "+n.codec)),this.onTrackMetadata("video",n),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1,s=this.media_info_).hasVideo=!0,s.width=n.codecWidth,s.height=n.codecHeight,s.fps=n.frameRate.fps,s.profile=n.profile,s.level=n.level,s.refFrames=i.ref_frames,s.chromaFormat=i.chroma_format_string,s.sarNum=n.sarRatio.width,s.sarDen=n.sarRatio.height,s.videoCodec=n.codec,s.hasAudio&&s.audioCodec?s.mimeType='video/mp2t; codecs="'+s.videoCodec+","+s.audioCodec+'"':s.mimeType='video/mp2t; codecs="'+s.videoCodec+'"',s.isComplete()&&this.onMediaInfo(s)},Se.prototype.dispatchVideoMediaSegment=function(){this.isInitSegmentDispatched()&&this.video_track_.length&&this.onDataAvailable(null,this.video_track_)},Se.prototype.dispatchAudioMediaSegment=function(){this.isInitSegmentDispatched()&&this.audio_track_.length&&this.onDataAvailable(this.audio_track_,null)},Se.prototype.dispatchAudioVideoMediaSegment=function(){this.isInitSegmentDispatched()&&(this.audio_track_.length||this.video_track_.length)&&this.onDataAvailable(this.audio_track_,this.video_track_)},Se.prototype.parseADTSAACPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var i,n,r;if(this.aac_last_incomplete_data_&&((r=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength)).set(this.aac_last_incomplete_data_,0),r.set(e,this.aac_last_incomplete_data_.byteLength),e=r),null!=t&&(i=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)n=1024/this.audio_metadata_.sampling_frequency*1e3,i=this.aac_last_sample_pts_+n;else if(null==t)return void a.a.w(this.TAG,"AAC: Unknown pts");this.aac_last_incomplete_data_&&this.aac_last_sample_pts_&&(n=1024/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+n,1<Math.abs(r-i))&&(a.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+r+"ms, PES pts: "+i+"ms"),i=r)}for(var s,o,l=new Z(e),h=i;null!=(o=l.readNextAACFrame());){n=1024/o.sampling_frequency*1e3;var u={codec:"aac",data:o};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:o.audio_object_type,sampling_freq_index:o.sampling_freq_index,sampling_frequency:o.sampling_frequency,channel_config:o.channel_config},this.dispatchAudioInitSegment(u)):this.detectAudioMetadataChange(u)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(u)),s=h,u=Math.floor(h),u={unit:o.data,length:o.data.byteLength,pts:u,dts:u},this.audio_track_.samples.push(u),this.audio_track_.length+=o.data.byteLength,h+=n}l.hasIncompleteData()&&(this.aac_last_incomplete_data_=l.getIncompleteData()),s&&(this.aac_last_sample_pts_=s)}},Se.prototype.parseLOASAACPayload=function(e,t){var i,n,r;if(!this.has_video_||this.video_init_segment_dispatched_){if(this.aac_last_incomplete_data_&&((r=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength)).set(this.aac_last_incomplete_data_,0),r.set(e,this.aac_last_incomplete_data_.byteLength),e=r),null!=t&&(i=t/this.timescale_),"aac"===this.audio_metadata_.codec){if(null==t&&null!=this.aac_last_sample_pts_)n=1024/this.audio_metadata_.sampling_frequency*1e3,i=this.aac_last_sample_pts_+n;else if(null==t)return void a.a.w(this.TAG,"AAC: Unknown pts");this.aac_last_incomplete_data_&&this.aac_last_sample_pts_&&(n=1024/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+n,1<Math.abs(r-i))&&(a.a.w(this.TAG,"AAC: Detected pts overlapped, expected: "+r+"ms, PES pts: "+i+"ms"),i=r)}for(var s,o,l=new q(e),h=i;null!=(o=l.readNextAACFrame(null!=(o=this.loas_previous_frame)?o:void 0));){n=1024/(this.loas_previous_frame=o).sampling_frequency*1e3;var u={codec:"aac",data:o};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"aac",audio_object_type:o.audio_object_type,sampling_freq_index:o.sampling_freq_index,sampling_frequency:o.sampling_frequency,channel_config:o.channel_config},this.dispatchAudioInitSegment(u)):this.detectAudioMetadataChange(u)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(u)),s=h,u=Math.floor(h),u={unit:o.data,length:o.data.byteLength,pts:u,dts:u},this.audio_track_.samples.push(u),this.audio_track_.length+=o.data.byteLength,h+=n}l.hasIncompleteData()&&(this.aac_last_incomplete_data_=l.getIncompleteData()),s&&(this.aac_last_sample_pts_=s)}},Se.prototype.parseAC3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var i;if(null!=t&&(i=t/this.timescale_),"ac-3"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)l=1536/this.audio_metadata_.sampling_frequency*1e3,i=this.aac_last_sample_pts_+l;else if(null==t)return void a.a.w(this.TAG,"Opus: Unknown pts");for(var n,r,s=new _e(e),o=i;null!=(r=s.readNextAC3Frame());){var l=1536/r.sampling_frequency*1e3,h={codec:"ac-3",data:r};0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"ac-3",sampling_frequency:r.sampling_frequency,bit_stream_identification:r.bit_stream_identification,bit_stream_mode:r.bit_stream_mode,low_frequency_effects_channel_on:r.low_frequency_effects_channel_on,channel_mode:r.channel_mode},this.dispatchAudioInitSegment(h)):this.detectAudioMetadataChange(h)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(h)),n=o,h=Math.floor(o),h={unit:r.data,length:r.data.byteLength,pts:h,dts:h},this.audio_track_.samples.push(h),this.audio_track_.length+=r.data.byteLength,o+=l}n&&(this.aac_last_sample_pts_=n)}},Se.prototype.parseOpusPayload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var i;if(null!=t&&(i=t/this.timescale_),"opus"===this.audio_metadata_.codec)if(null==t&&null!=this.aac_last_sample_pts_)i=this.aac_last_sample_pts_+(s=20);else if(null==t)return void a.a.w(this.TAG,"Opus: Unknown pts");for(var n=i,r=0;r<e.length;){for(var s=20,o=!!(16&e[r+1]),l=!!(8&e[r+1]),h=r+2,u=0;255===e[h];)u+=255,h+=1;u+=e[h],h=(h+=1)+(o?2:0)+(l?2:0);var d=n;o=Math.floor(n),o={unit:l=e.slice(h,h+u),length:l.byteLength,pts:o,dts:o},this.audio_track_.samples.push(o),this.audio_track_.length+=l.byteLength,n+=s,r=h+u}d&&(this.aac_last_sample_pts_=d)}},Se.prototype.parseMP3Payload=function(e,t){if(!this.has_video_||this.video_init_segment_dispatched_){var i=e[1]>>>3&3,n=(6&e[1])>>1,r=(e[2],(12&e[2])>>>2),a=3&~(e[3]>>>6)?2:1,s=0,o=34;switch(i){case 0:s=[11025,12e3,8e3,0][r];break;case 2:s=[22050,24e3,16e3,0][r];break;case 3:s=[44100,48e3,32e3,0][r]}switch(n){case 1:o=34;break;case 2:o=33;break;case 3:o=32}(i=new ae).object_type=o,i.sample_rate=s,i.channel_count=a,i.data=e,n={codec:"mp3",data:i},0==this.audio_init_segment_dispatched_?(this.audio_metadata_={codec:"mp3",object_type:o,sample_rate:s,channel_count:a},this.dispatchAudioInitSegment(n)):this.detectAudioMetadataChange(n)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(n)),i={unit:e,length:e.byteLength,pts:t/this.timescale_,dts:t/this.timescale_},this.audio_track_.samples.push(i),this.audio_track_.length+=e.byteLength}},Se.prototype.detectAudioMetadataChange=function(e){if(e.codec!==this.audio_metadata_.codec)return a.a.v(this.TAG,"Audio: Audio Codecs changed from "+this.audio_metadata_.codec+" to "+e.codec),!0;if("aac"===e.codec&&"aac"===this.audio_metadata_.codec){if((t=e.data).audio_object_type!==this.audio_metadata_.audio_object_type)return a.a.v(this.TAG,"AAC: AudioObjectType changed from "+this.audio_metadata_.audio_object_type+" to "+t.audio_object_type),!0;if(t.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return a.a.v(this.TAG,"AAC: SamplingFrequencyIndex changed from "+this.audio_metadata_.sampling_freq_index+" to "+t.sampling_freq_index),!0;if(t.channel_config!==this.audio_metadata_.channel_config)return a.a.v(this.TAG,"AAC: Channel configuration changed from "+this.audio_metadata_.channel_config+" to "+t.channel_config),!0}else if("ac-3"===e.codec&&"ac-3"===this.audio_metadata_.codec){var t;if((t=e.data).sampling_frequency!==this.audio_metadata_.sampling_frequency)return a.a.v(this.TAG,"AC3: Sampling Frequency changed from "+this.audio_metadata_.sampling_frequency+" to "+t.sampling_frequency),!0;if(t.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return a.a.v(this.TAG,"AC3: Bit Stream Identification changed from "+this.audio_metadata_.bit_stream_identification+" to "+t.bit_stream_identification),!0;if(t.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return a.a.v(this.TAG,"AC3: BitStream Mode changed from "+this.audio_metadata_.bit_stream_mode+" to "+t.bit_stream_mode),!0;if(t.channel_mode!==this.audio_metadata_.channel_mode)return a.a.v(this.TAG,"AC3: Channel Mode changed from "+this.audio_metadata_.channel_mode+" to "+t.channel_mode),!0;if(t.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return a.a.v(this.TAG,"AC3: Low Frequency Effects Channel On changed from "+this.audio_metadata_.low_frequency_effects_channel_on+" to "+t.low_frequency_effects_channel_on),!0}else if("opus"===e.codec&&"opus"===this.audio_metadata_.codec){if((i=e.meta).sample_rate!==this.audio_metadata_.sample_rate)return a.a.v(this.TAG,"Opus: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+i.sample_rate),!0;if(i.channel_count!==this.audio_metadata_.channel_count)return a.a.v(this.TAG,"Opus: Channel count changed from "+this.audio_metadata_.channel_count+" to "+i.channel_count),!0}else if("mp3"===e.codec&&"mp3"===this.audio_metadata_.codec){var i;if((i=e.data).object_type!==this.audio_metadata_.object_type)return a.a.v(this.TAG,"MP3: AudioObjectType changed from "+this.audio_metadata_.object_type+" to "+i.object_type),!0;if(i.sample_rate!==this.audio_metadata_.sample_rate)return a.a.v(this.TAG,"MP3: SamplingFrequencyIndex changed from "+this.audio_metadata_.sample_rate+" to "+i.sample_rate),!0;if(i.channel_count!==this.audio_metadata_.channel_count)return a.a.v(this.TAG,"MP3: Channel count changed from "+this.audio_metadata_.channel_count+" to "+i.channel_count),!0}return!1},Se.prototype.dispatchAudioInitSegment=function(e){var t={type:"audio"},i=(t.id=this.audio_track_.id,t.timescale=1e3,t.duration=this.duration_,"aac"===this.audio_metadata_.codec?(i=new G(i="aac"===e.codec?e.data:null),t.audioSampleRate=i.sampling_rate,t.channelCount=i.channel_count,t.codec=i.codec_mimetype,t.originalCodec=i.original_codec_mimetype,t.config=i.config,t.refSampleDuration=1024/t.audioSampleRate*t.timescale):"ac-3"===this.audio_metadata_.codec?(e=new oe(i="ac-3"===e.codec?e.data:null),t.audioSampleRate=e.sampling_rate,t.channelCount=e.channel_count,t.codec=e.codec_mimetype,t.originalCodec=e.original_codec_mimetype,t.config=e.config,t.refSampleDuration=1536/t.audioSampleRate*t.timescale):"opus"===this.audio_metadata_.codec?(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.channelConfigCode=this.audio_metadata_.channel_config_code,t.codec="opus",t.originalCodec="opus",t.config=void 0,t.refSampleDuration=20):"mp3"===this.audio_metadata_.codec&&(t.audioSampleRate=this.audio_metadata_.sample_rate,t.channelCount=this.audio_metadata_.channel_count,t.codec="mp3",t.originalCodec="mp3",t.config=void 0),0==this.audio_init_segment_dispatched_&&a.a.v(this.TAG,"Generated first AudioSpecificConfig for mimeType: "+t.codec),this.onTrackMetadata("audio",t),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1,this.media_info_);i.hasAudio=!0,i.audioCodec=t.originalCodec,i.audioSampleRate=t.audioSampleRate,i.audioChannelCount=t.channelCount,i.hasVideo&&i.videoCodec?i.mimeType='video/mp2t; codecs="'+i.videoCodec+","+i.audioCodec+'"':i.mimeType='video/mp2t; codecs="'+i.audioCodec+'"',i.isComplete()&&this.onMediaInfo(i)},Se.prototype.dispatchPESPrivateDataDescriptor=function(e,t,i){var n=new Y;n.pid=e,n.stream_type=t,n.descriptor=i,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(n)},Se.prototype.parsePESPrivateDataPayload=function(e,t,i,n,r){var a=new H;a.pid=n,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t?(n=Math.floor(t/this.timescale_),a.pts=n):a.nearest_pts=this.aac_last_sample_pts_,null!=i&&(r=Math.floor(i/this.timescale_),a.dts=r),this.onPESPrivateData&&this.onPESPrivateData(a)},Se.prototype.parseTimedID3MetadataPayload=function(e,t,i,n,r){var a=new H;a.pid=n,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t&&(n=Math.floor(t/this.timescale_),a.pts=n),null!=i&&(r=Math.floor(i/this.timescale_),a.dts=r),this.onTimedID3Metadata&&this.onTimedID3Metadata(a)},Se.prototype.parseSMPTE2038MetadataPayload=function(e,t,i,n,r){var a=new re;a.pid=n,a.stream_id=r,a.len=e.byteLength,a.data=e,null!=t&&(n=Math.floor(t/this.timescale_),a.pts=n),a.nearest_pts=this.aac_last_sample_pts_,null!=i&&(r=Math.floor(i/this.timescale_),a.dts=r),a.ancillaries=function(){for(var t=new f(e),i=0,n=[];i+=6,0===t.readBits(6);){var r=t.readBool(),a=(i+=1,t.readBits(11)),s=(i+=11,t.readBits(12)),o=(i+=12,255&t.readBits(10)),l=(i+=10,255&t.readBits(10)),h=(i+=10,255&t.readBits(10));i+=10;for(var u=new Uint8Array(h),d=0;d<h;d++){var c=255&t.readBits(10);i+=10,u[d]=c}t.readBits(10),i+=10;var p="User Defined";65==o?7==l&&(p="SCTE-104"):95==o?220==l?p="ARIB STD-B37 (1SEG)":221==l?p="ARIB STD-B37 (ANALOG)":222==l?p="ARIB STD-B37 (SD)":223==l&&(p="ARIB STD-B37 (HD)"):97==o&&(1==l?p="EIA-708":2==l&&(p="EIA-608")),n.push({yc_indicator:r,line_number:a,horizontal_offset:s,did:o,sdid:l,user_data:u,description:p,information:{}}),t.readBits(8-(i-Math.floor(i/8))%8),i+=(8-(i-Math.floor(i/8)))%8}return t.destroy(),t=null,n}(),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(a)},Se),be=(we.init=function(){for(var e in we.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[]})we.types.hasOwnProperty(e)&&(we.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=we.constants={};t.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),t.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),t.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSC=t.STCO=t.STTS,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),t.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},we.box=function(e){for(var t=8,i=null,n=Array.prototype.slice.call(arguments,1),r=n.length,a=0;a<r;a++)t+=n[a].byteLength;(i=new Uint8Array(t))[0]=t>>>24&255,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i.set(e,4);var s=8;for(a=0;a<r;a++)i.set(n[a],s),s+=n[a].byteLength;return i},we.generateInitSegment=function(e){var t=we.box(we.types.ftyp,we.constants.FTYP),i=(e=we.moov(e),new Uint8Array(t.byteLength+e.byteLength));return i.set(t,0),i.set(e,t.byteLength),i},we.moov=function(e){var t=we.mvhd(e.timescale,e.duration),i=we.trak(e);return e=we.mvex(e),we.box(we.types.moov,t,i,e)},we.mvhd=function(e,t){return we.box(we.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},we.trak=function(e){return we.box(we.types.trak,we.tkhd(e),we.mdia(e))},we.tkhd=function(e){var t=e.id,i=e.duration,n=e.presentWidth;return e=e.presentHeight,we.box(we.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>>8&255,255&n,0,0,e>>>8&255,255&e,0,0]))},we.mdia=function(e){return we.box(we.types.mdia,we.mdhd(e),we.hdlr(e),we.minf(e))},we.mdhd=function(e){var t=e.timescale;return e=e.duration,we.box(we.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e,85,196,0,0]))},we.hdlr=function(e){return e="audio"===e.type?we.constants.HDLR_AUDIO:we.constants.HDLR_VIDEO,we.box(we.types.hdlr,e)},we.minf=function(e){var t="audio"===e.type?we.box(we.types.smhd,we.constants.SMHD):we.box(we.types.vmhd,we.constants.VMHD);return we.box(we.types.minf,t,we.dinf(),we.stbl(e))},we.dinf=function(){return we.box(we.types.dinf,we.box(we.types.dref,we.constants.DREF))},we.stbl=function(e){return we.box(we.types.stbl,we.stsd(e),we.box(we.types.stts,we.constants.STTS),we.box(we.types.stsc,we.constants.STSC),we.box(we.types.stsz,we.constants.STSZ),we.box(we.types.stco,we.constants.STCO))},we.stsd=function(e){return"audio"===e.type?"mp3"===e.codec?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.mp3(e)):"ac-3"===e.codec?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.ac3(e)):"opus"===e.codec?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.Opus(e)):we.box(we.types.stsd,we.constants.STSD_PREFIX,we.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?we.box(we.types.stsd,we.constants.STSD_PREFIX,we.hvc1(e)):we.box(we.types.stsd,we.constants.STSD_PREFIX,we.avc1(e))},we.mp3=function(e){var t=e.channelCount;return e=e.audioSampleRate,t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>>8&255,255&e,0,0]),we.box(we.types[".mp3"],t)},we.mp4a=function(e){var t=e.channelCount,i=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]),we.box(we.types.mp4a,t,we.esds(e))},we.ac3=function(e){var t=e.channelCount,i=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]),we.box(we.types["ac-3"],t,we.box(we.types.dac3,new Uint8Array(e.config)))},we.esds=function(e){var t=(e=e.config||[]).length;return t=new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e).concat([6,1,2])),we.box(we.types.esds,t)},we.Opus=function(e){var t=e.channelCount,i=e.audioSampleRate;return t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]),we.box(we.types.Opus,t,we.dOps(e))},we.dOps=function(e){var t=e.channelCount,i=e.channelConfigCode,n=e.audioSampleRate;if(!e.config){var r=[];switch(i){case 1:case 2:r=[0];break;case 0:r=[255,1,1,0,1];break;case 128:r=[255,2,0,0,1];break;case 3:r=[1,2,1,0,2,1];break;case 4:r=[1,2,2,0,1,2,3];break;case 5:r=[1,3,2,0,4,1,2,3];break;case 6:r=[1,4,2,0,4,1,2,3,5];break;case 7:r=[1,4,2,0,4,1,2,3,5,6];break;case 8:r=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:r=[1,1,2,0,1];break;case 131:r=[1,1,3,0,1,2];break;case 132:r=[1,1,4,0,1,2,3];break;case 133:r=[1,1,5,0,1,2,3,4];break;case 134:r=[1,1,6,0,1,2,3,4,5];break;case 135:r=[1,1,7,0,1,2,3,4,5,6];break;case 136:r=[1,1,8,0,1,2,3,4,5,6,7]}var a=new Uint8Array(function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,r++)n[r]=a[s];return n}([0,t,0,0,n>>>24&255,n>>>17&255,n>>>8&255,n>>>0&255,0,0],r))}return we.box(we.types.dOps,a)},we.avc1=function(e){var t=e.avcc,i=e.codecWidth;return e=e.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),we.box(we.types.avc1,i,we.box(we.types.avcC,t))},we.hvc1=function(e){var t=e.hvcc,i=e.codecWidth;return e=e.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,e>>>8&255,255&e,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),we.box(we.types.hvc1,i,we.box(we.types.hvcC,t))},we.mvex=function(e){return we.box(we.types.mvex,we.trex(e))},we.trex=function(e){return e=e.id,e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]),we.box(we.types.trex,e)},we.moof=function(e,t){return we.box(we.types.moof,we.mfhd(e.sequenceNumber),we.traf(e,t))},we.mfhd=function(e){return e=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]),we.box(we.types.mfhd,e)},we.traf=function(e,t){var i=e.id,n=(i=we.box(we.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),t=we.box(we.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),we.sdtp(e));return e=we.trun(e,n.byteLength+16+16+8+16+8+8),we.box(we.types.traf,i,t,e,n)},we.sdtp=function(e){for(var t=e.samples||[],i=t.length,n=new Uint8Array(4+i),r=0;r<i;r++){var a=t[r].flags;n[r+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return we.box(we.types.sdtp,n)},we.trun=function(e,t){var i=e.samples||[],n=i.length,r=(e=12+16*n,new Uint8Array(e));r.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,(t+=8+e)>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(var a=0;a<n;a++){var s=i[a].duration,o=i[a].size,l=i[a].flags,h=i[a].cts;r.set([s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o,l.isLeading<<2|l.dependsOn,l.isDependedOn<<6|l.hasRedundancy<<4|l.isNonSync,0,0,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*a)}return we.box(we.types.trun,r)},we.mdat=function(e){return we.box(we.types.mdat,e)},we);function we(){}function Se(e,t){var i=ye.call(this)||this;return i.TAG="TSDemuxer",i.first_parse_=!0,i.media_info_=new o.a,i.timescale_=90,i.duration_=0,i.current_pmt_pid_=-1,i.program_pmt_map_={},i.pes_slice_queues_={},i.section_slice_queues_={},i.video_metadata_={vps:void 0,sps:void 0,pps:void 0,details:void 0},i.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},i.aac_last_sample_pts_=void 0,i.aac_last_incomplete_data_=null,i.has_video_=!1,i.has_audio_=!1,i.video_init_segment_dispatched_=!1,i.audio_init_segment_dispatched_=!1,i.video_metadata_changed_=!1,i.audio_metadata_changed_=!1,i.loas_previous_frame=null,i.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},i.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},i.ts_packet_size_=e.ts_packet_size,i.sync_offset_=e.sync_offset,i.config_=t,i}function Te(e){this.TAG="AC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not found AC3 syncword until payload end")}function Ce(e,t,i,n){var r=23+(5+e.byteLength)+(5+t.byteLength)+(5+i.byteLength);(r=this.data=new Uint8Array(r))[0]=1,r[1]=(3&n.general_profile_space)<<6|(n.general_tier_flag?1:0)<<5|31&n.general_profile_idc,r[2]=n.general_profile_compatibility_flags_1,r[3]=n.general_profile_compatibility_flags_2,r[4]=n.general_profile_compatibility_flags_3,r[5]=n.general_profile_compatibility_flags_4,r[6]=n.general_constraint_indicator_flags_1,r[7]=n.general_constraint_indicator_flags_2,r[8]=n.general_constraint_indicator_flags_3,r[9]=n.general_constraint_indicator_flags_4,r[10]=n.general_constraint_indicator_flags_5,r[11]=n.general_constraint_indicator_flags_6,r[12]=n.general_level_idc,r[13]=240|(3840&n.min_spatial_segmentation_idc)>>8,r[14]=255&n.min_spatial_segmentation_idc,r[15]=252|3&n.parallelismType,r[16]=252|3&n.chroma_format_idc,r[17]=248|7&n.bit_depth_luma_minus8,r[18]=248|7&n.bit_depth_chroma_minus8,r[19]=0,r[20]=0,r[21]=(3&n.constant_frame_rate)<<6|(7&n.num_temporal_layers)<<3|(n.temporal_id_nested?1:0)<<2|3,r[22]=3,r[23]=128|le.kSliceVPS,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=255&e.byteLength,r.set(e,28),r[23+(5+e.byteLength)+0]=128|le.kSliceSPS,r[23+(5+e.byteLength)+1]=0,r[23+(5+e.byteLength)+2]=1,r[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,r[23+(5+e.byteLength)+4]=255&t.byteLength,r.set(t,23+(5+e.byteLength)+5),r[23+(5+e.byteLength+5+t.byteLength)+0]=128|le.kSlicePPS,r[23+(5+e.byteLength+5+t.byteLength)+1]=0,r[23+(5+e.byteLength+5+t.byteLength)+2]=1,r[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&i.byteLength)>>8,r[23+(5+e.byteLength+5+t.byteLength)+4]=255&i.byteLength,r.set(i,23+(5+e.byteLength+5+t.byteLength)+5)}function Le(e){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.a.e(this.TAG,"Could not find H265 startcode until payload end!")}be.init();var Re=be,Ie=(Be.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},Be),ke=i(7),Pe=(Fe.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},Fe.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(Fe.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(Fe.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),Fe.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},Fe.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},Fe.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new u.a("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),t&&this._remuxVideo(t),e&&this._remuxAudio(e)},Fe.prototype._onTrackMetadataReceived=function(e,t){var i=null,n="mp4",r=t.codec;if("audio"===e)i="mp3"===(this._audioMeta=t).codec&&this._mp3UseMpegAudio?(n="mpeg",r="",new Uint8Array):Re.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,i=Re.generateInitSegment(t)}if(!this._onInitSegment)throw new u.a("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:i.buffer,codec:r,container:e+"/"+n,mediaDuration:t.duration})},Fe.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e&&e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t&&t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},Fe.prototype.getTimestampBase=function(){if(this._dtsBaseInited)return this._dtsBase},Fe.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,i={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(i.samples.push(e),i.length=e.length),e={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},null!=t&&(e.samples.push(t),e.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(i,!0),this._remuxAudio(e,!0)},Fe.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var i=e.samples,n=void 0,r=-1,o=this._audioMeta.refSampleDuration,l="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,h=this._dtsBaseInited&&void 0===this._audioNextDts,u=!1;if(i&&0!==i.length&&(1!==i.length||t)){var d,c,f=0,p=null,m=0,g=(m=l?(f=0,e.length):(f=8)+e.length,null);1<i.length&&(m-=(g=i.pop()).length),null!=this._audioStashedLastSample&&(d=this._audioStashedLastSample,this._audioStashedLastSample=null,i.unshift(d),m+=d.length),null!=g&&(this._audioStashedLastSample=g),t=i[0].dts-this._dtsBase,this._audioNextDts?n=t-this._audioNextDts:this._audioSegmentInfoList.isEmpty()?(n=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(u=!0)):n=null!=(k=this._audioSegmentInfoList.getLastSampleBefore(t))?(P=t-(k.originalDts+k.duration),t-(k.dts+k.duration+(P=P<=3?0:P))):0,u&&(k=t-n,null!=(P=this._videoSegmentInfoList.getLastSegmentBefore(t))&&P.beginDts<k?(T=Ie.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(c=P.beginDts,t=k-P.beginDts,a.a.v(this.TAG,"InsertPrefixSilentAudio: dts: "+c+", duration: "+t),i.unshift({unit:T,dts:c,pts:c}),m+=T.byteLength):u=!1);for(var _=[],y=0;y<i.length;y++){var v=(d=i[y]).unit,A=d.dts-this._dtsBase,E=!1,b=null,w=0;if(!((c=A)<-.001)){if("mp3"!==this._audioMeta.codec){var S=A;if((n=A-(S=this._audioNextDts?this._audioNextDts:S))<=-3*o){a.a.w(this.TAG,"Dropping 1 audio frame (originalDts: "+A+" ms ,curRefDts: "+S+" ms)  due to dtsCorrection: "+n+" ms overlap.");continue}if(3*o<=n&&this._fillAudioTimestampGap&&!s.a.safari){E=!0;var T,C=Math.floor(n/o);a.a.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+A+" ms, curRefDts: "+S+" ms, dtsCorrection: "+Math.round(n)+" ms, generate: "+C+" frames"),c=Math.floor(S),w=Math.floor(S+o)-c,null==(T=Ie.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(a.a.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),T=v),b=[];for(var L=0;L<C;L++){S+=o;var R=Math.floor(S),I=Math.floor(S+o)-R;R={dts:R,pts:R,cts:0,unit:T,size:T.byteLength,duration:I,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}},b.push(R),m+=R.size}}else c=Math.floor(S),w=Math.floor(S+o)-c;this._audioNextDts=S+o}else c=A-n,w=y!==i.length-1?i[y+1].dts-this._dtsBase-n-c:null!=g?g.dts-this._dtsBase-n-c:1<=_.length?_[_.length-1].duration:Math.floor(o),this._audioNextDts=c+w;-1===r&&(r=c),_.push({dts:c,pts:c,cts:0,unit:d.unit,size:d.unit.byteLength,duration:w,originalDts:A,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),E&&_.push.apply(_,b)}}if(0===_.length)e.samples=[],e.length=0;else{for(l?p=new Uint8Array(m):((p=new Uint8Array(m))[0]=m>>>24&255,p[1]=m>>>16&255,p[2]=m>>>8&255,p[3]=255&m,p.set(Re.types.mdat,4)),y=0;y<_.length;y++)v=_[y].unit,p.set(v,f),f+=v.byteLength;var k=_[_.length-1],P=k.dts+k.duration;(t=new ke.b).beginDts=r,t.endDts=P,t.beginPts=r,t.endPts=P,t.originalBeginDts=_[0].originalDts,t.originalEndDts=k.originalDts+k.duration,t.firstSample=new ke.d(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,!1),t.lastSample=new ke.d(k.dts,k.pts,k.duration,k.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(t),e.samples=_,e.sequenceNumber++,u=l?new Uint8Array:Re.moof(e,r),e.samples=[],e.length=0,P={type:"audio",data:this._mergeBoxes(u,p).buffer,sampleCount:_.length,info:t},l&&h&&(P.timestampOffset=r),this._onMediaSegment("audio",P)}}}},Fe.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var i=e,n=i.samples,r=void 0,a=-1,s=-1;if(n&&0!==n.length&&(1!==n.length||t)){var o,l=8,h=null,u=(t=8+e.length,null);1<n.length&&(t-=(u=n.pop()).length),null!=this._videoStashedLastSample&&(o=this._videoStashedLastSample,this._videoStashedLastSample=null,n.unshift(o),t+=o.length),null!=u&&(this._videoStashedLastSample=u),e=n[0].dts-this._dtsBase,r=this._videoNextDts?e-this._videoNextDts:this._videoSegmentInfoList.isEmpty()||null==(w=this._videoSegmentInfoList.getLastSampleBefore(e))?0:(S=e-(w.originalDts+w.duration),e-(w.dts+w.duration+(S=S<=3?0:S)));for(var d=new ke.b,c=[],f=0;f<n.length;f++){var p,m=(o=n[f]).dts-this._dtsBase,g=o.isKeyframe,_=m-r,y=o.cts,v=_+y,A=-1===a&&(a=_,s=v);A=f!==n.length-1?n[f+1].dts-this._dtsBase-r-_:null!=u?u.dts-this._dtsBase-r-_:1<=c.length?c[c.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),g&&((p=new ke.d(_,v,A,o.dts,!0)).fileposition=o.fileposition,d.appendSyncPoint(p)),c.push({dts:_,pts:v,cts:y,units:o.units,size:o.length,isKeyframe:g,duration:A,originalDts:m,flags:{isLeading:0,dependsOn:g?2:1,isDependedOn:g?1:0,hasRedundancy:0,isNonSync:g?0:1}})}for((h=new Uint8Array(t))[0]=t>>>24&255,h[1]=t>>>16&255,h[2]=t>>>8&255,h[3]=255&t,h.set(Re.types.mdat,4),f=0;f<c.length;f++)for(var E=c[f].units;E.length;){var b=E.shift().data;h.set(b,l),l+=b.byteLength}var w=(e=c[c.length-1]).dts+e.duration,S=e.pts+e.duration;this._videoNextDts=w,d.beginDts=a,d.endDts=w,d.beginPts=s,d.endPts=S,d.originalBeginDts=c[0].originalDts,d.originalEndDts=e.originalDts+e.duration,d.firstSample=new ke.d(c[0].dts,c[0].pts,c[0].duration,c[0].originalDts,c[0].isKeyframe),d.lastSample=new ke.d(e.dts,e.pts,e.duration,e.originalDts,e.isKeyframe),this._isLive||this._videoSegmentInfoList.append(d),i.samples=c,i.sequenceNumber++,this._forceFirstIDR&&((t=c[0].flags).dependsOn=2,t.isNonSync=0),w=Re.moof(i,a),i.samples=[],i.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(w,h).buffer,sampleCount:c.length,info:d})}}},Fe.prototype._mergeBoxes=function(e,t){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(e,0),i.set(t,e.byteLength),i},Fe),De=i(11),xe=i(1);function Me(e,t){this.TAG="TransmuxingController",this._emitter=new r.a,this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e;var i=this._currentSegmentIndex=0;this._mediaDataSource.segments.forEach((function(n){n.timestampBase=i,i+=n.duration,n.cors=e.cors,n.withCredentials=e.withCredentials,t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy)})),isNaN(i)||this._mediaDataSource.duration===i||(this._mediaDataSource.duration=i),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}function Fe(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new ke.c("audio"),this._videoSegmentInfoList=new ke.c("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!s.a.chrome||!(s.a.version.major<50||50===s.a.version.major&&s.a.version.build<2661)),this._fillSilentAfterSeek=s.a.msedge||s.a.msie,this._mp3UseMpegAudio=!s.a.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}function Be(){}Me.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},Me.prototype.on=function(e,t){this._emitter.addListener(e,t)},Me.prototype.off=function(e,t){this._emitter.removeListener(e,t)},Me.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},Me.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var i=this._mediaDataSource.segments[e];(i=this._ioctl=new De.a(i,this._config,e)).onError=this._onIOException.bind(this),i.onSeeked=this._onIOSeeked.bind(this),i.onComplete=this._onIOComplete.bind(this),i.onRedirect=this._onIORedirect.bind(this),i.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):i.onDataArrival=this._onInitChunkArrival.bind(this),i.open(t)},Me.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},Me.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},Me.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},Me.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},Me.prototype.seek=function(e){var t,i,n;null!=this._mediaInfo&&this._mediaInfo.isSeekable()&&((t=this._searchSegmentIndexContains(e))===this._currentSegmentIndex?null==(n=this._mediaInfo.segments[t])?this._pendingSeekTime=e:(i=n.getNearestKeyframe(e),this._remuxer.seek(i.milliseconds),this._ioctl.seek(i.fileposition),this._pendingResolveSeekPoint=i.milliseconds):null==(n=this._mediaInfo.segments[t])?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(i=n.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,i.fileposition),this._pendingResolveSeekPoint=i.milliseconds,this._reportSegmentMediaInfo(t)),this._enableStatisticsReporter())},Me.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,i=t.length-1,n=0;n<t.length;n++)if(e<t[n].timestampBase){i=n-1;break}return i},Me.prototype._onInitChunkArrival=function(e,t){var i,n=this,r=0;return 0<t?(this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,r=this._demuxer.parseChunks(e,t)):(i=null,(i=R.probe(e)).match&&(this._setupFLVDemuxerRemuxer(i),r=this._demuxer.parseChunks(e,t)),i.match||i.needMoreData||(i=Ee.probe(e)).match&&(this._setupTSDemuxerRemuxer(i),r=this._demuxer.parseChunks(e,t)),i.match||i.needMoreData||(i=null,a.a.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then((function(){n._internalAbort()})),this._emitter.emit(xe.a.DEMUX_ERROR,m.a.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))),r},Me.prototype._setupFLVDemuxerRemuxer=function(e){this._demuxer=new R(e,this._config),this._remuxer||(this._remuxer=new Pe(this._config)),null==(e=this._mediaDataSource).duration||isNaN(e.duration)||(this._demuxer.overridedDuration=e.duration),"boolean"==typeof e.hasAudio&&(this._demuxer.overridedHasAudio=e.hasAudio),"boolean"==typeof e.hasVideo&&(this._demuxer.overridedHasVideo=e.hasVideo),this._demuxer.timestampBase=e.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},Me.prototype._setupTSDemuxerRemuxer=function(e){e=this._demuxer=new Ee(e,this._config),this._remuxer||(this._remuxer=new Pe(this._config)),e.onError=this._onDemuxException.bind(this),e.onMediaInfo=this._onMediaInfo.bind(this),e.onMetaDataArrived=this._onMetaDataArrived.bind(this),e.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),e.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),e.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),e.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),e.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)},Me.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,o.a.prototype)),e=Object.assign({},e),Object.setPrototypeOf(e,o.a.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=e,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},Me.prototype._onMetaDataArrived=function(e){this._emitter.emit(xe.a.METADATA_ARRIVED,e)},Me.prototype._onScriptDataArrived=function(e){this._emitter.emit(xe.a.SCRIPTDATA_ARRIVED,e)},Me.prototype._onTimedID3Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(xe.a.TIMED_ID3_METADATA_ARRIVED,e))},Me.prototype._onSMPTE2038Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.dts&&(e.dts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(xe.a.SMPTE2038_METADATA_ARRIVED,e))},Me.prototype._onSCTE35Metadata=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),this._emitter.emit(xe.a.SCTE35_METADATA_ARRIVED,e))},Me.prototype._onPESPrivateDataDescriptor=function(e){this._emitter.emit(xe.a.PES_PRIVATE_DATA_DESCRIPTOR,e)},Me.prototype._onPESPrivateData=function(e){var t=this._remuxer.getTimestampBase();null!=t&&(null!=e.pts&&(e.pts-=t),null!=e.nearest_pts&&(e.nearest_pts-=t),null!=e.dts&&(e.dts-=t),this._emitter.emit(xe.a.PES_PRIVATE_DATA_ARRIVED,e))},Me.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},Me.prototype._onIOComplete=function(e){(e+=1)<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(e)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(xe.a.LOADING_COMPLETE),this._disableStatisticsReporter())},Me.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},Me.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(xe.a.RECOVERED_EARLY_EOF)},Me.prototype._onIOException=function(e,t){a.a.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(xe.a.IO_ERROR,e,t),this._disableStatisticsReporter()},Me.prototype._onDemuxException=function(e,t){a.a.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(xe.a.DEMUX_ERROR,e,t)},Me.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(xe.a.INIT_SEGMENT,e,t)},Me.prototype._onRemuxerMediaSegmentArrival=function(e,t){null==this._pendingSeekTime&&(this._emitter.emit(xe.a.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint)&&"video"===e&&(e=t.info.syncPoints,t=this._pendingResolveSeekPoint,this._pendingResolveSeekPoint=null,s.a.safari&&0<e.length&&e[0].originalDts===t&&(t=e[0].pts),this._emitter.emit(xe.a.RECOMMEND_SEEKPOINT,t))},Me.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},Me.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},Me.prototype._reportSegmentMediaInfo=function(e){e=this._mediaInfo.segments[e],(e=Object.assign({},e)).duration=this._mediaInfo.duration,e.segmentCount=this._mediaInfo.segmentCount,delete e.segments,delete e.keyframesIndex,this._emitter.emit(xe.a.MEDIA_INFO,e)},Me.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(xe.a.STATISTICS_INFO,e)},t.a=Me},function(e,t,i){"use strict";var n,r,a,s,o,l,h,u,d,c=i(0),f=(P.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},P.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(P.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return this._intervalBytes/(e=0==e?1:e)/1024},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:500<=this._now()-this._lastCheckpoint?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),P),p=i(2),m=i(4),g=i(3),_=(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)},u=p.a,n(d=I,i=u),d.prototype=null===i?Object.create(i):(k.prototype=i.prototype,new k),I.isSupported=function(){try{var e=m.a.msedge&&15048<=m.a.version.minor,t=!m.a.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(e){return!1}},I.prototype.destroy=function(){this.isWorking()&&this.abort(),u.prototype.destroy.call(this)},I.prototype.open=function(e,t){var i=this,n=(this._dataSource=e,this._range=t,e.url),r=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL),this._seekHandler.getConfig(n,t)),a=new self.Headers;if("object"==typeof r.headers){var s=r.headers;for(o in s)s.hasOwnProperty(o)&&a.append(o,s[o])}if(n={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},"object"==typeof this._config.headers)for(var o in this._config.headers)a.append(o,this._config.headers[o]);!1===e.cors&&(n.mode="same-origin"),e.withCredentials&&(n.credentials="include"),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,n.signal=this._abortController.signal),this._status=p.c.kConnecting,self.fetch(r.url,n).then((function(e){if(i._requestAbort)i._status=p.c.kIdle,e.body.cancel();else{var t;if(e.ok&&200<=e.status&&e.status<=299)return e.url!==r.url&&i._onURLRedirect&&(t=i._seekHandler.removeURLParameters(e.url),i._onURLRedirect(t)),null!=(t=e.headers.get("Content-Length"))&&(i._contentLength=parseInt(t),0!==i._contentLength)&&i._onContentLengthKnown&&i._onContentLengthKnown(i._contentLength),i._pump.call(i,e.body.getReader());if(i._status=p.c.kError,!i._onError)throw new g.d("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);i._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}})).catch((function(e){if(!i._abortController||!i._abortController.signal.aborted){if(i._status=p.c.kError,!i._onError)throw e;i._onError(p.b.EXCEPTION,{code:-1,msg:e.message})}}))},I.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==p.c.kBuffering||!m.a.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},I.prototype._pump=function(e){var t=this;return e.read().then((function(i){if(i.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=p.c.kError;var n=p.b.EARLY_EOF,r={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new g.d(r.msg);t._onError(n,r)}else t._status=p.c.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else if(t._abortController&&t._abortController.signal.aborted)t._status=p.c.kComplete;else{if(!0===t._requestAbort)return t._status=p.c.kComplete,e.cancel();t._status=p.c.kBuffering,n=i.value.buffer,r=t._range.from+t._receivedLength,t._receivedLength+=n.byteLength,t._onDataArrival&&t._onDataArrival(n,r,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=p.c.kComplete;else if(11!==e.code||!m.a.msedge){t._status=p.c.kError;var i=0,n=19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(i=p.b.EXCEPTION,{code:e.code,msg:e.message}):(i=p.b.EARLY_EOF,{code:e.code,msg:"Fetch stream meet Early-EOF"});if(!t._onError)throw new g.d(n.msg);t._onError(i,n)}}))},I),y=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)},i=function(e,t){function i(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i(R,l=p.a),R.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="moz-chunked-arraybuffer")===e.responseType}catch(e){return c.a.w("MozChunkedLoader",e.message),!1}},R.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),l.prototype.destroy.call(this)},R.prototype.open=function(e,t){this._dataSource=e,this._range=t;var i=e.url,n=(this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(i=e.redirectedURL),i=this._seekHandler.getConfig(i,t),this._requestURL=i.url,this._xhr=new XMLHttpRequest);if(n.open("GET",i.url,!0),n.responseType="moz-chunked-arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onloadend=this._onLoadEnd.bind(this),n.onerror=this._onXhrError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"==typeof i.headers){var r=i.headers;for(a in r)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a]);this._status=p.c.kConnecting,n.send()},R.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=p.c.kComplete},R.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect&&(t=this._seekHandler.removeURLParameters(e.responseURL),this._onURLRedirect(t)),0!==e.status&&(e.status<200||299<e.status)){if(this._status=p.c.kError,!this._onError)throw new g.d("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=p.c.kBuffering},R.prototype._onProgress=function(e){var t;this._status!==p.c.kError&&(null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown)&&this._onContentLengthKnown(this._contentLength),e=e.target.response,t=this._range.from+this._receivedLength,this._receivedLength+=e.byteLength,this._onDataArrival)&&this._onDataArrival(e,t,this._receivedLength)},R.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==p.c.kError&&(this._status=p.c.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1):this._requestAbort=!1},R.prototype._onXhrError=function(e){this._status=p.c.kError;var t=0,i=this._contentLength&&e.loaded<this._contentLength?(t=p.b.EARLY_EOF,{code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=p.b.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.d(i.msg);this._onError(t,i)},R),v=(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)},i=function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i(L,s=p.a),L.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),(e.responseType="arraybuffer")===e.responseType}catch(e){return c.a.w("RangeLoader",e.message),!1}},L.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),s.prototype.destroy.call(this)},Object.defineProperty(L.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),L.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=p.c.kConnecting,e=!1,null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(e=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||e?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},L.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength;e=t+e,null!=this._contentLength&&e-this._range.from>=this._contentLength&&(e=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:e},this._internalOpen(this._dataSource,this._currentRequestRange)},L.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var i=e.url,n=(this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?i=this._currentRedirectedURL:null!=e.redirectedURL&&(i=e.redirectedURL)),i=this._seekHandler.getConfig(i,t),this._currentRequestURL=i.url,this._xhr=new XMLHttpRequest);if(n.open("GET",i.url,!0),n.responseType="arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onload=this._onLoad.bind(this),n.onerror=this._onXhrError.bind(this),e.withCredentials&&(n.withCredentials=!0),"object"==typeof i.headers){var r=i.headers;for(a in r)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a])}if("object"==typeof this._config.headers)for(var a in r=this._config.headers)r.hasOwnProperty(a)&&n.setRequestHeader(a,r[a]);n.send()},L.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=p.c.kComplete},L.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},L.prototype._onReadyStateChange=function(e){var t;if(2===(e=e.target).readyState)if(null!=e.responseURL&&(t=this._seekHandler.removeURLParameters(e.responseURL),e.responseURL!==this._currentRequestURL)&&t!==this._currentRedirectedURL&&(this._currentRedirectedURL=t,this._onURLRedirect)&&this._onURLRedirect(t),200<=e.status&&e.status<=299)this._waitForTotalLength||(this._status=p.c.kBuffering);else{if(this._status=p.c.kError,!this._onError)throw new g.d("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(p.b.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}},L.prototype._onProgress=function(e){if(this._status!==p.c.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength&&(this._waitForTotalLength=!1,t=this._totalLengthReceived=!0,i=e.total,this._internalAbort(),null!=i&0!==i)&&(this._totalLength=i),-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var i=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(i)}},L.prototype._normalizeSpeed=function(e){var t,i=this._chunkSizeKBList,n=i.length-1,r=0,a=n;if(e<i[0])return i[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===n||e>=i[t]&&e<i[t+1])return i[t];i[t]<e?r=t+1:a=t-1}},L.prototype._onLoad=function(e){var t,i;this._status!==p.c.kError&&(this._waitForTotalLength?this._waitForTotalLength=!1:((this._lastTimeLoaded=0)!==(t=0===(t=this._speedSampler.lastSecondKBps)&&(this._zeroSpeedChunkCount++,3<=this._zeroSpeedChunkCount)?this._speedSampler.currentKBps:t)&&(t=this._normalizeSpeed(t),this._currentSpeedNormalized!==t)&&(this._currentSpeedNormalized=t,this._currentChunkSizeKB=t),t=e.target.response,e=this._range.from+this._receivedLength,this._receivedLength+=t.byteLength,i=!1,null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():i=!0,this._onDataArrival&&this._onDataArrival(t,e,this._receivedLength),i&&(this._status=p.c.kComplete,this._onComplete)&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)))},L.prototype._onXhrError=function(e){this._status=p.c.kError;var t=0,i=this._contentLength&&0<this._receivedLength&&this._receivedLength<this._contentLength?(t=p.b.EARLY_EOF,{code:-1,msg:"RangeLoader meet Early-Eof"}):(t=p.b.EXCEPTION,{code:-1,msg:e.constructor.name+" "+e.type});if(!this._onError)throw new g.d(i.msg);this._onError(t,i)},L),A=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)},i=function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i(C,r=p.a),C.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},C.prototype.destroy=function(){this._ws&&this.abort(),r.prototype.destroy.call(this)},C.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=p.c.kConnecting}catch(e){if(this._status=p.c.kError,t={code:e.code,msg:e.message},!this._onError)throw new g.d(t.msg);this._onError(p.b.EXCEPTION,t)}},C.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=p.c.kComplete},C.prototype._onWebSocketOpen=function(e){this._status=p.c.kBuffering},C.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=p.c.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},C.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var i=new FileReader;i.onload=function(){t._dispatchArrayBuffer(i.result)},i.readAsArrayBuffer(e.data)}else{if(this._status=p.c.kError,e={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name},!this._onError)throw new g.d(e.msg);this._onError(p.b.EXCEPTION,e)}},C.prototype._dispatchArrayBuffer=function(e){var t=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,t,this._receivedLength)},C.prototype._onWebSocketError=function(e){if(this._status=p.c.kError,e={code:e.code,msg:e.message},!this._onError)throw new g.d(e.msg);this._onError(p.b.EXCEPTION,e)},C),E=(T.prototype.getConfig=function(e,t){var i,n={};return 0!==t.from||-1!==t.to?(i=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",n.Range=i):this._zeroStart&&(n.Range="bytes=0-"),{url:e,headers:n}},T.prototype.removeURLParameters=function(e){return e},T),b=(S.prototype.getConfig=function(e,t){var i;return 0===t.from&&-1===t.to||(i=!0,-1===e.indexOf("?")&&(e+="?",i=!1),i&&(e+="&"),e+=this._startName+"="+t.from.toString(),-1!==t.to&&(e+="&"+this._endName+"="+t.to.toString())),{url:e,headers:{}}},S.prototype.removeURLParameters=function(e){var t=e.split("?")[0],i=void 0,n=e.indexOf("?"),r="";if(null!=(i=-1!==n?e.substring(n+1):i)&&0<i.length)for(var a=i.split("&"),s=0;s<a.length;s++){var o=a[s].split("=");o[0]!==this._startName&&o[0]!==this._endName&&(0<s&&(r+="&"),r+=a[s])}return 0===r.length?t:t+"?"+r},S);function w(e,t,i){this.TAG="IOController",this._config=t,this._extraData=i,this._stashInitialSize=65536,null!=t.stashInitialSize&&0<t.stashInitialSize&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,!(this._enableStash=!0)===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize||null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new f,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}function S(e,t){this._startName=e,this._endName=t}function T(e){this._zeroStart=e||!1}function C(){var e=r.call(this,"websocket-loader")||this;return e.TAG="WebSocketLoader",e._needStash=!0,e._ws=null,e._requestAbort=!1,e._receivedLength=0,e}function L(e,t){var i=s.call(this,"xhr-range-loader")||this;return i.TAG="RangeLoader",i._seekHandler=e,i._config=t,i._needStash=!1,i._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],i._currentChunkSizeKB=384,i._currentSpeedNormalized=0,i._zeroSpeedChunkCount=0,i._xhr=null,i._speedSampler=new f,i._requestAbort=!1,i._waitForTotalLength=!1,i._totalLengthReceived=!1,i._currentRequestURL=null,i._currentRedirectedURL=null,i._currentRequestRange=null,i._totalLength=null,i._contentLength=null,i._receivedLength=0,i._lastTimeLoaded=0,i}function R(e,t){var i=l.call(this,"xhr-moz-chunked-loader")||this;return i.TAG="MozChunkedLoader",i._seekHandler=e,i._config=t,i._needStash=!0,i._xhr=null,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i}function I(e,t){var i=u.call(this,"fetch-stream-loader")||this;return i.TAG="FetchStreamLoader",i._seekHandler=e,i._config=t,i._needStash=!0,i._requestAbort=!1,i._abortController=null,i._contentLength=null,i._receivedLength=0,i}function k(){this.constructor=d}function P(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}w.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},w.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},w.prototype.isPaused=function(){return this._paused},Object.defineProperty(w.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentSpeed",{get:function(){return this._loaderClass===v?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),w.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new E(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",i=e.seekParamEnd||"bend";this._seekHandler=new b(t,i)}else{if("custom"!==e.seekType)throw new g.b("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new g.b("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},w.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=A;else if(_.isSupported())this._loaderClass=_;else if(y.isSupported())this._loaderClass=y;else{if(!v.isSupported())throw new g.d("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=v}},w.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},w.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},w.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},w.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},w.prototype.resume=function(){var e;this._paused&&(this._paused=!1,e=this._resumeFrom,this._resumeFrom=0,this._internalSeek(e,!0))},w.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},w.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null,t={from:e,to:-1},this._currentRange={from:t.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,t),this._onSeeked&&this._onSeeked()},w.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new g.b("Url must be a non-empty string!");this._dataSource.url=e},w.prototype._expandBuffer=function(e){for(var t,i,n=this._stashSize;n+1048576<e;)n*=2;(n+=1048576)!==this._bufferSize&&(t=new ArrayBuffer(n),0<this._stashUsed&&(i=new Uint8Array(this._stashBuffer,0,this._stashUsed),new Uint8Array(t,0,n).set(i,0)),this._stashBuffer=t,this._bufferSize=n)},w.prototype._normalizeSpeed=function(e){var t,i=this._speedNormalizeList,n=i.length-1,r=0,a=n;if(e<i[0])return i[0];for(;r<=a;){if((t=r+Math.floor((a-r)/2))===n||e>=i[t]&&e<i[t+1])return i[t];i[t]<e?r=t+1:a=t-1}},w.prototype._adjustStashSize=function(e){var t=0;e=1024*(t=8192<(t=this._config.isLive?e/8:e<512?e:512<=e&&e<=1024?Math.floor(1.5*e):2*e)?8192:t)+1048576,this._bufferSize<e&&this._expandBuffer(e),this._stashSize=1024*t},w.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},w.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},w.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},w.prototype._onLoaderChunkArrival=function(e,t,i){if(!this._onDataArrival)throw new g.a("IOController: No existing consumer (onDataArrival) callback!");var n,r,a,s,o;this._paused||(this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof)&&this._onRecoveredEarlyEof(),this._speedSampler.addBytes(e.byteLength),0!==(n=this._speedSampler.lastSecondKBps)&&(n=this._normalizeSpeed(n),this._speedNormalized!==n)&&(this._speedNormalized=n,this._adjustStashSize(n)),this._enableStash?(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize?((a=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(a=new Uint8Array(this._stashBuffer,0,this._bufferSize),0<this._stashUsed?(n=this._stashBuffer.slice(0,this._stashUsed),(s=this._dispatchChunks(n,this._stashByteStart))<n.byteLength?0<s&&(o=new Uint8Array(n,s),a.set(o,0),this._stashUsed=o.byteLength,this._stashByteStart+=s):(this._stashUsed=0,this._stashByteStart+=s),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength):(s=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-s)>this._bufferSize&&(this._expandBuffer(r),a=new Uint8Array(this._stashBuffer,0,this._bufferSize)),a.set(new Uint8Array(e,s),0),this._stashUsed+=r,this._stashByteStart=t+s))):0===this._stashUsed?(s=this._dispatchChunks(e,t))<e.byteLength&&((r=e.byteLength-s)>this._bufferSize&&this._expandBuffer(r),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,s),0),this._stashUsed+=r,this._stashByteStart=t+s):(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(a=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(s=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&0<s&&(o=new Uint8Array(this._stashBuffer,s),a.set(o,0)),this._stashUsed-=s,this._stashByteStart+=s))},w.prototype._flushStashBuffer=function(e){if(0<this._stashUsed){var t=this._stashBuffer.slice(0,this._stashUsed),i=this._dispatchChunks(t,this._stashByteStart),n=t.byteLength-i;if(i<t.byteLength){if(!e)return 0<i&&(e=new Uint8Array(this._stashBuffer,0,this._bufferSize),t=new Uint8Array(t,i),e.set(t,0),this._stashUsed=t.byteLength,this._stashByteStart+=i),0;c.a.w(this.TAG,n+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,n}return 0},w.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},w.prototype._onLoaderError=function(e,t){switch(c.a.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=p.b.UNRECOVERABLE_EARLY_EOF),e){case p.b.EARLY_EOF:var i;if(!this._config.isLive&&this._totalLength)return void((i=this._currentRange.to+1)<this._totalLength&&(c.a.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(i,!1)));e=p.b.UNRECOVERABLE_EARLY_EOF;case p.b.UNRECOVERABLE_EARLY_EOF:case p.b.CONNECTING_TIMEOUT:case p.b.HTTP_STATUS_CODE_INVALID:case p.b.EXCEPTION:}if(!this._onError)throw new g.d("IOException: "+t.msg);this._onError(e,t)},t.a=w},function(e,t,i){"use strict";r.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},"function"!=typeof self.Promise&&i(15).polyfill()};var n=r;function r(){}n.install(),t.a=n},function(e,t,i){function n(e){var t={};function i(n){var r;return(t[n]||(r=t[n]={i:n,l:!1,exports:{}},e[n].call(r.exports,r,r.exports,i),r.l=!0,r)).exports}i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw e};var n=i(i.s=ENTRY_MODULE);return n.default||n}function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(e,t){var a={main:i.m},s=(t=t||{}).all?{main:Object.keys(a.main)}:function(t){for(var n={main:[e]},a={main:[]},s={main:{}};function(e){return Object.keys(e).reduce((function(t,i){return t||0<e[i].length}),!1)}(n);)for(var o=Object.keys(n),l=0;l<o.length;l++){var h=o[l],u=n[h].pop();if(s[h]=s[h]||{},!s[h][u]&&t[h][u]){s[h][u]=!0,a[h]=a[h]||[],a[h].push(u);for(var d=function(e,t,n){var a={},s=(a[n]=[],t.toString());if(t=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)){t=t[1];for(var o,l=new RegExp("(\\\\n|\\W)"+r(t)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");o=l.exec(s);)"dll-reference"!==o[3]&&a[n].push(o[3]);for(l=new RegExp("\\("+r(t)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");o=l.exec(s);)e[o[2]]||(a[n].push(o[1]),e[o[2]]=i(o[1]).m),a[o[2]]=a[o[2]]||[],a[o[2]].push(o[4]);for(var h,u=Object.keys(a),d=0;d<u.length;d++)for(var c=0;c<a[u[d]].length;c++)h=a[u[d]][c],isNaN(+h)||(a[u[d]][c]=+a[u[d]][c])}return a}(t,t[h][u],h),c=Object.keys(d),f=0;f<c.length;f++)n[c[f]]=n[c[f]]||[],n[c[f]]=n[c[f]].concat(d[c[f]])}}return a}(a),o="",l=(Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+a[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+a.main[e].toString()})).join(",")+"}))(self);",new window.Blob([o],{type:"text/javascript"}));return t.bare||(t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),(l=new window.Worker(t)).objectURL=t),l}},function(e,t,i){e.exports=i(19).default},function(e,t,i){(function(t,i){e.exports=function(){"use strict";function e(e){return"function"==typeof e}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,a=void 0,s=void 0,o=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(s?s(p):y())},l="undefined"!=typeof window?window:void 0,h=(h=l||{}).MutationObserver||h.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function c(){var e=setTimeout;return function(){return e(p,1)}}var f=new Array(1e3);function p(){for(var e=0;e<r;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;r=0}var m,g,_,y=void 0;function v(e,t){var i,n=this,r=new this.constructor(b),a=(void 0===r[E]&&D(r),n._state);return a?(i=arguments[a-1],o((function(){return k(a,r,i,n._result)}))):R(n,r,e,t),r}function A(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(S(t=new this(b),e),t)}y=u?function(){return t.nextTick(p)}:h?(g=0,u=new h(p),_=document.createTextNode(""),u.observe(_,{characterData:!0}),function(){_.data=g=++g%2}):d?((m=new MessageChannel).port1.onmessage=p,function(){return m.port2.postMessage(0)}):(void 0===l?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(p)}:c()}catch(e){return c()}}:c)();var E=Math.random().toString(36).substring(2);function b(){}function w(t,i,n){var r,a,s,l;i.constructor===t.constructor&&n===v&&i.constructor.resolve===A?(s=t,1===(l=i)._state?C(s,l._result):2===l._state?L(s,l._result):R(l,void 0,(function(e){return S(s,e)}),(function(e){return L(s,e)}))):void 0!==n&&e(n)?(r=i,a=n,o((function(e){var t=!1,i=function(i,n){try{i.call(n,(function(i){t||(t=!0,r!==i?S(e,i):C(e,i))}),(function(i){t||(t=!0,L(e,i))}))}catch(i){return i}}(a,r,e._label);!t&&i&&(t=!0,L(e,i))}),t)):C(t,i)}function S(e,t){if(e===t)L(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof t,null===t||"object"!=i&&"function"!=i)C(e,t);else{i=void 0;try{i=t.then}catch(t){return void L(e,t)}w(e,t,i)}var i}function T(e){e._onerror&&e._onerror(e._result),I(e)}function C(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length)&&o(I,e)}function L(e,t){void 0===e._state&&(e._state=2,e._result=t,o(T,e))}function R(e,t,i,n){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+1]=i,r[a+2]=n,0===a&&e._state&&o(I,e)}function I(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n,r=void 0,a=e._result,s=0;s<t.length;s+=3)n=t[s],r=t[s+i],n?k(i,n,r,a):r(a);e._subscribers.length=0}}function k(t,i,n,r){var a=e(n),s=void 0,o=void 0,l=!0;if(a){try{s=n(r)}catch(t){l=!1,o=t}if(i===s)return void L(i,new TypeError("A promises callback cannot return that same promise."))}else s=r;void 0===i._state&&(a&&l?S(i,s):!1===l?L(i,o):1===t?C(i,s):2===t&&L(i,s))}var P=0;function D(e){e[E]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}B.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},B.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===A){var r,a=void 0,s=void 0,o=!1;try{a=e.then}catch(e){o=!0,s=e}a===v&&void 0!==e._state?this._settledAt(e._state,t,e._result):"function"!=typeof a?(this._remaining--,this._result[t]=e):i===M?(r=new i(b),o?L(r,s):w(r,e,a),this._willSettleAt(r,t)):this._willSettleAt(new i((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},B.prototype._settledAt=function(e,t,i){var n=this.promise;void 0===n._state&&(this._remaining--,2===e?L(n,i):this._result[t]=i),0===this._remaining&&C(n,this._result)},B.prototype._willSettleAt=function(e,t){var i=this;R(e,void 0,(function(e){return i._settledAt(1,t,e)}),(function(e){return i._settledAt(2,t,e)}))};var x=B,M=(F.prototype.catch=function(e){return this.then(null,e)},F.prototype.finally=function(t){var i=this.constructor;return e(t)?this.then((function(e){return i.resolve(t()).then((function(){return e}))}),(function(e){return i.resolve(t()).then((function(){throw e}))})):this.then(t,t)},F);function F(e){if(this[E]=P++,this._result=this._state=void 0,this._subscribers=[],b!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof F))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this,i=e;try{i((function(e){S(t,e)}),(function(e){L(t,e)}))}catch(i){L(t,i)}}}function B(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[E]||D(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||C(this.promise,this._result)):L(this.promise,new Error("Array Methods must be provided an Array"))}return M.prototype.then=v,M.all=function(e){return new x(this,e).promise},M.race=function(e){var t=this;return n(e)?new t((function(i,n){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(i,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},M.resolve=A,M.reject=function(e){var t=new this(b);return L(t,e),t},M._setScheduler=function(e){s=e},M._setAsap=function(e){o=e},M._asap=o,M.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=M},M.Promise=M}()}).call(this,i(16),i(17))},function(e,t){var i,n;function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return(i=setTimeout)(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}e=e.exports={};try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}var o,l=[],h=!1,u=-1;function d(){h&&o&&(h=!1,o.length?l=o.concat(l):u=-1,l.length)&&c()}function c(){if(!h){var e=s(d);h=!0;for(var t=l.length;t;){for(o=l,l=[];++u<t;)o&&o[u].run();u=-1,t=l.length}o=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new f(e,t)),1!==l.length||h||s(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";i.r(t);var n=i(9),r=i(12),a=i(10),s=i(1);t.default=function(e){var t=null,i=function(t,i){e.postMessage({msg:"logcat_callback",data:{type:t,logcat:i}})}.bind(this);r.a.install(),e.addEventListener("message",(function(r){switch(r.data.cmd){case"init":(t=new a.a(r.data.param[0],r.data.param[1])).on(s.a.IO_ERROR,function(t,i){e.postMessage({msg:s.a.IO_ERROR,data:{type:t,info:i}})}.bind(this)),t.on(s.a.DEMUX_ERROR,function(t,i){e.postMessage({msg:s.a.DEMUX_ERROR,data:{type:t,info:i}})}.bind(this)),t.on(s.a.INIT_SEGMENT,function(t,i){t={msg:s.a.INIT_SEGMENT,data:{type:t,data:i}},e.postMessage(t,[i.data])}.bind(this)),t.on(s.a.MEDIA_SEGMENT,function(t,i){t={msg:s.a.MEDIA_SEGMENT,data:{type:t,data:i}},e.postMessage(t,[i.data])}.bind(this)),t.on(s.a.LOADING_COMPLETE,function(){var t={msg:s.a.LOADING_COMPLETE};e.postMessage(t)}.bind(this)),t.on(s.a.RECOVERED_EARLY_EOF,function(){var t={msg:s.a.RECOVERED_EARLY_EOF};e.postMessage(t)}.bind(this)),t.on(s.a.MEDIA_INFO,function(t){t={msg:s.a.MEDIA_INFO,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.METADATA_ARRIVED,function(t){t={msg:s.a.METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.SCRIPTDATA_ARRIVED,function(t){t={msg:s.a.SCRIPTDATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.TIMED_ID3_METADATA_ARRIVED,function(t){t={msg:s.a.TIMED_ID3_METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.SMPTE2038_METADATA_ARRIVED,function(t){t={msg:s.a.SMPTE2038_METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.SCTE35_METADATA_ARRIVED,function(t){t={msg:s.a.SCTE35_METADATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.PES_PRIVATE_DATA_DESCRIPTOR,function(t){t={msg:s.a.PES_PRIVATE_DATA_DESCRIPTOR,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.PES_PRIVATE_DATA_ARRIVED,function(t){t={msg:s.a.PES_PRIVATE_DATA_ARRIVED,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.STATISTICS_INFO,function(t){t={msg:s.a.STATISTICS_INFO,data:t},e.postMessage(t)}.bind(this)),t.on(s.a.RECOMMEND_SEEKPOINT,function(t){e.postMessage({msg:s.a.RECOMMEND_SEEKPOINT,data:t})}.bind(this));break;case"destroy":t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(r.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":var o=r.data.param;n.a.applyConfig(o),!0===o.enableCallback?n.a.addLogListener(i):n.a.removeLogListener(i)}}))}},function(e,t,i){"use strict";i.r(t);var n=i(12),r=i(11),a={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function s(){return Object.assign({},a)}F.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},F.supportMSEH265Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')},F.supportNetworkStreamIO=function(){var e=new r.a({},s()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},F.getNetworkLoaderTypeName=function(){var e=new r.a({},s()),t=e.loaderType;return e.destroy(),t},F.supportNativeMediaPlayback=function(e){return"probably"===(e=(F.videoElement=null==F.videoElement?window.document.createElement("video"):F.videoElement).canPlayType(e))||"maybe"==e},F.getFeatureList=function(){var e={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.msePlayback=F.supportMSEH264Playback(),e.networkStreamIO=F.supportNetworkStreamIO(),e.networkLoaderName=F.getNetworkLoaderTypeName(),e.mseLivePlayback=e.msePlayback&&e.networkStreamIO,e.mseH265Playback=F.supportMSEH265Playback(),e.nativeMP4H264Playback=F.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=F.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=F.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=F.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e};var o=F,l=i(2),h=i(6),u=i.n(h),d=i(0),c=i(4),f={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info"},p=(h=i(13),i.n(h)),m=i(9),g=i(10),_=i(1),y=i(8),v=(M.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),m.a.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},M.prototype.on=function(e,t){this._emitter.addListener(e,t)},M.prototype.off=function(e,t){this._emitter.removeListener(e,t)},M.prototype.hasWorker=function(){return null!=this._worker},M.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},M.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},M.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},M.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},M.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},M.prototype._onInitSegment=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(_.a.INIT_SEGMENT,e,t)}))},M.prototype._onMediaSegment=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(_.a.MEDIA_SEGMENT,e,t)}))},M.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(_.a.LOADING_COMPLETE)}))},M.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(_.a.RECOVERED_EARLY_EOF)}))},M.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.MEDIA_INFO,e)}))},M.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.METADATA_ARRIVED,e)}))},M.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.SCRIPTDATA_ARRIVED,e)}))},M.prototype._onTimedID3MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.TIMED_ID3_METADATA_ARRIVED,e)}))},M.prototype._onSMPTE2038MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.SMPTE2038_METADATA_ARRIVED,e)}))},M.prototype._onSCTE35MetadataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.SCTE35_METADATA_ARRIVED,e)}))},M.prototype._onPESPrivateDataDescriptor=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.PES_PRIVATE_DATA_DESCRIPTOR,e)}))},M.prototype._onPESPrivateDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.PES_PRIVATE_DATA_ARRIVED,e)}))},M.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.STATISTICS_INFO,e)}))},M.prototype._onIOError=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(_.a.IO_ERROR,e,t)}))},M.prototype._onDemuxError=function(e,t){var i=this;Promise.resolve().then((function(){i._emitter.emit(_.a.DEMUX_ERROR,e,t)}))},M.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(_.a.RECOMMEND_SEEKPOINT,e)}))},M.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},M.prototype._onWorkerMessage=function(e){var t=e.data,i=t.data;if("destroyed"===t.msg||this._workerDestroying)this._workerDestroying=!1,this._worker.terminate(),this._worker=null;else switch(t.msg){case _.a.INIT_SEGMENT:case _.a.MEDIA_SEGMENT:this._emitter.emit(t.msg,i.type,i.data);break;case _.a.LOADING_COMPLETE:case _.a.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case _.a.MEDIA_INFO:Object.setPrototypeOf(i,y.a.prototype),this._emitter.emit(t.msg,i);break;case _.a.METADATA_ARRIVED:case _.a.SCRIPTDATA_ARRIVED:case _.a.TIMED_ID3_METADATA_ARRIVED:case _.a.SMPTE2038_METADATA_ARRIVED:case _.a.SCTE35_METADATA_ARRIVED:case _.a.PES_PRIVATE_DATA_DESCRIPTOR:case _.a.PES_PRIVATE_DATA_ARRIVED:case _.a.STATISTICS_INFO:this._emitter.emit(t.msg,i);break;case _.a.IO_ERROR:case _.a.DEMUX_ERROR:this._emitter.emit(t.msg,i.type,i.info);break;case _.a.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,i);break;case"logcat_callback":d.a.emitter.emit("log",i.type,i.logcat)}},M),A="error",E="source_open",b="update_end",w="buffer_full",S=i(7),T=i(3),C=(x.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},x.prototype.on=function(e,t){this._emitter.addListener(e,t)},x.prototype.off=function(e,t){this._emitter.removeListener(e,t)},x.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new T.a("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},x.prototype.detachMediaElement=function(){if(this._mediaSource){var e,t=this._mediaSource;for(e in this._sourceBuffers){var i;if((i=this._pendingSegments[e]).splice(0,i.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null,i=this._sourceBuffers[e]){if("closed"!==t.readyState){try{t.removeSourceBuffer(i)}catch(t){d.a.e(this.TAG,t.message)}i.removeEventListener("error",this.e.onSourceBufferError),i.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[e]=null,this._sourceBuffers[e]=null}}if("open"===t.readyState)try{t.endOfStream()}catch(t){d.a.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},x.prototype.appendInitSegment=function(e,t){if(this._mediaSource&&"open"===this._mediaSource.readyState){var i=e,n=""+i.container,r=(i.codec&&0<i.codec.length&&(n+=";codecs="+i.codec),!1);if(d.a.v(this.TAG,"Received Initialization Segment, mimeType: "+n),this._lastInitSegments[i.type]=i,n!==this._mimeTypes[i.type]){if(this._mimeTypes[i.type])d.a.v(this.TAG,"Notice: "+i.type+" mimeType changed, origin: "+this._mimeTypes[i.type]+", target: "+n);else{r=!0;try{var a=this._sourceBuffers[i.type]=this._mediaSource.addSourceBuffer(n);a.addEventListener("error",this.e.onSourceBufferError),a.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return d.a.e(this.TAG,e.message),void this._emitter.emit(A,{code:e.code,msg:e.message})}}this._mimeTypes[i.type]=n}t||this._pendingSegments[i.type].push(i),r||this._sourceBuffers[i.type]&&!this._sourceBuffers[i.type].updating&&this._doAppendSegments(),c.a.safari&&"audio/mpeg"===i.container&&0<i.mediaDuration&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=i.mediaDuration/1e3,this._updateMediaSourceDuration())}else this._pendingSourceBufferInit.push(e),this._pendingSegments[e.type].push(e)},x.prototype.appendMediaSegment=function(e){this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer(),!(e=this._sourceBuffers[e.type])||e.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},x.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var i=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{i.abort()}catch(e){d.a.e(this.TAG,e.message)}this._idrList.clear();var n=this._pendingSegments[t];if(n.splice(0,n.length),"closed"!==this._mediaSource.readyState){for(var r=0;r<i.buffered.length;r++){var a=i.buffered.start(r),s=i.buffered.end(r);this._pendingRemoveRanges[t].push({start:a,end:s})}i.updating||this._doRemoveRanges(),c.a.safari&&(n=this._lastInitSegments[t])&&(this._pendingSegments[t].push(n),i.updating||this._doAppendSegments())}}},x.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},x.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},x.prototype._needCleanupSourceBuffer=function(){if(this._config.autoCleanupSourceBuffer){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var i=this._sourceBuffers[e];if(i&&1<=(i=i.buffered).length&&t-i.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},x.prototype._doCleanupSourceBuffer=function(){var e,t=this._mediaElement.currentTime;for(e in this._sourceBuffers){var i=this._sourceBuffers[e];if(i){for(var n=i.buffered,r=!1,a=0;a<n.length;a++){var s,o=n.start(a),l=n.end(a);o<=t&&t<l+3?t-o>=this._config.autoCleanupMaxBackwardDuration&&(r=!0,s=t-this._config.autoCleanupMinBackwardDuration,this._pendingRemoveRanges[e].push({start:o,end:s})):l<t&&(r=!0,this._pendingRemoveRanges[e].push({start:o,end:l}))}r&&!i.updating&&this._doRemoveRanges()}}},x.prototype._updateMediaSourceDuration=function(){var e,t=this._sourceBuffers;0===this._mediaElement.readyState||"open"!==this._mediaSource.readyState||t.video&&t.video.updating||t.audio&&t.audio.updating||(t=this._mediaSource.duration,0<(e=this._pendingMediaDuration)&&(isNaN(t)||t<e)&&(d.a.v(this.TAG,"Update MediaSource duration from "+t+" to "+e),this._mediaSource.duration=e),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0)},x.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],i=this._pendingRemoveRanges[e];i.length&&!t.updating;){var n=i.shift();t.remove(n.start,n.end)}},x.prototype._doAppendSegments=function(){var e,t=this._pendingSegments;for(e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&0<t[e].length){var i,n,r=t[e].shift();if(r.timestampOffset&&(i=this._sourceBuffers[e].timestampOffset,n=r.timestampOffset/1e3,.1<Math.abs(i-n)&&(d.a.v(this.TAG,"Update MPEG audio timestampOffset from "+i+" to "+n),this._sourceBuffers[e].timestampOffset=n),delete r.timestampOffset),!r.data||0===r.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(r.data),this._isBufferFull=!1,"video"===e&&r.hasOwnProperty("info")&&this._idrList.appendArray(r.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(r),22===t.code?(this._isBufferFull||this._emitter.emit(w),this._isBufferFull=!0):(d.a.e(this.TAG,t.message),this._emitter.emit(A,{code:t.code,msg:t.message}))}}},x.prototype._onSourceOpen=function(){if(d.a.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),0<this._pendingSourceBufferInit.length)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(E)},x.prototype._onSourceEnded=function(){d.a.v(this.TAG,"MediaSource onSourceEnded")},x.prototype._onSourceClose=function(){d.a.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},x.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return 0<e.video.length||0<e.audio.length},x.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return 0<e.video.length||0<e.audio.length},x.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(b)},x.prototype._onSourceBufferError=function(e){d.a.e(this.TAG,"SourceBuffer Error: "+e)},x),L=(h=i(5),{NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"}),R={NETWORK_EXCEPTION:l.b.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.b.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.b.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.b.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:h.a.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:h.a.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:h.a.CODEC_UNSUPPORTED},I=(D.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},D.prototype.on=function(e,t){var i=this;e===f.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){i._emitter.emit(f.MEDIA_INFO,i.mediaInfo)})):e===f.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){i._emitter.emit(f.STATISTICS_INFO,i.statisticsInfo)})),this._emitter.addListener(e,t)},D.prototype.off=function(e,t){this._emitter.removeListener(e,t)},D.prototype.attachMediaElement=function(e){var t=this;if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new C(this._config),this._msectl.on(b,this._onmseUpdateEnd.bind(this)),this._msectl.on(w,this._onmseBufferFull.bind(this)),this._msectl.on(E,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(A,(function(e){t._emitter.emit(f.ERROR,L.MEDIA_ERROR,R.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},D.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},D.prototype.load=function(){var e=this;if(!this._mediaElement)throw new T.a("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new T.a("MSEPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(0<this._mediaElement.readyState&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new v(this._mediaDataSource,this._config),this._transmuxer.on(_.a.INIT_SEGMENT,(function(t,i){e._msectl.appendInitSegment(i)})),this._transmuxer.on(_.a.MEDIA_SEGMENT,(function(t,i){var n;e._msectl.appendMediaSegment(i),e._config.lazyLoad&&!e._config.isLive&&(n=e._mediaElement.currentTime,i.info.endDts>=1e3*(n+e._config.lazyLoadMaxDuration))&&null==e._progressChecker&&(d.a.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())})),this._transmuxer.on(_.a.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(f.LOADING_COMPLETE)})),this._transmuxer.on(_.a.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(f.RECOVERED_EARLY_EOF)})),this._transmuxer.on(_.a.IO_ERROR,(function(t,i){e._emitter.emit(f.ERROR,L.NETWORK_ERROR,t,i)})),this._transmuxer.on(_.a.DEMUX_ERROR,(function(t,i){e._emitter.emit(f.ERROR,L.MEDIA_ERROR,t,{code:-1,msg:i})})),this._transmuxer.on(_.a.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(f.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(_.a.METADATA_ARRIVED,(function(t){e._emitter.emit(f.METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(f.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(_.a.TIMED_ID3_METADATA_ARRIVED,(function(t){e._emitter.emit(f.TIMED_ID3_METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.SMPTE2038_METADATA_ARRIVED,(function(t){e._emitter.emit(f.SMPTE2038_METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.SCTE35_METADATA_ARRIVED,(function(t){e._emitter.emit(f.SCTE35_METADATA_ARRIVED,t)})),this._transmuxer.on(_.a.PES_PRIVATE_DATA_DESCRIPTOR,(function(t){e._emitter.emit(f.PES_PRIVATE_DATA_DESCRIPTOR,t)})),this._transmuxer.on(_.a.PES_PRIVATE_DATA_ARRIVED,(function(t){e._emitter.emit(f.PES_PRIVATE_DATA_ARRIVED,t)})),this._transmuxer.on(_.a.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(f.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(_.a.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},D.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},D.prototype.play=function(){return this._mediaElement.play()},D.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(D.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),D.prototype._fillStatisticsInfo=function(e){var t,i,n,r;return e.playerType=this._type,this._mediaElement instanceof HTMLVideoElement&&(t=!0,r=n=0,this._mediaElement.getVideoPlaybackQuality?(n=(i=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,r=i.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1,t&&(e.decodedFrames=n,e.droppedFrames=r)),e},D.prototype._onmseUpdateEnd=function(){var e,t=this._mediaElement.buffered,i=this._mediaElement.currentTime;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&0<t.length&&!this._mediaElement.paused&&(e=t.end(t.length-1))>this._config.liveBufferLatencyMaxLatency&&e-i>this._config.liveBufferLatencyMaxLatency&&(e-=this._config.liveBufferLatencyMinRemain,this.currentTime=e),this._config.lazyLoad&&!this._config.isLive){for(var n=0,r=0;r<t.length;r++){var a=t.start(r),s=t.end(r);if(a<=i&&i<s){n=s;break}}n>=i+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(d.a.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},D.prototype._onmseBufferFull=function(){d.a.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},D.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker)&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3))},D.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,i=!1,n=0;n<t.length;n++){var r=t.start(n),a=t.end(n);if(r<=e&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(i=!0);break}}i&&(window.clearInterval(this._progressChecker),this._progressChecker=null,i)&&(d.a.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume())},D.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,i=0;i<t.length;i++){var n=t.start(i),r=t.end(i);if(n<=e&&e<r)return!0}return!1},D.prototype._internalSeek=function(e){var t,i=this._isTimepointBuffered(e),n=!1,r=0;e<1&&0<this._mediaElement.buffered.length&&((t=this._mediaElement.buffered.start(0))<1&&e<t||c.a.safari)&&(n=!0,r=c.a.safari?.1:t),n?(this._requestSetTime=!0,this._mediaElement.currentTime=r):i?(this._alwaysSeekKeyframe?(t=this._msectl.getNearestKeyframe(Math.floor(1e3*e)),this._requestSetTime=!0,this._mediaElement.currentTime=null!=t?t.dts/1e3:e):(this._requestSetTime=!0,this._mediaElement.currentTime=e),null!=this._progressChecker&&this._checkProgressAndResume()):(null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))},D.prototype._checkAndApplyUnbufferedSeekpoint=function(){var e;this._seekpointRecord&&(this._seekpointRecord.recordTime<=this._now()-100?(e=this._mediaElement.currentTime,this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))):window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))},D.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;e||!this._receivedCanPlay||t.readyState<2?0<(e=t.buffered).length&&t.currentTime<e.start(0)&&(d.a.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+e.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)):this._mediaElement.removeEventListener("progress",this.e.onvProgress)},D.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},D.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,i=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&0<i.length&&((i=i.start(0))<1&&t<i||c.a.safari))return this._requestSetTime=!0,void(this._mediaElement.currentTime=c.a.safari?.1:i);this._isTimepointBuffered(t)?(this._alwaysSeekKeyframe&&null!=(i=this._msectl.getNearestKeyframe(Math.floor(1e3*t)))&&(this._requestSetTime=!0,this._mediaElement.currentTime=i.dts/1e3),null!=this._progressChecker&&this._checkProgressAndResume()):(this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50))}},D.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},D.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},D.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},D),k=(P.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},P.prototype.on=function(e,t){var i=this;e===f.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){i._emitter.emit(f.MEDIA_INFO,i.mediaInfo)})):e===f.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){i._emitter.emit(f.STATISTICS_INFO,i.statisticsInfo)})),this._emitter.addListener(e,t)},P.prototype.off=function(e,t){this._emitter.removeListener(e,t)},P.prototype.attachMediaElement=function(e){if((this._mediaElement=e).addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}},P.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},P.prototype.load=function(){if(!this._mediaElement)throw new T.a("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,0<this._mediaElement.readyState&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},P.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},P.prototype.play=function(){return this._mediaElement.play()},P.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(P.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement)&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight),e},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"statisticsInfo",{get:function(){var e,t,i,n,r={playerType:this._type,url:this._mediaDataSource.url};return this._mediaElement instanceof HTMLVideoElement&&(e=!0,n=i=0,this._mediaElement.getVideoPlaybackQuality?(i=(t=this._mediaElement.getVideoPlaybackQuality()).totalVideoFrames,n=t.droppedVideoFrames):null!=this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,n=this._mediaElement.webkitDroppedFrameCount):e=!1,e)&&(r.decodedFrames=i,r.droppedFrames=n),r},enumerable:!1,configurable:!0}),P.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(f.MEDIA_INFO,this.mediaInfo)},P.prototype._reportStatisticsInfo=function(){this._emitter.emit(f.STATISTICS_INFO,this.statisticsInfo)},P);function P(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new u.a,this._config=s(),"object"==typeof t&&Object.assign(this._config,t),"mse"===(t=e.type.toLowerCase())||"mpegts"===t||"m2ts"===t||"flv"===t)throw new T.b("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new T.b("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}function D(e,t){if(this.TAG="MSEPlayer",this._type="MSEPlayer",this._emitter=new u.a,this._config=s(),"object"==typeof t&&Object.assign(this._config,t),"mse"!==(t=e.type.toLowerCase())&&"mpegts"!==t&&"m2ts"!==t&&"flv"!==t)throw new T.b("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null,t=c.a.chrome&&(c.a.version.major<50||50===c.a.version.major&&c.a.version.build<2661),this._alwaysSeekKeyframe=!!(t||c.a.msedge||c.a.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}function x(e){this.TAG="MSEController",this._config=e,this._emitter=new u.a,this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new S.a}function M(e,t){if(this.TAG="Transmuxer",this._emitter=new u.a,t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=p()(18),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},m.a.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:m.a.getConfig()})}catch(i){d.a.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new g.a(e,t)}else this._controller=new g.a(e,t);var i;this._controller&&((i=this._controller).on(_.a.IO_ERROR,this._onIOError.bind(this)),i.on(_.a.DEMUX_ERROR,this._onDemuxError.bind(this)),i.on(_.a.INIT_SEGMENT,this._onInitSegment.bind(this)),i.on(_.a.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),i.on(_.a.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),i.on(_.a.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),i.on(_.a.MEDIA_INFO,this._onMediaInfo.bind(this)),i.on(_.a.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),i.on(_.a.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),i.on(_.a.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),i.on(_.a.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),i.on(_.a.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),i.on(_.a.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),i.on(_.a.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),i.on(_.a.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),i.on(_.a.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this)))}function F(){}n.a.install(),i={createPlayer:function(e,t){var i=e;if(null==i||"object"!=typeof i)throw new T.b("MediaDataSource must be an javascript object!");if(!i.hasOwnProperty("type"))throw new T.b("MediaDataSource must has type field to indicate video file type!");switch(i.type){case"mse":case"mpegts":case"m2ts":case"flv":return new I(i,t);default:return new k(i,t)}},isSupported:function(){return o.supportMSEH264Playback()},getFeatureList:function(){return o.getFeatureList()}},i.BaseLoader=l.a,i.LoaderStatus=l.c,i.LoaderErrors=l.b,i.Events=f,i.ErrorTypes=L,i.ErrorDetails=R,i.MSEPlayer=I,i.NativePlayer=k,i.LoggingControl=m.a,Object.defineProperty(i,"version",{enumerable:!0,get:function(){return"1.7.3"}}),t.default=i}],a={},n.m=r,n.c=a,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14))},function(e,t){t.AACDecoder=class{constructor(e){this.sampleRate=e.sampleRate,this.frameDurMs=Math.floor(1024e3/this.sampleRate),this.frameDurSec=this.frameDurMs/1e3}updateConfig(e){this.sampleRate=e.sampleRate,this.frameDurMs=1024e3/this.sampleRate,this.frameDurSec=this.frameDurMs/1e3}_getPktLen(e,t,i){return((3&e)<<11)+(t<<3)+((224&i)>>5)}sliceAACFrames(e,t){var i,n,r,a=[];let s=e;for(let e=0;e<t.length-1;)255==t[e]&&t[e+1]>>4==15?(i=this._getPktLen(t[e+3],t[e+4],t[e+5]))<=0||(n=t.subarray(e,e+i),(r=new Uint8Array(i)).set(n,0),a.push({ptime:s,data:r}),s+=this.frameDurSec,e+=i):e+=1;return a}}},function(e,t){e.exports={DEFAULT_SAMPLERATE:44100,DEFAULT_CHANNEL:1,H264AUD:[0,0,0,1,9,224],H265AUD:[0,0,0,1,70,1,80],DEF_AAC:"aac",DEF_MP3:"mp3",DEF_H265:"h265",DEF_HEVC:"hevc",DEF_H264:"h264",DEF_AVC:"avc",CODEC_OFFSET_TABLE:["hevc","h265","avc","h264","aac","mp3"]}},function(e,t,i){const n=i(171),r=i(103),a=i(74),s=i(29),o=i(5),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12,Reserved:13,"frequency is written explictly":15};function h(){this.listeners={},this.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e]=this.listeners[e].concat(t)},this.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(),this.listeners[e].splice(t,1),-1<t)},this.trigger=function(e){var t,i,n,r=this.listeners[e];if(r)if(2===arguments.length)for(i=r.length,t=0;t<i;++t)r[t].call(this,arguments[1]);else{for(n=[],t=arguments.length,t=1;t<arguments.length;++t)n.push(arguments[t]);for(i=r.length,t=0;t<i;++t)r[t].apply(this,n)}},this.dispose=function(){this.listeners={}}}h.prototype.setStartCode=function(e,t=!1){let i=null;return t?((i=e)[0]=r.DEFINE_STARTCODE[0],i[1]=r.DEFINE_STARTCODE[1],i[2]=r.DEFINE_STARTCODE[2],i[3]=r.DEFINE_STARTCODE[3]):((i=new Uint8Array(r.DEFINE_STARTCODE.length+e.length)).set(r.DEFINE_STARTCODE,0),i.set(e,r.DEFINE_STARTCODE.length)),i},h.prototype.setAACAdts=function(e){var t=null,i=this.aacProfile,n=l[this.sampleRate],r=new Uint8Array(7),a=r.length+e.length;return r[0]=255,r[1]=241,r[2]=(i-1<<6)+(n<<2),r[3]=128+(a>>11),r[4]=(2047&a)>>3,r[5]=31+((7&a)<<5),r[6]=252,(t=new Uint8Array(a)).set(r,0),t.set(e,r.length),t},h.prototype.demux=function(){let e=this;e.seekPos=-1,e.mp4boxfile=n.createFile(),e.movieInfo=null,e.videoCodec=null,e.durationMs=-1,e.fps=-1,e.sampleRate=-1,e.aacProfile=2,e.size={width:-1,height:-1},e.bufObject=s(),e.audioNone=!1,e.naluHeader={vps:null,sps:null,pps:null,sei:null},e.mp4boxfile.onError=function(e){},this.mp4boxfile.onReady=function(t){for(var i in(e.movieInfo=t).tracks)("VideoHandler"===t.tracks[i].name||"video"===t.tracks[i].type)&&(0<=t.tracks[i].codec.indexOf("hev")||0<=t.tracks[i].codec.indexOf("hvc")?e.videoCodec=o.CODEC_H265:0<=t.tracks[i].codec.indexOf("avc")&&(e.videoCodec=o.CODEC_H264),0<=t.tracks[i].codec.indexOf("av01")||0<=t.tracks[i].codec.indexOf("av1C"))&&(e.videoCodec=o.CODEC_AV1);let n=-1;var r;n=t.videoTracks[0].samples_duration/t.videoTracks[0].timescale,e.durationMs=1e3*n,e.fps=t.videoTracks[0].nb_samples/n,e.seekDiffTime=1/e.fps,e.size.width=t.videoTracks[0].track_width,e.size.height=t.videoTracks[0].track_height,0<t.audioTracks.length?(e.sampleRate=t.audioTracks[0].audio.sample_rate,r=t.audioTracks[0].codec.split("."),e.aacProfile=r[r.length-1]):e.audioNone=!0,null!=e.onMp4BoxReady&&e.onMp4BoxReady(e.videoCodec),e.initializeAllSourceBuffers(),e.mp4boxfile.start()},e.mp4boxfile.onSamples=function(t,i,n){for(let i=0;i<n.length;i++){let _=(p=n[i]).data,y=null;if(null!=_&&_&&(e.videoCodec!==o.CODEC_H264&&e.videoCodec!==o.CODEC_H265||!(_.length<4))){var s=p.dts/p.timescale;if(1===t){let t=null,i=p.is_sync;if(e.videoCodec===o.CODEC_H265){t=p.description.hvcC;var l=a.GET_NALU_TYPE(_[4]);if((l===r.HEVC_NAL_SEI_PREFIX||l===r.HEVC_NAL_SEI_SUFFIX)&&5==(31&_[6])){let t=0,i=0;for(;255==_[6+ ++i];)t+=255;let n=7+--i;var h=_[n]+t;let r="";for(let e=1;e<=16;e++)r+=_[++n];for(var u=h-16,d=0,c=new Uint8Array(u);c[d]=_[++n],++d<=u;);e.trigger("parse_sei",{data:c,pts:s})}i=i||l==r.DEFINE_KEY_FRAME||p.is_sync}else if(e.videoCodec===o.CODEC_H264&&(t=p.description.avcC,6==(31&_[4]))&&5==(31&_[5])){let t=0,i=0;for(;255==_[5+ ++i];)t+=255;let n=6+--i;h=_[n]+t;let r="";for(let e=1;e<=16;e++)r+=_[++n];var f=h-16;for(d=0,c=new Uint8Array(f);c[d]=_[++n],++d<=f;);e.trigger("parse_sei",{data:c,pts:s})}if(i){if(e.videoCodec==o.CODEC_H265?(l=t.nalu_arrays,e.naluHeader.vps=e.setStartCode(l[0][0].data,!1),e.naluHeader.sps=e.setStartCode(l[1][0].data,!1),e.naluHeader.pps=e.setStartCode(l[2][0].data,!1),3<l.length?e.naluHeader.sei=e.setStartCode(l[3][0].data,!1):e.naluHeader.sei=new Uint8Array):e.videoCodec==o.CODEC_H264&&(e.naluHeader.vps=new Uint8Array,e.naluHeader.sps=e.setStartCode(t.SPS[0].nalu,!1),e.naluHeader.pps=e.setStartCode(t.PPS[0].nalu,!1),e.naluHeader.sei=new Uint8Array),e.videoCodec===o.CODEC_H264||e.videoCodec===o.CODEC_H265)if(_[4]===e.naluHeader.vps[4]){var p=e.naluHeader.vps.length+4,m=e.naluHeader.vps.length+e.naluHeader.sps.length+4,g=e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+4;if(e.naluHeader.sei.length<=0&&0<e.naluHeader.sps.length&&_[p]===e.naluHeader.sps[4]&&0<e.naluHeader.pps.length&&_[m]===e.naluHeader.pps[4]&&78===_[g]){let t=0;for(let e=0;e<_.length;e++)if(_[e]===r.SOURCE_CODE_SEI_END&&a.GET_NALU_TYPE(_[e+5])===r.DEFINE_KEY_FRAME){t=e;break}_[3]=1,_[p-1]=1,_[m-1]=1,_[g-1]=1,_[2]=0,_[p-2]=0,_[m-2]=0,_[g-2]=0,_[1]=0,_[p-3]=0,_[m-3]=0,_[g-3]=0,_[t+1]=0,_[t+2]=0,_[t+3]=0,_[t+4]=1,e.naluHeader.vps=null,e.naluHeader.sps=null,e.naluHeader.pps=null,e.naluHeader.vps=new Uint8Array,e.naluHeader.sps=new Uint8Array,e.naluHeader.pps=new Uint8Array}else _=_.subarray(e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+e.naluHeader.sei.length)}else if(4<e.naluHeader.sei.length&&_[4]===e.naluHeader.sei[4]){p=_.subarray(0,10);let t=new Uint8Array(e.naluHeader.vps.length+p.length);t.set(p,0),t.set(e.naluHeader.vps,p.length),t[3]=1,e.naluHeader.vps=null,e.naluHeader.vps=new Uint8Array(t),t=null,_=_.subarray(10)}else if(0===e.naluHeader.sei.length&&78===_[4]){_=e.setStartCode(_,!0);let t=0;for(let e=0;e<_.length;e++)if(_[e]===r.SOURCE_CODE_SEI_END&&a.GET_NALU_TYPE(_[e+5])===r.DEFINE_KEY_FRAME){t=e;break}e.naluHeader.sei=_.subarray(0,t+1),_=new Uint8Array(_.subarray(t+1))}e.videoCodec===o.CODEC_AV1?(y=new Uint8Array(_.length)).set(_,0):((y=new Uint8Array(e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+e.naluHeader.sei.length+_.length)).set(e.naluHeader.vps,0),y.set(e.naluHeader.sps,e.naluHeader.vps.length),y.set(e.naluHeader.pps,e.naluHeader.vps.length+e.naluHeader.sps.length),y.set(e.naluHeader.sei,e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length),y.set(e.setStartCode(_,!0),e.naluHeader.vps.length+e.naluHeader.sps.length+e.naluHeader.pps.length+e.naluHeader.sei.length))}else e.videoCodec===o.CODEC_AV1?(y=new Uint8Array(_.length)).set(_,0):y=e.setStartCode(_,!0);e.bufObject.appendFrame(s,y,!0,i)}else 2==t&&(y=e.setAACAdts(_),e.bufObject.appendFrame(s,y,!1,!0))}}}},h.prototype.appendBufferData=function(e,t=0){return e.fileStart=t,this.mp4boxfile.appendBuffer(e)},h.prototype.finishBuffer=function(){this.mp4boxfile.flush()},h.prototype.play=function(){},h.prototype.getVideoCoder=function(){return this.videoCodec},h.prototype.getDurationMs=function(){return this.durationMs},h.prototype.getFPS=function(){return this.fps},h.prototype.getSampleRate=function(){return this.sampleRate},h.prototype.getSize=function(){return this.size},h.prototype.seek=function(e){0<=e&&(e=this.bufObject.seekIDR(e),this.seekPos=e)},h.prototype.popBuffer=function(e=1,t=-1){return t<0?null:1==e?this.bufObject.vFrame(t):2==e?this.bufObject.aFrame(t):void 0},h.prototype.addBuffer=function(e){e=e.id,this.mp4boxfile.setExtractionOptions(e)},h.prototype.initializeAllSourceBuffers=function(){if(this.movieInfo){var e=this.movieInfo;for(let i=0;i<e.tracks.length;i++){var t=e.tracks[i];this.addBuffer(t)}this.initializeSourceBuffers()}},h.prototype.onInitAppended=function(e){"open"===(e=e.target).ms.readyState&&(e.sampleNum=0,e.removeEventListener("updateend",this.onInitAppended),e.ms.pendingInits--,0===e.ms.pendingInits)&&this.mp4boxfile.start()},h.prototype.initializeSourceBuffers=function(){var e=this.mp4boxfile.initializeSegmentation();for(let i=0;i<e.length;i++){var t=e[i].user;0===i&&(t.ms.pendingInits=0),t.addEventListener("updateend",this.onInitAppended),t.appendBuffer(e[i].buffer),t.segmentIndex=0,t.ms.pendingInits++}},e.exports=h},function(e,t,i){function n(e){if(!(e instanceof ArrayBuffer))throw"Needs an array buffer";this.buffer=e,this.dataview=new DataView(e),this.position=0}function r(e,t,i){this._byteOffset=t||0,e instanceof ArrayBuffer?this.buffer=e:"object"==typeof e?(this.dataView=e,t&&(this._byteOffset+=t)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=null==i?r.LITTLE_ENDIAN:i}function a(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)}function s(){var e=[],t=(e[3]="ES_Descriptor",e[4]="DecoderConfigDescriptor",e[5]="DecoderSpecificInfo",e[6]="SLConfigDescriptor",this.getDescriptorName=function(t){return e[t]},this),i={};return this.parseOneDescriptor=function(t){var n,r=0,a=t.readUint8();for(n=t.readUint8();128&n;)r=(127&n)<<7,n=t.readUint8();return u.debug("MPEG4DescriptorParser","Found "+(e[a]||"Descriptor "+a)+", size "+(r+=127&n)+" at position "+t.getPosition()),(a=new(e[a]?i[e[a]]:i.Descriptor)(r)).parse(t),a},i.Descriptor=function(e,t){this.tag=e,this.size=t,this.descs=[]},i.Descriptor.prototype.parse=function(e){this.data=e.readUint8Array(this.size)},i.Descriptor.prototype.findDescriptor=function(e){for(var t=0;t<this.descs.length;t++)if(this.descs[t].tag==e)return this.descs[t];return null},i.Descriptor.prototype.parseRemainingDescriptors=function(e){for(var i=e.position;e.position<i+this.size;){var n=t.parseOneDescriptor(e);this.descs.push(n)}},i.ES_Descriptor=function(e){i.Descriptor.call(this,3,e)},i.ES_Descriptor.prototype=new i.Descriptor,i.ES_Descriptor.prototype.parse=function(e){var t;this.ES_ID=e.readUint16(),this.flags=e.readUint8(),this.size-=3,128&this.flags?(this.dependsOn_ES_ID=e.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,64&this.flags?(t=e.readUint8(),this.URL=e.readString(t),this.size-=t+1):this.URL="",32&this.flags?(this.OCR_ES_ID=e.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(e)},i.ES_Descriptor.prototype.getOTI=function(e){var t=this.findDescriptor(4);return t?t.oti:0},i.ES_Descriptor.prototype.getAudioConfig=function(e){var t,i=this.findDescriptor(4);return(i=i&&i.findDescriptor(5))&&i.data?31==(t=(248&i.data[0])>>3)&&2<=i.data.length?32+((7&i.data[0])<<3)+((224&i.data[1])>>5):t:null},i.DecoderConfigDescriptor=function(e){i.Descriptor.call(this,4,e)},i.DecoderConfigDescriptor.prototype=new i.Descriptor,i.DecoderConfigDescriptor.prototype.parse=function(e){this.oti=e.readUint8(),this.streamType=e.readUint8(),this.bufferSize=e.readUint24(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32(),this.size-=13,this.parseRemainingDescriptors(e)},i.DecoderSpecificInfo=function(e){i.Descriptor.call(this,5,e)},i.DecoderSpecificInfo.prototype=new i.Descriptor,i.SLConfigDescriptor=function(e){i.Descriptor.call(this,6,e)},i.SLConfigDescriptor.prototype=new i.Descriptor,this}function o(){}function l(){}function h(e){this.stream=e||new a,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1}var u=(new Date,{setLogLevel:function(e){e==this.debug||e==this.info||e==this.warn||this.error},debug:function(e,t){void 0===console.debug&&(console.debug=console.log)},log:function(e,t){this.debug(e.msg)},info:function(e,t){},warn:function(e,t){},error:function(e,t){}}),d=(u.getDurationString=function(e,t){var i;function n(e,t){for(var i=(""+e).split(".");i[0].length<t;)i[0]="0"+i[0];return i.join(".")}e<0?(i=!0,e=-e):i=!1,e/=t||1;var r=(e-=3600*(t=Math.floor(e/3600)),Math.floor(e/60)),a=1e3*(e-=60*r);return a-=1e3*(e=Math.floor(e)),a=Math.floor(a),(i?"-":"")+t+":"+n(r,2)+":"+n(e,2)+"."+n(a,3)},u.printRanges=function(e){var t=e.length;if(0<t){for(var i="",n=0;n<t;n++)0<n&&(i+=","),i+="["+u.getDurationString(e.start(n))+","+u.getDurationString(e.end(n))+"]";return i}return"(empty)"},t.Log=u,n.prototype.getPosition=function(){return this.position},n.prototype.getEndPosition=function(){return this.buffer.byteLength},n.prototype.getLength=function(){return this.buffer.byteLength},n.prototype.seek=function(e){return e=Math.max(0,Math.min(this.buffer.byteLength,e)),this.position=isNaN(e)||!isFinite(e)?0:e,!0},n.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},n.prototype.readAnyInt=function(e,t){var i=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:i=t?this.dataview.getInt8(this.position):this.dataview.getUint8(this.position);break;case 2:i=t?this.dataview.getInt16(this.position):this.dataview.getUint16(this.position);break;case 3:if(t)throw"No method for reading signed 24 bits values";i=this.dataview.getUint8(this.position)<<16,i=(i|=this.dataview.getUint8(this.position+1)<<8)|this.dataview.getUint8(this.position+2);break;case 4:i=t?this.dataview.getInt32(this.position):this.dataview.getUint32(this.position);break;case 8:if(t)throw"No method for reading signed 64 bits values";i=this.dataview.getUint32(this.position)<<32,i|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,i}throw"Not enough bytes in buffer"},n.prototype.readUint8=function(){return this.readAnyInt(1,!1)},n.prototype.readUint16=function(){return this.readAnyInt(2,!1)},n.prototype.readUint24=function(){return this.readAnyInt(3,!1)},n.prototype.readUint32=function(){return this.readAnyInt(4,!1)},n.prototype.readUint64=function(){return this.readAnyInt(8,!1)},n.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var t="",i=0;i<e;i++)t+=String.fromCharCode(this.readUint8());return t}throw"Not enough bytes in buffer"},n.prototype.readCString=function(){for(var e=[];;){var t=this.readUint8();if(0===t)break;e.push(t)}return String.fromCharCode.apply(null,e)},n.prototype.readInt8=function(){return this.readAnyInt(1,!0)},n.prototype.readInt16=function(){return this.readAnyInt(2,!0)},n.prototype.readInt32=function(){return this.readAnyInt(4,!0)},n.prototype.readInt64=function(){return this.readAnyInt(8,!1)},n.prototype.readUint8Array=function(e){for(var t=new Uint8Array(e),i=0;i<e;i++)t[i]=this.readUint8();return t},n.prototype.readInt16Array=function(e){for(var t=new Int16Array(e),i=0;i<e;i++)t[i]=this.readInt16();return t},n.prototype.readUint16Array=function(e){for(var t=new Int16Array(e),i=0;i<e;i++)t[i]=this.readUint16();return t},n.prototype.readUint32Array=function(e){for(var t=new Uint32Array(e),i=0;i<e;i++)t[i]=this.readUint32();return t},n.prototype.readInt32Array=function(e){for(var t=new Int32Array(e),i=0;i<e;i++)t[i]=this.readInt32();return t},t.MP4BoxStream=n,(r.prototype={}).getPosition=function(){return this.position},r.prototype._realloc=function(e){if(this._dynamicSize){var t=this._byteOffset+this.position+e,i=this._buffer.byteLength;if(t<=i)t>this._byteLength&&(this._byteLength=t);else{for(i<1&&(i=1);i<t;)i*=2;e=new ArrayBuffer(i);var n=new Uint8Array(this._buffer);new Uint8Array(e,0,n.length).set(n),this.buffer=e,this._byteLength=t}}},r.prototype._trimAlloc=function(){var e,t,i;this._byteLength!=this._buffer.byteLength&&(e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),i=new Uint8Array(this._buffer,0,t.length),t.set(i),this.buffer=e)},r.BIG_ENDIAN=!1,r.LITTLE_ENDIAN=!0,r.prototype._byteLength=0,Object.defineProperty(r.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(r.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(r.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),r.prototype.seek=function(e){e=Math.max(0,Math.min(this.byteLength,e)),this.position=isNaN(e)||!isFinite(e)?0:e},r.prototype.isEof=function(){return this.position>=this._byteLength},r.prototype.mapUint8Array=function(e){this._realloc(+e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=+e,t},r.prototype.readInt32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var i=new Int32Array(e);return r.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),r.arrayToNative(i,null==t?this.endianness:t),this.position+=i.byteLength,i},r.prototype.readInt16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var i=new Int16Array(e);return r.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),r.arrayToNative(i,null==t?this.endianness:t),this.position+=i.byteLength,i},r.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Int8Array(e);return r.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},r.prototype.readUint32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var i=new Uint32Array(e);return r.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),r.arrayToNative(i,null==t?this.endianness:t),this.position+=i.byteLength,i},r.prototype.readUint16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var i=new Uint16Array(e);return r.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),r.arrayToNative(i,null==t?this.endianness:t),this.position+=i.byteLength,i},r.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Uint8Array(e);return r.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},r.prototype.readFloat64Array=function(e,t){e=null==e?this.byteLength-this.position/8:e;var i=new Float64Array(e);return r.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),r.arrayToNative(i,null==t?this.endianness:t),this.position+=i.byteLength,i},r.prototype.readFloat32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var i=new Float32Array(e);return r.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),r.arrayToNative(i,null==t?this.endianness:t),this.position+=i.byteLength,i},r.prototype.readInt32=function(e){return e=this._dataView.getInt32(this.position,null==e?this.endianness:e),this.position+=4,e},r.prototype.readInt16=function(e){return e=this._dataView.getInt16(this.position,null==e?this.endianness:e),this.position+=2,e},r.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},r.prototype.readUint32=function(e){return e=this._dataView.getUint32(this.position,null==e?this.endianness:e),this.position+=4,e},r.prototype.readUint16=function(e){return e=this._dataView.getUint16(this.position,null==e?this.endianness:e),this.position+=2,e},r.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},r.prototype.readFloat32=function(e){return e=this._dataView.getFloat32(this.position,null==e?this.endianness:e),this.position+=4,e},r.prototype.readFloat64=function(e){return e=this._dataView.getFloat64(this.position,null==e?this.endianness:e),this.position+=8,e},r.endianness=0<new Int8Array(new Int16Array([1]).buffer)[0],r.memcpy=function(e,t,i,n,r){e=new Uint8Array(e,t,r),t=new Uint8Array(i,n,r),e.set(t)},r.arrayToNative=function(e,t){return t==this.endianness?e:this.flipArrayEndianness(e)},r.nativeToEndian=function(e,t){return this.endianness==t?e:this.flipArrayEndianness(e)},r.flipArrayEndianness=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i=0;i<e.byteLength;i+=e.BYTES_PER_ELEMENT)for(var n=i+e.BYTES_PER_ELEMENT-1,r=i;r<n;n--,r++){var a=t[r];t[r]=t[n],t[n]=a}return e},r.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return String.fromCharCode.apply(null,t)},r.prototype.readString=function(e,t){return null==t||"ASCII"==t?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(null==e?this.byteLength-this.position:e)]):new TextDecoder(t).decode(this.mapUint8Array(e))},r.prototype.readCString=function(e){var t=this.byteLength-this.position,i=new Uint8Array(this._buffer,this._byteOffset+this.position),n=t;null!=e&&(n=Math.min(e,t));for(var r=0;r<n&&0!==i[r];r++);var a=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(r)]);return null!=e?this.position+=n-r:r!=t&&(this.position+=1),a},Math.pow(2,32)),c=(r.prototype.readInt64=function(){return this.readInt32()*d+this.readUint32()},r.prototype.readUint64=function(){return this.readUint32()*d+this.readUint32()},r.prototype.readInt64=function(){return this.readUint32()*d+this.readUint32()},r.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},(t.DataStream=r).prototype.save=function(e){var t=new Blob([this.buffer]);if(!window.URL||!URL.createObjectURL)throw"DataStream.save: Can't create object URL.";t=window.URL.createObjectURL(t);var i=document.createElement("a");document.body.appendChild(i),i.setAttribute("href",t),i.setAttribute("download",e),i.setAttribute("target","_self"),i.click(),window.URL.revokeObjectURL(t)},r.prototype._dynamicSize=!0,Object.defineProperty(r.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),r.prototype.shift=function(e){var t=new ArrayBuffer(this._byteLength-e),i=new Uint8Array(t),n=new Uint8Array(this._buffer,e,i.length);i.set(n),this.buffer=t,this.position-=e},r.prototype.writeInt32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,t);else for(var i=0;i<e.length;i++)this.writeInt32(e[i],t)},r.prototype.writeInt16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,t);else for(var i=0;i<e.length;i++)this.writeInt16(e[i],t)},r.prototype.writeInt8Array=function(e){if(this._realloc(+e.length),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var t=0;t<e.length;t++)this.writeInt8(e[t])},r.prototype.writeUint32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,t);else for(var i=0;i<e.length;i++)this.writeUint32(e[i],t)},r.prototype.writeUint16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,t);else for(var i=0;i<e.length;i++)this.writeUint16(e[i],t)},r.prototype.writeUint8Array=function(e){if(this._realloc(+e.length),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},r.prototype.writeFloat64Array=function(e,t){if(this._realloc(8*e.length),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,t);else for(var i=0;i<e.length;i++)this.writeFloat64(e[i],t)},r.prototype.writeFloat32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)r.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,t);else for(var i=0;i<e.length;i++)this.writeFloat32(e[i],t)},r.prototype.writeInt32=function(e,t){this._realloc(4),this._dataView.setInt32(this.position,e,null==t?this.endianness:t),this.position+=4},r.prototype.writeInt16=function(e,t){this._realloc(2),this._dataView.setInt16(this.position,e,null==t?this.endianness:t),this.position+=2},r.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},r.prototype.writeUint32=function(e,t){this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},r.prototype.writeUint16=function(e,t){this._realloc(2),this._dataView.setUint16(this.position,e,null==t?this.endianness:t),this.position+=2},r.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},r.prototype.writeFloat32=function(e,t){this._realloc(4),this._dataView.setFloat32(this.position,e,null==t?this.endianness:t),this.position+=4},r.prototype.writeFloat64=function(e,t){this._realloc(8),this._dataView.setFloat64(this.position,e,null==t?this.endianness:t),this.position+=8},r.prototype.writeUCS2String=function(e,t,i){null==i&&(i=e.length);for(var n=0;n<e.length&&n<i;n++)this.writeUint16(e.charCodeAt(n),t);for(;n<i;n++)this.writeUint16(0)},r.prototype.writeString=function(e,t,i){var n=0;if(null==t||"ASCII"==t)if(null!=i){var r=Math.min(e.length,i);for(n=0;n<r;n++)this.writeUint8(e.charCodeAt(n));for(;n<i;n++)this.writeUint8(0)}else for(n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));else this.writeUint8Array(new TextEncoder(t).encode(e.substring(0,i)))},r.prototype.writeCString=function(e,t){var i=0;if(null!=t){var n=Math.min(e.length,t);for(i=0;i<n;i++)this.writeUint8(e.charCodeAt(i));for(;i<t;i++)this.writeUint8(0)}else{for(i=0;i<e.length;i++)this.writeUint8(e.charCodeAt(i));this.writeUint8(0)}},r.prototype.writeStruct=function(e,t){for(var i=0;i<e.length;i+=2){var n=e[i+1];this.writeType(n,t[e[i]],t)}},r.prototype.writeType=function(e,t,i){var n;if("function"==typeof e)return e(this,t);if("object"==typeof e&&!(e instanceof Array))return e.set(this,t,i);var a=null,s="ASCII";switch(i=this.position,"string"==typeof e&&/:/.test(e)&&(e=(n=e.split(":"))[0],a=parseInt(n[1])),"string"==typeof e&&/,/.test(e)&&(e=(n=e.split(","))[0],s=parseInt(n[1])),e){case"uint8":this.writeUint8(t);break;case"int8":this.writeInt8(t);break;case"uint16":this.writeUint16(t,this.endianness);break;case"int16":this.writeInt16(t,this.endianness);break;case"uint32":this.writeUint32(t,this.endianness);break;case"int32":this.writeInt32(t,this.endianness);break;case"float32":this.writeFloat32(t,this.endianness);break;case"float64":this.writeFloat64(t,this.endianness);break;case"uint16be":this.writeUint16(t,r.BIG_ENDIAN);break;case"int16be":this.writeInt16(t,r.BIG_ENDIAN);break;case"uint32be":this.writeUint32(t,r.BIG_ENDIAN);break;case"int32be":this.writeInt32(t,r.BIG_ENDIAN);break;case"float32be":this.writeFloat32(t,r.BIG_ENDIAN);break;case"float64be":this.writeFloat64(t,r.BIG_ENDIAN);break;case"uint16le":this.writeUint16(t,r.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(t,r.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(t,r.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(t,r.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(t,r.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(t,r.LITTLE_ENDIAN);break;case"cstring":this.writeCString(t,a);break;case"string":this.writeString(t,s,a);break;case"u16string":this.writeUCS2String(t,this.endianness,a);break;case"u16stringle":this.writeUCS2String(t,r.LITTLE_ENDIAN,a);break;case"u16stringbe":this.writeUCS2String(t,r.BIG_ENDIAN,a);break;default:if(3!=e.length)this.writeStruct(e,t);else for(var o=e[1],l=0;l<t.length;l++)this.writeType(o,t[l])}null!=a&&(this.position=i,this._realloc(a),this.position=i+a)},r.prototype.writeUint64=function(e){var t=Math.floor(e/d);this.writeUint32(t),this.writeUint32(4294967295&e)},r.prototype.writeUint24=function(e){this.writeUint8((16711680&e)>>16),this.writeUint8((65280&e)>>8),this.writeUint8(255&e)},r.prototype.adjustUint32=function(e,t){var i=this.position;this.seek(e),this.writeUint32(t),this.seek(i)},r.prototype.mapInt32Array=function(e,t){this._realloc(4*e);var i=new Int32Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(i,null==t?this.endianness:t),this.position+=4*e,i},r.prototype.mapInt16Array=function(e,t){this._realloc(2*e);var i=new Int16Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(i,null==t?this.endianness:t),this.position+=2*e,i},r.prototype.mapInt8Array=function(e){this._realloc(+e);var t=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=+e,t},r.prototype.mapUint32Array=function(e,t){this._realloc(4*e);var i=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(i,null==t?this.endianness:t),this.position+=4*e,i},r.prototype.mapUint16Array=function(e,t){this._realloc(2*e);var i=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(i,null==t?this.endianness:t),this.position+=2*e,i},r.prototype.mapFloat64Array=function(e,t){this._realloc(8*e);var i=new Float64Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(i,null==t?this.endianness:t),this.position+=8*e,i},r.prototype.mapFloat32Array=function(e,t){this._realloc(4*e);var i=new Float32Array(this._buffer,this.byteOffset+this.position,e);return r.arrayToNative(i,null==t?this.endianness:t),this.position+=4*e,i},(a.prototype=new r(new ArrayBuffer,0,r.BIG_ENDIAN)).initialized=function(){var e;return-1<this.bufferIndex||(0<this.buffers.length?0===(e=this.buffers[0]).fileStart?(this.buffer=e,this.bufferIndex=0,u.debug("MultiBufferStream","Stream ready for parsing"),!0):(u.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1):(u.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1))},ArrayBuffer.concat=function(e,t){u.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+t.byteLength));var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i.buffer},a.prototype.reduceBuffer=function(e,t,i){var n=new Uint8Array(i);return n.set(new Uint8Array(e,t,i)),n.buffer.fileStart=e.fileStart+t,n.buffer.usedBytes=0,n.buffer},a.prototype.insertBuffer=function(e){for(var t=!0,i=0;i<this.buffers.length;i++){var n=this.buffers[i];if(e.fileStart<=n.fileStart){if(e.fileStart===n.fileStart){if(e.byteLength>n.byteLength){this.buffers.splice(i,1),i--;continue}u.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring")}else e.fileStart+e.byteLength<=n.fileStart||(e=this.reduceBuffer(e,0,n.fileStart-e.fileStart)),u.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(i,0,e),0===i&&(this.buffer=e);t=!1;break}if(e.fileStart<n.fileStart+n.byteLength){n=n.fileStart+n.byteLength-e.fileStart;var r=e.byteLength-n;if(!(0<r)){t=!1;break}e=this.reduceBuffer(e,n,r)}}t&&(u.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),0===i)&&(this.buffer=e)},a.prototype.logBufferLevel=function(e){for(var t,i,n=[],r="",a=0,s=0,o=0;o<this.buffers.length;o++)t=this.buffers[o],0===o?(n.push(i={}),i.start=t.fileStart,i.end=t.fileStart+t.byteLength,r+="["+i.start+"-"):i.end===t.fileStart?i.end=t.fileStart+t.byteLength:((i={}).start=t.fileStart,r+=n[n.length-1].end-1+"], ["+i.start+"-",i.end=t.fileStart+t.byteLength,n.push(i)),a+=t.usedBytes,s+=t.byteLength;0<n.length&&(r+=i.end-1+"]"),e=e?u.info:u.debug,0===this.buffers.length?e("MultiBufferStream","No more buffer in memory"):e("MultiBufferStream",this.buffers.length+" stored buffer(s) ("+a+"/"+s+" bytes), continuous ranges: "+r)},a.prototype.cleanBuffers=function(){for(var e,t=0;t<this.buffers.length;t++)(e=this.buffers[t]).usedBytes===e.byteLength&&(u.debug("MultiBufferStream","Removing buffer #"+t),this.buffers.splice(t,1),t--)},a.prototype.mergeNextBuffer=function(){var e,t,i,n;return this.bufferIndex+1<this.buffers.length&&(n=this.buffers[this.bufferIndex+1]).fileStart===this.buffer.fileStart+this.buffer.byteLength&&(e=this.buffer.byteLength,t=this.buffer.usedBytes,i=this.buffer.fileStart,this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,n),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=t,this.buffer.fileStart=i,u.debug("ISOFile","Concatenating buffer for box parsing (length: "+e+"->"+this.buffer.byteLength+")"),!0)},a.prototype.findPosition=function(e,t,i){for(var n=null,r=-1,a=!0===e?0:this.bufferIndex;a<this.buffers.length&&(n=this.buffers[a]).fileStart<=t;)r=a,i&&(n.fileStart+n.byteLength<=t?n.usedBytes=n.byteLength:n.usedBytes=t-n.fileStart,this.logBufferLevel()),a++;return-1!==r&&(n=this.buffers[r]).fileStart+n.byteLength>=t?(u.debug("MultiBufferStream","Found position in existing buffer #"+r),r):-1},a.prototype.findEndContiguousBuf=function(e){e=void 0!==e?e:this.bufferIndex;var t,i,n=this.buffers[e];if(this.buffers.length>e+1)for(t=e+1;t<this.buffers.length&&(i=this.buffers[t]).fileStart===n.fileStart+n.byteLength;t++)n=i;return n.fileStart+n.byteLength},a.prototype.getEndFilePositionAfter=function(e){var t=this.findPosition(!0,e,!1);return-1!==t?this.findEndContiguousBuf(t):e},a.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},a.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},a.prototype.seek=function(e,t,i){return-1!==(t=this.findPosition(t,e,i))?(this.buffer=this.buffers[t],this.bufferIndex=t,this.position=e-this.buffer.fileStart,u.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(u.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},a.prototype.getPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},a.prototype.getLength=function(){return this.byteLength},a.prototype.getEndPosition=function(){if(-1===this.bufferIndex||null===this.buffers[this.bufferIndex])throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=a,t.MPEG4DescriptorParser=s,{ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){c.FullBox.prototype=new c.Box,c.ContainerBox.prototype=new c.Box,c.SampleEntry.prototype=new c.Box,c.TrackGroupTypeBox.prototype=new c.FullBox,c.BASIC_BOXES.forEach((function(e){c.createBoxCtor(e)})),c.FULL_BOXES.forEach((function(e){c.createFullBoxCtor(e)})),c.CONTAINER_BOXES.forEach((function(e){c.createContainerBoxCtor(e[0],null,e[1])}))},Box:function(e,t,i){this.type=e,this.size=t,this.uuid=i},FullBox:function(e,t,i){c.Box.call(this,e,t,i),this.flags=0,this.version=0},ContainerBox:function(e,t,i){c.Box.call(this,e,t,i),this.boxes=[]},SampleEntry:function(e,t,i,n){c.ContainerBox.call(this,e,t),this.hdr_size=i,this.start=n},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,t){c.FullBox.call(this,e,t)},createBoxCtor:function(e,t){c.boxCodes.push(e),c[e+"Box"]=function(t){c.Box.call(this,e,t)},c[e+"Box"].prototype=new c.Box,t&&(c[e+"Box"].prototype.parse=t)},createFullBoxCtor:function(e,t){c[e+"Box"]=function(t){c.FullBox.call(this,e,t)},c[e+"Box"].prototype=new c.FullBox,c[e+"Box"].prototype.parse=function(e){this.parseFullHeader(e),t&&t.call(this,e)}},addSubBoxArrays:function(e){if(e)for(var t=(this.subBoxNames=e).length,i=0;i<t;i++)this[e[i]+"s"]=[]},createContainerBoxCtor:function(e,t,i){c[e+"Box"]=function(t){c.ContainerBox.call(this,e,t),c.addSubBoxArrays.call(this,i)},c[e+"Box"].prototype=new c.ContainerBox,t&&(c[e+"Box"].prototype.parse=t)},createMediaSampleEntryCtor:function(e,t,i){c.sampleEntryCodes[e]=[],c[e+"SampleEntry"]=function(e,t){c.SampleEntry.call(this,e,t),c.addSubBoxArrays.call(this,i)},c[e+"SampleEntry"].prototype=new c.SampleEntry,t&&(c[e+"SampleEntry"].prototype.parse=t)},createSampleEntryCtor:function(e,t,i,n){c.sampleEntryCodes[e].push(t),c[t+"SampleEntry"]=function(i){c[e+"SampleEntry"].call(this,t,i),c.addSubBoxArrays.call(this,n)},c[t+"SampleEntry"].prototype=new c[e+"SampleEntry"],i&&(c[t+"SampleEntry"].prototype.parse=i)},createEncryptedSampleEntryCtor:function(e,t,i){c.createSampleEntryCtor.call(this,e,t,i,["sinf"])},createSampleGroupCtor:function(e,t){c[e+"SampleGroupEntry"]=function(t){c.SampleGroupEntry.call(this,e,t)},c[e+"SampleGroupEntry"].prototype=new c.SampleGroupEntry,t&&(c[e+"SampleGroupEntry"].prototype.parse=t)},createTrackGroupCtor:function(e,t){c[e+"TrackGroupTypeBox"]=function(t){c.TrackGroupTypeBox.call(this,e,t)},c[e+"TrackGroupTypeBox"].prototype=new c.TrackGroupTypeBox,t&&(c[e+"TrackGroupTypeBox"].prototype.parse=t)},createUUIDBox:function(e,t,i,n){c.UUIDs.push(e),c.UUIDBoxes[e]=function(n){(t?c.FullBox:i?c.ContainerBox:c.Box).call(this,"uuid",n,e)},c.UUIDBoxes[e].prototype=new(t?c.FullBox:i?c.ContainerBox:c.Box),n&&(c.UUIDBoxes[e].prototype.parse=t?function(e){this.parseFullHeader(e),n&&n.call(this,e)}:n)}}),f=(c.initialize(),c.TKHD_FLAG_ENABLED=1,c.TKHD_FLAG_IN_MOVIE=2,c.TKHD_FLAG_IN_PREVIEW=4,c.TFHD_FLAG_BASE_DATA_OFFSET=1,c.TFHD_FLAG_SAMPLE_DESC=2,c.TFHD_FLAG_SAMPLE_DUR=8,c.TFHD_FLAG_SAMPLE_SIZE=16,c.TFHD_FLAG_SAMPLE_FLAGS=32,c.TFHD_FLAG_DUR_EMPTY=65536,c.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,c.TRUN_FLAGS_DATA_OFFSET=1,c.TRUN_FLAGS_FIRST_FLAG=4,c.TRUN_FLAGS_DURATION=256,c.TRUN_FLAGS_SIZE=512,c.TRUN_FLAGS_FLAGS=1024,c.TRUN_FLAGS_CTS_OFFSET=2048,c.Box.prototype.add=function(e){return this.addBox(new c[e+"Box"])},c.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},c.Box.prototype.set=function(e,t){return this[e]=t,this},c.Box.prototype.addEntry=function(e,t){return this[t=t||"entries"]||(this[t]=[]),this[t].push(e),this},(t.BoxParser=c).parseUUID=function(e){return c.parseHex16(e)},c.parseHex16=function(e){for(var t="",i=0;i<16;i++){var n=e.readUint8().toString(16);t+=1===n.length?"0"+n:n}return t},c.parseOneBox=function(e,t,i){var n,r,a=e.getPosition(),s=0;if(e.getEndPosition()-a<8)return u.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:c.ERR_NOT_ENOUGH_DATA};if(i&&i<8)return u.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:c.ERR_NOT_ENOUGH_DATA};var o=e.readUint32(),l=e.readString(4),h=l;if(u.debug("BoxParser","Found box of type '"+l+"' and size "+o+" at position "+a),s=8,"uuid"==l){if(e.getEndPosition()-e.getPosition()<16||i-s<16)return e.seek(a),u.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:c.ERR_NOT_ENOUGH_DATA};s+=16,h=r=c.parseUUID(e)}if(1==o){if(e.getEndPosition()-e.getPosition()<8||i&&i-s<8)return e.seek(a),u.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+l+'" box'),{code:c.ERR_NOT_ENOUGH_DATA};o=e.readUint64(),s+=8}else if(0===o)if(i)o=i;else if("mdat"!==l)return u.error("BoxParser","Unlimited box size not supported for type: '"+l+"'"),n=new c.Box(l,o),{code:c.OK,box:n,size:n.size};return o<s?(u.error("BoxParser","Box of type "+l+" has an invalid size "+o+" (too small to be a box)"),{code:c.ERR_NOT_ENOUGH_DATA,type:l,size:o,hdr_size:s,start:a}):i&&i<o?(u.error("BoxParser","Box of type '"+l+"' has a size "+o+" greater than its container size "+i),{code:c.ERR_NOT_ENOUGH_DATA,type:l,size:o,hdr_size:s,start:a}):a+o>e.getEndPosition()?(e.seek(a),u.info("BoxParser","Not enough data in stream to parse the entire '"+l+"' box"),{code:c.ERR_NOT_ENOUGH_DATA,type:l,size:o,hdr_size:s,start:a}):t?{code:c.OK,type:l,size:o,hdr_size:s,start:a}:(c[l+"Box"]?n=new c[l+"Box"](o):"uuid"!==l?(u.warn("BoxParser","Unknown box type: '"+l+"'"),(n=new c.Box(l,o)).has_unparsed_data=!0):c.UUIDBoxes[r]?n=new c.UUIDBoxes[r](o):(u.warn("BoxParser","Unknown uuid type: '"+r+"'"),(n=new c.Box(l,o)).uuid=r,n.has_unparsed_data=!0),n.hdr_size=s,n.start=a,n.write===c.Box.prototype.write&&"mdat"!==n.type&&(u.info("BoxParser","'"+h+"' box writing not yet implemented, keeping unparsed data in memory for later write"),n.parseDataAndRewind(e)),n.parse(e),(i=e.getPosition()-(n.start+n.size))<0?(u.warn("BoxParser","Parsing of box '"+h+"' did not read the entire indicated box data size (missing "+-i+" bytes), seeking forward"),e.seek(n.start+n.size)):0<i&&(u.error("BoxParser","Parsing of box '"+h+"' read "+i+" more bytes than the indicated box data size, seeking backwards"),e.seek(n.start+n.size)),{code:c.OK,box:n,size:n.size})},c.Box.prototype.parse=function(e){"mdat"!=this.type?this.data=e.readUint8Array(this.size-this.hdr_size):0===this.size?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},c.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},c.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},c.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},c.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},c.ContainerBox.prototype.parse=function(e){for(;e.getPosition()<this.start+this.size;){if((i=c.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==c.OK)return;var t,i=i.box;this.boxes.push(i),this.subBoxNames&&-1!=this.subBoxNames.indexOf(i.type)?this[this.subBoxNames[this.subBoxNames.indexOf(i.type)]+"s"].push(i):this[t="uuid"!==i.type?i.type:i.uuid]?u.warn("Box of type "+t+" already stored in field of this type"):this[t]=i}},c.Box.prototype.parseLanguage=function(e){this.language=e.readUint16(),(e=[])[0]=this.language>>10&31,e[1]=this.language>>5&31,e[2]=31&this.language,this.languageString=String.fromCharCode(e[0]+96,e[1]+96,e[2]+96)},c.SAMPLE_ENTRY_TYPE_VISUAL="Visual",c.SAMPLE_ENTRY_TYPE_AUDIO="Audio",c.SAMPLE_ENTRY_TYPE_HINT="Hint",c.SAMPLE_ENTRY_TYPE_METADATA="Metadata",c.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",c.SAMPLE_ENTRY_TYPE_SYSTEM="System",c.SAMPLE_ENTRY_TYPE_TEXT="Text",c.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},c.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},c.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},c.SampleEntry.prototype.parseFooter=function(e){c.ContainerBox.prototype.parse.call(this,e)},c.createMediaSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_HINT),c.createMediaSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_METADATA),c.createMediaSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SUBTITLE),c.createMediaSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SYSTEM),c.createMediaSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_TEXT),c.createMediaSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,(function(e){var t;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),t=Math.min(31,e.readUint8()),this.compressorname=e.readString(t),t<31&&e.readString(31-t),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)})),c.createMediaSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_AUDIO,(function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),c.createEncryptedSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),c.createEncryptedSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),c.createEncryptedSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),c.createEncryptedSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),c.createEncryptedSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_TEXT,"enct"),c.createEncryptedSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_METADATA,"encm"),c.createBoxCtor("a1lx",(function(e){var t=16*(1+(1&e.readUint8()));this.layer_size=[];for(var i=0;i<3;i++)this.layer_size[i]=16==t?e.readUint16():e.readUint32()})),c.createBoxCtor("a1op",(function(e){this.op_index=e.readUint8()})),c.createFullBoxCtor("auxC",(function(e){this.aux_type=e.readCString();var t=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(t)})),c.createBoxCtor("av1C",(function(e){var t=e.readUint8();if(t>>7&!1)u.error("av1C marker problem");else if(this.version=127&t,1!==this.version)u.error("av1C version "+this.version+" not supported");else if(t=e.readUint8(),this.seq_profile=t>>5&7,this.seq_level_idx_0=31&t,t=e.readUint8(),this.seq_tier_0=t>>7&1,this.high_bitdepth=t>>6&1,this.twelve_bit=t>>5&1,this.monochrome=t>>4&1,this.chroma_subsampling_x=t>>3&1,this.chroma_subsampling_y=t>>2&1,this.chroma_sample_position=3&t,t=e.readUint8(),this.reserved_1=t>>5&7,0!==this.reserved_1)u.error("av1C reserved_1 parsing problem");else{if(this.initial_presentation_delay_present=t>>4&1,1===this.initial_presentation_delay_present)this.initial_presentation_delay_minus_one=15&t;else if(this.reserved_2=15&t,0!==this.reserved_2)return void u.error("av1C reserved_2 parsing problem");t=this.size-this.hdr_size-4,this.configOBUs=e.readUint8Array(t)}})),c.createBoxCtor("avcC",(function(e){var t,i;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=3&e.readUint8(),this.nb_SPS_nalus=31&e.readUint8(),i=this.size-this.hdr_size-6,this.SPS=[],t=0;t<this.nb_SPS_nalus;t++)this.SPS[t]={},this.SPS[t].length=e.readUint16(),this.SPS[t].nalu=e.readUint8Array(this.SPS[t].length),i-=2+this.SPS[t].length;for(this.nb_PPS_nalus=e.readUint8(),i--,this.PPS=[],t=0;t<this.nb_PPS_nalus;t++)this.PPS[t]={},this.PPS[t].length=e.readUint16(),this.PPS[t].nalu=e.readUint8Array(this.PPS[t].length),i-=2+this.PPS[t].length;0<i&&(this.ext=e.readUint8Array(i))})),c.createBoxCtor("btrt",(function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()})),c.createBoxCtor("clap",(function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()})),c.createBoxCtor("clli",(function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()})),c.createFullBoxCtor("co64",(function(e){var t,i=e.readUint32();if(this.chunk_offsets=[],0===this.version)for(t=0;t<i;t++)this.chunk_offsets.push(e.readUint64())})),c.createFullBoxCtor("CoLL",(function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()})),c.createBoxCtor("colr",(function(e){var t;this.colour_type=e.readString(4),"nclx"===this.colour_type?(this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16(),t=e.readUint8(),this.full_range_flag=t>>7):"rICC"!==this.colour_type&&"prof"!==this.colour_type||(this.ICC_profile=e.readUint8Array(this.size-4))})),c.createFullBoxCtor("cprt",(function(e){this.parseLanguage(e),this.notice=e.readCString()})),c.createFullBoxCtor("cslg",(function(e){0===this.version&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())})),c.createFullBoxCtor("ctts",(function(e){var t,i=e.readUint32();if(this.sample_counts=[],this.sample_offsets=[],0===this.version)for(t=0;t<i;t++){this.sample_counts.push(e.readUint32());var n=e.readInt32();n<0&&u.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(n)}else if(1==this.version)for(t=0;t<i;t++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())})),c.createBoxCtor("dac3",(function(e){var t=e.readUint8(),i=e.readUint8();e=e.readUint8(),this.fscod=t>>6,this.bsid=t>>1&31,this.bsmod=(1&t)<<2|i>>6&3,this.acmod=i>>3&7,this.lfeon=i>>2&1,this.bit_rate_code=3&i|e>>5&7})),c.createBoxCtor("dec3",(function(e){var t=e.readUint16();this.data_rate=t>>3,this.num_ind_sub=7&t,this.ind_subs=[];for(var i=0;i<this.num_ind_sub+1;i++){var n={},r=(this.ind_subs.push(n),e.readUint8()),a=e.readUint8(),s=e.readUint8();n.fscod=r>>6,n.bsid=r>>1&31,n.bsmod=(1&r)<<4|a>>4&15,n.acmod=a>>1&7,n.lfeon=1&a,n.num_dep_sub=s>>1&15,0<n.num_dep_sub&&(n.chan_loc=(1&s)<<8|e.readUint8())}})),c.createFullBoxCtor("dfLa",(function(e){var t=[],i=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];for(this.parseFullHeader(e);;){var n=e.readUint8(),r=Math.min(127&n,i.length-1);if(r?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),t.push(i[r]),128&n)break}this.numMetadataBlocks=t.length+" ("+t.join(", ")+")"})),c.createBoxCtor("dimm",(function(e){this.bytessent=e.readUint64()})),c.createBoxCtor("dmax",(function(e){this.time=e.readUint32()})),c.createBoxCtor("dmed",(function(e){this.bytessent=e.readUint64()})),c.createFullBoxCtor("dref",(function(e){this.entries=[];for(var t,i=e.readUint32(),n=0;n<i;n++){if((t=c.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==c.OK)return;t=t.box,this.entries.push(t)}})),c.createBoxCtor("drep",(function(e){this.bytessent=e.readUint64()})),c.createFullBoxCtor("elng",(function(e){this.extended_language=e.readString(this.size-this.hdr_size)})),c.createFullBoxCtor("elst",(function(e){this.entries=[];for(var t=e.readUint32(),i=0;i<t;i++){var n={};this.entries.push(n),1===this.version?(n.segment_duration=e.readUint64(),n.media_time=e.readInt64()):(n.segment_duration=e.readUint32(),n.media_time=e.readInt32()),n.media_rate_integer=e.readInt16(),n.media_rate_fraction=e.readInt16()}})),c.createFullBoxCtor("emsg",(function(e){1==this.version?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var t=this.size-this.hdr_size-(16+(this.scheme_id_uri.length+1)+(this.value.length+1));1==this.version&&(t-=4),this.message_data=e.readUint8Array(t)})),c.createFullBoxCtor("esds",(function(e){e=e.readUint8Array(this.size-this.hdr_size);var t=new s;this.esd=t.parseOneDescriptor(new r(e.buffer,0,r.BIG_ENDIAN))})),c.createBoxCtor("fiel",(function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()})),c.createBoxCtor("frma",(function(e){this.data_format=e.readString(4)})),c.createBoxCtor("ftyp",(function(e){for(var t=this.size-this.hdr_size,i=(this.major_brand=e.readString(4),this.minor_version=e.readUint32(),t-=8,this.compatible_brands=[],0);4<=t;)this.compatible_brands[i]=e.readString(4),t-=4,i++})),c.createFullBoxCtor("hdlr",(function(e){0===this.version&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),"\0"===this.name[this.name.length-1])&&(this.name=this.name.slice(0,-1))})),c.createBoxCtor("hvcC",(function(e){this.configurationVersion=e.readUint8(),i=e.readUint8(),this.general_profile_space=i>>6,this.general_tier_flag=(32&i)>>5,this.general_profile_idc=31&i,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=4095&e.readUint16(),this.parallelismType=3&e.readUint8(),this.chroma_format_idc=3&e.readUint8(),this.bit_depth_luma_minus8=7&e.readUint8(),this.bit_depth_chroma_minus8=7&e.readUint8(),this.avgFrameRate=e.readUint16(),i=e.readUint8(),this.constantFrameRate=i>>6,this.numTemporalLayers=(13&i)>>3,this.temporalIdNested=(4&i)>>2,this.lengthSizeMinusOne=3&i,this.nalu_arrays=[];for(var t,i,n=e.readUint8(),r=0;r<n;r++)for(var a=[],s=(this.nalu_arrays.push(a),i=e.readUint8(),a.completeness=(128&i)>>7,a.nalu_type=63&i,e.readUint16()),o=0;o<s;o++){var l={};a.push(l),t=e.readUint16(),l.data=e.readUint8Array(t)}})),c.createFullBoxCtor("iinf",(function(e){var t;0===this.version?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var i=0;i<this.entry_count;i++){if((t=c.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==c.OK)return;"infe"!==t.box.type&&u.error("BoxParser","Expected 'infe' box, got "+t.box.type),this.item_infos[i]=t.box}})),c.createFullBoxCtor("iloc",(function(e){var t=e.readUint8(),i=(this.offset_size=t>>4&15,this.length_size=15&t,t=e.readUint8(),this.base_offset_size=t>>4&15,1===this.version||2===this.version?this.index_size=15&t:this.index_size=0,this.items=[],0);if(this.version<2)i=e.readUint16();else{if(2!==this.version)throw"version of iloc box not supported";i=e.readUint32()}for(var n=0;n<i;n++){var r={};if(this.items.push(r),!(this.version<2)&&2!==this.version)throw"version of iloc box not supported";switch(r.item_ID=e.readUint16(),1===this.version||2===this.version?r.construction_method=15&e.readUint16():r.construction_method=0,r.data_reference_index=e.readUint16(),this.base_offset_size){case 0:r.base_offset=0;break;case 4:r.base_offset=e.readUint32();break;case 8:r.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var a=e.readUint16();r.extents=[];for(var s=0;s<a;s++){var o={};if(r.extents.push(o),1===this.version||2===this.version)switch(this.index_size){case 0:o.extent_index=0;break;case 4:o.extent_index=e.readUint32();break;case 8:o.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:o.extent_offset=0;break;case 4:o.extent_offset=e.readUint32();break;case 8:o.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:o.extent_length=0;break;case 4:o.extent_length=e.readUint32();break;case 8:o.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}})),c.createBoxCtor("imir",(function(e){e=e.readUint8(),this.reserved=e>>7,this.axis=1&e})),c.createFullBoxCtor("infe",(function(e){0!==this.version&&1!==this.version||(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),1===this.version?(this.extension_type=e.readString(4),u.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size)):2<=this.version&&(2===this.version?this.item_ID=e.readUint16():3===this.version&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),"mime"===this.item_type?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):"uri "===this.item_type&&(this.item_uri_type=e.readCString()))})),c.createFullBoxCtor("ipma",(function(e){var t,i;for(entry_count=e.readUint32(),this.associations=[],t=0;t<entry_count;t++){var n={},r=(this.associations.push(n),this.version<1?n.id=e.readUint16():n.id=e.readUint32(),e.readUint8());for(n.props=[],i=0;i<r;i++){var a=e.readUint8(),s={};n.props.push(s),s.essential=(128&a)>>7==1,1&this.flags?s.property_index=(127&a)<<8|e.readUint8():s.property_index=127&a}}})),c.createFullBoxCtor("iref",(function(e){var t;for(this.references=[];e.getPosition()<this.start+this.size;){if((t=c.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==c.OK)return;(t=new(0===this.version?c.SingleItemTypeReferenceBox:c.SingleItemTypeReferenceBoxLarge)(t.type,t.size,t.hdr_size,t.start)).write===c.Box.prototype.write&&"mdat"!==t.type&&(u.warn("BoxParser",t.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),t.parseDataAndRewind(e)),t.parse(e),this.references.push(t)}})),c.createBoxCtor("irot",(function(e){this.angle=3&e.readUint8()})),c.createFullBoxCtor("ispe",(function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()})),c.createFullBoxCtor("kind",(function(e){this.schemeURI=e.readCString(),this.value=e.readCString()})),c.createFullBoxCtor("leva",(function(e){var t=e.readUint8();this.levels=[];for(var i=0;i<t;i++){var n={},r=((this.levels[i]=n).track_ID=e.readUint32(),e.readUint8());switch(n.padding_flag=r>>7,n.assignment_type=127&r,n.assignment_type){case 0:n.grouping_type=e.readString(4);break;case 1:n.grouping_type=e.readString(4),n.grouping_type_parameter=e.readUint32();break;case 2:case 3:break;case 4:n.sub_track_id=e.readUint32();break;default:u.warn("BoxParser","Unknown leva assignement type")}}})),c.createBoxCtor("lsel",(function(e){this.layer_id=e.readUint16()})),c.createBoxCtor("maxr",(function(e){this.period=e.readUint32(),this.bytes=e.readUint32()})),c.createBoxCtor("mdcv",(function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()})),c.createFullBoxCtor("mdhd",(function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()})),c.createFullBoxCtor("mehd",(function(e){1&this.flags&&(u.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),1==this.version?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()})),c.createFullBoxCtor("meta",(function(e){this.boxes=[],c.ContainerBox.prototype.parse.call(this,e)})),c.createFullBoxCtor("mfhd",(function(e){this.sequence_number=e.readUint32()})),c.createFullBoxCtor("mfro",(function(e){this._size=e.readUint32()})),c.createFullBoxCtor("mvhd",(function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()})),c.createBoxCtor("npck",(function(e){this.packetssent=e.readUint32()})),c.createBoxCtor("nump",(function(e){this.packetssent=e.readUint64()})),c.createFullBoxCtor("padb",(function(e){var t=e.readUint32();this.padbits=[];for(var i=0;i<Math.floor((t+1)/2);i++)this.padbits=e.readUint8()})),c.createBoxCtor("pasp",(function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()})),c.createBoxCtor("payl",(function(e){this.text=e.readString(this.size-this.hdr_size)})),c.createBoxCtor("payt",(function(e){this.payloadID=e.readUint32();var t=e.readUint8();this.rtpmap_string=e.readString(t)})),c.createFullBoxCtor("pdin",(function(e){var t=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var i=0;i<t;i++)this.rate[i]=e.readUint32(),this.initial_delay[i]=e.readUint32()})),c.createFullBoxCtor("pitm",(function(e){0===this.version?this.item_id=e.readUint16():this.item_id=e.readUint32()})),c.createFullBoxCtor("pixi",(function(e){var t;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],t=0;t<this.num_channels;t++)this.bits_per_channels[t]=e.readUint8()})),c.createBoxCtor("pmax",(function(e){this.bytes=e.readUint32()})),c.createFullBoxCtor("prft",(function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),0===this.version?this.media_time=e.readUint32():this.media_time=e.readUint64()})),c.createFullBoxCtor("pssh",(function(e){if(this.system_id=c.parseHex16(e),0<this.version){var t=e.readUint32();this.kid=[];for(var i=0;i<t;i++)this.kid[i]=c.parseHex16(e)}var n=e.readUint32();0<n&&(this.data=e.readUint8Array(n))})),c.createFullBoxCtor("clef",(function(e){this.width=e.readUint32(),this.height=e.readUint32()})),c.createFullBoxCtor("enof",(function(e){this.width=e.readUint32(),this.height=e.readUint32()})),c.createFullBoxCtor("prof",(function(e){this.width=e.readUint32(),this.height=e.readUint32()})),c.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),c.createBoxCtor("rtp ",(function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)})),c.createFullBoxCtor("saio",(function(e){1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var t=e.readUint32();this.offset=[];for(var i=0;i<t;i++)0===this.version?this.offset[i]=e.readUint32():this.offset[i]=e.readUint64()})),c.createFullBoxCtor("saiz",(function(e){1&this.flags&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var t=e.readUint32();if(this.sample_info_size=[],0===this.default_sample_info_size)for(var i=0;i<t;i++)this.sample_info_size[i]=e.readUint8()})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_METADATA,"mett",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_METADATA,"metx",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",(function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",(function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",(function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)})),c.createSampleEntryCtor(c.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",(function(e){this.parseHeader(e),this.parseFooter(e)})),c.createSampleGroupCtor("alst",(function(e){var t,i=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],t=0;t<i;t++)this.sample_offset[t]=e.readUint32();var n=this.description_length-4-4*i;for(this.num_output_samples=[],this.num_total_samples=[],t=0;t<n/4;t++)this.num_output_samples[t]=e.readUint16(),this.num_total_samples[t]=e.readUint16()})),c.createSampleGroupCtor("avll",(function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()})),c.createSampleGroupCtor("avss",(function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();for(var t=e.readUint8(),i=(this.durationFlag=t>>7,this.avgRateFlag=t>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[],e.readUint8()),n=0;n<i;n++){var r={};this.dependency.push(r),r.subSeqDirectionFlag=e.readUint8(),r.layerNumber=e.readUint8(),r.subSequenceIdentifier=e.readUint16()}})),c.createSampleGroupCtor("dtrt",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createSampleGroupCtor("mvif",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createSampleGroupCtor("prol",(function(e){this.roll_distance=e.readInt16()})),c.createSampleGroupCtor("rap ",(function(e){e=e.readUint8(),this.num_leading_samples_known=e>>7,this.num_leading_samples=127&e})),c.createSampleGroupCtor("rash",(function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(1===this.operation_point_count?2:6*this.operation_point_count)+9)u.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(1===this.operation_point_count)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var t=0;t<this.operation_point_count;t++)this.available_bitrate[t]=e.readUint32(),this.target_rate_share[t]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}})),c.createSampleGroupCtor("roll",(function(e){this.roll_distance=e.readInt16()})),c.SampleGroupEntry.prototype.parse=function(e){u.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},c.createSampleGroupCtor("scif",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createSampleGroupCtor("scnm",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createSampleGroupCtor("seig",(function(e){this.reserved=e.readUint8();var t=e.readUint8();this.crypt_byte_block=t>>4,this.skip_byte_block=15&t,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=c.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,1===this.isProtected&&0===this.Per_Sample_IV_Size&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))})),c.createSampleGroupCtor("stsa",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createSampleGroupCtor("sync",(function(e){e=e.readUint8(),this.NAL_unit_type=63&e})),c.createSampleGroupCtor("tele",(function(e){e=e.readUint8(),this.level_independently_decodable=e>>7})),c.createSampleGroupCtor("tsas",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createSampleGroupCtor("tscl",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createSampleGroupCtor("vipr",(function(e){u.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")})),c.createFullBoxCtor("sbgp",(function(e){this.grouping_type=e.readString(4),1===this.version?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var t=e.readUint32(),i=0;i<t;i++){var n={};this.entries.push(n),n.sample_count=e.readInt32(),n.group_description_index=e.readInt32()}})),c.createFullBoxCtor("schm",(function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),1&this.flags&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))})),c.createBoxCtor("sdp ",(function(e){this.sdptext=e.readString(this.size-this.hdr_size)})),c.createFullBoxCtor("sdtp",(function(e){var t,i=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var n=0;n<i;n++)t=e.readUint8(),this.is_leading[n]=t>>6,this.sample_depends_on[n]=t>>4&3,this.sample_is_depended_on[n]=t>>2&3,this.sample_has_redundancy[n]=3&t})),c.createFullBoxCtor("senc"),c.createFullBoxCtor("sgpd",(function(e){this.grouping_type=e.readString(4),u.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),1===this.version?this.default_length=e.readUint32():this.default_length=0,2<=this.version&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var t=e.readUint32(),i=0;i<t;i++){var n=new(c[this.grouping_type+"SampleGroupEntry"]?c[this.grouping_type+"SampleGroupEntry"]:c.SampleGroupEntry)(this.grouping_type);this.entries.push(n),1===this.version&&0===this.default_length?n.description_length=e.readUint32():n.description_length=this.default_length,n.write===c.SampleGroupEntry.prototype.write&&(u.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),n.data=e.readUint8Array(n.description_length),e.position-=n.description_length),n.parse(e)}})),c.createFullBoxCtor("sidx",(function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),0===this.version?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var t=e.readUint16(),i=0;i<t;i++){var n={},r=(this.references.push(n),e.readUint32());n.reference_type=r>>31&1,n.referenced_size=2147483647&r,n.subsegment_duration=e.readUint32(),r=e.readUint32(),n.starts_with_SAP=r>>31&1,n.SAP_type=r>>28&7,n.SAP_delta_time=268435455&r}})),c.SingleItemTypeReferenceBox=function(e,t,i,n){c.Box.call(this,e,t),this.hdr_size=i,this.start=n},c.SingleItemTypeReferenceBox.prototype=new c.Box,c.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var t=e.readUint16();this.references=[];for(var i=0;i<t;i++)this.references[i]=e.readUint16()},c.SingleItemTypeReferenceBoxLarge=function(e,t,i,n){c.Box.call(this,e,t),this.hdr_size=i,this.start=n},c.SingleItemTypeReferenceBoxLarge.prototype=new c.Box,c.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var t=e.readUint16();this.references=[];for(var i=0;i<t;i++)this.references[i]=e.readUint32()},c.createFullBoxCtor("SmDm",(function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()})),c.createFullBoxCtor("smhd",(function(e){this.balance=e.readUint16(),e.readUint16()})),c.createFullBoxCtor("ssix",(function(e){this.subsegments=[];for(var t=e.readUint32(),i=0;i<t;i++)for(var n={},r=(this.subsegments.push(n),n.ranges=[],e.readUint32()),a=0;a<r;a++){var s={};n.ranges.push(s),s.level=e.readUint8(),s.range_size=e.readUint24()}})),c.createFullBoxCtor("stco",(function(e){var t=e.readUint32();if(this.chunk_offsets=[],0===this.version)for(var i=0;i<t;i++)this.chunk_offsets.push(e.readUint32())})),c.createFullBoxCtor("stdp",(function(e){var t=(this.size-this.hdr_size)/2;this.priority=[];for(var i=0;i<t;i++)this.priority[i]=e.readUint16()})),c.createFullBoxCtor("sthd"),c.createFullBoxCtor("stri",(function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var t=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var i=0;i<t;i++)this.attribute_list[i]=e.readUint32()})),c.createFullBoxCtor("stsc",(function(e){var t,i=e.readUint32();if(this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],0===this.version)for(t=0;t<i;t++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())})),c.createFullBoxCtor("stsd",(function(e){var t,i,n,r;for(this.entries=[],n=e.readUint32(),t=1;t<=n;t++){if((i=c.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==c.OK)return;c[i.type+"SampleEntry"]?((r=new c[i.type+"SampleEntry"](i.size)).hdr_size=i.hdr_size,r.start=i.start):(u.warn("BoxParser","Unknown sample entry type: "+i.type),r=new c.SampleEntry(i.type,i.size,i.hdr_size,i.start)),r.write===c.SampleEntry.prototype.write&&(u.info("BoxParser","SampleEntry "+r.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),r.parseDataAndRewind(e)),r.parse(e),this.entries.push(r)}})),c.createFullBoxCtor("stsg",(function(e){this.grouping_type=e.readUint32();var t=e.readUint16();this.group_description_index=[];for(var i=0;i<t;i++)this.group_description_index[i]=e.readUint32()})),c.createFullBoxCtor("stsh",(function(e){var t,i=e.readUint32();if(this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],0===this.version)for(t=0;t<i;t++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())})),c.createFullBoxCtor("stss",(function(e){var t,i=e.readUint32();if(0===this.version)for(this.sample_numbers=[],t=0;t<i;t++)this.sample_numbers.push(e.readUint32())})),c.createFullBoxCtor("stsz",(function(e){var t;if(this.sample_sizes=[],0===this.version)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),t=0;t<this.sample_count;t++)0===this.sample_size?this.sample_sizes.push(e.readUint32()):this.sample_sizes[t]=this.sample_size})),c.createFullBoxCtor("stts",(function(e){var t,i,n=e.readUint32();if(this.sample_counts=[],this.sample_deltas=[],0===this.version)for(t=0;t<n;t++)this.sample_counts.push(e.readUint32()),(i=e.readInt32())<0&&(u.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),i=1),this.sample_deltas.push(i)})),c.createFullBoxCtor("stvi",(function(e){var t,i=e.readUint32();for(this.single_view_allowed=3&i,this.stereo_scheme=e.readUint32(),i=e.readUint32(),this.stereo_indication_type=e.readString(i),this.boxes=[];e.getPosition()<this.start+this.size;){if((t=c.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==c.OK)return;t=t.box,this.boxes.push(t),this[t.type]=t}})),c.createBoxCtor("styp",(function(e){c.ftypBox.prototype.parse.call(this,e)})),c.createFullBoxCtor("stz2",(function(e){var t,i;if(this.sample_sizes=[],0===this.version)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),i=e.readUint32(),4===this.field_size)for(t=0;t<i;t+=2){var n=e.readUint8();this.sample_sizes[t]=n>>4&15,this.sample_sizes[t+1]=15&n}else if(8===this.field_size)for(t=0;t<i;t++)this.sample_sizes[t]=e.readUint8();else if(16===this.field_size)for(t=0;t<i;t++)this.sample_sizes[t]=e.readUint16();else u.error("BoxParser","Error in length field in stz2 box")})),c.createFullBoxCtor("subs",(function(e){var t,i,n,r=e.readUint32();for(this.entries=[],t=0;t<r;t++){var a={};if((this.entries[t]=a).sample_delta=e.readUint32(),a.subsamples=[],0<(n=e.readUint16()))for(i=0;i<n;i++){var s={};a.subsamples.push(s),1==this.version?s.size=e.readUint32():s.size=e.readUint16(),s.priority=e.readUint8(),s.discardable=e.readUint8(),s.codec_specific_parameters=e.readUint32()}}})),c.createFullBoxCtor("tenc",(function(e){var t;e.readUint8(),0===this.version?e.readUint8():(t=e.readUint8(),this.default_crypt_byte_block=t>>4&15,this.default_skip_byte_block=15&t),this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=c.parseHex16(e),1===this.default_isProtected&&0===this.default_Per_Sample_IV_Size&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))})),c.createFullBoxCtor("tfdt",(function(e){1==this.version?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()})),c.createFullBoxCtor("tfhd",(function(e){var t=0;this.track_id=e.readUint32(),this.size-this.hdr_size>t&&this.flags&c.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),t+=8):this.base_data_offset=0,this.size-this.hdr_size>t&&this.flags&c.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),t+=4):this.default_sample_description_index=0,this.size-this.hdr_size>t&&this.flags&c.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),t+=4):this.default_sample_duration=0,this.size-this.hdr_size>t&&this.flags&c.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),t+=4):this.default_sample_size=0,this.size-this.hdr_size>t&&this.flags&c.TFHD_FLAG_SAMPLE_FLAGS?this.default_sample_flags=e.readUint32():this.default_sample_flags=0})),c.createFullBoxCtor("tfra",(function(e){this.track_ID=e.readUint32(),e.readUint24();for(var t=e.readUint8(),i=(this.length_size_of_traf_num=t>>4&3,this.length_size_of_trun_num=t>>2&3,this.length_size_of_sample_num=3&t,this.entries=[],e.readUint32()),n=0;n<i;n++)1===this.version?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()})),c.createFullBoxCtor("tkhd",(function(e){1==this.version?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()})),c.createBoxCtor("tmax",(function(e){this.time=e.readUint32()})),c.createBoxCtor("tmin",(function(e){this.time=e.readUint32()})),c.createBoxCtor("totl",(function(e){this.bytessent=e.readUint32()})),c.createBoxCtor("tpay",(function(e){this.bytessent=e.readUint32()})),c.createBoxCtor("tpyl",(function(e){this.bytessent=e.readUint64()})),c.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},c.createTrackGroupCtor("msrc"),c.TrackReferenceTypeBox=function(e,t,i,n){c.Box.call(this,e,t),this.hdr_size=i,this.start=n},c.TrackReferenceTypeBox.prototype=new c.Box,c.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},c.trefBox.prototype.parse=function(e){for(var t;e.getPosition()<this.start+this.size;){if((t=c.parseOneBox(e,!0,this.size-(e.getPosition()-this.start))).code!==c.OK)return;(t=new c.TrackReferenceTypeBox(t.type,t.size,t.hdr_size,t.start)).write===c.Box.prototype.write&&"mdat"!==t.type&&(u.info("BoxParser","TrackReference "+t.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),t.parseDataAndRewind(e)),t.parse(e),this.boxes.push(t)}},c.createFullBoxCtor("trep",(function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;){if((ret=c.parseOneBox(e,!1,this.size-(e.getPosition()-this.start))).code!==c.OK)return;box=ret.box,this.boxes.push(box)}})),c.createFullBoxCtor("trex",(function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()})),c.createBoxCtor("trpy",(function(e){this.bytessent=e.readUint64()})),c.createFullBoxCtor("trun",(function(e){var t=0;if(this.sample_count=e.readUint32(),this.size-this.hdr_size>(t+=4)&&this.flags&c.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),t+=4):this.data_offset=0,this.size-this.hdr_size>t&&this.flags&c.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),t+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>t)for(var i=0;i<this.sample_count;i++)this.flags&c.TRUN_FLAGS_DURATION&&(this.sample_duration[i]=e.readUint32()),this.flags&c.TRUN_FLAGS_SIZE&&(this.sample_size[i]=e.readUint32()),this.flags&c.TRUN_FLAGS_FLAGS&&(this.sample_flags[i]=e.readUint32()),this.flags&c.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?this.sample_composition_time_offset[i]=e.readUint32():this.sample_composition_time_offset[i]=e.readInt32())})),c.createFullBoxCtor("tsel",(function(e){this.switch_group=e.readUint32();var t=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var i=0;i<t;i++)this.attribute_list[i]=e.readUint32()})),c.createFullBoxCtor("txtC",(function(e){this.config=e.readCString()})),c.createFullBoxCtor("url ",(function(e){1!==this.flags&&(this.location=e.readCString())})),c.createFullBoxCtor("urn ",(function(e){this.name=e.readCString(),0<this.size-this.hdr_size-this.name.length-1&&(this.location=e.readCString())})),c.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,(function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")})),c.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,(function(e){this.system_id=c.parseHex16(e);var t=e.readUint32();0<t&&(this.data=e.readUint8Array(t))})),c.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),c.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,(function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=c.parseHex16(e)})),c.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,(function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var t=0;t<this.fragment_count;t++){var i={},n=0,r=1===this.version?(n=e.readUint64(),e.readUint64()):(n=e.readUint32(),e.readUint32());i.absolute_time=n,i.absolute_duration=r,this.entries.push(i)}})),c.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,(function(e){1===this.version?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())})),c.createFullBoxCtor("vmhd",(function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)})),c.createFullBoxCtor("vpcC",(function(e){var t;1===this.version?(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4,this.chromaSubsampling=t>>1&7,this.videoFullRangeFlag=1&t,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8()):(this.profile=e.readUint8(),this.level=e.readUint8(),t=e.readUint8(),this.bitDepth=t>>4&15,this.colorSpace=15&t,t=e.readUint8(),this.chromaSubsampling=t>>4&15,this.transferFunction=t>>1&7,this.videoFullRangeFlag=1&t),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)})),c.createBoxCtor("vttC",(function(e){this.text=e.readString(this.size-this.hdr_size)})),c.SampleEntry.prototype.isVideo=function(){return!1},c.SampleEntry.prototype.isAudio=function(){return!1},c.SampleEntry.prototype.isSubtitle=function(){return!1},c.SampleEntry.prototype.isMetadata=function(){return!1},c.SampleEntry.prototype.isHint=function(){return!1},c.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},c.SampleEntry.prototype.getWidth=function(){return""},c.SampleEntry.prototype.getHeight=function(){return""},c.SampleEntry.prototype.getChannelCount=function(){return""},c.SampleEntry.prototype.getSampleRate=function(){return""},c.SampleEntry.prototype.getSampleSize=function(){return""},c.VisualSampleEntry.prototype.isVideo=function(){return!0},c.VisualSampleEntry.prototype.getWidth=function(){return this.width},c.VisualSampleEntry.prototype.getHeight=function(){return this.height},c.AudioSampleEntry.prototype.isAudio=function(){return!0},c.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},c.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},c.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},c.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},c.MetadataSampleEntry.prototype.isMetadata=function(){return!0},c.decimalToHex=function(e,t){var i=Number(e).toString(16);for(t=null==t?2:t;i.length<t;)i="0"+i;return i},c.avc1SampleEntry.prototype.getCodec=c.avc2SampleEntry.prototype.getCodec=c.avc3SampleEntry.prototype.getCodec=c.avc4SampleEntry.prototype.getCodec=function(){var e=c.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+c.decimalToHex(this.avcC.AVCProfileIndication)+c.decimalToHex(this.avcC.profile_compatibility)+c.decimalToHex(this.avcC.AVCLevelIndication):e},c.hev1SampleEntry.prototype.getCodec=c.hvc1SampleEntry.prototype.getCodec=function(){var e=c.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(e+=".",this.hvcC.general_profile_space){case 0:e+="";break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C"}e=e+this.hvcC.general_profile_idc+".";for(var t=this.hvcC.general_profile_compatibility,i=0,n=0;n<32&&(i|=1&t,31!=n);n++)i<<=1,t>>=1;e=e+c.decimalToHex(i,0)+".",0===this.hvcC.general_tier_flag?e+="L":e+="H",e+=this.hvcC.general_level_idc;var r=!1,a="";for(n=5;0<=n;n--)(this.hvcC.general_constraint_indicator[n]||r)&&(a="."+c.decimalToHex(this.hvcC.general_constraint_indicator[n],0)+a,r=!0);e+=a}return e},c.mp4aSampleEntry.prototype.getCodec=function(){var e,t,i=c.SampleEntry.prototype.getCodec.call(this);return this.esds&&this.esds.esd?(e=this.esds.esd.getOTI(),t=this.esds.esd.getAudioConfig(),i+"."+c.decimalToHex(e)+(t?"."+t:"")):i},c.stxtSampleEntry.prototype.getCodec=function(){var e=c.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},c.av01SampleEntry.prototype.getCodec=function(){var e,t=c.SampleEntry.prototype.getCodec.call(this);return 2===this.av1C.seq_profile&&1===this.av1C.high_bitdepth?e=1===this.av1C.twelve_bit?"12":"10":this.av1C.seq_profile<=2&&(e=1===this.av1C.high_bitdepth?"10":"08"),t+"."+this.av1C.seq_profile+"."+this.av1C.seq_level_idx_0+(this.av1C.seq_tier_0?"H":"M")+"."+e},c.Box.prototype.writeHeader=function(e,t){this.size+=8,this.size>d&&(this.size+=8),"uuid"===this.type&&(this.size+=16),u.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(t||"")),this.size>d?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),"uuid"===this.type&&e.writeUint8Array(this.uuid),this.size>d&&e.writeUint64(this.size)},c.FullBox.prototype.writeHeader=function(e){this.size+=4,c.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},c.Box.prototype.write=function(e){"mdat"===this.type?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},c.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&(this.boxes[t].write(e),this.size+=this.boxes[t].size);u.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},c.TrackReferenceTypeBox.prototype.write=function(e){this.size=4*this.track_ids.length,this.writeHeader(e),e.writeUint32Array(this.track_ids)},c.avcCBox.prototype.write=function(e){var t;for(this.size=7,t=0;t<this.SPS.length;t++)this.size+=2+this.SPS[t].length;for(t=0;t<this.PPS.length;t++)this.size+=2+this.PPS[t].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),t=0;t<this.SPS.length;t++)e.writeUint16(this.SPS[t].length),e.writeUint8Array(this.SPS[t].nalu);for(e.writeUint8(this.PPS.length),t=0;t<this.PPS.length;t++)e.writeUint16(this.PPS[t].length),e.writeUint8Array(this.PPS[t].nalu);this.ext&&e.writeUint8Array(this.ext)},c.co64Box.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),t=0;t<this.chunk_offsets.length;t++)e.writeUint64(this.chunk_offsets[t])},c.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},c.cttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),1===this.version?e.writeInt32(this.sample_offsets[t]):e.writeUint32(this.sample_offsets[t])},c.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;u.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},c.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},c.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var i=this.entries[t];e.writeUint32(i.segment_duration),e.writeInt32(i.media_time),e.writeInt16(i.media_rate_integer),e.writeInt16(i.media_rate_fraction)}},c.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=16+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},c.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var t=0;t<this.compatible_brands.length;t++)e.writeString(this.compatible_brands[t],null,4)},c.hdlrBox.prototype.write=function(e){this.size=20+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},c.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},c.mdhdBox.prototype.write=function(e){this.size=20,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},c.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},c.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},c.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=96,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},c.SampleEntry.prototype.writeHeader=function(e){this.size=8,c.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},c.SampleEntry.prototype.writeFooter=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e),this.size+=this.boxes[t].size;u.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},c.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,u.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},c.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=70,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},c.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=20,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},c.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},c.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},c.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var t=0;t<this.entries.length;t++){var i=this.entries[t];e.writeInt32(i.sample_count),e.writeInt32(i.group_description_index)}},c.sgpdBox.prototype.write=function(e){var t,i;for(this.flags=0,this.size=12,t=0;t<this.entries.length;t++)i=this.entries[t],1===this.version&&(0===this.default_length&&(this.size+=4),this.size+=i.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),1===this.version&&e.writeUint32(this.default_length),2<=this.version&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),t=0;t<this.entries.length;t++)i=this.entries[t],1===this.version&&0===this.default_length&&e.writeUint32(i.description_length),i.write(e)},c.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var t=0;t<this.references.length;t++){var i=this.references[t];e.writeUint32(i.reference_type<<31|i.referenced_size),e.writeUint32(i.subsegment_duration),e.writeUint32(i.starts_with_SAP<<31|i.SAP_type<<28|i.SAP_delta_time)}},c.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},c.stscBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),t=0;t<this.first_chunk.length;t++)e.writeUint32(this.first_chunk[t]),e.writeUint32(this.samples_per_chunk[t]),e.writeUint32(this.sample_description_index[t])},c.stsdBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,t=0;t<this.entries.length;t++)this.entries[t].write(e),this.size+=this.entries[t].size;u.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},c.stshBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),t=0;t<this.shadowed_sample_numbers.length;t++)e.writeUint32(this.shadowed_sample_numbers[t]),e.writeUint32(this.sync_sample_numbers[t])},c.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},c.stszBox.prototype.write=function(e){var t,i=!0;if(this.version=0,(this.flags=0)<this.sample_sizes.length)for(t=0;t+1<this.sample_sizes.length;){if(this.sample_sizes[t+1]!==this.sample_sizes[0]){i=!1;break}t++}else i=!1;this.size=8,i||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),i?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),i||e.writeUint32Array(this.sample_sizes)},c.sttsBox.prototype.write=function(e){var t;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),t=0;t<this.sample_counts.length;t++)e.writeUint32(this.sample_counts[t]),e.writeUint32(this.sample_deltas[t])},c.tfdtBox.prototype.write=function(e){var t=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>t?1:0,this.flags=0,this.size=4,1===this.version&&(this.size+=4),this.writeHeader(e),1===this.version?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},c.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&c.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&c.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&c.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&c.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&c.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&c.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&c.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&c.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&c.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&c.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},c.tkhdBox.prototype.write=function(e){this.version=0,this.size=80,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},c.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=20,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},c.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&c.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&c.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&c.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&c.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&c.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&c.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&c.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&c.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var t=0;t<this.sample_count;t++)this.flags&c.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[t]),this.flags&c.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[t]),this.flags&c.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[t]),this.flags&c.TRUN_FLAGS_CTS_OFFSET&&(0===this.version?e.writeUint32(this.sample_composition_time_offset[t]):e.writeInt32(this.sample_composition_time_offset[t]))},c["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},c["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},c.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},c.cttsBox.prototype.unpack=function(e){for(var t,i=0,n=0;n<this.sample_counts.length;n++)for(t=0;t<this.sample_counts[n];t++)e[i].pts=e[i].dts+this.sample_offsets[n],i++},c.sttsBox.prototype.unpack=function(e){for(var t,i=0,n=0;n<this.sample_counts.length;n++)for(t=0;t<this.sample_counts[n];t++)e[i].dts=0===i?0:e[i-1].dts+this.sample_deltas[n],i++},c.stcoBox.prototype.unpack=function(e){for(var t=0;t<this.chunk_offsets.length;t++)e[t].offset=this.chunk_offsets[t]},c.stscBox.prototype.unpack=function(e){for(var t,i,n=0,r=0,a=0;a<this.first_chunk.length;a++)for(t=0;t<(a+1<this.first_chunk.length?this.first_chunk[a+1]:1/0);t++)for(r++,i=0;i<this.samples_per_chunk[a];i++){if(!e[n])return;e[n].description_index=this.sample_description_index[a],e[n].chunk_index=r,n++}},c.stszBox.prototype.unpack=function(e){for(var t=0;t<this.sample_sizes.length;t++)e[t].size=this.sample_sizes[t]},c.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],c.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],c.boxEqualFields=function(e,t){if(e&&!t)return!1;for(var i in e)if(!(-1<c.DIFF_BOXES_PROP_NAMES.indexOf(i)||e[i]instanceof c.Box||t[i]instanceof c.Box||void 0===e[i]||void 0===t[i]||"function"==typeof e[i]||"function"==typeof t[i]||e.subBoxNames&&-1<e.subBoxNames.indexOf(i.slice(0,4))||t.subBoxNames&&-1<t.subBoxNames.indexOf(i.slice(0,4))||"data"===i||"start"===i||"size"===i||"creation_time"===i||"modification_time"===i||-1<c.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(i)||e[i]===t[i]))return!1;return!0},c.boxEqual=function(e,t){if(!c.boxEqualFields(e,t))return!1;for(var i=0;i<c.DIFF_BOXES_PROP_NAMES.length;i++){var n=c.DIFF_BOXES_PROP_NAMES[i];if(e[n]&&t[n]&&!c.boxEqual(e[n],t[n]))return!1}return!0},o.prototype.parseSample=function(e){var t,i={resources:[]},r=new n(e.data.buffer);if(e.subsamples&&0!==e.subsamples.length){if(i.documentString=r.readString(e.subsamples[0].size),1<e.subsamples.length)for(t=1;t<e.subsamples.length;t++)i.resources[t]=r.readUint8Array(e.subsamples[t].size)}else i.documentString=r.readString(e.data.length);return"undefined"!=typeof DOMParser&&(i.document=(new DOMParser).parseFromString(i.documentString,"application/xml")),i},l.prototype.parseSample=function(e){return new n(e.data.buffer).readString(e.data.length)},l.prototype.parseConfig=function(e){return(e=new n(e.buffer)).readUint32(),e.readCString()},t.XMLSubtitlein4Parser=o,t.Textin4Parser=l,h.prototype.setSegmentOptions=function(e,t,i){var n,r=this.getTrackById(e);r&&(this.fragmentedTracks.push(n={}),n.id=e,n.user=t,(n.trak=r).nextSample=0,n.segmentStream=null,n.nb_samples=1e3,n.rapAlignement=!0,i)&&(i.nbSamples&&(n.nb_samples=i.nbSamples),i.rapAlignement)&&(n.rapAlignement=i.rapAlignement)},h.prototype.unsetSegmentOptions=function(e){for(var t=-1,i=0;i<this.fragmentedTracks.length;i++)this.fragmentedTracks[i].id==e&&(t=i);-1<t&&this.fragmentedTracks.splice(t,1)},h.prototype.setExtractionOptions=function(e,t,i){var n,r=this.getTrackById(e);r&&(this.extractedTracks.push(n={}),n.id=e,n.user=t,(n.trak=r).nextSample=0,n.nb_samples=1e3,n.samples=[],i)&&i.nbSamples&&(n.nb_samples=i.nbSamples)},h.prototype.unsetExtractionOptions=function(e){for(var t=-1,i=0;i<this.extractedTracks.length;i++)this.extractedTracks[i].id==e&&(t=i);-1<t&&this.extractedTracks.splice(t,1)},h.prototype.parse=function(){var e;if(!this.restoreParsePosition||this.restoreParsePosition())for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(!this.processIncompleteMdat())return}else if(this.saveParsePosition&&this.saveParsePosition(),(e=c.parseOneBox(this.stream,!1)).code===c.ERR_NOT_ENOUGH_DATA){if(!this.processIncompleteBox)return;if(!this.processIncompleteBox(e))return}else{var t,i="uuid"!==(t=e.box).type?t.type:t.uuid;switch(this.boxes.push(t),i){case"mdat":this.mdats.push(t);break;case"moof":this.moofs.push(t);break;case"moov":this.moovStartFound=!0,0===this.mdats.length&&(this.isProgressive=!0);default:void 0!==this[i]&&u.warn("ISOFile","Duplicate Box of type: "+i+", overriding previous occurrence"),this[i]=t}this.updateUsedBytes&&this.updateUsedBytes(t,e)}},h.prototype.checkBuffer=function(e){if(null==e)throw"Buffer must be defined and non empty";if(void 0===e.fileStart)throw"Buffer must have a fileStart property";return 0===e.byteLength?(u.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(u.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),!!this.stream.initialized()||(u.warn("ISOFile","Not ready to start parsing"),!1))},h.prototype.appendBuffer=function(e,t){var i;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart)&&this.onMoovStart(),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(t),this.nextSeekPosition?(i=this.nextSeekPosition,this.nextSeekPosition=void 0):i=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(i=this.stream.getEndFilePositionAfter(i))):i=this.nextParsePosition||0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems)&&this.processItems(this.onItem),this.stream.cleanBuffers&&(u.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+i),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),u.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),i},h.prototype.getInfo=function(){var e,t,i,n,r,a={},s=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(a.hasMoov=!0,a.duration=this.moov.mvhd.duration,a.timescale=this.moov.mvhd.timescale,a.isFragmented=null!=this.moov.mvex,a.isFragmented&&this.moov.mvex.mehd&&(a.fragment_duration=this.moov.mvex.mehd.fragment_duration),a.isProgressive=this.isProgressive,a.hasIOD=null!=this.moov.iods,a.brands=[],a.brands.push(this.ftyp.major_brand),a.brands=a.brands.concat(this.ftyp.compatible_brands),a.created=new Date(s+1e3*this.moov.mvhd.creation_time),a.modified=new Date(s+1e3*this.moov.mvhd.modification_time),a.tracks=[],a.audioTracks=[],a.videoTracks=[],a.subtitleTracks=[],a.metadataTracks=[],a.hintTracks=[],a.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(r=(i=this.moov.traks[e]).mdia.minf.stbl.stsd.entries[0],a.tracks.push(n={}),n.id=i.tkhd.track_id,n.name=i.mdia.hdlr.name,n.references=[],i.tref)for(t=0;t<i.tref.boxes.length;t++)ref={},n.references.push(ref),ref.type=i.tref.boxes[t].type,ref.track_ids=i.tref.boxes[t].track_ids;i.edts&&(n.edits=i.edts.elst.entries),n.created=new Date(s+1e3*i.tkhd.creation_time),n.modified=new Date(s+1e3*i.tkhd.modification_time),n.movie_duration=i.tkhd.duration,n.movie_timescale=a.timescale,n.layer=i.tkhd.layer,n.alternate_group=i.tkhd.alternate_group,n.volume=i.tkhd.volume,n.matrix=i.tkhd.matrix,n.track_width=i.tkhd.width/65536,n.track_height=i.tkhd.height/65536,n.timescale=i.mdia.mdhd.timescale,n.cts_shift=i.mdia.minf.stbl.cslg,n.duration=i.mdia.mdhd.duration,n.samples_duration=i.samples_duration,n.codec=r.getCodec(),n.kind=i.udta&&i.udta.kinds.length?i.udta.kinds[0]:{schemeURI:"",value:""},n.language=i.mdia.elng?i.mdia.elng.extended_language:i.mdia.mdhd.languageString,n.nb_samples=i.samples.length,n.size=i.samples_size,n.bitrate=8*n.size*n.timescale/n.samples_duration,r.isAudio()?(n.type="audio",a.audioTracks.push(n),n.audio={},n.audio.sample_rate=r.getSampleRate(),n.audio.channel_count=r.getChannelCount(),n.audio.sample_size=r.getSampleSize()):r.isVideo()?(n.type="video",a.videoTracks.push(n),n.video={},n.video.width=r.getWidth(),n.video.height=r.getHeight()):(r.isSubtitle()?(n.type="subtitles",a.subtitleTracks):r.isHint()?(n.type="metadata",a.hintTracks):r.isMetadata()?(n.type="metadata",a.metadataTracks):(n.type="metadata",a.otherTracks)).push(n)}else a.hasMoov=!1;if(a.mime="",a.hasMoov&&a.tracks){for(a.videoTracks&&0<a.videoTracks.length?a.mime+='video/mp4; codecs="':a.audioTracks&&0<a.audioTracks.length?a.mime+='audio/mp4; codecs="':a.mime+='application/mp4; codecs="',e=0;e<a.tracks.length;e++)0!==e&&(a.mime+=","),a.mime+=a.tracks[e].codec;a.mime+='"; profiles="',a.mime+=this.ftyp.compatible_brands.join(),a.mime+='"'}return a},h.prototype.processSamples=function(e){var t;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&null!==this.onSegment)for(t=0;t<this.fragmentedTracks.length;t++)for(var i=this.fragmentedTracks[t],n=i.trak;n.nextSample<n.samples.length&&this.sampleProcessingStarted;){u.debug("ISOFile","Creating media fragment on track #"+i.id+" for sample "+n.nextSample);var r=this.createFragment(i.id,n.nextSample,i.segmentStream);if(!r)break;if(i.segmentStream=r,n.nextSample++,(n.nextSample%i.nb_samples==0||e||n.nextSample>=n.samples.length)&&(u.info("ISOFile","Sending fragmented data on track #"+i.id+" for samples ["+Math.max(0,n.nextSample-i.nb_samples)+","+(n.nextSample-1)+"]"),u.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(i.id,i.user,i.segmentStream.buffer,n.nextSample,e||n.nextSample>=n.samples.length),i.segmentStream=null,i!==this.fragmentedTracks[t]))break}if(null!==this.onSamples)for(t=0;t<this.extractedTracks.length;t++){var a=this.extractedTracks[t];for(n=a.trak;n.nextSample<n.samples.length&&this.sampleProcessingStarted;){u.debug("ISOFile","Exporting on track #"+a.id+" sample #"+n.nextSample);var s=this.getSample(n,n.nextSample);if(!s)break;if(n.nextSample++,a.samples.push(s),(n.nextSample%a.nb_samples==0||n.nextSample>=n.samples.length)&&(u.debug("ISOFile","Sending samples on track #"+a.id+" for sample "+n.nextSample),this.onSamples&&this.onSamples(a.id,a.user,a.samples),a.samples=[],a!==this.extractedTracks[t]))break}}}},h.prototype.getBox=function(e){return(e=this.getBoxes(e,!0)).length?e[0]:null},h.prototype.getBoxes=function(e,t){var i=[];return h._sweep.call(this,e,i,t),i},h._sweep=function(e,t,i){for(var n in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&i)return;h._sweep.call(this.boxes[n],e,t,i)}},h.prototype.getTrackSamplesInfo=function(e){if(e=this.getTrackById(e))return e.samples},h.prototype.getTrackSample=function(e,t){return e=this.getTrackById(e),this.getSample(e,t)},h.prototype.releaseUsedSamples=function(e,t){var i=0,n=this.getTrackById(e);n.lastValidSample||(n.lastValidSample=0);for(var r=n.lastValidSample;r<t;r++)i+=this.releaseSample(n,r);u.info("ISOFile","Track #"+e+" released samples up to "+t+" (released size: "+i+", remaining: "+this.samplesDataSize+")"),n.lastValidSample=t},h.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},h.prototype.stop=function(){this.sampleProcessingStarted=!1},h.prototype.flush=function(){u.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},h.prototype.seekTrack=function(e,t,i){var n,r,a,s,o=0,l=0;if(0===i.samples.length)return u.info("ISOFile","No sample in track, cannot seek! Using time "+u.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(n=0;n<i.samples.length;n++){if(r=i.samples[n],0===n)l=0,s=r.timescale;else if(r.cts>e*r.timescale){l=n-1;break}t&&r.is_sync&&(o=n)}for(t&&(l=o),e=i.samples[l].cts,i.nextSample=l;i.samples[l].alreadyRead===i.samples[l].size&&i.samples[l+1];)l++;return a=i.samples[l].offset+i.samples[l].alreadyRead,u.info("ISOFile","Seeking to "+(t?"RAP":"")+" sample #"+i.nextSample+" on track "+i.tkhd.track_id+", time "+u.getDurationString(e,s)+" and offset: "+a),{offset:a,time:e/s}},h.prototype.seek=function(e,t){var i,n,r=this.moov,a={offset:1/0,time:1/0};if(this.moov){for(n=0;n<r.traks.length;n++)i=r.traks[n],(i=this.seekTrack(e,t,i)).offset<a.offset&&(a.offset=i.offset),i.time<a.time&&(a.time=i.time);return u.info("ISOFile","Seeking at time "+u.getDurationString(a.time,1)+" needs a buffer with a fileStart position of "+a.offset),a.offset===1/0?a={offset:this.nextParsePosition,time:0}:a.offset=this.stream.getEndFilePositionAfter(a.offset),u.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+a.offset),a}throw"Cannot seek: moov not received!"},h.prototype.equal=function(e){for(var t=0;t<this.boxes.length&&t<e.boxes.length;){var i=this.boxes[t],n=e.boxes[t];if(!c.boxEqual(i,n))return!1;t++}return!0},(t.ISOFile=h).prototype.lastBoxStartPosition=0,h.prototype.parsingMdat=null,h.prototype.nextParsePosition=0,h.prototype.discardMdatData=!1,h.prototype.processIncompleteBox=function(e){var t;return"mdat"===e.type?(t=new c[e.type+"Box"](e.size),this.parsingMdat=t,this.boxes.push(t),this.mdats.push(t),t.start=e.start,t.hdr_size=e.hdr_size,this.stream.addUsedBytes(t.hdr_size),this.lastBoxStartPosition=t.start+t.size,this.stream.seek(t.start+t.size,!1,this.discardMdatData)?!(this.parsingMdat=null):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=t.start+t.size,!1)):("moov"===e.type&&(this.moovStartFound=!0,0===this.mdats.length)&&(this.isProgressive=!0),this.stream.mergeNextBuffer&&this.stream.mergeNextBuffer()?(this.nextParsePosition=this.stream.getEndPosition(),!0):(!e.type||this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size,!1))},h.prototype.hasIncompleteMdat=function(){return null!==this.parsingMdat},h.prototype.processIncompleteMdat=function(){var e=this.parsingMdat;return this.stream.seek(e.start+e.size,!1,this.discardMdatData)?(u.debug("ISOFile","Found 'mdat' end in buffered data"),!(this.parsingMdat=null)):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},h.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},h.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},h.prototype.updateUsedBytes=function(e,t){this.stream.addUsedBytes&&("mdat"===e.type?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},h.prototype.add=c.Box.prototype.add,h.prototype.addBox=c.Box.prototype.addBox,h.prototype.init=function(e){e=e||{};var t=(this.add("ftyp").set("major_brand",e.brands&&e.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",e.brands||["iso4"]),this.add("moov"));return t.add("mvhd").set("timescale",e.timescale||600).set("rate",e.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",e.duration||0).set("volume",e.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),t.add("mvex"),this},h.prototype.addTrack=function(e){this.moov||this.init(e);var t=e||{},i=(t.width=t.width||320,t.height=t.height||320,t.id=t.id||this.moov.mvhd.next_track_id,t.type=t.type||"avc1",e=this.moov.add("trak"),this.moov.mvhd.next_track_id=t.id+1,e.add("tkhd").set("flags",c.TKHD_FLAG_ENABLED|c.TKHD_FLAG_IN_MOVIE|c.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",t.id).set("duration",t.duration||0).set("layer",t.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",t.width).set("height",t.height),e.add("mdia")),r=(i.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",t.timescale||1).set("duration",t.media_duration||0).set("language",t.language||"und"),i.add("hdlr").set("handler",t.hdlr||"vide").set("name",t.name||"Track created with MP4Box.js"),i.add("elng").set("extended_language",t.language||"fr-FR"),i.add("minf"));if(void 0!==c[t.type+"SampleEntry"]){var a,s,o,l=new c[t.type+"SampleEntry"],h=(l.data_reference_index=1,"");for(a in c.sampleEntryCodes)for(var u=c.sampleEntryCodes[a],d=0;d<u.length;d++)if(-1<u.indexOf(t.type)){h=a;break}switch(h){case"Visual":r.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),l.set("width",t.width).set("height",t.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",t.type+" Compressor").set("depth",24),t.avcDecoderConfigRecord&&(s=new c.avcCBox,o=new n(t.avcDecoderConfigRecord),s.parse(o),l.addBox(s));break;case"Audio":r.add("smhd").set("balance",t.balance||0),l.set("channel_count",t.channel_count||2).set("samplesize",t.samplesize||16).set("samplerate",t.samplerate||65536);break;case"Hint":r.add("hmhd");break;case"Subtitle":r.add("sthd"),"stpp"===t.type&&l.set("namespace",t.namespace||"nonamespace").set("schema_location",t.schema_location||"").set("auxiliary_mime_types",t.auxiliary_mime_types||"");break;default:r.add("nmhd")}return t.description&&l.addBox(t.description),t.description_boxes&&t.description_boxes.forEach((function(e){l.addBox(e)})),r.add("dinf").add("dref").addEntry((new c["url Box"]).set("flags",1)),(i=r.add("stbl")).add("stsd").addEntry(l),i.add("stts").set("sample_counts",[]).set("sample_deltas",[]),i.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),i.add("stco").set("chunk_offsets",[]),i.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",t.id).set("default_sample_description_index",t.default_sample_description_index||1).set("default_sample_duration",t.default_sample_duration||0).set("default_sample_size",t.default_sample_size||0).set("default_sample_flags",t.default_sample_flags||0),this.buildTrakSampleLists(e),t.id}},c.Box.prototype.computeSize=function(e){(e=e||new r).endianness=r.BIG_ENDIAN,this.write(e)},h.prototype.addSample=function(e,t,i){i=i||{};var n={};if(null!==(e=this.getTrackById(e)))return n.number=e.samples.length,n.track_id=e.tkhd.track_id,n.timescale=e.mdia.mdhd.timescale,n.description_index=i.sample_description_index?i.sample_description_index-1:0,n.description=e.mdia.minf.stbl.stsd.entries[n.description_index],n.data=t,n.size=t.byteLength,n.alreadyRead=n.size,n.duration=i.duration||1,n.cts=i.cts||0,n.dts=i.dts||0,n.is_sync=i.is_sync||!1,n.is_leading=i.is_leading||0,n.depends_on=i.depends_on||0,n.is_depended_on=i.is_depended_on||0,n.has_redundancy=i.has_redundancy||0,n.degradation_priority=i.degradation_priority||0,n.offset=0,n.subsamples=i.subsamples,e.samples.push(n),e.samples_size+=n.size,e.samples_duration+=n.duration,e.first_dts||(e.first_dts=i.dts),this.processSamples(),e=this.createSingleSampleMoof(n),this.addBox(e),e.computeSize(),e.trafs[0].truns[0].data_offset=e.size+8,this.add("mdat").data=new Uint8Array(t),n},h.prototype.createSingleSampleMoof=function(e){var t=e.is_sync?1<<25:65536,i=new c.moofBox,n=(i.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++,i.add("traf")),r=this.getTrackById(e.track_id);return n.add("tfhd").set("track_id",e.track_id).set("flags",c.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),n.add("tfdt").set("baseMediaDecodeTime",e.dts-r.first_dts),n.add("trun").set("flags",c.TRUN_FLAGS_DATA_OFFSET|c.TRUN_FLAGS_DURATION|c.TRUN_FLAGS_SIZE|c.TRUN_FLAGS_FLAGS|c.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[t]).set("sample_composition_time_offset",[e.cts-e.dts]),i},h.prototype.lastMoofIndex=0,h.prototype.samplesDataSize=0,h.prototype.resetTables=function(){var e,t;for(this.initial_duration=this.moov.mvhd.duration,e=this.moov.mvhd.duration=0;e<this.moov.traks.length;e++){(t=this.moov.traks[e]).tkhd.duration=0,t.mdia.mdhd.duration=0,(t.mdia.minf.stbl.stco||t.mdia.minf.stbl.co64).chunk_offsets=[],(i=t.mdia.minf.stbl.stsc).first_chunk=[],i.samples_per_chunk=[],i.sample_description_index=[],(t.mdia.minf.stbl.stsz||t.mdia.minf.stbl.stz2).sample_sizes=[],(i=t.mdia.minf.stbl.stts).sample_counts=[],i.sample_deltas=[],(i=t.mdia.minf.stbl.ctts)&&(i.sample_counts=[],i.sample_offsets=[]);var i=t.mdia.minf.stbl.stss;-1!=(i=t.mdia.minf.stbl.boxes.indexOf(i))&&(t.mdia.minf.stbl.boxes[i]=null)}},h.initSampleGroups=function(e,t,i,n,r){var a,s,o,l;function h(e,t,i){this.grouping_type=e,this.grouping_type_parameter=t,this.sbgp=i,this.last_sample_in_run=-1,this.entry_index=-1}for(t&&(t.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),s=0;s<i.length;s++){for(l=i[s].grouping_type+"/"+i[s].grouping_type_parameter,o=new h(i[s].grouping_type,i[s].grouping_type_parameter,i[s]),t&&(t.sample_groups_info[l]=o),e.sample_groups_info[l]||(e.sample_groups_info[l]=o),a=0;a<n.length;a++)n[a].grouping_type===i[s].grouping_type&&(o.description=n[a],o.description.used=!0);if(r)for(a=0;a<r.length;a++)r[a].grouping_type===i[s].grouping_type&&(o.fragment_description=r[a],o.fragment_description.used=!0,o.is_fragment=!0)}if(t){if(r)for(s=0;s<r.length;s++)!r[s].used&&2<=r[s].version&&(l=r[s].grouping_type+"/0",(o=new h(r[s].grouping_type,0)).is_fragment=!0,t.sample_groups_info[l]||(t.sample_groups_info[l]=o))}else for(s=0;s<n.length;s++)!n[s].used&&2<=n[s].version&&(l=n[s].grouping_type+"/0",o=new h(n[s].grouping_type,0),e.sample_groups_info[l]||(e.sample_groups_info[l]=o))},h.setSampleGroupProperties=function(e,t,i,n){var r,a,s;for(r in t.sample_groups=[],n)t.sample_groups[r]={},t.sample_groups[r].grouping_type=n[r].grouping_type,t.sample_groups[r].grouping_type_parameter=n[r].grouping_type_parameter,i>=n[r].last_sample_in_run&&(n[r].last_sample_in_run<0&&(n[r].last_sample_in_run=0),n[r].entry_index++,n[r].entry_index<=n[r].sbgp.entries.length-1)&&(n[r].last_sample_in_run+=n[r].sbgp.entries[n[r].entry_index].sample_count),n[r].entry_index<=n[r].sbgp.entries.length-1?t.sample_groups[r].group_description_index=n[r].sbgp.entries[n[r].entry_index].group_description_index:t.sample_groups[r].group_description_index=-1,0!==t.sample_groups[r].group_description_index&&(s=n[r].fragment_description||n[r].description,0<t.sample_groups[r].group_description_index?(a=65535<t.sample_groups[r].group_description_index?(t.sample_groups[r].group_description_index>>16)-1:t.sample_groups[r].group_description_index-1,s&&0<=a&&(t.sample_groups[r].description=s.entries[a])):s&&2<=s.version&&0<s.default_group_description_index&&(t.sample_groups[r].description=s.entries[s.default_group_description_index-1]))},h.process_sdtp=function(e,t,i){t&&(e?(t.is_leading=e.is_leading[i],t.depends_on=e.sample_depends_on[i],t.is_depended_on=e.sample_is_depended_on[i],t.has_redundancy=e.sample_has_redundancy[i]):(t.is_leading=0,t.depends_on=0,t.is_depended_on=0,t.has_redundancy=0))},h.prototype.buildSampleLists=function(){for(var e,t=0;t<this.moov.traks.length;t++)e=this.moov.traks[t],this.buildTrakSampleLists(e)},h.prototype.buildTrakSampleLists=function(e){var t,i,n,r,a,s,o,l,u,d,c,f,p,m,g,_,y,v,A,E,b,w,S,T;if(e.samples=[],e.samples_duration=0,e.samples_size=0,i=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,n=e.mdia.minf.stbl.stsc,r=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,a=e.mdia.minf.stbl.stts,s=e.mdia.minf.stbl.ctts,o=e.mdia.minf.stbl.stss,l=e.mdia.minf.stbl.stsd,u=e.mdia.minf.stbl.subs,f=e.mdia.minf.stbl.stdp,d=e.mdia.minf.stbl.sbgps,c=e.mdia.minf.stbl.sgpds,b=E=A=v=-1,T=S=w=0,h.initSampleGroups(e,null,d,c),void 0!==r){for(t=0;t<r.sample_sizes.length;t++){var C={};C.number=t,C.track_id=e.tkhd.track_id,C.timescale=e.mdia.mdhd.timescale,C.alreadyRead=0,(e.samples[t]=C).size=r.sample_sizes[t],e.samples_size+=C.size,0===t?(p=0,C.chunk_index=m=1,C.chunk_run_index=p,y=n.samples_per_chunk[p],_=0,g=p+1<n.first_chunk.length?n.first_chunk[p+1]-1:1/0):t<y?(C.chunk_index=m,C.chunk_run_index=p):(_=0,(C.chunk_index=++m)<=g||(g=1+ ++p<n.first_chunk.length?n.first_chunk[p+1]-1:1/0),C.chunk_run_index=p,y+=n.samples_per_chunk[p]),C.description_index=n.sample_description_index[C.chunk_run_index]-1,C.description=l.entries[C.description_index],C.offset=i.chunk_offsets[C.chunk_index-1]+_,_+=C.size,v<t&&(A++,v<0&&(v=0),v+=a.sample_counts[A]),0<t?(e.samples[t-1].duration=a.sample_deltas[A],e.samples_duration+=e.samples[t-1].duration,C.dts=e.samples[t-1].dts+e.samples[t-1].duration):C.dts=0,s?(E<=t&&(b++,E<0&&(E=0),E+=s.sample_counts[b]),C.cts=e.samples[t].dts+s.sample_offsets[b]):C.cts=C.dts,o?(t==o.sample_numbers[w]-1?(C.is_sync=!0,w++):(C.is_sync=!1,C.degradation_priority=0),u&&u.entries[S].sample_delta+T==t+1&&(C.subsamples=u.entries[S].subsamples,T+=u.entries[S].sample_delta,S++)):C.is_sync=!0,h.process_sdtp(e.mdia.minf.stbl.sdtp,C,C.number),C.degradation_priority=f?f.priority[t]:0,u&&u.entries[S].sample_delta+T==t&&(C.subsamples=u.entries[S].subsamples,T+=u.entries[S].sample_delta),(0<d.length||0<c.length)&&h.setSampleGroupProperties(e,C,t,e.sample_groups_info)}0<t&&(e.samples[t-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[t-1].dts,0),e.samples_duration+=e.samples[t-1].duration)}},h.prototype.updateSampleLists=function(){var e,t,i,n,r,a,s,o,l,u,d,f;if(void 0!==this.moov)for(;this.lastMoofIndex<this.moofs.length;)if(s=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,"moof"==s.type)for(o=s,e=0;e<o.trafs.length;e++){for(l=o.trafs[e],u=this.getTrackById(l.tfhd.track_id),d=this.getTrexById(l.tfhd.track_id),t=l.tfhd.flags&c.TFHD_FLAG_SAMPLE_DESC?l.tfhd.default_sample_description_index:d?d.default_sample_description_index:1,i=l.tfhd.flags&c.TFHD_FLAG_SAMPLE_DUR?l.tfhd.default_sample_duration:d?d.default_sample_duration:0,n=l.tfhd.flags&c.TFHD_FLAG_SAMPLE_SIZE?l.tfhd.default_sample_size:d?d.default_sample_size:0,r=l.tfhd.flags&c.TFHD_FLAG_SAMPLE_FLAGS?l.tfhd.default_sample_flags:d?d.default_sample_flags:0,(l.sample_number=0)<l.sbgps.length&&h.initSampleGroups(u,l,l.sbgps,u.mdia.minf.stbl.sgpds,l.sgpds),E=0;E<l.truns.length;E++)for(var p=l.truns[E],m=0;m<p.sample_count;m++){(f={}).moof_number=this.lastMoofIndex,f.number_in_traf=l.sample_number,l.sample_number++,f.number=u.samples.length,l.first_sample_index=u.samples.length,u.samples.push(f),f.track_id=u.tkhd.track_id,f.timescale=u.mdia.mdhd.timescale,f.description_index=t-1,f.description=u.mdia.minf.stbl.stsd.entries[f.description_index],f.size=n,p.flags&c.TRUN_FLAGS_SIZE&&(f.size=p.sample_size[m]),u.samples_size+=f.size,f.duration=i,p.flags&c.TRUN_FLAGS_DURATION&&(f.duration=p.sample_duration[m]),u.samples_duration+=f.duration,u.first_traf_merged||0<m?f.dts=u.samples[u.samples.length-2].dts+u.samples[u.samples.length-2].duration:(l.tfdt?f.dts=l.tfdt.baseMediaDecodeTime:f.dts=0,u.first_traf_merged=!0),f.cts=f.dts,p.flags&c.TRUN_FLAGS_CTS_OFFSET&&(f.cts=f.dts+p.sample_composition_time_offset[m]),g=r,p.flags&c.TRUN_FLAGS_FLAGS?g=p.sample_flags[m]:0===m&&p.flags&c.TRUN_FLAGS_FIRST_FLAG&&(g=p.first_sample_flags),f.is_sync=!(g>>16&1),f.is_leading=g>>26&3,f.depends_on=g>>24&3,f.is_depended_on=g>>22&3,f.has_redundancy=g>>20&3,f.degradation_priority=65535&g;var g=!!(l.tfhd.flags&c.TFHD_FLAG_BASE_DATA_OFFSET),_=!!(l.tfhd.flags&c.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),y=!!(p.flags&c.TRUN_FLAGS_DATA_OFFSET),v=g?l.tfhd.base_data_offset:_||0===E?o.start:a;f.offset=0===E&&0===m?y?v+p.data_offset:v:a,a=f.offset+f.size,(0<l.sbgps.length||0<l.sgpds.length||0<u.mdia.minf.stbl.sbgps.length||0<u.mdia.minf.stbl.sgpds.length)&&h.setSampleGroupProperties(u,f,f.number_in_traf,l.sample_groups_info)}if(l.subs){u.has_fragment_subsamples=!0;for(var A=l.first_sample_index,E=0;E<l.subs.entries.length;E++)A+=l.subs.entries[E].sample_delta,(f=u.samples[A-1]).subsamples=l.subs.entries[E].subsamples}}},h.prototype.getSample=function(e,t){var i=e.samples[t];if(!this.moov)return null;if(i.data){if(i.alreadyRead==i.size)return i}else i.data=new Uint8Array(i.size),i.alreadyRead=0,this.samplesDataSize+=i.size,u.debug("ISOFile","Allocating sample #"+t+" on track #"+e.tkhd.track_id+" of size "+i.size+" (total: "+this.samplesDataSize+")");for(;;){var n=this.stream.findPosition(!0,i.offset+i.alreadyRead,!1);if(!(-1<n))return null;var a=(n=this.stream.buffers[n]).byteLength-(i.offset+i.alreadyRead-n.fileStart);if(i.size-i.alreadyRead<=a)return u.debug("ISOFile","Getting sample #"+t+" data (alreadyRead: "+i.alreadyRead+" offset: "+(i.offset+i.alreadyRead-n.fileStart)+" read size: "+(i.size-i.alreadyRead)+" full size: "+i.size+")"),r.memcpy(i.data.buffer,i.alreadyRead,n,i.offset+i.alreadyRead-n.fileStart,i.size-i.alreadyRead),n.usedBytes+=i.size-i.alreadyRead,this.stream.logBufferLevel(),i.alreadyRead=i.size,i;if(0==a)return null;u.debug("ISOFile","Getting sample #"+t+" partial data (alreadyRead: "+i.alreadyRead+" offset: "+(i.offset+i.alreadyRead-n.fileStart)+" read size: "+a+" full size: "+i.size+")"),r.memcpy(i.data.buffer,i.alreadyRead,n,i.offset+i.alreadyRead-n.fileStart,a),i.alreadyRead+=a,n.usedBytes+=a,this.stream.logBufferLevel()}},h.prototype.releaseSample=function(e,t){return(e=e.samples[t]).data?(this.samplesDataSize-=e.size,e.data=null,e.alreadyRead=0,e.size):0},h.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},h.prototype.getCodecs=function(){for(var e="",t=0;t<this.moov.traks.length;t++)0<t&&(e+=","),e+=this.moov.traks[t].mdia.minf.stbl.stsd.entries[0].getCodec();return e},h.prototype.getTrexById=function(e){var t;if(this.moov&&this.moov.mvex)for(t=0;t<this.moov.mvex.trexs.length;t++){var i=this.moov.mvex.trexs[t];if(i.track_id==e)return i}return null},h.prototype.getTrackById=function(e){if(void 0!==this.moov)for(var t=0;t<this.moov.traks.length;t++){var i=this.moov.traks[t];if(i.tkhd.track_id==e)return i}return null},h.prototype.items=[],h.prototype.itemsDataSize=0,h.prototype.flattenItemInfo=function(){var e=this.items,t=this.meta;if(null!=t&&void 0!==t.hdlr&&void 0!==t.iinf){for(l=0;l<t.iinf.item_infos.length;l++)(n={}).id=t.iinf.item_infos[l].item_ID,(e[n.id]=n).ref_to=[],n.name=t.iinf.item_infos[l].item_name,0<t.iinf.item_infos[l].protection_index&&(n.protection=t.ipro.protections[t.iinf.item_infos[l].protection_index-1]),t.iinf.item_infos[l].item_type?n.type=t.iinf.item_infos[l].item_type:n.type="mime",n.content_type=t.iinf.item_infos[l].content_type,n.content_encoding=t.iinf.item_infos[l].content_encoding;if(t.iloc)for(l=0;l<t.iloc.items.length;l++){var i=t.iloc.items[l],n=e[i.item_ID];switch(0!==i.data_reference_index&&(u.warn("Item storage with reference to other files: not supported"),n.source=t.dinf.boxes[i.data_reference_index-1]),i.construction_method){case 0:break;case 1:case 2:u.warn("Item storage with construction_method : not supported")}for(n.extents=[],a=n.size=0;a<i.extents.length;a++)n.extents[a]={},n.extents[a].offset=i.extents[a].extent_offset+i.base_offset,n.extents[a].length=i.extents[a].extent_length,n.extents[a].alreadyRead=0,n.size+=n.extents[a].length}if(t.pitm&&(e[t.pitm.item_id].primary=!0),t.iref)for(l=0;l<t.iref.references.length;l++)for(var r=t.iref.references[l],a=0;a<r.references.length;a++)e[r.from_item_ID].ref_to.push({type:r.type,id:r.references[a]});if(t.iprp)for(var s=0;s<t.iprp.ipmas.length;s++)for(var o=t.iprp.ipmas[s],l=0;l<o.associations.length;l++){var h=o.associations[l];for(void 0===(n=e[h.id]).properties&&(n.properties={},n.properties.boxes=[]),a=0;a<h.props.length;a++){var d=h.props[a];0<d.property_index&&d.property_index-1<t.iprp.ipco.boxes.length&&(d=t.iprp.ipco.boxes[d.property_index-1],n.properties[d.type]=d,n.properties.boxes.push(d))}}}},h.prototype.getItem=function(e){var t;if(!this.meta)return null;if(!(t=this.items[e]).data&&t.size)t.data=new Uint8Array(t.size),t.alreadyRead=0,this.itemsDataSize+=t.size,u.debug("ISOFile","Allocating item #"+e+" of size "+t.size+" (total: "+this.itemsDataSize+")");else if(t.alreadyRead===t.size)return t;for(var i=0;i<t.extents.length;i++){var n=t.extents[i];if(n.alreadyRead!==n.length){var a=this.stream.findPosition(!0,n.offset+n.alreadyRead,!1);if(!(-1<a))return null;var s=(a=this.stream.buffers[a]).byteLength-(n.offset+n.alreadyRead-a.fileStart);if(!(n.length-n.alreadyRead<=s))return u.debug("ISOFile","Getting item #"+e+" extent #"+i+" partial data (alreadyRead: "+n.alreadyRead+" offset: "+(n.offset+n.alreadyRead-a.fileStart)+" read size: "+s+" full extent size: "+n.length+" full item size: "+t.size+")"),r.memcpy(t.data.buffer,t.alreadyRead,a,n.offset+n.alreadyRead-a.fileStart,s),n.alreadyRead+=s,t.alreadyRead+=s,a.usedBytes+=s,this.stream.logBufferLevel(),null;u.debug("ISOFile","Getting item #"+e+" extent #"+i+" data (alreadyRead: "+n.alreadyRead+" offset: "+(n.offset+n.alreadyRead-a.fileStart)+" read size: "+(n.length-n.alreadyRead)+" full extent size: "+n.length+" full item size: "+t.size+")"),r.memcpy(t.data.buffer,t.alreadyRead,a,n.offset+n.alreadyRead-a.fileStart,n.length-n.alreadyRead),a.usedBytes+=n.length-n.alreadyRead,this.stream.logBufferLevel(),t.alreadyRead+=n.length-n.alreadyRead,n.alreadyRead=n.length}}return t.alreadyRead===t.size?t:null},h.prototype.releaseItem=function(e){var t=this.items[e];if(t.data){this.itemsDataSize-=t.size,t.data=null;for(var i=t.alreadyRead=0;i<t.extents.length;i++)t.extents[i].alreadyRead=0;return t.size}return 0},h.prototype.processItems=function(e){for(var t in this.items)t=this.items[t],this.getItem(t.id),e&&!t.sent&&(e(t),t.sent=!0,t.data=null)},h.prototype.hasItem=function(e){for(var t in this.items)if((t=this.items[t]).name===e)return t.id;return-1},h.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},h.prototype.getPrimaryItem=function(){return this.meta&&this.meta.pitm?this.getItem(this.meta.pitm.item_id):null},h.prototype.itemToFragmentedTrackFile=function(e){var t,i;return null!=(i=(e=e||{}).itemId?this.getItem(e.itemId):this.getPrimaryItem())&&((e=new h).discardMdatData=!1,t={type:i.type,description_boxes:i.properties.boxes},i.properties.ispe&&(t.width=i.properties.ispe.image_width,t.height=i.properties.ispe.image_height),t=e.addTrack(t))?(e.addSample(t,i.data),e):null},h.prototype.write=function(e){for(var t=0;t<this.boxes.length;t++)this.boxes[t].write(e)},h.prototype.createFragment=function(e,t,i){e=this.getTrackById(e);var n=this.getSample(e,t);return null==n?(n=e.samples[t],this.nextSeekPosition?this.nextSeekPosition=Math.min(n.offset+n.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.samples[t].offset+n.alreadyRead,null):((e=i||new r).endianness=r.BIG_ENDIAN,(t=this.createSingleSampleMoof(n)).write(e),t.trafs[0].truns[0].data_offset=t.size+8,u.debug("MP4Box","Adjusting data_offset with new value "+t.trafs[0].truns[0].data_offset),e.adjustUint32(t.trafs[0].truns[0].data_offset_position,t.trafs[0].truns[0].data_offset),(i=new c.mdatBox).data=n.data,i.write(e),e)},h.writeInitializationSegment=function(e,t,i,n){u.debug("ISOFile","Generating initialization segment");var a,s=new r,o=(s.endianness=r.BIG_ENDIAN,e.write(s),t.add("mvex"));for(i&&o.add("mehd").set("fragment_duration",i),a=0;a<t.traks.length;a++)o.add("trex").set("track_id",t.traks[a].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",n).set("default_sample_size",0).set("default_sample_flags",65536);return t.write(s),s.buffer},h.prototype.save=function(e){var t=new r;t.endianness=r.BIG_ENDIAN,this.write(t),t.save(e)},h.prototype.getBuffer=function(){var e=new r;return e.endianness=r.BIG_ENDIAN,this.write(e),e.buffer},h.prototype.initializeSegmentation=function(){var e,t,i,n;for(null===this.onSegment&&u.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),t=[],e=0;e<this.fragmentedTracks.length;e++){var r=new c.moovBox;r.mvhd=this.moov.mvhd,r.boxes.push(r.mvhd),i=this.getTrackById(this.fragmentedTracks[e].id),r.boxes.push(i),r.traks.push(i),(n={}).id=i.tkhd.track_id,n.user=this.fragmentedTracks[e].user,n.buffer=h.writeInitializationSegment(this.ftyp,r,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,0<this.moov.traks[e].samples.length?this.moov.traks[e].samples[0].duration:0),t.push(n)}return t},c.Box.prototype.printHeader=function(e){this.size+=8,this.size>d&&(this.size+=8),"uuid"===this.type&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},c.FullBox.prototype.printHeader=function(e){this.size+=4,c.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},c.Box.prototype.print=function(e){this.printHeader(e)},c.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var t,i=0;i<this.boxes.length;i++)this.boxes[i]&&(t=e.indent,e.indent+=" ",this.boxes[i].print(e),e.indent=t)},h.prototype.print=function(e){e.indent="";for(var t=0;t<this.boxes.length;t++)this.boxes[t]&&this.boxes[t].print(e)},c.mvhdBox.prototype.print=function(e){c.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},c.tkhdBox.prototype.print=function(e){c.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)},{});f.createFile=function(e,t){return e=void 0===e||e,(t=new h(t)).discardMdatData=!e,t},t.createFile=f.createFile},function(e,t,i){const n=i(73),r=i(29),a=i(74);t.MpegTs=class{constructor(){this.seekPos=-1,this.durationMs=-1,this.fps=-1,this.sampleRate=-1,this.aCodec="",this.vCodec="",this.size={width:-1,height:-1},this.bufObject=r(),this.mpegTsObj=null,this.bufObject=r(),this.mediaInfo={},this.extensionInfo={},this.onReady=null,this.onDemuxed=null,this.onReadyOBJ=null,this.onError=null,this.onWasmError=null}initMPEG(){let e=this;this.mpegTsObj=new n.default.MPEG_JS_Module({}),this.mpegTsObj.onDemuxed=()=>{e.mediaInfo=e.mpegTsObj.readMediaInfo(),e.extensionInfo=e.mpegTsObj.readExtensionInfo(),e.vCodec=e.mediaInfo.vCodec,e.aCodec=e.mediaInfo.aCodec,e.durationMs=1e3*e.mediaInfo.duration,e.fps=e.mediaInfo.vFps,e.sampleRate=e.mediaInfo.sampleRate,0<e.extensionInfo.vWidth&&0<e.extensionInfo.vHeight&&(e.size.width=e.extensionInfo.vWidth,e.size.height=e.extensionInfo.vHeight),e.isHEVC()&&e.mpegTsObj.readPacket(),null!=e.onDemuxed&&e.onDemuxed(e.onReadyOBJ)},this.mpegTsObj.onReady=()=>{null!=e.onReady&&e.onReady(e.onReadyOBJ)},this.mpegTsObj.onNalu=e=>{this._appendFrame(e)},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.releaseTsDemuxer(),this.onWasmError&&this.onWasmError(e)},this.mpegTsObj.initDemuxer()}_appendFrame(e){var t=e.dtime;if(0==e.type){var i=a.PACK_NALU(e.layer),n=1==e.keyframe;this.bufObject.appendFrame(t,i,!0,n)}else if("aac"==this.mediaInfo.aCodec)for(var r=e.data,s=0;s<r.length;s++){var o=r[s];this.bufObject.appendFrame(o.ptime,o.data,!1,!0)}else this.bufObject.appendFrame(t,e.data,!1,!0)}bindReady(e){this.onReadyOBJ=e}releaseTsDemuxer(){this.mpegTsObj&&this.mpegTsObj.releaseTsDemuxer(),this.mpegTsObj=null}demux(e){this.mpegTsObj.demuxUint8Buf(e)}popBuffer(e=1,t=-1){return t<0?null:1==e?this.bufObject.vFrame(t):2==e?this.bufObject.aFrame(t):void 0}isHEVC(){return this.mpegTsObj.isHEVC()}getACodec(){return this.aCodec}getVCodec(){return this.vCodec}getAudioNone(){return this.mpegTsObj.mediaAttr.audioNone}getDurationMs(){return this.durationMs}getFPS(){return this.fps}getSampleRate(){return this.sampleRate}getSize(){return this.size}seek(e){0<=e&&(e=this.bufObject.seekIDR(e),this.seekPos=e)}}},function(e,t,i){const n=i(174),r=i(73),a=i(37),s=i(29),o=i(74),l=i(5);t.M3u8=class{constructor(e){this.hls=new n.M3u8Base(e),this.mpegTsObj=new r.default.MPEG_JS_Module({}),this.mpegTsWasmState=!1,this.mpegTsWasmRetryLoadTimes=0,this.tsList=[],this._segmentPointer=-1,this.parseTsList=[],this.vStartTime=0,this.aStartTime=0,this.lockWait={state:!1,lockMember:{dur:0}},this.timerFeed=null,this.timerTsWasm=null,this.seekPos=-1,this.vPreFramePTS=0,this.aPreFramePTS=0,this.audioNone=!1,this.isHevcParam=!1,this.vCodec=!1,this.aCodec=!1,this.aChannel=0,this.durationMs=-1,this.bufObject=s(),this.fps=-1,this.sampleRate=-1,this.size={width:-1,height:-1},this.mediaInfo=null,this.extensionInfo=null,this.seekTime=-1,this.seekStartTime=-1,this.onReadyOBJ=null,this.onFinished=null,this.onDemuxed=null,this.onSamples=null,this.onCacheProcess=null,this.isDownloaded=!1,this.onError=null,this.onWasmError=null}getCachePTS(){return Math.max(this.vPreFramePTS,this.aPreFramePTS)}demux(e){let t=this;this.vPreFramePTS=0,this.aPreFramePTS=0,this.hls.onTransportStream=(e,i,n,r)=>{t.tsList.push({streamURI:e,streamDur:i,start:n,end:r})},this.hls.onFinished=e=>{e.type==l.PLAYER_IN_TYPE_M3U8_VOD?t.durationMs=1e3*e.duration:t.durationMs=-1,null!=t.onFinished&&t.onFinished(t.onReadyOBJ,e)},this.mpegTsObj.onDemuxedFailed=(e,i)=>{t.lockWait.state=!1},this.mpegTsObj.onDemuxed=()=>{var e;t.isDownloaded=!1,null==t.mediaInfo&&(t.mediaInfo=t.mpegTsObj.readMediaInfo(),t.isHevcParam=t.mpegTsObj.isHEVC(),t.vCodec=t.mediaInfo.vCodec,t.aCodec=t.mediaInfo.aCodec,t.aChannel=t.mediaInfo.sampleChannel,t.fps=t.mediaInfo.vFps,t.sampleRate=t.mediaInfo.sampleRate,null===t.aCodec||""===t.aCodec||t.aChannel<=0)&&(t.audioNone=!0),null==t.extensionInfo&&(t.extensionInfo=t.mpegTsObj.readExtensionInfo(),0<t.extensionInfo.vWidth)&&0<t.extensionInfo.vHeight&&(t.size.width=t.extensionInfo.vWidth,t.size.height=t.extensionInfo.vHeight),null!=t.onDemuxed&&t.onDemuxed(t.onReadyOBJ),t.mpegTsObj.readPacket(),t.parseTsList&&0<t.parseTsList.length?(e=t.parseTsList.shift().start,t.vStartTime=e,t.aStartTime=e):-1==this.seekStartTime?setTimeout((()=>{t.vStartTime+=parseFloat(t.lockWait.lockMember.dur),t.aStartTime+=parseFloat(t.lockWait.lockMember.dur)}),1e3):(t.vStartTime=t.seekStartTime,t.aStartTime=t.seekStartTime,t.seekStartTime=-1),t.lockWait.state=!1},this.mpegTsObj.onReady=()=>{t._onTsReady(e)},this.mpegTsObj.onNalu=e=>{this._appendFrame(e,-1,!1),this.lockWait.state=!1},this.mpegTsObj.onError=e=>{this.onError&&this.onError(e)},this.mpegTsObj.onWasmError=e=>{this.release(),this.onWasmError&&this.onWasmError(e)},t.mpegTsObj.initDemuxer(),this.timerTsWasm=window.setInterval((()=>{t.mpegTsWasmState?(window.clearInterval(t.timerTsWasm),t.timerTsWasm=null):3<=t.mpegTsWasmRetryLoadTimes?(t._onTsReady(e),window.clearInterval(t.timerTsWasm),t.timerTsWasm=null):(t.mpegTsWasmRetryLoadTimes+=1,t.mpegTsObj.initDemuxer())}),3e3)}_appendFrame(e,t,i){var n=this,r=0<e.dtime?e.dtime:e.ptime;if(0==e.type){t<0&&r<=n.vPreFramePTS&&(i=!0);var s=o.PACK_NALU(e.layer),l=1==e.keyframe,h=1==i?r+n.vStartTime:r;l=new a.BufferFrame(h,l,s,!0),n.bufObject.appendFrame(l.pts,l.data,!0,l.isKey),n.vPreFramePTS=h,null!=n.onSamples&&n.onSamples(n.onReadyOBJ,l)}else if(t<0&&r<=n.aPreFramePTS&&(i=!0),"aac"==n.mediaInfo.aCodec)for(var u=e.data,d=0;d<u.length;d++){var c=u[d],f=1==i?c.ptime+n.vStartTime:r;c=new a.BufferFrame(f,!0,c.data,!1),n.aPreFramePTS=f,null!=n.onSamples&&n.onSamples(n.onReadyOBJ,c)}else s=1==i?r+n.vStartTime:r,h=new a.BufferFrame(s,!0,e.data,!1),n.bufObject.appendFrameByBufferFrame(h),n.aPreFramePTS=s,null!=n.onSamples&&n.onSamples(n.onReadyOBJ,h);this.onCacheProcess&&this.onCacheProcess(this.getCachePTS())}_onTsReady(e){this.hls.fetchM3u8(e),this.mpegTsWasmState=!0,this.timerFeed&&window.clearInterval(this.timerFeed),this.downLoadInterval()}downLoadInterval(){let e=this;this.timerFeed&&window.clearInterval(this.timerFeed),e.timerFeed=window.setInterval((()=>{e.loadSegment()}),1e3)}loadSegment(){var e,t,i,n=this;if(0<n.tsList.length&&0==n.lockWait.state)try{n.isDownloaded||(e=n.nextSegment(),n.moveSegmentPointer(),null!=e&&(t=e.streamURI,i=e.streamDur,n.lockWait.state=!0,n.lockWait.lockMember.dur=i,n.mpegTsObj.isLive=n.hls.isLive(),n.isDownloaded=!0,n.mpegTsObj.demuxURL(t),n.parseTsList.push(e)))}catch(e){n.lockWait.state=!1}}release(){this.hls&&this.hls.release(),this.hls=null,this.mpegTsObj&&this.mpegTsObj.release(),this.timerFeed&&window.clearInterval(this.timerFeed),this.timerFeed=null,this.timerTsWasm&&window.clearInterval(this.timerTsWasm),this.timerTsWasm=null,this._segmentPointer=-1,this.parseTsList=[],this.tsList=[],this.isDownloaded=!1,this.bufObject&&this.bufObject.cleanPipeline()}nextSegment(){return this.tsList&&this.tsList[this._segmentPointer+1]}setNextSegmentByIndex(e=0){this._segmentPointer=e-1}getSegmentByIndex(e){return this.tsList&&this.tsList[e]}moveSegmentPointer(e){null==e&&(e=this._segmentPointer+1),this._segmentPointer=this.clamp(e,-1,this.tsList.length)}findSegmentIndexByTime(e){var t=this.tsList;if(t){for(let i,n=0,r=t.length;n<r;n++)if(e>=(i=t[n]).start&&e<i.end)return n;var i=t[t.length-1];if(Math.abs(e-i.end)<.2)return t.length-1}}clamp(e,t,i){return i<t&&(i=t),Math.min(Math.max(e,t),i)}bindReady(e){this.onReadyOBJ=e}popBuffer(e=1,t=-1){return t<0?null:1===e?t+1>this.bufObject.videoBuffer.length?null:this.bufObject.vFrame(t):2===e?t+1>this.bufObject.audioBuffer.length?null:this.bufObject.aFrame(t):void 0}getVLen(){return this.bufObject.videoBuffer.length}getALen(){return this.bufObject.audioBuffer.length}getLastIdx(){return this.bufObject.videoBuffer.length-1}getALastIdx(){return this.bufObject.audioBuffer.length-1}getACodec(){return this.aCodec}getVCodec(){return this.vCodec}getDurationMs(){return this.durationMs}getFPS(){return this.fps}getSampleRate(){return this.sampleRate}getSampleChannel(){return this.aChannel}getSize(){return this.size}seek(e){0<=e&&(e=this.bufObject.seekIDR(e),this.seekPos=e)}toSeek(e){this.seekTime=e,e=this.findSegmentIndexByTime(e);var t=this.getSegmentByIndex(e);null!=e&&t&&t!==this.tsList.nextSegment&&(this.seekStartTime=t.start,this.setNextSegmentByIndex(e),this.timerFeed&&window.clearInterval(this.timerFeed),this.downLoadInterval())}limitDownloads(e){e!=this.limitDownload&&(this.timerFeed&&window.clearInterval(this.timerFeed),this.limitDownload=e,this.limitDownload?this.timerFeed&&window.clearInterval(this.timerFeed):this.downLoadInterval())}}},function(e,t,i){const n=i(5),r=[/#EXT-X-PROGRAM-DATE-TIME.+\n/g],a={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",streamInf:"STREAM-INF",isComment:e=>e&&"#"===e[0]&&!e.startsWith(a.tagPrefix),isBlank:e=>""===e,canStrip:e=>a.isBlank(e)||a.isComment(e),defaultMinDur:99999,hlsSliceLimit:100};t.M3u8Base=class{constructor(e){this.initState=!0,this.controller=new AbortController,this._slices=[],this._type=n.PLAYER_IN_TYPE_M3U8_LIVE,this._preURI="",this.duration=-1,this.onTransportStream=null,this.onFinished=null,this.config=e}isLive(){return this._type===n.PLAYER_IN_TYPE_M3U8_LIVE?1:0}release(){this.initState=!1}fetchM3u8(e){let t=this;if(this.initState){let i;this.config.headers&&(i={headers:new Headers(this.config.headers)}),fetch(e,i).then((e=>e.text())).then((i=>1==t._uriParse(e)?t._m3u8Parse(i):null)).then((i=>{null!=i&&!1!==i&&!0!==i&&this._type==n.PLAYER_IN_TYPE_M3U8_LIVE&&setTimeout((()=>{t.fetchM3u8(e)}),500*i)})).catch((i=>{setTimeout((()=>{t.fetchM3u8(e)}),500)}))}}_uriParse(e){var t;this._preURI="";let i=null;if((e=e.split("://")).length<1)return!1;1<e.length?(t=e[0],i=e[1].split("/"),this._preURI=t+"://"):i=e[0].split("/");for(var n=0;n<i.length-1;n++)this._preURI+=i[n]+"/";return!0}_m3u8Parse(e){let t=e;for(let i=0;i<r.length;i++)t=e.replace(r[i],"");var i,s=t.split(a.lineDelimiter);let o=a.defaultMinDur,l="";for(let e=0;e<s.length;e++){let t=s[e];if(!(t.length<1)){if(null!=l&&""!==l)switch(l){case a.version:case a.mediaSequence:case a.allowCache:case a.discontinuity:case a.targetDuration:case a.combined:break;case a.streamInf:return t.indexOf("http")<0&&t.indexOf(this._preURI)<0&&(t=this._preURI+t),this.fetchM3u8(t),null}var h;if(null!=(p=this._readTag(t)))switch(l=p.key,p.key){case a.version:case a.mediaSequence:case a.allowCache:case a.discontinuity:case a.targetDuration:case a.combined:case a.streamInf:break;case a.endList:return this._type=n.PLAYER_IN_TYPE_M3U8_VOD,null!=this.onFinished&&(h={type:this._type,duration:this.duration},this.onFinished(h)),!0}if(null!=(p=a.segmentParse.exec(t))){var u,d,c=p[1],f=-1==this.duration?0:this.duration,p=(-1==this.duration&&(this.duration=0),this.duration+=parseFloat(p[1]),-1==this.duration?0:this.duration),m=(o>c&&(o=c),s[e+=1]);let t=null;t=0<=m.indexOf("http")?m:("/"===m[0]&&(d=(u=this._preURI.split("//"))[u.length-1].split("/"),this._preURI=u[0]+"//"+d[0]),this._preURI+m),this._slices.indexOf(t)<0&&(this._slices.push(t),null!=this.onTransportStream)&&this.onTransportStream(t,c,f,p)}}}return this._slices.length>a.hlsSliceLimit&&this._type==n.PLAYER_IN_TYPE_M3U8_LIVE&&(this._slices=this._slices.slice(-1*a.hlsSliceLimit)),null!=this.onFinished&&(i={type:this._type,duration:-1},this.onFinished(i)),o}_readTag(e){return null!==(e=a.tagParse.exec(e))?{key:e[1],value:e[3]}:null}}},function(e,t,i){(function(e){e.STATIC_MEM_wasmDecoderState=-1,e.STATICE_MEM_playerCount=-1,e.STATICE_MEM_playerIndexPtr=0}).call(this,i(27))},function(e,t){t.UI=class{constructor(){}static createPlayerRender(e,t,i){return(e=document.querySelector("div#"+e)).style.position="relative",e.style.backgroundColor="black",e.style.width=t+"px",e.style.height=i+"px",e}}},function(e,t,i){i=[i(98),i(6),i(2)],t=function(e,t,i){function n(e){e.mediaController.off(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,e._onPlayAttempt),e.mediaController.off(t.JWPLAYER_PROVIDER_FIRST_FRAME,e._triggerFirstFrame),e.mediaController.off(t.JWPLAYER_MEDIA_TIME,e._onTime)}return{model:function(r){r.on("change:mediaModel",(function(r,a,s){var o;r._qoeItem&&s&&r._qoeItem.end(s.get("state")),r._qoeItem=new e,r._qoeItem.tick(t.JWPLAYER_PLAYLIST_ITEM),r._qoeItem.start(a.get("state")),n(o=r),o._triggerFirstFrame=i.once((function(){var e=((e=o._qoeItem).tick(t.JWPLAYER_MEDIA_FIRST_FRAME),e.between(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,t.JWPLAYER_MEDIA_FIRST_FRAME));o.mediaController.trigger(t.JWPLAYER_MEDIA_FIRST_FRAME,{loadTime:e}),n(o)})),o._onTime=function(e){var t=Number.MIN_VALUE;return function(i){i.position>t&&e(),t=i.position}}(o._triggerFirstFrame),o._onPlayAttempt=function(){o._qoeItem.tick(t.JWPLAYER_MEDIA_PLAY_ATTEMPT)},o.mediaController.on(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,o._onPlayAttempt),o.mediaController.once(t.JWPLAYER_PROVIDER_FIRST_FRAME,o._triggerFirstFrame),o.mediaController.on(t.JWPLAYER_MEDIA_TIME,o._onTime),a.on("change:state",(function(e,t,i){r._qoeItem.end(i),r._qoeItem.start(t)}))}))}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(7)],t=function(e,t){return e.extend({get:function(e){return this.attributes=this.attributes||{},this.attributes[e]},set:function(e,t){this.attributes=this.attributes||{};var i=this.attributes[e];this.attributes[e]=t,this.trigger("change:"+e,this,t,i)},clone:function(){return e.clone(this.attributes)}},t)}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){"use strict";i.r(t);var n=i(122),r=i.n(n),a=(n=i(2),i.n(n)),s=(n=i(1),i.n(n)),o=(n=i(32),i.n(n));t.default=class{constructor(e){this.api=null,e&&e.advs&&a.a.isArray(e.advs)&&e.advs.length?(this.processAdvs=e.advs,this.hasProcessAdv=!0,this.el=s.a.createElement(r()())):this.hasProcessAdv=!1,this.activeAdv=null}setApi(e){this.api=e}refreshProcessAdv(e){var t=a.a.find(this.processAdvs,(t=>e>=t.begin&&e<=t.end));t?t!==this.activeAdv&&(this.showAdv(t),this.activeAdv=t):this.hideAllProcessAdvs()}showAdv(e){var t=(i=this.element().getElementsByTagName("a")[0]).getElementsByTagName("img")[0],i=(i.setAttribute("href",e.material.landingPage),t.setAttribute("src",e.material.image),{display:"block","z-index":500,opacity:.9,left:"auto",right:"auto",top:"auto",bottom:"auto"});"left"===e.material.horizontalPosition?i.left=10:i.right=10,"top"===e.material.verticalPosition?i.top=10:i.bottom=50,o.a.style(this.element(),i)}hideAllProcessAdvs(){this.element().style.display="none",this.activeAdv=null}element(){if(this.api){var e=this.api.getContainer();if(0<s.a.getElementsByClassName("jw-process-adv",e).length)return s.a.getElementsByClassName("jw-process-adv",e)[0]}return this.el}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}t.__esModule=!0;var a=r(i(104)),s=n(i(191)),o=n(i(30)),l=r(i(21)),h=r(i(192));function u(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=s.default,e.Exception=o.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=h,e.template=function(t){return h.template(t,e)},e}i=n(i(194));var d=u();d.create=u,i.default(d),d.default=d,t.default=d,e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=i(21);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,i){var r=i.inverse,a=i.fn;return!0===t?a(this):!1===t||null==t?r(this):n.isArray(t)?0<t.length?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):r(this):(i.data&&i.ids&&((r=n.createFrame(i.data)).contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:r}),a(t,i))}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=i(21),r=(i=i(30))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new r.default("Must pass iterator to #each");var i,a=t.fn,s=t.inverse,o=0,l="",h=void 0,u=void 0;function d(t,i,r){h&&(h.key=t,h.index=i,h.first=0===i,h.last=!!r,u)&&(h.contextPath=u+t),l+=a(e[t],{data:h,blockParams:n.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=n.appendContextPath(t.data.contextPath,t.ids[0])+"."),n.isFunction(e)&&(e=e.call(this)),t.data&&(h=n.createFrame(t.data)),e&&"object"==typeof e)if(n.isArray(e))for(var c=e.length;o<c;o++)o in e&&d(o,o,o===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var f=[],p=e[Symbol.iterator](),m=p.next();!m.done;m=p.next())f.push(m.value);for(c=(e=f).length;o<c;o++)d(o,o,o===e.length-1)}else i=void 0,Object.keys(e).forEach((function(e){void 0!==i&&d(i,o-1),i=e,o++})),void 0!==i&&d(i,o-1,!0);return l=0===o?s(this):l}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=(i=i(30))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new n.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=i(21),r=(i=i(30))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,i){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var r=1;null!=i.hash.level?r=i.hash.level:i.data&&null!=i.data.level&&(r=i.data.level),t[0]=r,e.log.apply(e,t)}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,i){return e&&i.lookupProperty(e,t)}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var n=i(21),r=(i=i(30))&&i.__esModule?i:{default:i};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new r.default("#with requires exactly one argument");n.isFunction(e)&&(e=e.call(this));var i,a=t.fn;return n.isEmpty(e)?t.inverse(this):(i=t.data,t.data&&t.ids&&((i=n.createFrame(t.data)).contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),a(e,{data:i,blockParams:n.blockParams([e],[i&&i.contextPath])}))}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){n.default(e)},t=i(189);var n=(i=t)&&i.__esModule?i:{default:i}},function(e,t,i){"use strict";t.__esModule=!0;var n=i(21);t.default=function(e){e.registerDecorator("inline",(function(e,t,i,r){var a=e;return t.partials||(t.partials={},a=function(r,a){var s=i.partials;return i.partials=n.extend({},s,t.partials),r=e(r,a),i.partials=s,r}),t.partials[r.args[0]]=r.fn,a}))},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.extend.apply(void 0,[Object.create(null)].concat(t))};var n=i(21)},function(e,t,i){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,i=a.COMPILER_REVISION;if(!(t>=a.LAST_COMPATIBLE_COMPILER_REVISION&&t<=a.COMPILER_REVISION))throw t<a.LAST_COMPATIBLE_COMPILER_REVISION?(i=a.REVISION_CHANGES[i],t=a.REVISION_CHANGES[t],new r.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+t+").")):new r.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new r.default("No environment passed to template");if(!e||!e.main)throw new r.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var i=e.compiler&&7===e.compiler[0],u={strict:function(e,t,i){if(e&&t in e)return u.lookupProperty(e,t);throw new r.default('"'+t+'" not defined in '+e,{loc:i})},lookupProperty:function(e,t){var i=e[t];return null==i||Object.prototype.hasOwnProperty.call(e,t)||l.resultIsAllowed(i,u.protoAccessControl,t)?i:void 0},lookup:function(e,t){for(var i=e.length,n=0;n<i;n++)if(null!=(e[n]&&u.lookupProperty(e[n],t)))return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:n.escapeExpression,invokePartial:function(i,a,s){s.hash&&(a=n.extend({},a,s.hash),s.ids)&&(s.ids[0]=!0),i=t.VM.resolvePartial.call(this,i,a,s);var o=n.extend({},s,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,i,a,o);if(null==l&&t.compile&&(s.partials[s.name]=t.compile(i,e.compilerOptions,t),l=s.partials[s.name](a,o)),null==l)throw new r.default("The partial "+s.name+" could not be compiled when running in runtime-only mode");if(s.indent){for(var h=l.split("\n"),u=0,d=h.length;u<d&&(h[u]||u+1!==d);u++)h[u]=s.indent+h[u];l=h.join("\n")}return l},fn:function(t){var i=e[t];return i.decorator=e[t+"_d"],i},programs:[],program:function(e,t,i,n,r){var a=this.programs[e],s=this.fn(e);return t||r||n||i?h(this,e,s,t,i,n,r):a||(this.programs[e]=h(this,e,s))},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var i=e||t;return e&&t&&e!==t?n.extend({},t,e):i},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function c(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=i.data,r=(c._setup(i),void(!i.partial&&e.useData&&(n=function(e,t){return t&&"root"in t||((t=t?a.createFrame(t):{}).root=e),t}(t,n)))),s=e.useBlockParams?[]:void 0;function o(t){return""+e.main(u,t,u.helpers,u.partials,n,s,r)}return e.useDepths&&(r=i.depths?t!=i.depths[0]?[t].concat(i.depths):i.depths:[t]),(o=d(e.main,o,u,i.depths||[],n,s))(t,i)}return c.isTop=!0,c._setup=function(r){var a,h,d;r.partial?(u.protoAccessControl=r.protoAccessControl,u.helpers=r.helpers,u.partials=r.partials,u.decorators=r.decorators,u.hooks=r.hooks):(a=n.extend({},t.helpers,r.helpers),h=a,d=u,Object.keys(h).forEach((function(e){var t,i=h[e];h[e]=(t=d.lookupProperty,o.wrapHelper(i,(function(e){return n.extend({lookupProperty:t},e)})))})),u.helpers=a,e.usePartial&&(u.partials=u.mergeIfNeeded(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(u.decorators=n.extend({},t.decorators,r.decorators)),u.hooks={},u.protoAccessControl=l.createProtoAccessControl(r),a=r.allowCallsToHelperMissing||i,s.moveHelperToHooks(u,"helperMissing",a),s.moveHelperToHooks(u,"blockHelperMissing",a))},c._child=function(t,i,n,a){if(e.useBlockParams&&!n)throw new r.default("must pass block params");if(e.useDepths&&!a)throw new r.default("must pass parent depths");return h(u,t,e[t],i,0,n,a)},c},t.wrapProgram=h,t.resolvePartial=function(e,t,i){return e?e.call||i.name||(i.name=e,e=i.partials[e]):e="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],e},t.invokePartial=function(e,t,i){var s=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var o=void 0;if(i.fn&&i.fn!==u&&function(){i.data=a.createFrame(i.data);var e=i.fn;o=i.data["partial-block"]=function(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i.data=a.createFrame(i.data),i.data["partial-block"]=s,e(t,i)},e.partials&&(i.partials=n.extend({},i.partials,e.partials))}(),void 0===e&&o&&(e=o),void 0===e)throw new r.default("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)},t.noop=u;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(21)),r=(t=i(30))&&t.__esModule?t:{default:t},a=i(104),s=i(105),o=i(193),l=i(107);function h(e,t,i,n,r,a,s){function o(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(o=[t].concat(s)),i(e,t,e.helpers,e.partials,r.data||n,a&&[r.blockParams].concat(a),o)}return(o=d(i,o,e,s,n,a)).program=t,o.depth=s?s.length:0,o.blockParams=r||0,o}function u(){return""}function d(e,t,i,r,a,s){return e.decorator&&(t=e.decorator(t,e={},i,r&&r[0],a,s,r),n.extend(t,e)),t}},function(e,t,i){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",(function(){return this})),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},function(e,t,i){i=[i(7),i(72),i(71),i(6),i(16),i(1),i(2)],t=function(e,t,i,n,r,a,s){function o(e,n){this.model=n,this._adModel=(new t).setup({id:n.get("id"),volume:n.get("volume"),fullscreen:n.get("fullscreen"),mute:n.get("mute")}),this._adModel.on("change:state",i,this),n=e.getContainer(),this.swf=n.querySelector("object")}return o.prototype=s.extend({init:function(){var e,t;a.isChrome()&&(t=!(e=-1),this.swf.on("throttle",(function(i){var n;clearTimeout(e),"resume"===i.state?t&&(t=!1,this.instreamPlay()):(n=this,e=setTimeout((function(){n._adModel.get("state")===r.PLAYING&&(t=!0,n.instreamPause())}),250))}),this)),this.swf.on("instream:state",(function(e){switch(e.newstate){case r.PLAYING:case r.PAUSED:this._adModel.set("state",e.newstate)}}),this).on("instream:time",(function(e){this._adModel.set("position",e.position),this._adModel.set("duration",e.duration),this.trigger(n.JWPLAYER_MEDIA_TIME,e)}),this).on("instream:complete",(function(e){this.trigger(n.JWPLAYER_MEDIA_COMPLETE,e)}),this).on("instream:error",(function(e){this.trigger(n.JWPLAYER_MEDIA_ERROR,e)}),this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(e){this.model.on("change:volume",(function(t,i){e.volume(i)}),this),this.model.on("change:mute",(function(t,i){e.mute(i)}),this)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null)},load:function(e){this.swf.triggerFlash("instream:load",e)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},e),o}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(197),i(7),i(2),i(6)],t=function(e,t,i,n){function r(t,r,a,s){var o,l=this,h=e.getQueue();function u(){c("瀹夎瓒呮椂","瀹夎鏃堕棿澶т簬30绉掞紝瑙嗛涓嶈兘鎾斁")}function d(){i.each(h,(function(e){var u,f;!0!==e.complete&&!0!==e.running&&null!==t&&(f=e.depends,i.all(f,(function(e){return h[e].complete})))&&(e.running=!0,(u=e).method((function(e){var t;t=u,"error"===(e=e=e||{}).type?c(e.msg,e.reason,e.code||""):"complete"===e.type?(clearTimeout(o),l.trigger(n.JWPLAYER_READY)):(t.complete=!0,d())}),r,t,a,s))}))}function c(e,t,i){clearTimeout(o),l.trigger(n.JWPLAYER_SETUP_ERROR,{message:e+": "+t,code:i}),l.destroy()}this.start=function(){o=setTimeout(u,3e4),d()},this.destroy=function(){clearTimeout(o),this.off(),h.length=0,a=r=t=null}}return r.prototype=t,r}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(46),i(76),i(109),i(77),i(45),i(2),i(1),i(6),i(15),i(33)],t=function(e,t,i,n,r,a,s,o,l,h){var u,d;function c(e){e()}function f(e){e()}function p(e){e()}function m(e){e()}function g(e,i){(u=t.loadPlugins(i.get("id"),i.get("plugins"))).on(o.COMPLETE,e),u.on(o.ERROR,a.partial(y,e)),u.load()}function _(e,t,i){u.setupPlugins(i,t),e()}function y(e,t){C(e,"Could not load plugin",t.message)}function v(e,t){var n=t.get("playlist");a.isString(n)?((d=new i).on(o.JWPLAYER_PLAYLIST_LOADED,(function(i){t.set("playlist",i.playlist),t.set("feedid",i.feedid),e()})),d.on(o.JWPLAYER_ERROR,a.partial(E,e)),d.load(n)):e()}function A(e,t,i,n,r){var a;r(t=t.get("playlist"))?e():(r={},t=function(e){return{errorMessage:s.isMobile()&&(s.isRtmp(e[0].file)||s.isFlv(e[0].file))?"鎵嬫満涓婁笉鑳芥挱鏀緍tmp鎴杅lv鏍煎紡鐨勮棰�":"涓嶆敮鎸佺殑瑙嗛鏍煎紡鎴栬€呭獟浣撻棶棰�",errorCode:"111"}}(t),r.message=t.errorMessage,r.code=t.errorCode,"111"===r.code?(t=e,(a=r)&&a.message&&C(t,"瑙嗛鍔犺浇澶辫触",a.message,a.code||"")):(t=e,(a=r)&&a.message&&C(t,"鎾斁鍣ㄥ姞杞藉け璐�",a.message,a.code||"")))}function E(e,t){t&&t.message?C(e,"鎾斁鍒楄〃鍔犺浇澶辫触",t.message):C(e,"鎾斁鍣ㄥ姞杞藉け璐�","鏈彂鐜板彲鎾斁鐨勮祫婧�")}function b(e,t){var i=t.get("skin"),s=t.get("skinUrl");a.contains(r.SkinsIncluded,i)?e():(s=s||function(e,t){if(a.contains(r.SkinsLoadable,e))return t+"skins/"+e+".css"}(i,__DEBUG__?t.get("base"):r.repo),a.isString(s)&&!function(e){for(var t=document.styleSheets,i=0,n=t.length;i<n;i++)if(t[i].href===e)return 1}(s)&&(t.set("skin-loading",!0),(i=new n(s,!0)).addEventListener(o.COMPLETE,(function(){t.set("skin-loading",!1)})),i.addEventListener(o.ERROR,(function(){t.set("skin","bce"),t.set("skin-loading",!1)})),i.load()),a.defer((function(){e()})))}function w(t,i){var n=i.getProviders();i=i.get("playlist"),n=n.required(i),e.load(n).then(t)}function S(e,t,i,n){n.setup(),e()}function T(e){e({type:"complete"})}function C(e,t,i,n){e({type:"error",msg:t,reason:i,code:n||""})}return{getQueue:function(){return{LOAD_PROMISE_POLYFILL:{method:c,depends:[]},LOAD_BASE64_POLYFILL:{method:f,depends:[]},LOAD_JSON2:{method:p,depends:[]},LOADED_POLYFILLS:{method:m,depends:["LOAD_PROMISE_POLYFILL","LOAD_BASE64_POLYFILL","LOAD_JSON2"]},LOAD_PLUGINS:{method:g,depends:["LOADED_POLYFILLS"]},INIT_PLUGINS:{method:_,depends:["LOAD_PLUGINS","SETUP_VIEW"]},LOAD_PROVIDERS:{method:w,depends:["FILTER_PLAYLIST"]},LOAD_SKIN:{method:b,depends:["LOADED_POLYFILLS"]},LOAD_PLAYLIST:{method:v,depends:["LOADED_POLYFILLS"]},FILTER_PLAYLIST:{method:A,depends:[]},SETUP_VIEW:{method:S,depends:["LOAD_SKIN"]},SEND_READY:{method:T,depends:["INIT_PLUGINS","LOAD_PROVIDERS","SETUP_VIEW"]}}},error:C}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(60),i(1),i(6),i(7),i(2),i(77)],t=function(e,t,i,n,r,a){return function(s,o){var l,h=r.extend(this,n),u=a.loaderstatus.NEW,d=!1,c=r.size(o),f=!1;function p(){d||(d=!0,u=a.loaderstatus.COMPLETE,h.trigger(i.COMPLETE))}function m(){var n;f||(o&&0!==r.keys(o).length||p(),d)||(n=s.getPlugins(),l=r.after(c,p),r.each(o,(function(r,s){s=e.getPluginName(s);var o=(s=n[s]).getJS(),u=s.getTarget();(s=s.getStatus())!==a.loaderstatus.LOADING&&s!==a.loaderstatus.NEW&&(o&&!t.versionCheck(u)&&h.trigger(i.ERROR,{message:"Incompatible player version"}),l())})))}function g(e){var n;f||(n="File not found",e.url&&t.log(n,e.url),this.off(),this.trigger(i.ERROR,{message:n}),m())}this.setupPlugins=function(i,n){var a=[],o=s.getPlugins(),l=n.get("plugins");r.each(l,(function(n,s){var h=e.getPluginName(s),u=o[h],d=(s=u.getFlashPath(),u.getJS()),c=u.getURL();s&&(s=r.extend({name:h,swf:s,pluginmode:u.getPluginmode()},n),a.push(s)),t.tryCatch((function(){var e,n,a,s,o,f;function p(){var e=a.displayArea;e&&a.resize(e.clientWidth,e.clientHeight)}d&&l[c]&&((e=document.createElement("div")).id=i.id+"_"+h,e.className="jw-plugin jw-reset",n=r.extend({},l[c]),(n=u.getNewInstance(i,n,e)).addToPlayer=(s=i,o=n,f=e,function(){var e=t.getElementsByClassName("jw-overlays",s.getContainer())[0];e&&(e.appendChild(f),f.left=e.style.left,f.top=e.style.top,o.displayArea=e)}),n.resizeHandler=(a=n,function(){p(),setTimeout(p,400)}),i.addPlugin(h,n,e))}))instanceof t.Error&&t.log("ERROR: Failed to load "+h+".")})),n.set("flashPlugins",a)},this.load=function(){var e;t.exists(o)&&"object"!==t.typeOf(o)||(u=a.loaderstatus.LOADING,r.each(o,(function(e,n){t.exists(n)&&((n=s.addPlugin(n)).on(i.COMPLETE,m),n.on(i.ERROR,g))})),e=s.getPlugins(),r.each(e,(function(e){e.load()}))),m()},this.destroy=function(){f=!0,this.off()},this.getStatus=function(){return u}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(60),i(108)],t=function(e,t){return function(i){this.addPlugin=function(n){var r=e.getPluginName(n);return i[r]||(i[r]=new t(n)),i[r]},this.getPlugins=function(){return i}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(15),i(48),i(201),i(202),i(110)],t=function(e,t,i,n,r){var a=t.textContent,s=t.getChildNode,o=t.numChildren,l=t.localName;return t={parse:function(t){for(var h=[],u=0;u<o(t);u++){var d=s(t,u);if("channel"===l(d).toLowerCase())for(var c=0;c<o(d);c++){var f=s(d,c);"item"===l(f).toLowerCase()&&h.push(function(t){for(var s={},o=0;o<t.childNodes.length;o++){var h=t.childNodes[o],u=l(h);if(u)switch(u.toLowerCase()){case"enclosure":s.file=e.xmlAttribute(h,"url");break;case"title":s.title=a(h);break;case"guid":s.mediaid=a(h);break;case"pubdate":s.date=a(h);break;case"description":s.description=a(h);break;case"link":s.link=a(h);break;case"category":s.tags?s.tags+=a(h):s.tags=a(h)}}return s=n(t,s),s=i(t,s),new r(s)}(f))}}return h}},t}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(48),i(15),i(1)],t=function(e,t,i){return function(n,r){for(var a=[],s=[],o=t.xmlAttribute,l="default",h="file",u=0;u<n.childNodes.length;u++){var d,c=n.childNodes[u];"jwplayer"===c.prefix&&("source"===(d=e.localName(c))?(delete r.sources,a.push({file:o(c,h),default:o(c,l),label:o(c,"label"),type:o(c,"type")})):"track"===d?(delete r.tracks,s.push({file:o(c,h),default:o(c,l),kind:o(c,"kind"),label:o(c,"label")})):(r[d]=i.serialize(e.textContent(c)),"file"===d&&r.sources&&delete r.sources)),r.file||(r.file=r.link)}if(a.length)for(r.sources=[],u=0;u<a.length;u++)0<a[u].file.length&&(a[u][l]="true"===a[u][l],a[u].label.length||delete a[u].label,r.sources.push(a[u]));if(s.length)for(r.tracks=[],u=0;u<s.length;u++)0<s[u].file.length&&(s[u][l]="true"===s[u][l],s[u].kind=s[u].kind.length?s[u].kind:"captions",s[u].label.length||delete s[u].label,r.tracks.push(s[u]));return r}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(48),i(15),i(1)],t=function(e,t,i){var n=t.xmlAttribute,r=e.localName,a=e.textContent,s=e.numChildren;return function e(t,o){var l,h,u,d="tracks",c=[];for(h=0;h<s(t);h++)if("media"===(l=t.childNodes[h]).prefix&&r(l))switch(r(l).toLowerCase()){case"content":n(l,"duration")&&(o.duration=i.seconds(n(l,"duration"))),n(l,"url")&&(o.sources||(o.sources=[]),u={file:n(l,"url"),type:n(l,"type"),width:n(l,"width"),label:n(l,"label")},(f=function(e){for(var t=[],i=0;i<s(e);i++){var n=e.childNodes[i];"jwplayer"===n.prefix&&"mediatypes"===r(n).toLowerCase()&&t.push(a(n))}return t}(l)).length&&(u.mediaTypes=f),o.sources.push(u)),0<s(l)&&(o=e(l,o));break;case"title":o.title=a(l);break;case"description":o.description=a(l);break;case"guid":o.mediaid=a(l);break;case"thumbnail":o.image||(o.image=n(l,"url"));break;case"player":break;case"group":e(l,o);break;case"subtitle":var f={};f.file=n(l,"url"),f.kind="captions",0<n(l,"lang").length&&(f.label={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"}[u=n(l,"lang")]||u),c.push(f)}for(o.hasOwnProperty(d)||(o[d]=[]),h=0;h<c.length;h++)o[d].push(c[h]);return o}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2)],t=function(e){var t={kind:"captions",default:!1};return function(i){if(i&&i.file)return e.extend({},t,i)}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(48),i(78),i(205),i(1)],t=function(e,t,i,n){return function(r,a){function s(e){if(e.tracks.length){a.mediaController.off("meta",d),o=[],l={},h={},u=0;for(var t=e.tracks||[],i=0;i<t.length;i++){var n=t[i];n.id=n.name,n.label=n.name||n.language,p(n)}e=m(),this.setCaptionsList(e),g()}}a.on("change:playlistItem",f,this),a.on("change:captionsIndex",(function(e,t){var i=null;0!==t&&(i=o[t-1]),e.set("captionsTrack",i)}),this),a.on("itemReady",(function(r){f(),a.mediaController.off("meta",d),a.mediaController.off("subtitlesTracks",s);var l,h,u,_=r.tracks;for(a.get("provider").name,n.isChrome()||n.isIOS()||n.isSafari(),u=0;u<_.length;u++)(l=_[u]).file&&/\.(?:web)?vtt(?:\?.*)?$/i.test(l.file),"captions"!==(h=l.kind.toLowerCase())&&"subtitles"!==h||(l.file?(p(l),function(r){n.ajax(r.file,(function(n){var a=r,s=n.responseXML?n.responseXML.firstChild:null;if(s)for("xml"===e.localName(s)&&(s=s.nextSibling);s.nodeType===s.COMMENT_NODE;)s=s.nextSibling;try{s&&"tt"===e.localName(s)?a.data=i(n.responseXML):a.data=t(n.responseText)}catch(n){c(n.message+": "+a.file)}}),c)}(l)):l.data&&p(l));o.length||(a.mediaController.on("meta",d,this),a.mediaController.on("subtitlesTracks",s,this)),r=m(),this.setCaptionsList(r),g()}),this),a.mediaController.on("subtitlesTracks",s,this),a.mediaController.on("subtitlesTrackData",(function(e){var t=l[e.name];if(t){t.source=e.source;for(var i=e.captions||[],n=!1,r=0;r<i.length;r++){var a=i[r],s=e.name+"_"+a.begin+"_"+a.end;h[s]||(h[s]=a,t.data.push(a),n=!0)}n&&t.data.sort((function(e,t){return e.begin-t.begin}))}}),this),a.mediaController.on("meta",d,this),a.get("sdkplatform");var o=[],l={},h={},u=0;function d(e){var t,i,n,r=e.metadata;!r||"textdata"!==r.type||!r.text||((t=l[r.trackid])||(p(t={kind:"captions",id:r.trackid,data:[]}),n=m(),this.setCaptionsList(n)),n=r.useDTS?(t.source||(t.source=r.source||"mpegts"),i=r.begin,r.begin+"_"+r.text):(i=e.position||a.get("position"),Math.round(10*i)+"_"+r.text),e=h[n])||(e={begin:i,text:r.text},r.end&&(e.end=r.end),h[n]=e,t.data.push(e))}function c(e){n.log("CAPTIONS("+e+")")}function f(e,t){o=[],l={},h={},u=0}function p(e){"number"!=typeof e.id&&(e.id=e.name||e.file||"cc"+o.length),e.data=e.data||[],e.label||(e.label="Unknown CC",1<++u&&(e.label+=" ("+u+")")),o.push(e),l[e.id]=e}function m(){for(var e=[{id:"off",label:"Off"}],t=0;t<o.length;t++)e.push({id:o[t].id,label:o[t].label||"Unknown CC"});return e}function g(){var e=0,t=a.get("captionLabel");if("Off"===t)a.set("captionsIndex",0);else{for(var i,n=0;n<o.length;n++){var r=o[n];if(t&&t===r.label){e=n+1;break}r.default||r.defaulttrack||"default"===r.id?e=n+1:r.autoselect}i=e,o.length?a.setVideoSubtitleTrack(i,o):a.set("captionsIndex",i)}}this.getCurrentIndex=function(){return a.get("captionsIndex")},this.getCaptionsList=function(){return a.get("captionsList")},this.setCaptionsList=function(e){a.set("captionsList",e)}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(15)],t=function(e){var t=e.seconds;return function(r){i(r);var a=[],s=r.getElementsByTagName("p");i(s),s.length||(s=r.getElementsByTagName("tt:p")).length||(s=r.getElementsByTagName("tts:p"));for(var o=0;o<s.length;o++){var l,h,u=s[o],d=u.innerHTML||u.textContent||u.text||"";(d=e.trim(d).replace(/>\s+</g,"><").replace(/tts?:/g,""))&&(h=u.getAttribute("begin"),l=u.getAttribute("dur"),u=u.getAttribute("end"),h={begin:t(h),text:d},u?h.end=t(u):l&&(h.end=h.begin+t(l)),a.push(h))}return a.length||n(),a};function i(e){e||n()}function n(){throw new Error("Invalid DFXP file")}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(110),i(111),i(2),i(46)],t=function(e,t,i,n){function r(t){return t=i.isArray(t)?t:[t],i.compact(i.map(t,e))}r.filterPlaylist=function(e,t,n,r,l,h,u,d,c){var f=[];return i.each(e,(function(e){(e=i.extend({},e)).allSources=a(e.sources,n,e.drm||r,e.preload||l,o(e.withCredentials,u),d,c),e.sources=s(e.allSources,t),e.sources.length&&(e.file=e.sources[0].file,(e.preload||l)&&(e.preload=e.preload||l),(e.feedid||h)&&(e.feedid=e.feedid||h),f.push(e))})),f};var a=function(e,n,r,a,s,l,h){return i.compact(i.map(e,(function(e){if(i.isObject(e))return null!=n&&(e.androidhls=n),(e.drm||r)&&(e.drm=e.drm||r),(e.preload||a)&&(e.preload=e.preload||a),e.withCredentials=o(e.withCredentials,s),e.isHEVC=!0,e.isNative=!0,t(e)})))},s=function(e,t){return t=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(t.choose(n))return n.type}return null}(e,t=t&&t.choose?t:new n({primary:t?"flash":null})),i.where(e,{type:t})};function o(e,t){return i.isUndefined(e)?t:e}return r}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(6),i(7),i(45),i(16),i(208),i(209),i(210),i(212),i(214),i(216),i(229),i(230),i(232),i(233),i(235),i(236),i(2),i(238),i(239),i(241),i(242),i(75),i(49)],t=function(e,t,i,n,r,a,s,o,l,h,u,d,c,f,p,m,g,_,y,v,A,E,b,w){var S=e.style,T=e.bounds,C=e.isMobile(),L=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],R={versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1===e.indexOf("Safari"),weixin:-1<e.indexOf("MicroMessenger"),qq:" qq"===e.match(/\sQQ/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};return function(I,k){var P,D,x,M,F,B,O,U,N,j,V,G,H,Y,W,z,Q,K,J,Z,q,X,$,ee,te,ie,ne=-1,re=2e3,ae=!1,se=!1,oe=-1,le=-1,he=!1,ue=_.extend(this,i),de=(this.model=k,this.api=I,P=e.createElement(y({id:k.get("id")})),e.isIE()&&e.addClass(P,"jw-ie"),e.isPoorIE()&&e.addClass(P,"jw-ie-poorie"),k.get("flashUI")&&e.addClass(P,"jw-flashui"),k.get("width")),ce=k.get("height");function fe(t){var i=0,r=k.get("duration"),a=k.get("position");"DVR"===e.adaptiveType(r)&&(i=r,r=Math.max(a,n.dvrSeekLimit)),a=e.between(a+t,i,r),I.seek(a)}function pe(t){var i,n=k.get("volume");"-"===t?i=100<n?-50:-10:(i=100<=n?50:10,n<100&&100<n+i&&(i=100-n)),n=(t=k.getVideo())&&0===t.getName().name.indexOf("flash")?500:100,t=e.between(k.get("volume")+i,0,n),I.setVolume(t)}function me(e){var t,i=k.get("keyControls");if((t=e).ctrlKey||t.metaKey||!k.get("controls"))return!0;switch(ae||Ve(),e.keyCode){case 27:I.setFullscreen(!1);break;case 13:case 32:i&&I.play({reason:"interaction"});break;case 37:ae||fe((n=k.get("seek_step"))?1+~n:-5);break;case 39:ae||fe((n=k.get("seek_step"))||5);break;case 38:pe("+");break;case 40:pe("-");break;case 67:var n=I.getCaptionsList().length;n&&(n=(I.getCurrentCaptions()+1)%n,I.setCurrentCaptions(n));break;case 77:i&&I.setMute();break;case 70:i&&I.setFullscreen();break;default:i&&48<=e.keyCode&&e.keyCode<=59&&(n=(e.keyCode-48)/10*k.get("duration"),I.seek(n))}return/13|32|37|38|39|40/.test(e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0}function ge(){he=!1,e.removeClass(P,"jw-no-focus")}function _e(){he=!0,e.addClass(P,"jw-no-focus")}function ye(){he||ge(),ae||Ve()}function ve(){var i=T(P),n=Math.round(i.width),r=Math.round(i.height);return document.body.contains(P)?n&&r&&(n===M&&r===F||(M=n,F=r,clearTimeout(oe),oe=setTimeout(Oe,50),k.set("containerWidth",n),k.set("containerHeight",r),ue.trigger(t.JWPLAYER_RESIZE,{width:n,height:r}))):(e.removeEventListener(window,"resize",ve),C&&e.removeEventListener(window,"orientationchange",ve)),i}function Ae(t,i){e.toggleClass(P,"jw-flag-casting",i=i||!1)}function Ee(t,i){e.toggleClass(P,"jw-flag-cast-available",i),e.toggleClass(D,"jw-flag-cast-available",i)}function be(t,i){e.replaceClass(P,/jw-stretch-\S+/,"jw-stretch-"+i)}function we(t,i){e.toggleClass(P,"jw-flag-compact-player",i)}function Se(t){t&&!C&&(e.addEventListener(t.element(),"mousemove",Le,!1),e.addEventListener(t.element(),"mouseout",Re,!1))}function Te(){k.get("state")!==r.IDLE&&k.get("state")!==r.COMPLETE&&k.get("state")!==r.PAUSED||!k.get("controls")||I.play({reason:"interaction"}),(se?je:Ve)()}function Ce(e){e.link?(I.pause(!0),I.setFullscreen(!1),window.open(e.link,e.linktarget)):k.get("controls")&&I.play({reason:"interaction"})}function Le(){clearTimeout(ne)}function Re(){Ve()}function Ie(e){ue.trigger(e.type,e)}function ke(t,i){i?(J&&J.destroy(),e.addClass(P,"jw-flag-flash-blocked")):(J&&J.setup(k,P,P),e.removeClass(P,"jw-flag-flash-blocked"))}S(P,{width:0<de.toString().indexOf("%")?de:de+"px",height:0<ce.toString().indexOf("%")?ce:ce+"px"}),q=P.requestFullscreen||P.webkitRequestFullscreen||P.webkitRequestFullScreen||P.mozRequestFullScreen||P.msRequestFullscreen,X=document.exitFullscreen||document.webkitExitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,ie=q&&X,this.onChangeSkin=function(t,i){e.replaceClass(P,/jw-skin-\S+/,i?"jw-skin-"+i:"")},this.handleColorOverrides=function(){var t=k.get("id");function i(i,n,r){var a;r&&(i=e.prefix(i,"#"+t+" "),(a={})[n]=r,e.css(i.join(", "),a,t))}var n=k.get("skinColorActive"),r=k.get("skinColorInactive"),a=k.get("skinColorBackground");i([".jw-toggle",".jw-button-color:hover"],"color",n),i([".jw-active-option",".jw-progress",".jw-playlist-container .jw-option.jw-active-option",".jw-playlist-container .jw-option:hover"],"background",n),i([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-tooltip-title",".jw-skip .jw-skip-icon",".jw-playlist-container .jw-icon"],"color",r),i([".jw-cue",".jw-knob"],"background",r),i([".jw-playlist-container .jw-option"],"border-bottom-color",r),i([".jw-background-color",".jw-tooltip-title",".jw-playlist",".jw-playlist-container .jw-option"],"background",a),i([".jw-playlist-container ::-webkit-scrollbar"],"border-color",a)},this.setup=function(){te=new b,this.handleColorOverrides(),!0===k.get("skin-loading")&&(e.addClass(P,"jw-flag-skin-loading"),k.once("change:skin-loading",(function(){e.removeClass(P,"jw-flag-skin-loading")}))),this.onChangeSkin(k,k.get("skin"),""),k.on("change:skin",this.onChangeSkin,this),x=e.getElementsByClassName("jw-media",P)[0],D=e.getElementsByClassName("jw-controls",P)[0];var i,n=e.getElementsByClassName("jw-preview",P)[0],_=((U=new d(k)).setup(n),e.getElementsByClassName("jw-title",P)[0]);(W=new m(k)).setup(_),e.isPoorIE()?(e.style(e.getElementsByClassName("jw-marquee",P)[0],{display:"none"}),e.style(e.getElementsByClassName("jw-danmaku",P)[0],{display:"none"})):(N=new c(k,I),k.get("imageAdvs")&&P.appendChild(N.element()),k.get("marquee").show&&(_=e.getElementsByClassName("jw-marquee",P)[0],j=new f(k,_),e.style(P,{overflow:"hidden"})),k.get("danmaku")&&(this.api.danmaku=z=new g(P,k))),k.advManage&&k.advManage.hasProcessAdv&&P.appendChild(k.advManage.element()),_=e.getElementsByClassName("jw-overlays",P)[0],e.addEventListener(_,"mousemove",Ve),(V=new s(k,x,{useHover:!0})).on("click",(function(){if(e.isMobile()){var i=e.hasClass(P,"jw-flag-user-inactive");if(i&&(Ve(),"playing"===Z))return}Ie({type:t.JWPLAYER_DISPLAY_CLICK}),k.get("danmaku")&&(i=JSON.parse(JSON.stringify(k.get("danmaku"))),k.set("danmaku",Object.assign(i,{active:!1}))),k.get("controls")&&!k.get("flashUI")&&k.get("allowClickToDisplay")&&I.play({reason:"interaction"})})),V.on("tap",(function(){Ie({type:t.JWPLAYER_DISPLAY_CLICK}),Te()})),k.get("allowDoubleClickFullscreen")&&V.on("doubleClick",De),V.on("move",Ve),V.on("over",Ve),(_=new o(k)).on("click",(function(){Ie({type:t.JWPLAYER_DISPLAY_CLICK}),I.play({reason:"interaction"})})),_.on("tap",(function(){Ie({type:t.JWPLAYER_DISPLAY_CLICK}),Te()})),D.appendChild(_.element()),H=new l(k),(Y=new h(k)).on(t.JWPLAYER_LOGO_CLICK,Ce),(_=document.createElement("div")).className="jw-controls-right jw-reset",Y.setup(_),_.appendChild(H.element()),D.appendChild(_),(Q=new a(k)).setup(P.id,k.get("captions")),D.parentNode.insertBefore(Q.element(),W.element()),k.get("watermark")&&(ee=new A(k,D,P.id)),_=k.get("height"),C&&("string"==typeof _||60<=_)?e.addClass(P,"jw-flag-touch"):(J=new p).setup(k,P,P),(O=new u(I,k,P)).on(t.JWPLAYER_USER_ACTION,Ve),O.on(t.JWPLAYER_CHANGE_LANGs,Ke),k.on("change:scrubbing",Me),k.on("change:compactUI",we),D.appendChild(O.element()),e.addEventListener(P,"focus",ye),e.addEventListener(P,"blur",ge),e.addEventListener(P,"keydown",me),P.onmousedown=_e,Ve(),k.set("mediaContainer",x),k.mediaController.on("fullscreenchange",Ue);for(var y=L.length;y--;)e.addEventListener(document,L[y],Ue,!1);e.removeEventListener(window,"resize",ve),e.addEventListener(window,"resize",ve,!1),C&&(e.removeEventListener(window,"orientationchange",ve),e.addEventListener(window,"orientationchange",ve,!1)),k.on("change:errorEvent",ze),k.on("change:controls",Pe),Pe(k,k.get("controls")),k.on("change:state",Qe),k.on("change:duration",We,this),k.on("change:flashBlocked",ke),ke(0,k.get("flashBlocked")),I.onPlaylistComplete(Ge),I.onPlaylistItem(He),k.on("change:castAvailable",Ee),Ee(0,k.get("castAvailable")),k.on("change:castActive",Ae),Ae(0,k.get("castActive")),k.get("stretching")&&be(0,k.get("stretching")),k.on("change:stretching",be),Qe(0,r.IDLE),k.on("change:fullscreen",Fe),Se(O),Se(Y),(_=k.get("aspectratio"))&&(e.addClass(P,"jw-flag-aspect-mode"),i=e.getElementsByClassName("jw-aspect",P)[0],S(i,{paddingTop:_})),I.on(t.JWPLAYER_READY,(function(){ve();var t=k.get("isMemoryPlay"),i=k.get("playlistItem").file;i=te.getItem("filePostion."+i),t&&i&&(i=e.timeFormat(i),t=k.get("lang")||"zh",new E({timeout:5e3,playerId:P.id,text:""+w.default[t].MEMORYPLAY.POSITION_TO+i},"memory-play-container").setup(D)),Be(k.get("width"),k.get("height"))})),I.on(t.JWPLAYER_PERFORMANCE,(e=>{O.elements.pictInpict.hide();var t=k.get("liveInfoPanel");t&&t.showH265Info&&($||($=new v(k)).setup(D),$.setData(e))})),k.on("connecting",(function(){ue.setAltText("姝ｅ湪涓庢湇鍔″櫒寤虹珛杩炴帴"),e.toggleClass(P,"jw-flag-live",!0)})),k.on("connectFaild",(function(){I.stop(),ue.setAltText("杩炴帴宸叉柇寮€锛岃绋嶅悗閲嶈瘯"),e.toggleClass(P,"jw-flag-live",!0),e.getElementsByClassName("jw-controlbar",P)[0].style.display="block"})),k.on("alive",(function(){"idle"!==ue.model.get("state")&&(ue.setAltText("鐩存挱涓�"),e.toggleClass(P,"jw-flag-live",!0),n.style.display="none",e.getElementsByClassName("jw-controlbar",P)[0].style.removeProperty("display"))})),k.on("noLiveStream",(function(){"idle"!==ue.model.get("state")&&k.get("isLive")&&(ue.setAltText("鏃犵洿鎾祦"),e.toggleClass(P,"jw-flag-live",!0),k.get("image")&&(n.style.display="block"),e.getElementsByClassName("jw-controlbar",P)[0].style.display="block")})),k.on("liveStop",(function(){I.stop(),ue.setAltText("鐩存挱缁撴潫"),e.toggleClass(P,"jw-flag-live",!0),e.getElementsByClassName("jw-controlbar",P)[0].style.display="block"})),k.on("seekAfterLoadSuccess",(function(){ue.setAltText("鑷姩璺宠浆鍒颁笂娆＄殑鎾斁鏃堕棿..."),e.addClass(O.element(),"jw-controlbar-textshow"),setTimeout((function(){e.removeClass(O.element(),"jw-controlbar-textshow")}),1e3)})),k.on("change:danmaku",(()=>{}))};var Pe=function(t,i){i&&Qe(0,(ae?B:k).get("state")),e.toggleClass(P,"jw-flag-controls-disabled",!i)};function De(){null!==R&&null!=R.versions&&void 0!==R.versions.android&&null!==R.versions.android&&!0===R.versions.android||k.get("controls")&&I.setFullscreen()}function xe(t){t.get("state")===r.PAUSED?t.once("change:state",xe):!1===t.get("scrubbing")&&e.removeClass(P,"jw-flag-dragging")}function Me(t,i){t.off("change:state",xe),i?e.addClass(P,"jw-flag-dragging"):xe(t)}var Fe=function(t,i){var n=k.getVideo();ie?(i?q.apply(P):(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msExitFullscreenElement)&&X.apply(document),Ne(P,i)):e.isIE()?Ne(P,i):(B&&B.getVideo()&&B.getVideo().setFullscreen(i),n.setFullscreen(i)),n&&0===n.getName().name.indexOf("flash")&&n.setFullscreen(i),j&&k.get("marquee").show&&j.reset(P.clientWidth,P.clientHeight)};function Be(t,i,n){var r=P.className;(n=!!n)&&(r=r.replace(/\s*aspectMode/,""),P.className!==r&&(P.className=r),e.style(P,{display:"block"},n)),e.exists(t)&&e.exists(i)&&(k.set("width",t),k.set("height",i)),r={width:t},e.hasClass(P,"jw-flag-aspect-mode")||(r.height=i),S(P,r,!0),K=function(e){return!k.get("aspectratio")&&!(_.isString(e)&&-1<e.indexOf("%"))&&function(e){return e&&e<=40*(C?1.75:1)}(_.isNumber(e)?e:k.get("containerHeight"))}(n=i),O&&!K&&Qe(n=ae?B:k,n.get("state")),e.toggleClass(P,"jw-flag-audio-player",K),Oe(t,i)}function Oe(t,i){if(!t||isNaN(Number(t))){if(!x)return;t=x.clientWidth}if(!i||isNaN(Number(i))){if(!x)return;i=x.clientHeight}U&&U.resize(t,i,k.get("stretching")),e.isMSIE(9)&&document.all&&!window.atob&&(t=i="100%");var n,a=k.getVideo();a&&(n=k.get("rotate"),n=Math.abs(O.rotateDeg/90)%2&&n.innerRotate,a.resize(t,i,k.get("stretching"),n)&&(clearTimeout(oe),oe=setTimeout(Oe,250)),Q.resize(),O.checkCompactMode(t),k.get("state")===r.PAUSED)&&k.get("imageAdvs")&&k.get("imageAdvs").pause&&N&&!N.isHidden()&&N.resizePauseAdv(t,i)}function Ue(e){k.get("fullscreen")!==(e=void 0!==e.jwstate?e.jwstate:ie?!(!(e=document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement)||e.id!==k.get("id")):(ae?B:k).getVideo().getFullScreen())&&k.set("fullscreen",e)}function Ne(t,i){i?(e.addClass(t,"jw-flag-fullscreen"),S(document.body,{"overflow-y":"hidden"}),Ve()):(e.removeClass(t,"jw-flag-fullscreen"),S(document.body,{"overflow-y":""})),Oe()}function je(){se=!1,clearTimeout(ne),O.hideComponents(),e.addClass(P,"jw-flag-user-inactive")}function Ve(){se||(e.removeClass(P,"jw-flag-user-inactive"),O.checkCompactMode(x.clientWidth)),se=!0,clearTimeout(ne),ne=setTimeout(je,re)}function Ge(){I.setFullscreen(!1),k.get("imageAdvs")&&k.get("imageAdvs").end&&N&&N.loadAdv("end")}function He(){G&&G.setState(k.get("state")),Ye(0,k.mediaModel.get("mediaType")),k.mediaModel.on("change:mediaType",Ye,this)}function Ye(t,i){i="audio"===i;var n=(n=k.getVideo())&&0===n.getName().name.indexOf("flash");e.toggleClass(P,"jw-flag-media-audio",i),i&&!n?P.insertBefore(U.el,x):P.insertBefore(U.el,Q.element())}function We(t,i){t=!0===t.get("isLive")||"LIVE"===e.adaptiveType(i)||"DVR"===e.adaptiveType(i),e.toggleClass(P,"jw-flag-live",t),t||ue.setAltText("")}function ze(e,t){t?t.name?W.updateText(t.name,t.message):W.updateText(t.message,""):W.playlistItem(e,e.get("playlistItem"))}function Qe(t,i){var n;if(Z=i,clearTimeout(le),i!==r.COMPLETE&&r.IDLE,!0===k.get("autostart")&&(Z="idle"===Z?"buffering":Z),e.replaceClass(P,/jw-state-\S+/,"jw-state-"+Z),(n=k.getVideo())&&n.isCaster)e.addClass(x,"jw-media-show");else switch(i){case r.PLAYING:N&&N.startAdvPlayed&&N.hide(),Math.abs(O.rotateDeg/90)%2==0&&Oe(),j&&k.get("marquee").show&&j.start(),z&&k.get("danmaku").show&&z.start();break;case r.PAUSED:N&&k.get("imageAdvs")&&k.get("imageAdvs").pause&&N.loadAdv("pause"),Ve(),j&&k.get("marquee").show&&j.pause(),z&&k.get("danmaku").show&&z.pause();break;case r.IDLE:j&&k.get("marquee").show&&j.pause(),z&&k.get("danmaku").show&&z.pause();break;case r.COMPLETE:j&&j.stop()}}function Ke(e){$&&$.changeLang(e)}this.resize=function(e,t){Be(e,t,!0),ve()},this.resizeMedia=Oe,this.reset=function(){document.contains(P)&&P.parentNode.replaceChild(void 0,P),e.emptyElement(P)},this.setupInstream=function(t){this.instreamModel=B=t,B.on("change:controls",Pe,this),B.on("change:state",Qe,this),ae=!0,e.addClass(P,"jw-flag-ads"),Ve()},this.setAltText=function(e){O.setAltText(e)},this.useExternalControls=function(){e.addClass(P,"jw-flag-ads-hide-controls")},this.destroyInstream=function(){ae=!1,B&&(B.off(null,null,this),B=null),this.setAltText(""),e.removeClass(P,"jw-flag-ads"),e.removeClass(P,"jw-flag-ads-hide-controls"),k.getVideo&&k.getVideo().setContainer(x),We(k,k.get("duration")),V.revertAlternateClickHandlers()},this.addCues=function(e){O&&O.addCues(e)},this.addThumbnails=function(e){O&&O.addThumbnails(e)},this.clickHandler=function(){return V},this.controlsContainer=function(){return D},this.getContainer=this.element=function(){return P},this.getSafeRegion=function(t){var i={x:0,y:0,width:k.get("containerWidth")||0,height:k.get("containerHeight")||0},n=k.get("dock");return n&&n.length&&k.get("controls")&&(i.y=H.element().clientHeight,i.height-=i.y),(t=t||!e.exists(t))&&k.get("controls")&&(i.height-=O.element().clientHeight),i},this.setCaptions=function(e){Q.clear(),Q.setup(k.get("id"),e),Q.resize()},this.destroy=function(){e.removeEventListener(window,"resize",ve),e.removeEventListener(window,"orientationchange",ve);for(var t=L.length;t--;)e.removeEventListener(document,L[t],Ue,Ue,!1);k.mediaController&&k.mediaController.off("fullscreenchange",Ue),e.removeEventListener(P,"keydown",me),J&&J.destroy(),G&&(k.off("change:state",G.statusDelegate),G.destroy(),G=null),ae&&this.destroyInstream(),Y&&Y.destroy(),ee&&ee.destroy(),N&&N.destroy(),e.clearCss(k.get("id"))},this.showAdv=function(e){N&&N.loadAdv(e)},this.beginStartAdv=function(){N&&N.beginStartAdv()},this.sendDanmu=e=>{e&&k.get("danmaku")&&k.get("danmaku").show?this.api.danmaku.send(e):e&&e.trim()&&(!k.get("danmaku")||k.get("danmaku")&&k.get("danmaku").show)},this.setLang=e=>{O&&O.setLang&&O.setLang(e)},this.setWatermark=e=>{e&&ee&&ee.setWatermarkOptions(e)}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(32),i(16),i(2)],t=function(e,t,i,n){var r=t.style,a={back:!0,fontSize:15,fontFamily:"Arial,sans-serif",fontOpacity:100,color:"#FFF",backgroundColor:"#000",backgroundOpacity:100,edgeStyle:null,windowColor:"#FFF",windowOpacity:0,preprocessor:n.identity};return function(s){var o,l,h,u,d,c,f={};function p(t){var i="jw-captions-window jw-reset";(t=t||"")?(c.innerHTML=t,d.className=i+" jw-captions-window-active"):(d.className=i,e.empty(c))}function m(e,t){if(e&&e.data&&t){i=(i=e).source,r=t.metadata;var i,r,a=i?!(!r||!n.isNumber(r[i]))&&r[i]:t.position;if(!1!==a){var s=e.data;if(!(0<=l&&g(s,l,a))){for(var o=-1,h=0;h<s.length;h++)if(g(s,h,a)){o=h;break}-1===o?p(""):o!==l&&(l=o,p(f.preprocessor(s[l].text)))}}}}function g(e,t,i){return e[t].begin<=i&&(!e[t].end||e[t].end>=i)&&(t===e.length-1||e[t+1].begin>=i)}function _(e,i,n){n=t.hexToRgba("#000000",n),"dropshadow"===e?i.textShadow="0 2px 1px "+n:"raised"===e?i.textShadow="0 0 5px "+n+", 0 1px 5px "+n+", 0 2px 5px "+n:"depressed"===e?i.textShadow="0 -2px 1px "+n:"uniform"===e&&(i.textShadow="-2px 0 1px "+n+",2px 0 1px "+n+",0 -2px 1px "+n+",0 2px 1px "+n+",-1px 1px 1px "+n+",1px 1px 1px "+n+",1px -1px 1px "+n+",1px 1px 1px "+n)}(u=document.createElement("div")).className="jw-captions jw-reset",this.show=function(){u.className="jw-captions jw-captions-enabled jw-reset"},this.hide=function(){u.className="jw-captions jw-reset"},this.populate=function(e){l=-1,(o=e)?m(e,h):p("")},this.resize=function(){var e=u.clientWidth;(e=Math.pow(e/400,.6))&&(e=f.fontSize*e,r(u,{fontSize:Math.round(e)+"px"}))},this.setup=function(e,i){var o,l,h,p,m;d=document.createElement("div"),c=document.createElement("span"),d.className="jw-captions-window jw-reset",c.className="jw-captions-text jw-reset",f=n.extend({},a,i),i&&(i=f.fontOpacity,p=f.windowOpacity,o=f.edgeStyle,m=f.backgroundColor,l={},h={color:t.hexToRgba(f.color,i),fontFamily:f.fontFamily,fontStyle:f.fontStyle,fontWeight:f.fontWeight,textDecoration:f.textDecoration},p&&(l.backgroundColor=t.hexToRgba(f.windowColor,p)),_(o,h,i),f.back?h.backgroundColor=t.hexToRgba(m,f.backgroundOpacity):null===o&&_("uniform",h),r(d,l),r(c,h),p=e,i=l,m=h,t.css("#"+p+" .jw-video::-webkit-media-text-track-display",i,p),t.css("#"+p+" .jw-video::cue",m,p),m.backgroundColor)&&(i="{background-color: "+m.backgroundColor+" !important;}",t.css("#"+p+" .jw-video::-webkit-media-text-track-display-backdrop",i,p)),d.appendChild(c),u.appendChild(d),this.populate(s.get("captionsTrack")),s.set("captions",f)},this.clear=function(){e.empty(u)},this.element=function(){return u},s.on("change:playlistItem",(function(){h=null,l=-1,p("")}),this),s.on("change:captionsTrack",(function(e,t){this.populate(t)}),this),s.mediaController.on("seek",(function(){l=-1}),this),s.mediaController.on("time seek",(function(e){m(o,h=e)}),this),s.mediaController.on("subtitlesTrackData",(function(){m(o,h)}),this),s.on("change:state",(function(e,t){switch(t){case i.IDLE:case i.ERROR:case i.COMPLETE:this.hide();break;default:this.show()}}),this)}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(14),i(6),i(7),i(2)],t=function(e,t,i,n){return function(r,a,s){n.extend(this,i),o=a,this.element=function(){return o};var o,l,h,u=((a=new e(o,n.extend({enableDoubleTap:!0,useMove:!0},s))).on("click tap",d),a.on("doubleClick doubleTap",(function(){h?h():u.trigger("doubleClick")})),a.on("move",(function(){u.trigger("move")})),a.on("over",(function(){u.trigger("over")})),a.on("out",(function(){u.trigger("out")})),this.clickHandler=d,this);function d(e){r.get("flashBlocked")||(l?l(e):u.trigger(e.type===t.touchEvents.CLICK?"click":"tap"))}this.setAlternateClickHandlers=function(e,t){l=e,h=t||null},this.revertAlternateClickHandlers=function(){h=l=null}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(7),i(14),i(211),i(2)],t=function(e,t,i,n,r){function a(a){r.extend(this,t),this.model=a,this.el=e.createElement(n({}));var s=this;this.iconUI=new i(this.el).on("click tap",(function(e){s.trigger(e.type)}))}return r.extend(a.prototype,{element:function(){return this.el}}),a}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){return'<div class="jw-display-icon-container jw-background-color jw-reset" style="cursor:none;pointer-events:none">\n    <div class="jw-icon jw-icon-display jw-button-color jw-reset"></div>\n</div>\n'},useData:!0})},function(e,t,i){i=[i(213),i(1),i(2),i(14)],t=function(e,t,i,n){function r(e){this.model=e,this.setup(),this.model.on("change:dock",this.render,this)}return i.extend(r.prototype,{setup:function(){var i=this.model.get("dock"),r=this.click.bind(this);i=e(i),this.el=t.createElement(i),new n(this.el).on("click tap",r)},getDockButton:function(e){return t.hasClass(e.target,"jw-dock-button")?e.target:(t.hasClass(e.target,"jw-dock-text")?e.target.parentElement:e.target).parentElement},click:function(e){var t=this.getDockButton(e).getAttribute("button"),n=this.model.get("dock");(n=i.findWhere(n,{id:t}))&&n.callback&&n.callback(e)},render:function(){var i=this.model.get("dock");i=e(i),i=t.createElement(i),this.el.innerHTML=i.innerHTML},element:function(){return this.el}}),r}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({1:function(e,t,i,n,r){var a,s,o=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="jw-dock-button jw-background-color jw-reset'+(null!=(a=l(i,"if").call(o,null!=t?l(t,"btnClass"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:59},end:{line:3,column:95}}}))?a:"")+'" button="'+e.escapeExpression("function"==typeof(s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing)?s.call(o,{name:"id",hash:{},data:r,loc:{start:{line:3,column:105},end:{line:3,column:111}}}):s)+'">\n        <div class="jw-icon jw-dock-image jw-reset" '+(null!=(a=l(i,"if").call(o,null!=t?l(t,"img"):t,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:52},end:{line:4,column:110}}}))?a:"")+'></div>\n        <div class="jw-arrow jw-reset"></div>\n'+(null!=(a=l(i,"if").call(o,null!=t?l(t,"tooltip"):t,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:8},end:{line:10,column:15}}}))?a:"")+"    </div>\n"},2:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+e.escapeExpression("function"==typeof(i=null!=(i=a(i,"btnClass")||(null!=t?a(t,"btnClass"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"btnClass",hash:{},data:r,loc:{start:{line:3,column:76},end:{line:3,column:88}}}):i)},4:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"style='background-image: url(\""+e.escapeExpression("function"==typeof(i=null!=(i=a(i,"img")||(null!=t?a(t,"img"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"img",hash:{},data:r,loc:{start:{line:4,column:93},end:{line:4,column:100}}}):i)+"\")'"},6:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="jw-overlay jw-background-color jw-reset">\n            <span class="jw-text jw-dock-text jw-reset">'+e.escapeExpression("function"==typeof(i=null!=(i=a(i,"tooltip")||(null!=t?a(t,"tooltip"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"tooltip",hash:{},data:r,loc:{start:{line:8,column:56},end:{line:8,column:67}}}):i)+"</span>\n        </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){return'<div class="jw-dock jw-reset">\n'+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:4},end:{line:12,column:13}}}))?i:"")+"</div>"},useData:!0})},function(e,t,i){i=[i(14),i(1),i(6),i(2),i(7),i(215)],t=function(e,t,i,n,r,a){var s=t.style,o={linktarget:"_blank",margin:8,hide:!1,position:"top-right"};return function(l){var h,u,d=new Image,c=n.extend({},l.get("logo"));return n.extend(this,r),this.setup=function(r){(u=n.extend({},o,c)).hide="true"===u.hide.toString(),h=t.createElement(a()),u.file&&(u.hide&&t.addClass(h,"jw-hide"),t.addClass(h,"jw-logo-"+(u.position||o.position)),"top-right"===u.position&&(l.on("change:dock",this.topRight,this),l.on("change:controls",this.topRight,this),this.topRight(l)),l.set("logo",u),d.onload=function(){var e,t={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};u.margin!==o.margin&&3===(e=/(\w+)-(\w+)/.exec(u.position)).length&&(t["margin-"+e[1]]=u.margin,t["margin-"+e[2]]=u.margin),s(h,t),l.set("logoWidth",t.width)},d.src=u.file,new e(h).on("click tap",(function(e){t.exists(e)&&e.stopPropagation&&e.stopPropagation(),this.trigger(i.JWPLAYER_LOGO_CLICK,{link:u.link,linktarget:u.linktarget})}),this),r.appendChild(h))},this.topRight=function(e){var t=e.get("controls"),i=e.get("dock");t=t&&(i&&i.length||e.get("sharing")||e.get("related")),s(h,{top:t?"3.5em":0})},this.element=function(){return h},this.position=function(){return u.position},this.destroy=function(){d.onload=null},this}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({1:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'src="'+e.escapeExpression("function"==typeof(i=null!=(i=a(i,"file")||(null!=t?a(t,"file"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"file",hash:{},data:r,loc:{start:{line:2,column:48},end:{line:2,column:56}}}):i)+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-logo jw-reset">\n    <img class="jw-logo-image" '+(null!=(i=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"file"):t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:31},end:{line:2,column:64}}}))?i:"")+">\n</div>"},useData:!0})},function(e,t,i){const n=i(49);i=[i(1),i(2),i(7),i(45),i(14),i(61),i(218),i(221),i(223),i(225),i(226),i(227),i(112)],void 0!==(t=function(e,t,i,r,a,s,o,l,h,u,d,c,f){function p(e,t){var i=document.createElement("div");return i.className="jw-icon jw-icon-inline jw-button-color jw-reset "+e,i.style.display="none",t&&new a(i).on("click tap",(function(){t()})),{element:function(){return i},toggle:function(e){e?this.show():this.hide()},show:function(){i.style.display=""},hide:function(){i.style.display="none"}}}function m(e){var t=document.createElement("span");return t.className="jw-text jw-reset "+e,t}function g(e){return new l(e)}function _(e,i){var n=document.createElement("div");return n.className="jw-group jw-controlbar-"+e+"-group jw-reset",t.each(i,(function(e){e.element&&(e=e.element()),n.appendChild(e)})),n}function y(t,i,r){this._api=t,this._model=i,this._playerElement=r,this._isMobile=e.isMobile(),this._compactModeMaxSize=400,this._maxCompactWidth=-1,this.playlistIndex=0,this.resolutionIndex=0,this.langMenu=[],this.curSelectLangIndex=0,this.setup(),this.qualityChangeLang=n.default,this.qualitylevels=[],this.qualityIndex=0,this.rotateDeg=0,this.isFullScreen=!1}return t.extend(y.prototype,i,{setup:function(){this.initDefaultResolution(),this.build(),this.initialize()},initDefaultResolution:function(){var e=this._model.get("playlist"),t=e.findIndex((e=>e.default)),i=0;-1!=t&&(this._model.set("item",t),i=e[t].sources.findIndex((e=>e.default)),i=-1==t?0:i),-1!=i&&(this._model.set("currentLevel",i),this.resolutionIndex=i)},build:function(){var e,i,n,r,a,l,y,v,A=((A=(A=this._model.get("timeShift"))&&A.liveStartTime&&0<Date.now()/1e3-A.liveStartTime)&&(l=new f(!0,"live-shift-switch")),new o(this._model,this._api,A)),E=new d("jw-icon-more");!1!==this._model.get("visualplaylist")&&(e=new h("jw-icon-playlist")),r=p("jw-icon-volume",this._api.setMute),i=new s("jw-slider-volume","horizontal"),n=new u(this._model,"jw-icon-volume"),this._model.get("danmaku")&&this._model.get("danmaku").show&&(a=new c(this._model,"jw-icon-danmu")),this._model.get("isMirror")&&(y=p("jw-icon-mirror",this._api.setMirror)),this._model.get("rotate")&&(v=p("jw-icon-rotate",this.setRotate.bind(this))),this.elements={alt:m("jw-text-alt"),barLogo:p("jw-icon-barlogo-new",(()=>{window.open(this._model.get("controlbar").barLogoUrl)})),play:p("jw-icon-playback",this._api.play.bind(this,{reason:"interaction"})),prev:p("jw-icon-prev",this._api.playlistPrev.bind(this,{reason:"interaction"})),next:p("jw-icon-next",this._api.playlistNext.bind(this,{reason:"interaction"})),playlist:e,elapsed:m("jw-text-elapsed"),split:m("jw-text-split"),time:A,duration:m("jw-text-duration"),playRate:g("jw-icon-playrate"),drawer:E,hd:g("jw-icon-hd"),qualityChange:g("jw-icon-qualityChange"),cc:g("jw-icon-cc"),audiotracks:g("jw-icon-audio-tracks"),mute:r,volume:i,volumetooltip:n,cast:p("jw-icon-cast jw-off",this._api.castToggle),fullscreen:p("jw-icon-fullscreen",this._api.setFullscreen),screenshot:p("jw-icon-screenshot",this._api.setScreenshot),mirror:y,rotate:v,danmuTooltip:a,pictInpict:p("jw-icon-pictureinpicture",this._api.setPictInPict),lang:g("jw-icon-lang"),liveShiftSwitch:l,backLive:m("jw-text-backlive")},this._model.get("danmaku")&&this._model.get("danmaku").show,this.elements.split.innerHTML="/",this.layout={left:[this.elements.barLogo,this.elements.play,this.elements.prev,this.elements.playlist,this.elements.next,this.elements.elapsed,this.elements.split,this.elements.duration,this.elements.liveShiftSwitch,this.elements.backLive],center:[this.elements.time,this.elements.alt,this.elements.sendBox],right:[this.elements.playRate,this.elements.lang,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.drawer,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.mirror,this.elements.rotate,this.elements.fullscreen,this.elements.screenshot,this.elements.danmuBtn,this.elements.danmuTooltip,this.elements.pictInpict],drawer:[this.elements.hd,this.elements.qualityChange,this.elements.cc,this.elements.audiotracks]},this.menus=t.compact([this.elements.playlist,this.elements.hd,this.elements.qualityChange,this.elements.cc,this.elements.audiotracks,this.elements.volumetooltip,this.element.lang]),this.layout.left=t.compact(this.layout.left),this.layout.center=t.compact(this.layout.center),this.layout.right=t.compact(this.layout.right),this.layout.drawer=t.compact(this.layout.drawer),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=_("left",this.layout.left),this.elements.center=_("center",this.layout.center),this.elements.right=_("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right)},initialize:function(){this._model.get("controlbar").barLogo&&this.elements.barLogo.show(),this.elements.play.show(),this.elements.fullscreen.show(),this._model.get("screenshot")?this.elements.screenshot.show():this.elements.screenshot.hide(),this._model.get("pictinpict")&&e.isPictureInpicture()?this.elements.pictInpict.show():this.elements.pictInpict.hide(),this.elements.mute&&this.elements.mute.show(),this._model.get("isMirror")&&this.elements.mirror.show();var i=this._model.get("rotate");i&&(this.elements.rotate.show(),i=!!i.clockwise,rotateButton=p("jw-icon-rotate",this._api.setRotate),i||e.toggleClass(this.elements.rotate.element(),"jw-off",!i)),this.setUpLangMenu(),this.onVolume(this._model,this._model.get("volume")),this.onPlaylist(this._model,this._model.get("playlist")),this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.onMediaModel(this._model,this._model.get("mediaModel")),this.onCastAvailable(this._model,this._model.get("castAvailable")),this.onCastActive(this._model,this._model.get("castActive")),this.onCaptionsList(this._model,this._model.get("captionsList")),this._model.on("change:volume",this.onVolume,this),this._model.on("change:mute",this.onMute,this),this._model.on("change:playlist",this.onPlaylist,this),this._model.on("change:playlistItem",this.onPlaylistItem,this),this._model.on("change:mediaModel",this.onMediaModel,this),this._model.on("change:castAvailable",this.onCastAvailable,this),this._model.on("change:castActive",this.onCastActive,this),this._model.on("change:duration",this.onDuration,this),this._model.on("change:position",this.onElapsed,this),this._model.on("change:fullscreen",this.onFullscreen,this),this._model.on("change:screenshot",this.onScreenshot,this),this._model.on("change:captionsList",this.onCaptionsList,this),this._model.on("change:captionsIndex",this.onCaptionsIndex,this),this._model.on("change:compactUI",this.onCompactUI,this),this._model.on("change:provider",this.onProvider,this),this._model.on("change:danmaku",this.onDanmaku,this),this._model.on("change:mirror",this.onMirror,this),this.elements.volume&&this.elements.volume.on("update",(function(e){e=e.percentage,this._api.setVolume(e)}),this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",(function(e){e=e.percentage,this._api.setVolume(e)}),this),this.elements.volumetooltip.on("toggleValue",(function(){this._api.setMute()}),this)),this.elements.danmuTooltip&&(this.elements.danmuTooltip.on("toggleValue",(function(){var e=JSON.parse(JSON.stringify(this._model.get("danmaku")));this._model.set("danmaku",Object.assign(e,{active:!e.active}))})),this.elements.danmuTooltip.on("switch",(e=>{var t=JSON.parse(JSON.stringify(this._model.get("danmaku")));this._model.set("danmaku",Object.assign(t,{useMask:!t.useMask})),this._api.danmaku&&this._api.danmaku.updateUseMask(e)})),this.elements.danmuTooltip.on("update",(e=>{switch(e.type){case 0:this._api.danmaku&&this._api.danmaku.updateOpacity(e.val);break;case 1:this._api.danmaku&&this._api.danmaku.updateArea(e.val);break;case 2:this._api.danmaku&&this._api.danmaku.updateSpeed(e.val);break;case 3:this._api.danmaku&&this._api.danmaku.updateFontSize(e.val)}}))),this.elements.liveShiftSwitch&&setTimeout((()=>{const e="jw-flag-time-shift";this._playerElement.classList.add(e),this.elements.backLive.innerText="杩斿洖鐩存挱",this.elements.liveShiftSwitch.addEvent(),this.elements.liveShiftSwitch.on("switch",(t=>{t?this._playerElement.classList.add(e):this._playerElement.classList.remove(e)}))})),this.elements.playlist&&this.elements.playlist.on("select",(function(e){this._model.once("itemReady",(function(){this.playlistIndex=e,this._model.setCurrentQuality(this.resolutionIndex),this._api.play({reason:"interaction"})}),this),this._model.set("autostart",!0),this._api.load(e,this.resolutionIndex)}),this),this.elements.playRate.on("select",(function(e){e=this._model.get("playRateConfig")[e].label,e=parseFloat(e.substring(1)),this._model.setPlaybackRate(e)}),this),this.elements.hd.on("select",(function(e){this._model.set("autostart",!0),this._model.once("itemReady",(function(){this.resolutionIndex=e,this._model.setCurrentQuality(e),this._api.play({reason:"interaction"})}),this),this._api.load(this.playlistIndex,e)}),this),this.elements.qualityChange.on("select",(function(e){this._model.changeHlsQuality(e),this.elements.qualityChange.selectItem(e)}),this),this.elements.hd.on("toggleValue",(function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0)}),this),this.elements.cc.on("select",(function(e){this._api.setCurrentCaptions(e)}),this),this.elements.cc.on("toggleValue",(function(){var e=this._model.get("captionsIndex");this._api.setCurrentCaptions(e?0:1)}),this),this.elements.audiotracks.on("select",(function(e){this._model.getVideo().setCurrentAudioTrack(e)}),this),new a(this.elements.duration).on("click tap",(function(){var t;"DVR"===e.adaptiveType(this._model.get("duration"))&&(t=this._model.get("position"),this._api.seek(Math.max(r.dvrSeekLimit,t)))}),this),new a(this.el).on("click tap drag",(function(){this.trigger("userAction")}),this),new a(this.elements.backLive).on("click tap",(function(){this._model.gobackLive()}),this),this.elements.drawer.on("open-drawer close-drawer",(function(t,i){e.toggleClass(this.el,"jw-drawer-expanded",i.isOpen),i.isOpen||this.closeMenus()}),this),t.each(this.menus,(function(e){e.on("open-tooltip",this.closeMenus,this)}),this),this._model.get("danmaku")&&this._model.get("danmaku").show&&setTimeout((()=>{this.onDanmaku(this._model,this._model.get("danmaku"))}))},setUpLangMenu(){var e=this._model.get("lang"),t=this._model.get("languages");if(this._model.get("showLang")&&t&&t[e]){this.setLangMenu(0);let e=this;this.elements.lang.on("select",(function(t){t=e.langMenu[t],e.setLang(t.id)}))}},setLangMenu(){var e,t=this._model.get("lang"),i=this._model.get("languages"),n=[];let r=0;for(e in i)n.push({label:i[t][e],index:n.length,id:e}),t==e&&(r=n.length-1);this.langMenu=n,this.elements.lang.setup(n,r,{toggle:!1})},setHlsQulityLangMenu(e,t,i){this.qualitylevels=e||this.qualitylevels,this.qualityIndex=t||this.qualityIndex;var n=[];for(let e=0;e<this.qualitylevels.length;e++)n.push({label:-1==this.qualitylevels[e].id?this.qualityChangeLang[i].HLSQUALITYCHANGE.AUTO:this.qualitylevels[e].label});this.elements.qualityChange.setup(n,this.qualityIndex,{toggle:!1})},setLang:function(e){if("string"==typeof e)this._model.set("lang",e);else{if(!e.zh&&!e.en)return;var t=e.zh?"zh":"en",i=(this._model.set("lang",t),this._model.get("languages"));i=Object.assign(i,e),this._model.set("languages",i),e=t}if(this.elements.playlist.changeLang(e),this._model.get("showLang")&&this.setLangMenu(),i=this._model.get("playlist")[this.playlistIndex],currentLevel=this._model.get("currentLevel"),i&&i.sources){let e=[];i.sources.forEach((t=>{e.push({label:t.label})})),this.elements.hd.setup(e,this.resolutionIndex,{toggle:!1})}this.elements.danmuTooltip&&this.elements.danmuTooltip.changeLang(e),this.elements.qualityChange&&this.setHlsQulityLangMenu(void 0,void 0,e),this.trigger("change_lang",e)},onCaptionsList:function(e,t){e=e.get("captionsIndex"),this.elements.cc.setup(t,e),this.clearCompactMode()},onCaptionsIndex:function(e,t){this.elements.cc.selectItem(t)},onPlaylist:function(e,t){var i,n=1<t.length;this.elements.next.toggle(n),this.elements.prev.toggle(n),this.elements.playlist&&(n=e.get("lang"),i=e.get("languages"),this.elements.playlist.setup(t,e.get("item"),n,i))},onPlaylistItem:function(e){this.elements.time.updateBuffer(0),this.elements.time.render(0),this.elements.duration.innerHTML="00:00",this.elements.elapsed.innerHTML="00:00",this.clearCompactMode(),e=e.get("item"),this.elements.playlist&&this.elements.playlist.selectItem(e),this.elements.audiotracks.setup()},onMediaModel:function(i,n){n.on("change:levels",(function(e,t){this.elements.hd.setup(t,e.get("currentLevel"),{toggle:!1}),this.clearCompactMode(),this._model.setCurrentQuality(this.resolutionIndex)}),this),n.on("change:hlsQualityListChange",((e,t)=>{var i=this._model.get("lang")||"zh",n=t.findIndex((e=>e.selected));this.setHlsQulityLangMenu(t,n,i)})),n.on("change:currentLevel",(function(e,t){this.elements.hd.selectItem(t)}),this),n.on("change:audioTracks",(function(e,i){i=t.map(i,(function(e){return{label:e.name}})),this.elements.audiotracks.setup(i,e.get("currentAudioTrack"),{toggle:!1}),this.clearCompactMode()}),this),n.on("change:currentAudioTrack",(function(e,t){this.elements.audiotracks.selectItem(t)}),this),n.on("change:state",(function(t,i){"complete"===i&&(this.elements.drawer.closeTooltip(),e.removeClass(this.el,"jw-drawer-expanded"))}),this),n.on("change:playbackRate",(function(e,t){var i=this._model.get("playRateConfig");let n=-1;for(let e=0;e<i.length;e++)i[e].label==="脳"+t&&(n=e);this.elements.playRate.selectItem(n)}),this)},onProvider:function(e,t){/(html5|videojs)/.test(t.name)&&e.get("playRate")?this.elements.playRate.setup(e.get("playRateConfig"),0):this.elements.playRate.hide()},onVolume:function(e,t,i){this.renderVolume(e.get("mute"),t,i)},onMute:function(e,t){this.renderVolume(t,e.get("volume"))},renderVolume:function(t,i,n){var r;n=n||i,this.elements.mute&&e.toggleClass(this.elements.mute.element(),"jw-off",t),this.elements.volume&&this.elements.volume.render(t?0:i),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(t?0:i),e.toggleClass(this.elements.volumetooltip.element(),"jw-off",t)),this.elements.volumetooltip&&this.elements.volumetooltip.valuetip&&(r=this.elements.volumetooltip.valuetip,t?r.innerHTML="0%":100===i&&n<i&&this._model.get("provider")&&/^flash/.test(this._model.get("provider").name)?r.innerHTML="100%(鎸夆啈鍙互缁х画澧炲ぇ闊抽噺)":r.innerText=Math.round(i)+"%")},onCastAvailable:function(e,t){this.elements.cast.toggle(t),this.clearCompactMode()},onCastActive:function(t,i){e.toggleClass(this.elements.cast.element(),"jw-off",!i)},onElapsed:function(t,i){t=t.get("duration"),t="DVR"===e.adaptiveType(t)?"-"+e.timeFormat(-t):e.timeFormat(i),this.elements.elapsed.innerHTML=t},onDuration:function(t,i){var n;"DVR"===e.adaptiveType(i)?(n="Live",this.clearCompactMode()):n=e.timeFormat(i),/NaN/.test(n)||(this.elements.duration.innerHTML=n)},onFullscreen:function(t,i){e.isIOS()||(this.isFullScreen=i,e.toggleClass(this.elements.fullscreen.element(),"jw-off",i))},onScreenshot:function(t,i){e.toggleClass(this.elements.screenshot.element(),"jw-off",i)},element:function(){return this.el},getVisibleBounds:function(){var t,i=this.el;return"table"===(getComputedStyle?getComputedStyle(i):i.currentStyle).display?e.bounds(i):(i.style.visibility="hidden",i.style.display="table",t=e.bounds(i),i.style.visibility=i.style.display="",t)},setAltText:function(e){this.elements.alt.innerHTML=e},addCues:function(e){this.elements.time&&(t.each(e,(function(e){this.elements.time.addCue(e)}),this),0===e.length&&this.elements.time.resetChapters(),this.elements.time.drawCues())},addThumbnails:function(e){this.elements.time&&(t.each(e,(function(e){this.elements.time.addThumbnail(e)}),this),this.elements.time.drawCues())},closeMenus:function(e){t.each(this.menus,(function(t){e&&e.target===t.el||t.closeTooltip(e)}))},hideComponents:function(){this.closeMenus(),this.elements.drawer.closeTooltip(),e.removeClass(this.el,"jw-drawer-expanded")},clearCompactMode:function(){this._maxCompactWidth=-1,this._model.set("compactUI",!1),this._containerWidth&&this.checkCompactMode(this._containerWidth)},setCompactModeBounds:function(){var t;0<this.element().offsetWidth&&(t=this.elements.left.offsetWidth+this.elements.right.offsetWidth,"LIVE"===e.adaptiveType(this._model.get("duration"))?this._maxCompactWidth=t+this.elements.alt.offsetWidth:(t+=this.elements.center.offsetWidth-this.elements.time.el.offsetWidth,this._maxCompactWidth=t/.8))},checkCompactMode:function(e){this.setCompactModeBounds(),this._containerWidth=e,-1!==this._maxCompactWidth&&(e>=this._compactModeMaxSize&&e>this._maxCompactWidth?this._model.set("compactUI",!1):(e<this._compactModeMaxSize||e<=this._maxCompactWidth)&&this._model.set("compactUI",!0))},onCompactUI:function(i,n){e.removeClass(this.el,"jw-drawer-expanded"),this.elements.drawer.setup(this.layout.drawer,n),(!n||this.elements.drawer.activeContents.length<2)&&t.each(this.layout.drawer,(function(e){this.elements.right.insertBefore(e.el,this.elements.drawer.el)}),this)},onDanmaku:function(t,i){i.active?this._api.danmaku.enable():this._api.danmaku.disable();var n=document.getElementsByClassName("jw-icon-danmu")[0].getElementsByClassName("jw-overlay ")[0],r=i.active?"block":"none";n.style.display=r,e.toggleClass(this.elements.danmuTooltip.element(),"jw-off",!i.active)},onMirror:function(t){t=t.get("mirror");var i=(e.toggleClass(this.elements.mirror.element(),"jw-off",t),"jw-state-mirror");t?this._playerElement.classList.add(i):this._playerElement.classList.remove(i)},setRotate:function(e=!0){var t=this._model.get("rotate");if(clockwise=!!t.clockwise,(innerRotate=!!t.innerRotate)||!this.isFullScreen){var i,n,r,a;t=e?clockwise?90:-90:0,this.rotateDeg+=t,360===Math.abs(this.rotateDeg)&&(this.rotateDeg=0),t=this._model.getVideo();try{e&&!innerRotate&&(n=(i=t.video).style.width,r=i.style.height,i.style.width=r,i.style.height=n,parseInt(n)>parseInt(r)?(a=(parseInt(n)-parseInt(r))/2,i.style.transform=`translate(${a}px, -${a}px) rotate(${this.rotateDeg}deg)`):i.style.transform="rotate("+this.rotateDeg+"deg)");let m=t.video.getElementsByTagName("video");var s,o=(m=0<m.length||0<(m=t.video.getElementsByTagName("canvas")).length?m[0]:m).style.width,l=m.style.height,h="video"==m.tagName.toLowerCase(),u=Math.abs(this.rotateDeg)/90%2==0,d=t.video.clientWidth,c=t.video.clientHeight,f=m.style.width,p=m.style.height;if(innerRotate)if(h)m.style.transform=`rotate(${this.rotateDeg}deg)`;else{let e=1;this.isFullScreen&&!u&&(e=d/parseInt(p))>c/parseInt(f)&&(e=c/parseInt(f)),m.style.transform=`scale(${e}) rotate(${this.rotateDeg}deg)`}else h||u?m.style.transform="none":(s=(parseInt(o)-parseInt(l))/2,m.style.transform=`translate(-${s}px, ${s}px)`),m.style.zIndex=u?"-1":"",u&&!h&&(m.style.position="relative");if("video"===m.tagName.toLowerCase()&&(m.style.width=l,m.style.height=o),innerRotate){let e="",t="";this.isFullScreen&&(h&&!u&&parseInt(p)>d&&(e=(d-parseInt(p))/2+"px"),!h)&&c>parseInt(p)&&(t=(c-parseInt(p))/2+"px"),m.style.marginLeft=e,m.style.marginTop=t}innerRotate||h||m.classList.add("rotate-inner")}catch(e){}}}}),y}.apply(t,i))&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a,s=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,l=e.escapeExpression;return e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},'<div class="'+l("function"==typeof(a=null!=(a=e(i,"className")||(null!=t?e(t,"className"):t))?a:o)?a.call(s,{name:"className",hash:{},data:r,loc:{start:{line:1,column:12},end:{line:1,column:25}}}):a)+" "+l("function"==typeof(a=null!=(a=e(i,"orientation")||(null!=t?e(t,"orientation"):t))?a:o)?a.call(s,{name:"orientation",hash:{},data:r,loc:{start:{line:1,column:26},end:{line:1,column:41}}}):a)+' jw-reset">\n    <div class="jw-slider-container jw-reset">\n        <div class="jw-rail jw-reset"></div>\n        <div class="jw-buffer jw-reset"></div>\n        <div class="jw-progress jw-reset"></div>\n        <div class="jw-knob jw-reset"></div>\n    </div>\n</div>'},useData:!0})},function(e,t,i){i=[i(2),i(1),i(45),i(61),i(38),i(219),i(220)],t=function(e,t,i,n,r,a,s){var o=r.extend({setup:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-reset";var e=document.createElement("div");e.className="jw-time-tip jw-background-color jw-reset",e.appendChild(this.img),e.appendChild(this.text),t.removeClass(this.el,"jw-hidden"),this.addContent(e)},image:function(e){t.style(this.img,e)},update:function(e){this.text.innerHTML=e}});return r=n.extend({constructor:function(t,i,r){this._model=t,this._api=i,this.isLiveShinft=r,this.timeTip=new o("jw-tooltip-time"),this.timeTip.setup(),this.cues=[],this.seekThrottled=e.throttle(this.performSeek,400),this._model.on("change:playlistItem",this.onPlaylistItem,this).on("change:position",this.onPosition,this).on("change:duration",this.onDuration,this).on("change:buffer",this.onBuffer,this),n.call(this,"jw-slider-time","horizontal")},setup:function(){n.prototype.setup.apply(this,arguments),this._model.get("playlistItem")&&this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.elementRail.appendChild(this.timeTip.element()),t.addEventListener(this.el,"mousemove",this.showTimeTooltip.bind(this),!1),t.addEventListener(this.el,"mouseout",this.hideTimeTooltip.bind(this),!1)},limit:function(n){var r,a,s;return this.activeCue&&e.isNumber(this.activeCue.pct)?this.activeCue.pct:(r=this._model.get("duration"),"DVR"===t.adaptiveType(r)?(a=(1-n/100)*r,s=this._model.get("position"),100-100*Math.min(a,Math.max(i.dvrSeekLimit,s))/r):n)},update:function(e){this.seekTo=e,this.seekThrottled(),n.prototype.update.apply(this,arguments)},dragStart:function(){this._model.set("scrubbing",!0),n.prototype.dragStart.apply(this,arguments)},dragEnd:function(){n.prototype.dragEnd.apply(this,arguments),this._model.set("scrubbing",!1)},onSeeked:function(){this._model.get("scrubbing")&&this.performSeek()},onBuffer:function(e,t){this.isLiveShinft||this.updateBuffer(t)},onPosition:function(e,t){this.updateTime(t,e.get("duration"))},onDuration:function(e,t){this.updateTime(e.get("position"),t)},updateTime:function(e,i){var n,r=0;i&&("DVR"===(n=t.adaptiveType(i))?r=(i-e)/i*100:"VOD"===n&&(r=e/i*100)),this.render(r)},onPlaylistItem:function(t,i){this.reset(),t.mediaModel.on("seeked",this.onSeeked,this),t=i.tracks,e.each(t,(function(e){e&&e.kind&&"thumbnails"===e.kind.toLowerCase()?this.loadThumbnails(e.file):e&&e.kind&&"chapters"===e.kind.toLowerCase()&&this.loadChapters(e.file)}),this)},performSeek:function(){var e,i=this.seekTo,n=this._model.get("duration"),r=t.adaptiveType(n);0===n?this._api.play():"DVR"===r?this._api.seek(e=(100-i)/100*n):this._model.attributes.controlbar.canDrag&&(e=i/100*n,this._api.seek(Math.min(e,n-.25)))},showTimeTooltip:function(n){var r=this._model.get("duration");if(0!==r){var a,s,o=t.bounds(this.elementRail),l=document.documentElement.scrollLeft||document.body.scrollLeft,h=(n.pageX||n.clientX+l)-Math.round(o.left),u=(l=r*(n=(h=t.between(h,0,Math.round(o.width)))/Math.round(o.width)),r<0&&(l=r-l),2),d=20;if(this.activeCue?(t.removeClass(this.timeTip.el,"jw-tooltip-time-jxm"),a=this.activeCue.text,(s=document.createElement("canvas").getContext("2d")).font="15px Arial",70<(s=s.measureText(a)).width&&(d=.05<n?Math.floor(s.width/70):90,u=100,t.addClass(this.timeTip.el,"jw-tooltip-time-jxm"))):(this.isLiveShinft&&(l=-1<l-r&l-r<=0?0:l-r),a=t.timeFormat(l,!0),r<0&&l>i.dvrSeekLimit&&(a="Live"),t.removeClass(this.timeTip.el,"jw-tooltip-time-jxm")),this.timeTip.update(a),this.showThumbnail(l),t.addClass(this.timeTip.el,"jw-open"),n=this.chooseThumbnail(l))if(0<n.indexOf("#xywh"))try{d=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(n)[4]/2;var c=t.between(h,d,o.width-d-u)/o.width;this.timeTip.el.style.left=100*c+"%"}catch(n){}else{var f=new Image;f.onload=e.bind((function(){f.onload=null,d=100;var e=t.between(h,d,o.width-d-u)/o.width;this.timeTip.el.style.left=100*e+"%"}),this),f.src=n}else c=t.between(h,d,o.width-d-u)/o.width,this.timeTip.el.style.left=100*c+"%"}},hideTimeTooltip:function(){t.removeClass(this.timeTip.el,"jw-open")},reset:function(){this.resetChapters(),this.resetThumbnails()}}),e.extend(r.prototype,a,s),r}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(1),i(78)],t=function(e,t,i){function n(e,t){this.time=e,this.text=t,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset",this.el.time=e}return e.extend(n.prototype,{align:function(e){"%"===this.time.toString().slice(-1)?this.pct=this.time:(e=this.time/e*100,this.pct=e+"%"),this.el.style.left=this.pct}}),{loadChapters:function(e){t.ajax(e,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(t){t=i(t.responseText),e.isArray(t)&&(e.each(t,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(e){this.cues.push(new n(e.begin,e.text))},drawCues:function(){var i,n=this._model.mediaModel.get("duration");!n||n<=0?this._model.mediaModel.once("change:duration",this.drawCues,this):e.each((i=this).cues,(function(e){e.align(n),t.addEventListener(e.el,"mouseover",(function(){i.activeCue=e})),t.addEventListener(e.el,"mouseout",(function(){i.activeCue=null})),t.addEventListener(e.el,"click",(function(e){i._api.seek(e.target.time)})),i.elementRail.appendChild(e.el)}))},resetChapters:function(){e.each(this.cues,(function(e){e.el.parentNode&&e.el.parentNode.removeChild(e.el)}),this),this.cues=[]}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(1),i(78)],t=function(e,t,i){function n(e){this.begin=e.begin,this.end=e.end,this.img=e.text}return{loadThumbnails:function(e){e&&(this.vttPath=e.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,t.ajax(e,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(t){t=i(t.responseText),e.isArray(t)&&(e.each(t,(function(e){this.thumbnails.push(new n(e))}),this),this.drawCues())},thumbnailsFailed:function(){},addThumbnail:function(t){var i=!1;e.each(this.thumbnails,(function(e){e.begin===t.begin&&e.end===t.end&&(e.img=t.text,i=!0)}),this),i||this.thumbnails.push(new n(t))},chooseThumbnail:function(t){var i;return e.find(this.thumbnails,(function(e){return e.begin<=t&&e.end>=t}))?((i=e.sortedIndex(this.thumbnails,{end:t},e.property("end")))>=this.thumbnails.length&&(i=this.thumbnails.length-1),(i=this.thumbnails[i].img).indexOf("://")<0&&this.vttPath?this.vttPath+"/"+i:i):""},loadThumbnail:function(t){var i={display:"block",margin:"0 auto",backgroundPosition:"0 0",backgroundRepeat:"no-repeat"};if(0<(t=this.chooseThumbnail(t)).indexOf("#xywh"))try{var n=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(t);t=n[1],i.backgroundPosition=-1*n[2]+"px "+-1*n[3]+"px",i.width=n[4],i.height=n[5]}catch(t){return}else t&&(this.individualImage?(i.width=this.individualImage.width,i.height=this.individualImage.height):(this.individualImage=new Image,this.individualImage.onload=e.bind((function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height})}),this),this.individualImage.src=t));return""===t&&(i.width=0,i.height=0),i.backgroundImage='url("'+t+'")',i},showThumbnail:function(e){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(e))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(38),i(1),i(2),i(14),i(222)],t=function(e,t,i,n,r){return e.extend({setup:function(e,a,s){this.iconUI||(this.iconUI=new n(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.select.bind(this)),this.reset(),e=i.isArray(e)?e:[],this.list=e,t.toggleClass(this.el,"jw-hidden",e.length<2);var o=!(s=2<=e.length||2===e.length&&s&&!1===s.toggle)&&2===e.length;t.toggleClass(this.el,"jw-toggle",o),t.toggleClass(this.el,"jw-button-color",!o),this.isActive=s||o,s?(t.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener).on("click",this.toggleOpenStateListener),s=r(e),e=t.createElement(s),this.addContent(e),this.contentUI=new n(this.content).on("click tap",this.selectListener)):o&&this.iconUI.on("click tap",this.toggleValueListener),this.selectItem(a)},toggleValue:function(){this.trigger("toggleValue")},select:function(e){e.target.parentElement===this.content&&(e=t.classList(e.target),e=i.find(e,(function(e){return 0===e.indexOf("jw-item")})))&&(this.trigger("select",parseInt(e.split("-")[2])),this.closeTooltipListener())},selectItem:function(e){if(this.content)for(var i=0;i<this.content.children.length;i++)t.toggleClass(this.content.children[i],"jw-active-option",e===i);else t.toggleClass(this.el,"jw-off",0===e);var n;this.isHDMenu()&&this.list&&2<=this.list.length&&(n=this.list[e].label,t.getElementsByClassName("jw-hd-label",this.el)[0].innerHTML=n),this.isCCMenu()&&this.list&&2<=this.list.length&&this.list[e]&&(t.getElementsByClassName("jw-cc-label",this.el)[0].innerHTML=this.list[e].label),this.isPlayrateMenu()&&this.list&&this.list[e]&&(t.getElementsByClassName("jw-playrate-label",this.el)[0].innerHTML=this.list[e].label),this.isQualityChange()&&this.list&&2<=this.list.length&&(n=this.list[e].label,t.getElementsByClassName("jw-qualityChange-label",this.el)[0].innerText=n),this.isLangMenu()&&this.list&&2<=this.list.length&&(n=this.list[e].label,t.getElementsByClassName("jw-lang-label",this.el)[0].innerText=n)},reset:function(){t.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()},isHDMenu:function(){return t.hasClass(this.el,"jw-icon-hd")},isPlayrateMenu:function(){return t.hasClass(this.el,"jw-icon-playrate")},isCCMenu:function(){return t.hasClass(this.el,"jw-icon-cc")},isQualityChange:function(){return t.hasClass(this.el,"jw-icon-qualityChange")},isLangMenu:function(){return t.hasClass(this.el,"jw-icon-lang")},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}})}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({1:function(e,t,i,n,r){var a=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <li class='jw-text jw-option jw-item-"+a("function"==typeof(i=null!=(i=s(i,"index")||r&&s(r,"index"))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:3,column:45},end:{line:3,column:55}}}):i)+" jw-reset'>"+a(e.lambda(null!=t?s(t,"label"):t,t))+"</li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){return'<ul class="jw-menu jw-background-color jw-reset">\n'+(null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(i,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:4},end:{line:4,column:13}}}))?i:"")+"</ul>"},useData:!0})},function(e,t,i){i=[i(1),i(2),i(38),i(14),i(224)],t=function(e,t,i,n,r){return i.extend({setup:function(i,r,a,s){this.selectedIndex=r,this.playListTitle="鎾斁鍒楄〃",a&&s&&s[a]&&(this.lang=a,this.languages=s,this.setPlayListLang(i)),this.iconUI||(this.iconUI=new n(this.el,{useHover:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.onSelect.bind(this)),this.reset(),i=t.isArray(i)?i:[],e.toggleClass(this.el,"jw-hidden",i.length<2),2<=i.length&&(this.iconUI=new n(this.el,{useHover:!0}).on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener).on("click",this.toggleOpenStateListener),a=this.menuTemplate(i,r),s=e.createElement(a),this.addContent(s),this.contentUI=new n(this.content),this.contentUI.on("click tap",this.selectListener)),this.originalList=i},menuTemplate:function(i,n){return i=t.map(i,(function(t,i){var r="";return t.title&&(r=(t=e.createElement(t.title)).textContent||t.data),{active:i===n,label:i+1+".",title:r}})),r({title:this.playListTitle,list:i})},onSelect:function(i){"UL"!==(i=i.target).tagName&&("LI"!==i.tagName&&(i=i.parentElement),i=e.classList(i),i=t.find(i,(function(e){return 0===e.indexOf("jw-item")})))&&(this.trigger("select",parseInt(i.split("-")[2])),this.closeTooltip())},selectItem:function(e){this.setup(this.originalList,e,this.lang,this.languages)},changeLang:function(e){this.lang=e,this.setup(this.originalList,this.selectedIndex,e,this.languages)},setPlayListLang:function(e){const t=this.lang,i=this.languages;t&&i[t]&&(e.forEach((e=>{e.lineTextKey&&i[t][e.lineTextKey]&&(e.title=i[t][e.lineTextKey]),e.sources&&e.sources.forEach((e=>{e.definitionTextKey&&i[t][e.definitionTextKey]&&(e.label=i[t][e.definitionTextKey])}))})),e=i[t].PLAYLIST_TITLE)&&(this.playListTitle=e)},reset:function(){this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({1:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(i=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"active"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.program(4,r,0),data:r,loc:{start:{line:14,column:12},end:{line:24,column:19}}}))?i:""},2:function(e,t,i,n,r){var a=e.escapeExpression,s=e.lambda,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <li class='jw-option jw-text jw-active-option jw-item-"+a("function"==typeof(i=null!=(i=o(i,"index")||r&&o(r,"index"))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:15,column:70},end:{line:15,column:80}}}):i)+' jw-reset\'>\n                    <span class="jw-label jw-reset"><span class="jw-icon jw-icon-play jw-reset"></span></span>\n                    <span class="jw-name jw-reset" title="'+a(s(null!=t?o(t,"title"):t,t))+'">'+a(s(null!=t?o(t,"title"):t,t))+"</span>\n                </li>\n"},4:function(e,t,i,n,r){var a=e.escapeExpression,s=e.lambda,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <li class='jw-option jw-text jw-item-"+a("function"==typeof(i=null!=(i=o(i,"index")||r&&o(r,"index"))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:r,loc:{start:{line:20,column:53},end:{line:20,column:63}}}):i)+' jw-reset\'>\n                    <span class="jw-label jw-reset">'+a(s(null!=t?o(t,"label"):t,t))+'</span>\n                    <span class="jw-name jw-reset" title="'+a(s(null!=t?o(t,"title"):t,t))+'">'+a(s(null!=t?o(t,"title"):t,t))+"</span>\n                </li>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-menu jw-playlist-container jw-background-color jw-reset">\n\n    <div class="jw-tooltip-title jw-reset">\n        <span class="jw-icon jw-icon-inline jw-icon-playlist jw-reset"></span>\n        <span class="jw-text jw-reset">'+e.escapeExpression(e.lambda(null!=t?a(t,"title"):t,t))+'</span>\n    </div>\n\n    <ul class="jw-playlist jw-reset">\n'+(null!=(i=a(i,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"list"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:13,column:8},end:{line:25,column:17}}}))?i:"")+"    </ul>\n</div>"},useData:!0})},function(e,t,i){i=[i(38),i(61),i(14),i(1)],t=function(e,t,i,n){return e.extend({constructor:function(r,a){this._model=r,e.call(this,a),this.volumeSlider=new t("jw-slider-volume jw-volume-tip","vertical"),this.addContent(this.volumeSlider.element()),this.addVolumeValueTip(),this.volumeSlider.on("update",(function(e){this.trigger("update",e)}),this),n.removeClass(this.el,"jw-hidden"),new i(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this)},toggleValue:function(){this.trigger("toggleValue")},addVolumeValueTip:function(){var e=document.createElement("div");e.className="jw-volume-value-tip",n.getElementsByClassName("jw-overlay",this.el)[0].appendChild(e),this.valuetip=e}})}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(38),i(1),i(2),i(14)],t=function(e,t,i,n){return e.extend({constructor:function(t){e.call(this,t),this.container.className="jw-overlay-horizontal jw-reset",this.openClass="jw-open-drawer",this.componentType="drawer"},setup:function(e,r){this.iconUI||(this.iconUI=new n(this.el,{useHover:!0,directSelect:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this)),this.reset(),e=i.isArray(e)?e:[],this.activeContents=i.filter(e,(function(e){return e.isActive})),t.toggleClass(this.el,"jw-hidden",!r||this.activeContents.length<2),r&&1<this.activeContents.length&&(t.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener),i.each(e,(function(e){this.container.appendChild(e.el)}),this))},reset:function(){t.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}})}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){const n=i(49);i=[i(38),i(61),i(14),i(1),i(112)],void 0!==(t=function(e,t,i,r,a){return e.extend({constructor:function(s,o){var l,h="zh"==s.get("lang")||"en"==s.get("lang")?s.get("lang"):"zh";for(l in this.danmuLang=n.default[h].DANMU,this._model=s,e.call(this,o),this.initDanmuValue=JSON.parse(JSON.stringify(this._model.get("danmaku"))),this.addDanmTitleEle(),this.danmuEle={opacity:{slider:new t("jw-slider-opacityslider","horizontal",2),type:0,right:"",left:this.danmuLang.DANMUOPACITY,ID:"DANMUOPACITY"},area:{slider:new t("jw-slider-areaslider","horizontal",3),type:1,right:"",left:this.danmuLang.DANMUAREA,ID:"DANMUAREA"},speed:{slider:new t("jw-slider-speedslider","horizontal",3),type:2,right:"",left:this.danmuLang.DANMUSPEED,ID:"DANMUSPEED"},fontSize:{slider:new t("jw-slider-fontslider","horizontal"),type:3,right:null,left:this.danmuLang.DANMUFONT,ID:"DANMUFONT"}},null!=this.initDanmuValue.useMask&&(h={slider:new a(this.initDanmuValue.useMask),type:4,right:null,left:this.danmuLang.INTELLIGENTBLOCKING,ID:"INTELLIGENTBLOCKING"},this.danmuEle=Object.assign(this.danmuEle,{mark:h})),this.danmuEle){var u=this.danmuEle[l];this.addElement(u,l)}null!=this.initDanmuValue.useMask&&setTimeout((()=>{this.danmuEle.mark.slider.addEvent(),this.danmuEle.mark.slider.on("switch",(e=>{this.trigger("switch",e)}))}),10),this.initDanSet(),r.removeClass(this.el,"jw-hidden"),new i(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this)},initDanSet(){var e=this.initDanmuValue.opacity||1,t=(e=this.opacityContent(e),this.initDanmuValue.area||.5),i=(t=this.areaContent(t),this.initDanmuValue.speed||1),n=(i=this.speedContent(i),this.initDanmuValue&&this.initDanmuValue.fontSize?this.initDanmuValue.fontSize:24);return{oVal:e,aVal:t,sVal:i,fzVal:this.fontSizeContent(n)}},addElement(e,t){this.addVolumeValueTip(t);var i=document.createElement("div"),n=(i.className="jw-danmu-slider-left",i.innerHTML=e.left,i.id=e.ID,document.createElement("div"));n.innerHTML=e.right,n.id=e.ID,n.classList.add("jw-danmu-slider-right","jw-danmu-"+t),this.valuetip.appendChild(i),this.valuetip.appendChild(e.slider.element()),this.valuetip.appendChild(n),e.slider.on("update",(function(t){this.setDanMuStyle(e.type,t.percentage)}),this)},toggleValue:function(){this.openTooltip(),this.trigger("toggleValue")},setDanMuStyle(e,t){switch(e){case 0:var i=this.opacityContent(t/100);this.trigger("update",{val:i,type:e});break;case 1:i=this.areaContent(t/100),this.trigger("update",{val:i,type:e});break;case 2:i=this.speedContent(t/100),this.trigger("update",{val:i,type:e});break;case 3:i=parseInt(14*t/50),this.fontSizeContent(i),this.trigger("update",{val:i/24,type:e})}},opacityContent(e){var t=[{title:"0",percentage:0,value:.2,opacity:0},{title:"1 / 3",percentage:33,value:.4,opacity:.33},{title:"2 / 3",percentage:66,value:.7,opacity:.66},{title:"1",percentage:100,value:1,opacity:1}];let i=t[t.length-1];for(let n=0;n<t.length;n++)if(e<=t[n].value){i=t[n];break}return this.danmuEle.opacity.slider.render(i.percentage),setTimeout((()=>{document.getElementsByClassName("jw-danmu-opacity")[0].innerHTML=i.title}),40),i.opacity},areaContent(e){var t=[{title:this.danmuLang.QUARTERSCREEN,percentage:25,value:.25,ID:"QUARTERSCREEN"},{title:this.danmuLang.HALFSCREEN,percentage:50,value:.5,ID:"HALFSCREEN"},{title:this.danmuLang.THREEQUARTERSCREEN,percentage:75,value:.75,ID:"THREEQUARTERSCREEN"},{title:this.danmuLang.FULLSCREEN,percentage:100,value:1,ID:"FULLSCREEN"}];let i=t[0];for(let n=0;n<t.length;n++)if(t[n].value>=e){i=t[n];break}return i=1<=+e?t[t.length-1]:i,this.danmuEle.area.slider.render(i.percentage),setTimeout((()=>{document.getElementsByClassName("jw-danmu-area")[0].innerHTML=i.title,document.getElementsByClassName("jw-danmu-area")[0].id=i.ID}),40),i.value},fontSizeContent(e){let t=null,i=null;var n;return i=e<=12?(t=this.danmuLang.MINIMAL,"MINIMAL"):e<18?(t=this.danmuLang.MODERATE,"MODERATE"):(t=this.danmuLang.GREAT,"GREAT"),this.danmuEle.fontSize.slider.render(100<(n=50*e/14)?100:n),setTimeout((()=>{document.getElementsByClassName("jw-danmu-fontSize")[0].innerHTML=t,document.getElementsByClassName("jw-danmu-fontSize")[0].id=i}),40),e},speedContent(e){var t=[.25,.5,.75,1],i=[25,50,75,100];let n="",r="";for(let a=0;a<t.length;a++)if(e<=t[a]){n=t[a],r=i[a];break}return this.danmuEle.speed.slider.render(r),setTimeout((()=>{document.getElementsByClassName("jw-danmu-speed")[0].innerHTML=n}),40),n},addDanmTitleEle(){var e=r.getElementsByClassName("jw-overlay",this.el)[0],t=document.createElement("div");t.innerHTML=`<div class="jw-danmu-title-wrap" id="DANMUSETTING">${this.danmuLang.DANMUSETTING}</div><div class="jw-danmu-reset" id="jw-danmu-reset">${this.danmuLang.RESET}</div>`,t.classList.add("jw-danmu-title"),e.appendChild(t),setTimeout((()=>{document.getElementById("jw-danmu-reset").addEventListener("click",(()=>{var{oVal:e,aVal:t,sVal:i,fzVal:n}=this.initDanSet();this.trigger("update",{val:e,type:0}),this.trigger("update",{val:t,type:1}),this.trigger("update",{val:i,type:2}),this.trigger("update",{val:n/24,type:3})}))}))},addVolumeValueTip:function(e){var t=document.createElement("div");t.classList.add("jw-danmu-container",e),r.getElementsByClassName("jw-overlay",this.el)[0].appendChild(t),this.valuetip=t},changeLang:function(e){for(var t in this.danmuLang=n.default[e].DANMU,this.danmuLang){var i=document.getElementById(t);i&&(i.innerHTML=this.danmuLang[t]),"RESET"===t&&(document.getElementById("jw-danmu-reset").innerHTML=this.danmuLang[t])}}})}.apply(t,i))&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){return'<div class="jw-switch">\n    <input class="jw-switch-checkbox" id="onoffswitch" type="checkbox">\n    <label class="jw-switch-label" for="onoffswitch">\n        <span class="jw-switch-inner"></span>\n        <span class="jw-switch-switch"></span>\n    </label>\n</div>'},useData:!0})},function(e,t,i){i=[i(2),i(1)],t=function(e,t){function i(e){(this.model=e).on("change:playlistItem",r,this),e.on("change:mediaModel",n,this)}function n(e,t){t.off("change:mediaType",null,this),t.on("change:mediaType",(function(t,i){"audio"===i&&this.setImage(e.get("playlistItem").image)}),this)}function r(e,i){e.get("autostart")&&!t.isMobile()||0<e.get("item")?(this.setImage(null),e.off("change:state",null,this),e.on("change:state",(function(e,t){"complete"!==t&&"idle"!==t&&"error"!==t||this.setImage(i.image)}),this)):this.setImage(i.image)}return e.extend(i.prototype,{setup:function(e){this.el=e,(e=this.model.get("playlistItem"))&&this.setImage(e.image)},setImage:function(i){var n=this.image,r=(n&&(n.onload=null,this.image=null),this.model.off("change:state",null,this),"");e.isString(i)&&(r='url("'+i+'")',(n=this.image=new Image).src=i),t.isPoorIE()?this.el.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+i+'",sizingMethod="scale"':t.style(this.el,{backgroundImage:r})},resize:function(e,i,n){if("uniform"===n){var r,a=e/i,s=this.image,o=null;if(s){if(0===s.width)return r=this,void(s.onload=function(){r.resize(e,i,n)});s=s.width/s.height,Math.abs(a-s)<.09&&(o="cover")}t.style(this.el,{backgroundSize:o})}},element:function(){return this.el}}),i}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(231),i(1),i(2),i(14),i(32)],t=function(e,t,i,n,r){function a(e,t){this.model=e,this.api=t,this.imageUrl="",this.setup(),this.isHide=!0,this.startAdvPlayed=!1,this.timer=null}return i.extend(a.prototype,{setup:function(){var i=e(),n=(this.el=t.createElement(i),this);i=t.isMobile()?"touchstart":"click",t.addEventListener(this.el,i,(function(){window.open(n.imageUrl)}),!1)},loadAdv:function(e){var n,a,s,o,l=this.model.get("imageAdvs");l&&l[e]&&l[e].image&&(a=l[e].image,o=t.getElementsByClassName("jw-media",this.api.getContainer())[0],n=this,s={display:"block","z-index":1e3,width:"100%",height:"100%",top:0,left:0},i.isString(a)?(a=encodeURI(a),s.backgroundImage='url("'+a+'")'):s.backgroundImage="","end"===e&&(s["z-index"]=0),"pause"===e&&(a=o?o.clientHeight:this.model.get("height"),o=o?o.clientWidth:this.model.get("width"),s.width="400px",s.height="300px",s.top=(a-300)/2,s.left=(o-400)/2),r.style(this.el,s),a=t.getElementsByClassName("adv-close",this.el)[0],o=t.getElementsByClassName("adv-countdown",this.el)[0],a.style.display="none",o.style.display="none","start"===e&&(s=l[e].time<=60?l[e].time:60,o.style.display="block",o.innerHTML="骞垮憡: "+s+"绉�"),"pause"===e&&(o=t.isMobile()?"touchstart":"click",a.addEventListener(o,(function(e){e.cancelBubble=!0,e.stopPropagation(),e.preventDefault(),n.el.style.display="none"}),!1),a.style.display="block"),this.imageUrl=l[e].url,this.element()&&this.api.getContainer().replaceChild(this.el,this.element()),this.isHide=!1)},beginStartAdv:function(){var e,i,n,r;this.startAdvPlayed?this.model.loadVideo():(e=this.model.get("imageAdvs").start,this.loadAdv("start"),i=e.time<=60?e.time:60,n=this.element(),(r=this).timer=setInterval((function(){var e;0<--i?(e="骞垮憡: "+i+"绉�",t.getElementsByClassName("adv-countdown",n)[0].innerHTML=e):(clearInterval(r.timer),n.style.display="none",r.isHide=!0,r.startAdvPlayed=!0,r.model.loadVideo())}),1e3))},element:function(){var e=this.api.getContainer();return 0<t.getElementsByClassName("jw-adv",e).length?t.getElementsByClassName("jw-adv",e)[0]:this.el},isHidden:function(){return this.isHide},hide:function(){this.isHide=!0,this.element().style.display="none"},resizePauseAdv:function(e,t){r.style(this.element(),{top:(t-300)/2,left:(e-400)/2})},destroy:function(){this.timer&&clearInterval(this.timer),this.timer=null}}),a}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){return'<div class="jw-adv jw-reset">\n    <div class="adv-countdown"></div>\n    <div class="adv-close">X</div>\n</div>'},useData:!0})},function(e,t,i){i=[i(1),i(2),i(32)],t=function(e,t,i){function n(e,t){this.model=e,this.element=t,this.times=0,this.init()}return t.extend(n.prototype,{init:function(){if(e.isMSIE(9))return i.style(this.element,{display:"none"}),!1;var t=this.model.get("marquee").text,n=this.model.get("marquee").color,r=this.model.get("marquee").fontSize;t&&(this.element.innerHTML=t),n&&i.style(this.element,{color:n}),r&&i.style(this.element,{fontSize:r,lineHeight:r+8}),this.reset()},start:function(){if(e.isMSIE(9))return!1;i.style(this.element,{animationPlayState:"running",opacity:1,display:"block"})},stop:function(){this.reset(),i.style(this.element,{animationPlayState:"paused",opacity:0,display:"none"})},pause:function(){"running"===this.element.style.animationPlayState&&i.style(this.element,{animationPlayState:"paused"}),i.style(this.element,{opacity:0})},reset:function(t,n){t=t||this.model.get("width"),n=n||this.model.get("height");var r=this.element,a=(t=this.times%2==0?"marquee1":"marquee2",this);i.animation(r,t+" 18s infinite"),this.randomTop(r,n),e.addEventListener(r,"webkitAnimationIteration",(function(){a.randomTop(r,n)}),!1),e.addEventListener(r,"animationiteration",(function(){a.randomTop(r,n)}),!1),this.times++},randomTop:function(){var e=0;this.model.get("containerHeight")&&(e=this.model.get("containerHeight")),i.style(this.element,{top:100<e?30+Math.random()*(e-100):e/2})}}),n}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(1),i(234),i(2),i(14),i(33)],t=function(e,t,i,n,r){function a(){}return i.extend(a.prototype,{buildArray:function(){var t,n=r.split("+")[0],a={items:[]};return(t=this.model.get("rightclick"))&&i.isArray(t)&&0<t.length?i.each(t,(function(e){a.items.push({title:e.title,link:e.link})})):a.items.push({title:"About Cyber Player "+n,link:"https://bce.baidu.com/doc/MCT/Web-SDK.html#.E6.92.AD.E6.94.BE.E5.99.A8.20Web.20SDK.20.E7.AE.80.E4.BB.8B"}),(t=this.model.get("provider"))&&0<=t.name.indexOf("flash")&&(n="Flash Version "+e.flashVersion(),a.items.push({title:n,link:"http://www.adobe.com/software/flash/about/"})),a},buildMenu:function(){var i=this.buildArray();return e.createElement(t(i))},updateHtml:function(){this.el.innerHTML=this.buildMenu().innerHTML},rightClick:function(e){return this.lazySetup(),this.mouseOverContext||(this.hideMenu(),this.showMenu(e)),!1},getOffset:function(t){var i=t.target,n=t.layerX||t.offsetX,r=t.layerY||t.offsetY;if(e.isIE()&&(e.hasClass(i,"jw-video")||e.hasClass(i,"jw-warning")))return{x:n,y:r+40};for(;i!==this.playerElement;)n+=i.offsetLeft,r+=i.offsetTop,i=i.parentNode;return{x:n=n<=this.playerElement.clientWidth?n:this.playerElement.clientWidth,y:r=r<=this.playerElement.clientHeight?r:this.playerElement.clientHeight}},showMenu:function(t){return t=this.getOffset(t),this.el.style.left=t.x+"px",this.el.style.top=t.y+"px",e.addClass(this.playerElement,"jw-flag-rightclick-open"),e.addClass(this.el,"jw-open"),!1},hideMenu:function(){this.mouseOverContext||(e.removeClass(this.playerElement,"jw-flag-rightclick-open"),e.removeClass(this.el,"jw-open"))},lazySetup:function(){this.el||(this.el=this.buildMenu(),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.model.on("change:provider",this.updateHtml,this),this.elementUI=new n(this.el,{useHover:!0}).on("over",(function(){this.mouseOverContext=!0}),this).on("out",(function(){this.mouseOverContext=!1}),this))},setup:function(t,i,n){this.playerElement=i,this.model=t,this.mouseOverContext=!1,this.layer=n,e.isPoorIE()||(i.oncontextmenu=this.rightClick.bind(this))},addOffListener:function(t){e.addEventListener(t,"mousedown",this.hideMenuHandler),e.addEventListener(t,"touchstart",this.hideMenuHandler),e.addEventListener(t,"pointerdown",this.hideMenuHandler)},removeOffListener:function(t){e.removeEventListener(t,"mousedown",this.hideMenuHandler),e.removeEventListener(t,"touchstart",this.hideMenuHandler),e.removeEventListener(t,"pointerdown",this.hideMenuHandler)},destroy:function(){this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model.off("change:provider",this.updateHtml),this.model=null)}}),a}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({1:function(e,t,i,n,r){var a,s,o=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,h=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li class="jw-reset'+(null!=(a=u(i,"if").call(o,null!=t?u(t,"featured"):t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:4,column:27},end:{line:4,column:62}}}))?a:"")+'">\n            <a href="'+h("function"==typeof(s=null!=(s=u(i,"link")||(null!=t?u(t,"link"):t))?s:l)?s.call(o,{name:"link",hash:{},data:r,loc:{start:{line:5,column:21},end:{line:5,column:29}}}):s)+'" class="jw-reset" target="_blank">\n'+(null!=(a=u(i,"if").call(o,null!=t?u(t,"showLogo"):t,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:6,column:16},end:{line:8,column:23}}}))?a:"")+"                "+h("function"==typeof(s=null!=(s=u(i,"title")||(null!=t?u(t,"title"):t))?s:l)?s.call(o,{name:"title",hash:{},data:r,loc:{start:{line:9,column:16},end:{line:9,column:25}}}):s)+"\n            </a>\n        </li>\n"},2:function(e,t,i,n,r){return" jw-featured"},4:function(e,t,i,n,r){return'                <span class="jw-icon jw-rightclick-logo jw-reset"></span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-rightclick jw-reset">\n    <ul class="jw-reset">\n'+(null!=(i=a(i,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"items"):t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:3,column:4},end:{line:12,column:13}}}))?i:"")+"    </ul>\n</div>"},useData:!0})},function(e,t,i){i=[i(2),i(1)],t=function(e,t){function i(e){this.model=e,this.model.on("change:playlistItem",this.playlistItem,this)}return e.extend(i.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(e){this.el=e,e=this.el.getElementsByTagName("div"),this.title=e[0],this.description=e[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(e){var i,n={paddingLeft:0,paddingRight:0},r=e.get("controls"),a=e.get("dock"),s=e.get("logo");s&&(i=+(""+s.margin).replace("px",""),e=e.get("logoWidth")+(isNaN(i)?0:i),"top-left"===s.position?n.paddingLeft=e:"top-right"===s.position&&(n.paddingRight=e)),r&&a&&a.length&&(i=56*a.length,n.paddingRight=Math.max(n.paddingRight,i)),t.style(this.el,n)},playlistItem:function(e,t){var i,n;e.get("displaytitle")||e.get("displaydescription")?(n=i="",t.title&&e.get("displaytitle")&&(i=t.title),t.description&&e.get("displaydescription")&&(n=t.description),this.updateText(i,n)):this.hide()},updateText:function(e,t){this.title.innerHTML=e,this.description.innerHTML=t,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),i}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(237),i(2),i(16),i(6)],t=function(e,t,i,n){function r(e){return!e||"string"==typeof e&&("#fff"===(e=e.toLowerCase())||"#ffffff"===e)}function a(){return{disabled:!1,blocked:[],fontSize:24,fontSizeScale:1,opacity:1,speed:1,area:.5,bottomUp:!1,colors:["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#CC0273","#222222","#FFFFFF"],duration:5,items:[],zIndex:5,maxPerinsert:20,poolSize:50,useMask:!1,isDefaultColor:r,discard:e=>!1}}function s(e,i){this.el,this.opts,this.enabled=!1,this.paused=!1,this.track=0,this.trackHeight=0,this.timer,this._bulletPool=[],this._aliveBullets=new Set,this._scrollBullets=[],this._topBullets=[],this._bottomBullets=[],this._items=[],this._pos=0,this._prevPauseTime=0,this.opts=t.extend(a(),i.get("danmaku")),this.playerEl=e,this._model=i,this._init(),this.opacityStyleObj={0:{class:"jw-danmaku-opacity-4",value:"0"},1:{class:"jw-danmaku-opacity-1",value:"1"},.33:{class:"jw-danmaku-opacity-3",value:"0.33"},.66:{class:"jw-danmaku-opacity-2",value:"0.66"}},this.curOpacityStyleObj=null}return t.extend(s.prototype,{_init:function(){var e=document.createElement("div");e.classList.add("jw-danmaku"),this.el=this.playerEl.appendChild(e),this.el.style.zIndex=String(this.opts.zIndex),this.el.style.opacity=this.opts.opacity,this._items=Array.isArray(this.opts.items)?this.opts.items:[],this.timer={_prevPauseTime:0,_pausedTime:0,_paused:!1,now(){return((this._paused?this._prevPauseTime:Date.now())-this._pausedTime)/1e3},play(){this._paused&&(this._pausedTime+=Date.now()-this._prevPauseTime,this._paused=!1)},pause(){this._paused||(this._prevPauseTime=Date.now(),this._paused=!0)}},this.opts.disabled||this.enable(),setTimeout((()=>{this._updateTrack()}))},getWidth(){return this.playerEl.getBoundingClientRect().width},getCurrentTime(){return this._model.get("position")},getPlaybackRate(){return this._model.get("playbackRate")},getFontSize(){return this.opts.fontSize*this.opts.fontSizeScale},getSpeedScale(){return this.getPlaybackRate()*this.opts.speed},getDuration(){return this._model.get("duration")},getItems(){return this._items},isPlaying(){return this._model.get("state")===i.PLAYING},_createBullet(t,i){let n=this._bulletPool.pop();return n?n.init(t,i):n=new e(this.el,this,t,i),this._aliveBullets.add(n),n},_unmountBullet(e){e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el)},_getShortestTrack(){let e=this._scrollBullets[0];if(!e||e.ended)return[0];for(let t,i=1;i<this.track;++i){if(!(t=this._scrollBullets[i])||t.ended)return[i];e.showAt>t.showAt&&(e=t)}return[e.track,e]},_getEmptyTrack(e,t){for(let i=0;i<this.track;++i)if(!t[i]||t[i]<=e)return i;return-1},_shouldDiscard(e){return!(!this.opts.blocked.includes(e.type||"scroll")&&!this.opts.discard(e)&&(!e.color||!this.opts.blocked.includes("color")||this.opts.isDefaultColor(e.color)))},_fire(){if(this.enabled&&this.isPlaying){this.paused&&this.start();var e=this.getCurrentTime(),t=e-.5,i=e+.5,n=this.timer.now(),r=this._items.length,a=this.opts.maxPerinsert;for(let e,s=0;this._pos<r;this._pos++)if(!((e=this._items[this._pos]).time<t)){if(e.time>i)break;if(!this._shouldDiscard(e)){if(!this._insert(e,n))break;if(++s>a)break}}}},_updateTrack(){var e=this.playerEl.getBoundingClientRect().height;this.trackHeight=this.getFontSize()+5,this.track=Math.floor(e*this.opts.area/this.trackHeight)},_handleSeeked(){this.clearScreen(),this._pos=0},_handleAddMask(e){if(this.opts.useMask){let t=(new TextDecoder).decode(e.data);t=(t=t.replaceAll("\n"," ")).replaceAll("#","%23"),this.el.setAttribute("style",t?`-webkit-mask-image: url('data:image/svg+xml;utf8,${t}')`:"")}},_handleSeekStart(){this.el.setAttribute("style","")},_clearMask(){this.el.setAttribute("style","")},_insert(e,t){if(!e.type||"scroll"===e.type){const[n,r]=this._getShortestTrack();var i=!e.force&&r&&r.showAt>t+2;return!i&&(this._scrollBullets[n]=this._createBullet(e,{track:n,prev:i?void 0:r}),!0)}i="top"===e.type?this._topBullets:this._bottomBullets;let n=this._getEmptyTrack(t,i);return-1!==(n=-1===n&&e.force?0:n)&&(i[n]=this._createBullet(e,{track:n}).endAt,!0)},recycleBullet(e){this._bulletPool.length>this.opts.poolSize?this._unmountBullet(e):this._bulletPool.push(e),this._aliveBullets.delete(e),"scroll"===e.type&&this._scrollBullets[e.track]===e&&(this._scrollBullets[e.track]=void 0)},send(e){var i;this.enabled&&(void 0===e.time&&(e.time=this.getCurrentTime()),e=t.extend({isMe:!0,force:!0},e),i=this.addItem(e),this._model.mediaController.trigger(n.JWPLAYER_DANMAKU_SEND,{data:e}),this._pos>i)&&this._insert(e,this.timer.now())},start(){this.isPlaying&&(this.timer.play(),this._aliveBullets.forEach((e=>e.run(this._prevPauseTime))),this.paused=!1,this.getCurrentTime()>=this.getDuration())&&(this._handleSeeked(),this._clearMask())},pause(){this._prevPauseTime=this.timer.now(),this.timer.pause(),this._aliveBullets.forEach((e=>e.pause(this._prevPauseTime))),this.paused=!0},addItem(e){if(null==e.time)return-1;var t=this._items.length;if(!t||e.time>=this._items[t-1].time)return this._items.push(e),t;if(e.time<=this._items[0].time)return this._items.unshift(e),0;let i=0;for(let n=0;n<t;n++)if(this._items[n].time>e.time){i=1;break}return this._items.splice(i,0,e),i},appendItems(e){this._items=this._items.concat(e)},resetItems(e){this._items=e,this._pos=0},updateOpacity(e=this.opts.opacity){this.curOpacityStyleObj&&this.el.classList.remove(this.curOpacityStyleObj.class),this.curOpacityStyleObj=this.opacityStyleObj[String(e)],this.el.classList.add(this.curOpacityStyleObj.class),this.el.style.opacity=String(e)},updateFontSize(e=this.opts.fontSizeScale){this.opts.fontSizeScale=e,this._updateTrack()},updateArea(e){[.25,.5,.75,1].includes(e)&&(this.opts.area=e,this._updateTrack())},updateBottomUp(e){this.opts.bottomUp=e,this._aliveBullets.forEach((t=>t.updateScrollY(e)))},updateSpeed(e){this.opts.speed=e},resetOptions(){this.opts=t.extend(a(),this._model.get("danmaku")),this.updateOpacity(),this.updateFontsize(),this.updateBottomUp(this.opts.bottomUp)},clearScreen(){Array.from(this._aliveBullets).forEach((e=>e.end())),this._topBullets=[],this._bottomBullets=[]},enable(){this.enabled||(this.enabled=!0,this._model&&(this._model.mediaController.on("seek",this._handleSeeked,this),this._model.mediaController.on("sei_info",this._handleAddMask,this),this._model.mediaController.on("seekStart",this._handleSeekStart,this),this._model.on("change:position",this._fire,this)))},disable(){this.enabled=!1,this.clearScreen(),this._model&&(this._model.mediaController.off("seek",this._handleSeeked,this),this._model.mediaController.off("sei_info",this._handleAddMask,this),this._model.mediaController.off("seekStart",this._handleSeekStart,this),this._model.off("change:position",this._fire,this))},dispose(){this.disable(),this._bulletPool=null,this._aliveBullets=null,this._scrollBullets=null,this._topBullets=null,this._bottomBullets=null,this._items=null,this.el=null,this.opts=null},updateUseMask(e){(this.opts.useMask=e)||this.el.setAttribute("style","")}}),s}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2)],t=function(e){const t="jw-danmaku-item";function i(e,i,n,r){this.el=e.appendChild(document.createElement("div")),this.container=e,this.el.className=t,this.type="scroll",this.left=0,this.width=0,this.length=0,this.showAt=0,this.startAt=0,this.endAt=0,this.speed=0,this.track=0,this.ended=!1,this.color="",this.danmaku=i,this.end=this.end.bind(this),this.init(n,r)}return e.extend(i.prototype,{init(e,t){var i,n;return this.el.textContent=e.text,this.type=e.type||"scroll",this.track=t.track,e.color&&(this.el.style.color=this.color=e.color),e.isMe&&this.el.classList.add("jw-danmaku-item-me"),(e=this.el.style).fontSize=this.danmaku.getFontSize()+"px",this.startAt=this.danmaku.timer.now(),"scroll"===this.type?(this.el.addEventListener("transitionend",this.end),i=this.el.getBoundingClientRect(),this.width=i.width+20,i=this.danmaku.getWidth(),t=t.prev,this.left=i,this.speed=this.danmaku.getSpeedScale()*(i+this.width)/this.danmaku.opts.duration,t&&!t.ended&&(0<=(n=t.length-i-(this.startAt-t.startAt)*t.speed)?(this.speed=t.speed,this.left+=n):(n=this.danmaku.getWidth()/(t.endAt-this.startAt),this.speed>n&&(this.speed=n))),this.length=this.left+this.width,t=this.length/this.speed,this.showAt=this.startAt+(this.length-i)/this.speed,this.endAt=this.startAt+t,this.updateScrollY(),e.left=this.left+"px",e.transition=`transform ${t}s linear`,e.transform=`translate3d(-${this.length}px,0,0)`):(e[this.type]=this._pos(),this.el.classList.add("jw-danmaku-item-center"),n=this.danmaku.getSpeedScale()*this.danmaku.opts.duration,this.endAt=this.startAt+n,this.centerTimer=setTimeout(this.end.bind(this),1e3*n)),this.ended=!1,this.show(),this.danmaku.paused&&this.pause(this.startAt),this},_pos(){return this.track*this.danmaku.trackHeight+2+"px"},updateScrollY(e=this.danmaku.opts.bottomUp){var t;"scroll"===this.type&&((t=this.el.style).top=t.bottom="",t[e?"bottom":"top"]=this._pos())},end(){this.el.removeEventListener("transitionend",this.end),clearTimeout(this.centerTimer),this.el.style.cssText="",this.color="",this.el.className=t,this.ended=!0,this.hide(),this.danmaku.recycleBullet(this)},show(){this.el.style.visibility=""},hide(){this.el&&this.container.contains(this.el)&&this.container.removeChild(this.el)},pause(e){var t;"scroll"===this.type?((t=this.el.style).transition="transform 0s linear",t.transform=`translate3d(-${(e-this.startAt)*this.speed}px,0,0)`):clearTimeout(this.centerTimer)},run(e){var t;"scroll"===this.type?((t=this.el.style).transition=`transform ${this.endAt-e}s linear`,t.transform=`translate3d(-${this.length}px,0,0)`):this.centerTimer=setTimeout(this.end.bind(this),1e3*(this.endAt-e))}}),i}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="'+e.escapeExpression("function"==typeof(i=null!=(i=a(i,"id")||(null!=t?a(t,"id"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:r,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):i)+'" class="jwplayer jw-reset" tabindex="0">\n    <div class="jw-aspect jw-reset"></div>\n    <div class="jw-media jw-reset"></div>\n    <div class="jw-preview jw-reset"></div>\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset"></div>\n        <div class="jw-title-secondary jw-reset"></div>\n    </div>\n    <div class="jw-overlays jw-reset"></div>\n    <div class="jw-controls jw-reset"></div>\n    <div class="jw-warning jw-reset">\n        鐢ㄦ埛閴存潈澶辫触锛岃鍏�<a target="_blank" href="http://bce.baidu.com">娉ㄥ唽</a>鎴愪负鐧惧害鏅鸿兘浜戠敤鎴穃n    </div>\n    <div class="jw-marquee">鐧惧害浜�</div>\n</div>'},useData:!0})},function(e,t,i){const n=i(49);i=[i(1),i(240)],void 0!==(t=function(e,t){return function(i){var r;return i="zh"==i.get("lang")||"en"==i.get("lang")?i.get("lang"):"zh",this.performanceLang=n.default[i].PERFORMANCE,this.container=null,this.setup=function(i){this.container=i,r=e.createElement(t(this.performanceLang)),i.appendChild(r)},this.setData=e=>{for(var t in e){var i=document.getElementById("performance-"+t);i&&(i.innerText=e[t])}},this.changeLang=function(e){this.performanceLang=n.default[e].PERFORMANCE,this.reset(),this.setup(this.container)},this.reset=function(){this.container.removeChild(r),r=null},this.destroy=function(){this.reset(),this.container=null},this}}.apply(t,i))&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a=e.lambda,s=e.escapeExpression;return e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},'<ul id="performance-info" class="performance-info  jw-reset">\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"FORMAT"):t,t))+'</span>\n        <span id="performance-playStyle"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"DECODEEFFICIENCY"):t,t))+'</span>\n        <span>\n             <span id="performance-decodeFrameRate"></span>\n             frames/s\n        </span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"DECODECONSUMPTION"):t,t))+'</span>\n        <span>\n             <span id="performance-decodeTime"></span>\n             ms\n        </span>\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"FPS"):t,t))+'</span>\n        <span id="performance-frameRate"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"RESOLUTION"):t,t))+'</span>\n        <span id="performance-resolution">\n            <span id="performance-width"></span>\n            &nbsp; * &nbsp;\n            <span id="performance-height"></span>\n        </span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"ENCODETYPE"):t,t))+'</span>\n        <span id="performance-code"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"BUFFEREND"):t,t))+'</span>\n        <span id="performance-buffer"></span>\n    </li>\n    <li>\n        <span style="color: #c9cdd4;">'+s(a(null!=t?e(t,"FIRSETIME"):t,t))+'</span>\n        <span id="performance-firstFrameTime"></span>\n    </li>\n</ul>'},useData:!0})},function(e,t,i){i=[i(1)],t=function(e){return class{constructor(e,t,i){this.watermarkOptions=Object.assign({},this.defaultConfig(),e.get("watermark")),this.isLeftToRight=!0,this.isTopToBottom=!0,this.watermarkEle=null,this.contentEle=null,this.playerId=i,this.container=t,this.undateChild(),this.timer=null,this.updateStyle()}getTag(){return{container:this.playerId+"-jw-watermark-container jw-watermark-container",content:this.playerId+"-jw-watermark-content jw-watermark-content"}}defaultConfig(){return{type:"text",speed:0,content:"",opacity:.5,"font-size":"12px",color:"#bdbdbd",left:"0%",top:"70%",rotate:"30deg"}}render(){return`<div class="${this.getTag().container}" >${this.renderContent()}</div>`}renderContent(){var{type:e,content:t}=this.watermarkOptions;return"image"==e?`<img class="${this.getTag().content}" style=${this.setStyle()} src=${this.setImage(t)} />`:`<div class="${this.getTag().content}" style=${this.setStyle()}>${t}</div>`}setImage(e){return 0==e.indexOf("http")?e:0==e.indexOf("://")?document.location.protocol+e:0==e.indexOf("//")?document.location.protocol+":"+e:document.location.protocol+"://"+e}setStyle(){let{left:e,top:t,rotate:i,speed:n,width:r}=this.watermarkOptions;if(0<n&&this.contentEle){var{offsetLeft:a,clientWidth:s,clientHeight:o,offsetTop:l}=this.contentEle;const r=this.watermarkEle.clientWidth,d=this.watermarkEle.clientHeight;var h,u=Math.abs(s/2*Math.sin(parseFloat(i)*(2*Math.PI/360)));e.includes("px")&&(e=parseFloat(e)/r*100),t.includes("px")&&(t=parseFloat(t)/d*100),parseFloat(e)<100&&0<=parseFloat(e)&&this.isLeftToRight&&a+s<r||parseFloat(e)<=0?(r-s<(a=parseFloat(e)+ +n)/100*r?(h=parseInt((r-s)/r*100),this.isLeftToRight=!1):(h=a,this.isLeftToRight=!0),this.watermarkOptions.left=e=h+"%"):(this.watermarkOptions.left=e=parseFloat(e)-+n+"%",this.isLeftToRight=!1),parseFloat(t)<100&&0<=parseFloat(t)&&this.isTopToBottom&&l+o+u<d||parseFloat(t)<=0?(a=d<(s=parseFloat(t)+ +n)/100*d+o?parseFloat((d-o)/d*100):s,this.watermarkOptions.top=t=a+"%",this.isTopToBottom=!0):0<l-u?(this.watermarkOptions.top=t=parseFloat(t)-+n+"%",this.isTopToBottom=!1):this.isTopToBottom=!0}let d="";for(var c in this.watermarkOptions)this.watermarkOptions[c]&&"type"!=c&&"content"!=c&&(d+=`${c}:${this.watermarkOptions[c]};`);return d}updateStyle(){this.timer&&clearInterval(this.timer),this.timer=null,this.timer=setInterval((()=>{this.undateChild()}),50)}undateChild(){var t,i,n;this.watermarkOptions.content&&(t=document.getElementsByClassName(this.getTag().container),0==(i=document.getElementsByClassName(this.getTag().content)).length&&0!=t.length&&(this.contentEle=e.createElement(this.renderContent()),t[0].appendChild(this.contentEle)),0!=i.length&&(this.contentEle=i[0],i[0].style=this.setStyle(),n=this.watermarkOptions.textShadow)&&(i[0].style.textShadow=n),0==t.length)&&(this.watermarkEle=e.createElement(this.render()),this.container.appendChild(this.watermarkEle))}setWatermarkOptions(e){e&&e.content&&e.content!=this.watermarkOptions.content&&this.watermarkEle.removeChild(this.contentEle),this.watermarkOptions=Object.assign(this.watermarkOptions,e)}destroy(){this.timer&&clearInterval(this.timer),this.timer=null,this.container&&this.container.removeChild(this.watermarkEle)}}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(62),i(243),i(1)],t=function(e,t,i){return e.extend({constructor:function(e,t){this.config=e,this.className=t,this.container=null,this.closeIconEl=null},setup:function(e){this.container=e,this.el=i.createElement(t(this.config)),this.el.classList.add(this.className),this.container.appendChild(this.el),this.addEvent(),this.config&&this.config.timeout&&setTimeout(function(){this.destroy()}.bind(this),this.config.timeout)},addEvent:function(){var e="closeToastTips-"+this.config.playerId;this.closeIconEl=document.getElementById(e),this.closeIconEl&&this.closeIconEl.addEventListener("click",this.destroy.bind(this))},element:function(){return this.el},destroy:function(){try{this.container&&(this.container.removeChild(this.el),this.el=null,this.closeIconEl&&this.closeIconEl.removeEventListener("click",this.destroy),this.classList=null)}catch(e){}}})}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="jw-toast">\n  <p>'+a(e.lambda(null!=t?s(t,"text"):t,t))+'&nbsp;&nbsp;</p>\n  <span\n    class="jw-icon jw-icon-close-small"\n    id="closeToastTips-'+a("function"==typeof(a=null!=(a=s(i,"playerId")||(null!=t?s(t,"playerId"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"playerId",hash:{},data:r,loc:{start:{line:5,column:23},end:{line:5,column:35}}}):a)+'"\n  ></span>\n</div>\n'},useData:!0})},function(e,t,i){i=[i(245)],t=function(e){return function(t,i,n,r){return e({id:t,skin:i,title:n,body:r})}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=i(13),e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,t,i,n,r){var a,s,o=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,h="function",u=e.escapeExpression;return e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},'<div id="'+u(typeof(s=null!=(s=e(i,"id")||(null!=t?e(t,"id"):t))?s:l)==h?s.call(o,{name:"id",hash:{},data:r,loc:{start:{line:1,column:9},end:{line:1,column:15}}}):s)+'"class="jw-skin-'+u(typeof(s=null!=(s=e(i,"skin")||(null!=t?e(t,"skin"):t))?s:l)==h?s.call(o,{name:"skin",hash:{},data:r,loc:{start:{line:1,column:31},end:{line:1,column:39}}}):s)+' jw-error jw-reset">\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset">'+(null!=(a=typeof(s=null!=(s=e(i,"title")||(null!=t?e(t,"title"):t))?s:l)==h?s.call(o,{name:"title",hash:{},data:r,loc:{start:{line:3,column:47},end:{line:3,column:58}}}):s)?a:"")+'</div>\n        <div class="jw-title-secondary jw-reset">'+u(typeof(s=null!=(s=e(i,"body")||(null!=t?e(t,"body"):t))?s:l)==h?s.call(o,{name:"body",hash:{},data:r,loc:{start:{line:4,column:49},end:{line:4,column:57}}}):s)+'</div>\n    </div>\n\n    <div class="jw-error-icon-container  jw-reset">\n        <div class="jw-error-display-icon-container  jw-background-color jw-reset">\n            <div class="jw-icon jw-error-icon-display jw-reset"></div>\n        </div>\n    </div>\n</div>\n\n'},useData:!0})},function(e,t,i){i=[i(95),i(33),i(97)],t=function(e,t){var i,n,r,a,s={},o=document.getElementsByTagName("script")[0].parentNode,l=(window.__LOG_API__,0),h=0,u=!1,d=(new Date).getTime()+"",c=!1;function f(e){var t=(o=new Date).getFullYear(),i=o.getMonth()+1,n=o.getDate(),r=o.getHours(),a=o.getMinutes(),s=o.getSeconds(),o=o.getMilliseconds();return t=t+"-"+(i<10?"0"+i:i)+"-"+(n<10?"0"+n:n)+" "+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)+":"+(s<10?"0"+s:s),e?t+"."+o:t}function p(){return{flashVersion:e.flashVersion(),cyberPlayerVersion:t,ak:n.ak||"",provider:i.get("provider")?i.get("provider").name:"",config:""}}function m(e){var t;c||(t=e.action,delete e.action,e.sendTime=f(),e=function(e){var t,i=[];for(t in e)"object"==typeof e[t]?i.push(t+"="+encodeURIComponent(JSON.stringify(e[t]))):i.push(t+"="+e[t]);return i.join("&")}(e),r&&o.removeChild(r),(r=document.createElement("script")).setAttribute("type","text/javascript"),r.src=__LOG_API__+t+"?"+e,o.insertBefore(r,o.getElementsByTagName("script")[0]))}return function(e,t){if(n=(i=t).getConfiguration(),__DEBUG__||!1===n.withLog)return!1;var r,o,g,_,y,v=0,A=(e.on("meta",(function(e){for(var t in e.metadata)s[t]=e.metadata[t];s.cdn_ip&&m({action:"/user/web/cdn",url:i.get("file")||i.getCurrentItem().file,cdn:s.cdn_ip})})),e.on("beforePlay",(function(){u=c=!1,r=setInterval((function(){v+=100}),100)})),e.on("play",(function(){u?(clearInterval(r),r=null):(r&&(m({action:"/media/web/available",videoUrl:i.get("file")||i.getCurrentItem().file,type:"play",duration:v,time:f(!0),sessionTime:d,env:p()}),clearInterval(r),r=null),h=i.get("position"),m({action:"/user/web/play",videoUrl:i.get("file")||i.getCurrentItem().file,videoHeight:encodeURIComponent(s.height)||"",videoWidth:encodeURIComponent(s.width)||"",playerHeight:encodeURIComponent(n.height),playerWidth:encodeURIComponent(n.width),duration:s.duration||"",size:s.filesize||"",startPosition:i.get("position"),service:0<this.getDuration()?"vod":"lss",time:f(!0),sessionTime:d,env:p()}),u=!0,a||(a=setInterval((function(){m({action:"/user/web/count",session:d,url:i.get("file")||i.getCurrentItem().file})}),6e4),m({action:"/user/web/count",session:d,url:i.get("file")||i.getCurrentItem().file})))})),e.on("seek",(function(e){l+=e.position-h,h=e.offset,m({action:"/user/web/seek",videoUrl:i.get("file")||i.getCurrentItem().file,from:e.position,to:e.offset,time:f(!0),sessionTime:d,env:p()})})),e.on("pause",(function(){l+=i.get("position")-h,m({action:"/user/web/pause",videoUrl:i.get("file")||i.getCurrentItem().file,time:f(!0),sessionTime:d,env:p()})})),e.on("idle",(function(e){"complete"===e.reason&&(l+=i.get("duration")-h,m({action:"/user/web/end",videoUrl:i.get("file")||i.getCurrentItem().file,playInterval:l,time:f(!0),sessionTime:d,env:p()}))})),e.on("stop",(function(){c=!0,clearInterval(r),r=null,clearInterval(a),a=null,s.duration&&(l+=i.get("position")-h,m({action:"/user/web/end",videoUrl:i.get("file")||i.getCurrentItem().file,playInterval:l,time:f(!0),sessionTime:d,env:p()}))})),e.on("error",(function(e){clearInterval(r),m({action:"/core/web/error",videoUrl:i.get("file")||i.getCurrentItem().file,error:e.code,errorInfo:e.message,time:f(!0),sessionTime:d,env:p()})})),e.on("setupError",(function(e){m({action:"/core/web/error",videoUrl:i.get("file")||i.getCurrentItem().file,error:e.code,errorInfo:e.message,time:f(!0),sessionTime:d,env:p()})})),e.on("alive",(function(){o=(new Date).getTime()})),e.on("liveStop",(function(){g=(new Date).getTime(),m({action:"/user/web/end",videoUrl:i.get("file")||i.getCurrentItem().file,playInterval:(g-o)/1e3,time:f(!0),sessionTime:d,env:p()})})),!0),E=!1,b=0;e.on("alive",(function(){E=!0,A?A=!1:_&&(y=(new Date).getTime()-_,b++,m({action:"/user/web/buffer",session:d,url:i.get("file")||i.getCurrentItem().file,bt:y,bc:b,env:p()}),_=null)})),e.on("noLiveStream",(function(){E&&(_=_||(new Date).getTime())}))}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){},function(e,t){},function(e,t,i){i=[i(76),i(2)],t=function(e,t){return function(i,n){t.each(["seek","skipAd","stop","playlistNext","playlistPrev","playlistItem","resize","addButton","removeButton","registerPlugin","attachMedia"],(function(e){i[e]=function(){return n[e].apply(n,arguments),i}})),i.registerPlugin=e.registerPlugin}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2)],t=function(e){return function(t,i){e.each(["buffer","controls","position","duration","fullscreen","volume","mute","item","stretching","playlist","captions","playbackRate","screenshot"],(function(e){var n=e.slice(0,1).toUpperCase()+e.slice(1);t["get"+n]=function(){return i._model.get(e)}})),e.each(["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia","getHlsCurrentLevel","getMediaInfo"],(function(e){t[e]=function(){return i[e]?i[e].apply(i,arguments):null}})),e.each(["setControls","setKeyControls","setFullscreen","setVolume","enableGPU","disableGPU","setMute","setCues","setCaptions","setToken","setThumbnails","setPlaybackRate","setScreenshot","setSeekStep","setCaptureFrameStart","setCaptureFrameEnd","setDanmuStatus","sendDanmu","setPictInPict","setLang","setWatermark","setMirror","setMaxSeekTime"],(function(e){t[e]=function(){return i[e].apply(i,arguments),t}})),t.getPlaylistIndex=t.getItem}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(2),i(6)],t=function(e,t){return function(i){var n={onSeekFinished:t.JWPLAYER_MEDIA_SEEK_FINISHED,onBufferChange:t.JWPLAYER_MEDIA_BUFFER,onBufferFull:t.JWPLAYER_MEDIA_BUFFER_FULL,onError:t.JWPLAYER_ERROR,onSetupError:t.JWPLAYER_SETUP_ERROR,onFullscreen:t.JWPLAYER_FULLSCREEN,onMeta:t.JWPLAYER_MEDIA_META,onMute:t.JWPLAYER_MEDIA_MUTE,onPlaylist:t.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:t.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:t.JWPLAYER_PLAYLIST_COMPLETE,onReady:t.JWPLAYER_READY,onCoverImageReady:t.JWPLAYER_H265WEB_COVERLOADED,onResize:t.JWPLAYER_RESIZE,onComplete:t.JWPLAYER_MEDIA_COMPLETE,onSeek:t.JWPLAYER_MEDIA_SEEK,onTime:t.JWPLAYER_MEDIA_TIME,onVolume:t.JWPLAYER_MEDIA_VOLUME,onBeforePlay:t.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:t.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:t.JWPLAYER_DISPLAY_CLICK,onControls:t.JWPLAYER_CONTROLS,onQualityLevels:t.JWPLAYER_MEDIA_LEVELS,onQualityChange:t.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:t.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:t.JWPLAYER_CAPTIONS_CHANGED,onAdError:t.JWPLAYER_AD_ERROR,onAdClick:t.JWPLAYER_AD_CLICK,onAdImpression:t.JWPLAYER_AD_IMPRESSION,onAdTime:t.JWPLAYER_AD_TIME,onAdComplete:t.JWPLAYER_AD_COMPLETE,onAdCompanions:t.JWPLAYER_AD_COMPANIONS,onAdSkipped:t.JWPLAYER_AD_SKIPPED,onAdPlay:t.JWPLAYER_AD_PLAY,onAdPause:t.JWPLAYER_AD_PAUSE,onAdMeta:t.JWPLAYER_AD_META,onCast:t.JWPLAYER_CAST_SESSION,onAudioTrackChange:t.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:t.JWPLAYER_AUDIO_TRACKS,onCuepoint:t.JWPLAYER_CUEPOINT,onSeekForwardForbidden:t.JWPLAYER_SEEK_FORWARD_FORBIDDEN,onConnection:t.JWPLAYER_CONNECTING,onAlive:t.JWPLAYER_ALIVE,onNoLiveStream:t.JWPLAYER_NO_LIVE_STREAM,onLiveStop:t.JWPLAYER_LIVE_STOP,onPlaybackRate:t.JWPLAYER_PLAYBACKRATE,onScreenshot:t.JWPLAYER_SCREENSHOT,onCaptureFrameFinished:t.JWPLAYER_CaptureFrameFinished};e.each({onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle",onStop:"stop"},(function(t,n){i[n]=e.partial(i.on,t,e)})),e.each(n,(function(t,n){i[n]=e.partial(i.on,t,e)}))}}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){i=[i(33),i(1)],t=function(e,t){function i(){for(var e=t.getElementsByClassName("jw-warning"),i=0;i<e.length;i++)e[i].style.display="block"}function n(e,t){this.config=e,this.api=t}return n.prototype={userCertify:function(){var n,r;return!__DEBUG__&&!1!==this.config.withLog&&(n=this.config.ak||"",/^[a-zA-Z0-9]{32}$/.test(n)||/^[a-zA-Z0-9]{26}$/.test(n)?(n="https://drm.media.baidubce.com/v1/playerAuth?ak="+n+"&player=web-html5-"+e+"&platform="+t.getBrowserInfo()+"&callback="+this._getCallback(),n=encodeURI(n),(r=document.createElement("script")).type="text/javascript",r.src=n,void document.getElementsByTagName("head")[0].appendChild(r)):(i(),!1))},_getCallback:function(){var e="jwplayer_"+(new Date).getTime()+"_"+(1e9*Math.random()>>>0);return window[e]=function(t){try{!(n=t).code||"UNAUTHORIZED"!==n.code&&"BAD_REQUEST"!==n.code||i(),delete window[e]}catch(t){window[e]=null}var n},e}},n}.apply(t,i),void 0!==t&&(e.exports=t)},function(e,t,i){var n=i(255),r=("string"==typeof n&&(n=[[e.i,n,""]]),{hmr:!0});r.transform=void 0,r.insertInto=void 0,i(259)(n,r),n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(256)()).push([e.i,".jw-reset {\n  color: inherit;\n  background-color: transparent;\n  padding: 0;\n  margin: 0;\n  float: none;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  line-height: 1em;\n  list-style: none;\n  text-align: left;\n  text-transform: none;\n  vertical-align: baseline;\n  border: 0;\n  direction: ltr;\n  font-variant: inherit;\n  font-stretch: inherit;\n  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n}\n/*** When not base64 encoded, fallbacks will work so that we won't load both fonts if we don't have to ***/\n/*** TTF is used for support for some older version of Android Stock (4.3 and less) ***/\n/*** https://kekee000.github.io/fonteditor/# icon鐢熸垚鍣� ***/\n@font-face {\n  font-family: \"jw-icons\";\n  src: url("+i(257)+') format("woff"), url('+i(258)+') format("truetype");\n  font-weight: normal;\n  font-style: normal;\n}\n.jw-icon-inline,\n.jw-icon-tooltip,\n.jw-icon-display,\n.jw-controlbar .jw-menu .jw-option:before {\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\n/*** ICONS ***/\n.jw-icon-audio-tracks:before {\n  content: "\\E600";\n}\n.jw-icon-buffer:before {\n  content: "\\E601";\n}\n.jw-icon-cast:before {\n  content: "\\E603";\n}\n.jw-icon-cast.jw-off:before {\n  content: "\\E602";\n}\n.jw-icon-cc:before {\n  content: "\\E605";\n}\n.jw-icon-cue:before {\n  content: "\\E606";\n}\n.jw-icon-menu-bullet:before {\n  content: "\\E606";\n}\n.jw-icon-error:before {\n  content: "\\E607";\n}\n.jw-icon-fullscreen:before {\n  content: "\\E608";\n}\n.jw-icon-fullscreen.jw-off:before {\n  content: "\\E613";\n}\n.jw-icon-screenshot:before {\n  content: "\\E619";\n}\n.jw-icon-screenshot.jw-off:before {\n  content: "\\E619";\n}\n.jw-icon-pictureinpicture:before {\n  content: "\\E61C";\n}\n.jw-icon-pictureinpicture.jw-off:before {\n  content: "\\E61C";\n}\n.jw-icon-danmu:before {\n  content: "\\E61A";\n}\n.jw-icon-danmu.jw-off:before {\n  content: "\\E61B";\n}\n.jw-icon-hd:before {\n  content: none;\n}\n.jw-watermark:before,\n.jw-rightclick-logo:before {\n  content: "\\E60B";\n}\n.jw-icon-next:before {\n  content: "\\E60C";\n}\n.jw-icon-pause:before {\n  content: "\\E60D";\n}\n.jw-icon-play:before {\n  content: "\\E60E";\n}\n.jw-icon-prev:before {\n  content: "\\E60F";\n}\n.jw-icon-replay:before {\n  content: "\\E610";\n}\n.jw-icon-volume:before {\n  content: "\\E612";\n}\n.jw-icon-volume.jw-off:before {\n  content: "\\E611";\n}\n.jw-icon-more:before {\n  content: "\\E614";\n}\n.jw-icon-close:before {\n  content: "\\E615";\n}\n.jw-icon-close-small:before {\n  content: "\\E61D";\n}\n.jw-icon-playlist:before {\n  content: "\\E616";\n}\n.jw-icon-barlogo:before {\n  content: "\\E617";\n}\n.jw-icon-barlogo-new:before {\n  content: "\\E618";\n}\n.jw-icon-mirror:before {\n  content: "\\E620";\n  font-weight: 600;\n  font-size: 0.9em;\n  position: relative;\n  bottom: 0.18em;\n}\n.jw-icon-mirror.jw-off:before {\n  content: "\\E621";\n  font-weight: 600;\n}\n.jw-icon-rotate:before {\n  content: "\\E61F";\n  font-size: 1em;\n  position: relative;\n  bottom: 0.15em;\n}\n.jw-icon-rotate.jw-off:before {\n  content: "\\E61E";\n  font-size: 1em;\n}\n.jwplayer {\n  width: 100%;\n  font-size: 16px;\n  position: relative;\n  display: block;\n  min-height: 0;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-family: Arial, Helvetica, sans-serif;\n  background-color: #000;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.jwplayer * {\n  box-sizing: inherit;\n}\n.jwplayer.jw-flag-aspect-mode {\n  height: auto !important;\n}\n.jwplayer.jw-flag-aspect-mode .jw-aspect {\n  display: block;\n}\n.jwplayer .jw-aspect {\n  display: none;\n}\n.jwplayer.jw-no-focus:focus,\n.jwplayer .jw-swf {\n  outline: none;\n}\n.jwplayer.jw-ie:focus {\n  outline: #585858 dotted 1px;\n}\n.jwplayer:hover .jw-display-icon-container {\n  background-color: #333;\n  background: #333;\n  background-size: #333;\n}\n.jw-media,\n.jw-preview,\n.jw-adv,\n.jw-overlays,\n.jw-controls {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n.jwplayer .jw-adv {\n  background-size: 100% 100%;\n  cursor: pointer;\n}\n.jwplayer .jw-adv .adv-countdown {\n  position: absolute;\n  width: 95px;\n  padding-left: 10px;\n  height: 30px;\n  line-height: 30px;\n  background-color: #202020;\n  opacity: 0.7;\n  color: #ee6002;\n  font-size: 14px;\n  top: 0px;\n  right: 0px;\n  display: none;\n}\n.jwplayer .jw-adv .adv-close {\n  position: absolute;\n  height: 22px;\n  line-height: 22px;\n  color: #fff;\n  font-weight: bold;\n  font-size: 14px;\n  width: 20px;\n  top: 0px;\n  right: 5px;\n  display: none;\n  text-align: center;\n}\n.jw-media {\n  overflow: hidden;\n  cursor: pointer;\n}\n.jw-overlays {\n  cursor: auto;\n}\n.jw-media.jw-media-show {\n  visibility: visible;\n  opacity: 1;\n}\n.jw-controls.jw-controls-disabled {\n  display: none;\n}\n.jw-controls .jw-controls-right {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 2em;\n}\n.jw-warning {\n  color: #f00;\n  top: 10px;\n  right: 10px;\n  position: absolute;\n  z-index: 10000;\n  display: none;\n}\n.jw-warning a {\n  color: #108cee;\n}\n.jw-marquee {\n  opacity: 0;\n  color: #fff;\n  width: auto;\n  font-size: 16px;\n  font-weight: bold;\n  white-space: nowrap;\n  position: absolute;\n}\n@-webkit-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-moz-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-o-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-ms-keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@keyframes marquee1 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-webkit-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-moz-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-o-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@-ms-keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n@keyframes marquee2 {\n  from {\n    left: 100%;\n  }\n  to {\n    left: -110px;\n  }\n}\n.jw-text {\n  height: 1em;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 0.75em;\n  font-style: normal;\n  font-weight: normal;\n  color: white;\n  text-align: center;\n  font-variant: normal;\n  font-stretch: normal;\n}\n.jw-plugin {\n  position: absolute;\n  bottom: 2.5em;\n}\n.jw-plugin .jw-banner {\n  max-width: 100%;\n  opacity: 0;\n  cursor: pointer;\n  position: absolute;\n  margin: auto auto 0 auto;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: block;\n}\n.jw-cast-screen {\n  width: 100%;\n  height: 100%;\n}\n.jw-instream {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: none;\n}\n.jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jw-preview,\n.jw-captions,\n.jw-title,\n.jw-overlays,\n.jw-controls {\n  pointer-events: none;\n}\n.jw-overlays > div,\n.jw-media,\n.jw-controlbar,\n.jw-dock,\n.jw-logo,\n.jw-skip,\n.jw-display-icon-container {\n  pointer-events: all;\n}\n.jw-danmaku {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  pointer-events: none;\n  mask-repeat: no-repeat;\n  mask-size: contain;\n  mask-position: center;\n  -webkit-mask-repeat: no-repeat;\n  -webkit-mask-size: contain;\n  -webkit-mask-position: center;\n}\n.jw-danmaku-opacity-1 {\n  opacity: 1;\n}\n.jw-danmaku-opacity-2 {\n  opacity: 0.66;\n}\n.jw-danmaku-opacity-3 {\n  opacity: 0.33;\n}\n.jw-danmaku-opacity-4 {\n  opacity: 0;\n}\n.jw-danmaku-item {\n  position: absolute;\n  white-space: nowrap;\n  line-height: 1.125;\n  letter-spacing: 1px;\n  color: #fff;\n  text-shadow: #000000 1px 0px 1px, #000000 0px 1px 1px, #000000 0px -1px 1px, #000000 -1px 0px 1px;\n  will-change: transform;\n}\n.jw-danmaku-item-center {\n  left: 50%;\n  transform: translateX(-50%);\n  will-change: initial;\n  z-index: 1;\n}\n.jw-danmaku-item-me {\n  outline: 2px solid;\n  z-index: 2;\n}\n.jw-danmaku-sendbox {\n  display: flex;\n  align-items: center;\n  margin: 0 10px;\n  padding: 5px 10px;\n  color: white;\n  background: rgba(255, 255, 255, 0.15);\n}\n.jw-danmaku-sendbox input {\n  flex: 1;\n  width: 100px;\n  padding: 0;\n  color: currentColor;\n  background: transparent;\n  border: 0;\n  outline: 0;\n  font-size: 13px;\n}\n.jw-danmaku-sendbox input::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n.jw-danmaku-sendbox-btn {\n  color: white;\n  font-size: 12px;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.performance-info {\n  color: #fff;\n  width: 178px;\n  height: 100%;\n  z-index: 8;\n  font-size: 12px;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.5);\n  font-weight: 400;\n  box-sizing: border-box;\n  overflow-y: auto;\n  position: absolute;\n  top: 0;\n}\n.performance-info li {\n  line-height: 35px;\n  color: #fff;\n  display: flex;\n  justify-content: space-between;\n}\n.performance-info #performance-buffer {\n  max-width: 70px;\n  display: inline-block;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  line-height: 35px;\n}\n.jw-watermark-container {\n  left: 0%;\n  top: 0%;\n  width: 100%;\n  height: 100%;\n  display: block;\n  visibility: visible;\n  position: absolute;\n  margin: 0px;\n  padding: 0px;\n}\n.jw-watermark-container .jw-watermark-content {\n  position: absolute;\n  height: fit-content;\n}\n.jw-watermark-container img {\n  width: 20px;\n}\n.jw-toast {\n  width: fit-content;\n  height: fit-content;\n  display: flex;\n  background-color: rgba(0, 0, 0, 0.5);\n  align-items: center;\n  border-radius: 5px;\n  color: #fff;\n  font-size: 14px;\n  padding: 2px 10px;\n  white-space: normal;\n  overflow-wrap: normal;\n  letter-spacing: 0.05em;\n}\n.memory-play-container {\n  position: absolute;\n  bottom: 40px;\n  pointer-events: all;\n  z-index: 1;\n}\n.memory-play-container p {\n  font-weight: 400;\n  color: #fff;\n  opacity: 0.9;\n}\n.memory-play-container .jw-icon-close-small {\n  font-size: 13px;\n  cursor: pointer;\n  font-weight: 800;\n}\n.jwplayer video {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  background: transparent;\n}\n.jwplayer video::-webkit-media-controls-start-playback-button {\n  display: none;\n}\n.jwplayer.jw-stretch-uniform video {\n  object-fit: contain;\n}\n.jwplayer.jw-stretch-none video {\n  object-fit: none;\n}\n.jwplayer.jw-stretch-fill video {\n  object-fit: cover;\n}\n.jwplayer.jw-stretch-exactfit video {\n  object-fit: fill;\n}\n.jwplayer.jw-state-mirror video,\n.jwplayer.jw-state-mirror canvas {\n  transform: rotateY(180deg);\n}\n/* W3C */\n/* icons */\n/* doc */\n/* IE9 SVG, needs conditional override of \'filter\' to \'none\' */\n/* IE9 SVG, needs conditional override of \'filter\' to \'none\' */\n.jw-click {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.jw-preview,\n.jw-adv {\n  position: absolute;\n  display: none;\n  opacity: 1;\n  visibility: visible;\n  width: 100%;\n  height: 100%;\n  background: #000 no-repeat 50% 50%;\n}\n.jwplayer .jw-preview,\n.jw-error .jw-preview,\n.jw-stretch-uniform .jw-preview {\n  background-size: 100% 100%;\n}\n.jw-stretch-none .jw-preview {\n  background-size: auto auto;\n}\n.jw-stretch-fill .jw-preview {\n  background-size: cover;\n}\n.jw-stretch-exactfit .jw-preview {\n  background-size: 100% 100%;\n}\n.jw-display-icon-container,\n.jw-error-display-icon-container {\n  position: relative;\n  top: 50%;\n  display: table;\n  height: 3.5em;\n  width: 3.5em;\n  margin: -1.75em auto 0;\n  cursor: pointer;\n}\n.jw-display-icon-container .jw-icon-display,\n.jw-error-display-icon-container .jw-icon-display,\n.jw-display-icon-container .jw-error-icon-display,\n.jw-error-display-icon-container .jw-error-icon-display {\n  position: relative;\n  display: table-cell;\n  text-align: center;\n  vertical-align: middle !important;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  font-size: 2em;\n}\n.jw-flag-audio-player .jw-display-icon-container,\n.jw-flag-dragging .jw-display-icon-container {\n  display: none;\n}\n.jw-icon {\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\n/* Mixin for common skin styles with variable colors */\n.jw-controlbar {\n  display: table;\n  position: absolute;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  height: 2em;\n  padding: 0 0.25em;\n  z-index: 1;\n}\n.jw-controlbar .jw-hidden {\n  display: none;\n}\n.jw-controlbar.jw-drawer-expanded .jw-controlbar-left-group,\n.jw-controlbar.jw-drawer-expanded .jw-controlbar-center-group {\n  opacity: 0;\n}\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-elapsed,\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-duration,\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-slider-time {\n  display: none;\n}\n.jw-controlbar-textshow .jw-controlbar-center-group .jw-text-alt {\n  display: inline;\n}\n.jw-background-color {\n  background-color: #414040;\n}\n.jw-group {\n  display: table-cell;\n}\n.jw-controlbar-center-group {\n  width: 100%;\n  padding: 0 0.25em;\n}\n.jw-controlbar-center-group .jw-slider-time,\n.jw-controlbar-center-group .jw-text-alt {\n  padding: 0;\n}\n.jw-controlbar-center-group .jw-text-alt {\n  display: none;\n}\n.jw-controlbar-left-group,\n.jw-controlbar-right-group {\n  white-space: nowrap;\n}\n.jw-knob:hover,\n.jw-icon-inline:hover,\n.jw-icon-tooltip:hover,\n.jw-icon-display:hover,\n.jw-option:before:hover {\n  color: #eee;\n}\n.jw-icon-inline,\n.jw-icon-tooltip,\n.jw-slider-horizontal,\n.jw-text-elapsed,\n.jw-text-duration {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  line-height: 2em;\n  vertical-align: middle;\n  cursor: pointer;\n}\n.jw-icon-inline,\n.jw-icon-tooltip {\n  min-width: 1.25em;\n  text-align: center;\n}\n.jw-icon-playback {\n  min-width: 2.25em;\n}\n.jw-icon-barlogo {\n  font-size: 19px;\n  min-width: 1.75em;\n}\n.jw-icon-barlogo-new {\n  font-size: 20px;\n  min-width: 1.5em;\n  height: 1em;\n  line-height: 1em;\n}\n.jw-icon-volume {\n  min-width: 1.75em;\n  text-align: left;\n}\n.jw-controlbar .jw-icon-volume .jw-overlay {\n  left: 42%;\n}\n.jw-time-tip {\n  line-height: 1em;\n  pointer-events: none;\n}\n.jw-icon-inline:after,\n.jw-icon-tooltip:after {\n  width: 100%;\n  height: 100%;\n  font-size: 1em;\n}\n.jw-icon-cast {\n  display: none;\n}\n.jw-slider-volume.jw-slider-horizontal,\n.jw-icon-inline.jw-icon-volume {\n  display: none;\n}\n.jw-icon-hd .jw-hd-label {\n  font-size: 12px;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n  pointer-events: none;\n}\n.jw-icon-qualityChange {\n  margin: 0px 5px;\n}\n.jw-icon-qualityChange .jw-qualityChange-label {\n  font-size: 14px;\n  pointer-events: none;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n}\n.jw-controlbar .jw-icon-playrate .jw-overlay {\n  bottom: 1.5em;\n}\n.jw-controlbar .jw-icon-playrate .jw-playrate-label {\n  font-size: 0.75em;\n  border-left: 1px solid #666;\n  padding: 0 0.7em;\n  display: inline-block;\n  line-height: 16px;\n  height: 16px;\n  vertical-align: text-top;\n}\n.jw-controlbar .jw-icon-cc:before {\n  content: none;\n}\n.jw-controlbar .jw-icon-cc .jw-cc-label {\n  font-size: 0.75em;\n  padding: 0 0.7em;\n  display: inline-block;\n  line-height: 16px;\n  height: 16px;\n  vertical-align: text-top;\n  pointer-events: none;\n}\n.jw-controlbar .jw-icon-lang {\n  margin: 0px 3px 0px 8px;\n}\n.jw-controlbar .jw-icon-lang .jw-lang-label {\n  font-size: 14px;\n  pointer-events: none;\n  vertical-align: text-top;\n  display: inline-block;\n  height: 14px;\n  line-height: 14px;\n}\n.jw-text-backlive {\n  position: absolute;\n  left: 110px;\n  top: 13px;\n  cursor: pointer;\n}\n.jw-dock {\n  margin: 0.75em;\n  display: block;\n  opacity: 1;\n  clear: right;\n}\n.jw-dock:after {\n  content: \'\';\n  clear: both;\n  display: block;\n}\n.jw-dock-button {\n  cursor: pointer;\n  float: right;\n  position: relative;\n  width: 2.5em;\n  height: 2.5em;\n  margin: 0.5em;\n}\n.jw-dock-button .jw-arrow {\n  display: none;\n  position: absolute;\n  bottom: -0.2em;\n  width: 0.5em;\n  height: 0.2em;\n  left: 50%;\n  margin-left: -0.25em;\n}\n.jw-dock-button .jw-overlay {\n  display: none;\n  position: absolute;\n  top: 2.5em;\n  right: 0em;\n  margin-top: 0.25em;\n  padding: 0.5em;\n  white-space: nowrap;\n}\n.jw-dock-button:hover .jw-overlay,\n.jw-dock-button:hover .jw-arrow {\n  display: block;\n}\n.jw-dock-image {\n  width: 100%;\n  height: 100%;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  opacity: 0.75;\n}\n.jw-title {\n  display: none;\n  position: absolute;\n  top: 0;\n  width: 100%;\n  font-size: 0.875em;\n  height: 8em;\n  background: linear-gradient(to bottom, #000000 0, #000000 18%, rgba(0, 0, 0, 0) 100%);\n}\n.jw-title-primary,\n.jw-title-secondary {\n  padding: 0.75em 1.5em;\n  min-height: 2.5em;\n  color: white;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow-x: hidden;\n}\n.jw-title-primary {\n  font-weight: bold;\n}\n.jw-title-secondary {\n  margin-top: -0.5em;\n}\n.jw-slider-container {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  touch-action: none;\n}\n.jw-rail,\n.jw-buffer,\n.jw-progress {\n  position: absolute;\n  cursor: pointer;\n}\n.jw-progress {\n  background-color: #fff;\n}\n.jw-rail {\n  background-color: #aaa;\n}\n.jw-buffer {\n  background-color: #202020;\n}\n.jw-cue,\n.jw-knob {\n  position: absolute;\n  cursor: pointer;\n}\n.jw-cue {\n  background-color: #fff;\n  width: 0.1em;\n  height: 0.4em;\n}\n.jw-knob {\n  background-color: #aaa;\n  width: 0.4em;\n  height: 0.4em;\n}\n.jw-slider-horizontal {\n  width: 4em;\n  height: 1em;\n}\n.jw-slider-horizontal.jw-slider-volume {\n  margin-right: 5px;\n}\n.jw-slider-horizontal .jw-rail,\n.jw-slider-horizontal .jw-buffer,\n.jw-slider-horizontal .jw-progress {\n  width: 100%;\n  height: 0.4em;\n}\n.jw-slider-horizontal .jw-progress,\n.jw-slider-horizontal .jw-buffer {\n  width: 0;\n}\n.jw-slider-horizontal .jw-rail,\n.jw-slider-horizontal .jw-progress,\n.jw-slider-horizontal .jw-slider-container {\n  width: 100%;\n  left: 0;\n}\n.jw-slider-horizontal .jw-knob {\n  left: 0;\n  margin-left: -0.325em;\n}\n.jw-slider-vertical {\n  width: 0.75em;\n  height: 4em;\n  bottom: 0em;\n  position: absolute;\n  padding: 1em;\n}\n.jw-slider-vertical .jw-rail,\n.jw-slider-vertical .jw-buffer,\n.jw-slider-vertical .jw-progress {\n  bottom: 0;\n  height: 100%;\n}\n.jw-slider-vertical .jw-progress,\n.jw-slider-vertical .jw-buffer {\n  height: 0;\n}\n.jw-slider-vertical .jw-slider-container,\n.jw-slider-vertical .jw-rail,\n.jw-slider-vertical .jw-progress {\n  bottom: 0;\n  width: 0.75em;\n  height: 100%;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.jw-slider-vertical .jw-slider-container {\n  height: 4em;\n  position: relative;\n}\n.jw-slider-vertical .jw-knob {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.jw-slider-time {\n  right: 0;\n  left: 1%;\n  width: 98%;\n}\n.jw-tooltip-time {\n  position: absolute;\n}\n.jw-slider-volume .jw-buffer {\n  display: none;\n}\n.jw-slider-breakpoint {\n  position: absolute;\n  top: 1px;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  width: 3px;\n  height: 2px;\n  background-color: #b7becb;\n  border-radius: 50%;\n}\n.jwplayer .jw-process-adv {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n}\n.jwplayer .jw-process-adv img {\n  border: none;\n}\n.jw-captions {\n  position: absolute;\n  display: none;\n  margin: 0 auto;\n  width: 100%;\n  left: 0;\n  bottom: 3em;\n  right: 0;\n  max-width: 90%;\n  text-align: center;\n}\n.jw-captions.jw-captions-enabled {\n  display: block;\n}\n.jw-captions-window {\n  display: none;\n  padding: 0.25em;\n  border-radius: 0.25em;\n}\n.jw-captions-window.jw-captions-window-active {\n  display: inline-block;\n}\n.jw-captions-text {\n  display: inline-block;\n  color: white;\n  background-color: black;\n  word-wrap: break-word;\n  white-space: pre-line;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  text-decoration: none;\n  line-height: 1.3em;\n  padding: 0.1em 0.8em;\n}\n.jwplayer video::-webkit-media-controls {\n  justify-content: flex-start;\n}\n.jwplayer video::-webkit-media-text-track-container {\n  max-height: calc(97% - 6.25 * 2em);\n  line-height: 1.3em;\n}\n.jwplayer.jw-flag-compact-player video::-webkit-media-text-track-container {\n  max-height: calc(97% - 7.5 * 2em);\n}\n.jwplayer .jw-rightclick {\n  display: none;\n  position: absolute;\n  white-space: nowrap;\n}\n.jwplayer .jw-rightclick.jw-open {\n  display: block;\n}\n.jwplayer .jw-rightclick ul {\n  list-style: none;\n  font-weight: bold;\n  border-radius: 0.15em;\n  margin: 0;\n  border: 1px solid #444;\n  padding: 0;\n}\n.jwplayer .jw-rightclick ul li {\n  background-color: #000;\n  border-bottom: 1px solid #444;\n  margin: 0;\n}\n.jwplayer .jw-rightclick ul li .jw-rightclick-logo {\n  font-size: 2em;\n  color: #ff0147;\n  vertical-align: middle;\n  padding-right: 0.3em;\n  margin-right: 0.3em;\n  border-right: 1px solid #444;\n}\n.jwplayer .jw-rightclick ul li a {\n  color: #fff;\n  text-decoration: none;\n  padding: 1em;\n  display: block;\n  font-size: 0.6875em;\n  line-height: 1em;\n}\n.jwplayer .jw-rightclick ul li:last-child {\n  border-bottom: none;\n}\n.jwplayer .jw-rightclick ul li:hover {\n  background-color: #1a1a1a;\n  cursor: pointer;\n}\n.jwplayer .jw-rightclick ul .jw-featured {\n  background-color: #252525;\n  vertical-align: middle;\n}\n.jwplayer .jw-rightclick ul .jw-featured a {\n  color: #777;\n}\n.jw-logo {\n  position: absolute;\n  margin: 0.75em;\n  cursor: pointer;\n  pointer-events: all;\n  background-repeat: no-repeat;\n  background-size: contain;\n  top: auto;\n  right: auto;\n  left: auto;\n  bottom: auto;\n}\n.jw-logo .jw-flag-audio-player {\n  display: none;\n}\n.jw-logo-top-right {\n  top: 0;\n  right: 0;\n}\n.jw-logo-top-left {\n  top: 0;\n  left: 0;\n}\n.jw-logo-bottom-left {\n  bottom: 0;\n  left: 0;\n}\n.jw-logo-bottom-right {\n  bottom: 0;\n  right: 0;\n}\n.jw-watermark {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  text-align: center;\n  font-size: 14em;\n  color: #eee;\n  opacity: 0.33;\n  pointer-events: none;\n}\n.jw-icon-tooltip.jw-open .jw-overlay {\n  opacity: 1;\n  visibility: visible;\n}\n.jw-icon-tooltip.jw-hidden {\n  display: none;\n}\n.jw-overlay-horizontal {\n  display: none;\n}\n.jw-icon-tooltip.jw-open-drawer:before {\n  display: none;\n}\n.jw-icon-tooltip.jw-open-drawer .jw-overlay-horizontal {\n  opacity: 1;\n  display: inline-block;\n  vertical-align: top;\n}\n.jw-overlay:before {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: -50%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0);\n  content: " ";\n}\n.jw-slider-time .jw-overlay:before {\n  height: 1em;\n  top: auto;\n}\n.jw-time-tip,\n.jw-volume-tip,\n.jw-menu {\n  position: relative;\n  left: -50%;\n  border: solid 1px #000;\n  margin: 0;\n}\n.jw-volume-value-tip {\n  font-size: 12px;\n  position: absolute;\n  top: -26px;\n  right: 20px;\n  background-color: #000;\n  line-height: 20px;\n  border-radius: 3px;\n  padding: 0 3px;\n  color: #FFF;\n}\n.jw-volume-tip {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n.jw-time-tip {\n  text-align: center;\n  font-family: inherit;\n  color: #aaa;\n  bottom: 1em;\n  border: solid 4px #000;\n}\n.jw-time-tip .jw-text {\n  line-height: 1em;\n}\n.jw-controlbar .jw-overlay {\n  margin: 0;\n  position: absolute;\n  bottom: 2em;\n  left: 50%;\n  opacity: 0;\n  visibility: hidden;\n}\n.jw-controlbar .jw-overlay .jw-contents {\n  position: relative;\n}\n.jw-controlbar .jw-option {\n  position: relative;\n  white-space: nowrap;\n  cursor: pointer;\n  list-style: none;\n  height: 1.5em;\n  font-family: inherit;\n  line-height: 1.5em;\n  color: #aaa;\n  padding: 0 0.5em;\n  font-size: 0.8em;\n}\n.jw-controlbar .jw-option:hover,\n.jw-controlbar .jw-option:before:hover {\n  color: #eee;\n}\n.jw-controlbar .jw-option:before {\n  padding-right: 0.125em;\n}\n.jw-playlist-container ::-webkit-scrollbar-track {\n  background-color: #333;\n  border-radius: 10px;\n}\n.jw-playlist-container ::-webkit-scrollbar {\n  width: 5px;\n  border: 10px solid black;\n  border-bottom: 0;\n  border-top: 0;\n}\n.jw-playlist-container ::-webkit-scrollbar-thumb {\n  background-color: white;\n  border-radius: 5px;\n}\n.jw-tooltip-title {\n  border-bottom: 1px solid #444;\n  text-align: left;\n  padding-left: 0.7em;\n}\n.jw-playlist {\n  max-height: 11em;\n  min-height: 4.5em;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  width: calc(100% - 4px);\n}\n.jw-playlist .jw-option {\n  height: 3em;\n  margin-right: 5px;\n  color: white;\n  padding-left: 1em;\n  font-size: 0.8em;\n}\n.jw-playlist .jw-label,\n.jw-playlist .jw-name {\n  display: inline-block;\n  line-height: 3em;\n  text-align: left;\n  overflow: hidden;\n  white-space: nowrap;\n}\n.jw-playlist .jw-label {\n  width: 1em;\n}\n.jw-playlist .jw-name {\n  width: 11em;\n}\n.jw-skip {\n  cursor: default;\n  position: absolute;\n  float: right;\n  display: inline-block;\n  right: 0.75em;\n  bottom: 3em;\n}\n.jw-skip.jw-skippable {\n  cursor: pointer;\n}\n.jw-skip.jw-hidden {\n  visibility: hidden;\n}\n.jw-skip .jw-skip-icon {\n  display: none;\n  margin-left: -0.75em;\n}\n.jw-skip .jw-skip-icon:before {\n  content: "\\E60C";\n}\n.jw-skip .jw-text,\n.jw-skip .jw-skip-icon {\n  color: #aaa;\n  vertical-align: middle;\n  line-height: 1.5em;\n  font-size: 0.7em;\n}\n.jw-skip.jw-skippable:hover {\n  cursor: pointer;\n}\n.jw-skip.jw-skippable:hover .jw-text,\n.jw-skip.jw-skippable:hover .jw-skip-icon {\n  color: #eee;\n}\n.jw-skip.jw-skippable .jw-skip-icon {\n  display: inline;\n  margin: 0;\n}\n.jwplayer.jw-state-playing.jw-flag-casting .jw-display-icon-container,\n.jwplayer.jw-state-paused.jw-flag-casting .jw-display-icon-container {\n  display: table;\n}\n.jwplayer.jw-flag-casting .jw-display-icon-container {\n  border-radius: 0;\n  border: 1px solid white;\n  position: absolute;\n  top: auto;\n  left: 0.5em;\n  right: 0.5em;\n  bottom: 50%;\n  margin-bottom: -12.5%;\n  height: 50%;\n  width: 50%;\n  padding: 0;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jwplayer.jw-flag-casting .jw-display-icon-container .jw-icon {\n  font-size: 3em;\n}\n.jwplayer.jw-flag-casting.jw-state-complete .jw-preview {\n  display: none;\n}\n.jw-cast {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-size: auto;\n  background-position: 50% 50%;\n}\n.jw-cast-label {\n  position: absolute;\n  left: 0.5em;\n  right: 0.5em;\n  bottom: 75%;\n  margin-bottom: 1.5em;\n  text-align: center;\n}\n.jw-cast-name {\n  color: #cccccc;\n}\n.jw-switch {\n  position: relative;\n  float: left;\n  width: 30px;\n  margin: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  display: inline-block;\n  position: absolute;\n  right: 10px;\n  top: 18px;\n}\n.live-shift-switch {\n  position: absolute;\n  left: inherit;\n  right: initial;\n  top: 11px;\n  margin-left: 25px;\n}\n.live-shift-switch::before {\n  content: \'\\65F6\\79FB\\FF1A\';\n  position: absolute;\n  left: -30px;\n  z-index: 1;\n  color: #fff;\n  font-size: 12px;\n}\n.jw-switch-checkbox {\n  display: none;\n}\n.jw-switch-label {\n  display: block;\n  overflow: hidden;\n  cursor: pointer;\n  border-radius: 20px;\n}\n.jw-switch-inner {\n  display: block;\n  width: 200%;\n  margin-left: -100%;\n  transition: margin 0.3s ease-in 0s;\n}\n.jw-switch-inner::before,\n.jw-switch-inner::after {\n  display: block;\n  float: right;\n  width: 50%;\n  height: 15px;\n  padding: 0;\n  line-height: 15px;\n  font-size: 14px;\n  color: white;\n  font-family: Trebuchet, Arial, sans-serif;\n  font-weight: bold;\n  box-sizing: border-box;\n}\n.jw-switch-inner::after {\n  content: attr(data-on);\n  padding-left: 10px;\n  background-color: #0D5DEC;\n  color: #FFFFFF;\n}\n.jw-switch-inner::before {\n  content: attr(data-off);\n  padding-right: 10px;\n  background-color: #EEEEEE;\n  color: #999999;\n  text-align: right;\n}\n.jw-switch-switch {\n  position: absolute;\n  display: block;\n  width: 12px;\n  height: 12px;\n  margin: 2px 1px 2px 1px;\n  background: #FFFFFF;\n  top: 0;\n  bottom: 0;\n  right: 14px;\n  border: 1px solid #999999;\n  border-radius: 20px;\n  transition: all 0.3s ease-in 0s;\n}\n.jw-switch-checkbox:checked + .jw-switch-label .jw-switch-inner {\n  margin-left: 0;\n}\n.jw-switch-checkbox:checked + .jw-switch-label .jw-switch-switch {\n  right: 0px;\n}\n.jw-state-idle .jw-preview {\n  display: block;\n}\n.jw-state-idle .jw-icon-display:before {\n  content: "\\E60E";\n}\n.jw-state-idle .jw-controlbar {\n  display: none;\n}\n.jw-state-idle .jw-captions {\n  display: none;\n}\n.jw-state-idle .jw-title {\n  display: block;\n}\n.jwplayer.jw-state-playing .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-state-playing .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-playing .jw-icon-playback:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display {\n  position: relative;\n  left: 0.1em;\n}\n.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-paused .jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display {\n  -webkit-animation: spin 2s linear infinite;\n  -moz-animation: spin 2s linear infinite;\n  animation: spin 2s linear infinite;\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E601";\n}\n@-moz-keyframes spin {\n  100% {\n    -moz-transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@keyframes spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n.jwplayer.jw-state-buffering .jw-display-icon-container .jw-text {\n  display: none;\n}\n.jwplayer.jw-state-buffering .jw-icon-playback:before {\n  content: "\\E60D";\n}\n.jwplayer.jw-state-buffering .jw-preview {\n  display: block;\n  background-image: none !important;\n}\n.jwplayer.jw-state-complete .jw-preview {\n  display: block;\n}\n.jwplayer.jw-state-complete .jw-display-icon-container {\n  z-index: 10;\n}\n.jwplayer.jw-state-complete .jw-display-icon-container .jw-icon-display:before {\n  content: "\\E610";\n}\n.jwplayer.jw-state-complete .jw-display-icon-container .jw-text {\n  display: none;\n}\n.jwplayer.jw-state-complete .jw-icon-playback:before {\n  content: "\\E60E";\n}\n.jwplayer.jw-state-complete .jw-captions {\n  display: none;\n}\nbody .jw-error .jw-title,\n.jwplayer.jw-state-error .jw-title {\n  display: block;\n  z-index: 1;\n  pointer-events: auto;\n}\nbody .jw-error .jw-title .jw-title-primary,\n.jwplayer.jw-state-error .jw-title .jw-title-primary {\n  white-space: normal;\n}\nbody .jw-error .jw-title .jw-title-primary a,\n.jwplayer.jw-state-error .jw-title .jw-title-primary a {\n  cursor: pointer;\n  color: #699f00;\n  pointer-events: auto;\n}\nbody .jw-error .jw-preview,\n.jwplayer.jw-state-error .jw-preview {\n  display: block;\n}\nbody .jw-error .jw-controlbar,\n.jwplayer.jw-state-error .jw-controlbar {\n  display: none;\n}\nbody .jw-error .jw-captions,\n.jwplayer.jw-state-error .jw-captions {\n  display: none;\n}\nbody .jw-error:hover .jw-display-icon-container,\n.jwplayer.jw-state-error:hover .jw-display-icon-container {\n  cursor: default;\n  color: #fff;\n  background: #000;\n}\nbody .jw-error .jw-icon-display,\n.jwplayer.jw-state-error .jw-icon-display,\nbody .jw-error .jw-error-icon-display,\n.jwplayer.jw-state-error .jw-error-icon-display {\n  cursor: default;\n  font-family: \'jw-icons\';\n  -webkit-font-smoothing: antialiased;\n  font-style: normal;\n  font-weight: normal;\n  text-transform: none;\n  background-color: transparent;\n  font-variant: normal;\n  /* Enable Ligatures ================ */\n  -webkit-font-feature-settings: "liga";\n  -moz-font-feature-settings: "liga=1";\n  -moz-font-feature-settings: "liga";\n  -ms-font-feature-settings: "liga" 1;\n  -o-font-feature-settings: "liga";\n  font-feature-settings: "liga";\n  -moz-osx-font-smoothing: grayscale;\n}\nbody .jw-error .jw-icon-display:before,\n.jwplayer.jw-state-error .jw-icon-display:before,\nbody .jw-error .jw-error-icon-display:before,\n.jwplayer.jw-state-error .jw-error-icon-display:before {\n  content: "\\E607";\n}\nbody .jw-error .jw-icon-display:hover,\n.jwplayer.jw-state-error .jw-icon-display:hover,\nbody .jw-error .jw-error-icon-display:hover,\n.jwplayer.jw-state-error .jw-error-icon-display:hover {\n  color: #fff;\n}\nbody .jw-error {\n  font-size: 16px;\n  background-color: #000;\n  color: #eee;\n  width: 100%;\n  height: 100%;\n  display: table;\n  opacity: 1;\n  position: relative;\n}\nbody .jw-error .jw-icon-container,\nbody .jw-error .jw-error-icon-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n.jwplayer.jw-flag-cast-available .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-cast-available .jw-icon-cast {\n  display: inline-block;\n}\n.jwplayer.jw-flag-skin-loading .jw-captions,\n.jwplayer.jw-flag-skin-loading .jw-controls,\n.jwplayer.jw-flag-skin-loading .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1000;\n  margin: 0;\n  position: fixed;\n}\n.jwplayer.jw-flag-fullscreen .rotate-inner {\n  transform: none !important;\n}\n.jwplayer.jw-flag-live .jw-controlbar {\n  border-top: 1px solid #333;\n}\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-split,\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,\n.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time,\n.jwplayer.jw-flag-live .jw-controlbar .jw-icon-playrate {\n  display: none;\n}\n.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt {\n  display: inline;\n}\n.jwplayer.jw-flag-time-shift .jw-controlbar .jw-slider-time {\n  display: inline;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-controlbar,\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-dock {\n  display: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-logo.jw-hide {\n  display: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-plugin,\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-captions {\n  bottom: 0.5em;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-media {\n  cursor: none;\n  -webkit-cursor-visibility: auto-hide;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container {\n  max-height: none;\n}\n.jwplayer.jw-flag-user-inactive.jw-state-buffering .jw-controlbar {\n  display: none;\n}\n.jwplayer.jw-flag-media-audio .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-plugin,\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-captions {\n  bottom: 3em;\n}\n.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-container {\n  max-height: calc(97% - 6.25 * 2em);\n}\n.jw-flag-media-audio .jw-preview {\n  display: block;\n}\n.jwplayer.jw-flag-ads .jw-preview,\n.jwplayer.jw-flag-ads .jw-dock,\n.jwplayer.jw-flag-ads .jw-logo,\n.jwplayer.jw-flag-ads .jw-captions.jw-captions-enabled {\n  display: none;\n}\n.jwplayer.jw-flag-ads video::-webkit-media-text-track-container {\n  display: none;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-text,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-horizontal {\n  display: none;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-playback,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-volume,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-fullscreen {\n  display: inline-block;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt {\n  display: inline;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume.jw-slider-horizontal,\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline.jw-icon-volume {\n  display: inline-block;\n}\n.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip.jw-icon-volume {\n  display: none;\n}\n.jwplayer.jw-flag-ads-googleima .jw-controlbar {\n  display: table;\n  bottom: 0;\n}\n.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar {\n  font-size: 1em;\n}\n.jwplayer.jw-flag-ads-googleima.jw-flag-touch.jw-state-paused .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-flag-ads-googleima.jw-skin-seven .jw-controlbar {\n  font-size: 0.9em;\n}\n.jwplayer.jw-flag-ads-vpaid .jw-controlbar {\n  display: none;\n}\n.jwplayer.jw-flag-ads-hide-controls .jw-controls {\n  display: none !important;\n}\n.jwplayer.jw-flag-ads.jw-flag-touch .jw-controlbar {\n  display: table;\n}\n.jwplayer.jw-flag-overlay-open .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-overlay-open .jw-controls-right .jw-logo {\n  display: none;\n}\n.jwplayer.jw-flag-overlay-open-sharing .jw-controls,\n.jwplayer.jw-flag-overlay-open-related .jw-controls,\n.jwplayer.jw-flag-overlay-open-sharing .jw-title,\n.jwplayer.jw-flag-overlay-open-related .jw-title {\n  display: none;\n}\n.jwplayer.jw-flag-rightclick-open {\n  overflow: visible;\n}\n.jwplayer.jw-flag-rightclick-open .jw-rightclick {\n  z-index: 16777215;\n}\n.jw-flag-controls-disabled .jw-controls {\n  visibility: hidden;\n}\n.jw-flag-controls-disabled .jw-logo {\n  visibility: visible;\n}\n.jw-flag-controls-disabled .jw-media {\n  cursor: auto;\n}\nbody .jwplayer.jw-flag-flash-blocked .jw-title {\n  display: block;\n}\nbody .jwplayer.jw-flag-flash-blocked .jw-controls,\nbody .jwplayer.jw-flag-flash-blocked .jw-overlays,\nbody .jwplayer.jw-flag-flash-blocked .jw-preview {\n  display: none;\n}\n.jw-flag-touch .jw-controlbar,\n.jw-flag-touch .jw-skip,\n.jw-flag-touch .jw-plugin {\n  font-size: 1.5em;\n}\n.jw-flag-touch .jw-captions {\n  bottom: 4.25em;\n}\n.jw-flag-touch video::-webkit-media-text-track-container {\n  max-height: 70%;\n}\n.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before {\n  display: inline;\n}\n.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before {\n  content: "\\E615";\n}\n.jw-flag-touch .jw-display-icon-container {\n  pointer-events: none;\n}\n.jw-flag-touch.jw-state-paused .jw-display-icon-container {\n  display: table;\n}\n.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display-icon-container {\n  display: none;\n}\n.jw-flag-compact-player .jw-text-elapsed,\n.jw-flag-compact-player .jw-text-duration,\n.jw-flag-compact-player .jw-text-split,\n.jw-flag-compact-player .jw-icon-danmu {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player {\n  background-color: transparent;\n}\n.jwplayer.jw-flag-audio-player .jw-media {\n  visibility: hidden;\n}\n.jwplayer.jw-flag-audio-player .jw-media object {\n  width: 1px;\n  height: 1px;\n}\n.jwplayer.jw-flag-audio-player .jw-preview,\n.jwplayer.jw-flag-audio-player .jw-display-icon-container {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar {\n  display: table;\n  height: auto;\n  left: 0;\n  bottom: 0;\n  margin: 0;\n  width: 100%;\n  min-width: 100%;\n  opacity: 1;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-fullscreen,\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal,\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-inline.jw-icon-volume {\n  display: inline-block;\n}\n.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip.jw-icon-volume {\n  display: none;\n}\n.jwplayer.jw-flag-audio-player.jw-flag-user-inactive .jw-controlbar {\n  display: table;\n}\n.jw-ie-poorie.jw-flag-media-audio .jw-preview {\n  display: none;\n}\n.jw-ie-poorie .jw-display-icon-container .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/display_play.png\');\n  width: 56px;\n  height: 56px;\n}\n.jw-ie-poorie.jw-state-idle .jw-icon-display,\n.jw-ie-poorie.jw-state-complete .jw-icon-display {\n  visibility: visible;\n}\n.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media {\n  visibility: visible;\n}\n.jw-ie-poorie.jwplayer.jw-flag-audio-player .jw-media object {\n  width: 100%;\n  height: 100%;\n}\n.background-base {\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-playlist-container .jw-label .jw-icon-play {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/play_small.png\');\n  background-repeat: no-repeat;\n  background-position: left;\n}\n.jw-ie-poorie .jw-controlbar {\n  /*\n        .jw-icon-hd {\n            background-image: url(\'http://cyberplayer.bcelive.com/resource/img/hd.png\');\n            .background-base;\n            // width: 47px;\n            // height: 32px;\n        }\n        */\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-barlogo {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/baiduLogo.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 15px;\n  height: 15px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-barlogo-new {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/bce.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 13px;\n  height: 14px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-playback {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/play.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 15px;\n  height: 15px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-prev {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/prev.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 26px;\n  height: 21px;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-next {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/next.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-playlist {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/playlist.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-knob {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/cue.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 10px;\n  height: 10px;\n  background-color: inherit;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-cc {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/cc.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-volume {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/volume.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controlbar .jw-icon-fullscreen {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/fullscreen.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie .jw-controls-right {\n  display: none;\n}\n.jw-ie-poorie .jw-display-icon-container {\n  text-align: center;\n}\n.jw-ie-poorie.jw-state-playing .jw-icon-playback,\n.jw-ie-poorie.jw-state-buffering .jw-icon-playback {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/pause.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.jw-ie-poorie.jw-state-buffering .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/loading.gif\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 56px;\n  height: 56px;\n}\n.jw-ie-poorie.jw-state-error .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/error.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 36px;\n  height: 32px;\n}\n.jw-ie-poorie.jw-state-complete .jw-icon-display {\n  background-image: url(\'http://cyberplayer.bcelive.com/resource/img/replay.png\');\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 28px;\n  height: 32px;\n}\n.jw-flashui .jw-controlbar {\n  display: none;\n}\n.jw-flashui.jw-state-buffering .jw-display-icon-container {\n  display: none;\n}\n.jw-skin-bce {\n  outline: none;\n  /* Controlbar styles */\n  /* Contains icons, time text, and slider */\n  /* Playlist container - need second background-color declaration to overwrite the .jw-background-color class */\n  /* ul container */\n  /* Playlist title */\n  /* Colors, padding for icons and text */\n  /* Styles for play button on idle */\n  /* Rail/slider styles */\n  /* Timeline and horizontal volume slider */\n  /* Volume slider */\n  /* Volume slider container */\n  /* Color of video\'s duration time */\n  /* Icon borders on the right side of the controlbar */\n  /* Icons, text and container styles for the dock, in the upper right corner */\n  /* Styles for active list items */\n  /* A min-width on the volume icon to keep the width from collapsing on toggle */\n  /* For the overlay containers */\n  /* Position and padding of slider thumbnail */\n  /* Position of remaining overlay containers */\n  /* Skip icon and text styles */\n}\n.jw-skin-bce .jw-background-color {\n  background: #000;\n}\n.jw-skin-bce .jw-controlbar {\n  border: none;\n  height: 2.5em;\n}\n.jw-skin-bce .jw-group {\n  vertical-align: middle;\n}\n.jw-skin-bce .jw-playlist {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.jw-skin-bce .jw-playlist-container {\n  left: -43%;\n  background-color: rgba(0, 0, 0, 0.5);\n  /* li list option */\n  /* play icon is always active */\n}\n.jw-skin-bce .jw-playlist-container .jw-option {\n  border-bottom: 1px solid #444;\n  /* Playlist items are black when active, or hovered */\n  /* Number color when li is hovered */\n}\n.jw-skin-bce .jw-playlist-container .jw-option:hover,\n.jw-skin-bce .jw-playlist-container .jw-option.jw-active-option {\n  background-color: black;\n}\n.jw-skin-bce .jw-playlist-container .jw-option:hover .jw-label {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-playlist-container .jw-icon-playlist {\n  margin-left: 0;\n}\n.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-playlist-container .jw-label .jw-icon-play:before {\n  padding-left: 0;\n}\n.jw-skin-bce .jw-icon-playlist .jw-overlay {\n  z-index: 100;\n  bottom: 1.6em;\n}\n.jw-skin-bce .jw-tooltip-title {\n  background-color: #000;\n  color: #fff;\n}\n.jw-skin-bce .jw-text {\n  color: #fff;\n}\n.jw-skin-bce .jw-button-color {\n  color: #fff;\n}\n.jw-skin-bce .jw-button-color:hover {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-toggle {\n  color: #108CEE;\n}\n.jw-skin-bce .jw-toggle.jw-off {\n  color: #fff;\n}\n.jw-skin-bce .jw-controlbar .jw-icon:before,\n.jw-skin-bce .jw-text-elapsed,\n.jw-skin-bce .jw-text-duration {\n  padding: 0 0.7em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-barlogo-new:before {\n  padding: 0;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-prev:before {\n  padding-right: 0.25em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-playlist:before {\n  padding: 0 0.45em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-next:before {\n  padding-left: 0.25em;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd:before {\n  content: none;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label {\n  color: #000;\n  background: #FFF;\n  padding: 0 4px;\n  border-radius: 2px;\n  margin: 0 0.7em;\n  margin-top: 1px;\n}\n.jw-skin-bce .jw-controlbar .jw-icon-hd .jw-hd-label:hover {\n  background: #108CEE;\n}\n.jw-skin-bce .jw-icon-prev,\n.jw-skin-bce .jw-icon-next {\n  font-size: 0.7em;\n}\n.jw-skin-bce .jw-icon-prev:before {\n  border-left: 1px solid #666;\n}\n.jw-skin-bce .jw-icon-next:before {\n  border-right: 1px solid #666;\n}\n.jw-skin-bce .jw-icon-display {\n  color: #fff;\n}\n.jw-skin-bce .jw-icon-display:before {\n  padding-left: 0;\n}\n.jw-skin-bce .jw-display-icon-container,\n.jw-skin-bce .jw-error-display-icon-container {\n  border-radius: 50%;\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-rail {\n  background-color: #333;\n  box-shadow: none;\n  opacity: 0.5;\n}\n.jw-skin-bce .jw-buffer {\n  background-color: #666F82;\n  opacity: 0.5;\n}\n.jw-skin-bce .jw-progress {\n  background: #108CEE;\n  opacity: 0.3;\n}\n.jw-skin-bce .jw-knob {\n  width: 0.6em;\n  height: 0.6em;\n  background-color: #fff;\n  border-radius: 1em;\n  display: none;\n}\n.jw-skin-bce .jw-slider-volume .jw-knob {\n  display: inline-block;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-slider-container {\n  position: relative;\n  height: 0.95em;\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-rail,\n.jw-skin-bce .jw-slider-horizontal .jw-buffer,\n.jw-skin-bce .jw-slider-horizontal .jw-progress {\n  height: 0.2em;\n  top: 5px;\n  border-radius: 0;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-knob {\n  top: -0.2em;\n  top: 0;\n}\n.jw-skin-bce .jw-slider-horizontal .jw-cue {\n  top: 0.2em;\n  width: 0.4em;\n  height: 0.4em;\n  background-color: #fff;\n  border-radius: 50%;\n  margin-left: -0.325em;\n}\n.jw-skin-bce .jw-slider-vertical .jw-rail,\n.jw-skin-bce .jw-slider-vertical .jw-buffer,\n.jw-skin-bce .jw-slider-vertical .jw-progress {\n  width: 0.2em;\n}\n.jw-skin-bce .jw-slider-vertical .jw-knob {\n  margin-bottom: -0.3em;\n}\n.jw-skin-bce .jw-volume-tip {\n  width: 100%;\n  left: -45%;\n  padding-bottom: 0.7em;\n}\n.jw-skin-bce .jw-text-duration {\n  color: #666F82;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-inline:first-child:before {\n  border: none;\n}\n.jw-skin-bce .jw-dock .jw-dock-button {\n  border-radius: 50%;\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-dock .jw-overlay {\n  border-radius: 2.5em;\n}\n.jw-skin-bce .jw-icon-tooltip .jw-active-option {\n  background-color: #108CEE;\n  color: #fff;\n}\n.jw-skin-bce .jw-time-tip,\n.jw-skin-bce .jw-menu,\n.jw-skin-bce .jw-volume-tip,\n.jw-skin-bce .jw-skip {\n  border: 1px solid #333;\n}\n.jw-skin-bce .jw-time-tip {\n  padding: 0.2em;\n  bottom: -18px;\n}\n.jw-skin-bce .jw-menu,\n.jw-skin-bce .jw-volume-tip {\n  bottom: 0.24em;\n}\n.jw-skin-bce .jw-skip {\n  padding: 0.4em;\n  border-radius: 1.75em;\n}\n.jw-skin-bce .jw-skip .jw-text,\n.jw-skin-bce .jw-skip .jw-icon-inline {\n  color: #fff;\n  line-height: 1.75em;\n}\n.jw-skin-bce .jw-skip.jw-skippable:hover .jw-text,\n.jw-skin-bce .jw-skip.jw-skippable:hover .jw-icon-inline {\n  color: #108CEE;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon:before,\n.jw-skin-bce.jw-flag-touch .jw-text-elapsed,\n.jw-skin-bce.jw-flag-touch .jw-text-duration {\n  padding: 0 0.35em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-prev:before {\n  padding: 0 0.125em 0 0.7em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-next:before {\n  padding: 0 0.7em 0 0.125em;\n}\n.jw-skin-bce.jw-flag-touch .jw-controlbar .jw-icon-playlist:before {\n  padding: 0 0.225em;\n}\n.jw-skin-bce .jw-slider-time {\n  background: 0 0;\n  position: absolute;\n  top: -8px;\n  height: 8px;\n  line-height: 1em;\n}\n.jw-skin-bce .jw-slider-time .jw-slider-container {\n  height: 8px;\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-knob {\n  display: block;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container {\n  vertical-align: top;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-rail,\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-buffer,\n.jw-skin-bce .jw-slider-time:hover .jw-slider-container .jw-progress {\n  height: 0.6em;\n  border-radius: 0;\n  top: 0;\n}\n.jw-skin-bce .jw-slider-time:hover .jw-cue {\n  top: 0;\n  width: 0.6em;\n  height: 0.6em;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-elapsed {\n  padding-right: 0;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-split {\n  padding: 0 2px;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-left-group .jw-text-duration {\n  padding-left: 0;\n  color: #FFF;\n  cursor: default;\n}\n.jw-skin-bce .jw-controlbar-center-group .jw-tooltip-time {\n  top: -7px;\n  height: 1em;\n  transform: translate(-10px);\n}\n.jw-skin-bce .jw-controlbar-center-group .jw-overlay {\n  z-index: 100;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate {\n  height: 24px;\n  line-height: 24px;\n  margin-top: -2px;\n}\n.jw-skin-bce .jw-controlbar-right-group .jw-icon-playrate .jw-playrate-label {\n  border: 1px solid #333;\n  line-height: 24px;\n  height: 24px;\n  vertical-align: bottom;\n}\n.jw-skin-bce .jw-media {\n  width: 100%;\n  height: 100%;\n}\n.jw-skin-bce .jw-icon-danmu {\n  position: relative;\n  z-index: 11;\n}\n.jw-skin-bce .jw-icon-danmu .jw-overlay {\n  background-color: #000c;\n  box-shadow: 0 1px 15px #0b122342;\n  position: relative;\n  position: absolute;\n  width: 300px;\n  height: 210px;\n  z-index: 1;\n  left: -250px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-title {\n  padding: 15px 10px 0px 10px;\n  display: flex;\n  justify-content: space-between;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-title div {\n  color: #fff;\n  font-size: 15px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-background-color {\n  background-color: transparent;\n}\n.jw-skin-bce .jw-icon-danmu .jw-progress {\n  background-color: #0d5de7;\n  opacity: 1;\n}\n.jw-skin-bce .jw-icon-danmu .jw-knob {\n  display: inline-block;\n  position: absolute;\n  top: 2px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-overlay:before {\n  right: 0px !important;\n  left: initial !important;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container {\n  height: 35px;\n  line-height: 35px;\n  padding: 10px;\n  position: relative;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-slider-horizontal {\n  width: 170px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-left {\n  margin-right: 8px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-left,\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-right {\n  color: #fff;\n  display: inline-block;\n  font-size: 13px;\n}\n.jw-skin-bce .jw-icon-danmu .jw-danmu-container .jw-danmu-slider-right {\n  position: absolute;\n  right: 10px;\n}\n',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(n[a]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},function(e,t){e.exports="data:application/font-woff;base64,d09GRgABAAAAACFsAAoAAAAAISQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAAA9AAAAGAAAABgPJRctWNtYXAAAAFUAAABSgAAAUrmWOe1Z2x5ZgAAAqAAABpgAAAaYHAJo79oZWFkAAAdAAAAADYAAAA2L+w/EWhoZWEAAB04AAAAJAAAACQJZQU1aG10eAAAHVwAAACGAAAAhpbECERsb2NhAAAd5AAAAEYAAABGdLJtIG1heHAAAB4sAAAAIAAAACAAMwFxbmFtZQAAHkwAAAGtAAABrRlSpcxwb3N0AAAf/AAAAW4AAAFumY/zTQAEBI4BkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAgAGAwAAAAAAAAAAAAEQAAAAAAAAAAAAAABQZkVkAMDmAeYjAyz/LABcAywA1AAAAAEAAAAAAxgAAAAAACAAAQAAAAMAAAADAAAAHAABAAAAAABEAAMAAQAAABwABAAoAAAABgAEAAEAAuYh5iP//wAA5gHmI///GgAZ3QABAAAAAAAAAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAZwBeA5MCzAAOAAAlLgEnIREhFS4BJzUhESEB4gIEAwGJ/TYJIAgDLP5PXggeCAIQ0QIHAvb9kgAAAAEAaf+8A5IC5QAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxrTRce0ZFe1w0RD9ulFNUlG4/P26UVEZ7XDQBUUZ7XDQ0XHtGVJRuPz9ulFRTlG4/RDRce0UAAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQ///A6ADfgCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAID/mAOAAyAABAAJAAAFESERIQEhESERAoABAP8A/gABAP8AaAOA/IADiPyAA4AAAAAAAQBA/34DwAL+AAMAAAkBEQEDwPyAA4ABPv5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAEIAAgO+A34AIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIACP++AGYCmgOXACkAUAB/AK8BKgE8AVkBcAAAEg4BIg4EFB4IPgouCSImEz4BNz4BNz4BNz4BNz4BJy4CNDUuAQcOAQcOAQcGFBUUFhceARcFJhYnLgEnJgYnLgEjJgYHIiYHDgEHFBYOAQcOAQcOAhQOAQcGFhceARc3PgE3IS4CNDUuAScqAScGNgcOAQcOAhQHDgEXHgEXHgEXMz4BNz4BNzY0PgI0PgE3JAYiBiIOBxQOFRQGFB4KMj4FMh4DMh4CMj4PNC4NIi4VIiYDDgEHBhYHDgEVBjIXHgEXNycXByMuAScuAS8BPgE3PgM3PgE3PgEzPgE/ATMXHgEXMz8BHwEHIyYWJyYiIy4BJzU3M8oGCQYYDQwHAgQDAhMPBwcFGwUNEwQFEwEEAgQCAgQCBQUCBQIIGAcI4hADAQYKBQcBBQEDAQ0NAgEDAgs5HwQbGwUKBAESEwQOBv7iCgoHBx0OCQMIAwUCCQcKAQQCCxYFAQIEAQICAQIDAQIDAQIPEAkSCjEUIQ0CJQYDAgYgDgMIHC0XCg4GCQEDAQEKAQEEAQUIERs2BwwHBQwCAQEEAQIDBv6DDwgLBQUGBQUJBgYODAUHJgkMCQgHBQYRCQQGBRAIBQEHBQUFAgMCBgoZDAMMFVYKBx0JFgw+DgoVCAkFGglCEgcPBQkMBQkEBQUIBQUBBQUBBQIGBBAJBQYKCgkFAw8nBQoGCAUFCQQFBwwGBAMNBAYFCAYJDIwHCgUHAgIBBAMDBAMJDjcBQAKHCxgJBAsIAQILEQMEBQgDAQECAwYDEiQSBDpUAwIHNwEDOwECkAkKCwIEAQ4KBwM6A5cBBhIQGRgYGB8ICiIPBQIFAgIBDAUDHgYFEAYwHQYODQYFBAcJEgX+/gYDAQMIAwYFCQEBAhM3GAIFBgUCHS8JAhQgCxcMCxULGCkPAwUCFQ4OFBEgCwcDAQEDAgQDAQEEFQsBAgMEAgUKBQMEBgcHCAQaNhUJCwcCCRsvGwIDBQIPIAUFBwMGBwoMAQEEBQIdLSUIEQgLEQoEBAQDDgQCAwQBAwUEBCE+BQUGAQUBBwUKDgQSBA0sBg8FBgsBBQ4KAgYIDxEFBwkRCQ4bDxAICg4RGwUFBAkBBAEFAgUBBgEFAQcEAgMCBQEMAQgGBwQUDgcPDDAKDQYIDQUVBQYHBQ0FBw8pCQgHDgYEEAYDDwkHAwcGBQIFAQQE/vYDAwUIAwoDBQQNBw4PBgFikwIGCgsFERY2CRoQAwYFAgICAwEBAQEDAUfXBwEFkwMCxAICAgYBCQ8MmgMAAAMAsgB+A04DawANABsALAAAATU0LwERFBcFNTQvASYFBwYdASU2NREHBh0BFAMnJgcFFxY/ATY3Nh8BFj8BATsnYQwBKiZ8DAF+fCYBKgxhJzZ9DAz+1GEnJn4CAwoJfScmYgGLjSwWN/6tDgeqbywWRwcHRxYsb6oHDgFTNxYsjQ0Bn0cHB6s4FhZIAQEDBUgWFjgAAAAABABA/5QE4gO4AAcADAAUABkAABcmJzY3FhcGJRY3NgEDJic2NxYXBgEAFxY38qMPD6OjDw/+335+PALBPaIPD6KjDw/75AK+PX5+OA+kog8PoqQlaGg7A4H8EA+kog8PoqQD4fx+OmhoAAAACgAN/zQGHAMkACoALgAyADYAOgA+AEIAUQBhAHgAAAUyFhcOASMhLgEnET4BNyEWFxYXFQYHBgcmJyY9ASYnJichBgcGBxEeARcBMzUjFyE1IQEzNSMXITUhEyE1IQczNSMlFhcWFw4BByYnJic2NzYTNjc2NyYnJicGBwYHFhcWExYVFA8BBiMiLwEmNTQ3NjMyHwE3NjIDYhIVAQEVEv1iS2kDA2lLA7pLNDUCAQoLERIKCgIfHyn8RiseHwEBPSsBG01NmwE2/sr+fE1NnAE1/suaATb+yppNTQNoelNSAwOlentSUwMDU1J7WT09AgI9PVlaPTwDAzw9/AwMog0PDwtuCwsNDw8MUYgNHjEVERMVA2lLAjZLaQICNTRLMhILCgEBCgsSMiofHgICHh8q/corPAICH05OTv7wTU1N/vFNTU3CA1JTenulAwNTUnt6U1L+CwM9PFpaPD0CAj08Wlo8PQEsDBAPC6QLC24LDw8NCwtSiAwAAAAKAA3/NAYcAyQAKgAuADIANgA6AD4AQgBRAF4AawAABTIWFw4BIyEuAScRPgE3IRYXFhcVBgcGByYnJj0BJicmJyEGBwYHER4BFwEzNSMXITUhATM1IxchNSERMzUjFyE1ISUWFxYXDgEHJicmJzY3NhMyNzY3AQYHBhUWFxY3Njc2NSYnJiciBwYHA2ISFQEBFRL9YktpAwNpSwO6SzQ1AgEKCxESCgoCHx8p/EYrHh8BAT0rARtNTZsBNv7K/nxNTZwBNf7LTU2aATb+ygLOelNSAwOlentSUwMDU1J7HRoaF/7dDAcIAzw9/BgODQI9PVknIiIdMRURExUDaUsCNktpAgI1NEsyEgsKAQEKCxIyKh8eAgIeHyr9yis8AgIfTk5O/vBNTU3+8U1NTcIDUlN6e6UDA1NSe3pTUv4LCAcNASMYGhodWjw9SxsjIydaPD0CDQ4YAAIAEv80BHIDJAAVACkAAAEyFxYXESMRIREhFSEiJyYnETY3NjMBMhcWFxEGBwYjISInJjURNDc2MwQ5GBAQAXD8gAFQ/ncXDxABARAPFwPwGBAQAQEQEBj+QhgSDw8SGAMkEBEX/ngBT/zxcBARFwOAFxEQ/dAQEBj+sBcREBARFwFQGBAQAAABABEAOAL9AyQALgAACQEWFRQHBgcGIyImJwkBBgcGIyInJicmNTQ3CQEmNTQ3NjMyFwkBNjMyFxYVFAcBvAE1CwsGBgcIBw0F/sr+ygYIBQgHBgcGCwsBNv7KCwsMDhALATYBNgsQDgwLCwGv/skLEA4LBgIEBgYBNv7KBgIEBAIGCw4QCwE2ATYMDw4MCwv+ygE2CwsLDw8KAAACABD/NAPYAzIACwA0AAABFhcVBgchJic1NjcDNDM3NhcWDwE3NhcWFxYXFgcGJyY3NicmJyYnJgcjBxcWBwYvASYnNgJMgw0Ng/5TgwwMgxABoiEjHRtXwXptbkVFDAsxFSolDScJCTg3V1hiArdWHRohI60QAQEBQQyD74INDYLvgwwBJAGvHRohI14BBDg3ZmZ6enAnDhUqWmJhUlAtLQMBUSEjHRuhDhcTAAAAAAIAKv80A6oDMgALADQAAAEWFxUGByEmJzU2NwAXBg8BBicmPwEnIyYHBgcGBwYXFgcGJyY3Njc2NzYfAScmNzYfATIVAxqDDQ2D/lODDAyDAhEBARCtIyEaHVa3AmJYVzc4CQknDSUqFTELDEVFbm16wVcbHSMhogEBQQyD74INDYLvgwwBGBMXDqEbHSMhUQEDLS1QUmFiWioVDidwenpmZjc4BAFeIyEaHa8BAAAAEAAU/zQEHgMkAAMABwALAA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUBESMRBSURJQURBREUAZ7+jAFL/uQTAY4WFhYWFhYWFhYWFhYWFhYWFhYWAaMV/s8Bnf5jAXT+tcwD8JP9NgMJ/LhqAnT9TAL0/QwDEUxMZExMZExMZExMaU1NY0xMZUxMZExMYUxMZExMA2n9DAL0FZP8EJM/A0hq/YoAAA4AFP8wBBQDJAADAAcACwAPABMAFwAbAB8AIwAnACsALwAzADcAABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUTJRElFAGe/owBS/7kEwGOFhYWFhYWFhYWFhYWFhYWFhYWFlMBnf5jzAPwk/02Awn8uGoCdP1MAvT9DAMRTExkTExkTExkTExpTU1jTExlTExkTExhTExkTEwDUJP8EJMAAQAAAAEAAI/vQAJfDzz1CAsEAAAAAADheX2WAAAAAOF5fZb/vv8wBhwDuAAAAAgAAgAAAAAAAAABAAADLP8sAFwGLP++/7sGHAABAAAAAAAAAAAAAAAAAAAAIQQAAGcD5gBpBQAAQAUAAEAGAABABgAAQAQAAOAEgABABAAAQAYAAEAGAAA9A+AAQwSAAEYEAACABAAAQASAAEoDgABDBMAAQATAAEAEAABABgAAQAQAAEIEAABEAlX/vgQAALIFIgBABiwADQYsAA0EggASBBoAEQPoABAD6AAqBC4AFAAUAAAAAAAeAE4AmgD2AhwDSANqA54DwAQ6BLwFfgWWBbAFwAXYBhYGKAaKBqwG5gccB04JNgmCCbgKdgsiC2YLtAwMDGQM0g0wAAAAAQAAACIBcQAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAlgABAAAAAAABAAoAAAABAAAAAAACAAYACgABAAAAAAADABsAEAABAAAAAAAEAAoAKwABAAAAAAAFAB4ANQABAAAAAAAGAAoAUwADAAEECQABABQAXQADAAEECQACAAwAcQADAAEECQADADYAfQADAAEECQAEABQAswADAAEECQAFADwAxwADAAEECQAGABQBA2ZvbnRlZGl0b3JNZWRpdW1Gb250RWRpdG9yIDEuMCA6IGZvbnRlZGl0b3Jmb250ZWRpdG9yVmVyc2lvbiAxLjA7IEZvbnRFZGl0b3IgKHYxLjApZm9udGVkaXRvcgBmAG8AbgB0AGUAZABpAHQAbwByAE0AZQBkAGkAdQBtAEYAbwBuAHQARQBkAGkAdABvAHIAIAAxAC4AMAAgADoAIABmAG8AbgB0AGUAZABpAHQAbwByAGYAbwBuAHQAZQBkAGkAdABvAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADsAIABGAG8AbgB0AEUAZABpAHQAbwByACAAKAB2ADEALgAwACkAZgBvAG4AdABlAGQAaQB0AG8AcgAAAAACAAAAAAAAADIAAAAAAAAAAAAAAAAAAAAAAAAAAAAiACIAAAECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEgASEBIgd1bmlFNjAxB3VuaUU2MDIHdW5pRTYwMwd1bmlFNjA0B3VuaUU2MDUHdW5pRTYwNgd1bmlFNjA3B3VuaUU2MDgHdW5pRTYwOQd1bmlFNjBBB3VuaUU2MEIHdW5pRTYwQwd1bmlFNjBEB3VuaUU2MEUHdW5pRTYwRgd1bmlFNjEwB3VuaUU2MTEHdW5pRTYxMgd1bmlFNjEzB3VuaUU2MTQHdW5pRTYxNQd1bmlFNjE2B3VuaUU2MTcHdW5pRTYxOAd1bmlFNjE5B3VuaUU2MUEHdW5pRTYxQgd1bmlFNjFDB3VuaUU2MUQHdW5pRTYxRQd1bmlFNjFGB3VuaUU2MjAHdW5pRTYyMQAA"},function(e,t){e.exports="data:application/octet-stream;base64,AAEAAAAKAIAAAwAgT1MvMjyUXLUAAACsAAAAYGNtYXDmWOe1AAABDAAAAUpnbHlmcAmjvwAAAlgAABpgaGVhZC/sPxEAABy4AAAANmhoZWEJZQU1AAAc8AAAACRobXR4lsQIRAAAHRQAAACGbG9jYXSybSAAAB2cAAAARm1heHAAMwFxAAAd5AAAACBuYW1lGVKlzAAAHgQAAAGtcG9zdJmP800AAB+0AAABbgAEBI4BkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAgAGAwAAAAAAAAAAAAEQAAAAAAAAAAAAAABQZkVkAMDmAeYjAyz/LABcAywA1AAAAAEAAAAAAxgAAAAAACAAAQAAAAMAAAADAAAAHAABAAAAAABEAAMAAQAAABwABAAoAAAABgAEAAEAAuYh5iP//wAA5gHmI///GgAZ3QABAAAAAAAAAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAZwBeA5MCzAAOAAAlLgEnIREhFS4BJzUhESEB4gIEAwGJ/TYJIAgDLP5PXggeCAIQ0QIHAvb9kgAAAAEAaf+8A5IC5QAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxrTRce0ZFe1w0RD9ulFNUlG4/P26UVEZ7XDQBUUZ7XDQ0XHtGVJRuPz9ulFRTlG4/RDRce0UAAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQ///A6ADfgCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAID/mAOAAyAABAAJAAAFESERIQEhESERAoABAP8A/gABAP8AaAOA/IADiPyAA4AAAAAAAQBA/34DwAL+AAMAAAkBEQEDwPyAA4ABPv5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAEIAAgO+A34AIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIACP++AGYCmgOXACkAUAB/AK8BKgE8AVkBcAAAEg4BIg4EFB4IPgouCSImEz4BNz4BNz4BNz4BNz4BJy4CNDUuAQcOAQcOAQcGFBUUFhceARcFJhYnLgEnJgYnLgEjJgYHIiYHDgEHFBYOAQcOAQcOAhQOAQcGFhceARc3PgE3IS4CNDUuAScqAScGNgcOAQcOAhQHDgEXHgEXHgEXMz4BNz4BNzY0PgI0PgE3JAYiBiIOBxQOFRQGFB4KMj4FMh4DMh4CMj4PNC4NIi4VIiYDDgEHBhYHDgEVBjIXHgEXNycXByMuAScuAS8BPgE3PgM3PgE3PgEzPgE/ATMXHgEXMz8BHwEHIyYWJyYiIy4BJzU3M8oGCQYYDQwHAgQDAhMPBwcFGwUNEwQFEwEEAgQCAgQCBQUCBQIIGAcI4hADAQYKBQcBBQEDAQ0NAgEDAgs5HwQbGwUKBAESEwQOBv7iCgoHBx0OCQMIAwUCCQcKAQQCCxYFAQIEAQICAQIDAQIDAQIPEAkSCjEUIQ0CJQYDAgYgDgMIHC0XCg4GCQEDAQEKAQEEAQUIERs2BwwHBQwCAQEEAQIDBv6DDwgLBQUGBQUJBgYODAUHJgkMCQgHBQYRCQQGBRAIBQEHBQUFAgMCBgoZDAMMFVYKBx0JFgw+DgoVCAkFGglCEgcPBQkMBQkEBQUIBQUBBQUBBQIGBBAJBQYKCgkFAw8nBQoGCAUFCQQFBwwGBAMNBAYFCAYJDIwHCgUHAgIBBAMDBAMJDjcBQAKHCxgJBAsIAQILEQMEBQgDAQECAwYDEiQSBDpUAwIHNwEDOwECkAkKCwIEAQ4KBwM6A5cBBhIQGRgYGB8ICiIPBQIFAgIBDAUDHgYFEAYwHQYODQYFBAcJEgX+/gYDAQMIAwYFCQEBAhM3GAIFBgUCHS8JAhQgCxcMCxULGCkPAwUCFQ4OFBEgCwcDAQEDAgQDAQEEFQsBAgMEAgUKBQMEBgcHCAQaNhUJCwcCCRsvGwIDBQIPIAUFBwMGBwoMAQEEBQIdLSUIEQgLEQoEBAQDDgQCAwQBAwUEBCE+BQUGAQUBBwUKDgQSBA0sBg8FBgsBBQ4KAgYIDxEFBwkRCQ4bDxAICg4RGwUFBAkBBAEFAgUBBgEFAQcEAgMCBQEMAQgGBwQUDgcPDDAKDQYIDQUVBQYHBQ0FBw8pCQgHDgYEEAYDDwkHAwcGBQIFAQQE/vYDAwUIAwoDBQQNBw4PBgFikwIGCgsFERY2CRoQAwYFAgICAwEBAQEDAUfXBwEFkwMCxAICAgYBCQ8MmgMAAAMAsgB+A04DawANABsALAAAATU0LwERFBcFNTQvASYFBwYdASU2NREHBh0BFAMnJgcFFxY/ATY3Nh8BFj8BATsnYQwBKiZ8DAF+fCYBKgxhJzZ9DAz+1GEnJn4CAwoJfScmYgGLjSwWN/6tDgeqbywWRwcHRxYsb6oHDgFTNxYsjQ0Bn0cHB6s4FhZIAQEDBUgWFjgAAAAABABA/5QE4gO4AAcADAAUABkAABcmJzY3FhcGJRY3NgEDJic2NxYXBgEAFxY38qMPD6OjDw/+335+PALBPaIPD6KjDw/75AK+PX5+OA+kog8PoqQlaGg7A4H8EA+kog8PoqQD4fx+OmhoAAAACgAN/zQGHAMkACoALgAyADYAOgA+AEIAUQBhAHgAAAUyFhcOASMhLgEnET4BNyEWFxYXFQYHBgcmJyY9ASYnJichBgcGBxEeARcBMzUjFyE1IQEzNSMXITUhEyE1IQczNSMlFhcWFw4BByYnJic2NzYTNjc2NyYnJicGBwYHFhcWExYVFA8BBiMiLwEmNTQ3NjMyHwE3NjIDYhIVAQEVEv1iS2kDA2lLA7pLNDUCAQoLERIKCgIfHyn8RiseHwEBPSsBG01NmwE2/sr+fE1NnAE1/suaATb+yppNTQNoelNSAwOlentSUwMDU1J7WT09AgI9PVlaPTwDAzw9/AwMog0PDwtuCwsNDw8MUYgNHjEVERMVA2lLAjZLaQICNTRLMhILCgEBCgsSMiofHgICHh8q/corPAICH05OTv7wTU1N/vFNTU3CA1JTenulAwNTUnt6U1L+CwM9PFpaPD0CAj08Wlo8PQEsDBAPC6QLC24LDw8NCwtSiAwAAAAKAA3/NAYcAyQAKgAuADIANgA6AD4AQgBRAF4AawAABTIWFw4BIyEuAScRPgE3IRYXFhcVBgcGByYnJj0BJicmJyEGBwYHER4BFwEzNSMXITUhATM1IxchNSERMzUjFyE1ISUWFxYXDgEHJicmJzY3NhMyNzY3AQYHBhUWFxY3Njc2NSYnJiciBwYHA2ISFQEBFRL9YktpAwNpSwO6SzQ1AgEKCxESCgoCHx8p/EYrHh8BAT0rARtNTZsBNv7K/nxNTZwBNf7LTU2aATb+ygLOelNSAwOlentSUwMDU1J7HRoaF/7dDAcIAzw9/BgODQI9PVknIiIdMRURExUDaUsCNktpAgI1NEsyEgsKAQEKCxIyKh8eAgIeHyr9yis8AgIfTk5O/vBNTU3+8U1NTcIDUlN6e6UDA1NSe3pTUv4LCAcNASMYGhodWjw9SxsjIydaPD0CDQ4YAAIAEv80BHIDJAAVACkAAAEyFxYXESMRIREhFSEiJyYnETY3NjMBMhcWFxEGBwYjISInJjURNDc2MwQ5GBAQAXD8gAFQ/ncXDxABARAPFwPwGBAQAQEQEBj+QhgSDw8SGAMkEBEX/ngBT/zxcBARFwOAFxEQ/dAQEBj+sBcREBARFwFQGBAQAAABABEAOAL9AyQALgAACQEWFRQHBgcGIyImJwkBBgcGIyInJicmNTQ3CQEmNTQ3NjMyFwkBNjMyFxYVFAcBvAE1CwsGBgcIBw0F/sr+ygYIBQgHBgcGCwsBNv7KCwsMDhALATYBNgsQDgwLCwGv/skLEA4LBgIEBgYBNv7KBgIEBAIGCw4QCwE2ATYMDw4MCwv+ygE2CwsLDw8KAAACABD/NAPYAzIACwA0AAABFhcVBgchJic1NjcDNDM3NhcWDwE3NhcWFxYXFgcGJyY3NicmJyYnJgcjBxcWBwYvASYnNgJMgw0Ng/5TgwwMgxABoiEjHRtXwXptbkVFDAsxFSolDScJCTg3V1hiArdWHRohI60QAQEBQQyD74INDYLvgwwBJAGvHRohI14BBDg3ZmZ6enAnDhUqWmJhUlAtLQMBUSEjHRuhDhcTAAAAAAIAKv80A6oDMgALADQAAAEWFxUGByEmJzU2NwAXBg8BBicmPwEnIyYHBgcGBwYXFgcGJyY3Njc2NzYfAScmNzYfATIVAxqDDQ2D/lODDAyDAhEBARCtIyEaHVa3AmJYVzc4CQknDSUqFTELDEVFbm16wVcbHSMhogEBQQyD74INDYLvgwwBGBMXDqEbHSMhUQEDLS1QUmFiWioVDidwenpmZjc4BAFeIyEaHa8BAAAAEAAU/zQEHgMkAAMABwALAA8AEwAXABsAHwAjACcAKwAvADMANwA7AD8AABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUBESMRBSURJQURBREUAZ7+jAFL/uQTAY4WFhYWFhYWFhYWFhYWFhYWFhYWAaMV/s8Bnf5jAXT+tcwD8JP9NgMJ/LhqAnT9TAL0/QwDEUxMZExMZExMZExMaU1NY0xMZUxMZExMYUxMZExMA2n9DAL0FZP8EJM/A0hq/YoAAA4AFP8wBBQDJAADAAcACwAPABMAFwAbAB8AIwAnACsALwAzADcAABcRBREBESURAREzEQE1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUHNTMVBzUzFQc1MxUTJRElFAGe/owBS/7kEwGOFhYWFhYWFhYWFhYWFhYWFhYWFlMBnf5jzAPwk/02Awn8uGoCdP1MAvT9DAMRTExkTExkTExkTExpTU1jTExlTExkTExhTExkTEwDUJP8EJMAAQAAAAEAAI/vQAJfDzz1CAsEAAAAAADheX2WAAAAAOF5fZb/vv8wBhwDuAAAAAgAAgAAAAAAAAABAAADLP8sAFwGLP++/7sGHAABAAAAAAAAAAAAAAAAAAAAIQQAAGcD5gBpBQAAQAUAAEAGAABABgAAQAQAAOAEgABABAAAQAYAAEAGAAA9A+AAQwSAAEYEAACABAAAQASAAEoDgABDBMAAQATAAEAEAABABgAAQAQAAEIEAABEAlX/vgQAALIFIgBABiwADQYsAA0EggASBBoAEQPoABAD6AAqBC4AFAAUAAAAAAAeAE4AmgD2AhwDSANqA54DwAQ6BLwFfgWWBbAFwAXYBhYGKAaKBqwG5gccB04JNgmCCbgKdgsiC2YLtAwMDGQM0g0wAAAAAQAAACIBcQAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAlgABAAAAAAABAAoAAAABAAAAAAACAAYACgABAAAAAAADABsAEAABAAAAAAAEAAoAKwABAAAAAAAFAB4ANQABAAAAAAAGAAoAUwADAAEECQABABQAXQADAAEECQACAAwAcQADAAEECQADADYAfQADAAEECQAEABQAswADAAEECQAFADwAxwADAAEECQAGABQBA2ZvbnRlZGl0b3JNZWRpdW1Gb250RWRpdG9yIDEuMCA6IGZvbnRlZGl0b3Jmb250ZWRpdG9yVmVyc2lvbiAxLjA7IEZvbnRFZGl0b3IgKHYxLjApZm9udGVkaXRvcgBmAG8AbgB0AGUAZABpAHQAbwByAE0AZQBkAGkAdQBtAEYAbwBuAHQARQBkAGkAdABvAHIAIAAxAC4AMAAgADoAIABmAG8AbgB0AGUAZABpAHQAbwByAGYAbwBuAHQAZQBkAGkAdABvAHIAVgBlAHIAcwBpAG8AbgAgADEALgAwADsAIABGAG8AbgB0AEUAZABpAHQAbwByACAAKAB2ADEALgAwACkAZgBvAG4AdABlAGQAaQB0AG8AcgAAAAACAAAAAAAAADIAAAAAAAAAAAAAAAAAAAAAAAAAAAAiACIAAAECAQMBBAEFAQYBBwEIAQkBCgELAQwBDQEOAQ8BEAERARIBEwEUARUBFgEXARgBGQEaARsBHAEdAR4BHwEgASEBIgd1bmlFNjAxB3VuaUU2MDIHdW5pRTYwMwd1bmlFNjA0B3VuaUU2MDUHdW5pRTYwNgd1bmlFNjA3B3VuaUU2MDgHdW5pRTYwOQd1bmlFNjBBB3VuaUU2MEIHdW5pRTYwQwd1bmlFNjBEB3VuaUU2MEUHdW5pRTYwRgd1bmlFNjEwB3VuaUU2MTEHdW5pRTYxMgd1bmlFNjEzB3VuaUU2MTQHdW5pRTYxNQd1bmlFNjE2B3VuaUU2MTcHdW5pRTYxOAd1bmlFNjE5B3VuaUU2MUEHdW5pRTYxQgd1bmlFNjFDB3VuaUU2MUQHdW5pRTYxRQd1bmlFNjFGB3VuaUU2MjAHdW5pRTYyMQAA"},function(e,t,i){var n,r,a,s={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return r=void 0===r?n.apply(this,arguments):r}),l=(a={},function(e,t){if("function"==typeof e)return e();if(void 0===a[e]){if(t=function(e,t){return(t||document).querySelector(e)}.call(this,e,t),window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}a[e]=t}return a[e]}),h=null,u=0,d=[],c=i(260);function f(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=s[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(v(n.parts[a],t))}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(v(n.parts[a],t));s[n.id]={id:n.id,refs:1,parts:o}}}}function p(e,t){for(var i=[],n={},r=0;r<e.length;r++){var a=e[r],s=t.base?a[0]+t.base:a[0];a={css:a[1],media:a[2],sourceMap:a[3]},n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function m(e,t){var i=l(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=d[d.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),d.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");n=l(e.insertAt.before,i),i.insertBefore(t,n)}}function g(e){null!==e.parentNode&&(e.parentNode.removeChild(e),0<=(e=d.indexOf(e)))&&d.splice(e,1)}function _(e){var t,n=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce&&(t=i.nc)&&(e.attrs.nonce=t),y(n,e.attrs),m(e,n),n}function y(e,t){Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))}function v(e,t){var i,n,r,a,s;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}return r=t.singleton?(a=u++,i=h=h||_(t),n=b.bind(null,i,a,!1),b.bind(null,i,a,!0)):e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=t,s=document.createElement("link"),void 0===a.attrs.type&&(a.attrs.type="text/css"),a.attrs.rel="stylesheet",y(s,a.attrs),m(a,s),n=function(e,t,i){var n=i.css,r=(i=i.sourceMap,void 0===t.convertToAbsoluteUrls&&i);(t.convertToAbsoluteUrls||r)&&(n=c(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t=new Blob([n],{type:"text/css"}),r=e.href,e.href=URL.createObjectURL(t),r&&URL.revokeObjectURL(r)}.bind(null,i=s,t),function(){g(i),i.href&&URL.revokeObjectURL(i.href)}):(i=_(t),n=function(e,t){var i=t.css;if((t=t.media)&&e.setAttribute("media",t),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),function(){g(i)}),n(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap||n(e=t):r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=p(e,t);return f(i,t),function(e){for(var n=[],r=0;r<i.length;r++){var a=i[r];(o=s[a.id]).refs--,n.push(o)}var o;for(e&&f(p(e,t),t),r=0;r<n.length;r++)if(0===(o=n[r]).refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete s[o.id]}}},A=[];var A,E=function(e,t){return A[e]=t,A.filter(Boolean).join("\n")};function b(e,t,i,n){i=i?"":n.css,e.styleSheet?e.styleSheet.cssText=E(t,i):(n=document.createTextNode(i),(i=e.childNodes)[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n))}},function(e,t){e.exports=function(e){var t,i,n="undefined"!=typeof window&&window.location;if(n)return e&&"string"==typeof e?(t=n.protocol+"//"+n.host,i=t+n.pathname.replace(/\/[^\/]*$/,"/"),e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,n){return n=n.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t})),/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?e:(e=0===n.indexOf("//")?n:0===n.indexOf("/")?t+n:i+n.replace(/^\.\//,""),"url("+JSON.stringify(e)+")")}))):e;throw new Error("fixUrls requires window.location")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t);var n=i(22),r=i.n(n);function a(){return r()('/*! WebPlayer built @3/25/2024, 2:47:27 PM */!function(r){var n={};function o(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,r){"use strict";r.r(t);const n={WASM_LOAD_FINISH:0,DECRYPE_CONTENT:1,WAMS_ERROR:111},o={GET_DECRYPE_CONTENT:0,DESTROR_WAMS:1,LOAD_WAMS_JS:111};self.Module={onRuntimeInitialized:function(){self.decrype&&self.decrype.onWasmLoaded()},onAbort:function(e){self.postMessage({t:n.WAMS_ERROR,data:{msg:""+e,errorType:(void 0).NOT_SUPPORT,event:(void 0).WASM_ERROR}})},locateFile:function(e){return e.startsWith("http")?e:self.wasmPath+e}},self.wasmPath=null;self.onmessage=e=>{var t=e["data"];switch(t.t){case o.GET_DECRYPE_CONTENT:self.decrype.getDecrypeContent(t.encrypeKey);break;case o.LOAD_WAMS_JS:self.decrype.loadJs(t.pathUrl);break;case o.DESTROR_WAMS:self.decrype.destroy()}},self.decrype=new class{constructor(){this.wasmLoaded=!1,this.privateKey="LbhexgsgihBYYM8rBQUNM9RAYjXdFPdeiwTmww+Mw2gSCXDqexH6B+kfIglVjnAH\\nX9UIgPVtu10e4Ls=\\n"}onWasmLoaded(){this.wasmLoaded||(this.wasmLoaded=!0,self.postMessage({t:n.WASM_LOAD_FINISH}))}loadJs(e){self.wasmPath=e,self.importScripts(e+"license.js")}getDecrypeContent(e){e=Module.getLicenseStr(e,this.privateKey);self.postMessage({t:n.DECRYPE_CONTENT,data:e})}destroy(){Module.HEAP8&&Module.HEAP8.buffer&&(Module.HEAP8.buffer=null)}}}]);',"Worker",void 0,i.p+"license.worker.worker.js")}const s="linceseError",o="CheckPass",l={NO_APPID:"noAppid",NO_LICENSE:"noLicense",ERROR_LICENSE_URL:"errorLicenseUrl",WASM_ERROR:"wasmError",CHECK_SUCCESS:"checkSuccess",DOMAIN_FAIL:"domainFail",IS_EXPIRED:"isExpired",FETCH_ERROR:"fetchError",BASE_FUNC_NOT_SUPPORT:"baseFuncNotSupport",EXPIRED_COUNT_DOWM:"expiredCountDown"},h={CHECK_SUCCESS:0,NO_APPID:51,NO_LICENSE:52,ERROR_LICENSE_URL:53,DOMAIN_FAIL:54,IS_EXPIRED:55,FETCH_ERROR:56,BASE_FUNC_NOT_SUPPORT:57,EXPIRED_COUNT_DOWM:58},u="NO_APPID",d="NO_LICENSE",c="ERROR_LICENSE_URL",f="DOMAIN_FAIL",p="CHECK_SUCCESS",m="IS_EXPIRED",g="FETCH_ERROR",_="BASE_FUNC_NOT_SUPPORT",y="EXPIRED_COUNT_DOWM",v=0,A=1,E=111,b=0,w=1,S=111;var T=i(19),C=(n=i(67),i.n(n)),L=(n=i(5),i.n(n));t.default=class{constructor(e,t){this.licenseUrl=e,this.appid=t,this.worker=null,this.onMessage=null,this.localDomain=["127.0.0.1","localhost"],this.mediaInfo=null,this.isHighVersion=null}async init(){var e;this.localDomain.includes(location.hostname)?this.onMessage&&this.onMessage({code:h.CHECK_SUCCESS,event:l.CHECK_SUCCESS}):this.appid?this.licenseUrl?(e=this.licenseUrl.split("/").pop(),`player${C()(this.appid)}.license`!=e?this.onMessage&&this.onMessage(this.setError(c,s)):this.loadlicenseWasm()):this.onMessage&&this.onMessage(this.setError(d,s)):this.onMessage&&this.onMessage(this.setError(u,s))}async getlicenseContent(){var e=await fetch(this.licenseUrl);200!==e.status?this.onMessage(this.setError(g,s)):200===e.status&&(e=await e.text(),this.worker.postMessage({t:b,encrypeKey:e}))}loadlicenseWasm(){this.worker=new a;var e=Object(T.getPlayerPath)();this.worker.postMessage({t:S,pathUrl:e}),this.worker.onmessage=e=>{var t=e.data;switch(t.t){case v:this.getlicenseContent();break;case A:this.checkDecrypeContent(t.data);break;case E:this.onMessage&&this.onMessage(t.data)}}}checkDecrypeContent(e){var{vc:e,expireTime:t,funcCodeList:i}=JSON.parse(e);return this._checkHostName(e)?(this.isHighVersion=!!(i&&1<i.length),this._checkFuncList(),Date.now()-6048e5>new Date(t)?this.onMessage&&this.onMessage(this.setError(m,s)):Date.now()>new Date(t)?(e=parseInt((Date.now()-new Date(t))/864e5),this.onMessage&&this.onMessage(this.setError(y,s,e))):void(this.onMessage&&this.onMessage(this.setError(p,o)))):this.onMessage&&this.onMessage(this.setError(f,s))}_checkHostName(e){var t=[],i=location.hostname.split(".");let n=!1;for(let e=0;e<i.length;e++){var r="";for(let t=e+1;t<i.length;t++)r=r?r+"."+i[t]:i[e]+"."+i[t];r&&(0!=e&&(r="*."+r),t.push(r))}for(let i=0;i<t.length;i++)if(e==C()(t[i]+C()(this.appid))){n=!0;break}return n}setMediaData(e){this.mediaInfo=e,this._checkFuncList()}_checkFuncList(){var e;!this.mediaInfo||this.isHighVersion||(e=this.mediaInfo,0!=this.isHighVersion)||!e.formatType||e.formatType!=L.a.PLAYER_IN_TYPE_TS&&e.videoCodec!=L.a.CODEC_H265&&e.videoCodec!=L.a.CODEC_AV1||this.onMessage&&this.onMessage(this.setError(_,s))}setError(e,t,i){return{code:h[e],event:l[e],errorType:t,type:e,expireDay:i}}destroy(){this.worker&&(this.worker.postMessage({t:w}),this.worker)&&this.worker.terminate(),this.worker=null,this.onMessage=null,this.mediaInfo=null,this.isHighVersion=null}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){e.exports=i(135)}],i={},e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=323);function e(n){var r;return(i[n]||(r=i[n]={i:n,l:!1,exports:{}},t[n].call(r.exports,r,r.exports,e),r.l=!0,r)).exports}var t,i},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cyberplayer=t():e.cyberplayer=t();